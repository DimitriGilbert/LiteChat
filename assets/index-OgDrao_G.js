var O$=Object.defineProperty;var j$=(e,t,n)=>t in e?O$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ua=(e,t,n)=>j$(e,typeof t!="symbol"?t+"":t,n);function D$(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T_={exports:{}},Lp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p3;function M$(){if(p3)return Lp;p3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Lp.Fragment=t,Lp.jsx=n,Lp.jsxs=n,Lp}var m3;function P$(){return m3||(m3=1,T_.exports=M$()),T_.exports}var y=P$(),R_={exports:{}};function F$(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q4={exports:{}},na=q4.exports={},gs,ys;function BS(){throw new Error("setTimeout has not been defined")}function zS(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?gs=setTimeout:gs=BS}catch{gs=BS}try{typeof clearTimeout=="function"?ys=clearTimeout:ys=zS}catch{ys=zS}})();function H4(e){if(gs===setTimeout)return setTimeout(e,0);if((gs===BS||!gs)&&setTimeout)return gs=setTimeout,setTimeout(e,0);try{return gs(e,0)}catch{try{return gs.call(null,e,0)}catch{return gs.call(this,e,0)}}}function L$(e){if(ys===clearTimeout)return clearTimeout(e);if((ys===zS||!ys)&&clearTimeout)return ys=clearTimeout,clearTimeout(e);try{return ys(e)}catch{try{return ys.call(null,e)}catch{return ys.call(this,e)}}}var wl=[],Nf=!1,qc,Hy=-1;function $$(){!Nf||!qc||(Nf=!1,qc.length?wl=qc.concat(wl):Hy=-1,wl.length&&V4())}function V4(){if(!Nf){var e=H4($$);Nf=!0;for(var t=wl.length;t;){for(qc=wl,wl=[];++Hy<t;)qc&&qc[Hy].run();Hy=-1,t=wl.length}qc=null,Nf=!1,L$(e)}}na.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];wl.push(new G4(e,t)),wl.length===1&&!Nf&&H4(V4)};function G4(e,t){this.fun=e,this.array=t}G4.prototype.run=function(){this.fun.apply(null,this.array)};na.title="browser";na.browser=!0;na.env={};na.argv=[];na.version="";na.versions={};function Dl(){}na.on=Dl;na.addListener=Dl;na.once=Dl;na.off=Dl;na.removeListener=Dl;na.removeAllListeners=Dl;na.emit=Dl;na.prependListener=Dl;na.prependOnceListener=Dl;na.listeners=function(e){return[]};na.binding=function(e){throw new Error("process.binding is not supported")};na.cwd=function(){return"/"};na.chdir=function(e){throw new Error("process.chdir is not supported")};na.umask=function(){return 0};var B$=q4.exports;const Wr=F$(B$);var jn={},g3;function z$(){if(g3)return jn;g3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function _(G,X,oe){this.props=G,this.context=X,this.refs=w,this.updater=oe||g}_.prototype.isReactComponent={},_.prototype.setState=function(G,X){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,X,"setState")},_.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(G,X,oe){this.props=G,this.context=X,this.refs=w,this.updater=oe||g}var E=S.prototype=new x;E.constructor=S,v(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function O(G,X,oe,ye,we,fe){return oe=fe.ref,{$$typeof:e,type:G,key:X,ref:oe!==void 0?oe:null,props:fe}}function N(G,X){return O(G.type,X,void 0,void 0,void 0,G.props)}function z(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function H(G){var X={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(oe){return X[oe]})}var Q=/\/+/g;function P(G,X){return typeof G=="object"&&G!==null&&G.key!=null?H(""+G.key):X.toString(36)}function Z(){}function V(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Z,Z):(G.status="pending",G.then(function(X){G.status==="pending"&&(G.status="fulfilled",G.value=X)},function(X){G.status==="pending"&&(G.status="rejected",G.reason=X)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function te(G,X,oe,ye,we){var fe=typeof G;(fe==="undefined"||fe==="boolean")&&(G=null);var Me=!1;if(G===null)Me=!0;else switch(fe){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(G.$$typeof){case e:case t:Me=!0;break;case f:return Me=G._init,te(Me(G._payload),X,oe,ye,we)}}if(Me)return we=we(G),Me=ye===""?"."+P(G,0):ye,C(we)?(oe="",Me!=null&&(oe=Me.replace(Q,"$&/")+"/"),te(we,X,oe,"",function(Re){return Re})):we!=null&&(z(we)&&(we=N(we,oe+(we.key==null||G&&G.key===we.key?"":(""+we.key).replace(Q,"$&/")+"/")+Me)),X.push(we)),1;Me=0;var Fe=ye===""?".":ye+":";if(C(G))for(var Oe=0;Oe<G.length;Oe++)ye=G[Oe],fe=Fe+P(ye,Oe),Me+=te(ye,X,oe,fe,we);else if(Oe=m(G),typeof Oe=="function")for(G=Oe.call(G),Oe=0;!(ye=G.next()).done;)ye=ye.value,fe=Fe+P(ye,Oe++),Me+=te(ye,X,oe,fe,we);else if(fe==="object"){if(typeof G.then=="function")return te(V(G),X,oe,ye,we);throw X=String(G),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ae(G,X,oe){if(G==null)return G;var ye=[],we=0;return te(G,ye,"","",function(fe){return X.call(oe,fe,we++)}),ye}function re(G){if(G._status===-1){var X=G._result;X=X(),X.then(function(oe){(G._status===0||G._status===-1)&&(G._status=1,G._result=oe)},function(oe){(G._status===0||G._status===-1)&&(G._status=2,G._result=oe)}),G._status===-1&&(G._status=0,G._result=X)}if(G._status===1)return G._result.default;throw G._result}var Y=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(X))return}else if(typeof Wr=="object"&&typeof Wr.emit=="function"){Wr.emit("uncaughtException",G);return}console.error(G)};function ne(){}return jn.Children={map:ae,forEach:function(G,X,oe){ae(G,function(){X.apply(this,arguments)},oe)},count:function(G){var X=0;return ae(G,function(){X++}),X},toArray:function(G){return ae(G,function(X){return X})||[]},only:function(G){if(!z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},jn.Component=_,jn.Fragment=n,jn.Profiler=a,jn.PureComponent=S,jn.StrictMode=r,jn.Suspense=u,jn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,jn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return A.H.useMemoCache(G)}},jn.cache=function(G){return function(){return G.apply(null,arguments)}},jn.cloneElement=function(G,X,oe){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var ye=v({},G.props),we=G.key,fe=void 0;if(X!=null)for(Me in X.ref!==void 0&&(fe=void 0),X.key!==void 0&&(we=""+X.key),X)!j.call(X,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&X.ref===void 0||(ye[Me]=X[Me]);var Me=arguments.length-2;if(Me===1)ye.children=oe;else if(1<Me){for(var Fe=Array(Me),Oe=0;Oe<Me;Oe++)Fe[Oe]=arguments[Oe+2];ye.children=Fe}return O(G.type,we,void 0,void 0,fe,ye)},jn.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:i,_context:G},G},jn.createElement=function(G,X,oe){var ye,we={},fe=null;if(X!=null)for(ye in X.key!==void 0&&(fe=""+X.key),X)j.call(X,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(we[ye]=X[ye]);var Me=arguments.length-2;if(Me===1)we.children=oe;else if(1<Me){for(var Fe=Array(Me),Oe=0;Oe<Me;Oe++)Fe[Oe]=arguments[Oe+2];we.children=Fe}if(G&&G.defaultProps)for(ye in Me=G.defaultProps,Me)we[ye]===void 0&&(we[ye]=Me[ye]);return O(G,fe,void 0,void 0,null,we)},jn.createRef=function(){return{current:null}},jn.forwardRef=function(G){return{$$typeof:s,render:G}},jn.isValidElement=z,jn.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:re}},jn.memo=function(G,X){return{$$typeof:c,type:G,compare:X===void 0?null:X}},jn.startTransition=function(G){var X=A.T,oe={};A.T=oe;try{var ye=G(),we=A.S;we!==null&&we(oe,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(ne,Y)}catch(fe){Y(fe)}finally{A.T=X}},jn.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},jn.use=function(G){return A.H.use(G)},jn.useActionState=function(G,X,oe){return A.H.useActionState(G,X,oe)},jn.useCallback=function(G,X){return A.H.useCallback(G,X)},jn.useContext=function(G){return A.H.useContext(G)},jn.useDebugValue=function(){},jn.useDeferredValue=function(G,X){return A.H.useDeferredValue(G,X)},jn.useEffect=function(G,X,oe){var ye=A.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ye.useEffect(G,X)},jn.useId=function(){return A.H.useId()},jn.useImperativeHandle=function(G,X,oe){return A.H.useImperativeHandle(G,X,oe)},jn.useInsertionEffect=function(G,X){return A.H.useInsertionEffect(G,X)},jn.useLayoutEffect=function(G,X){return A.H.useLayoutEffect(G,X)},jn.useMemo=function(G,X){return A.H.useMemo(G,X)},jn.useOptimistic=function(G,X){return A.H.useOptimistic(G,X)},jn.useReducer=function(G,X,oe){return A.H.useReducer(G,X,oe)},jn.useRef=function(G){return A.H.useRef(G)},jn.useState=function(G){return A.H.useState(G)},jn.useSyncExternalStore=function(G,X,oe){return A.H.useSyncExternalStore(G,X,oe)},jn.useTransition=function(){return A.H.useTransition()},jn.version="19.1.0",jn}var y3;function aE(){return y3||(y3=1,R_.exports=z$()),R_.exports}var L=aE();const wt=Qa(L),W4=D$({__proto__:null,default:wt},[L]);var N_={exports:{}},$p={},I_={exports:{}},O_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b3;function U$(){return b3||(b3=1,function(e){function t(ae,re){var Y=ae.length;ae.push(re);e:for(;0<Y;){var ne=Y-1>>>1,G=ae[ne];if(0<a(G,re))ae[ne]=re,ae[Y]=G,Y=ne;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var re=ae[0],Y=ae.pop();if(Y!==re){ae[0]=Y;e:for(var ne=0,G=ae.length,X=G>>>1;ne<X;){var oe=2*(ne+1)-1,ye=ae[oe],we=oe+1,fe=ae[we];if(0>a(ye,Y))we<G&&0>a(fe,ye)?(ae[ne]=fe,ae[we]=Y,ne=we):(ae[ne]=ye,ae[oe]=Y,ne=oe);else if(we<G&&0>a(fe,Y))ae[ne]=fe,ae[we]=Y,ne=we;else break e}}return re}function a(ae,re){var Y=ae.sortIndex-re.sortIndex;return Y!==0?Y:ae.id-re.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],c=[],f=1,h=null,m=3,g=!1,v=!1,w=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ae){for(var re=n(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=ae)r(c),re.sortIndex=re.expirationTime,t(u,re);else break;re=n(c)}}function A(ae){if(w=!1,C(ae),!v)if(n(u)!==null)v=!0,j||(j=!0,P());else{var re=n(c);re!==null&&te(A,re.startTime-ae)}}var j=!1,O=-1,N=5,z=-1;function H(){return _?!0:!(e.unstable_now()-z<N)}function Q(){if(_=!1,j){var ae=e.unstable_now();z=ae;var re=!0;try{e:{v=!1,w&&(w=!1,S(O),O=-1),g=!0;var Y=m;try{t:{for(C(ae),h=n(u);h!==null&&!(h.expirationTime>ae&&H());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,m=h.priorityLevel;var G=ne(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof G=="function"){h.callback=G,C(ae),re=!0;break t}h===n(u)&&r(u),C(ae)}else r(u);h=n(u)}if(h!==null)re=!0;else{var X=n(c);X!==null&&te(A,X.startTime-ae),re=!1}}break e}finally{h=null,m=Y,g=!1}re=void 0}}finally{re?P():j=!1}}}var P;if(typeof E=="function")P=function(){E(Q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,V=Z.port2;Z.port1.onmessage=Q,P=function(){V.postMessage(null)}}else P=function(){x(Q,0)};function te(ae,re){O=x(function(){ae(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ae){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var Y=m;m=re;try{return ae()}finally{m=Y}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(ae,re){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var Y=m;m=ae;try{return re()}finally{m=Y}},e.unstable_scheduleCallback=function(ae,re,Y){var ne=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,ae){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Y+G,ae={id:f++,callback:re,priorityLevel:ae,startTime:Y,expirationTime:G,sortIndex:-1},Y>ne?(ae.sortIndex=Y,t(c,ae),n(u)===null&&ae===n(c)&&(w?(S(O),O=-1):w=!0,te(A,Y-ne))):(ae.sortIndex=G,t(u,ae),v||g||(v=!0,j||(j=!0,P()))),ae},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(ae){var re=m;return function(){var Y=m;m=re;try{return ae.apply(this,arguments)}finally{m=Y}}}}(O_)),O_}var v3;function q$(){return v3||(v3=1,I_.exports=U$()),I_.exports}var j_={exports:{}},qa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w3;function H$(){if(w3)return qa;w3=1;var e=aE();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return qa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,qa.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},qa.flushSync=function(u){var c=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=c,r.p=f,r.d.f()}},qa.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},qa.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},qa.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},qa.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=s(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},qa.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},qa.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=s(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},qa.requestFormReset=function(u){r.d.r(u)},qa.unstable_batchedUpdates=function(u,c){return u(c)},qa.useFormState=function(u,c,f){return o.H.useFormState(u,c,f)},qa.useFormStatus=function(){return o.H.useHostTransitionStatus()},qa.version="19.1.0",qa}var _3;function K4(){if(_3)return j_.exports;_3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),j_.exports=H$(),j_.exports}var x3;function V$(){if(x3)return $p;x3=1;var e=q$(),t=aE(),n=K4();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(i(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,b=d;;){var T=p.return;if(T===null)break;var M=T.alternate;if(M===null){if(b=T.return,b!==null){p=b;continue}break}if(T.child===M.child){for(M=T.child;M;){if(M===p)return s(T),l;if(M===b)return s(T),d;M=M.sibling}throw Error(r(188))}if(p.return!==b.return)p=T,b=M;else{for(var ie=!1,_e=T.child;_e;){if(_e===p){ie=!0,p=T,b=M;break}if(_e===b){ie=!0,b=T,p=M;break}_e=_e.sibling}if(!ie){for(_e=M.child;_e;){if(_e===p){ie=!0,p=M,b=T;break}if(_e===b){ie=!0,b=M,p=T;break}_e=_e.sibling}if(!ie)throw Error(r(189))}}if(p.alternate!==b)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:(l=Q&&l[Q]||l["@@iterator"],typeof l=="function"?l:null)}var Z=Symbol.for("react.client.reference");function V(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case A:return"Suspense";case j:return"SuspenseList";case z:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case E:return(l.displayName||"Context")+".Provider";case S:return(l._context.displayName||"Context")+".Consumer";case C:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return d=l.displayName||null,d!==null?d:V(l.type)||"Memo";case N:d=l._payload,l=l._init;try{return V(l(d))}catch{}}return null}var te=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ne=[],G=-1;function X(l){return{current:l}}function oe(l){0>G||(l.current=ne[G],ne[G]=null,G--)}function ye(l,d){G++,ne[G]=l.current,l.current=d}var we=X(null),fe=X(null),Me=X(null),Fe=X(null);function Oe(l,d){switch(ye(Me,d),ye(fe,l),ye(we,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?UT(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=UT(d),l=qT(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}oe(we),ye(we,l)}function Re(){oe(we),oe(fe),oe(Me)}function ze(l){l.memoizedState!==null&&ye(Fe,l);var d=we.current,p=qT(d,l.type);d!==p&&(ye(fe,l),ye(we,p))}function He(l){fe.current===l&&(oe(we),oe(fe)),Fe.current===l&&(oe(Fe),jp._currentValue=Y)}var Te=Object.prototype.hasOwnProperty,Ce=e.unstable_scheduleCallback,B=e.unstable_cancelCallback,ke=e.unstable_shouldYield,Ae=e.unstable_requestPaint,ce=e.unstable_now,se=e.unstable_getCurrentPriorityLevel,J=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Pe=e.unstable_NormalPriority,Se=e.unstable_LowPriority,Ze=e.unstable_IdlePriority,Et=e.log,at=e.unstable_setDisableYieldValue,_t=null,Nt=null;function Rt(l){if(typeof Et=="function"&&at(l),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(_t,l)}catch{}}var Kt=Math.clz32?Math.clz32:q,pe=Math.log,R=Math.LN2;function q(l){return l>>>=0,l===0?32:31-(pe(l)/R|0)|0}var de=256,Ie=4194304;function be(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ee(l,d,p){var b=l.pendingLanes;if(b===0)return 0;var T=0,M=l.suspendedLanes,ie=l.pingedLanes;l=l.warmLanes;var _e=b&134217727;return _e!==0?(b=_e&~M,b!==0?T=be(b):(ie&=_e,ie!==0?T=be(ie):p||(p=_e&~l,p!==0&&(T=be(p))))):(_e=b&~M,_e!==0?T=be(_e):ie!==0?T=be(ie):p||(p=b&~l,p!==0&&(T=be(p)))),T===0?0:d!==0&&d!==T&&(d&M)===0&&(M=T&-T,p=d&-d,M>=p||M===32&&(p&4194048)!==0)?d:T}function le(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ft(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var l=de;return de<<=1,(de&4194048)===0&&(de=256),l}function D(){var l=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),l}function $e(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function st(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ge(l,d,p,b,T,M){var ie=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var _e=l.entanglements,Be=l.expirationTimes,ct=l.hiddenUpdates;for(p=ie&~p;0<p;){var St=31-Kt(p),At=1<<St;_e[St]=0,Be[St]=-1;var pt=ct[St];if(pt!==null)for(ct[St]=null,St=0;St<pt.length;St++){var mt=pt[St];mt!==null&&(mt.lane&=-536870913)}p&=~At}b!==0&&De(l,b,0),M!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=M&~(ie&~d))}function De(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-Kt(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|p&4194090}function Je(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var b=31-Kt(p),T=1<<b;T&d|l[b]&d&&(l[b]|=d),p&=~T}}function It(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function me(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function U(){var l=re.p;return l!==0?l:(l=window.event,l===void 0?32:l3(l.type))}function $(l,d){var p=re.p;try{return re.p=l,d()}finally{re.p=p}}var W=Math.random().toString(36).slice(2),he="__reactFiber$"+W,Ne="__reactProps$"+W,Ve="__reactContainer$"+W,gt="__reactEvents$"+W,Gt="__reactListeners$"+W,ht="__reactHandles$"+W,Ct="__reactResources$"+W,Ot="__reactMarker$"+W;function Zt(l){delete l[he],delete l[Ne],delete l[gt],delete l[Gt],delete l[ht]}function En(l){var d=l[he];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Ve]||p[he]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=WT(l);l!==null;){if(p=l[he])return p;l=WT(l)}return d}l=p,p=l.parentNode}return null}function zn(l){if(l=l[he]||l[Ve]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function fr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function hr(l){var d=l[Ct];return d||(d=l[Ct]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Dn(l){l[Ot]=!0}var ti=new Set,Xo={};function Jo(l,d){Qo(l,d),Qo(l+"Capture",d)}function Qo(l,d){for(Xo[l]=d,l=0;l<d.length;l++)ti.add(d[l])}var $r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),es={},Xi={};function tg(l){return Te.call(Xi,l)?!0:Te.call(es,l)?!1:$r.test(l)?Xi[l]=!0:(es[l]=!0,!1)}function xo(l,d,p){if(tg(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Bs(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Ii(l,d,p,b){if(b===null)l.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+b)}}var uc,ts;function zs(l){if(uc===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);uc=d&&d[1]||"",ts=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uc+l+ts}var Ll=!1;function kd(l,d){if(!l||Ll)return"";Ll=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var At=function(){throw Error()};if(Object.defineProperty(At.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(At,[])}catch(mt){var pt=mt}Reflect.construct(l,[],At)}else{try{At.call()}catch(mt){pt=mt}l.call(At.prototype)}}else{try{throw Error()}catch(mt){pt=mt}(At=l())&&typeof At.catch=="function"&&At.catch(function(){})}}catch(mt){if(mt&&pt&&typeof mt.stack=="string")return[mt.stack,pt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=b.DetermineComponentFrameRoot(),ie=M[0],_e=M[1];if(ie&&_e){var Be=ie.split(`
`),ct=_e.split(`
`);for(T=b=0;b<Be.length&&!Be[b].includes("DetermineComponentFrameRoot");)b++;for(;T<ct.length&&!ct[T].includes("DetermineComponentFrameRoot");)T++;if(b===Be.length||T===ct.length)for(b=Be.length-1,T=ct.length-1;1<=b&&0<=T&&Be[b]!==ct[T];)T--;for(;1<=b&&0<=T;b--,T--)if(Be[b]!==ct[T]){if(b!==1||T!==1)do if(b--,T--,0>T||Be[b]!==ct[T]){var St=`
`+Be[b].replace(" at new "," at ");return l.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",l.displayName)),St}while(1<=b&&0<=T);break}}}finally{Ll=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?zs(p):""}function Un(l){switch(l.tag){case 26:case 27:case 5:return zs(l.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 15:return kd(l.type,!1);case 11:return kd(l.type.render,!1);case 1:return kd(l.type,!0);case 31:return zs("Activity");default:return""}}function Mh(l){try{var d="";do d+=Un(l),l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ni(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ph(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function wr(l){var d=Ph(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var T=p.get,M=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(ie){b=""+ie,M.call(this,ie)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return b},setValue:function(ie){b=""+ie},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function ns(l){l._valueTracker||(l._valueTracker=wr(l))}function $l(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),b="";return l&&(b=Ph(l)?l.checked?"true":"false":l.value),l=b,l!==p?(d.setValue(l),!0):!1}function So(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Fh=/[\n"\\]/g;function La(l){return l.replace(Fh,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Bl(l,d,p,b,T,M,ie,_e){l.name="",ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?l.type=ie:l.removeAttribute("type"),d!=null?ie==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ni(d)):l.value!==""+ni(d)&&(l.value=""+ni(d)):ie!=="submit"&&ie!=="reset"||l.removeAttribute("value"),d!=null?zl(l,ie,ni(d)):p!=null?zl(l,ie,ni(p)):b!=null&&l.removeAttribute("value"),T==null&&M!=null&&(l.defaultChecked=!!M),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?l.name=""+ni(_e):l.removeAttribute("name")}function Lh(l,d,p,b,T,M,ie,_e){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(l.type=M),d!=null||p!=null){if(!(M!=="submit"&&M!=="reset"||d!=null))return;p=p!=null?""+ni(p):"",d=d!=null?""+ni(d):p,_e||d===l.value||(l.value=d),l.defaultValue=d}b=b??T,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=_e?l.checked:!!b,l.defaultChecked=!!b,ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(l.name=ie)}function zl(l,d,p){d==="number"&&So(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Us(l,d,p,b){if(l=l.options,d){d={};for(var T=0;T<p.length;T++)d["$"+p[T]]=!0;for(p=0;p<l.length;p++)T=d.hasOwnProperty("$"+l[p].value),l[p].selected!==T&&(l[p].selected=T),T&&b&&(l[p].defaultSelected=!0)}else{for(p=""+ni(p),d=null,T=0;T<l.length;T++){if(l[T].value===p){l[T].selected=!0,b&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function Ul(l,d,p){if(d!=null&&(d=""+ni(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+ni(p):""}function $h(l,d,p,b){if(d==null){if(b!=null){if(p!=null)throw Error(r(92));if(te(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),d=p}p=ni(d),l.defaultValue=p,b=l.textContent,b===p&&b!==""&&b!==null&&(l.value=b)}function ql(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var Vn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cd(l,d,p){var b=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,p):typeof p!="number"||p===0||Vn.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function ng(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var b in p)!p.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var T in d)b=d[T],d.hasOwnProperty(T)&&p[T]!==b&&Cd(l,T,b)}else for(var M in d)d.hasOwnProperty(M)&&Cd(l,M,d[M])}function Bh(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ri=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qs(l){return Hl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Ji=null;function Ad(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Hs=null,Rr=null;function Oi(l){var d=zn(l);if(d&&(l=d.stateNode)){var p=l[Ne]||null;e:switch(l=d.stateNode,d.type){case"input":if(Bl(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+La(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var b=p[d];if(b!==l&&b.form===l.form){var T=b[Ne]||null;if(!T)throw Error(r(90));Bl(b,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<p.length;d++)b=p[d],b.form===l.form&&$l(b)}break e;case"textarea":Ul(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Us(l,!!p.multiple,d,!1)}}}var Vs=!1;function Vl(l,d,p){if(Vs)return l(d,p);Vs=!0;try{var b=l(d);return b}finally{if(Vs=!1,(Hs!==null||Rr!==null)&&(Hg(),Hs&&(d=Hs,l=Rr,Rr=Hs=null,Oi(d),l)))for(d=0;d<l.length;d++)Oi(l[d])}}function Gs(l,d){var p=l.stateNode;if(p===null)return null;var b=p[Ne]||null;if(b===null)return null;p=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zh=!1;if(ga)try{var $a={};Object.defineProperty($a,"passive",{get:function(){zh=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{zh=!1}var Qi=null,Td=null,Gl=null;function Wl(){if(Gl)return Gl;var l,d=Td,p=d.length,b,T="value"in Qi?Qi.value:Qi.textContent,M=T.length;for(l=0;l<p&&d[l]===T[l];l++);var ie=p-l;for(b=1;b<=ie&&d[p-b]===T[M-b];b++);return Gl=T.slice(l,1<b?1-b:void 0)}function Kl(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function cc(){return!0}function rg(){return!1}function ra(l){function d(p,b,T,M,ie){this._reactName=p,this._targetInst=T,this.type=b,this.nativeEvent=M,this.target=ie,this.currentTarget=null;for(var _e in l)l.hasOwnProperty(_e)&&(p=l[_e],this[_e]=p?p(M):M[_e]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?cc:rg,this.isPropagationStopped=rg,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),d}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rd=ra(Ws),rs=f({},Ws,{view:0,detail:0}),Nd=ra(rs),dc,Uh,fc,Id=f({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==fc&&(fc&&l.type==="mousemove"?(dc=l.screenX-fc.screenX,Uh=l.screenY-fc.screenY):Uh=dc=0,fc=l),dc)},movementY:function(l){return"movementY"in l?l.movementY:Uh}}),Od=ra(Id),qh=f({},Id,{dataTransfer:0}),ag=ra(qh),jd=f({},rs,{relatedTarget:0}),Zl=ra(jd),Dd=f({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),ig=ra(Dd),Uw=f({},Ws,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Md=ra(Uw),Hh=f({},Ws,{data:0}),Pd=ra(Hh),Vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ya={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=ya[l])?!!d[l]:!1}function Ks(){return hc}var og=f({},rs,{key:function(l){if(l.key){var d=Vh[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Kl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Gh[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(l){return l.type==="keypress"?Kl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Kl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Fd=ra(og),sg=f({},Id,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wh=ra(sg),Ld=f({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),Kh=ra(Ld),Zs=f({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zh=ra(Zs),Yh=f({},Id,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),$d=ra(Yh),Xh=f({},Ws,{newState:0,oldState:0}),lg=ra(Xh),qw=[9,13,27,32],pc=ga&&"CompositionEvent"in window,as=null;ga&&"documentMode"in document&&(as=document.documentMode);var Hw=ga&&"TextEvent"in window&&!as,Bd=ga&&(!pc||as&&8<as&&11>=as),zd=" ",ug=!1;function Jh(l,d){switch(l){case"keyup":return qw.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cg(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ys=!1;function dg(l,d){switch(l){case"compositionend":return cg(d);case"keypress":return d.which!==32?null:(ug=!0,zd);case"textInput":return l=d.data,l===zd&&ug?null:l;default:return null}}function Vw(l,d){if(Ys)return l==="compositionend"||!pc&&Jh(l,d)?(l=Wl(),Gl=Td=Qi=null,Ys=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Bd&&d.locale!=="ko"?null:d.data;default:return null}}var fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ud(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!fg[l.type]:d==="textarea"}function Qh(l,d,p,b){Hs?Rr?Rr.push(b):Rr=[b]:Hs=b,d=Yg(d,"onChange"),0<d.length&&(p=new Rd("onChange","change",null,p,b),l.push({event:p,listeners:d}))}var Yl=null,mc=null;function Gw(l){FT(l,0)}function qd(l){var d=fr(l);if($l(d))return l}function gc(l,d){if(l==="change")return d}var eo=!1;if(ga){var Nr;if(ga){var Xl="oninput"in document;if(!Xl){var ai=document.createElement("div");ai.setAttribute("oninput","return;"),Xl=typeof ai.oninput=="function"}Nr=Xl}else Nr=!1;eo=Nr&&(!document.documentMode||9<document.documentMode)}function hg(){Yl&&(Yl.detachEvent("onpropertychange",Hd),mc=Yl=null)}function Hd(l){if(l.propertyName==="value"&&qd(mc)){var d=[];Qh(d,mc,l,Ad(l)),Vl(Gw,d)}}function pg(l,d,p){l==="focusin"?(hg(),Yl=d,mc=p,Yl.attachEvent("onpropertychange",Hd)):l==="focusout"&&hg()}function Xs(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return qd(mc)}function ep(l,d){if(l==="click")return qd(d)}function Jl(l,d){if(l==="input"||l==="change")return qd(d)}function is(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ba=typeof Object.is=="function"?Object.is:is;function k(l,d){if(Ba(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),b=Object.keys(d);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var T=p[b];if(!Te.call(d,T)||!Ba(l[T],d[T]))return!1}return!0}function I(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function K(l,d){var p=I(l);l=0;for(var b;p;){if(p.nodeType===3){if(b=l+p.textContent.length,l<=d&&b>=d)return{node:p,offset:d-l};l=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=I(p)}}function ee(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?ee(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function ue(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=So(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=So(l.document)}return d}function ve(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var je=ga&&"documentMode"in document&&11>=document.documentMode,Le=null,We=null,Ye=null,tt=!1;function qe(l,d,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;tt||Le==null||Le!==So(b)||(b=Le,"selectionStart"in b&&ve(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ye&&k(Ye,b)||(Ye=b,b=Yg(We,"onSelect"),0<b.length&&(d=new Rd("onSelect","select",null,d,p),l.push({event:d,listeners:b}),d.target=Le)))}function rt(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Ge={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionrun:rt("Transition","TransitionRun"),transitionstart:rt("Transition","TransitionStart"),transitioncancel:rt("Transition","TransitionCancel"),transitionend:rt("Transition","TransitionEnd")},et={},it={};ga&&(it=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Xe(l){if(et[l])return et[l];if(!Ge[l])return l;var d=Ge[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in it)return et[l]=d[p];return l}var dt=Xe("animationend"),yt=Xe("animationiteration"),bt=Xe("animationstart"),xt=Xe("transitionrun"),Ft=Xe("transitionstart"),qt=Xe("transitioncancel"),Dt=Xe("transitionend"),Bt=new Map,Vt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vt.push("scrollEnd");function Mt(l,d){Bt.set(l,d),Jo(d,[l])}var Xt=new WeakMap;function un(l,d){if(typeof l=="object"&&l!==null){var p=Xt.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Mh(d)},Xt.set(l,d),d)}return{value:l,source:d,stack:Mh(d)}}var fn=[],kn=0,Ia=0;function bn(){for(var l=kn,d=Ia=kn=0;d<l;){var p=fn[d];fn[d++]=null;var b=fn[d];fn[d++]=null;var T=fn[d];fn[d++]=null;var M=fn[d];if(fn[d++]=null,b!==null&&T!==null){var ie=b.pending;ie===null?T.next=T:(T.next=ie.next,ie.next=T),b.pending=T}M!==0&&ba(p,T,M)}}function Yr(l,d,p,b){fn[kn++]=l,fn[kn++]=d,fn[kn++]=p,fn[kn++]=b,Ia|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function aa(l,d,p,b){return Yr(l,d,p,b),to(l)}function Eo(l,d){return Yr(l,null,null,d),to(l)}function ba(l,d,p){l.lanes|=p;var b=l.alternate;b!==null&&(b.lanes|=p);for(var T=!1,M=l.return;M!==null;)M.childLanes|=p,b=M.alternate,b!==null&&(b.childLanes|=p),M.tag===22&&(l=M.stateNode,l===null||l._visibility&1||(T=!0)),l=M,M=M.return;return l.tag===3?(M=l.stateNode,T&&d!==null&&(T=31-Kt(p),l=M.hiddenUpdates,b=l[T],b===null?l[T]=[d]:b.push(d),d.lane=p|536870912),M):null}function to(l){if(50<kp)throw kp=0,J1=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var os={};function yL(l,d,p,b){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(l,d,p,b){return new yL(l,d,p,b)}function Ww(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Js(l,d){var p=l.alternate;return p===null?(p=ji(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function xC(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function mg(l,d,p,b,T,M){var ie=0;if(b=l,typeof l=="function")Ww(l)&&(ie=1);else if(typeof l=="string")ie=v$(l,p,we.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case z:return l=ji(31,p,d,T),l.elementType=z,l.lanes=M,l;case v:return yc(p.children,T,M,d);case w:ie=8,T|=24;break;case _:return l=ji(12,p,d,T|2),l.elementType=_,l.lanes=M,l;case A:return l=ji(13,p,d,T),l.elementType=A,l.lanes=M,l;case j:return l=ji(19,p,d,T),l.elementType=j,l.lanes=M,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case E:ie=10;break e;case S:ie=9;break e;case C:ie=11;break e;case O:ie=14;break e;case N:ie=16,b=null;break e}ie=29,p=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=ji(ie,p,d,T),d.elementType=l,d.type=b,d.lanes=M,d}function yc(l,d,p,b){return l=ji(7,l,b,d),l.lanes=p,l}function Kw(l,d,p){return l=ji(6,l,null,d),l.lanes=p,l}function Zw(l,d,p){return d=ji(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Vd=[],Gd=0,gg=null,yg=0,no=[],ro=0,bc=null,Qs=1,el="";function vc(l,d){Vd[Gd++]=yg,Vd[Gd++]=gg,gg=l,yg=d}function SC(l,d,p){no[ro++]=Qs,no[ro++]=el,no[ro++]=bc,bc=l;var b=Qs;l=el;var T=32-Kt(b)-1;b&=~(1<<T),p+=1;var M=32-Kt(d)+T;if(30<M){var ie=T-T%5;M=(b&(1<<ie)-1).toString(32),b>>=ie,T-=ie,Qs=1<<32-Kt(d)+T|p<<T|b,el=M+l}else Qs=1<<M|p<<T|b,el=l}function Yw(l){l.return!==null&&(vc(l,1),SC(l,1,0))}function Xw(l){for(;l===gg;)gg=Vd[--Gd],Vd[Gd]=null,yg=Vd[--Gd],Vd[Gd]=null;for(;l===bc;)bc=no[--ro],no[ro]=null,el=no[--ro],no[ro]=null,Qs=no[--ro],no[ro]=null}var ii=null,Vr=null,er=!1,wc=null,ss=!1,Jw=Error(r(519));function _c(l){var d=Error(r(418,""));throw rp(un(d,l)),Jw}function EC(l){var d=l.stateNode,p=l.type,b=l.memoizedProps;switch(d[he]=l,d[Ne]=b,p){case"dialog":Hn("cancel",d),Hn("close",d);break;case"iframe":case"object":case"embed":Hn("load",d);break;case"video":case"audio":for(p=0;p<Ap.length;p++)Hn(Ap[p],d);break;case"source":Hn("error",d);break;case"img":case"image":case"link":Hn("error",d),Hn("load",d);break;case"details":Hn("toggle",d);break;case"input":Hn("invalid",d),Lh(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),ns(d);break;case"select":Hn("invalid",d);break;case"textarea":Hn("invalid",d),$h(d,b.value,b.defaultValue,b.children),ns(d)}p=b.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||b.suppressHydrationWarning===!0||zT(d.textContent,p)?(b.popover!=null&&(Hn("beforetoggle",d),Hn("toggle",d)),b.onScroll!=null&&Hn("scroll",d),b.onScrollEnd!=null&&Hn("scrollend",d),b.onClick!=null&&(d.onclick=Xg),d=!0):d=!1,d||_c(l)}function kC(l){for(ii=l.return;ii;)switch(ii.tag){case 5:case 13:ss=!1;return;case 27:case 3:ss=!0;return;default:ii=ii.return}}function tp(l){if(l!==ii)return!1;if(!er)return kC(l),er=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||p_(l.type,l.memoizedProps)),p=!p),p&&Vr&&_c(l),kC(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(d===0){Vr=Co(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++;l=l.nextSibling}Vr=null}}else d===27?(d=Vr,pu(l.type)?(l=b_,b_=null,Vr=l):Vr=d):Vr=ii?Co(l.stateNode.nextSibling):null;return!0}function np(){Vr=ii=null,er=!1}function CC(){var l=wc;return l!==null&&(vi===null?vi=l:vi.push.apply(vi,l),wc=null),l}function rp(l){wc===null?wc=[l]:wc.push(l)}var Qw=X(null),xc=null,tl=null;function Ql(l,d,p){ye(Qw,d._currentValue),d._currentValue=p}function nl(l){l._currentValue=Qw.current,oe(Qw)}function e1(l,d,p){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===p)break;l=l.return}}function t1(l,d,p,b){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var M=T.dependencies;if(M!==null){var ie=T.child;M=M.firstContext;e:for(;M!==null;){var _e=M;M=T;for(var Be=0;Be<d.length;Be++)if(_e.context===d[Be]){M.lanes|=p,_e=M.alternate,_e!==null&&(_e.lanes|=p),e1(M.return,p,l),b||(ie=null);break e}M=_e.next}}else if(T.tag===18){if(ie=T.return,ie===null)throw Error(r(341));ie.lanes|=p,M=ie.alternate,M!==null&&(M.lanes|=p),e1(ie,p,l),ie=null}else ie=T.child;if(ie!==null)ie.return=T;else for(ie=T;ie!==null;){if(ie===l){ie=null;break}if(T=ie.sibling,T!==null){T.return=ie.return,ie=T;break}ie=ie.return}T=ie}}function ap(l,d,p,b){l=null;for(var T=d,M=!1;T!==null;){if(!M){if((T.flags&524288)!==0)M=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var ie=T.alternate;if(ie===null)throw Error(r(387));if(ie=ie.memoizedProps,ie!==null){var _e=T.type;Ba(T.pendingProps.value,ie.value)||(l!==null?l.push(_e):l=[_e])}}else if(T===Fe.current){if(ie=T.alternate,ie===null)throw Error(r(387));ie.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(jp):l=[jp])}T=T.return}l!==null&&t1(d,l,p,b),d.flags|=262144}function bg(l){for(l=l.firstContext;l!==null;){if(!Ba(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Sc(l){xc=l,tl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function za(l){return AC(xc,l)}function vg(l,d){return xc===null&&Sc(l),AC(l,d)}function AC(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},tl===null){if(l===null)throw Error(r(308));tl=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else tl=tl.next=d;return p}var bL=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},vL=e.unstable_scheduleCallback,wL=e.unstable_NormalPriority,ca={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function n1(){return{controller:new bL,data:new Map,refCount:0}}function ip(l){l.refCount--,l.refCount===0&&vL(wL,function(){l.controller.abort()})}var op=null,r1=0,Wd=0,Kd=null;function _L(l,d){if(op===null){var p=op=[];r1=0,Wd=i_(),Kd={status:"pending",value:void 0,then:function(b){p.push(b)}}}return r1++,d.then(TC,TC),d}function TC(){if(--r1===0&&op!==null){Kd!==null&&(Kd.status="fulfilled");var l=op;op=null,Wd=0,Kd=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function xL(l,d){var p=[],b={status:"pending",value:null,reason:null,then:function(T){p.push(T)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var T=0;T<p.length;T++)(0,p[T])(d)},function(T){for(b.status="rejected",b.reason=T,T=0;T<p.length;T++)(0,p[T])(void 0)}),b}var RC=ae.S;ae.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&_L(l,d),RC!==null&&RC(l,d)};var Ec=X(null);function a1(){var l=Ec.current;return l!==null?l:kr.pooledCache}function wg(l,d){d===null?ye(Ec,Ec.current):ye(Ec,d.pool)}function NC(){var l=a1();return l===null?null:{parent:ca._currentValue,pool:l}}var sp=Error(r(460)),IC=Error(r(474)),_g=Error(r(542)),i1={then:function(){}};function OC(l){return l=l.status,l==="fulfilled"||l==="rejected"}function xg(){}function jC(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(xg,xg),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,MC(l),l;default:if(typeof d.status=="string")d.then(xg,xg);else{if(l=kr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=b}},function(b){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,MC(l),l}throw lp=d,sp}}var lp=null;function DC(){if(lp===null)throw Error(r(459));var l=lp;return lp=null,l}function MC(l){if(l===sp||l===_g)throw Error(r(483))}var eu=!1;function o1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function s1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function tu(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function nu(l,d,p){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(sr&2)!==0){var T=b.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),b.pending=d,d=to(l),ba(l,null,p),d}return Yr(l,b,d,p),to(l)}function up(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Je(l,p)}}function l1(l,d){var p=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var T=null,M=null;if(p=p.firstBaseUpdate,p!==null){do{var ie={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};M===null?T=M=ie:M=M.next=ie,p=p.next}while(p!==null);M===null?T=M=d:M=M.next=d}else T=M=d;p={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:M,shared:b.shared,callbacks:b.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var u1=!1;function cp(){if(u1){var l=Kd;if(l!==null)throw l}}function dp(l,d,p,b){u1=!1;var T=l.updateQueue;eu=!1;var M=T.firstBaseUpdate,ie=T.lastBaseUpdate,_e=T.shared.pending;if(_e!==null){T.shared.pending=null;var Be=_e,ct=Be.next;Be.next=null,ie===null?M=ct:ie.next=ct,ie=Be;var St=l.alternate;St!==null&&(St=St.updateQueue,_e=St.lastBaseUpdate,_e!==ie&&(_e===null?St.firstBaseUpdate=ct:_e.next=ct,St.lastBaseUpdate=Be))}if(M!==null){var At=T.baseState;ie=0,St=ct=Be=null,_e=M;do{var pt=_e.lane&-536870913,mt=pt!==_e.lane;if(mt?(Gn&pt)===pt:(b&pt)===pt){pt!==0&&pt===Wd&&(u1=!0),St!==null&&(St=St.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var vn=l,hn=_e;pt=d;var gr=p;switch(hn.tag){case 1:if(vn=hn.payload,typeof vn=="function"){At=vn.call(gr,At,pt);break e}At=vn;break e;case 3:vn.flags=vn.flags&-65537|128;case 0:if(vn=hn.payload,pt=typeof vn=="function"?vn.call(gr,At,pt):vn,pt==null)break e;At=f({},At,pt);break e;case 2:eu=!0}}pt=_e.callback,pt!==null&&(l.flags|=64,mt&&(l.flags|=8192),mt=T.callbacks,mt===null?T.callbacks=[pt]:mt.push(pt))}else mt={lane:pt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},St===null?(ct=St=mt,Be=At):St=St.next=mt,ie|=pt;if(_e=_e.next,_e===null){if(_e=T.shared.pending,_e===null)break;mt=_e,_e=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);St===null&&(Be=At),T.baseState=Be,T.firstBaseUpdate=ct,T.lastBaseUpdate=St,M===null&&(T.shared.lanes=0),cu|=ie,l.lanes=ie,l.memoizedState=At}}function PC(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function FC(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)PC(p[l],d)}var Zd=X(null),Sg=X(0);function LC(l,d){l=ul,ye(Sg,l),ye(Zd,d),ul=l|d.baseLanes}function c1(){ye(Sg,ul),ye(Zd,Zd.current)}function d1(){ul=Sg.current,oe(Zd),oe(Sg)}var ru=0,Fn=null,pr=null,ia=null,Eg=!1,Yd=!1,kc=!1,kg=0,fp=0,Xd=null,SL=0;function Xr(){throw Error(r(321))}function f1(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Ba(l[p],d[p]))return!1;return!0}function h1(l,d,p,b,T,M){return ru=M,Fn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ae.H=l===null||l.memoizedState===null?_A:xA,kc=!1,M=p(b,T),kc=!1,Yd&&(M=BC(d,p,b,T)),$C(l),M}function $C(l){ae.H=Ig;var d=pr!==null&&pr.next!==null;if(ru=0,ia=pr=Fn=null,Eg=!1,fp=0,Xd=null,d)throw Error(r(300));l===null||va||(l=l.dependencies,l!==null&&bg(l)&&(va=!0))}function BC(l,d,p,b){Fn=l;var T=0;do{if(Yd&&(Xd=null),fp=0,Yd=!1,25<=T)throw Error(r(301));if(T+=1,ia=pr=null,l.updateQueue!=null){var M=l.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}ae.H=NL,M=d(p,b)}while(Yd);return M}function EL(){var l=ae.H,d=l.useState()[0];return d=typeof d.then=="function"?hp(d):d,l=l.useState()[0],(pr!==null?pr.memoizedState:null)!==l&&(Fn.flags|=1024),d}function p1(){var l=kg!==0;return kg=0,l}function m1(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function g1(l){if(Eg){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Eg=!1}ru=0,ia=pr=Fn=null,Yd=!1,fp=kg=0,Xd=null}function yi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ia===null?Fn.memoizedState=ia=l:ia=ia.next=l,ia}function oa(){if(pr===null){var l=Fn.alternate;l=l!==null?l.memoizedState:null}else l=pr.next;var d=ia===null?Fn.memoizedState:ia.next;if(d!==null)ia=d,pr=l;else{if(l===null)throw Fn.alternate===null?Error(r(467)):Error(r(310));pr=l,l={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},ia===null?Fn.memoizedState=ia=l:ia=ia.next=l}return ia}function y1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hp(l){var d=fp;return fp+=1,Xd===null&&(Xd=[]),l=jC(Xd,l,d),d=Fn,(ia===null?d.memoizedState:ia.next)===null&&(d=d.alternate,ae.H=d===null||d.memoizedState===null?_A:xA),l}function Cg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return hp(l);if(l.$$typeof===E)return za(l)}throw Error(r(438,String(l)))}function b1(l){var d=null,p=Fn.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var b=Fn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=y1(),Fn.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),b=0;b<l;b++)p[b]=H;return d.index++,p}function rl(l,d){return typeof d=="function"?d(l):d}function Ag(l){var d=oa();return v1(d,pr,l)}function v1(l,d,p){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=p;var T=l.baseQueue,M=b.pending;if(M!==null){if(T!==null){var ie=T.next;T.next=M.next,M.next=ie}d.baseQueue=T=M,b.pending=null}if(M=l.baseState,T===null)l.memoizedState=M;else{d=T.next;var _e=ie=null,Be=null,ct=d,St=!1;do{var At=ct.lane&-536870913;if(At!==ct.lane?(Gn&At)===At:(ru&At)===At){var pt=ct.revertLane;if(pt===0)Be!==null&&(Be=Be.next={lane:0,revertLane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),At===Wd&&(St=!0);else if((ru&pt)===pt){ct=ct.next,pt===Wd&&(St=!0);continue}else At={lane:0,revertLane:ct.revertLane,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Be===null?(_e=Be=At,ie=M):Be=Be.next=At,Fn.lanes|=pt,cu|=pt;At=ct.action,kc&&p(M,At),M=ct.hasEagerState?ct.eagerState:p(M,At)}else pt={lane:At,revertLane:ct.revertLane,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Be===null?(_e=Be=pt,ie=M):Be=Be.next=pt,Fn.lanes|=At,cu|=At;ct=ct.next}while(ct!==null&&ct!==d);if(Be===null?ie=M:Be.next=_e,!Ba(M,l.memoizedState)&&(va=!0,St&&(p=Kd,p!==null)))throw p;l.memoizedState=M,l.baseState=ie,l.baseQueue=Be,b.lastRenderedState=M}return T===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function w1(l){var d=oa(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var b=p.dispatch,T=p.pending,M=d.memoizedState;if(T!==null){p.pending=null;var ie=T=T.next;do M=l(M,ie.action),ie=ie.next;while(ie!==T);Ba(M,d.memoizedState)||(va=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),p.lastRenderedState=M}return[M,b]}function zC(l,d,p){var b=Fn,T=oa(),M=er;if(M){if(p===void 0)throw Error(r(407));p=p()}else p=d();var ie=!Ba((pr||T).memoizedState,p);ie&&(T.memoizedState=p,va=!0),T=T.queue;var _e=HC.bind(null,b,T,l);if(pp(2048,8,_e,[l]),T.getSnapshot!==d||ie||ia!==null&&ia.memoizedState.tag&1){if(b.flags|=2048,Jd(9,Tg(),qC.bind(null,b,T,p,d),null),kr===null)throw Error(r(349));M||(ru&124)!==0||UC(b,d,p)}return p}function UC(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=Fn.updateQueue,d===null?(d=y1(),Fn.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function qC(l,d,p,b){d.value=p,d.getSnapshot=b,VC(d)&&GC(l)}function HC(l,d,p){return p(function(){VC(d)&&GC(l)})}function VC(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Ba(l,p)}catch{return!0}}function GC(l){var d=Eo(l,2);d!==null&&Li(d,l,2)}function _1(l){var d=yi();if(typeof l=="function"){var p=l;if(l=p(),kc){Rt(!0);try{p()}finally{Rt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:l},d}function WC(l,d,p,b){return l.baseState=p,v1(l,pr,typeof b=="function"?b:rl)}function kL(l,d,p,b,T){if(Ng(l))throw Error(r(485));if(l=d.action,l!==null){var M={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){M.listeners.push(ie)}};ae.T!==null?p(!0):M.isTransition=!1,b(M),p=d.pending,p===null?(M.next=d.pending=M,KC(d,M)):(M.next=p.next,d.pending=p.next=M)}}function KC(l,d){var p=d.action,b=d.payload,T=l.state;if(d.isTransition){var M=ae.T,ie={};ae.T=ie;try{var _e=p(T,b),Be=ae.S;Be!==null&&Be(ie,_e),ZC(l,d,_e)}catch(ct){x1(l,d,ct)}finally{ae.T=M}}else try{M=p(T,b),ZC(l,d,M)}catch(ct){x1(l,d,ct)}}function ZC(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(b){YC(l,d,b)},function(b){return x1(l,d,b)}):YC(l,d,p)}function YC(l,d,p){d.status="fulfilled",d.value=p,XC(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,KC(l,p)))}function x1(l,d,p){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=p,XC(d),d=d.next;while(d!==b)}l.action=null}function XC(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function JC(l,d){return d}function QC(l,d){if(er){var p=kr.formState;if(p!==null){e:{var b=Fn;if(er){if(Vr){t:{for(var T=Vr,M=ss;T.nodeType!==8;){if(!M){T=null;break t}if(T=Co(T.nextSibling),T===null){T=null;break t}}M=T.data,T=M==="F!"||M==="F"?T:null}if(T){Vr=Co(T.nextSibling),b=T.data==="F!";break e}}_c(b)}b=!1}b&&(d=p[0])}}return p=yi(),p.memoizedState=p.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JC,lastRenderedState:d},p.queue=b,p=bA.bind(null,Fn,b),b.dispatch=p,b=_1(!1),M=A1.bind(null,Fn,!1,b.queue),b=yi(),T={state:d,dispatch:null,action:l,pending:null},b.queue=T,p=kL.bind(null,Fn,T,M,p),T.dispatch=p,b.memoizedState=l,[d,p,!1]}function eA(l){var d=oa();return tA(d,pr,l)}function tA(l,d,p){if(d=v1(l,d,JC)[0],l=Ag(rl)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=hp(d)}catch(ie){throw ie===sp?_g:ie}else b=d;d=oa();var T=d.queue,M=T.dispatch;return p!==d.memoizedState&&(Fn.flags|=2048,Jd(9,Tg(),CL.bind(null,T,p),null)),[b,M,l]}function CL(l,d){l.action=d}function nA(l){var d=oa(),p=pr;if(p!==null)return tA(d,p,l);oa(),d=d.memoizedState,p=oa();var b=p.queue.dispatch;return p.memoizedState=l,[d,b,!1]}function Jd(l,d,p,b){return l={tag:l,create:p,deps:b,inst:d,next:null},d=Fn.updateQueue,d===null&&(d=y1(),Fn.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(b=p.next,p.next=l,l.next=b,d.lastEffect=l),l}function Tg(){return{destroy:void 0,resource:void 0}}function rA(){return oa().memoizedState}function Rg(l,d,p,b){var T=yi();b=b===void 0?null:b,Fn.flags|=l,T.memoizedState=Jd(1|d,Tg(),p,b)}function pp(l,d,p,b){var T=oa();b=b===void 0?null:b;var M=T.memoizedState.inst;pr!==null&&b!==null&&f1(b,pr.memoizedState.deps)?T.memoizedState=Jd(d,M,p,b):(Fn.flags|=l,T.memoizedState=Jd(1|d,M,p,b))}function aA(l,d){Rg(8390656,8,l,d)}function iA(l,d){pp(2048,8,l,d)}function oA(l,d){return pp(4,2,l,d)}function sA(l,d){return pp(4,4,l,d)}function lA(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function uA(l,d,p){p=p!=null?p.concat([l]):null,pp(4,4,lA.bind(null,d,l),p)}function S1(){}function cA(l,d){var p=oa();d=d===void 0?null:d;var b=p.memoizedState;return d!==null&&f1(d,b[1])?b[0]:(p.memoizedState=[l,d],l)}function dA(l,d){var p=oa();d=d===void 0?null:d;var b=p.memoizedState;if(d!==null&&f1(d,b[1]))return b[0];if(b=l(),kc){Rt(!0);try{l()}finally{Rt(!1)}}return p.memoizedState=[b,d],b}function E1(l,d,p){return p===void 0||(ru&1073741824)!==0?l.memoizedState=d:(l.memoizedState=p,l=pT(),Fn.lanes|=l,cu|=l,p)}function fA(l,d,p,b){return Ba(p,d)?p:Zd.current!==null?(l=E1(l,p,b),Ba(l,d)||(va=!0),l):(ru&42)===0?(va=!0,l.memoizedState=p):(l=pT(),Fn.lanes|=l,cu|=l,d)}function hA(l,d,p,b,T){var M=re.p;re.p=M!==0&&8>M?M:8;var ie=ae.T,_e={};ae.T=_e,A1(l,!1,d,p);try{var Be=T(),ct=ae.S;if(ct!==null&&ct(_e,Be),Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var St=xL(Be,b);mp(l,d,St,Fi(l))}else mp(l,d,b,Fi(l))}catch(At){mp(l,d,{then:function(){},status:"rejected",reason:At},Fi())}finally{re.p=M,ae.T=ie}}function AL(){}function k1(l,d,p,b){if(l.tag!==5)throw Error(r(476));var T=pA(l).queue;hA(l,T,d,Y,p===null?AL:function(){return mA(l),p(b)})}function pA(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:Y},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function mA(l){var d=pA(l).next.queue;mp(l,d,{},Fi())}function C1(){return za(jp)}function gA(){return oa().memoizedState}function yA(){return oa().memoizedState}function TL(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=Fi();l=tu(p);var b=nu(d,l,p);b!==null&&(Li(b,d,p),up(b,d,p)),d={cache:n1()},l.payload=d;return}d=d.return}}function RL(l,d,p){var b=Fi();p={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Ng(l)?vA(d,p):(p=aa(l,d,p,b),p!==null&&(Li(p,l,b),wA(p,d,b)))}function bA(l,d,p){var b=Fi();mp(l,d,p,b)}function mp(l,d,p,b){var T={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ng(l))vA(d,T);else{var M=l.alternate;if(l.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var ie=d.lastRenderedState,_e=M(ie,p);if(T.hasEagerState=!0,T.eagerState=_e,Ba(_e,ie))return Yr(l,d,T,0),kr===null&&bn(),!1}catch{}finally{}if(p=aa(l,d,T,b),p!==null)return Li(p,l,b),wA(p,d,b),!0}return!1}function A1(l,d,p,b){if(b={lane:2,revertLane:i_(),action:b,hasEagerState:!1,eagerState:null,next:null},Ng(l)){if(d)throw Error(r(479))}else d=aa(l,p,b,2),d!==null&&Li(d,l,2)}function Ng(l){var d=l.alternate;return l===Fn||d!==null&&d===Fn}function vA(l,d){Yd=Eg=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function wA(l,d,p){if((p&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Je(l,p)}}var Ig={readContext:za,use:Cg,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useLayoutEffect:Xr,useInsertionEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useSyncExternalStore:Xr,useId:Xr,useHostTransitionStatus:Xr,useFormState:Xr,useActionState:Xr,useOptimistic:Xr,useMemoCache:Xr,useCacheRefresh:Xr},_A={readContext:za,use:Cg,useCallback:function(l,d){return yi().memoizedState=[l,d===void 0?null:d],l},useContext:za,useEffect:aA,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Rg(4194308,4,lA.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Rg(4194308,4,l,d)},useInsertionEffect:function(l,d){Rg(4,2,l,d)},useMemo:function(l,d){var p=yi();d=d===void 0?null:d;var b=l();if(kc){Rt(!0);try{l()}finally{Rt(!1)}}return p.memoizedState=[b,d],b},useReducer:function(l,d,p){var b=yi();if(p!==void 0){var T=p(d);if(kc){Rt(!0);try{p(d)}finally{Rt(!1)}}}else T=d;return b.memoizedState=b.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},b.queue=l,l=l.dispatch=RL.bind(null,Fn,l),[b.memoizedState,l]},useRef:function(l){var d=yi();return l={current:l},d.memoizedState=l},useState:function(l){l=_1(l);var d=l.queue,p=bA.bind(null,Fn,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:S1,useDeferredValue:function(l,d){var p=yi();return E1(p,l,d)},useTransition:function(){var l=_1(!1);return l=hA.bind(null,Fn,l.queue,!0,!1),yi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var b=Fn,T=yi();if(er){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),kr===null)throw Error(r(349));(Gn&124)!==0||UC(b,d,p)}T.memoizedState=p;var M={value:p,getSnapshot:d};return T.queue=M,aA(HC.bind(null,b,M,l),[l]),b.flags|=2048,Jd(9,Tg(),qC.bind(null,b,M,p,d),null),p},useId:function(){var l=yi(),d=kr.identifierPrefix;if(er){var p=el,b=Qs;p=(b&~(1<<32-Kt(b)-1)).toString(32)+p,d=""+d+"R"+p,p=kg++,0<p&&(d+="H"+p.toString(32)),d+=""}else p=SL++,d=""+d+"r"+p.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:C1,useFormState:QC,useActionState:QC,useOptimistic:function(l){var d=yi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=A1.bind(null,Fn,!0,p),p.dispatch=d,[l,d]},useMemoCache:b1,useCacheRefresh:function(){return yi().memoizedState=TL.bind(null,Fn)}},xA={readContext:za,use:Cg,useCallback:cA,useContext:za,useEffect:iA,useImperativeHandle:uA,useInsertionEffect:oA,useLayoutEffect:sA,useMemo:dA,useReducer:Ag,useRef:rA,useState:function(){return Ag(rl)},useDebugValue:S1,useDeferredValue:function(l,d){var p=oa();return fA(p,pr.memoizedState,l,d)},useTransition:function(){var l=Ag(rl)[0],d=oa().memoizedState;return[typeof l=="boolean"?l:hp(l),d]},useSyncExternalStore:zC,useId:gA,useHostTransitionStatus:C1,useFormState:eA,useActionState:eA,useOptimistic:function(l,d){var p=oa();return WC(p,pr,l,d)},useMemoCache:b1,useCacheRefresh:yA},NL={readContext:za,use:Cg,useCallback:cA,useContext:za,useEffect:iA,useImperativeHandle:uA,useInsertionEffect:oA,useLayoutEffect:sA,useMemo:dA,useReducer:w1,useRef:rA,useState:function(){return w1(rl)},useDebugValue:S1,useDeferredValue:function(l,d){var p=oa();return pr===null?E1(p,l,d):fA(p,pr.memoizedState,l,d)},useTransition:function(){var l=w1(rl)[0],d=oa().memoizedState;return[typeof l=="boolean"?l:hp(l),d]},useSyncExternalStore:zC,useId:gA,useHostTransitionStatus:C1,useFormState:nA,useActionState:nA,useOptimistic:function(l,d){var p=oa();return pr!==null?WC(p,pr,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:b1,useCacheRefresh:yA},Qd=null,gp=0;function Og(l){var d=gp;return gp+=1,Qd===null&&(Qd=[]),jC(Qd,l,d)}function yp(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function jg(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function SA(l){var d=l._init;return d(l._payload)}function EA(l){function d(nt,Ke){if(l){var lt=nt.deletions;lt===null?(nt.deletions=[Ke],nt.flags|=16):lt.push(Ke)}}function p(nt,Ke){if(!l)return null;for(;Ke!==null;)d(nt,Ke),Ke=Ke.sibling;return null}function b(nt){for(var Ke=new Map;nt!==null;)nt.key!==null?Ke.set(nt.key,nt):Ke.set(nt.index,nt),nt=nt.sibling;return Ke}function T(nt,Ke){return nt=Js(nt,Ke),nt.index=0,nt.sibling=null,nt}function M(nt,Ke,lt){return nt.index=lt,l?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<Ke?(nt.flags|=67108866,Ke):lt):(nt.flags|=67108866,Ke)):(nt.flags|=1048576,Ke)}function ie(nt){return l&&nt.alternate===null&&(nt.flags|=67108866),nt}function _e(nt,Ke,lt,kt){return Ke===null||Ke.tag!==6?(Ke=Kw(lt,nt.mode,kt),Ke.return=nt,Ke):(Ke=T(Ke,lt),Ke.return=nt,Ke)}function Be(nt,Ke,lt,kt){var Qt=lt.type;return Qt===v?St(nt,Ke,lt.props.children,kt,lt.key):Ke!==null&&(Ke.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===N&&SA(Qt)===Ke.type)?(Ke=T(Ke,lt.props),yp(Ke,lt),Ke.return=nt,Ke):(Ke=mg(lt.type,lt.key,lt.props,null,nt.mode,kt),yp(Ke,lt),Ke.return=nt,Ke)}function ct(nt,Ke,lt,kt){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==lt.containerInfo||Ke.stateNode.implementation!==lt.implementation?(Ke=Zw(lt,nt.mode,kt),Ke.return=nt,Ke):(Ke=T(Ke,lt.children||[]),Ke.return=nt,Ke)}function St(nt,Ke,lt,kt,Qt){return Ke===null||Ke.tag!==7?(Ke=yc(lt,nt.mode,kt,Qt),Ke.return=nt,Ke):(Ke=T(Ke,lt),Ke.return=nt,Ke)}function At(nt,Ke,lt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ke=Kw(""+Ke,nt.mode,lt),Ke.return=nt,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case m:return lt=mg(Ke.type,Ke.key,Ke.props,null,nt.mode,lt),yp(lt,Ke),lt.return=nt,lt;case g:return Ke=Zw(Ke,nt.mode,lt),Ke.return=nt,Ke;case N:var kt=Ke._init;return Ke=kt(Ke._payload),At(nt,Ke,lt)}if(te(Ke)||P(Ke))return Ke=yc(Ke,nt.mode,lt,null),Ke.return=nt,Ke;if(typeof Ke.then=="function")return At(nt,Og(Ke),lt);if(Ke.$$typeof===E)return At(nt,vg(nt,Ke),lt);jg(nt,Ke)}return null}function pt(nt,Ke,lt,kt){var Qt=Ke!==null?Ke.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Qt!==null?null:_e(nt,Ke,""+lt,kt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:return lt.key===Qt?Be(nt,Ke,lt,kt):null;case g:return lt.key===Qt?ct(nt,Ke,lt,kt):null;case N:return Qt=lt._init,lt=Qt(lt._payload),pt(nt,Ke,lt,kt)}if(te(lt)||P(lt))return Qt!==null?null:St(nt,Ke,lt,kt,null);if(typeof lt.then=="function")return pt(nt,Ke,Og(lt),kt);if(lt.$$typeof===E)return pt(nt,Ke,vg(nt,lt),kt);jg(nt,lt)}return null}function mt(nt,Ke,lt,kt,Qt){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return nt=nt.get(lt)||null,_e(Ke,nt,""+kt,Qt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case m:return nt=nt.get(kt.key===null?lt:kt.key)||null,Be(Ke,nt,kt,Qt);case g:return nt=nt.get(kt.key===null?lt:kt.key)||null,ct(Ke,nt,kt,Qt);case N:var Bn=kt._init;return kt=Bn(kt._payload),mt(nt,Ke,lt,kt,Qt)}if(te(kt)||P(kt))return nt=nt.get(lt)||null,St(Ke,nt,kt,Qt,null);if(typeof kt.then=="function")return mt(nt,Ke,lt,Og(kt),Qt);if(kt.$$typeof===E)return mt(nt,Ke,lt,vg(Ke,kt),Qt);jg(Ke,kt)}return null}function vn(nt,Ke,lt,kt){for(var Qt=null,Bn=null,on=Ke,gn=Ke=0,_a=null;on!==null&&gn<lt.length;gn++){on.index>gn?(_a=on,on=null):_a=on.sibling;var Jn=pt(nt,on,lt[gn],kt);if(Jn===null){on===null&&(on=_a);break}l&&on&&Jn.alternate===null&&d(nt,on),Ke=M(Jn,Ke,gn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn,on=_a}if(gn===lt.length)return p(nt,on),er&&vc(nt,gn),Qt;if(on===null){for(;gn<lt.length;gn++)on=At(nt,lt[gn],kt),on!==null&&(Ke=M(on,Ke,gn),Bn===null?Qt=on:Bn.sibling=on,Bn=on);return er&&vc(nt,gn),Qt}for(on=b(on);gn<lt.length;gn++)_a=mt(on,nt,gn,lt[gn],kt),_a!==null&&(l&&_a.alternate!==null&&on.delete(_a.key===null?gn:_a.key),Ke=M(_a,Ke,gn),Bn===null?Qt=_a:Bn.sibling=_a,Bn=_a);return l&&on.forEach(function(vu){return d(nt,vu)}),er&&vc(nt,gn),Qt}function hn(nt,Ke,lt,kt){if(lt==null)throw Error(r(151));for(var Qt=null,Bn=null,on=Ke,gn=Ke=0,_a=null,Jn=lt.next();on!==null&&!Jn.done;gn++,Jn=lt.next()){on.index>gn?(_a=on,on=null):_a=on.sibling;var vu=pt(nt,on,Jn.value,kt);if(vu===null){on===null&&(on=_a);break}l&&on&&vu.alternate===null&&d(nt,on),Ke=M(vu,Ke,gn),Bn===null?Qt=vu:Bn.sibling=vu,Bn=vu,on=_a}if(Jn.done)return p(nt,on),er&&vc(nt,gn),Qt;if(on===null){for(;!Jn.done;gn++,Jn=lt.next())Jn=At(nt,Jn.value,kt),Jn!==null&&(Ke=M(Jn,Ke,gn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn);return er&&vc(nt,gn),Qt}for(on=b(on);!Jn.done;gn++,Jn=lt.next())Jn=mt(on,nt,gn,Jn.value,kt),Jn!==null&&(l&&Jn.alternate!==null&&on.delete(Jn.key===null?gn:Jn.key),Ke=M(Jn,Ke,gn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn);return l&&on.forEach(function(I$){return d(nt,I$)}),er&&vc(nt,gn),Qt}function gr(nt,Ke,lt,kt){if(typeof lt=="object"&&lt!==null&&lt.type===v&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:e:{for(var Qt=lt.key;Ke!==null;){if(Ke.key===Qt){if(Qt=lt.type,Qt===v){if(Ke.tag===7){p(nt,Ke.sibling),kt=T(Ke,lt.props.children),kt.return=nt,nt=kt;break e}}else if(Ke.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===N&&SA(Qt)===Ke.type){p(nt,Ke.sibling),kt=T(Ke,lt.props),yp(kt,lt),kt.return=nt,nt=kt;break e}p(nt,Ke);break}else d(nt,Ke);Ke=Ke.sibling}lt.type===v?(kt=yc(lt.props.children,nt.mode,kt,lt.key),kt.return=nt,nt=kt):(kt=mg(lt.type,lt.key,lt.props,null,nt.mode,kt),yp(kt,lt),kt.return=nt,nt=kt)}return ie(nt);case g:e:{for(Qt=lt.key;Ke!==null;){if(Ke.key===Qt)if(Ke.tag===4&&Ke.stateNode.containerInfo===lt.containerInfo&&Ke.stateNode.implementation===lt.implementation){p(nt,Ke.sibling),kt=T(Ke,lt.children||[]),kt.return=nt,nt=kt;break e}else{p(nt,Ke);break}else d(nt,Ke);Ke=Ke.sibling}kt=Zw(lt,nt.mode,kt),kt.return=nt,nt=kt}return ie(nt);case N:return Qt=lt._init,lt=Qt(lt._payload),gr(nt,Ke,lt,kt)}if(te(lt))return vn(nt,Ke,lt,kt);if(P(lt)){if(Qt=P(lt),typeof Qt!="function")throw Error(r(150));return lt=Qt.call(lt),hn(nt,Ke,lt,kt)}if(typeof lt.then=="function")return gr(nt,Ke,Og(lt),kt);if(lt.$$typeof===E)return gr(nt,Ke,vg(nt,lt),kt);jg(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ke!==null&&Ke.tag===6?(p(nt,Ke.sibling),kt=T(Ke,lt),kt.return=nt,nt=kt):(p(nt,Ke),kt=Kw(lt,nt.mode,kt),kt.return=nt,nt=kt),ie(nt)):p(nt,Ke)}return function(nt,Ke,lt,kt){try{gp=0;var Qt=gr(nt,Ke,lt,kt);return Qd=null,Qt}catch(on){if(on===sp||on===_g)throw on;var Bn=ji(29,on,null,nt.mode);return Bn.lanes=kt,Bn.return=nt,Bn}finally{}}}var ef=EA(!0),kA=EA(!1),ao=X(null),ls=null;function au(l){var d=l.alternate;ye(da,da.current&1),ye(ao,l),ls===null&&(d===null||Zd.current!==null||d.memoizedState!==null)&&(ls=l)}function CA(l){if(l.tag===22){if(ye(da,da.current),ye(ao,l),ls===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(ls=l)}}else iu()}function iu(){ye(da,da.current),ye(ao,ao.current)}function al(l){oe(ao),ls===l&&(ls=null),oe(da)}var da=X(0);function Dg(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||y_(p)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function T1(l,d,p,b){d=l.memoizedState,p=p(b,d),p=p==null?d:f({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var R1={enqueueSetState:function(l,d,p){l=l._reactInternals;var b=Fi(),T=tu(b);T.payload=d,p!=null&&(T.callback=p),d=nu(l,T,b),d!==null&&(Li(d,l,b),up(d,l,b))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var b=Fi(),T=tu(b);T.tag=1,T.payload=d,p!=null&&(T.callback=p),d=nu(l,T,b),d!==null&&(Li(d,l,b),up(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Fi(),b=tu(p);b.tag=2,d!=null&&(b.callback=d),d=nu(l,b,p),d!==null&&(Li(d,l,p),up(d,l,p))}};function AA(l,d,p,b,T,M,ie){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,M,ie):d.prototype&&d.prototype.isPureReactComponent?!k(p,b)||!k(T,M):!0}function TA(l,d,p,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,b),d.state!==l&&R1.enqueueReplaceState(d,d.state,null)}function Cc(l,d){var p=d;if("ref"in d){p={};for(var b in d)b!=="ref"&&(p[b]=d[b])}if(l=l.defaultProps){p===d&&(p=f({},p));for(var T in l)p[T]===void 0&&(p[T]=l[T])}return p}var Mg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Wr=="object"&&typeof Wr.emit=="function"){Wr.emit("uncaughtException",l);return}console.error(l)};function RA(l){Mg(l)}function NA(l){console.error(l)}function IA(l){Mg(l)}function Pg(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function OA(l,d,p){try{var b=l.onCaughtError;b(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function N1(l,d,p){return p=tu(p),p.tag=3,p.payload={element:null},p.callback=function(){Pg(l,d)},p}function jA(l){return l=tu(l),l.tag=3,l}function DA(l,d,p,b){var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var M=b.value;l.payload=function(){return T(M)},l.callback=function(){OA(d,p,b)}}var ie=p.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(l.callback=function(){OA(d,p,b),typeof T!="function"&&(du===null?du=new Set([this]):du.add(this));var _e=b.stack;this.componentDidCatch(b.value,{componentStack:_e!==null?_e:""})})}function IL(l,d,p,b,T){if(p.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=p.alternate,d!==null&&ap(d,p,T,!0),p=ao.current,p!==null){switch(p.tag){case 13:return ls===null?e_():p.alternate===null&&Gr===0&&(Gr=3),p.flags&=-257,p.flags|=65536,p.lanes=T,b===i1?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([b]):d.add(b),n_(l,b,T)),!1;case 22:return p.flags|=65536,b===i1?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([b]):p.add(b)),n_(l,b,T)),!1}throw Error(r(435,p.tag))}return n_(l,b,T),e_(),!1}if(er)return d=ao.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,b!==Jw&&(l=Error(r(422),{cause:b}),rp(un(l,p)))):(b!==Jw&&(d=Error(r(423),{cause:b}),rp(un(d,p))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,b=un(b,p),T=N1(l.stateNode,b,T),l1(l,T),Gr!==4&&(Gr=2)),!1;var M=Error(r(520),{cause:b});if(M=un(M,p),Ep===null?Ep=[M]:Ep.push(M),Gr!==4&&(Gr=2),d===null)return!0;b=un(b,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=T&-T,p.lanes|=l,l=N1(p.stateNode,b,l),l1(p,l),!1;case 1:if(d=p.type,M=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(du===null||!du.has(M))))return p.flags|=65536,T&=-T,p.lanes|=T,T=jA(T),DA(T,l,p,b),l1(p,T),!1}p=p.return}while(p!==null);return!1}var MA=Error(r(461)),va=!1;function Oa(l,d,p,b){d.child=l===null?kA(d,null,p,b):ef(d,l.child,p,b)}function PA(l,d,p,b,T){p=p.render;var M=d.ref;if("ref"in b){var ie={};for(var _e in b)_e!=="ref"&&(ie[_e]=b[_e])}else ie=b;return Sc(d),b=h1(l,d,p,ie,M,T),_e=p1(),l!==null&&!va?(m1(l,d,T),il(l,d,T)):(er&&_e&&Yw(d),d.flags|=1,Oa(l,d,b,T),d.child)}function FA(l,d,p,b,T){if(l===null){var M=p.type;return typeof M=="function"&&!Ww(M)&&M.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=M,LA(l,d,M,b,T)):(l=mg(p.type,null,b,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(M=l.child,!L1(l,T)){var ie=M.memoizedProps;if(p=p.compare,p=p!==null?p:k,p(ie,b)&&l.ref===d.ref)return il(l,d,T)}return d.flags|=1,l=Js(M,b),l.ref=d.ref,l.return=d,d.child=l}function LA(l,d,p,b,T){if(l!==null){var M=l.memoizedProps;if(k(M,b)&&l.ref===d.ref)if(va=!1,d.pendingProps=b=M,L1(l,T))(l.flags&131072)!==0&&(va=!0);else return d.lanes=l.lanes,il(l,d,T)}return I1(l,d,p,b,T)}function $A(l,d,p){var b=d.pendingProps,T=b.children,M=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((d.flags&128)!==0){if(b=M!==null?M.baseLanes|p:p,l!==null){for(T=d.child=l.child,M=0;T!==null;)M=M|T.lanes|T.childLanes,T=T.sibling;d.childLanes=M&~b}else d.childLanes=0,d.child=null;return BA(l,d,b,p)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&wg(d,M!==null?M.cachePool:null),M!==null?LC(d,M):c1(),CA(d);else return d.lanes=d.childLanes=536870912,BA(l,d,M!==null?M.baseLanes|p:p,p)}else M!==null?(wg(d,M.cachePool),LC(d,M),iu(),d.memoizedState=null):(l!==null&&wg(d,null),c1(),iu());return Oa(l,d,T,p),d.child}function BA(l,d,p,b){var T=a1();return T=T===null?null:{parent:ca._currentValue,pool:T},d.memoizedState={baseLanes:p,cachePool:T},l!==null&&wg(d,null),c1(),CA(d),l!==null&&ap(l,d,b,!0),null}function Fg(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function I1(l,d,p,b,T){return Sc(d),p=h1(l,d,p,b,void 0,T),b=p1(),l!==null&&!va?(m1(l,d,T),il(l,d,T)):(er&&b&&Yw(d),d.flags|=1,Oa(l,d,p,T),d.child)}function zA(l,d,p,b,T,M){return Sc(d),d.updateQueue=null,p=BC(d,b,p,T),$C(l),b=p1(),l!==null&&!va?(m1(l,d,M),il(l,d,M)):(er&&b&&Yw(d),d.flags|=1,Oa(l,d,p,M),d.child)}function UA(l,d,p,b,T){if(Sc(d),d.stateNode===null){var M=os,ie=p.contextType;typeof ie=="object"&&ie!==null&&(M=za(ie)),M=new p(b,M),d.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=R1,d.stateNode=M,M._reactInternals=d,M=d.stateNode,M.props=b,M.state=d.memoizedState,M.refs={},o1(d),ie=p.contextType,M.context=typeof ie=="object"&&ie!==null?za(ie):os,M.state=d.memoizedState,ie=p.getDerivedStateFromProps,typeof ie=="function"&&(T1(d,p,ie,b),M.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(ie=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),ie!==M.state&&R1.enqueueReplaceState(M,M.state,null),dp(d,b,M,T),cp(),M.state=d.memoizedState),typeof M.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){M=d.stateNode;var _e=d.memoizedProps,Be=Cc(p,_e);M.props=Be;var ct=M.context,St=p.contextType;ie=os,typeof St=="object"&&St!==null&&(ie=za(St));var At=p.getDerivedStateFromProps;St=typeof At=="function"||typeof M.getSnapshotBeforeUpdate=="function",_e=d.pendingProps!==_e,St||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(_e||ct!==ie)&&TA(d,M,b,ie),eu=!1;var pt=d.memoizedState;M.state=pt,dp(d,b,M,T),cp(),ct=d.memoizedState,_e||pt!==ct||eu?(typeof At=="function"&&(T1(d,p,At,b),ct=d.memoizedState),(Be=eu||AA(d,p,Be,b,pt,ct,ie))?(St||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(d.flags|=4194308)):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ct),M.props=b,M.state=ct,M.context=ie,b=Be):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{M=d.stateNode,s1(l,d),ie=d.memoizedProps,St=Cc(p,ie),M.props=St,At=d.pendingProps,pt=M.context,ct=p.contextType,Be=os,typeof ct=="object"&&ct!==null&&(Be=za(ct)),_e=p.getDerivedStateFromProps,(ct=typeof _e=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(ie!==At||pt!==Be)&&TA(d,M,b,Be),eu=!1,pt=d.memoizedState,M.state=pt,dp(d,b,M,T),cp();var mt=d.memoizedState;ie!==At||pt!==mt||eu||l!==null&&l.dependencies!==null&&bg(l.dependencies)?(typeof _e=="function"&&(T1(d,p,_e,b),mt=d.memoizedState),(St=eu||AA(d,p,St,b,pt,mt,Be)||l!==null&&l.dependencies!==null&&bg(l.dependencies))?(ct||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(b,mt,Be),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(b,mt,Be)),typeof M.componentDidUpdate=="function"&&(d.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof M.componentDidUpdate!="function"||ie===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||ie===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=mt),M.props=b,M.state=mt,M.context=Be,b=St):(typeof M.componentDidUpdate!="function"||ie===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||ie===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),b=!1)}return M=b,Fg(l,d),b=(d.flags&128)!==0,M||b?(M=d.stateNode,p=b&&typeof p.getDerivedStateFromError!="function"?null:M.render(),d.flags|=1,l!==null&&b?(d.child=ef(d,l.child,null,T),d.child=ef(d,null,p,T)):Oa(l,d,p,T),d.memoizedState=M.state,l=d.child):l=il(l,d,T),l}function qA(l,d,p,b){return np(),d.flags|=256,Oa(l,d,p,b),d.child}var O1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function j1(l){return{baseLanes:l,cachePool:NC()}}function D1(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=io),l}function HA(l,d,p){var b=d.pendingProps,T=!1,M=(d.flags&128)!==0,ie;if((ie=M)||(ie=l!==null&&l.memoizedState===null?!1:(da.current&2)!==0),ie&&(T=!0,d.flags&=-129),ie=(d.flags&32)!==0,d.flags&=-33,l===null){if(er){if(T?au(d):iu(),er){var _e=Vr,Be;if(Be=_e){e:{for(Be=_e,_e=ss;Be.nodeType!==8;){if(!_e){_e=null;break e}if(Be=Co(Be.nextSibling),Be===null){_e=null;break e}}_e=Be}_e!==null?(d.memoizedState={dehydrated:_e,treeContext:bc!==null?{id:Qs,overflow:el}:null,retryLane:536870912,hydrationErrors:null},Be=ji(18,null,null,0),Be.stateNode=_e,Be.return=d,d.child=Be,ii=d,Vr=null,Be=!0):Be=!1}Be||_c(d)}if(_e=d.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return y_(_e)?d.lanes=32:d.lanes=536870912,null;al(d)}return _e=b.children,b=b.fallback,T?(iu(),T=d.mode,_e=Lg({mode:"hidden",children:_e},T),b=yc(b,T,p,null),_e.return=d,b.return=d,_e.sibling=b,d.child=_e,T=d.child,T.memoizedState=j1(p),T.childLanes=D1(l,ie,p),d.memoizedState=O1,b):(au(d),M1(d,_e))}if(Be=l.memoizedState,Be!==null&&(_e=Be.dehydrated,_e!==null)){if(M)d.flags&256?(au(d),d.flags&=-257,d=P1(l,d,p)):d.memoizedState!==null?(iu(),d.child=l.child,d.flags|=128,d=null):(iu(),T=b.fallback,_e=d.mode,b=Lg({mode:"visible",children:b.children},_e),T=yc(T,_e,p,null),T.flags|=2,b.return=d,T.return=d,b.sibling=T,d.child=b,ef(d,l.child,null,p),b=d.child,b.memoizedState=j1(p),b.childLanes=D1(l,ie,p),d.memoizedState=O1,d=T);else if(au(d),y_(_e)){if(ie=_e.nextSibling&&_e.nextSibling.dataset,ie)var ct=ie.dgst;ie=ct,b=Error(r(419)),b.stack="",b.digest=ie,rp({value:b,source:null,stack:null}),d=P1(l,d,p)}else if(va||ap(l,d,p,!1),ie=(p&l.childLanes)!==0,va||ie){if(ie=kr,ie!==null&&(b=p&-p,b=(b&42)!==0?1:It(b),b=(b&(ie.suspendedLanes|p))!==0?0:b,b!==0&&b!==Be.retryLane))throw Be.retryLane=b,Eo(l,b),Li(ie,l,b),MA;_e.data==="$?"||e_(),d=P1(l,d,p)}else _e.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=Be.treeContext,Vr=Co(_e.nextSibling),ii=d,er=!0,wc=null,ss=!1,l!==null&&(no[ro++]=Qs,no[ro++]=el,no[ro++]=bc,Qs=l.id,el=l.overflow,bc=d),d=M1(d,b.children),d.flags|=4096);return d}return T?(iu(),T=b.fallback,_e=d.mode,Be=l.child,ct=Be.sibling,b=Js(Be,{mode:"hidden",children:b.children}),b.subtreeFlags=Be.subtreeFlags&65011712,ct!==null?T=Js(ct,T):(T=yc(T,_e,p,null),T.flags|=2),T.return=d,b.return=d,b.sibling=T,d.child=b,b=T,T=d.child,_e=l.child.memoizedState,_e===null?_e=j1(p):(Be=_e.cachePool,Be!==null?(ct=ca._currentValue,Be=Be.parent!==ct?{parent:ct,pool:ct}:Be):Be=NC(),_e={baseLanes:_e.baseLanes|p,cachePool:Be}),T.memoizedState=_e,T.childLanes=D1(l,ie,p),d.memoizedState=O1,b):(au(d),p=l.child,l=p.sibling,p=Js(p,{mode:"visible",children:b.children}),p.return=d,p.sibling=null,l!==null&&(ie=d.deletions,ie===null?(d.deletions=[l],d.flags|=16):ie.push(l)),d.child=p,d.memoizedState=null,p)}function M1(l,d){return d=Lg({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Lg(l,d){return l=ji(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function P1(l,d,p){return ef(d,l.child,null,p),l=M1(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function VA(l,d,p){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),e1(l.return,d,p)}function F1(l,d,p,b,T){var M=l.memoizedState;M===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:T}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=b,M.tail=p,M.tailMode=T)}function GA(l,d,p){var b=d.pendingProps,T=b.revealOrder,M=b.tail;if(Oa(l,d,b.children,p),b=da.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&VA(l,p,d);else if(l.tag===19)VA(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(ye(da,b),T){case"forwards":for(p=d.child,T=null;p!==null;)l=p.alternate,l!==null&&Dg(l)===null&&(T=p),p=p.sibling;p=T,p===null?(T=d.child,d.child=null):(T=p.sibling,p.sibling=null),F1(d,!1,T,p,M);break;case"backwards":for(p=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&Dg(l)===null){d.child=T;break}l=T.sibling,T.sibling=p,p=T,T=l}F1(d,!0,p,null,M);break;case"together":F1(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function il(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),cu|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(ap(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Js(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Js(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function L1(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&bg(l)))}function OL(l,d,p){switch(d.tag){case 3:Oe(d,d.stateNode.containerInfo),Ql(d,ca,l.memoizedState.cache),np();break;case 27:case 5:ze(d);break;case 4:Oe(d,d.stateNode.containerInfo);break;case 10:Ql(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(au(d),d.flags|=128,null):(p&d.child.childLanes)!==0?HA(l,d,p):(au(d),l=il(l,d,p),l!==null?l.sibling:null);au(d);break;case 19:var T=(l.flags&128)!==0;if(b=(p&d.childLanes)!==0,b||(ap(l,d,p,!1),b=(p&d.childLanes)!==0),T){if(b)return GA(l,d,p);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ye(da,da.current),b)break;return null;case 22:case 23:return d.lanes=0,$A(l,d,p);case 24:Ql(d,ca,l.memoizedState.cache)}return il(l,d,p)}function WA(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)va=!0;else{if(!L1(l,p)&&(d.flags&128)===0)return va=!1,OL(l,d,p);va=(l.flags&131072)!==0}else va=!1,er&&(d.flags&1048576)!==0&&SC(d,yg,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var b=d.elementType,T=b._init;if(b=T(b._payload),d.type=b,typeof b=="function")Ww(b)?(l=Cc(b,l),d.tag=1,d=UA(null,d,b,l,p)):(d.tag=0,d=I1(null,d,b,l,p));else{if(b!=null){if(T=b.$$typeof,T===C){d.tag=11,d=PA(null,d,b,l,p);break e}else if(T===O){d.tag=14,d=FA(null,d,b,l,p);break e}}throw d=V(b)||b,Error(r(306,d,""))}}return d;case 0:return I1(l,d,d.type,d.pendingProps,p);case 1:return b=d.type,T=Cc(b,d.pendingProps),UA(l,d,b,T,p);case 3:e:{if(Oe(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var M=d.memoizedState;T=M.element,s1(l,d),dp(d,b,null,p);var ie=d.memoizedState;if(b=ie.cache,Ql(d,ca,b),b!==M.cache&&t1(d,[ca],p,!0),cp(),b=ie.element,M.isDehydrated)if(M={element:b,isDehydrated:!1,cache:ie.cache},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){d=qA(l,d,b,p);break e}else if(b!==T){T=un(Error(r(424)),d),rp(T),d=qA(l,d,b,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Vr=Co(l.firstChild),ii=d,er=!0,wc=null,ss=!0,p=kA(d,null,b,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(np(),b===T){d=il(l,d,p);break e}Oa(l,d,b,p)}d=d.child}return d;case 26:return Fg(l,d),l===null?(p=XT(d.type,null,d.pendingProps,null))?d.memoizedState=p:er||(p=d.type,l=d.pendingProps,b=Jg(Me.current).createElement(p),b[he]=d,b[Ne]=l,Da(b,p,l),Dn(b),d.stateNode=b):d.memoizedState=XT(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return ze(d),l===null&&er&&(b=d.stateNode=KT(d.type,d.pendingProps,Me.current),ii=d,ss=!0,T=Vr,pu(d.type)?(b_=T,Vr=Co(b.firstChild)):Vr=T),Oa(l,d,d.pendingProps.children,p),Fg(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&er&&((T=b=Vr)&&(b=o$(b,d.type,d.pendingProps,ss),b!==null?(d.stateNode=b,ii=d,Vr=Co(b.firstChild),ss=!1,T=!0):T=!1),T||_c(d)),ze(d),T=d.type,M=d.pendingProps,ie=l!==null?l.memoizedProps:null,b=M.children,p_(T,M)?b=null:ie!==null&&p_(T,ie)&&(d.flags|=32),d.memoizedState!==null&&(T=h1(l,d,EL,null,null,p),jp._currentValue=T),Fg(l,d),Oa(l,d,b,p),d.child;case 6:return l===null&&er&&((l=p=Vr)&&(p=s$(p,d.pendingProps,ss),p!==null?(d.stateNode=p,ii=d,Vr=null,l=!0):l=!1),l||_c(d)),null;case 13:return HA(l,d,p);case 4:return Oe(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=ef(d,null,b,p):Oa(l,d,b,p),d.child;case 11:return PA(l,d,d.type,d.pendingProps,p);case 7:return Oa(l,d,d.pendingProps,p),d.child;case 8:return Oa(l,d,d.pendingProps.children,p),d.child;case 12:return Oa(l,d,d.pendingProps.children,p),d.child;case 10:return b=d.pendingProps,Ql(d,d.type,b.value),Oa(l,d,b.children,p),d.child;case 9:return T=d.type._context,b=d.pendingProps.children,Sc(d),T=za(T),b=b(T),d.flags|=1,Oa(l,d,b,p),d.child;case 14:return FA(l,d,d.type,d.pendingProps,p);case 15:return LA(l,d,d.type,d.pendingProps,p);case 19:return GA(l,d,p);case 31:return b=d.pendingProps,p=d.mode,b={mode:b.mode,children:b.children},l===null?(p=Lg(b,p),p.ref=d.ref,d.child=p,p.return=d,d=p):(p=Js(l.child,b),p.ref=d.ref,d.child=p,p.return=d,d=p),d;case 22:return $A(l,d,p);case 24:return Sc(d),b=za(ca),l===null?(T=a1(),T===null&&(T=kr,M=n1(),T.pooledCache=M,M.refCount++,M!==null&&(T.pooledCacheLanes|=p),T=M),d.memoizedState={parent:b,cache:T},o1(d),Ql(d,ca,T)):((l.lanes&p)!==0&&(s1(l,d),dp(d,null,null,p),cp()),T=l.memoizedState,M=d.memoizedState,T.parent!==b?(T={parent:b,cache:b},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),Ql(d,ca,b)):(b=M.cache,Ql(d,ca,b),b!==T.cache&&t1(d,[ca],p,!0))),Oa(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function ol(l){l.flags|=4}function KA(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!n3(d)){if(d=ao.current,d!==null&&((Gn&4194048)===Gn?ls!==null:(Gn&62914560)!==Gn&&(Gn&536870912)===0||d!==ls))throw lp=i1,IC;l.flags|=8192}}function $g(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?D():536870912,l.lanes|=d,af|=d)}function bp(l,d){if(!er)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Br(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,b=0;if(d)for(var T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags&65011712,b|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=b,l.childLanes=p,d}function jL(l,d,p){var b=d.pendingProps;switch(Xw(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(d),null;case 1:return Br(d),null;case 3:return p=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),nl(ca),Re(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(tp(d)?ol(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,CC())),Br(d),null;case 26:return p=d.memoizedState,l===null?(ol(d),p!==null?(Br(d),KA(d,p)):(Br(d),d.flags&=-16777217)):p?p!==l.memoizedState?(ol(d),Br(d),KA(d,p)):(Br(d),d.flags&=-16777217):(l.memoizedProps!==b&&ol(d),Br(d),d.flags&=-16777217),null;case 27:He(d),p=Me.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return Br(d),null}l=we.current,tp(d)?EC(d):(l=KT(T,b,p),d.stateNode=l,ol(d))}return Br(d),null;case 5:if(He(d),p=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return Br(d),null}if(l=we.current,tp(d))EC(d);else{switch(T=Jg(Me.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?T.createElement("select",{is:b.is}):T.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?T.createElement(p,{is:b.is}):T.createElement(p)}}l[he]=d,l[Ne]=b;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(Da(l,p,b),p){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ol(d)}}return Br(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=Me.current,tp(d)){if(l=d.stateNode,p=d.memoizedProps,b=null,T=ii,T!==null)switch(T.tag){case 27:case 5:b=T.memoizedProps}l[he]=d,l=!!(l.nodeValue===p||b!==null&&b.suppressHydrationWarning===!0||zT(l.nodeValue,p)),l||_c(d)}else l=Jg(l).createTextNode(b),l[he]=d,d.stateNode=l}return Br(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=tp(d),b!==null&&b.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[he]=d}else np(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Br(d),T=!1}else T=CC(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(al(d),d):(al(d),null)}if(al(d),(d.flags&128)!==0)return d.lanes=p,d;if(p=b!==null,l=l!==null&&l.memoizedState!==null,p){b=d.child,T=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(T=b.alternate.memoizedState.cachePool.pool);var M=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(M=b.memoizedState.cachePool.pool),M!==T&&(b.flags|=2048)}return p!==l&&p&&(d.child.flags|=8192),$g(d,d.updateQueue),Br(d),null;case 4:return Re(),l===null&&u_(d.stateNode.containerInfo),Br(d),null;case 10:return nl(d.type),Br(d),null;case 19:if(oe(da),T=d.memoizedState,T===null)return Br(d),null;if(b=(d.flags&128)!==0,M=T.rendering,M===null)if(b)bp(T,!1);else{if(Gr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(M=Dg(l),M!==null){for(d.flags|=128,bp(T,!1),l=M.updateQueue,d.updateQueue=l,$g(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)xC(p,l),p=p.sibling;return ye(da,da.current&1|2),d.child}l=l.sibling}T.tail!==null&&ce()>Ug&&(d.flags|=128,b=!0,bp(T,!1),d.lanes=4194304)}else{if(!b)if(l=Dg(M),l!==null){if(d.flags|=128,b=!0,l=l.updateQueue,d.updateQueue=l,$g(d,l),bp(T,!0),T.tail===null&&T.tailMode==="hidden"&&!M.alternate&&!er)return Br(d),null}else 2*ce()-T.renderingStartTime>Ug&&p!==536870912&&(d.flags|=128,b=!0,bp(T,!1),d.lanes=4194304);T.isBackwards?(M.sibling=d.child,d.child=M):(l=T.last,l!==null?l.sibling=M:d.child=M,T.last=M)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=ce(),d.sibling=null,l=da.current,ye(da,b?l&1|2:l&1),d):(Br(d),null);case 22:case 23:return al(d),d1(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(p&536870912)!==0&&(d.flags&128)===0&&(Br(d),d.subtreeFlags&6&&(d.flags|=8192)):Br(d),p=d.updateQueue,p!==null&&$g(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048),l!==null&&oe(Ec),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),nl(ca),Br(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function DL(l,d){switch(Xw(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return nl(ca),Re(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return He(d),null;case 13:if(al(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));np()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return oe(da),null;case 4:return Re(),null;case 10:return nl(d.type),null;case 22:case 23:return al(d),d1(),l!==null&&oe(Ec),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return nl(ca),null;case 25:return null;default:return null}}function ZA(l,d){switch(Xw(d),d.tag){case 3:nl(ca),Re();break;case 26:case 27:case 5:He(d);break;case 4:Re();break;case 13:al(d);break;case 19:oe(da);break;case 10:nl(d.type);break;case 22:case 23:al(d),d1(),l!==null&&oe(Ec);break;case 24:nl(ca)}}function vp(l,d){try{var p=d.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var T=b.next;p=T;do{if((p.tag&l)===l){b=void 0;var M=p.create,ie=p.inst;b=M(),ie.destroy=b}p=p.next}while(p!==T)}}catch(_e){_r(d,d.return,_e)}}function ou(l,d,p){try{var b=d.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var M=T.next;b=M;do{if((b.tag&l)===l){var ie=b.inst,_e=ie.destroy;if(_e!==void 0){ie.destroy=void 0,T=d;var Be=p,ct=_e;try{ct()}catch(St){_r(T,Be,St)}}}b=b.next}while(b!==M)}}catch(St){_r(d,d.return,St)}}function YA(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{FC(d,p)}catch(b){_r(l,l.return,b)}}}function XA(l,d,p){p.props=Cc(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(b){_r(l,d,b)}}function wp(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof p=="function"?l.refCleanup=p(b):p.current=b}}catch(T){_r(l,d,T)}}function us(l,d){var p=l.ref,b=l.refCleanup;if(p!==null)if(typeof b=="function")try{b()}catch(T){_r(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(T){_r(l,d,T)}else p.current=null}function JA(l){var d=l.type,p=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&b.focus();break e;case"img":p.src?b.src=p.src:p.srcSet&&(b.srcset=p.srcSet)}}catch(T){_r(l,l.return,T)}}function $1(l,d,p){try{var b=l.stateNode;t$(b,l.type,p,d),b[Ne]=d}catch(T){_r(l,l.return,T)}}function QA(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&pu(l.type)||l.tag===4}function B1(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||QA(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&pu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function z1(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=Xg));else if(b!==4&&(b===27&&pu(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(z1(l,d,p),l=l.sibling;l!==null;)z1(l,d,p),l=l.sibling}function Bg(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(b!==4&&(b===27&&pu(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Bg(l,d,p),l=l.sibling;l!==null;)Bg(l,d,p),l=l.sibling}function eT(l){var d=l.stateNode,p=l.memoizedProps;try{for(var b=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);Da(d,b,p),d[he]=l,d[Ne]=p}catch(M){_r(l,l.return,M)}}var sl=!1,Jr=!1,U1=!1,tT=typeof WeakSet=="function"?WeakSet:Set,wa=null;function ML(l,d){if(l=l.containerInfo,f_=ay,l=ue(l),ve(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var T=b.anchorOffset,M=b.focusNode;b=b.focusOffset;try{p.nodeType,M.nodeType}catch{p=null;break e}var ie=0,_e=-1,Be=-1,ct=0,St=0,At=l,pt=null;t:for(;;){for(var mt;At!==p||T!==0&&At.nodeType!==3||(_e=ie+T),At!==M||b!==0&&At.nodeType!==3||(Be=ie+b),At.nodeType===3&&(ie+=At.nodeValue.length),(mt=At.firstChild)!==null;)pt=At,At=mt;for(;;){if(At===l)break t;if(pt===p&&++ct===T&&(_e=ie),pt===M&&++St===b&&(Be=ie),(mt=At.nextSibling)!==null)break;At=pt,pt=At.parentNode}At=mt}p=_e===-1||Be===-1?null:{start:_e,end:Be}}else p=null}p=p||{start:0,end:0}}else p=null;for(h_={focusedElem:l,selectionRange:p},ay=!1,wa=d;wa!==null;)if(d=wa,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,wa=l;else for(;wa!==null;){switch(d=wa,M=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&M!==null){l=void 0,p=d,T=M.memoizedProps,M=M.memoizedState,b=p.stateNode;try{var vn=Cc(p.type,T,p.elementType===p.type);l=b.getSnapshotBeforeUpdate(vn,M),b.__reactInternalSnapshotBeforeUpdate=l}catch(hn){_r(p,p.return,hn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)g_(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":g_(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,wa=l;break}wa=d.return}}function nT(l,d,p){var b=p.flags;switch(p.tag){case 0:case 11:case 15:su(l,p),b&4&&vp(5,p);break;case 1:if(su(l,p),b&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(ie){_r(p,p.return,ie)}else{var T=Cc(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(ie){_r(p,p.return,ie)}}b&64&&YA(p),b&512&&wp(p,p.return);break;case 3:if(su(l,p),b&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{FC(l,d)}catch(ie){_r(p,p.return,ie)}}break;case 27:d===null&&b&4&&eT(p);case 26:case 5:su(l,p),d===null&&b&4&&JA(p),b&512&&wp(p,p.return);break;case 12:su(l,p);break;case 13:su(l,p),b&4&&iT(l,p),b&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=HL.bind(null,p),l$(l,p))));break;case 22:if(b=p.memoizedState!==null||sl,!b){d=d!==null&&d.memoizedState!==null||Jr,T=sl;var M=Jr;sl=b,(Jr=d)&&!M?lu(l,p,(p.subtreeFlags&8772)!==0):su(l,p),sl=T,Jr=M}break;case 30:break;default:su(l,p)}}function rT(l){var d=l.alternate;d!==null&&(l.alternate=null,rT(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Zt(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Dr=null,bi=!1;function ll(l,d,p){for(p=p.child;p!==null;)aT(l,d,p),p=p.sibling}function aT(l,d,p){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(_t,p)}catch{}switch(p.tag){case 26:Jr||us(p,d),ll(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Jr||us(p,d);var b=Dr,T=bi;pu(p.type)&&(Dr=p.stateNode,bi=!1),ll(l,d,p),Rp(p.stateNode),Dr=b,bi=T;break;case 5:Jr||us(p,d);case 6:if(b=Dr,T=bi,Dr=null,ll(l,d,p),Dr=b,bi=T,Dr!==null)if(bi)try{(Dr.nodeType===9?Dr.body:Dr.nodeName==="HTML"?Dr.ownerDocument.body:Dr).removeChild(p.stateNode)}catch(M){_r(p,d,M)}else try{Dr.removeChild(p.stateNode)}catch(M){_r(p,d,M)}break;case 18:Dr!==null&&(bi?(l=Dr,GT(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Fp(l)):GT(Dr,p.stateNode));break;case 4:b=Dr,T=bi,Dr=p.stateNode.containerInfo,bi=!0,ll(l,d,p),Dr=b,bi=T;break;case 0:case 11:case 14:case 15:Jr||ou(2,p,d),Jr||ou(4,p,d),ll(l,d,p);break;case 1:Jr||(us(p,d),b=p.stateNode,typeof b.componentWillUnmount=="function"&&XA(p,d,b)),ll(l,d,p);break;case 21:ll(l,d,p);break;case 22:Jr=(b=Jr)||p.memoizedState!==null,ll(l,d,p),Jr=b;break;default:ll(l,d,p)}}function iT(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Fp(l)}catch(p){_r(d,d.return,p)}}function PL(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new tT),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new tT),d;default:throw Error(r(435,l.tag))}}function q1(l,d){var p=PL(l);d.forEach(function(b){var T=VL.bind(null,l,b);p.has(b)||(p.add(b),b.then(T,T))})}function Di(l,d){var p=d.deletions;if(p!==null)for(var b=0;b<p.length;b++){var T=p[b],M=l,ie=d,_e=ie;e:for(;_e!==null;){switch(_e.tag){case 27:if(pu(_e.type)){Dr=_e.stateNode,bi=!1;break e}break;case 5:Dr=_e.stateNode,bi=!1;break e;case 3:case 4:Dr=_e.stateNode.containerInfo,bi=!0;break e}_e=_e.return}if(Dr===null)throw Error(r(160));aT(M,ie,T),Dr=null,bi=!1,M=T.alternate,M!==null&&(M.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)oT(d,l),d=d.sibling}var ko=null;function oT(l,d){var p=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Di(d,l),Mi(l),b&4&&(ou(3,l,l.return),vp(3,l),ou(5,l,l.return));break;case 1:Di(d,l),Mi(l),b&512&&(Jr||p===null||us(p,p.return)),b&64&&sl&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?b:p.concat(b))));break;case 26:var T=ko;if(Di(d,l),Mi(l),b&512&&(Jr||p===null||us(p,p.return)),b&4){var M=p!==null?p.memoizedState:null;if(b=l.memoizedState,p===null)if(b===null)if(l.stateNode===null){e:{b=l.type,p=l.memoizedProps,T=T.ownerDocument||T;t:switch(b){case"title":M=T.getElementsByTagName("title")[0],(!M||M[Ot]||M[he]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=T.createElement(b),T.head.insertBefore(M,T.querySelector("head > title"))),Da(M,b,p),M[he]=l,Dn(M),b=M;break e;case"link":var ie=e3("link","href",T).get(b+(p.href||""));if(ie){for(var _e=0;_e<ie.length;_e++)if(M=ie[_e],M.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&M.getAttribute("rel")===(p.rel==null?null:p.rel)&&M.getAttribute("title")===(p.title==null?null:p.title)&&M.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){ie.splice(_e,1);break t}}M=T.createElement(b),Da(M,b,p),T.head.appendChild(M);break;case"meta":if(ie=e3("meta","content",T).get(b+(p.content||""))){for(_e=0;_e<ie.length;_e++)if(M=ie[_e],M.getAttribute("content")===(p.content==null?null:""+p.content)&&M.getAttribute("name")===(p.name==null?null:p.name)&&M.getAttribute("property")===(p.property==null?null:p.property)&&M.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&M.getAttribute("charset")===(p.charSet==null?null:p.charSet)){ie.splice(_e,1);break t}}M=T.createElement(b),Da(M,b,p),T.head.appendChild(M);break;default:throw Error(r(468,b))}M[he]=l,Dn(M),b=M}l.stateNode=b}else t3(T,l.type,l.stateNode);else l.stateNode=QT(T,b,l.memoizedProps);else M!==b?(M===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):M.count--,b===null?t3(T,l.type,l.stateNode):QT(T,b,l.memoizedProps)):b===null&&l.stateNode!==null&&$1(l,l.memoizedProps,p.memoizedProps)}break;case 27:Di(d,l),Mi(l),b&512&&(Jr||p===null||us(p,p.return)),p!==null&&b&4&&$1(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Di(d,l),Mi(l),b&512&&(Jr||p===null||us(p,p.return)),l.flags&32){T=l.stateNode;try{ql(T,"")}catch(mt){_r(l,l.return,mt)}}b&4&&l.stateNode!=null&&(T=l.memoizedProps,$1(l,T,p!==null?p.memoizedProps:T)),b&1024&&(U1=!0);break;case 6:if(Di(d,l),Mi(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,p=l.stateNode;try{p.nodeValue=b}catch(mt){_r(l,l.return,mt)}}break;case 3:if(ty=null,T=ko,ko=Qg(d.containerInfo),Di(d,l),ko=T,Mi(l),b&4&&p!==null&&p.memoizedState.isDehydrated)try{Fp(d.containerInfo)}catch(mt){_r(l,l.return,mt)}U1&&(U1=!1,sT(l));break;case 4:b=ko,ko=Qg(l.stateNode.containerInfo),Di(d,l),Mi(l),ko=b;break;case 12:Di(d,l),Mi(l);break;case 13:Di(d,l),Mi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Z1=ce()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,q1(l,b)));break;case 22:T=l.memoizedState!==null;var Be=p!==null&&p.memoizedState!==null,ct=sl,St=Jr;if(sl=ct||T,Jr=St||Be,Di(d,l),Jr=St,sl=ct,Mi(l),b&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(p===null||Be||sl||Jr||Ac(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){Be=p=d;try{if(M=Be.stateNode,T)ie=M.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{_e=Be.stateNode;var At=Be.memoizedProps.style,pt=At!=null&&At.hasOwnProperty("display")?At.display:null;_e.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(mt){_r(Be,Be.return,mt)}}}else if(d.tag===6){if(p===null){Be=d;try{Be.stateNode.nodeValue=T?"":Be.memoizedProps}catch(mt){_r(Be,Be.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(p=b.retryQueue,p!==null&&(b.retryQueue=null,q1(l,p))));break;case 19:Di(d,l),Mi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,q1(l,b)));break;case 30:break;case 21:break;default:Di(d,l),Mi(l)}}function Mi(l){var d=l.flags;if(d&2){try{for(var p,b=l.return;b!==null;){if(QA(b)){p=b;break}b=b.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var T=p.stateNode,M=B1(l);Bg(l,M,T);break;case 5:var ie=p.stateNode;p.flags&32&&(ql(ie,""),p.flags&=-33);var _e=B1(l);Bg(l,_e,ie);break;case 3:case 4:var Be=p.stateNode.containerInfo,ct=B1(l);z1(l,ct,Be);break;default:throw Error(r(161))}}catch(St){_r(l,l.return,St)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function sT(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;sT(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function su(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)nT(l,d.alternate,d),d=d.sibling}function Ac(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:ou(4,d,d.return),Ac(d);break;case 1:us(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&XA(d,d.return,p),Ac(d);break;case 27:Rp(d.stateNode);case 26:case 5:us(d,d.return),Ac(d);break;case 22:d.memoizedState===null&&Ac(d);break;case 30:Ac(d);break;default:Ac(d)}l=l.sibling}}function lu(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,T=l,M=d,ie=M.flags;switch(M.tag){case 0:case 11:case 15:lu(T,M,p),vp(4,M);break;case 1:if(lu(T,M,p),b=M,T=b.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ct){_r(b,b.return,ct)}if(b=M,T=b.updateQueue,T!==null){var _e=b.stateNode;try{var Be=T.shared.hiddenCallbacks;if(Be!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Be.length;T++)PC(Be[T],_e)}catch(ct){_r(b,b.return,ct)}}p&&ie&64&&YA(M),wp(M,M.return);break;case 27:eT(M);case 26:case 5:lu(T,M,p),p&&b===null&&ie&4&&JA(M),wp(M,M.return);break;case 12:lu(T,M,p);break;case 13:lu(T,M,p),p&&ie&4&&iT(T,M);break;case 22:M.memoizedState===null&&lu(T,M,p),wp(M,M.return);break;case 30:break;default:lu(T,M,p)}d=d.sibling}}function H1(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&ip(p))}function V1(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ip(l))}function cs(l,d,p,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)lT(l,d,p,b),d=d.sibling}function lT(l,d,p,b){var T=d.flags;switch(d.tag){case 0:case 11:case 15:cs(l,d,p,b),T&2048&&vp(9,d);break;case 1:cs(l,d,p,b);break;case 3:cs(l,d,p,b),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ip(l)));break;case 12:if(T&2048){cs(l,d,p,b),l=d.stateNode;try{var M=d.memoizedProps,ie=M.id,_e=M.onPostCommit;typeof _e=="function"&&_e(ie,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Be){_r(d,d.return,Be)}}else cs(l,d,p,b);break;case 13:cs(l,d,p,b);break;case 23:break;case 22:M=d.stateNode,ie=d.alternate,d.memoizedState!==null?M._visibility&2?cs(l,d,p,b):_p(l,d):M._visibility&2?cs(l,d,p,b):(M._visibility|=2,tf(l,d,p,b,(d.subtreeFlags&10256)!==0)),T&2048&&H1(ie,d);break;case 24:cs(l,d,p,b),T&2048&&V1(d.alternate,d);break;default:cs(l,d,p,b)}}function tf(l,d,p,b,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var M=l,ie=d,_e=p,Be=b,ct=ie.flags;switch(ie.tag){case 0:case 11:case 15:tf(M,ie,_e,Be,T),vp(8,ie);break;case 23:break;case 22:var St=ie.stateNode;ie.memoizedState!==null?St._visibility&2?tf(M,ie,_e,Be,T):_p(M,ie):(St._visibility|=2,tf(M,ie,_e,Be,T)),T&&ct&2048&&H1(ie.alternate,ie);break;case 24:tf(M,ie,_e,Be,T),T&&ct&2048&&V1(ie.alternate,ie);break;default:tf(M,ie,_e,Be,T)}d=d.sibling}}function _p(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,b=d,T=b.flags;switch(b.tag){case 22:_p(p,b),T&2048&&H1(b.alternate,b);break;case 24:_p(p,b),T&2048&&V1(b.alternate,b);break;default:_p(p,b)}d=d.sibling}}var xp=8192;function nf(l){if(l.subtreeFlags&xp)for(l=l.child;l!==null;)uT(l),l=l.sibling}function uT(l){switch(l.tag){case 26:nf(l),l.flags&xp&&l.memoizedState!==null&&_$(ko,l.memoizedState,l.memoizedProps);break;case 5:nf(l);break;case 3:case 4:var d=ko;ko=Qg(l.stateNode.containerInfo),nf(l),ko=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=xp,xp=16777216,nf(l),xp=d):nf(l));break;default:nf(l)}}function cT(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Sp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];wa=b,fT(b,l)}cT(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)dT(l),l=l.sibling}function dT(l){switch(l.tag){case 0:case 11:case 15:Sp(l),l.flags&2048&&ou(9,l,l.return);break;case 3:Sp(l);break;case 12:Sp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,zg(l)):Sp(l);break;default:Sp(l)}}function zg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];wa=b,fT(b,l)}cT(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:ou(8,d,d.return),zg(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,zg(d));break;default:zg(d)}l=l.sibling}}function fT(l,d){for(;wa!==null;){var p=wa;switch(p.tag){case 0:case 11:case 15:ou(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var b=p.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:ip(p.memoizedState.cache)}if(b=p.child,b!==null)b.return=p,wa=b;else e:for(p=l;wa!==null;){b=wa;var T=b.sibling,M=b.return;if(rT(b),b===p){wa=null;break e}if(T!==null){T.return=M,wa=T;break e}wa=M}}}var FL={getCacheForType:function(l){var d=za(ca),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p}},LL=typeof WeakMap=="function"?WeakMap:Map,sr=0,kr=null,qn=null,Gn=0,lr=0,Pi=null,uu=!1,rf=!1,G1=!1,ul=0,Gr=0,cu=0,Tc=0,W1=0,io=0,af=0,Ep=null,vi=null,K1=!1,Z1=0,Ug=1/0,qg=null,du=null,ja=0,fu=null,of=null,sf=0,Y1=0,X1=null,hT=null,kp=0,J1=null;function Fi(){if((sr&2)!==0&&Gn!==0)return Gn&-Gn;if(ae.T!==null){var l=Wd;return l!==0?l:i_()}return U()}function pT(){io===0&&(io=(Gn&536870912)===0||er?vt():536870912);var l=ao.current;return l!==null&&(l.flags|=32),io}function Li(l,d,p){(l===kr&&(lr===2||lr===9)||l.cancelPendingCommit!==null)&&(lf(l,0),hu(l,Gn,io,!1)),st(l,p),((sr&2)===0||l!==kr)&&(l===kr&&((sr&2)===0&&(Tc|=p),Gr===4&&hu(l,Gn,io,!1)),ds(l))}function mT(l,d,p){if((sr&6)!==0)throw Error(r(327));var b=!p&&(d&124)===0&&(d&l.expiredLanes)===0||le(l,d),T=b?zL(l,d):t_(l,d,!0),M=b;do{if(T===0){rf&&!b&&hu(l,d,0,!1);break}else{if(p=l.current.alternate,M&&!$L(p)){T=t_(l,d,!1),M=!1;continue}if(T===2){if(M=d,l.errorRecoveryDisabledLanes&M)var ie=0;else ie=l.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){d=ie;e:{var _e=l;T=Ep;var Be=_e.current.memoizedState.isDehydrated;if(Be&&(lf(_e,ie).flags|=256),ie=t_(_e,ie,!1),ie!==2){if(G1&&!Be){_e.errorRecoveryDisabledLanes|=M,Tc|=M,T=4;break e}M=vi,vi=T,M!==null&&(vi===null?vi=M:vi.push.apply(vi,M))}T=ie}if(M=!1,T!==2)continue}}if(T===1){lf(l,0),hu(l,d,0,!0);break}e:{switch(b=l,M=T,M){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:hu(b,d,io,!uu);break e;case 2:vi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=Z1+300-ce(),10<T)){if(hu(b,d,io,!uu),Ee(b,0,!0)!==0)break e;b.timeoutHandle=HT(gT.bind(null,b,p,vi,qg,K1,d,io,Tc,af,uu,M,2,-0,0),T);break e}gT(b,p,vi,qg,K1,d,io,Tc,af,uu,M,0,-0,0)}}break}while(!0);ds(l)}function gT(l,d,p,b,T,M,ie,_e,Be,ct,St,At,pt,mt){if(l.timeoutHandle=-1,At=d.subtreeFlags,(At&8192||(At&16785408)===16785408)&&(Op={stylesheets:null,count:0,unsuspend:w$},uT(d),At=x$(),At!==null)){l.cancelPendingCommit=At(ST.bind(null,l,d,M,p,b,T,ie,_e,Be,St,1,pt,mt)),hu(l,M,ie,!ct);return}ST(l,d,M,p,b,T,ie,_e,Be)}function $L(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var b=0;b<p.length;b++){var T=p[b],M=T.getSnapshot;T=T.value;try{if(!Ba(M(),T))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function hu(l,d,p,b){d&=~W1,d&=~Tc,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var T=d;0<T;){var M=31-Kt(T),ie=1<<M;b[M]=-1,T&=~ie}p!==0&&De(l,p,d)}function Hg(){return(sr&6)===0?(Cp(0),!1):!0}function Q1(){if(qn!==null){if(lr===0)var l=qn.return;else l=qn,tl=xc=null,g1(l),Qd=null,gp=0,l=qn;for(;l!==null;)ZA(l.alternate,l),l=l.return;qn=null}}function lf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,r$(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Q1(),kr=l,qn=p=Js(l.current,null),Gn=d,lr=0,Pi=null,uu=!1,rf=le(l,d),G1=!1,af=io=W1=Tc=cu=Gr=0,vi=Ep=null,K1=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var T=31-Kt(b),M=1<<T;d|=l[T],b&=~M}return ul=d,bn(),p}function yT(l,d){Fn=null,ae.H=Ig,d===sp||d===_g?(d=DC(),lr=3):d===IC?(d=DC(),lr=4):lr=d===MA?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Pi=d,qn===null&&(Gr=1,Pg(l,un(d,l.current)))}function bT(){var l=ae.H;return ae.H=Ig,l===null?Ig:l}function vT(){var l=ae.A;return ae.A=FL,l}function e_(){Gr=4,uu||(Gn&4194048)!==Gn&&ao.current!==null||(rf=!0),(cu&134217727)===0&&(Tc&134217727)===0||kr===null||hu(kr,Gn,io,!1)}function t_(l,d,p){var b=sr;sr|=2;var T=bT(),M=vT();(kr!==l||Gn!==d)&&(qg=null,lf(l,d)),d=!1;var ie=Gr;e:do try{if(lr!==0&&qn!==null){var _e=qn,Be=Pi;switch(lr){case 8:Q1(),ie=6;break e;case 3:case 2:case 9:case 6:ao.current===null&&(d=!0);var ct=lr;if(lr=0,Pi=null,uf(l,_e,Be,ct),p&&rf){ie=0;break e}break;default:ct=lr,lr=0,Pi=null,uf(l,_e,Be,ct)}}BL(),ie=Gr;break}catch(St){yT(l,St)}while(!0);return d&&l.shellSuspendCounter++,tl=xc=null,sr=b,ae.H=T,ae.A=M,qn===null&&(kr=null,Gn=0,bn()),ie}function BL(){for(;qn!==null;)wT(qn)}function zL(l,d){var p=sr;sr|=2;var b=bT(),T=vT();kr!==l||Gn!==d?(qg=null,Ug=ce()+500,lf(l,d)):rf=le(l,d);e:do try{if(lr!==0&&qn!==null){d=qn;var M=Pi;t:switch(lr){case 1:lr=0,Pi=null,uf(l,d,M,1);break;case 2:case 9:if(OC(M)){lr=0,Pi=null,_T(d);break}d=function(){lr!==2&&lr!==9||kr!==l||(lr=7),ds(l)},M.then(d,d);break e;case 3:lr=7;break e;case 4:lr=5;break e;case 7:OC(M)?(lr=0,Pi=null,_T(d)):(lr=0,Pi=null,uf(l,d,M,7));break;case 5:var ie=null;switch(qn.tag){case 26:ie=qn.memoizedState;case 5:case 27:var _e=qn;if(!ie||n3(ie)){lr=0,Pi=null;var Be=_e.sibling;if(Be!==null)qn=Be;else{var ct=_e.return;ct!==null?(qn=ct,Vg(ct)):qn=null}break t}}lr=0,Pi=null,uf(l,d,M,5);break;case 6:lr=0,Pi=null,uf(l,d,M,6);break;case 8:Q1(),Gr=6;break e;default:throw Error(r(462))}}UL();break}catch(St){yT(l,St)}while(!0);return tl=xc=null,ae.H=b,ae.A=T,sr=p,qn!==null?0:(kr=null,Gn=0,bn(),Gr)}function UL(){for(;qn!==null&&!ke();)wT(qn)}function wT(l){var d=WA(l.alternate,l,ul);l.memoizedProps=l.pendingProps,d===null?Vg(l):qn=d}function _T(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=zA(p,d,d.pendingProps,d.type,void 0,Gn);break;case 11:d=zA(p,d,d.pendingProps,d.type.render,d.ref,Gn);break;case 5:g1(d);default:ZA(p,d),d=qn=xC(d,ul),d=WA(p,d,ul)}l.memoizedProps=l.pendingProps,d===null?Vg(l):qn=d}function uf(l,d,p,b){tl=xc=null,g1(d),Qd=null,gp=0;var T=d.return;try{if(IL(l,T,d,p,Gn)){Gr=1,Pg(l,un(p,l.current)),qn=null;return}}catch(M){if(T!==null)throw qn=T,M;Gr=1,Pg(l,un(p,l.current)),qn=null;return}d.flags&32768?(er||b===1?l=!0:rf||(Gn&536870912)!==0?l=!1:(uu=l=!0,(b===2||b===9||b===3||b===6)&&(b=ao.current,b!==null&&b.tag===13&&(b.flags|=16384))),xT(d,l)):Vg(d)}function Vg(l){var d=l;do{if((d.flags&32768)!==0){xT(d,uu);return}l=d.return;var p=jL(d.alternate,d,ul);if(p!==null){qn=p;return}if(d=d.sibling,d!==null){qn=d;return}qn=d=l}while(d!==null);Gr===0&&(Gr=5)}function xT(l,d){do{var p=DL(l.alternate,l);if(p!==null){p.flags&=32767,qn=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){qn=l;return}qn=l=p}while(l!==null);Gr=6,qn=null}function ST(l,d,p,b,T,M,ie,_e,Be){l.cancelPendingCommit=null;do Gg();while(ja!==0);if((sr&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(M=d.lanes|d.childLanes,M|=Ia,ge(l,p,M,ie,_e,Be),l===kr&&(qn=kr=null,Gn=0),of=d,fu=l,sf=p,Y1=M,X1=T,hT=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,GL(Pe,function(){return TT(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=ae.T,ae.T=null,T=re.p,re.p=2,ie=sr,sr|=4;try{ML(l,d,p)}finally{sr=ie,re.p=T,ae.T=b}}ja=1,ET(),kT(),CT()}}function ET(){if(ja===1){ja=0;var l=fu,d=of,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=ae.T,ae.T=null;var b=re.p;re.p=2;var T=sr;sr|=4;try{oT(d,l);var M=h_,ie=ue(l.containerInfo),_e=M.focusedElem,Be=M.selectionRange;if(ie!==_e&&_e&&_e.ownerDocument&&ee(_e.ownerDocument.documentElement,_e)){if(Be!==null&&ve(_e)){var ct=Be.start,St=Be.end;if(St===void 0&&(St=ct),"selectionStart"in _e)_e.selectionStart=ct,_e.selectionEnd=Math.min(St,_e.value.length);else{var At=_e.ownerDocument||document,pt=At&&At.defaultView||window;if(pt.getSelection){var mt=pt.getSelection(),vn=_e.textContent.length,hn=Math.min(Be.start,vn),gr=Be.end===void 0?hn:Math.min(Be.end,vn);!mt.extend&&hn>gr&&(ie=gr,gr=hn,hn=ie);var nt=K(_e,hn),Ke=K(_e,gr);if(nt&&Ke&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==Ke.node||mt.focusOffset!==Ke.offset)){var lt=At.createRange();lt.setStart(nt.node,nt.offset),mt.removeAllRanges(),hn>gr?(mt.addRange(lt),mt.extend(Ke.node,Ke.offset)):(lt.setEnd(Ke.node,Ke.offset),mt.addRange(lt))}}}}for(At=[],mt=_e;mt=mt.parentNode;)mt.nodeType===1&&At.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<At.length;_e++){var kt=At[_e];kt.element.scrollLeft=kt.left,kt.element.scrollTop=kt.top}}ay=!!f_,h_=f_=null}finally{sr=T,re.p=b,ae.T=p}}l.current=d,ja=2}}function kT(){if(ja===2){ja=0;var l=fu,d=of,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=ae.T,ae.T=null;var b=re.p;re.p=2;var T=sr;sr|=4;try{nT(l,d.alternate,d)}finally{sr=T,re.p=b,ae.T=p}}ja=3}}function CT(){if(ja===4||ja===3){ja=0,Ae();var l=fu,d=of,p=sf,b=hT;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ja=5:(ja=0,of=fu=null,AT(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(du=null),me(p),d=d.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(_t,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=ae.T,T=re.p,re.p=2,ae.T=null;try{for(var M=l.onRecoverableError,ie=0;ie<b.length;ie++){var _e=b[ie];M(_e.value,{componentStack:_e.stack})}}finally{ae.T=d,re.p=T}}(sf&3)!==0&&Gg(),ds(l),T=l.pendingLanes,(p&4194090)!==0&&(T&42)!==0?l===J1?kp++:(kp=0,J1=l):kp=0,Cp(0)}}function AT(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,ip(d)))}function Gg(l){return ET(),kT(),CT(),TT()}function TT(){if(ja!==5)return!1;var l=fu,d=Y1;Y1=0;var p=me(sf),b=ae.T,T=re.p;try{re.p=32>p?32:p,ae.T=null,p=X1,X1=null;var M=fu,ie=sf;if(ja=0,of=fu=null,sf=0,(sr&6)!==0)throw Error(r(331));var _e=sr;if(sr|=4,dT(M.current),lT(M,M.current,ie,p),sr=_e,Cp(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(_t,M)}catch{}return!0}finally{re.p=T,ae.T=b,AT(l,d)}}function RT(l,d,p){d=un(p,d),d=N1(l.stateNode,d,2),l=nu(l,d,2),l!==null&&(st(l,2),ds(l))}function _r(l,d,p){if(l.tag===3)RT(l,l,p);else for(;d!==null;){if(d.tag===3){RT(d,l,p);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(du===null||!du.has(b))){l=un(p,l),p=jA(2),b=nu(d,p,2),b!==null&&(DA(p,b,d,l),st(b,2),ds(b));break}}d=d.return}}function n_(l,d,p){var b=l.pingCache;if(b===null){b=l.pingCache=new LL;var T=new Set;b.set(d,T)}else T=b.get(d),T===void 0&&(T=new Set,b.set(d,T));T.has(p)||(G1=!0,T.add(p),l=qL.bind(null,l,d,p),d.then(l,l))}function qL(l,d,p){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,kr===l&&(Gn&p)===p&&(Gr===4||Gr===3&&(Gn&62914560)===Gn&&300>ce()-Z1?(sr&2)===0&&lf(l,0):W1|=p,af===Gn&&(af=0)),ds(l)}function NT(l,d){d===0&&(d=D()),l=Eo(l,d),l!==null&&(st(l,d),ds(l))}function HL(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),NT(l,p)}function VL(l,d){var p=0;switch(l.tag){case 13:var b=l.stateNode,T=l.memoizedState;T!==null&&(p=T.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),NT(l,p)}function GL(l,d){return Ce(l,d)}var Wg=null,cf=null,r_=!1,Kg=!1,a_=!1,Rc=0;function ds(l){l!==cf&&l.next===null&&(cf===null?Wg=cf=l:cf=cf.next=l),Kg=!0,r_||(r_=!0,KL())}function Cp(l,d){if(!a_&&Kg){a_=!0;do for(var p=!1,b=Wg;b!==null;){if(l!==0){var T=b.pendingLanes;if(T===0)var M=0;else{var ie=b.suspendedLanes,_e=b.pingedLanes;M=(1<<31-Kt(42|l)+1)-1,M&=T&~(ie&~_e),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(p=!0,DT(b,M))}else M=Gn,M=Ee(b,b===kr?M:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(M&3)===0||le(b,M)||(p=!0,DT(b,M));b=b.next}while(p);a_=!1}}function WL(){IT()}function IT(){Kg=r_=!1;var l=0;Rc!==0&&(n$()&&(l=Rc),Rc=0);for(var d=ce(),p=null,b=Wg;b!==null;){var T=b.next,M=OT(b,d);M===0?(b.next=null,p===null?Wg=T:p.next=T,T===null&&(cf=p)):(p=b,(l!==0||(M&3)!==0)&&(Kg=!0)),b=T}Cp(l)}function OT(l,d){for(var p=l.suspendedLanes,b=l.pingedLanes,T=l.expirationTimes,M=l.pendingLanes&-62914561;0<M;){var ie=31-Kt(M),_e=1<<ie,Be=T[ie];Be===-1?((_e&p)===0||(_e&b)!==0)&&(T[ie]=ft(_e,d)):Be<=d&&(l.expiredLanes|=_e),M&=~_e}if(d=kr,p=Gn,p=Ee(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,p===0||l===d&&(lr===2||lr===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&B(b),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||le(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(b!==null&&B(b),me(p)){case 2:case 8:p=xe;break;case 32:p=Pe;break;case 268435456:p=Ze;break;default:p=Pe}return b=jT.bind(null,l),p=Ce(p,b),l.callbackPriority=d,l.callbackNode=p,d}return b!==null&&b!==null&&B(b),l.callbackPriority=2,l.callbackNode=null,2}function jT(l,d){if(ja!==0&&ja!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Gg()&&l.callbackNode!==p)return null;var b=Gn;return b=Ee(l,l===kr?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(mT(l,b,d),OT(l,ce()),l.callbackNode!=null&&l.callbackNode===p?jT.bind(null,l):null)}function DT(l,d){if(Gg())return null;mT(l,d,!0)}function KL(){a$(function(){(sr&6)!==0?Ce(J,WL):IT()})}function i_(){return Rc===0&&(Rc=vt()),Rc}function MT(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:qs(""+l)}function PT(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function ZL(l,d,p,b,T){if(d==="submit"&&p&&p.stateNode===T){var M=MT((T[Ne]||null).action),ie=b.submitter;ie&&(d=(d=ie[Ne]||null)?MT(d.formAction):ie.getAttribute("formAction"),d!==null&&(M=d,ie=null));var _e=new Rd("action","action",null,b,T);l.push({event:_e,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Rc!==0){var Be=ie?PT(T,ie):new FormData(T);k1(p,{pending:!0,data:Be,method:T.method,action:M},null,Be)}}else typeof M=="function"&&(_e.preventDefault(),Be=ie?PT(T,ie):new FormData(T),k1(p,{pending:!0,data:Be,method:T.method,action:M},M,Be))},currentTarget:T}]})}}for(var o_=0;o_<Vt.length;o_++){var s_=Vt[o_],YL=s_.toLowerCase(),XL=s_[0].toUpperCase()+s_.slice(1);Mt(YL,"on"+XL)}Mt(dt,"onAnimationEnd"),Mt(yt,"onAnimationIteration"),Mt(bt,"onAnimationStart"),Mt("dblclick","onDoubleClick"),Mt("focusin","onFocus"),Mt("focusout","onBlur"),Mt(xt,"onTransitionRun"),Mt(Ft,"onTransitionStart"),Mt(qt,"onTransitionCancel"),Mt(Dt,"onTransitionEnd"),Qo("onMouseEnter",["mouseout","mouseover"]),Qo("onMouseLeave",["mouseout","mouseover"]),Qo("onPointerEnter",["pointerout","pointerover"]),Qo("onPointerLeave",["pointerout","pointerover"]),Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ap="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ap));function FT(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var b=l[p],T=b.event;b=b.listeners;e:{var M=void 0;if(d)for(var ie=b.length-1;0<=ie;ie--){var _e=b[ie],Be=_e.instance,ct=_e.currentTarget;if(_e=_e.listener,Be!==M&&T.isPropagationStopped())break e;M=_e,T.currentTarget=ct;try{M(T)}catch(St){Mg(St)}T.currentTarget=null,M=Be}else for(ie=0;ie<b.length;ie++){if(_e=b[ie],Be=_e.instance,ct=_e.currentTarget,_e=_e.listener,Be!==M&&T.isPropagationStopped())break e;M=_e,T.currentTarget=ct;try{M(T)}catch(St){Mg(St)}T.currentTarget=null,M=Be}}}}function Hn(l,d){var p=d[gt];p===void 0&&(p=d[gt]=new Set);var b=l+"__bubble";p.has(b)||(LT(d,l,2,!1),p.add(b))}function l_(l,d,p){var b=0;d&&(b|=4),LT(p,l,b,d)}var Zg="_reactListening"+Math.random().toString(36).slice(2);function u_(l){if(!l[Zg]){l[Zg]=!0,ti.forEach(function(p){p!=="selectionchange"&&(JL.has(p)||l_(p,!1,l),l_(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Zg]||(d[Zg]=!0,l_("selectionchange",!1,d))}}function LT(l,d,p,b){switch(l3(d)){case 2:var T=k$;break;case 8:T=C$;break;default:T=S_}p=T.bind(null,d,p,l),T=void 0,!zh||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),b?T!==void 0?l.addEventListener(d,p,{capture:!0,passive:T}):l.addEventListener(d,p,!0):T!==void 0?l.addEventListener(d,p,{passive:T}):l.addEventListener(d,p,!1)}function c_(l,d,p,b,T){var M=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var ie=b.tag;if(ie===3||ie===4){var _e=b.stateNode.containerInfo;if(_e===T)break;if(ie===4)for(ie=b.return;ie!==null;){var Be=ie.tag;if((Be===3||Be===4)&&ie.stateNode.containerInfo===T)return;ie=ie.return}for(;_e!==null;){if(ie=En(_e),ie===null)return;if(Be=ie.tag,Be===5||Be===6||Be===26||Be===27){b=M=ie;continue e}_e=_e.parentNode}}b=b.return}Vl(function(){var ct=M,St=Ad(p),At=[];e:{var pt=Bt.get(l);if(pt!==void 0){var mt=Rd,vn=l;switch(l){case"keypress":if(Kl(p)===0)break e;case"keydown":case"keyup":mt=Fd;break;case"focusin":vn="focus",mt=Zl;break;case"focusout":vn="blur",mt=Zl;break;case"beforeblur":case"afterblur":mt=Zl;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=Kh;break;case dt:case yt:case bt:mt=ig;break;case Dt:mt=Zh;break;case"scroll":case"scrollend":mt=Nd;break;case"wheel":mt=$d;break;case"copy":case"cut":case"paste":mt=Md;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Wh;break;case"toggle":case"beforetoggle":mt=lg}var hn=(d&4)!==0,gr=!hn&&(l==="scroll"||l==="scrollend"),nt=hn?pt!==null?pt+"Capture":null:pt;hn=[];for(var Ke=ct,lt;Ke!==null;){var kt=Ke;if(lt=kt.stateNode,kt=kt.tag,kt!==5&&kt!==26&&kt!==27||lt===null||nt===null||(kt=Gs(Ke,nt),kt!=null&&hn.push(Tp(Ke,kt,lt))),gr)break;Ke=Ke.return}0<hn.length&&(pt=new mt(pt,vn,null,p,St),At.push({event:pt,listeners:hn}))}}if((d&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",pt&&p!==Ji&&(vn=p.relatedTarget||p.fromElement)&&(En(vn)||vn[Ve]))break e;if((mt||pt)&&(pt=St.window===St?St:(pt=St.ownerDocument)?pt.defaultView||pt.parentWindow:window,mt?(vn=p.relatedTarget||p.toElement,mt=ct,vn=vn?En(vn):null,vn!==null&&(gr=i(vn),hn=vn.tag,vn!==gr||hn!==5&&hn!==27&&hn!==6)&&(vn=null)):(mt=null,vn=ct),mt!==vn)){if(hn=Od,kt="onMouseLeave",nt="onMouseEnter",Ke="mouse",(l==="pointerout"||l==="pointerover")&&(hn=Wh,kt="onPointerLeave",nt="onPointerEnter",Ke="pointer"),gr=mt==null?pt:fr(mt),lt=vn==null?pt:fr(vn),pt=new hn(kt,Ke+"leave",mt,p,St),pt.target=gr,pt.relatedTarget=lt,kt=null,En(St)===ct&&(hn=new hn(nt,Ke+"enter",vn,p,St),hn.target=lt,hn.relatedTarget=gr,kt=hn),gr=kt,mt&&vn)t:{for(hn=mt,nt=vn,Ke=0,lt=hn;lt;lt=df(lt))Ke++;for(lt=0,kt=nt;kt;kt=df(kt))lt++;for(;0<Ke-lt;)hn=df(hn),Ke--;for(;0<lt-Ke;)nt=df(nt),lt--;for(;Ke--;){if(hn===nt||nt!==null&&hn===nt.alternate)break t;hn=df(hn),nt=df(nt)}hn=null}else hn=null;mt!==null&&$T(At,pt,mt,hn,!1),vn!==null&&gr!==null&&$T(At,gr,vn,hn,!0)}}e:{if(pt=ct?fr(ct):window,mt=pt.nodeName&&pt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&pt.type==="file")var Qt=gc;else if(Ud(pt))if(eo)Qt=Jl;else{Qt=Xs;var Bn=pg}else mt=pt.nodeName,!mt||mt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?ct&&Bh(ct.elementType)&&(Qt=gc):Qt=ep;if(Qt&&(Qt=Qt(l,ct))){Qh(At,Qt,p,St);break e}Bn&&Bn(l,pt,ct),l==="focusout"&&ct&&pt.type==="number"&&ct.memoizedProps.value!=null&&zl(pt,"number",pt.value)}switch(Bn=ct?fr(ct):window,l){case"focusin":(Ud(Bn)||Bn.contentEditable==="true")&&(Le=Bn,We=ct,Ye=null);break;case"focusout":Ye=We=Le=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,qe(At,p,St);break;case"selectionchange":if(je)break;case"keydown":case"keyup":qe(At,p,St)}var on;if(pc)e:{switch(l){case"compositionstart":var gn="onCompositionStart";break e;case"compositionend":gn="onCompositionEnd";break e;case"compositionupdate":gn="onCompositionUpdate";break e}gn=void 0}else Ys?Jh(l,p)&&(gn="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(gn="onCompositionStart");gn&&(Bd&&p.locale!=="ko"&&(Ys||gn!=="onCompositionStart"?gn==="onCompositionEnd"&&Ys&&(on=Wl()):(Qi=St,Td="value"in Qi?Qi.value:Qi.textContent,Ys=!0)),Bn=Yg(ct,gn),0<Bn.length&&(gn=new Pd(gn,l,null,p,St),At.push({event:gn,listeners:Bn}),on?gn.data=on:(on=cg(p),on!==null&&(gn.data=on)))),(on=Hw?dg(l,p):Vw(l,p))&&(gn=Yg(ct,"onBeforeInput"),0<gn.length&&(Bn=new Pd("onBeforeInput","beforeinput",null,p,St),At.push({event:Bn,listeners:gn}),Bn.data=on)),ZL(At,l,ct,p,St)}FT(At,d)})}function Tp(l,d,p){return{instance:l,listener:d,currentTarget:p}}function Yg(l,d){for(var p=d+"Capture",b=[];l!==null;){var T=l,M=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||M===null||(T=Gs(l,p),T!=null&&b.unshift(Tp(l,T,M)),T=Gs(l,d),T!=null&&b.push(Tp(l,T,M))),l.tag===3)return b;l=l.return}return[]}function df(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function $T(l,d,p,b,T){for(var M=d._reactName,ie=[];p!==null&&p!==b;){var _e=p,Be=_e.alternate,ct=_e.stateNode;if(_e=_e.tag,Be!==null&&Be===b)break;_e!==5&&_e!==26&&_e!==27||ct===null||(Be=ct,T?(ct=Gs(p,M),ct!=null&&ie.unshift(Tp(p,ct,Be))):T||(ct=Gs(p,M),ct!=null&&ie.push(Tp(p,ct,Be)))),p=p.return}ie.length!==0&&l.push({event:d,listeners:ie})}var QL=/\r\n?/g,e$=/\u0000|\uFFFD/g;function BT(l){return(typeof l=="string"?l:""+l).replace(QL,`
`).replace(e$,"")}function zT(l,d){return d=BT(d),BT(l)===d}function Xg(){}function mr(l,d,p,b,T,M){switch(p){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||ql(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&ql(l,""+b);break;case"className":Bs(l,"class",b);break;case"tabIndex":Bs(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(l,p,b);break;case"style":ng(l,b,M);break;case"data":if(d!=="object"){Bs(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=qs(""+b),l.setAttribute(p,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(p==="formAction"?(d!=="input"&&mr(l,d,"name",T.name,T,null),mr(l,d,"formEncType",T.formEncType,T,null),mr(l,d,"formMethod",T.formMethod,T,null),mr(l,d,"formTarget",T.formTarget,T,null)):(mr(l,d,"encType",T.encType,T,null),mr(l,d,"method",T.method,T,null),mr(l,d,"target",T.target,T,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=qs(""+b),l.setAttribute(p,b);break;case"onClick":b!=null&&(l.onclick=Xg);break;case"onScroll":b!=null&&Hn("scroll",l);break;case"onScrollEnd":b!=null&&Hn("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}p=qs(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""+b):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":b===!0?l.setAttribute(p,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,b):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(p,b):l.removeAttribute(p);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(p):l.setAttribute(p,b);break;case"popover":Hn("beforetoggle",l),Hn("toggle",l),xo(l,"popover",b);break;case"xlinkActuate":Ii(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Ii(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Ii(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Ii(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Ii(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Ii(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":xo(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ri.get(p)||p,xo(l,p,b))}}function d_(l,d,p,b,T,M){switch(p){case"style":ng(l,b,M);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof b=="string"?ql(l,b):(typeof b=="number"||typeof b=="bigint")&&ql(l,""+b);break;case"onScroll":b!=null&&Hn("scroll",l);break;case"onScrollEnd":b!=null&&Hn("scrollend",l);break;case"onClick":b!=null&&(l.onclick=Xg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xo.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(T=p.endsWith("Capture"),d=p.slice(2,T?p.length-7:void 0),M=l[Ne]||null,M=M!=null?M[p]:null,typeof M=="function"&&l.removeEventListener(d,M,T),typeof b=="function")){typeof M!="function"&&M!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,b,T);break e}p in l?l[p]=b:b===!0?l.setAttribute(p,""):xo(l,p,b)}}}function Da(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hn("error",l),Hn("load",l);var b=!1,T=!1,M;for(M in p)if(p.hasOwnProperty(M)){var ie=p[M];if(ie!=null)switch(M){case"src":b=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,M,ie,p,null)}}T&&mr(l,d,"srcSet",p.srcSet,p,null),b&&mr(l,d,"src",p.src,p,null);return;case"input":Hn("invalid",l);var _e=M=ie=T=null,Be=null,ct=null;for(b in p)if(p.hasOwnProperty(b)){var St=p[b];if(St!=null)switch(b){case"name":T=St;break;case"type":ie=St;break;case"checked":Be=St;break;case"defaultChecked":ct=St;break;case"value":M=St;break;case"defaultValue":_e=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,d));break;default:mr(l,d,b,St,p,null)}}Lh(l,M,_e,Be,ct,ie,T,!1),ns(l);return;case"select":Hn("invalid",l),b=ie=M=null;for(T in p)if(p.hasOwnProperty(T)&&(_e=p[T],_e!=null))switch(T){case"value":M=_e;break;case"defaultValue":ie=_e;break;case"multiple":b=_e;default:mr(l,d,T,_e,p,null)}d=M,p=ie,l.multiple=!!b,d!=null?Us(l,!!b,d,!1):p!=null&&Us(l,!!b,p,!0);return;case"textarea":Hn("invalid",l),M=T=b=null;for(ie in p)if(p.hasOwnProperty(ie)&&(_e=p[ie],_e!=null))switch(ie){case"value":b=_e;break;case"defaultValue":T=_e;break;case"children":M=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(91));break;default:mr(l,d,ie,_e,p,null)}$h(l,b,T,M),ns(l);return;case"option":for(Be in p)if(p.hasOwnProperty(Be)&&(b=p[Be],b!=null))switch(Be){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:mr(l,d,Be,b,p,null)}return;case"dialog":Hn("beforetoggle",l),Hn("toggle",l),Hn("cancel",l),Hn("close",l);break;case"iframe":case"object":Hn("load",l);break;case"video":case"audio":for(b=0;b<Ap.length;b++)Hn(Ap[b],l);break;case"image":Hn("error",l),Hn("load",l);break;case"details":Hn("toggle",l);break;case"embed":case"source":case"link":Hn("error",l),Hn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in p)if(p.hasOwnProperty(ct)&&(b=p[ct],b!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,ct,b,p,null)}return;default:if(Bh(d)){for(St in p)p.hasOwnProperty(St)&&(b=p[St],b!==void 0&&d_(l,d,St,b,p,void 0));return}}for(_e in p)p.hasOwnProperty(_e)&&(b=p[_e],b!=null&&mr(l,d,_e,b,p,null))}function t$(l,d,p,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,M=null,ie=null,_e=null,Be=null,ct=null,St=null;for(mt in p){var At=p[mt];if(p.hasOwnProperty(mt)&&At!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Be=At;default:b.hasOwnProperty(mt)||mr(l,d,mt,null,b,At)}}for(var pt in b){var mt=b[pt];if(At=p[pt],b.hasOwnProperty(pt)&&(mt!=null||At!=null))switch(pt){case"type":M=mt;break;case"name":T=mt;break;case"checked":ct=mt;break;case"defaultChecked":St=mt;break;case"value":ie=mt;break;case"defaultValue":_e=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,d));break;default:mt!==At&&mr(l,d,pt,mt,b,At)}}Bl(l,ie,_e,Be,ct,St,M,T);return;case"select":mt=ie=_e=pt=null;for(M in p)if(Be=p[M],p.hasOwnProperty(M)&&Be!=null)switch(M){case"value":break;case"multiple":mt=Be;default:b.hasOwnProperty(M)||mr(l,d,M,null,b,Be)}for(T in b)if(M=b[T],Be=p[T],b.hasOwnProperty(T)&&(M!=null||Be!=null))switch(T){case"value":pt=M;break;case"defaultValue":_e=M;break;case"multiple":ie=M;default:M!==Be&&mr(l,d,T,M,b,Be)}d=_e,p=ie,b=mt,pt!=null?Us(l,!!p,pt,!1):!!b!=!!p&&(d!=null?Us(l,!!p,d,!0):Us(l,!!p,p?[]:"",!1));return;case"textarea":mt=pt=null;for(_e in p)if(T=p[_e],p.hasOwnProperty(_e)&&T!=null&&!b.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:mr(l,d,_e,null,b,T)}for(ie in b)if(T=b[ie],M=p[ie],b.hasOwnProperty(ie)&&(T!=null||M!=null))switch(ie){case"value":pt=T;break;case"defaultValue":mt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==M&&mr(l,d,ie,T,b,M)}Ul(l,pt,mt);return;case"option":for(var vn in p)if(pt=p[vn],p.hasOwnProperty(vn)&&pt!=null&&!b.hasOwnProperty(vn))switch(vn){case"selected":l.selected=!1;break;default:mr(l,d,vn,null,b,pt)}for(Be in b)if(pt=b[Be],mt=p[Be],b.hasOwnProperty(Be)&&pt!==mt&&(pt!=null||mt!=null))switch(Be){case"selected":l.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:mr(l,d,Be,pt,b,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hn in p)pt=p[hn],p.hasOwnProperty(hn)&&pt!=null&&!b.hasOwnProperty(hn)&&mr(l,d,hn,null,b,pt);for(ct in b)if(pt=b[ct],mt=p[ct],b.hasOwnProperty(ct)&&pt!==mt&&(pt!=null||mt!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,d));break;default:mr(l,d,ct,pt,b,mt)}return;default:if(Bh(d)){for(var gr in p)pt=p[gr],p.hasOwnProperty(gr)&&pt!==void 0&&!b.hasOwnProperty(gr)&&d_(l,d,gr,void 0,b,pt);for(St in b)pt=b[St],mt=p[St],!b.hasOwnProperty(St)||pt===mt||pt===void 0&&mt===void 0||d_(l,d,St,pt,b,mt);return}}for(var nt in p)pt=p[nt],p.hasOwnProperty(nt)&&pt!=null&&!b.hasOwnProperty(nt)&&mr(l,d,nt,null,b,pt);for(At in b)pt=b[At],mt=p[At],!b.hasOwnProperty(At)||pt===mt||pt==null&&mt==null||mr(l,d,At,pt,b,mt)}var f_=null,h_=null;function Jg(l){return l.nodeType===9?l:l.ownerDocument}function UT(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qT(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function p_(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var m_=null;function n$(){var l=window.event;return l&&l.type==="popstate"?l===m_?!1:(m_=l,!0):(m_=null,!1)}var HT=typeof setTimeout=="function"?setTimeout:void 0,r$=typeof clearTimeout=="function"?clearTimeout:void 0,VT=typeof Promise=="function"?Promise:void 0,a$=typeof queueMicrotask=="function"?queueMicrotask:typeof VT<"u"?function(l){return VT.resolve(null).then(l).catch(i$)}:HT;function i$(l){setTimeout(function(){throw l})}function pu(l){return l==="head"}function GT(l,d){var p=d,b=0,T=0;do{var M=p.nextSibling;if(l.removeChild(p),M&&M.nodeType===8)if(p=M.data,p==="/$"){if(0<b&&8>b){p=b;var ie=l.ownerDocument;if(p&1&&Rp(ie.documentElement),p&2&&Rp(ie.body),p&4)for(p=ie.head,Rp(p),ie=p.firstChild;ie;){var _e=ie.nextSibling,Be=ie.nodeName;ie[Ot]||Be==="SCRIPT"||Be==="STYLE"||Be==="LINK"&&ie.rel.toLowerCase()==="stylesheet"||p.removeChild(ie),ie=_e}}if(T===0){l.removeChild(M),Fp(d);return}T--}else p==="$"||p==="$?"||p==="$!"?T++:b=p.charCodeAt(0)-48;else b=0;p=M}while(p);Fp(d)}function g_(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":g_(p),Zt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function o$(l,d,p,b){for(;l.nodeType===1;){var T=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Ot])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(M=l.getAttribute("rel"),M==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(M!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(M=l.getAttribute("src"),(M!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&M&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var M=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===M)return l}else return l;if(l=Co(l.nextSibling),l===null)break}return null}function s$(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Co(l.nextSibling),l===null))return null;return l}function y_(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function l$(l,d){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")d();else{var b=function(){d(),p.removeEventListener("DOMContentLoaded",b)};p.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Co(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var b_=null;function WT(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}function KT(l,d,p){switch(d=Jg(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Rp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Zt(l)}var oo=new Map,ZT=new Set;function Qg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var cl=re.d;re.d={f:u$,r:c$,D:d$,C:f$,L:h$,m:p$,X:g$,S:m$,M:y$};function u$(){var l=cl.f(),d=Hg();return l||d}function c$(l){var d=zn(l);d!==null&&d.tag===5&&d.type==="form"?mA(d):cl.r(l)}var ff=typeof document>"u"?null:document;function YT(l,d,p){var b=ff;if(b&&typeof d=="string"&&d){var T=La(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof p=="string"&&(T+='[crossorigin="'+p+'"]'),ZT.has(T)||(ZT.add(T),l={rel:l,crossOrigin:p,href:d},b.querySelector(T)===null&&(d=b.createElement("link"),Da(d,"link",l),Dn(d),b.head.appendChild(d)))}}function d$(l){cl.D(l),YT("dns-prefetch",l,null)}function f$(l,d){cl.C(l,d),YT("preconnect",l,d)}function h$(l,d,p){cl.L(l,d,p);var b=ff;if(b&&l&&d){var T='link[rel="preload"][as="'+La(d)+'"]';d==="image"&&p&&p.imageSrcSet?(T+='[imagesrcset="'+La(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(T+='[imagesizes="'+La(p.imageSizes)+'"]')):T+='[href="'+La(l)+'"]';var M=T;switch(d){case"style":M=hf(l);break;case"script":M=pf(l)}oo.has(M)||(l=f({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),oo.set(M,l),b.querySelector(T)!==null||d==="style"&&b.querySelector(Np(M))||d==="script"&&b.querySelector(Ip(M))||(d=b.createElement("link"),Da(d,"link",l),Dn(d),b.head.appendChild(d)))}}function p$(l,d){cl.m(l,d);var p=ff;if(p&&l){var b=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+La(b)+'"][href="'+La(l)+'"]',M=T;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=pf(l)}if(!oo.has(M)&&(l=f({rel:"modulepreload",href:l},d),oo.set(M,l),p.querySelector(T)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Ip(M)))return}b=p.createElement("link"),Da(b,"link",l),Dn(b),p.head.appendChild(b)}}}function m$(l,d,p){cl.S(l,d,p);var b=ff;if(b&&l){var T=hr(b).hoistableStyles,M=hf(l);d=d||"default";var ie=T.get(M);if(!ie){var _e={loading:0,preload:null};if(ie=b.querySelector(Np(M)))_e.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},p),(p=oo.get(M))&&v_(l,p);var Be=ie=b.createElement("link");Dn(Be),Da(Be,"link",l),Be._p=new Promise(function(ct,St){Be.onload=ct,Be.onerror=St}),Be.addEventListener("load",function(){_e.loading|=1}),Be.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,ey(ie,d,b)}ie={type:"stylesheet",instance:ie,count:1,state:_e},T.set(M,ie)}}}function g$(l,d){cl.X(l,d);var p=ff;if(p&&l){var b=hr(p).hoistableScripts,T=pf(l),M=b.get(T);M||(M=p.querySelector(Ip(T)),M||(l=f({src:l,async:!0},d),(d=oo.get(T))&&w_(l,d),M=p.createElement("script"),Dn(M),Da(M,"link",l),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},b.set(T,M))}}function y$(l,d){cl.M(l,d);var p=ff;if(p&&l){var b=hr(p).hoistableScripts,T=pf(l),M=b.get(T);M||(M=p.querySelector(Ip(T)),M||(l=f({src:l,async:!0,type:"module"},d),(d=oo.get(T))&&w_(l,d),M=p.createElement("script"),Dn(M),Da(M,"link",l),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},b.set(T,M))}}function XT(l,d,p,b){var T=(T=Me.current)?Qg(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=hf(p.href),p=hr(T).hoistableStyles,b=p.get(d),b||(b={type:"style",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=hf(p.href);var M=hr(T).hoistableStyles,ie=M.get(l);if(ie||(T=T.ownerDocument||T,ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(l,ie),(M=T.querySelector(Np(l)))&&!M._p&&(ie.instance=M,ie.state.loading=5),oo.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},oo.set(l,p),M||b$(T,l,p,ie.state))),d&&b===null)throw Error(r(528,""));return ie}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=pf(p),p=hr(T).hoistableScripts,b=p.get(d),b||(b={type:"script",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function hf(l){return'href="'+La(l)+'"'}function Np(l){return'link[rel="stylesheet"]['+l+"]"}function JT(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function b$(l,d,p,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),Da(d,"link",p),Dn(d),l.head.appendChild(d))}function pf(l){return'[src="'+La(l)+'"]'}function Ip(l){return"script[async]"+l}function QT(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+La(p.href)+'"]');if(b)return d.instance=b,Dn(b),b;var T=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Dn(b),Da(b,"style",T),ey(b,p.precedence,l),d.instance=b;case"stylesheet":T=hf(p.href);var M=l.querySelector(Np(T));if(M)return d.state.loading|=4,d.instance=M,Dn(M),M;b=JT(p),(T=oo.get(T))&&v_(b,T),M=(l.ownerDocument||l).createElement("link"),Dn(M);var ie=M;return ie._p=new Promise(function(_e,Be){ie.onload=_e,ie.onerror=Be}),Da(M,"link",b),d.state.loading|=4,ey(M,p.precedence,l),d.instance=M;case"script":return M=pf(p.src),(T=l.querySelector(Ip(M)))?(d.instance=T,Dn(T),T):(b=p,(T=oo.get(M))&&(b=f({},p),w_(b,T)),l=l.ownerDocument||l,T=l.createElement("script"),Dn(T),Da(T,"link",b),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,ey(b,p.precedence,l));return d.instance}function ey(l,d,p){for(var b=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=b.length?b[b.length-1]:null,M=T,ie=0;ie<b.length;ie++){var _e=b[ie];if(_e.dataset.precedence===d)M=_e;else if(M!==T)break}M?M.parentNode.insertBefore(l,M.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function v_(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function w_(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var ty=null;function e3(l,d,p){if(ty===null){var b=new Map,T=ty=new Map;T.set(p,b)}else T=ty,b=T.get(p),b||(b=new Map,T.set(p,b));if(b.has(l))return b;for(b.set(l,null),p=p.getElementsByTagName(l),T=0;T<p.length;T++){var M=p[T];if(!(M[Ot]||M[he]||l==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var ie=M.getAttribute(d)||"";ie=l+ie;var _e=b.get(ie);_e?_e.push(M):b.set(ie,[M])}}return b}function t3(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function v$(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function n3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Op=null;function w$(){}function _$(l,d,p){if(Op===null)throw Error(r(475));var b=Op;if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=hf(p.href),M=l.querySelector(Np(T));if(M){l=M._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=ny.bind(b),l.then(b,b)),d.state.loading|=4,d.instance=M,Dn(M);return}M=l.ownerDocument||l,p=JT(p),(T=oo.get(T))&&v_(p,T),M=M.createElement("link"),Dn(M);var ie=M;ie._p=new Promise(function(_e,Be){ie.onload=_e,ie.onerror=Be}),Da(M,"link",p),d.instance=M}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=ny.bind(b),l.addEventListener("load",d),l.addEventListener("error",d))}}function x$(){if(Op===null)throw Error(r(475));var l=Op;return l.stylesheets&&l.count===0&&__(l,l.stylesheets),0<l.count?function(d){var p=setTimeout(function(){if(l.stylesheets&&__(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(p)}}:null}function ny(){if(this.count--,this.count===0){if(this.stylesheets)__(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ry=null;function __(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ry=new Map,d.forEach(S$,l),ry=null,ny.call(l))}function S$(l,d){if(!(d.state.loading&4)){var p=ry.get(l);if(p)var b=p.get(null);else{p=new Map,ry.set(l,p);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<T.length;M++){var ie=T[M];(ie.nodeName==="LINK"||ie.getAttribute("media")!=="not all")&&(p.set(ie.dataset.precedence,ie),b=ie)}b&&p.set(null,b)}T=d.instance,ie=T.getAttribute("data-precedence"),M=p.get(ie)||b,M===b&&p.set(null,T),p.set(ie,T),this.count++,b=ny.bind(this),T.addEventListener("load",b),T.addEventListener("error",b),M?M.parentNode.insertBefore(T,M.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var jp={$$typeof:E,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function E$(l,d,p,b,T,M,ie,_e){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=b,this.onUncaughtError=T,this.onCaughtError=M,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function r3(l,d,p,b,T,M,ie,_e,Be,ct,St,At){return l=new E$(l,d,p,ie,_e,Be,ct,At),d=1,M===!0&&(d|=24),M=ji(3,null,null,d),l.current=M,M.stateNode=l,d=n1(),d.refCount++,l.pooledCache=d,d.refCount++,M.memoizedState={element:b,isDehydrated:p,cache:d},o1(M),l}function a3(l){return l?(l=os,l):os}function i3(l,d,p,b,T,M){T=a3(T),b.context===null?b.context=T:b.pendingContext=T,b=tu(d),b.payload={element:p},M=M===void 0?null:M,M!==null&&(b.callback=M),p=nu(l,b,d),p!==null&&(Li(p,l,d),up(p,l,d))}function o3(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function x_(l,d){o3(l,d),(l=l.alternate)&&o3(l,d)}function s3(l){if(l.tag===13){var d=Eo(l,67108864);d!==null&&Li(d,l,67108864),x_(l,67108864)}}var ay=!0;function k$(l,d,p,b){var T=ae.T;ae.T=null;var M=re.p;try{re.p=2,S_(l,d,p,b)}finally{re.p=M,ae.T=T}}function C$(l,d,p,b){var T=ae.T;ae.T=null;var M=re.p;try{re.p=8,S_(l,d,p,b)}finally{re.p=M,ae.T=T}}function S_(l,d,p,b){if(ay){var T=E_(b);if(T===null)c_(l,d,b,iy,p),u3(l,b);else if(T$(T,l,d,p,b))b.stopPropagation();else if(u3(l,b),d&4&&-1<A$.indexOf(l)){for(;T!==null;){var M=zn(T);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var ie=be(M.pendingLanes);if(ie!==0){var _e=M;for(_e.pendingLanes|=2,_e.entangledLanes|=2;ie;){var Be=1<<31-Kt(ie);_e.entanglements[1]|=Be,ie&=~Be}ds(M),(sr&6)===0&&(Ug=ce()+500,Cp(0))}}break;case 13:_e=Eo(M,2),_e!==null&&Li(_e,M,2),Hg(),x_(M,2)}if(M=E_(b),M===null&&c_(l,d,b,iy,p),M===T)break;T=M}T!==null&&b.stopPropagation()}else c_(l,d,b,null,p)}}function E_(l){return l=Ad(l),k_(l)}var iy=null;function k_(l){if(iy=null,l=En(l),l!==null){var d=i(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return iy=l,null}function l3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case J:return 2;case xe:return 8;case Pe:case Se:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var C_=!1,mu=null,gu=null,yu=null,Dp=new Map,Mp=new Map,bu=[],A$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u3(l,d){switch(l){case"focusin":case"focusout":mu=null;break;case"dragenter":case"dragleave":gu=null;break;case"mouseover":case"mouseout":yu=null;break;case"pointerover":case"pointerout":Dp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mp.delete(d.pointerId)}}function Pp(l,d,p,b,T,M){return l===null||l.nativeEvent!==M?(l={blockedOn:d,domEventName:p,eventSystemFlags:b,nativeEvent:M,targetContainers:[T]},d!==null&&(d=zn(d),d!==null&&s3(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function T$(l,d,p,b,T){switch(d){case"focusin":return mu=Pp(mu,l,d,p,b,T),!0;case"dragenter":return gu=Pp(gu,l,d,p,b,T),!0;case"mouseover":return yu=Pp(yu,l,d,p,b,T),!0;case"pointerover":var M=T.pointerId;return Dp.set(M,Pp(Dp.get(M)||null,l,d,p,b,T)),!0;case"gotpointercapture":return M=T.pointerId,Mp.set(M,Pp(Mp.get(M)||null,l,d,p,b,T)),!0}return!1}function c3(l){var d=En(l.target);if(d!==null){var p=i(d);if(p!==null){if(d=p.tag,d===13){if(d=o(p),d!==null){l.blockedOn=d,$(l.priority,function(){if(p.tag===13){var b=Fi();b=It(b);var T=Eo(p,b);T!==null&&Li(T,p,b),x_(p,b)}});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function oy(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=E_(l.nativeEvent);if(p===null){p=l.nativeEvent;var b=new p.constructor(p.type,p);Ji=b,p.target.dispatchEvent(b),Ji=null}else return d=zn(p),d!==null&&s3(d),l.blockedOn=p,!1;d.shift()}return!0}function d3(l,d,p){oy(l)&&p.delete(d)}function R$(){C_=!1,mu!==null&&oy(mu)&&(mu=null),gu!==null&&oy(gu)&&(gu=null),yu!==null&&oy(yu)&&(yu=null),Dp.forEach(d3),Mp.forEach(d3)}function sy(l,d){l.blockedOn===d&&(l.blockedOn=null,C_||(C_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,R$)))}var ly=null;function f3(l){ly!==l&&(ly=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ly===l&&(ly=null);for(var d=0;d<l.length;d+=3){var p=l[d],b=l[d+1],T=l[d+2];if(typeof b!="function"){if(k_(b||p)===null)continue;break}var M=zn(p);M!==null&&(l.splice(d,3),d-=3,k1(M,{pending:!0,data:T,method:p.method,action:b},b,T))}}))}function Fp(l){function d(Be){return sy(Be,l)}mu!==null&&sy(mu,l),gu!==null&&sy(gu,l),yu!==null&&sy(yu,l),Dp.forEach(d),Mp.forEach(d);for(var p=0;p<bu.length;p++){var b=bu[p];b.blockedOn===l&&(b.blockedOn=null)}for(;0<bu.length&&(p=bu[0],p.blockedOn===null);)c3(p),p.blockedOn===null&&bu.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(b=0;b<p.length;b+=3){var T=p[b],M=p[b+1],ie=T[Ne]||null;if(typeof M=="function")ie||f3(p);else if(ie){var _e=null;if(M&&M.hasAttribute("formAction")){if(T=M,ie=M[Ne]||null)_e=ie.formAction;else if(k_(T)!==null)continue}else _e=ie.action;typeof _e=="function"?p[b+1]=_e:(p.splice(b,3),b-=3),f3(p)}}}function A_(l){this._internalRoot=l}uy.prototype.render=A_.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,b=Fi();i3(p,b,l,d,null,null)},uy.prototype.unmount=A_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;i3(l.current,2,null,l,null,null),Hg(),d[Ve]=null}};function uy(l){this._internalRoot=l}uy.prototype.unstable_scheduleHydration=function(l){if(l){var d=U();l={blockedOn:null,target:l,priority:d};for(var p=0;p<bu.length&&d!==0&&d<bu[p].priority;p++);bu.splice(p,0,l),p===0&&c3(l)}};var h3=t.version;if(h3!=="19.1.0")throw Error(r(527,h3,"19.1.0"));re.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var N$={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cy.isDisabled&&cy.supportsFiber)try{_t=cy.inject(N$),Nt=cy}catch{}}return $p.createRoot=function(l,d){if(!a(l))throw Error(r(299));var p=!1,b="",T=RA,M=NA,ie=IA,_e=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(ie=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(_e=d.unstable_transitionCallbacks)),d=r3(l,1,!1,null,null,p,b,T,M,ie,_e,null),l[Ve]=d.current,u_(l),new A_(d)},$p.hydrateRoot=function(l,d,p){if(!a(l))throw Error(r(299));var b=!1,T="",M=RA,ie=NA,_e=IA,Be=null,ct=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onUncaughtError!==void 0&&(M=p.onUncaughtError),p.onCaughtError!==void 0&&(ie=p.onCaughtError),p.onRecoverableError!==void 0&&(_e=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Be=p.unstable_transitionCallbacks),p.formState!==void 0&&(ct=p.formState)),d=r3(l,1,!0,d,p??null,b,T,M,ie,_e,Be,ct),d.context=a3(null),p=d.current,b=Fi(),b=It(b),T=tu(b),T.callback=null,nu(p,T,b),p=b,d.current.lanes=p,st(d,p),ds(d),l[Ve]=d.current,u_(l),new uy(d)},$p.version="19.1.0",$p}var S3;function G$(){if(S3)return N_.exports;S3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),N_.exports=V$(),N_.exports}var W$=G$();const K$=Qa(W$);function E3(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function iE(...e){return t=>{let n=!1;const r=e.map(a=>{const i=E3(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():E3(e[a],null)}}}}function xn(...e){return L.useCallback(iE(...e),e)}function Nu(e){const t=Y$(e),n=L.forwardRef((r,a)=>{const{children:i,...o}=r,s=L.Children.toArray(i),u=s.find(J$);if(u){const c=u.props.children,f=s.map(h=>h===u?L.Children.count(c)>1?L.Children.only(null):L.isValidElement(c)?c.props.children:null:h);return y.jsx(t,{...o,ref:a,children:L.isValidElement(c)?L.cloneElement(c,void 0,f):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var Z$=Nu("Slot");function Y$(e){const t=L.forwardRef((n,r)=>{const{children:a,...i}=n;if(L.isValidElement(a)){const o=eB(a),s=Q$(i,a.props);return a.type!==L.Fragment&&(s.ref=r?iE(r,o):o),L.cloneElement(a,s)}return L.Children.count(a)>1?L.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Z4=Symbol("radix.slottable");function X$(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Z4,t}function J$(e){return L.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Z4}function Q$(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function eB(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Y4(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Y4(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function X4(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Y4(e))&&(r&&(r+=" "),r+=t);return r}const k3=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,C3=X4,J4=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return C3(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const m=k3(f)||k3(h);return a[c][m]}),s=n&&Object.entries(n).reduce((c,f)=>{let[h,m]=f;return m===void 0||(c[h]=m),c},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(v=>{let[w,_]=v;return Array.isArray(_)?_.includes({...i,...s}[w]):{...i,...s}[w]===_})?[...c,h,m]:c},[]);return C3(e,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},oE="-",tB=e=>{const t=rB(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(oE);return s[0]===""&&s.length!==1&&s.shift(),Q4(s,t)||nB(o)},getConflictingClassGroupIds:(o,s)=>{const u=n[o]||[];return s&&r[o]?[...u,...r[o]]:u}}},Q4=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?Q4(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(oE);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},A3=/^\[(.+)\]$/,nB=e=>{if(A3.test(e)){const t=A3.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},rB=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)US(n[a],r,a,t);return r},US=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:T3(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(aB(a)){US(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{US(o,T3(t,i),n,r)})})},T3=(e,t)=>{let n=e;return t.split(oE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},aB=e=>e.isThemeGetter,iB=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},qS="!",HS=":",oB=HS.length,sB=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,u=0,c;for(let v=0;v<a.length;v++){let w=a[v];if(o===0&&s===0){if(w===HS){i.push(a.slice(u,v)),u=v+oB;continue}if(w==="/"){c=v;continue}}w==="["?o++:w==="]"?o--:w==="("?s++:w===")"&&s--}const f=i.length===0?a:a.substring(u),h=lB(f),m=h!==f,g=c&&c>u?c-u:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+HS,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},lB=e=>e.endsWith(qS)?e.substring(0,e.length-1):e.startsWith(qS)?e.substring(1):e,uB=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},cB=e=>({cache:iB(e.cacheSize),parseClassName:sB(e),sortModifiers:uB(e),...tB(e)}),dB=/\s+/,fB=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(dB);let u="";for(let c=s.length-1;c>=0;c-=1){const f=s[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:w}=n(f);if(h){u=f+(u.length>0?" "+u:u);continue}let _=!!w,x=r(_?v.substring(0,w):v);if(!x){if(!_){u=f+(u.length>0?" "+u:u);continue}if(x=r(v),!x){u=f+(u.length>0?" "+u:u);continue}_=!1}const S=i(m).join(":"),E=g?S+qS:S,C=E+x;if(o.includes(C))continue;o.push(C);const A=a(x,_);for(let j=0;j<A.length;++j){const O=A[j];o.push(E+O)}u=f+(u.length>0?" "+u:u)}return u};function hB(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=e6(t))&&(r&&(r+=" "),r+=n);return r}const e6=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=e6(e[r]))&&(n&&(n+=" "),n+=t);return n};function pB(e,...t){let n,r,a,i=o;function o(u){const c=t.reduce((f,h)=>h(f),e());return n=cB(c),r=n.cache.get,a=n.cache.set,i=s,s(u)}function s(u){const c=r(u);if(c)return c;const f=fB(u,n);return a(u,f),f}return function(){return i(hB.apply(null,arguments))}}const fa=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},t6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,n6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mB=/^\d+\/\d+$/,gB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mf=e=>mB.test(e),Ln=e=>!!e&&!Number.isNaN(Number(e)),wu=e=>!!e&&Number.isInteger(Number(e)),D_=e=>e.endsWith("%")&&Ln(e.slice(0,-1)),dl=e=>gB.test(e),_B=()=>!0,xB=e=>yB.test(e)&&!bB.test(e),r6=()=>!1,SB=e=>vB.test(e),EB=e=>wB.test(e),kB=e=>!en(e)&&!tn(e),CB=e=>ch(e,o6,r6),en=e=>t6.test(e),Nc=e=>ch(e,s6,xB),M_=e=>ch(e,IB,Ln),R3=e=>ch(e,a6,r6),AB=e=>ch(e,i6,EB),dy=e=>ch(e,l6,SB),tn=e=>n6.test(e),Bp=e=>dh(e,s6),TB=e=>dh(e,OB),N3=e=>dh(e,a6),RB=e=>dh(e,o6),NB=e=>dh(e,i6),fy=e=>dh(e,l6,!0),ch=(e,t,n)=>{const r=t6.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},dh=(e,t,n=!1)=>{const r=n6.exec(e);return r?r[1]?t(r[1]):n:!1},a6=e=>e==="position"||e==="percentage",i6=e=>e==="image"||e==="url",o6=e=>e==="length"||e==="size"||e==="bg-size",s6=e=>e==="length",IB=e=>e==="number",OB=e=>e==="family-name",l6=e=>e==="shadow",jB=()=>{const e=fa("color"),t=fa("font"),n=fa("text"),r=fa("font-weight"),a=fa("tracking"),i=fa("leading"),o=fa("breakpoint"),s=fa("container"),u=fa("spacing"),c=fa("radius"),f=fa("shadow"),h=fa("inset-shadow"),m=fa("text-shadow"),g=fa("drop-shadow"),v=fa("blur"),w=fa("perspective"),_=fa("aspect"),x=fa("ease"),S=fa("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...C(),tn,en],j=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],N=()=>[tn,en,u],z=()=>[mf,"full","auto",...N()],H=()=>[wu,"none","subgrid",tn,en],Q=()=>["auto",{span:["full",wu,tn,en]},wu,tn,en],P=()=>[wu,"auto",tn,en],Z=()=>["auto","min","max","fr",tn,en],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],te=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...N()],re=()=>[mf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],Y=()=>[e,tn,en],ne=()=>[...C(),N3,R3,{position:[tn,en]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",RB,CB,{size:[tn,en]}],oe=()=>[D_,Bp,Nc],ye=()=>["","none","full",c,tn,en],we=()=>["",Ln,Bp,Nc],fe=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Fe=()=>[Ln,D_,N3,R3],Oe=()=>["","none",v,tn,en],Re=()=>["none",Ln,tn,en],ze=()=>["none",Ln,tn,en],He=()=>[Ln,tn,en],Te=()=>[mf,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[dl],breakpoint:[dl],color:[_B],container:[dl],"drop-shadow":[dl],ease:["in","out","in-out"],font:[kB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[dl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[dl],shadow:[dl],spacing:["px",Ln],text:[dl],"text-shadow":[dl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mf,en,tn,_]}],container:["container"],columns:[{columns:[Ln,en,tn,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[wu,"auto",tn,en]}],basis:[{basis:[mf,"full","auto",s,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ln,mf,"auto","initial","none",en]}],grow:[{grow:["",Ln,tn,en]}],shrink:[{shrink:["",Ln,tn,en]}],order:[{order:[wu,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:Q()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:Q()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...te(),"normal"]}],"justify-self":[{"justify-self":["auto",...te()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...te(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...te(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...te(),"baseline"]}],"place-self":[{"place-self":["auto",...te()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[s,"screen",...re()]}],"min-w":[{"min-w":[s,"screen","none",...re()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...re()]}],h:[{h:["screen",...re()]}],"min-h":[{"min-h":["screen","none",...re()]}],"max-h":[{"max-h":["screen",...re()]}],"font-size":[{text:["base",n,Bp,Nc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tn,M_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",D_,en]}],"font-family":[{font:[TB,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tn,en]}],"line-clamp":[{"line-clamp":[Ln,"none",tn,M_]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ln,"from-font","auto",tn,Nc]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[Ln,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ne()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wu,tn,en],radial:["",tn,en],conic:[wu,tn,en]},NB,AB]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...fe(),"hidden","none"]}],"divide-style":[{divide:[...fe(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ln,tn,en]}],"outline-w":[{outline:["",Ln,Bp,Nc]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",f,fy,dy]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",h,fy,dy]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[Ln,Nc]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",m,fy,dy]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[Ln,tn,en]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ln]}],"mask-image-linear-from-pos":[{"mask-linear-from":Fe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Fe()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":Fe()}],"mask-image-t-to-pos":[{"mask-t-to":Fe()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":Fe()}],"mask-image-r-to-pos":[{"mask-r-to":Fe()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":Fe()}],"mask-image-b-to-pos":[{"mask-b-to":Fe()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":Fe()}],"mask-image-l-to-pos":[{"mask-l-to":Fe()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":Fe()}],"mask-image-x-to-pos":[{"mask-x-to":Fe()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":Fe()}],"mask-image-y-to-pos":[{"mask-y-to":Fe()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Fe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Fe()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Ln]}],"mask-image-conic-from-pos":[{"mask-conic-from":Fe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Fe()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ne()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:Oe()}],brightness:[{brightness:[Ln,tn,en]}],contrast:[{contrast:[Ln,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",g,fy,dy]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",Ln,tn,en]}],"hue-rotate":[{"hue-rotate":[Ln,tn,en]}],invert:[{invert:["",Ln,tn,en]}],saturate:[{saturate:[Ln,tn,en]}],sepia:[{sepia:["",Ln,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":Oe()}],"backdrop-brightness":[{"backdrop-brightness":[Ln,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[Ln,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ln,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ln,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",Ln,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[Ln,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[Ln,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",Ln,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ln,"initial",tn,en]}],ease:[{ease:["linear","initial",x,tn,en]}],delay:[{delay:[Ln,tn,en]}],animate:[{animate:["none",S,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,tn,en]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Re()}],"rotate-x":[{"rotate-x":Re()}],"rotate-y":[{"rotate-y":Re()}],"rotate-z":[{"rotate-z":Re()}],scale:[{scale:ze()}],"scale-x":[{"scale-x":ze()}],"scale-y":[{"scale-y":ze()}],"scale-z":[{"scale-z":ze()}],"scale-3d":["scale-3d"],skew:[{skew:He()}],"skew-x":[{"skew-x":He()}],"skew-y":[{"skew-y":He()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Te()}],"translate-x":[{"translate-x":Te()}],"translate-y":[{"translate-y":Te()}],"translate-z":[{"translate-z":Te()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[Ln,Bp,Nc,M_]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},DB=pB(jB);function Ut(...e){return DB(X4(e))}const MB=J4("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Lt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?Z$:"button";return y.jsx(i,{"data-slot":"button",className:Ut(MB({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FB=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),I3=e=>{const t=FB(e);return t.charAt(0).toUpperCase()+t.slice(1)},u6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=L.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},u)=>L.createElement("svg",{ref:u,...LB,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:u6("lucide",a),...s},[...o.map(([c,f])=>L.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=(e,t)=>{const n=L.forwardRef(({className:r,...a},i)=>L.createElement($B,{ref:i,iconNode:t,className:u6(`lucide-${PB(I3(e))}`,`lucide-${e}`,r),...a}));return n.displayName=I3(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],zB=cn("archive",BB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],id=cn("check",UB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sE=cn("chevron-down",qB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],VB=cn("chevron-right",HB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],WB=cn("chevron-up",GB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],c6=cn("chevrons-up-down",KB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ff=cn("circle-alert",ZB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],d6=cn("circle-check",YB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],JB=cn("clipboard",XB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],f6=cn("cloud-upload",QB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],tz=cn("cog",ez);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],nb=cn("download",nz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],az=cn("file-archive",rz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],oz=cn("file-json",iz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],lz=cn("file-question",sz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cz=cn("file-text",uz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],fz=cn("file",dz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],pz=cn("folder-git",hz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],lE=cn("folder-plus",mz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],yz=cn("folder-up",gz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],o0=cn("folder",bz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],nm=cn("git-branch",vz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],_z=cn("git-commit-horizontal",wz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],Sz=cn("git-merge",xz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],h6=cn("git-pull-request",Ez);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],p6=cn("hard-drive",kz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Az=cn("house",Cz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Rz=cn("image",Tz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Iz=cn("info",Nz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],jz=cn("key",Oz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xn=cn("loader-circle",Dz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Pz=cn("message-square",Mz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Lz=cn("music",Fz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Bz=cn("panel-left-close",$z);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Uz=cn("panel-right-close",zz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],m6=cn("paperclip",qz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],uE=cn("pen",Hz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pv=cn("plus",Vz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],mv=cn("refresh-cw",Gz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Kz=cn("rotate-ccw",Wz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cE=cn("save",Zz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],g6=cn("search",Yz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],Jz=cn("send-horizontal",Xz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],e7=cn("settings",Qz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],n7=cn("sliders-horizontal",t7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],VS=cn("square-pen",r7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],i7=cn("square",a7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Iu=cn("trash-2",o7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dE=cn("triangle-alert",s7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],u7=cn("upload",l7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],O3=cn("users",c7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],f7=cn("video",d7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],p7=cn("wrench",h7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zu=cn("x",m7),j3=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:Ut(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(wt.Fragment,{children:i},a.id):null})})},D3=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,a,s);return s},g7=e=>e?D3(e):D3,y7=e=>e;function b7(e,t=y7){const n=wt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return wt.useDebugValue(n),n}const M3=e=>{const t=g7(e),n=r=>b7(t,r);return Object.assign(n,t),n},Ds=e=>e?M3(e):M3;var y6=Symbol.for("immer-nothing"),P3=Symbol.for("immer-draftable"),ar=Symbol.for("immer-state");function po(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Lf=Object.getPrototypeOf;function $f(e){return!!e&&!!e[ar]}function kl(e){var t;return e?b6(e)||Array.isArray(e)||!!e[P3]||!!((t=e.constructor)!=null&&t[P3])||yv(e)||bv(e):!1}var v7=Object.prototype.constructor.toString();function b6(e){if(!e||typeof e!="object")return!1;const t=Lf(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===v7}function rm(e,t){gv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function gv(e){const t=e[ar];return t?t.type_:Array.isArray(e)?1:yv(e)?2:bv(e)?3:0}function GS(e,t){return gv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function v6(e,t,n){const r=gv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function w7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function yv(e){return e instanceof Map}function bv(e){return e instanceof Set}function Sa(e){return e.copy_||e.base_}function WS(e,t){if(yv(e))return new Map(e);if(bv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=b6(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ar];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Lf(e),r)}else{const r=Lf(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function fE(e,t=!1){return vv(e)||$f(e)||!kl(e)||(gv(e)>1&&(e.set=e.add=e.clear=e.delete=_7),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>fE(r,!0))),e}function _7(){po(2)}function vv(e){return Object.isFrozen(e)}var KS={};function Kc(e){const t=KS[e];return t||po(0,e),t}function x7(e,t){KS[e]||(KS[e]=t)}var am;function rb(){return am}function S7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function F3(e,t){t&&(Kc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ZS(e){YS(e),e.drafts_.forEach(E7),e.drafts_=null}function YS(e){e===am&&(am=e.parent_)}function L3(e){return am=S7(am,e)}function E7(e){const t=e[ar];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ar].modified_&&(ZS(t),po(4)),kl(e)&&(e=ab(t,e),t.parent_||ib(t,e)),t.patches_&&Kc("Patches").generateReplacementPatches_(n[ar].base_,e,t.patches_,t.inversePatches_)):e=ab(t,n,[]),ZS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==y6?e:void 0}function ab(e,t,n){if(vv(t))return t;const r=t[ar];if(!r)return rm(t,(a,i)=>B3(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ib(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),rm(i,(s,u)=>B3(e,r,a,s,u,n,o)),ib(e,a,!1),n&&e.patches_&&Kc("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function B3(e,t,n,r,a,i,o){if($f(a)){const s=i&&t&&t.type_!==3&&!GS(t.assigned_,r)?i.concat(r):void 0,u=ab(e,a,s);if(v6(n,r,u),$f(u))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(kl(a)&&!vv(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ab(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&ib(e,a)}}function ib(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&fE(t,n)}function k7(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:rb(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=hE;n&&(a=[r],i=im);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var hE={get(e,t){if(t===ar)return e;const n=Sa(e);if(!GS(n,t))return C7(e,n,t);const r=n[t];return e.finalized_||!kl(r)?r:r===P_(e.base_,t)?(F_(e),e.copy_[t]=om(r,e)):r},has(e,t){return t in Sa(e)},ownKeys(e){return Reflect.ownKeys(Sa(e))},set(e,t,n){const r=w6(Sa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=P_(Sa(e),t),i=a==null?void 0:a[ar];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(w7(n,a)&&(n!==void 0||GS(e.base_,t)))return!0;F_(e),ml(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return P_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,F_(e),ml(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Sa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){po(11)},getPrototypeOf(e){return Lf(e.base_)},setPrototypeOf(){po(12)}},im={};rm(hE,(e,t)=>{im[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});im.deleteProperty=function(e,t){return im.set.call(this,e,t,void 0)};im.set=function(e,t,n){return hE.set.call(this,e[0],t,n,e[0])};function P_(e,t){const n=e[ar];return(n?Sa(n):e)[t]}function C7(e,t,n){var a;const r=w6(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function w6(e,t){if(!(t in e))return;let n=Lf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Lf(n)}}function ml(e){e.modified_||(e.modified_=!0,e.parent_&&ml(e.parent_))}function F_(e){e.copy_||(e.copy_=WS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var A7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(u=i,...c){return o.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&po(6),r!==void 0&&typeof r!="function"&&po(7);let a;if(kl(t)){const i=L3(this),o=om(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?ZS(i):YS(i)}return F3(i,r),$3(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===y6&&(a=void 0),this.autoFreeze_&&fE(a,!0),r){const i=[],o=[];Kc("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else po(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,u=>t(u,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){kl(e)||po(8),$f(e)&&(e=T7(e));const t=L3(this),n=om(e,void 0);return n[ar].isManual_=!0,YS(t),n}finishDraft(e,t){const n=e&&e[ar];(!n||!n.isManual_)&&po(9);const{scope_:r}=n;return F3(r,t),$3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=Kc("Patches").applyPatches_;return $f(e)?r(e,t):this.produce(e,a=>r(a,t))}};function om(e,t){const n=yv(e)?Kc("MapSet").proxyMap_(e,t):bv(e)?Kc("MapSet").proxySet_(e,t):k7(e,t);return(t?t.scope_:rb()).drafts_.push(n),n}function T7(e){return $f(e)||po(10,e),_6(e)}function _6(e){if(!kl(e)||vv(e))return e;const t=e[ar];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=WS(e,t.scope_.immer_.useStrictShallowCopy_)}else n=WS(e,!0);return rm(n,(r,a)=>{v6(n,r,_6(a))}),t&&(t.finalized_=!1),n}function R7(){class e extends Map{constructor(u,c){super(),this[ar]={type_:2,parent_:c,scope_:c?c.scope_:rb(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Sa(this[ar]).size}has(u){return Sa(this[ar]).has(u)}set(u,c){const f=this[ar];return o(f),(!Sa(f).has(u)||Sa(f).get(u)!==c)&&(n(f),ml(f),f.assigned_.set(u,!0),f.copy_.set(u,c),f.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[ar];return o(c),n(c),ml(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[ar];o(u),Sa(u).size&&(n(u),ml(u),u.assigned_=new Map,rm(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const f=this[ar];Sa(f).forEach((h,m,g)=>{u.call(c,this.get(m),m,this)})}get(u){const c=this[ar];o(c);const f=Sa(c).get(u);if(c.finalized_||!kl(f)||f!==c.base_.get(u))return f;const h=om(f,c);return n(c),c.copy_.set(u,h),h}keys(){return Sa(this[ar]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const f=this.get(c.value);return{done:!1,value:[c.value,f]}}}}[Symbol.iterator](){return this.entries()}}function t(s,u){return new e(s,u)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(u,c){super(),this[ar]={type_:3,parent_:c,scope_:c?c.scope_:rb(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Sa(this[ar]).size}has(u){const c=this[ar];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[ar];return o(c),this.has(u)||(i(c),ml(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[ar];return o(c),i(c),ml(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[ar];o(u),Sa(u).size&&(i(u),ml(u),u.copy_.clear())}values(){const u=this[ar];return o(u),i(u),u.copy_.values()}entries(){const u=this[ar];return o(u),i(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const f=this.values();let h=f.next();for(;!h.done;)u.call(c,h.value,h.value,this),h=f.next()}}function a(s,u){return new r(s,u)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(u=>{if(kl(u)){const c=om(u,s);s.drafts_.set(u,c),s.copy_.add(c)}else s.copy_.add(u)}))}function o(s){s.revoked_&&po(3,JSON.stringify(Sa(s)))}x7("MapSet",{proxyMap_:t,proxySet_:a})}var Ki=new A7,N7=Ki.produce;Ki.produceWithPatches.bind(Ki);Ki.setAutoFreeze.bind(Ki);Ki.setUseStrictShallowCopy.bind(Ki);Ki.applyPatches.bind(Ki);Ki.createDraft.bind(Ki);Ki.finishDraft.bind(Ki);const I7=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?N7(a):a;return t(s,i,...o)},e(r.setState,n,r)),Ms=I7,ta=Ds(Ms((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((u,c)=>(u.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Vy={exports:{}},O7=Vy.exports,z3;function j7(){return z3||(z3=1,function(e,t){(function(n,r){e.exports=r()})(O7,function(){var n=function(k,I){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,ee){K.__proto__=ee}||function(K,ee){for(var ue in ee)Object.prototype.hasOwnProperty.call(ee,ue)&&(K[ue]=ee[ue])})(k,I)},r=function(){return(r=Object.assign||function(k){for(var I,K=1,ee=arguments.length;K<ee;K++)for(var ue in I=arguments[K])Object.prototype.hasOwnProperty.call(I,ue)&&(k[ue]=I[ue]);return k}).apply(this,arguments)};function a(k,I,K){for(var ee,ue=0,ve=I.length;ue<ve;ue++)!ee&&ue in I||((ee=ee||Array.prototype.slice.call(I,0,ue))[ue]=I[ue]);return k.concat(ee||Array.prototype.slice.call(I))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Uc,o=Object.keys,s=Array.isArray;function u(k,I){return typeof I!="object"||o(I).forEach(function(K){k[K]=I[K]}),k}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(k,I){return f.call(k,I)}function m(k,I){typeof I=="function"&&(I=I(c(k))),(typeof Reflect>"u"?o:Reflect.ownKeys)(I).forEach(function(K){v(k,K,I[K])})}var g=Object.defineProperty;function v(k,I,K,ee){g(k,I,u(K&&h(K,"get")&&typeof K.get=="function"?{get:K.get,set:K.set,configurable:!0}:{value:K,configurable:!0,writable:!0},ee))}function w(k){return{from:function(I){return k.prototype=Object.create(I.prototype),v(k.prototype,"constructor",k),{extend:m.bind(null,k.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(k,I,K){return x.call(k,I,K)}function E(k,I){return I(k)}function C(k){if(!k)throw new Error("Assertion Failed")}function A(k){i.setImmediate?setImmediate(k):setTimeout(k,0)}function j(k,I){if(typeof I=="string"&&h(k,I))return k[I];if(!I)return k;if(typeof I!="string"){for(var K=[],ee=0,ue=I.length;ee<ue;++ee){var ve=j(k,I[ee]);K.push(ve)}return K}var je=I.indexOf(".");if(je!==-1){var Le=k[I.substr(0,je)];return Le==null?void 0:j(Le,I.substr(je+1))}}function O(k,I,K){if(k&&I!==void 0&&!("isFrozen"in Object&&Object.isFrozen(k)))if(typeof I!="string"&&"length"in I){C(typeof K!="string"&&"length"in K);for(var ee=0,ue=I.length;ee<ue;++ee)O(k,I[ee],K[ee])}else{var ve,je,Le=I.indexOf(".");Le!==-1?(ve=I.substr(0,Le),(je=I.substr(Le+1))===""?K===void 0?s(k)&&!isNaN(parseInt(ve))?k.splice(ve,1):delete k[ve]:k[ve]=K:O(Le=!(Le=k[ve])||!h(k,ve)?k[ve]={}:Le,je,K)):K===void 0?s(k)&&!isNaN(parseInt(I))?k.splice(I,1):delete k[I]:k[I]=K}}function N(k){var I,K={};for(I in k)h(k,I)&&(K[I]=k[I]);return K}var z=[].concat;function H(k){return z.apply([],k)}var _t="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(H([8,16,32,64].map(function(k){return["Int","Uint","Float"].map(function(I){return I+k+"Array"})}))).filter(function(k){return i[k]}),Q=new Set(_t.map(function(k){return i[k]})),P=null;function Z(k){return P=new WeakMap,k=function I(K){if(!K||typeof K!="object")return K;var ee=P.get(K);if(ee)return ee;if(s(K)){ee=[],P.set(K,ee);for(var ue=0,ve=K.length;ue<ve;++ue)ee.push(I(K[ue]))}else if(Q.has(K.constructor))ee=K;else{var je,Le=c(K);for(je in ee=Le===Object.prototype?{}:Object.create(Le),P.set(K,ee),K)h(K,je)&&(ee[je]=I(K[je]))}return ee}(k),P=null,k}var V={}.toString;function te(k){return V.call(k).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",re=typeof ae=="symbol"?function(k){var I;return k!=null&&(I=k[ae])&&I.apply(k)}:function(){return null};function Y(k,I){return I=k.indexOf(I),0<=I&&k.splice(I,1),0<=I}var ne={};function G(k){var I,K,ee,ue;if(arguments.length===1){if(s(k))return k.slice();if(this===ne&&typeof k=="string")return[k];if(ue=re(k)){for(K=[];!(ee=ue.next()).done;)K.push(ee.value);return K}if(k==null)return[k];if(typeof(I=k.length)!="number")return[k];for(K=new Array(I);I--;)K[I]=k[I];return K}for(I=arguments.length,K=new Array(I);I--;)K[I]=arguments[I];return K}var X=typeof Symbol<"u"?function(k){return k[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},at=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ai=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(at),oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ye(k,I){this.name=k,this.message=I}function we(k,I){return k+". Errors: "+Object.keys(I).map(function(K){return I[K].toString()}).filter(function(K,ee,ue){return ue.indexOf(K)===ee}).join(`
`)}function fe(k,I,K,ee){this.failures=I,this.failedKeys=ee,this.successCount=K,this.message=we(k,I)}function Me(k,I){this.name="BulkError",this.failures=Object.keys(I).map(function(K){return I[K]}),this.failuresByPos=I,this.message=we(k,this.failures)}w(ye).from(Error).extend({toString:function(){return this.name+": "+this.message}}),w(fe).from(ye),w(Me).from(ye);var Fe=ai.reduce(function(k,I){return k[I]=I+"Error",k},{}),Oe=ye,Re=ai.reduce(function(k,I){var K=I+"Error";function ee(ue,ve){this.name=K,ue?typeof ue=="string"?(this.message="".concat(ue).concat(ve?`
 `+ve:""),this.inner=ve||null):typeof ue=="object"&&(this.message="".concat(ue.name," ").concat(ue.message),this.inner=ue):(this.message=oe[I]||K,this.inner=null)}return w(ee).from(Oe),k[I]=ee,k},{});Re.Syntax=SyntaxError,Re.Type=TypeError,Re.Range=RangeError;var ze=at.reduce(function(k,I){return k[I+"Error"]=Re[I],k},{}),He=ai.reduce(function(k,I){return["Syntax","Type","Range"].indexOf(I)===-1&&(k[I+"Error"]=Re[I]),k},{});function Te(){}function Ce(k){return k}function B(k,I){return k==null||k===Ce?I:function(K){return I(k(K))}}function ke(k,I){return function(){k.apply(this,arguments),I.apply(this,arguments)}}function Ae(k,I){return k===Te?I:function(){var K=k.apply(this,arguments);K!==void 0&&(arguments[0]=K);var ee=this.onsuccess,ue=this.onerror;this.onsuccess=null,this.onerror=null;var ve=I.apply(this,arguments);return ee&&(this.onsuccess=this.onsuccess?ke(ee,this.onsuccess):ee),ue&&(this.onerror=this.onerror?ke(ue,this.onerror):ue),ve!==void 0?ve:K}}function ce(k,I){return k===Te?I:function(){k.apply(this,arguments);var K=this.onsuccess,ee=this.onerror;this.onsuccess=this.onerror=null,I.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?ke(K,this.onsuccess):K),ee&&(this.onerror=this.onerror?ke(ee,this.onerror):ee)}}function se(k,I){return k===Te?I:function(K){var ee=k.apply(this,arguments);u(K,ee);var ue=this.onsuccess,ve=this.onerror;return this.onsuccess=null,this.onerror=null,K=I.apply(this,arguments),ue&&(this.onsuccess=this.onsuccess?ke(ue,this.onsuccess):ue),ve&&(this.onerror=this.onerror?ke(ve,this.onerror):ve),ee===void 0?K===void 0?void 0:K:u(ee,K)}}function J(k,I){return k===Te?I:function(){return I.apply(this,arguments)!==!1&&k.apply(this,arguments)}}function xe(k,I){return k===Te?I:function(){var K=k.apply(this,arguments);if(K&&typeof K.then=="function"){for(var ee=this,ue=arguments.length,ve=new Array(ue);ue--;)ve[ue]=arguments[ue];return K.then(function(){return I.apply(ee,ve)})}return I.apply(this,arguments)}}He.ModifyError=fe,He.DexieError=ye,He.BulkError=Me;var Pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Se(k){Pe=k}var Ze={},Et=100,_t=typeof Promise>"u"?[]:function(){var k=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[k,c(k),k];var I=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[I,c(I),k]}(),at=_t[0],ai=_t[1],_t=_t[2],ai=ai&&ai.then,Nt=at&&at.constructor,Rt=!!_t,Kt=function(k,I){le.push([k,I]),R&&(queueMicrotask(me),R=!1)},pe=!0,R=!0,q=[],de=[],Ie=Ce,be={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Te,pgp:!1,env:{},finalize:Te},Ee=be,le=[],ft=0,vt=[];function D(k){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var I=this._PSD=Ee;if(typeof k!="function"){if(k!==Ze)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++I.ref,function K(ee,ue){try{ue(function(ve){if(ee._state===null){if(ve===ee)throw new TypeError("A promise cannot be resolved with itself.");var je=ee._lib&&U();ve&&typeof ve.then=="function"?K(ee,function(Le,We){ve instanceof D?ve._then(Le,We):ve.then(Le,We)}):(ee._state=!0,ee._value=ve,De(ee)),je&&$()}},ge.bind(null,ee))}catch(ve){ge(ee,ve)}}(this,k)}var $e={get:function(){var k=Ee,I=Ct;function K(ee,ue){var ve=this,je=!k.global&&(k!==Ee||I!==Ct),Le=je&&!zn(),We=new D(function(Ye,tt){Je(ve,new st(Jo(ee,k,je,Le),Jo(ue,k,je,Le),Ye,tt,k))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return K.prototype=Ze,K},set:function(k){v(this,"then",k&&k.prototype===Ze?$e:{get:function(){return k},set:$e.set})}};function st(k,I,K,ee,ue){this.onFulfilled=typeof k=="function"?k:null,this.onRejected=typeof I=="function"?I:null,this.resolve=K,this.reject=ee,this.psd=ue}function ge(k,I){var K,ee;de.push(I),k._state===null&&(K=k._lib&&U(),I=Ie(I),k._state=!1,k._value=I,ee=k,q.some(function(ue){return ue._value===ee._value})||q.push(ee),De(k),K&&$())}function De(k){var I=k._listeners;k._listeners=[];for(var K=0,ee=I.length;K<ee;++K)Je(k,I[K]);var ue=k._PSD;--ue.ref||ue.finalize(),ft===0&&(++ft,Kt(function(){--ft==0&&W()},[]))}function Je(k,I){if(k._state!==null){var K=k._state?I.onFulfilled:I.onRejected;if(K===null)return(k._state?I.resolve:I.reject)(k._value);++I.psd.ref,++ft,Kt(It,[K,k,I])}else k._listeners.push(I)}function It(k,I,K){try{var ee,ue=I._value;!I._state&&de.length&&(de=[]),ee=Pe&&I._consoleTask?I._consoleTask.run(function(){return k(ue)}):k(ue),I._state||de.indexOf(ue)!==-1||function(ve){for(var je=q.length;je;)if(q[--je]._value===ve._value)return q.splice(je,1)}(I),K.resolve(ee)}catch(ve){K.reject(ve)}finally{--ft==0&&W(),--K.psd.ref||K.psd.finalize()}}function me(){Xo(be,function(){U()&&$()})}function U(){var k=pe;return R=pe=!1,k}function $(){var k,I,K;do for(;0<le.length;)for(k=le,le=[],K=k.length,I=0;I<K;++I){var ee=k[I];ee[0].apply(null,ee[1])}while(0<le.length);R=pe=!0}function W(){var k=q;q=[],k.forEach(function(ee){ee._PSD.onunhandled.call(null,ee._value,ee)});for(var I=vt.slice(0),K=I.length;K;)I[--K]()}function he(k){return new D(Ze,!1,k)}function Ne(k,I){var K=Ee;return function(){var ee=U(),ue=Ee;try{return Dn(K,!0),k.apply(this,arguments)}catch(ve){I&&I(ve)}finally{Dn(ue,!1),ee&&$()}}}m(D.prototype,{then:$e,_then:function(k,I){Je(this,new st(null,null,k,I,Ee))},catch:function(k){if(arguments.length===1)return this.then(null,k);var I=k,K=arguments[1];return typeof I=="function"?this.then(null,function(ee){return(ee instanceof I?K:he)(ee)}):this.then(null,function(ee){return(ee&&ee.name===I?K:he)(ee)})},finally:function(k){return this.then(function(I){return D.resolve(k()).then(function(){return I})},function(I){return D.resolve(k()).then(function(){return he(I)})})},timeout:function(k,I){var K=this;return k<1/0?new D(function(ee,ue){var ve=setTimeout(function(){return ue(new Re.Timeout(I))},k);K.then(ee,ue).finally(clearTimeout.bind(null,ve))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(D.prototype,Symbol.toStringTag,"Dexie.Promise"),be.env=ti(),m(D,{all:function(){var k=G.apply(null,arguments).map(fr);return new D(function(I,K){k.length===0&&I([]);var ee=k.length;k.forEach(function(ue,ve){return D.resolve(ue).then(function(je){k[ve]=je,--ee||I(k)},K)})})},resolve:function(k){return k instanceof D?k:k&&typeof k.then=="function"?new D(function(I,K){k.then(I,K)}):new D(Ze,!0,k)},reject:he,race:function(){var k=G.apply(null,arguments).map(fr);return new D(function(I,K){k.map(function(ee){return D.resolve(ee).then(I,K)})})},PSD:{get:function(){return Ee},set:function(k){return Ee=k}},totalEchoes:{get:function(){return Ct}},newPSD:Zt,usePSD:Xo,scheduler:{get:function(){return Kt},set:function(k){Kt=k}},rejectionMapper:{get:function(){return Ie},set:function(k){Ie=k}},follow:function(k,I){return new D(function(K,ee){return Zt(function(ue,ve){var je=Ee;je.unhandleds=[],je.onunhandled=ve,je.finalize=ke(function(){var Le,We=this;Le=function(){We.unhandleds.length===0?ue():ve(We.unhandleds[0])},vt.push(function Ye(){Le(),vt.splice(vt.indexOf(Ye),1)}),++ft,Kt(function(){--ft==0&&W()},[])},je.finalize),k()},I,K,ee)})}}),Nt&&(Nt.allSettled&&v(D,"allSettled",function(){var k=G.apply(null,arguments).map(fr);return new D(function(I){k.length===0&&I([]);var K=k.length,ee=new Array(K);k.forEach(function(ue,ve){return D.resolve(ue).then(function(je){return ee[ve]={status:"fulfilled",value:je}},function(je){return ee[ve]={status:"rejected",reason:je}}).then(function(){return--K||I(ee)})})})}),Nt.any&&typeof AggregateError<"u"&&v(D,"any",function(){var k=G.apply(null,arguments).map(fr);return new D(function(I,K){k.length===0&&K(new AggregateError([]));var ee=k.length,ue=new Array(ee);k.forEach(function(ve,je){return D.resolve(ve).then(function(Le){return I(Le)},function(Le){ue[je]=Le,--ee||K(new AggregateError(ue))})})})}),Nt.withResolvers&&(D.withResolvers=Nt.withResolvers));var Ve={awaits:0,echoes:0,id:0},gt=0,Gt=[],ht=0,Ct=0,Ot=0;function Zt(k,I,K,ee){var ue=Ee,ve=Object.create(ue);return ve.parent=ue,ve.ref=0,ve.global=!1,ve.id=++Ot,be.env,ve.env=Rt?{Promise:D,PromiseProp:{value:D,configurable:!0,writable:!0},all:D.all,race:D.race,allSettled:D.allSettled,any:D.any,resolve:D.resolve,reject:D.reject}:{},I&&u(ve,I),++ue.ref,ve.finalize=function(){--this.parent.ref||this.parent.finalize()},ee=Xo(ve,k,K,ee),ve.ref===0&&ve.finalize(),ee}function En(){return Ve.id||(Ve.id=++gt),++Ve.awaits,Ve.echoes+=Et,Ve.id}function zn(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=Ve.awaits*Et,!0)}function fr(k){return Ve.echoes&&k&&k.constructor===Nt?(En(),k.then(function(I){return zn(),I},function(I){return zn(),$r(I)})):k}function hr(){var k=Gt[Gt.length-1];Gt.pop(),Dn(k,!1)}function Dn(k,I){var K,ee=Ee;(I?!Ve.echoes||ht++&&k===Ee:!ht||--ht&&k===Ee)||queueMicrotask(I?(function(ue){++Ct,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.awaits=Ve.id=0),Gt.push(Ee),Dn(ue,!0)}).bind(null,k):hr),k!==Ee&&(Ee=k,ee===be&&(be.env=ti()),Rt&&(K=be.env.Promise,I=k.env,(ee.global||k.global)&&(Object.defineProperty(i,"Promise",I.PromiseProp),K.all=I.all,K.race=I.race,K.resolve=I.resolve,K.reject=I.reject,I.allSettled&&(K.allSettled=I.allSettled),I.any&&(K.any=I.any))))}function ti(){var k=i.Promise;return Rt?{Promise:k,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject}:{}}function Xo(k,I,K,ee,ue){var ve=Ee;try{return Dn(k,!0),I(K,ee,ue)}finally{Dn(ve,!1)}}function Jo(k,I,K,ee){return typeof k!="function"?k:function(){var ue=Ee;K&&En(),Dn(I,!0);try{return k.apply(this,arguments)}finally{Dn(ue,!1),ee&&queueMicrotask(zn)}}}function Qo(k){Promise===Nt&&Ve.echoes===0?ht===0?k():enqueueNativeMicroTask(k):setTimeout(k,0)}(""+ai).indexOf("[native code]")===-1&&(En=zn=Te);var $r=D.reject,es="",Xi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",tg="String expected.",xo=[],Bs="__dbnames",Ii="readonly",uc="readwrite";function ts(k,I){return k?I?function(){return k.apply(this,arguments)&&I.apply(this,arguments)}:k:I}var zs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ll(k){return typeof k!="string"||/\./.test(k)?function(I){return I}:function(I){return I[k]===void 0&&k in I&&delete(I=Z(I))[k],I}}function kd(){throw Re.Type()}function Un(k,I){try{var K=Mh(k),ee=Mh(I);if(K!==ee)return K==="Array"?1:ee==="Array"?-1:K==="binary"?1:ee==="binary"?-1:K==="string"?1:ee==="string"?-1:K==="Date"?1:ee!=="Date"?NaN:-1;switch(K){case"number":case"Date":case"string":return I<k?1:k<I?-1:0;case"binary":return function(ue,ve){for(var je=ue.length,Le=ve.length,We=je<Le?je:Le,Ye=0;Ye<We;++Ye)if(ue[Ye]!==ve[Ye])return ue[Ye]<ve[Ye]?-1:1;return je===Le?0:je<Le?-1:1}(ni(k),ni(I));case"Array":return function(ue,ve){for(var je=ue.length,Le=ve.length,We=je<Le?je:Le,Ye=0;Ye<We;++Ye){var tt=Un(ue[Ye],ve[Ye]);if(tt!==0)return tt}return je===Le?0:je<Le?-1:1}(k,I)}}catch{}return NaN}function Mh(k){var I=typeof k;return I!="object"?I:ArrayBuffer.isView(k)?"binary":(k=te(k),k==="ArrayBuffer"?"binary":k)}function ni(k){return k instanceof Uint8Array?k:ArrayBuffer.isView(k)?new Uint8Array(k.buffer,k.byteOffset,k.byteLength):new Uint8Array(k)}var Ph=(wr.prototype._trans=function(k,I,K){var ee=this._tx||Ee.trans,ue=this.name,ve=Pe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(k==="readonly"?"read":"write"," ").concat(this.name));function je(Ye,tt,qe){if(!qe.schema[ue])throw new Re.NotFound("Table "+ue+" not part of transaction");return I(qe.idbtrans,qe)}var Le=U();try{var We=ee&&ee.db._novip===this.db._novip?ee===Ee.trans?ee._promise(k,je,K):Zt(function(){return ee._promise(k,je,K)},{trans:ee,transless:Ee.transless||Ee}):function Ye(tt,qe,rt,Ge){if(tt.idbdb&&(tt._state.openComplete||Ee.letThrough||tt._vip)){var et=tt._createTransaction(qe,rt,tt._dbSchema);try{et.create(),tt._state.PR1398_maxLoop=3}catch(it){return it.name===Fe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,qe,rt,Ge)})):$r(it)}return et._promise(qe,function(it,Xe){return Zt(function(){return Ee.trans=et,Ge(it,Xe,et)})}).then(function(it){if(qe==="readwrite")try{et.idbtrans.commit()}catch{}return qe==="readonly"?it:et._completion.then(function(){return it})})}if(tt._state.openComplete)return $r(new Re.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return $r(new Re.DatabaseClosed);tt.open().catch(Te)}return tt._state.dbReadyPromise.then(function(){return Ye(tt,qe,rt,Ge)})}(this.db,k,[this.name],je);return ve&&(We._consoleTask=ve,We=We.catch(function(Ye){return console.trace(Ye),$r(Ye)})),We}finally{Le&&$()}},wr.prototype.get=function(k,I){var K=this;return k&&k.constructor===Object?this.where(k).first(I):k==null?$r(new Re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ee){return K.core.get({trans:ee,key:k}).then(function(ue){return K.hook.reading.fire(ue)})}).then(I)},wr.prototype.where=function(k){if(typeof k=="string")return new this.db.WhereClause(this,k);if(s(k))return new this.db.WhereClause(this,"[".concat(k.join("+"),"]"));var I=o(k);if(I.length===1)return this.where(I[0]).equals(k[I[0]]);var K=this.schema.indexes.concat(this.schema.primKey).filter(function(Le){if(Le.compound&&I.every(function(Ye){return 0<=Le.keyPath.indexOf(Ye)})){for(var We=0;We<I.length;++We)if(I.indexOf(Le.keyPath[We])===-1)return!1;return!0}return!1}).sort(function(Le,We){return Le.keyPath.length-We.keyPath.length})[0];if(K&&this.db._maxKey!==es){var ve=K.keyPath.slice(0,I.length);return this.where(ve).equals(ve.map(function(We){return k[We]}))}!K&&Pe&&console.warn("The query ".concat(JSON.stringify(k)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(I.join("+"),"]"));var ee=this.schema.idxByName;function ue(Le,We){return Un(Le,We)===0}var je=I.reduce(function(qe,We){var Ye=qe[0],tt=qe[1],qe=ee[We],rt=k[We];return[Ye||qe,Ye||!qe?ts(tt,qe&&qe.multi?function(Ge){return Ge=j(Ge,We),s(Ge)&&Ge.some(function(et){return ue(rt,et)})}:function(Ge){return ue(rt,j(Ge,We))}):tt]},[null,null]),ve=je[0],je=je[1];return ve?this.where(ve.name).equals(k[ve.keyPath]).filter(je):K?this.filter(je):this.where(I).equals("")},wr.prototype.filter=function(k){return this.toCollection().and(k)},wr.prototype.count=function(k){return this.toCollection().count(k)},wr.prototype.offset=function(k){return this.toCollection().offset(k)},wr.prototype.limit=function(k){return this.toCollection().limit(k)},wr.prototype.each=function(k){return this.toCollection().each(k)},wr.prototype.toArray=function(k){return this.toCollection().toArray(k)},wr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},wr.prototype.orderBy=function(k){return new this.db.Collection(new this.db.WhereClause(this,s(k)?"[".concat(k.join("+"),"]"):k))},wr.prototype.reverse=function(){return this.toCollection().reverse()},wr.prototype.mapToClass=function(k){var I,K=this.db,ee=this.name;function ue(){return I!==null&&I.apply(this,arguments)||this}(this.schema.mappedClass=k).prototype instanceof kd&&(function(We,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function tt(){this.constructor=We}n(We,Ye),We.prototype=Ye===null?Object.create(Ye):(tt.prototype=Ye.prototype,new tt)}(ue,I=k),Object.defineProperty(ue.prototype,"db",{get:function(){return K},enumerable:!1,configurable:!0}),ue.prototype.table=function(){return ee},k=ue);for(var ve=new Set,je=k.prototype;je;je=c(je))Object.getOwnPropertyNames(je).forEach(function(We){return ve.add(We)});function Le(We){if(!We)return We;var Ye,tt=Object.create(k.prototype);for(Ye in We)if(!ve.has(Ye))try{tt[Ye]=We[Ye]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Le,this.hook("reading",Le),k},wr.prototype.defineClass=function(){return this.mapToClass(function(k){u(this,k)})},wr.prototype.add=function(k,I){var K=this,ee=this.schema.primKey,ue=ee.auto,ve=ee.keyPath,je=k;return ve&&ue&&(je=Ll(ve)(k)),this._trans("readwrite",function(Le){return K.core.mutate({trans:Le,type:"add",keys:I!=null?[I]:null,values:[je]})}).then(function(Le){return Le.numFailures?D.reject(Le.failures[0]):Le.lastResult}).then(function(Le){if(ve)try{O(k,ve,Le)}catch{}return Le})},wr.prototype.update=function(k,I){return typeof k!="object"||s(k)?this.where(":id").equals(k).modify(I):(k=j(k,this.schema.primKey.keyPath),k===void 0?$r(new Re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(k).modify(I))},wr.prototype.put=function(k,I){var K=this,ee=this.schema.primKey,ue=ee.auto,ve=ee.keyPath,je=k;return ve&&ue&&(je=Ll(ve)(k)),this._trans("readwrite",function(Le){return K.core.mutate({trans:Le,type:"put",values:[je],keys:I!=null?[I]:null})}).then(function(Le){return Le.numFailures?D.reject(Le.failures[0]):Le.lastResult}).then(function(Le){if(ve)try{O(k,ve,Le)}catch{}return Le})},wr.prototype.delete=function(k){var I=this;return this._trans("readwrite",function(K){return I.core.mutate({trans:K,type:"delete",keys:[k]})}).then(function(K){return K.numFailures?D.reject(K.failures[0]):void 0})},wr.prototype.clear=function(){var k=this;return this._trans("readwrite",function(I){return k.core.mutate({trans:I,type:"deleteRange",range:zs})}).then(function(I){return I.numFailures?D.reject(I.failures[0]):void 0})},wr.prototype.bulkGet=function(k){var I=this;return this._trans("readonly",function(K){return I.core.getMany({keys:k,trans:K}).then(function(ee){return ee.map(function(ue){return I.hook.reading.fire(ue)})})})},wr.prototype.bulkAdd=function(k,I,K){var ee=this,ue=Array.isArray(I)?I:void 0,ve=(K=K||(ue?void 0:I))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=ee.schema.primKey,Le=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==k.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&Le?k.map(Ll(Ye)):k;return ee.core.mutate({trans:je,type:"add",keys:ue,values:Ye,wantResults:ve}).then(function(et){var qe=et.numFailures,rt=et.results,Ge=et.lastResult,et=et.failures;if(qe===0)return ve?rt:Ge;throw new Me("".concat(ee.name,".bulkAdd(): ").concat(qe," of ").concat(We," operations failed"),et)})})},wr.prototype.bulkPut=function(k,I,K){var ee=this,ue=Array.isArray(I)?I:void 0,ve=(K=K||(ue?void 0:I))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=ee.schema.primKey,Le=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==k.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&Le?k.map(Ll(Ye)):k;return ee.core.mutate({trans:je,type:"put",keys:ue,values:Ye,wantResults:ve}).then(function(et){var qe=et.numFailures,rt=et.results,Ge=et.lastResult,et=et.failures;if(qe===0)return ve?rt:Ge;throw new Me("".concat(ee.name,".bulkPut(): ").concat(qe," of ").concat(We," operations failed"),et)})})},wr.prototype.bulkUpdate=function(k){var I=this,K=this.core,ee=k.map(function(je){return je.key}),ue=k.map(function(je){return je.changes}),ve=[];return this._trans("readwrite",function(je){return K.getMany({trans:je,keys:ee,cache:"clone"}).then(function(Le){var We=[],Ye=[];k.forEach(function(qe,rt){var Ge=qe.key,et=qe.changes,it=Le[rt];if(it){for(var Xe=0,dt=Object.keys(et);Xe<dt.length;Xe++){var yt=dt[Xe],bt=et[yt];if(yt===I.schema.primKey.keyPath){if(Un(bt,Ge)!==0)throw new Re.Constraint("Cannot update primary key in bulkUpdate()")}else O(it,yt,bt)}ve.push(rt),We.push(Ge),Ye.push(it)}});var tt=We.length;return K.mutate({trans:je,type:"put",keys:We,values:Ye,updates:{keys:ee,changeSpecs:ue}}).then(function(qe){var rt=qe.numFailures,Ge=qe.failures;if(rt===0)return tt;for(var et=0,it=Object.keys(Ge);et<it.length;et++){var Xe,dt=it[et],yt=ve[Number(dt)];yt!=null&&(Xe=Ge[dt],delete Ge[dt],Ge[yt]=Xe)}throw new Me("".concat(I.name,".bulkUpdate(): ").concat(rt," of ").concat(tt," operations failed"),Ge)})})})},wr.prototype.bulkDelete=function(k){var I=this,K=k.length;return this._trans("readwrite",function(ee){return I.core.mutate({trans:ee,type:"delete",keys:k})}).then(function(je){var ue=je.numFailures,ve=je.lastResult,je=je.failures;if(ue===0)return ve;throw new Me("".concat(I.name,".bulkDelete(): ").concat(ue," of ").concat(K," operations failed"),je)})},wr);function wr(){}function ns(k){function I(je,Le){if(Le){for(var We=arguments.length,Ye=new Array(We-1);--We;)Ye[We-1]=arguments[We];return K[je].subscribe.apply(null,Ye),k}if(typeof je=="string")return K[je]}var K={};I.addEventType=ve;for(var ee=1,ue=arguments.length;ee<ue;++ee)ve(arguments[ee]);return I;function ve(je,Le,We){if(typeof je!="object"){var Ye;Le=Le||J;var tt={subscribers:[],fire:We=We||Te,subscribe:function(qe){tt.subscribers.indexOf(qe)===-1&&(tt.subscribers.push(qe),tt.fire=Le(tt.fire,qe))},unsubscribe:function(qe){tt.subscribers=tt.subscribers.filter(function(rt){return rt!==qe}),tt.fire=tt.subscribers.reduce(Le,We)}};return K[je]=I[je]=tt}o(Ye=je).forEach(function(qe){var rt=Ye[qe];if(s(rt))ve(qe,Ye[qe][0],Ye[qe][1]);else{if(rt!=="asap")throw new Re.InvalidArgument("Invalid event config");var Ge=ve(qe,Ce,function(){for(var et=arguments.length,it=new Array(et);et--;)it[et]=arguments[et];Ge.subscribers.forEach(function(Xe){A(function(){Xe.apply(null,it)})})})}})}}function $l(k,I){return w(I).from({prototype:k}),I}function So(k,I){return!(k.filter||k.algorithm||k.or)&&(I?k.justLimit:!k.replayFilter)}function Fh(k,I){k.filter=ts(k.filter,I)}function La(k,I,K){var ee=k.replayFilter;k.replayFilter=ee?function(){return ts(ee(),I())}:I,k.justLimit=K&&!ee}function Bl(k,I){if(k.isPrimKey)return I.primaryKey;var K=I.getIndexByKeyPath(k.index);if(!K)throw new Re.Schema("KeyPath "+k.index+" on object store "+I.name+" is not indexed");return K}function Lh(k,I,K){var ee=Bl(k,I.schema);return I.openCursor({trans:K,values:!k.keysOnly,reverse:k.dir==="prev",unique:!!k.unique,query:{index:ee,range:k.range}})}function zl(k,I,K,ee){var ue=k.replayFilter?ts(k.filter,k.replayFilter()):k.filter;if(k.or){var ve={},je=function(Le,We,Ye){var tt,qe;ue&&!ue(We,Ye,function(rt){return We.stop(rt)},function(rt){return We.fail(rt)})||((qe=""+(tt=We.primaryKey))=="[object ArrayBuffer]"&&(qe=""+new Uint8Array(tt)),h(ve,qe)||(ve[qe]=!0,I(Le,We,Ye)))};return Promise.all([k.or._iterate(je,K),Us(Lh(k,ee,K),k.algorithm,je,!k.keysOnly&&k.valueMapper)])}return Us(Lh(k,ee,K),ts(k.algorithm,ue),I,!k.keysOnly&&k.valueMapper)}function Us(k,I,K,ee){var ue=Ne(ee?function(ve,je,Le){return K(ee(ve),je,Le)}:K);return k.then(function(ve){if(ve)return ve.start(function(){var je=function(){return ve.continue()};I&&!I(ve,function(Le){return je=Le},function(Le){ve.stop(Le),je=Te},function(Le){ve.fail(Le),je=Te})||ue(ve.value,ve,function(Le){return je=Le}),je()})})}var Ul=($h.prototype.execute=function(k){var I=this["@@propmod"];if(I.add!==void 0){var K=I.add;if(s(K))return a(a([],s(k)?k:[],!0),K).sort();if(typeof K=="number")return(Number(k)||0)+K;if(typeof K=="bigint")try{return BigInt(k)+K}catch{return BigInt(0)+K}throw new TypeError("Invalid term ".concat(K))}if(I.remove!==void 0){var ee=I.remove;if(s(ee))return s(k)?k.filter(function(ue){return!ee.includes(ue)}).sort():[];if(typeof ee=="number")return Number(k)-ee;if(typeof ee=="bigint")try{return BigInt(k)-ee}catch{return BigInt(0)-ee}throw new TypeError("Invalid subtrahend ".concat(ee))}return K=(K=I.replacePrefix)===null||K===void 0?void 0:K[0],K&&typeof k=="string"&&k.startsWith(K)?I.replacePrefix[1]+k.substring(K.length):k},$h);function $h(k){this["@@propmod"]=k}var ql=(Vn.prototype._read=function(k,I){var K=this._ctx;return K.error?K.table._trans(null,$r.bind(null,K.error)):K.table._trans("readonly",k).then(I)},Vn.prototype._write=function(k){var I=this._ctx;return I.error?I.table._trans(null,$r.bind(null,I.error)):I.table._trans("readwrite",k,"locked")},Vn.prototype._addAlgorithm=function(k){var I=this._ctx;I.algorithm=ts(I.algorithm,k)},Vn.prototype._iterate=function(k,I){return zl(this._ctx,k,I,this._ctx.table.core)},Vn.prototype.clone=function(k){var I=Object.create(this.constructor.prototype),K=Object.create(this._ctx);return k&&u(K,k),I._ctx=K,I},Vn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Vn.prototype.each=function(k){var I=this._ctx;return this._read(function(K){return zl(I,k,K,I.table.core)})},Vn.prototype.count=function(k){var I=this;return this._read(function(K){var ee=I._ctx,ue=ee.table.core;if(So(ee,!0))return ue.count({trans:K,query:{index:Bl(ee,ue.schema),range:ee.range}}).then(function(je){return Math.min(je,ee.limit)});var ve=0;return zl(ee,function(){return++ve,!1},K,ue).then(function(){return ve})}).then(k)},Vn.prototype.sortBy=function(k,I){var K=k.split(".").reverse(),ee=K[0],ue=K.length-1;function ve(We,Ye){return Ye?ve(We[K[Ye]],Ye-1):We[ee]}var je=this._ctx.dir==="next"?1:-1;function Le(We,Ye){return Un(ve(We,ue),ve(Ye,ue))*je}return this.toArray(function(We){return We.sort(Le)}).then(I)},Vn.prototype.toArray=function(k){var I=this;return this._read(function(K){var ee=I._ctx;if(ee.dir==="next"&&So(ee,!0)&&0<ee.limit){var ue=ee.valueMapper,ve=Bl(ee,ee.table.core.schema);return ee.table.core.query({trans:K,limit:ee.limit,values:!0,query:{index:ve,range:ee.range}}).then(function(Le){return Le=Le.result,ue?Le.map(ue):Le})}var je=[];return zl(ee,function(Le){return je.push(Le)},K,ee.table.core).then(function(){return je})},k)},Vn.prototype.offset=function(k){var I=this._ctx;return k<=0||(I.offset+=k,So(I)?La(I,function(){var K=k;return function(ee,ue){return K===0||(K===1?--K:ue(function(){ee.advance(K),K=0}),!1)}}):La(I,function(){var K=k;return function(){return--K<0}})),this},Vn.prototype.limit=function(k){return this._ctx.limit=Math.min(this._ctx.limit,k),La(this._ctx,function(){var I=k;return function(K,ee,ue){return--I<=0&&ee(ue),0<=I}},!0),this},Vn.prototype.until=function(k,I){return Fh(this._ctx,function(K,ee,ue){return!k(K.value)||(ee(ue),I)}),this},Vn.prototype.first=function(k){return this.limit(1).toArray(function(I){return I[0]}).then(k)},Vn.prototype.last=function(k){return this.reverse().first(k)},Vn.prototype.filter=function(k){var I;return Fh(this._ctx,function(K){return k(K.value)}),(I=this._ctx).isMatch=ts(I.isMatch,k),this},Vn.prototype.and=function(k){return this.filter(k)},Vn.prototype.or=function(k){return new this.db.WhereClause(this._ctx.table,k,this)},Vn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Vn.prototype.desc=function(){return this.reverse()},Vn.prototype.eachKey=function(k){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(K,ee){k(ee.key,ee)})},Vn.prototype.eachUniqueKey=function(k){return this._ctx.unique="unique",this.eachKey(k)},Vn.prototype.eachPrimaryKey=function(k){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(K,ee){k(ee.primaryKey,ee)})},Vn.prototype.keys=function(k){var I=this._ctx;I.keysOnly=!I.isMatch;var K=[];return this.each(function(ee,ue){K.push(ue.key)}).then(function(){return K}).then(k)},Vn.prototype.primaryKeys=function(k){var I=this._ctx;if(I.dir==="next"&&So(I,!0)&&0<I.limit)return this._read(function(ee){var ue=Bl(I,I.table.core.schema);return I.table.core.query({trans:ee,values:!1,limit:I.limit,query:{index:ue,range:I.range}})}).then(function(ee){return ee.result}).then(k);I.keysOnly=!I.isMatch;var K=[];return this.each(function(ee,ue){K.push(ue.primaryKey)}).then(function(){return K}).then(k)},Vn.prototype.uniqueKeys=function(k){return this._ctx.unique="unique",this.keys(k)},Vn.prototype.firstKey=function(k){return this.limit(1).keys(function(I){return I[0]}).then(k)},Vn.prototype.lastKey=function(k){return this.reverse().firstKey(k)},Vn.prototype.distinct=function(){var k=this._ctx,k=k.index&&k.table.schema.idxByName[k.index];if(!k||!k.multi)return this;var I={};return Fh(this._ctx,function(ue){var ee=ue.primaryKey.toString(),ue=h(I,ee);return I[ee]=!0,!ue}),this},Vn.prototype.modify=function(k){var I=this,K=this._ctx;return this._write(function(ee){var ue,ve,je;je=typeof k=="function"?k:(ue=o(k),ve=ue.length,function(Xe){for(var dt=!1,yt=0;yt<ve;++yt){var bt=ue[yt],xt=k[bt],Ft=j(Xe,bt);xt instanceof Ul?(O(Xe,bt,xt.execute(Ft)),dt=!0):Ft!==xt&&(O(Xe,bt,xt),dt=!0)}return dt});var Le=K.table.core,qe=Le.schema.primaryKey,We=qe.outbound,Ye=qe.extractKey,tt=200,qe=I.db._options.modifyChunkSize;qe&&(tt=typeof qe=="object"?qe[Le.name]||qe["*"]||200:qe);function rt(Xe,bt){var yt=bt.failures,bt=bt.numFailures;et+=Xe-bt;for(var xt=0,Ft=o(yt);xt<Ft.length;xt++){var qt=Ft[xt];Ge.push(yt[qt])}}var Ge=[],et=0,it=[];return I.clone().primaryKeys().then(function(Xe){function dt(bt){var xt=Math.min(tt,Xe.length-bt);return Le.getMany({trans:ee,keys:Xe.slice(bt,bt+xt),cache:"immutable"}).then(function(Ft){for(var qt=[],Dt=[],Bt=We?[]:null,Vt=[],Mt=0;Mt<xt;++Mt){var Xt=Ft[Mt],un={value:Z(Xt),primKey:Xe[bt+Mt]};je.call(un,un.value,un)!==!1&&(un.value==null?Vt.push(Xe[bt+Mt]):We||Un(Ye(Xt),Ye(un.value))===0?(Dt.push(un.value),We&&Bt.push(Xe[bt+Mt])):(Vt.push(Xe[bt+Mt]),qt.push(un.value)))}return Promise.resolve(0<qt.length&&Le.mutate({trans:ee,type:"add",values:qt}).then(function(fn){for(var kn in fn.failures)Vt.splice(parseInt(kn),1);rt(qt.length,fn)})).then(function(){return(0<Dt.length||yt&&typeof k=="object")&&Le.mutate({trans:ee,type:"put",keys:Bt,values:Dt,criteria:yt,changeSpec:typeof k!="function"&&k,isAdditionalChunk:0<bt}).then(function(fn){return rt(Dt.length,fn)})}).then(function(){return(0<Vt.length||yt&&k===Cd)&&Le.mutate({trans:ee,type:"delete",keys:Vt,criteria:yt,isAdditionalChunk:0<bt}).then(function(fn){return rt(Vt.length,fn)})}).then(function(){return Xe.length>bt+xt&&dt(bt+tt)})})}var yt=So(K)&&K.limit===1/0&&(typeof k!="function"||k===Cd)&&{index:K.index,range:K.range};return dt(0).then(function(){if(0<Ge.length)throw new fe("Error modifying one or more objects",Ge,et,it);return Xe.length})})})},Vn.prototype.delete=function(){var k=this._ctx,I=k.range;return So(k)&&(k.isPrimKey||I.type===3)?this._write(function(K){var ee=k.table.core.schema.primaryKey,ue=I;return k.table.core.count({trans:K,query:{index:ee,range:ue}}).then(function(ve){return k.table.core.mutate({trans:K,type:"deleteRange",range:ue}).then(function(je){var Le=je.failures;if(je.lastResult,je.results,je=je.numFailures,je)throw new fe("Could not delete some values",Object.keys(Le).map(function(We){return Le[We]}),ve-je);return ve-je})})}):this.modify(Cd)},Vn);function Vn(){}var Cd=function(k,I){return I.value=null};function ng(k,I){return k<I?-1:k===I?0:1}function Bh(k,I){return I<k?-1:k===I?0:1}function ri(k,I,K){return k=k instanceof Hs?new k.Collection(k):k,k._ctx.error=new(K||TypeError)(I),k}function Hl(k){return new k.Collection(k,function(){return Ad("")}).limit(0)}function qs(k,I,K,ee){var ue,ve,je,Le,We,Ye,tt,qe=K.length;if(!K.every(function(et){return typeof et=="string"}))return ri(k,tg);function rt(et){ue=et==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},ve=et==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},je=et==="next"?ng:Bh;var it=K.map(function(Xe){return{lower:ve(Xe),upper:ue(Xe)}}).sort(function(Xe,dt){return je(Xe.lower,dt.lower)});Le=it.map(function(Xe){return Xe.upper}),We=it.map(function(Xe){return Xe.lower}),tt=(Ye=et)==="next"?"":ee}rt("next"),k=new k.Collection(k,function(){return Ji(Le[0],We[qe-1]+ee)}),k._ondirectionchange=function(et){rt(et)};var Ge=0;return k._addAlgorithm(function(et,it,Xe){var dt=et.key;if(typeof dt!="string")return!1;var yt=ve(dt);if(I(yt,We,Ge))return!0;for(var bt=null,xt=Ge;xt<qe;++xt){var Ft=function(qt,Dt,Bt,Vt,Mt,Xt){for(var un=Math.min(qt.length,Vt.length),fn=-1,kn=0;kn<un;++kn){var Ia=Dt[kn];if(Ia!==Vt[kn])return Mt(qt[kn],Bt[kn])<0?qt.substr(0,kn)+Bt[kn]+Bt.substr(kn+1):Mt(qt[kn],Vt[kn])<0?qt.substr(0,kn)+Vt[kn]+Bt.substr(kn+1):0<=fn?qt.substr(0,fn)+Dt[fn]+Bt.substr(fn+1):null;Mt(qt[kn],Ia)<0&&(fn=kn)}return un<Vt.length&&Xt==="next"?qt+Bt.substr(qt.length):un<qt.length&&Xt==="prev"?qt.substr(0,Bt.length):fn<0?null:qt.substr(0,fn)+Vt[fn]+Bt.substr(fn+1)}(dt,yt,Le[xt],We[xt],je,Ye);Ft===null&&bt===null?Ge=xt+1:(bt===null||0<je(bt,Ft))&&(bt=Ft)}return it(bt!==null?function(){et.continue(bt+tt)}:Xe),!1}),k}function Ji(k,I,K,ee){return{type:2,lower:k,upper:I,lowerOpen:K,upperOpen:ee}}function Ad(k){return{type:1,lower:k,upper:k}}var Hs=(Object.defineProperty(Rr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Rr.prototype.between=function(k,I,K,ee){K=K!==!1,ee=ee===!0;try{return 0<this._cmp(k,I)||this._cmp(k,I)===0&&(K||ee)&&(!K||!ee)?Hl(this):new this.Collection(this,function(){return Ji(k,I,!K,!ee)})}catch{return ri(this,Xi)}},Rr.prototype.equals=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ad(k)})},Rr.prototype.above=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(k,void 0,!0)})},Rr.prototype.aboveOrEqual=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(k,void 0,!1)})},Rr.prototype.below=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(void 0,k,!1,!0)})},Rr.prototype.belowOrEqual=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(void 0,k)})},Rr.prototype.startsWith=function(k){return typeof k!="string"?ri(this,tg):this.between(k,k+es,!0,!0)},Rr.prototype.startsWithIgnoreCase=function(k){return k===""?this.startsWith(k):qs(this,function(I,K){return I.indexOf(K[0])===0},[k],es)},Rr.prototype.equalsIgnoreCase=function(k){return qs(this,function(I,K){return I===K[0]},[k],"")},Rr.prototype.anyOfIgnoreCase=function(){var k=G.apply(ne,arguments);return k.length===0?Hl(this):qs(this,function(I,K){return K.indexOf(I)!==-1},k,"")},Rr.prototype.startsWithAnyOfIgnoreCase=function(){var k=G.apply(ne,arguments);return k.length===0?Hl(this):qs(this,function(I,K){return K.some(function(ee){return I.indexOf(ee)===0})},k,es)},Rr.prototype.anyOf=function(){var k=this,I=G.apply(ne,arguments),K=this._cmp;try{I.sort(K)}catch{return ri(this,Xi)}if(I.length===0)return Hl(this);var ee=new this.Collection(this,function(){return Ji(I[0],I[I.length-1])});ee._ondirectionchange=function(ve){K=ve==="next"?k._ascending:k._descending,I.sort(K)};var ue=0;return ee._addAlgorithm(function(ve,je,Le){for(var We=ve.key;0<K(We,I[ue]);)if(++ue===I.length)return je(Le),!1;return K(We,I[ue])===0||(je(function(){ve.continue(I[ue])}),!1)}),ee},Rr.prototype.notEqual=function(k){return this.inAnyRange([[-1/0,k],[k,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Rr.prototype.noneOf=function(){var k=G.apply(ne,arguments);if(k.length===0)return new this.Collection(this);try{k.sort(this._ascending)}catch{return ri(this,Xi)}var I=k.reduce(function(K,ee){return K?K.concat([[K[K.length-1][1],ee]]):[[-1/0,ee]]},null);return I.push([k[k.length-1],this.db._maxKey]),this.inAnyRange(I,{includeLowers:!1,includeUppers:!1})},Rr.prototype.inAnyRange=function(dt,I){var K=this,ee=this._cmp,ue=this._ascending,ve=this._descending,je=this._min,Le=this._max;if(dt.length===0)return Hl(this);if(!dt.every(function(yt){return yt[0]!==void 0&&yt[1]!==void 0&&ue(yt[0],yt[1])<=0}))return ri(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Re.InvalidArgument);var We=!I||I.includeLowers!==!1,Ye=I&&I.includeUppers===!0,tt,qe=ue;function rt(yt,bt){return qe(yt[0],bt[0])}try{(tt=dt.reduce(function(yt,bt){for(var xt=0,Ft=yt.length;xt<Ft;++xt){var qt=yt[xt];if(ee(bt[0],qt[1])<0&&0<ee(bt[1],qt[0])){qt[0]=je(qt[0],bt[0]),qt[1]=Le(qt[1],bt[1]);break}}return xt===Ft&&yt.push(bt),yt},[])).sort(rt)}catch{return ri(this,Xi)}var Ge=0,et=Ye?function(yt){return 0<ue(yt,tt[Ge][1])}:function(yt){return 0<=ue(yt,tt[Ge][1])},it=We?function(yt){return 0<ve(yt,tt[Ge][0])}:function(yt){return 0<=ve(yt,tt[Ge][0])},Xe=et,dt=new this.Collection(this,function(){return Ji(tt[0][0],tt[tt.length-1][1],!We,!Ye)});return dt._ondirectionchange=function(yt){qe=yt==="next"?(Xe=et,ue):(Xe=it,ve),tt.sort(rt)},dt._addAlgorithm(function(yt,bt,xt){for(var Ft,qt=yt.key;Xe(qt);)if(++Ge===tt.length)return bt(xt),!1;return!et(Ft=qt)&&!it(Ft)||(K._cmp(qt,tt[Ge][1])===0||K._cmp(qt,tt[Ge][0])===0||bt(function(){qe===ue?yt.continue(tt[Ge][0]):yt.continue(tt[Ge][1])}),!1)}),dt},Rr.prototype.startsWithAnyOf=function(){var k=G.apply(ne,arguments);return k.every(function(I){return typeof I=="string"})?k.length===0?Hl(this):this.inAnyRange(k.map(function(I){return[I,I+es]})):ri(this,"startsWithAnyOf() only works with strings")},Rr);function Rr(){}function Oi(k){return Ne(function(I){return Vs(I),k(I.target.error),!1})}function Vs(k){k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault()}var Vl="storagemutated",Gs="x-storagemutated-1",ga=ns(null,Vl),zh=($a.prototype._lock=function(){return C(!Ee.global),++this._reculock,this._reculock!==1||Ee.global||(Ee.lockOwnerFor=this),this},$a.prototype._unlock=function(){if(C(!Ee.global),--this._reculock==0)for(Ee.global||(Ee.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var k=this._blockedFuncs.shift();try{Xo(k[1],k[0])}catch{}}return this},$a.prototype._locked=function(){return this._reculock&&Ee.lockOwnerFor!==this},$a.prototype.create=function(k){var I=this;if(!this.mode)return this;var K=this.db.idbdb,ee=this.db._state.dbOpenError;if(C(!this.idbtrans),!k&&!K)switch(ee&&ee.name){case"DatabaseClosedError":throw new Re.DatabaseClosed(ee);case"MissingAPIError":throw new Re.MissingAPI(ee.message,ee);default:throw new Re.OpenFailed(ee)}if(!this.active)throw new Re.TransactionInactive;return C(this._completion._state===null),(k=this.idbtrans=k||(this.db.core||K).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ne(function(ue){Vs(ue),I._reject(k.error)}),k.onabort=Ne(function(ue){Vs(ue),I.active&&I._reject(new Re.Abort(k.error)),I.active=!1,I.on("abort").fire(ue)}),k.oncomplete=Ne(function(){I.active=!1,I._resolve(),"mutatedParts"in k&&ga.storagemutated.fire(k.mutatedParts)}),this},$a.prototype._promise=function(k,I,K){var ee=this;if(k==="readwrite"&&this.mode!=="readwrite")return $r(new Re.ReadOnly("Transaction is readonly"));if(!this.active)return $r(new Re.TransactionInactive);if(this._locked())return new D(function(ve,je){ee._blockedFuncs.push([function(){ee._promise(k,I,K).then(ve,je)},Ee])});if(K)return Zt(function(){var ve=new D(function(je,Le){ee._lock();var We=I(je,Le,ee);We&&We.then&&We.then(je,Le)});return ve.finally(function(){return ee._unlock()}),ve._lib=!0,ve});var ue=new D(function(ve,je){var Le=I(ve,je,ee);Le&&Le.then&&Le.then(ve,je)});return ue._lib=!0,ue},$a.prototype._root=function(){return this.parent?this.parent._root():this},$a.prototype.waitFor=function(k){var I,K=this._root(),ee=D.resolve(k);K._waitingFor?K._waitingFor=K._waitingFor.then(function(){return ee}):(K._waitingFor=ee,K._waitingQueue=[],I=K.idbtrans.objectStore(K.storeNames[0]),function ve(){for(++K._spinCount;K._waitingQueue.length;)K._waitingQueue.shift()();K._waitingFor&&(I.get(-1/0).onsuccess=ve)}());var ue=K._waitingFor;return new D(function(ve,je){ee.then(function(Le){return K._waitingQueue.push(Ne(ve.bind(null,Le)))},function(Le){return K._waitingQueue.push(Ne(je.bind(null,Le)))}).finally(function(){K._waitingFor===ue&&(K._waitingFor=null)})})},$a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Re.Abort))},$a.prototype.table=function(k){var I=this._memoizedTables||(this._memoizedTables={});if(h(I,k))return I[k];var K=this.schema[k];if(!K)throw new Re.NotFound("Table "+k+" not part of transaction");return K=new this.db.Table(k,K,this),K.core=this.db.core.table(k),I[k]=K},$a);function $a(){}function Qi(k,I,K,ee,ue,ve,je){return{name:k,keyPath:I,unique:K,multi:ee,auto:ue,compound:ve,src:(K&&!je?"&":"")+(ee?"*":"")+(ue?"++":"")+Td(I)}}function Td(k){return typeof k=="string"?k:k?"["+[].join.call(k,"+")+"]":""}function Gl(k,I,K){return{name:k,primKey:I,indexes:K,mappedClass:null,idxByName:(ee=function(ue){return[ue.name,ue]},K.reduce(function(ue,ve,je){return je=ee(ve,je),je&&(ue[je[0]]=je[1]),ue},{}))};var ee}var Wl=function(k){try{return k.only([[]]),Wl=function(){return[[]]},[[]]}catch{return Wl=function(){return es},es}};function Kl(k){return k==null?function(){}:typeof k=="string"?(I=k).split(".").length===1?function(K){return K[I]}:function(K){return j(K,I)}:function(K){return j(K,k)};var I}function cc(k){return[].slice.call(k)}var rg=0;function ra(k){return k==null?":id":typeof k=="string"?k:"[".concat(k.join("+"),"]")}function Ws(k,I,We){function ee(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Xe.lower,et=Xe.upper,it=Xe.lowerOpen,Xe=Xe.upperOpen;return Ge===void 0?et===void 0?null:I.upperBound(et,!!Xe):et===void 0?I.lowerBound(Ge,!!it):I.bound(Ge,et,!!it,!!Xe)}function ue(rt){var Ge,et=rt.name;return{name:et,schema:rt,mutate:function(it){var Xe=it.trans,dt=it.type,yt=it.keys,bt=it.values,xt=it.range;return new Promise(function(Ft,qt){Ft=Ne(Ft);var Dt=Xe.objectStore(et),Bt=Dt.keyPath==null,Vt=dt==="put"||dt==="add";if(!Vt&&dt!=="delete"&&dt!=="deleteRange")throw new Error("Invalid operation type: "+dt);var Mt,Xt=(yt||bt||{length:1}).length;if(yt&&bt&&yt.length!==bt.length)throw new Error("Given keys array must have same length as given values array.");if(Xt===0)return Ft({numFailures:0,failures:{},results:[],lastResult:void 0});function un(ba){++Ia,Vs(ba)}var fn=[],kn=[],Ia=0;if(dt==="deleteRange"){if(xt.type===4)return Ft({numFailures:Ia,failures:kn,results:[],lastResult:void 0});xt.type===3?fn.push(Mt=Dt.clear()):fn.push(Mt=Dt.delete(ee(xt)))}else{var Bt=Vt?Bt?[bt,yt]:[bt,null]:[yt,null],bn=Bt[0],Yr=Bt[1];if(Vt)for(var aa=0;aa<Xt;++aa)fn.push(Mt=Yr&&Yr[aa]!==void 0?Dt[dt](bn[aa],Yr[aa]):Dt[dt](bn[aa])),Mt.onerror=un;else for(aa=0;aa<Xt;++aa)fn.push(Mt=Dt[dt](bn[aa])),Mt.onerror=un}function Eo(ba){ba=ba.target.result,fn.forEach(function(to,os){return to.error!=null&&(kn[os]=to.error)}),Ft({numFailures:Ia,failures:kn,results:dt==="delete"?yt:fn.map(function(to){return to.result}),lastResult:ba})}Mt.onerror=function(ba){un(ba),Eo(ba)},Mt.onsuccess=Eo})},getMany:function(it){var Xe=it.trans,dt=it.keys;return new Promise(function(yt,bt){yt=Ne(yt);for(var xt,Ft=Xe.objectStore(et),qt=dt.length,Dt=new Array(qt),Bt=0,Vt=0,Mt=function(fn){fn=fn.target,Dt[fn._pos]=fn.result,++Vt===Bt&&yt(Dt)},Xt=Oi(bt),un=0;un<qt;++un)dt[un]!=null&&((xt=Ft.get(dt[un]))._pos=un,xt.onsuccess=Mt,xt.onerror=Xt,++Bt);Bt===0&&yt(Dt)})},get:function(it){var Xe=it.trans,dt=it.key;return new Promise(function(yt,bt){yt=Ne(yt);var xt=Xe.objectStore(et).get(dt);xt.onsuccess=function(Ft){return yt(Ft.target.result)},xt.onerror=Oi(bt)})},query:(Ge=Ye,function(it){return new Promise(function(Xe,dt){Xe=Ne(Xe);var yt,bt,xt,Bt=it.trans,Ft=it.values,qt=it.limit,Mt=it.query,Dt=qt===1/0?void 0:qt,Vt=Mt.index,Mt=Mt.range,Bt=Bt.objectStore(et),Vt=Vt.isPrimaryKey?Bt:Bt.index(Vt.name),Mt=ee(Mt);if(qt===0)return Xe({result:[]});Ge?((Dt=Ft?Vt.getAll(Mt,Dt):Vt.getAllKeys(Mt,Dt)).onsuccess=function(Xt){return Xe({result:Xt.target.result})},Dt.onerror=Oi(dt)):(yt=0,bt=!Ft&&"openKeyCursor"in Vt?Vt.openKeyCursor(Mt):Vt.openCursor(Mt),xt=[],bt.onsuccess=function(Xt){var un=bt.result;return un?(xt.push(Ft?un.value:un.primaryKey),++yt===qt?Xe({result:xt}):void un.continue()):Xe({result:xt})},bt.onerror=Oi(dt))})}),openCursor:function(it){var Xe=it.trans,dt=it.values,yt=it.query,bt=it.reverse,xt=it.unique;return new Promise(function(Ft,qt){Ft=Ne(Ft);var Vt=yt.index,Dt=yt.range,Bt=Xe.objectStore(et),Bt=Vt.isPrimaryKey?Bt:Bt.index(Vt.name),Vt=bt?xt?"prevunique":"prev":xt?"nextunique":"next",Mt=!dt&&"openKeyCursor"in Bt?Bt.openKeyCursor(ee(Dt),Vt):Bt.openCursor(ee(Dt),Vt);Mt.onerror=Oi(qt),Mt.onsuccess=Ne(function(Xt){var un,fn,kn,Ia,bn=Mt.result;bn?(bn.___id=++rg,bn.done=!1,un=bn.continue.bind(bn),fn=(fn=bn.continuePrimaryKey)&&fn.bind(bn),kn=bn.advance.bind(bn),Ia=function(){throw new Error("Cursor not stopped")},bn.trans=Xe,bn.stop=bn.continue=bn.continuePrimaryKey=bn.advance=function(){throw new Error("Cursor not started")},bn.fail=Ne(qt),bn.next=function(){var Yr=this,aa=1;return this.start(function(){return aa--?Yr.continue():Yr.stop()}).then(function(){return Yr})},bn.start=function(Yr){function aa(){if(Mt.result)try{Yr()}catch(ba){bn.fail(ba)}else bn.done=!0,bn.start=function(){throw new Error("Cursor behind last entry")},bn.stop()}var Eo=new Promise(function(ba,to){ba=Ne(ba),Mt.onerror=Oi(to),bn.fail=to,bn.stop=function(os){bn.stop=bn.continue=bn.continuePrimaryKey=bn.advance=Ia,ba(os)}});return Mt.onsuccess=Ne(function(ba){Mt.onsuccess=aa,aa()}),bn.continue=un,bn.continuePrimaryKey=fn,bn.advance=kn,aa(),Eo},Ft(bn)):Ft(null)},qt)})},count:function(it){var Xe=it.query,dt=it.trans,yt=Xe.index,bt=Xe.range;return new Promise(function(xt,Ft){var qt=dt.objectStore(et),Dt=yt.isPrimaryKey?qt:qt.index(yt.name),qt=ee(bt),Dt=qt?Dt.count(qt):Dt.count();Dt.onsuccess=Ne(function(Bt){return xt(Bt.target.result)}),Dt.onerror=Oi(Ft)})}}}var ve,je,Le,tt=(je=We,Le=cc((ve=k).objectStoreNames),{schema:{name:ve.name,tables:Le.map(function(rt){return je.objectStore(rt)}).map(function(rt){var Ge=rt.keyPath,Xe=rt.autoIncrement,et=s(Ge),it={},Xe={name:rt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:et,keyPath:Ge,autoIncrement:Xe,unique:!0,extractKey:Kl(Ge)},indexes:cc(rt.indexNames).map(function(dt){return rt.index(dt)}).map(function(xt){var yt=xt.name,bt=xt.unique,Ft=xt.multiEntry,xt=xt.keyPath,Ft={name:yt,compound:s(xt),keyPath:xt,unique:bt,multiEntry:Ft,extractKey:Kl(xt)};return it[ra(xt)]=Ft}),getIndexByKeyPath:function(dt){return it[ra(dt)]}};return it[":id"]=Xe.primaryKey,Ge!=null&&(it[ra(Ge)]=Xe.primaryKey),Xe})},hasGetAll:0<Le.length&&"getAll"in je.objectStore(Le[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=tt.schema,Ye=tt.hasGetAll,tt=We.tables.map(ue),qe={};return tt.forEach(function(rt){return qe[rt.name]=rt}),{stack:"dbcore",transaction:k.transaction.bind(k),table:function(rt){if(!qe[rt])throw new Error("Table '".concat(rt,"' not found"));return qe[rt]},MIN_KEY:-1/0,MAX_KEY:Wl(I),schema:We}}function Rd(k,I,K,ee){var ue=K.IDBKeyRange;return K.indexedDB,{dbcore:(ee=Ws(I,ue,ee),k.dbcore.reduce(function(ve,je){return je=je.create,r(r({},ve),je(ve))},ee))}}function rs(k,ee){var K=ee.db,ee=Rd(k._middlewares,K,k._deps,ee);k.core=ee.dbcore,k.tables.forEach(function(ue){var ve=ue.name;k.core.schema.tables.some(function(je){return je.name===ve})&&(ue.core=k.core.table(ve),k[ve]instanceof k.Table&&(k[ve].core=ue.core))})}function Nd(k,I,K,ee){K.forEach(function(ue){var ve=ee[ue];I.forEach(function(je){var Le=function We(Ye,tt){return _(Ye,tt)||(Ye=c(Ye))&&We(Ye,tt)}(je,ue);(!Le||"value"in Le&&Le.value===void 0)&&(je===k.Transaction.prototype||je instanceof k.Transaction?v(je,ue,{get:function(){return this.table(ue)},set:function(We){g(this,ue,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):je[ue]=new k.Table(ue,ve))})})}function dc(k,I){I.forEach(function(K){for(var ee in K)K[ee]instanceof k.Table&&delete K[ee]})}function Uh(k,I){return k._cfg.version-I._cfg.version}function fc(k,I,K,ee){var ue=k._dbSchema;K.objectStoreNames.contains("$meta")&&!ue.$meta&&(ue.$meta=Gl("$meta",ig("")[0],[]),k._storeNames.push("$meta"));var ve=k._createTransaction("readwrite",k._storeNames,ue);ve.create(K),ve._completion.catch(ee);var je=ve._reject.bind(ve),Le=Ee.transless||Ee;Zt(function(){return Ee.trans=ve,Ee.transless=Le,I!==0?(rs(k,K),Ye=I,((We=ve).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(tt){return tt??Ye}):D.resolve(Ye)).then(function(tt){return rt=tt,Ge=ve,et=K,it=[],tt=(qe=k)._versions,Xe=qe._dbSchema=Zl(0,qe.idbdb,et),(tt=tt.filter(function(dt){return dt._cfg.version>=rt})).length!==0?(tt.forEach(function(dt){it.push(function(){var yt=Xe,bt=dt._cfg.dbschema;Dd(qe,yt,et),Dd(qe,bt,et),Xe=qe._dbSchema=bt;var xt=Od(yt,bt);xt.add.forEach(function(Vt){qh(et,Vt[0],Vt[1].primKey,Vt[1].indexes)}),xt.change.forEach(function(Vt){if(Vt.recreate)throw new Re.Upgrade("Not yet support for changing primary key");var Mt=et.objectStore(Vt.name);Vt.add.forEach(function(Xt){return jd(Mt,Xt)}),Vt.change.forEach(function(Xt){Mt.deleteIndex(Xt.name),jd(Mt,Xt)}),Vt.del.forEach(function(Xt){return Mt.deleteIndex(Xt)})});var Ft=dt._cfg.contentUpgrade;if(Ft&&dt._cfg.version>rt){rs(qe,et),Ge._memoizedTables={};var qt=N(bt);xt.del.forEach(function(Vt){qt[Vt]=yt[Vt]}),dc(qe,[qe.Transaction.prototype]),Nd(qe,[qe.Transaction.prototype],o(qt),qt),Ge.schema=qt;var Dt,Bt=X(Ft);return Bt&&En(),xt=D.follow(function(){var Vt;(Dt=Ft(Ge))&&Bt&&(Vt=zn.bind(null,null),Dt.then(Vt,Vt))}),Dt&&typeof Dt.then=="function"?D.resolve(Dt):xt.then(function(){return Dt})}}),it.push(function(yt){var bt,xt,Ft=dt._cfg.dbschema;bt=Ft,xt=yt,[].slice.call(xt.db.objectStoreNames).forEach(function(qt){return bt[qt]==null&&xt.db.deleteObjectStore(qt)}),dc(qe,[qe.Transaction.prototype]),Nd(qe,[qe.Transaction.prototype],qe._storeNames,qe._dbSchema),Ge.schema=qe._dbSchema}),it.push(function(yt){qe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qe.idbdb.version/10)===dt._cfg.version?(qe.idbdb.deleteObjectStore("$meta"),delete qe._dbSchema.$meta,qe._storeNames=qe._storeNames.filter(function(bt){return bt!=="$meta"})):yt.objectStore("$meta").put(dt._cfg.version,"version"))})}),function dt(){return it.length?D.resolve(it.shift()(Ge.idbtrans)).then(dt):D.resolve()}().then(function(){ag(Xe,et)})):D.resolve();var qe,rt,Ge,et,it,Xe}).catch(je)):(o(ue).forEach(function(tt){qh(K,tt,ue[tt].primKey,ue[tt].indexes)}),rs(k,K),void D.follow(function(){return k.on.populate.fire(ve)}).catch(je));var We,Ye})}function Id(k,I){ag(k._dbSchema,I),I.db.version%10!=0||I.objectStoreNames.contains("$meta")||I.db.createObjectStore("$meta").add(Math.ceil(I.db.version/10-1),"version");var K=Zl(0,k.idbdb,I);Dd(k,k._dbSchema,I);for(var ee=0,ue=Od(K,k._dbSchema).change;ee<ue.length;ee++){var ve=function(je){if(je.change.length||je.recreate)return console.warn("Unable to patch indexes of table ".concat(je.name," because it has changes on the type of index or primary key.")),{value:void 0};var Le=I.objectStore(je.name);je.add.forEach(function(We){Pe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(je.name,".").concat(We.src)),jd(Le,We)})}(ue[ee]);if(typeof ve=="object")return ve.value}}function Od(k,I){var K,ee={del:[],add:[],change:[]};for(K in k)I[K]||ee.del.push(K);for(K in I){var ue=k[K],ve=I[K];if(ue){var je={name:K,def:ve,recreate:!1,del:[],add:[],change:[]};if(""+(ue.primKey.keyPath||"")!=""+(ve.primKey.keyPath||"")||ue.primKey.auto!==ve.primKey.auto)je.recreate=!0,ee.change.push(je);else{var Le=ue.idxByName,We=ve.idxByName,Ye=void 0;for(Ye in Le)We[Ye]||je.del.push(Ye);for(Ye in We){var tt=Le[Ye],qe=We[Ye];tt?tt.src!==qe.src&&je.change.push(qe):je.add.push(qe)}(0<je.del.length||0<je.add.length||0<je.change.length)&&ee.change.push(je)}}else ee.add.push([K,ve])}return ee}function qh(k,I,K,ee){var ue=k.db.createObjectStore(I,K.keyPath?{keyPath:K.keyPath,autoIncrement:K.auto}:{autoIncrement:K.auto});return ee.forEach(function(ve){return jd(ue,ve)}),ue}function ag(k,I){o(k).forEach(function(K){I.db.objectStoreNames.contains(K)||(Pe&&console.debug("Dexie: Creating missing table",K),qh(I,K,k[K].primKey,k[K].indexes))})}function jd(k,I){k.createIndex(I.name,I.keyPath,{unique:I.unique,multiEntry:I.multi})}function Zl(k,I,K){var ee={};return S(I.objectStoreNames,0).forEach(function(ue){for(var ve=K.objectStore(ue),je=Qi(Td(Ye=ve.keyPath),Ye||"",!0,!1,!!ve.autoIncrement,Ye&&typeof Ye!="string",!0),Le=[],We=0;We<ve.indexNames.length;++We){var tt=ve.index(ve.indexNames[We]),Ye=tt.keyPath,tt=Qi(tt.name,Ye,!!tt.unique,!!tt.multiEntry,!1,Ye&&typeof Ye!="string",!1);Le.push(tt)}ee[ue]=Gl(ue,je,Le)}),ee}function Dd(k,I,K){for(var ee=K.db.objectStoreNames,ue=0;ue<ee.length;++ue){var ve=ee[ue],je=K.objectStore(ve);k._hasGetAll="getAll"in je;for(var Le=0;Le<je.indexNames.length;++Le){var We=je.indexNames[Le],Ye=je.index(We).keyPath,tt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!I[ve]||(Ye=I[ve].idxByName[tt])&&(Ye.name=We,delete I[ve].idxByName[tt],I[ve].idxByName[We]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(k._hasGetAll=!1)}function ig(k){return k.split(",").map(function(I,K){var ee=(I=I.trim()).replace(/([&*]|\+\+)/g,""),ue=/^\[/.test(ee)?ee.match(/^\[(.*)\]$/)[1].split("+"):ee;return Qi(ee,ue||null,/\&/.test(I),/\*/.test(I),/\+\+/.test(I),s(ue),K===0)})}var Uw=(Md.prototype._parseStoresSpec=function(k,I){o(k).forEach(function(K){if(k[K]!==null){var ee=ig(k[K]),ue=ee.shift();if(ue.unique=!0,ue.multi)throw new Re.Schema("Primary key cannot be multi-valued");ee.forEach(function(ve){if(ve.auto)throw new Re.Schema("Only primary key can be marked as autoIncrement (++)");if(!ve.keyPath)throw new Re.Schema("Index must have a name and cannot be an empty string")}),I[K]=Gl(K,ue,ee)}})},Md.prototype.stores=function(K){var I=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,K):K;var K=I._versions,ee={},ue={};return K.forEach(function(ve){u(ee,ve._cfg.storesSource),ue=ve._cfg.dbschema={},ve._parseStoresSpec(ee,ue)}),I._dbSchema=ue,dc(I,[I._allTables,I,I.Transaction.prototype]),Nd(I,[I._allTables,I,I.Transaction.prototype,this._cfg.tables],o(ue),ue),I._storeNames=o(ue),this},Md.prototype.upgrade=function(k){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Te,k),this},Md);function Md(){}function Hh(k,I){var K=k._dbNamesDB;return K||(K=k._dbNamesDB=new eo(Bs,{addons:[],indexedDB:k,IDBKeyRange:I})).version(1).stores({dbnames:"name"}),K.table("dbnames")}function Pd(k){return k&&typeof k.databases=="function"}function Vh(k){return Zt(function(){return Ee.letThrough=!0,k()})}function Gh(k){return!("from"in k)}var ya=function(k,I){if(!this){var K=new ya;return k&&"d"in k&&u(K,k),K}u(this,arguments.length?{d:1,from:k,to:1<arguments.length?I:k}:{d:0})};function hc(k,I,K){var ee=Un(I,K);if(!isNaN(ee)){if(0<ee)throw RangeError();if(Gh(k))return u(k,{from:I,to:K,d:1});var ue=k.l,ee=k.r;if(Un(K,k.from)<0)return ue?hc(ue,I,K):k.l={from:I,to:K,d:1,l:null,r:null},sg(k);if(0<Un(I,k.to))return ee?hc(ee,I,K):k.r={from:I,to:K,d:1,l:null,r:null},sg(k);Un(I,k.from)<0&&(k.from=I,k.l=null,k.d=ee?ee.d+1:1),0<Un(K,k.to)&&(k.to=K,k.r=null,k.d=k.l?k.l.d+1:1),K=!k.r,ue&&!k.l&&Ks(k,ue),ee&&K&&Ks(k,ee)}}function Ks(k,I){Gh(I)||function K(ee,We){var ve=We.from,je=We.to,Le=We.l,We=We.r;hc(ee,ve,je),Le&&K(ee,Le),We&&K(ee,We)}(k,I)}function og(k,I){var K=Fd(I),ee=K.next();if(ee.done)return!1;for(var ue=ee.value,ve=Fd(k),je=ve.next(ue.from),Le=je.value;!ee.done&&!je.done;){if(Un(Le.from,ue.to)<=0&&0<=Un(Le.to,ue.from))return!0;Un(ue.from,Le.from)<0?ue=(ee=K.next(Le.from)).value:Le=(je=ve.next(ue.from)).value}return!1}function Fd(k){var I=Gh(k)?null:{s:0,n:k};return{next:function(K){for(var ee=0<arguments.length;I;)switch(I.s){case 0:if(I.s=1,ee)for(;I.n.l&&Un(K,I.n.from)<0;)I={up:I,n:I.n.l,s:1};else for(;I.n.l;)I={up:I,n:I.n.l,s:1};case 1:if(I.s=2,!ee||Un(K,I.n.to)<=0)return{value:I.n,done:!1};case 2:if(I.n.r){I.s=3,I={up:I,n:I.n.r,s:0};continue}case 3:I=I.up}return{done:!0}}}}function sg(k){var I,K,ee=(((I=k.r)===null||I===void 0?void 0:I.d)||0)-(((K=k.l)===null||K===void 0?void 0:K.d)||0),ue=1<ee?"r":ee<-1?"l":"";ue&&(I=ue=="r"?"l":"r",K=r({},k),ee=k[ue],k.from=ee.from,k.to=ee.to,k[ue]=ee[ue],K[ue]=ee[I],(k[I]=K).d=Wh(K)),k.d=Wh(k)}function Wh(K){var I=K.r,K=K.l;return(I?K?Math.max(I.d,K.d):I.d:K?K.d:0)+1}function Ld(k,I){return o(I).forEach(function(K){k[K]?Ks(k[K],I[K]):k[K]=function ee(ue){var ve,je,Le={};for(ve in ue)h(ue,ve)&&(je=ue[ve],Le[ve]=!je||typeof je!="object"||Q.has(je.constructor)?je:ee(je));return Le}(I[K])}),k}function Kh(k,I){return k.all||I.all||Object.keys(k).some(function(K){return I[K]&&og(I[K],k[K])})}m(ya.prototype,((ai={add:function(k){return Ks(this,k),this},addKey:function(k){return hc(this,k,k),this},addKeys:function(k){var I=this;return k.forEach(function(K){return hc(I,K,K)}),this},hasKey:function(k){var I=Fd(this).next(k).value;return I&&Un(I.from,k)<=0&&0<=Un(I.to,k)}})[ae]=function(){return Fd(this)},ai));var Zs={},Zh={},Yh=!1;function $d(k){Ld(Zh,k),Yh||(Yh=!0,setTimeout(function(){Yh=!1,Xh(Zh,!(Zh={}))},0))}function Xh(k,I){I===void 0&&(I=!1);var K=new Set;if(k.all)for(var ee=0,ue=Object.values(Zs);ee<ue.length;ee++)lg(je=ue[ee],k,K,I);else for(var ve in k){var je,Le=/^idb\:\/\/(.*)\/(.*)\//.exec(ve);Le&&(ve=Le[1],Le=Le[2],(je=Zs["idb://".concat(ve,"/").concat(Le)])&&lg(je,k,K,I))}K.forEach(function(We){return We()})}function lg(k,I,K,ee){for(var ue=[],ve=0,je=Object.entries(k.queries.query);ve<je.length;ve++){for(var Le=je[ve],We=Le[0],Ye=[],tt=0,qe=Le[1];tt<qe.length;tt++){var rt=qe[tt];Kh(I,rt.obsSet)?rt.subscribers.forEach(function(Xe){return K.add(Xe)}):ee&&Ye.push(rt)}ee&&ue.push([We,Ye])}if(ee)for(var Ge=0,et=ue;Ge<et.length;Ge++){var it=et[Ge],We=it[0],Ye=it[1];k.queries.query[We]=Ye}}function qw(k){var I=k._state,K=k._deps.indexedDB;if(I.isBeingOpened||k.idbdb)return I.dbReadyPromise.then(function(){return I.dbOpenError?$r(I.dbOpenError):k});I.isBeingOpened=!0,I.dbOpenError=null,I.openComplete=!1;var ee=I.openCanceller,ue=Math.round(10*k.verno),ve=!1;function je(){if(I.openCanceller!==ee)throw new Re.DatabaseClosed("db.open() was cancelled")}function Le(){return new D(function(rt,Ge){if(je(),!K)throw new Re.MissingAPI;var et=k.name,it=I.autoSchema||!ue?K.open(et):K.open(et,ue);if(!it)throw new Re.MissingAPI;it.onerror=Oi(Ge),it.onblocked=Ne(k._fireOnBlocked),it.onupgradeneeded=Ne(function(Xe){var dt;tt=it.transaction,I.autoSchema&&!k._options.allowEmptyDB?(it.onerror=Vs,tt.abort(),it.result.close(),(dt=K.deleteDatabase(et)).onsuccess=dt.onerror=Ne(function(){Ge(new Re.NoSuchDatabase("Database ".concat(et," doesnt exist")))})):(tt.onerror=Oi(Ge),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,qe=Xe<1,k.idbdb=it.result,ve&&Id(k,tt),fc(k,Xe/10,tt,Ge))},Ge),it.onsuccess=Ne(function(){tt=null;var Xe,dt,yt,bt,xt,Ft=k.idbdb=it.result,qt=S(Ft.objectStoreNames);if(0<qt.length)try{var Dt=Ft.transaction((bt=qt).length===1?bt[0]:bt,"readonly");if(I.autoSchema)dt=Ft,yt=Dt,(Xe=k).verno=dt.version/10,yt=Xe._dbSchema=Zl(0,dt,yt),Xe._storeNames=S(dt.objectStoreNames,0),Nd(Xe,[Xe._allTables],o(yt),yt);else if(Dd(k,k._dbSchema,Dt),((xt=Od(Zl(0,(xt=k).idbdb,Dt),xt._dbSchema)).add.length||xt.change.some(function(Bt){return Bt.add.length||Bt.change.length}))&&!ve)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ft.close(),ue=Ft.version+1,ve=!0,rt(Le());rs(k,Dt)}catch{}xo.push(k),Ft.onversionchange=Ne(function(Bt){I.vcFired=!0,k.on("versionchange").fire(Bt)}),Ft.onclose=Ne(function(Bt){k.on("close").fire(Bt)}),qe&&(xt=k._deps,Dt=et,Ft=xt.indexedDB,xt=xt.IDBKeyRange,Pd(Ft)||Dt===Bs||Hh(Ft,xt).put({name:Dt}).catch(Te)),rt()},Ge)}).catch(function(rt){switch(rt==null?void 0:rt.name){case"UnknownError":if(0<I.PR1398_maxLoop)return I.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Le();break;case"VersionError":if(0<ue)return ue=0,Le()}return D.reject(rt)})}var We,Ye=I.dbReadyResolve,tt=null,qe=!1;return D.race([ee,(typeof navigator>"u"?D.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(rt){function Ge(){return indexedDB.databases().finally(rt)}We=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then(Le)]).then(function(){return je(),I.onReadyBeingFired=[],D.resolve(Vh(function(){return k.on.ready.fire(k.vip)})).then(function rt(){if(0<I.onReadyBeingFired.length){var Ge=I.onReadyBeingFired.reduce(xe,Te);return I.onReadyBeingFired=[],D.resolve(Vh(function(){return Ge(k.vip)})).then(rt)}})}).finally(function(){I.openCanceller===ee&&(I.onReadyBeingFired=null,I.isBeingOpened=!1)}).catch(function(rt){I.dbOpenError=rt;try{tt&&tt.abort()}catch{}return ee===I.openCanceller&&k._close(),$r(rt)}).finally(function(){I.openComplete=!0,Ye()}).then(function(){var rt;return qe&&(rt={},k.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(et){et.name&&(rt["idb://".concat(k.name,"/").concat(Ge.name,"/").concat(et.name)]=new ya(-1/0,[[[]]]))}),rt["idb://".concat(k.name,"/").concat(Ge.name,"/")]=rt["idb://".concat(k.name,"/").concat(Ge.name,"/:dels")]=new ya(-1/0,[[[]]])}),ga(Vl).fire(rt),Xh(rt,!0)),k})}function pc(k){function I(ve){return k.next(ve)}var K=ue(I),ee=ue(function(ve){return k.throw(ve)});function ue(ve){return function(We){var Le=ve(We),We=Le.value;return Le.done?We:We&&typeof We.then=="function"?We.then(K,ee):s(We)?Promise.all(We).then(K,ee):K(We)}}return ue(I)()}function as(k,I,K){for(var ee=s(k)?k.slice():[k],ue=0;ue<K;++ue)ee.push(I);return ee}var Hw={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(k){return r(r({},k),{table:function(I){var K=k.table(I),ee=K.schema,ue={},ve=[];function je(qe,rt,Ge){var et=ra(qe),it=ue[et]=ue[et]||[],Xe=qe==null?0:typeof qe=="string"?1:qe.length,dt=0<rt,dt=r(r({},Ge),{name:dt?"".concat(et,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:dt,keyTail:rt,keyLength:Xe,extractKey:Kl(qe),unique:!dt&&Ge.unique});return it.push(dt),dt.isPrimaryKey||ve.push(dt),1<Xe&&je(Xe===2?qe[0]:qe.slice(0,Xe-1),rt+1,Ge),it.sort(function(yt,bt){return yt.keyTail-bt.keyTail}),dt}I=je(ee.primaryKey.keyPath,0,ee.primaryKey),ue[":id"]=[I];for(var Le=0,We=ee.indexes;Le<We.length;Le++){var Ye=We[Le];je(Ye.keyPath,0,Ye)}function tt(qe){var rt,Ge=qe.query.index;return Ge.isVirtual?r(r({},qe),{query:{index:Ge.lowLevelIndex,range:(rt=qe.query.range,Ge=Ge.keyTail,{type:rt.type===1?2:rt.type,lower:as(rt.lower,rt.lowerOpen?k.MAX_KEY:k.MIN_KEY,Ge),lowerOpen:!0,upper:as(rt.upper,rt.upperOpen?k.MIN_KEY:k.MAX_KEY,Ge),upperOpen:!0})}}):qe}return r(r({},K),{schema:r(r({},ee),{primaryKey:I,indexes:ve,getIndexByKeyPath:function(qe){return(qe=ue[ra(qe)])&&qe[0]}}),count:function(qe){return K.count(tt(qe))},query:function(qe){return K.query(tt(qe))},openCursor:function(qe){var rt=qe.query.index,Ge=rt.keyTail,et=rt.isVirtual,it=rt.keyLength;return et?K.openCursor(tt(qe)).then(function(dt){return dt&&Xe(dt)}):K.openCursor(qe);function Xe(dt){return Object.create(dt,{continue:{value:function(yt){yt!=null?dt.continue(as(yt,qe.reverse?k.MAX_KEY:k.MIN_KEY,Ge)):qe.unique?dt.continue(dt.key.slice(0,it).concat(qe.reverse?k.MIN_KEY:k.MAX_KEY,Ge)):dt.continue()}},continuePrimaryKey:{value:function(yt,bt){dt.continuePrimaryKey(as(yt,k.MAX_KEY,Ge),bt)}},primaryKey:{get:function(){return dt.primaryKey}},key:{get:function(){var yt=dt.key;return it===1?yt[0]:yt.slice(0,it)}},value:{get:function(){return dt.value}}})}}})}})}};function Bd(k,I,K,ee){return K=K||{},ee=ee||"",o(k).forEach(function(ue){var ve,je,Le;h(I,ue)?(ve=k[ue],je=I[ue],typeof ve=="object"&&typeof je=="object"&&ve&&je?(Le=te(ve))!==te(je)?K[ee+ue]=I[ue]:Le==="Object"?Bd(ve,je,K,ee+ue+"."):ve!==je&&(K[ee+ue]=I[ue]):ve!==je&&(K[ee+ue]=I[ue])):K[ee+ue]=void 0}),o(I).forEach(function(ue){h(k,ue)||(K[ee+ue]=I[ue])}),K}function zd(k,I){return I.type==="delete"?I.keys:I.keys||I.values.map(k.extractKey)}var ug={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(k){return r(r({},k),{table:function(I){var K=k.table(I),ee=K.schema.primaryKey;return r(r({},K),{mutate:function(ue){var ve=Ee.trans,je=ve.table(I).hook,Le=je.deleting,We=je.creating,Ye=je.updating;switch(ue.type){case"add":if(We.fire===Te)break;return ve._promise("readwrite",function(){return tt(ue)},!0);case"put":if(We.fire===Te&&Ye.fire===Te)break;return ve._promise("readwrite",function(){return tt(ue)},!0);case"delete":if(Le.fire===Te)break;return ve._promise("readwrite",function(){return tt(ue)},!0);case"deleteRange":if(Le.fire===Te)break;return ve._promise("readwrite",function(){return function qe(rt,Ge,et){return K.query({trans:rt,values:!1,query:{index:ee,range:Ge},limit:et}).then(function(it){var Xe=it.result;return tt({type:"delete",keys:Xe,trans:rt}).then(function(dt){return 0<dt.numFailures?Promise.reject(dt.failures[0]):Xe.length<et?{failures:[],numFailures:0,lastResult:void 0}:qe(rt,r(r({},Ge),{lower:Xe[Xe.length-1],lowerOpen:!0}),et)})})}(ue.trans,ue.range,1e4)},!0)}return K.mutate(ue);function tt(qe){var rt,Ge,et,it=Ee.trans,Xe=qe.keys||zd(ee,qe);if(!Xe)throw new Error("Keys missing");return(qe=qe.type==="add"||qe.type==="put"?r(r({},qe),{keys:Xe}):r({},qe)).type!=="delete"&&(qe.values=a([],qe.values)),qe.keys&&(qe.keys=a([],qe.keys)),rt=K,et=Xe,((Ge=qe).type==="add"?Promise.resolve([]):rt.getMany({trans:Ge.trans,keys:et,cache:"immutable"})).then(function(dt){var yt=Xe.map(function(bt,xt){var Ft,qt,Dt,Bt=dt[xt],Vt={onerror:null,onsuccess:null};return qe.type==="delete"?Le.fire.call(Vt,bt,Bt,it):qe.type==="add"||Bt===void 0?(Ft=We.fire.call(Vt,bt,qe.values[xt],it),bt==null&&Ft!=null&&(qe.keys[xt]=bt=Ft,ee.outbound||O(qe.values[xt],ee.keyPath,bt))):(Ft=Bd(Bt,qe.values[xt]),(qt=Ye.fire.call(Vt,Ft,bt,Bt,it))&&(Dt=qe.values[xt],Object.keys(qt).forEach(function(Mt){h(Dt,Mt)?Dt[Mt]=qt[Mt]:O(Dt,Mt,qt[Mt])}))),Vt});return K.mutate(qe).then(function(bt){for(var xt=bt.failures,Ft=bt.results,qt=bt.numFailures,bt=bt.lastResult,Dt=0;Dt<Xe.length;++Dt){var Bt=(Ft||Xe)[Dt],Vt=yt[Dt];Bt==null?Vt.onerror&&Vt.onerror(xt[Dt]):Vt.onsuccess&&Vt.onsuccess(qe.type==="put"&&dt[Dt]?qe.values[Dt]:Bt)}return{failures:xt,results:Ft,numFailures:qt,lastResult:bt}}).catch(function(bt){return yt.forEach(function(xt){return xt.onerror&&xt.onerror(bt)}),Promise.reject(bt)})})}}})}})}};function Jh(k,I,K){try{if(!I||I.keys.length<k.length)return null;for(var ee=[],ue=0,ve=0;ue<I.keys.length&&ve<k.length;++ue)Un(I.keys[ue],k[ve])===0&&(ee.push(K?Z(I.values[ue]):I.values[ue]),++ve);return ee.length===k.length?ee:null}catch{return null}}var cg={stack:"dbcore",level:-1,create:function(k){return{table:function(I){var K=k.table(I);return r(r({},K),{getMany:function(ee){if(!ee.cache)return K.getMany(ee);var ue=Jh(ee.keys,ee.trans._cache,ee.cache==="clone");return ue?D.resolve(ue):K.getMany(ee).then(function(ve){return ee.trans._cache={keys:ee.keys,values:ee.cache==="clone"?Z(ve):ve},ve})},mutate:function(ee){return ee.type!=="add"&&(ee.trans._cache=null),K.mutate(ee)}})}}}};function Ys(k,I){return k.trans.mode==="readonly"&&!!k.subscr&&!k.trans.explicit&&k.trans.db._options.cache!=="disabled"&&!I.schema.primaryKey.outbound}function dg(k,I){switch(k){case"query":return I.values&&!I.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Vw={stack:"dbcore",level:0,name:"Observability",create:function(k){var I=k.schema.name,K=new ya(k.MIN_KEY,k.MAX_KEY);return r(r({},k),{transaction:function(ee,ue,ve){if(Ee.subscr&&ue!=="readonly")throw new Re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ee.querier));return k.transaction(ee,ue,ve)},table:function(ee){var ue=k.table(ee),ve=ue.schema,je=ve.primaryKey,qe=ve.indexes,Le=je.extractKey,We=je.outbound,Ye=je.autoIncrement&&qe.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(je.keyPath)}),tt=r(r({},ue),{mutate:function(Ge){function et(Mt){return Mt="idb://".concat(I,"/").concat(ee,"/").concat(Mt),bt[Mt]||(bt[Mt]=new ya)}var it,Xe,dt,yt=Ge.trans,bt=Ge.mutatedParts||(Ge.mutatedParts={}),xt=et(""),Ft=et(":dels"),qt=Ge.type,Vt=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[zd(je,Ge).filter(function(Mt){return Mt}),Ge.values]:[],Dt=Vt[0],Bt=Vt[1],Vt=Ge.trans._cache;return s(Dt)?(xt.addKeys(Dt),(Vt=qt==="delete"||Dt.length===Bt.length?Jh(Dt,Vt):null)||Ft.addKeys(Dt),(Vt||Bt)&&(it=et,Xe=Vt,dt=Bt,ve.indexes.forEach(function(Mt){var Xt=it(Mt.name||"");function un(kn){return kn!=null?Mt.extractKey(kn):null}function fn(kn){return Mt.multiEntry&&s(kn)?kn.forEach(function(Ia){return Xt.addKey(Ia)}):Xt.addKey(kn)}(Xe||dt).forEach(function(kn,Yr){var bn=Xe&&un(Xe[Yr]),Yr=dt&&un(dt[Yr]);Un(bn,Yr)!==0&&(bn!=null&&fn(bn),Yr!=null&&fn(Yr))})}))):Dt?(Bt={from:(Bt=Dt.lower)!==null&&Bt!==void 0?Bt:k.MIN_KEY,to:(Bt=Dt.upper)!==null&&Bt!==void 0?Bt:k.MAX_KEY},Ft.add(Bt),xt.add(Bt)):(xt.add(K),Ft.add(K),ve.indexes.forEach(function(Mt){return et(Mt.name).add(K)})),ue.mutate(Ge).then(function(Mt){return!Dt||Ge.type!=="add"&&Ge.type!=="put"||(xt.addKeys(Mt.results),Ye&&Ye.forEach(function(Xt){for(var un=Ge.values.map(function(bn){return Xt.extractKey(bn)}),fn=Xt.keyPath.findIndex(function(bn){return bn===je.keyPath}),kn=0,Ia=Mt.results.length;kn<Ia;++kn)un[kn][fn]=Mt.results[kn];et(Xt.name).addKeys(un)})),yt.mutatedParts=Ld(yt.mutatedParts||{},bt),Mt})}}),qe=function(et){var it=et.query,et=it.index,it=it.range;return[et,new ya((et=it.lower)!==null&&et!==void 0?et:k.MIN_KEY,(it=it.upper)!==null&&it!==void 0?it:k.MAX_KEY)]},rt={get:function(Ge){return[je,new ya(Ge.key)]},getMany:function(Ge){return[je,new ya().addKeys(Ge.keys)]},count:qe,query:qe,openCursor:qe};return o(rt).forEach(function(Ge){tt[Ge]=function(et){var it=Ee.subscr,Xe=!!it,dt=Ys(Ee,ue)&&dg(Ge,et)?et.obsSet={}:it;if(Xe){var yt=function(Bt){return Bt="idb://".concat(I,"/").concat(ee,"/").concat(Bt),dt[Bt]||(dt[Bt]=new ya)},bt=yt(""),xt=yt(":dels"),it=rt[Ge](et),Xe=it[0],it=it[1];if((Ge==="query"&&Xe.isPrimaryKey&&!et.values?xt:yt(Xe.name||"")).add(it),!Xe.isPrimaryKey){if(Ge!=="count"){var Ft=Ge==="query"&&We&&et.values&&ue.query(r(r({},et),{values:!1}));return ue[Ge].apply(this,arguments).then(function(Bt){if(Ge==="query"){if(We&&et.values)return Ft.then(function(un){return un=un.result,bt.addKeys(un),Bt});var Vt=et.values?Bt.result.map(Le):Bt.result;(et.values?bt:xt).addKeys(Vt)}else if(Ge==="openCursor"){var Mt=Bt,Xt=et.values;return Mt&&Object.create(Mt,{key:{get:function(){return xt.addKey(Mt.primaryKey),Mt.key}},primaryKey:{get:function(){var un=Mt.primaryKey;return xt.addKey(un),un}},value:{get:function(){return Xt&&bt.addKey(Mt.primaryKey),Mt.value}}})}return Bt})}xt.add(K)}}return ue[Ge].apply(this,arguments)}}),tt}})}};function fg(k,I,K){if(K.numFailures===0)return I;if(I.type==="deleteRange")return null;var ee=I.keys?I.keys.length:"values"in I&&I.values?I.values.length:1;return K.numFailures===ee?null:(I=r({},I),s(I.keys)&&(I.keys=I.keys.filter(function(ue,ve){return!(ve in K.failures)})),"values"in I&&s(I.values)&&(I.values=I.values.filter(function(ue,ve){return!(ve in K.failures)})),I)}function Ud(k,I){return K=k,((ee=I).lower===void 0||(ee.lowerOpen?0<Un(K,ee.lower):0<=Un(K,ee.lower)))&&(k=k,(I=I).upper===void 0||(I.upperOpen?Un(k,I.upper)<0:Un(k,I.upper)<=0));var K,ee}function Qh(k,I,rt,ee,ue,ve){if(!rt||rt.length===0)return k;var je=I.query.index,Le=je.multiEntry,We=I.query.range,Ye=ee.schema.primaryKey.extractKey,tt=je.extractKey,qe=(je.lowLevelIndex||je).extractKey,rt=rt.reduce(function(Ge,et){var it=Ge,Xe=[];if(et.type==="add"||et.type==="put")for(var dt=new ya,yt=et.values.length-1;0<=yt;--yt){var bt,xt=et.values[yt],Ft=Ye(xt);dt.hasKey(Ft)||(bt=tt(xt),(Le&&s(bt)?bt.some(function(Mt){return Ud(Mt,We)}):Ud(bt,We))&&(dt.addKey(Ft),Xe.push(xt)))}switch(et.type){case"add":var qt=new ya().addKeys(I.values?Ge.map(function(Xt){return Ye(Xt)}):Ge),it=Ge.concat(I.values?Xe.filter(function(Xt){return Xt=Ye(Xt),!qt.hasKey(Xt)&&(qt.addKey(Xt),!0)}):Xe.map(function(Xt){return Ye(Xt)}).filter(function(Xt){return!qt.hasKey(Xt)&&(qt.addKey(Xt),!0)}));break;case"put":var Dt=new ya().addKeys(et.values.map(function(Xt){return Ye(Xt)}));it=Ge.filter(function(Xt){return!Dt.hasKey(I.values?Ye(Xt):Xt)}).concat(I.values?Xe:Xe.map(function(Xt){return Ye(Xt)}));break;case"delete":var Bt=new ya().addKeys(et.keys);it=Ge.filter(function(Xt){return!Bt.hasKey(I.values?Ye(Xt):Xt)});break;case"deleteRange":var Vt=et.range;it=Ge.filter(function(Xt){return!Ud(Ye(Xt),Vt)})}return it},k);return rt===k?k:(rt.sort(function(Ge,et){return Un(qe(Ge),qe(et))||Un(Ye(Ge),Ye(et))}),I.limit&&I.limit<1/0&&(rt.length>I.limit?rt.length=I.limit:k.length===I.limit&&rt.length<I.limit&&(ue.dirty=!0)),ve?Object.freeze(rt):rt)}function Yl(k,I){return Un(k.lower,I.lower)===0&&Un(k.upper,I.upper)===0&&!!k.lowerOpen==!!I.lowerOpen&&!!k.upperOpen==!!I.upperOpen}function mc(k,I){return function(K,ee,ue,ve){if(K===void 0)return ee!==void 0?-1:0;if(ee===void 0)return 1;if((ee=Un(K,ee))===0){if(ue&&ve)return 0;if(ue)return 1;if(ve)return-1}return ee}(k.lower,I.lower,k.lowerOpen,I.lowerOpen)<=0&&0<=function(K,ee,ue,ve){if(K===void 0)return ee!==void 0?1:0;if(ee===void 0)return-1;if((ee=Un(K,ee))===0){if(ue&&ve)return 0;if(ue)return-1;if(ve)return 1}return ee}(k.upper,I.upper,k.upperOpen,I.upperOpen)}function Gw(k,I,K,ee){k.subscribers.add(K),ee.addEventListener("abort",function(){var ue,ve;k.subscribers.delete(K),k.subscribers.size===0&&(ue=k,ve=I,setTimeout(function(){ue.subscribers.size===0&&Y(ve,ue)},3e3))})}var qd={stack:"dbcore",level:0,name:"Cache",create:function(k){var I=k.schema.name;return r(r({},k),{transaction:function(K,ee,ue){var ve,je,Le=k.transaction(K,ee,ue);return ee==="readwrite"&&(je=(ve=new AbortController).signal,ue=function(We){return function(){if(ve.abort(),ee==="readwrite"){for(var Ye=new Set,tt=0,qe=K;tt<qe.length;tt++){var rt=qe[tt],Ge=Zs["idb://".concat(I,"/").concat(rt)];if(Ge){var et=k.table(rt),it=Ge.optimisticOps.filter(function(Xt){return Xt.trans===Le});if(Le._explicit&&We&&Le.mutatedParts)for(var Xe=0,dt=Object.values(Ge.queries.query);Xe<dt.length;Xe++)for(var yt=0,bt=(qt=dt[Xe]).slice();yt<bt.length;yt++)Kh((Dt=bt[yt]).obsSet,Le.mutatedParts)&&(Y(qt,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)}));else if(0<it.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(Xt){return Xt.trans!==Le});for(var xt=0,Ft=Object.values(Ge.queries.query);xt<Ft.length;xt++)for(var qt,Dt,Bt,Vt=0,Mt=(qt=Ft[xt]).slice();Vt<Mt.length;Vt++)(Dt=Mt[Vt]).res!=null&&Le.mutatedParts&&(We&&!Dt.dirty?(Bt=Object.isFrozen(Dt.res),Bt=Qh(Dt.res,Dt.req,it,et,Dt,Bt),Dt.dirty?(Y(qt,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)})):Bt!==Dt.res&&(Dt.res=Bt,Dt.promise=D.resolve({result:Bt}))):(Dt.dirty&&Y(qt,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)})))}}}Ye.forEach(function(Xt){return Xt()})}}},Le.addEventListener("abort",ue(!1),{signal:je}),Le.addEventListener("error",ue(!1),{signal:je}),Le.addEventListener("complete",ue(!0),{signal:je})),Le},table:function(K){var ee=k.table(K),ue=ee.schema.primaryKey;return r(r({},ee),{mutate:function(ve){var je=Ee.trans;if(ue.outbound||je.db._options.cache==="disabled"||je.explicit||je.idbtrans.mode!=="readwrite")return ee.mutate(ve);var Le=Zs["idb://".concat(I,"/").concat(K)];return Le?(je=ee.mutate(ve),ve.type!=="add"&&ve.type!=="put"||!(50<=ve.values.length||zd(ue,ve).some(function(We){return We==null}))?(Le.optimisticOps.push(ve),ve.mutatedParts&&$d(ve.mutatedParts),je.then(function(We){0<We.numFailures&&(Y(Le.optimisticOps,ve),(We=fg(0,ve,We))&&Le.optimisticOps.push(We),ve.mutatedParts&&$d(ve.mutatedParts))}),je.catch(function(){Y(Le.optimisticOps,ve),ve.mutatedParts&&$d(ve.mutatedParts)})):je.then(function(We){var Ye=fg(0,r(r({},ve),{values:ve.values.map(function(tt,qe){var rt;return We.failures[qe]?tt:(tt=(rt=ue.keyPath)!==null&&rt!==void 0&&rt.includes(".")?Z(tt):r({},tt),O(tt,ue.keyPath,We.results[qe]),tt)})}),We);Le.optimisticOps.push(Ye),queueMicrotask(function(){return ve.mutatedParts&&$d(ve.mutatedParts)})}),je):ee.mutate(ve)},query:function(ve){if(!Ys(Ee,ee)||!dg("query",ve))return ee.query(ve);var je=((Ye=Ee.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",qe=Ee,Le=qe.requery,We=qe.signal,Ye=function(et,it,Xe,dt){var yt=Zs["idb://".concat(et,"/").concat(it)];if(!yt)return[];if(!(it=yt.queries[Xe]))return[null,!1,yt,null];var bt=it[(dt.query?dt.query.index.name:null)||""];if(!bt)return[null,!1,yt,null];switch(Xe){case"query":var xt=bt.find(function(Ft){return Ft.req.limit===dt.limit&&Ft.req.values===dt.values&&Yl(Ft.req.query.range,dt.query.range)});return xt?[xt,!0,yt,bt]:[bt.find(function(Ft){return("limit"in Ft.req?Ft.req.limit:1/0)>=dt.limit&&(!dt.values||Ft.req.values)&&mc(Ft.req.query.range,dt.query.range)}),!1,yt,bt];case"count":return xt=bt.find(function(Ft){return Yl(Ft.req.query.range,dt.query.range)}),[xt,!!xt,yt,bt]}}(I,K,"query",ve),tt=Ye[0],qe=Ye[1],rt=Ye[2],Ge=Ye[3];return tt&&qe?tt.obsSet=ve.obsSet:(qe=ee.query(ve).then(function(et){var it=et.result;if(tt&&(tt.res=it),je){for(var Xe=0,dt=it.length;Xe<dt;++Xe)Object.freeze(it[Xe]);Object.freeze(it)}else et.result=Z(it);return et}).catch(function(et){return Ge&&tt&&Y(Ge,tt),Promise.reject(et)}),tt={obsSet:ve.obsSet,promise:qe,subscribers:new Set,type:"query",req:ve,dirty:!1},Ge?Ge.push(tt):(Ge=[tt],(rt=rt||(Zs["idb://".concat(I,"/").concat(K)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ve.query.index.name||""]=Ge)),Gw(tt,Ge,Le,We),tt.promise.then(function(et){return{result:Qh(et.result,ve,rt==null?void 0:rt.optimisticOps,ee,tt,je)}})}})}})}};function gc(k,I){return new Proxy(k,{get:function(K,ee,ue){return ee==="db"?I:Reflect.get(K,ee,ue)}})}var eo=(Nr.prototype.version=function(k){if(isNaN(k)||k<.1)throw new Re.Type("Given version is not a positive number");if(k=Math.round(10*k)/10,this.idbdb||this._state.isBeingOpened)throw new Re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,k);var I=this._versions,K=I.filter(function(ee){return ee._cfg.version===k})[0];return K||(K=new this.Version(k),I.push(K),I.sort(Uh),K.stores({}),this._state.autoSchema=!1,K)},Nr.prototype._whenReady=function(k){var I=this;return this.idbdb&&(this._state.openComplete||Ee.letThrough||this._vip)?k():new D(function(K,ee){if(I._state.openComplete)return ee(new Re.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return void ee(new Re.DatabaseClosed);I.open().catch(Te)}I._state.dbReadyPromise.then(K,ee)}).then(k)},Nr.prototype.use=function(k){var I=k.stack,K=k.create,ee=k.level,ue=k.name;return ue&&this.unuse({stack:I,name:ue}),k=this._middlewares[I]||(this._middlewares[I]=[]),k.push({stack:I,create:K,level:ee??10,name:ue}),k.sort(function(ve,je){return ve.level-je.level}),this},Nr.prototype.unuse=function(k){var I=k.stack,K=k.name,ee=k.create;return I&&this._middlewares[I]&&(this._middlewares[I]=this._middlewares[I].filter(function(ue){return ee?ue.create!==ee:!!K&&ue.name!==K})),this},Nr.prototype.open=function(){var k=this;return Xo(be,function(){return qw(k)})},Nr.prototype._close=function(){var k=this._state,I=xo.indexOf(this);if(0<=I&&xo.splice(I,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}k.isBeingOpened||(k.dbReadyPromise=new D(function(K){k.dbReadyResolve=K}),k.openCanceller=new D(function(K,ee){k.cancelOpen=ee}))},Nr.prototype.close=function(K){var I=(K===void 0?{disableAutoOpen:!0}:K).disableAutoOpen,K=this._state;I?(K.isBeingOpened&&K.cancelOpen(new Re.DatabaseClosed),this._close(),K.autoOpen=!1,K.dbOpenError=new Re.DatabaseClosed):(this._close(),K.autoOpen=this._options.autoOpen||K.isBeingOpened,K.openComplete=!1,K.dbOpenError=null)},Nr.prototype.delete=function(k){var I=this;k===void 0&&(k={disableAutoOpen:!0});var K=0<arguments.length&&typeof arguments[0]!="object",ee=this._state;return new D(function(ue,ve){function je(){I.close(k);var Le=I._deps.indexedDB.deleteDatabase(I.name);Le.onsuccess=Ne(function(){var We,Ye,tt;We=I._deps,Ye=I.name,tt=We.indexedDB,We=We.IDBKeyRange,Pd(tt)||Ye===Bs||Hh(tt,We).delete(Ye).catch(Te),ue()}),Le.onerror=Oi(ve),Le.onblocked=I._fireOnBlocked}if(K)throw new Re.InvalidArgument("Invalid closeOptions argument to db.delete()");ee.isBeingOpened?ee.dbReadyPromise.then(je):je()})},Nr.prototype.backendDB=function(){return this.idbdb},Nr.prototype.isOpen=function(){return this.idbdb!==null},Nr.prototype.hasBeenClosed=function(){var k=this._state.dbOpenError;return k&&k.name==="DatabaseClosed"},Nr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Nr.prototype,"tables",{get:function(){var k=this;return o(this._allTables).map(function(I){return k._allTables[I]})},enumerable:!1,configurable:!0}),Nr.prototype.transaction=function(){var k=(function(I,K,ee){var ue=arguments.length;if(ue<2)throw new Re.InvalidArgument("Too few arguments");for(var ve=new Array(ue-1);--ue;)ve[ue-1]=arguments[ue];return ee=ve.pop(),[I,H(ve),ee]}).apply(this,arguments);return this._transaction.apply(this,k)},Nr.prototype._transaction=function(k,I,K){var ee=this,ue=Ee.trans;ue&&ue.db===this&&k.indexOf("!")===-1||(ue=null);var ve,je,Le=k.indexOf("?")!==-1;k=k.replace("!","").replace("?","");try{if(je=I.map(function(Ye){if(Ye=Ye instanceof ee.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),k=="r"||k===Ii)ve=Ii;else{if(k!="rw"&&k!=uc)throw new Re.InvalidArgument("Invalid transaction mode: "+k);ve=uc}if(ue){if(ue.mode===Ii&&ve===uc){if(!Le)throw new Re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ue=null}ue&&je.forEach(function(Ye){if(ue&&ue.storeNames.indexOf(Ye)===-1){if(!Le)throw new Re.SubTransaction("Table "+Ye+" not included in parent transaction.");ue=null}}),Le&&ue&&!ue.active&&(ue=null)}}catch(Ye){return ue?ue._promise(null,function(tt,qe){qe(Ye)}):$r(Ye)}var We=(function Ye(tt,qe,rt,Ge,et){return D.resolve().then(function(){var it=Ee.transless||Ee,Xe=tt._createTransaction(qe,rt,tt._dbSchema,Ge);if(Xe.explicit=!0,it={trans:Xe,transless:it},Ge)Xe.idbtrans=Ge.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(bt){return bt.name===Fe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,qe,rt,null,et)})):$r(bt)}var dt,yt=X(et);return yt&&En(),it=D.follow(function(){var bt;(dt=et.call(Xe,Xe))&&(yt?(bt=zn.bind(null,null),dt.then(bt,bt)):typeof dt.next=="function"&&typeof dt.throw=="function"&&(dt=pc(dt)))},it),(dt&&typeof dt.then=="function"?D.resolve(dt).then(function(bt){return Xe.active?bt:$r(new Re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):it.then(function(){return dt})).then(function(bt){return Ge&&Xe._resolve(),Xe._completion.then(function(){return bt})}).catch(function(bt){return Xe._reject(bt),$r(bt)})})}).bind(null,this,ve,je,ue,K);return ue?ue._promise(ve,We,"lock"):Ee.trans?Xo(Ee.transless,function(){return ee._whenReady(We)}):this._whenReady(We)},Nr.prototype.table=function(k){if(!h(this._allTables,k))throw new Re.InvalidTable("Table ".concat(k," does not exist"));return this._allTables[k]},Nr);function Nr(k,I){var K=this;this._middlewares={},this.verno=0;var ee=Nr.dependencies;this._options=I=r({addons:Nr.addons,autoOpen:!0,indexedDB:ee.indexedDB,IDBKeyRange:ee.IDBKeyRange,cache:"cloned"},I),this._deps={indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange},ee=I.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ue,ve,je,Le,We,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Te,dbReadyPromise:null,cancelOpen:Te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:I.autoOpen};Ye.dbReadyPromise=new D(function(qe){Ye.dbReadyResolve=qe}),Ye.openCanceller=new D(function(qe,rt){Ye.cancelOpen=rt}),this._state=Ye,this.name=k,this.on=ns(this,"populate","blocked","versionchange","close",{ready:[xe,Te]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(qe){return function(rt,Ge){Nr.vip(function(){var et,it=K._state;it.openComplete?(it.dbOpenError||D.resolve().then(rt),Ge&&qe(rt)):it.onReadyBeingFired?(it.onReadyBeingFired.push(rt),Ge&&qe(rt)):(qe(rt),et=K,Ge||qe(function Xe(){et.on.ready.unsubscribe(rt),et.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(ue=this,$l(ql.prototype,function(dt,Xe){this.db=ue;var Ge=zs,et=null;if(Xe)try{Ge=Xe()}catch(yt){et=yt}var it=dt._ctx,Xe=it.table,dt=Xe.hook.reading.fire;this._ctx={table:Xe,index:it.index,isPrimKey:!it.index||Xe.schema.primKey.keyPath&&it.index===Xe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:et,or:it.or,valueMapper:dt!==Ce?dt:null}})),this.Table=(ve=this,$l(Ph.prototype,function(qe,rt,Ge){this.db=ve,this._tx=Ge,this.name=qe,this.schema=rt,this.hook=ve._allTables[qe]?ve._allTables[qe].hook:ns(null,{creating:[Ae,Te],reading:[B,Ce],updating:[se,Te],deleting:[ce,Te]})})),this.Transaction=(je=this,$l(zh.prototype,function(qe,rt,Ge,et,it){var Xe=this;this.db=je,this.mode=qe,this.storeNames=rt,this.schema=Ge,this.chromeTransactionDurability=et,this.idbtrans=null,this.on=ns(this,"complete","error","abort"),this.parent=it||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new D(function(dt,yt){Xe._resolve=dt,Xe._reject=yt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(dt){var yt=Xe.active;return Xe.active=!1,Xe.on.error.fire(dt),Xe.parent?Xe.parent._reject(dt):yt&&Xe.idbtrans&&Xe.idbtrans.abort(),$r(dt)})})),this.Version=(Le=this,$l(Uw.prototype,function(qe){this.db=Le,this._cfg={version:qe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,$l(Hs.prototype,function(qe,rt,Ge){if(this.db=We,this._ctx={table:qe,index:rt===":id"?null:rt,or:Ge},this._cmp=this._ascending=Un,this._descending=function(et,it){return Un(it,et)},this._max=function(et,it){return 0<Un(et,it)?et:it},this._min=function(et,it){return Un(et,it)<0?et:it},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Re.MissingAPI})),this.on("versionchange",function(qe){0<qe.newVersion?console.warn("Another connection wants to upgrade database '".concat(K.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(K.name,"'. Closing db now to resume the delete request.")),K.close({disableAutoOpen:!1})}),this.on("blocked",function(qe){!qe.newVersion||qe.newVersion<qe.oldVersion?console.warn("Dexie.delete('".concat(K.name,"') was blocked")):console.warn("Upgrade '".concat(K.name,"' blocked by other connection holding version ").concat(qe.oldVersion/10))}),this._maxKey=Wl(I.IDBKeyRange),this._createTransaction=function(qe,rt,Ge,et){return new K.Transaction(qe,rt,Ge,K._options.chromeTransactionDurability,et)},this._fireOnBlocked=function(qe){K.on("blocked").fire(qe),xo.filter(function(rt){return rt.name===K.name&&rt!==K&&!rt._state.vcFired}).map(function(rt){return rt.on("versionchange").fire(qe)})},this.use(cg),this.use(qd),this.use(Vw),this.use(Hw),this.use(ug);var tt=new Proxy(this,{get:function(qe,rt,Ge){if(rt==="_vip")return!0;if(rt==="table")return function(it){return gc(K.table(it),tt)};var et=Reflect.get(qe,rt,Ge);return et instanceof Ph?gc(et,tt):rt==="tables"?et.map(function(it){return gc(it,tt)}):rt==="_createTransaction"?function(){return gc(et.apply(this,arguments),tt)}:et}});this.vip=tt,ee.forEach(function(qe){return qe(K)})}var Xl,ai=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",hg=(Hd.prototype.subscribe=function(k,I,K){return this._subscribe(k&&typeof k!="function"?k:{next:k,error:I,complete:K})},Hd.prototype[ai]=function(){return this},Hd);function Hd(k){this._subscribe=k}try{Xl={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Xl={indexedDB:null,IDBKeyRange:null}}function pg(k){var I,K=!1,ee=new hg(function(ue){var ve=X(k),je,Le=!1,We={},Ye={},tt={get closed(){return Le},unsubscribe:function(){Le||(Le=!0,je&&je.abort(),qe&&ga.storagemutated.unsubscribe(Ge))}};ue.start&&ue.start(tt);var qe=!1,rt=function(){return Qo(et)},Ge=function(it){Ld(We,it),Kh(Ye,We)&&rt()},et=function(){var it,Xe,dt;!Le&&Xl.indexedDB&&(We={},it={},je&&je.abort(),je=new AbortController,dt=function(yt){var bt=U();try{ve&&En();var xt=Zt(k,yt);return xt=ve?xt.finally(zn):xt}finally{bt&&$()}}(Xe={subscr:it,signal:je.signal,requery:rt,querier:k,trans:null}),Promise.resolve(dt).then(function(yt){K=!0,I=yt,Le||Xe.signal.aborted||(We={},function(bt){for(var xt in bt)if(h(bt,xt))return;return 1}(Ye=it)||qe||(ga(Vl,Ge),qe=!0),Qo(function(){return!Le&&ue.next&&ue.next(yt)}))},function(yt){K=!1,["DatabaseClosedError","AbortError"].includes(yt==null?void 0:yt.name)||Le||Qo(function(){Le||ue.error&&ue.error(yt)})}))};return setTimeout(rt,0),tt});return ee.hasValue=function(){return K},ee.getValue=function(){return I},ee}var Xs=eo;function ep(k){var I=is;try{is=!0,ga.storagemutated.fire(k),Xh(k,!0)}finally{is=I}}m(Xs,r(r({},He),{delete:function(k){return new Xs(k,{addons:[]}).delete()},exists:function(k){return new Xs(k,{addons:[]}).open().then(function(I){return I.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(k){try{return I=Xs.dependencies,K=I.indexedDB,I=I.IDBKeyRange,(Pd(K)?Promise.resolve(K.databases()).then(function(ee){return ee.map(function(ue){return ue.name}).filter(function(ue){return ue!==Bs})}):Hh(K,I).toCollection().primaryKeys()).then(k)}catch{return $r(new Re.MissingAPI)}var I,K},defineClass:function(){return function(k){u(this,k)}},ignoreTransaction:function(k){return Ee.trans?Xo(Ee.transless,k):k()},vip:Vh,async:function(k){return function(){try{var I=pc(k.apply(this,arguments));return I&&typeof I.then=="function"?I:D.resolve(I)}catch(K){return $r(K)}}},spawn:function(k,I,K){try{var ee=pc(k.apply(K,I||[]));return ee&&typeof ee.then=="function"?ee:D.resolve(ee)}catch(ue){return $r(ue)}},currentTransaction:{get:function(){return Ee.trans||null}},waitFor:function(k,I){return I=D.resolve(typeof k=="function"?Xs.ignoreTransaction(k):k).timeout(I||6e4),Ee.trans?Ee.trans.waitFor(I):I},Promise:D,debug:{get:function(){return Pe},set:function(k){Se(k)}},derive:w,extend:u,props:m,override:E,Events:ns,on:ga,liveQuery:pg,extendObservabilitySet:Ld,getByKeyPath:j,setByKeyPath:O,delByKeyPath:function(k,I){typeof I=="string"?O(k,I,void 0):"length"in I&&[].map.call(I,function(K){O(k,K,void 0)})},shallowClone:N,deepClone:Z,getObjectDiff:Bd,cmp:Un,asap:A,minKey:-1/0,addons:[],connections:xo,errnames:Fe,dependencies:Xl,cache:Zs,semVer:"4.0.11",version:"4.0.11".split(".").map(function(k){return parseInt(k)}).reduce(function(k,I,K){return k+I/Math.pow(10,2*K)})})),Xs.maxKey=Wl(Xs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ga(Vl,function(k){is||(k=new CustomEvent(Gs,{detail:k}),is=!0,dispatchEvent(k),is=!1)}),addEventListener(Gs,function(k){k=k.detail,is||ep(k)}));var Jl,is=!1,Ba=function(){};return typeof BroadcastChannel<"u"&&((Ba=function(){(Jl=new BroadcastChannel(Gs)).onmessage=function(k){return k.data&&ep(k.data)}})(),typeof Jl.unref=="function"&&Jl.unref(),ga(Vl,function(k){is||Jl.postMessage(k)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(k){if(!eo.disableBfCache&&k.persisted){Pe&&console.debug("Dexie: handling persisted pagehide"),Jl!=null&&Jl.close();for(var I=0,K=xo;I<K.length;I++)K[I].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(k){!eo.disableBfCache&&k.persisted&&(Pe&&console.debug("Dexie: handling persisted pageshow"),Ba(),ep({all:new ya(-1/0,[[]])}))})),D.rejectionMapper=function(k,I){return!k||k instanceof ye||k instanceof TypeError||k instanceof SyntaxError||!k.name||!ze[k.name]?k:(I=new ze[k.name](I||k.message,k),"stack"in k&&v(I,"stack",{get:function(){return this.inner.stack}}),I)},Se(Pe),r(eo,Object.freeze({__proto__:null,Dexie:eo,liveQuery:pg,Entity:kd,cmp:Un,PropModification:Ul,replacePrefix:function(k,I){return new Ul({replacePrefix:[k,I]})},add:function(k){return new Ul({add:k})},remove:function(k){return new Ul({remove:k})},default:eo,RangeSet:ya,mergeRanges:Ks,rangesOverlap:og}),{default:eo}),eo})}(Vy)),Vy.exports}var D7=j7();const XS=Qa(D7),U3=Symbol.for("Dexie"),ob=globalThis[U3]||(globalThis[U3]=XS);if(XS.semVer!==ob.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${XS.semVer} and ${ob.semVer}`);const{liveQuery:G0e,mergeRanges:W0e,rangesOverlap:K0e,RangeSet:Z0e,cmp:Y0e,Entity:X0e,PropModification:J0e,replacePrefix:Q0e,add:ege,remove:tge}=ob;class M7 extends ob{constructor(){super("LiteChatDatabase_Rewrite_v1");Ua(this,"conversations");Ua(this,"interactions");Ua(this,"mods");Ua(this,"appState");Ua(this,"providerConfigs");Ua(this,"apiKeys");Ua(this,"syncRepos");Ua(this,"projects");this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const sn=new M7,Ic=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class Ht{static async loadConversations(){try{return(await sn.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Ic(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await sn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await sn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await sn.interactions.where({conversationId:t}).sortBy("index")).map(r=>Ic(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await sn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await sn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await sn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await sn.mods.orderBy("loadOrder").toArray()).map(n=>Ic(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await sn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await sn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await sn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await sn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=sn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Ic(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await sn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await sn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=sn.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Ic(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await sn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await sn.transaction("rw",[sn.apiKeys,sn.providerConfigs],async()=>{const n=await sn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await sn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await sn.syncRepos.toArray()).map(n=>Ic(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await sn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await sn.transaction("rw",[sn.syncRepos,sn.conversations],async()=>{const n=await sn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await sn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await sn.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Ic(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await sn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await sn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await sn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>sn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await sn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await sn.transaction("rw",[sn.projects,sn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await sn.transaction("rw",[sn.conversations,sn.interactions,sn.mods,sn.appState,sn.providerConfigs,sn.apiKeys,sn.syncRepos,sn.projects],async()=>{await sn.interactions.clear(),await sn.conversations.clear(),await sn.projects.clear(),await sn.mods.clear(),await sn.appState.clear(),await sn.providerConfigs.clear(),await sn.apiKeys.clear(),await sn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const Qn=Ds(Ms((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n});try{const r=await Ht.loadInteractionsForConversation(n);r.sort((a,i)=>a.index-i.index),e({interactions:r,status:"idle"})}catch(r){console.error("InteractionStore: Error loading interactions",r),e({error:"Failed load interactions",status:"error"})}},_addInteractionToState:n=>{const r=t().interactions;if(r.some(a=>a.id===n.id))console.warn(`InteractionStore: Interaction ${n.id} already exists in state.`);else{const a=[...r,n];a.sort((i,o)=>i.index-o.index),e({interactions:a})}},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&(s.toolResults=[...r.metadata.toolResults])),Object.assign(o,{...r,metadata:void 0}),o.metadata=s}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)?a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r:console.warn(`InteractionStore: Tried to append chunk to non-streaming interaction buffer ${n}.`)})},_removeInteractionFromState:n=>{const a=t().interactions.filter(i=>i.id!==n);e({interactions:a})},addInteractionAndPersist:async n=>{const a=t().interactions.filter(u=>u.conversationId===n.conversationId),i=a.reduce((u,c)=>Math.max(u,c.index),-1)+1,o=a.length>0?a[a.length-1].id:null,s={...n,index:i,parentId:o};t()._addInteractionToState(s);try{return await Ht.saveInteraction(s),s}catch(u){throw console.error("InteractionStore: Error persisting added interaction",u),t()._removeInteractionFromState(s.id),e({error:"Failed to save interaction"}),u}},updateInteractionAndPersist:async n=>{try{await Ht.saveInteraction({...n})}catch(r){throw console.error(`InteractionStore: Error persisting final update for ${n.id}`,r),e({error:"Failed to save final interaction state"}),r}},deleteInteraction:async n=>{const r=t().interactions.find(i=>i.id===n);if(!r)return;const a={...r};t()._removeInteractionFromState(n),t()._removeStreamingId(n);try{await Ht.deleteInteraction(n)}catch(i){throw console.error("InteractionStore: Error deleting interaction",i),t()._addInteractionToState(a),a.status==="STREAMING"&&t()._addStreamingId(n),e({error:"Failed to delete interaction"}),i}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions."),e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null})},setError:n=>{e(r=>{r.error=n,n?r.status="error":r.status==="error"&&(r.status=r.streamingInteractionIds.length>0?"streaming":"idle")})},setStatus:n=>{t().status!==n&&e({status:n})},_addStreamingId:n=>{e(r=>{r.streamingInteractionIds.includes(n)||(r.streamingInteractionIds.push(n),r.activeStreamBuffers[n]="",r.streamingInteractionIds.length===1&&(r.status="streaming"),r.error=null)})},_removeStreamingId:n=>{e(r=>{const a=r.streamingInteractionIds.indexOf(n);a!==-1&&(r.streamingInteractionIds.splice(a,1),delete r.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),r.streamingInteractionIds.length===0&&r.status==="streaming"&&(r.status=r.error?"error":"idle"))})}}))),Ka=Ds(Ms(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})}}))),sm=Ds(Ms(e=>({attachedFilesMetadata:[],enabledTools:new Set,addAttachedFile:t=>{e(n=>{if(n.attachedFilesMetadata.some(a=>a.source==="direct"&&t.source==="direct"?a.name===t.name:a.source==="vfs"&&t.source==="vfs"?a.path===t.path:!1))console.warn(`InputStore: File "${t.name}" (source: ${t.source}) already attached. Skipping.`);else{const a={id:crypto.randomUUID(),...t};n.attachedFilesMetadata.push(a)}})},removeAttachedFile:t=>{e(n=>{n.attachedFilesMetadata=n.attachedFilesMetadata.filter(r=>r.id!==t)})},clearAttachedFiles:()=>{e({attachedFilesMetadata:[],enabledTools:new Set})},setEnabledTools:t=>{e(n=>{n.enabledTools=t(n.enabledTools)})}}))),P7="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let jo=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=P7[n[e]&63];return t};function F7(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ei=F7();var x6="vercel.ai.error",L7=Symbol.for(x6),S6,$7=class E6 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[S6]=!0,this.name=t,this.cause=r}static isInstance(t){return E6.hasMarker(t,x6)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};S6=L7;var Sn=$7,k6="AI_APICallError",C6=`vercel.ai.error.${k6}`,B7=Symbol.for(C6),A6,ha=class extends Sn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:k6,message:t,cause:s}),this[A6]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Sn.hasMarker(t,C6)}};A6=B7;var T6="AI_EmptyResponseBodyError",R6=`vercel.ai.error.${T6}`,z7=Symbol.for(R6),N6,pE=class extends Sn{constructor({message:t="Empty response body"}={}){super({name:T6,message:t}),this[N6]=!0}static isInstance(t){return Sn.hasMarker(t,R6)}};N6=z7;function s0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var I6="AI_InvalidArgumentError",O6=`vercel.ai.error.${I6}`,U7=Symbol.for(O6),j6,mE=class extends Sn{constructor({message:t,cause:n,argument:r}){super({name:I6,message:t,cause:n}),this[j6]=!0,this.argument=r}static isInstance(t){return Sn.hasMarker(t,O6)}};j6=U7;var D6="AI_InvalidPromptError",M6=`vercel.ai.error.${D6}`,q7=Symbol.for(M6),P6,pl=class extends Sn{constructor({prompt:t,message:n,cause:r}){super({name:D6,message:`Invalid prompt: ${n}`,cause:r}),this[P6]=!0,this.prompt=t}static isInstance(t){return Sn.hasMarker(t,M6)}};P6=q7;var F6="AI_InvalidResponseDataError",L6=`vercel.ai.error.${F6}`,H7=Symbol.for(L6),$6,If=class extends Sn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:F6,message:n}),this[$6]=!0,this.data=t}static isInstance(t){return Sn.hasMarker(t,L6)}};$6=H7;var B6="AI_JSONParseError",z6=`vercel.ai.error.${B6}`,V7=Symbol.for(z6),U6,Ou=class extends Sn{constructor({text:t,cause:n}){super({name:B6,message:`JSON parsing failed: Text: ${t}.
Error message: ${s0(n)}`,cause:n}),this[U6]=!0,this.text=t}static isInstance(t){return Sn.hasMarker(t,z6)}};U6=V7;var q6="AI_LoadAPIKeyError",H6=`vercel.ai.error.${q6}`,G7=Symbol.for(H6),V6,hy=class extends Sn{constructor({message:t}){super({name:q6,message:t}),this[V6]=!0}static isInstance(t){return Sn.hasMarker(t,H6)}};V6=G7;var G6="AI_TooManyEmbeddingValuesForCallError",W6=`vercel.ai.error.${G6}`,W7=Symbol.for(W6),K6,gE=class extends Sn{constructor(t){super({name:G6,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[K6]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Sn.hasMarker(t,W6)}};K6=W7;var Z6="AI_TypeValidationError",Y6=`vercel.ai.error.${Z6}`,K7=Symbol.for(Y6),X6,Z7=class JS extends Sn{constructor({value:t,cause:n}){super({name:Z6,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${s0(n)}`,cause:n}),this[X6]=!0,this.value=t}static isInstance(t){return Sn.hasMarker(t,Y6)}static wrap({value:t,cause:n}){return JS.isInstance(n)&&n.value===t?n:new JS({value:t,cause:n})}};X6=K7;var ju=Z7,J6="AI_UnsupportedFunctionalityError",Q6=`vercel.ai.error.${J6}`,Y7=Symbol.for(Q6),eO,br=class extends Sn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:J6,message:n}),this[eO]=!0,this.functionality=t}static isInstance(t){return Sn.hasMarker(t,Q6)}};eO=Y7;let X7=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var yE={},wv={};wv.byteLength=eU;wv.toByteArray=nU;wv.fromByteArray=iU;var bs=[],co=[],J7=typeof Uint8Array<"u"?Uint8Array:Array,L_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var gf=0,Q7=L_.length;gf<Q7;++gf)bs[gf]=L_[gf],co[L_.charCodeAt(gf)]=gf;co[45]=62;co[95]=63;function tO(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function eU(e){var t=tO(e),n=t[0],r=t[1];return(n+r)*3/4-r}function tU(e,t,n){return(t+n)*3/4-n}function nU(e){var t,n=tO(e),r=n[0],a=n[1],i=new J7(tU(e,r,a)),o=0,s=a>0?r-4:r,u;for(u=0;u<s;u+=4)t=co[e.charCodeAt(u)]<<18|co[e.charCodeAt(u+1)]<<12|co[e.charCodeAt(u+2)]<<6|co[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=co[e.charCodeAt(u)]<<2|co[e.charCodeAt(u+1)]>>4,i[o++]=t&255),a===1&&(t=co[e.charCodeAt(u)]<<10|co[e.charCodeAt(u+1)]<<4|co[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function rU(e){return bs[e>>18&63]+bs[e>>12&63]+bs[e>>6&63]+bs[e&63]}function aU(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(rU(r));return a.join("")}function iU(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(aU(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(bs[t>>2]+bs[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(bs[t>>10]+bs[t>>4&63]+bs[t<<2&63]+"=")),a.join("")}var bE={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */bE.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,u=(1<<s)-1,c=u>>1,f=-7,h=n?a-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-f)-1,g>>=-f,f+=s;f>0;i=i*256+e[t+h],h+=m,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+h],h+=m,f-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};bE.write=function(e,t,n,r,a,i){var o,s,u,c=i*8-a-1,f=(1<<c)-1,h=f>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=m/u:t+=m*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=v,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+g]=o&255,g+=v,o/=256,c-=8);e[n+g-v]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=wv,n=bE,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;f.TYPED_ARRAY_SUPPORT=u(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const pe=new i(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,i.prototype),Object.setPrototypeOf(pe,R),pe.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(pe){if(pe>a)throw new RangeError('The value "'+pe+'" is invalid for option "size"');const R=new i(pe);return Object.setPrototypeOf(R,f.prototype),R}function f(pe,R,q){if(typeof pe=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(pe)}return h(pe,R,q)}f.poolSize=8192;function h(pe,R,q){if(typeof pe=="string")return w(pe,R);if(o.isView(pe))return x(pe);if(pe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(at(pe,o)||pe&&at(pe.buffer,o)||typeof s<"u"&&(at(pe,s)||pe&&at(pe.buffer,s)))return S(pe,R,q);if(typeof pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const de=pe.valueOf&&pe.valueOf();if(de!=null&&de!==pe)return f.from(de,R,q);const Ie=E(pe);if(Ie)return Ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof pe[Symbol.toPrimitive]=="function")return f.from(pe[Symbol.toPrimitive]("string"),R,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}f.from=function(pe,R,q){return h(pe,R,q)},Object.setPrototypeOf(f.prototype,i.prototype),Object.setPrototypeOf(f,i);function m(pe){if(typeof pe!="number")throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function g(pe,R,q){return m(pe),pe<=0?c(pe):R!==void 0?typeof q=="string"?c(pe).fill(R,q):c(pe).fill(R):c(pe)}f.alloc=function(pe,R,q){return g(pe,R,q)};function v(pe){return m(pe),c(pe<0?0:C(pe)|0)}f.allocUnsafe=function(pe){return v(pe)},f.allocUnsafeSlow=function(pe){return v(pe)};function w(pe,R){if((typeof R!="string"||R==="")&&(R="utf8"),!f.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const q=j(pe,R)|0;let de=c(q);const Ie=de.write(pe,R);return Ie!==q&&(de=de.slice(0,Ie)),de}function _(pe){const R=pe.length<0?0:C(pe.length)|0,q=c(R);for(let de=0;de<R;de+=1)q[de]=pe[de]&255;return q}function x(pe){if(at(pe,i)){const R=new i(pe);return S(R.buffer,R.byteOffset,R.byteLength)}return _(pe)}function S(pe,R,q){if(R<0||pe.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<R+(q||0))throw new RangeError('"length" is outside of buffer bounds');let de;return R===void 0&&q===void 0?de=new i(pe):q===void 0?de=new i(pe,R):de=new i(pe,R,q),Object.setPrototypeOf(de,f.prototype),de}function E(pe){if(f.isBuffer(pe)){const R=C(pe.length)|0,q=c(R);return q.length===0||pe.copy(q,0,0,R),q}if(pe.length!==void 0)return typeof pe.length!="number"||_t(pe.length)?c(0):_(pe);if(pe.type==="Buffer"&&Array.isArray(pe.data))return _(pe.data)}function C(pe){if(pe>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return pe|0}function A(pe){return+pe!=pe&&(pe=0),f.alloc(+pe)}f.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==f.prototype},f.compare=function(R,q){if(at(R,i)&&(R=f.from(R,R.offset,R.byteLength)),at(q,i)&&(q=f.from(q,q.offset,q.byteLength)),!f.isBuffer(R)||!f.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===q)return 0;let de=R.length,Ie=q.length;for(let be=0,Ee=Math.min(de,Ie);be<Ee;++be)if(R[be]!==q[be]){de=R[be],Ie=q[be];break}return de<Ie?-1:Ie<de?1:0},f.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(R,q){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return f.alloc(0);let de;if(q===void 0)for(q=0,de=0;de<R.length;++de)q+=R[de].length;const Ie=f.allocUnsafe(q);let be=0;for(de=0;de<R.length;++de){let Ee=R[de];if(at(Ee,i))be+Ee.length>Ie.length?(f.isBuffer(Ee)||(Ee=f.from(Ee)),Ee.copy(Ie,be)):i.prototype.set.call(Ie,Ee,be);else if(f.isBuffer(Ee))Ee.copy(Ie,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Ee.length}return Ie};function j(pe,R){if(f.isBuffer(pe))return pe.length;if(o.isView(pe)||at(pe,o))return pe.byteLength;if(typeof pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);const q=pe.length,de=arguments.length>2&&arguments[2]===!0;if(!de&&q===0)return 0;let Ie=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return xe(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return Ze(pe).length;default:if(Ie)return de?-1:xe(pe).length;R=(""+R).toLowerCase(),Ie=!0}}f.byteLength=j;function O(pe,R,q){let de=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,R>>>=0,q<=R))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return oe(this,R,q);case"utf8":case"utf-8":return re(this,R,q);case"ascii":return G(this,R,q);case"latin1":case"binary":return X(this,R,q);case"base64":return ae(this,R,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,R,q);default:if(de)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),de=!0}}f.prototype._isBuffer=!0;function N(pe,R,q){const de=pe[R];pe[R]=pe[q],pe[q]=de}f.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<R;q+=2)N(this,q,q+1);return this},f.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<R;q+=4)N(this,q,q+3),N(this,q+1,q+2);return this},f.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<R;q+=8)N(this,q,q+7),N(this,q+1,q+6),N(this,q+2,q+5),N(this,q+3,q+4);return this},f.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?re(this,0,R):O.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(R){if(!f.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:f.compare(this,R)===0},f.prototype.inspect=function(){let R="";const q=e.INSPECT_MAX_BYTES;return R=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(R+=" ... "),"<Buffer "+R+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(R,q,de,Ie,be){if(at(R,i)&&(R=f.from(R,R.offset,R.byteLength)),!f.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(q===void 0&&(q=0),de===void 0&&(de=R?R.length:0),Ie===void 0&&(Ie=0),be===void 0&&(be=this.length),q<0||de>R.length||Ie<0||be>this.length)throw new RangeError("out of range index");if(Ie>=be&&q>=de)return 0;if(Ie>=be)return-1;if(q>=de)return 1;if(q>>>=0,de>>>=0,Ie>>>=0,be>>>=0,this===R)return 0;let Ee=be-Ie,le=de-q;const ft=Math.min(Ee,le),vt=this.slice(Ie,be),D=R.slice(q,de);for(let $e=0;$e<ft;++$e)if(vt[$e]!==D[$e]){Ee=vt[$e],le=D[$e];break}return Ee<le?-1:le<Ee?1:0};function z(pe,R,q,de,Ie){if(pe.length===0)return-1;if(typeof q=="string"?(de=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,_t(q)&&(q=Ie?0:pe.length-1),q<0&&(q=pe.length+q),q>=pe.length){if(Ie)return-1;q=pe.length-1}else if(q<0)if(Ie)q=0;else return-1;if(typeof R=="string"&&(R=f.from(R,de)),f.isBuffer(R))return R.length===0?-1:H(pe,R,q,de,Ie);if(typeof R=="number")return R=R&255,typeof i.prototype.indexOf=="function"?Ie?i.prototype.indexOf.call(pe,R,q):i.prototype.lastIndexOf.call(pe,R,q):H(pe,[R],q,de,Ie);throw new TypeError("val must be string, number or Buffer")}function H(pe,R,q,de,Ie){let be=1,Ee=pe.length,le=R.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(pe.length<2||R.length<2)return-1;be=2,Ee/=2,le/=2,q/=2}function ft(D,$e){return be===1?D[$e]:D.readUInt16BE($e*be)}let vt;if(Ie){let D=-1;for(vt=q;vt<Ee;vt++)if(ft(pe,vt)===ft(R,D===-1?0:vt-D)){if(D===-1&&(D=vt),vt-D+1===le)return D*be}else D!==-1&&(vt-=vt-D),D=-1}else for(q+le>Ee&&(q=Ee-le),vt=q;vt>=0;vt--){let D=!0;for(let $e=0;$e<le;$e++)if(ft(pe,vt+$e)!==ft(R,$e)){D=!1;break}if(D)return vt}return-1}f.prototype.includes=function(R,q,de){return this.indexOf(R,q,de)!==-1},f.prototype.indexOf=function(R,q,de){return z(this,R,q,de,!0)},f.prototype.lastIndexOf=function(R,q,de){return z(this,R,q,de,!1)};function Q(pe,R,q,de){q=Number(q)||0;const Ie=pe.length-q;de?(de=Number(de),de>Ie&&(de=Ie)):de=Ie;const be=R.length;de>be/2&&(de=be/2);let Ee;for(Ee=0;Ee<de;++Ee){const le=parseInt(R.substr(Ee*2,2),16);if(_t(le))return Ee;pe[q+Ee]=le}return Ee}function P(pe,R,q,de){return Et(xe(R,pe.length-q),pe,q,de)}function Z(pe,R,q,de){return Et(Pe(R),pe,q,de)}function V(pe,R,q,de){return Et(Ze(R),pe,q,de)}function te(pe,R,q,de){return Et(Se(R,pe.length-q),pe,q,de)}f.prototype.write=function(R,q,de,Ie){if(q===void 0)Ie="utf8",de=this.length,q=0;else if(de===void 0&&typeof q=="string")Ie=q,de=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(de)?(de=de>>>0,Ie===void 0&&(Ie="utf8")):(Ie=de,de=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-q;if((de===void 0||de>be)&&(de=be),R.length>0&&(de<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");let Ee=!1;for(;;)switch(Ie){case"hex":return Q(this,R,q,de);case"utf8":case"utf-8":return P(this,R,q,de);case"ascii":case"latin1":case"binary":return Z(this,R,q,de);case"base64":return V(this,R,q,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,R,q,de);default:if(Ee)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),Ee=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(pe,R,q){return R===0&&q===pe.length?t.fromByteArray(pe):t.fromByteArray(pe.slice(R,q))}function re(pe,R,q){q=Math.min(pe.length,q);const de=[];let Ie=R;for(;Ie<q;){const be=pe[Ie];let Ee=null,le=be>239?4:be>223?3:be>191?2:1;if(Ie+le<=q){let ft,vt,D,$e;switch(le){case 1:be<128&&(Ee=be);break;case 2:ft=pe[Ie+1],(ft&192)===128&&($e=(be&31)<<6|ft&63,$e>127&&(Ee=$e));break;case 3:ft=pe[Ie+1],vt=pe[Ie+2],(ft&192)===128&&(vt&192)===128&&($e=(be&15)<<12|(ft&63)<<6|vt&63,$e>2047&&($e<55296||$e>57343)&&(Ee=$e));break;case 4:ft=pe[Ie+1],vt=pe[Ie+2],D=pe[Ie+3],(ft&192)===128&&(vt&192)===128&&(D&192)===128&&($e=(be&15)<<18|(ft&63)<<12|(vt&63)<<6|D&63,$e>65535&&$e<1114112&&(Ee=$e))}}Ee===null?(Ee=65533,le=1):Ee>65535&&(Ee-=65536,de.push(Ee>>>10&1023|55296),Ee=56320|Ee&1023),de.push(Ee),Ie+=le}return ne(de)}const Y=4096;function ne(pe){const R=pe.length;if(R<=Y)return String.fromCharCode.apply(String,pe);let q="",de=0;for(;de<R;)q+=String.fromCharCode.apply(String,pe.slice(de,de+=Y));return q}function G(pe,R,q){let de="";q=Math.min(pe.length,q);for(let Ie=R;Ie<q;++Ie)de+=String.fromCharCode(pe[Ie]&127);return de}function X(pe,R,q){let de="";q=Math.min(pe.length,q);for(let Ie=R;Ie<q;++Ie)de+=String.fromCharCode(pe[Ie]);return de}function oe(pe,R,q){const de=pe.length;(!R||R<0)&&(R=0),(!q||q<0||q>de)&&(q=de);let Ie="";for(let be=R;be<q;++be)Ie+=Nt[pe[be]];return Ie}function ye(pe,R,q){const de=pe.slice(R,q);let Ie="";for(let be=0;be<de.length-1;be+=2)Ie+=String.fromCharCode(de[be]+de[be+1]*256);return Ie}f.prototype.slice=function(R,q){const de=this.length;R=~~R,q=q===void 0?de:~~q,R<0?(R+=de,R<0&&(R=0)):R>de&&(R=de),q<0?(q+=de,q<0&&(q=0)):q>de&&(q=de),q<R&&(q=R);const Ie=this.subarray(R,q);return Object.setPrototypeOf(Ie,f.prototype),Ie};function we(pe,R,q){if(pe%1!==0||pe<0)throw new RangeError("offset is not uint");if(pe+R>q)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(R,q,de){R=R>>>0,q=q>>>0,de||we(R,q,this.length);let Ie=this[R],be=1,Ee=0;for(;++Ee<q&&(be*=256);)Ie+=this[R+Ee]*be;return Ie},f.prototype.readUintBE=f.prototype.readUIntBE=function(R,q,de){R=R>>>0,q=q>>>0,de||we(R,q,this.length);let Ie=this[R+--q],be=1;for(;q>0&&(be*=256);)Ie+=this[R+--q]*be;return Ie},f.prototype.readUint8=f.prototype.readUInt8=function(R,q){return R=R>>>0,q||we(R,1,this.length),this[R]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(R,q){return R=R>>>0,q||we(R,2,this.length),this[R]|this[R+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(R,q){return R=R>>>0,q||we(R,2,this.length),this[R]<<8|this[R+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(R,q){return R=R>>>0,q||we(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(R,q){return R=R>>>0,q||we(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},f.prototype.readBigUInt64LE=Rt(function(R){R=R>>>0,Ae(R,"offset");const q=this[R],de=this[R+7];(q===void 0||de===void 0)&&ce(R,this.length-8);const Ie=q+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,be=this[++R]+this[++R]*2**8+this[++R]*2**16+de*2**24;return BigInt(Ie)+(BigInt(be)<<BigInt(32))}),f.prototype.readBigUInt64BE=Rt(function(R){R=R>>>0,Ae(R,"offset");const q=this[R],de=this[R+7];(q===void 0||de===void 0)&&ce(R,this.length-8);const Ie=q*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],be=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+de;return(BigInt(Ie)<<BigInt(32))+BigInt(be)}),f.prototype.readIntLE=function(R,q,de){R=R>>>0,q=q>>>0,de||we(R,q,this.length);let Ie=this[R],be=1,Ee=0;for(;++Ee<q&&(be*=256);)Ie+=this[R+Ee]*be;return be*=128,Ie>=be&&(Ie-=Math.pow(2,8*q)),Ie},f.prototype.readIntBE=function(R,q,de){R=R>>>0,q=q>>>0,de||we(R,q,this.length);let Ie=q,be=1,Ee=this[R+--Ie];for(;Ie>0&&(be*=256);)Ee+=this[R+--Ie]*be;return be*=128,Ee>=be&&(Ee-=Math.pow(2,8*q)),Ee},f.prototype.readInt8=function(R,q){return R=R>>>0,q||we(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},f.prototype.readInt16LE=function(R,q){R=R>>>0,q||we(R,2,this.length);const de=this[R]|this[R+1]<<8;return de&32768?de|4294901760:de},f.prototype.readInt16BE=function(R,q){R=R>>>0,q||we(R,2,this.length);const de=this[R+1]|this[R]<<8;return de&32768?de|4294901760:de},f.prototype.readInt32LE=function(R,q){return R=R>>>0,q||we(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},f.prototype.readInt32BE=function(R,q){return R=R>>>0,q||we(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},f.prototype.readBigInt64LE=Rt(function(R){R=R>>>0,Ae(R,"offset");const q=this[R],de=this[R+7];(q===void 0||de===void 0)&&ce(R,this.length-8);const Ie=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(de<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(q+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),f.prototype.readBigInt64BE=Rt(function(R){R=R>>>0,Ae(R,"offset");const q=this[R],de=this[R+7];(q===void 0||de===void 0)&&ce(R,this.length-8);const Ie=(q<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+de)}),f.prototype.readFloatLE=function(R,q){return R=R>>>0,q||we(R,4,this.length),n.read(this,R,!0,23,4)},f.prototype.readFloatBE=function(R,q){return R=R>>>0,q||we(R,4,this.length),n.read(this,R,!1,23,4)},f.prototype.readDoubleLE=function(R,q){return R=R>>>0,q||we(R,8,this.length),n.read(this,R,!0,52,8)},f.prototype.readDoubleBE=function(R,q){return R=R>>>0,q||we(R,8,this.length),n.read(this,R,!1,52,8)};function fe(pe,R,q,de,Ie,be){if(!f.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Ie||R<be)throw new RangeError('"value" argument is out of bounds');if(q+de>pe.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(R,q,de,Ie){if(R=+R,q=q>>>0,de=de>>>0,!Ie){const le=Math.pow(2,8*de)-1;fe(this,R,q,de,le,0)}let be=1,Ee=0;for(this[q]=R&255;++Ee<de&&(be*=256);)this[q+Ee]=R/be&255;return q+de},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(R,q,de,Ie){if(R=+R,q=q>>>0,de=de>>>0,!Ie){const le=Math.pow(2,8*de)-1;fe(this,R,q,de,le,0)}let be=de-1,Ee=1;for(this[q+be]=R&255;--be>=0&&(Ee*=256);)this[q+be]=R/Ee&255;return q+de},f.prototype.writeUint8=f.prototype.writeUInt8=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,1,255,0),this[q]=R&255,q+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,2,65535,0),this[q]=R&255,this[q+1]=R>>>8,q+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,2,65535,0),this[q]=R>>>8,this[q+1]=R&255,q+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,4,4294967295,0),this[q+3]=R>>>24,this[q+2]=R>>>16,this[q+1]=R>>>8,this[q]=R&255,q+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,4,4294967295,0),this[q]=R>>>24,this[q+1]=R>>>16,this[q+2]=R>>>8,this[q+3]=R&255,q+4};function Me(pe,R,q,de,Ie){ke(R,de,Ie,pe,q,7);let be=Number(R&BigInt(4294967295));pe[q++]=be,be=be>>8,pe[q++]=be,be=be>>8,pe[q++]=be,be=be>>8,pe[q++]=be;let Ee=Number(R>>BigInt(32)&BigInt(4294967295));return pe[q++]=Ee,Ee=Ee>>8,pe[q++]=Ee,Ee=Ee>>8,pe[q++]=Ee,Ee=Ee>>8,pe[q++]=Ee,q}function Fe(pe,R,q,de,Ie){ke(R,de,Ie,pe,q,7);let be=Number(R&BigInt(4294967295));pe[q+7]=be,be=be>>8,pe[q+6]=be,be=be>>8,pe[q+5]=be,be=be>>8,pe[q+4]=be;let Ee=Number(R>>BigInt(32)&BigInt(4294967295));return pe[q+3]=Ee,Ee=Ee>>8,pe[q+2]=Ee,Ee=Ee>>8,pe[q+1]=Ee,Ee=Ee>>8,pe[q]=Ee,q+8}f.prototype.writeBigUInt64LE=Rt(function(R,q=0){return Me(this,R,q,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Rt(function(R,q=0){return Fe(this,R,q,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(R,q,de,Ie){if(R=+R,q=q>>>0,!Ie){const ft=Math.pow(2,8*de-1);fe(this,R,q,de,ft-1,-ft)}let be=0,Ee=1,le=0;for(this[q]=R&255;++be<de&&(Ee*=256);)R<0&&le===0&&this[q+be-1]!==0&&(le=1),this[q+be]=(R/Ee>>0)-le&255;return q+de},f.prototype.writeIntBE=function(R,q,de,Ie){if(R=+R,q=q>>>0,!Ie){const ft=Math.pow(2,8*de-1);fe(this,R,q,de,ft-1,-ft)}let be=de-1,Ee=1,le=0;for(this[q+be]=R&255;--be>=0&&(Ee*=256);)R<0&&le===0&&this[q+be+1]!==0&&(le=1),this[q+be]=(R/Ee>>0)-le&255;return q+de},f.prototype.writeInt8=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,1,127,-128),R<0&&(R=255+R+1),this[q]=R&255,q+1},f.prototype.writeInt16LE=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,2,32767,-32768),this[q]=R&255,this[q+1]=R>>>8,q+2},f.prototype.writeInt16BE=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,2,32767,-32768),this[q]=R>>>8,this[q+1]=R&255,q+2},f.prototype.writeInt32LE=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,4,2147483647,-2147483648),this[q]=R&255,this[q+1]=R>>>8,this[q+2]=R>>>16,this[q+3]=R>>>24,q+4},f.prototype.writeInt32BE=function(R,q,de){return R=+R,q=q>>>0,de||fe(this,R,q,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[q]=R>>>24,this[q+1]=R>>>16,this[q+2]=R>>>8,this[q+3]=R&255,q+4},f.prototype.writeBigInt64LE=Rt(function(R,q=0){return Me(this,R,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Rt(function(R,q=0){return Fe(this,R,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Oe(pe,R,q,de,Ie,be){if(q+de>pe.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Re(pe,R,q,de,Ie){return R=+R,q=q>>>0,Ie||Oe(pe,R,q,4),n.write(pe,R,q,de,23,4),q+4}f.prototype.writeFloatLE=function(R,q,de){return Re(this,R,q,!0,de)},f.prototype.writeFloatBE=function(R,q,de){return Re(this,R,q,!1,de)};function ze(pe,R,q,de,Ie){return R=+R,q=q>>>0,Ie||Oe(pe,R,q,8),n.write(pe,R,q,de,52,8),q+8}f.prototype.writeDoubleLE=function(R,q,de){return ze(this,R,q,!0,de)},f.prototype.writeDoubleBE=function(R,q,de){return ze(this,R,q,!1,de)},f.prototype.copy=function(R,q,de,Ie){if(!f.isBuffer(R))throw new TypeError("argument should be a Buffer");if(de||(de=0),!Ie&&Ie!==0&&(Ie=this.length),q>=R.length&&(q=R.length),q||(q=0),Ie>0&&Ie<de&&(Ie=de),Ie===de||R.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),R.length-q<Ie-de&&(Ie=R.length-q+de);const be=Ie-de;return this===R&&typeof i.prototype.copyWithin=="function"?this.copyWithin(q,de,Ie):i.prototype.set.call(R,this.subarray(de,Ie),q),be},f.prototype.fill=function(R,q,de,Ie){if(typeof R=="string"){if(typeof q=="string"?(Ie=q,q=0,de=this.length):typeof de=="string"&&(Ie=de,de=this.length),Ie!==void 0&&typeof Ie!="string")throw new TypeError("encoding must be a string");if(typeof Ie=="string"&&!f.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(R.length===1){const Ee=R.charCodeAt(0);(Ie==="utf8"&&Ee<128||Ie==="latin1")&&(R=Ee)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(q<0||this.length<q||this.length<de)throw new RangeError("Out of range index");if(de<=q)return this;q=q>>>0,de=de===void 0?this.length:de>>>0,R||(R=0);let be;if(typeof R=="number")for(be=q;be<de;++be)this[be]=R;else{const Ee=f.isBuffer(R)?R:f.from(R,Ie),le=Ee.length;if(le===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(be=0;be<de-q;++be)this[be+q]=Ee[be%le]}return this};const He={};function Te(pe,R,q){He[pe]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${pe}]`,this.stack,delete this.name}get code(){return pe}set code(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}toString(){return`${this.name} [${pe}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?`${pe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(pe,R){return`The "${pe}" argument must be of type number. Received type ${typeof R}`},TypeError),Te("ERR_OUT_OF_RANGE",function(pe,R,q){let de=`The value of "${pe}" is out of range.`,Ie=q;return Number.isInteger(q)&&Math.abs(q)>2**32?Ie=Ce(String(q)):typeof q=="bigint"&&(Ie=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(Ie=Ce(Ie)),Ie+="n"),de+=` It must be ${R}. Received ${Ie}`,de},RangeError);function Ce(pe){let R="",q=pe.length;const de=pe[0]==="-"?1:0;for(;q>=de+4;q-=3)R=`_${pe.slice(q-3,q)}${R}`;return`${pe.slice(0,q)}${R}`}function B(pe,R,q){Ae(R,"offset"),(pe[R]===void 0||pe[R+q]===void 0)&&ce(R,pe.length-(q+1))}function ke(pe,R,q,de,Ie,be){if(pe>q||pe<R){const Ee=typeof R=="bigint"?"n":"";let le;throw R===0||R===BigInt(0)?le=`>= 0${Ee} and < 2${Ee} ** ${(be+1)*8}${Ee}`:le=`>= -(2${Ee} ** ${(be+1)*8-1}${Ee}) and < 2 ** ${(be+1)*8-1}${Ee}`,new He.ERR_OUT_OF_RANGE("value",le,pe)}B(de,Ie,be)}function Ae(pe,R){if(typeof pe!="number")throw new He.ERR_INVALID_ARG_TYPE(R,"number",pe)}function ce(pe,R,q){throw Math.floor(pe)!==pe?(Ae(pe,q),new He.ERR_OUT_OF_RANGE("offset","an integer",pe)):R<0?new He.ERR_BUFFER_OUT_OF_BOUNDS:new He.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,pe)}const se=/[^+/0-9A-Za-z-_]/g;function J(pe){if(pe=pe.split("=")[0],pe=pe.trim().replace(se,""),pe.length<2)return"";for(;pe.length%4!==0;)pe=pe+"=";return pe}function xe(pe,R){R=R||1/0;let q;const de=pe.length;let Ie=null;const be=[];for(let Ee=0;Ee<de;++Ee){if(q=pe.charCodeAt(Ee),q>55295&&q<57344){if(!Ie){if(q>56319){(R-=3)>-1&&be.push(239,191,189);continue}else if(Ee+1===de){(R-=3)>-1&&be.push(239,191,189);continue}Ie=q;continue}if(q<56320){(R-=3)>-1&&be.push(239,191,189),Ie=q;continue}q=(Ie-55296<<10|q-56320)+65536}else Ie&&(R-=3)>-1&&be.push(239,191,189);if(Ie=null,q<128){if((R-=1)<0)break;be.push(q)}else if(q<2048){if((R-=2)<0)break;be.push(q>>6|192,q&63|128)}else if(q<65536){if((R-=3)<0)break;be.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((R-=4)<0)break;be.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return be}function Pe(pe){const R=[];for(let q=0;q<pe.length;++q)R.push(pe.charCodeAt(q)&255);return R}function Se(pe,R){let q,de,Ie;const be=[];for(let Ee=0;Ee<pe.length&&!((R-=2)<0);++Ee)q=pe.charCodeAt(Ee),de=q>>8,Ie=q%256,be.push(Ie),be.push(de);return be}function Ze(pe){return t.toByteArray(J(pe))}function Et(pe,R,q,de){let Ie;for(Ie=0;Ie<de&&!(Ie+q>=R.length||Ie>=pe.length);++Ie)R[Ie+q]=pe[Ie];return Ie}function at(pe,R){return pe instanceof R||pe!=null&&pe.constructor!=null&&pe.constructor.name!=null&&pe.constructor.name===R.name}function _t(pe){return pe!==pe}const Nt=function(){const pe="0123456789abcdef",R=new Array(256);for(let q=0;q<16;++q){const de=q*16;for(let Ie=0;Ie<16;++Ie)R[de+Ie]=pe[q]+pe[Ie]}return R}();function Rt(pe){return typeof BigInt>"u"?Kt:pe}function Kt(){throw new Error("BigInt not supported")}})(yE);const Wt=yE.Buffer,Ar=yE.Buffer;var Oc={exports:{}},q3;function oU(){if(q3)return Oc.exports;q3=1;const e=typeof Wt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Wt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const f=JSON.parse(s,u);if(f===null||typeof f!="object")return f;const h=c&&c.protoAction||"error",m=c&&c.constructorAction||"error";if(h==="ignore"&&m==="ignore")return f;if(h!=="ignore"&&m!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return f}else if(h!=="ignore"&&m==="ignore"){if(t.test(s)===!1)return f}else if(n.test(s)===!1)return f;return a(f,{protoAction:h,constructorAction:m,safe:c&&c.safe})}function a(s,{protoAction:u="error",constructorAction:c="error",safe:f}={}){let h=[s];for(;h.length;){const m=h;h=[];for(const g of m){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(f===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const w=g[v];w&&typeof w=="object"&&h.push(w)}}}return s}function i(s,u,c){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,c)}finally{Error.stackTraceLimit=f}}function o(s,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Oc.exports=i,Oc.exports.default=i,Oc.exports.parse=i,Oc.exports.safeParse=o,Oc.exports.scan=a,Oc.exports}var sU=oU();const Go=Qa(sU);var lU={};function Ts(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function uU(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function cU(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function dU(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=fU(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function fU(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function l0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var od=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=X7(n,t);if(e==null)return a;if(n.includes(r))throw new mE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},vs=od();function hU(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function pU(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Gy(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function mU({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new hy({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new hy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=lU[t],e==null)throw new hy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new hy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var sb=Symbol.for("vercel.ai.validator");function gU(e){return{[sb]:!0,validate:e}}function yU(e){return typeof e=="object"&&e!==null&&sb in e&&e[sb]===!0&&"validate"in e}function bU(e){return yU(e)?e:vU(e)}function vU(e){return gU(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function wU({value:e,schema:t}){const n=fh({value:e,schema:t});if(!n.success)throw ju.wrap({value:e,cause:n.error});return n.value}function fh({value:e,schema:t}){const n=bU(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ju.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ju.wrap({value:e,cause:r})}}}function _U({text:e,schema:t}){try{const n=Go.parse(e);return t==null?n:wU({value:n,schema:t})}catch(n){throw Ou.isInstance(n)||ju.isInstance(n)?n:new Ou({text:e,cause:n})}}function Zc({text:e,schema:t}){try{const n=Go.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=fh({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Ou.isInstance(n)?n:new Ou({text:e,cause:n})}}}function H3(e){try{return Go.parse(e),!0}catch{return!1}}function xU({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=fh({value:t[e],schema:n});if(!r.success)throw new mE({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var SU=()=>globalThis.fetch,Bo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>EU({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),EU=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=SU()})=>{try{const s=await o(e,{method:"POST",headers:pU(t),body:n.content,signal:i}),u=l0(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw Gy(f)||ha.isInstance(f)?f:new ha({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Gy(c)||ha.isInstance(c))?c:new ha({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(Gy(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new ha({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},nO=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=l0(r);if(o.trim()==="")return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=_U({text:o,schema:e});return{responseHeaders:s,value:new ha({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},vE=e=>async({response:t})=>{const n=l0(t);if(t.body==null)throw new pE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(dU()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Zc({text:r,schema:e}))}}))}},sd=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Zc({text:a,schema:e}),o=l0(t);if(!i.success)throw new ha({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:kU,atob:CU}=globalThis;function rO(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=CU(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Bf(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return kU(t)}function aO(e){return e==null?void 0:e.replace(/\/$/,"")}var Kn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Kn||(Kn={}));var QS;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(QS||(QS={}));const Jt=Kn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gl=e=>{switch(typeof e){case"undefined":return Jt.undefined;case"string":return Jt.string;case"number":return isNaN(e)?Jt.nan:Jt.number;case"boolean":return Jt.boolean;case"function":return Jt.function;case"bigint":return Jt.bigint;case"symbol":return Jt.symbol;case"object":return Array.isArray(e)?Jt.array:e===null?Jt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Jt.promise:typeof Map<"u"&&e instanceof Map?Jt.map:typeof Set<"u"&&e instanceof Set?Jt.set:typeof Date<"u"&&e instanceof Date?Jt.date:Jt.object;default:return Jt.unknown}},jt=Kn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),AU=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Hi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(n(o))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return a(this),r}static assert(t){if(!(t instanceof Hi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Hi.create=e=>new Hi(e);const zf=(e,t)=>{let n;switch(e.code){case jt.invalid_type:e.received===Jt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case jt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Kn.jsonStringifyReplacer)}`;break;case jt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Kn.joinValues(e.keys,", ")}`;break;case jt.invalid_union:n="Invalid input";break;case jt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Kn.joinValues(e.options)}`;break;case jt.invalid_enum_value:n=`Invalid enum value. Expected ${Kn.joinValues(e.options)}, received '${e.received}'`;break;case jt.invalid_arguments:n="Invalid function arguments";break;case jt.invalid_return_type:n="Invalid function return type";break;case jt.invalid_date:n="Invalid date";break;case jt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Kn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case jt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case jt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case jt.custom:n="Invalid input";break;case jt.invalid_intersection_types:n="Intersection results could not be merged";break;case jt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case jt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Kn.assertNever(e)}return{message:n}};let iO=zf;function TU(e){iO=e}function lb(){return iO}const ub=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},RU=[];function Yt(e,t){const n=lb(),r=ub({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zf?void 0:zf].filter(a=>!!a)});e.common.issues.push(r)}class Za{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return wn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Za.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return wn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const wn=Object.freeze({status:"aborted"}),kf=e=>({status:"dirty",value:e}),di=e=>({status:"valid",value:e}),e2=e=>e.status==="aborted",t2=e=>e.status==="dirty",Yc=e=>e.status==="valid",lm=e=>typeof Promise<"u"&&e instanceof Promise;function cb(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function oO(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var rn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(rn||(rn={}));var Zp,Yp;class Rs{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const V3=(e,t)=>{if(Yc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Hi(e.common.issues);return this._error=n,this._error}}};function On(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var u,c;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:s.defaultError}},description:a}}class Mn{get description(){return this._def.description}_getType(t){return gl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Za,ctx:{common:t.parent.common,data:t.data,parsedType:gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(lm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return V3(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return Yc(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>Yc(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(lm(a)?a:Promise.resolve(a));return V3(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:jt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new zo({schema:this,typeName:$t.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Fo.create(this,this._def)}nullable(){return Fu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Po.create(this)}promise(){return qf.create(this,this._def)}or(t){return fm.create([this,t],this._def)}and(t){return hm.create(this,t,this._def)}transform(t){return new zo({...On(this._def),schema:this,typeName:$t.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new bm({...On(this._def),innerType:this,defaultValue:n,typeName:$t.ZodDefault})}brand(){return new wE({typeName:$t.ZodBranded,type:this,...On(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new vm({...On(this._def),innerType:this,catchValue:n,typeName:$t.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return u0.create(this,t)}readonly(){return wm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const NU=/^c[^\s-]{8,}$/i,IU=/^[0-9a-z]+$/,OU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,jU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,DU=/^[a-z0-9_-]{21}$/i,MU=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,FU=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,LU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let $_;const $U=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,zU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,UU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qU=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,HU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,sO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",VU=new RegExp(`^${sO}$`);function lO(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function GU(e){return new RegExp(`^${lO(e)}$`)}function uO(e){let t=`${sO}T${lO(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function WU(e,t){return!!((t==="v4"||!t)&&$U.test(e)||(t==="v6"||!t)&&zU.test(e))}function KU(e,t){if(!MU.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function ZU(e,t){return!!((t==="v4"||!t)&&BU.test(e)||(t==="v6"||!t)&&UU.test(e))}class Do extends Mn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Jt.string){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.string,received:i.parsedType}),wn}const r=new Za;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Yt(a,{code:jt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Yt(a,{code:jt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")FU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"email",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")$_||($_=new RegExp(LU,"u")),$_.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"emoji",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")jU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"uuid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")DU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"nanoid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")NU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cuid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")IU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cuid2",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")OU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"ulid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Yt(a,{validation:"url",code:jt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"regex",code:jt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?uO(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?VU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?GU(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?PU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"duration",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?WU(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"ip",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?KU(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"jwt",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?ZU(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cidr",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?qU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"base64",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?HU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"base64url",code:jt.invalid_string,message:i.message}),r.dirty()):Kn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:jt.invalid_string,...rn.errToObj(r)})}_addCheck(t){return new Do({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...rn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...rn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...rn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...rn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...rn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...rn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...rn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...rn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...rn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...rn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...rn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...rn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...rn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...rn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...rn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...rn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...rn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...rn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...rn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...rn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...rn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...rn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...rn.errToObj(n)})}nonempty(t){return this.min(1,rn.errToObj(t))}trim(){return new Do({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Do({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Do({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Do.create=e=>{var t;return new Do({checks:[],typeName:$t.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...On(e)})};function YU(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class Du extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Jt.number){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.number,received:i.parsedType}),wn}let r;const a=new Za;for(const i of this._def.checks)i.kind==="int"?Kn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?YU(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_finite,message:i.message}),a.dirty()):Kn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new Du({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new Du({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:rn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:rn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Kn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Du.create=e=>new Du({checks:[],typeName:$t.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...On(e)});class Mu extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Jt.bigint)return this._getInvalidInput(t);let r;const a=new Za;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Kn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Yt(n,{code:jt.invalid_type,expected:Jt.bigint,received:n.parsedType}),wn}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new Mu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new Mu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Mu.create=e=>{var t;return new Mu({checks:[],typeName:$t.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...On(e)})};class um extends Mn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Jt.boolean){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.boolean,received:r.parsedType}),wn}return di(t.data)}}um.create=e=>new um({typeName:$t.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...On(e)});class Xc extends Mn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Jt.date){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.date,received:i.parsedType}),wn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_date}),wn}const r=new Za;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Kn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Xc({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:rn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:rn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Xc.create=e=>new Xc({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:$t.ZodDate,...On(e)});class db extends Mn{_parse(t){if(this._getType(t)!==Jt.symbol){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.symbol,received:r.parsedType}),wn}return di(t.data)}}db.create=e=>new db({typeName:$t.ZodSymbol,...On(e)});class cm extends Mn{_parse(t){if(this._getType(t)!==Jt.undefined){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.undefined,received:r.parsedType}),wn}return di(t.data)}}cm.create=e=>new cm({typeName:$t.ZodUndefined,...On(e)});class dm extends Mn{_parse(t){if(this._getType(t)!==Jt.null){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.null,received:r.parsedType}),wn}return di(t.data)}}dm.create=e=>new dm({typeName:$t.ZodNull,...On(e)});class Uf extends Mn{constructor(){super(...arguments),this._any=!0}_parse(t){return di(t.data)}}Uf.create=e=>new Uf({typeName:$t.ZodAny,...On(e)});class Gc extends Mn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return di(t.data)}}Gc.create=e=>new Gc({typeName:$t.ZodUnknown,...On(e)});class Cl extends Mn{_parse(t){const n=this._getOrReturnCtx(t);return Yt(n,{code:jt.invalid_type,expected:Jt.never,received:n.parsedType}),wn}}Cl.create=e=>new Cl({typeName:$t.ZodNever,...On(e)});class fb extends Mn{_parse(t){if(this._getType(t)!==Jt.undefined){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.void,received:r.parsedType}),wn}return di(t.data)}}fb.create=e=>new fb({typeName:$t.ZodVoid,...On(e)});class Po extends Mn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Jt.array)return Yt(n,{code:jt.invalid_type,expected:Jt.array,received:n.parsedType}),wn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Yt(n,{code:o?jt.too_big:jt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Yt(n,{code:jt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Yt(n,{code:jt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new Rs(n,o,n.path,s)))).then(o=>Za.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new Rs(n,o,n.path,s)));return Za.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Po({...this._def,minLength:{value:t,message:rn.toString(n)}})}max(t,n){return new Po({...this._def,maxLength:{value:t,message:rn.toString(n)}})}length(t,n){return new Po({...this._def,exactLength:{value:t,message:rn.toString(n)}})}nonempty(t){return this.min(1,t)}}Po.create=(e,t)=>new Po({type:e,minLength:null,maxLength:null,exactLength:null,typeName:$t.ZodArray,...On(t)});function Ef(e){if(e instanceof zr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Fo.create(Ef(r))}return new zr({...e._def,shape:()=>t})}else return e instanceof Po?new Po({...e._def,type:Ef(e.element)}):e instanceof Fo?Fo.create(Ef(e.unwrap())):e instanceof Fu?Fu.create(Ef(e.unwrap())):e instanceof Ns?Ns.create(e.items.map(t=>Ef(t))):e}class zr extends Mn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Kn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Jt.object){const c=this._getOrReturnCtx(t);return Yt(c,{code:jt.invalid_type,expected:Jt.object,received:c.parsedType}),wn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Cl&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||s.push(c);const u=[];for(const c of o){const f=i[c],h=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Rs(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Cl){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")s.length>0&&(Yt(a,{code:jt.unrecognized_keys,keys:s}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of s){const h=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Rs(a,h,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const h=await f.key,m=await f.value;c.push({key:h,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>Za.mergeObjectSync(r,c)):Za.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return rn.errToObj,new zr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const u=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=rn.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new zr({...this._def,unknownKeys:"strip"})}passthrough(){return new zr({...this._def,unknownKeys:"passthrough"})}extend(t){return new zr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new zr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:$t.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new zr({...this._def,catchall:t})}pick(t){const n={};return Kn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}omit(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}deepPartial(){return Ef(this)}partial(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new zr({...this._def,shape:()=>n})}required(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Fo;)i=i._def.innerType;n[r]=i}}),new zr({...this._def,shape:()=>n})}keyof(){return cO(Kn.objectKeys(this.shape))}}zr.create=(e,t)=>new zr({shape:()=>e,unknownKeys:"strip",catchall:Cl.create(),typeName:$t.ZodObject,...On(t)});zr.strictCreate=(e,t)=>new zr({shape:()=>e,unknownKeys:"strict",catchall:Cl.create(),typeName:$t.ZodObject,...On(t)});zr.lazycreate=(e,t)=>new zr({shape:e,unknownKeys:"strip",catchall:Cl.create(),typeName:$t.ZodObject,...On(t)});class fm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Hi(s.ctx.common.issues));return Yt(n,{code:jt.invalid_union,unionErrors:o}),wn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(u=>new Hi(u));return Yt(n,{code:jt.invalid_union,unionErrors:s}),wn}}get options(){return this._def.options}}fm.create=(e,t)=>new fm({options:e,typeName:$t.ZodUnion,...On(t)});const hl=e=>e instanceof mm?hl(e.schema):e instanceof zo?hl(e.innerType()):e instanceof gm?[e.value]:e instanceof Pu?e.options:e instanceof ym?Kn.objectValues(e.enum):e instanceof bm?hl(e._def.innerType):e instanceof cm?[void 0]:e instanceof dm?[null]:e instanceof Fo?[void 0,...hl(e.unwrap())]:e instanceof Fu?[null,...hl(e.unwrap())]:e instanceof wE||e instanceof wm?hl(e.unwrap()):e instanceof vm?hl(e._def.innerType):[];class _v extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.object)return Yt(n,{code:jt.invalid_type,expected:Jt.object,received:n.parsedType}),wn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Yt(n,{code:jt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),wn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=hl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new _v({typeName:$t.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...On(r)})}}function n2(e,t){const n=gl(e),r=gl(t);if(e===t)return{valid:!0,data:e};if(n===Jt.object&&r===Jt.object){const a=Kn.objectKeys(t),i=Kn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const u=n2(e[s],t[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(n===Jt.array&&r===Jt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],u=n2(o,s);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===Jt.date&&r===Jt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class hm extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(e2(i)||e2(o))return wn;const s=n2(i.value,o.value);return s.valid?((t2(i)||t2(o))&&n.dirty(),{status:n.value,value:s.data}):(Yt(r,{code:jt.invalid_intersection_types}),wn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}hm.create=(e,t,n)=>new hm({left:e,right:t,typeName:$t.ZodIntersection,...On(n)});class Ns extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.array)return Yt(r,{code:jt.invalid_type,expected:Jt.array,received:r.parsedType}),wn;if(r.data.length<this._def.items.length)return Yt(r,{code:jt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),wn;!this._def.rest&&r.data.length>this._def.items.length&&(Yt(r,{code:jt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Rs(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Za.mergeArray(n,o)):Za.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Ns({...this._def,rest:t})}}Ns.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ns({items:e,typeName:$t.ZodTuple,rest:null,...On(t)})};class pm extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.object)return Yt(r,{code:jt.invalid_type,expected:Jt.object,received:r.parsedType}),wn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new Rs(r,s,r.path,s)),value:o._parse(new Rs(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Za.mergeObjectAsync(n,a):Za.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Mn?new pm({keyType:t,valueType:n,typeName:$t.ZodRecord,...On(r)}):new pm({keyType:Do.create(),valueType:t,typeName:$t.ZodRecord,...On(n)})}}class hb extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.map)return Yt(r,{code:jt.invalid_type,expected:Jt.map,received:r.parsedType}),wn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,u],c)=>({key:a._parse(new Rs(r,s,r.path,[c,"key"])),value:i._parse(new Rs(r,u,r.path,[c,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return wn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of o){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return wn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}}}}hb.create=(e,t,n)=>new hb({valueType:t,keyType:e,typeName:$t.ZodMap,...On(n)});class Jc extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.set)return Yt(r,{code:jt.invalid_type,expected:Jt.set,received:r.parsedType}),wn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Yt(r,{code:jt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Yt(r,{code:jt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const c=new Set;for(const f of u){if(f.status==="aborted")return wn;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const s=[...r.data.values()].map((u,c)=>i._parse(new Rs(r,u,r.path,c)));return r.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(t,n){return new Jc({...this._def,minSize:{value:t,message:rn.toString(n)}})}max(t,n){return new Jc({...this._def,maxSize:{value:t,message:rn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Jc.create=(e,t)=>new Jc({valueType:e,minSize:null,maxSize:null,typeName:$t.ZodSet,...On(t)});class Of extends Mn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.function)return Yt(n,{code:jt.invalid_type,expected:Jt.function,received:n.parsedType}),wn;function r(s,u){return ub({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,lb(),zf].filter(c=>!!c),issueData:{code:jt.invalid_arguments,argumentsError:u}})}function a(s,u){return ub({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,lb(),zf].filter(c=>!!c),issueData:{code:jt.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof qf){const s=this;return di(async function(...u){const c=new Hi([]),f=await s._def.args.parseAsync(u,i).catch(g=>{throw c.addIssue(r(u,g)),c}),h=await Reflect.apply(o,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const s=this;return di(function(...u){const c=s._def.args.safeParse(u,i);if(!c.success)throw new Hi([r(u,c.error)]);const f=Reflect.apply(o,this,c.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new Hi([a(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Of({...this._def,args:Ns.create(t).rest(Gc.create())})}returns(t){return new Of({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Of({args:t||Ns.create([]).rest(Gc.create()),returns:n||Gc.create(),typeName:$t.ZodFunction,...On(r)})}}class mm extends Mn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}mm.create=(e,t)=>new mm({getter:e,typeName:$t.ZodLazy,...On(t)});class gm extends Mn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Yt(n,{received:n.data,code:jt.invalid_literal,expected:this._def.value}),wn}return{status:"valid",value:t.data}}get value(){return this._def.value}}gm.create=(e,t)=>new gm({value:e,typeName:$t.ZodLiteral,...On(t)});function cO(e,t){return new Pu({values:e,typeName:$t.ZodEnum,...On(t)})}class Pu extends Mn{constructor(){super(...arguments),Zp.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Yt(n,{expected:Kn.joinValues(r),received:n.parsedType,code:jt.invalid_type}),wn}if(cb(this,Zp)||oO(this,Zp,new Set(this._def.values)),!cb(this,Zp).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Yt(n,{received:n.data,code:jt.invalid_enum_value,options:r}),wn}return di(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Pu.create(t,{...this._def,...n})}exclude(t,n=this._def){return Pu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Zp=new WeakMap;Pu.create=cO;class ym extends Mn{constructor(){super(...arguments),Yp.set(this,void 0)}_parse(t){const n=Kn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Jt.string&&r.parsedType!==Jt.number){const a=Kn.objectValues(n);return Yt(r,{expected:Kn.joinValues(a),received:r.parsedType,code:jt.invalid_type}),wn}if(cb(this,Yp)||oO(this,Yp,new Set(Kn.getValidEnumValues(this._def.values))),!cb(this,Yp).has(t.data)){const a=Kn.objectValues(n);return Yt(r,{received:r.data,code:jt.invalid_enum_value,options:a}),wn}return di(t.data)}get enum(){return this._def.values}}Yp=new WeakMap;ym.create=(e,t)=>new ym({values:e,typeName:$t.ZodNativeEnum,...On(t)});class qf extends Mn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.promise&&n.common.async===!1)return Yt(n,{code:jt.invalid_type,expected:Jt.promise,received:n.parsedType}),wn;const r=n.parsedType===Jt.promise?n.data:Promise.resolve(n.data);return di(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}qf.create=(e,t)=>new qf({type:e,typeName:$t.ZodPromise,...On(t)});class zo extends Mn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Yt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return wn;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?wn:u.status==="dirty"||n.value==="dirty"?kf(u.value):u});{if(n.value==="aborted")return wn;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?wn:s.status==="dirty"||n.value==="dirty"?kf(s.value):s}}if(a.type==="refinement"){const o=s=>{const u=a.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?wn:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?wn:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Yc(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Yc(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Kn.assertNever(a)}}zo.create=(e,t,n)=>new zo({schema:e,typeName:$t.ZodEffects,effect:t,...On(n)});zo.createWithPreprocess=(e,t,n)=>new zo({schema:t,effect:{type:"preprocess",transform:e},typeName:$t.ZodEffects,...On(n)});class Fo extends Mn{_parse(t){return this._getType(t)===Jt.undefined?di(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Fo.create=(e,t)=>new Fo({innerType:e,typeName:$t.ZodOptional,...On(t)});class Fu extends Mn{_parse(t){return this._getType(t)===Jt.null?di(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Fu.create=(e,t)=>new Fu({innerType:e,typeName:$t.ZodNullable,...On(t)});class bm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Jt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}bm.create=(e,t)=>new bm({innerType:e,typeName:$t.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...On(t)});class vm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return lm(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Hi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Hi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}vm.create=(e,t)=>new vm({innerType:e,typeName:$t.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...On(t)});class pb extends Mn{_parse(t){if(this._getType(t)!==Jt.nan){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.nan,received:r.parsedType}),wn}return{status:"valid",value:t.data}}}pb.create=e=>new pb({typeName:$t.ZodNaN,...On(e)});const XU=Symbol("zod_brand");class wE extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class u0 extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?wn:i.status==="dirty"?(n.dirty(),kf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?wn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new u0({in:t,out:n,typeName:$t.ZodPipeline})}}class wm extends Mn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Yc(a)&&(a.value=Object.freeze(a.value)),a);return lm(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}wm.create=(e,t)=>new wm({innerType:e,typeName:$t.ZodReadonly,...On(t)});function G3(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function dO(e,t={},n){return e?Uf.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(u=>{var c,f;if(!u){const h=G3(t,r),m=(f=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!s){const u=G3(t,r),c=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:c})}}):Uf.create()}const JU={object:zr.lazycreate};var $t;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})($t||($t={}));const QU=(e,t={message:`Input not instance of ${e.name}`})=>dO(n=>n instanceof e,t),fO=Do.create,hO=Du.create,eq=pb.create,tq=Mu.create,pO=um.create,nq=Xc.create,rq=db.create,aq=cm.create,iq=dm.create,oq=Uf.create,sq=Gc.create,lq=Cl.create,uq=fb.create,cq=Po.create,dq=zr.create,fq=zr.strictCreate,hq=fm.create,pq=_v.create,mq=hm.create,gq=Ns.create,yq=pm.create,bq=hb.create,vq=Jc.create,wq=Of.create,_q=mm.create,xq=gm.create,Sq=Pu.create,Eq=ym.create,kq=qf.create,W3=zo.create,Cq=Fo.create,Aq=Fu.create,Tq=zo.createWithPreprocess,Rq=u0.create,Nq=()=>fO().optional(),Iq=()=>hO().optional(),Oq=()=>pO().optional(),jq={string:e=>Do.create({...e,coerce:!0}),number:e=>Du.create({...e,coerce:!0}),boolean:e=>um.create({...e,coerce:!0}),bigint:e=>Mu.create({...e,coerce:!0}),date:e=>Xc.create({...e,coerce:!0})},Dq=wn;var F=Object.freeze({__proto__:null,defaultErrorMap:zf,setErrorMap:TU,getErrorMap:lb,makeIssue:ub,EMPTY_PATH:RU,addIssueToContext:Yt,ParseStatus:Za,INVALID:wn,DIRTY:kf,OK:di,isAborted:e2,isDirty:t2,isValid:Yc,isAsync:lm,get util(){return Kn},get objectUtil(){return QS},ZodParsedType:Jt,getParsedType:gl,ZodType:Mn,datetimeRegex:uO,ZodString:Do,ZodNumber:Du,ZodBigInt:Mu,ZodBoolean:um,ZodDate:Xc,ZodSymbol:db,ZodUndefined:cm,ZodNull:dm,ZodAny:Uf,ZodUnknown:Gc,ZodNever:Cl,ZodVoid:fb,ZodArray:Po,ZodObject:zr,ZodUnion:fm,ZodDiscriminatedUnion:_v,ZodIntersection:hm,ZodTuple:Ns,ZodRecord:pm,ZodMap:hb,ZodSet:Jc,ZodFunction:Of,ZodLazy:mm,ZodLiteral:gm,ZodEnum:Pu,ZodNativeEnum:ym,ZodPromise:qf,ZodEffects:zo,ZodTransformer:zo,ZodOptional:Fo,ZodNullable:Fu,ZodDefault:bm,ZodCatch:vm,ZodNaN:pb,BRAND:XU,ZodBranded:wE,ZodPipeline:u0,ZodReadonly:wm,custom:dO,Schema:Mn,ZodSchema:Mn,late:JU,get ZodFirstPartyTypeKind(){return $t},coerce:jq,any:oq,array:cq,bigint:tq,boolean:pO,date:nq,discriminatedUnion:pq,effect:W3,enum:Sq,function:wq,instanceof:QU,intersection:mq,lazy:_q,literal:xq,map:bq,nan:eq,nativeEnum:Eq,never:lq,null:iq,nullable:Aq,number:hO,object:dq,oboolean:Oq,onumber:Iq,optional:Cq,ostring:Nq,pipeline:Rq,preprocess:Tq,promise:kq,record:yq,set:vq,strictObject:fq,string:fO,symbol:rq,transformer:W3,tuple:gq,undefined:aq,union:hq,unknown:sq,void:uq,NEVER:Dq,ZodIssueCode:jt,quotelessJson:AU,ZodError:Hi});function Mq({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,u)=>{var c,f,h,m;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(c=s.mimeType)!=null?c:"image/jpeg"};base64,${Bf(s.image)}`,detail:(h=(f=s.providerMetadata)==null?void 0:f.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new br({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=s.filename)!=null?m:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new br({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const u=[];for(const c of o)switch(c.type){case"text":{s+=c.text;break}case"tool-call":{u.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(u.length>1)throw new br({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:u.length>0?u[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:u.length>0?u:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function K3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function mb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var _E=F.object({error:F.object({message:F.string(),type:F.string().nullish(),param:F.any().nullish(),code:F.union([F.string(),F.number()]).nullish()})}),Lu=nO({errorSchema:_E,errorToMessage:e=>e.error.message});function gb({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Pq({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new br({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):s.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const u=o.type;switch(u){case"auto":case"none":case"required":return{tools:s,tool_choice:u,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=u;throw new br({functionality:`Unsupported tool choice type: ${c}`})}}}var Fq=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:r2(this.modelId)}get defaultObjectGenerationMode(){return Bq(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g,v,w,_,x,S,E;const C=e.type,A=[];i!=null&&A.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&A.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const j=this.settings.useLegacyFunctionCalling;if(j&&this.settings.parallelToolCalls===!0)throw new br({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(j&&this.supportsStructuredOutputs)throw new br({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:O,warnings:N}=Mq({prompt:t,useLegacyFunctionCalling:j,systemMessageMode:zq(this.modelId)});A.push(...N);const z={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(m=c.name)!=null?m:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:f,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(w=h==null?void 0:h.openai)==null?void 0:w.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:O};switch(r2(this.modelId)&&(z.temperature!=null&&(z.temperature=void 0,A.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),z.top_p!=null&&(z.top_p=void 0,A.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),z.frequency_penalty!=null&&(z.frequency_penalty=void 0,A.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),z.presence_penalty!=null&&(z.presence_penalty=void 0,A.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),z.logit_bias!=null&&(z.logit_bias=void 0,A.push({type:"other",message:"logitBias is not supported for reasoning models"})),z.logprobs!=null&&(z.logprobs=void 0,A.push({type:"other",message:"logprobs is not supported for reasoning models"})),z.top_logprobs!=null&&(z.top_logprobs=void 0,A.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),z.max_tokens!=null&&(z.max_completion_tokens==null&&(z.max_completion_tokens=z.max_tokens),z.max_tokens=void 0)),C){case"regular":{const{tools:H,tool_choice:Q,functions:P,function_call:Z,toolWarnings:V}=Pq({mode:e,useLegacyFunctionCalling:j,structuredOutputs:this.supportsStructuredOutputs});return{args:{...z,tools:H,tool_choice:Q,functions:P,function_call:Z},warnings:[...A,...V]}}case"object-json":return{args:{...z,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:A};case"object-tool":return{args:j?{...z,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...z,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:A};default:{const H=C;throw new Error(`Unsupported type: ${H}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u;const{args:c,warnings:f}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await Bo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:c,failedResponseHandler:Lu,successfulResponseHandler:sd(Lq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...w}=c,_=m.choices[0],x=(t=m.usage)==null?void 0:t.completion_tokens_details,S=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:vs(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:vs(),toolName:C.function.name,args:C.function.arguments}}),finishReason:mb(_.finish_reason),usage:{promptTokens:(o=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(u=(s=m.usage)==null?void 0:s.completion_tokens)!=null?u:NaN},rawCall:{rawPrompt:v,rawSettings:w},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:gb(m),warnings:f,logprobs:K3(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const w=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...w.response}),w.text&&x.enqueue({type:"text-delta",textDelta:w.text}),w.toolCalls)for(const S of w.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:w.finishReason,usage:w.usage,logprobs:w.logprobs,providerMetadata:w.providerMetadata}),x.close()}}),rawCall:w.rawCall,rawResponse:w.rawResponse,warnings:w.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Bo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:r,failedResponseHandler:Lu,successfulResponseHandler:vE($q),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,u=[];let c="unknown",f={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(w,_){var x,S,E,C,A,j,O,N,z,H,Q,P;if(!w.success){c="error",_.enqueue({type:"error",error:w.error});return}const Z=w.value;if("error"in Z){c="error",_.enqueue({type:"error",error:Z.error});return}if(m&&(m=!1,_.enqueue({type:"response-metadata",...gb(Z)})),Z.usage!=null){const{prompt_tokens:Y,completion_tokens:ne,prompt_tokens_details:G,completion_tokens_details:X}=Z.usage;f={promptTokens:Y??void 0,completionTokens:ne??void 0},(X==null?void 0:X.reasoning_tokens)!=null&&(v.openai.reasoningTokens=X==null?void 0:X.reasoning_tokens),(X==null?void 0:X.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=X==null?void 0:X.accepted_prediction_tokens),(X==null?void 0:X.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=X==null?void 0:X.rejected_prediction_tokens),(G==null?void 0:G.cached_tokens)!=null&&(v.openai.cachedPromptTokens=G==null?void 0:G.cached_tokens)}const V=Z.choices[0];if((V==null?void 0:V.finish_reason)!=null&&(c=mb(V.finish_reason)),(V==null?void 0:V.delta)==null)return;const te=V.delta;te.content!=null&&_.enqueue({type:"text-delta",textDelta:te.content});const ae=K3(V==null?void 0:V.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const re=g&&te.function_call!=null?[{type:"function",id:vs(),function:te.function_call,index:0}]:te.tool_calls;if(re!=null)for(const Y of re){const ne=Y.index;if(u[ne]==null){if(Y.type!=="function")throw new If({data:Y,message:"Expected 'function' type."});if(Y.id==null)throw new If({data:Y,message:"Expected 'id' to be a string."});if(((x=Y.function)==null?void 0:x.name)==null)throw new If({data:Y,message:"Expected 'function.name' to be a string."});u[ne]={id:Y.id,type:"function",function:{name:Y.function.name,arguments:(S=Y.function.arguments)!=null?S:""},hasFinished:!1};const X=u[ne];((E=X.function)==null?void 0:E.name)!=null&&((C=X.function)==null?void 0:C.arguments)!=null&&(X.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:X.id,toolName:X.function.name,argsTextDelta:X.function.arguments}),H3(X.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(A=X.id)!=null?A:vs(),toolName:X.function.name,args:X.function.arguments}),X.hasFinished=!0));continue}const G=u[ne];G.hasFinished||(((j=Y.function)==null?void 0:j.arguments)!=null&&(G.function.arguments+=(N=(O=Y.function)==null?void 0:O.arguments)!=null?N:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:(z=Y.function.arguments)!=null?z:""}),((H=G.function)==null?void 0:H.name)!=null&&((Q=G.function)==null?void 0:Q.arguments)!=null&&H3(G.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(P=G.id)!=null?P:vs(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0))}},flush(w){var _,x;w.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(_=f.promptTokens)!=null?_:NaN,completionTokens:(x=f.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},mO=F.object({prompt_tokens:F.number().nullish(),completion_tokens:F.number().nullish(),prompt_tokens_details:F.object({cached_tokens:F.number().nullish()}).nullish(),completion_tokens_details:F.object({reasoning_tokens:F.number().nullish(),accepted_prediction_tokens:F.number().nullish(),rejected_prediction_tokens:F.number().nullish()}).nullish()}).nullish(),Lq=F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({message:F.object({role:F.literal("assistant").nullish(),content:F.string().nullish(),function_call:F.object({arguments:F.string(),name:F.string()}).nullish(),tool_calls:F.array(F.object({id:F.string().nullish(),type:F.literal("function"),function:F.object({name:F.string(),arguments:F.string()})})).nullish()}),index:F.number(),logprobs:F.object({content:F.array(F.object({token:F.string(),logprob:F.number(),top_logprobs:F.array(F.object({token:F.string(),logprob:F.number()}))})).nullable()}).nullish(),finish_reason:F.string().nullish()})),usage:mO}),$q=F.union([F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({delta:F.object({role:F.enum(["assistant"]).nullish(),content:F.string().nullish(),function_call:F.object({name:F.string().optional(),arguments:F.string().optional()}).nullish(),tool_calls:F.array(F.object({index:F.number(),id:F.string().nullish(),type:F.literal("function").optional(),function:F.object({name:F.string().nullish(),arguments:F.string().nullish()})})).nullish()}).nullish(),logprobs:F.object({content:F.array(F.object({token:F.string(),logprob:F.number(),top_logprobs:F.array(F.object({token:F.string(),logprob:F.number()}))})).nullable()}).nullish(),finish_reason:F.string().nullable().optional(),index:F.number()})),usage:mO}),_E]);function r2(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function Bq(e){return e.startsWith("gpt-4o-audio-preview")}function zq(e){var t,n;return r2(e)?(n=(t=Uq[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var Uq={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function qq({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new pl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new br({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new br({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new br({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function Z3(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var Hq=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h}){var m;const g=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:w,stopSequences:_}=qq({prompt:n,inputFormat:t}),x=[..._??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,prompt:w,stop:x.length>0?x:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new br({functionality:"tools"});if(e.toolChoice)throw new br({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new br({functionality:"object-json mode"});case"object-tool":throw new br({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Bo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:t,failedResponseHandler:Lu,successfulResponseHandler:sd(Vq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,u=a.choices[0];return{text:u.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:mb(u.finish_reason),logprobs:Z3(u.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:gb(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Bo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:r,failedResponseHandler:Lu,successfulResponseHandler:vE(Gq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){u="error",g.enqueue({type:"error",error:m.error});return}const v=m.value;if("error"in v){u="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...gb(v)})),v.usage!=null&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const w=v.choices[0];(w==null?void 0:w.finish_reason)!=null&&(u=mb(w.finish_reason)),(w==null?void 0:w.text)!=null&&g.enqueue({type:"text-delta",textDelta:w.text});const _=Z3(w==null?void 0:w.logprobs);_!=null&&_.length&&(f===void 0&&(f=[]),f.push(..._))},flush(m){m.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Vq=F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({text:F.string(),finish_reason:F.string(),logprobs:F.object({tokens:F.array(F.string()),token_logprobs:F.array(F.number()),top_logprobs:F.array(F.record(F.string(),F.number())).nullable()}).nullish()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()})}),Gq=F.union([F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({text:F.string(),finish_reason:F.string().nullish(),index:F.number(),logprobs:F.object({tokens:F.array(F.string()),token_logprobs:F.array(F.number()),top_logprobs:F.array(F.record(F.string(),F.number())).nullable()}).nullish()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()}).nullish()}),_E]),Wq=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new gE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Bo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ts(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Lu,successfulResponseHandler:sd(Kq),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Kq=F.object({data:F.array(F.object({embedding:F.array(F.number())})),usage:F.object({prompt_tokens:F.number()}).nullish()}),Zq={"dall-e-3":1,"dall-e-2":10},Yq=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:Zq[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:v,responseHeaders:w}=await Bo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ts(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:Lu,successfulResponseHandler:sd(Xq),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(_=>_.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:w}}}},Xq=F.object({data:F.array(F.object({b64_json:F.string()}))});function Jq({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var u,c,f,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${Bf(o.image)}`,detail:(f=(c=o.providerMetadata)==null?void 0:c.openai)==null?void 0:f.imageDetail};case"file":{if(o.data instanceof URL)throw new br({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new br({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function Y3({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function Qq({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)switch(u.type){case"function":o.push({type:"function",name:u.name,description:u.description,parameters:u.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(u.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:u.args.searchContextSize,user_location:u.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:u});break}break;default:a.push({type:"unsupported-tool",tool:u});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const u=s;throw new br({functionality:`Unsupported tool choice type: ${u}`})}}}var eH=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:u,prompt:c,providerMetadata:f,responseFormat:h}){var m,g,v;const w=[],_=gH(this.modelId),x=e.type;i!=null&&w.push({type:"unsupported-setting",setting:"topK"}),u!=null&&w.push({type:"unsupported-setting",setting:"seed"}),o!=null&&w.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&w.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&w.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=Jq({prompt:c,systemMessageMode:_.systemMessageMode});w.push(...E);const C=xU({provider:"openai",providerOptions:f,schema:yH}),A=(m=C==null?void 0:C.strictSchemas)!=null?m:!0,j={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:A,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(j.temperature!=null&&(j.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),j.top_p!=null&&(j.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:O,tool_choice:N,toolWarnings:z}=Qq({mode:e,strict:A});return{args:{...j,tools:O,tool_choice:N},warnings:[...w,...z]}}case"object-json":return{args:{...j,text:{format:e.schema!=null?{type:"json_schema",strict:A,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:w};case"object-tool":return{args:{...j,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:A}]},warnings:w};default:{const O=x;throw new Error(`Unsupported type: ${O}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:u,value:c,rawValue:f}=await Bo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:o,failedResponseHandler:Lu,successfulResponseHandler:sd(F.object({id:F.string(),created_at:F.number(),model:F.string(),output:F.array(F.discriminatedUnion("type",[F.object({type:F.literal("message"),role:F.literal("assistant"),content:F.array(F.object({type:F.literal("output_text"),text:F.string(),annotations:F.array(F.object({type:F.literal("url_citation"),start_index:F.number(),end_index:F.number(),url:F.string(),title:F.string()}))}))}),F.object({type:F.literal("function_call"),call_id:F.string(),name:F.string(),arguments:F.string()}),F.object({type:F.literal("web_search_call")}),F.object({type:F.literal("computer_call")}),F.object({type:F.literal("reasoning")})])),incomplete_details:F.object({reason:F.string()}).nullable(),usage:gO})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),m=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var w,_,x;return{sourceType:"url",id:(x=(_=(w=this.config).generateId)==null?void 0:_.call(w))!=null?x:vs(),url:v.url,title:v.title}})),finishReason:Y3({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:m.length>0}),toolCalls:m.length>0?m:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:f},request:{body:JSON.stringify(o)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Bo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Lu,successfulResponseHandler:vE(lH),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,u=NaN,c=null,f=null,h=null;const m={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,C,A,j,O;if(!v.success){o="error",w.enqueue({type:"error",error:v.error});return}const N=v.value;if(pH(N))N.item.type==="function_call"&&(m[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(hH(N)){const z=m[N.output_index];z!=null&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:z.toolCallId,toolName:z.toolName,argsTextDelta:N.delta})}else fH(N)?(h=N.response.id,w.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):uH(N)?w.enqueue({type:"text-delta",textDelta:N.delta}):cH(N)&&N.item.type==="function_call"?(m[N.output_index]=void 0,g=!0,w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):dH(N)?(o=Y3({finishReason:(_=N.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=N.response.usage.input_tokens,u=N.response.usage.output_tokens,c=(S=(x=N.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:c,f=(C=(E=N.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:f):mH(N)&&w.enqueue({type:"source",source:{sourceType:"url",id:(O=(j=(A=i.config).generateId)==null?void 0:j.call(A))!=null?O:vs(),url:N.annotation.url,title:N.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:u},...(c!=null||f!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:f}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},gO=F.object({input_tokens:F.number(),input_tokens_details:F.object({cached_tokens:F.number().nullish()}).nullish(),output_tokens:F.number(),output_tokens_details:F.object({reasoning_tokens:F.number().nullish()}).nullish()}),tH=F.object({type:F.literal("response.output_text.delta"),delta:F.string()}),nH=F.object({type:F.enum(["response.completed","response.incomplete"]),response:F.object({incomplete_details:F.object({reason:F.string()}).nullish(),usage:gO})}),rH=F.object({type:F.literal("response.created"),response:F.object({id:F.string(),created_at:F.number(),model:F.string()})}),aH=F.object({type:F.literal("response.output_item.done"),output_index:F.number(),item:F.discriminatedUnion("type",[F.object({type:F.literal("message")}),F.object({type:F.literal("function_call"),id:F.string(),call_id:F.string(),name:F.string(),arguments:F.string(),status:F.literal("completed")})])}),iH=F.object({type:F.literal("response.function_call_arguments.delta"),item_id:F.string(),output_index:F.number(),delta:F.string()}),oH=F.object({type:F.literal("response.output_item.added"),output_index:F.number(),item:F.discriminatedUnion("type",[F.object({type:F.literal("message")}),F.object({type:F.literal("function_call"),id:F.string(),call_id:F.string(),name:F.string(),arguments:F.string()})])}),sH=F.object({type:F.literal("response.output_text.annotation.added"),annotation:F.object({type:F.literal("url_citation"),url:F.string(),title:F.string()})}),lH=F.union([tH,nH,rH,aH,iH,oH,sH,F.object({type:F.string()}).passthrough()]);function uH(e){return e.type==="response.output_text.delta"}function cH(e){return e.type==="response.output_item.done"}function dH(e){return e.type==="response.completed"||e.type==="response.incomplete"}function fH(e){return e.type==="response.created"}function hH(e){return e.type==="response.function_call_arguments.delta"}function pH(e){return e.type==="response.output_item.added"}function mH(e){return e.type==="response.output_text.annotation.added"}function gH(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var yH=F.object({metadata:F.any().nullish(),parallelToolCalls:F.boolean().nullish(),previousResponseId:F.string().nullish(),store:F.boolean().nullish(),user:F.string().nullish(),reasoningEffort:F.string().nullish(),strictSchemas:F.boolean().nullish(),instructions:F.string().nullish()}),bH=F.object({});function vH({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:bH}}var wH={webSearchPreview:vH};function yO(e={}){var t,n,r;const a=(t=aO(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${mU({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(w,_={})=>new Fq(w,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),c=(w,_={})=>new Hq(w,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),f=(w,_={})=>new Wq(w,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(w,_={})=>new Yq(w,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),m=(w,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return w==="gpt-3.5-turbo-instruct"?c(w,_):u(w,_)},g=w=>new eH(w,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),v=function(w,_){return m(w,_)};return v.languageModel=m,v.chat=u,v.completion=c,v.responses=g,v.embedding=f,v.textEmbedding=f,v.textEmbeddingModel=f,v.image=h,v.imageModel=h,v.tools=wH,v}yO({compatibility:"strict"});var bO="vercel.ai.error",_H=Symbol.for(bO),vO,xH=class wO extends Error{constructor({name:t,message:n,cause:r}){super(n),this[vO]=!0,this.name=t,this.cause=r}static isInstance(t){return wO.hasMarker(t,bO)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};vO=_H;var Ya=xH,_O="AI_APICallError",xO=`vercel.ai.error.${_O}`,SH=Symbol.for(xO),SO,bl=class extends Ya{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:_O,message:t,cause:s}),this[SO]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Ya.hasMarker(t,xO)}};SO=SH;var EO="AI_EmptyResponseBodyError",kO=`vercel.ai.error.${EO}`,EH=Symbol.for(kO),CO,kH=class extends Ya{constructor({message:t="Empty response body"}={}){super({name:EO,message:t}),this[CO]=!0}static isInstance(t){return Ya.hasMarker(t,kO)}};CO=EH;function AO(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var TO="AI_InvalidArgumentError",RO=`vercel.ai.error.${TO}`,CH=Symbol.for(RO),NO,IO=class extends Ya{constructor({message:t,cause:n,argument:r}){super({name:TO,message:t,cause:n}),this[NO]=!0,this.argument=r}static isInstance(t){return Ya.hasMarker(t,RO)}};NO=CH;var OO="AI_JSONParseError",jO=`vercel.ai.error.${OO}`,AH=Symbol.for(jO),DO,yb=class extends Ya{constructor({text:t,cause:n}){super({name:OO,message:`JSON parsing failed: Text: ${t}.
Error message: ${AO(n)}`,cause:n}),this[DO]=!0,this.text=t}static isInstance(t){return Ya.hasMarker(t,jO)}};DO=AH;var MO="AI_LoadAPIKeyError",PO=`vercel.ai.error.${MO}`,TH=Symbol.for(PO),FO,py=class extends Ya{constructor({message:t}){super({name:MO,message:t}),this[FO]=!0}static isInstance(t){return Ya.hasMarker(t,PO)}};FO=TH;var LO="AI_TooManyEmbeddingValuesForCallError",$O=`vercel.ai.error.${LO}`,RH=Symbol.for($O),BO,NH=class extends Ya{constructor(e){super({name:LO,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[BO]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Ya.hasMarker(e,$O)}};BO=RH;var zO="AI_TypeValidationError",UO=`vercel.ai.error.${zO}`,IH=Symbol.for(UO),qO,OH=class a2 extends Ya{constructor({value:t,cause:n}){super({name:zO,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${AO(n)}`,cause:n}),this[qO]=!0,this.value=t}static isInstance(t){return Ya.hasMarker(t,UO)}static wrap({value:t,cause:n}){return a2.isInstance(n)&&n.value===t?n:new a2({value:t,cause:n})}};qO=IH;var bb=OH,HO="AI_UnsupportedFunctionalityError",VO=`vercel.ai.error.${HO}`,jH=Symbol.for(VO),GO,Wy=class extends Ya{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:HO,message:n}),this[GO]=!0,this.functionality=t}static isInstance(t){return Ya.hasMarker(t,VO)}};GO=jH;let DH=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var MH={};function i2(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function PH(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=FH(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function FH(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function xv(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var LH=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=DH(n,t);if(e==null)return a;if(n.includes(r))throw new IO({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},$H=LH();function BH(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function B_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function zH({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new py({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new py({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=MH[t],e==null)throw new py({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new py({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var o2=Symbol.for("vercel.ai.validator");function UH(e){return{[o2]:!0,validate:e}}function qH(e){return typeof e=="object"&&e!==null&&o2 in e&&e[o2]===!0&&"validate"in e}function HH(e){return qH(e)?e:VH(e)}function VH(e){return UH(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function GH({value:e,schema:t}){const n=xE({value:e,schema:t});if(!n.success)throw bb.wrap({value:e,cause:n.error});return n.value}function xE({value:e,schema:t}){const n=HH(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:bb.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:bb.wrap({value:e,cause:r})}}}function WH({text:e,schema:t}){try{const n=Go.parse(e);return t==null?n:GH({value:n,schema:t})}catch(n){throw yb.isInstance(n)||bb.isInstance(n)?n:new yb({text:e,cause:n})}}function WO({text:e,schema:t}){try{const n=Go.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=xE({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:yb.isInstance(n)?n:new yb({text:e,cause:n})}}}function KH({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=xE({value:t[e],schema:n});if(!r.success)throw new IO({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var ZH=()=>globalThis.fetch,s2=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>YH({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),YH=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=ZH()})=>{try{const s=await o(e,{method:"POST",headers:BH(t),body:n.content,signal:i}),u=xv(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw B_(f)||bl.isInstance(f)?f:new bl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(B_(c)||bl.isInstance(c))?c:new bl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(B_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new bl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function l2(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var XH=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=xv(r);if(o.trim()==="")return{responseHeaders:s,value:new bl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=WH({text:o,schema:e});return{responseHeaders:s,value:new bl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new bl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},JH=e=>async({response:t})=>{const n=xv(t);if(t.body==null)throw new kH({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(PH()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(WO({text:r,schema:e}))}}))}},KO=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=WO({text:a,schema:e}),o=xv(t);if(!i.success)throw new bl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:QH}=globalThis;function eV(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return QH(t)}function tV(e){return e==null?void 0:e.replace(/\/$/,"")}function fo(e){if(nV(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:u,format:c,const:f,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),f!==void 0&&(g.enum=[f]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),a!=null&&(g.properties=Object.entries(a).reduce((v,[w,_])=>(v[w]=fo(_),v),{})),i&&(g.items=Array.isArray(i)?i.map(fo):fo(i)),o&&(g.allOf=o.map(fo)),s)if(s.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=s.filter(w=>!(typeof w=="object"&&(w==null?void 0:w.type)==="null"));if(v.length===1){const w=fo(v[0]);typeof w=="object"&&(g.nullable=!0,Object.assign(g,w))}else g.anyOf=v.map(fo),g.nullable=!0}else g.anyOf=s.map(fo);return u&&(g.oneOf=u.map(fo)),h!==void 0&&(g.minLength=h),g}function nV(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function rV(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new Wy({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const u=[];for(const c of s)switch(c.type){case"text":{u.push({text:c.text});break}case"image":{u.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:eV(c.image)}});break}case"file":{u.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:u});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(u=>{switch(u.type){case"text":return u.text.length===0?void 0:{text:u.text};case"file":{if(u.mimeType!=="image/png")throw new Wy({functionality:"Only PNG images are supported in assistant messages"});if(u.data instanceof URL)throw new Wy({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:u.mimeType,data:u.data}}}case"tool-call":return{functionCall:{name:u.toolName,args:u.args}}}}).filter(u=>u!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(u=>({functionResponse:{name:u.toolName,response:{name:u.toolName,content:u.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function X3(e){return e.includes("/")?e:`models/${e}`}var aV=F.object({error:F.object({code:F.number().nullable(),message:F.string(),status:F.string()})}),u2=XH({errorSchema:aV,errorToMessage:e=>e.error.message});function iV(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],u=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:u?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const f=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):f.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:fo(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:s};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=m;throw new Wy({functionality:`Unsupported tool choice type: ${g}`})}}}function J3({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var oV=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g;const v=e.type,w=[],_=KH({provider:"google",providerOptions:h,schema:cV}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:u,seed:f,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?fo(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=rV(t);switch(v){case"regular":{const{tools:C,toolConfig:A,toolWarnings:j}=iV(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:A,cachedContent:this.settings.cachedContent},warnings:[...w,...j]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?fo(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:w};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:fo(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:w};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),u=JSON.stringify(o),c=i2(await l2(this.config.headers),e.headers),{responseHeaders:f,value:h,rawValue:m}=await s2({url:`${this.config.baseURL}/${X3(this.modelId)}:generateContent`,headers:c,body:o,failedResponseHandler:u2,successfulResponseHandler:KO(lV),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=o,w=h.candidates[0],_=w.content==null||typeof w.content!="object"||!("parts"in w.content)?[]:w.content.parts,x=Q3({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:eR(_),files:(t=tR(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:J3({finishReason:w.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:f,body:m},warnings:s,providerMetadata:{google:{groundingMetadata:(a=w.groundingMetadata)!=null?a:null,safetyRatings:(i=w.safetyRatings)!=null?i:null}},sources:nR({groundingMetadata:w.groundingMetadata,generateId:this.config.generateId}),request:{body:u}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=i2(await l2(this.config.headers),e.headers),{responseHeaders:i,value:o}=await s2({url:`${this.config.baseURL}/${X3(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:u2,successfulResponseHandler:JH(uV),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...u}=t;let c="unknown",f={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,C,A;if(!v.success){w.enqueue({type:"error",error:v.error});return}const j=v.value,O=j.usageMetadata;O!=null&&(f={promptTokens:(_=O.promptTokenCount)!=null?_:NaN,completionTokens:(x=O.candidatesTokenCount)!=null?x:NaN});const N=(S=j.candidates)==null?void 0:S[0];if(N==null)return;const z=N.content;if(z!=null){const H=eR(z.parts);H!=null&&w.enqueue({type:"text-delta",textDelta:H});const Q=tR(z.parts);if(Q!=null)for(const Z of Q)w.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const P=Q3({parts:z.parts,generateId:m});if(P!=null)for(const Z of P)w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),g=!0}if(N.finishReason!=null){c=J3({finishReason:N.finishReason,hasToolCalls:g});const H=(E=nR({groundingMetadata:N.groundingMetadata,generateId:m}))!=null?E:[];for(const Q of H)w.enqueue({type:"source",source:Q});h={google:{groundingMetadata:(C=N.groundingMetadata)!=null?C:null,safetyRatings:(A=N.safetyRatings)!=null?A:null}}}},flush(v){v.enqueue({type:"finish",finishReason:c,usage:f,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:u},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function Q3({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function eR(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function tR(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function nR({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var ZO=F.object({role:F.string(),parts:F.array(F.union([F.object({text:F.string()}),F.object({functionCall:F.object({name:F.string(),args:F.unknown()})}),F.object({inlineData:F.object({mimeType:F.string(),data:F.string()})})])).nullish()}),sV=F.object({web:F.object({uri:F.string(),title:F.string()}).nullish(),retrievedContext:F.object({uri:F.string(),title:F.string()}).nullish()}),YO=F.object({webSearchQueries:F.array(F.string()).nullish(),retrievalQueries:F.array(F.string()).nullish(),searchEntryPoint:F.object({renderedContent:F.string()}).nullish(),groundingChunks:F.array(sV).nullish(),groundingSupports:F.array(F.object({segment:F.object({startIndex:F.number().nullish(),endIndex:F.number().nullish(),text:F.string().nullish()}),segment_text:F.string().nullish(),groundingChunkIndices:F.array(F.number()).nullish(),supportChunkIndices:F.array(F.number()).nullish(),confidenceScores:F.array(F.number()).nullish(),confidenceScore:F.array(F.number()).nullish()})).nullish(),retrievalMetadata:F.union([F.object({webDynamicRetrievalScore:F.number()}),F.object({})]).nullish()}),XO=F.object({category:F.string(),probability:F.string(),probabilityScore:F.number().nullish(),severity:F.string().nullish(),severityScore:F.number().nullish(),blocked:F.boolean().nullish()}),lV=F.object({candidates:F.array(F.object({content:ZO.nullish().or(F.object({}).strict()),finishReason:F.string().nullish(),safetyRatings:F.array(XO).nullish(),groundingMetadata:YO.nullish()})),usageMetadata:F.object({promptTokenCount:F.number().nullish(),candidatesTokenCount:F.number().nullish(),totalTokenCount:F.number().nullish()}).nullish()}),uV=F.object({candidates:F.array(F.object({content:ZO.nullish(),finishReason:F.string().nullish(),safetyRatings:F.array(XO).nullish(),groundingMetadata:YO.nullish()})).nullish(),usageMetadata:F.object({promptTokenCount:F.number().nullish(),candidatesTokenCount:F.number().nullish(),totalTokenCount:F.number().nullish()}).nullish()}),cV=F.object({responseModalities:F.array(F.enum(["TEXT","IMAGE"])).nullish()}),dV=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new NH({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=i2(await l2(this.config.headers),t),{responseHeaders:a,value:i}=await s2({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:u2,successfulResponseHandler:KO(fV),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},fV=F.object({embeddings:F.array(F.object({values:F.array(F.number())}))});function hV(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function JO(e={}){var t;const n=(t=tV(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":zH({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,u={})=>{var c;return new oV(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:$H,isSupportedUrl:hV,fetch:e.fetch})},i=(s,u={})=>new dV(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,u)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}JO();var QO="vercel.ai.error",pV=Symbol.for(QO),ej,mV=class tj extends Error{constructor({name:t,message:n,cause:r}){super(n),this[ej]=!0,this.name=t,this.cause=r}static isInstance(t){return tj.hasMarker(t,QO)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};ej=pV;var Ta=mV,nj="AI_APICallError",rj=`vercel.ai.error.${nj}`,gV=Symbol.for(rj),aj,vl=class extends Ta{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:u}){super({name:nj,message:e,cause:o}),this[aj]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=u}static isInstance(e){return Ta.hasMarker(e,rj)}};aj=gV;var ij="AI_EmptyResponseBodyError",oj=`vercel.ai.error.${ij}`,yV=Symbol.for(oj),sj,bV=class extends Ta{constructor({message:e="Empty response body"}={}){super({name:ij,message:e}),this[sj]=!0}static isInstance(e){return Ta.hasMarker(e,oj)}};sj=yV;function lj(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var uj="AI_InvalidArgumentError",cj=`vercel.ai.error.${uj}`,vV=Symbol.for(cj),dj,wV=class extends Ta{constructor({message:t,cause:n,argument:r}){super({name:uj,message:t,cause:n}),this[dj]=!0,this.argument=r}static isInstance(t){return Ta.hasMarker(t,cj)}};dj=vV;var fj="AI_InvalidPromptError",hj=`vercel.ai.error.${fj}`,_V=Symbol.for(hj),pj,xV=class extends Ta{constructor({prompt:e,message:t,cause:n}){super({name:fj,message:`Invalid prompt: ${t}`,cause:n}),this[pj]=!0,this.prompt=e}static isInstance(e){return Ta.hasMarker(e,hj)}};pj=_V;var mj="AI_InvalidResponseDataError",gj=`vercel.ai.error.${mj}`,SV=Symbol.for(gj),yj,z_=class extends Ta{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:mj,message:t}),this[yj]=!0,this.data=e}static isInstance(e){return Ta.hasMarker(e,gj)}};yj=SV;var bj="AI_JSONParseError",vj=`vercel.ai.error.${bj}`,EV=Symbol.for(vj),wj,vb=class extends Ta{constructor({text:e,cause:t}){super({name:bj,message:`JSON parsing failed: Text: ${e}.
Error message: ${lj(t)}`,cause:t}),this[wj]=!0,this.text=e}static isInstance(e){return Ta.hasMarker(e,vj)}};wj=EV;var _j="AI_LoadAPIKeyError",xj=`vercel.ai.error.${_j}`,kV=Symbol.for(xj),Sj,my=class extends Ta{constructor({message:e}){super({name:_j,message:e}),this[Sj]=!0}static isInstance(e){return Ta.hasMarker(e,xj)}};Sj=kV;var Ej="AI_TypeValidationError",kj=`vercel.ai.error.${Ej}`,CV=Symbol.for(kj),Cj,AV=class c2 extends Ta{constructor({value:t,cause:n}){super({name:Ej,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${lj(n)}`,cause:n}),this[Cj]=!0,this.value=t}static isInstance(t){return Ta.hasMarker(t,kj)}static wrap({value:t,cause:n}){return c2.isInstance(n)&&n.value===t?n:new c2({value:t,cause:n})}};Cj=CV;var wb=AV,Aj="AI_UnsupportedFunctionalityError",Tj=`vercel.ai.error.${Aj}`,TV=Symbol.for(Tj),Rj,ho=class extends Ta{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Aj,message:t}),this[Rj]=!0,this.functionality=e}static isInstance(e){return Ta.hasMarker(e,Tj)}};Rj=TV;let RV=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},rR=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function U_(e){}function NV(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=U_,onError:n=U_,onRetry:r=U_,onComment:a}=e;let i="",o=!0,s,u="",c="";function f(w){const _=o?w.replace(/^\xEF\xBB\xBF/,""):w,[x,S]=IV(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(w){if(w===""){g();return}if(w.startsWith(":")){a&&a(w.slice(w.startsWith(": ")?2:1));return}const _=w.indexOf(":");if(_!==-1){const x=w.slice(0,_),S=w[_+1]===" "?2:1,E=w.slice(_+S);m(x,E,w);return}m(w,"",w)}function m(w,_,x){switch(w){case"event":c=_;break;case"data":u=`${u}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new rR(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new rR(`Unknown field "${w.length>20?`${w.slice(0,20)}`:w}"`,{type:"unknown-field",field:w,value:_,line:x}));break}}function g(){u.length>0&&t({id:s,event:c||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",c=""}function v(w={}){i&&w.consume&&h(i),o=!0,s=void 0,u="",c="",i=""}return{feed:f,reset:v}}function IV(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class OV extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=NV({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var jV={};function _b(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Sv(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var DV=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=RV(n,t);if(e==null)return a;if(n.includes(r))throw new wV({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},gy=DV();function MV(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function q_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function PV({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new my({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new my({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=jV[t],e==null)throw new my({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new my({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var d2=Symbol.for("vercel.ai.validator");function FV(e){return{[d2]:!0,validate:e}}function LV(e){return typeof e=="object"&&e!==null&&d2 in e&&e[d2]===!0&&"validate"in e}function $V(e){return LV(e)?e:BV(e)}function BV(e){return FV(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function zV({value:e,schema:t}){const n=Nj({value:e,schema:t});if(!n.success)throw wb.wrap({value:e,cause:n.error});return n.value}function Nj({value:e,schema:t}){const n=$V(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:wb.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:wb.wrap({value:e,cause:r})}}}function UV({text:e,schema:t}){try{const n=Go.parse(e);return t==null?n:zV({value:n,schema:t})}catch(n){throw vb.isInstance(n)||wb.isInstance(n)?n:new vb({text:e,cause:n})}}function Ij({text:e,schema:t}){try{const n=Go.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Nj({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:vb.isInstance(n)?n:new vb({text:e,cause:n})}}}function H_(e){try{return Go.parse(e),!0}catch{return!1}}var qV=()=>globalThis.fetch,xb=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>HV({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),HV=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=qV()})=>{try{const s=await o(e,{method:"POST",headers:MV(t),body:n.content,signal:i}),u=Sv(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw q_(f)||vl.isInstance(f)?f:new vl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(q_(c)||vl.isInstance(c))?c:new vl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(q_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new vl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},VV=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Sv(r);if(o.trim()==="")return{responseHeaders:s,value:new vl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=UV({text:o,schema:e});return{responseHeaders:s,value:new vl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new vl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Oj=e=>async({response:t})=>{const n=Sv(t);if(t.body==null)throw new bV({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new OV).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Ij({text:r,schema:e}))}}))}},jj=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Ij({text:a,schema:e}),o=Sv(t);if(!i.success)throw new vl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:GV}=globalThis;function WV(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return GV(t)}function KV(e){return e==null?void 0:e.replace(/\/$/,"")}var ZV=Object.defineProperty,YV=Object.defineProperties,XV=Object.getOwnPropertyDescriptors,Sb=Object.getOwnPropertySymbols,Dj=Object.prototype.hasOwnProperty,Mj=Object.prototype.propertyIsEnumerable,aR=(e,t,n)=>t in e?ZV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ui=(e,t)=>{for(var n in t||(t={}))Dj.call(t,n)&&aR(e,n,t[n]);if(Sb)for(var n of Sb(t))Mj.call(t,n)&&aR(e,n,t[n]);return e},Ky=(e,t)=>YV(e,XV(t)),Eb=(e,t)=>{var n={};for(var r in e)Dj.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Sb)for(var r of Sb(e))t.indexOf(r)<0&&Mj.call(e,r)&&(n[r]=e[r]);return n};function fs(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function JV(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:fs(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=fs(s))!=null?n:fs(o[0].providerMetadata)});break}const u=fs(s),c=o.map(f=>{var h,m,g,v;switch(f.type){case"text":return{type:"text",text:f.text,cache_control:(h=fs(f.providerMetadata))!=null?h:u};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(m=f.mimeType)!=null?m:"image/jpeg"};base64,${WV(f.image)}`},cache_control:(g=fs(f.providerMetadata))!=null?g:u};case"file":return{type:"text",text:f.data instanceof URL?f.data.toString():f.data,cache_control:(v=fs(f.providerMetadata))!=null?v:u};default:{const w=f;throw new Error(`Unsupported content part type: ${w}`)}}});a.push({role:"user",content:c});break}case"assistant":{let u="";const c=[];for(const f of o)switch(f.type){case"text":{u+=f.text;break}case"tool-call":{c.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=f;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,cache_control:fs(s)});break}case"tool":{for(const u of o)a.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),cache_control:(r=fs(s))!=null?r:fs(u.providerMetadata)});break}default:{const u=i;throw new Error(`Unsupported role: ${u}`)}}return a}function iR(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function kb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var SE=F.object({error:F.object({message:F.string(),type:F.string(),param:F.any().nullable(),code:F.string().nullable()})}),Cb=VV({errorSchema:SE,errorToMessage:e=>e.error.message});function QV(e){return"parameters"in e}var eG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:u,responseFormat:c,topK:f,providerMetadata:h}){var m;const g=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},w=Ui(Ui(Ui({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:u,response_format:c,top_k:f,messages:JV(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return Ui(Ui({},w),rG(e));case"object-json":return Ky(Ui({},w),{response_format:{type:"json_object"}});case"object-tool":return Ky(Ui({},w),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new ho({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const u=this.getArgs(e),{responseHeaders:c,value:f}=await xb({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_b(this.config.headers(),e.headers),body:u,failedResponseHandler:Cb,successfulResponseHandler:jj(tG),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u,{messages:m}=h,g=Eb(h,["messages"]),v=f.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:f.id,modelId:f.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(w=>{var _;return{toolCallType:"function",toolCallId:(_=w.id)!=null?_:gy(),toolName:w.function.name,args:w.function.arguments}}),finishReason:kb(v.finish_reason),usage:{promptTokens:(i=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=f.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:iR(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await xb({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_b(this.config.headers(),e.headers),body:Ky(Ui({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Cb,successfulResponseHandler:Oj(nG),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=Eb(a,["messages"]),s=[];let u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,v,w,_,x,S,E,C,A,j,O,N;if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const z=h.value;if("error"in z){u="error",m.enqueue({type:"error",error:z.error});return}z.id&&m.enqueue({type:"response-metadata",id:z.id}),z.model&&m.enqueue({type:"response-metadata",modelId:z.model}),z.usage!=null&&(c={promptTokens:z.usage.prompt_tokens,completionTokens:z.usage.completion_tokens});const H=z.choices[0];if((H==null?void 0:H.finish_reason)!=null&&(u=kb(H.finish_reason)),(H==null?void 0:H.delta)==null)return;const Q=H.delta;Q.content!=null&&m.enqueue({type:"text-delta",textDelta:Q.content}),Q.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:Q.reasoning});const P=iR(H==null?void 0:H.logprobs);if(P!=null&&P.length&&(f===void 0&&(f=[]),f.push(...P)),Q.tool_calls!=null)for(const Z of Q.tool_calls){const V=Z.index;if(s[V]==null){if(Z.type!=="function")throw new z_({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new z_({data:Z,message:"Expected 'id' to be a string."});if(((g=Z.function)==null?void 0:g.name)==null)throw new z_({data:Z,message:"Expected 'function.name' to be a string."});s[V]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ae=s[V];if(ae==null)throw new Error("Tool call is missing");((w=ae.function)==null?void 0:w.name)!=null&&((_=ae.function)==null?void 0:_.arguments)!=null&&H_(ae.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ae.id)!=null?x:gy(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const te=s[V];if(te==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(te.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:te.id,toolName:te.function.name,argsTextDelta:(A=Z.function.arguments)!=null?A:""}),((j=te.function)==null?void 0:j.name)!=null&&((O=te.function)==null?void 0:O.arguments)!=null&&H_(te.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=te.id)!=null?N:gy(),toolName:te.function.name,args:te.function.arguments}),te.sent=!0)}},flush(h){var m;if(u==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:gy(),toolName:g.function.name,args:H_(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},Pj=F.object({id:F.string().optional(),model:F.string().optional(),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number(),total_tokens:F.number()}).nullish()}),tG=Pj.extend({choices:F.array(F.object({message:F.object({role:F.literal("assistant"),content:F.string().nullable().optional(),reasoning:F.string().nullable().optional(),tool_calls:F.array(F.object({id:F.string().optional().nullable(),type:F.literal("function"),function:F.object({name:F.string(),arguments:F.string()})})).optional()}),index:F.number(),logprobs:F.object({content:F.array(F.object({token:F.string(),logprob:F.number(),top_logprobs:F.array(F.object({token:F.string(),logprob:F.number()}))})).nullable()}).nullable().optional(),finish_reason:F.string().optional().nullable()}))}),nG=F.union([Pj.extend({choices:F.array(F.object({delta:F.object({role:F.enum(["assistant"]).optional(),content:F.string().nullish(),reasoning:F.string().nullish().optional(),tool_calls:F.array(F.object({index:F.number(),id:F.string().nullish(),type:F.literal("function").optional(),function:F.object({name:F.string().nullish(),arguments:F.string().nullish()})})).nullish()}).nullish(),logprobs:F.object({content:F.array(F.object({token:F.string(),logprob:F.number(),top_logprobs:F.array(F.object({token:F.string(),logprob:F.number()}))})).nullable()}).nullish(),finish_reason:F.string().nullable().optional(),index:F.number()}))}),SE]);function rG(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>QV(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function aG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new xV({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new ho({functionality:"images"});case"file":throw new ho({functionality:"file attachments"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new ho({functionality:"tool-call messages"});case"reasoning":throw new ho({functionality:"reasoning messages"});case"redacted-reasoning":throw new ho({functionality:"redacted reasoning messages"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new ho({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function oR(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var iG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:u,responseFormat:c,topK:f,stopSequences:h,providerMetadata:m}){var g,v;const w=e.type,_=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:x}=aG({prompt:n,inputFormat:t}),S=Ui(Ui(Ui({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:u,stop:h,response_format:c,top_k:f,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(w){case"regular":{if((v=e.tools)!=null&&v.length)throw new ho({functionality:"tools"});if(e.toolChoice)throw new ho({functionality:"toolChoice"});return S}case"object-json":throw new ho({functionality:"object-json mode"});case"object-tool":throw new ho({functionality:"object-tool mode"});default:{const E=w;throw new ho({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:u}=await xb({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_b(this.config.headers(),e.headers),body:o,failedResponseHandler:Cb,successfulResponseHandler:jj(sR),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o,{prompt:f}=c,h=Eb(c,["prompt"]);if("error"in u)throw new Error(`${u.error.message}`);const m=u.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:u.id,modelId:u.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=u.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=u.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:kb(m.finish_reason),logprobs:oR(m.logprobs),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await xb({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_b(this.config.headers(),e.headers),body:Ky(Ui({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Cb,successfulResponseHandler:Oj(sR),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=Eb(a,["prompt"]);let s="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(f,h){if(!f.success){s="error",h.enqueue({type:"error",error:f.error});return}const m=f.value;if("error"in m){s="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(u={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=kb(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=oR(g==null?void 0:g.logprobs);v!=null&&v.length&&(c===void 0&&(c=[]),c.push(...v))},flush(f){f.enqueue({type:"finish",finishReason:s,logprobs:c,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},sR=F.union([F.object({id:F.string().optional(),model:F.string().optional(),choices:F.array(F.object({text:F.string(),reasoning:F.string().nullish().optional(),finish_reason:F.string().nullish(),index:F.number(),logprobs:F.object({tokens:F.array(F.string()),token_logprobs:F.array(F.number()),top_logprobs:F.array(F.record(F.string(),F.number())).nullable()}).nullable().optional()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()}).optional().nullable()}),SE]);function Fj(e={}){var t,n,r;const a=(n=KV((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>Ui({Authorization:`Bearer ${PV({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,m={})=>new eG(h,m,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m={})=>new iG(h,m,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?u(h,m):s(h,m)},f=function(h,m){return c(h,m)};return f.languageModel=c,f.chat=s,f.completion=u,f}Fj({compatibility:"strict"});var jc={},V_={},lR;function uR(){return lR||(lR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(V_)),V_}var cR;function oG(){return cR||(cR=1,function(e){var t=jc&&jc.__createBinding||(Object.create?function(c,f,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,m,g)}:function(c,f,h,m){m===void 0&&(m=h),c[m]=f[h]}),n=jc&&jc.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=uR();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(uR(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return s(c.trim(),f)}e.parseJSON=o;const s=(c,f)=>{const h=c.length;let m=0;const g=A=>{throw new a(`${A} at position ${m}`)},v=A=>{throw new i(`${A} at position ${m}`)},w=()=>(C(),m>=h&&g("Unexpected end of input"),c[m]==='"'?_():c[m]==="{"?x():c[m]==="["?S():c.substring(m,m+4)==="null"||r.Allow.NULL&f&&h-m<4&&"null".startsWith(c.substring(m))?(m+=4,null):c.substring(m,m+4)==="true"||r.Allow.BOOL&f&&h-m<4&&"true".startsWith(c.substring(m))?(m+=4,!0):c.substring(m,m+5)==="false"||r.Allow.BOOL&f&&h-m<5&&"false".startsWith(c.substring(m))?(m+=5,!1):c.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&f&&h-m<8&&"Infinity".startsWith(c.substring(m))?(m+=8,1/0):c.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-m&&h-m<9&&"-Infinity".startsWith(c.substring(m))?(m+=9,-1/0):c.substring(m,m+3)==="NaN"||r.Allow.NAN&f&&h-m<3&&"NaN".startsWith(c.substring(m))?(m+=3,NaN):E()),_=()=>{const A=m;let j=!1;for(m++;m<h&&(c[m]!=='"'||j&&c[m-1]==="\\");)j=c[m]==="\\"?!j:!1,m++;if(c.charAt(m)=='"')try{return JSON.parse(c.substring(A,++m-Number(j)))}catch(O){v(String(O))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(A,m-Number(j))+'"')}catch{return JSON.parse(c.substring(A,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{m++,C();const A={};try{for(;c[m]!=="}";){if(C(),m>=h&&r.Allow.OBJ&f)return A;const j=_();C(),m++;try{const O=w();A[j]=O}catch(O){if(r.Allow.OBJ&f)return A;throw O}C(),c[m]===","&&m++}}catch{if(r.Allow.OBJ&f)return A;g("Expected '}' at end of object")}return m++,A},S=()=>{m++;const A=[];try{for(;c[m]!=="]";)A.push(w()),C(),c[m]===","&&m++}catch{if(r.Allow.ARR&f)return A;g("Expected ']' at end of array")}return m++,A},E=()=>{if(m===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(j){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(j))}}const A=m;for(c[m]==="-"&&m++;c[m]&&",]}".indexOf(c[m])===-1;)m++;m==h&&!(r.Allow.NUM&f)&&g("Unterminated number literal");try{return JSON.parse(c.substring(A,m))}catch{c.substring(A,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(A,c.lastIndexOf("e")))}catch(O){v(String(O))}}},C=()=>{for(;m<h&&` 
\r	`.includes(c[m]);)m++};return w()},u=o;e.parse=u}(jc)),jc}var sG=oG();function G_(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new br({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(Bf(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var lG=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=sG.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:vs(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function uG({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var cG=F.object({error:F.object({code:F.string().nullable(),message:F.string(),param:F.any().nullable(),type:F.string()})}),f2=nO({errorSchema:cG,errorToMessage:e=>e.error.message});function dG({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new br({functionality:`Unsupported tool choice type: ${s}`})}}}function fG(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var hG=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},pG=e=>async({response:t})=>{const n=l0(t);if(t.body===null)throw new pE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new hG).pipeThrough(new TransformStream({transform(r,a){a.enqueue(Zc({schema:e,text:r}))}}))}},mG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:u,topK:c,topP:f}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:fG({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:u,tfs_z:this.settings.tfsZ,top_k:c,top_p:f,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:w}=dG({mode:n});return{args:{...g,messages:G_(a),tools:v},type:h,warnings:[...m,...w]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:G_(a)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:G_(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Bo({abortSignal:e.abortSignal,body:i,failedResponseHandler:f2,fetch:this.config.fetch,headers:Ts(this.config.headers(),e.headers),successfulResponseHandler:sd(gG),url:`${this.config.baseURL}/chat`}),{messages:u,...c}=i,f=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:vs(),toolCallType:"function",toolName:h.function.name}});return{finishReason:uG({finishReason:s.done_reason,hasToolCalls:f!==void 0&&f.length>0}),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:f,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...g.response}),g.text&&w.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)w.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),w.enqueue({type:"tool-call",..._});w.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),w.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Bo({abortSignal:e.abortSignal,body:t,failedResponseHandler:f2,fetch:this.config.fetch,headers:Ts(this.config.headers(),e.headers),successfulResponseHandler:pG(yG),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,u=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new lG({tools:u,type:n});let f="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:f,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const w=g.value;if(w.done){f=c.finish({controller:v}),h={completionTokens:w.eval_count,promptTokens:w.prompt_eval_count||0};return}m&&c.parse({controller:v,delta:w.message.content})||w.message.content!==null&&v.enqueue({textDelta:w.message.content,type:"text-delta"})}})),warnings:r}}},gG=F.object({created_at:F.string(),done:F.literal(!0),done_reason:F.string().optional().nullable(),eval_count:F.number(),eval_duration:F.number(),load_duration:F.number().optional(),message:F.object({content:F.string(),role:F.string(),tool_calls:F.array(F.object({function:F.object({arguments:F.record(F.any()),name:F.string()}),id:F.string().optional()})).optional().nullable()}),model:F.string(),prompt_eval_count:F.number().optional(),prompt_eval_duration:F.number().optional(),total_duration:F.number()}),yG=F.discriminatedUnion("done",[F.object({created_at:F.string(),done:F.literal(!1),message:F.object({content:F.string(),role:F.string()}),model:F.string()}),F.object({created_at:F.string(),done:F.literal(!0),eval_count:F.number(),eval_duration:F.number(),load_duration:F.number().optional(),model:F.string(),prompt_eval_count:F.number().optional(),prompt_eval_duration:F.number().optional(),total_duration:F.number()})]),bG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new gE({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Bo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:f2,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:sd(vG),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},vG=F.object({embeddings:F.array(F.array(F.number())),prompt_eval_count:F.number().nullable()});function Lj(e={}){var t;const n=(t=aO(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,u={})=>new mG(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,u={})=>new bG(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,u){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,u)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}Lj();let wG=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function Hf(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function _G(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=xG(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function xG(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Ev(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var SG=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=wG(n,t);if(e==null)return a;if(n.includes(r))throw new mE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},W_=SG();function EG(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function K_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var h2=Symbol.for("vercel.ai.validator");function kG(e){return{[h2]:!0,validate:e}}function CG(e){return typeof e=="object"&&e!==null&&h2 in e&&e[h2]===!0&&"validate"in e}function AG(e){return CG(e)?e:TG(e)}function TG(e){return kG(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function RG({value:e,schema:t}){const n=$j({value:e,schema:t});if(!n.success)throw ju.wrap({value:e,cause:n.error});return n.value}function $j({value:e,schema:t}){const n=AG(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ju.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ju.wrap({value:e,cause:r})}}}function NG({text:e,schema:t}){try{const n=Go.parse(e);return t==null?n:RG({value:n,schema:t})}catch(n){throw Ou.isInstance(n)||ju.isInstance(n)?n:new Ou({text:e,cause:n})}}function Bj({text:e,schema:t}){try{const n=Go.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=$j({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Ou.isInstance(n)?n:new Ou({text:e,cause:n})}}}function dR(e){try{return Go.parse(e),!0}catch{return!1}}var IG=()=>globalThis.fetch,Vf=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>OG({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),OG=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=IG()})=>{try{const s=await o(e,{method:"POST",headers:EG(t),body:n.content,signal:i}),u=Ev(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw K_(f)||ha.isInstance(f)?f:new ha({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(K_(c)||ha.isInstance(c))?c:new ha({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(K_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new ha({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},kv=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Ev(r);if(o.trim()==="")return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=NG({text:o,schema:e});return{responseHeaders:s,value:new ha({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},zj=e=>async({response:t})=>{const n=Ev(t);if(t.body==null)throw new pE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(_G()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Bj({text:r,schema:e}))}}))}},Cv=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Bj({text:a,schema:e}),o=Ev(t);if(!i.success)throw new ha({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:jG}=globalThis;function DG(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return jG(t)}function MG(e){return e==null?void 0:e.replace(/\/$/,"")}function zp(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function PG(e){const t=[];for(const{role:n,content:r,...a}of e){const i=zp({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...zp(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const u=zp(o);switch(o.type){case"text":return{type:"text",text:o.text,...u};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${DG(o.image)}`},...u};case"file":throw new br({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const u of r){const c=zp(u);switch(u.type){case"text":{o+=u.text;break}case"tool-call":{s.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)},...c});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=zp(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function Ab({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Tb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var FG=F.object({error:F.object({message:F.string(),type:F.string().nullish(),param:F.any().nullish(),code:F.union([F.string(),F.number()]).nullish()})}),Av={errorSchema:FG,errorToMessage:e=>e.error.message};function LG({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)u.type==="provider-defined"?a.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const u=s;throw new br({functionality:`Unsupported tool choice type: ${u}`})}}}var $G=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Av;this.chunkSchema=zG(i.errorSchema),this.failedResponseHandler=kv(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:u,stopSequences:c,responseFormat:f,seed:h}){var m,g;const v=e.type,w=[];i!=null&&w.push({type:"unsupported-setting",setting:"topK"}),(f==null?void 0:f.type)==="json"&&f.schema!=null&&!this.supportsStructuredOutputs&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(f==null?void 0:f.type)==="json"?this.supportsStructuredOutputs===!0&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,name:(m=f.name)!=null?m:"response",description:f.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...u==null?void 0:u[this.providerOptionsName],messages:PG(t)};switch(v){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=LG({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...w,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:w};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:w};default:{const x=v;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u,c;const{args:f,warnings:h}=this.getArgs({...e}),m=JSON.stringify(f),{responseHeaders:g,value:v,rawValue:w}=await Vf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Hf(this.config.headers(),e.headers),body:f,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Cv(BG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=f,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:w});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:W_(),toolName:C.function.name,args:C.function.arguments}}),finishReason:Tb(S.finish_reason),usage:{promptTokens:(s=(o=v.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(c=(u=v.usage)==null?void 0:u.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:w},response:Ab(v),warnings:h,request:{body:m}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const x of v.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&_.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const x of v.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),_.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await Vf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Hf(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:zj(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=n,f=[];let h="unknown",m={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,C,A,j,O,N,z,H,Q,P,Z;if(!v.success){h="error",w.enqueue({type:"error",error:v.error});return}const V=v.value;if(i==null||i.processChunk(v.rawValue),"error"in V){h="error",w.enqueue({type:"error",error:V.error.message});return}g&&(g=!1,w.enqueue({type:"response-metadata",...Ab(V)})),V.usage!=null&&(m={promptTokens:(_=V.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=V.usage.completion_tokens)!=null?x:void 0});const te=V.choices[0];if((te==null?void 0:te.finish_reason)!=null&&(h=Tb(te.finish_reason)),(te==null?void 0:te.delta)==null)return;const ae=te.delta;if(ae.reasoning_content!=null&&w.enqueue({type:"reasoning",textDelta:ae.reasoning_content}),ae.content!=null&&w.enqueue({type:"text-delta",textDelta:ae.content}),ae.tool_calls!=null)for(const re of ae.tool_calls){const Y=re.index;if(f[Y]==null){if(re.type!=="function")throw new If({data:re,message:"Expected 'function' type."});if(re.id==null)throw new If({data:re,message:"Expected 'id' to be a string."});if(((S=re.function)==null?void 0:S.name)==null)throw new If({data:re,message:"Expected 'function.name' to be a string."});f[Y]={id:re.id,type:"function",function:{name:re.function.name,arguments:(E=re.function.arguments)!=null?E:""},hasFinished:!1};const G=f[Y];((C=G.function)==null?void 0:C.name)!=null&&((A=G.function)==null?void 0:A.arguments)!=null&&(G.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:G.function.arguments}),dR(G.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(j=G.id)!=null?j:W_(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0));continue}const ne=f[Y];ne.hasFinished||(((O=re.function)==null?void 0:O.arguments)!=null&&(ne.function.arguments+=(z=(N=re.function)==null?void 0:N.arguments)!=null?z:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ne.id,toolName:ne.function.name,argsTextDelta:(H=re.function.arguments)!=null?H:""}),((Q=ne.function)==null?void 0:Q.name)!=null&&((P=ne.function)==null?void 0:P.arguments)!=null&&dR(ne.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=ne.id)!=null?Z:W_(),toolName:ne.function.name,args:ne.function.arguments}),ne.hasFinished=!0))}},flush(v){var w,_;const x=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(w=m.promptTokens)!=null?w:NaN,completionTokens:(_=m.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:a}}}},BG=F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({message:F.object({role:F.literal("assistant").nullish(),content:F.string().nullish(),reasoning_content:F.string().nullish(),tool_calls:F.array(F.object({id:F.string().nullish(),type:F.literal("function"),function:F.object({name:F.string(),arguments:F.string()})})).nullish()}),finish_reason:F.string().nullish()})),usage:F.object({prompt_tokens:F.number().nullish(),completion_tokens:F.number().nullish()}).nullish()}),zG=e=>F.union([F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({delta:F.object({role:F.enum(["assistant"]).nullish(),content:F.string().nullish(),reasoning_content:F.string().nullish(),tool_calls:F.array(F.object({index:F.number(),id:F.string().nullish(),type:F.literal("function").optional(),function:F.object({name:F.string().nullish(),arguments:F.string().nullish()})})).nullish()}).nullish(),finish_reason:F.string().nullish()})),usage:F.object({prompt_tokens:F.number().nullish(),completion_tokens:F.number().nullish()}).nullish()}),e]);function UG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new pl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new br({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new br({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new br({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var qG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Av;this.chunkSchema=VG(a.errorSchema),this.failedResponseHandler=kv(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,providerMetadata:m}){var g;const v=e.type,w=[];o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=UG({prompt:n,inputFormat:t}),S=[...x??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new br({functionality:"tools"});if(e.toolChoice)throw new br({functionality:"toolChoice"});return{args:E,warnings:w}}case"object-json":throw new br({functionality:"object-json mode"});case"object-tool":throw new br({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await Vf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Hf(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Cv(HG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:f,...h}=i,m=u.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=u.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=u.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:Tb(m.finish_reason),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s,body:c},response:Ab(u),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await Vf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Hf(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:zj(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){u="error",m.enqueue({type:"error",error:g.error});return}f&&(f=!1,m.enqueue({type:"response-metadata",...Ab(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(u=Tb(v.finish_reason)),(v==null?void 0:v.text)!=null&&m.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},HG=F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({text:F.string(),finish_reason:F.string()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()}).nullish()}),VG=e=>F.union([F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({text:F.string(),finish_reason:F.string().nullish(),index:F.number()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()}).nullish()}),e]),GG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new gE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await Vf({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Hf(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:kv((r=this.config.errorStructure)!=null?r:Av),successfulResponseHandler:Cv(WG),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},WG=F.object({data:F.array(F.object({embedding:F.array(F.number())})),usage:F.object({prompt_tokens:F.number()}).nullish()}),KG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:w,responseHeaders:_}=await Vf({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Hf(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:kv((m=this.config.errorStructure)!=null?m:Av),successfulResponseHandler:Cv(ZG),abortSignal:s,fetch:this.config.fetch});return{images:w.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:_}}}},ZG=F.object({data:F.array(F.object({b64_json:F.string()}))});function YG(e){const t=MG(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>o(h,m),o=(h,m={})=>new $G(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,m={})=>new qG(h,m,a("completion")),u=(h,m={})=>new GG(h,m,a("embedding")),c=(h,m={})=>new KG(h,m,a("image")),f=(h,m)=>i(h,m);return f.languageModel=i,f.chatModel=o,f.completionModel=s,f.textEmbeddingModel=u,f.imageModel=c,f}const Cf=(e,t)=>`${e}:${t}`,c0=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},EE=e=>e==="openai"||e==="openrouter"||e==="google",kE=e=>e==="ollama"||e==="openai-compatible",Qp=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",Uj=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],p2={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},qj=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function XG(e,t,n){try{switch(e.type){case"openai":return yO({apiKey:n})(t);case"google":return JO({apiKey:n})(t);case"openrouter":return Fj({apiKey:n})(t);case"ollama":return Lj({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return YG({baseURL:qj(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function JG(e,t,n){const r=e.type,i=(e.fetchedModels&&e.fetchedModels.length>0?e.fetchedModels:p2[r]||[]).find(c=>c.id===t);if(!i)return;const o=XG(e,t,n);if(!o)return;const s=e.type==="openai",u=["openai","google","openrouter"].includes(e.type);return{id:Cf(e.id,t),name:i.name,providerId:e.id,providerName:e.name,instance:o,supportsImageGeneration:s,supportsToolCalling:u,metadata:i.metadata}}var d0=K4();const Hj=Qa(d0);function QG(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const eW=e=>{switch(e){case"success":return rW;case"info":return iW;case"warning":return aW;case"error":return oW;default:return null}},tW=Array(12).fill(0),nW=({visible:e,className:t})=>wt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},wt.createElement("div",{className:"sonner-spinner"},tW.map((n,r)=>wt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),rW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),aW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),iW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),oW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},wt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),wt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),lW=()=>{const[e,t]=wt.useState(document.hidden);return wt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let m2=1;class uW{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:m2++,o=this.toasts.find(u=>u.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:r}),{...u,...t,id:i,dismissible:s,title:r}):u):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async c=>{if(o=["resolve",c],wt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(dW(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...v})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof f=="object"&&!wt.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((c,f)=>s.then(()=>o[0]==="reject"?f(o[1]):c(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||m2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _i=new uW,cW=(e,t)=>{const n=(t==null?void 0:t.id)||m2++;return _i.addToast({title:e,...t,id:n}),n},dW=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",fW=cW,hW=()=>_i.toasts,pW=()=>_i.getActiveToasts(),ut=Object.assign(fW,{success:_i.success,info:_i.info,warning:_i.warning,error:_i.error,custom:_i.custom,message:_i.message,promise:_i.promise,dismiss:_i.dismiss,loading:_i.loading},{getHistory:hW,getToasts:pW});QG("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function yy(e){return e.label!==void 0}const mW=3,gW="24px",yW="16px",fR=4e3,bW=356,vW=14,wW=45,_W=200;function hs(...e){return e.filter(Boolean).join(" ")}function xW(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const SW=e=>{var t,n,r,a,i,o,s,u,c;const{invert:f,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:w,heights:_,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:A,closeButton:j,style:O,cancelButtonStyle:N,actionButtonStyle:z,className:H="",descriptionClassName:Q="",duration:P,position:Z,gap:V,expandByDefault:te,classNames:ae,icons:re,closeButtonAriaLabel:Y="Close toast"}=e,[ne,G]=wt.useState(null),[X,oe]=wt.useState(null),[ye,we]=wt.useState(!1),[fe,Me]=wt.useState(!1),[Fe,Oe]=wt.useState(!1),[Re,ze]=wt.useState(!1),[He,Te]=wt.useState(!1),[Ce,B]=wt.useState(0),[ke,Ae]=wt.useState(0),ce=wt.useRef(h.duration||P||fR),se=wt.useRef(null),J=wt.useRef(null),xe=x===0,Pe=x+1<=w,Se=h.type,Ze=h.dismissible!==!1,Et=h.className||"",at=h.descriptionClassName||"",_t=wt.useMemo(()=>_.findIndex(De=>De.toastId===h.id)||0,[_,h.id]),Nt=wt.useMemo(()=>{var De;return(De=h.closeButton)!=null?De:j},[h.closeButton,j]),Rt=wt.useMemo(()=>h.duration||P||fR,[h.duration,P]),Kt=wt.useRef(0),pe=wt.useRef(0),R=wt.useRef(0),q=wt.useRef(null),[de,Ie]=Z.split("-"),be=wt.useMemo(()=>_.reduce((De,Je,It)=>It>=_t?De:De+Je.height,0),[_,_t]),Ee=lW(),le=h.invert||f,ft=Se==="loading";pe.current=wt.useMemo(()=>_t*V+be,[_t,be]),wt.useEffect(()=>{ce.current=Rt},[Rt]),wt.useEffect(()=>{we(!0)},[]),wt.useEffect(()=>{const De=J.current;if(De){const Je=De.getBoundingClientRect().height;return Ae(Je),v(It=>[{toastId:h.id,height:Je,position:h.position},...It]),()=>v(It=>It.filter(me=>me.toastId!==h.id))}},[v,h.id]),wt.useLayoutEffect(()=>{if(!ye)return;const De=J.current,Je=De.style.height;De.style.height="auto";const It=De.getBoundingClientRect().height;De.style.height=Je,Ae(It),v(me=>me.find($=>$.toastId===h.id)?me.map($=>$.toastId===h.id?{...$,height:It}:$):[{toastId:h.id,height:It,position:h.position},...me])},[ye,h.title,h.description,v,h.id]);const vt=wt.useCallback(()=>{Me(!0),B(pe.current),v(De=>De.filter(Je=>Je.toastId!==h.id)),setTimeout(()=>{C(h)},_W)},[h,C,v,pe]);wt.useEffect(()=>{if(h.promise&&Se==="loading"||h.duration===1/0||h.type==="loading")return;let De;return E||g||Ee?(()=>{if(R.current<Kt.current){const me=new Date().getTime()-Kt.current;ce.current=ce.current-me}R.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(Kt.current=new Date().getTime(),De=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},ce.current))})(),()=>clearTimeout(De)},[E,g,h,Se,Ee,vt]),wt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function D(){var De;if(re!=null&&re.loading){var Je;return wt.createElement("div",{className:hs(ae==null?void 0:ae.loader,h==null||(Je=h.classNames)==null?void 0:Je.loader,"sonner-loader"),"data-visible":Se==="loading"},re.loading)}return wt.createElement(nW,{className:hs(ae==null?void 0:ae.loader,h==null||(De=h.classNames)==null?void 0:De.loader),visible:Se==="loading"})}const $e=h.icon||(re==null?void 0:re[Se])||eW(Se);var st,ge;return wt.createElement("li",{tabIndex:0,ref:J,className:hs(H,Et,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[Se],h==null||(n=h.classNames)==null?void 0:n[Se]),"data-sonner-toast":"","data-rich-colors":(st=h.richColors)!=null?st:A,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":ye,"data-promise":!!h.promise,"data-swiped":He,"data-removed":fe,"data-visible":Pe,"data-y-position":de,"data-x-position":Ie,"data-index":x,"data-front":xe,"data-swiping":Fe,"data-dismissible":Ze,"data-type":Se,"data-invert":le,"data-swipe-out":Re,"data-swipe-direction":X,"data-expanded":!!(E||te&&ye),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${fe?Ce:pe.current}px`,"--initial-height":te?"auto":`${ke}px`,...O,...h.style},onDragEnd:()=>{Oe(!1),G(null),q.current=null},onPointerDown:De=>{ft||!Ze||(se.current=new Date,B(pe.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Oe(!0),q.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,Je,It;if(Re||!Ze)return;q.current=null;const me=Number(((De=J.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),U=Number(((Je=J.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$=new Date().getTime()-((It=se.current)==null?void 0:It.getTime()),W=ne==="x"?me:U,he=Math.abs(W)/$;if(Math.abs(W)>=wW||he>.11){B(pe.current),h.onDismiss==null||h.onDismiss.call(h,h),oe(ne==="x"?me>0?"right":"left":U>0?"down":"up"),vt(),ze(!0);return}else{var Ne,Ve;(Ne=J.current)==null||Ne.style.setProperty("--swipe-amount-x","0px"),(Ve=J.current)==null||Ve.style.setProperty("--swipe-amount-y","0px")}Te(!1),Oe(!1),G(null)},onPointerMove:De=>{var Je,It,me;if(!q.current||!Ze||((Je=window.getSelection())==null?void 0:Je.toString().length)>0)return;const $=De.clientY-q.current.y,W=De.clientX-q.current.x;var he;const Ne=(he=e.swipeDirections)!=null?he:xW(Z);!ne&&(Math.abs(W)>1||Math.abs($)>1)&&G(Math.abs(W)>Math.abs($)?"x":"y");let Ve={x:0,y:0};const gt=Gt=>1/(1.5+Math.abs(Gt)/20);if(ne==="y"){if(Ne.includes("top")||Ne.includes("bottom"))if(Ne.includes("top")&&$<0||Ne.includes("bottom")&&$>0)Ve.y=$;else{const Gt=$*gt($);Ve.y=Math.abs(Gt)<Math.abs($)?Gt:$}}else if(ne==="x"&&(Ne.includes("left")||Ne.includes("right")))if(Ne.includes("left")&&W<0||Ne.includes("right")&&W>0)Ve.x=W;else{const Gt=W*gt(W);Ve.x=Math.abs(Gt)<Math.abs(W)?Gt:W}(Math.abs(Ve.x)>0||Math.abs(Ve.y)>0)&&Te(!0),(It=J.current)==null||It.style.setProperty("--swipe-amount-x",`${Ve.x}px`),(me=J.current)==null||me.style.setProperty("--swipe-amount-y",`${Ve.y}px`)}},Nt&&!h.jsx&&Se!=="loading"?wt.createElement("button",{"aria-label":Y,"data-disabled":ft,"data-close-button":!0,onClick:ft||!Ze?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:hs(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=re==null?void 0:re.close)!=null?ge:sW):null,(Se||h.icon||h.promise)&&h.icon!==null&&((re==null?void 0:re[Se])!==null||h.icon)?wt.createElement("div",{"data-icon":"",className:hs(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||D():null,h.type!=="loading"?$e:null):null,wt.createElement("div",{"data-content":"",className:hs(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},wt.createElement("div",{"data-title":"",className:hs(ae==null?void 0:ae.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?wt.createElement("div",{"data-description":"",className:hs(Q,at,ae==null?void 0:ae.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),wt.isValidElement(h.cancel)?h.cancel:h.cancel&&yy(h.cancel)?wt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||N,onClick:De=>{yy(h.cancel)&&Ze&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,De),vt())},className:hs(ae==null?void 0:ae.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,wt.isValidElement(h.action)?h.action:h.action&&yy(h.action)?wt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||z,onClick:De=>{yy(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,De),!De.defaultPrevented&&vt())},className:hs(ae==null?void 0:ae.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function hR(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function EW(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?yW:gW;function u(c){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):u(s)}),n}const kW=wt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:u,offset:c,mobileOffset:f,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:w=mW,toastOptions:_,dir:x=hR(),gap:S=vW,icons:E,containerAriaLabel:C="Notifications"}=t,[A,j]=wt.useState([]),O=wt.useMemo(()=>Array.from(new Set([a].concat(A.filter(X=>X.position).map(X=>X.position)))),[A,a]),[N,z]=wt.useState([]),[H,Q]=wt.useState(!1),[P,Z]=wt.useState(!1),[V,te]=wt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=wt.useRef(null),re=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=wt.useRef(null),ne=wt.useRef(!1),G=wt.useCallback(X=>{j(oe=>{var ye;return(ye=oe.find(we=>we.id===X.id))!=null&&ye.delete||_i.dismiss(X.id),oe.filter(({id:we})=>we!==X.id)})},[]);return wt.useEffect(()=>_i.subscribe(X=>{if(X.dismiss){requestAnimationFrame(()=>{j(oe=>oe.map(ye=>ye.id===X.id?{...ye,delete:!0}:ye))});return}setTimeout(()=>{Hj.flushSync(()=>{j(oe=>{const ye=oe.findIndex(we=>we.id===X.id);return ye!==-1?[...oe.slice(0,ye),{...oe[ye],...X},...oe.slice(ye+1)]:[X,...oe]})})})}),[A]),wt.useEffect(()=>{if(h!=="system"){te(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window>"u")return;const X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:oe})=>{te(oe?"dark":"light")})}catch{X.addListener(({matches:ye})=>{try{te(ye?"dark":"light")}catch(we){console.error(we)}})}},[h]),wt.useEffect(()=>{A.length<=1&&Q(!1)},[A]),wt.useEffect(()=>{const X=oe=>{var ye;if(i.every(Me=>oe[Me]||oe.code===Me)){var fe;Q(!0),(fe=ae.current)==null||fe.focus()}oe.code==="Escape"&&(document.activeElement===ae.current||(ye=ae.current)!=null&&ye.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),wt.useEffect(()=>{if(ae.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,ne.current=!1)}},[ae.current]),wt.createElement("section",{ref:n,"aria-label":`${C} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((X,oe)=>{var ye;const[we,fe]=X.split("-");return A.length?wt.createElement("ol",{key:X,dir:x==="auto"?hR():x,tabIndex:-1,ref:ae,className:u,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":we,"data-lifted":H&&A.length>1&&!o,"data-x-position":fe,style:{"--front-toast-height":`${((ye=N[0])==null?void 0:ye.height)||0}px`,"--width":`${bW}px`,"--gap":`${S}px`,...v,...EW(c,f)},onBlur:Me=>{ne.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(ne.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,Y.current=Me.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{P||Q(!1)},onDragEnd:()=>Q(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},A.filter(Me=>!Me.position&&oe===0||Me.position===X).map((Me,Fe)=>{var Oe,Re;return wt.createElement(SW,{key:Me.id,icons:E,index:Fe,toast:Me,defaultRichColors:m,duration:(Oe=_==null?void 0:_.duration)!=null?Oe:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:w,closeButton:(Re=_==null?void 0:_.closeButton)!=null?Re:s,interacting:P,position:X,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:G,toasts:A.filter(ze=>ze.position==Me.position),heights:N.filter(ze=>ze.position==Me.position),setHeights:z,expandByDefault:o,gap:S,expanded:H,swipeDirections:t.swipeDirections})})):null}))}),Up=new Map,CW=5*60*1e3;async function AW(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Up.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,u,c;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":{if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break}case"openrouter":{if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break}case"ollama":{const f=((u=e.baseURL)==null?void 0:u.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",f).toString(),delete o.Authorization;break}case"openai-compatible":{if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const f=qj(e.baseURL);i=new URL("models",f.endsWith("/")?f:f+"/").toString();break}case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(f){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,f),ut.error(`Invalid Base URL for ${e.name}: ${f instanceof Error?f.message:String(f)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const f=await fetch(i,{headers:o});if(!f.ok){let g=`(${f.status} ${f.statusText})`;try{const v=await f.text();try{const w=JSON.parse(v);g=((c=w==null?void 0:w.error)==null?void 0:c.message)||(w==null?void 0:w.message)||v||g}catch{g=v||g}}catch(v){console.warn("[ModelFetcher] Failed to read error response body:",v)}throw new Error(`API Error: ${g}`)}const h=await f.json();let m=[];if(e.type==="ollama")h.models&&Array.isArray(h.models)?m=h.models.map(g=>({id:g.name,name:g.name,metadata:g.details??{}})):console.warn(`[ModelFetcher] Unexpected response structure from Ollama for ${e.name}:`,h);else if(e.type==="openrouter"){const g=h.data||h;Array.isArray(g)?m=g.map(v=>{const{id:w,name:_,...x}=v;return{id:w,name:_||w,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}else{const g=h.data||h;Array.isArray(g)?m=g.map(v=>{const{id:w,name:_,...x}=v;return{id:w,name:_||w,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}return m.sort((g,v)=>(g.name||g.id).localeCompare(v.name||v.id)),console.log(`[ModelFetcher] Fetched ${m.length} models for ${e.name}`),m}catch(f){const h=f instanceof Error?f.message:String(f);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),ut.error(`Failed to fetch models for ${e.name}: ${h}`),Up.delete(n),[]}})();return Up.set(n,a),setTimeout(()=>{Up.get(n)===a&&(Up.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},CW),a}const Z_="provider:lastModelSelection",pR="provider:globalModelSortOrder",fi=Ds(Ms((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Ht.saveSetting("enableApiKeyManagement",n)},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Ht.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Ht.loadProviderConfigs(),Ht.loadApiKeys(),Ht.loadSetting(pR,[]),Ht.loadSetting(Z_,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{m.push(Cf(g.id,v))}),m),[]),u=new Set(s),c=i.filter(m=>u.has(m));let f=o;f&&u.has(f)||(f=c[0]??null,f||(f=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${f}`)),e({globalModelSortOrder:c,selectedModelId:f,isLoading:!1}),await Ht.saveSetting(Z_,f)}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),ut.error("Failed to load provider data")}},selectModel:n=>{e({selectedModelId:n}),Ht.saveSetting(Z_,n)},addApiKey:async(n,r,a)=>{const i=jo(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Ht.saveApiKey(s),e(u=>{u.dbApiKeys.push(s)}),ut.success(`API Key "${n}" added.`),i}catch(u){throw console.error("ProviderStore: Error adding API key",u),ut.error(`Failed to add API Key: ${u instanceof Error?u.message:String(u)}`),u}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Ht.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),ut.success(`API Key "${r}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting API key",i),ut.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=jo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Ht.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),ut.success(`Provider "${n.name}" added.`),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),ut.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Ht.saveProviderConfig(i),e(m=>{const g=m.dbProviderConfigs.findIndex(v=>v.id===n);g!==-1&&(m.dbProviderConfigs[g]=i)});const o=t().globalModelSortOrder,s=t().dbProviderConfigs;let u=[...o],c=!1;const f=s.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{m.push(Cf(g.id,v))}),m),[]),h=new Set(f);u=o.filter(m=>h.has(m)),h.forEach(m=>{u.includes(m)||u.push(m)}),c=!0,(JSON.stringify(u)!==JSON.stringify(o)||c)&&await t().setGlobalModelSortOrder(u)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),ut.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Ht.deleteProviderConfig(n),e(f=>{f.dbProviderConfigs=f.dbProviderConfigs.filter(h=>h.id!==n)});const o=t().dbProviderConfigs.reduce((f,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(m=>{f.push(Cf(h.id,m))}),f),[]),s=new Set(o),c=t().globalModelSortOrder.filter(f=>s.has(f));await t().setGlobalModelSortOrder(c),ut.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),ut.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){ut.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(u=>u.id===i))==null?void 0:a.value,s=await AW(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),ut.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Ht.saveSetting(pR,r);const a=t().selectedModelId,o=t().dbProviderConfigs.reduce((u,c)=>(c.isEnabled&&c.enabledModels&&c.enabledModels.forEach(f=>{u.push(Cf(c.id,f))}),u),[]),s=new Set(o);if(a&&!s.has(a)){const u=r.find(c=>s.has(c))??o.find(c=>r.includes(c))??o[0]??null;console.log(`[ProviderStore] Selection ${a} invalidated by order change. Selecting ${u}`),t().selectModel(u)}else if(!a&&r.length>0){const u=r.find(c=>s.has(c))??o[0]??null;console.log(`[ProviderStore] No selection, selecting first from new order: ${u}`),t().selectModel(u)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=c0(n);if(!i||!o)return;const s=r.find(c=>c.id===i);if(!s)return;const u=a.find(c=>c.id===s.apiKeyId);return JG(s,o,u==null?void 0:u.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=n.type,a=[...n.fetchedModels??(p2[r]||[])];return{id:n.id,name:n.name,type:n.type,allAvailableModels:a}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return[];const a=r.type;return[...r.fetchedModels??(p2[a]||[])].map(i=>({...i}))}}))),by="system",mR="You are a helpful AI assistant.",gR=.7,yR=null,bR=null,vR=null,wR=0,_R=0,xR=!0,vy=!0,wy=30,_y=10,SR=null,ER=null,kR=5,xy=null,qr=Ds(Ms(e=>({theme:by,globalSystemPrompt:mR,temperature:gR,maxTokens:yR,topP:bR,topK:vR,presencePenalty:wR,frequencyPenalty:_R,enableAdvancedSettings:xR,enableStreamingMarkdown:vy,streamingRenderFPS:wy,streamingCodeRenderFPS:_y,gitUserName:SR,gitUserEmail:ER,toolMaxSteps:kR,prismThemeUrl:xy,setTheme:t=>{e({theme:t}),Ht.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Ht.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Ht.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Ht.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Ht.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Ht.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Ht.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Ht.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Ht.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Ht.saveSetting("enableStreamingMarkdown",t)},setStreamingRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingRenderFPS:n}),Ht.saveSetting("streamingRenderFPS",n)},setStreamingCodeRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingCodeRenderFPS:n}),Ht.saveSetting("streamingCodeRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Ht.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Ht.saveSetting("gitUserEmail",n)},setToolMaxSteps:t=>{const n=Math.max(1,Math.min(20,t));e({toolMaxSteps:n}),Ht.saveSetting("toolMaxSteps",n)},setPrismThemeUrl:t=>{const n=(t==null?void 0:t.trim())||null;e({prismThemeUrl:n}),Ht.saveSetting("prismThemeUrl",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,u,c,f,h,m,g,v,w,_]=await Promise.all([Ht.loadSetting("theme",by),Ht.loadSetting("temperature",gR),Ht.loadSetting("maxTokens",yR),Ht.loadSetting("topP",bR),Ht.loadSetting("topK",vR),Ht.loadSetting("presencePenalty",wR),Ht.loadSetting("frequencyPenalty",_R),Ht.loadSetting("globalSystemPrompt",mR),Ht.loadSetting("enableAdvancedSettings",xR),Ht.loadSetting("enableStreamingMarkdown",vy),Ht.loadSetting("streamingRenderFPS",wy),Ht.loadSetting("streamingCodeRenderFPS",_y),Ht.loadSetting("gitUserName",SR),Ht.loadSetting("gitUserEmail",ER),Ht.loadSetting("toolMaxSteps",kR),Ht.loadSetting("prismThemeUrl",xy)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:u,enableAdvancedSettings:c,enableStreamingMarkdown:f,streamingRenderFPS:h,streamingCodeRenderFPS:m,gitUserName:g,gitUserEmail:v,toolMaxSteps:w,prismThemeUrl:_})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:by,enableStreamingMarkdown:vy,streamingRenderFPS:wy,streamingCodeRenderFPS:_y,prismThemeUrl:xy}),await Promise.all([Ht.saveSetting("theme",by),Ht.saveSetting("enableStreamingMarkdown",vy),Ht.saveSetting("streamingRenderFPS",wy),Ht.saveSetting("streamingCodeRenderFPS",_y),Ht.saveSetting("prismThemeUrl",xy)]),ut.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),ut.error("Failed to reset general settings.")}}})));async function g2(e,t){const n=ta.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}function TW(){const e=Qn.getState(),t=fi.getState(),n=qr.getState(),{providerId:r}=c0(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function RW(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}const NW=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1",".gitignore",".env",".log",".csv",".tsv",".ini",".cfg",".conf"],Vj=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"?!0:NW.some(r=>n.endsWith(r))};function CR(e){try{const t=e.type||"application/octet-stream",n=Vj(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:RW(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),ut.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function AR(e){return e.flatMap(t=>{var r,a,i,o,s,u;const n=[];if((r=t.prompt)!=null&&r.content&&typeof t.prompt.content=="string"?n.push({role:"user",content:t.prompt.content}):(i=(a=t.prompt)==null?void 0:a.metadata)!=null&&i.attachedFiles&&t.prompt.metadata.attachedFiles.length>0&&((o=t.prompt)!=null&&o.content),t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(s=t.metadata)!=null&&s.toolCalls&&Array.isArray(t.metadata.toolCalls)){const c=[];t.metadata.toolCalls.forEach(f=>{try{const h=JSON.parse(f);h&&h.type==="tool-call"&&h.toolCallId&&h.toolName&&h.args!==void 0?c.push(h):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",f)}catch(h){console.error("[AIService] buildHistory: Failed to parse tool call string:",f,h)}}),c.length>0&&n.push({role:"assistant",content:c})}if((u=t.metadata)!=null&&u.toolResults&&Array.isArray(t.metadata.toolResults)){const c=[];t.metadata.toolResults.forEach(f=>{try{const h=JSON.parse(f);h&&h.type==="tool-result"&&h.toolCallId&&h.toolName&&h.result!==void 0?c.push(h):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",f)}catch(h){console.error("[AIService] buildHistory: Failed to parse tool result string:",f,h)}}),c.length>0&&n.push({role:"tool",content:c})}return n})}const TR=e=>Symbol.iterator in e,RR=e=>"entries"in e,NR=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},IW=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function OW(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!TR(e)||!TR(t)?NR({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):RR(e)&&RR(t)?NR(e,t):IW(e,t)}function $n(e){const t=wt.useRef(void 0);return n=>{const r=e(n);return OW(t.current,r)?t.current:t.current=r}}const jW=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message..."})=>{var x;const a=L.useRef(null),[i,o]=L.useState(!1),s=ta($n(S=>S.promptControls)),u=Qn($n(S=>S.status==="streaming")),{focusInputOnNextRender:c,setFocusInputFlag:f}=Ka($n(S=>({focusInputOnNextRender:S.focusInputOnNextRender,setFocusInputFlag:S.setFocusInputFlag}))),{attachedFilesMetadata:h,clearAttachedFiles:m}=sm($n(S=>({attachedFilesMetadata:S.attachedFilesMetadata,clearAttachedFiles:S.clearAttachedFiles})));L.useEffect(()=>{c&&a.current&&(a.current.focus(),f(!1))},[c,f]);const g=L.useMemo(()=>Object.values(s).filter(S=>S.show?S.show():!0).sort((S,E)=>(S.order??1/0)-(E.order??1/0)),[s]),v=L.useMemo(()=>g.filter(S=>S.renderer),[g]),w=L.useMemo(()=>g.filter(S=>S.triggerRenderer),[g]),_=L.useCallback(async()=>{var C;const E=(((C=a.current)==null?void 0:C.getValue())??"").trim();if(!(!E&&h.length===0)&&!(u||i)){o(!0);try{let A={},j={};for(const H of g){if(H.getParameters){const Q=await H.getParameters();Q&&(A={...A,...Q})}if(H.getMetadata){const Q=await H.getMetadata();Q&&(j={...j,...Q})}}h.length>0&&(j.attachedFiles=[...h]);let O={id:jo(),content:E,parameters:A,metadata:j};Ei.emit("prompt:submitted",{turnData:O});const N=await g2("middleware:prompt:turnFinalize",{turnData:O});if(N===!1){console.log("Prompt submission cancelled by middleware."),o(!1);return}const z=N&&typeof N=="object"?N.turnData:O;await t(z),m(),g.forEach(H=>{H.clearOnSubmit&&H.clearOnSubmit()}),f(!0)}catch(A){console.error("Error during prompt submission:",A),ut.error(`Failed to send message: ${A instanceof Error?A.message:String(A)}`)}finally{o(!1)}}},[u,i,g,t,h,m,f]);return y.jsxs("div",{className:Ut("p-4 space-y-3",n),children:[v.length>0&&y.jsx(j3,{controls:v,area:"panel",className:"flex flex-wrap gap-2 items-start mb-2"}),y.jsx(e,{ref:a,onSubmit:_,disabled:u||i,placeholder:r}),y.jsxs("div",{className:"flex items-center justify-between gap-2 mt-2",children:[y.jsx(j3,{controls:w,area:"trigger",className:"flex items-center gap-1 flex-shrink-0"}),y.jsx("div",{className:"flex-grow"}),y.jsx(Lt,{type:"button",size:"icon",onClick:_,disabled:u||i||(((x=a.current)==null?void 0:x.getValue())??"").trim().length===0&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Jz,{className:"h-4 w-4"})})]})]})};function zt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function DW(e,t){const n=L.createContext(t),r=i=>{const{children:o,...s}=i,u=L.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function a(i){const o=L.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Ri(e,t=[]){let n=[];function r(i,o){const s=L.createContext(o),u=n.length;n=[...n,o];const c=h=>{var x;const{scope:m,children:g,...v}=h,w=((x=m==null?void 0:m[e])==null?void 0:x[u])||s,_=L.useMemo(()=>v,Object.values(v));return y.jsx(w.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,m){var w;const g=((w=m==null?void 0:m[e])==null?void 0:w[u])||s,v=L.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const a=()=>{const i=n.map(o=>L.createContext(o));return function(s){const u=(s==null?void 0:s[e])||i;return L.useMemo(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return a.scopeName=e,[r,MW(a,...t)]}function MW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...s,...h}},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var PW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],an=PW.reduce((e,t)=>{const n=Nu(`Primitive.${t}`),r=L.forwardRef((a,i)=>{const{asChild:o,...s}=a,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Gj(e,t){e&&d0.flushSync(()=>e.dispatchEvent(t))}function Ea(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function FW(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e);L.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var LW="DismissableLayer",y2="dismissableLayer.update",$W="dismissableLayer.pointerDownOutside",BW="dismissableLayer.focusOutside",IR,Wj=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hh=L.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...u}=e,c=L.useContext(Wj),[f,h]=L.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=L.useState({}),v=xn(t,O=>h(O)),w=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(_),S=f?w.indexOf(f):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,A=qW(O=>{const N=O.target,z=[...c.branches].some(H=>H.contains(N));!C||z||(a==null||a(O),o==null||o(O),O.defaultPrevented||s==null||s())},m),j=HW(O=>{const N=O.target;[...c.branches].some(H=>H.contains(N))||(i==null||i(O),o==null||o(O),O.defaultPrevented||s==null||s())},m);return FW(O=>{S===c.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&s&&(O.preventDefault(),s()))},m),L.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(IR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),OR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=IR)}},[f,m,n,c]),L.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),OR())},[f,c]),L.useEffect(()=>{const O=()=>g({});return document.addEventListener(y2,O),()=>document.removeEventListener(y2,O)},[]),y.jsx(an.div,{...u,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:zt(e.onFocusCapture,j.onFocusCapture),onBlurCapture:zt(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:zt(e.onPointerDownCapture,A.onPointerDownCapture)})});hh.displayName=LW;var zW="DismissableLayerBranch",UW=L.forwardRef((e,t)=>{const n=L.useContext(Wj),r=L.useRef(null),a=xn(t,r);return L.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(an.div,{...e,ref:a})});UW.displayName=zW;function qW(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e),r=L.useRef(!1),a=L.useRef(()=>{});return L.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let u=function(){Kj($W,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function HW(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e),r=L.useRef(!1);return L.useEffect(()=>{const a=i=>{i.target&&!r.current&&Kj(BW,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function OR(){const e=new CustomEvent(y2);document.dispatchEvent(e)}function Kj(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?Gj(a,i):a.dispatchEvent(i)}var Fa=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},VW=W4[" useId ".trim().toString()]||(()=>{}),GW=0;function Cs(e){const[t,n]=L.useState(VW());return Fa(()=>{n(r=>r??String(GW++))},[e]),t?`radix-${t}`:""}const WW=["top","right","bottom","left"],$u=Math.min,qi=Math.max,Rb=Math.round,Sy=Math.floor,As=e=>({x:e,y:e}),KW={left:"right",right:"left",bottom:"top",top:"bottom"},ZW={start:"end",end:"start"};function b2(e,t,n){return qi(e,$u(t,n))}function Al(e,t){return typeof e=="function"?e(t):e}function Tl(e){return e.split("-")[0]}function ph(e){return e.split("-")[1]}function CE(e){return e==="x"?"y":"x"}function AE(e){return e==="y"?"height":"width"}function Bu(e){return["top","bottom"].includes(Tl(e))?"y":"x"}function TE(e){return CE(Bu(e))}function YW(e,t,n){n===void 0&&(n=!1);const r=ph(e),a=TE(e),i=AE(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Nb(o)),[o,Nb(o)]}function XW(e){const t=Nb(e);return[v2(e),t,v2(t)]}function v2(e){return e.replace(/start|end/g,t=>ZW[t])}function JW(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function QW(e,t,n,r){const a=ph(e);let i=JW(Tl(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(v2)))),i}function Nb(e){return e.replace(/left|right|bottom|top/g,t=>KW[t])}function eK(e){return{top:0,right:0,bottom:0,left:0,...e}}function Zj(e){return typeof e!="number"?eK(e):{top:e,right:e,bottom:e,left:e}}function Ib(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function jR(e,t,n){let{reference:r,floating:a}=e;const i=Bu(t),o=TE(t),s=AE(o),u=Tl(t),c=i==="y",f=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[s]/2-a[s]/2;let g;switch(u){case"top":g={x:f,y:r.y-a.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(ph(t)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const tK=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=jR(c,r,u),m=r,g={},v=0;for(let w=0;w<s.length;w++){const{name:_,fn:x}=s[w],{x:S,y:E,data:C,reset:A}=await x({x:f,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});f=S??f,h=E??h,g={...g,[_]:{...g[_],...C}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):A.rects),{x:f,y:h}=jR(c,m,u)),w=-1)}return{x:f,y:h,placement:m,strategy:a,middlewareData:g}};async function _m(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Al(t,e),v=Zj(g),_=s[m?h==="floating"?"reference":"floating":h],x=Ib(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:u})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},A=Ib(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:u}):S);return{top:(x.top-A.top+v.top)/C.y,bottom:(A.bottom-x.bottom+v.bottom)/C.y,left:(x.left-A.left+v.left)/C.x,right:(A.right-x.right+v.right)/C.x}}const nK=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:u}=t,{element:c,padding:f=0}=Al(e,t)||{};if(c==null)return{};const h=Zj(f),m={x:n,y:r},g=TE(a),v=AE(g),w=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-m[g]-i.floating[v],A=m[g]-i.reference[g],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let O=j?j[E]:0;(!O||!await(o.isElement==null?void 0:o.isElement(j)))&&(O=s.floating[E]||i.floating[v]);const N=C/2-A/2,z=O/2-w[v]/2-1,H=$u(h[x],z),Q=$u(h[S],z),P=H,Z=O-w[v]-Q,V=O/2-w[v]/2+N,te=b2(P,V,Z),ae=!u.arrow&&ph(a)!=null&&V!==te&&i.reference[v]/2-(V<P?H:Q)-w[v]/2<0,re=ae?V<P?V-P:V-Z:0;return{[g]:m[g]+re,data:{[g]:te,centerOffset:V-te-re,...ae&&{alignmentOffset:re}},reset:ae}}}),rK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:u,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,..._}=Al(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Tl(a),S=Bu(s),E=Tl(s)===s,C=await(u.isRTL==null?void 0:u.isRTL(c.floating)),A=m||(E||!w?[Nb(s)]:XW(s)),j=v!=="none";!m&&j&&A.push(...QW(s,w,v,C));const O=[s,...A],N=await _m(t,_),z=[];let H=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&z.push(N[x]),h){const V=YW(a,o,C);z.push(N[V[0]],N[V[1]])}if(H=[...H,{placement:a,overflows:z}],!z.every(V=>V<=0)){var Q,P;const V=(((Q=i.flip)==null?void 0:Q.index)||0)+1,te=O[V];if(te)return{data:{index:V,overflows:H},reset:{placement:te}};let ae=(P=H.filter(re=>re.overflows[0]<=0).sort((re,Y)=>re.overflows[1]-Y.overflows[1])[0])==null?void 0:P.placement;if(!ae)switch(g){case"bestFit":{var Z;const re=(Z=H.filter(Y=>{if(j){const ne=Bu(Y.placement);return ne===S||ne==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(ne=>ne>0).reduce((ne,G)=>ne+G,0)]).sort((Y,ne)=>Y[1]-ne[1])[0])==null?void 0:Z[0];re&&(ae=re);break}case"initialPlacement":ae=s;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function DR(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function MR(e){return WW.some(t=>e[t]>=0)}const aK=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Al(e,t);switch(r){case"referenceHidden":{const i=await _m(t,{...a,elementContext:"reference"}),o=DR(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:MR(o)}}}case"escaped":{const i=await _m(t,{...a,altBoundary:!0}),o=DR(i,n.floating);return{data:{escapedOffsets:o,escaped:MR(o)}}}default:return{}}}}};async function iK(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Tl(n),s=ph(n),u=Bu(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&u?-1:1,h=Al(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof v=="number"&&(g=s==="end"?v*-1:v),u?{x:g*f,y:m*c}:{x:m*c,y:g*f}}const oK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,u=await iK(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},sK=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...u}=Al(e,t),c={x:n,y:r},f=await _m(t,u),h=Bu(Tl(a)),m=CE(h);let g=c[m],v=c[h];if(i){const _=m==="y"?"top":"left",x=m==="y"?"bottom":"right",S=g+f[_],E=g-f[x];g=b2(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=v+f[_],E=v-f[x];v=b2(S,v,E)}const w=s.fn({...t,[m]:g,[h]:v});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:i,[h]:o}}}}}},lK=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:u=!0,crossAxis:c=!0}=Al(e,t),f={x:n,y:r},h=Bu(a),m=CE(h);let g=f[m],v=f[h];const w=Al(s,t),_=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(u){const E=m==="y"?"height":"width",C=i.reference[m]-i.floating[E]+_.mainAxis,A=i.reference[m]+i.reference[E]-_.mainAxis;g<C?g=C:g>A&&(g=A)}if(c){var x,S;const E=m==="y"?"width":"height",C=["top","left"].includes(Tl(a)),A=i.reference[h]-i.floating[E]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:_.crossAxis),j=i.reference[h]+i.reference[E]+(C?0:((S=o.offset)==null?void 0:S[h])||0)-(C?_.crossAxis:0);v<A?v=A:v>j&&(v=j)}return{[m]:g,[h]:v}}}},uK=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:u=()=>{},...c}=Al(e,t),f=await _m(t,c),h=Tl(a),m=ph(a),g=Bu(a)==="y",{width:v,height:w}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=m===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=m==="end"?"top":"bottom");const S=w-f.top-f.bottom,E=v-f.left-f.right,C=$u(w-f[_],S),A=$u(v-f[x],E),j=!t.middlewareData.shift;let O=C,N=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(O=S),j&&!m){const H=qi(f.left,0),Q=qi(f.right,0),P=qi(f.top,0),Z=qi(f.bottom,0);g?N=v-2*(H!==0||Q!==0?H+Q:qi(f.left,f.right)):O=w-2*(P!==0||Z!==0?P+Z:qi(f.top,f.bottom))}await u({...t,availableWidth:N,availableHeight:O});const z=await o.getDimensions(s.floating);return v!==z.width||w!==z.height?{reset:{rects:!0}}:{}}}};function Tv(){return typeof window<"u"}function mh(e){return Yj(e)?(e.nodeName||"").toLowerCase():"#document"}function Vi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ps(e){var t;return(t=(Yj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Yj(e){return Tv()?e instanceof Node||e instanceof Vi(e).Node:!1}function Uo(e){return Tv()?e instanceof Element||e instanceof Vi(e).Element:!1}function Is(e){return Tv()?e instanceof HTMLElement||e instanceof Vi(e).HTMLElement:!1}function PR(e){return!Tv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vi(e).ShadowRoot}function f0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=qo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function cK(e){return["table","td","th"].includes(mh(e))}function Rv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function RE(e){const t=NE(),n=Uo(e)?qo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function dK(e){let t=zu(e);for(;Is(t)&&!Gf(t);){if(RE(t))return t;if(Rv(t))return null;t=zu(t)}return null}function NE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gf(e){return["html","body","#document"].includes(mh(e))}function qo(e){return Vi(e).getComputedStyle(e)}function Nv(e){return Uo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zu(e){if(mh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||PR(e)&&e.host||Ps(e);return PR(t)?t.host:t}function Xj(e){const t=zu(e);return Gf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Is(t)&&f0(t)?t:Xj(t)}function xm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=Xj(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Vi(a);if(i){const s=w2(o);return t.concat(o,o.visualViewport||[],f0(a)?a:[],s&&n?xm(s):[])}return t.concat(a,xm(a,[],n))}function w2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Jj(e){const t=qo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Is(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Rb(n)!==i||Rb(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function IE(e){return Uo(e)?e:e.contextElement}function jf(e){const t=IE(e);if(!Is(t))return As(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=Jj(t);let o=(i?Rb(n.width):n.width)/r,s=(i?Rb(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const fK=As(0);function Qj(e){const t=Vi(e);return!NE()||!t.visualViewport?fK:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hK(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vi(e)?!1:t}function Qc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=IE(e);let o=As(1);t&&(r?Uo(r)&&(o=jf(r)):o=jf(e));const s=hK(i,n,r)?Qj(i):As(0);let u=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,f=a.width/o.x,h=a.height/o.y;if(i){const m=Vi(i),g=r&&Uo(r)?Vi(r):r;let v=m,w=w2(v);for(;w&&r&&g!==v;){const _=jf(w),x=w.getBoundingClientRect(),S=qo(w),E=x.left+(w.clientLeft+parseFloat(S.paddingLeft))*_.x,C=x.top+(w.clientTop+parseFloat(S.paddingTop))*_.y;u*=_.x,c*=_.y,f*=_.x,h*=_.y,u+=E,c+=C,v=Vi(w),w=w2(v)}}return Ib({width:f,height:h,x:u,y:c})}function OE(e,t){const n=Nv(e).scrollLeft;return t?t.left+n:Qc(Ps(e)).left+n}function eD(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:OE(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function pK(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Ps(r),s=t?Rv(t.floating):!1;if(r===o||s&&i)return n;let u={scrollLeft:0,scrollTop:0},c=As(1);const f=As(0),h=Is(r);if((h||!h&&!i)&&((mh(r)!=="body"||f0(o))&&(u=Nv(r)),Is(r))){const g=Qc(r);c=jf(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const m=o&&!h&&!i?eD(o,u,!0):As(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+f.x+m.x,y:n.y*c.y-u.scrollTop*c.y+f.y+m.y}}function mK(e){return Array.from(e.getClientRects())}function gK(e){const t=Ps(e),n=Nv(e),r=e.ownerDocument.body,a=qi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=qi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+OE(e);const s=-n.scrollTop;return qo(r).direction==="rtl"&&(o+=qi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function yK(e,t){const n=Vi(e),r=Ps(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;const c=NE();(!c||c&&t==="fixed")&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s,y:u}}function bK(e,t){const n=Qc(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Is(e)?jf(e):As(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,u=a*i.x,c=r*i.y;return{width:o,height:s,x:u,y:c}}function FR(e,t,n){let r;if(t==="viewport")r=yK(e,n);else if(t==="document")r=gK(Ps(e));else if(Uo(t))r=bK(t,n);else{const a=Qj(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Ib(r)}function tD(e,t){const n=zu(e);return n===t||!Uo(n)||Gf(n)?!1:qo(n).position==="fixed"||tD(n,t)}function vK(e,t){const n=t.get(e);if(n)return n;let r=xm(e,[],!1).filter(s=>Uo(s)&&mh(s)!=="body"),a=null;const i=qo(e).position==="fixed";let o=i?zu(e):e;for(;Uo(o)&&!Gf(o);){const s=qo(o),u=RE(o);!u&&s.position==="fixed"&&(a=null),(i?!u&&!a:!u&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||f0(o)&&!u&&tD(e,o))?r=r.filter(f=>f!==o):a=s,o=zu(o)}return t.set(e,r),r}function wK(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Rv(t)?[]:vK(t,this._c):[].concat(n),r],s=o[0],u=o.reduce((c,f)=>{const h=FR(t,f,a);return c.top=qi(h.top,c.top),c.right=$u(h.right,c.right),c.bottom=$u(h.bottom,c.bottom),c.left=qi(h.left,c.left),c},FR(t,s,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function _K(e){const{width:t,height:n}=Jj(e);return{width:t,height:n}}function xK(e,t,n){const r=Is(t),a=Ps(t),i=n==="fixed",o=Qc(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=As(0);if(r||!r&&!i)if((mh(t)!=="body"||f0(a))&&(s=Nv(t)),r){const m=Qc(t,!0,i,t);u.x=m.x+t.clientLeft,u.y=m.y+t.clientTop}else a&&(u.x=OE(a));const c=a&&!r&&!i?eD(a,s):As(0),f=o.left+s.scrollLeft-u.x-c.x,h=o.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function Y_(e){return qo(e).position==="static"}function LR(e,t){if(!Is(e)||qo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ps(e)===n&&(n=n.ownerDocument.body),n}function nD(e,t){const n=Vi(e);if(Rv(e))return n;if(!Is(e)){let a=zu(e);for(;a&&!Gf(a);){if(Uo(a)&&!Y_(a))return a;a=zu(a)}return n}let r=LR(e,t);for(;r&&cK(r)&&Y_(r);)r=LR(r,t);return r&&Gf(r)&&Y_(r)&&!RE(r)?n:r||dK(e)||n}const SK=async function(e){const t=this.getOffsetParent||nD,n=this.getDimensions,r=await n(e.floating);return{reference:xK(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function EK(e){return qo(e).direction==="rtl"}const kK={convertOffsetParentRelativeRectToViewportRelativeRect:pK,getDocumentElement:Ps,getClippingRect:wK,getOffsetParent:nD,getElementRects:SK,getClientRects:mK,getDimensions:_K,getScale:jf,isElement:Uo,isRTL:EK};function rD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function CK(e,t){let n=null,r;const a=Ps(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=c;if(s||t(),!m||!g)return;const v=Sy(h),w=Sy(a.clientWidth-(f+m)),_=Sy(a.clientHeight-(h+g)),x=Sy(f),E={rootMargin:-v+"px "+-w+"px "+-_+"px "+-x+"px",threshold:qi(0,$u(1,u))||1};let C=!0;function A(j){const O=j[0].intersectionRatio;if(O!==u){if(!C)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!rD(c,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(A,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(A,E)}n.observe(e)}return o(!0),i}function AK(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=IE(e),f=a||i?[...c?xm(c):[],...xm(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&s?CK(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!u&&g.observe(c),g.observe(t));let v,w=u?Qc(e):null;u&&_();function _(){const x=Qc(e);w&&!rD(w,x)&&n(),w=x,v=requestAnimationFrame(_)}return n(),()=>{var x;f.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,u&&cancelAnimationFrame(v)}}const TK=oK,RK=sK,NK=rK,IK=uK,OK=aK,$R=nK,jK=lK,DK=(e,t,n)=>{const r=new Map,a={platform:kK,...n},i={...a.platform,_c:r};return tK(e,t,{...a,platform:i})};var Zy=typeof document<"u"?L.useLayoutEffect:L.useEffect;function Ob(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ob(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Ob(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function aD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function BR(e,t){const n=aD(e);return Math.round(t*n)/n}function X_(e){const t=L.useRef(e);return Zy(()=>{t.current=e}),t}function MK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:u,open:c}=e,[f,h]=L.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=L.useState(r);Ob(m,r)||g(r);const[v,w]=L.useState(null),[_,x]=L.useState(null),S=L.useCallback(Y=>{Y!==j.current&&(j.current=Y,w(Y))},[]),E=L.useCallback(Y=>{Y!==O.current&&(O.current=Y,x(Y))},[]),C=i||v,A=o||_,j=L.useRef(null),O=L.useRef(null),N=L.useRef(f),z=u!=null,H=X_(u),Q=X_(a),P=X_(c),Z=L.useCallback(()=>{if(!j.current||!O.current)return;const Y={placement:t,strategy:n,middleware:m};Q.current&&(Y.platform=Q.current),DK(j.current,O.current,Y).then(ne=>{const G={...ne,isPositioned:P.current!==!1};V.current&&!Ob(N.current,G)&&(N.current=G,d0.flushSync(()=>{h(G)}))})},[m,t,n,Q,P]);Zy(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(Y=>({...Y,isPositioned:!1})))},[c]);const V=L.useRef(!1);Zy(()=>(V.current=!0,()=>{V.current=!1}),[]),Zy(()=>{if(C&&(j.current=C),A&&(O.current=A),C&&A){if(H.current)return H.current(C,A,Z);Z()}},[C,A,Z,H,z]);const te=L.useMemo(()=>({reference:j,floating:O,setReference:S,setFloating:E}),[S,E]),ae=L.useMemo(()=>({reference:C,floating:A}),[C,A]),re=L.useMemo(()=>{const Y={position:n,left:0,top:0};if(!ae.floating)return Y;const ne=BR(ae.floating,f.x),G=BR(ae.floating,f.y);return s?{...Y,transform:"translate("+ne+"px, "+G+"px)",...aD(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:G}},[n,s,ae.floating,f.x,f.y]);return L.useMemo(()=>({...f,update:Z,refs:te,elements:ae,floatingStyles:re}),[f,Z,te,ae,re])}const PK=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?$R({element:r.current,padding:a}).fn(n):{}:r?$R({element:r,padding:a}).fn(n):{}}}},FK=(e,t)=>({...TK(e),options:[e,t]}),LK=(e,t)=>({...RK(e),options:[e,t]}),$K=(e,t)=>({...jK(e),options:[e,t]}),BK=(e,t)=>({...NK(e),options:[e,t]}),zK=(e,t)=>({...IK(e),options:[e,t]}),UK=(e,t)=>({...OK(e),options:[e,t]}),qK=(e,t)=>({...PK(e),options:[e,t]});var HK="Arrow",iD=L.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(an.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});iD.displayName=HK;var VK=iD;function Iv(e){const[t,n]=L.useState(void 0);return Fa(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var jE="Popper",[oD,Yu]=Ri(jE),[GK,sD]=oD(jE),lD=e=>{const{__scopePopper:t,children:n}=e,[r,a]=L.useState(null);return y.jsx(GK,{scope:t,anchor:r,onAnchorChange:a,children:n})};lD.displayName=jE;var uD="PopperAnchor",cD=L.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=sD(uD,n),o=L.useRef(null),s=xn(t,o);return L.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(an.div,{...a,ref:s})});cD.displayName=uD;var DE="PopperContent",[WK,KK]=oD(DE),dD=L.forwardRef((e,t)=>{var Fe,Oe,Re,ze,He,Te;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...w}=e,_=sD(DE,n),[x,S]=L.useState(null),E=xn(t,Ce=>S(Ce)),[C,A]=L.useState(null),j=Iv(C),O=(j==null?void 0:j.width)??0,N=(j==null?void 0:j.height)??0,z=r+(i!=="center"?"-"+i:""),H=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},Q=Array.isArray(c)?c:[c],P=Q.length>0,Z={padding:H,boundary:Q.filter(YK),altBoundary:P},{refs:V,floatingStyles:te,placement:ae,isPositioned:re,middlewareData:Y}=MK({strategy:"fixed",placement:z,whileElementsMounted:(...Ce)=>AK(...Ce,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[FK({mainAxis:a+N,alignmentAxis:o}),u&&LK({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?$K():void 0,...Z}),u&&BK({...Z}),zK({...Z,apply:({elements:Ce,rects:B,availableWidth:ke,availableHeight:Ae})=>{const{width:ce,height:se}=B.reference,J=Ce.floating.style;J.setProperty("--radix-popper-available-width",`${ke}px`),J.setProperty("--radix-popper-available-height",`${Ae}px`),J.setProperty("--radix-popper-anchor-width",`${ce}px`),J.setProperty("--radix-popper-anchor-height",`${se}px`)}}),C&&qK({element:C,padding:s}),XK({arrowWidth:O,arrowHeight:N}),m&&UK({strategy:"referenceHidden",...Z})]}),[ne,G]=pD(ae),X=Ea(v);Fa(()=>{re&&(X==null||X())},[re,X]);const oe=(Fe=Y.arrow)==null?void 0:Fe.x,ye=(Oe=Y.arrow)==null?void 0:Oe.y,we=((Re=Y.arrow)==null?void 0:Re.centerOffset)!==0,[fe,Me]=L.useState();return Fa(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:re?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(ze=Y.transformOrigin)==null?void 0:ze.x,(He=Y.transformOrigin)==null?void 0:He.y].join(" "),...((Te=Y.hide)==null?void 0:Te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(WK,{scope:n,placedSide:ne,onArrowChange:A,arrowX:oe,arrowY:ye,shouldHideArrow:we,children:y.jsx(an.div,{"data-side":ne,"data-align":G,...w,ref:E,style:{...w.style,animation:re?void 0:"none"}})})})});dD.displayName=DE;var fD="PopperArrow",ZK={top:"bottom",right:"left",bottom:"top",left:"right"},hD=L.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=KK(fD,r),o=ZK[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(VK,{...a,ref:n,style:{...a.style,display:"block"}})})});hD.displayName=fD;function YK(e){return e!==null}var XK=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[c,f]=pD(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+u/2;let v="",w="";return c==="bottom"?(v=o?h:`${m}px`,w=`${-u}px`):c==="top"?(v=o?h:`${m}px`,w=`${r.floating.height+u}px`):c==="right"?(v=`${-u}px`,w=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+u}px`,w=o?h:`${g}px`),{data:{x:v,y:w}}}});function pD(e){const[t,n="center"]=e.split("-");return[t,n]}var Ov=lD,h0=cD,jv=dD,Dv=hD,JK="Portal",gh=L.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=L.useState(!1);Fa(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?Hj.createPortal(y.jsx(an.div,{...r,ref:t}),o):null});gh.displayName=JK;function QK(e,t){return L.useReducer((n,r)=>t[n][r]??n,e)}var Na=e=>{const{present:t,children:n}=e,r=eZ(t),a=typeof n=="function"?n({present:r.isPresent}):L.Children.only(n),i=xn(r.ref,tZ(a));return typeof n=="function"||r.isPresent?L.cloneElement(a,{ref:i}):null};Na.displayName="Presence";function eZ(e){const[t,n]=L.useState(),r=L.useRef(null),a=L.useRef(e),i=L.useRef("none"),o=e?"mounted":"unmounted",[s,u]=QK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const c=Ey(r.current);i.current=s==="mounted"?c:"none"},[s]),Fa(()=>{const c=r.current,f=a.current;if(f!==e){const m=i.current,g=Ey(c);e?u("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),Fa(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const w=Ey(r.current).includes(g.animationName);if(g.target===t&&w&&(u("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},m=g=>{g.target===t&&(i.current=Ey(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:L.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Ey(e){return(e==null?void 0:e.animationName)||"none"}function tZ(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var nZ=W4[" useInsertionEffect ".trim().toString()]||Fa;function Os({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=rZ({defaultProp:t,onChange:n}),s=e!==void 0,u=s?e:a;{const f=L.useRef(e!==void 0);L.useEffect(()=>{const h=f.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=s},[s,r])}const c=L.useCallback(f=>{var h;if(s){const m=aZ(f)?f(e):f;m!==e&&((h=o.current)==null||h.call(o,m))}else i(f)},[s,e,i,o]);return[u,c]}function rZ({defaultProp:e,onChange:t}){const[n,r]=L.useState(e),a=L.useRef(n),i=L.useRef(t);return nZ(()=>{i.current=t},[t]),L.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function aZ(e){return typeof e=="function"}var mD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),iZ="VisuallyHidden",gD=L.forwardRef((e,t)=>y.jsx(an.span,{...e,ref:t,style:{...mD,...e.style}}));gD.displayName=iZ;var oZ=gD,[Mv,wge]=Ri("Tooltip",[Yu]),Pv=Yu(),yD="TooltipProvider",sZ=700,_2="tooltip.open",[lZ,ME]=Mv(yD),bD=e=>{const{__scopeTooltip:t,delayDuration:n=sZ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=L.useRef(!0),s=L.useRef(!1),u=L.useRef(0);return L.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),y.jsx(lZ,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:L.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:L.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:L.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};bD.displayName=yD;var Sm="Tooltip",[uZ,p0]=Mv(Sm),vD=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,u=ME(Sm,e.__scopeTooltip),c=Pv(t),[f,h]=L.useState(null),m=Cs(),g=L.useRef(0),v=o??u.disableHoverableContent,w=s??u.delayDuration,_=L.useRef(!1),[x,S]=Os({prop:r,defaultProp:a??!1,onChange:O=>{O?(u.onOpen(),document.dispatchEvent(new CustomEvent(_2))):u.onClose(),i==null||i(O)},caller:Sm}),E=L.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),C=L.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),A=L.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),j=L.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},w)},[w,S]);return L.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(Ov,{...c,children:y.jsx(uZ,{scope:t,contentId:m,open:x,stateAttribute:E,trigger:f,onTriggerChange:h,onTriggerEnter:L.useCallback(()=>{u.isOpenDelayedRef.current?j():C()},[u.isOpenDelayedRef,j,C]),onTriggerLeave:L.useCallback(()=>{v?A():(window.clearTimeout(g.current),g.current=0)},[A,v]),onOpen:C,onClose:A,disableHoverableContent:v,children:n})})};vD.displayName=Sm;var x2="TooltipTrigger",wD=L.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=p0(x2,n),i=ME(x2,n),o=Pv(n),s=L.useRef(null),u=xn(t,s,a.onTriggerChange),c=L.useRef(!1),f=L.useRef(!1),h=L.useCallback(()=>c.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(h0,{asChild:!0,...o,children:y.jsx(an.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:u,onPointerMove:zt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:zt(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:zt(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:zt(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:zt(e.onBlur,a.onClose),onClick:zt(e.onClick,a.onClose)})})});wD.displayName=x2;var PE="TooltipPortal",[cZ,dZ]=Mv(PE,{forceMount:void 0}),_D=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=p0(PE,t);return y.jsx(cZ,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(gh,{asChild:!0,container:a,children:r})})})};_D.displayName=PE;var Wf="TooltipContent",xD=L.forwardRef((e,t)=>{const n=dZ(Wf,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=p0(Wf,e.__scopeTooltip);return y.jsx(Na,{present:r||o.open,children:o.disableHoverableContent?y.jsx(SD,{side:a,...i,ref:t}):y.jsx(fZ,{side:a,...i,ref:t})})}),fZ=L.forwardRef((e,t)=>{const n=p0(Wf,e.__scopeTooltip),r=ME(Wf,e.__scopeTooltip),a=L.useRef(null),i=xn(t,a),[o,s]=L.useState(null),{trigger:u,onClose:c}=n,f=a.current,{onPointerInTransitChange:h}=r,m=L.useCallback(()=>{s(null),h(!1)},[h]),g=L.useCallback((v,w)=>{const _=v.currentTarget,x={x:v.clientX,y:v.clientY},S=gZ(x,_.getBoundingClientRect()),E=yZ(x,S),C=bZ(w.getBoundingClientRect()),A=wZ([...E,...C]);s(A),h(!0)},[h]);return L.useEffect(()=>()=>m(),[m]),L.useEffect(()=>{if(u&&f){const v=_=>g(_,f),w=_=>g(_,u);return u.addEventListener("pointerleave",v),f.addEventListener("pointerleave",w),()=>{u.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",w)}}},[u,f,g,m]),L.useEffect(()=>{if(o){const v=w=>{const _=w.target,x={x:w.clientX,y:w.clientY},S=(u==null?void 0:u.contains(_))||(f==null?void 0:f.contains(_)),E=!vZ(x,o);S?m():E&&(m(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,f,o,c,m]),y.jsx(SD,{...e,ref:i})}),[hZ,pZ]=Mv(Sm,{isInside:!1}),mZ=X$("TooltipContent"),SD=L.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,u=p0(Wf,n),c=Pv(n),{onClose:f}=u;return L.useEffect(()=>(document.addEventListener(_2,f),()=>document.removeEventListener(_2,f)),[f]),L.useEffect(()=>{if(u.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),y.jsx(hh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:y.jsxs(jv,{"data-state":u.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(mZ,{children:r}),y.jsx(hZ,{scope:n,isInside:!0,children:y.jsx(oZ,{id:u.contentId,role:"tooltip",children:a||r})})]})})});xD.displayName=Wf;var ED="TooltipArrow",kD=L.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Pv(n);return pZ(ED,n).isInside?null:y.jsx(Dv,{...a,...r,ref:t})});kD.displayName=ED;function gZ(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function yZ(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function bZ(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function vZ(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function wZ(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),_Z(t)}function _Z(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var xZ=bD,SZ=vD,EZ=wD,kZ=_D,CZ=xD,AZ=kD;function In({delayDuration:e=0,...t}){return y.jsx(xZ,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Tn({...e}){return y.jsx(In,{children:y.jsx(SZ,{"data-slot":"tooltip",...e})})}function Rn({...e}){return y.jsx(EZ,{"data-slot":"tooltip-trigger",...e})}function Nn({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(kZ,{children:y.jsxs(CZ,{"data-slot":"tooltip-content",sideOffset:t,className:Ut("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(AZ,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var J_={exports:{}},zR;function TZ(){return zR||(zR=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof u?new u(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var A,j;switch(s.util.type(E)){case"Object":if(j=s.util.objId(E),C[j])return C[j];A={},C[j]=A;for(var O in E)E.hasOwnProperty(O)&&(A[O]=S(E[O],C));return A;case"Array":return j=s.util.objId(E),C[j]?C[j]:(A=[],C[j]=A,E.forEach(function(N,z){A[z]=S(N,C)}),A);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var A="no-"+E;S;){var j=S.classList;if(j.contains(E))return!0;if(j.contains(A))return!1;S=S.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var C=s.util.clone(s.languages[S]);for(var A in E)C[A]=E[A];return C},insertBefore:function(S,E,C,A){A=A||s.languages;var j=A[S],O={};for(var N in j)if(j.hasOwnProperty(N)){if(N==E)for(var z in C)C.hasOwnProperty(z)&&(O[z]=C[z]);C.hasOwnProperty(N)||(O[N]=j[N])}var H=A[S];return A[S]=O,s.languages.DFS(s.languages,function(Q,P){P===H&&Q!=S&&(this[Q]=O)}),O},DFS:function S(E,C,A,j){j=j||{};var O=s.util.objId;for(var N in E)if(E.hasOwnProperty(N)){C.call(E,N,E[N],A||N);var z=E[N],H=s.util.type(z);H==="Object"&&!j[O(z)]?(j[O(z)]=!0,S(z,C,null,j)):H==="Array"&&!j[O(z)]&&(j[O(z)]=!0,S(z,C,N,j))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var A={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),s.hooks.run("before-all-elements-highlight",A);for(var j=0,O;O=A.elements[j++];)s.highlightElement(O,E===!0,A.callback)},highlightElement:function(S,E,C){var A=s.util.getLanguage(S),j=s.languages[A];s.util.setLanguage(S,A);var O=S.parentElement;O&&O.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(O,A);var N=S.textContent,z={element:S,language:A,grammar:j,code:N};function H(P){z.highlightedCode=P,s.hooks.run("before-insert",z),z.element.innerHTML=z.highlightedCode,s.hooks.run("after-highlight",z),s.hooks.run("complete",z),C&&C.call(z.element)}if(s.hooks.run("before-sanity-check",z),O=z.element.parentElement,O&&O.nodeName.toLowerCase()==="pre"&&!O.hasAttribute("tabindex")&&O.setAttribute("tabindex","0"),!z.code){s.hooks.run("complete",z),C&&C.call(z.element);return}if(s.hooks.run("before-highlight",z),!z.grammar){H(s.util.encode(z.code));return}if(E&&r.Worker){var Q=new Worker(s.filename);Q.onmessage=function(P){H(P.data)},Q.postMessage(JSON.stringify({language:z.language,code:z.code,immediateClose:!0}))}else H(s.highlight(z.code,z.grammar,z.language))},highlight:function(S,E,C){var A={code:S,grammar:E,language:C};if(s.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=s.tokenize(A.code,A.grammar),s.hooks.run("after-tokenize",A),u.stringify(s.util.encode(A.tokens),A.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var A in C)E[A]=C[A];delete E.rest}var j=new h;return m(j,j.head,S),f(S,j,E,j.head,0),v(j)},hooks:{all:{},add:function(S,E){var C=s.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=s.hooks.all[S];if(!(!C||!C.length))for(var A=0,j;j=C[A++];)j(E)}},Token:u};r.Prism=s;function u(S,E,C,A){this.type=S,this.content=E,this.alias=C,this.length=(A||"").length|0}u.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var A="";return E.forEach(function(H){A+=S(H,C)}),A}var j={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},O=E.alias;O&&(Array.isArray(O)?Array.prototype.push.apply(j.classes,O):j.classes.push(O)),s.hooks.run("wrap",j);var N="";for(var z in j.attributes)N+=" "+z+'="'+(j.attributes[z]||"").replace(/"/g,"&quot;")+'"';return"<"+j.tag+' class="'+j.classes.join(" ")+'"'+N+">"+j.content+"</"+j.tag+">"};function c(S,E,C,A){S.lastIndex=E;var j=S.exec(C);if(j&&A&&j[1]){var O=j[1].length;j.index+=O,j[0]=j[0].slice(O)}return j}function f(S,E,C,A,j,O){for(var N in C)if(!(!C.hasOwnProperty(N)||!C[N])){var z=C[N];z=Array.isArray(z)?z:[z];for(var H=0;H<z.length;++H){if(O&&O.cause==N+","+H)return;var Q=z[H],P=Q.inside,Z=!!Q.lookbehind,V=!!Q.greedy,te=Q.alias;if(V&&!Q.pattern.global){var ae=Q.pattern.toString().match(/[imsuy]*$/)[0];Q.pattern=RegExp(Q.pattern.source,ae+"g")}for(var re=Q.pattern||Q,Y=A.next,ne=j;Y!==E.tail&&!(O&&ne>=O.reach);ne+=Y.value.length,Y=Y.next){var G=Y.value;if(E.length>S.length)return;if(!(G instanceof u)){var X=1,oe;if(V){if(oe=c(re,ne,S,Z),!oe||oe.index>=S.length)break;var Me=oe.index,ye=oe.index+oe[0].length,we=ne;for(we+=Y.value.length;Me>=we;)Y=Y.next,we+=Y.value.length;if(we-=Y.value.length,ne=we,Y.value instanceof u)continue;for(var fe=Y;fe!==E.tail&&(we<ye||typeof fe.value=="string");fe=fe.next)X++,we+=fe.value.length;X--,G=S.slice(ne,we),oe.index-=ne}else if(oe=c(re,0,G,Z),!oe)continue;var Me=oe.index,Fe=oe[0],Oe=G.slice(0,Me),Re=G.slice(Me+Fe.length),ze=ne+G.length;O&&ze>O.reach&&(O.reach=ze);var He=Y.prev;Oe&&(He=m(E,He,Oe),ne+=Oe.length),g(E,He,X);var Te=new u(N,P?s.tokenize(Fe,P):Fe,te,Fe);if(Y=m(E,He,Te),Re&&m(E,Y,Re),X>1){var Ce={cause:N+","+H,reach:ze};f(S,E,C,Y.prev,ne,Ce),O&&Ce.reach>O.reach&&(O.reach=Ce.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function m(S,E,C){var A=E.next,j={value:C,prev:E,next:A};return E.next=j,A.prev=j,S.length++,j}function g(S,E,C){for(var A=E.next,j=0;j<C&&A!==S.tail;j++)A=A.next;E.next=A,A.prev=E,S.length-=j}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,A=E.code,j=E.immediateClose;r.postMessage(s.highlight(A,s.languages[C],C)),j&&r.close()},!1)),s;var w=s.util.currentScript();w&&(s.filename=w.src,w.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&w&&w.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof Uc<"u"&&(Uc.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(w,_){return" Error "+w+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",c="loaded",f="failed",h="pre[data-src]:not(["+s+'="'+c+'"]):not(['+s+'="'+u+'"])';function m(w,_,x){var S=new XMLHttpRequest;S.open("GET",w,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(w){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(w||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(w){w.selector+=", "+h}),n.hooks.add("before-sanity-check",function(w){var _=w.element;if(_.matches(h)){w.code="",_.setAttribute(s,u);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=w.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var A=n.plugins.autoloader;A&&A.loadLanguages(E),m(S,function(j){_.setAttribute(s,c);var O=g(_.getAttribute("data-range"));if(O){var N=j.split(/\r\n?|\n/g),z=O[0],H=O[1]==null?N.length:O[1];z<0&&(z+=N.length),z=Math.max(0,Math.min(z-1,N.length)),H<0&&(H+=N.length),H=Math.max(0,Math.min(H,N.length)),j=N.slice(z,H).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(z+1))}x.textContent=j,n.highlightElement(x)},function(j){_.setAttribute(s,f),x.textContent=j})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(J_)),J_.exports}var RZ=TZ();const NZ=Qa(RZ);var UR={},qR;function IZ(){return qR||(qR=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),UR}IZ();var HR={},VR;function OZ(){return VR||(VR=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),HR}OZ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(h){f!==h&&(e.languages.markdown[f].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,v=m.length;g<v;g++){var w=m[g];if(w.type!=="code"){h(w.content);continue}var _=w.content[1],x=w.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var h="",m=0,g=f.classes.length;m<g;m++){var v=f.classes[m],w=/language-(.+)/.exec(v);if(w){h=w[1];break}}var _=e.languages[h];if(_)f.content=e.highlight(c(f.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(f){var h=f.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),u(v)}else{var w=s[g];return w||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var GR={},WR;function jZ(){return WR||(WR=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),GR}jZ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const KR="prism-theme-link",Q_="prism-default-light-theme-link",ex="prism-default-dark-theme-link",DZ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-material-light.min.css",MZ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-coldark-dark.min.css",ZR=e=>e.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),CD=({lang:e,code:t})=>{const[n,r]=L.useState(!1),[a,i]=L.useState(!1),o=L.useRef(null),{prismThemeUrl:s,theme:u}=qr($n(_=>({prismThemeUrl:_.prismThemeUrl,theme:_.theme}))),c=L.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),f=u==="system"?c:u;L.useEffect(()=>{const _=(S,E)=>{const C=document.getElementById(E);if(C)C.href!==S&&(C.href=S);else{const A=document.createElement("link");A.id=E,A.rel="stylesheet",A.href=S,document.head.appendChild(A)}},x=S=>{const E=document.getElementById(S);E&&E.remove()};return s?(_(s,KR),x(Q_),x(ex)):(x(KR),f==="dark"?(_(ZR(MZ),ex),x(Q_)):(_(ZR(DZ),Q_),x(ex))),()=>{}},[s,f]);const h=L.useCallback(()=>{if(o.current&&t)try{o.current.textContent=t,NZ.highlightElement(o.current)}catch(_){console.error("Prism highlight error:",_),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);L.useEffect(()=>{a||h()},[t,e,a,h]);const m=async()=>{try{await navigator.clipboard.writeText(t),r(!0),ut.success("Code copied to clipboard!"),setTimeout(()=>r(!1),1500)}catch(_){ut.error("Failed to copy code."),console.error("Clipboard copy failed:",_)}},g=()=>{const _=a;i(x=>!x),_&&setTimeout(h,0)},v=e?`language-${e}`:"language-plaintext",w=L.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container my-4",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:e||"code"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":a?"Unfold code":"Fold code",children:y.jsx(c6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:a?"Unfold":"Fold"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:m,"aria-label":"Copy code",children:n?y.jsx(id,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(JB,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Copy"})]})})]})]}),!a&&y.jsx("pre",{className:"code-block-content",children:y.jsx("code",{ref:o,className:v,children:t})}),a&&y.jsx("div",{className:"folded-content-preview p-4 pt-0",onClick:g,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:w})})]})};var ot;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(ot||(ot={}));const YR={[ot.EPERM]:"Operation not permitted",[ot.ENOENT]:"No such file or directory",[ot.EINTR]:"Interrupted system call",[ot.EIO]:"Input/output error",[ot.ENXIO]:"No such device or address",[ot.EBADF]:"Bad file descriptor",[ot.EAGAIN]:"Resource temporarily unavailable",[ot.ENOMEM]:"Cannot allocate memory",[ot.EACCES]:"Permission denied",[ot.EFAULT]:"Bad address",[ot.ENOTBLK]:"Block device required",[ot.EBUSY]:"Resource busy or locked",[ot.EEXIST]:"File exists",[ot.EXDEV]:"Invalid cross-device link",[ot.ENODEV]:"No such device",[ot.ENOTDIR]:"File is not a directory",[ot.EISDIR]:"File is a directory",[ot.EINVAL]:"Invalid argument",[ot.ENFILE]:"Too many open files in system",[ot.EMFILE]:"Too many open files",[ot.ETXTBSY]:"Text file busy",[ot.EFBIG]:"File is too big",[ot.ENOSPC]:"No space left on disk",[ot.ESPIPE]:"Illegal seek",[ot.EROFS]:"Cannot modify a read-only file system",[ot.EMLINK]:"Too many links",[ot.EPIPE]:"Broken pipe",[ot.EDOM]:"Numerical argument out of domain",[ot.ERANGE]:"Numerical result out of range",[ot.EDEADLK]:"Resource deadlock would occur",[ot.ENAMETOOLONG]:"File name too long",[ot.ENOLCK]:"No locks available",[ot.ENOSYS]:"Function not implemented",[ot.ENOTEMPTY]:"Directory is not empty",[ot.ELOOP]:"Too many levels of symbolic links",[ot.ENOMSG]:"No message of desired type",[ot.EBADE]:"Invalid exchange",[ot.EBADR]:"Invalid request descriptor",[ot.EXFULL]:"Exchange full",[ot.ENOANO]:"No anode",[ot.EBADRQC]:"Invalid request code",[ot.ENOSTR]:"Device not a stream",[ot.ENODATA]:"No data available",[ot.ETIME]:"Timer expired",[ot.ENOSR]:"Out of streams resources",[ot.ENONET]:"Machine is not on the network",[ot.EREMOTE]:"Object is remote",[ot.ENOLINK]:"Link has been severed",[ot.ECOMM]:"Communication error on send",[ot.EPROTO]:"Protocol error",[ot.EBADMSG]:"Bad message",[ot.EOVERFLOW]:"Value too large for defined data type",[ot.EBADFD]:"File descriptor in bad state",[ot.ESTRPIPE]:"Streams pipe error",[ot.ENOTSOCK]:"Socket operation on non-socket",[ot.EDESTADDRREQ]:"Destination address required",[ot.EMSGSIZE]:"Message too long",[ot.EPROTOTYPE]:"Protocol wrong type for socket",[ot.ENOPROTOOPT]:"Protocol not available",[ot.EPROTONOSUPPORT]:"Protocol not supported",[ot.ESOCKTNOSUPPORT]:"Socket type not supported",[ot.ENOTSUP]:"Operation is not supported",[ot.ENETDOWN]:"Network is down",[ot.ENETUNREACH]:"Network is unreachable",[ot.ENETRESET]:"Network dropped connection on reset",[ot.ETIMEDOUT]:"Connection timed out",[ot.ECONNREFUSED]:"Connection refused",[ot.EHOSTDOWN]:"Host is down",[ot.EHOSTUNREACH]:"No route to host",[ot.EALREADY]:"Operation already in progress",[ot.EINPROGRESS]:"Operation now in progress",[ot.ESTALE]:"Stale file handle",[ot.EREMOTEIO]:"Remote I/O error",[ot.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(ot[t],YR[ot[t]],n,r)}constructor(t,n=YR[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=ot[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var tx={exports:{}},XR;function PZ(){return XR||(XR=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function i(u,c,f,h,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||u,m),v=n?n+c:c;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)t.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,v=new Array(g);m<g;m++)v[m]=h[m].fn;return v},s.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},s.prototype.emit=function(c,f,h,m,g,v){var w=n?n+c:c;if(!this._events[w])return!1;var _=this._events[w],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,h),!0;case 4:return _.fn.call(_.context,f,h,m),!0;case 5:return _.fn.call(_.context,f,h,m,g),!0;case 6:return _.fn.call(_.context,f,h,m,g,v),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var C=_.length,A;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,h);break;case 4:_[E].fn.call(_[E].context,f,h,m);break;default:if(!S)for(A=1,S=new Array(x-1);A<x;A++)S[A-1]=arguments[A];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},s.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},s.prototype.removeListener=function(c,f,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!m||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var w=0,_=[],x=v.length;w<x;w++)(v[w].fn!==f||m&&!v[w].once||h&&v[w].context!==h)&&_.push(v[w]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(tx)),tx.exports}var FZ=PZ();const FE=Qa(FZ);var U4;let LZ=class extends FE{constructor(n){super();Ua(this,U4,"List");Ua(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(U4=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function JR(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function ur(e){throw e}const QR=Intl.NumberFormat("en",{notation:"compact"});QR.format.bind(QR);function ld(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function $Z(e){try{return JSON.parse(e),!0}catch{return!1}}function S2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function LE(e){return e.at(0).toUpperCase()+e.slice(1)}const BZ=new TextEncoder;function Bc(e){return BZ.encode(e)}const eN=new TextDecoder;function $E(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return eN.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),eN.decode(t)}function Em(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Em(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function zZ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var UZ={};let qZ="process"in globalThis&&"env"in globalThis.process&&UZ.U_DEBUG=="true";function km(...e){qZ&&console.debug("[U]",...e)}const tN=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],HZ=[...tN,...tN.map(e=>LE(e)),"char"],BE=/^(u?int|float)(8|16|32|64|128)$/i;function AD(e){return e=="char"?"uint8":e.toLowerCase()}function zE(e){return BE.test(e.toString())}function E2(e){return e=="char"||BE.test(e.toString().toLowerCase())}function VZ(e){if(!E2(e))throw new TypeError("Not a valid primitive type: "+e)}const nN=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function TD(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function GZ(e){return e!=null&&typeof e=="object"&&"struct"in e}function Fv(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Lo(e){return typeof e=="function"&&Symbol.metadata in e&&GZ(e[Symbol.metadata])}function m0(e){return e!=null&&typeof e=="object"&&Lo(e.constructor)}function RD(e){if(!m0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function UE(e){return m0(e)||Lo(e)}function ND(e){if(!UE(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function qE(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function jr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=jr(e[i]);return a}if(typeof e=="string")return VZ(e),+AD(e).match(BE)[2]/8;if(qE(e))return e[Symbol.size];ND(e);const t=Lo(e)?e:e.constructor;Fv(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Lo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(m0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,jr(i)):r+=jr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=jr(UE(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function WZ(e,t){var i;ND(e);const n=Lo(e)?e:e.constructor;Fv(n);const{struct:r}=n[Symbol.metadata];if(Lo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??ur(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=jr(UE(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function KZ(e,t){return Math.ceil(e/t)*t}function ud(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:u,length:c}of TD(r)){if(!E2(u)&&!Lo(u))throw new TypeError("Not a valid type: "+u);if(typeof c=="string"){const m=a.get(c);if(!m)throw new Error(`"${c}" is undefined or declared after "${s}"`);if(!zE(m.type))throw new Error(`"${c}" is not a number and cannot be used to count "${s}"`)}let f=`${typeof u=="string"?u:u.name} ${s}`;c!==void 0&&(f+=`[${c}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:E2(u)?AD(u):u,length:c,decl:f});const h=typeof c=="string"||Lo(u)&&u[Symbol.metadata].struct.isDynamic?0:jr(u)*(c||1);o||(o=Lo(u)?u[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=KZ(i,e.align||1),km("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function Cm(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return TD(r).push({name:a,type:e,length:t}),n}}function ID(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:ur(new Error("Array lengths must be natural numbers"))}function Ma(e){if(qE(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();RD(e),Fv(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=jr(e),a=new Uint8Array(r),i=new DataView(a.buffer);km("serialize",e.constructor.name);let o=0,s=0;for(const u of n.values()){const c=ID(e,u);km("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name][f]:e[u.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=m0(h)?jr(h):jr(u.type),!zE(u.type)){a.set(h?Ma(h):new Uint8Array(jr(u.type)),o);continue}const m=`set${LE(u.type)}`;if(m=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&nN,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&nN,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](o,Number(h),!t.bigEndian)}}return a}function Lv(e,t){const n=zZ(t);if(qE(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);RD(e),Fv(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);km("deserialize",e.constructor.name);let o=0,s=0;for(const u of a.values()){const c=ID(e,u);km("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name]:e;const m=c!=-1?f:u.name,g=h[m]===null||h[m]===void 0,v=g&&Lo(u.type)&&u.type[Symbol.metadata].struct.isDynamic;if(o=s,!m0(h[m])&&!v&&(s+=jr(u.type)),typeof e[u.name]=="string"){e[u.name]=e[u.name].slice(0,f)+String.fromCharCode(i.getUint8(o))+e[u.name].slice(f+1);continue}if(!zE(u.type)){if(v&&Lo(u.type))h[m]??(h[m]=new u.type);else if(g)continue;Lv(h[m],new Uint8Array(n.subarray(o))),s+=jr(h[m]);continue}c&&c!=-1&&(h||(h=[]));const w=`get${LE(u.type)}`;if(w=="getInt64"){h[m]=i.getBigInt64(o,!r.bigEndian);continue}if(w=="getUint64"){h[m]=i.getBigUint64(o,!r.bigEndian);continue}if(w=="getInt128"){h[m]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(w=="getUint128"){h[m]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(w=="getFloat128"){h[m]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[w](o,!r.bigEndian)}}}function ZZ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Cm(e,n):Cm(e)(n,r)}return t}const yn=Object.fromEntries(HZ.map(e=>[e,ZZ(e)]));function YZ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Wo={root:"/",pwd:"/",credentials:YZ({uid:0,gid:0}),descriptors:new Map};function OD(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const u=n.lastIndexOf("/");u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function Rl(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Wo.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=OD(n,!r),r?`/${n}`:n.length?n:"/"}function XZ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=OD(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function tr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?XZ(t):"."}function jD(e,t){if(e===t||(e=Rl.call(this,e),t=Rl.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let u=-1,c=0;for(;c<s;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(u=c)}if(c===s)if(o>s){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>s&&(e[n+c]==="/"?u=c:c===0&&(u=0));let f="";for(c=n+u+1;c<=r;++c)(c===r||e[c]==="/")&&(f+=f.length===0?"..":"/..");return`${f}${t.slice(i+u)}`}function Zn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Kf(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function ms(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,u=e.length-1,c=0;for(;u>=r;--u){if(e[u]==="/"){if(!s){i=u+1;break}continue}o===-1&&(s=!1,o=u+1),e[u]==="."?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}if(o!==-1){const f=i===0&&t?1:i;a===-1||c===0||c===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(f,o):(n.name=e.slice(f,a),n.base=e.slice(f,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var mn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(mn||(mn={}));mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";const JZ=new LZ;function QZ(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};JZ.add(n),sY(n)}function eY(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+tr(i,e.path)}function Xu(e){return function(t,n={}){return QZ(e,eY(t,n)),t}}Xu(mn.EMERG);const tY=Xu(mn.ALERT),$v=Xu(mn.CRIT),xi=Xu(mn.ERR),Wa=Xu(mn.WARN),HE=Xu(mn.NOTICE),DD=Xu(mn.INFO),em=Xu(mn.DEBUG);function nY(e,t){return`\x1B[${t}m${e}\x1B[0m`}function rY(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[nY(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"",mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"",mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";let aY=e=>[...rY(e),e.message];function iY(e){const t=aY(e);return typeof t=="string"?[t]:Array.from(t)}let oY=console.error;function sY(e){e.level>lY||oY(...iY(e))}let lY=mn.ALERT;function VE(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function uY(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function cY(e,t){if(typeof t!="object"||t===null)throw xi(new Ue(ot.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){em("Using default for option: "+n);continue}throw xi(new Ue(ot.EINVAL,"Missing required option: "+n))}const i=(c,f=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,u=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw xi(new Ue(ot.EINVAL,`Incorrect type for "${n}": ${o} (expected ${u})`))}}function MD(e){return e!=null&&typeof e=="object"&&"backend"in e&&VE(e.backend)}const GE=0,pa=4,Kr=2,Yy=1,WE=1,dY=2,fY=4,PD=0,Va=1,_l=2,Bv=64,zv=128,hY=256,Uv=512,ed=1024,pY=65536,mY=262144,gY=131072,qv=1052672,yY=4096,bY=32768,vY=16384,wY=2048,yr=61440,cd=49152,Ml=40960,$o=32768,dd=24576,la=16384,fd=8192,hd=4096,g0=2048,y0=1024,_Y=512,xY=448,FD=256,LD=128,$D=64,SY=56,BD=32,zD=16,UD=8,EY=7,qD=4,HD=2,VD=1,kY=0,hi=4294967295,GD=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:WE,COPYFILE_FICLONE:dY,COPYFILE_FICLONE_FORCE:fY,F_OK:GE,O_APPEND:ed,O_CREAT:Bv,O_DIRECT:vY,O_DIRECTORY:pY,O_DSYNC:yY,O_EXCL:zv,O_NOATIME:mY,O_NOCTTY:hY,O_NOFOLLOW:gY,O_NONBLOCK:wY,O_RDONLY:PD,O_RDWR:_l,O_SYMLINK:bY,O_SYNC:qv,O_TRUNC:Uv,O_WRONLY:Va,R_OK:pa,S_IFBLK:dd,S_IFCHR:fd,S_IFDIR:la,S_IFIFO:hd,S_IFLNK:Ml,S_IFMT:yr,S_IFREG:$o,S_IFSOCK:cd,S_IRGRP:BD,S_IROTH:qD,S_IRUSR:FD,S_IRWXG:SY,S_IRWXO:EY,S_IRWXU:xY,S_ISGID:y0,S_ISUID:g0,S_ISVTX:_Y,S_IWGRP:zD,S_IWOTH:HD,S_IWUSR:LD,S_IXGRP:UD,S_IXOTH:VD,S_IXUSR:$D,UV_FS_O_FILEMAP:kY,W_OK:Kr,X_OK:Yy,size_max:hi},Symbol.toStringTag,{value:"Module"})),ky=BigInt(1e3);class WD{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:u,ino:c,...f}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(c??0),this.mode=this._convert(u??420&$o),(this.mode&yr)==0&&(this.mode=this.mode|this._convert($o)),Object.assign(this,f)}isFile(){return(this.mode&yr)===$o}isDirectory(){return(this.mode&yr)===la}isSymbolicLink(){return(this.mode&yr)===Ml}isSocket(){return(this.mode&yr)===cd}isBlockDevice(){return(this.mode&yr)===dd}isCharacterDevice(){return(this.mode&yr)===fd}isFIFO(){return(this.mode&yr)===hd}toJSON(){return ld(this,k2)}hasAccess(t,n){return ir(n,this._isBigint?new Pl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*ky}get mtimeNs(){return BigInt(this.mtimeMs)*ky}get ctimeNs(){return BigInt(this.ctimeMs)*ky}get birthtimeNs(){return BigInt(this.birthtimeMs)*ky}}function KD(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<hi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<hi?e.gid=n:r=!1,r}class Pl extends WD{constructor(){super(...arguments),this._isBigint=!1}}class pd extends WD{constructor(){super(...arguments),this._isBigint=!0}}function CY(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class AY{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=hi,this.ffree=hi}}class TY{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(hi),this.ffree=BigInt(hi)}}var Er=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},pn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},KE=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const $i=0,RY=1024;let rN=(()=>{var e,t;let n=[ud()],r,a=[],i,o,s=[],u=[],c,f=[],h=[],m,g=[],v=[],w,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=pn(this,s,0),this.valueSize=(pn(this,u),pn(this,f,0)),this._key=(pn(this,h),pn(this,g,"")),this._value=(pn(this,v),pn(this,_,new Uint8Array(RY))),pn(this,x),S&&(this.key=S),E&&(this.value=E)}},KE(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=yn).uint32.bind(e)],c=[(t=yn).uint32.bind(t)],m=[yn.char("keySize")],w=[yn.uint8("valueSize")],Er(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},s,u),Er(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},f,h),Er(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,v),Er(null,null,w,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},_,x),Er(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),pn(i,a)})(),i})(),Uu=(()=>{var e;let t=[ud()],n,r=[],a,i,o=[],s=[],u,c=[],f=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new rN(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=pn(this,o,0),this.data=(pn(this,s),pn(this,c,[])),pn(this,f)}},KE(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=yn).uint32.bind(e)],u=[Cm(rN,"size")],Er(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},o,s),Er(null,null,u,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},c,f),Er(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),pn(a,r)})(),a})();const k2=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],NY=4;var Si;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Si||(Si={}));let sa=(()=>{var e,t,n,r,a,i,o,s,u,c,f,h,m,g,v,w;let _=[ud()],x,S=[],E,C,A=[],j=[],O,N=[],z=[],H,Q=[],P=[],Z,V=[],te=[],ae,re=[],Y=[],ne,G=[],X=[],oe,ye=[],we=[],fe,Me=[],Fe=[],Oe,Re=[],ze=[],He,Te=[],Ce=[],B,ke=[],Ae=[],ce,se=[],J=[],xe,Pe=[],Se=[],Ze,Et=[],at=[],_t,Nt=[],Rt=[],Kt,pe=[],R=[],q,de=[],Ie=[],be,Ee=[],le=[];var ft=E=class{constructor(vt){if(this.data=pn(this,A,S2(0,hi)),this.__data_old=(pn(this,j),pn(this,N,0)),this.size=(pn(this,z),pn(this,Q,0)),this.mode=(pn(this,P),pn(this,V,0)),this.nlink=(pn(this,te),pn(this,re,1)),this.uid=(pn(this,Y),pn(this,G,0)),this.gid=(pn(this,X),pn(this,ye,0)),this.atimeMs=(pn(this,we),pn(this,Me,Date.now())),this.birthtimeMs=(pn(this,Fe),pn(this,Re,Date.now())),this.mtimeMs=(pn(this,ze),pn(this,Te,Date.now())),this.ctimeMs=(pn(this,Ce),pn(this,ke,Date.now())),this.ino=(pn(this,Ae),pn(this,se,S2(0,hi))),this.__ino_old=(pn(this,J),pn(this,Pe,0)),this.flags=(pn(this,Se),pn(this,Et,0)),this.__after_flags=(pn(this,at),pn(this,Nt,0)),this.version=(pn(this,Rt),pn(this,pe,0)),this.__padding=(pn(this,R),pn(this,de,[])),this.attributes=(pn(this,Ie),pn(this,Ee,new Uu)),pn(this,le),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<jr(ft))throw $v(new Ue(ot.EIO,"Buffer is too small to create an inode"));Lv(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...ld(this,k2),attributes:this.attributes}}toStats(){return new Pl(this)}update(vt){if(!vt)return!1;let D=!1;for(const $e of k2)vt[$e]!==void 0&&($e=="ino"||$e=="data"||this[$e]!==vt[$e]&&($e=="atimeMs"&&this.flags&Si.NoAtime||(this[$e]=vt[$e],D=!0)));return vt.attributes&&(this.attributes=vt.attributes,D=!0),D&&(this.ctimeMs=Date.now()),D}};return KE(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=yn).uint32.bind(e)],O=[(t=yn).uint32.bind(t)],H=[(n=yn).uint32.bind(n)],Z=[(r=yn).uint16.bind(r)],ae=[(a=yn).uint32.bind(a)],ne=[(i=yn).uint32.bind(i)],oe=[(o=yn).uint32.bind(o)],fe=[(s=yn).float64.bind(s)],Oe=[(u=yn).float64.bind(u)],He=[(c=yn).float64.bind(c)],B=[(f=yn).float64.bind(f)],ce=[(h=yn).uint32.bind(h)],xe=[(m=yn).uint32.bind(m)],Ze=[(g=yn).uint32.bind(g)],_t=[(v=yn).uint16.bind(v)],Kt=[(w=yn).uint32.bind(w)],q=[yn.uint8(48)],be=[Cm(Uu)],Er(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:D=>"data"in D,get:D=>D.data,set:(D,$e)=>{D.data=$e}},metadata:vt},A,j),Er(null,null,O,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:D=>"__data_old"in D,get:D=>D.__data_old,set:(D,$e)=>{D.__data_old=$e}},metadata:vt},N,z),Er(null,null,H,{kind:"field",name:"size",static:!1,private:!1,access:{has:D=>"size"in D,get:D=>D.size,set:(D,$e)=>{D.size=$e}},metadata:vt},Q,P),Er(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:D=>"mode"in D,get:D=>D.mode,set:(D,$e)=>{D.mode=$e}},metadata:vt},V,te),Er(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:D=>"nlink"in D,get:D=>D.nlink,set:(D,$e)=>{D.nlink=$e}},metadata:vt},re,Y),Er(null,null,ne,{kind:"field",name:"uid",static:!1,private:!1,access:{has:D=>"uid"in D,get:D=>D.uid,set:(D,$e)=>{D.uid=$e}},metadata:vt},G,X),Er(null,null,oe,{kind:"field",name:"gid",static:!1,private:!1,access:{has:D=>"gid"in D,get:D=>D.gid,set:(D,$e)=>{D.gid=$e}},metadata:vt},ye,we),Er(null,null,fe,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:D=>"atimeMs"in D,get:D=>D.atimeMs,set:(D,$e)=>{D.atimeMs=$e}},metadata:vt},Me,Fe),Er(null,null,Oe,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:D=>"birthtimeMs"in D,get:D=>D.birthtimeMs,set:(D,$e)=>{D.birthtimeMs=$e}},metadata:vt},Re,ze),Er(null,null,He,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:D=>"mtimeMs"in D,get:D=>D.mtimeMs,set:(D,$e)=>{D.mtimeMs=$e}},metadata:vt},Te,Ce),Er(null,null,B,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:D=>"ctimeMs"in D,get:D=>D.ctimeMs,set:(D,$e)=>{D.ctimeMs=$e}},metadata:vt},ke,Ae),Er(null,null,ce,{kind:"field",name:"ino",static:!1,private:!1,access:{has:D=>"ino"in D,get:D=>D.ino,set:(D,$e)=>{D.ino=$e}},metadata:vt},se,J),Er(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:D=>"__ino_old"in D,get:D=>D.__ino_old,set:(D,$e)=>{D.__ino_old=$e}},metadata:vt},Pe,Se),Er(null,null,Ze,{kind:"field",name:"flags",static:!1,private:!1,access:{has:D=>"flags"in D,get:D=>D.flags,set:(D,$e)=>{D.flags=$e}},metadata:vt},Et,at),Er(null,null,_t,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:D=>"__after_flags"in D,get:D=>D.__after_flags,set:(D,$e)=>{D.__after_flags=$e}},metadata:vt},Nt,Rt),Er(null,null,Kt,{kind:"field",name:"version",static:!1,private:!1,access:{has:D=>"version"in D,get:D=>D.version,set:(D,$e)=>{D.version=$e}},metadata:vt},pe,R),Er(null,null,q,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:D=>"__padding"in D,get:D=>D.__padding,set:(D,$e)=>{D.__padding=$e}},metadata:vt},de,Ie),Er(null,null,be,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:D=>"attributes"in D,get:D=>D.attributes,set:(D,$e)=>{D.attributes=$e}},metadata:vt},Ee,le),Er(null,x={value:E},_,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=x.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),pn(E,S)})(),ft=E})();function IY(e){return(e.mode&yr)===$o}function Ho(e){return(e.mode&yr)===la}function Zf(e){return(e.mode&yr)===Ml}function OY(e){return(e.mode&yr)===cd}function Am(e){return(e.mode&yr)===dd}function Tm(e){return(e.mode&yr)===fd}function jY(e){return(e.mode&yr)===hd}function ir(e,t,n){const r=(e==null?void 0:e.credentials)||Wo.credentials;if(Zf(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&FD&&(a|=pa),t.mode&LD&&(a|=Kr),t.mode&$D&&(a|=Yy)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&BD&&(a|=pa),t.mode&zD&&(a|=Kr),t.mode&UD&&(a|=Yy)),t.mode&qD&&(a|=pa),t.mode&HD&&(a|=Kr),t.mode&VD&&(a|=Yy),(a&n)===n}const aN=1;class jb extends Map{constructor(){super(...arguments),this.maxSize=hi}toJSON(){return{version:aN,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*jr(sa);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&yr)!=la)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())Zn(a)==t&&a!=t&&(r[Kf(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&yr)!=la)continue;const a={};for(const i of this.keys())Zn(i)==n&&i!=n&&(a[Kf(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=aN)throw new Ue(ot.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=S2(1,hi)),r=="/"&&(a.ino=0),this.set(r,new sa(a));return this}static parse(t){if(!$Z(t))throw new Ue(ot.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new jb;return r.fromJSON(n),r}}const nx=4096;let ZE=class C2{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===C2.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===C2.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=nx){const u=s+nx>o?o-s:nx,c=new Uint8Array(u);await this.read(t,c,s,s+u).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const u=f=>{s=!0,o.error(f)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(u),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(u))}})}};function oi(e){return JSON.parse($E(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function so(e){return Bc(JSON.stringify(e))}function Ju(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(ot.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Db(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(ot.EINVAL,"Invalid time.")}}function ln(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(ot.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(ot.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(ot.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Rl(e)}function xl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:Ju("mode"in e?e==null?void 0:e.mode:null,r)}}class DY{constructor(t,n,r,a){Ua(this,"id");Ua(this,"_size");Ua(this,"options");Ua(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=Em(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Em(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,u)=>s.start-u.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var rx,ax,ix;(rx=Promise.withResolvers)!==null&&rx!==void 0||(Promise.withResolvers=(Wa("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(ax=Symbol.dispose)!==null&&ax!==void 0||(Symbol.dispose=(Wa("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(ix=Symbol.asyncDispose)!==null&&ix!==void 0||(Symbol.asyncDispose=(Wa("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class ZD{constructor(t){this.store=t}}class MY extends ZD{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class A2 extends ZD{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new DY(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:u,end:c}of o)this.async(this.get(t,u,c));if(o.length)throw xi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){Wa("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class PY{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof A2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,await this.raw.get(t,u.start,u.end),u.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof A2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,u.start,u.end),u.start)}}}var xr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Sr=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class YD extends ZE{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=jD(t,a);if(o.startsWith(".."))continue;let s=tr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){Wa("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,em(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,Ma(o)),a.has(i)&&await r.set(o.data,so(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,Ma(o)),a.has(i)&&r.setSync(o.data,so(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new jb,a=xr(n,this.transaction(),!0),i=[["/",0]],o=JR(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new sa(await a.get(u));if(r.set(s,c),c.mode&la){const f=oi((t=await a.get(c.data))!==null&&t!==void 0?t:ur(Ue.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([tr(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new jb,a=xr(n,this.transaction(),!1),i=[["/",0]],o=JR(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new sa(a.getSync(u));if(r.set(s,c),c.mode&la){const f=oi((t=a.getSync(c.data))!==null&&t!==void 0?t:ur(Ue.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([tr(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!0),u=ms(t),c=ms(n),f=await this.findInode(s,u.dir,"rename"),h=oi((r=await s.get(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&xi(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(ot.EBUSY,u.dir);const g=c.dir==u.dir,v=g?f:await this.findInode(s,c.dir,"rename"),w=g?h:oi((a=await s.get(v.data))!==null&&a!==void 0?a:ur(Ue.With("ENODATA",c.dir,"rename")));if(w[c.base]){const _=new sa((i=await s.get(w[c.base]))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(w[c.base])}w[c.base]=m,await s.set(f.data,so(h)),await s.set(v.data,so(w)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!1),u=ms(t),c=ms(n),f=this.findInodeSync(s,u.dir,"rename"),h=oi((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&xi(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(ot.EBUSY,u.dir);const g=c.dir===u.dir,v=g?f:this.findInodeSync(s,c.dir,"rename"),w=g?h:oi((a=s.getSync(v.data))!==null&&a!==void 0?a:ur(Ue.With("ENODATA",c.dir,"rename")));if(w[c.base]){const _=new sa((i=s.getSync(w[c.base]))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(w[c.base])}w[c.base]=m,s.setSync(f.data,so(h)),s.setSync(v.data,so(w)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ma(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Sr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ma(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Sr(r)}}async createFile(t,n){return n.mode|=$o,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=$o,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=la,await this.commitNew(t,n,Bc("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=la,this.commitNewSync(t,n,Bc("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(oi((n=await a.get(i.data))!==null&&n!==void 0?n:ur(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Sr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(oi((n=a.getSync(i.data))!==null&&n!==void 0?n:ur(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Sr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,Ma(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Sr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,Ma(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Sr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!0),o=Zn(n),s=await this.findInode(i,o,"link"),u=oi((r=await i.get(s.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",o,"link"))),c=await this.findInode(i,t,"link");c.nlink++,u[Kf(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,Ma(c)),await i.set(s.data,so(u)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Sr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!1),o=Zn(n),s=this.findInodeSync(i,o,"link"),u=oi((r=i.getSync(s.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",o,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,u[Kf(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,Ma(c)),i.setSync(s.data,so(u)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Sr(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!0),u=await this.findInode(s,t,"read");if(u.size==0)return;const c=(i=await s.get(u.data,r,a))!==null&&i!==void 0?i:ur(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&xi(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!1),u=this.findInodeSync(s,t,"read");if(u.size==0)return;const c=(i=s.getSync(u.data,r,a))!==null&&i!==void 0?i:ur(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&xi(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=xr(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let u=n;o.flag("partial")||(u=Em((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),await o.set(s.data,u,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Sr(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=xr(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let u=n;o.flag("partial")||(u=Em((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),o.setSync(s.data,u,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Sr(i)}}transaction(){return new PY(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=xr(t,this.transaction(),!0);if(await n.get($i))return;const r=new sa({ino:$i,data:1,mode:511|la});await n.set(r.data,Bc("{}")),this._add($i,"/"),await n.set($i,Ma(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Sr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=xr(t,this.transaction(),!1);if(n.getSync($i))return;const r=new sa({ino:$i,data:1,mode:511|la});n.setSync(r.data,Bc("{}")),this._add($i,"/"),n.setSync($i,Ma(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Sr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Wa("Attempted to populate tables after initialization");return}em("Populating tables with existing store metadata");const n=xr(t,this.transaction(),!0),r=await n.get($i);if(!r){HE("Store does not have a root inode");const s=new sa({ino:$i,data:1,mode:511|la});await n.set(s.data,Bc("{}")),this._add($i,"/"),await n.set($i,Ma(s)),await n.commit();return}if(r.length<jr(sa)){$v("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",$i]];for(;o.length>0;){i++;const[s,u]=o.shift();this._add(u,s);const c=await n.get(u);if(!c){Wa("Store is missing data for inode: "+u);continue}if(c.length<jr(sa)){Wa(`Invalid inode size for ino ${u}: ${c.length}`);continue}const f=new sa(c);if((f.mode&la)!=la||a.has(u))continue;a.add(u);const h=await n.get(f.data);if(!h){Wa("Store is missing directory data: "+f.data);continue}const m=oi(h);for(const[g,v]of Object.entries(m))o.push([tr(s,g),v])}em(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Sr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new sa((a=await t.get(i))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new sa((a=t.getSync(i))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>hi)throw xi(new Ue(ot.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=xr(o,this.transaction(),!0),{dir:u,base:c}=ms(t),f=await this.findInode(s,u,a),h=oi((i=await s.get(f.data))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new sa({...n,ino:m,data:m+1,size:r.byteLength});return await s.set(g.ino,Ma(g)),await s.set(g.data,r),h[c]=g.ino,await s.set(f.data,so(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=xr(o,this.transaction(),!1),{dir:u,base:c}=ms(t),f=this.findInodeSync(s,u,a),h=oi((i=s.getSync(f.data))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new sa({...n,ino:m,data:m+1,size:r.byteLength});return s.setSync(g.ino,Ma(g)),s.setSync(g.data,r),h[c]=g.ino,s.setSync(f.data,so(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=xr(i,this.transaction(),!0),{dir:u,base:c}=ms(t),f=await this.findInode(s,u,o),h=oi((r=await s.get(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",u,o)));if(!h[c])throw Ue.With("ENOENT",t,o);const m=h[c],g=new sa((a=await s.get(m))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Ho(g))throw Ue.With("EISDIR",t,o);await s.set(f.data,so(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,Ma(g))):(await s.remove(g.data),await s.remove(m),this._remove(m)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Sr(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=xr(i,this.transaction(),!1),{dir:u,base:c}=ms(t),f=this.findInodeSync(s,u,o),h=oi((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",u,o))),m=h[c];if(!m)throw Ue.With("ENOENT",t,o);const g=new sa((a=s.getSync(m))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Ho(g))throw Ue.With("EISDIR",t,o);s.setSync(f.data,so(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,Ma(g))):(s.removeSync(g.data),s.removeSync(m),this._remove(m)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Sr(i)}}}class FY extends MY{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class LY extends Map{constructor(t=hi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new FY(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const $Y={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new YD(new LY(e,t));return n.checkRootSync(),n}},BY=$Y;let ma=!0;class iN extends FE{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;lo(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;lo(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);Cy(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);Cy(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,lo(this.output,-a.length,0),lo(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;lo(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(lo(this.output,-this._cursor,0),lo(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);Cy(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,lo(this.output,-r.length,0),lo(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(Cy(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Wa("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Wa("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function zY(e,t,n,r){return"input"in e?new iN(e.input,e.output,e.completer,e.terminal):new iN(e,t,n,r)}function Cy(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function lo(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Mb{get position(){return this.flag&ed?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&qv||this.inode.flags&Si.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Va||this.flag&_l))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&Va||this.flag&_l))throw new Ue(ot.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Tm(this.inode)&&!Am(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Va)throw new Ue(ot.EPERM,"File not opened with a readable mode");this.inode.flags&Si.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Tm(this.inode)&&!Am(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>yr?-61441:yr)|t,(this._isSync||t>yr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,KD(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Pb(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Wo.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function ei(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Wo.descriptors).get(t);if(!a)throw new Ue(ot.EBADF);return a}function XD(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Wo.descriptors).delete(t)}const UY=/[rwasx]{1,2}\+?/;function Sl(e){if(typeof e=="number")return e;if(!UY.test(e))throw new Ue(ot.EINVAL,"Invalid flag string: "+e);return qY(e)}function qY(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(ot.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?PD:Bv;return e.includes("w")&&(t|=Uv),e.includes("a")&&(t|=ed),e.includes("+")?t|=_l:e.includes("r")||(t|=Va),e.includes("s")&&(t|=qv),e.includes("x")&&(t|=zv),t}function JD(e){let t=0;return e&Va||(t|=pa),(e&Va||e&_l)&&(t|=Kr),t}const Rm=new Map;YE("/",BY.create({label:"root"}));function YE(e,t){if(e[0]!="/"&&(e="/"+e),e=Rl.call(this,e),Rm.has(e))throw xi(new Ue(ot.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Rm.set(e,t),DD(`Mounted ${t.name} on ${e}`),em(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function QD(e){if(e[0]!="/"&&(e="/"+e),e=Rl.call(this,e),!Rm.has(e)){Wa(e+" is already unmounted");return}Rm.delete(e),HE("Unmounted "+e)}function Pn(e,t){const n=(t==null?void 0:t.root)||Wo.root;e=ln(tr(n,e));const r=[...Rm].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(VY(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw tY(new Ue(ot.EIO,"No file system",e))}function ox(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function or(e,t){typeof e.stack=="string"&&(e.stack=ox(e.stack,t));try{e.message=ox(e.message,t)}catch{}return e.path&&(e.path=ox(e.path,t)),e}function e8(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||hi),files:(t?BigInt:Number)(n.totalNodes||hi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function HY(e){var t,n,r,a,i,o,s;const u=this!==null&&this!==void 0?this:Wo;if(((t=u.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=u.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=u.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=u.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(ot.EPERM,"Can not chroot() as non-root user");(i=u.root)!==null&&i!==void 0||(u.root="/");const c=tr(u.root,e);for(const f of(s=(o=u.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!f.path.startsWith(u.root))throw Ue.With("EBUSY",f.path,"chroot");f.path=f.path.slice(u.root.length)}if(c.length>u.root.length)throw new Ue(ot.EPERM,"Can not chroot() outside of current root");u.root=c}function VY(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class t8 extends FE{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class n8 extends t8{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?tr(t.root,n):n,WY(this.realpath,this)}close(){super.emit("close"),KY(this.realpath,this)}[Symbol.dispose](){this.close()}}class GY extends t8{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=qu(this.path);CY(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=qu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Cu=new Map;function WY(e,t){const n=ln(e);Cu.has(n)||Cu.set(n,new Set),Cu.get(n).add(t)}function KY(e,t){const n=ln(e);Cu.has(n)&&(Cu.get(n).delete(t),Cu.get(n).size===0&&Cu.delete(n))}function Pa(e,t,n){var r;e&&(n=tr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=ln(n);for(let a=n;a!="/";a=Zn(a)){const i=Cu.get(a);if(i)for(const o of i)o.emit("change",t,jD.call(o._context,a,n)||Kf(n))}}var b0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},v0=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function ZY(e,t){e=ln(e),t=ln(t);const n=Pn(e,this),r=Pn(t,this);if(!qu.call(this,Zn(e)).hasAccess(Kr,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Pa(this,"rename",e.toString()),Pa(this,"change",t.toString());return}tk.call(this,t,ek(e)),QE.call(this,e),Pa(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}function XE(e){e=ln(e);try{const{fs:t,path:n}=Pn(Qu.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==ot.ENOENT)return!1;throw t}}function qu(e,t){e=ln(e);const{fs:n,path:r}=Pn(Qu.call(this,e),this);try{const a=n.statSync(r);if(ma&&!ir(this,a,pa))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new pd(a):new Pl(a)}catch(a){throw or(a,{[r]:e})}}function JE(e,t){e=ln(e);const{fs:n,path:r}=Pn(e,this);try{const a=n.statSync(r);if(ma&&!ir(this,a,pa))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new pd(a):new Pl(a)}catch(a){throw or(a,{[r]:e})}}function YY(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=b0(n,md.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(ot.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{v0(n)}}function QE(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{if(ma&&!ir(this,t.statSync(n),Kr))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function md(e,t){var n;e=ln(e);const r=Ju(t.mode,420),a=Sl(t.flag);e=t.preserveSymlinks?e:Qu.call(this,e);const{fs:i,path:o}=Pn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&Bv))throw Ue.With("ENOENT",e,"_open");const c=i.statSync(Zn(o));if(!ir(this,c,Kr))throw Ue.With("EACCES",Zn(e),"_open");if(!Ho(c))throw Ue.With("ENOTDIR",Zn(e),"_open");if(!t.allowDirectory&&r&la)throw Ue.With("EISDIR",e,"_open");if(!ir(this,c,Kr))throw Ue.With("EACCES",Zn(o),"_open");const{euid:f,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Wo.credentials,m=i.createFileSync(o,{mode:r,uid:c.mode&g0?c.uid:f,gid:c.mode&y0?c.gid:h});return new Mb(this,e,i,o,a,m)}if(!ir(this,s,r)||!ir(this,s,JD(a)))throw Ue.With("EACCES",e,"_open");if(a&zv)throw Ue.With("EEXIST",e,"_open");const u=new Mb(this,e,i,o,a,s);if(a&Uv&&u.truncate(0),!t.allowDirectory&&s.mode&la)throw Ue.With("EISDIR",e,"_open");return u}function Hv(e,t,n=GE){return Pb(md.call(this,e,{flag:t,mode:n}))}function Vv(e,t,n){return Pb(md.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function r8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=b0(r,typeof e=="number"?ei(this,e):md.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{v0(r)}}function ek(e,t={}){const n=xl(t,null,"r",420);if(Sl(n.flag)&Va)throw new Ue(ot.EINVAL,"Flag passed to readFile must allow for reading");const a=Ar.from(r8.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function tk(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=xl(n,"utf8","w+",420),i=Sl(a.flag);if(!(i&Va||i&_l))throw new Ue(ot.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new Ue(ot.EINVAL,"Data not specified");b0(r,typeof e=="number"?ei(this,e):md.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),Pa(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{v0(r)}}function XY(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=xl(n,"utf8","a+",420),i=Sl(a.flag);if(!(i&ed))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);b0(r,md.call(this,typeof e=="number"?ei(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{v0(r)}}function JY(e,t){const n=ei(this,e).stat();return t!=null&&t.bigint?new pd(n):new Pl(n)}function gd(e){ei(this,e).close(),XD(this,e)}function QY(e,t=0){if(t||(t=0),t<0)throw new Ue(ot.EINVAL);ei(this,e).truncate(t)}function eX(e){ei(this,e).sync()}function tX(e){ei(this,e).datasync()}function nX(e,t,n,r,a){let i,o,s,u;if(typeof t=="string"){u=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Ar.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,u=typeof a=="number"?a:null;const c=ei(this,e);u??(u=c.position);const f=c.write(i,o,s,u);return Pa(this,"change",c.path),f}function rX(e,t,n,r,a){const i=ei(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function nk(e,t,n){ei(this,e).chown(t,n)}function rk(e,t){const n=Ju(t,-1);if(n<0)throw new Ue(ot.EINVAL,"Invalid mode.");ei(this,e).chmod(n)}function ak(e,t,n){ei(this,e).utimes(Db(t),Db(n))}function a8(e){e=ln(e);const{fs:t,path:n}=Pn(Qu.call(this,e),this);try{const r=t.statSync(n);if(!Ho(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ma&&!ir(this,r,Kr))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function ik(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Wo.credentials;t=typeof t=="object"?t:{mode:t};const o=Ju(t==null?void 0:t.mode,511);e=Qu.call(this,e);const{fs:s,path:u,root:c}=Pn(e,this),f={[u]:e},h=(m,g)=>{if(!ir(this,g,Kr))throw Ue.With("EACCES",Zn(m),"mkdir");const v=s.mkdirSync(m,{mode:o,uid:g.mode&g0?g.uid:a,gid:g.mode&y0?g.gid:i});return Pa(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){h(u,s.statSync(Zn(u)));return}const m=[];for(let v=u,w=e;!s.existsSync(v);v=Zn(v),w=Zn(w))m.unshift(v),f[v]=w;if(!m.length)return;const g=[s.statSync(Zn(m[0]))];for(const[v,w]of m.entries())g.push(h(w,g[v]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw or(m,f)}}function yh(e,t){t=typeof t=="object"?t:{encoding:t},e=ln(e);const{fs:n,path:r}=Pn(Qu.call(this,e),this);let a;try{const o=n.statSync(r);if(ma&&!ir(this,o,pa))throw Ue.With("EACCES",r,"readdir");if(!Ho(o))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw or(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(tr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new Nm(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Ar.from(o)):i.push(o),!(!Ho(s)||!(t!=null&&t.recursive)))for(const u of yh.call(this,tr(e,o),t))u instanceof Nm?(u.path=tr(o,u.path),i.push(u)):Ar.isBuffer(u)?i.push(Ar.from(tr(o,$E(u)))):i.push(tr(o,u))}return i}function aX(e,t){if(e=ln(e),!qu(Zn(e)).hasAccess(pa,this))throw Ue.With("EACCES",Zn(e),"link");if(t=ln(t),!qu(Zn(t)).hasAccess(Kr,this))throw Ue.With("EACCES",Zn(t),"link");const{fs:n,path:r}=Pn(e,this),a=Pn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ma&&!ir(this,n.statSync(r),pa))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw or(i,{[r]:e,[a.path]:t})}}function iX(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(ot.EINVAL,"Invalid type: "+n);t=ln(t);const a=b0(r,md.call(this,t,{flag:"wx",mode:420}),!1);a.write(Bc(ln(e,!0))),a.chmod(Ml)}catch(a){r.error=a,r.hasError=!0}finally{v0(r)}}function T2(e,t){const n=Ar.from(r8.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function oX(e,t,n){const r=Hv.call(this,e,"r+");nk.call(this,r,t,n),gd.call(this,r)}function sX(e,t,n){const r=Vv.call(this,e,"r+");nk.call(this,r,t,n),gd.call(this,r)}function lX(e,t){const n=Hv.call(this,e,"r+");rk.call(this,n,t),gd.call(this,n)}function uX(e,t){const n=Vv.call(this,e,"r+");rk.call(this,n,t),gd.call(this,n)}function i8(e,t,n){const r=Hv.call(this,e,"r+");ak.call(this,r,t,n),gd.call(this,r)}function cX(e,t,n){const r=Vv.call(this,e,"r+");ak.call(this,r,t,n),gd.call(this,r)}function R2(e,t,n){try{const u=Pn(t,e),c=u.fs.statSync(u.path);if(!Zf(c))return{...u,fullPath:t,stats:c};const f=Rl.call(e,Zn(t),T2.call(e,t).toString());return R2(e,f)}catch{}const{base:r,dir:a}=ms(t),i=a=="/"?"/":Qu.call(e,a),o=tr(i,r),s=Pn(o,e);try{const u=s.fs.statSync(s.path);if(!Zf(u))return{...s,fullPath:o,stats:u};const c=Rl.call(e,i,T2.call(e,o).toString());return R2(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}function Qu(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=R2(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Ar.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function dX(e,t=384){if(!ir(this,qu.call(this,e),t))throw new Ue(ot.EACCES)}function o8(e,t){e=ln(e);let n;try{n=JE.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&yr){case la:if(t!=null&&t.recursive)for(const r of yh.call(this,e))o8.call(this,tr(e,r),t);a8.call(this,e);break;case $o:case Ml:case dd:case fd:QE.call(this,e);break;case hd:case cd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}}function fX(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return ik.call(this,a),n=="buffer"?Ar.from(a):a}function s8(e,t,n){if(e=ln(e),t=ln(t),n&&n&WE&&XE(t))throw new Ue(ot.EEXIST,"Destination file already exists",t,"copyFile");tk.call(this,t,ek(e)),Pa(this,"rename",t.toString())}function hX(e,t,n){const r=ei(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function pX(e,t,n){const r=ei(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function mX(e,t){return e=ln(e),new ok(e,this)}function l8(e,t,n){e=ln(e),t=ln(t);const r=JE.call(this,e);if(n!=null&&n.errorOnExist&&XE.call(this,t))throw new Ue(ot.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&yr){case la:if(!(n!=null&&n.recursive))throw new Ue(ot.EISDIR,e+" is a directory (not copied)",e,"cp");ik.call(this,t,{recursive:!0});for(const a of yh.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(tr(e,a.name),tr(t,a.name))||l8.call(this,tr(e,a.name),tr(t,a.name),n);break;case $o:case Ml:s8.call(this,e,t);break;case dd:case fd:case hd:case cd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&i8.call(this,t,r.atime,r.mtime)}function gX(e,t){e=ln(e);const{fs:n}=Pn(e,this);return e8(n,t==null?void 0:t.bigint)}function yX(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(u=>(u=u.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${u}$`))),o=[];function s(u){const c=yh(u,{withFileTypes:r,encoding:"utf8"});for(const f of c){const h=r?f.path:u+"/"+f;a(r?f:h)||(qu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&s(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&o.push(r?f.path:h.replace(/^\/+/g,"")))}}return s(n),o}class Nm{get name(){return Kf(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return IY(this.stats)}isDirectory(){return Ho(this.stats)}isBlockDevice(){return Am(this.stats)}isCharacterDevice(){return Tm(this.stats)}isSymbolicLink(){return Zf(this.stats)}isFIFO(){return jY(this.stats)}isSocket(){return OY(this.stats)}}class ok{checkClosed(){if(this.closed)throw new Ue(ot.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await nc.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=yh.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var sx={exports:{}},lx={exports:{}},ux={},oN;function ec(){return oN||(oN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=f,n.toByteArray=m,n.fromByteArray=w;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function c(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var A=C===E?0:4-C%4;return[C,A]}function f(S){var E=c(S),C=E[0],A=E[1];return(C+A)*3/4-A}function h(S,E,C){return(E+C)*3/4-C}function m(S){var E,C=c(S),A=C[0],j=C[1],O=new i(h(S,A,j)),N=0,z=j>0?A-4:A,H;for(H=0;H<z;H+=4)E=a[S.charCodeAt(H)]<<18|a[S.charCodeAt(H+1)]<<12|a[S.charCodeAt(H+2)]<<6|a[S.charCodeAt(H+3)],O[N++]=E>>16&255,O[N++]=E>>8&255,O[N++]=E&255;return j===2&&(E=a[S.charCodeAt(H)]<<2|a[S.charCodeAt(H+1)]>>4,O[N++]=E&255),j===1&&(E=a[S.charCodeAt(H)]<<10|a[S.charCodeAt(H+1)]<<4|a[S.charCodeAt(H+2)]>>2,O[N++]=E>>8&255,O[N++]=E&255),O}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var A,j=[],O=E;O<C;O+=3)A=(S[O]<<16&16711680)+(S[O+1]<<8&65280)+(S[O+2]&255),j.push(g(A));return j.join("")}function w(S){for(var E,C=S.length,A=C%3,j=[],O=16383,N=0,z=C-A;N<z;N+=O)j.push(v(S,N,N+O>z?z:N+O));return A===1?(E=S[C-1],j.push(r[E>>2]+r[E<<4&63]+"==")):A===2&&(E=(S[C-2]<<8)+S[C-1],j.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),j.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,C,A,j){var O,N,z=j*8-A-1,H=(1<<z)-1,Q=H>>1,P=-7,Z=C?j-1:0,V=C?-1:1,te=S[E+Z];for(Z+=V,O=te&(1<<-P)-1,te>>=-P,P+=z;P>0;O=O*256+S[E+Z],Z+=V,P-=8);for(N=O&(1<<-P)-1,O>>=-P,P+=A;P>0;N=N*256+S[E+Z],Z+=V,P-=8);if(O===0)O=1-Q;else{if(O===H)return N?NaN:(te?-1:1)*(1/0);N=N+Math.pow(2,A),O=O-Q}return(te?-1:1)*N*Math.pow(2,O-A)},_.write=function(S,E,C,A,j,O){var N,z,H,Q=O*8-j-1,P=(1<<Q)-1,Z=P>>1,V=j===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=A?0:O-1,ae=A?1:-1,re=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(z=isNaN(E)?1:0,N=P):(N=Math.floor(Math.log(E)/Math.LN2),E*(H=Math.pow(2,-N))<1&&(N--,H*=2),N+Z>=1?E+=V/H:E+=V*Math.pow(2,1-Z),E*H>=2&&(N++,H/=2),N+Z>=P?(z=0,N=P):N+Z>=1?(z=(E*H-1)*Math.pow(2,j),N=N+Z):(z=E*Math.pow(2,Z-1)*Math.pow(2,j),N=0));j>=8;S[C+te]=z&255,te+=ae,z/=256,j-=8);for(N=N<<j|z,Q+=j;Q>0;S[C+te]=N&255,te+=ae,N/=256,Q-=8);S[C+te-ae]|=re*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=_,A=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=P,S.SlowBuffer=ye,S.INSPECT_MAX_BYTES=50;const j=2147483647;S.kMaxLength=j;const{Uint8Array:O,ArrayBuffer:N,SharedArrayBuffer:z}=globalThis;P.TYPED_ARRAY_SUPPORT=H(),!P.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function H(){try{const U=new O(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,O.prototype),Object.setPrototypeOf(U,$),U.foo()===42}catch{return!1}}Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}}),Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}});function Q(U){if(U>j)throw new RangeError('The value "'+U+'" is invalid for option "size"');const $=new O(U);return Object.setPrototypeOf($,P.prototype),$}function P(U,$,W){if(typeof U=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(U)}return Z(U,$,W)}P.poolSize=8192;function Z(U,$,W){if(typeof U=="string")return re(U,$);if(N.isView(U))return ne(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(ge(U,N)||U&&ge(U.buffer,N)||typeof z<"u"&&(ge(U,z)||U&&ge(U.buffer,z)))return G(U,$,W);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=U.valueOf&&U.valueOf();if(he!=null&&he!==U)return P.from(he,$,W);const Ne=X(U);if(Ne)return Ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return P.from(U[Symbol.toPrimitive]("string"),$,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}P.from=function(U,$,W){return Z(U,$,W)},Object.setPrototypeOf(P.prototype,O.prototype),Object.setPrototypeOf(P,O);function V(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function te(U,$,W){return V(U),U<=0?Q(U):$!==void 0?typeof W=="string"?Q(U).fill($,W):Q(U).fill($):Q(U)}P.alloc=function(U,$,W){return te(U,$,W)};function ae(U){return V(U),Q(U<0?0:oe(U)|0)}P.allocUnsafe=function(U){return ae(U)},P.allocUnsafeSlow=function(U){return ae(U)};function re(U,$){if((typeof $!="string"||$==="")&&($="utf8"),!P.isEncoding($))throw new TypeError("Unknown encoding: "+$);const W=we(U,$)|0;let he=Q(W);const Ne=he.write(U,$);return Ne!==W&&(he=he.slice(0,Ne)),he}function Y(U){const $=U.length<0?0:oe(U.length)|0,W=Q($);for(let he=0;he<$;he+=1)W[he]=U[he]&255;return W}function ne(U){if(ge(U,O)){const $=new O(U);return G($.buffer,$.byteOffset,$.byteLength)}return Y(U)}function G(U,$,W){if($<0||U.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<$+(W||0))throw new RangeError('"length" is outside of buffer bounds');let he;return $===void 0&&W===void 0?he=new O(U):W===void 0?he=new O(U,$):he=new O(U,$,W),Object.setPrototypeOf(he,P.prototype),he}function X(U){if(P.isBuffer(U)){const $=oe(U.length)|0,W=Q($);return W.length===0||U.copy(W,0,0,$),W}if(U.length!==void 0)return typeof U.length!="number"||De(U.length)?Q(0):Y(U);if(U.type==="Buffer"&&Array.isArray(U.data))return Y(U.data)}function oe(U){if(U>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return U|0}function ye(U){return+U!=U&&(U=0),P.alloc(+U)}P.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==P.prototype},P.compare=function($,W){if(ge($,O)&&($=P.from($,$.offset,$.byteLength)),ge(W,O)&&(W=P.from(W,W.offset,W.byteLength)),!P.isBuffer($)||!P.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===W)return 0;let he=$.length,Ne=W.length;for(let Ve=0,gt=Math.min(he,Ne);Ve<gt;++Ve)if($[Ve]!==W[Ve]){he=$[Ve],Ne=W[Ve];break}return he<Ne?-1:Ne<he?1:0},P.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function($,W){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return P.alloc(0);let he;if(W===void 0)for(W=0,he=0;he<$.length;++he)W+=$[he].length;const Ne=P.allocUnsafe(W);let Ve=0;for(he=0;he<$.length;++he){let gt=$[he];if(ge(gt,O))Ve+gt.length>Ne.length?(P.isBuffer(gt)||(gt=P.from(gt)),gt.copy(Ne,Ve)):O.prototype.set.call(Ne,gt,Ve);else if(P.isBuffer(gt))gt.copy(Ne,Ve);else throw new TypeError('"list" argument must be an Array of Buffers');Ve+=gt.length}return Ne};function we(U,$){if(P.isBuffer(U))return U.length;if(N.isView(U)||ge(U,N))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const W=U.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&W===0)return 0;let Ne=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ft(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return $e(U).length;default:if(Ne)return he?-1:ft(U).length;$=(""+$).toLowerCase(),Ne=!0}}P.byteLength=we;function fe(U,$,W){let he=!1;if(($===void 0||$<0)&&($=0),$>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,$>>>=0,W<=$))return"";for(U||(U="utf8");;)switch(U){case"hex":return xe(this,$,W);case"utf8":case"utf-8":return ke(this,$,W);case"ascii":return se(this,$,W);case"latin1":case"binary":return J(this,$,W);case"base64":return B(this,$,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,$,W);default:if(he)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),he=!0}}P.prototype._isBuffer=!0;function Me(U,$,W){const he=U[$];U[$]=U[W],U[W]=he}P.prototype.swap16=function(){const $=this.length;if($%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<$;W+=2)Me(this,W,W+1);return this},P.prototype.swap32=function(){const $=this.length;if($%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<$;W+=4)Me(this,W,W+3),Me(this,W+1,W+2);return this},P.prototype.swap64=function(){const $=this.length;if($%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<$;W+=8)Me(this,W,W+7),Me(this,W+1,W+6),Me(this,W+2,W+5),Me(this,W+3,W+4);return this},P.prototype.toString=function(){const $=this.length;return $===0?"":arguments.length===0?ke(this,0,$):fe.apply(this,arguments)},P.prototype.toLocaleString=P.prototype.toString,P.prototype.equals=function($){if(!P.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$?!0:P.compare(this,$)===0},P.prototype.inspect=function(){let $="";const W=S.INSPECT_MAX_BYTES;return $=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&($+=" ... "),"<Buffer "+$+">"},A&&(P.prototype[A]=P.prototype.inspect),P.prototype.compare=function($,W,he,Ne,Ve){if(ge($,O)&&($=P.from($,$.offset,$.byteLength)),!P.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(W===void 0&&(W=0),he===void 0&&(he=$?$.length:0),Ne===void 0&&(Ne=0),Ve===void 0&&(Ve=this.length),W<0||he>$.length||Ne<0||Ve>this.length)throw new RangeError("out of range index");if(Ne>=Ve&&W>=he)return 0;if(Ne>=Ve)return-1;if(W>=he)return 1;if(W>>>=0,he>>>=0,Ne>>>=0,Ve>>>=0,this===$)return 0;let gt=Ve-Ne,Gt=he-W;const ht=Math.min(gt,Gt),Ct=this.slice(Ne,Ve),Ot=$.slice(W,he);for(let Zt=0;Zt<ht;++Zt)if(Ct[Zt]!==Ot[Zt]){gt=Ct[Zt],Gt=Ot[Zt];break}return gt<Gt?-1:Gt<gt?1:0};function Fe(U,$,W,he,Ne){if(U.length===0)return-1;if(typeof W=="string"?(he=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,De(W)&&(W=Ne?0:U.length-1),W<0&&(W=U.length+W),W>=U.length){if(Ne)return-1;W=U.length-1}else if(W<0)if(Ne)W=0;else return-1;if(typeof $=="string"&&($=P.from($,he)),P.isBuffer($))return $.length===0?-1:Oe(U,$,W,he,Ne);if(typeof $=="number")return $=$&255,typeof O.prototype.indexOf=="function"?Ne?O.prototype.indexOf.call(U,$,W):O.prototype.lastIndexOf.call(U,$,W):Oe(U,[$],W,he,Ne);throw new TypeError("val must be string, number or Buffer")}function Oe(U,$,W,he,Ne){let Ve=1,gt=U.length,Gt=$.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(U.length<2||$.length<2)return-1;Ve=2,gt/=2,Gt/=2,W/=2}function ht(Ot,Zt){return Ve===1?Ot[Zt]:Ot.readUInt16BE(Zt*Ve)}let Ct;if(Ne){let Ot=-1;for(Ct=W;Ct<gt;Ct++)if(ht(U,Ct)===ht($,Ot===-1?0:Ct-Ot)){if(Ot===-1&&(Ot=Ct),Ct-Ot+1===Gt)return Ot*Ve}else Ot!==-1&&(Ct-=Ct-Ot),Ot=-1}else for(W+Gt>gt&&(W=gt-Gt),Ct=W;Ct>=0;Ct--){let Ot=!0;for(let Zt=0;Zt<Gt;Zt++)if(ht(U,Ct+Zt)!==ht($,Zt)){Ot=!1;break}if(Ot)return Ct}return-1}P.prototype.includes=function($,W,he){return this.indexOf($,W,he)!==-1},P.prototype.indexOf=function($,W,he){return Fe(this,$,W,he,!0)},P.prototype.lastIndexOf=function($,W,he){return Fe(this,$,W,he,!1)};function Re(U,$,W,he){W=Number(W)||0;const Ne=U.length-W;he?(he=Number(he),he>Ne&&(he=Ne)):he=Ne;const Ve=$.length;he>Ve/2&&(he=Ve/2);let gt;for(gt=0;gt<he;++gt){const Gt=parseInt($.substr(gt*2,2),16);if(De(Gt))return gt;U[W+gt]=Gt}return gt}function ze(U,$,W,he){return st(ft($,U.length-W),U,W,he)}function He(U,$,W,he){return st(vt($),U,W,he)}function Te(U,$,W,he){return st($e($),U,W,he)}function Ce(U,$,W,he){return st(D($,U.length-W),U,W,he)}P.prototype.write=function($,W,he,Ne){if(W===void 0)Ne="utf8",he=this.length,W=0;else if(he===void 0&&typeof W=="string")Ne=W,he=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(he)?(he=he>>>0,Ne===void 0&&(Ne="utf8")):(Ne=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ve=this.length-W;if((he===void 0||he>Ve)&&(he=Ve),$.length>0&&(he<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ne||(Ne="utf8");let gt=!1;for(;;)switch(Ne){case"hex":return Re(this,$,W,he);case"utf8":case"utf-8":return ze(this,$,W,he);case"ascii":case"latin1":case"binary":return He(this,$,W,he);case"base64":return Te(this,$,W,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,$,W,he);default:if(gt)throw new TypeError("Unknown encoding: "+Ne);Ne=(""+Ne).toLowerCase(),gt=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(U,$,W){return $===0&&W===U.length?E.fromByteArray(U):E.fromByteArray(U.slice($,W))}function ke(U,$,W){W=Math.min(U.length,W);const he=[];let Ne=$;for(;Ne<W;){const Ve=U[Ne];let gt=null,Gt=Ve>239?4:Ve>223?3:Ve>191?2:1;if(Ne+Gt<=W){let ht,Ct,Ot,Zt;switch(Gt){case 1:Ve<128&&(gt=Ve);break;case 2:ht=U[Ne+1],(ht&192)===128&&(Zt=(Ve&31)<<6|ht&63,Zt>127&&(gt=Zt));break;case 3:ht=U[Ne+1],Ct=U[Ne+2],(ht&192)===128&&(Ct&192)===128&&(Zt=(Ve&15)<<12|(ht&63)<<6|Ct&63,Zt>2047&&(Zt<55296||Zt>57343)&&(gt=Zt));break;case 4:ht=U[Ne+1],Ct=U[Ne+2],Ot=U[Ne+3],(ht&192)===128&&(Ct&192)===128&&(Ot&192)===128&&(Zt=(Ve&15)<<18|(ht&63)<<12|(Ct&63)<<6|Ot&63,Zt>65535&&Zt<1114112&&(gt=Zt))}}gt===null?(gt=65533,Gt=1):gt>65535&&(gt-=65536,he.push(gt>>>10&1023|55296),gt=56320|gt&1023),he.push(gt),Ne+=Gt}return ce(he)}const Ae=4096;function ce(U){const $=U.length;if($<=Ae)return String.fromCharCode.apply(String,U);let W="",he=0;for(;he<$;)W+=String.fromCharCode.apply(String,U.slice(he,he+=Ae));return W}function se(U,$,W){let he="";W=Math.min(U.length,W);for(let Ne=$;Ne<W;++Ne)he+=String.fromCharCode(U[Ne]&127);return he}function J(U,$,W){let he="";W=Math.min(U.length,W);for(let Ne=$;Ne<W;++Ne)he+=String.fromCharCode(U[Ne]);return he}function xe(U,$,W){const he=U.length;(!$||$<0)&&($=0),(!W||W<0||W>he)&&(W=he);let Ne="";for(let Ve=$;Ve<W;++Ve)Ne+=Je[U[Ve]];return Ne}function Pe(U,$,W){const he=U.slice($,W);let Ne="";for(let Ve=0;Ve<he.length-1;Ve+=2)Ne+=String.fromCharCode(he[Ve]+he[Ve+1]*256);return Ne}P.prototype.slice=function($,W){const he=this.length;$=~~$,W=W===void 0?he:~~W,$<0?($+=he,$<0&&($=0)):$>he&&($=he),W<0?(W+=he,W<0&&(W=0)):W>he&&(W=he),W<$&&(W=$);const Ne=this.subarray($,W);return Object.setPrototypeOf(Ne,P.prototype),Ne};function Se(U,$,W){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+$>W)throw new RangeError("Trying to access beyond buffer length")}P.prototype.readUintLE=P.prototype.readUIntLE=function($,W,he){$=$>>>0,W=W>>>0,he||Se($,W,this.length);let Ne=this[$],Ve=1,gt=0;for(;++gt<W&&(Ve*=256);)Ne+=this[$+gt]*Ve;return Ne},P.prototype.readUintBE=P.prototype.readUIntBE=function($,W,he){$=$>>>0,W=W>>>0,he||Se($,W,this.length);let Ne=this[$+--W],Ve=1;for(;W>0&&(Ve*=256);)Ne+=this[$+--W]*Ve;return Ne},P.prototype.readUint8=P.prototype.readUInt8=function($,W){return $=$>>>0,W||Se($,1,this.length),this[$]},P.prototype.readUint16LE=P.prototype.readUInt16LE=function($,W){return $=$>>>0,W||Se($,2,this.length),this[$]|this[$+1]<<8},P.prototype.readUint16BE=P.prototype.readUInt16BE=function($,W){return $=$>>>0,W||Se($,2,this.length),this[$]<<8|this[$+1]},P.prototype.readUint32LE=P.prototype.readUInt32LE=function($,W){return $=$>>>0,W||Se($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+this[$+3]*16777216},P.prototype.readUint32BE=P.prototype.readUInt32BE=function($,W){return $=$>>>0,W||Se($,4,this.length),this[$]*16777216+(this[$+1]<<16|this[$+2]<<8|this[$+3])},P.prototype.readBigUInt64LE=It(function($){$=$>>>0,Ie($,"offset");const W=this[$],he=this[$+7];(W===void 0||he===void 0)&&be($,this.length-8);const Ne=W+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24,Ve=this[++$]+this[++$]*2**8+this[++$]*2**16+he*2**24;return BigInt(Ne)+(BigInt(Ve)<<BigInt(32))}),P.prototype.readBigUInt64BE=It(function($){$=$>>>0,Ie($,"offset");const W=this[$],he=this[$+7];(W===void 0||he===void 0)&&be($,this.length-8);const Ne=W*2**24+this[++$]*2**16+this[++$]*2**8+this[++$],Ve=this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+he;return(BigInt(Ne)<<BigInt(32))+BigInt(Ve)}),P.prototype.readIntLE=function($,W,he){$=$>>>0,W=W>>>0,he||Se($,W,this.length);let Ne=this[$],Ve=1,gt=0;for(;++gt<W&&(Ve*=256);)Ne+=this[$+gt]*Ve;return Ve*=128,Ne>=Ve&&(Ne-=Math.pow(2,8*W)),Ne},P.prototype.readIntBE=function($,W,he){$=$>>>0,W=W>>>0,he||Se($,W,this.length);let Ne=W,Ve=1,gt=this[$+--Ne];for(;Ne>0&&(Ve*=256);)gt+=this[$+--Ne]*Ve;return Ve*=128,gt>=Ve&&(gt-=Math.pow(2,8*W)),gt},P.prototype.readInt8=function($,W){return $=$>>>0,W||Se($,1,this.length),this[$]&128?(255-this[$]+1)*-1:this[$]},P.prototype.readInt16LE=function($,W){$=$>>>0,W||Se($,2,this.length);const he=this[$]|this[$+1]<<8;return he&32768?he|4294901760:he},P.prototype.readInt16BE=function($,W){$=$>>>0,W||Se($,2,this.length);const he=this[$+1]|this[$]<<8;return he&32768?he|4294901760:he},P.prototype.readInt32LE=function($,W){return $=$>>>0,W||Se($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},P.prototype.readInt32BE=function($,W){return $=$>>>0,W||Se($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},P.prototype.readBigInt64LE=It(function($){$=$>>>0,Ie($,"offset");const W=this[$],he=this[$+7];(W===void 0||he===void 0)&&be($,this.length-8);const Ne=this[$+4]+this[$+5]*2**8+this[$+6]*2**16+(he<<24);return(BigInt(Ne)<<BigInt(32))+BigInt(W+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24)}),P.prototype.readBigInt64BE=It(function($){$=$>>>0,Ie($,"offset");const W=this[$],he=this[$+7];(W===void 0||he===void 0)&&be($,this.length-8);const Ne=(W<<24)+this[++$]*2**16+this[++$]*2**8+this[++$];return(BigInt(Ne)<<BigInt(32))+BigInt(this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+he)}),P.prototype.readFloatLE=function($,W){return $=$>>>0,W||Se($,4,this.length),C.read(this,$,!0,23,4)},P.prototype.readFloatBE=function($,W){return $=$>>>0,W||Se($,4,this.length),C.read(this,$,!1,23,4)},P.prototype.readDoubleLE=function($,W){return $=$>>>0,W||Se($,8,this.length),C.read(this,$,!0,52,8)},P.prototype.readDoubleBE=function($,W){return $=$>>>0,W||Se($,8,this.length),C.read(this,$,!1,52,8)};function Ze(U,$,W,he,Ne,Ve){if(!P.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if($>Ne||$<Ve)throw new RangeError('"value" argument is out of bounds');if(W+he>U.length)throw new RangeError("Index out of range")}P.prototype.writeUintLE=P.prototype.writeUIntLE=function($,W,he,Ne){if($=+$,W=W>>>0,he=he>>>0,!Ne){const Gt=Math.pow(2,8*he)-1;Ze(this,$,W,he,Gt,0)}let Ve=1,gt=0;for(this[W]=$&255;++gt<he&&(Ve*=256);)this[W+gt]=$/Ve&255;return W+he},P.prototype.writeUintBE=P.prototype.writeUIntBE=function($,W,he,Ne){if($=+$,W=W>>>0,he=he>>>0,!Ne){const Gt=Math.pow(2,8*he)-1;Ze(this,$,W,he,Gt,0)}let Ve=he-1,gt=1;for(this[W+Ve]=$&255;--Ve>=0&&(gt*=256);)this[W+Ve]=$/gt&255;return W+he},P.prototype.writeUint8=P.prototype.writeUInt8=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,1,255,0),this[W]=$&255,W+1},P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,2,65535,0),this[W]=$&255,this[W+1]=$>>>8,W+2},P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,2,65535,0),this[W]=$>>>8,this[W+1]=$&255,W+2},P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,4,4294967295,0),this[W+3]=$>>>24,this[W+2]=$>>>16,this[W+1]=$>>>8,this[W]=$&255,W+4},P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,4,4294967295,0),this[W]=$>>>24,this[W+1]=$>>>16,this[W+2]=$>>>8,this[W+3]=$&255,W+4};function Et(U,$,W,he,Ne){de($,he,Ne,U,W,7);let Ve=Number($&BigInt(4294967295));U[W++]=Ve,Ve=Ve>>8,U[W++]=Ve,Ve=Ve>>8,U[W++]=Ve,Ve=Ve>>8,U[W++]=Ve;let gt=Number($>>BigInt(32)&BigInt(4294967295));return U[W++]=gt,gt=gt>>8,U[W++]=gt,gt=gt>>8,U[W++]=gt,gt=gt>>8,U[W++]=gt,W}function at(U,$,W,he,Ne){de($,he,Ne,U,W,7);let Ve=Number($&BigInt(4294967295));U[W+7]=Ve,Ve=Ve>>8,U[W+6]=Ve,Ve=Ve>>8,U[W+5]=Ve,Ve=Ve>>8,U[W+4]=Ve;let gt=Number($>>BigInt(32)&BigInt(4294967295));return U[W+3]=gt,gt=gt>>8,U[W+2]=gt,gt=gt>>8,U[W+1]=gt,gt=gt>>8,U[W]=gt,W+8}P.prototype.writeBigUInt64LE=It(function($,W=0){return Et(this,$,W,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeBigUInt64BE=It(function($,W=0){return at(this,$,W,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeIntLE=function($,W,he,Ne){if($=+$,W=W>>>0,!Ne){const ht=Math.pow(2,8*he-1);Ze(this,$,W,he,ht-1,-ht)}let Ve=0,gt=1,Gt=0;for(this[W]=$&255;++Ve<he&&(gt*=256);)$<0&&Gt===0&&this[W+Ve-1]!==0&&(Gt=1),this[W+Ve]=($/gt>>0)-Gt&255;return W+he},P.prototype.writeIntBE=function($,W,he,Ne){if($=+$,W=W>>>0,!Ne){const ht=Math.pow(2,8*he-1);Ze(this,$,W,he,ht-1,-ht)}let Ve=he-1,gt=1,Gt=0;for(this[W+Ve]=$&255;--Ve>=0&&(gt*=256);)$<0&&Gt===0&&this[W+Ve+1]!==0&&(Gt=1),this[W+Ve]=($/gt>>0)-Gt&255;return W+he},P.prototype.writeInt8=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,1,127,-128),$<0&&($=255+$+1),this[W]=$&255,W+1},P.prototype.writeInt16LE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,2,32767,-32768),this[W]=$&255,this[W+1]=$>>>8,W+2},P.prototype.writeInt16BE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,2,32767,-32768),this[W]=$>>>8,this[W+1]=$&255,W+2},P.prototype.writeInt32LE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,4,2147483647,-2147483648),this[W]=$&255,this[W+1]=$>>>8,this[W+2]=$>>>16,this[W+3]=$>>>24,W+4},P.prototype.writeInt32BE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[W]=$>>>24,this[W+1]=$>>>16,this[W+2]=$>>>8,this[W+3]=$&255,W+4},P.prototype.writeBigInt64LE=It(function($,W=0){return Et(this,$,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),P.prototype.writeBigInt64BE=It(function($,W=0){return at(this,$,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(U,$,W,he,Ne,Ve){if(W+he>U.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Nt(U,$,W,he,Ne){return $=+$,W=W>>>0,Ne||_t(U,$,W,4),C.write(U,$,W,he,23,4),W+4}P.prototype.writeFloatLE=function($,W,he){return Nt(this,$,W,!0,he)},P.prototype.writeFloatBE=function($,W,he){return Nt(this,$,W,!1,he)};function Rt(U,$,W,he,Ne){return $=+$,W=W>>>0,Ne||_t(U,$,W,8),C.write(U,$,W,he,52,8),W+8}P.prototype.writeDoubleLE=function($,W,he){return Rt(this,$,W,!0,he)},P.prototype.writeDoubleBE=function($,W,he){return Rt(this,$,W,!1,he)},P.prototype.copy=function($,W,he,Ne){if(!P.isBuffer($))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Ne&&Ne!==0&&(Ne=this.length),W>=$.length&&(W=$.length),W||(W=0),Ne>0&&Ne<he&&(Ne=he),Ne===he||$.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Ne<0)throw new RangeError("sourceEnd out of bounds");Ne>this.length&&(Ne=this.length),$.length-W<Ne-he&&(Ne=$.length-W+he);const Ve=Ne-he;return this===$&&typeof O.prototype.copyWithin=="function"?this.copyWithin(W,he,Ne):O.prototype.set.call($,this.subarray(he,Ne),W),Ve},P.prototype.fill=function($,W,he,Ne){if(typeof $=="string"){if(typeof W=="string"?(Ne=W,W=0,he=this.length):typeof he=="string"&&(Ne=he,he=this.length),Ne!==void 0&&typeof Ne!="string")throw new TypeError("encoding must be a string");if(typeof Ne=="string"&&!P.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);if($.length===1){const gt=$.charCodeAt(0);(Ne==="utf8"&&gt<128||Ne==="latin1")&&($=gt)}}else typeof $=="number"?$=$&255:typeof $=="boolean"&&($=Number($));if(W<0||this.length<W||this.length<he)throw new RangeError("Out of range index");if(he<=W)return this;W=W>>>0,he=he===void 0?this.length:he>>>0,$||($=0);let Ve;if(typeof $=="number")for(Ve=W;Ve<he;++Ve)this[Ve]=$;else{const gt=P.isBuffer($)?$:P.from($,Ne),Gt=gt.length;if(Gt===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(Ve=0;Ve<he-W;++Ve)this[Ve+W]=gt[Ve%Gt]}return this};const Kt={};function pe(U,$,W){Kt[U]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(Ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ne,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(U,$){return`The "${U}" argument must be of type number. Received type ${typeof $}`},TypeError),pe("ERR_OUT_OF_RANGE",function(U,$,W){let he=`The value of "${U}" is out of range.`,Ne=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Ne=R(String(W)):typeof W=="bigint"&&(Ne=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Ne=R(Ne)),Ne+="n"),he+=` It must be ${$}. Received ${Ne}`,he},RangeError);function R(U){let $="",W=U.length;const he=U[0]==="-"?1:0;for(;W>=he+4;W-=3)$=`_${U.slice(W-3,W)}${$}`;return`${U.slice(0,W)}${$}`}function q(U,$,W){Ie($,"offset"),(U[$]===void 0||U[$+W]===void 0)&&be($,U.length-(W+1))}function de(U,$,W,he,Ne,Ve){if(U>W||U<$){const gt=typeof $=="bigint"?"n":"";let Gt;throw $===0||$===BigInt(0)?Gt=`>= 0${gt} and < 2${gt} ** ${(Ve+1)*8}${gt}`:Gt=`>= -(2${gt} ** ${(Ve+1)*8-1}${gt}) and < 2 ** ${(Ve+1)*8-1}${gt}`,new Kt.ERR_OUT_OF_RANGE("value",Gt,U)}q(he,Ne,Ve)}function Ie(U,$){if(typeof U!="number")throw new Kt.ERR_INVALID_ARG_TYPE($,"number",U)}function be(U,$,W){throw Math.floor(U)!==U?(Ie(U,W),new Kt.ERR_OUT_OF_RANGE("offset","an integer",U)):$<0?new Kt.ERR_BUFFER_OUT_OF_BOUNDS:new Kt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${$}`,U)}const Ee=/[^+/0-9A-Za-z-_]/g;function le(U){if(U=U.split("=")[0],U=U.trim().replace(Ee,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function ft(U,$){$=$||1/0;let W;const he=U.length;let Ne=null;const Ve=[];for(let gt=0;gt<he;++gt){if(W=U.charCodeAt(gt),W>55295&&W<57344){if(!Ne){if(W>56319){($-=3)>-1&&Ve.push(239,191,189);continue}else if(gt+1===he){($-=3)>-1&&Ve.push(239,191,189);continue}Ne=W;continue}if(W<56320){($-=3)>-1&&Ve.push(239,191,189),Ne=W;continue}W=(Ne-55296<<10|W-56320)+65536}else Ne&&($-=3)>-1&&Ve.push(239,191,189);if(Ne=null,W<128){if(($-=1)<0)break;Ve.push(W)}else if(W<2048){if(($-=2)<0)break;Ve.push(W>>6|192,W&63|128)}else if(W<65536){if(($-=3)<0)break;Ve.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if(($-=4)<0)break;Ve.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return Ve}function vt(U){const $=[];for(let W=0;W<U.length;++W)$.push(U.charCodeAt(W)&255);return $}function D(U,$){let W,he,Ne;const Ve=[];for(let gt=0;gt<U.length&&!(($-=2)<0);++gt)W=U.charCodeAt(gt),he=W>>8,Ne=W%256,Ve.push(Ne),Ve.push(he);return Ve}function $e(U){return E.toByteArray(le(U))}function st(U,$,W,he){let Ne;for(Ne=0;Ne<he&&!(Ne+W>=$.length||Ne>=U.length);++Ne)$[Ne+W]=U[Ne];return Ne}function ge(U,$){return U instanceof $||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===$.name}function De(U){return U!==U}const Je=function(){const U="0123456789abcdef",$=new Array(256);for(let W=0;W<16;++W){const he=W*16;for(let Ne=0;Ne<16;++Ne)$[he+Ne]=U[W]+U[Ne]}return $}();function It(U){return typeof BigInt>"u"?me:U}function me(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(ux)),ux}var cx,sN;function Hr(){if(sN)return cx;sN=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return cx={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},cx}var dx={exports:{}},fx,lN;function u8(){return lN||(lN=1,fx={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),fx}var hx,uN;function pi(){if(uN)return hx;uN=1;const{format:e,inspect:t}=u8(),{AggregateError:n}=Hr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function c(_,x){if(!_)throw new u.ERR_INTERNAL_ASSERTION(x)}function f(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return c(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return c(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function m(_,x,S){S||(S=Error);class E extends S{constructor(...A){super(h(_,x,A))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,u[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function v(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class w extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(_,x,S)=>{c(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],A=[],j=[];for(const N of x)c(typeof N=="string","All expected entries have to be of type string"),i.includes(N)?C.push(N.toLowerCase()):o.test(N)?A.push(N):(c(N!=="object",'The value "object" should be written as "Object"'),j.push(N));if(A.length>0){const N=C.indexOf("object");N!==-1&&(C.splice(C,N,1),A.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const N=C.pop();E+=`one of type ${C.join(", ")}, or ${N}`}}(A.length>0||j.length>0)&&(E+=" or ")}if(A.length>0){switch(A.length){case 1:E+=`an instance of ${A[0]}`;break;case 2:E+=`an instance of ${A[0]} or ${A[1]}`;break;default:{const N=A.pop();E+=`an instance of ${A.join(", ")}, or ${N}`}}j.length>0&&(E+=" or ")}switch(j.length){case 0:break;case 1:j[0].toLowerCase()!==j[0]&&(E+="an "),E+=`${j[0]}`;break;case 2:E+=`one of ${j[0]} or ${j[1]}`;break;default:{const N=j.pop();E+=`one of ${j.join(", ")}, or ${N}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var O;if((O=S.constructor)!==null&&O!==void 0&&O.name)E+=`. Received an instance of ${S.constructor.name}`;else{const N=t(S,{depth:-1});E+=`. Received ${N}`}}else{let N=t(S,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),E+=`. Received type ${typeof S} (${N})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(..._)=>{c(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(_,x,S)=>{c(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=f(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=f(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),hx={AbortError:w,aggregateTwoErrors:g(v),hideStackFrames:g,codes:u},hx}var qp={exports:{}},cN;function Im(){if(cN)return qp.exports;cN=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return qp.exports=e,qp.exports.AbortSignal=t,qp.exports.default=e,qp.exports}var Ay={exports:{}},dN;function Gv(){if(dN)return Ay.exports;dN=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(A,j,O){return Function.prototype.apply.call(A,j,O)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:n=function(A){return Object.getOwnPropertyNames(A)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(A){return A!==A};function i(){i.init.call(this)}Ay.exports=i,Ay.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(A){for(var j=[],O=1;O<arguments.length;O++)j.push(arguments[O]);var N=A==="error",z=this._events;if(z!==void 0)N=N&&z.error===void 0;else if(!N)return!1;if(N){var H;if(j.length>0&&(H=j[0]),H instanceof Error)throw H;var Q=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw Q.context=H,Q}var P=z[A];if(P===void 0)return!1;if(typeof P=="function")t(P,this,j);else for(var Z=P.length,V=v(P,Z),O=0;O<Z;++O)t(V[O],this,j);return!0};function c(C,A,j,O){var N,z,H;if(s(j),z=C._events,z===void 0?(z=C._events=Object.create(null),C._eventsCount=0):(z.newListener!==void 0&&(C.emit("newListener",A,j.listener?j.listener:j),z=C._events),H=z[A]),H===void 0)H=z[A]=j,++C._eventsCount;else if(typeof H=="function"?H=z[A]=O?[j,H]:[H,j]:O?H.unshift(j):H.push(j),N=u(C),N>0&&H.length>N&&!H.warned){H.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=C,Q.type=A,Q.count=H.length,r(Q)}return C}i.prototype.addListener=function(A,j){return c(this,A,j,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(A,j){return c(this,A,j,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,A,j){var O={fired:!1,wrapFn:void 0,target:C,type:A,listener:j},N=f.bind(O);return N.listener=j,O.wrapFn=N,N}i.prototype.once=function(A,j){return s(j),this.on(A,h(this,A,j)),this},i.prototype.prependOnceListener=function(A,j){return s(j),this.prependListener(A,h(this,A,j)),this},i.prototype.removeListener=function(A,j){var O,N,z,H,Q;if(s(j),N=this._events,N===void 0)return this;if(O=N[A],O===void 0)return this;if(O===j||O.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete N[A],N.removeListener&&this.emit("removeListener",A,O.listener||j));else if(typeof O!="function"){for(z=-1,H=O.length-1;H>=0;H--)if(O[H]===j||O[H].listener===j){Q=O[H].listener,z=H;break}if(z<0)return this;z===0?O.shift():w(O,z),O.length===1&&(N[A]=O[0]),N.removeListener!==void 0&&this.emit("removeListener",A,Q||j)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(A){var j,O,N;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[A]),this;if(arguments.length===0){var z=Object.keys(O),H;for(N=0;N<z.length;++N)H=z[N],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=O[A],typeof j=="function")this.removeListener(A,j);else if(j!==void 0)for(N=j.length-1;N>=0;N--)this.removeListener(A,j[N]);return this};function m(C,A,j){var O=C._events;if(O===void 0)return[];var N=O[A];return N===void 0?[]:typeof N=="function"?j?[N.listener||N]:[N]:j?_(N):v(N,N.length)}i.prototype.listeners=function(A){return m(this,A,!0)},i.prototype.rawListeners=function(A){return m(this,A,!1)},i.listenerCount=function(C,A){return typeof C.listenerCount=="function"?C.listenerCount(A):g.call(C,A)},i.prototype.listenerCount=g;function g(C){var A=this._events;if(A!==void 0){var j=A[C];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,A){for(var j=new Array(A),O=0;O<A;++O)j[O]=C[O];return j}function w(C,A){for(;A+1<C.length;A++)C[A]=C[A+1];C.pop()}function _(C){for(var A=new Array(C.length),j=0;j<A.length;++j)A[j]=C[j].listener||C[j];return A}function x(C,A){return new Promise(function(j,O){function N(H){C.removeListener(A,z),O(H)}function z(){typeof C.removeListener=="function"&&C.removeListener("error",N),j([].slice.call(arguments))}E(C,A,z,{once:!0}),A!=="error"&&S(C,N,{once:!0})})}function S(C,A,j){typeof C.on=="function"&&E(C,"error",A,j)}function E(C,A,j,O){if(typeof C.on=="function")O.once?C.once(A,j):C.on(A,j);else if(typeof C.addEventListener=="function")C.addEventListener(A,function N(z){O.once&&C.removeEventListener(A,N),j(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return Ay.exports}var fN;function ki(){return fN||(fN=1,function(e){const t=ec(),{format:n,inspect:r}=u8(),{codes:{ERR_INVALID_ARG_TYPE:a}}=pi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Hr(),u=globalThis.AbortSignal||Im().AbortSignal,c=globalThis.AbortController||Im().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(w,_)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new a(_,"AbortSignal",w)},v=(w,_)=>{if(typeof w!="function")throw new a(_,"Function",w)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(w){let _=!1;return function(...x){_||(_=!0,w.apply(this,x))}},createDeferredPromise:function(){let w,_;return{promise:new Promise((S,E)=>{w=S,_=E}),resolve:w,reject:_}},promisify(w){return new Promise((_,x)=>{w((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(w){return w instanceof f},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:m,deprecate(w,_){return w},addAbortListener:Gv().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),v(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:u.any||function(_){if(_.length===1)return _[0];const x=new c,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(dx)),dx.exports}var Ty={},px,hN;function w0(){if(hN)return px;hN=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=Hr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:w,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=pi(),{normalizeEncoding:C}=ki(),{isAsyncFunction:A,isArrayBufferView:j}=ki().types,O={};function N(J){return J===(J|0)}function z(J){return J===J>>>0}const H=/^[0-7]+$/,Q="must be a 32-bit unsigned integer or an octal string";function P(J,xe,Pe){if(typeof J>"u"&&(J=Pe),typeof J=="string"){if(f(H,J)===null)throw new x(xe,J,Q);J=u(J,8)}return te(J,xe),J}const Z=v((J,xe,Pe=s,Se=o)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);if(J<Pe||J>Se)throw new S(xe,`>= ${Pe} && <= ${Se}`,J)}),V=v((J,xe,Pe=-2147483648,Se=2147483647)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);if(J<Pe||J>Se)throw new S(xe,`>= ${Pe} && <= ${Se}`,J)}),te=v((J,xe,Pe=!1)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);const Se=Pe?1:0,Ze=4294967295;if(J<Se||J>Ze)throw new S(xe,`>= ${Se} && <= ${Ze}`,J)});function ae(J,xe){if(typeof J!="string")throw new _(xe,"string",J)}function re(J,xe,Pe=void 0,Se){if(typeof J!="number")throw new _(xe,"number",J);if(Pe!=null&&J<Pe||Se!=null&&J>Se||(Pe!=null||Se!=null)&&i(J))throw new S(xe,`${Pe!=null?`>= ${Pe}`:""}${Pe!=null&&Se!=null?" && ":""}${Se!=null?`<= ${Se}`:""}`,J)}const Y=v((J,xe,Pe)=>{if(!t(Pe,J)){const Ze="must be one of: "+n(r(Pe,Et=>typeof Et=="string"?`'${Et}'`:h(Et)),", ");throw new x(xe,J,Ze)}});function ne(J,xe){if(typeof J!="boolean")throw new _(xe,"boolean",J)}function G(J,xe,Pe){return J==null||!c(J,xe)?Pe:J[xe]}const X=v((J,xe,Pe=null)=>{const Se=G(Pe,"allowArray",!1),Ze=G(Pe,"allowFunction",!1);if(!G(Pe,"nullable",!1)&&J===null||!Se&&e(J)||typeof J!="object"&&(!Ze||typeof J!="function"))throw new _(xe,"Object",J)}),oe=v((J,xe)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new _(xe,"a dictionary",J)}),ye=v((J,xe,Pe=0)=>{if(!e(J))throw new _(xe,"Array",J);if(J.length<Pe){const Se=`must be longer than ${Pe}`;throw new x(xe,J,Se)}});function we(J,xe){ye(J,xe);for(let Pe=0;Pe<J.length;Pe++)ae(J[Pe],`${xe}[${Pe}]`)}function fe(J,xe){ye(J,xe);for(let Pe=0;Pe<J.length;Pe++)ne(J[Pe],`${xe}[${Pe}]`)}function Me(J,xe){ye(J,xe);for(let Pe=0;Pe<J.length;Pe++){const Se=J[Pe],Ze=`${xe}[${Pe}]`;if(Se==null)throw new _(Ze,"AbortSignal",Se);He(Se,Ze)}}function Fe(J,xe="signal"){if(ae(J,xe),O[J]===void 0)throw O[m(J)]!==void 0?new E(J+" (signals must use all capital letters)"):new E(J)}const Oe=v((J,xe="buffer")=>{if(!j(J))throw new _(xe,["Buffer","TypedArray","DataView"],J)});function Re(J,xe){const Pe=C(xe),Se=J.length;if(Pe==="hex"&&Se%2!==0)throw new x("encoding",xe,`is invalid for data of length ${Se}`)}function ze(J,xe="Port",Pe=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&g(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Pe)throw new w(xe,J,Pe);return J|0}const He=v((J,xe)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new _(xe,"AbortSignal",J)}),Te=v((J,xe)=>{if(typeof J!="function")throw new _(xe,"Function",J)}),Ce=v((J,xe)=>{if(typeof J!="function"||A(J))throw new _(xe,"Function",J)}),B=v((J,xe)=>{if(J!==void 0)throw new _(xe,"undefined",J)});function ke(J,xe,Pe){if(!t(Pe,J))throw new _(xe,`('${n(Pe,"|")}')`,J)}const Ae=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(J,xe){if(typeof J>"u"||!f(Ae,J))throw new x(xe,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function se(J){if(typeof J=="string")return ce(J,"hints"),J;if(e(J)){const xe=J.length;let Pe="";if(xe===0)return Pe;for(let Se=0;Se<xe;Se++){const Ze=J[Se];ce(Ze,"hints"),Pe+=Ze,Se!==xe-1&&(Pe+=", ")}return Pe}throw new x("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return px={isInt32:N,isUint32:z,parseFileMode:P,validateArray:ye,validateStringArray:we,validateBooleanArray:fe,validateAbortSignalArray:Me,validateBoolean:ne,validateBuffer:Oe,validateDictionary:oe,validateEncoding:Re,validateFunction:Te,validateInt32:V,validateInteger:Z,validateNumber:re,validateObject:X,validateOneOf:Y,validatePlainFunction:Ce,validatePort:ze,validateSignalName:Fe,validateString:ae,validateUint32:te,validateUndefined:B,validateUnion:ke,validateAbortSignal:He,validateLinkHeaderValue:se},px}var Ry={exports:{}},mx={},pN;function yd(){return pN||(pN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function u(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var f=[],h=!1,m,g=-1;function v(){!h||!m||(h=!1,m.length?f=m.concat(f):g=-1,f.length&&w())}function w(){if(!h){var C=u(v);h=!0;for(var A=f.length;A;){for(m=f,f=[];++g<A;)m&&m[g].run();g=-1,A=f.length}m=null,h=!1,c(C)}}r.nextTick=function(C){var A=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)A[j-1]=arguments[j];f.push(new _(C,A)),f.length===1&&!h&&u(w)};function _(C,A){this.fun=C,this.array=A}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(mx)),mx}var gx,mN;function Fl(){if(mN)return gx;mN=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Hr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function f(G,X=!1){var oe;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!X||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((oe=G._readableState)===null||oe===void 0?void 0:oe.readable)!==!1)&&(!G._writableState||G._readableState))}function h(G){var X;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((X=G._writableState)===null||X===void 0?void 0:X.writable)!==!1))}function m(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function g(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function v(G){return!!(G&&!g(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function w(G){return!!(G&&!g(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function _(G){return!!(G&&!g(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function x(G){return v(G)||w(G)||_(G)}function S(G,X){return G==null?!1:X===!0?typeof G[e]=="function":X===!1?typeof G[t]=="function":typeof G[e]=="function"||typeof G[t]=="function"}function E(G){if(!g(G))return null;const X=G._writableState,oe=G._readableState,ye=X||oe;return!!(G.destroyed||G[r]||ye!=null&&ye.destroyed)}function C(G){if(!h(G))return null;if(G.writableEnded===!0)return!0;const X=G._writableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function A(G,X){if(!h(G))return null;if(G.writableFinished===!0)return!0;const oe=G._writableState;return oe!=null&&oe.errored?!1:typeof(oe==null?void 0:oe.finished)!="boolean"?null:!!(oe.finished||X===!1&&oe.ended===!0&&oe.length===0)}function j(G){if(!f(G))return null;if(G.readableEnded===!0)return!0;const X=G._readableState;return!X||X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function O(G,X){if(!f(G))return null;const oe=G._readableState;return oe!=null&&oe.errored?!1:typeof(oe==null?void 0:oe.endEmitted)!="boolean"?null:!!(oe.endEmitted||X===!1&&oe.ended===!0&&oe.length===0)}function N(G){return G&&G[i]!=null?G[i]:typeof(G==null?void 0:G.readable)!="boolean"?null:E(G)?!1:f(G)&&G.readable&&!O(G)}function z(G){return G&&G[o]!=null?G[o]:typeof(G==null?void 0:G.writable)!="boolean"?null:E(G)?!1:h(G)&&G.writable&&!C(G)}function H(G,X){return g(G)?E(G)?!0:!((X==null?void 0:X.readable)!==!1&&N(G)||(X==null?void 0:X.writable)!==!1&&z(G)):null}function Q(G){var X,oe;return g(G)?G.writableErrored?G.writableErrored:(X=(oe=G._writableState)===null||oe===void 0?void 0:oe.errored)!==null&&X!==void 0?X:null:null}function P(G){var X,oe;return g(G)?G.readableErrored?G.readableErrored:(X=(oe=G._readableState)===null||oe===void 0?void 0:oe.errored)!==null&&X!==void 0?X:null:null}function Z(G){if(!g(G))return null;if(typeof G.closed=="boolean")return G.closed;const X=G._writableState,oe=G._readableState;return typeof(X==null?void 0:X.closed)=="boolean"||typeof(oe==null?void 0:oe.closed)=="boolean"?(X==null?void 0:X.closed)||(oe==null?void 0:oe.closed):typeof G._closed=="boolean"&&V(G)?G._closed:null}function V(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function te(G){return typeof G._sent100=="boolean"&&V(G)}function ae(G){var X;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((X=G.req)===null||X===void 0?void 0:X.upgradeOrConnect)===void 0}function re(G){if(!g(G))return null;const X=G._writableState,oe=G._readableState,ye=X||oe;return!ye&&te(G)||!!(ye&&ye.autoDestroy&&ye.emitClose&&ye.closed===!1)}function Y(G){var X;return!!(G&&((X=G[s])!==null&&X!==void 0?X:G.readableDidRead||G.readableAborted))}function ne(G){var X,oe,ye,we,fe,Me,Fe,Oe,Re,ze;return!!(G&&((X=(oe=(ye=(we=(fe=(Me=G[a])!==null&&Me!==void 0?Me:G.readableErrored)!==null&&fe!==void 0?fe:G.writableErrored)!==null&&we!==void 0?we:(Fe=G._readableState)===null||Fe===void 0?void 0:Fe.errorEmitted)!==null&&ye!==void 0?ye:(Oe=G._writableState)===null||Oe===void 0?void 0:Oe.errorEmitted)!==null&&oe!==void 0?oe:(Re=G._readableState)===null||Re===void 0?void 0:Re.errored)!==null&&X!==void 0?X:!((ze=G._writableState)===null||ze===void 0)&&ze.errored))}return gx={isDestroyed:E,kIsDestroyed:r,isDisturbed:Y,kIsDisturbed:s,isErrored:ne,kIsErrored:a,isReadable:N,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:o,isClosed:Z,isDuplexNodeStream:m,isFinished:H,isIterable:S,isReadableNodeStream:f,isReadableStream:v,isReadableEnded:j,isReadableFinished:O,isReadableErrored:P,isNodeStream:g,isWebStream:x,isWritable:z,isWritableNodeStream:h,isWritableStream:w,isWritableEnded:C,isWritableFinished:A,isWritableErrored:Q,isServerRequest:ae,isServerResponse:te,willEmitClose:re,isTransformStream:_},gx}var gN;function tc(){if(gN)return Ry.exports;gN=1;const e=yd(),{AbortError:t,codes:n}=pi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=ki(),{validateAbortSignal:s,validateFunction:u,validateObject:c,validateBoolean:f}=w0(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=Hr(),{isClosed:v,isReadable:w,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:A,isWritableStream:j,isWritableFinished:O,isWritableErrored:N,isNodeStream:z,willEmitClose:H,kIsClosedPromise:Q}=Fl();let P;function Z(Y){return Y.setHeader&&typeof Y.abort=="function"}const V=()=>{};function te(Y,ne,G){var X,oe;if(arguments.length===2?(G=ne,ne=i):ne==null?ne=i:c(ne,"options"),u(G,"callback"),s(ne.signal,"options.signal"),G=o(G),x(Y)||j(Y))return ae(Y,ne,G);if(!z(Y))throw new r("stream",["ReadableStream","WritableStream","Stream"],Y);const ye=(X=ne.readable)!==null&&X!==void 0?X:_(Y),we=(oe=ne.writable)!==null&&oe!==void 0?oe:A(Y),fe=Y._writableState,Me=Y._readableState,Fe=()=>{Y.writable||ze()};let Oe=H(Y)&&_(Y)===ye&&A(Y)===we,Re=O(Y,!1);const ze=()=>{Re=!0,Y.destroyed&&(Oe=!1),!(Oe&&(!Y.readable||ye))&&(!ye||He)&&G.call(Y)};let He=S(Y,!1);const Te=()=>{He=!0,Y.destroyed&&(Oe=!1),!(Oe&&(!Y.writable||we))&&(!we||Re)&&G.call(Y)},Ce=J=>{G.call(Y,J)};let B=v(Y);const ke=()=>{B=!0;const J=N(Y)||E(Y);if(J&&typeof J!="boolean")return G.call(Y,J);if(ye&&!He&&_(Y,!0)&&!S(Y,!1))return G.call(Y,new a);if(we&&!Re&&!O(Y,!1))return G.call(Y,new a);G.call(Y)},Ae=()=>{B=!0;const J=N(Y)||E(Y);if(J&&typeof J!="boolean")return G.call(Y,J);G.call(Y)},ce=()=>{Y.req.on("finish",ze)};Z(Y)?(Y.on("complete",ze),Oe||Y.on("abort",ke),Y.req?ce():Y.on("request",ce)):we&&!fe&&(Y.on("end",Fe),Y.on("close",Fe)),!Oe&&typeof Y.aborted=="boolean"&&Y.on("aborted",ke),Y.on("end",Te),Y.on("finish",ze),ne.error!==!1&&Y.on("error",Ce),Y.on("close",ke),B?e.nextTick(ke):fe!=null&&fe.errorEmitted||Me!=null&&Me.errorEmitted?Oe||e.nextTick(Ae):(!ye&&(!Oe||w(Y))&&(Re||C(Y)===!1)||!we&&(!Oe||C(Y))&&(He||w(Y)===!1)||Me&&Y.req&&Y.aborted)&&e.nextTick(Ae);const se=()=>{G=V,Y.removeListener("aborted",ke),Y.removeListener("complete",ze),Y.removeListener("abort",ke),Y.removeListener("request",ce),Y.req&&Y.req.removeListener("finish",ze),Y.removeListener("end",Fe),Y.removeListener("close",Fe),Y.removeListener("finish",ze),Y.removeListener("end",Te),Y.removeListener("error",Ce),Y.removeListener("close",ke)};if(ne.signal&&!B){const J=()=>{const xe=G;se(),xe.call(Y,new t(void 0,{cause:ne.signal.reason}))};if(ne.signal.aborted)e.nextTick(J);else{P=P||ki().addAbortListener;const xe=P(ne.signal,J),Pe=G;G=o((...Se)=>{xe[g](),Pe.apply(Y,Se)})}}return se}function ae(Y,ne,G){let X=!1,oe=V;if(ne.signal)if(oe=()=>{X=!0,G.call(Y,new t(void 0,{cause:ne.signal.reason}))},ne.signal.aborted)e.nextTick(oe);else{P=P||ki().addAbortListener;const we=P(ne.signal,oe),fe=G;G=o((...Me)=>{we[g](),fe.apply(Y,Me)})}const ye=(...we)=>{X||e.nextTick(()=>G.apply(Y,we))};return m(Y[Q].promise,ye,ye),V}function re(Y,ne){var G;let X=!1;return ne===null&&(ne=i),(G=ne)!==null&&G!==void 0&&G.cleanup&&(f(ne.cleanup,"cleanup"),X=ne.cleanup),new h((oe,ye)=>{const we=te(Y,ne,fe=>{X&&we(),fe?ye(fe):oe()})})}return Ry.exports=te,Ry.exports.finished=re,Ry.exports}var yx,yN;function bh(){if(yN)return yx;yN=1;const e=yd(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=pi(),{Symbol:a}=Hr(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:u}=Fl(),c=a("kDestroy"),f=a("kConstruct");function h(H,Q,P){H&&(H.stack,Q&&!Q.errored&&(Q.errored=H),P&&!P.errored&&(P.errored=H))}function m(H,Q){const P=this._readableState,Z=this._writableState,V=Z||P;return Z!=null&&Z.destroyed||P!=null&&P.destroyed?(typeof Q=="function"&&Q(),this):(h(H,Z,P),Z&&(Z.destroyed=!0),P&&(P.destroyed=!0),V.constructed?g(this,H,Q):this.once(c,function(te){g(this,t(te,H),Q)}),this)}function g(H,Q,P){let Z=!1;function V(te){if(Z)return;Z=!0;const ae=H._readableState,re=H._writableState;h(te,re,ae),re&&(re.closed=!0),ae&&(ae.closed=!0),typeof P=="function"&&P(te),te?e.nextTick(v,H,te):e.nextTick(w,H)}try{H._destroy(Q||null,V)}catch(te){V(te)}}function v(H,Q){_(H,Q),w(H)}function w(H){const Q=H._readableState,P=H._writableState;P&&(P.closeEmitted=!0),Q&&(Q.closeEmitted=!0),(P!=null&&P.emitClose||Q!=null&&Q.emitClose)&&H.emit("close")}function _(H,Q){const P=H._readableState,Z=H._writableState;Z!=null&&Z.errorEmitted||P!=null&&P.errorEmitted||(Z&&(Z.errorEmitted=!0),P&&(P.errorEmitted=!0),H.emit("error",Q))}function x(){const H=this._readableState,Q=this._writableState;H&&(H.constructed=!0,H.closed=!1,H.closeEmitted=!1,H.destroyed=!1,H.errored=null,H.errorEmitted=!1,H.reading=!1,H.ended=H.readable===!1,H.endEmitted=H.readable===!1),Q&&(Q.constructed=!0,Q.destroyed=!1,Q.closed=!1,Q.closeEmitted=!1,Q.errored=null,Q.errorEmitted=!1,Q.finalCalled=!1,Q.prefinished=!1,Q.ended=Q.writable===!1,Q.ending=Q.writable===!1,Q.finished=Q.writable===!1)}function S(H,Q,P){const Z=H._readableState,V=H._writableState;if(V!=null&&V.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||V!=null&&V.autoDestroy?H.destroy(Q):Q&&(Q.stack,V&&!V.errored&&(V.errored=Q),Z&&!Z.errored&&(Z.errored=Q),P?e.nextTick(_,H,Q):_(H,Q))}function E(H,Q){if(typeof H._construct!="function")return;const P=H._readableState,Z=H._writableState;P&&(P.constructed=!1),Z&&(Z.constructed=!1),H.once(f,Q),!(H.listenerCount(f)>1)&&e.nextTick(C,H)}function C(H){let Q=!1;function P(Z){if(Q){S(H,Z??new n);return}Q=!0;const V=H._readableState,te=H._writableState,ae=te||V;V&&(V.constructed=!0),te&&(te.constructed=!0),ae.destroyed?H.emit(c,Z):Z?S(H,Z,!0):e.nextTick(A,H)}try{H._construct(Z=>{e.nextTick(P,Z)})}catch(Z){e.nextTick(P,Z)}}function A(H){H.emit(f)}function j(H){return(H==null?void 0:H.setHeader)&&typeof H.abort=="function"}function O(H){H.emit("close")}function N(H,Q){H.emit("error",Q),e.nextTick(O,H)}function z(H,Q){!H||o(H)||(!Q&&!s(H)&&(Q=new r),u(H)?(H.socket=null,H.destroy(Q)):j(H)?H.abort():j(H.req)?H.req.abort():typeof H.destroy=="function"?H.destroy(Q):typeof H.close=="function"?H.close():Q?e.nextTick(N,H,Q):e.nextTick(O,H),H.destroyed||(H[i]=!0))}return yx={construct:E,destroyer:z,destroy:m,undestroy:x,errorOrDestroy:S},yx}var bx,bN;function sk(){if(bN)return bx;bN=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Hr(),{EventEmitter:n}=Gv();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function u(w){i.writable&&i.write(w)===!1&&s.pause&&s.pause()}s.on("data",u);function c(){s.readable&&s.resume&&s.resume()}i.on("drain",c),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",m));let f=!1;function h(){f||(f=!0,i.end())}function m(){f||(f=!0,typeof i.destroy=="function"&&i.destroy())}function g(w){v(),n.listenerCount(this,"error")===0&&this.emit("error",w)}a(s,"error",g),a(i,"error",g);function v(){s.removeListener("data",u),i.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",m),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",v),s.removeListener("close",v),i.removeListener("close",v)}return s.on("end",v),s.on("close",v),i.on("close",v),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return bx={Stream:r,prependListener:a},bx}var vx={exports:{}},vN;function Wv(){return vN||(vN=1,function(e){const{SymbolDispose:t}=Hr(),{AbortError:n,codes:r}=pi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Fl(),s=tc(),{ERR_INVALID_ARG_TYPE:u}=r;let c;const f=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new u(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(f(m,"signal"),!a(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||ki().addAbortListener;const v=c(h,g);s(m,v[t])}return m}}(vx)),vx.exports}var wx,wN;function bX(){if(wN)return wx;wN=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Hr(),{Buffer:a}=ec(),{inspect:i}=ki();return wx=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=s+u.data;return c}concat(s){if(this.length===0)return a.alloc(0);const u=a.allocUnsafe(s>>>0);let c=this.head,f=0;for(;c;)n(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(s,u){const c=this.head.data;if(s<c.length){const f=c.slice(0,s);return this.head.data=c.slice(s),f}return s===c.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",c=this.head,f=0;do{const h=c.data;if(s>h.length)u+=h,s-=h.length;else{s===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=e(h,0,s),this.head=c,c.data=e(h,s));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(s){const u=a.allocUnsafe(s),c=s;let f=this.head,h=0;do{const m=f.data;if(s>m.length)n(u,m,c-s),s-=m.length;else{s===m.length?(n(u,m,c-s),++h,f.next?this.head=f.next:this.head=this.tail=null):(n(u,new r(m.buffer,m.byteOffset,s),c-s),this.head=f,f.data=m.slice(s));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},wx}var _x,_N;function Kv(){if(_N)return _x;_N=1;const{MathFloor:e,NumberIsInteger:t}=Hr(),{validateInteger:n}=w0(),{ERR_INVALID_ARG_VALUE:r}=pi().codes;let a=16*1024,i=16;function o(f,h,m){return f.highWaterMark!=null?f.highWaterMark:h?f[m]:null}function s(f){return f?i:a}function u(f,h){n(h,"value",0),f?i=h:a=h}function c(f,h,m,g){const v=o(h,g,m);if(v!=null){if(!t(v)||v<0){const w=g?`options.${m}`:"options.highWaterMark";throw new r(w,v)}return e(v)}return s(f.objectMode)}return _x={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},_x}var xx={},Ny={exports:{}},xN;function lk(){return xN||(xN=1,function(e,t){var n=ec(),r=n.Buffer;function a(o,s){for(var u in o)s[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,u){return r(o,s,u)}a(r,i),i.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,u)},i.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(Ny,Ny.exports)),Ny.exports}var SN;function vX(){if(SN)return xx;SN=1;var e=lk().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}xx.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=m,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=g,this.end=v,S=3;break;default:this.write=w,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var C=S.length-1;if(C<E)return 0;var A=i(S[C]);return A>=0?(A>0&&(x.lastNeed=A-1),A):--C<E||A===-2?0:(A=i(S[C]),A>=0?(A>0&&(x.lastNeed=A-2),A):--C<E||A===-2?0:(A=i(S[C]),A>=0?(A>0&&(A===2?A=0:x.lastNeed=A-3),A):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function u(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function c(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function f(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function m(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function v(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function w(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return xx}var Sx,EN;function c8(){if(EN)return Sx;EN=1;const e=yd(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Hr(),{Buffer:a}=ec(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=pi().codes;function s(u,c,f){let h;if(typeof c=="string"||c instanceof a)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let m;if(c&&c[n])m=!0,h=c[n]();else if(c&&c[r])m=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new u({objectMode:!0,highWaterMark:1,...f});let v=!1;g._read=function(){v||(v=!0,_())},g._destroy=function(x,S){t(w(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function w(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:A}=await h.throw(x);if(await C,A)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:x,done:S}=m?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new o;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return Sx=s,Sx}var Ex,kN;function Zv(){if(kN)return Ex;kN=1;const e=yd(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:m}=Hr();Ex=Se,Se.ReadableState=Pe;const{EventEmitter:g}=Gv(),{Stream:v,prependListener:w}=sk(),{Buffer:_}=ec(),{addAbortSignal:x}=Wv(),S=tc();let E=ki().debuglog("stream",me=>{E=me});const C=bX(),A=bh(),{getHighWaterMark:j,getDefaultHighWaterMark:O}=Kv(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:H,ERR_OUT_OF_RANGE:Q,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:V}=pi(),{validateObject:te}=w0(),ae=m("kPaused"),{StringDecoder:re}=vX(),Y=c8();s(Se.prototype,v.prototype),s(Se,v);const ne=()=>{},{errorOrDestroy:G}=A,X=1,oe=2,ye=4,we=8,fe=16,Me=32,Fe=64,Oe=128,Re=256,ze=512,He=1024,Te=2048,Ce=4096,B=8192,ke=16384,Ae=32768,ce=65536,se=1<<17,J=1<<18;function xe(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(U){U?this.state|=me:this.state&=~me}}}i(Pe.prototype,{objectMode:xe(X),ended:xe(oe),endEmitted:xe(ye),reading:xe(we),constructed:xe(fe),sync:xe(Me),needReadable:xe(Fe),emittedReadable:xe(Oe),readableListening:xe(Re),resumeScheduled:xe(ze),errorEmitted:xe(He),emitClose:xe(Te),autoDestroy:xe(Ce),destroyed:xe(B),closed:xe(ke),closeEmitted:xe(Ae),multiAwaitDrain:xe(ce),readingMore:xe(se),dataEmitted:xe(J)});function Pe(me,U,$){typeof $!="boolean"&&($=U instanceof Nl()),this.state=Te|Ce|fe|Me,me&&me.objectMode&&(this.state|=X),$&&me&&me.readableObjectMode&&(this.state|=X),this.highWaterMark=me?j(this,me,"readableHighWaterMark",$):O(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new re(me.encoding),this.encoding=me.encoding)}function Se(me){if(!(this instanceof Se))return new Se(me);const U=this instanceof Nl();this._readableState=new Pe(me,this,U),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!U&&x(me.signal,this)),v.call(this,me),A.construct(this,()=>{this._readableState.needReadable&&R(this,this._readableState)})}Se.prototype.destroy=A.destroy,Se.prototype._undestroy=A.undestroy,Se.prototype._destroy=function(me,U){U(me)},Se.prototype[g.captureRejectionSymbol]=function(me){this.destroy(me)},Se.prototype[f]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new V,this.destroy(me)),new u((U,$)=>S(this,W=>W&&W!==me?$(W):U(null)))},Se.prototype.push=function(me,U){return Ze(this,me,U,!1)},Se.prototype.unshift=function(me,U){return Ze(this,me,U,!0)};function Ze(me,U,$,W){E("readableAddChunk",U);const he=me._readableState;let Ne;if((he.state&X)===0&&(typeof U=="string"?($=$||he.defaultEncoding,he.encoding!==$&&(W&&he.encoding?U=_.from(U,$).toString(he.encoding):(U=_.from(U,$),$=""))):U instanceof _?$="":v._isUint8Array(U)?(U=v._uint8ArrayToBuffer(U),$=""):U!=null&&(Ne=new z("chunk",["string","Buffer","Uint8Array"],U))),Ne)G(me,Ne);else if(U===null)he.state&=-9,Rt(me,he);else if((he.state&X)!==0||U&&U.length>0)if(W)if((he.state&ye)!==0)G(me,new Z);else{if(he.destroyed||he.errored)return!1;Et(me,he,U,!0)}else if(he.ended)G(me,new P);else{if(he.destroyed||he.errored)return!1;he.state&=-9,he.decoder&&!$?(U=he.decoder.write(U),he.objectMode||U.length!==0?Et(me,he,U,!1):R(me,he)):Et(me,he,U,!1)}else W||(he.state&=-9,R(me,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function Et(me,U,$,W){U.flowing&&U.length===0&&!U.sync&&me.listenerCount("data")>0?((U.state&ce)!==0?U.awaitDrainWriters.clear():U.awaitDrainWriters=null,U.dataEmitted=!0,me.emit("data",$)):(U.length+=U.objectMode?1:$.length,W?U.buffer.unshift($):U.buffer.push($),(U.state&Fe)!==0&&Kt(me)),R(me,U)}Se.prototype.isPaused=function(){const me=this._readableState;return me[ae]===!0||me.flowing===!1},Se.prototype.setEncoding=function(me){const U=new re(me);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;const $=this._readableState.buffer;let W="";for(const he of $)W+=U.write(he);return $.clear(),W!==""&&$.push(W),this._readableState.length=W.length,this};const at=1073741824;function _t(me){if(me>at)throw new Q("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function Nt(me,U){return me<=0||U.length===0&&U.ended?0:(U.state&X)!==0?1:r(me)?U.flowing&&U.length?U.buffer.first().length:U.length:me<=U.length?me:U.ended?U.length:0}Se.prototype.read=function(me){E("read",me),me===void 0?me=NaN:n(me)||(me=a(me,10));const U=this._readableState,$=me;if(me>U.highWaterMark&&(U.highWaterMark=_t(me)),me!==0&&(U.state&=-129),me===0&&U.needReadable&&((U.highWaterMark!==0?U.length>=U.highWaterMark:U.length>0)||U.ended))return E("read: emitReadable",U.length,U.ended),U.length===0&&U.ended?st(this):Kt(this),null;if(me=Nt(me,U),me===0&&U.ended)return U.length===0&&st(this),null;let W=(U.state&Fe)!==0;if(E("need readable",W),(U.length===0||U.length-me<U.highWaterMark)&&(W=!0,E("length less than watermark",W)),U.ended||U.reading||U.destroyed||U.errored||!U.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),U.state|=we|Me,U.length===0&&(U.state|=Fe);try{this._read(U.highWaterMark)}catch(Ne){G(this,Ne)}U.state&=-33,U.reading||(me=Nt($,U))}let he;return me>0?he=$e(me,U):he=null,he===null?(U.needReadable=U.length<=U.highWaterMark,me=0):(U.length-=me,U.multiAwaitDrain?U.awaitDrainWriters.clear():U.awaitDrainWriters=null),U.length===0&&(U.ended||(U.needReadable=!0),$!==me&&U.ended&&st(this)),he!==null&&!U.errorEmitted&&!U.closeEmitted&&(U.dataEmitted=!0,this.emit("data",he)),he};function Rt(me,U){if(E("onEofChunk"),!U.ended){if(U.decoder){const $=U.decoder.end();$&&$.length&&(U.buffer.push($),U.length+=U.objectMode?1:$.length)}U.ended=!0,U.sync?Kt(me):(U.needReadable=!1,U.emittedReadable=!0,pe(me))}}function Kt(me){const U=me._readableState;E("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(E("emitReadable",U.flowing),U.emittedReadable=!0,e.nextTick(pe,me))}function pe(me){const U=me._readableState;E("emitReadable_",U.destroyed,U.length,U.ended),!U.destroyed&&!U.errored&&(U.length||U.ended)&&(me.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,ft(me)}function R(me,U){!U.readingMore&&U.constructed&&(U.readingMore=!0,e.nextTick(q,me,U))}function q(me,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&U.length===0);){const $=U.length;if(E("maybeReadMore read 0"),me.read(0),$===U.length)break}U.readingMore=!1}Se.prototype._read=function(me){throw new H("_read()")},Se.prototype.pipe=function(me,U){const $=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new c(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(me),E("pipe count=%d opts=%j",W.pipes.length,U);const Ne=(!U||U.end!==!1)&&me!==e.stdout&&me!==e.stderr?gt:hr;W.endEmitted?e.nextTick(Ne):$.once("end",Ne),me.on("unpipe",Ve);function Ve(Dn,ti){E("onunpipe"),Dn===$&&ti&&ti.hasUnpiped===!1&&(ti.hasUnpiped=!0,Ct())}function gt(){E("onend"),me.end()}let Gt,ht=!1;function Ct(){E("cleanup"),me.removeListener("close",zn),me.removeListener("finish",fr),Gt&&me.removeListener("drain",Gt),me.removeListener("error",En),me.removeListener("unpipe",Ve),$.removeListener("end",gt),$.removeListener("end",hr),$.removeListener("data",Zt),ht=!0,Gt&&W.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Gt()}function Ot(){ht||(W.pipes.length===1&&W.pipes[0]===me?(E("false write response, pause",0),W.awaitDrainWriters=me,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(me)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(me)),$.pause()),Gt||(Gt=de($,me),me.on("drain",Gt))}$.on("data",Zt);function Zt(Dn){E("ondata");const ti=me.write(Dn);E("dest.write",ti),ti===!1&&Ot()}function En(Dn){if(E("onerror",Dn),hr(),me.removeListener("error",En),me.listenerCount("error")===0){const ti=me._writableState||me._readableState;ti&&!ti.errorEmitted?G(me,Dn):me.emit("error",Dn)}}w(me,"error",En);function zn(){me.removeListener("finish",fr),hr()}me.once("close",zn);function fr(){E("onfinish"),me.removeListener("close",zn),hr()}me.once("finish",fr);function hr(){E("unpipe"),$.unpipe(me)}return me.emit("pipe",$),me.writableNeedDrain===!0?Ot():W.flowing||(E("pipe resume"),$.resume()),me};function de(me,U){return function(){const W=me._readableState;W.awaitDrainWriters===U?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(U)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}Se.prototype.unpipe=function(me){const U=this._readableState,$={hasUnpiped:!1};if(U.pipes.length===0)return this;if(!me){const he=U.pipes;U.pipes=[],this.pause();for(let Ne=0;Ne<he.length;Ne++)he[Ne].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(U.pipes,me);return W===-1?this:(U.pipes.splice(W,1),U.pipes.length===0&&this.pause(),me.emit("unpipe",this,$),this)},Se.prototype.on=function(me,U){const $=v.prototype.on.call(this,me,U),W=this._readableState;return me==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):me==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Kt(this):W.reading||e.nextTick(be,this)),$},Se.prototype.addListener=Se.prototype.on,Se.prototype.removeListener=function(me,U){const $=v.prototype.removeListener.call(this,me,U);return me==="readable"&&e.nextTick(Ie,this),$},Se.prototype.off=Se.prototype.removeListener,Se.prototype.removeAllListeners=function(me){const U=v.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(Ie,this),U};function Ie(me){const U=me._readableState;U.readableListening=me.listenerCount("readable")>0,U.resumeScheduled&&U[ae]===!1?U.flowing=!0:me.listenerCount("data")>0?me.resume():U.readableListening||(U.flowing=null)}function be(me){E("readable nexttick read 0"),me.read(0)}Se.prototype.resume=function(){const me=this._readableState;return me.flowing||(E("resume"),me.flowing=!me.readableListening,Ee(this,me)),me[ae]=!1,this};function Ee(me,U){U.resumeScheduled||(U.resumeScheduled=!0,e.nextTick(le,me,U))}function le(me,U){E("resume",U.reading),U.reading||me.read(0),U.resumeScheduled=!1,me.emit("resume"),ft(me),U.flowing&&!U.reading&&me.read(0)}Se.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function ft(me){const U=me._readableState;for(E("flow",U.flowing);U.flowing&&me.read()!==null;);}Se.prototype.wrap=function(me){let U=!1;me.on("data",W=>{!this.push(W)&&me.pause&&(U=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",W=>{G(this,W)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{U&&me.resume&&(U=!1,me.resume())};const $=o(me);for(let W=1;W<$.length;W++){const he=$[W];this[he]===void 0&&typeof me[he]=="function"&&(this[he]=me[he].bind(me))}return this},Se.prototype[h]=function(){return vt(this)},Se.prototype.iterator=function(me){return me!==void 0&&te(me,"options"),vt(this,me)};function vt(me,U){typeof me.read!="function"&&(me=Se.wrap(me,{objectMode:!0}));const $=D(me,U);return $.stream=me,$}async function*D(me,U){let $=ne;function W(Ve){this===me?($(),$=ne):$=Ve}me.on("readable",W);let he;const Ne=S(me,{writable:!1},Ve=>{he=Ve?N(he,Ve):null,$(),$=ne});try{for(;;){const Ve=me.destroyed?null:me.read();if(Ve!==null)yield Ve;else{if(he)throw he;if(he===null)return;await new u(W)}}}catch(Ve){throw he=N(he,Ve),he}finally{(he||(U==null?void 0:U.destroyOnReturn)!==!1)&&(he===void 0||me._readableState.autoDestroy)?A.destroyer(me,null):(me.off("readable",W),Ne())}}i(Se.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Pe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(me){this[ae]=!!me}}}),Se._fromList=$e;function $e(me,U){if(U.length===0)return null;let $;return U.objectMode?$=U.buffer.shift():!me||me>=U.length?(U.decoder?$=U.buffer.join(""):U.buffer.length===1?$=U.buffer.first():$=U.buffer.concat(U.length),U.buffer.clear()):$=U.buffer.consume(me,U.decoder),$}function st(me){const U=me._readableState;E("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,e.nextTick(ge,U,me))}function ge(me,U){if(E("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,U.emit("end"),U.writable&&U.allowHalfOpen===!1)e.nextTick(De,U);else if(me.autoDestroy){const $=U._writableState;(!$||$.autoDestroy&&($.finished||$.writable===!1))&&U.destroy()}}}function De(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}Se.from=function(me,U){return Y(Se,me,U)};let Je;function It(){return Je===void 0&&(Je={}),Je}return Se.fromWeb=function(me,U){return It().newStreamReadableFromReadableStream(me,U)},Se.toWeb=function(me,U){return It().newReadableStreamFromStreamReadable(me,U)},Se.wrap=function(me,U){var $,W;return new Se({objectMode:($=(W=me.readableObjectMode)!==null&&W!==void 0?W:me.objectMode)!==null&&$!==void 0?$:!0,...U,destroy(he,Ne){A.destroyer(me,he),Ne(he)}}).wrap(me)},Ex}var kx,CN;function uk(){if(CN)return kx;CN=1;const e=yd(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:c}=Hr();kx=te,te.WritableState=Z;const{EventEmitter:f}=Gv(),h=sk().Stream,{Buffer:m}=ec(),g=bh(),{addAbortSignal:v}=Wv(),{getHighWaterMark:w,getDefaultHighWaterMark:_}=Kv(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:j,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:z}=pi().codes,{errorOrDestroy:H}=g;o(te.prototype,h.prototype),o(te,h);function Q(){}const P=u("kOnFinished");function Z(Ce,B,ke){typeof ke!="boolean"&&(ke=B instanceof Nl()),this.objectMode=!!(Ce&&Ce.objectMode),ke&&(this.objectMode=this.objectMode||!!(Ce&&Ce.writableObjectMode)),this.highWaterMark=Ce?w(this,Ce,"writableHighWaterMark",ke):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ae=!!(Ce&&Ce.decodeStrings===!1);this.decodeStrings=!Ae,this.defaultEncoding=Ce&&Ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,B),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ce||Ce.emitClose!==!1,this.autoDestroy=!Ce||Ce.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function V(Ce){Ce.buffered=[],Ce.bufferedIndex=0,Ce.allBuffers=!0,Ce.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function te(Ce){const B=this instanceof Nl();if(!B&&!r(te,this))return new te(Ce);this._writableState=new Z(Ce,this,B),Ce&&(typeof Ce.write=="function"&&(this._write=Ce.write),typeof Ce.writev=="function"&&(this._writev=Ce.writev),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy),typeof Ce.final=="function"&&(this._final=Ce.final),typeof Ce.construct=="function"&&(this._construct=Ce.construct),Ce.signal&&v(Ce.signal,this)),h.call(this,Ce),g.construct(this,()=>{const ke=this._writableState;ke.writing||we(this,ke),Oe(this,ke)})}a(te,c,{__proto__:null,value:function(Ce){return r(this,Ce)?!0:this!==te?!1:Ce&&Ce._writableState instanceof Z}}),te.prototype.pipe=function(){H(this,new C)};function ae(Ce,B,ke,Ae){const ce=Ce._writableState;if(typeof ke=="function")Ae=ke,ke=ce.defaultEncoding;else{if(!ke)ke=ce.defaultEncoding;else if(ke!=="buffer"&&!m.isEncoding(ke))throw new z(ke);typeof Ae!="function"&&(Ae=Q)}if(B===null)throw new O;if(!ce.objectMode)if(typeof B=="string")ce.decodeStrings!==!1&&(B=m.from(B,ke),ke="buffer");else if(B instanceof m)ke="buffer";else if(h._isUint8Array(B))B=h._uint8ArrayToBuffer(B),ke="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],B);let se;return ce.ending?se=new N:ce.destroyed&&(se=new A("write")),se?(e.nextTick(Ae,se),H(Ce,se,!0),se):(ce.pendingcb++,re(Ce,ce,B,ke,Ae))}te.prototype.write=function(Ce,B,ke){return ae(this,Ce,B,ke)===!0},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){const Ce=this._writableState;Ce.corked&&(Ce.corked--,Ce.writing||we(this,Ce))},te.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=s(B)),!m.isEncoding(B))throw new z(B);return this._writableState.defaultEncoding=B,this};function re(Ce,B,ke,Ae,ce){const se=B.objectMode?1:ke.length;B.length+=se;const J=B.length<B.highWaterMark;return J||(B.needDrain=!0),B.writing||B.corked||B.errored||!B.constructed?(B.buffered.push({chunk:ke,encoding:Ae,callback:ce}),B.allBuffers&&Ae!=="buffer"&&(B.allBuffers=!1),B.allNoop&&ce!==Q&&(B.allNoop=!1)):(B.writelen=se,B.writecb=ce,B.writing=!0,B.sync=!0,Ce._write(ke,Ae,B.onwrite),B.sync=!1),J&&!B.errored&&!B.destroyed}function Y(Ce,B,ke,Ae,ce,se,J){B.writelen=Ae,B.writecb=J,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new A("write")):ke?Ce._writev(ce,B.onwrite):Ce._write(ce,se,B.onwrite),B.sync=!1}function ne(Ce,B,ke,Ae){--B.pendingcb,Ae(ke),ye(B),H(Ce,ke)}function G(Ce,B){const ke=Ce._writableState,Ae=ke.sync,ce=ke.writecb;if(typeof ce!="function"){H(Ce,new E);return}ke.writing=!1,ke.writecb=null,ke.length-=ke.writelen,ke.writelen=0,B?(B.stack,ke.errored||(ke.errored=B),Ce._readableState&&!Ce._readableState.errored&&(Ce._readableState.errored=B),Ae?e.nextTick(ne,Ce,ke,B,ce):ne(Ce,ke,B,ce)):(ke.buffered.length>ke.bufferedIndex&&we(Ce,ke),Ae?ke.afterWriteTickInfo!==null&&ke.afterWriteTickInfo.cb===ce?ke.afterWriteTickInfo.count++:(ke.afterWriteTickInfo={count:1,cb:ce,stream:Ce,state:ke},e.nextTick(X,ke.afterWriteTickInfo)):oe(Ce,ke,1,ce))}function X({stream:Ce,state:B,count:ke,cb:Ae}){return B.afterWriteTickInfo=null,oe(Ce,B,ke,Ae)}function oe(Ce,B,ke,Ae){for(!B.ending&&!Ce.destroyed&&B.length===0&&B.needDrain&&(B.needDrain=!1,Ce.emit("drain"));ke-- >0;)B.pendingcb--,Ae();B.destroyed&&ye(B),Oe(Ce,B)}function ye(Ce){if(Ce.writing)return;for(let ce=Ce.bufferedIndex;ce<Ce.buffered.length;++ce){var B;const{chunk:se,callback:J}=Ce.buffered[ce],xe=Ce.objectMode?1:se.length;Ce.length-=xe,J((B=Ce.errored)!==null&&B!==void 0?B:new A("write"))}const ke=Ce[P].splice(0);for(let ce=0;ce<ke.length;ce++){var Ae;ke[ce]((Ae=Ce.errored)!==null&&Ae!==void 0?Ae:new A("end"))}V(Ce)}function we(Ce,B){if(B.corked||B.bufferProcessing||B.destroyed||!B.constructed)return;const{buffered:ke,bufferedIndex:Ae,objectMode:ce}=B,se=ke.length-Ae;if(!se)return;let J=Ae;if(B.bufferProcessing=!0,se>1&&Ce._writev){B.pendingcb-=se-1;const xe=B.allNoop?Q:Se=>{for(let Ze=J;Ze<ke.length;++Ze)ke[Ze].callback(Se)},Pe=B.allNoop&&J===0?ke:t(ke,J);Pe.allBuffers=B.allBuffers,Y(Ce,B,!0,B.length,Pe,"",xe),V(B)}else{do{const{chunk:xe,encoding:Pe,callback:Se}=ke[J];ke[J++]=null;const Ze=ce?1:xe.length;Y(Ce,B,!1,Ze,xe,Pe,Se)}while(J<ke.length&&!B.writing);J===ke.length?V(B):J>256?(ke.splice(0,J),B.bufferedIndex=0):B.bufferedIndex=J}B.bufferProcessing=!1}te.prototype._write=function(Ce,B,ke){if(this._writev)this._writev([{chunk:Ce,encoding:B}],ke);else throw new S("_write()")},te.prototype._writev=null,te.prototype.end=function(Ce,B,ke){const Ae=this._writableState;typeof Ce=="function"?(ke=Ce,Ce=null,B=null):typeof B=="function"&&(ke=B,B=null);let ce;if(Ce!=null){const se=ae(this,Ce,B);se instanceof n&&(ce=se)}return Ae.corked&&(Ae.corked=1,this.uncork()),ce||(!Ae.errored&&!Ae.ending?(Ae.ending=!0,Oe(this,Ae,!0),Ae.ended=!0):Ae.finished?ce=new j("end"):Ae.destroyed&&(ce=new A("end"))),typeof ke=="function"&&(ce||Ae.finished?e.nextTick(ke,ce):Ae[P].push(ke)),this};function fe(Ce){return Ce.ending&&!Ce.destroyed&&Ce.constructed&&Ce.length===0&&!Ce.errored&&Ce.buffered.length===0&&!Ce.finished&&!Ce.writing&&!Ce.errorEmitted&&!Ce.closeEmitted}function Me(Ce,B){let ke=!1;function Ae(ce){if(ke){H(Ce,ce??E());return}if(ke=!0,B.pendingcb--,ce){const se=B[P].splice(0);for(let J=0;J<se.length;J++)se[J](ce);H(Ce,ce,B.sync)}else fe(B)&&(B.prefinished=!0,Ce.emit("prefinish"),B.pendingcb++,e.nextTick(Re,Ce,B))}B.sync=!0,B.pendingcb++;try{Ce._final(Ae)}catch(ce){Ae(ce)}B.sync=!1}function Fe(Ce,B){!B.prefinished&&!B.finalCalled&&(typeof Ce._final=="function"&&!B.destroyed?(B.finalCalled=!0,Me(Ce,B)):(B.prefinished=!0,Ce.emit("prefinish")))}function Oe(Ce,B,ke){fe(B)&&(Fe(Ce,B),B.pendingcb===0&&(ke?(B.pendingcb++,e.nextTick((Ae,ce)=>{fe(ce)?Re(Ae,ce):ce.pendingcb--},Ce,B)):fe(B)&&(B.pendingcb++,Re(Ce,B))))}function Re(Ce,B){B.pendingcb--,B.finished=!0;const ke=B[P].splice(0);for(let Ae=0;Ae<ke.length;Ae++)ke[Ae]();if(Ce.emit("finish"),B.autoDestroy){const Ae=Ce._readableState;(!Ae||Ae.autoDestroy&&(Ae.endEmitted||Ae.readable===!1))&&Ce.destroy()}}i(te.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ce){this._writableState&&(this._writableState.destroyed=Ce)}},writable:{__proto__:null,get(){const Ce=this._writableState;return!!Ce&&Ce.writable!==!1&&!Ce.destroyed&&!Ce.errored&&!Ce.ending&&!Ce.ended},set(Ce){this._writableState&&(this._writableState.writable=!!Ce)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ce=this._writableState;return Ce?!Ce.destroyed&&!Ce.ending&&Ce.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ze=g.destroy;te.prototype.destroy=function(Ce,B){const ke=this._writableState;return!ke.destroyed&&(ke.bufferedIndex<ke.buffered.length||ke[P].length)&&e.nextTick(ye,ke),ze.call(this,Ce,B),this},te.prototype._undestroy=g.undestroy,te.prototype._destroy=function(Ce,B){B(Ce)},te.prototype[f.captureRejectionSymbol]=function(Ce){this.destroy(Ce)};let He;function Te(){return He===void 0&&(He={}),He}return te.fromWeb=function(Ce,B){return Te().newStreamWritableFromWritableStream(Ce,B)},te.toWeb=function(Ce){return Te().newWritableStreamFromStreamWritable(Ce)},kx}var Cx,AN;function wX(){if(AN)return Cx;AN=1;const e=yd(),t=ec(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=Fl(),h=tc(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=pi(),{destroyer:w}=bh(),_=Nl(),x=Zv(),S=uk(),{createDeferredPromise:E}=ki(),C=c8(),A=globalThis.Blob||t.Blob,j=typeof A<"u"?function(Z){return Z instanceof A}:function(Z){return!1},O=globalThis.AbortController||Im().AbortController,{FunctionPrototypeCall:N}=Hr();class z extends _{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Cx=function P(Z,V){if(u(Z))return Z;if(o(Z))return Q({readable:Z});if(s(Z))return Q({writable:Z});if(i(Z))return Q({writable:!1,readable:!1});if(c(Z))return Q({readable:x.fromWeb(Z)});if(f(Z))return Q({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:ae,write:re,final:Y,destroy:ne}=H(Z);if(a(ae))return C(z,ae,{objectMode:!0,write:re,final:Y,destroy:ne});const G=ae==null?void 0:ae.then;if(typeof G=="function"){let X;const oe=N(G,ae,ye=>{if(ye!=null)throw new v("nully","body",ye)},ye=>{w(X,ye)});return X=new z({objectMode:!0,readable:!1,write:re,final(ye){Y(async()=>{try{await oe,e.nextTick(ye,null)}catch(we){e.nextTick(ye,we)}})},destroy:ne})}throw new v("Iterable, AsyncIterable or AsyncFunction",V,ae)}if(j(Z))return P(Z.arrayBuffer());if(a(Z))return C(z,Z,{objectMode:!0,writable:!1});if(c(Z==null?void 0:Z.readable)&&f(Z==null?void 0:Z.writable))return z.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ae=Z!=null&&Z.readable?o(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:P(Z.readable):void 0,re=Z!=null&&Z.writable?s(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:P(Z.writable):void 0;return Q({readable:ae,writable:re})}const te=Z==null?void 0:Z.then;if(typeof te=="function"){let ae;return N(te,Z,re=>{re!=null&&ae.push(re),ae.push(null)},re=>{w(ae,re)}),ae=new z({objectMode:!0,writable:!1,read(){}})}throw new g(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function H(P){let{promise:Z,resolve:V}=E();const te=new O,ae=te.signal;return{value:P(async function*(){for(;;){const Y=Z;Z=null;const{chunk:ne,done:G,cb:X}=await Y;if(e.nextTick(X),G)return;if(ae.aborted)throw new m(void 0,{cause:ae.reason});({promise:Z,resolve:V}=E()),yield ne}}(),{signal:ae}),write(Y,ne,G){const X=V;V=null,X({chunk:Y,done:!1,cb:G})},final(Y){const ne=V;V=null,ne({done:!0,cb:Y})},destroy(Y,ne){te.abort(),ne(Y)}}}function Q(P){const Z=P.readable&&typeof P.readable.read!="function"?x.wrap(P.readable):P.readable,V=P.writable;let te=!!n(Z),ae=!!r(V),re,Y,ne,G,X;function oe(ye){const we=G;G=null,we?we(ye):ye&&X.destroy(ye)}return X=new z({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:te,writable:ae}),ae&&(h(V,ye=>{ae=!1,ye&&w(Z,ye),oe(ye)}),X._write=function(ye,we,fe){V.write(ye,we)?fe():re=fe},X._final=function(ye){V.end(),Y=ye},V.on("drain",function(){if(re){const ye=re;re=null,ye()}}),V.on("finish",function(){if(Y){const ye=Y;Y=null,ye()}})),te&&(h(Z,ye=>{te=!1,ye&&w(Z,ye),oe(ye)}),Z.on("readable",function(){if(ne){const ye=ne;ne=null,ye()}}),Z.on("end",function(){X.push(null)}),X._read=function(){for(;;){const ye=Z.read();if(ye===null){ne=X._read;return}if(!X.push(ye))return}}),X._destroy=function(ye,we){!ye&&G!==null&&(ye=new m),ne=null,re=null,Y=null,G===null?we(ye):(G=we,w(V,ye),w(Z,ye))},X}return Cx}var Ax,TN;function Nl(){if(TN)return Ax;TN=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Hr();Ax=o;const a=Zv(),i=uk();r(o.prototype,a.prototype),r(o,a);{const f=n(i.prototype);for(let h=0;h<f.length;h++){const m=f[h];o.prototype[m]||(o.prototype[m]=i.prototype[m])}}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},o.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return o.from=function(f){return c||(c=wX()),c(f,"body")},Ax}var Tx,RN;function d8(){if(RN)return Tx;RN=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Hr();Tx=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=pi().codes,r=Nl(),{getHighWaterMark:a}=Kv();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const f=c?a(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,f,h){throw new n("_transform()")},o.prototype._write=function(c,f,h){const m=this._readableState,g=this._writableState,v=m.length;this._transform(c,f,(w,_)=>{if(w){h(w);return}_!=null&&this.push(_),g.ended||v===m.length||m.length<m.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},Tx}var Rx,NN;function f8(){if(NN)return Rx;NN=1;const{ObjectSetPrototypeOf:e}=Hr();Rx=n;const t=d8();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},Rx}var Nx,IN;function ck(){if(IN)return Nx;IN=1;const e=yd(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Hr(),i=tc(),{once:o}=ki(),s=bh(),u=Nl(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:w}=pi(),{validateFunction:_,validateAbortSignal:x}=w0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:A,isTransformStream:j,isWebStream:O,isReadableStream:N,isReadableFinished:z}=Fl(),H=globalThis.AbortController||Im().AbortController;let Q,P,Z;function V(ye,we,fe){let Me=!1;ye.on("close",()=>{Me=!0});const Fe=i(ye,{readable:we,writable:fe},Oe=>{Me=!Oe});return{destroy:Oe=>{Me||(Me=!0,s.destroyer(ye,Oe||new g("pipe")))},cleanup:Fe}}function te(ye){return _(ye[ye.length-1],"streams[stream.length - 1]"),ye.pop()}function ae(ye){if(S(ye))return ye;if(C(ye))return re(ye);throw new f("val",["Readable","Iterable","AsyncIterable"],ye)}async function*re(ye){P||(P=Zv()),yield*P.prototype[r].call(ye)}async function Y(ye,we,fe,{end:Me}){let Fe,Oe=null;const Re=Te=>{if(Te&&(Fe=Te),Oe){const Ce=Oe;Oe=null,Ce()}},ze=()=>new n((Te,Ce)=>{Fe?Ce(Fe):Oe=()=>{Fe?Ce(Fe):Te()}});we.on("drain",Re);const He=i(we,{readable:!1},Re);try{we.writableNeedDrain&&await ze();for await(const Te of ye)we.write(Te)||await ze();Me&&(we.end(),await ze()),fe()}catch(Te){fe(Fe!==Te?c(Fe,Te):Te)}finally{He(),we.off("drain",Re)}}async function ne(ye,we,fe,{end:Me}){j(we)&&(we=we.writable);const Fe=we.getWriter();try{for await(const Oe of ye)await Fe.ready,Fe.write(Oe).catch(()=>{});await Fe.ready,Me&&await Fe.close(),fe()}catch(Oe){try{await Fe.abort(Oe),fe(Oe)}catch(Re){fe(Re)}}}function G(...ye){return X(ye,o(te(ye)))}function X(ye,we,fe){if(ye.length===1&&t(ye[0])&&(ye=ye[0]),ye.length<2)throw new m("streams");const Me=new H,Fe=Me.signal,Oe=fe==null?void 0:fe.signal,Re=[];x(Oe,"options.signal");function ze(){ce(new w)}Z=Z||ki().addAbortListener;let He;Oe&&(He=Z(Oe,ze));let Te,Ce;const B=[];let ke=0;function Ae(Se){ce(Se,--ke===0)}function ce(Se,Ze){var Et;if(Se&&(!Te||Te.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Te=Se),!(!Te&&!Ze)){for(;B.length;)B.shift()(Te);(Et=He)===null||Et===void 0||Et[a](),Me.abort(),Ze&&(Te||Re.forEach(at=>at()),e.nextTick(we,Te,Ce))}}let se;for(let Se=0;Se<ye.length;Se++){const Ze=ye[Se],Et=Se<ye.length-1,at=Se>0,_t=Et||(fe==null?void 0:fe.end)!==!1,Nt=Se===ye.length-1;if(A(Ze)){let Rt=function(Kt){Kt&&Kt.name!=="AbortError"&&Kt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ae(Kt)};var Pe=Rt;if(_t){const{destroy:Kt,cleanup:pe}=V(Ze,Et,at);B.push(Kt),E(Ze)&&Nt&&Re.push(pe)}Ze.on("error",Rt),E(Ze)&&Nt&&Re.push(()=>{Ze.removeListener("error",Rt)})}if(Se===0)if(typeof Ze=="function"){if(se=Ze({signal:Fe}),!S(se))throw new h("Iterable, AsyncIterable or Stream","source",se)}else S(Ze)||C(Ze)||j(Ze)?se=Ze:se=u.from(Ze);else if(typeof Ze=="function"){if(j(se)){var J;se=ae((J=se)===null||J===void 0?void 0:J.readable)}else se=ae(se);if(se=Ze(se,{signal:Fe}),Et){if(!S(se,!0))throw new h("AsyncIterable",`transform[${Se-1}]`,se)}else{var xe;Q||(Q=f8());const Rt=new Q({objectMode:!0}),Kt=(xe=se)===null||xe===void 0?void 0:xe.then;if(typeof Kt=="function")ke++,Kt.call(se,q=>{Ce=q,q!=null&&Rt.write(q),_t&&Rt.end(),e.nextTick(Ae)},q=>{Rt.destroy(q),e.nextTick(Ae,q)});else if(S(se,!0))ke++,Y(se,Rt,Ae,{end:_t});else if(N(se)||j(se)){const q=se.readable||se;ke++,Y(q,Rt,Ae,{end:_t})}else throw new h("AsyncIterable or Promise","destination",se);se=Rt;const{destroy:pe,cleanup:R}=V(se,!1,!0);B.push(pe),Nt&&Re.push(R)}}else if(A(Ze)){if(C(se)){ke+=2;const Rt=oe(se,Ze,Ae,{end:_t});E(Ze)&&Nt&&Re.push(Rt)}else if(j(se)||N(se)){const Rt=se.readable||se;ke++,Y(Rt,Ze,Ae,{end:_t})}else if(S(se))ke++,Y(se,Ze,Ae,{end:_t});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=Ze}else if(O(Ze)){if(C(se))ke++,ne(ae(se),Ze,Ae,{end:_t});else if(N(se)||S(se))ke++,ne(se,Ze,Ae,{end:_t});else if(j(se))ke++,ne(se.readable,Ze,Ae,{end:_t});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=Ze}else se=u.from(Ze)}return(Fe!=null&&Fe.aborted||Oe!=null&&Oe.aborted)&&e.nextTick(ze),se}function oe(ye,we,fe,{end:Me}){let Fe=!1;if(we.on("close",()=>{Fe||fe(new v)}),ye.pipe(we,{end:!1}),Me){let Re=function(){Fe=!0,we.end()};var Oe=Re;z(ye)?e.nextTick(Re):ye.once("end",Re)}else fe();return i(ye,{readable:!0,writable:!1},Re=>{const ze=ye._readableState;Re&&Re.code==="ERR_STREAM_PREMATURE_CLOSE"&&ze&&ze.ended&&!ze.errored&&!ze.errorEmitted?ye.once("end",fe).once("error",fe):fe(Re)}),i(we,{readable:!1,writable:!0},fe)}return Nx={pipelineImpl:X,pipeline:G},Nx}var Ix,ON;function h8(){if(ON)return Ix;ON=1;const{pipeline:e}=ck(),t=Nl(),{destroyer:n}=bh(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:c}=Fl(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=pi(),g=tc();return Ix=function(...w){if(w.length===0)throw new m("streams");if(w.length===1)return t.from(w[0]);const _=[...w];if(typeof w[0]=="function"&&(w[0]=t.from(w[0])),typeof w[w.length-1]=="function"){const Q=w.length-1;w[Q]=t.from(w[Q])}for(let Q=0;Q<w.length;++Q)if(!(!r(w[Q])&&!o(w[Q]))){if(Q<w.length-1&&!(a(w[Q])||c(w[Q])||s(w[Q])))throw new h(`streams[${Q}]`,_[Q],"must be readable");if(Q>0&&!(i(w[Q])||u(w[Q])||s(w[Q])))throw new h(`streams[${Q}]`,_[Q],"must be writable")}let x,S,E,C,A;function j(Q){const P=C;C=null,P?P(Q):Q?A.destroy(Q):!H&&!z&&A.destroy()}const O=w[0],N=e(w,j),z=!!(i(O)||u(O)||s(O)),H=!!(a(N)||c(N)||s(N));if(A=new t({writableObjectMode:!!(O!=null&&O.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:z,readable:H}),z){if(r(O))A._write=function(P,Z,V){O.write(P,Z)?V():x=V},A._final=function(P){O.end(),S=P},O.on("drain",function(){if(x){const P=x;x=null,P()}});else if(o(O)){const Z=(s(O)?O.writable:O).getWriter();A._write=async function(V,te,ae){try{await Z.ready,Z.write(V).catch(()=>{}),ae()}catch(re){ae(re)}},A._final=async function(V){try{await Z.ready,Z.close().catch(()=>{}),S=V}catch(te){V(te)}}}const Q=s(N)?N.readable:N;g(Q,()=>{if(S){const P=S;S=null,P()}})}if(H){if(r(N))N.on("readable",function(){if(E){const Q=E;E=null,Q()}}),N.on("end",function(){A.push(null)}),A._read=function(){for(;;){const Q=N.read();if(Q===null){E=A._read;return}if(!A.push(Q))return}};else if(o(N)){const P=(s(N)?N.readable:N).getReader();A._read=async function(){for(;;)try{const{value:Z,done:V}=await P.read();if(!A.push(Z))return;if(V){A.push(null);return}}catch{return}}}}return A._destroy=function(Q,P){!Q&&C!==null&&(Q=new f),E=null,x=null,S=null,C===null?P(Q):(C=P,r(N)&&n(N,Q))},A},Ix}var jN;function _X(){if(jN)return Ty;jN=1;const e=globalThis.AbortController||Im().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=pi(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=w0(),c=Hr().Symbol("kWeak"),f=Hr().Symbol("kResistStopPropagation"),{finished:h}=tc(),m=h8(),{addAbortSignalNoValidate:g}=Wv(),{isWritable:v,isNodeStream:w}=Fl(),{deprecate:_}=ki(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:A,Promise:j,PromiseReject:O,PromiseResolve:N,PromisePrototypeThen:z,Symbol:H}=Hr(),Q=H("kEmpty"),P=H("kEof");function Z(Oe,Re){if(Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal"),w(Oe)&&!v(Oe))throw new t("stream",Oe,"must be writable");const ze=m(this,Oe);return Re!=null&&Re.signal&&g(Re.signal,ze),ze}function V(Oe,Re){if(typeof Oe!="function")throw new n("fn",["Function","AsyncFunction"],Oe);Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal");let ze=1;(Re==null?void 0:Re.concurrency)!=null&&(ze=E(Re.concurrency));let He=ze-1;return(Re==null?void 0:Re.highWaterMark)!=null&&(He=E(Re.highWaterMark)),s(ze,"options.concurrency",1),s(He,"options.highWaterMark",0),He+=ze,(async function*(){const Ce=ki().AbortSignalAny([Re==null?void 0:Re.signal].filter(S)),B=this,ke=[],Ae={signal:Ce};let ce,se,J=!1,xe=0;function Pe(){J=!0,Se()}function Se(){xe-=1,Ze()}function Ze(){se&&!J&&xe<ze&&ke.length<He&&(se(),se=null)}async function Et(){try{for await(let at of B){if(J)return;if(Ce.aborted)throw new i;try{if(at=Oe(at,Ae),at===Q)continue;at=N(at)}catch(_t){at=O(_t)}xe+=1,z(at,Se,Pe),ke.push(at),ce&&(ce(),ce=null),!J&&(ke.length>=He||xe>=ze)&&await new j(_t=>{se=_t})}ke.push(P)}catch(at){const _t=O(at);z(_t,Se,Pe),ke.push(_t)}finally{J=!0,ce&&(ce(),ce=null)}}Et();try{for(;;){for(;ke.length>0;){const at=await ke[0];if(at===P)return;if(Ce.aborted)throw new i;at!==Q&&(yield at),ke.shift(),Ze()}await new j(at=>{ce=at})}}finally{J=!0,se&&(se(),se=null)}}).call(this)}function te(Oe=void 0){return Oe!=null&&u(Oe,"options"),(Oe==null?void 0:Oe.signal)!=null&&o(Oe.signal,"options.signal"),(async function*(){let ze=0;for await(const Te of this){var He;if(Oe!=null&&(He=Oe.signal)!==null&&He!==void 0&&He.aborted)throw new i({cause:Oe.signal.reason});yield[ze++,Te]}}).call(this)}async function ae(Oe,Re=void 0){for await(const ze of G.call(this,Oe,Re))return!0;return!1}async function re(Oe,Re=void 0){if(typeof Oe!="function")throw new n("fn",["Function","AsyncFunction"],Oe);return!await ae.call(this,async(...ze)=>!await Oe(...ze),Re)}async function Y(Oe,Re){for await(const ze of G.call(this,Oe,Re))return ze}async function ne(Oe,Re){if(typeof Oe!="function")throw new n("fn",["Function","AsyncFunction"],Oe);async function ze(He,Te){return await Oe(He,Te),Q}for await(const He of V.call(this,ze,Re));}function G(Oe,Re){if(typeof Oe!="function")throw new n("fn",["Function","AsyncFunction"],Oe);async function ze(He,Te){return await Oe(He,Te)?He:Q}return V.call(this,ze,Re)}class X extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function oe(Oe,Re,ze){var He;if(typeof Oe!="function")throw new n("reducer",["Function","AsyncFunction"],Oe);ze!=null&&u(ze,"options"),(ze==null?void 0:ze.signal)!=null&&o(ze.signal,"options.signal");let Te=arguments.length>1;if(ze!=null&&(He=ze.signal)!==null&&He!==void 0&&He.aborted){const ce=new i(void 0,{cause:ze.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ce)),ce}const Ce=new e,B=Ce.signal;if(ze!=null&&ze.signal){const ce={once:!0,[c]:this,[f]:!0};ze.signal.addEventListener("abort",()=>Ce.abort(),ce)}let ke=!1;try{for await(const ce of this){var Ae;if(ke=!0,ze!=null&&(Ae=ze.signal)!==null&&Ae!==void 0&&Ae.aborted)throw new i;Te?Re=await Oe(Re,ce,{signal:B}):(Re=ce,Te=!0)}if(!ke&&!Te)throw new X}finally{Ce.abort()}return Re}async function ye(Oe){Oe!=null&&u(Oe,"options"),(Oe==null?void 0:Oe.signal)!=null&&o(Oe.signal,"options.signal");const Re=[];for await(const He of this){var ze;if(Oe!=null&&(ze=Oe.signal)!==null&&ze!==void 0&&ze.aborted)throw new i(void 0,{cause:Oe.signal.reason});x(Re,He)}return Re}function we(Oe,Re){const ze=V.call(this,Oe,Re);return(async function*(){for await(const Te of ze)yield*Te}).call(this)}function fe(Oe){if(Oe=C(Oe),A(Oe))return 0;if(Oe<0)throw new a("number",">= 0",Oe);return Oe}function Me(Oe,Re=void 0){return Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal"),Oe=fe(Oe),(async function*(){var He;if(Re!=null&&(He=Re.signal)!==null&&He!==void 0&&He.aborted)throw new i;for await(const Ce of this){var Te;if(Re!=null&&(Te=Re.signal)!==null&&Te!==void 0&&Te.aborted)throw new i;Oe--<=0&&(yield Ce)}}).call(this)}function Fe(Oe,Re=void 0){return Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal"),Oe=fe(Oe),(async function*(){var He;if(Re!=null&&(He=Re.signal)!==null&&He!==void 0&&He.aborted)throw new i;for await(const Ce of this){var Te;if(Re!=null&&(Te=Re.signal)!==null&&Te!==void 0&&Te.aborted)throw new i;if(Oe-- >0&&(yield Ce),Oe<=0)return}}).call(this)}return Ty.streamReturningOperators={asIndexedPairs:_(te,"readable.asIndexedPairs will be removed in a future version."),drop:Me,filter:G,flatMap:we,map:V,take:Fe,compose:Z},Ty.promiseReturningOperators={every:re,forEach:ne,reduce:oe,toArray:ye,some:ae,find:Y},Ty}var Ox,DN;function p8(){if(DN)return Ox;DN=1;const{ArrayPrototypePop:e,Promise:t}=Hr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Fl(),{pipelineImpl:i}=ck(),{finished:o}=tc();m8();function s(...u){return new t((c,f)=>{let h,m;const g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(u);h=v.signal,m=v.end}i(u,(v,w)=>{v?f(v):c(w)},{signal:h,end:m})})}return Ox={finished:o,pipeline:s},Ox}var MN;function m8(){if(MN)return lx.exports;MN=1;const{Buffer:e}=ec(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Hr(),{promisify:{custom:a}}=ki(),{streamReturningOperators:i,promiseReturningOperators:o}=_X(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=pi(),u=h8(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=Kv(),{pipeline:h}=ck(),{destroyer:m}=bh(),g=tc(),v=p8(),w=Fl(),_=lx.exports=sk().Stream;_.isDestroyed=w.isDestroyed,_.isDisturbed=w.isDisturbed,_.isErrored=w.isErrored,_.isReadable=w.isReadable,_.isWritable=w.isWritable,_.Readable=Zv();for(const E of n(i)){let A=function(...j){if(new.target)throw s();return _.Readable.from(r(C,this,j))};var S=A;const C=i[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let A=function(...O){if(new.target)throw s();return r(C,this,O)};var S=A;const C=o[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}_.Writable=uk(),_.Duplex=Nl(),_.Transform=d8(),_.PassThrough=f8(),_.pipeline=h;const{addAbortSignal:x}=Wv();return _.addAbortSignal=x,_.finished=g,_.destroy=m,_.compose=u,_.setDefaultHighWaterMark=c,_.getDefaultHighWaterMark=f,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},lx.exports}var PN;function xX(){return PN||(PN=1,function(e){const t=m8(),n=p8(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(sx)),sx.exports}var g8=xX();class dk extends g8.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(ot.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(ot.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class fk extends g8.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Wa(new Ue(ot.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Wa(new Ue(ot.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(ot.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(ot.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(ot.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var bo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},vo=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Xa{get position(){return this.flag&ed?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=ei(t,n);Object.assign(this,ld(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&qv||this.inode.flags&Si.Sync)}_emitChange(){Pa(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,KD(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=Ju(t,-1);if(n<0)throw new Ue(ot.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>yr?-61441:yr)|n,(this._isSync||n>yr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(ot.EINVAL);if(this.dirty=!0,!(this.flag&Va||this.flag&_l))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Db(t),this.inode.mtimeMs=Db(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=xl(n,"utf8","a",420);if(!(Sl(r.flag)&ed))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const i=typeof t=="string"?Ar.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Va)throw new Ue(ot.EPERM,"File not opened with a readable mode");this.inode.flags&Si.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Tm(this.inode)&&!Am(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=xl(t,null,"r",292);if(Sl(n.flag)&Va)throw new Ue(ot.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Ar.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Va)throw Ue.With("EBADF",this.path,"readLines");return zY({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!ir(this.context,this.inode,pa))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new pd(this.inode):new Pl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Va||this.flag&_l))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Tm(this.inode)&&!Am(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Ar.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const u=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:u}}async writeFile(t,n={}){const r=xl(n,"utf8","w",420),a=Sl(r.flag);if(!(a&Va||a&_l))throw new Ue(ot.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const i=typeof t=="string"?Ar.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),XD(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Va)throw Ue.With("EBADF",this.path,"createReadStream");return new dk(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"createWriteStream");return new fk(t,this)}}async function hk(e,t){e=ln(e),t=ln(t);const n=Pn(e,this),r=Pn(t,this);if(!(await Zi.call(this,Zn(e))).hasAccess(Kr,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Pa(this,"rename",e.toString()),Pa(this,"change",t.toString());return}await E0.call(this,t,await S0(e)),await x0.call(this,e),Pa(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}async function _0(e){try{const{fs:t,path:n}=Pn(await rc.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function Zi(e,t){e=ln(e);const{fs:n,path:r}=Pn(await rc.call(this,e),this);try{const a=await n.stat(r);if(ma&&!ir(this,a,pa))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new pd(a):new Pl(a)}catch(a){throw or(a,{[r]:e})}}async function Yv(e,t){e=ln(e);const{fs:n,path:r}=Pn(e,this);try{const a=await n.stat(r);if(ma&&!ir(this,a,pa))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new pd(a):new Pl(a)}catch(a){throw or(a,{[r]:e})}}async function y8(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await wo.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function x0(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{if(ma&&!ir(this,await t.stat(n),Kr))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function vh(e,t,n){var r;t=ln(t);const a=Ju(n.mode,420),i=Sl(n.flag),{fullPath:o,fs:s,path:u,stats:c}=await Lb(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&Bv))throw Ue.With("ENOENT",o,"_open");const h=await s.stat(Zn(u));if(!ir(e,h,Kr))throw Ue.With("EACCES",Zn(o),"_open");if(!Ho(h))throw Ue.With("ENOTDIR",Zn(o),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Wo.credentials,v=await s.createFile(u,{mode:a,uid:h.mode&g0?h.uid:m,gid:h.mode&y0?h.gid:g});return new Xa(e,Pb(new Mb(e,t,s,u,i,v)))}if(!ir(e,c,JD(i)))throw Ue.With("EACCES",o,"_open");if(i&zv)throw Ue.With("EEXIST",o,"_open");const f=new Xa(e,Pb(new Mb(e,t,s,u,i,c)));return i&Uv&&await f.truncate(0),f}async function wo(e,t="r",n=420){return await vh(this,e,{flag:t,mode:n})}async function S0(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=xl(t,null,"r",292);return await bo(n,typeof e=="object"&&"fd"in e?e:await wo.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function E0(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xl(n,"utf8","w+",420),i=bo(r,e instanceof Xa?e:await wo.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Ue(ot.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function b8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xl(n,"utf8","a",420);if(!(Sl(a.flag)&ed))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await bo(r,typeof e=="object"&&"fd"in e?e:await wo.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function pk(e){e=await rc.call(this,e);const{fs:t,path:n}=Pn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!Ho(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ma&&!ir(this,r,Kr))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function wh(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Wo.credentials;t=typeof t=="object"?t:{mode:t};const o=Ju(t==null?void 0:t.mode,511);e=await rc.call(this,e);const{fs:s,path:u,root:c}=Pn(e,this),f={[u]:e},h=async(m,g)=>{if(!ir(this,g,Kr))throw Ue.With("EACCES",Zn(m),"mkdir");const v=await s.mkdir(m,{mode:o,uid:g.mode&g0?g.uid:a,gid:g.mode&y0?g.gid:i});return Pa(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){await h(u,await s.stat(Zn(u)));return}const m=[];for(let v=u,w=e;!await s.exists(v);v=Zn(v),w=Zn(w))m.unshift(v),f[v]=w;if(!m.length)return;const g=[await s.stat(Zn(m[0]))];for(const[v,w]of m.entries())g.push(await h(w,g[v]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw or(m,f)}}async function nc(e,t){t=typeof t=="object"?t:{encoding:t},e=await rc.call(this,e);const{fs:n,path:r}=Pn(e,this),a=await n.stat(r).catch(u=>ur(or(u,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!ir(this,a,pa))throw Ue.With("EACCES",e,"readdir");if(!Ho(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(u=>ur(or(u,{[r]:e}))),o=[],s=async u=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(tr(r,u)).catch(f=>{if(f.code!="ENOENT")throw or(f,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?o.push(new Nm(u,c)):(t==null?void 0:t.encoding)=="buffer"?o.push(Ar.from(u)):o.push(u),!(!(t!=null&&t.recursive)||!Ho(c))))for(const f of await nc.call(this,tr(e,u),t))f instanceof Nm?(f.path=tr(u,f.path),o.push(f)):Ar.isBuffer(f)?o.push(Ar.from(tr(u,$E(f)))):o.push(tr(u,f))};return await Promise.all(i.map(s)),o}async function v8(e,t){e=ln(e),t=ln(t);const{fs:n,path:r}=Pn(e,this),a=Pn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ma&&!ir(this,await n.stat(Zn(r)),pa))throw Ue.With("EACCES",Zn(r),"link");if(ma&&!(await Zi.call(this,Zn(t))).hasAccess(Kr,this))throw Ue.With("EACCES",Zn(t),"link");if(ma&&!ir(this,await n.stat(r),pa))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw or(i,{[a.path]:t,[r]:e})}}async function w8(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(ot.EINVAL,"Invalid symlink type: "+n);if(t=ln(t),await _0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=bo(r,await vh(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(ln(e,!0)),await a.chmod(Ml)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function Fb(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await bo(n,await vh(this,ln(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function _8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await wo.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function x8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await vh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function S8(e,t){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await wo.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function E8(e,t){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await vh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function mk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await wo.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function k8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await vh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function Lb(e,t,n){if(n){const u=Pn(t,e),c=await u.fs.stat(u.path).catch(()=>{});return{...u,fullPath:t,stats:c}}try{const u=Pn(t,e),c=await u.fs.stat(u.path);if(!Zf(c))return{...u,fullPath:t,stats:c};const f=Rl.call(e,Zn(t),(await Fb.call(e,t)).toString());return await Lb(e,f)}catch{}const{base:r,dir:a}=ms(t),i=a=="/"?"/":await rc.call(e,a),o=tr(i,r),s=Pn(o,e);try{const u=await s.fs.stat(s.path);if(!Zf(u))return{...s,fullPath:o,stats:u};const c=Rl.call(e,i,(await Fb.call(e,o)).toString());return await Lb(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}async function rc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=await Lb(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Ar.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function SX(e,t={}){const n=new n8(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var u;(u=r.shift())===null||u===void 0||u({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function C8(e,t=GE){if(!(await Zi.call(this,e)).hasAccess(t,this))throw new Ue(ot.EACCES)}async function k0(e,t){e=ln(e);const n=await Yv.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&yr){case la:if(t!=null&&t.recursive)for(const r of await nc.call(this,e))await k0.call(this,tr(e,r),t);await pk.call(this,e);break;case $o:case Ml:case dd:case fd:await x0.call(this,e);break;case hd:case cd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}}async function A8(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await wh.call(this,a),n=="buffer"?Ar.from(a):a}async function gk(e,t,n){if(e=ln(e),t=ln(t),n&&n&WE&&await _0.call(this,t))throw new Ue(ot.EEXIST,"Destination file already exists",t,"copyFile");await E0.call(this,t,await S0.call(this,e)),Pa(this,"rename",t.toString())}function T8(e,t){return e=ln(e),Promise.resolve(new ok(e,this))}async function yk(e,t,n){e=ln(e),t=ln(t);const r=await Yv.call(this,e);if(n!=null&&n.errorOnExist&&await _0.call(this,t))throw new Ue(ot.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&yr){case la:{if(!(n!=null&&n.recursive))throw new Ue(ot.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([nc.call(this,e,{withFileTypes:!0}),wh.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(tr(e,o.name),tr(t,o.name))||await yk.call(this,tr(e,o.name),tr(t,o.name),n)};await Promise.all(a.map(i));break}case $o:case Ml:await gk.call(this,e,t);break;case dd:case fd:case hd:case cd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await mk.call(this,t,r.atime,r.mtime)}async function R8(e,t){e=ln(e);const{fs:n}=Pn(e,this);return Promise.resolve(e8(n,t==null?void 0:t.bigint))}function N8(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const u=await nc(s,{withFileTypes:r,encoding:"utf8"});for(const c of u){const f=r?c.path:s+"/"+c;a(r?c:f)||((await Zi(f)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(f)),i.some(h=>h.test(f.replace(/^\/+/g,"")))&&(yield r?c:f.replace(/^\/+/g,"")))}}return o(n)}const EX=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Xa,access:C8,appendFile:b8,chmod:S8,chown:_8,constants:GD,copyFile:gk,cp:yk,exists:_0,glob:N8,lchmod:E8,lchown:x8,link:v8,lstat:Yv,lutimes:k8,mkdir:wh,mkdtemp:A8,open:wo,opendir:T8,readFile:S0,readdir:nc,readlink:Fb,realpath:rc,rename:hk,rm:k0,rmdir:pk,stat:Zi,statfs:R8,symlink:w8,truncate:y8,unlink:x0,utimes:mk,watch:SX,writeFile:E0},Symbol.toStringTag,{value:"Module"})),Cn=()=>{};async function kX(e){const t=[];for await(const n of e)t.push(n);return t}function CX(e,t,n=Cn){hk.call(this,e,t).then(()=>n()).catch(n)}function AX(e,t=Cn){_0.call(this,e).then(t).catch(()=>t(!1))}function TX(e,t,n=Cn){n=typeof t=="function"?t:n,Zi.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function RX(e,t,n=Cn){n=typeof t=="function"?t:n,Yv.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function NX(e,t=0,n=Cn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;y8.call(this,e,r).then(()=>n()).catch(n)}function IX(e,t=Cn){x0.call(this,e).then(()=>t()).catch(t)}function OX(e,t,n,r=Cn){const a=Ju(n,420);r=typeof n=="function"?n:r,wo.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function jX(e,t,n=Cn){n=typeof t=="function"?t:n,S0.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function DX(e,t,n,r=Cn){r=typeof n=="function"?n:r,E0.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function MX(e,t,n,r=Cn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,b8.call(this,e,t,a).then(()=>r()).catch(r)}function PX(e,t,n=Cn){n=typeof t=="function"?t:n,new Xa(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new pd(r):r)).catch(n)}function FX(e,t=Cn){new Xa(this,e).close().then(()=>t()).catch(t)}function LX(e,t,n=Cn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new Xa(this,e);if(r<0)throw new Ue(ot.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function $X(e,t=Cn){new Xa(this,e).sync().then(()=>t()).catch(t)}function BX(e,t=Cn){new Xa(this,e).datasync().then(()=>t()).catch(t)}function zX(e,t,n,r,a,i=Cn){let o,s,u,c,f;const h=new Xa(this,e);if(typeof t=="string"){switch(f="utf8",typeof n){case"function":i=n;break;case"number":c=n,f=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(ot.EINVAL,"Invalid arguments"));return}o=Ar.from(t),s=0,u=o.length;const m=i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o.toString(f))).catch(m)}else{o=Ar.from(t.buffer),s=n,u=r,c=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o)).catch(m)}}function UX(e,t,n,r,a,i=Cn){new Xa(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function qX(e,t,n,r=Cn){new Xa(this,e).chown(t,n).then(()=>r()).catch(r)}function HX(e,t,n){new Xa(this,e).chmod(t).then(()=>n()).catch(n)}function VX(e,t,n,r=Cn){new Xa(this,e).utimes(t,n).then(()=>r()).catch(r)}function GX(e,t=Cn){pk.call(this,e).then(()=>t()).catch(t)}function WX(e,t,n=Cn){wh.call(this,e,t).then(()=>n()).catch(n)}function KX(e,t,n=Cn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};nc.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function ZX(e,t,n=Cn){v8.call(this,e,t).then(()=>n()).catch(n)}function YX(e,t,n,r=Cn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,w8.call(this,e,t,a).then(()=>r()).catch(r)}function XX(e,t,n=Cn){n=typeof t=="function"?t:n,Fb.call(this,e).then(r=>n(void 0,r)).catch(n)}function JX(e,t,n,r=Cn){_8.call(this,e,t,n).then(()=>r()).catch(r)}function QX(e,t,n,r=Cn){x8.call(this,e,t,n).then(()=>r()).catch(r)}function eJ(e,t,n=Cn){S8.call(this,e,t).then(()=>n()).catch(n)}function tJ(e,t,n=Cn){E8.call(this,e,t).then(()=>n()).catch(n)}function nJ(e,t,n,r=Cn){mk.call(this,e,t,n).then(()=>r()).catch(r)}function rJ(e,t,n,r=Cn){k8.call(this,e,t,n).then(()=>r()).catch(r)}function aJ(e,t,n=Cn){n=typeof t=="function"?t:n,rc.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function iJ(e,t,n=Cn){const r=typeof t=="number"?t:pa;n=typeof t=="function"?t:n,C8.call(this,e,r).then(()=>n()).catch(n)}const Af=new Map;function oJ(e,t,n){const r=ln(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(ot.EINVAL,"No listener specified",e.toString(),"watchFile");if(Af.has(r)){const o=Af.get(r);o&&o.listeners.add(n);return}const i=new GY(this,r,a);i.on("change",(o,s)=>{const u=Af.get(r);if(u)for(const c of u.listeners)c(o,s)}),Af.set(r,{watcher:i,listeners:new Set})}function sJ(e,t=Cn){const n=ln(e),r=Af.get(n);r&&(t&&t!==Cn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Af.delete(n)))}function lJ(e,t,n){const r=new n8(this,ln(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Cn),r}function uJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=wo.call(this,e,"r",t==null?void 0:t.mode);return new dk({...t,autoClose:!0},n)}function cJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=wo.call(this,e,"w",t==null?void 0:t.mode);return new fk(t,n)}function dJ(e,t,n=Cn){n=typeof t=="function"?t:n,k0.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function fJ(e,t,n=Cn){n=typeof t=="function"?t:n,A8.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function hJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,gk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function pJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,new Xa(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function mJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,new Xa(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function gJ(e,t,n=Cn){n=typeof t=="function"?t:n,T8.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function yJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,yk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function bJ(e,t,n=Cn){n=typeof t=="function"?t:n,R8.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function vJ(e,t){const n=await wo.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function wJ(e,t,n=Cn){n=typeof t=="function"?t:n;const r=N8.call(this,e,typeof t=="function"?void 0:t);kX(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Dc=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},Bi=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},_J=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},$b;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})($b||($b={}));let I8=(()=>{var e,t,n,r,a;let i=[ud()],o,s=[],u,c,f=[],h=[],m,g=[],v=[],w,_=[],x=[],S,E=[],C=[],A,j=[],O=[],N,z=[],H=[];return u=class{constructor(Q=ur(new Ue(ot.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Bi(this,f,0),this.extsize=(Bi(this,h),Bi(this,g,0)),this.nextents=(Bi(this,v),Bi(this,_,0)),this.projid=(Bi(this,x),Bi(this,E,0)),this.cowextsize=(Bi(this,C),Bi(this,j,0)),this.pad=(Bi(this,O),Bi(this,z,[])),Bi(this,H),this.extsize=Q.size,this.nextents=1,this.projid=Q.uid,this.cowextsize=Q.size;for(const P of Object.keys(Si))Q.flags&Si[P]&&P in $b&&(this.xflags|=$b[P])}},_J(u,"fsxattr"),(()=>{const Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=yn).uint32.bind(e)],m=[(t=yn).uint32.bind(t)],w=[(n=yn).uint32.bind(n)],S=[(r=yn).uint32.bind(r)],A=[(a=yn).uint32.bind(a)],N=[yn.char(8)],Dc(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:P=>"xflags"in P,get:P=>P.xflags,set:(P,Z)=>{P.xflags=Z}},metadata:Q},f,h),Dc(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:P=>"extsize"in P,get:P=>P.extsize,set:(P,Z)=>{P.extsize=Z}},metadata:Q},g,v),Dc(null,null,w,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:P=>"nextents"in P,get:P=>P.nextents,set:(P,Z)=>{P.nextents=Z}},metadata:Q},_,x),Dc(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:P=>"projid"in P,get:P=>P.projid,set:(P,Z)=>{P.projid=Z}},metadata:Q},E,C),Dc(null,null,A,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:P=>"cowextsize"in P,get:P=>P.cowextsize,set:(P,Z)=>{P.cowextsize=Z}},metadata:Q},j,O),Dc(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:P=>"pad"in P,get:P=>P.pad,set:(P,Z)=>{P.pad=Z}},metadata:Q},z,H),Dc(null,o={value:u},i,{kind:"class",name:u.name,metadata:Q},null,s),u=o.value,Q&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q}),Bi(u,s)})(),u})();var Or;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Or||(Or={}));var Mo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Mo||(Mo={}));async function xJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Pn(e,this);try{const i=new sa(await r.stat(a));switch(t){case Or.GetFlags:case Mo.GetFlags:return i.flags;case Or.SetFlags:case Mo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Or.GetVersion:case Mo.GetVersion:return i.version;case Or.SetVersion:case Mo.SetVersion:i.version=n[0],await r.touch(a,i);return;case Or.Fiemap:break;case Or.GetXattr:return new I8(i);case Or.SetXattr:break;case Or.GetLabel:return r.label;case Or.SetLabel:r.label=n[0];return;case Or.GetUUID:return r.uuid;case Or.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new Ue(ot.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function SJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Pn(e,this);try{const i=new sa(r.statSync(a));switch(t){case Or.GetFlags:case Mo.GetFlags:return i.flags;case Or.SetFlags:case Mo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Or.GetVersion:case Mo.GetVersion:return i.version;case Or.SetVersion:case Mo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Or.Fiemap:break;case Or.GetXattr:return new I8(i);case Or.SetXattr:break;case Or.GetLabel:return r.label;case Or.SetLabel:r.label=n[0];return;case Or.GetUUID:return r.uuid;case Or.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new Ue(ot.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const EJ=[];function _h(e,t,n,r){if(!t.startsWith("user.")&&!EJ.includes(t))throw new Ue(ot.EPERM,"Only attributes in the user namespace are supported",n,r)}async function kJ(e,t,n={}){var r;e=ln(e);const{fs:a,path:i}=Pn(e,this);_h(this,t,e,"xattr.get");try{const o=await a.stat(i);if(ma&&!ir(this,o,pa))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Uu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Ar.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}function CJ(e,t,n={}){var r;e=ln(e),_h(this,t,e,"xattr.get");const{fs:a,path:i}=Pn(e,this);try{const o=a.statSync(i);if(ma&&!ir(this,o,pa))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Uu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Ar.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}async function AJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Pn(e,this);_h(this,t,e,"xattr.set");try{const s=await i.stat(o);if(ma&&!ir(this,s,Kr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Uu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Ar.from(n)),await i.touch(o,ld(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}function TJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Pn(e,this);_h(this,t,e,"xattr.set");try{const s=i.statSync(o);if(ma&&!ir(this,s,Kr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Uu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Ar.from(n)),i.touchSync(o,ld(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}async function RJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Pn(e,this);_h(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(ma&&!ir(this,i,Kr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Uu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,ld(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}function NJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Pn(e,this);_h(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(ma&&!ir(this,i,Kr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Uu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,ld(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}async function IJ(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}function OJ(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}const jJ=Object.freeze(Object.defineProperty({__proto__:null,get:kJ,getSync:CJ,list:IJ,listSync:OJ,remove:RJ,removeSync:NJ,set:AJ,setSync:TJ},Symbol.toStringTag,{value:"Module"})),Cr=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:TY,Dir:ok,Dirent:Nm,get IOC(){return Or},get IOC32(){return Mo},ReadStream:dk,Stats:Pl,StatsFs:AY,WriteStream:fk,access:iJ,accessSync:dX,appendFile:MX,appendFileSync:XY,chmod:eJ,chmodSync:lX,chown:JX,chownSync:oX,chroot:HY,close:FX,closeSync:gd,constants:GD,copyFile:hJ,copyFileSync:s8,cp:yJ,cpSync:l8,createReadStream:uJ,createWriteStream:cJ,exists:AX,existsSync:XE,fchmod:HX,fchmodSync:rk,fchown:qX,fchownSync:nk,fdatasync:BX,fdatasyncSync:tX,fstat:PX,fstatSync:JY,fsync:$X,fsyncSync:eX,ftruncate:LX,ftruncateSync:QY,futimes:VX,futimesSync:ak,glob:wJ,globSync:yX,ioctl:xJ,ioctlSync:SJ,lchmod:tJ,lchmodSync:uX,lchown:QX,lchownSync:sX,link:ZX,linkSync:aX,lopenSync:Vv,lstat:RX,lstatSync:JE,lutimes:rJ,lutimesSync:cX,mkdir:WX,mkdirSync:ik,mkdtemp:fJ,mkdtempSync:fX,mount:YE,open:OX,openAsBlob:vJ,openSync:Hv,opendir:gJ,opendirSync:mX,promises:EX,read:UX,readFile:jX,readFileSync:ek,readSync:rX,readdir:KX,readdirSync:yh,readlink:XX,readlinkSync:T2,readv:pJ,readvSync:hX,realpath:aJ,realpathSync:Qu,rename:CX,renameSync:ZY,rm:dJ,rmSync:o8,rmdir:GX,rmdirSync:a8,stat:TX,statSync:qu,statfs:bJ,statfsSync:gX,symlink:YX,symlinkSync:iX,truncate:NX,truncateSync:YY,umount:QD,unlink:IX,unlinkSync:QE,unwatchFile:sJ,utimes:nJ,utimesSync:i8,watch:lJ,watchFile:oJ,write:zX,writeFile:DX,writeFileSync:tk,writeSync:nX,writev:mJ,writevSync:pX,xattr:jJ},Symbol.toStringTag,{value:"Module"}));function FN(e){return MD(e)||VE(e)||e instanceof ZE}async function O8(e,t=0){if(typeof e!="object"||e==null)throw xi(new Ue(ot.EINVAL,"Invalid options on mount configuration"));if(!FN(e))throw xi(new Ue(ot.EINVAL,"Invalid mount configuration"));if(e instanceof ZE)return await e.ready(),e;VE(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&FN(i)){if(DD("Resolving nested mount configuration: "+a),t>10)throw xi(new Ue(ot.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await O8(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw xi(new Ue(ot.EPERM,"Backend not available: "+n.name));cY(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function DJ(e){if(!MD(e))throw new TypeError("Invalid single mount point configuration");const t=await O8(e);QD("/"),YE("/",t)}const MJ=["delete"];Math.max(...MJ.map(e=>e.length));uY("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const j8=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;j8[e]=t}function PJ(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^j8[(t^e[n])&255];return(t^4294967295)>>>0}var Ir=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},_n=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},bk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let LN=(()=>{var e,t,n,r;let a=[ud()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],v,w=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=_n(this,c,0),this.offset_=(_n(this,f),_n(this,m,0)),this.offset=(_n(this,g),_n(this,w,0)),this.size=(_n(this,_),_n(this,S,0)),_n(this,E)}},bk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=yn).uint32.bind(e)],h=[(t=yn).uint32.bind(t)],v=[(n=yn).uint32.bind(n)],x=[(r=yn).uint32.bind(r)],Ir(null,null,u,{kind:"field",name:"id",static:!1,private:!1,access:{has:A=>"id"in A,get:A=>A.id,set:(A,j)=>{A.id=j}},metadata:C},c,f),Ir(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:A=>"offset_"in A,get:A=>A.offset_,set:(A,j)=>{A.offset_=j}},metadata:C},m,g),Ir(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:A=>"offset"in A,get:A=>A.offset,set:(A,j)=>{A.offset=j}},metadata:C},w,_),Ir(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:A=>"size"in A,get:A=>A.size,set:(A,j)=>{A.size=j}},metadata:C},S,E),Ir(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),_n(s,o)})(),s})();const $N=255;let Mc=(()=>{var e,t,n,r;let a=[ud()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],v,w=[],_=[],x,S=[],E=[],C,A=[],j=[];var O=s=class{constructor(N=ur(new Ue(ot.EINVAL,"Metadata block must be initialized with a superblock")),z=0){if(this.superblock=N,this.offset=z,this.checksum=_n(this,c,0),this.timestamp=(_n(this,f),_n(this,m,Date.now())),this.previous_offset_=(_n(this,g),_n(this,w,0)),this.previous_offset=(_n(this,_),_n(this,S,0)),this._previous=_n(this,E),this.entries=_n(this,A,Array.from({length:$N},()=>new LN)),_n(this,j),this.superblock=N,this.offset=z,!!z&&(Lv(this,N.store._buffer.subarray(z,z+jr(O))),!D8(this)))throw $v(new Ue(ot.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+z.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new O(this.superblock,this.previous_offset)),this._previous}};return bk(s,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=yn).uint32.bind(e)],h=[(t=yn).uint32.bind(t)],v=[(n=yn).uint32.bind(n)],x=[(r=yn).uint32.bind(r)],C=[Cm(LN,$N)],Ir(null,null,u,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:z=>"checksum"in z,get:z=>z.checksum,set:(z,H)=>{z.checksum=H}},metadata:N},c,f),Ir(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:z=>"timestamp"in z,get:z=>z.timestamp,set:(z,H)=>{z.timestamp=H}},metadata:N},m,g),Ir(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:z=>"previous_offset_"in z,get:z=>z.previous_offset_,set:(z,H)=>{z.previous_offset_=H}},metadata:N},w,_),Ir(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:z=>"previous_offset"in z,get:z=>z.previous_offset,set:(z,H)=>{z.previous_offset=H}},metadata:N},S,E),Ir(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:z=>"entries"in z,get:z=>z.entries,set:(z,H)=>{z.entries=H}},metadata:N},A,j),Ir(null,i={value:s},a,{kind:"class",name:s.name,metadata:N},null,o),O=s=i.value,N&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),_n(s,o)})(),O=s})();const BN=2049864546;(()=>{var e,t,n,r,a,i,o,s,u,c,f;let h=[ud()],m,g=[],v,w,_=[],x=[],S,E=[],C=[],A,j=[],O=[],N,z=[],H=[],Q,P=[],Z=[],V,te=[],ae=[],re,Y=[],ne=[],G,X=[],oe=[],ye,we=[],fe=[],Me,Fe=[],Oe=[],Re,ze=[],He=[],Te,Ce=[],B=[],ke,Ae=[],ce=[];var se=v=class{constructor(J=ur(new Ue(ot.EINVAL,"Super block must be initialized with a store"))){if(this.store=J,this.checksum=_n(this,_,0),this.magic=(_n(this,x),_n(this,E,BN)),this.version=(_n(this,C),_n(this,j,1)),this.inode_format=(_n(this,O),_n(this,z,NY)),this.flags=(_n(this,H),_n(this,P,0)),this.used_bytes=(_n(this,Z),_n(this,te,BigInt(0))),this.total_bytes=(_n(this,ae),_n(this,Y,BigInt(0))),this.uuid=(_n(this,ne),_n(this,X,BigInt(0))),this.metadata_block_size=(_n(this,oe),_n(this,we,jr(Mc))),this.metadata_offset_=(_n(this,fe),_n(this,Fe,0)),this.metadata_offset=(_n(this,Oe),_n(this,ze,0)),this.metadata=_n(this,He),this.label=_n(this,Ce,""),this._padding=(_n(this,B),_n(this,Ae,new Array(132).fill(0))),_n(this,ce),this.store=J,J._view.getUint32(WZ(se,"magic"),!0)!=BN){Wa("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Mc(this),this.metadata.offset=jr(se),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(jr(se)+jr(Mc)),this.total_bytes=BigInt(J._buffer.byteLength),J._write(this),J._write(this.metadata);return}if(Lv(this,J._buffer.subarray(0,jr(se))),!D8(this))throw $v(new Ue(ot.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Mc(this,this.metadata_offset)}rotateMetadata(){const J=new Mc(this);return J.offset=Number(this.used_bytes),J.previous_offset=this.metadata_offset,this.metadata=J,this.metadata_offset=J.offset,this.store._write(J),this.used_bytes+=BigInt(jr(Mc)),this.store._write(this),J}isUnused(J,xe){if(!xe)return!0;if(J+xe>this.total_bytes||J<jr(se))return!1;for(let Pe=this.metadata;Pe;Pe=Pe.previous){if(J<Pe.offset+jr(Mc)&&J+xe>Pe.offset)return!1;for(const Se of Pe.entries)if(Se.offset&&(J>=Se.offset&&J<Se.offset+Se.size||J+xe>Se.offset&&J+xe<=Se.offset+Se.size||J<=Se.offset&&J+xe>=Se.offset+Se.size))return!1}return!0}};return bk(v,"SuperBlock"),(()=>{const J=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;w=[(e=yn).uint32.bind(e)],S=[(t=yn).uint32.bind(t)],A=[(n=yn).uint16.bind(n)],N=[(r=yn).uint16.bind(r)],Q=[(a=yn).uint32.bind(a)],V=[(i=yn).uint64.bind(i)],re=[(o=yn).uint64.bind(o)],G=[(s=yn).uint128.bind(s)],ye=[(u=yn).uint32.bind(u)],Me=[(c=yn).uint32.bind(c)],Re=[(f=yn).uint32.bind(f)],Te=[yn.char(64)],ke=[yn.char(132)],Ir(null,null,w,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Pe)=>{xe.checksum=Pe}},metadata:J},_,x),Ir(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Pe)=>{xe.magic=Pe}},metadata:J},E,C),Ir(null,null,A,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Pe)=>{xe.version=Pe}},metadata:J},j,O),Ir(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Pe)=>{xe.inode_format=Pe}},metadata:J},z,H),Ir(null,null,Q,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Pe)=>{xe.flags=Pe}},metadata:J},P,Z),Ir(null,null,V,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Pe)=>{xe.used_bytes=Pe}},metadata:J},te,ae),Ir(null,null,re,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Pe)=>{xe.total_bytes=Pe}},metadata:J},Y,ne),Ir(null,null,G,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Pe)=>{xe.uuid=Pe}},metadata:J},X,oe),Ir(null,null,ye,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Pe)=>{xe.metadata_block_size=Pe}},metadata:J},we,fe),Ir(null,null,Me,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Pe)=>{xe.metadata_offset_=Pe}},metadata:J},Fe,Oe),Ir(null,null,Re,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Pe)=>{xe.metadata_offset=Pe}},metadata:J},ze,He),Ir(null,null,Te,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Pe)=>{xe.label=Pe}},metadata:J},Ce,B),Ir(null,null,ke,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Pe)=>{xe._padding=Pe}},metadata:J},Ae,ce),Ir(null,m={value:v},h,{kind:"class",name:v.name,metadata:J},null,g),se=v=m.value,J&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:J}),_n(v,g)})(),se=v})();function D8(e){const t=Ma(e),n=PJ(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Cr;function FJ(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function N2(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?ot[FJ(e)]:ot.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Tf(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(N2(e.error))}})}class LJ extends A2{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Tf(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Tf(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Tf(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Tf(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(N2(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(N2(this.tx.error)),this.tx.abort(),t}}async function $J(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Wa("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Tf(n)}class BJ{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new LJ(t,this)}}const zJ={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Tf(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await $J(e.storeName||"zenfs",e.idbFactory),n=new BJ(t),r=new YD(n);if(e!=null&&e.disableAsyncCache)return HE("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},UJ=zJ,Bb={APP_LOADED:"app:loaded",APP_ERROR:"app:error",CONVERSATION_SELECTED:"conversation:selected",CONVERSATION_CREATED:"conversation:created",CONVERSATION_DELETED:"conversation:deleted",CONVERSATION_RENAMED:"conversation:renamed",INTERACTION_STARTED:"interaction:started",INTERACTION_STREAM_CHUNK:"interaction:stream_chunk",INTERACTION_COMPLETED:"interaction:completed",PROMPT_SUBMITTED:"prompt:submitted",PROMPT_FINALISED:"prompt:finalised",SETTINGS_OPENED:"settings:opened",SETTINGS_CLOSED:"settings:closed",MOD_LOADED:"mod:loaded",MOD_ERROR:"mod:error",VFS_FILE_READ:"vfs:file:read",VFS_FILE_WRITTEN:"vfs:file:written",VFS_FILE_DELETED:"vfs:file:deleted"};function Iy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jx={exports:{}},zN;function qJ(){return zN||(zN=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(c,f){if(!a[c]){if(!r[c]){var h=typeof Iy=="function"&&Iy;if(!f&&h)return h(c,!0);if(s)return s(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(v){var w=r[c][1][v];return o(w||v)},g,g.exports,n,r,a,i)}return a[c].exports}for(var s=typeof Iy=="function"&&Iy,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,f,h,m,g,v,w,_=[],x=0,S=u.length,E=S,C=i.getTypeOf(u)!=="string";x<u.length;)E=S-x,h=C?(c=u[x++],f=x<S?u[x++]:0,x<S?u[x++]:0):(c=u.charCodeAt(x++),f=x<S?u.charCodeAt(x++):0,x<S?u.charCodeAt(x++):0),m=c>>2,g=(3&c)<<4|f>>4,v=1<E?(15&f)<<2|h>>6:64,w=2<E?63&h:64,_.push(s.charAt(m)+s.charAt(g)+s.charAt(v)+s.charAt(w));return _.join("")},a.decode=function(u){var c,f,h,m,g,v,w=0,_=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&E--,u.charAt(u.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);w<u.length;)c=s.indexOf(u.charAt(w++))<<2|(m=s.indexOf(u.charAt(w++)))>>4,f=(15&m)<<4|(g=s.indexOf(u.charAt(w++)))>>2,h=(3&g)<<6|(v=s.indexOf(u.charAt(w++))),S[_++]=c,g!==64&&(S[_++]=f),v!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(f,h,m,g,v){this.compressedSize=f,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=v}c.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,h,m){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,f,h,m){var g=o,v=m+h;c^=-1;for(var w=m;w<v;w++)c=c>>>8^g[255&(c^f[w])];return-1^c}(0|u,s,s.length,0):function(c,f,h,m){var g=o,v=m+h;c^=-1;for(var w=m;w<v;w++)c=c>>>8^g[255&(c^f.charCodeAt(w))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(h,m){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new f("Deflate",h)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var w,_="";for(w=0;w<v;w++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,w,_,x,S){var E,C,A=g.file,j=g.compression,O=S!==c.utf8encode,N=s.transformTo("string",S(A.name)),z=s.transformTo("string",c.utf8encode(A.name)),H=A.comment,Q=s.transformTo("string",S(H)),P=s.transformTo("string",c.utf8encode(H)),Z=z.length!==A.name.length,V=P.length!==H.length,te="",ae="",re="",Y=A.dir,ne=A.date,G={crc32:0,compressedSize:0,uncompressedSize:0};v&&!w||(G.crc32=g.crc32,G.compressedSize=g.compressedSize,G.uncompressedSize=g.uncompressedSize);var X=0;v&&(X|=8),O||!Z&&!V||(X|=2048);var oe=0,ye=0;Y&&(oe|=16),x==="UNIX"?(ye=798,oe|=function(fe,Me){var Fe=fe;return fe||(Fe=Me?16893:33204),(65535&Fe)<<16}(A.unixPermissions,Y)):(ye=20,oe|=function(fe){return 63&(fe||0)}(A.dosPermissions)),E=ne.getUTCHours(),E<<=6,E|=ne.getUTCMinutes(),E<<=5,E|=ne.getUTCSeconds()/2,C=ne.getUTCFullYear()-1980,C<<=4,C|=ne.getUTCMonth()+1,C<<=5,C|=ne.getUTCDate(),Z&&(ae=i(1,1)+i(f(N),4)+z,te+="up"+i(ae.length,2)+ae),V&&(re=i(1,1)+i(f(Q),4)+P,te+="uc"+i(re.length,2)+re);var we="";return we+=`
\0`,we+=i(X,2),we+=j.magic,we+=i(E,2),we+=i(C,2),we+=i(G.crc32,4),we+=i(G.compressedSize,4),we+=i(G.uncompressedSize,4),we+=i(N.length,2),we+=i(te.length,2),{fileRecord:h.LOCAL_FILE_HEADER+we+N+te,dirRecord:h.CENTRAL_FILE_HEADER+i(ye,2)+we+i(Q.length,2)+"\0\0\0\0"+i(oe,4)+i(_,4)+N+te+Q}}var s=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),h=n("../signature");function m(g,v,w,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=w,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(m,u),m.prototype.push=function(g){var v=g.meta.percent||0,w=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(v+100*(w-_-1))/w:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var w=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,w=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),v)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var w=this.bytesWritten-g,_=function(x,S,E,C,A){var j=s.transformTo("string",A(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(j.length,2)+j}(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(w){v.processChunk(w)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(w){v.error(w)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var w=0;w<v.length;w++)try{v[w].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,u,c){var f=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{s.forEach(function(m,g){h++;var v=function(S,E){var C=S||E,A=i[C];if(!A)throw new Error(C+" is not a valid compression method !");return A}(g.options.compression,u.compression),w=g.options.compressionOptions||u.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(v,w).withStreamInfo("file",{name:m,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(m){f.error(m)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(m){return new o.Promise(function(g,v){var w=m.decompressed.getContentWorker().pipe(new c);w.on("error",function(_){v(_)}).on("end",function(){w.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(w){var _=new u(g);return _.load(w),_}).then(function(w){var _=[o.Promise.resolve(w)],x=w.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(w){for(var _=w.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,A=i.resolve(E.fileNameStr);v.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(A).unsafeOriginalName=C)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,o),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,u,c){i.call(this,u),this._helper=s;var f=this;s.on("data",function(h,m){f.push(h)||f._helper.pause(),c&&c(m)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Wt<"u",newBufferFrom:function(i,o){if(Wt.from&&Wt.from!==Uint8Array.from)return Wt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Wt(i,o)},allocBuffer:function(i){if(Wt.alloc)return Wt.alloc(i);var o=new Wt(i);return o.fill(0),o},isBuffer:function(i){return Wt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(A,j,O){var N,z=s.getTypeOf(j),H=s.extend(O||{},f);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(A=x(A)),H.createFolders&&(N=_(A))&&S.call(this,N,!0);var Q=z==="string"&&H.binary===!1&&H.base64===!1;O&&O.binary!==void 0||(H.binary=!Q),(j instanceof h&&j.uncompressedSize===0||H.dir||!j||j.length===0)&&(H.base64=!1,H.binary=!0,j="",H.compression="STORE",z="string");var P=null;P=j instanceof h||j instanceof u?j:v.isNode&&v.isStream(j)?new w(A,j):s.prepareContent(A,j,H.binary,H.optimizedBinaryString,H.base64);var Z=new m(A,P,H);this.files[A]=Z}var o=n("./utf8"),s=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),w=n("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var j=A.lastIndexOf("/");return 0<j?A.substring(0,j):""},x=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},S=function(A,j){return j=j!==void 0?j:f.createFolders,A=x(A),this.files[A]||i.call(this,A,null,{dir:!0,createFolders:j}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var j,O,N;for(j in this.files)N=this.files[j],(O=j.slice(this.root.length,j.length))&&j.slice(0,this.root.length)===this.root&&A(O,N)},filter:function(A){var j=[];return this.forEach(function(O,N){A(O,N)&&j.push(N)}),j},file:function(A,j,O){if(arguments.length!==1)return A=this.root+A,i.call(this,A,j,O),this;if(E(A)){var N=A;return this.filter(function(H,Q){return!Q.dir&&N.test(H)})}var z=this.files[this.root+A];return z&&!z.dir?z:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(z,H){return H.dir&&A.test(z)});var j=this.root+A,O=S.call(this,j),N=this.clone();return N.root=O.name,N},remove:function(A){A=this.root+A;var j=this.files[A];if(j||(A.slice(-1)!=="/"&&(A+="/"),j=this.files[A]),j&&!j.dir)delete this.files[A];else for(var O=this.filter(function(z,H){return H.name.slice(0,A.length)===A}),N=0;N<O.length;N++)delete this.files[O[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var j,O={};try{if((O=s.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");s.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var N=O.comment||this.comment||"";j=g.generateWorker(this,O,N)}catch(z){(j=new u("error")).error(z)}return new c(j,O.type||"string",O.mimeType)},generateAsync:function(A,j){return this.generateInternalStream(A).accumulate(j)},generateNodeStream:function(A,j){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(j)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===c&&this.data[m+2]===f&&this.data[m+3]===h)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.readData(4);return u===m[0]&&c===m[1]&&f===m[2]&&h===m[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new c(h):o.uint8array?new f(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),u=n("../base64"),c=n("../support"),f=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,w){return new f.Promise(function(_,x){var S=[],E=v._internalType,C=v._outputType,A=v._mimeType;v.on("data",function(j,O){S.push(j),w&&w(O)}).on("error",function(j){S=[],x(j)}).on("end",function(){try{var j=function(O,N,z){switch(O){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),z);case"base64":return u.encode(N);default:return i.transformTo(O,N)}}(C,function(O,N){var z,H=0,Q=null,P=0;for(z=0;z<N.length;z++)P+=N[z].length;switch(O){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(Q=new Uint8Array(P),z=0;z<N.length;z++)Q.set(N[z],H),H+=N[z].length;return Q;case"nodebuffer":return Wt.concat(N);default:throw new Error("concat : unsupported type '"+O+"'")}}(E,S),A);_(j)}catch(O){x(O)}S=[]}).resume()})}function g(v,w,_){var x=w;switch(w){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=w,this._mimeType=_,i.checkSupport(x),this._worker=v.pipe(new o(x)),v.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,w){var _=this;return v==="data"?this._worker.on(v,function(x){w.call(_,x.data,x.meta)}):this._worker.on(v,function(){i.delay(w,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Wt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(v){var w,_,x,S,E,C=v.length,A=0;for(S=0;S<C;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),A+=_<128?1:_<2048?2:_<65536?3:4;for(w=o.uint8array?new Uint8Array(A):new Array(A),S=E=0;E<A;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?w[E++]=_:(_<2048?w[E++]=192|_>>>6:(_<65536?w[E++]=224|_>>>12:(w[E++]=240|_>>>18,w[E++]=128|_>>>12&63),w[E++]=128|_>>>6&63),w[E++]=128|63&_);return w}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var w,_,x,S,E=v.length,C=new Array(2*E);for(w=_=0;w<E;)if((x=v[w++])<128)C[_++]=x;else if(4<(S=c[x]))C[_++]=65533,w+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&w<E;)x=x<<6|63&v[w++],S--;1<S?C[_++]=65533:x<65536?C[_++]=x:(x-=65536,C[_++]=55296|x>>10&1023,C[_++]=56320|1023&x)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,u),h.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=v;(v=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),v.set(w,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+c[S[C]]>E?C:E}(v),x=v;_!==v.length&&(o.uint8array?(x=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(x=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),u=n("./external");function c(w){return w}function f(w,_){for(var x=0;x<w.length;++x)_[x]=255&w.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(w,_){a.checkSupport("blob");try{return new Blob([w],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(w),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(w,_,x){var S=[],E=0,C=w.length;if(C<=x)return String.fromCharCode.apply(null,w);for(;E<C;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,w.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,w.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(w){for(var _="",x=0;x<w.length;x++)_+=String.fromCharCode(w[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function m(w){var _=65536,x=a.getTypeOf(w),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(w,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(w)}function g(w,_){for(var x=0;x<w.length;x++)_[x]=w[x];return _}a.applyFromCharCode=m;var v={};v.string={string:c,array:function(w){return f(w,new Array(w.length))},arraybuffer:function(w){return v.string.uint8array(w).buffer},uint8array:function(w){return f(w,new Uint8Array(w.length))},nodebuffer:function(w){return f(w,s.allocBuffer(w.length))}},v.array={string:m,array:c,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(w)}},v.arraybuffer={string:function(w){return m(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:c,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(new Uint8Array(w))}},v.uint8array={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:c,nodebuffer:function(w){return s.newBufferFrom(w)}},v.nodebuffer={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return v.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:c},a.transformTo=function(w,_){if(_=_||"",!w)return _;a.checkSupport(w);var x=a.getTypeOf(_);return v[x][w](_)},a.resolve=function(w){for(var _=w.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(w)?"nodebuffer":i.uint8array&&w instanceof Uint8Array?"uint8array":i.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(w){if(!i[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(w){var _,x,S="";for(x=0;x<(w||"").length;x++)S+="\\x"+((_=w.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(w,_,x){setImmediate(function(){w.apply(x||null,_||[])})},a.inherits=function(w,_){function x(){}x.prototype=_.prototype,w.prototype=new x},a.extend=function(){var w,_,x={};for(w=0;w<arguments.length;w++)for(_ in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],_)&&x[_]===void 0&&(x[_]=arguments[w][_]);return x},a.prepareContent=function(w,_,x,S,E){return u.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(A,j){var O=new FileReader;O.onload=function(N){A(N.target.result)},O.onerror=function(N){j(N.target.error)},O.readAsArrayBuffer(C)}):C}).then(function(C){var A=a.getTypeOf(C);return A?(A==="arraybuffer"?C=a.transformTo("uint8array",C):A==="string"&&(E?C=o.decode(C):x&&S!==!0&&(C=function(j){return f(j,i.uint8array?new Uint8Array(j.length):new Array(j.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),u=n("./zipEntry"),c=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=c.uint8array?"uint8array":"array",g=o.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),f=n("./compressions"),h=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===_)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,w,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),w=g.readInt(2),_=g.readData(w),this.extraFields[v]={id:v,length:w,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var w=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,w,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=w,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var w=null,_="string";try{if(!v)throw new Error("No output type specified.");var x=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),w=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(w=w.pipe(new u.Utf8EncodeWorker)),!S&&x&&(w=w.pipe(new u.Utf8DecodeWorker))}catch(E){(w=new f("error")).error(E)}return new o(w,_,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,v,w)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,f=new u(v),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var w=i.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,o=function(){m.port2.postMessage(0)}}var g=[];function v(){var w,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],w=-1;++w<x;)_[w]();x=g.length}s=!1}r.exports=function(w){g.push(w)!==1||s||o()}}).call(this,typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},u=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==o&&w(this,x)}function m(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var C;try{C=S(E)}catch(A){return s.reject(x,A)}C===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,C)})}function v(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function w(x,S){var E=!1;function C(O){E||(E=!0,s.reject(x,O))}function A(O){E||(E=!0,s.resolve(x,O))}var j=_(function(){S(A,C)});j.status==="error"&&C(j.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==f?g(E,this.state===c?x:S,this.outcome):this.queue.push(new m(E,x,S)),E},m.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){s.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(v,S);if(E.status==="error")return s.reject(x,E.value);var C=E.value;if(C)w(x,C);else{x.state=c,x.outcome=S;for(var A=-1,j=x.queue.length;++A<j;)x.queue[A].callFulfilled(S)}return x},s.reject=function(x,S){x.state=u,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var A=new Array(E),j=0,O=-1,N=new this(o);++O<E;)z(x[O],O);return N;function z(H,Q){S.resolve(H).then(function(P){A[Q]=P,++j!==E||C||(C=!0,s.resolve(N,A))},function(P){C||(C=!0,s.reject(N,P))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var A=-1,j=new this(o);++A<E;)O=x[A],S.resolve(O).then(function(N){C||(C=!0,s.resolve(j,N))},function(N){C||(C=!0,s.reject(j,N))});var O;return j}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,h=0,m=-1,g=0,v=8;function w(x){if(!(this instanceof w))return new w(x);this.options=o.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(u[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?s.string2buf(S.dictionary):f.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(u[E]);this._dict_set=!0}}function _(x,S){var E=new w(S);if(E.push(x,!0),E.err)throw E.msg||u[E.err];return E.result}w.prototype.push=function(x,S){var E,C,A=this.strm,j=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?A.input=s.string2buf(x):f.call(x)==="[object ArrayBuffer]"?A.input=new Uint8Array(x):A.input=x,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(j),A.next_out=0,A.avail_out=j),(E=i.deflate(A,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(A.avail_out=0))},w.prototype.onData=function(x){this.chunks.push(x)},w.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=w,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||w&&w.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==u.Z_OK)throw new Error(c[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(w,_){var x=new g(_);if(x.push(w,!0),x.err)throw x.msg||c[x.err];return x.result}g.prototype.push=function(w,_){var x,S,E,C,A,j,O=this.strm,N=this.options.chunkSize,z=this.options.dictionary,H=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof w=="string"?O.input=s.binstring2buf(w):m.call(w)==="[object ArrayBuffer]"?O.input=new Uint8Array(w):O.input=w,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(N),O.next_out=0,O.avail_out=N),(x=i.inflate(O,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&z&&(j=typeof z=="string"?s.string2buf(z):m.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,x=i.inflateSetDictionary(this.strm,j)),x===u.Z_BUF_ERROR&&H===!0&&(x=u.Z_OK,H=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&x!==u.Z_STREAM_END&&(O.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(O.output,O.next_out),C=O.next_out-E,A=s.buf2string(O.output,E),O.next_out=C,O.avail_out=N-C,C&&o.arraySet(O.output,O.output,E,C,0),this.onData(A)):this.onData(o.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(H=!0)}while((0<O.avail_in||O.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(O.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(w,_){return(_=_||{}).raw=!0,v(w,_)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,f,h,m){if(c.subarray&&u.subarray)u.set(c.subarray(f,f+h),m);else for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){var c,f,h,m,g,v;for(c=h=0,f=u.length;c<f;c++)h+=u[c].length;for(v=new Uint8Array(h),c=m=0,f=u.length;c<f;c++)g=u[c],v.set(g,m),m+=g.length;return v}},s={arraySet:function(u,c,f,h,m){for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(h,m){if(m<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(h[v]);return g}u[254]=u[254]=1,a.string2buf=function(h){var m,g,v,w,_,x=h.length,S=0;for(w=0;w<x;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),S+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(S),w=_=0;_<S;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),g<128?m[_++]=g:(g<2048?m[_++]=192|g>>>6:(g<65536?m[_++]=224|g>>>12:(m[_++]=240|g>>>18,m[_++]=128|g>>>12&63),m[_++]=128|g>>>6&63),m[_++]=128|63&g);return m},a.buf2binstring=function(h){return f(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,v=m.length;g<v;g++)m[g]=h.charCodeAt(g);return m},a.buf2string=function(h,m){var g,v,w,_,x=m||h.length,S=new Array(2*x);for(g=v=0;g<x;)if((w=h[g++])<128)S[v++]=w;else if(4<(_=u[w]))S[v++]=65533,g+=_-1;else{for(w&=_===2?31:_===3?15:7;1<_&&g<x;)w=w<<6|63&h[g++],_--;1<_?S[v++]=65533:w<65536?S[v++]=w:(w-=65536,S[v++]=55296|w>>10&1023,S[v++]=56320|1023&w)}return f(S,v)},a.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+u[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,u){for(var c=65535&i|0,f=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;f=f+(c=c+o[u++]|0)|0,--h;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,c){var f=i,h=c+u;o^=-1;for(var m=c;m<h;m++)o=o>>>8^f[255&(o^s[m])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),u=n("./adler32"),c=n("./crc32"),f=n("./messages"),h=0,m=4,g=0,v=-2,w=-1,_=4,x=2,S=8,E=9,C=286,A=30,j=19,O=2*C+1,N=15,z=3,H=258,Q=H+z+1,P=42,Z=113,V=1,te=2,ae=3,re=4;function Y(B,ke){return B.msg=f[ke],ke}function ne(B){return(B<<1)-(4<B?9:0)}function G(B){for(var ke=B.length;0<=--ke;)B[ke]=0}function X(B){var ke=B.state,Ae=ke.pending;Ae>B.avail_out&&(Ae=B.avail_out),Ae!==0&&(o.arraySet(B.output,ke.pending_buf,ke.pending_out,Ae,B.next_out),B.next_out+=Ae,ke.pending_out+=Ae,B.total_out+=Ae,B.avail_out-=Ae,ke.pending-=Ae,ke.pending===0&&(ke.pending_out=0))}function oe(B,ke){s._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,ke),B.block_start=B.strstart,X(B.strm)}function ye(B,ke){B.pending_buf[B.pending++]=ke}function we(B,ke){B.pending_buf[B.pending++]=ke>>>8&255,B.pending_buf[B.pending++]=255&ke}function fe(B,ke){var Ae,ce,se=B.max_chain_length,J=B.strstart,xe=B.prev_length,Pe=B.nice_match,Se=B.strstart>B.w_size-Q?B.strstart-(B.w_size-Q):0,Ze=B.window,Et=B.w_mask,at=B.prev,_t=B.strstart+H,Nt=Ze[J+xe-1],Rt=Ze[J+xe];B.prev_length>=B.good_match&&(se>>=2),Pe>B.lookahead&&(Pe=B.lookahead);do if(Ze[(Ae=ke)+xe]===Rt&&Ze[Ae+xe-1]===Nt&&Ze[Ae]===Ze[J]&&Ze[++Ae]===Ze[J+1]){J+=2,Ae++;do;while(Ze[++J]===Ze[++Ae]&&Ze[++J]===Ze[++Ae]&&Ze[++J]===Ze[++Ae]&&Ze[++J]===Ze[++Ae]&&Ze[++J]===Ze[++Ae]&&Ze[++J]===Ze[++Ae]&&Ze[++J]===Ze[++Ae]&&Ze[++J]===Ze[++Ae]&&J<_t);if(ce=H-(_t-J),J=_t-H,xe<ce){if(B.match_start=ke,Pe<=(xe=ce))break;Nt=Ze[J+xe-1],Rt=Ze[J+xe]}}while((ke=at[ke&Et])>Se&&--se!=0);return xe<=B.lookahead?xe:B.lookahead}function Me(B){var ke,Ae,ce,se,J,xe,Pe,Se,Ze,Et,at=B.w_size;do{if(se=B.window_size-B.lookahead-B.strstart,B.strstart>=at+(at-Q)){for(o.arraySet(B.window,B.window,at,at,0),B.match_start-=at,B.strstart-=at,B.block_start-=at,ke=Ae=B.hash_size;ce=B.head[--ke],B.head[ke]=at<=ce?ce-at:0,--Ae;);for(ke=Ae=at;ce=B.prev[--ke],B.prev[ke]=at<=ce?ce-at:0,--Ae;);se+=at}if(B.strm.avail_in===0)break;if(xe=B.strm,Pe=B.window,Se=B.strstart+B.lookahead,Ze=se,Et=void 0,Et=xe.avail_in,Ze<Et&&(Et=Ze),Ae=Et===0?0:(xe.avail_in-=Et,o.arraySet(Pe,xe.input,xe.next_in,Et,Se),xe.state.wrap===1?xe.adler=u(xe.adler,Pe,Et,Se):xe.state.wrap===2&&(xe.adler=c(xe.adler,Pe,Et,Se)),xe.next_in+=Et,xe.total_in+=Et,Et),B.lookahead+=Ae,B.lookahead+B.insert>=z)for(J=B.strstart-B.insert,B.ins_h=B.window[J],B.ins_h=(B.ins_h<<B.hash_shift^B.window[J+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[J+z-1])&B.hash_mask,B.prev[J&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=J,J++,B.insert--,!(B.lookahead+B.insert<z)););}while(B.lookahead<Q&&B.strm.avail_in!==0)}function Fe(B,ke){for(var Ae,ce;;){if(B.lookahead<Q){if(Me(B),B.lookahead<Q&&ke===h)return V;if(B.lookahead===0)break}if(Ae=0,B.lookahead>=z&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Ae=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),Ae!==0&&B.strstart-Ae<=B.w_size-Q&&(B.match_length=fe(B,Ae)),B.match_length>=z)if(ce=s._tr_tally(B,B.strstart-B.match_start,B.match_length-z),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=z){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Ae=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else ce=s._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(ce&&(oe(B,!1),B.strm.avail_out===0))return V}return B.insert=B.strstart<z-1?B.strstart:z-1,ke===m?(oe(B,!0),B.strm.avail_out===0?ae:re):B.last_lit&&(oe(B,!1),B.strm.avail_out===0)?V:te}function Oe(B,ke){for(var Ae,ce,se;;){if(B.lookahead<Q){if(Me(B),B.lookahead<Q&&ke===h)return V;if(B.lookahead===0)break}if(Ae=0,B.lookahead>=z&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Ae=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=z-1,Ae!==0&&B.prev_length<B.max_lazy_match&&B.strstart-Ae<=B.w_size-Q&&(B.match_length=fe(B,Ae),B.match_length<=5&&(B.strategy===1||B.match_length===z&&4096<B.strstart-B.match_start)&&(B.match_length=z-1)),B.prev_length>=z&&B.match_length<=B.prev_length){for(se=B.strstart+B.lookahead-z,ce=s._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-z),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=se&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Ae=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=z-1,B.strstart++,ce&&(oe(B,!1),B.strm.avail_out===0))return V}else if(B.match_available){if((ce=s._tr_tally(B,0,B.window[B.strstart-1]))&&oe(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return V}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(ce=s._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<z-1?B.strstart:z-1,ke===m?(oe(B,!0),B.strm.avail_out===0?ae:re):B.last_lit&&(oe(B,!1),B.strm.avail_out===0)?V:te}function Re(B,ke,Ae,ce,se){this.good_length=B,this.max_lazy=ke,this.nice_length=Ae,this.max_chain=ce,this.func=se}function ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*O),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*j+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*C+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function He(B){var ke;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=x,(ke=B.state).pending=0,ke.pending_out=0,ke.wrap<0&&(ke.wrap=-ke.wrap),ke.status=ke.wrap?P:Z,B.adler=ke.wrap===2?0:1,ke.last_flush=h,s._tr_init(ke),g):Y(B,v)}function Te(B){var ke=He(B);return ke===g&&function(Ae){Ae.window_size=2*Ae.w_size,G(Ae.head),Ae.max_lazy_match=i[Ae.level].max_lazy,Ae.good_match=i[Ae.level].good_length,Ae.nice_match=i[Ae.level].nice_length,Ae.max_chain_length=i[Ae.level].max_chain,Ae.strstart=0,Ae.block_start=0,Ae.lookahead=0,Ae.insert=0,Ae.match_length=Ae.prev_length=z-1,Ae.match_available=0,Ae.ins_h=0}(B.state),ke}function Ce(B,ke,Ae,ce,se,J){if(!B)return v;var xe=1;if(ke===w&&(ke=6),ce<0?(xe=0,ce=-ce):15<ce&&(xe=2,ce-=16),se<1||E<se||Ae!==S||ce<8||15<ce||ke<0||9<ke||J<0||_<J)return Y(B,v);ce===8&&(ce=9);var Pe=new ze;return(B.state=Pe).strm=B,Pe.wrap=xe,Pe.gzhead=null,Pe.w_bits=ce,Pe.w_size=1<<Pe.w_bits,Pe.w_mask=Pe.w_size-1,Pe.hash_bits=se+7,Pe.hash_size=1<<Pe.hash_bits,Pe.hash_mask=Pe.hash_size-1,Pe.hash_shift=~~((Pe.hash_bits+z-1)/z),Pe.window=new o.Buf8(2*Pe.w_size),Pe.head=new o.Buf16(Pe.hash_size),Pe.prev=new o.Buf16(Pe.w_size),Pe.lit_bufsize=1<<se+6,Pe.pending_buf_size=4*Pe.lit_bufsize,Pe.pending_buf=new o.Buf8(Pe.pending_buf_size),Pe.d_buf=1*Pe.lit_bufsize,Pe.l_buf=3*Pe.lit_bufsize,Pe.level=ke,Pe.strategy=J,Pe.method=Ae,Te(B)}i=[new Re(0,0,0,0,function(B,ke){var Ae=65535;for(Ae>B.pending_buf_size-5&&(Ae=B.pending_buf_size-5);;){if(B.lookahead<=1){if(Me(B),B.lookahead===0&&ke===h)return V;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var ce=B.block_start+Ae;if((B.strstart===0||B.strstart>=ce)&&(B.lookahead=B.strstart-ce,B.strstart=ce,oe(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-Q&&(oe(B,!1),B.strm.avail_out===0))return V}return B.insert=0,ke===m?(oe(B,!0),B.strm.avail_out===0?ae:re):(B.strstart>B.block_start&&(oe(B,!1),B.strm.avail_out),V)}),new Re(4,4,8,4,Fe),new Re(4,5,16,8,Fe),new Re(4,6,32,32,Fe),new Re(4,4,16,16,Oe),new Re(8,16,32,32,Oe),new Re(8,16,128,128,Oe),new Re(8,32,128,256,Oe),new Re(32,128,258,1024,Oe),new Re(32,258,258,4096,Oe)],a.deflateInit=function(B,ke){return Ce(B,ke,S,15,8,0)},a.deflateInit2=Ce,a.deflateReset=Te,a.deflateResetKeep=He,a.deflateSetHeader=function(B,ke){return B&&B.state?B.state.wrap!==2?v:(B.state.gzhead=ke,g):v},a.deflate=function(B,ke){var Ae,ce,se,J;if(!B||!B.state||5<ke||ke<0)return B?Y(B,v):v;if(ce=B.state,!B.output||!B.input&&B.avail_in!==0||ce.status===666&&ke!==m)return Y(B,B.avail_out===0?-5:v);if(ce.strm=B,Ae=ce.last_flush,ce.last_flush=ke,ce.status===P)if(ce.wrap===2)B.adler=0,ye(ce,31),ye(ce,139),ye(ce,8),ce.gzhead?(ye(ce,(ce.gzhead.text?1:0)+(ce.gzhead.hcrc?2:0)+(ce.gzhead.extra?4:0)+(ce.gzhead.name?8:0)+(ce.gzhead.comment?16:0)),ye(ce,255&ce.gzhead.time),ye(ce,ce.gzhead.time>>8&255),ye(ce,ce.gzhead.time>>16&255),ye(ce,ce.gzhead.time>>24&255),ye(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),ye(ce,255&ce.gzhead.os),ce.gzhead.extra&&ce.gzhead.extra.length&&(ye(ce,255&ce.gzhead.extra.length),ye(ce,ce.gzhead.extra.length>>8&255)),ce.gzhead.hcrc&&(B.adler=c(B.adler,ce.pending_buf,ce.pending,0)),ce.gzindex=0,ce.status=69):(ye(ce,0),ye(ce,0),ye(ce,0),ye(ce,0),ye(ce,0),ye(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),ye(ce,3),ce.status=Z);else{var xe=S+(ce.w_bits-8<<4)<<8;xe|=(2<=ce.strategy||ce.level<2?0:ce.level<6?1:ce.level===6?2:3)<<6,ce.strstart!==0&&(xe|=32),xe+=31-xe%31,ce.status=Z,we(ce,xe),ce.strstart!==0&&(we(ce,B.adler>>>16),we(ce,65535&B.adler)),B.adler=1}if(ce.status===69)if(ce.gzhead.extra){for(se=ce.pending;ce.gzindex<(65535&ce.gzhead.extra.length)&&(ce.pending!==ce.pending_buf_size||(ce.gzhead.hcrc&&ce.pending>se&&(B.adler=c(B.adler,ce.pending_buf,ce.pending-se,se)),X(B),se=ce.pending,ce.pending!==ce.pending_buf_size));)ye(ce,255&ce.gzhead.extra[ce.gzindex]),ce.gzindex++;ce.gzhead.hcrc&&ce.pending>se&&(B.adler=c(B.adler,ce.pending_buf,ce.pending-se,se)),ce.gzindex===ce.gzhead.extra.length&&(ce.gzindex=0,ce.status=73)}else ce.status=73;if(ce.status===73)if(ce.gzhead.name){se=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>se&&(B.adler=c(B.adler,ce.pending_buf,ce.pending-se,se)),X(B),se=ce.pending,ce.pending===ce.pending_buf_size)){J=1;break}J=ce.gzindex<ce.gzhead.name.length?255&ce.gzhead.name.charCodeAt(ce.gzindex++):0,ye(ce,J)}while(J!==0);ce.gzhead.hcrc&&ce.pending>se&&(B.adler=c(B.adler,ce.pending_buf,ce.pending-se,se)),J===0&&(ce.gzindex=0,ce.status=91)}else ce.status=91;if(ce.status===91)if(ce.gzhead.comment){se=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>se&&(B.adler=c(B.adler,ce.pending_buf,ce.pending-se,se)),X(B),se=ce.pending,ce.pending===ce.pending_buf_size)){J=1;break}J=ce.gzindex<ce.gzhead.comment.length?255&ce.gzhead.comment.charCodeAt(ce.gzindex++):0,ye(ce,J)}while(J!==0);ce.gzhead.hcrc&&ce.pending>se&&(B.adler=c(B.adler,ce.pending_buf,ce.pending-se,se)),J===0&&(ce.status=103)}else ce.status=103;if(ce.status===103&&(ce.gzhead.hcrc?(ce.pending+2>ce.pending_buf_size&&X(B),ce.pending+2<=ce.pending_buf_size&&(ye(ce,255&B.adler),ye(ce,B.adler>>8&255),B.adler=0,ce.status=Z)):ce.status=Z),ce.pending!==0){if(X(B),B.avail_out===0)return ce.last_flush=-1,g}else if(B.avail_in===0&&ne(ke)<=ne(Ae)&&ke!==m)return Y(B,-5);if(ce.status===666&&B.avail_in!==0)return Y(B,-5);if(B.avail_in!==0||ce.lookahead!==0||ke!==h&&ce.status!==666){var Pe=ce.strategy===2?function(Se,Ze){for(var Et;;){if(Se.lookahead===0&&(Me(Se),Se.lookahead===0)){if(Ze===h)return V;break}if(Se.match_length=0,Et=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++,Et&&(oe(Se,!1),Se.strm.avail_out===0))return V}return Se.insert=0,Ze===m?(oe(Se,!0),Se.strm.avail_out===0?ae:re):Se.last_lit&&(oe(Se,!1),Se.strm.avail_out===0)?V:te}(ce,ke):ce.strategy===3?function(Se,Ze){for(var Et,at,_t,Nt,Rt=Se.window;;){if(Se.lookahead<=H){if(Me(Se),Se.lookahead<=H&&Ze===h)return V;if(Se.lookahead===0)break}if(Se.match_length=0,Se.lookahead>=z&&0<Se.strstart&&(at=Rt[_t=Se.strstart-1])===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]){Nt=Se.strstart+H;do;while(at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&_t<Nt);Se.match_length=H-(Nt-_t),Se.match_length>Se.lookahead&&(Se.match_length=Se.lookahead)}if(Se.match_length>=z?(Et=s._tr_tally(Se,1,Se.match_length-z),Se.lookahead-=Se.match_length,Se.strstart+=Se.match_length,Se.match_length=0):(Et=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++),Et&&(oe(Se,!1),Se.strm.avail_out===0))return V}return Se.insert=0,Ze===m?(oe(Se,!0),Se.strm.avail_out===0?ae:re):Se.last_lit&&(oe(Se,!1),Se.strm.avail_out===0)?V:te}(ce,ke):i[ce.level].func(ce,ke);if(Pe!==ae&&Pe!==re||(ce.status=666),Pe===V||Pe===ae)return B.avail_out===0&&(ce.last_flush=-1),g;if(Pe===te&&(ke===1?s._tr_align(ce):ke!==5&&(s._tr_stored_block(ce,0,0,!1),ke===3&&(G(ce.head),ce.lookahead===0&&(ce.strstart=0,ce.block_start=0,ce.insert=0))),X(B),B.avail_out===0))return ce.last_flush=-1,g}return ke!==m?g:ce.wrap<=0?1:(ce.wrap===2?(ye(ce,255&B.adler),ye(ce,B.adler>>8&255),ye(ce,B.adler>>16&255),ye(ce,B.adler>>24&255),ye(ce,255&B.total_in),ye(ce,B.total_in>>8&255),ye(ce,B.total_in>>16&255),ye(ce,B.total_in>>24&255)):(we(ce,B.adler>>>16),we(ce,65535&B.adler)),X(B),0<ce.wrap&&(ce.wrap=-ce.wrap),ce.pending!==0?g:1)},a.deflateEnd=function(B){var ke;return B&&B.state?(ke=B.state.status)!==P&&ke!==69&&ke!==73&&ke!==91&&ke!==103&&ke!==Z&&ke!==666?Y(B,v):(B.state=null,ke===Z?Y(B,-3):g):v},a.deflateSetDictionary=function(B,ke){var Ae,ce,se,J,xe,Pe,Se,Ze,Et=ke.length;if(!B||!B.state||(J=(Ae=B.state).wrap)===2||J===1&&Ae.status!==P||Ae.lookahead)return v;for(J===1&&(B.adler=u(B.adler,ke,Et,0)),Ae.wrap=0,Et>=Ae.w_size&&(J===0&&(G(Ae.head),Ae.strstart=0,Ae.block_start=0,Ae.insert=0),Ze=new o.Buf8(Ae.w_size),o.arraySet(Ze,ke,Et-Ae.w_size,Ae.w_size,0),ke=Ze,Et=Ae.w_size),xe=B.avail_in,Pe=B.next_in,Se=B.input,B.avail_in=Et,B.next_in=0,B.input=ke,Me(Ae);Ae.lookahead>=z;){for(ce=Ae.strstart,se=Ae.lookahead-(z-1);Ae.ins_h=(Ae.ins_h<<Ae.hash_shift^Ae.window[ce+z-1])&Ae.hash_mask,Ae.prev[ce&Ae.w_mask]=Ae.head[Ae.ins_h],Ae.head[Ae.ins_h]=ce,ce++,--se;);Ae.strstart=ce,Ae.lookahead=z-1,Me(Ae)}return Ae.strstart+=Ae.lookahead,Ae.block_start=Ae.strstart,Ae.insert=Ae.lookahead,Ae.lookahead=0,Ae.match_length=Ae.prev_length=z-1,Ae.match_available=0,B.next_in=Pe,B.input=Se,B.avail_in=xe,Ae.wrap=J,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,u,c,f,h,m,g,v,w,_,x,S,E,C,A,j,O,N,z,H,Q,P,Z,V,te;s=i.state,u=i.next_in,V=i.input,c=u+(i.avail_in-5),f=i.next_out,te=i.output,h=f-(o-i.avail_out),m=f+(i.avail_out-257),g=s.dmax,v=s.wsize,w=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,C=s.lencode,A=s.distcode,j=(1<<s.lenbits)-1,O=(1<<s.distbits)-1;e:do{E<15&&(S+=V[u++]<<E,E+=8,S+=V[u++]<<E,E+=8),N=C[S&j];t:for(;;){if(S>>>=z=N>>>24,E-=z,(z=N>>>16&255)===0)te[f++]=65535&N;else{if(!(16&z)){if((64&z)==0){N=C[(65535&N)+(S&(1<<z)-1)];continue t}if(32&z){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}H=65535&N,(z&=15)&&(E<z&&(S+=V[u++]<<E,E+=8),H+=S&(1<<z)-1,S>>>=z,E-=z),E<15&&(S+=V[u++]<<E,E+=8,S+=V[u++]<<E,E+=8),N=A[S&O];n:for(;;){if(S>>>=z=N>>>24,E-=z,!(16&(z=N>>>16&255))){if((64&z)==0){N=A[(65535&N)+(S&(1<<z)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(Q=65535&N,E<(z&=15)&&(S+=V[u++]<<E,(E+=8)<z&&(S+=V[u++]<<E,E+=8)),g<(Q+=S&(1<<z)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=z,E-=z,(z=f-h)<Q){if(w<(z=Q-z)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(Z=x,(P=0)===_){if(P+=v-z,z<H){for(H-=z;te[f++]=x[P++],--z;);P=f-Q,Z=te}}else if(_<z){if(P+=v+_-z,(z-=_)<H){for(H-=z;te[f++]=x[P++],--z;);if(P=0,_<H){for(H-=z=_;te[f++]=x[P++],--z;);P=f-Q,Z=te}}}else if(P+=_-z,z<H){for(H-=z;te[f++]=x[P++],--z;);P=f-Q,Z=te}for(;2<H;)te[f++]=Z[P++],te[f++]=Z[P++],te[f++]=Z[P++],H-=3;H&&(te[f++]=Z[P++],1<H&&(te[f++]=Z[P++]))}else{for(P=f-Q;te[f++]=te[P++],te[f++]=te[P++],te[f++]=te[P++],2<(H-=3););H&&(te[f++]=te[P++],1<H&&(te[f++]=te[P++]))}break}}break}}while(u<c&&f<m);u-=H=E>>3,S&=(1<<(E-=H<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=f<m?m-f+257:257-(f-m),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),f=1,h=2,m=0,g=-2,v=1,w=852,_=592;function x(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(P){var Z;return P&&P.state?(Z=P.state,P.total_in=P.total_out=Z.total=0,P.msg="",Z.wrap&&(P.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(w),Z.distcode=Z.distdyn=new i.Buf32(_),Z.sane=1,Z.back=-1,m):g}function C(P){var Z;return P&&P.state?((Z=P.state).wsize=0,Z.whave=0,Z.wnext=0,E(P)):g}function A(P,Z){var V,te;return P&&P.state?(te=P.state,Z<0?(V=0,Z=-Z):(V=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(te.window!==null&&te.wbits!==Z&&(te.window=null),te.wrap=V,te.wbits=Z,C(P))):g}function j(P,Z){var V,te;return P?(te=new S,(P.state=te).window=null,(V=A(P,Z))!==m&&(P.state=null),V):g}var O,N,z=!0;function H(P){if(z){var Z;for(O=new i.Buf32(512),N=new i.Buf32(32),Z=0;Z<144;)P.lens[Z++]=8;for(;Z<256;)P.lens[Z++]=9;for(;Z<280;)P.lens[Z++]=7;for(;Z<288;)P.lens[Z++]=8;for(c(f,P.lens,0,288,O,0,P.work,{bits:9}),Z=0;Z<32;)P.lens[Z++]=5;c(h,P.lens,0,32,N,0,P.work,{bits:5}),z=!1}P.lencode=O,P.lenbits=9,P.distcode=N,P.distbits=5}function Q(P,Z,V,te){var ae,re=P.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),te>=re.wsize?(i.arraySet(re.window,Z,V-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(te<(ae=re.wsize-re.wnext)&&(ae=te),i.arraySet(re.window,Z,V-te,ae,re.wnext),(te-=ae)?(i.arraySet(re.window,Z,V-te,te,0),re.wnext=te,re.whave=re.wsize):(re.wnext+=ae,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ae))),0}a.inflateReset=C,a.inflateReset2=A,a.inflateResetKeep=E,a.inflateInit=function(P){return j(P,15)},a.inflateInit2=j,a.inflate=function(P,Z){var V,te,ae,re,Y,ne,G,X,oe,ye,we,fe,Me,Fe,Oe,Re,ze,He,Te,Ce,B,ke,Ae,ce,se=0,J=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return g;(V=P.state).mode===12&&(V.mode=13),Y=P.next_out,ae=P.output,G=P.avail_out,re=P.next_in,te=P.input,ne=P.avail_in,X=V.hold,oe=V.bits,ye=ne,we=G,ke=m;e:for(;;)switch(V.mode){case v:if(V.wrap===0){V.mode=13;break}for(;oe<16;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if(2&V.wrap&&X===35615){J[V.check=0]=255&X,J[1]=X>>>8&255,V.check=s(V.check,J,2,0),oe=X=0,V.mode=2;break}if(V.flags=0,V.head&&(V.head.done=!1),!(1&V.wrap)||(((255&X)<<8)+(X>>8))%31){P.msg="incorrect header check",V.mode=30;break}if((15&X)!=8){P.msg="unknown compression method",V.mode=30;break}if(oe-=4,B=8+(15&(X>>>=4)),V.wbits===0)V.wbits=B;else if(B>V.wbits){P.msg="invalid window size",V.mode=30;break}V.dmax=1<<B,P.adler=V.check=1,V.mode=512&X?10:12,oe=X=0;break;case 2:for(;oe<16;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if(V.flags=X,(255&V.flags)!=8){P.msg="unknown compression method",V.mode=30;break}if(57344&V.flags){P.msg="unknown header flags set",V.mode=30;break}V.head&&(V.head.text=X>>8&1),512&V.flags&&(J[0]=255&X,J[1]=X>>>8&255,V.check=s(V.check,J,2,0)),oe=X=0,V.mode=3;case 3:for(;oe<32;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}V.head&&(V.head.time=X),512&V.flags&&(J[0]=255&X,J[1]=X>>>8&255,J[2]=X>>>16&255,J[3]=X>>>24&255,V.check=s(V.check,J,4,0)),oe=X=0,V.mode=4;case 4:for(;oe<16;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}V.head&&(V.head.xflags=255&X,V.head.os=X>>8),512&V.flags&&(J[0]=255&X,J[1]=X>>>8&255,V.check=s(V.check,J,2,0)),oe=X=0,V.mode=5;case 5:if(1024&V.flags){for(;oe<16;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}V.length=X,V.head&&(V.head.extra_len=X),512&V.flags&&(J[0]=255&X,J[1]=X>>>8&255,V.check=s(V.check,J,2,0)),oe=X=0}else V.head&&(V.head.extra=null);V.mode=6;case 6:if(1024&V.flags&&(ne<(fe=V.length)&&(fe=ne),fe&&(V.head&&(B=V.head.extra_len-V.length,V.head.extra||(V.head.extra=new Array(V.head.extra_len)),i.arraySet(V.head.extra,te,re,fe,B)),512&V.flags&&(V.check=s(V.check,te,fe,re)),ne-=fe,re+=fe,V.length-=fe),V.length))break e;V.length=0,V.mode=7;case 7:if(2048&V.flags){if(ne===0)break e;for(fe=0;B=te[re+fe++],V.head&&B&&V.length<65536&&(V.head.name+=String.fromCharCode(B)),B&&fe<ne;);if(512&V.flags&&(V.check=s(V.check,te,fe,re)),ne-=fe,re+=fe,B)break e}else V.head&&(V.head.name=null);V.length=0,V.mode=8;case 8:if(4096&V.flags){if(ne===0)break e;for(fe=0;B=te[re+fe++],V.head&&B&&V.length<65536&&(V.head.comment+=String.fromCharCode(B)),B&&fe<ne;);if(512&V.flags&&(V.check=s(V.check,te,fe,re)),ne-=fe,re+=fe,B)break e}else V.head&&(V.head.comment=null);V.mode=9;case 9:if(512&V.flags){for(;oe<16;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if(X!==(65535&V.check)){P.msg="header crc mismatch",V.mode=30;break}oe=X=0}V.head&&(V.head.hcrc=V.flags>>9&1,V.head.done=!0),P.adler=V.check=0,V.mode=12;break;case 10:for(;oe<32;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}P.adler=V.check=x(X),oe=X=0,V.mode=11;case 11:if(V.havedict===0)return P.next_out=Y,P.avail_out=G,P.next_in=re,P.avail_in=ne,V.hold=X,V.bits=oe,2;P.adler=V.check=1,V.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(V.last){X>>>=7&oe,oe-=7&oe,V.mode=27;break}for(;oe<3;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}switch(V.last=1&X,oe-=1,3&(X>>>=1)){case 0:V.mode=14;break;case 1:if(H(V),V.mode=20,Z!==6)break;X>>>=2,oe-=2;break e;case 2:V.mode=17;break;case 3:P.msg="invalid block type",V.mode=30}X>>>=2,oe-=2;break;case 14:for(X>>>=7&oe,oe-=7&oe;oe<32;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if((65535&X)!=(X>>>16^65535)){P.msg="invalid stored block lengths",V.mode=30;break}if(V.length=65535&X,oe=X=0,V.mode=15,Z===6)break e;case 15:V.mode=16;case 16:if(fe=V.length){if(ne<fe&&(fe=ne),G<fe&&(fe=G),fe===0)break e;i.arraySet(ae,te,re,fe,Y),ne-=fe,re+=fe,G-=fe,Y+=fe,V.length-=fe;break}V.mode=12;break;case 17:for(;oe<14;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if(V.nlen=257+(31&X),X>>>=5,oe-=5,V.ndist=1+(31&X),X>>>=5,oe-=5,V.ncode=4+(15&X),X>>>=4,oe-=4,286<V.nlen||30<V.ndist){P.msg="too many length or distance symbols",V.mode=30;break}V.have=0,V.mode=18;case 18:for(;V.have<V.ncode;){for(;oe<3;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}V.lens[xe[V.have++]]=7&X,X>>>=3,oe-=3}for(;V.have<19;)V.lens[xe[V.have++]]=0;if(V.lencode=V.lendyn,V.lenbits=7,Ae={bits:V.lenbits},ke=c(0,V.lens,0,19,V.lencode,0,V.work,Ae),V.lenbits=Ae.bits,ke){P.msg="invalid code lengths set",V.mode=30;break}V.have=0,V.mode=19;case 19:for(;V.have<V.nlen+V.ndist;){for(;Re=(se=V.lencode[X&(1<<V.lenbits)-1])>>>16&255,ze=65535&se,!((Oe=se>>>24)<=oe);){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if(ze<16)X>>>=Oe,oe-=Oe,V.lens[V.have++]=ze;else{if(ze===16){for(ce=Oe+2;oe<ce;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if(X>>>=Oe,oe-=Oe,V.have===0){P.msg="invalid bit length repeat",V.mode=30;break}B=V.lens[V.have-1],fe=3+(3&X),X>>>=2,oe-=2}else if(ze===17){for(ce=Oe+3;oe<ce;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}oe-=Oe,B=0,fe=3+(7&(X>>>=Oe)),X>>>=3,oe-=3}else{for(ce=Oe+7;oe<ce;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}oe-=Oe,B=0,fe=11+(127&(X>>>=Oe)),X>>>=7,oe-=7}if(V.have+fe>V.nlen+V.ndist){P.msg="invalid bit length repeat",V.mode=30;break}for(;fe--;)V.lens[V.have++]=B}}if(V.mode===30)break;if(V.lens[256]===0){P.msg="invalid code -- missing end-of-block",V.mode=30;break}if(V.lenbits=9,Ae={bits:V.lenbits},ke=c(f,V.lens,0,V.nlen,V.lencode,0,V.work,Ae),V.lenbits=Ae.bits,ke){P.msg="invalid literal/lengths set",V.mode=30;break}if(V.distbits=6,V.distcode=V.distdyn,Ae={bits:V.distbits},ke=c(h,V.lens,V.nlen,V.ndist,V.distcode,0,V.work,Ae),V.distbits=Ae.bits,ke){P.msg="invalid distances set",V.mode=30;break}if(V.mode=20,Z===6)break e;case 20:V.mode=21;case 21:if(6<=ne&&258<=G){P.next_out=Y,P.avail_out=G,P.next_in=re,P.avail_in=ne,V.hold=X,V.bits=oe,u(P,we),Y=P.next_out,ae=P.output,G=P.avail_out,re=P.next_in,te=P.input,ne=P.avail_in,X=V.hold,oe=V.bits,V.mode===12&&(V.back=-1);break}for(V.back=0;Re=(se=V.lencode[X&(1<<V.lenbits)-1])>>>16&255,ze=65535&se,!((Oe=se>>>24)<=oe);){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if(Re&&(240&Re)==0){for(He=Oe,Te=Re,Ce=ze;Re=(se=V.lencode[Ce+((X&(1<<He+Te)-1)>>He)])>>>16&255,ze=65535&se,!(He+(Oe=se>>>24)<=oe);){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}X>>>=He,oe-=He,V.back+=He}if(X>>>=Oe,oe-=Oe,V.back+=Oe,V.length=ze,Re===0){V.mode=26;break}if(32&Re){V.back=-1,V.mode=12;break}if(64&Re){P.msg="invalid literal/length code",V.mode=30;break}V.extra=15&Re,V.mode=22;case 22:if(V.extra){for(ce=V.extra;oe<ce;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}V.length+=X&(1<<V.extra)-1,X>>>=V.extra,oe-=V.extra,V.back+=V.extra}V.was=V.length,V.mode=23;case 23:for(;Re=(se=V.distcode[X&(1<<V.distbits)-1])>>>16&255,ze=65535&se,!((Oe=se>>>24)<=oe);){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if((240&Re)==0){for(He=Oe,Te=Re,Ce=ze;Re=(se=V.distcode[Ce+((X&(1<<He+Te)-1)>>He)])>>>16&255,ze=65535&se,!(He+(Oe=se>>>24)<=oe);){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}X>>>=He,oe-=He,V.back+=He}if(X>>>=Oe,oe-=Oe,V.back+=Oe,64&Re){P.msg="invalid distance code",V.mode=30;break}V.offset=ze,V.extra=15&Re,V.mode=24;case 24:if(V.extra){for(ce=V.extra;oe<ce;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}V.offset+=X&(1<<V.extra)-1,X>>>=V.extra,oe-=V.extra,V.back+=V.extra}if(V.offset>V.dmax){P.msg="invalid distance too far back",V.mode=30;break}V.mode=25;case 25:if(G===0)break e;if(fe=we-G,V.offset>fe){if((fe=V.offset-fe)>V.whave&&V.sane){P.msg="invalid distance too far back",V.mode=30;break}Me=fe>V.wnext?(fe-=V.wnext,V.wsize-fe):V.wnext-fe,fe>V.length&&(fe=V.length),Fe=V.window}else Fe=ae,Me=Y-V.offset,fe=V.length;for(G<fe&&(fe=G),G-=fe,V.length-=fe;ae[Y++]=Fe[Me++],--fe;);V.length===0&&(V.mode=21);break;case 26:if(G===0)break e;ae[Y++]=V.length,G--,V.mode=21;break;case 27:if(V.wrap){for(;oe<32;){if(ne===0)break e;ne--,X|=te[re++]<<oe,oe+=8}if(we-=G,P.total_out+=we,V.total+=we,we&&(P.adler=V.check=V.flags?s(V.check,ae,we,Y-we):o(V.check,ae,we,Y-we)),we=G,(V.flags?X:x(X))!==V.check){P.msg="incorrect data check",V.mode=30;break}oe=X=0}V.mode=28;case 28:if(V.wrap&&V.flags){for(;oe<32;){if(ne===0)break e;ne--,X+=te[re++]<<oe,oe+=8}if(X!==(4294967295&V.total)){P.msg="incorrect length check",V.mode=30;break}oe=X=0}V.mode=29;case 29:ke=1;break e;case 30:ke=-3;break e;case 31:return-4;case 32:default:return g}return P.next_out=Y,P.avail_out=G,P.next_in=re,P.avail_in=ne,V.hold=X,V.bits=oe,(V.wsize||we!==P.avail_out&&V.mode<30&&(V.mode<27||Z!==4))&&Q(P,P.output,P.next_out,we-P.avail_out)?(V.mode=31,-4):(ye-=P.avail_in,we-=P.avail_out,P.total_in+=ye,P.total_out+=we,V.total+=we,V.wrap&&we&&(P.adler=V.check=V.flags?s(V.check,ae,we,P.next_out-we):o(V.check,ae,we,P.next_out-we)),P.data_type=V.bits+(V.last?64:0)+(V.mode===12?128:0)+(V.mode===20||V.mode===15?256:0),(ye==0&&we===0||Z===4)&&ke===m&&(ke=-5),ke)},a.inflateEnd=function(P){if(!P||!P.state)return g;var Z=P.state;return Z.window&&(Z.window=null),P.state=null,m},a.inflateGetHeader=function(P,Z){var V;return P&&P.state?(2&(V=P.state).wrap)==0?g:((V.head=Z).done=!1,m):g},a.inflateSetDictionary=function(P,Z){var V,te=Z.length;return P&&P.state?(V=P.state).wrap!==0&&V.mode!==11?g:V.mode===11&&o(1,Z,te,0)!==V.check?-3:Q(P,Z,te,te)?(V.mode=31,-4):(V.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,m,g,v,w,_,x){var S,E,C,A,j,O,N,z,H,Q=x.bits,P=0,Z=0,V=0,te=0,ae=0,re=0,Y=0,ne=0,G=0,X=0,oe=null,ye=0,we=new i.Buf16(16),fe=new i.Buf16(16),Me=null,Fe=0;for(P=0;P<=15;P++)we[P]=0;for(Z=0;Z<g;Z++)we[h[m+Z]]++;for(ae=Q,te=15;1<=te&&we[te]===0;te--);if(te<ae&&(ae=te),te===0)return v[w++]=20971520,v[w++]=20971520,x.bits=1,0;for(V=1;V<te&&we[V]===0;V++);for(ae<V&&(ae=V),P=ne=1;P<=15;P++)if(ne<<=1,(ne-=we[P])<0)return-1;if(0<ne&&(f===0||te!==1))return-1;for(fe[1]=0,P=1;P<15;P++)fe[P+1]=fe[P]+we[P];for(Z=0;Z<g;Z++)h[m+Z]!==0&&(_[fe[h[m+Z]]++]=Z);if(O=f===0?(oe=Me=_,19):f===1?(oe=o,ye-=257,Me=s,Fe-=257,256):(oe=u,Me=c,-1),P=V,j=w,Y=Z=X=0,C=-1,A=(G=1<<(re=ae))-1,f===1&&852<G||f===2&&592<G)return 1;for(;;){for(N=P-Y,H=_[Z]<O?(z=0,_[Z]):_[Z]>O?(z=Me[Fe+_[Z]],oe[ye+_[Z]]):(z=96,0),S=1<<P-Y,V=E=1<<re;v[j+(X>>Y)+(E-=S)]=N<<24|z<<16|H|0,E!==0;);for(S=1<<P-1;X&S;)S>>=1;if(S!==0?(X&=S-1,X+=S):X=0,Z++,--we[P]==0){if(P===te)break;P=h[m+_[Z]]}if(ae<P&&(X&A)!==C){for(Y===0&&(Y=ae),j+=V,ne=1<<(re=P-Y);re+Y<te&&!((ne-=we[re+Y])<=0);)re++,ne<<=1;if(G+=1<<re,f===1&&852<G||f===2&&592<G)return 1;v[C=X&A]=ae<<24|re<<16|j-w|0}}return X!==0&&(v[j+X]=P-Y<<24|64<<16|0),x.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function u(se){for(var J=se.length;0<=--J;)se[J]=0}var c=0,f=29,h=256,m=h+1+f,g=30,v=19,w=2*m+1,_=15,x=16,S=7,E=256,C=16,A=17,j=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(m+2));u(Q);var P=new Array(2*g);u(P);var Z=new Array(512);u(Z);var V=new Array(256);u(V);var te=new Array(f);u(te);var ae,re,Y,ne=new Array(g);function G(se,J,xe,Pe,Se){this.static_tree=se,this.extra_bits=J,this.extra_base=xe,this.elems=Pe,this.max_length=Se,this.has_stree=se&&se.length}function X(se,J){this.dyn_tree=se,this.max_code=0,this.stat_desc=J}function oe(se){return se<256?Z[se]:Z[256+(se>>>7)]}function ye(se,J){se.pending_buf[se.pending++]=255&J,se.pending_buf[se.pending++]=J>>>8&255}function we(se,J,xe){se.bi_valid>x-xe?(se.bi_buf|=J<<se.bi_valid&65535,ye(se,se.bi_buf),se.bi_buf=J>>x-se.bi_valid,se.bi_valid+=xe-x):(se.bi_buf|=J<<se.bi_valid&65535,se.bi_valid+=xe)}function fe(se,J,xe){we(se,xe[2*J],xe[2*J+1])}function Me(se,J){for(var xe=0;xe|=1&se,se>>>=1,xe<<=1,0<--J;);return xe>>>1}function Fe(se,J,xe){var Pe,Se,Ze=new Array(_+1),Et=0;for(Pe=1;Pe<=_;Pe++)Ze[Pe]=Et=Et+xe[Pe-1]<<1;for(Se=0;Se<=J;Se++){var at=se[2*Se+1];at!==0&&(se[2*Se]=Me(Ze[at]++,at))}}function Oe(se){var J;for(J=0;J<m;J++)se.dyn_ltree[2*J]=0;for(J=0;J<g;J++)se.dyn_dtree[2*J]=0;for(J=0;J<v;J++)se.bl_tree[2*J]=0;se.dyn_ltree[2*E]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function Re(se){8<se.bi_valid?ye(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function ze(se,J,xe,Pe){var Se=2*J,Ze=2*xe;return se[Se]<se[Ze]||se[Se]===se[Ze]&&Pe[J]<=Pe[xe]}function He(se,J,xe){for(var Pe=se.heap[xe],Se=xe<<1;Se<=se.heap_len&&(Se<se.heap_len&&ze(J,se.heap[Se+1],se.heap[Se],se.depth)&&Se++,!ze(J,Pe,se.heap[Se],se.depth));)se.heap[xe]=se.heap[Se],xe=Se,Se<<=1;se.heap[xe]=Pe}function Te(se,J,xe){var Pe,Se,Ze,Et,at=0;if(se.last_lit!==0)for(;Pe=se.pending_buf[se.d_buf+2*at]<<8|se.pending_buf[se.d_buf+2*at+1],Se=se.pending_buf[se.l_buf+at],at++,Pe===0?fe(se,Se,J):(fe(se,(Ze=V[Se])+h+1,J),(Et=O[Ze])!==0&&we(se,Se-=te[Ze],Et),fe(se,Ze=oe(--Pe),xe),(Et=N[Ze])!==0&&we(se,Pe-=ne[Ze],Et)),at<se.last_lit;);fe(se,E,J)}function Ce(se,J){var xe,Pe,Se,Ze=J.dyn_tree,Et=J.stat_desc.static_tree,at=J.stat_desc.has_stree,_t=J.stat_desc.elems,Nt=-1;for(se.heap_len=0,se.heap_max=w,xe=0;xe<_t;xe++)Ze[2*xe]!==0?(se.heap[++se.heap_len]=Nt=xe,se.depth[xe]=0):Ze[2*xe+1]=0;for(;se.heap_len<2;)Ze[2*(Se=se.heap[++se.heap_len]=Nt<2?++Nt:0)]=1,se.depth[Se]=0,se.opt_len--,at&&(se.static_len-=Et[2*Se+1]);for(J.max_code=Nt,xe=se.heap_len>>1;1<=xe;xe--)He(se,Ze,xe);for(Se=_t;xe=se.heap[1],se.heap[1]=se.heap[se.heap_len--],He(se,Ze,1),Pe=se.heap[1],se.heap[--se.heap_max]=xe,se.heap[--se.heap_max]=Pe,Ze[2*Se]=Ze[2*xe]+Ze[2*Pe],se.depth[Se]=(se.depth[xe]>=se.depth[Pe]?se.depth[xe]:se.depth[Pe])+1,Ze[2*xe+1]=Ze[2*Pe+1]=Se,se.heap[1]=Se++,He(se,Ze,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(Rt,Kt){var pe,R,q,de,Ie,be,Ee=Kt.dyn_tree,le=Kt.max_code,ft=Kt.stat_desc.static_tree,vt=Kt.stat_desc.has_stree,D=Kt.stat_desc.extra_bits,$e=Kt.stat_desc.extra_base,st=Kt.stat_desc.max_length,ge=0;for(de=0;de<=_;de++)Rt.bl_count[de]=0;for(Ee[2*Rt.heap[Rt.heap_max]+1]=0,pe=Rt.heap_max+1;pe<w;pe++)st<(de=Ee[2*Ee[2*(R=Rt.heap[pe])+1]+1]+1)&&(de=st,ge++),Ee[2*R+1]=de,le<R||(Rt.bl_count[de]++,Ie=0,$e<=R&&(Ie=D[R-$e]),be=Ee[2*R],Rt.opt_len+=be*(de+Ie),vt&&(Rt.static_len+=be*(ft[2*R+1]+Ie)));if(ge!==0){do{for(de=st-1;Rt.bl_count[de]===0;)de--;Rt.bl_count[de]--,Rt.bl_count[de+1]+=2,Rt.bl_count[st]--,ge-=2}while(0<ge);for(de=st;de!==0;de--)for(R=Rt.bl_count[de];R!==0;)le<(q=Rt.heap[--pe])||(Ee[2*q+1]!==de&&(Rt.opt_len+=(de-Ee[2*q+1])*Ee[2*q],Ee[2*q+1]=de),R--)}}(se,J),Fe(Ze,Nt,se.bl_count)}function B(se,J,xe){var Pe,Se,Ze=-1,Et=J[1],at=0,_t=7,Nt=4;for(Et===0&&(_t=138,Nt=3),J[2*(xe+1)+1]=65535,Pe=0;Pe<=xe;Pe++)Se=Et,Et=J[2*(Pe+1)+1],++at<_t&&Se===Et||(at<Nt?se.bl_tree[2*Se]+=at:Se!==0?(Se!==Ze&&se.bl_tree[2*Se]++,se.bl_tree[2*C]++):at<=10?se.bl_tree[2*A]++:se.bl_tree[2*j]++,Ze=Se,Nt=(at=0)===Et?(_t=138,3):Se===Et?(_t=6,3):(_t=7,4))}function ke(se,J,xe){var Pe,Se,Ze=-1,Et=J[1],at=0,_t=7,Nt=4;for(Et===0&&(_t=138,Nt=3),Pe=0;Pe<=xe;Pe++)if(Se=Et,Et=J[2*(Pe+1)+1],!(++at<_t&&Se===Et)){if(at<Nt)for(;fe(se,Se,se.bl_tree),--at!=0;);else Se!==0?(Se!==Ze&&(fe(se,Se,se.bl_tree),at--),fe(se,C,se.bl_tree),we(se,at-3,2)):at<=10?(fe(se,A,se.bl_tree),we(se,at-3,3)):(fe(se,j,se.bl_tree),we(se,at-11,7));Ze=Se,Nt=(at=0)===Et?(_t=138,3):Se===Et?(_t=6,3):(_t=7,4)}}u(ne);var Ae=!1;function ce(se,J,xe,Pe){we(se,(c<<1)+(Pe?1:0),3),function(Se,Ze,Et,at){Re(Se),ye(Se,Et),ye(Se,~Et),i.arraySet(Se.pending_buf,Se.window,Ze,Et,Se.pending),Se.pending+=Et}(se,J,xe)}a._tr_init=function(se){Ae||(function(){var J,xe,Pe,Se,Ze,Et=new Array(_+1);for(Se=Pe=0;Se<f-1;Se++)for(te[Se]=Pe,J=0;J<1<<O[Se];J++)V[Pe++]=Se;for(V[Pe-1]=Se,Se=Ze=0;Se<16;Se++)for(ne[Se]=Ze,J=0;J<1<<N[Se];J++)Z[Ze++]=Se;for(Ze>>=7;Se<g;Se++)for(ne[Se]=Ze<<7,J=0;J<1<<N[Se]-7;J++)Z[256+Ze++]=Se;for(xe=0;xe<=_;xe++)Et[xe]=0;for(J=0;J<=143;)Q[2*J+1]=8,J++,Et[8]++;for(;J<=255;)Q[2*J+1]=9,J++,Et[9]++;for(;J<=279;)Q[2*J+1]=7,J++,Et[7]++;for(;J<=287;)Q[2*J+1]=8,J++,Et[8]++;for(Fe(Q,m+1,Et),J=0;J<g;J++)P[2*J+1]=5,P[2*J]=Me(J,5);ae=new G(Q,O,h+1,m,_),re=new G(P,N,0,g,_),Y=new G(new Array(0),z,0,v,S)}(),Ae=!0),se.l_desc=new X(se.dyn_ltree,ae),se.d_desc=new X(se.dyn_dtree,re),se.bl_desc=new X(se.bl_tree,Y),se.bi_buf=0,se.bi_valid=0,Oe(se)},a._tr_stored_block=ce,a._tr_flush_block=function(se,J,xe,Pe){var Se,Ze,Et=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(at){var _t,Nt=4093624447;for(_t=0;_t<=31;_t++,Nt>>>=1)if(1&Nt&&at.dyn_ltree[2*_t]!==0)return o;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return s;for(_t=32;_t<h;_t++)if(at.dyn_ltree[2*_t]!==0)return s;return o}(se)),Ce(se,se.l_desc),Ce(se,se.d_desc),Et=function(at){var _t;for(B(at,at.dyn_ltree,at.l_desc.max_code),B(at,at.dyn_dtree,at.d_desc.max_code),Ce(at,at.bl_desc),_t=v-1;3<=_t&&at.bl_tree[2*H[_t]+1]===0;_t--);return at.opt_len+=3*(_t+1)+5+5+4,_t}(se),Se=se.opt_len+3+7>>>3,(Ze=se.static_len+3+7>>>3)<=Se&&(Se=Ze)):Se=Ze=xe+5,xe+4<=Se&&J!==-1?ce(se,J,xe,Pe):se.strategy===4||Ze===Se?(we(se,2+(Pe?1:0),3),Te(se,Q,P)):(we(se,4+(Pe?1:0),3),function(at,_t,Nt,Rt){var Kt;for(we(at,_t-257,5),we(at,Nt-1,5),we(at,Rt-4,4),Kt=0;Kt<Rt;Kt++)we(at,at.bl_tree[2*H[Kt]+1],3);ke(at,at.dyn_ltree,_t-1),ke(at,at.dyn_dtree,Nt-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,Et+1),Te(se,se.dyn_ltree,se.dyn_dtree)),Oe(se),Pe&&Re(se)},a._tr_tally=function(se,J,xe){return se.pending_buf[se.d_buf+2*se.last_lit]=J>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&J,se.pending_buf[se.l_buf+se.last_lit]=255&xe,se.last_lit++,J===0?se.dyn_ltree[2*xe]++:(se.matches++,J--,se.dyn_ltree[2*(V[xe]+h+1)]++,se.dyn_dtree[2*oe(J)]++),se.last_lit===se.lit_bufsize-1},a._tr_align=function(se){we(se,2,3),fe(se,E,Q),function(J){J.bi_valid===16?(ye(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var u,c,f,h,m=1,g={},v=!1,w=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(C){Wr.nextTick(function(){S(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,A=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=A,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){f.port2.postMessage(C)}):w&&"onreadystatechange"in w.createElement("script")?(c=w.documentElement,function(C){var A=w.createElement("script");A.onreadystatechange=function(){S(C),A.onreadystatechange=null,c.removeChild(A),A=null},c.appendChild(A)}):function(C){setTimeout(S,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var A=new Array(arguments.length-1),j=0;j<A.length;j++)A[j]=arguments[j+1];var O={callback:C,args:A};return g[m]=O,u(m),m++},_.clearImmediate=x}function x(C){delete g[C]}function S(C){if(v)setTimeout(S,0,C);else{var A=g[C];if(A){v=!0;try{(function(j){var O=j.callback,N=j.args;switch(N.length){case 0:O();break;case 1:O(N[0]);break;case 2:O(N[0],N[1]);break;case 3:O(N[0],N[1],N[2]);break;default:O.apply(s,N)}})(A)}finally{x(C),v=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(jx)),jx.exports}var HJ=qJ();const M8=Qa(HJ),zb=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},Wn=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},js=(...e)=>Wn(e.map(t=>t.trim()).filter(Boolean).join("/")),Xv=e=>{const t=Wn(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},ea=e=>{const t=Wn(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Om=(e,t)=>Wn(e==="/"?`/${t}`:`${e}/${t}`);var Dx,UN;function VJ(){if(UN)return Dx;UN=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Wr>"u"||typeof Wr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var u=!1,c=null,f=null,h=null,m=this,g=function(E,C,A){f&&(clearTimeout(f),f=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),u||(s?C?o(C):i(A):typeof r=="function"&&r(C,A),u=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},v=function(E){if(u)return g(E);c&&(clearTimeout(c),c=null),m.domainReentrant&&E&&(m.domains[t]=Wr.domain);var C=a.maxExecutionTime||m.maxExecutionTime;if(C&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var A=!1;try{n(function(j,O){A||(A=!0,g(E,j,O))})}catch(j){A||(A=!0,g(E,j))}}else m._promiseTry(function(){return n()}).then(function(j){g(E,void 0,j)},function(j){g(E,j)})};m.domainReentrant&&Wr.domain&&(v=Wr.domain.bind(v));var w=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],v(!0);else if(m.domainReentrant&&Wr.domain&&Wr.domain===m.domains[t])v(!1);else if(m.queues[t].length>=w)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){v(!0)};a.skipQueue?m.queues[t].unshift(_):m.queues[t].push(_);var x=a.timeout||m.timeout;x&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||m.maxOccupationTime;if(S&&(f=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(u,c){return function(f){i.acquire(u,c,f,a)}},s=t.reduceRight(function(u,c){return o(c,u)},n);if(typeof r=="function")s(r);else return new this.Promise(function(u,c){s.length===1?s(function(f,h){f?c(f):u(h)}):u(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},Dx=e,Dx}var Mx,qN;function GJ(){return qN||(qN=1,Mx=VJ()),Mx}var WJ=GJ();const jm=Qa(WJ);var Oy={exports:{}},HN;function KJ(){return HN||(HN=1,typeof Object.create=="function"?Oy.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Oy.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Oy.exports}var Px,VN;function ZJ(){if(VN)return Px;VN=1;var e=lk().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,u=0;u<o;){for(var c=s%i,f=Math.min(o-u,i-c),h=0;h<f;h++)a[c+h]=n[u+h];s+=f,u+=f,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Px=t,Px}var Fx,GN;function YJ(){if(GN)return Fx;GN=1;var e=KJ(),t=ZJ(),n=lk().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function c(f,h,m,g){return f===0?h&m|~h&g:f===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(f){for(var h=this._w,m=this._a|0,g=this._b|0,v=this._c|0,w=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=f.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=s(m)+c(E,g,v,w)+_+h[S]+r[E]|0;_=w,w=v,v=u(g),g=m,m=C}this._a=m+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=w+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var f=n.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},Fx=i,Fx}var XJ=YJ();const P8=Qa(XJ);var Lx,WN;function JJ(){if(WN)return Lx;WN=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,u=-1,c=0,f,h=0;h<=a.length;++h){if(h<a.length)f=a.charCodeAt(h);else{if(f===47)break;f=47}if(f===47){if(!(u===h-1||c===1))if(u!==h-1&&c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var m=o.lastIndexOf("/");if(m!==o.length-1){m===-1?(o="",s=0):(o=o.slice(0,m),s=o.length-1-o.lastIndexOf("/")),u=h,c=0;continue}}else if(o.length===2||o.length===1){o="",s=0,u=h,c=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(u+1,h):o=a.slice(u+1,h),s=h-u-1;u=h,c=0}else f===46&&c!==-1?++c:c=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,u=arguments.length-1;u>=-1&&!o;u--){var c;u>=0?c=arguments[u]:(s===void 0&&(s=Wr.cwd()),c=s),e(c),c.length!==0&&(i=c+"/"+i,o=c.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var u=i.length,c=u-s,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var h=o.length,m=h-f,g=c<m?c:m,v=-1,w=0;w<=g;++w){if(w===g){if(m>g){if(o.charCodeAt(f+w)===47)return o.slice(f+w+1);if(w===0)return o.slice(f+w)}else c>g&&(i.charCodeAt(s+w)===47?v=w:w===0&&(v=0));break}var _=i.charCodeAt(s+w),x=o.charCodeAt(f+w);if(_!==x)break;_===47&&(v=w)}var S="";for(w=s+v+1;w<=u;++w)(w===u||i.charCodeAt(w)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(f+v):(f+=v,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,u=-1,c=!0,f=i.length-1;f>=1;--f)if(o=i.charCodeAt(f),o===47){if(!c){u=f;break}}else c=!1;return u===-1?s?"/":".":s&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,u=-1,c=!0,f;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,m=-1;for(f=i.length-1;f>=0;--f){var g=i.charCodeAt(f);if(g===47){if(!c){s=f+1;break}}else m===-1&&(c=!1,m=f+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(u=f):(h=-1,u=m))}return s===u?u=m:u===-1&&(u=i.length),i.slice(s,u)}else{for(f=i.length-1;f>=0;--f)if(i.charCodeAt(f)===47){if(!c){s=f+1;break}}else u===-1&&(c=!1,u=f+1);return u===-1?"":i.slice(s,u)}},extname:function(i){e(i);for(var o=-1,s=0,u=-1,c=!0,f=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!c){s=h+1;break}continue}u===-1&&(c=!1,u=h+1),m===46?o===-1?o=h:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||u===-1||f===0||f===1&&o===u-1&&o===s+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),u=s===47,c;u?(o.root="/",c=1):c=0;for(var f=-1,h=0,m=-1,g=!0,v=i.length-1,w=0;v>=c;--v){if(s=i.charCodeAt(v),s===47){if(!g){h=v+1;break}continue}m===-1&&(g=!1,m=v+1),s===46?f===-1?f=v:w!==1&&(w=1):f!==-1&&(w=-1)}return f===-1||m===-1||w===0||w===1&&f===m-1&&f===h+1?m!==-1&&(h===0&&u?o.base=o.name=i.slice(1,m):o.base=o.name=i.slice(h,m)):(h===0&&u?(o.name=i.slice(1,f),o.base=i.slice(1,m)):(o.name=i.slice(h,f),o.base=i.slice(h,m)),o.ext=i.slice(f,m)),h>0?o.dir=i.slice(0,h-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,Lx=r,Lx}var Tt=JJ(),$x={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var KN;function QJ(){return KN||(KN=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,z=new Array(256),H=0;H!=256;++H)N=H,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,z[H]=N;return typeof Int32Array<"u"?new Int32Array(z):z}var r=n();function a(N){var z=0,H=0,Q=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Q=0;Q!=256;++Q)P[Q]=N[Q];for(Q=0;Q!=256;++Q)for(H=N[Q],z=256+Q;z<4096;z+=256)H=P[z]=H>>>8^N[H&255];var Z=[];for(Q=1;Q!=16;++Q)Z[Q-1]=typeof Int32Array<"u"?P.subarray(Q*256,Q*256+256):P.slice(Q*256,Q*256+256);return Z}var i=a(r),o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],h=i[5],m=i[6],g=i[7],v=i[8],w=i[9],_=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function A(N,z){for(var H=z^-1,Q=0,P=N.length;Q<P;)H=H>>>8^r[(H^N.charCodeAt(Q++))&255];return~H}function j(N,z){for(var H=z^-1,Q=N.length-15,P=0;P<Q;)H=C[N[P++]^H&255]^E[N[P++]^H>>8&255]^S[N[P++]^H>>16&255]^x[N[P++]^H>>>24]^_[N[P++]]^w[N[P++]]^v[N[P++]]^g[N[P++]]^m[N[P++]]^h[N[P++]]^f[N[P++]]^c[N[P++]]^u[N[P++]]^s[N[P++]]^o[N[P++]]^r[N[P++]];for(Q+=15;P<Q;)H=H>>>8^r[(H^N[P++])&255];return~H}function O(N,z){for(var H=z^-1,Q=0,P=N.length,Z=0,V=0;Q<P;)Z=N.charCodeAt(Q++),Z<128?H=H>>>8^r[(H^Z)&255]:Z<2048?(H=H>>>8^r[(H^(192|Z>>6&31))&255],H=H>>>8^r[(H^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,V=N.charCodeAt(Q++)&1023,H=H>>>8^r[(H^(240|Z>>8&7))&255],H=H>>>8^r[(H^(128|Z>>2&63))&255],H=H>>>8^r[(H^(128|V>>6&15|(Z&3)<<4))&255],H=H>>>8^r[(H^(128|V&63))&255]):(H=H>>>8^r[(H^(224|Z>>12&15))&255],H=H>>>8^r[(H^(128|Z>>6&63))&255],H=H>>>8^r[(H^(128|Z&63))&255]);return~H}t.table=r,t.bstr=A,t.buf=j,t.str=O})}($x)),$x}var eQ=QJ();const tQ=Qa(eQ);var Bx={},ZN;function ac(){return ZN||(ZN=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(i[u]=s[u])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,u,c){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+u),c);return}for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){var o,s,u,c,f,h;for(u=0,o=0,s=i.length;o<s;o++)u+=i[o].length;for(h=new Uint8Array(u),c=0,o=0,s=i.length;o<s;o++)f=i[o],h.set(f,c),c+=f.length;return h}},a={arraySet:function(i,o,s,u,c){for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(Bx)),Bx}var yf={},Ao={},Pc={},YN;function nQ(){if(YN)return Pc;YN=1;var e=ac(),t=4,n=0,r=1,a=2;function i(R){for(var q=R.length;--q>=0;)R[q]=0}var o=0,s=1,u=2,c=3,f=258,h=29,m=256,g=m+1+h,v=30,w=19,_=2*g+1,x=15,S=16,E=7,C=256,A=16,j=17,O=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=512,Z=new Array((g+2)*2);i(Z);var V=new Array(v*2);i(V);var te=new Array(P);i(te);var ae=new Array(f-c+1);i(ae);var re=new Array(h);i(re);var Y=new Array(v);i(Y);function ne(R,q,de,Ie,be){this.static_tree=R,this.extra_bits=q,this.extra_base=de,this.elems=Ie,this.max_length=be,this.has_stree=R&&R.length}var G,X,oe;function ye(R,q){this.dyn_tree=R,this.max_code=0,this.stat_desc=q}function we(R){return R<256?te[R]:te[256+(R>>>7)]}function fe(R,q){R.pending_buf[R.pending++]=q&255,R.pending_buf[R.pending++]=q>>>8&255}function Me(R,q,de){R.bi_valid>S-de?(R.bi_buf|=q<<R.bi_valid&65535,fe(R,R.bi_buf),R.bi_buf=q>>S-R.bi_valid,R.bi_valid+=de-S):(R.bi_buf|=q<<R.bi_valid&65535,R.bi_valid+=de)}function Fe(R,q,de){Me(R,de[q*2],de[q*2+1])}function Oe(R,q){var de=0;do de|=R&1,R>>>=1,de<<=1;while(--q>0);return de>>>1}function Re(R){R.bi_valid===16?(fe(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):R.bi_valid>=8&&(R.pending_buf[R.pending++]=R.bi_buf&255,R.bi_buf>>=8,R.bi_valid-=8)}function ze(R,q){var de=q.dyn_tree,Ie=q.max_code,be=q.stat_desc.static_tree,Ee=q.stat_desc.has_stree,le=q.stat_desc.extra_bits,ft=q.stat_desc.extra_base,vt=q.stat_desc.max_length,D,$e,st,ge,De,Je,It=0;for(ge=0;ge<=x;ge++)R.bl_count[ge]=0;for(de[R.heap[R.heap_max]*2+1]=0,D=R.heap_max+1;D<_;D++)$e=R.heap[D],ge=de[de[$e*2+1]*2+1]+1,ge>vt&&(ge=vt,It++),de[$e*2+1]=ge,!($e>Ie)&&(R.bl_count[ge]++,De=0,$e>=ft&&(De=le[$e-ft]),Je=de[$e*2],R.opt_len+=Je*(ge+De),Ee&&(R.static_len+=Je*(be[$e*2+1]+De)));if(It!==0){do{for(ge=vt-1;R.bl_count[ge]===0;)ge--;R.bl_count[ge]--,R.bl_count[ge+1]+=2,R.bl_count[vt]--,It-=2}while(It>0);for(ge=vt;ge!==0;ge--)for($e=R.bl_count[ge];$e!==0;)st=R.heap[--D],!(st>Ie)&&(de[st*2+1]!==ge&&(R.opt_len+=(ge-de[st*2+1])*de[st*2],de[st*2+1]=ge),$e--)}}function He(R,q,de){var Ie=new Array(x+1),be=0,Ee,le;for(Ee=1;Ee<=x;Ee++)Ie[Ee]=be=be+de[Ee-1]<<1;for(le=0;le<=q;le++){var ft=R[le*2+1];ft!==0&&(R[le*2]=Oe(Ie[ft]++,ft))}}function Te(){var R,q,de,Ie,be,Ee=new Array(x+1);for(de=0,Ie=0;Ie<h-1;Ie++)for(re[Ie]=de,R=0;R<1<<N[Ie];R++)ae[de++]=Ie;for(ae[de-1]=Ie,be=0,Ie=0;Ie<16;Ie++)for(Y[Ie]=be,R=0;R<1<<z[Ie];R++)te[be++]=Ie;for(be>>=7;Ie<v;Ie++)for(Y[Ie]=be<<7,R=0;R<1<<z[Ie]-7;R++)te[256+be++]=Ie;for(q=0;q<=x;q++)Ee[q]=0;for(R=0;R<=143;)Z[R*2+1]=8,R++,Ee[8]++;for(;R<=255;)Z[R*2+1]=9,R++,Ee[9]++;for(;R<=279;)Z[R*2+1]=7,R++,Ee[7]++;for(;R<=287;)Z[R*2+1]=8,R++,Ee[8]++;for(He(Z,g+1,Ee),R=0;R<v;R++)V[R*2+1]=5,V[R*2]=Oe(R,5);G=new ne(Z,N,m+1,g,x),X=new ne(V,z,0,v,x),oe=new ne(new Array(0),H,0,w,E)}function Ce(R){var q;for(q=0;q<g;q++)R.dyn_ltree[q*2]=0;for(q=0;q<v;q++)R.dyn_dtree[q*2]=0;for(q=0;q<w;q++)R.bl_tree[q*2]=0;R.dyn_ltree[C*2]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function B(R){R.bi_valid>8?fe(R,R.bi_buf):R.bi_valid>0&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function ke(R,q,de,Ie){B(R),fe(R,de),fe(R,~de),e.arraySet(R.pending_buf,R.window,q,de,R.pending),R.pending+=de}function Ae(R,q,de,Ie){var be=q*2,Ee=de*2;return R[be]<R[Ee]||R[be]===R[Ee]&&Ie[q]<=Ie[de]}function ce(R,q,de){for(var Ie=R.heap[de],be=de<<1;be<=R.heap_len&&(be<R.heap_len&&Ae(q,R.heap[be+1],R.heap[be],R.depth)&&be++,!Ae(q,Ie,R.heap[be],R.depth));)R.heap[de]=R.heap[be],de=be,be<<=1;R.heap[de]=Ie}function se(R,q,de){var Ie,be,Ee=0,le,ft;if(R.last_lit!==0)do Ie=R.pending_buf[R.d_buf+Ee*2]<<8|R.pending_buf[R.d_buf+Ee*2+1],be=R.pending_buf[R.l_buf+Ee],Ee++,Ie===0?Fe(R,be,q):(le=ae[be],Fe(R,le+m+1,q),ft=N[le],ft!==0&&(be-=re[le],Me(R,be,ft)),Ie--,le=we(Ie),Fe(R,le,de),ft=z[le],ft!==0&&(Ie-=Y[le],Me(R,Ie,ft)));while(Ee<R.last_lit);Fe(R,C,q)}function J(R,q){var de=q.dyn_tree,Ie=q.stat_desc.static_tree,be=q.stat_desc.has_stree,Ee=q.stat_desc.elems,le,ft,vt=-1,D;for(R.heap_len=0,R.heap_max=_,le=0;le<Ee;le++)de[le*2]!==0?(R.heap[++R.heap_len]=vt=le,R.depth[le]=0):de[le*2+1]=0;for(;R.heap_len<2;)D=R.heap[++R.heap_len]=vt<2?++vt:0,de[D*2]=1,R.depth[D]=0,R.opt_len--,be&&(R.static_len-=Ie[D*2+1]);for(q.max_code=vt,le=R.heap_len>>1;le>=1;le--)ce(R,de,le);D=Ee;do le=R.heap[1],R.heap[1]=R.heap[R.heap_len--],ce(R,de,1),ft=R.heap[1],R.heap[--R.heap_max]=le,R.heap[--R.heap_max]=ft,de[D*2]=de[le*2]+de[ft*2],R.depth[D]=(R.depth[le]>=R.depth[ft]?R.depth[le]:R.depth[ft])+1,de[le*2+1]=de[ft*2+1]=D,R.heap[1]=D++,ce(R,de,1);while(R.heap_len>=2);R.heap[--R.heap_max]=R.heap[1],ze(R,q),He(de,vt,R.bl_count)}function xe(R,q,de){var Ie,be=-1,Ee,le=q[0*2+1],ft=0,vt=7,D=4;for(le===0&&(vt=138,D=3),q[(de+1)*2+1]=65535,Ie=0;Ie<=de;Ie++)Ee=le,le=q[(Ie+1)*2+1],!(++ft<vt&&Ee===le)&&(ft<D?R.bl_tree[Ee*2]+=ft:Ee!==0?(Ee!==be&&R.bl_tree[Ee*2]++,R.bl_tree[A*2]++):ft<=10?R.bl_tree[j*2]++:R.bl_tree[O*2]++,ft=0,be=Ee,le===0?(vt=138,D=3):Ee===le?(vt=6,D=3):(vt=7,D=4))}function Pe(R,q,de){var Ie,be=-1,Ee,le=q[0*2+1],ft=0,vt=7,D=4;for(le===0&&(vt=138,D=3),Ie=0;Ie<=de;Ie++)if(Ee=le,le=q[(Ie+1)*2+1],!(++ft<vt&&Ee===le)){if(ft<D)do Fe(R,Ee,R.bl_tree);while(--ft!==0);else Ee!==0?(Ee!==be&&(Fe(R,Ee,R.bl_tree),ft--),Fe(R,A,R.bl_tree),Me(R,ft-3,2)):ft<=10?(Fe(R,j,R.bl_tree),Me(R,ft-3,3)):(Fe(R,O,R.bl_tree),Me(R,ft-11,7));ft=0,be=Ee,le===0?(vt=138,D=3):Ee===le?(vt=6,D=3):(vt=7,D=4)}}function Se(R){var q;for(xe(R,R.dyn_ltree,R.l_desc.max_code),xe(R,R.dyn_dtree,R.d_desc.max_code),J(R,R.bl_desc),q=w-1;q>=3&&R.bl_tree[Q[q]*2+1]===0;q--);return R.opt_len+=3*(q+1)+5+5+4,q}function Ze(R,q,de,Ie){var be;for(Me(R,q-257,5),Me(R,de-1,5),Me(R,Ie-4,4),be=0;be<Ie;be++)Me(R,R.bl_tree[Q[be]*2+1],3);Pe(R,R.dyn_ltree,q-1),Pe(R,R.dyn_dtree,de-1)}function Et(R){var q=4093624447,de;for(de=0;de<=31;de++,q>>>=1)if(q&1&&R.dyn_ltree[de*2]!==0)return n;if(R.dyn_ltree[9*2]!==0||R.dyn_ltree[10*2]!==0||R.dyn_ltree[13*2]!==0)return r;for(de=32;de<m;de++)if(R.dyn_ltree[de*2]!==0)return r;return n}var at=!1;function _t(R){at||(Te(),at=!0),R.l_desc=new ye(R.dyn_ltree,G),R.d_desc=new ye(R.dyn_dtree,X),R.bl_desc=new ye(R.bl_tree,oe),R.bi_buf=0,R.bi_valid=0,Ce(R)}function Nt(R,q,de,Ie){Me(R,(o<<1)+(Ie?1:0),3),ke(R,q,de)}function Rt(R){Me(R,s<<1,3),Fe(R,C,Z),Re(R)}function Kt(R,q,de,Ie){var be,Ee,le=0;R.level>0?(R.strm.data_type===a&&(R.strm.data_type=Et(R)),J(R,R.l_desc),J(R,R.d_desc),le=Se(R),be=R.opt_len+3+7>>>3,Ee=R.static_len+3+7>>>3,Ee<=be&&(be=Ee)):be=Ee=de+5,de+4<=be&&q!==-1?Nt(R,q,de,Ie):R.strategy===t||Ee===be?(Me(R,(s<<1)+(Ie?1:0),3),se(R,Z,V)):(Me(R,(u<<1)+(Ie?1:0),3),Ze(R,R.l_desc.max_code+1,R.d_desc.max_code+1,le+1),se(R,R.dyn_ltree,R.dyn_dtree)),Ce(R),Ie&&B(R)}function pe(R,q,de){return R.pending_buf[R.d_buf+R.last_lit*2]=q>>>8&255,R.pending_buf[R.d_buf+R.last_lit*2+1]=q&255,R.pending_buf[R.l_buf+R.last_lit]=de&255,R.last_lit++,q===0?R.dyn_ltree[de*2]++:(R.matches++,q--,R.dyn_ltree[(ae[de]+m+1)*2]++,R.dyn_dtree[we(q)*2]++),R.last_lit===R.lit_bufsize-1}return Pc._tr_init=_t,Pc._tr_stored_block=Nt,Pc._tr_flush_block=Kt,Pc._tr_tally=pe,Pc._tr_align=Rt,Pc}var zx,XN;function F8(){if(XN)return zx;XN=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return zx=e,zx}var Ux,JN;function L8(){if(JN)return Ux;JN=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,u=o+i;r^=-1;for(var c=o;c<u;c++)r=r>>>8^s[(r^a[c])&255];return r^-1}return Ux=n,Ux}var qx,QN;function vk(){return QN||(QN=1,qx={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),qx}var eI;function rQ(){if(eI)return Ao;eI=1;var e=ac(),t=nQ(),n=F8(),r=L8(),a=vk(),i=0,o=1,s=3,u=4,c=5,f=0,h=1,m=-2,g=-3,v=-5,w=-1,_=1,x=2,S=3,E=4,C=0,A=2,j=8,O=9,N=15,z=8,H=29,Q=256,P=Q+1+H,Z=30,V=19,te=2*P+1,ae=15,re=3,Y=258,ne=Y+re+1,G=32,X=42,oe=69,ye=73,we=91,fe=103,Me=113,Fe=666,Oe=1,Re=2,ze=3,He=4,Te=3;function Ce(D,$e){return D.msg=a[$e],$e}function B(D){return(D<<1)-(D>4?9:0)}function ke(D){for(var $e=D.length;--$e>=0;)D[$e]=0}function Ae(D){var $e=D.state,st=$e.pending;st>D.avail_out&&(st=D.avail_out),st!==0&&(e.arraySet(D.output,$e.pending_buf,$e.pending_out,st,D.next_out),D.next_out+=st,$e.pending_out+=st,D.total_out+=st,D.avail_out-=st,$e.pending-=st,$e.pending===0&&($e.pending_out=0))}function ce(D,$e){t._tr_flush_block(D,D.block_start>=0?D.block_start:-1,D.strstart-D.block_start,$e),D.block_start=D.strstart,Ae(D.strm)}function se(D,$e){D.pending_buf[D.pending++]=$e}function J(D,$e){D.pending_buf[D.pending++]=$e>>>8&255,D.pending_buf[D.pending++]=$e&255}function xe(D,$e,st,ge){var De=D.avail_in;return De>ge&&(De=ge),De===0?0:(D.avail_in-=De,e.arraySet($e,D.input,D.next_in,De,st),D.state.wrap===1?D.adler=n(D.adler,$e,De,st):D.state.wrap===2&&(D.adler=r(D.adler,$e,De,st)),D.next_in+=De,D.total_in+=De,De)}function Pe(D,$e){var st=D.max_chain_length,ge=D.strstart,De,Je,It=D.prev_length,me=D.nice_match,U=D.strstart>D.w_size-ne?D.strstart-(D.w_size-ne):0,$=D.window,W=D.w_mask,he=D.prev,Ne=D.strstart+Y,Ve=$[ge+It-1],gt=$[ge+It];D.prev_length>=D.good_match&&(st>>=2),me>D.lookahead&&(me=D.lookahead);do if(De=$e,!($[De+It]!==gt||$[De+It-1]!==Ve||$[De]!==$[ge]||$[++De]!==$[ge+1])){ge+=2,De++;do;while($[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&ge<Ne);if(Je=Y-(Ne-ge),ge=Ne-Y,Je>It){if(D.match_start=$e,It=Je,Je>=me)break;Ve=$[ge+It-1],gt=$[ge+It]}}while(($e=he[$e&W])>U&&--st!==0);return It<=D.lookahead?It:D.lookahead}function Se(D){var $e=D.w_size,st,ge,De,Je,It;do{if(Je=D.window_size-D.lookahead-D.strstart,D.strstart>=$e+($e-ne)){e.arraySet(D.window,D.window,$e,$e,0),D.match_start-=$e,D.strstart-=$e,D.block_start-=$e,ge=D.hash_size,st=ge;do De=D.head[--st],D.head[st]=De>=$e?De-$e:0;while(--ge);ge=$e,st=ge;do De=D.prev[--st],D.prev[st]=De>=$e?De-$e:0;while(--ge);Je+=$e}if(D.strm.avail_in===0)break;if(ge=xe(D.strm,D.window,D.strstart+D.lookahead,Je),D.lookahead+=ge,D.lookahead+D.insert>=re)for(It=D.strstart-D.insert,D.ins_h=D.window[It],D.ins_h=(D.ins_h<<D.hash_shift^D.window[It+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[It+re-1])&D.hash_mask,D.prev[It&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=It,It++,D.insert--,!(D.lookahead+D.insert<re)););}while(D.lookahead<ne&&D.strm.avail_in!==0)}function Ze(D,$e){var st=65535;for(st>D.pending_buf_size-5&&(st=D.pending_buf_size-5);;){if(D.lookahead<=1){if(Se(D),D.lookahead===0&&$e===i)return Oe;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var ge=D.block_start+st;if((D.strstart===0||D.strstart>=ge)&&(D.lookahead=D.strstart-ge,D.strstart=ge,ce(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-ne&&(ce(D,!1),D.strm.avail_out===0))return Oe}return D.insert=0,$e===u?(ce(D,!0),D.strm.avail_out===0?ze:He):(D.strstart>D.block_start&&(ce(D,!1),D.strm.avail_out===0),Oe)}function Et(D,$e){for(var st,ge;;){if(D.lookahead<ne){if(Se(D),D.lookahead<ne&&$e===i)return Oe;if(D.lookahead===0)break}if(st=0,D.lookahead>=re&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+re-1])&D.hash_mask,st=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),st!==0&&D.strstart-st<=D.w_size-ne&&(D.match_length=Pe(D,st)),D.match_length>=re)if(ge=t._tr_tally(D,D.strstart-D.match_start,D.match_length-re),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=re){D.match_length--;do D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+re-1])&D.hash_mask,st=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart;while(--D.match_length!==0);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else ge=t._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(ge&&(ce(D,!1),D.strm.avail_out===0))return Oe}return D.insert=D.strstart<re-1?D.strstart:re-1,$e===u?(ce(D,!0),D.strm.avail_out===0?ze:He):D.last_lit&&(ce(D,!1),D.strm.avail_out===0)?Oe:Re}function at(D,$e){for(var st,ge,De;;){if(D.lookahead<ne){if(Se(D),D.lookahead<ne&&$e===i)return Oe;if(D.lookahead===0)break}if(st=0,D.lookahead>=re&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+re-1])&D.hash_mask,st=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=re-1,st!==0&&D.prev_length<D.max_lazy_match&&D.strstart-st<=D.w_size-ne&&(D.match_length=Pe(D,st),D.match_length<=5&&(D.strategy===_||D.match_length===re&&D.strstart-D.match_start>4096)&&(D.match_length=re-1)),D.prev_length>=re&&D.match_length<=D.prev_length){De=D.strstart+D.lookahead-re,ge=t._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-re),D.lookahead-=D.prev_length-1,D.prev_length-=2;do++D.strstart<=De&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+re-1])&D.hash_mask,st=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart);while(--D.prev_length!==0);if(D.match_available=0,D.match_length=re-1,D.strstart++,ge&&(ce(D,!1),D.strm.avail_out===0))return Oe}else if(D.match_available){if(ge=t._tr_tally(D,0,D.window[D.strstart-1]),ge&&ce(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return Oe}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(ge=t._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<re-1?D.strstart:re-1,$e===u?(ce(D,!0),D.strm.avail_out===0?ze:He):D.last_lit&&(ce(D,!1),D.strm.avail_out===0)?Oe:Re}function _t(D,$e){for(var st,ge,De,Je,It=D.window;;){if(D.lookahead<=Y){if(Se(D),D.lookahead<=Y&&$e===i)return Oe;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=re&&D.strstart>0&&(De=D.strstart-1,ge=It[De],ge===It[++De]&&ge===It[++De]&&ge===It[++De])){Je=D.strstart+Y;do;while(ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&De<Je);D.match_length=Y-(Je-De),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=re?(st=t._tr_tally(D,1,D.match_length-re),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(st=t._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),st&&(ce(D,!1),D.strm.avail_out===0))return Oe}return D.insert=0,$e===u?(ce(D,!0),D.strm.avail_out===0?ze:He):D.last_lit&&(ce(D,!1),D.strm.avail_out===0)?Oe:Re}function Nt(D,$e){for(var st;;){if(D.lookahead===0&&(Se(D),D.lookahead===0)){if($e===i)return Oe;break}if(D.match_length=0,st=t._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,st&&(ce(D,!1),D.strm.avail_out===0))return Oe}return D.insert=0,$e===u?(ce(D,!0),D.strm.avail_out===0?ze:He):D.last_lit&&(ce(D,!1),D.strm.avail_out===0)?Oe:Re}function Rt(D,$e,st,ge,De){this.good_length=D,this.max_lazy=$e,this.nice_length=st,this.max_chain=ge,this.func=De}var Kt;Kt=[new Rt(0,0,0,0,Ze),new Rt(4,4,8,4,Et),new Rt(4,5,16,8,Et),new Rt(4,6,32,32,Et),new Rt(4,4,16,16,at),new Rt(8,16,32,32,at),new Rt(8,16,128,128,at),new Rt(8,32,128,256,at),new Rt(32,128,258,1024,at),new Rt(32,258,258,4096,at)];function pe(D){D.window_size=2*D.w_size,ke(D.head),D.max_lazy_match=Kt[D.level].max_lazy,D.good_match=Kt[D.level].good_length,D.nice_match=Kt[D.level].nice_length,D.max_chain_length=Kt[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=re-1,D.match_available=0,D.ins_h=0}function R(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=j,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(te*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*V+1)*2),ke(this.dyn_ltree),ke(this.dyn_dtree),ke(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*P+1),ke(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*P+1),ke(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(D){var $e;return!D||!D.state?Ce(D,m):(D.total_in=D.total_out=0,D.data_type=A,$e=D.state,$e.pending=0,$e.pending_out=0,$e.wrap<0&&($e.wrap=-$e.wrap),$e.status=$e.wrap?X:Me,D.adler=$e.wrap===2?0:1,$e.last_flush=i,t._tr_init($e),f)}function de(D){var $e=q(D);return $e===f&&pe(D.state),$e}function Ie(D,$e){return!D||!D.state||D.state.wrap!==2?m:(D.state.gzhead=$e,f)}function be(D,$e,st,ge,De,Je){if(!D)return m;var It=1;if($e===w&&($e=6),ge<0?(It=0,ge=-ge):ge>15&&(It=2,ge-=16),De<1||De>O||st!==j||ge<8||ge>15||$e<0||$e>9||Je<0||Je>E)return Ce(D,m);ge===8&&(ge=9);var me=new R;return D.state=me,me.strm=D,me.wrap=It,me.gzhead=null,me.w_bits=ge,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=De+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+re-1)/re),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<De+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=$e,me.strategy=Je,me.method=st,de(D)}function Ee(D,$e){return be(D,$e,j,N,z,C)}function le(D,$e){var st,ge,De,Je;if(!D||!D.state||$e>c||$e<0)return D?Ce(D,m):m;if(ge=D.state,!D.output||!D.input&&D.avail_in!==0||ge.status===Fe&&$e!==u)return Ce(D,D.avail_out===0?v:m);if(ge.strm=D,st=ge.last_flush,ge.last_flush=$e,ge.status===X)if(ge.wrap===2)D.adler=0,se(ge,31),se(ge,139),se(ge,8),ge.gzhead?(se(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),se(ge,ge.gzhead.time&255),se(ge,ge.gzhead.time>>8&255),se(ge,ge.gzhead.time>>16&255),se(ge,ge.gzhead.time>>24&255),se(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),se(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(se(ge,ge.gzhead.extra.length&255),se(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(D.adler=r(D.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=oe):(se(ge,0),se(ge,0),se(ge,0),se(ge,0),se(ge,0),se(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),se(ge,Te),ge.status=Me);else{var It=j+(ge.w_bits-8<<4)<<8,me=-1;ge.strategy>=x||ge.level<2?me=0:ge.level<6?me=1:ge.level===6?me=2:me=3,It|=me<<6,ge.strstart!==0&&(It|=G),It+=31-It%31,ge.status=Me,J(ge,It),ge.strstart!==0&&(J(ge,D.adler>>>16),J(ge,D.adler&65535)),D.adler=1}if(ge.status===oe)if(ge.gzhead.extra){for(De=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-De,De)),Ae(D),De=ge.pending,ge.pending===ge.pending_buf_size));)se(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>De&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-De,De)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=ye)}else ge.status=ye;if(ge.status===ye)if(ge.gzhead.name){De=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-De,De)),Ae(D),De=ge.pending,ge.pending===ge.pending_buf_size)){Je=1;break}ge.gzindex<ge.gzhead.name.length?Je=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Je=0,se(ge,Je)}while(Je!==0);ge.gzhead.hcrc&&ge.pending>De&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-De,De)),Je===0&&(ge.gzindex=0,ge.status=we)}else ge.status=we;if(ge.status===we)if(ge.gzhead.comment){De=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-De,De)),Ae(D),De=ge.pending,ge.pending===ge.pending_buf_size)){Je=1;break}ge.gzindex<ge.gzhead.comment.length?Je=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Je=0,se(ge,Je)}while(Je!==0);ge.gzhead.hcrc&&ge.pending>De&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-De,De)),Je===0&&(ge.status=fe)}else ge.status=fe;if(ge.status===fe&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Ae(D),ge.pending+2<=ge.pending_buf_size&&(se(ge,D.adler&255),se(ge,D.adler>>8&255),D.adler=0,ge.status=Me)):ge.status=Me),ge.pending!==0){if(Ae(D),D.avail_out===0)return ge.last_flush=-1,f}else if(D.avail_in===0&&B($e)<=B(st)&&$e!==u)return Ce(D,v);if(ge.status===Fe&&D.avail_in!==0)return Ce(D,v);if(D.avail_in!==0||ge.lookahead!==0||$e!==i&&ge.status!==Fe){var U=ge.strategy===x?Nt(ge,$e):ge.strategy===S?_t(ge,$e):Kt[ge.level].func(ge,$e);if((U===ze||U===He)&&(ge.status=Fe),U===Oe||U===ze)return D.avail_out===0&&(ge.last_flush=-1),f;if(U===Re&&($e===o?t._tr_align(ge):$e!==c&&(t._tr_stored_block(ge,0,0,!1),$e===s&&(ke(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Ae(D),D.avail_out===0))return ge.last_flush=-1,f}return $e!==u?f:ge.wrap<=0?h:(ge.wrap===2?(se(ge,D.adler&255),se(ge,D.adler>>8&255),se(ge,D.adler>>16&255),se(ge,D.adler>>24&255),se(ge,D.total_in&255),se(ge,D.total_in>>8&255),se(ge,D.total_in>>16&255),se(ge,D.total_in>>24&255)):(J(ge,D.adler>>>16),J(ge,D.adler&65535)),Ae(D),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?f:h)}function ft(D){var $e;return!D||!D.state?m:($e=D.state.status,$e!==X&&$e!==oe&&$e!==ye&&$e!==we&&$e!==fe&&$e!==Me&&$e!==Fe?Ce(D,m):(D.state=null,$e===Me?Ce(D,g):f))}function vt(D,$e){var st=$e.length,ge,De,Je,It,me,U,$,W;if(!D||!D.state||(ge=D.state,It=ge.wrap,It===2||It===1&&ge.status!==X||ge.lookahead))return m;for(It===1&&(D.adler=n(D.adler,$e,st,0)),ge.wrap=0,st>=ge.w_size&&(It===0&&(ke(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),W=new e.Buf8(ge.w_size),e.arraySet(W,$e,st-ge.w_size,ge.w_size,0),$e=W,st=ge.w_size),me=D.avail_in,U=D.next_in,$=D.input,D.avail_in=st,D.next_in=0,D.input=$e,Se(ge);ge.lookahead>=re;){De=ge.strstart,Je=ge.lookahead-(re-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[De+re-1])&ge.hash_mask,ge.prev[De&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=De,De++;while(--Je);ge.strstart=De,ge.lookahead=re-1,Se(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=re-1,ge.match_available=0,D.next_in=U,D.input=$,D.avail_in=me,ge.wrap=It,f}return Ao.deflateInit=Ee,Ao.deflateInit2=be,Ao.deflateReset=de,Ao.deflateResetKeep=q,Ao.deflateSetHeader=Ie,Ao.deflate=le,Ao.deflateEnd=ft,Ao.deflateSetDictionary=vt,Ao.deflateInfo="pako deflate (from Nodeca project)",Ao}var Fc={},tI;function $8(){if(tI)return Fc;tI=1;var e=ac(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Fc.string2buf=function(o){var s,u,c,f,h,m=o.length,g=0;for(f=0;f<m;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(s=new e.Buf8(g),h=0,f=0;h<g;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?s[h++]=u:u<2048?(s[h++]=192|u>>>6,s[h++]=128|u&63):u<65536?(s[h++]=224|u>>>12,s[h++]=128|u>>>6&63,s[h++]=128|u&63):(s[h++]=240|u>>>18,s[h++]=128|u>>>12&63,s[h++]=128|u>>>6&63,s[h++]=128|u&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var u="",c=0;c<s;c++)u+=String.fromCharCode(o[c]);return u}return Fc.buf2binstring=function(o){return i(o,o.length)},Fc.binstring2buf=function(o){for(var s=new e.Buf8(o.length),u=0,c=s.length;u<c;u++)s[u]=o.charCodeAt(u);return s},Fc.buf2string=function(o,s){var u,c,f,h,m=s||o.length,g=new Array(m*2);for(c=0,u=0;u<m;){if(f=o[u++],f<128){g[c++]=f;continue}if(h=r[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<m;)f=f<<6|o[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return i(g,c)},Fc.utf8border=function(o,s){var u;for(s=s||o.length,s>o.length&&(s=o.length),u=s-1;u>=0&&(o[u]&192)===128;)u--;return u<0||u===0?s:u+r[o[u]]>s?u:s},Fc}var Hx,nI;function B8(){if(nI)return Hx;nI=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return Hx=e,Hx}var rI;function aQ(){if(rI)return yf;rI=1;var e=rQ(),t=ac(),n=$8(),r=vk(),a=B8(),i=Object.prototype.toString,o=0,s=4,u=0,c=1,f=2,h=-1,m=0,g=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==u)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var A;if(typeof E.dictionary=="string"?A=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?A=new Uint8Array(E.dictionary):A=E.dictionary,C=e.deflateSetDictionary(this.strm,A),C!==u)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,A=this.options.chunkSize,j,O;if(this.ended)return!1;O=E===~~E?E:E===!0?s:o,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(A),C.next_out=0,C.avail_out=A),j=e.deflate(C,O),j!==c&&j!==u)return this.onEnd(j),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(O===s||O===f))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&j!==c);return O===s?(j=e.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===u):(O===f&&(this.onEnd(u),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function w(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function _(S,E){return E=E||{},E.raw=!0,w(S,E)}function x(S,E){return E=E||{},E.gzip=!0,w(S,E)}return yf.Deflate=v,yf.deflate=w,yf.deflateRaw=_,yf.gzip=x,yf}var bf={},uo={},Vx,aI;function iQ(){if(aI)return Vx;aI=1;var e=30,t=12;return Vx=function(r,a){var i,o,s,u,c,f,h,m,g,v,w,_,x,S,E,C,A,j,O,N,z,H,Q,P,Z;i=r.state,o=r.next_in,P=r.input,s=o+(r.avail_in-5),u=r.next_out,Z=r.output,c=u-(a-r.avail_out),f=u+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,v=i.wnext,w=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,A=(1<<i.distbits)-1;e:do{x<15&&(_+=P[o++]<<x,x+=8,_+=P[o++]<<x,x+=8),j=S[_&C];t:for(;;){if(O=j>>>24,_>>>=O,x-=O,O=j>>>16&255,O===0)Z[u++]=j&65535;else if(O&16){N=j&65535,O&=15,O&&(x<O&&(_+=P[o++]<<x,x+=8),N+=_&(1<<O)-1,_>>>=O,x-=O),x<15&&(_+=P[o++]<<x,x+=8,_+=P[o++]<<x,x+=8),j=E[_&A];n:for(;;){if(O=j>>>24,_>>>=O,x-=O,O=j>>>16&255,O&16){if(z=j&65535,O&=15,x<O&&(_+=P[o++]<<x,x+=8,x<O&&(_+=P[o++]<<x,x+=8)),z+=_&(1<<O)-1,z>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=O,x-=O,O=u-c,z>O){if(O=z-O,O>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(H=0,Q=w,v===0){if(H+=m-O,O<N){N-=O;do Z[u++]=w[H++];while(--O);H=u-z,Q=Z}}else if(v<O){if(H+=m+v-O,O-=v,O<N){N-=O;do Z[u++]=w[H++];while(--O);if(H=0,v<N){O=v,N-=O;do Z[u++]=w[H++];while(--O);H=u-z,Q=Z}}}else if(H+=v-O,O<N){N-=O;do Z[u++]=w[H++];while(--O);H=u-z,Q=Z}for(;N>2;)Z[u++]=Q[H++],Z[u++]=Q[H++],Z[u++]=Q[H++],N-=3;N&&(Z[u++]=Q[H++],N>1&&(Z[u++]=Q[H++]))}else{H=u-z;do Z[u++]=Z[H++],Z[u++]=Z[H++],Z[u++]=Z[H++],N-=3;while(N>2);N&&(Z[u++]=Z[H++],N>1&&(Z[u++]=Z[H++]))}}else if((O&64)===0){j=E[(j&65535)+(_&(1<<O)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((O&64)===0){j=S[(j&65535)+(_&(1<<O)-1)];continue t}else if(O&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&u<f);N=x>>3,o-=N,x-=N<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=u,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=u<f?257+(f-u):257-(u-f),i.hold=_,i.bits=x},Vx}var Gx,iI;function oQ(){if(iI)return Gx;iI=1;var e=ac(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return Gx=function(m,g,v,w,_,x,S,E){var C=E.bits,A=0,j=0,O=0,N=0,z=0,H=0,Q=0,P=0,Z=0,V=0,te,ae,re,Y,ne,G=null,X=0,oe,ye=new e.Buf16(t+1),we=new e.Buf16(t+1),fe=null,Me=0,Fe,Oe,Re;for(A=0;A<=t;A++)ye[A]=0;for(j=0;j<w;j++)ye[g[v+j]]++;for(z=C,N=t;N>=1&&ye[N]===0;N--);if(z>N&&(z=N),N===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(O=1;O<N&&ye[O]===0;O++);for(z<O&&(z=O),P=1,A=1;A<=t;A++)if(P<<=1,P-=ye[A],P<0)return-1;if(P>0&&(m===a||N!==1))return-1;for(we[1]=0,A=1;A<t;A++)we[A+1]=we[A]+ye[A];for(j=0;j<w;j++)g[v+j]!==0&&(S[we[g[v+j]]++]=j);if(m===a?(G=fe=S,oe=19):m===i?(G=s,X-=257,fe=u,Me-=257,oe=256):(G=c,fe=f,oe=-1),V=0,j=0,A=O,ne=x,H=z,Q=0,re=-1,Z=1<<z,Y=Z-1,m===i&&Z>n||m===o&&Z>r)return 1;for(;;){Fe=A-Q,S[j]<oe?(Oe=0,Re=S[j]):S[j]>oe?(Oe=fe[Me+S[j]],Re=G[X+S[j]]):(Oe=96,Re=0),te=1<<A-Q,ae=1<<H,O=ae;do ae-=te,_[ne+(V>>Q)+ae]=Fe<<24|Oe<<16|Re|0;while(ae!==0);for(te=1<<A-1;V&te;)te>>=1;if(te!==0?(V&=te-1,V+=te):V=0,j++,--ye[A]===0){if(A===N)break;A=g[v+S[j]]}if(A>z&&(V&Y)!==re){for(Q===0&&(Q=z),ne+=O,H=A-Q,P=1<<H;H+Q<N&&(P-=ye[H+Q],!(P<=0));)H++,P<<=1;if(Z+=1<<H,m===i&&Z>n||m===o&&Z>r)return 1;re=V&Y,_[re]=z<<24|H<<16|ne-x|0}}return V!==0&&(_[ne+V]=A-Q<<24|64<<16|0),E.bits=z,0},Gx}var oI;function sQ(){if(oI)return uo;oI=1;var e=ac(),t=F8(),n=L8(),r=iQ(),a=oQ(),i=0,o=1,s=2,u=4,c=5,f=6,h=0,m=1,g=2,v=-2,w=-3,_=-4,x=-5,S=8,E=1,C=2,A=3,j=4,O=5,N=6,z=7,H=8,Q=9,P=10,Z=11,V=12,te=13,ae=14,re=15,Y=16,ne=17,G=18,X=19,oe=20,ye=21,we=22,fe=23,Me=24,Fe=25,Oe=26,Re=27,ze=28,He=29,Te=30,Ce=31,B=32,ke=852,Ae=592,ce=15,se=ce;function J(be){return(be>>>24&255)+(be>>>8&65280)+((be&65280)<<8)+((be&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Pe(be){var Ee;return!be||!be.state?v:(Ee=be.state,be.total_in=be.total_out=Ee.total=0,be.msg="",Ee.wrap&&(be.adler=Ee.wrap&1),Ee.mode=E,Ee.last=0,Ee.havedict=0,Ee.dmax=32768,Ee.head=null,Ee.hold=0,Ee.bits=0,Ee.lencode=Ee.lendyn=new e.Buf32(ke),Ee.distcode=Ee.distdyn=new e.Buf32(Ae),Ee.sane=1,Ee.back=-1,h)}function Se(be){var Ee;return!be||!be.state?v:(Ee=be.state,Ee.wsize=0,Ee.whave=0,Ee.wnext=0,Pe(be))}function Ze(be,Ee){var le,ft;return!be||!be.state||(ft=be.state,Ee<0?(le=0,Ee=-Ee):(le=(Ee>>4)+1,Ee<48&&(Ee&=15)),Ee&&(Ee<8||Ee>15))?v:(ft.window!==null&&ft.wbits!==Ee&&(ft.window=null),ft.wrap=le,ft.wbits=Ee,Se(be))}function Et(be,Ee){var le,ft;return be?(ft=new xe,be.state=ft,ft.window=null,le=Ze(be,Ee),le!==h&&(be.state=null),le):v}function at(be){return Et(be,se)}var _t=!0,Nt,Rt;function Kt(be){if(_t){var Ee;for(Nt=new e.Buf32(512),Rt=new e.Buf32(32),Ee=0;Ee<144;)be.lens[Ee++]=8;for(;Ee<256;)be.lens[Ee++]=9;for(;Ee<280;)be.lens[Ee++]=7;for(;Ee<288;)be.lens[Ee++]=8;for(a(o,be.lens,0,288,Nt,0,be.work,{bits:9}),Ee=0;Ee<32;)be.lens[Ee++]=5;a(s,be.lens,0,32,Rt,0,be.work,{bits:5}),_t=!1}be.lencode=Nt,be.lenbits=9,be.distcode=Rt,be.distbits=5}function pe(be,Ee,le,ft){var vt,D=be.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new e.Buf8(D.wsize)),ft>=D.wsize?(e.arraySet(D.window,Ee,le-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(vt=D.wsize-D.wnext,vt>ft&&(vt=ft),e.arraySet(D.window,Ee,le-ft,vt,D.wnext),ft-=vt,ft?(e.arraySet(D.window,Ee,le-ft,ft,0),D.wnext=ft,D.whave=D.wsize):(D.wnext+=vt,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=vt))),0}function R(be,Ee){var le,ft,vt,D,$e,st,ge,De,Je,It,me,U,$,W,he=0,Ne,Ve,gt,Gt,ht,Ct,Ot,Zt,En=new e.Buf8(4),zn,fr,hr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!be||!be.state||!be.output||!be.input&&be.avail_in!==0)return v;le=be.state,le.mode===V&&(le.mode=te),$e=be.next_out,vt=be.output,ge=be.avail_out,D=be.next_in,ft=be.input,st=be.avail_in,De=le.hold,Je=le.bits,It=st,me=ge,Zt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=te;break}for(;Je<16;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if(le.wrap&2&&De===35615){le.check=0,En[0]=De&255,En[1]=De>>>8&255,le.check=n(le.check,En,2,0),De=0,Je=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((De&255)<<8)+(De>>8))%31){be.msg="incorrect header check",le.mode=Te;break}if((De&15)!==S){be.msg="unknown compression method",le.mode=Te;break}if(De>>>=4,Je-=4,Ot=(De&15)+8,le.wbits===0)le.wbits=Ot;else if(Ot>le.wbits){be.msg="invalid window size",le.mode=Te;break}le.dmax=1<<Ot,be.adler=le.check=1,le.mode=De&512?P:V,De=0,Je=0;break;case C:for(;Je<16;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if(le.flags=De,(le.flags&255)!==S){be.msg="unknown compression method",le.mode=Te;break}if(le.flags&57344){be.msg="unknown header flags set",le.mode=Te;break}le.head&&(le.head.text=De>>8&1),le.flags&512&&(En[0]=De&255,En[1]=De>>>8&255,le.check=n(le.check,En,2,0)),De=0,Je=0,le.mode=A;case A:for(;Je<32;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}le.head&&(le.head.time=De),le.flags&512&&(En[0]=De&255,En[1]=De>>>8&255,En[2]=De>>>16&255,En[3]=De>>>24&255,le.check=n(le.check,En,4,0)),De=0,Je=0,le.mode=j;case j:for(;Je<16;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}le.head&&(le.head.xflags=De&255,le.head.os=De>>8),le.flags&512&&(En[0]=De&255,En[1]=De>>>8&255,le.check=n(le.check,En,2,0)),De=0,Je=0,le.mode=O;case O:if(le.flags&1024){for(;Je<16;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}le.length=De,le.head&&(le.head.extra_len=De),le.flags&512&&(En[0]=De&255,En[1]=De>>>8&255,le.check=n(le.check,En,2,0)),De=0,Je=0}else le.head&&(le.head.extra=null);le.mode=N;case N:if(le.flags&1024&&(U=le.length,U>st&&(U=st),U&&(le.head&&(Ot=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ft,D,U,Ot)),le.flags&512&&(le.check=n(le.check,ft,U,D)),st-=U,D+=U,le.length-=U),le.length))break e;le.length=0,le.mode=z;case z:if(le.flags&2048){if(st===0)break e;U=0;do Ot=ft[D+U++],le.head&&Ot&&le.length<65536&&(le.head.name+=String.fromCharCode(Ot));while(Ot&&U<st);if(le.flags&512&&(le.check=n(le.check,ft,U,D)),st-=U,D+=U,Ot)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=H;case H:if(le.flags&4096){if(st===0)break e;U=0;do Ot=ft[D+U++],le.head&&Ot&&le.length<65536&&(le.head.comment+=String.fromCharCode(Ot));while(Ot&&U<st);if(le.flags&512&&(le.check=n(le.check,ft,U,D)),st-=U,D+=U,Ot)break e}else le.head&&(le.head.comment=null);le.mode=Q;case Q:if(le.flags&512){for(;Je<16;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if(De!==(le.check&65535)){be.msg="header crc mismatch",le.mode=Te;break}De=0,Je=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),be.adler=le.check=0,le.mode=V;break;case P:for(;Je<32;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}be.adler=le.check=J(De),De=0,Je=0,le.mode=Z;case Z:if(le.havedict===0)return be.next_out=$e,be.avail_out=ge,be.next_in=D,be.avail_in=st,le.hold=De,le.bits=Je,g;be.adler=le.check=1,le.mode=V;case V:if(Ee===c||Ee===f)break e;case te:if(le.last){De>>>=Je&7,Je-=Je&7,le.mode=Re;break}for(;Je<3;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}switch(le.last=De&1,De>>>=1,Je-=1,De&3){case 0:le.mode=ae;break;case 1:if(Kt(le),le.mode=oe,Ee===f){De>>>=2,Je-=2;break e}break;case 2:le.mode=ne;break;case 3:be.msg="invalid block type",le.mode=Te}De>>>=2,Je-=2;break;case ae:for(De>>>=Je&7,Je-=Je&7;Je<32;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if((De&65535)!==(De>>>16^65535)){be.msg="invalid stored block lengths",le.mode=Te;break}if(le.length=De&65535,De=0,Je=0,le.mode=re,Ee===f)break e;case re:le.mode=Y;case Y:if(U=le.length,U){if(U>st&&(U=st),U>ge&&(U=ge),U===0)break e;e.arraySet(vt,ft,D,U,$e),st-=U,D+=U,ge-=U,$e+=U,le.length-=U;break}le.mode=V;break;case ne:for(;Je<14;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if(le.nlen=(De&31)+257,De>>>=5,Je-=5,le.ndist=(De&31)+1,De>>>=5,Je-=5,le.ncode=(De&15)+4,De>>>=4,Je-=4,le.nlen>286||le.ndist>30){be.msg="too many length or distance symbols",le.mode=Te;break}le.have=0,le.mode=G;case G:for(;le.have<le.ncode;){for(;Je<3;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}le.lens[hr[le.have++]]=De&7,De>>>=3,Je-=3}for(;le.have<19;)le.lens[hr[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,zn={bits:le.lenbits},Zt=a(i,le.lens,0,19,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Zt){be.msg="invalid code lengths set",le.mode=Te;break}le.have=0,le.mode=X;case X:for(;le.have<le.nlen+le.ndist;){for(;he=le.lencode[De&(1<<le.lenbits)-1],Ne=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Ne<=Je);){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if(gt<16)De>>>=Ne,Je-=Ne,le.lens[le.have++]=gt;else{if(gt===16){for(fr=Ne+2;Je<fr;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if(De>>>=Ne,Je-=Ne,le.have===0){be.msg="invalid bit length repeat",le.mode=Te;break}Ot=le.lens[le.have-1],U=3+(De&3),De>>>=2,Je-=2}else if(gt===17){for(fr=Ne+3;Je<fr;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}De>>>=Ne,Je-=Ne,Ot=0,U=3+(De&7),De>>>=3,Je-=3}else{for(fr=Ne+7;Je<fr;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}De>>>=Ne,Je-=Ne,Ot=0,U=11+(De&127),De>>>=7,Je-=7}if(le.have+U>le.nlen+le.ndist){be.msg="invalid bit length repeat",le.mode=Te;break}for(;U--;)le.lens[le.have++]=Ot}}if(le.mode===Te)break;if(le.lens[256]===0){be.msg="invalid code -- missing end-of-block",le.mode=Te;break}if(le.lenbits=9,zn={bits:le.lenbits},Zt=a(o,le.lens,0,le.nlen,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Zt){be.msg="invalid literal/lengths set",le.mode=Te;break}if(le.distbits=6,le.distcode=le.distdyn,zn={bits:le.distbits},Zt=a(s,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,zn),le.distbits=zn.bits,Zt){be.msg="invalid distances set",le.mode=Te;break}if(le.mode=oe,Ee===f)break e;case oe:le.mode=ye;case ye:if(st>=6&&ge>=258){be.next_out=$e,be.avail_out=ge,be.next_in=D,be.avail_in=st,le.hold=De,le.bits=Je,r(be,me),$e=be.next_out,vt=be.output,ge=be.avail_out,D=be.next_in,ft=be.input,st=be.avail_in,De=le.hold,Je=le.bits,le.mode===V&&(le.back=-1);break}for(le.back=0;he=le.lencode[De&(1<<le.lenbits)-1],Ne=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Ne<=Je);){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if(Ve&&(Ve&240)===0){for(Gt=Ne,ht=Ve,Ct=gt;he=le.lencode[Ct+((De&(1<<Gt+ht)-1)>>Gt)],Ne=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Gt+Ne<=Je);){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}De>>>=Gt,Je-=Gt,le.back+=Gt}if(De>>>=Ne,Je-=Ne,le.back+=Ne,le.length=gt,Ve===0){le.mode=Oe;break}if(Ve&32){le.back=-1,le.mode=V;break}if(Ve&64){be.msg="invalid literal/length code",le.mode=Te;break}le.extra=Ve&15,le.mode=we;case we:if(le.extra){for(fr=le.extra;Je<fr;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}le.length+=De&(1<<le.extra)-1,De>>>=le.extra,Je-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=fe;case fe:for(;he=le.distcode[De&(1<<le.distbits)-1],Ne=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Ne<=Je);){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if((Ve&240)===0){for(Gt=Ne,ht=Ve,Ct=gt;he=le.distcode[Ct+((De&(1<<Gt+ht)-1)>>Gt)],Ne=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Gt+Ne<=Je);){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}De>>>=Gt,Je-=Gt,le.back+=Gt}if(De>>>=Ne,Je-=Ne,le.back+=Ne,Ve&64){be.msg="invalid distance code",le.mode=Te;break}le.offset=gt,le.extra=Ve&15,le.mode=Me;case Me:if(le.extra){for(fr=le.extra;Je<fr;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}le.offset+=De&(1<<le.extra)-1,De>>>=le.extra,Je-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){be.msg="invalid distance too far back",le.mode=Te;break}le.mode=Fe;case Fe:if(ge===0)break e;if(U=me-ge,le.offset>U){if(U=le.offset-U,U>le.whave&&le.sane){be.msg="invalid distance too far back",le.mode=Te;break}U>le.wnext?(U-=le.wnext,$=le.wsize-U):$=le.wnext-U,U>le.length&&(U=le.length),W=le.window}else W=vt,$=$e-le.offset,U=le.length;U>ge&&(U=ge),ge-=U,le.length-=U;do vt[$e++]=W[$++];while(--U);le.length===0&&(le.mode=ye);break;case Oe:if(ge===0)break e;vt[$e++]=le.length,ge--,le.mode=ye;break;case Re:if(le.wrap){for(;Je<32;){if(st===0)break e;st--,De|=ft[D++]<<Je,Je+=8}if(me-=ge,be.total_out+=me,le.total+=me,me&&(be.adler=le.check=le.flags?n(le.check,vt,me,$e-me):t(le.check,vt,me,$e-me)),me=ge,(le.flags?De:J(De))!==le.check){be.msg="incorrect data check",le.mode=Te;break}De=0,Je=0}le.mode=ze;case ze:if(le.wrap&&le.flags){for(;Je<32;){if(st===0)break e;st--,De+=ft[D++]<<Je,Je+=8}if(De!==(le.total&4294967295)){be.msg="incorrect length check",le.mode=Te;break}De=0,Je=0}le.mode=He;case He:Zt=m;break e;case Te:Zt=w;break e;case Ce:return _;case B:default:return v}return be.next_out=$e,be.avail_out=ge,be.next_in=D,be.avail_in=st,le.hold=De,le.bits=Je,(le.wsize||me!==be.avail_out&&le.mode<Te&&(le.mode<Re||Ee!==u))&&pe(be,be.output,be.next_out,me-be.avail_out),It-=be.avail_in,me-=be.avail_out,be.total_in+=It,be.total_out+=me,le.total+=me,le.wrap&&me&&(be.adler=le.check=le.flags?n(le.check,vt,me,be.next_out-me):t(le.check,vt,me,be.next_out-me)),be.data_type=le.bits+(le.last?64:0)+(le.mode===V?128:0)+(le.mode===oe||le.mode===re?256:0),(It===0&&me===0||Ee===u)&&Zt===h&&(Zt=x),Zt}function q(be){if(!be||!be.state)return v;var Ee=be.state;return Ee.window&&(Ee.window=null),be.state=null,h}function de(be,Ee){var le;return!be||!be.state||(le=be.state,(le.wrap&2)===0)?v:(le.head=Ee,Ee.done=!1,h)}function Ie(be,Ee){var le=Ee.length,ft,vt,D;return!be||!be.state||(ft=be.state,ft.wrap!==0&&ft.mode!==Z)?v:ft.mode===Z&&(vt=1,vt=t(vt,Ee,le,0),vt!==ft.check)?w:(D=pe(be,Ee,le,le),D?(ft.mode=Ce,_):(ft.havedict=1,h))}return uo.inflateReset=Se,uo.inflateReset2=Ze,uo.inflateResetKeep=Pe,uo.inflateInit=at,uo.inflateInit2=Et,uo.inflate=R,uo.inflateEnd=q,uo.inflateGetHeader=de,uo.inflateSetDictionary=Ie,uo.inflateInfo="pako inflate (from Nodeca project)",uo}var Wx,sI;function z8(){return sI||(sI=1,Wx={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),Wx}var Kx,lI;function lQ(){if(lI)return Kx;lI=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return Kx=e,Kx}var uI;function uQ(){if(uI)return bf;uI=1;var e=sQ(),t=ac(),n=$8(),r=z8(),a=vk(),i=B8(),o=lQ(),s=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):s.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(a[g])}u.prototype.push=function(h,m){var g=this.strm,v=this.options.chunkSize,w=this.options.dictionary,_,x,S,E,C,A=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&w&&(_=e.inflateSetDictionary(this.strm,w)),_===r.Z_BUF_ERROR&&A===!0&&(_=r.Z_OK,A=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(A=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,m){var g=new u(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function f(h,m){return m=m||{},m.raw=!0,c(h,m)}return bf.Inflate=u,bf.inflate=c,bf.inflateRaw=f,bf.ungzip=c,bf}var Zx,cI;function cQ(){if(cI)return Zx;cI=1;var e=ac().assign,t=aQ(),n=uQ(),r=z8(),a={};return e(a,t,n,r),Zx=a,Zx}var dQ=cQ();const wk=Qa(dQ);var Yx,dI;function fQ(){if(dI)return Yx;dI=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,u)=>{s?o(s):i(u)}):r.push(i),t.apply(this,r)})};return Yx=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=u=>typeof u=="string"?o===u:u.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},Yx}var hQ=fQ();const Xx=Qa(hQ);var Jx,fI;function pQ(){if(fI)return Jx;fI=1;var e={};function t(re){return Array.isArray(re)?re:[re]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,u=/^\\#/,c=/\r?\n/g,f=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,v=(re,Y,ne)=>Object.defineProperty(re,Y,{value:ne}),w=/([0-z])-([0-z])/g,_=()=>!1,x=re=>re.replace(w,(Y,ne,G)=>ne.charCodeAt(0)<=G.charCodeAt(0)?Y:n),S=re=>{const{length:Y}=re;return re.slice(0,Y-Y%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(re,Y,ne)=>Y+(ne.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(re,Y)=>{const{length:ne}=Y;return Y.slice(0,ne-ne%2)+r}],[/[\\$.|*+(){^]/g,re=>`\\${re}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(re,Y,ne)=>Y+6<ne.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(re,Y,ne)=>{const G=ne.replace(/\\\*/g,"[^\\/]*");return Y+G}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(re,Y,ne,G,X)=>Y===a?`\\[${ne}${S(G)}${X}`:X==="]"&&G.length%2===0?`[${x(ne)}${G}]`:"[]"],[/(?:[^*])$/,re=>/\/$/.test(re)?`${re}$`:`${re}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(re,Y)=>`${Y?`${Y}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),A=(re,Y)=>{let ne=C[re];return ne||(ne=E.reduce((G,[X,oe])=>G.replace(X,oe.bind(re)),re),C[re]=ne),Y?new RegExp(ne,"i"):new RegExp(ne)},j=re=>typeof re=="string",O=re=>re&&j(re)&&!i.test(re)&&!o.test(re)&&re.indexOf("#")!==0,N=re=>re.split(c);class z{constructor(Y,ne,G,X){this.origin=Y,this.pattern=ne,this.negative=G,this.regex=X}}const H=(re,Y)=>{const ne=re;let G=!1;re.indexOf("!")===0&&(G=!0,re=re.substr(1)),re=re.replace(s,"!").replace(u,"#");const X=A(re,Y);return new z(ne,re,G,X)},Q=(re,Y)=>{throw new Y(re)},P=(re,Y,ne)=>j(re)?re?P.isNotRelative(re)?ne(`path should be a \`path.relative()\`d string, but got "${Y}"`,RangeError):!0:ne("path must not be empty",TypeError):ne(`path must be a string, but got \`${Y}\``,TypeError),Z=re=>f.test(re);P.isNotRelative=Z,P.convert=re=>re;class V{constructor({ignorecase:Y=!0,ignoreCase:ne=Y,allowRelativePaths:G=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=ne,this._allowRelativePaths=G,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(Y){if(Y&&Y[g]){this._rules=this._rules.concat(Y._rules),this._added=!0;return}if(O(Y)){const ne=H(Y,this._ignoreCase);this._added=!0,this._rules.push(ne)}}add(Y){return this._added=!1,t(j(Y)?N(Y):Y).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(Y){return this.add(Y)}_testOne(Y,ne){let G=!1,X=!1;return this._rules.forEach(oe=>{const{negative:ye}=oe;if(X===ye&&G!==X||ye&&!G&&!X&&!ne)return;oe.regex.test(Y)&&(G=!ye,X=ye)}),{ignored:G,unignored:X}}_test(Y,ne,G,X){const oe=Y&&P.convert(Y);return P(oe,Y,this._allowRelativePaths?_:Q),this._t(oe,ne,G,X)}_t(Y,ne,G,X){if(Y in ne)return ne[Y];if(X||(X=Y.split(h)),X.pop(),!X.length)return ne[Y]=this._testOne(Y,G);const oe=this._t(X.join(h)+h,ne,G,X);return ne[Y]=oe.ignored?oe:this._testOne(Y,G)}ignores(Y){return this._test(Y,this._ignoreCache,!1).ignored}createFilter(){return Y=>!this.ignores(Y)}filter(Y){return t(Y).filter(this.createFilter())}test(Y){return this._test(Y,this._testCache,!0)}}const te=re=>new V(re),ae=re=>P(re&&P.convert(re),re,_);if(te.isPathValid=ae,te.default=te,Jx=te,typeof Wr<"u"&&(e&&e.IGNORE_TEST_WIN32||Wr.platform==="win32")){const re=ne=>/^\\\\\?\\/.test(ne)||/["<>|\u0000-\u001F]+/u.test(ne)?ne:ne.replace(/\\/g,"/");P.convert=re;const Y=/^[a-z]:\//i;P.isNotRelative=ne=>Y.test(ne)||Z(ne)}return Jx}var mQ=pQ();const gQ=Qa(mQ);var Qx,hI;function yQ(){if(hI)return Qx;hI=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return Qx=n,Qx}var bQ=yQ();const xs=Qa(bQ);var eS,pI;function vQ(){return pI||(pI=1,eS=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,u=a+1,c=[],f=[],h=[],m="",g=-1,v=0,w=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,u=a+1)},E=function(O,N,z){return{x:O,y:N,k:z}},C=function(O,N){return{elem:O,t:N}},A=function(O,N,z){var H,Q,P;for(N>z?H=c[O-1+u]:H=c[O+1+u],P=Math.max(N,z),Q=P-O;Q<a&&P<i&&n[Q]===r[P];)++Q,++P;return c[O+u]=f.length,f[f.length]=new E(Q,P,H),P},j=function(O){var N,z,H;for(N=z=0,H=O.length-1;H>=0;--H)for(;N<O[H].x||z<O[H].y;)O[H].y-O[H].x>z-N?(o?h[h.length]=new C(r[z],g):h[h.length]=new C(r[z],w),++z):O[H].y-O[H].x<z-N?(o?h[h.length]=new C(n[N],w):h[h.length]=new C(n[N],g),++N):(h[h.length]=new C(n[N],v),m+=n[N],++N,++z)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return m},getses:function(){return h},compose:function(){var O,N,z,H,Q,P,Z,V;for(O=i-a,N=a+i+3,z={},Z=0;Z<N;++Z)z[Z]=-1,c[Z]=-1;H=-1;do{for(++H,V=-H;V<=O-1;++V)z[V+u]=A(V,z[V-1+u]+1,z[V+1+u]);for(V=O+H;V>=O+1;--V)z[V+u]=A(V,z[V-1+u]+1,z[V+1+u]);z[O+u]=A(O,z[O-1+u]+1,z[O+1+u])}while(z[O+u]!==i);for(s=O+2*H,Q=c[O+u],P=[];Q!==-1;)P[P.length]=new E(f[Q].x,f[Q].y,null),Q=f[Q].k;j(P)}}}),eS}var tS,mI;function wQ(){if(mI)return tS;mI=1;var e=vQ();function t(i,o){var s=new e(i,o);s.compose();for(var u=s.getses(),c,f,h=i.length-1,m=o.length-1,g=u.length-1;g>=0;--g)u[g].t===s.SES_COMMON?(f?(f.chain={file1index:h,file2index:m,chain:null},f=f.chain):(c={file1index:h,file2index:m,chain:null},f=c),h--,m--):u[g].t===s.SES_DELETE?h--:u[g].t===s.SES_ADD&&m--;var v={file1index:-1,file2index:-1,chain:null};return f?(f.chain=v,c):v}function n(i,o){for(var s=[],u=i.length,c=o.length,f=t(i,o);f!==null;f=f.chain){var h=u-f.file1index-1,m=c-f.file2index-1;u=f.file1index,c=f.file2index,(h||m)&&s.push({file1:[u+1,h],file2:[c+1,m]})}return s.reverse(),s}function r(i,o,s){var u,c=n(o,i),f=n(o,s),h=[];function m(Y,ne){h.push([Y.file1[0],ne,Y.file1[1],Y.file2[0],Y.file2[1]])}for(u=0;u<c.length;u++)m(c[u],0);for(u=0;u<f.length;u++)m(f[u],2);h.sort(function(Y,ne){return Y[0]-ne[0]});var g=[],v=0;function w(Y){Y>v&&(g.push([1,v,Y-v]),v=Y)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],C=E+S[2];_<h.length-1;){var A=h[_+1],j=A[0];if(j>C)break;C=Math.max(C,j+A[2]),_++}if(w(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var O={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(u=x;u<=_;u++){S=h[u];var N=S[1],z=O[N],H=S[0],Q=H+S[2],P=S[3],Z=P+S[4];z[0]=Math.min(P,z[0]),z[1]=Math.max(Z,z[1]),z[2]=Math.min(H,z[2]),z[3]=Math.max(Q,z[3])}var V=O[0][0]+(E-O[0][2]),te=O[0][1]+(C-O[0][3]),ae=O[2][0]+(E-O[2][2]),re=O[2][1]+(C-O[2][3]);g.push([-1,V,te-V,E,C-E,ae,re-ae])}v=C}return w(o.length),g}function a(i,o,s){var u=[],c=[i,o,s],f=r(i,o,s),h=[];function m(){h.length&&u.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],A=0;A<S[2];A++)if(i[A+E]!=s[A+C])return!0;return!1}for(var w=0;w<f.length;w++){var _=f[w],x=_[0];x==-1?v(_)?(m(),u.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(c[0].slice(_[1],_[1]+_[2])):g(c[x].slice(_[1],_[1]+_[2]))}return m(),u}return tS=a,tS}var _Q=wQ();const xQ=Qa(_Q);class Yn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Yn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class C0 extends Yn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=C0.code,this.data={filepaths:t}}}C0.code="UnmergedPathsError";class An extends Yn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=An.code,this.data={message:t}}}An.code="InternalError";class xh extends Yn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=xh.code,this.data={filepath:t}}}xh.code="UnsafeFilepathError";class ws{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function Jv(e,t){return-(e<t)||+(e>t)}function U8(e,t){return Jv(e.path,t.path)}function q8(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const ps=2**32;function gI(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Yf(e){const[t,n]=gI(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=gI(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%ps,ctimeNanoseconds:n%ps,mtimeSeconds:r%ps,mtimeNanoseconds:a%ps,dev:e.dev%ps,ino:e.ino%ps,mode:q8(e.mode%ps),uid:e.uid%ps,gid:e.gid%ps,size:e.size>-1?e.size%ps:0}}function SQ(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let nS=null;async function Il(e){return nS===null&&(nS=await kQ()),nS?H8(e):EQ(e)}function EQ(e){return new P8().update(e).digest("hex")}async function H8(e){const t=await crypto.subtle.digest("SHA-1",e);return SQ(t)}async function kQ(){try{if(await H8(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function CQ(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function AQ(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Wt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class zc{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Wt.isBuffer(t))return zc.fromBuffer(t);if(t===null)return new zc(null);throw new An("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new An("Index file is empty (.git/index)");const n=new zc,r=new ws(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new An(`Invalid dircache magic file number: ${a}`);const i=await Il(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new An(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new An(`Unsupported dircache version: ${s}`);const u=r.readUInt32BE();let c=0;for(;!r.eof()&&c<u;){const f={};f.ctimeSeconds=r.readUInt32BE(),f.ctimeNanoseconds=r.readUInt32BE(),f.mtimeSeconds=r.readUInt32BE(),f.mtimeNanoseconds=r.readUInt32BE(),f.dev=r.readUInt32BE(),f.ino=r.readUInt32BE(),f.mode=r.readUInt32BE(),f.uid=r.readUInt32BE(),f.gid=r.readUInt32BE(),f.size=r.readUInt32BE(),f.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();f.flags=CQ(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new An(`Got a path length of: ${m}`);if(f.path=r.toString("utf8",m),f.path.includes("..\\")||f.path.includes("../"))throw new xh(f.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new An(`Expected 1-8 null characters but got '${v}' after ${f.path}`);if(r.eof())throw new An("Unexpected end of file")}f.stages=[],n._addEntry(f),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(U8)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Yf(n);const i=Wt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Wt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Wt.alloc(r),i=new ws(a),o=Yf(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(AQ(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Wt.alloc(12),n=new ws(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(zc._entryToBuffer(s)),s.stages.length>1)for(const u of s.stages)u&&u!==s&&r.push(zc._entryToBuffer(u));r=await Promise.all(r);const a=Wt.concat(r),i=Wt.concat([t,a]),o=await Il(i);return Wt.concat([i,Wt.from(o,"hex")])}}function Ub(e,t,n=!0,r=!0){const a=Yf(e),i=Yf(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let rS=null;const aS=Symbol("IndexCache");function TQ(){return{map:new Map,stats:new Map}}async function RQ(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await zc.from(a);n.map.set(t,i),n.stats.set(t,r)}async function NQ(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Ub(r,a)}class Ca{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[aS]||(r[aS]=TQ());const o=`${n}/index`;rS===null&&(rS=new jm({maxPending:1/0}));let s,u=[];return await rS.acquire(o,async()=>{const c=r[aS];await NQ(t,o,c)&&await RQ(t,o,c);const f=c.map.get(o);if(u=f.unmergedPaths,u.length&&!a)throw new C0(u);if(s=await i(f),f._dirty){const h=await f.toObject();await t.write(o,h),c.stats.set(o,await t.lstat(o)),f._dirty=!1}}),s}}function qb(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Xf(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function V8(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:qb(a),metadata:{},children:[]};t.set(a,i),i.parent=n(Xf(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:qb(a),metadata:i,parent:n(Xf(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function IQ(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new An(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class OQ{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ca.acquire({fs:t,gitdir:n,cache:r},async function(i){return V8(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(Jv),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Yf(r.metadata);t._type=r.type==="tree"?"tree":IQ(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const Qv=Symbol("GitWalkSymbol");function Sh(){const e=Object.create(null);return Object.defineProperty(e,Qv,{value:function({fs:t,gitdir:n,cache:r}){return new OQ({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class vr extends Yn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=vr.code,this.data={what:t}}}vr.code="NotFoundError";class mi extends Yn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=mi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}mi.code="ObjectTypeError";class Hu extends Yn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Hu.code,this.data={value:t}}}Hu.code="InvalidOidError";class A0 extends Yn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=A0.code,this.data={remote:t}}}A0.code="NoRefspecError";class Hb{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Hb(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Vb{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",u=a==="*";if(u!==(o==="*"))throw new An("Invalid refspec");return new Vb({remotePath:r,localPath:i,force:s,matchPrefix:u})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class _k{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Vb.from(r));return new _k(n)}add(t){const n=Vb.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function jQ(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const DQ=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Hp=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},yI={core:{filemode:Hp,bare:Hp,logallrefupdates:Hp,symlinks:Hp,ignorecase:Hp,bigFileThreshold:DQ}},MQ=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,PQ=/^[A-Za-z0-9-.]+$/,FQ=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,LQ=/^[A-Za-z][A-Za-z-]*$/,$Q=/^(.*?)( *[#;].*)$/,BQ=e=>{const t=MQ.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},zQ=e=>{const t=FQ.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=UQ(r),i=qQ(a);return[n,i]}return null},UQ=e=>{const t=$Q.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return bI(n)&&bI(r)?`${n}${r}`:n},bI=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,qQ=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),vI=e=>e!=null?e.toLowerCase():null,I2=(e,t,n)=>[vI(e),t,vI(n)].filter(r=>r!=null).join("."),wI=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:I2(n,a,r),sectionPath:I2(n,a,null),isSection:!!n}},HQ=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class xk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),u=BQ(s),c=u!=null;if(c)[n,r]=u;else{const h=zQ(s);h!=null&&([i,o]=h)}const f=I2(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:o,path:f}}):[]}static from(t){return new xk(t)}async get(t,n=!1){const r=wI(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const u=yI[i]&&yI[i][o];return u?u(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:u,isSection:c}=wI(t),f=HQ(this.parsedConfig,h=>h.path===s);if(n==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){const h=this.parsedConfig[f],m=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(f+1,0,m):this.parsedConfig[f]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===u),m={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(PQ.test(a)&&LQ.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:u};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class ua{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return xk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const jy=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],VQ=["config","description","index","shallow","commondir"];let iS;async function _u(e,t){return iS===void 0&&(iS=new jm),iS.acquire(e,t)}class Pt{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:u=!1,pruneTags:c=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new Hu(_);const f=await ua.get({fs:t,gitdir:n});if(!s){if(s=await f.getall(`remote.${r}.fetch`),s.length===0)throw new A0(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=_k.from(s),m=new Map;if(c){const _=await Pt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Pt.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await Pt.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);m.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);m.set(x,S)}const v=h.translate([...i.keys()]);for(const[_,x]of v){const S=i.get(_),E=h.translateOne(S);E&&m.set(x,`ref: ${E}`)}const w=[];if(u){for(const _ of h.localNamespaces()){const x=(await Pt.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)m.has(S)||w.push(S)}w.length>0&&await Pt.deleteRefs({fs:t,gitdir:n,refs:w})}for(const[_,x]of m)await _u(_,async()=>t.write(Tt.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:w}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Hu(a);await _u(r,async()=>t.write(Tt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await _u(r,async()=>t.write(Tt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Pt.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(Tt.join(n,s))));let a=await _u("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Hb.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await _u("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Pt.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Pt.packedRefs({fs:t,gitdir:n}),o=jy(r).filter(s=>!VQ.includes(s));for(const s of o){const u=await _u(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(u)return Pt.resolve({fs:t,gitdir:n,ref:u.trim(),depth:a})}throw new vr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Pt.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Pt.packedRefs({fs:t,gitdir:n}),i=jy(r);for(const o of i)if(await _u(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new vr(r)}static async expandAgainstMap({ref:t,map:n}){const r=jy(t);for(const a of r)if(await n.has(a))return a;throw new vr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Pt.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=jy(t);for(const o of i){const s=a.get(o);if(s)return Pt.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new vr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await _u("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Hb.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Pt.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(jQ),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Pt.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Pt.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Pt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function GQ(e,t){return Jv(_I(e),_I(t))}function _I(e){return e.mode==="040000"?e.path+"/":e.path}function G8(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new An(`Unexpected GitTree entry mode: ${e}`)}function WQ(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new An(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new An(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=G8(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new xh(s);const u=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:u,type:o})}return t}function KQ(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new An(`Could not understand file mode: ${e}`)}function ZQ(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=KQ(e.mode),e.type||(e.type=G8(e.mode)),e}class Ai{constructor(t){if(Wt.isBuffer(t))this._entries=WQ(t);else if(Array.isArray(t))this._entries=t.map(ZQ);else throw new An("invalid type passed to GitTree constructor");this._entries.sort(U8)}static from(t){return new Ai(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(GQ),Wt.concat(t.map(n=>{const r=Wt.from(n.mode.replace(/^0/,"")),a=Wt.from(" "),i=Wt.from(n.path,"utf8"),o=Wt.from([0]),s=Wt.from(n.oid,"hex");return Wt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Eh{static wrap({type:t,object:n}){return Wt.concat([Wt.from(`${t} ${n.byteLength.toString()}\0`),Wt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new An(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Wt.from(t.slice(r+1))}}}async function W8({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function YQ(e,t){const n=new ws(e),r=xI(n);if(r!==t.byteLength)throw new An(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=xI(n);let i;const o=EI(n,t);if(o.byteLength===a)i=o;else{i=Wt.alloc(a);const s=new ws(i);for(s.copy(o);!n.eof();)s.copy(EI(n,t));const u=s.tell();if(a!==u)throw new An(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${u} bytes`)}return i}function xI(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function SI(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function EI(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=SI(e,n&a,4);let s=SI(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function XQ(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function K8(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:XQ(e)}class Z8{constructor(t){if(typeof Wt>"u")throw new Error("Missing Buffer dependency");this.stream=K8(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Wt.alloc(0):(n&&(n=Wt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>JQ(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Wt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function JQ(e){return e.reduce((t,n)=>t+n.length,0)}async function QQ(e,t){const n=new Z8(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new An(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new An(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:u,ofs:c,reference:f}=await eee(n),h=new wk.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new An(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==u)throw new An("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:f,ofs:c})}}}}async function eee(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Wt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function Y8(e){return wk.inflate(e)}function tee(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function nee(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Jf{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new ws(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new An(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new An("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let f=0;f<o;f++){const h=r.slice(20).toString("hex");s[f]=h}r.seek(r.tell()+4*o);const u=new Map;for(let f=0;f<o;f++)u.set(s[f],r.readUInt32BE());const c=r.slice(20).toString("hex");return new Jf({hashes:s,crcs:{},offsets:u,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],u={},c=new Map;let f=null,h=null;await QQ([t],async({data:_,type:x,reference:S,offset:E,num:C})=>{f===null&&(f=C);const A=Math.floor((f-C)*100/f);A!==h&&r&&await r({phase:"Receiving objects",loaded:f-C,total:f}),h=A,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const m=Object.keys(i).map(Number);for(const[_,x]of m.entries()){const S=_+1===m.length?t.byteLength-20:m[_+1],E=i[x],C=tQ.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const g=new Jf({pack:Promise.resolve(t),packfileSha:o,crcs:u,hashes:s,offsets:c,getExternalRefDelta:n});h=null;let v=0;const w=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(v*100/f);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:f}),v++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});w[g.readDepth]+=1;const A=await Il(Eh.wrap({type:E,object:C}));S.oid=A,s.push(A),c.set(A,_),u[A]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(c,f)=>{t.push(Wt.from(c,f))};n("ff744f63","hex"),n("00000002","hex");const r=new ws(Wt.alloc(256*4));for(let c=0;c<256;c++){let f=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&f++;r.writeUInt32BE(f)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new ws(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new ws(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const o=Wt.concat(t),s=await Il(o),u=Wt.alloc(20);return u.write(s,"hex"),Wt.concat([o,u])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new An(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new An("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new ws(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new An("Unrecognized type: 0b"+o.toString(2));const u=i&15;let c=u;i&128&&(c=nee(a,u));let h=null,m=null;if(s==="ofs_delta"){const v=tee(a),w=t-v;({object:h,type:s}=await this.readSlice({start:w}))}if(s==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:v}))}const g=r.slice(a.tell());if(m=Wt.from(await Y8(g)),m.byteLength!==c)throw new An(`Packfile told us object would have length ${c} but it had length ${m.byteLength}`);return h&&(m=Wt.from(YQ(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:m}),{type:s,format:"content",object:m}}}const Dy=Symbol("PackfileCache");async function ree({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Jf.fromIdx({idx:i,getExternalRefDelta:n})}function Sk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[Dy]||(t[Dy]=new Map);let o=t[Dy].get(n);return o||(o=ree({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[Dy].set(n,o)),o}async function aee({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(Tt.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await Sk({fs:e,cache:t,filename:u,getExternalRefDelta:i});if(c.error)throw new An(c.error);if(c.offsets.has(r)){if(!c.pack){const h=u.replace(/idx$/,"pack");c.pack=e.read(h)}const f=await c.read({oid:r,getExternalRefDelta:i});return f.format="content",f.source=`objects/pack/${s.replace(/idx$/,"pack")}`,f}}return null}async function Lr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=f=>Lr({fs:e,cache:t,gitdir:n,oid:f});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Wt.from("tree 0\0")}),o||(o=await W8({fs:e,gitdir:n,oid:r})),!o){if(o=await aee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new vr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Wt.from(await Y8(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Il(o.object);if(s!==r)throw new An(`SHA check failed! Expected ${r}, computed ${s}`);const{object:u,type:c}=Eh.unwrap(o.object);if(o.type=c,o.object=u,o.format="content",a==="content")return o;throw new An(`invalid requested format "${a}"`)}class Ko extends Yn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Ko.code,this.data={noun:t,where:n,canForce:r}}}Ko.code="AlreadyExistsError";class T0 extends Yn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=T0.code,this.data={nouns:t,short:n,matches:r}}}T0.code="AmbiguousError";class R0 extends Yn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=R0.code,this.data={filepaths:t}}}R0.code="CheckoutConflictError";class N0 extends Yn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=N0.code,this.data={ref:t,oid:n}}}N0.code="CommitNotFetchedError";class I0 extends Yn{constructor(){super("Empty response from git server."),this.code=this.name=I0.code,this.data={}}}I0.code="EmptyServerResponseError";class O0 extends Yn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=O0.code,this.data={}}}O0.code="FastForwardError";class j0 extends Yn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=j0.code,this.data={prettyDetails:t,result:n}}}j0.code="GitPushError";class Qf extends Yn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Qf.code,this.data={statusCode:t,statusMessage:n,response:r}}}Qf.code="HttpError";class Vu extends Yn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Vu.code,this.data={reason:t}}}Vu.code="InvalidFilepathError";class Vo extends Yn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Vo.code,this.data={ref:t,suggestion:n}}}Vo.code="InvalidRefNameError";class D0 extends Yn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=D0.code,this.data={depth:t}}}D0.code="MaxDepthError";class kh extends Yn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=kh.code,this.data={}}}kh.code="MergeNotSupportedError";class Ch extends Yn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Ch.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Ch.code="MergeConflictError";class Ja extends Yn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Ja.code,this.data={role:t}}}Ja.code="MissingNameError";class Ci extends Yn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Ci.code,this.data={parameter:t}}}Ci.code="MissingParameterError";class M0 extends Yn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=M0.code,this.data={errors:t},this.errors=t}}M0.code="MultipleGitError";class bd extends Yn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=bd.code,this.data={expected:t,actual:n}}}bd.code="ParseError";class eh extends Yn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=eh.code,this.data={reason:t}}}eh.code="PushRejectedError";class Au extends Yn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Au.code,this.data={capability:t,parameter:n}}}Au.code="RemoteCapabilityError";class P0 extends Yn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=P0.code,this.data={preview:t,response:n}}}P0.code="SmartHttpError";class F0 extends Yn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=F0.code,this.data={url:t,transport:n,suggestion:r}}}F0.code="UnknownTransportError";class L0 extends Yn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=L0.code,this.data={url:t}}}L0.code="UrlParseError";class Ah extends Yn{constructor(){super("The operation was canceled."),this.code=this.name=Ah.code,this.data={}}}Ah.code="UserCanceledError";class $0 extends Yn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=$0.code,this.data={filepath:t}}}$0.code="IndexResetError";class B0 extends Yn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=B0.code,this.data={ref:t}}}B0.code="NoCommitError";var iee=Object.freeze({__proto__:null,AlreadyExistsError:Ko,AmbiguousError:T0,CheckoutConflictError:R0,CommitNotFetchedError:N0,EmptyServerResponseError:I0,FastForwardError:O0,GitPushError:j0,HttpError:Qf,InternalError:An,InvalidFilepathError:Vu,InvalidOidError:Hu,InvalidRefNameError:Vo,MaxDepthError:D0,MergeNotSupportedError:kh,MergeConflictError:Ch,MissingNameError:Ja,MissingParameterError:Ci,MultipleGitError:M0,NoRefspecError:A0,NotFoundError:vr,ObjectTypeError:mi,ParseError:bd,PushRejectedError:eh,RemoteCapabilityError:Au,SmartHttpError:P0,UnknownTransportError:F0,UnsafeFilepathError:xh,UrlParseError:L0,UserCanceledError:Ah,UnmergedPathsError:C0,IndexResetError:$0,NoCommitError:B0});function O2({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=oee(r),`${e} <${t}> ${n} ${r}`}function oee(e){const t=see(lee(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function see(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function lee(e){return e===0?e:-e}function yl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Gb(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:uee(a)}}function uee(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),cee(r)}function cee(e){return e===0?e:-e}class ci{constructor(t){if(typeof t=="string")this._tag=t;else if(Wt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=ci.render(t);else throw new An("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new ci(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${O2(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=Gb(r.tagger)),r.committer&&(r.committer=Gb(r.committer)),r}withoutSignature(){const t=yl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return yl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Wt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=yl(i);const o=a+i;return ci.from(o)}}function oS(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function dee(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Mr{constructor(t){if(typeof t=="string")this._commit=t;else if(Wt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Mr.render(t);else throw new An("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Mr.justHeaders(t),a=Mr.justMessage(t),i=yl(r+`
gpgsig`+oS(n)+`
`+a);return new Mr(i)}static from(t){return new Mr(t)}toObject(){return Wt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Mr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return yl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Mr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=Gb(r.author)),r.committer&&(r.committer=Gb(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new An("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${O2(r)}
`;const a=t.committer||t.author;return n+=`committer ${O2(a)}
`,t.gpgsig&&(n+="gpgsig"+oS(t.gpgsig)),n}static render(t){return Mr.renderHeaders(t)+`
`+yl(t.message)}render(){return this._commit}withoutSignature(){const t=yl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return yl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return dee(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Mr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=yl(o);const u=Mr.justHeaders(t._commit)+`
gpgsig`+oS(o)+`
`+i;return Mr.from(u)}}async function th({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ai.from([]),oid:r};const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,th({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Mr.from(i).parse().tree,th({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new mi(r,a,"tree");return{tree:Ai.from(i),oid:r}}class fee{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await Pt.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof vr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const u=await th({fs:t,cache:this.cache,gitdir:n,oid:s});return u.type="tree",u.mode="40000",o.set(".",u),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const u=s.oid;if(!u)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:c,object:f}=await Lr({fs:r,cache:a,gitdir:i,oid:u});if(c!==s.type)throw new mi(u,c,s.type);const h=Ai.from(f);for(const m of h)o.set(Tt.join(n,m.path),m);return h.entries().map(m=>Tt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=q8(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:u,object:c}=await Lr({fs:r,cache:a,gitdir:i,oid:s});u!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function mo({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,Qv,{value:function({fs:n,gitdir:r,cache:a}){return new fee({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class hee{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Tt.join(a,n));return i===null?null:i.map(o=>Tt.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Yf(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Ca.acquire({fs:r,gitdir:a,cache:i},async function(s){const u=s.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof Wr<"u"?Wr.platform!=="win32":!0;if(!u||Ub(c,u,h,m)){const g=await t.content();g===void 0?o=void 0:(o=await Il(Eh.wrap({type:"blob",object:g})),u&&o===u.oid&&(!h||c.mode===u.mode)&&Ub(c,u,h,m)&&s.insert({filepath:t._fullpath,stats:c,oid:o}))}else o=u.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await ua.get({fs:t,gitdir:n}),this.config)}}function z0(){const e=Object.create(null);return Object.defineProperty(e,Qv,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new hee({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function pee(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const X8=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class mee{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*gee(e){const t=new mee;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function Gu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(u,c)=>c,reduce:o=async(u,c)=>{const f=X8(c);return u!==void 0&&f.unshift(u),f},iterate:s=(u,c)=>Promise.all([...c].map(u))}){const u=a.map(g=>g[Qv]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(u.length).fill("."),f=pee(0,u.length),h=async g=>{f.map(_=>{const x=g[_];g[_]=x&&new u[_].ConstructEntry(x)});const w=(await Promise.all(f.map(_=>{const x=g[_];return x?u[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:gee(w)}},m=async g=>{const{entries:v,children:w}=await h(g),_=v.find(S=>S&&S._fullpath)._fullpath,x=await i(_,v);if(x!==null){let S=await s(m,w);return S=S.filter(E=>E!==void 0),o(x,S)}};return m(c)}async function j2(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Tt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?j2(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function yee(e){return bee(e)&&kI(e.then)&&kI(e.catch)}function bee(e){return e&&typeof e=="object"}function kI(e){return typeof e=="function"}function CI(e){return yee((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const AI=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function TI(e,t){if(CI(t))for(const n of AI)e[`_${n}`]=t[n].bind(t);else for(const n of AI)e[`_${n}`]=Xx(t[n].bind(t));CI(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=j2.bind(null,e):t.rm?e._rm=Xx(t.rm.bind(t)):t.rmdir.length>2?e._rm=Xx(t.rmdir.bind(t)):e._rm=j2.bind(null,e)}class nn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?TI(this,t.promises):TI(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Wt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Xf(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=Xf(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(Jv),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Wt.isBuffer(r)?r:Wt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Qe(e,t){if(t===void 0)throw new Ci(e)}async function Wb(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function vee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n);const i=new nn(e),o=[mo({ref:r}),z0(),Sh()];let s=[];await Ca.acquire({fs:i,gitdir:n,cache:a},async function(c){s=c.unmergedPaths});const u=await Gu({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(c,[f,h,m]){const g=!await Wb(h,m),v=s.includes(c),w=!await Wb(m,f);if(g||v)return f?{path:c,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(w)return!1;throw new $0(c)}});await Ca.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const f of u)if(f!==!1){if(!f){await i.rmdir(`${t}/${f.path}`,{recursive:!0}),c.delete({filepath:f.path});continue}if(f.type==="blob"){const h=new TextDecoder().decode(f.content);await i.write(`${t}/${f.path}`,h,{mode:f.mode}),c.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class Th{static async isIgnored({fs:t,dir:n,gitdir:r=Tt.join(n,".git"),filepath:a}){if(qb(a)===".git")return!0;if(a===".")return!1;let i="";const o=Tt.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:Tt.join(n,".gitignore"),filepath:a}],u=a.split("/").filter(Boolean);for(let f=1;f<u.length;f++){const h=u.slice(0,f).join("/"),m=u.slice(f).join("/");s.push({gitignore:Tt.join(n,h,".gitignore"),filepath:m})}let c=!1;for(const f of s){let h;try{h=await t.read(f.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const m=gQ().add(i);m.add(h);const g=Xf(f.filepath);if(g!=="."&&m.ignores(g))return!0;c?c=!m.test(f.filepath).unignored:c=m.test(f.filepath).ignored}return c}}async function wee({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let sS=null;async function J8(e){return sS===null&&(sS=xee()),sS?_ee(e):wk.deflate(e)}async function _ee(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function xee(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Ni({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Eh.wrap({type:n,object:r})),i=await Il(r),r=Wt.from(await J8(r))),o||await wee({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function Q8(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function See({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r);const s=new nn(e);await Ca.acquire({fs:s,gitdir:n,cache:a},async u=>{const f=await(await ua.get({fs:s,gitdir:n})).get("core.autocrlf");return D2({dir:t,gitdir:n,fs:s,filepath:r,index:u,force:i,parallel:o,autocrlf:f})})}catch(s){throw s.caller="git.add",s}}async function D2({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const u=r.map(async m=>{if(!i&&await Th.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(Tt.join(e,m));if(!g)throw new vr(m);if(g.isDirectory()){const v=await n.readdir(Tt.join(e,m));if(o){const w=v.map(_=>D2({dir:e,gitdir:t,fs:n,filepath:[Tt.join(m,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(w)}else for(const w of v)await D2({dir:e,gitdir:t,fs:n,filepath:[Tt.join(m,w)],index:a,force:i,parallel:o,autocrlf:s})}else{const v=g.isSymbolicLink()?await n.readlink(Tt.join(e,m)).then(Q8):await n.read(Tt.join(e,m),{autocrlf:s});if(v===null)throw new vr(m);const w=await Ni({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:m,stats:g,oid:w})}}),c=await Promise.allSettled(u),f=c.filter(m=>m.status==="rejected").map(m=>m.reason);if(f.length>1)throw new M0(f);if(f.length===1)throw f[0];return c.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function Dm({fs:e,gitdir:t,path:n}){return(await ua.get({fs:e,gitdir:t})).get(n)}function eM(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Wu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await Dm({fs:e,gitdir:t,path:"user.name"}),email:await Dm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=eM({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function nh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await Dm({fs:e,gitdir:t,path:"user.name"}),email:await Dm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=eM({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function tM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,tM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new mi(r,a,"commit");return{commit:Mr.from(i),oid:r}}async function rh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await tM({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function ew({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g}){let v=!1;h||(h=await Pt.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let w,_;try{w=await Pt.resolve({fs:e,gitdir:r,ref:h}),_=await rh({fs:e,gitdir:r,oid:w,cache:{}})}catch{v=!0}if(u&&v)throw new B0(h);const x=u?await Wu({fs:e,gitdir:r,author:i,commit:_.commit}):await Wu({fs:e,gitdir:r,author:i});if(!x)throw new Ja("author");const S=u?await nh({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await nh({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new Ja("committer");return Ca.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const A=V8(E.entries).get(".");if(g||(g=await nM({fs:e,gitdir:r,inode:A,dryRun:c})),m?m=await Promise.all(m.map(N=>Pt.resolve({fs:e,gitdir:r,ref:N}))):u?m=_.commit.parent:m=w?[w]:[],!a)if(u)a=_.commit.message;else throw new Ci("message");let j=Mr.from({tree:g,parent:m,author:x,committer:S,message:a});s&&(j=await Mr.sign(j,n,s));const O=await Ni({fs:e,gitdir:r,type:"commit",object:j.toObject(),dryRun:c});return!f&&!c&&await Pt.writeRef({fs:e,gitdir:r,ref:h,value:O}),O})}async function nM({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const u of a)u.type==="tree"&&(u.metadata.mode="040000",u.metadata.oid=await nM({fs:e,gitdir:t,inode:u,dryRun:r}));const i=a.map(u=>({mode:u.metadata.mode,path:u.basename,oid:u.metadata.oid,type:u.type})),o=Ai.from(i);return await Ni({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function U0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Vu("leading-slash");if(a.endsWith("/"))throw new Vu("trailing-slash");const i=r,o=await th({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const u=a.split("/");r=await rM({fs:e,cache:t,gitdir:n,tree:s,pathArray:u,oid:i,filepath:a})}return r}async function rM({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const u of r)if(u.path===s){if(a.length===0)return u.oid;{const{type:c,object:f}=await Lr({fs:e,cache:t,gitdir:n,oid:u.oid});if(c!=="tree")throw new mi(i,c,"tree",o);return r=Ai.from(f),rM({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new vr(`file or directory found at "${i}:${o}"`)}async function Rh({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await U0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await th({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function q0({fs:e,gitdir:t,tree:n}){const r=Ai.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function Eee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:u,committer:c,signingKey:f}){let h;try{h=await Pt.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof vr))throw x}let g=(await Rh({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new Ko("note",i);typeof o=="string"&&(o=Wt.from(o,"utf8"));const v=await Ni({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const w=await q0({fs:e,gitdir:r,tree:g});return await ew({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:w,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:u,committer:c,signingKey:f})}async function kee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:u,committer:c,signingKey:f,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i),Qe("note",o),f&&Qe("onSign",t);const m=new nn(e),g=await Wu({fs:m,gitdir:r,author:u});if(!g)throw new Ja("author");const v=await nh({fs:m,gitdir:r,author:g,committer:c});if(!v)throw new Ja("committer");return await Eee({fs:new nn(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:v,signingKey:f})}catch(m){throw m.caller="git.addNote",m}}async function aM({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==xs.clean(n))throw new Vo(n,xs.clean(n));const i=await ua.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new Ko("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await ua.save({fs:e,gitdir:t,config:i})}async function Cee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("remote",r),Qe("url",a),await aM({fs:new nn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function Aee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!f&&await Pt.exists({fs:e,gitdir:r,ref:a}))throw new Ko("tag",a);const h=await Pt.resolve({fs:e,gitdir:r,ref:u||"HEAD"}),{type:m}=await Lr({fs:e,cache:t,gitdir:r,oid:h});let g=ci.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});c&&(g=await ci.sign(g,n,c));const v=await Ni({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Pt.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function Tee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("ref",a),c&&Qe("onSign",t);const m=new nn(e),g=await Wu({fs:m,gitdir:r,author:i});if(!g)throw new Ja("tagger");return await Aee({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:u,signingKey:c,force:f})}catch(m){throw m.caller="git.annotatedTag",m}}async function Ree({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==xs.clean(n))throw new Vo(n,xs.clean(n));const o=`refs/heads/${n}`;if(!i&&await Pt.exists({fs:e,gitdir:t,ref:o}))throw new Ko("branch",n,!1);let s;try{s=await Pt.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await Pt.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await Pt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Nee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Ree({fs:new nn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const iM=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function Ek({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:u,noCheckout:c,noUpdateHead:f,dryRun:h,force:m,track:g=!0}){let v;if(r)try{v=await Pt.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let w;try{w=await Pt.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(w=await Pt.resolve({fs:e,gitdir:i,ref:x}),g){const S=await ua.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await ua.save({fs:e,gitdir:i,config:S})}await Pt.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:w})}if(!c){let _;try{_=await Iee({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:m,filepaths:u})}catch(A){throw A instanceof vr&&A.data.what===w?new N0(s,w):A}const x=_.filter(([A])=>A==="conflict").map(([A,j])=>j);if(x.length>0)throw new R0(x);const S=_.filter(([A])=>A==="error").map(([A,j])=>j);if(S.length>0)throw new An(S.join(", "));if(h){r&&await r({previousHead:v,newHead:w,type:u!=null&&u.length>0?"file":"branch"});return}let E=0;const C=_.length;await Ca.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([j])=>j==="delete"||j==="delete-index").map(async function([j,O]){const N=`${a}/${O}`;j==="delete"&&await e.rm(N),A.delete({filepath:O}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ca.acquire({fs:e,gitdir:i,cache:t},async function(A){for(const[j,O]of _)if(j==="rmdir"||j==="rmdir-index"){const N=`${a}/${O}`;try{j==="rmdir-index"&&A.delete({filepath:O}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(z){if(z.code==="ENOTEMPTY")console.log(`Did not delete ${O} because directory is not empty`);else throw z}}}),await Promise.all(_.filter(([A])=>A==="mkdir"||A==="mkdir-index").map(async function([A,j]){const O=`${a}/${j}`;await e.mkdir(O),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ca.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([j])=>j==="create"||j==="create-index"||j==="update"||j==="mkdir-index").map(async function([j,O,N,z,H]){const Q=`${a}/${O}`;try{if(j!=="create-index"&&j!=="mkdir-index"){const{object:Z}=await Lr({fs:e,cache:t,gitdir:i,oid:N});if(H&&await e.rm(Q),z===33188)await e.write(Q,Z);else if(z===33261)await e.write(Q,Z,{mode:511});else if(z===40960)await e.writelink(Q,Z);else throw new An(`Invalid mode 0o${z.toString(8)} detected in blob ${N}`)}const P=await e.lstat(Q);z===33261&&(P.mode=493),j==="mkdir-index"&&(P.mode=57344),A.insert({filepath:O,stats:P,oid:N}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(P){console.log(P)}}))}),r&&await r({previousHead:v,newHead:w,type:u!=null&&u.length>0?"file":"branch"})}if(!f){const _=await Pt.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await Pt.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await Pt.writeRef({fs:e,gitdir:i,ref:"HEAD",value:w})}}async function Iee({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let u=0;return Gu({fs:e,cache:t,dir:r,gitdir:a,trees:[mo({ref:i}),z0(),Sh()],map:async function(c,[f,h,m]){if(c===".")return;if(s&&!s.some(v=>iM(c,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++u}),[!!m,!!f,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(c)?["delete",c]:void 0;case"010":switch(await f.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await f.oid(),await f.mode()];case"commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`new entry Unhandled type ${await f.type()}`]}case"011":switch(`${await f.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await f.oid()!==await h.oid()?o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]:await f.mode()!==await h.mode()?o?["update",c,await f.oid(),await f.mode(),!0]:["conflict",c]:["create-index",c,await f.oid(),await f.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${f.type}`]}case"100":return["delete-index",c];case"101":switch(await m.type()){case"tree":return["rmdir",c];case"blob":return await m.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await f.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await f.oid()&&await m.mode()===await f.mode()&&!o)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await f.oid())return o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await f.oid(),await f.mode(),await f.mode()!==await m.mode()];return await f.mode()!==await m.mode()?["update",c,await f.oid(),await f.mode(),!0]:await f.oid()!==await m.oid()?["update",c,await f.oid(),await f.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await f.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await f.type()}`]}}},reduce:async function(c,f){return f=X8(f),c?c&&c[0]==="rmdir"?(f.push(c),f):(f.unshift(c),f):f}})}async function oM({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Tt.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:u=!1,noUpdateHead:c=o===void 0,dryRun:f=!1,force:h=!1,track:m=!0,cache:g={}}){try{Qe("fs",e),Qe("dir",r),Qe("gitdir",a);const v=o||"HEAD";return await Ek({fs:new nn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:s,noCheckout:u,noUpdateHead:c,dryRun:f,force:h,track:m})}catch(v){throw v.caller="git.checkout",v}}const Oee=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Hc(e){const t=Oee.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function ic({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Pt.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Pt.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:Hc(a)}function jee(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function sM({username:e="",password:t=""}){return`Basic ${Wt.from(`${e}:${t}`).toString("base64")}`}async function H0(e,t){const n=K8(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Kb(e){let t=0;const n=[];await H0(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function RI(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function M2(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class Qr{static flush(){return Wt.from("0000","utf8")}static delim(){return Wt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Wt.from(t));const n=t.length+4,r=M2(4,n);return Wt.concat([Wt.from(r,"utf8"),t])}static streamReader(t){const n=new Z8(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function NI(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function II(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=Qr.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new I0;if(o.includes("version 2"))return NI(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new bd(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return NI(i);const[u,c]=lS(s,"\0","\\x00");if(c.split(" ").map(f=>n.add(f)),u!=="0000000000000000000000000000000000000000 capabilities^{}"){const[f,h]=lS(u," "," ");for(r.set(h,f);;){const m=await i();if(m===!0)break;if(m!==null){const[g,v]=lS(m.toString("utf8")," "," ");r.set(v,g)}}}for(const f of n)if(f.startsWith("symref=")){const h=f.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function lS(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new bd(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const OI=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,jI=(e,t)=>{(t.username||t.password)&&(e.Authorization=sM(t)),t.headers&&Object.assign(e,t.headers)},uS=async e=>{try{const t=Wt.from(await Kb(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Zb{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:u,headers:c,protocolVersion:f}){let{url:h,auth:m}=RI(u);const g=o?OI(o,h):h;(m.username||m.password)&&(c.Authorization=sM(m)),f===2&&(c["Git-Protocol"]="version=2");let v,w,_=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:c}),w=!1,v.statusCode===401||v.statusCode===203){const x=_?i:r;if(x){if(m=await x(h,{...m,headers:{...c}}),m&&m.cancel)throw new Ah;m&&(jI(c,m),_=!0,w=!0)}}else v.statusCode===200&&_&&a&&await a(h,m);while(w);if(v.statusCode!==200){const{response:x}=await uS(v);throw new Qf(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${s}-advertisement`){const x=await II(v.body,{service:s});return x.auth=m,x}else{const{preview:x,response:S,data:E}=await uS(v);try{const C=await II([E],{service:s});return C.auth=m,C}catch{throw new P0(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:u}){const c=RI(i);c&&(i=c.url),r&&(i=OI(r,i)),u["content-type"]=`application/x-${a}-request`,u.accept=`application/x-${a}-result`,jI(u,o);const f=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:u});if(f.statusCode!==200){const{response:h}=uS(f);throw new Qf(f.statusCode,f.statusMessage,h)}return f}}function Dee({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class tw{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Zb),n.set("https",Zb);const r=Dee({url:t});if(!r)throw new L0(t);if(n.has(r.transport))return n.get(r.transport);throw new F0(t,r.transport,r.transport==="ssh"?jee(t):void 0)}}let Lc=null;class Mm{static async read({fs:t,gitdir:n}){Lc===null&&(Lc=new jm);const r=Tt.join(n,"shallow"),a=new Set;return await Lc.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){Lc===null&&(Lc=new jm);const a=Tt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Lc.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Lc.acquire(a,async function(){await t.rm(a)})}}async function Mee({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Pee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Tt.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,u=await Sk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(u.error)throw new An(u.error);if(u.offsets.has(r))return!0}return!1}async function DI({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>Lr({fs:e,cache:t,gitdir:n,oid:s});let o=await Mee({fs:e,gitdir:n,oid:r});return o||(o=await Pee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function Fee(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function lM(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const nw={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Xy{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Lee(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function uM(e){const t=new Xy;let n="";return(async()=>(await H0(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Lee(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class cM{static demux(t){const n=Qr.streamReader(t),r=new Xy,a=new Xy,i=new Xy,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const u=s.slice(1);i.write(u),r.end(),i.end(),a.destroy(new Error(u.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function $ee(e){const{packetlines:t,packfile:n,progress:r}=cM.demux(e),a=[],i=[],o=[];let s=!1,u=!1;return new Promise((c,f)=>{H0(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Hu(g)),a.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Hu(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,v]=m.split(" ");o.push({oid:g,status:v}),v||(u=!0)}else m.startsWith("NAK")?(s=!0,u=!0):(u=!0,s=!0);u&&(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{u||(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Bee({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let u=` ${e.join(" ")}`;for(const c of t)s.push(Qr.encode(`want ${c}${u}
`)),u="";for(const c of r)s.push(Qr.encode(`shallow ${c}
`));a!==null&&s.push(Qr.encode(`deepen ${a}
`)),i!==null&&s.push(Qr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)s.push(Qr.encode(`deepen-not ${c}
`));s.push(Qr.flush());for(const c of n)s.push(Qr.encode(`have ${c}
`));return s.push(Qr.encode(`done
`)),s}async function kk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,ref:c,remoteRef:f,remote:h,url:m,corsProxy:g,depth:v=null,since:w=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:j=!1}){const O=c||await ic({fs:e,gitdir:u,test:!0}),N=await ua.get({fs:e,gitdir:u}),z=h||O&&await N.get(`branch.${O}.remote`)||"origin",H=m||await N.get(`remote.${z}.url`);if(typeof H>"u")throw new Ci("remote OR url");const Q=f||O&&await N.get(`branch.${O}.merge`)||c||"HEAD";g===void 0&&(g=await N.get("http.corsProxy"));const P=tw.getRemoteHelperFor({url:H}),Z=await P.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:H,headers:C,protocolVersion:1}),V=Z.auth,te=Z.refs;if(te.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new Au("shallow","depth");if(w!==null&&!Z.capabilities.has("deepen-since"))throw new Au("deepen-since","since");if(_.length>0&&!Z.capabilities.has("deepen-not"))throw new Au("deepen-not","exclude");if(x===!0&&!Z.capabilities.has("deepen-relative"))throw new Au("deepen-relative","relative");const{oid:ae,fullref:re}=Pt.resolveAgainstMap({ref:Q,map:te});for(const Te of te.keys())Te===re||Te==="HEAD"||Te.startsWith("refs/heads/")||S&&Te.startsWith("refs/tags/")||te.delete(Te);const Y=lM([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${nw.agent}`]);x&&Y.push("deepen-relative");const ne=E?[ae]:te.values(),G=E?[O]:await Pt.listRefs({fs:e,gitdir:u,filepath:"refs"});let X=[];for(let Te of G)try{Te=await Pt.expand({fs:e,gitdir:u,ref:Te});const Ce=await Pt.resolve({fs:e,gitdir:u,ref:Te});await DI({fs:e,cache:t,gitdir:u,oid:Ce})&&X.push(Ce)}catch{}X=[...new Set(X)];const oe=await Mm.read({fs:e,gitdir:u}),ye=Z.capabilities.has("shallow")?[...oe]:[],we=Bee({capabilities:Y,wants:ne,haves:X,shallows:ye,depth:v,since:w,exclude:_}),fe=Wt.from(await Kb(we)),Me=await P.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:H,auth:V,body:[fe],headers:C}),Fe=await $ee(Me.body);Me.headers&&(Fe.headers=Me.headers);for(const Te of Fe.shallows)if(!oe.has(Te))try{const{object:Ce}=await Lr({fs:e,cache:t,gitdir:u,oid:Te}),B=new Mr(Ce),ke=await Promise.all(B.headers().parent.map(ce=>DI({fs:e,cache:t,gitdir:u,oid:ce})));ke.length===0||ke.every(ce=>ce)||oe.add(Te)}catch{oe.add(Te)}for(const Te of Fe.unshallows)oe.delete(Te);if(await Mm.write({fs:e,gitdir:u,oids:oe}),E){const Te=new Map([[re,ae]]),Ce=new Map;let B=10,ke=re;for(;B--;){const se=Z.symrefs.get(ke);if(se===void 0)break;Ce.set(ke,se),ke=se}const Ae=te.get(ke);Ae&&Te.set(ke,Ae);const{pruned:ce}=await Pt.updateRemoteRefs({fs:e,gitdir:u,remote:z,refs:Te,symrefs:Ce,tags:S,prune:A});A&&(Fe.pruned=ce)}else{const{pruned:Te}=await Pt.updateRemoteRefs({fs:e,gitdir:u,remote:z,refs:te,symrefs:Z.symrefs,tags:S,prune:A,pruneTags:j});A&&(Fe.pruned=Te)}if(Fe.HEAD=Z.symrefs.get("HEAD"),Fe.HEAD===void 0){const{oid:Te}=Pt.resolveAgainstMap({ref:"HEAD",map:te});for(const[Ce,B]of te.entries())if(Ce!=="HEAD"&&B===Te){Fe.HEAD=Ce;break}}const Oe=re.startsWith("refs/tags")?"tag":"branch";if(Fe.FETCH_HEAD={oid:ae,description:`${Oe} '${Hc(re)}' of ${H}`},r||a){const Te=uM(Fe.progress);H0(Te,async Ce=>{if(a&&await a(Ce),r){const B=Ce.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);B&&await r({phase:B[1].trim(),loaded:parseInt(B[2],10),total:parseInt(B[3],10)})}})}const Re=Wt.from(await Kb(Fe.packfile));if(Me.body.error)throw Me.body.error;const ze=Re.slice(-20).toString("hex"),He={defaultBranch:Fe.HEAD,fetchHead:Fe.FETCH_HEAD.oid,fetchHeadDescription:Fe.FETCH_HEAD.description};if(Fe.headers&&(He.headers=Fe.headers),A&&(He.pruned=Fe.pruned),ze!==""&&!Fee(Re)){He.packfile=`objects/pack/pack-${ze}.pack`;const Te=Tt.join(u,He.packfile);await e.write(Te,Re);const Ce=ke=>Lr({fs:e,cache:t,gitdir:u,oid:ke}),B=await Jf.fromPack({pack:Re,getExternalRefDelta:Ce,onProgress:r});await e.write(Te.replace(/\.pack$/,".idx"),await B.toBuffer())}return He}async function dM({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Tt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function zee({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:u,dir:c,gitdir:f,url:h,corsProxy:m,ref:g,remote:v,depth:w,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:A,headers:j}){try{if(await dM({fs:e,gitdir:f}),await aM({fs:e,gitdir:f,remote:v,url:h,force:!1}),m){const z=await ua.get({fs:e,gitdir:f});await z.set("http.corsProxy",m),await ua.save({fs:e,gitdir:f,config:z})}const{defaultBranch:O,fetchHead:N}=await kk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:f,ref:g,remote:v,corsProxy:m,depth:w,since:_,exclude:x,relative:S,singleBranch:E,headers:j,tags:!A});if(N===null)return;g=g||O,g=g.replace("refs/heads/",""),await Ek({fs:e,cache:t,onProgress:r,onPostCheckout:u,dir:c,gitdir:f,ref:g,remote:v,noCheckout:C})}catch(O){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),O}}async function Uee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c=Tt.join(u,".git"),url:f,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:v=void 0,since:w=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:A={},cache:j={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",c),E||Qe("dir",u),Qe("url",f),await zee({fs:new nn(e),cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c,url:f,corsProxy:h,ref:m,remote:g,depth:v,since:w,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:A})}catch(O){throw O.caller="git.clone",O}}async function qee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g,cache:v={}}){try{Qe("fs",e),u||Qe("message",a),s&&Qe("onSign",t);const w=new nn(e);return await ew({fs:w,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u,dryRun:c,noUpdateBranch:f,ref:h,parent:m,tree:g})}catch(w){throw w.caller="git.commit",w}}async function Hee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Qe("fs",e),Qe("gitdir",n),await ic({fs:new nn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Vee({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Pt.exists({fs:e,gitdir:t,ref:n}))throw new vr(n);const a=await Pt.expand({fs:e,gitdir:t,ref:n}),i=await ic({fs:e,gitdir:t,fullname:!0});if(a===i){const u=await Pt.resolve({fs:e,gitdir:t,ref:a});await Pt.writeRef({fs:e,gitdir:t,ref:"HEAD",value:u})}await Pt.deleteRef({fs:e,gitdir:t,ref:a});const o=Hc(n),s=await ua.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await ua.save({fs:e,gitdir:t,config:s})}async function Gee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Vee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Wee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{Qe("fs",e),Qe("ref",r),await Pt.deleteRef({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Kee({fs:e,gitdir:t,remote:n}){const r=await ua.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await ua.save({fs:e,gitdir:t,config:r})}async function Zee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("remote",r),await Kee({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Yee({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Pt.deleteRef({fs:e,gitdir:t,ref:n})}async function Xee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Yee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Jee({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Qee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(Tt.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await Sk({fs:e,cache:t,filename:u,getExternalRefDelta:a});if(c.error)throw new An(c.error);for(const f of c.offsets.keys())f.startsWith(r)&&i.push(f)}return i}async function ete({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>Lr({fs:e,cache:t,gitdir:n,oid:s}),i=await Jee({fs:e,gitdir:n,oid:r}),o=await Qee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new T0("oids",r,i):new vr(`an object matching "${r}"`)}async function tte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await ete({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function nte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Pt.expand({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function Ck({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,u)=>({index:u,oid:s}));for(;o.length;){const s=new Set;for(const{oid:c,index:f}of o)a[c]||(a[c]=new Set),a[c].add(f),a[c].size===i&&s.add(c);if(s.size>0)return[...s];const u=new Map;for(const{oid:c,index:f}of o)try{const{object:h}=await Lr({fs:e,cache:t,gitdir:n,oid:c}),m=Mr.from(h),{parent:g}=m.parseHeaders();for(const v of g)(!a[v]||!a[v].has(f))&&u.set(v+":"+f,{oid:v,index:f})}catch{}o=Array.from(u.values())}return[]}const cS=/^.*(\r?\n|$)/gm;function rte({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(cS),u=a.match(cS),c=o.match(cS),f=xQ(s,u,c),h=7;let m="",g=!0;for(const v of f)v.ok&&(m+=v.ok.join("")),v.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=v.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=v.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function ate({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:u="ours",baseName:c="base",theirName:f="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const v=mo({ref:i}),w=mo({ref:o}),_=mo({ref:s}),x=[],S=[],E=[],C=[],A=await Gu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,w,_],map:async function(j,[O,N,z]){const H=qb(j),Q=await Wb(O,N),P=await Wb(z,N);switch(`${Q}-${P}`){case"false-false":return{mode:await N.mode(),path:H,oid:await N.oid(),type:await N.type()};case"false-true":return z?{mode:await z.mode(),path:H,oid:await z.oid(),type:await z.type()}:void 0;case"true-false":return O?{mode:await O.mode(),path:H,oid:await O.oid(),type:await O.type()}:void 0;case"true-true":{if(O&&N&&z&&await O.type()==="blob"&&await N.type()==="blob"&&await z.type()==="blob")return ite({fs:e,gitdir:r,path:H,ours:O,base:N,theirs:z,ourName:u,baseName:c,theirName:f,mergeDriver:g}).then(async Z=>{if(Z.cleanMerge)m||a.insert({filepath:j,oid:Z.mergeResult.oid,stage:0});else if(x.push(j),S.push(j),!m){const V=await N.oid(),te=await O.oid(),ae=await z.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:V,stage:1}),a.insert({filepath:j,oid:te,stage:2}),a.insert({filepath:j,oid:ae,stage:3})}return Z.mergeResult});if(N&&!O&&z&&await N.type()==="blob"&&await z.type()==="blob"){if(x.push(j),E.push(j),!m){const Z=await N.oid(),V=await z.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:Z,stage:1}),a.insert({filepath:j,oid:V,stage:3})}return{mode:await z.mode(),oid:await z.oid(),type:"blob",path:H}}if(N&&O&&!z&&await N.type()==="blob"&&await O.type()==="blob"){if(x.push(j),C.push(j),!m){const Z=await N.oid(),V=await O.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:Z,stage:1}),a.insert({filepath:j,oid:V,stage:2})}return{mode:await O.mode(),oid:await O.oid(),type:"blob",path:H}}if(N&&!O&&!z&&await N.type()==="blob")return;throw new kh}}},reduce:x.length!==0&&(!n||m)?void 0:async(j,O)=>{const N=O.filter(Boolean);if(j&&!(j&&j.type==="tree"&&N.length===0)){if(N.length>0){const H=new Ai(N).toObject(),Q=await Ni({fs:e,gitdir:r,type:"tree",object:H,dryRun:h});j.oid=Q}return j}}});return x.length!==0?(n&&!m&&await Gu({fs:e,cache:t,dir:n,gitdir:r,trees:[mo({ref:A.oid})],map:async function(j,[O]){const N=`${n}/${j}`;if(await O.type()==="blob"){const z=await O.mode(),H=new TextDecoder().decode(await O.content());await e.write(N,H,{mode:z})}return!0}}),new Ch(x,S,E,C)):A.oid}async function ite({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:u,dryRun:c,mergeDriver:f=rte}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Wt.from(await r.content()).toString("utf8"),v=Wt.from(await a.content()).toString("utf8"),w=Wt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await f({branches:[u,o,s],contents:[v,g,w],path:n}),S=await Ni({fs:e,gitdir:t,type:"blob",object:Wt.from(_,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:m,path:n,oid:S,type:h}}}async function fM({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:v,onSign:w,mergeDriver:_}){a===void 0&&(a=await ic({fs:e,gitdir:r,fullname:!0})),a=await Pt.expand({fs:e,gitdir:r,ref:a}),i=await Pt.expand({fs:e,gitdir:r,ref:i});const x=await Pt.resolve({fs:e,gitdir:r,ref:a}),S=await Pt.resolve({fs:e,gitdir:r,ref:i}),E=await Ck({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new kh;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(o&&C===x)return!u&&!c&&await Pt.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new O0;const A=await Ca.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async O=>ate({fs:e,cache:t,dir:n,gitdir:r,index:O,ourOid:x,theirOid:S,baseOid:C,ourName:Hc(a),baseName:"base",theirName:Hc(i),dryRun:u,abortOnConflict:f,mergeDriver:_}));if(A instanceof Ch)throw A;return h||(h=`Merge branch '${Hc(i)}' into ${Hc(a)}`),{oid:await ew({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:A,parent:[x,S],author:m,committer:g,signingKey:v,onSign:w,dryRun:u,noUpdateBranch:c}),tree:A,mergeCommit:!0}}}async function hM({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:u,gitdir:c,ref:f,url:h,remote:m,remoteRef:g,prune:v,pruneTags:w,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:A,committer:j,signingKey:O}){try{if(!f){const H=await ic({fs:e,gitdir:c});if(!H)throw new Ci("ref");f=H}const{fetchHead:N,fetchHeadDescription:z}=await kk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:S,ref:f,url:h,remote:m,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:w});await fM({fs:e,cache:t,gitdir:c,ours:f,theirs:N,fastForward:_,fastForwardOnly:x,message:`Merge ${z}`,author:A,committer:j,signingKey:O,dryRun:!1,noUpdateBranch:!1}),await Ek({fs:e,cache:t,onProgress:r,dir:u,gitdir:c,ref:f,remote:m,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function ote({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,corsProxy:g,singleBranch:v,headers:w={},cache:_={}}){try{Qe("fs",e),Qe("http",t),Qe("gitdir",u);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await hM({fs:new nn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:w,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function ste({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:v=null,since:w=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:j=!1,cache:O={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",u),await kk({fs:new nn(e),cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:u,ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:v,since:w,exclude:_,relative:x,tags:S,singleBranch:E,headers:C,prune:A,pruneTags:j})}catch(N){throw N.caller="git.fetch",N}}async function lte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oids:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await Ck({fs:new nn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function pM({fs:e,filepath:t}){if(await e.exists(Tt.join(t,".git")))return t;{const n=Xf(t);if(n===t)throw new vr(`git root for ${t}`);return pM({fs:e,filepath:n})}}async function ute({fs:e,filepath:t}){try{return Qe("fs",e),Qe("filepath",t),await pM({fs:new nn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function cte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await Dm({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function dte({fs:e,gitdir:t,path:n}){return(await ua.get({fs:e,gitdir:t})).getall(n)}async function fte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await dte({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function hte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Qe("http",e),Qe("url",i);const c=await tw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),f={capabilities:[...c.capabilities]};for(const[h,m]of c.refs){const g=h.split("/"),v=g.pop();let w=f;for(const _ of g)w[_]=w[_]||{},w=w[_];w[v]=m}for(const[h,m]of c.symrefs){const g=h.split("/"),v=g.pop();let w=f;for(const _ of g)w[_]=w[_]||{},w=w[_];w[v]=m}return f}catch(u){throw u.caller="git.getRemoteInfo",u}}function mM(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const u=i.replace("^{}",""),c=a[a.length-1],f=c.ref===u?c:a.find(h=>h.ref===u);if(f===void 0)throw new Error("I did not expect this to happen");f.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function pte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2}){try{Qe("http",e),Qe("url",i);const f=await tw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(f.protocolVersion===2)return{protocolVersion:f.protocolVersion,capabilities:f.capabilities2};const h={};for(const m of f.capabilities){const[g,v]=m.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:mM(f,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function mte({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Eh.wrap({type:e,object:t})),r=await Il(t)),{oid:r,object:t}}async function gte({object:e}){try{Qe("object",e),typeof e=="string"?e=Wt.from(e,"utf8"):e=Wt.from(e);const t="blob",{oid:n,object:r}=await mte({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function yte({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Tt.join(r,i);const o=await e.read(i),s=c=>Lr({fs:e,cache:t,gitdir:a,oid:c}),u=await Jf.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await u.toBuffer()),{oids:[...u.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function bte({fs:e,onProgress:t,dir:n,gitdir:r=Tt.join(n,".git"),filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("dir",n),Qe("gitdir",n),Qe("filepath",a),await yte({fs:new nn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function vte({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Tt.join(n,".git"),defaultBranch:a="master"}){try{return Qe("fs",e),Qe("gitdir",r),t||Qe("dir",n),await dM({fs:new nn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function gM({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await Mm.read({fs:e,gitdir:n});if(!r)throw new Ci("oid");if(!a)throw new Ci("ancestor");if(r===a)return!1;const s=[r],u=new Set;let c=0;for(;s.length;){if(c++===i)throw new D0(i);const f=s.shift(),{type:h,object:m}=await Lr({fs:e,cache:t,gitdir:n,oid:f});if(h!=="commit")throw new mi(f,h,"commit");const g=Mr.from(m).parse();for(const v of g.parent)if(v===a)return!0;if(!o.has(f))for(const v of g.parent)u.has(v)||(s.push(v),u.add(v))}return!1}async function wte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),Qe("ancestor",a),await gM({fs:new nn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function _te({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r),Th.isIgnored({fs:new nn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function xte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listBranches({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function Ste({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Pt.resolve({gitdir:t,fs:e,ref:n}),i=[];return await yM({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ca.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function yM({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await Rh({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await yM({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:Tt.join(i,s.path)}):a.push(Tt.join(i,s.path))}async function Ete({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),await Ste({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function kte({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Pt.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof vr)return[]}return(await Rh({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function Cte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await kte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Ate({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listRefs({fs:new nn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function Tte({fs:e,gitdir:t}){const n=await ua.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function Rte({fs:e,dir:t,gitdir:n=Tt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),await Tte({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Nte(e){const t=Qr.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const u of o){const[c,f]=u.split(":");c==="symref-target"?s.target=f:c==="peeled"&&(s.peeled=f)}n.push(s)}return n}async function Ite({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(Qr.encode(`command=ls-refs
`)),r.push(Qr.encode(`agent=${nw.agent}
`)),(n||t||e)&&r.push(Qr.delim()),n&&r.push(Qr.encode("peel")),t&&r.push(Qr.encode("symrefs")),e&&r.push(Qr.encode(`ref-prefix ${e}`)),r.push(Qr.flush()),r}async function Ote({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2,prefix:c,symrefs:f,peelTags:h}){try{Qe("http",e),Qe("url",i);const m=await Zb.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(m.protocolVersion===1)return mM(m,c,f,h);const g=await Ite({prefix:c,symrefs:f,peelTags:h}),v=await Zb.connect({http:e,auth:m.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return Nte(v.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function jte({fs:e,dir:t,gitdir:n=Tt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listTags({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Dte(e,t){return e.committer.timestamp-t.committer.timestamp}const Mte="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function MI({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Mte)return;const i=r;let o;const s=await th({fs:e,cache:t,gitdir:n,oid:r}),u=s.tree;return a===s.oid?o=s.path:(o=await bM({fs:e,cache:t,gitdir:n,tree:u,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function bM({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const u=r.entries().map(function(c){let f;return c.oid===a?(f=Tt.join(s,c.path),o.push(f)):c.type==="tree"&&(f=Lr({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return bM({fs:e,cache:t,gitdir:n,tree:Ai.from(h),fileId:a,oid:i,filepaths:o,parentPath:Tt.join(s,c.path)})})),f});return await Promise.all(u),o}async function Pte({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),f=[],h=await Mm.read({fs:e,gitdir:n}),m=await Pt.resolve({fs:e,gitdir:n,ref:a}),g=[await rh({fs:e,cache:t,gitdir:n,oid:m})];let v,w,_;function x(S){_&&r&&f.push(S)}for(;g.length>0;){const S=g.pop();if(c!==void 0&&S.commit.committer.timestamp<=c)break;if(r){let E;try{E=await U0({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),w&&v!==E&&f.push(w),v=E,w=S,_=!0}catch(C){if(C instanceof vr){let A=u&&v;if(A&&(A=await MI({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),A))if(Array.isArray(A)){if(w){const j=await MI({fs:e,cache:t,gitdir:n,oid:w.commit.tree,fileId:v});if(Array.isArray(j))if(A=A.filter(O=>j.indexOf(O)===-1),A.length===1)A=A[0],r=A,w&&f.push(w);else{A=!1,w&&f.push(w);break}}}else r=A,w&&f.push(w);if(!A){if(_&&v&&(f.push(w),!s))break;if(!s&&!u)throw C}w=S,_=!1}else throw C}}else f.push(S);if(i!==void 0&&f.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await rh({fs:e,cache:t,gitdir:n,oid:E});g.map(A=>A.oid).includes(C.oid)||g.push(C)}g.length===0&&x(S),g.sort((E,C)=>Dte(E.commit,C.commit))}return f}async function Fte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:u,cache:c={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",a),await Pte({fs:new nn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u})}catch(f){throw f.caller="git.log",f}}async function Lte({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:v,cache:w={},mergeDriver:_}){try{Qe("fs",e),v&&Qe("onSign",t);const x=new nn(e),S=await Wu({fs:x,gitdir:r,author:m});if(!S&&(!s||!o))throw new Ja("author");const E=await nh({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new Ja("committer");return await fM({fs:x,cache:w,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:u,noUpdateBranch:c,abortOnConflict:f,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const $te={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function vM({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),oids:a}){const i=new P8,o=[];function s(f,h){const m=Wt.from(f,h);o.push(m),i.update(m)}async function u({stype:f,object:h}){const m=$te[f];let g=h.length,v=g>15?128:0;const w=g&15;g=g>>>4;let _=(v|m|w).toString(16);for(s(_,"hex");v;)v=g>127?128:0,_=v|g&127,s(M2(2,_),"hex"),g=g>>>7;s(Wt.from(await J8(h)))}s("PACK"),s("00000002","hex"),s(M2(8,a.length),"hex");for(const f of a){const{type:h,object:m}=await Lr({fs:e,cache:t,gitdir:r,oid:f});await u({object:m,stype:h})}const c=i.digest();return o.push(c),o}async function Bte({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await vM({fs:e,cache:t,gitdir:n,oids:r}),o=Wt.from(await Kb(i)),u=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(Tt.join(n,`objects/pack/${u}`),o),{filename:u}):{filename:u,packfile:new Uint8Array(o)}}async function zte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await Bte({fs:new nn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function Ute({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,prune:g=!1,pruneTags:v=!1,fastForward:w=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:A,signingKey:j,cache:O={}}){try{Qe("fs",e),Qe("gitdir",u);const N=new nn(e),z=await Wu({fs:N,gitdir:u,author:C});if(!z)throw new Ja("author");const H=await nh({fs:N,gitdir:u,author:z,committer:A});if(!H)throw new Ja("committer");return await hM({fs:N,cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForward:w,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:z,committer:H,signingKey:j,prune:g,pruneTags:v})}catch(N){throw N.caller="git.pull",N}}async function qte({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),start:a,finish:i}){const o=await Mm.read({fs:e,gitdir:r}),s=new Set,u=new Set;for(const h of a)s.add(await Pt.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Pt.resolve({fs:e,gitdir:r,ref:h});u.add(m)}catch{}const c=new Set;async function f(h){c.add(h);const{type:m,object:g}=await Lr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const w=ci.from(g).headers().object;return f(w)}if(m!=="commit")throw new mi(h,m,"commit");if(!o.has(h)){const w=Mr.from(g).headers().parent;for(h of w)!u.has(h)&&!c.has(h)&&await f(h)}}for(const h of s)await f(h);return c}async function dS({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:u,object:c}=await Lr({fs:e,cache:t,gitdir:r,oid:s});if(u==="tag"){const h=ci.from(c).headers().object;await o(h)}else if(u==="commit"){const h=Mr.from(c).headers().tree;await o(h)}else if(u==="tree"){const f=Ai.from(c);for(const h of f)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function Hte(e){const t={};let n="";const r=Qr.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new bd('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),u=o.slice(3);let c=u.indexOf(" ");c===-1&&(c=u.length);const f=u.slice(0,c),h=u.slice(c+1);t.refs[f]={ok:s==="ok",error:h}}return t}async function Vte({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(Qr.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(Qr.flush()),n}async function Gte({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:u,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:v=!1,delete:w=!1,corsProxy:_,headers:x={}}){const S=f||await ic({fs:e,gitdir:c});if(typeof S>"u")throw new Ci("ref");const E=await ua.get({fs:e,gitdir:c});m=m||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof C>"u")throw new Ci("remote OR url");const A=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Ci("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const j=await Pt.expand({fs:e,gitdir:c,ref:S}),O=w?"0000000000000000000000000000000000000000":await Pt.resolve({fs:e,gitdir:c,ref:j}),N=tw.getRemoteHelperFor({url:C}),z=await N.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),H=z.auth;let Q;if(!A)Q=j;else try{Q=await Pt.expandAgainstMap({ref:A,map:z.refs})}catch(oe){if(oe instanceof vr)Q=A.startsWith("refs/")?A:`refs/heads/${A}`;else throw oe}const P=z.refs.get(Q)||"0000000000000000000000000000000000000000";if(u&&!await u({remote:m,url:C,localRef:{ref:w?"(delete)":j,oid:O},remoteRef:{ref:Q,oid:P}}))throw new Ah;const Z=!z.capabilities.has("no-thin");let V=new Set;if(!w){const oe=[...z.refs.values()];let ye=new Set;if(P!=="0000000000000000000000000000000000000000"){const we=await Ck({fs:e,cache:t,gitdir:c,oids:[O,P]});for(const fe of we)oe.push(fe);Z&&(ye=await dS({fs:e,cache:t,gitdir:c,oids:we}))}if(!oe.includes(O)){const we=await qte({fs:e,cache:t,gitdir:c,start:[O],finish:oe});V=await dS({fs:e,cache:t,gitdir:c,oids:we})}if(Z){try{const we=await Pt.resolve({fs:e,gitdir:c,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:fe}=await Pt.resolveAgainstMap({ref:we.replace(`refs/remotes/${m}/`,""),fullref:we,map:z.refs}),Me=[fe];for(const Fe of await dS({fs:e,cache:t,gitdir:c,oids:Me}))ye.add(Fe)}catch{}for(const we of ye)V.delete(we)}if(O===P&&(v=!0),!v){if(j.startsWith("refs/tags")&&P!=="0000000000000000000000000000000000000000")throw new eh("tag-exists");if(O!=="0000000000000000000000000000000000000000"&&P!=="0000000000000000000000000000000000000000"&&!await gM({fs:e,cache:t,gitdir:c,oid:O,ancestor:P,depth:-1}))throw new eh("not-fast-forward")}}const te=lM([...z.capabilities],["report-status","side-band-64k",`agent=${nw.agent}`]),ae=await Vte({capabilities:te,triplets:[{oldoid:P,oid:O,fullRef:Q}]}),re=w?[]:await vM({fs:e,cache:t,gitdir:c,oids:[...V]}),Y=await N.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:H,headers:x,body:[...ae,...re]}),{packfile:ne,progress:G}=await cM.demux(Y.body);if(a){const oe=uM(G);H0(oe,async ye=>{await a(ye)})}const X=await Hte(ne);if(Y.headers&&(X.headers=Y.headers),m&&X.ok&&X.refs[Q].ok&&!j.startsWith("refs/tags")){const oe=`refs/remotes/${m}/${Q.replace("refs/heads","")}`;w?await Pt.deleteRef({fs:e,gitdir:c,ref:oe}):await Pt.writeRef({fs:e,gitdir:c,ref:oe,value:O})}if(X.ok&&Object.values(X.refs).every(oe=>oe.ok))return X;{const oe=Object.entries(X.refs).filter(([ye,we])=>!we.ok).map(([ye,we])=>`
  - ${ye}: ${we.error}`).join("");throw new j0(oe,X)}}async function Wte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:u,gitdir:c=Tt.join(u,".git"),ref:f,remoteRef:h,remote:m="origin",url:g,force:v=!1,delete:w=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",c),await Gte({fs:new nn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:v,delete:w,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function wM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,wM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new mi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function _M({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await U0({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await wM({fs:e,cache:t,gitdir:n,oid:r})}async function Kte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await _M({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function xM({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await rh({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Zte({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Pt.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await _M({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function Yte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oid",a),await Zte({fs:new nn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function Xte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("oid",r);const u=new nn(e);i!==void 0&&(r=await U0({fs:u,cache:s,gitdir:n,oid:r,filepath:i}));const f=await Lr({fs:u,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(f.oid=r,a==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=Mr.from(f.object).parse();break;case"tree":f.object=Ai.from(f.object).entries();break;case"blob":o?f.object=f.object.toString(o):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=ci.from(f.object).parse();break;default:throw new mi(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(u){throw u.caller="git.readObject",u}}async function Jte({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new mi(r,a,"tag");const o=ci.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function Qte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Jte({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function ene({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Rh({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function tne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r),await Ca.acquire({fs:new nn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function nne({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u}){let c;try{c=await Pt.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof vr))throw v}let h=(await Rh({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const m=await q0({fs:e,gitdir:r,tree:h});return await ew({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:u})}async function rne({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u,cache:c={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i);const f=new nn(e),h=await Wu({fs:f,gitdir:r,author:o});if(!h)throw new Ja("author");const m=await nh({fs:f,gitdir:r,author:h,committer:s});if(!m)throw new Ja("committer");return await nne({fs:f,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:u})}catch(f){throw f.caller="git.removeNote",f}}async function ane({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==xs.clean(r))throw new Vo(r,xs.clean(r));if(n!==xs.clean(n))throw new Vo(n,xs.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await Pt.exists({fs:e,gitdir:t,ref:o}))throw new Ko("branch",r,!1);const u=await Pt.resolve({fs:e,gitdir:t,ref:i,depth:1});await Pt.writeRef({fs:e,gitdir:t,ref:o,value:u}),await Pt.deleteRef({fs:e,gitdir:t,ref:i});const f=await ic({fs:e,gitdir:t,fullname:!0})===i;(a||f)&&await Pt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function ine({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oldref",a),await ane({fs:new nn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function SM({gitdir:e,type:t,object:n}){return Il(Eh.wrap({type:t,object:n}))}async function one({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const o=new nn(e);let s,u;try{s=await Pt.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await U0({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const f=t&&await o.read(Tt.join(t,r));f&&(u=await SM({gitdir:n,type:"blob",object:f}),s===u&&(c=await o.lstat(Tt.join(t,r)))),await Ca.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:c,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function sne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,depth:a}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Pt.resolve({fs:new nn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function lne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r,value:a,append:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("path",r);const o=new nn(e),s=await ua.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await ua.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function EM({fs:e,gitdir:t,commit:n}){const r=Mr.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Yb{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=Yb.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const une={stage:Sh,workdir:z0};let fS;async function ah(e,t){return fS===void 0&&(fS=new jm),fS.acquire(e,t)}async function cne(e,t,n,r,a=null){const i=Tt.join(n,r),o=await e.lstat(i);if(!o)throw new vr(i);if(o.isDirectory())throw new An(`${i}: file expected, but found directory`);const s=a?await W8({fs:e,gitdir:t,oid:a}):void 0;let u=s?a:void 0;return s||await ah({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await e.readlink(i).then(Q8):await e.read(i);if(c===null)throw new vr(i);u=await Ni({fs:e,gitdir:t,type:"blob",object:c})}),u}async function dne({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await q0({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await cne(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function PI({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?une[g]():g),o=[],f=await Gu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,w])=>{if(!(g==="."||await Th.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&w)return(!v||await v.oid()!==await w.oid()&&await w.oid()!==void 0)&&o.push([v,w]),{mode:await w.mode(),path:g,oid:await w.oid(),type:await w.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const w=[];for(const _ of v){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?w.push(_):o.push([null,S])):x&&(S?w.push(_):o.push([x,null]))}return w.length?Promise.all(w.map(g)):[]}});if(o.length===0||f.length===0)return null;const m=(await dne({fs:e,dir:t,gitdir:n,entries:f})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return q0({fs:e,gitdir:n,tree:m})}async function fne({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],u=await Gu({fs:e,cache:{},dir:t,gitdir:n,trees:[mo({ref:a}),mo({ref:r})],map:async(c,[f,h])=>{if(c==="."||await Th.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const m=h?await h.type():await f.type();if(m!=="tree"&&m!=="blob")return;if(!h&&f){const v=m==="tree"?"rmdir":"rm";return m==="tree"&&o.push(c),m==="blob"&&i&&s.push({filepath:c,oid:await f.oid()}),{method:v,filepath:c}}const g=await h.oid();if(!f||await f.oid()!==g)return m==="tree"?{method:"mkdir",filepath:c}:(i&&s.push({filepath:c,oid:g,stats:await e.lstat(Tt.join(t,c))}),{method:"write",filepath:c,oid:g})}});await ah({fs:e,gitdir:n,dirRemoved:o,ops:u},async()=>{for(const c of u){const f=Tt.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(f);break;case"mkdir":await e.mkdir(f);break;case"rm":await e.rm(f);break;case"write":if(!o.some(h=>f.startsWith(h))){const{object:h}=await Lr({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(f)&&await e.rm(f),await e.write(f,h)}break}}}),await Ca.acquire({fs:e,gitdir:n,cache:{}},async c=>{s.forEach(({filepath:f,stats:h,oid:m})=>{c.insert({filepath:f,stats:h,oid:m})})})}class El{constructor({fs:t,dir:n,gitdir:r=Tt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Tt.join(this.gitdir,El.refStash)}get refLogsStashPath(){return Tt.join(this.gitdir,El.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Wu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Ja("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return EM({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Vo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?rh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Pt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:El.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Yb.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await ah({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Yb.getStashReflogEntry(r,t)}}async function hne({fs:e,dir:t,gitdir:n,message:r=""}){const a=new El({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await ic({fs:e,gitdir:n,fullname:!1}),o=await Pt.resolve({fs:e,gitdir:n,ref:"HEAD"}),u=(await xM({fs:e,dir:t,gitdir:n,oid:o})).commit.message,c=[o];let f=null,h=mo({ref:"HEAD"});const m=await PI({fs:e,dir:t,gitdir:n,treePair:[mo({ref:"HEAD"}),"stage"]});if(m){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:c});c.push(_),f=m,h=Sh()}const g=await PI({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(_),f=g}if(!f||!m&&!g)throw new vr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${u}`,w=await a.writeStashCommit({message:v,tree:f,parent:c});return await a.writeStashRef(w),await a.writeStashReflogEntry({stashCommit:w,message:v}),await oM({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),w}async function kM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new El({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const c=(await rh({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await fne({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:c})}}async function CM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new El({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await ah(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const u=a.refLogsStashPath;await ah({reflogEntries:s,stashReflogPath:u,stashMgr:a},async()=>{if(s.length){await e.write(u,s.join(`
`),"utf8");const c=s[s.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(u)})}async function pne({fs:e,dir:t,gitdir:n}){return new El({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function mne({fs:e,dir:t,gitdir:n}){const r=new El({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await ah(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function gne({fs:e,dir:t,gitdir:n,refIdx:r=0}){await kM({fs:e,dir:t,gitdir:n,refIdx:r}),await CM({fs:e,dir:t,gitdir:n,refIdx:r})}async function yne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("op",r);const o={push:hne,apply:kM,drop:CM,list:pne,clear:mne,pop:gne},s=["apply","drop","pop"];try{const u=new nn(e);["refs","logs","logs/refs"].map(h=>Tt.join(n,h)).forEach(async h=>{await u.exists(h)||await u.mkdir(h)});const f=o[r];if(f){if(s.includes(r)&&i<0)throw new Vo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await f({fs:u,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(u){throw u.caller="git.stash",u}}async function bne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const i=new nn(e);if(await Th.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await vne({fs:i,cache:a,gitdir:n}),u=await AM({fs:i,cache:a,gitdir:n,tree:s,path:r}),c=await Ca.acquire({fs:i,gitdir:n,cache:a},async function(w){for(const _ of w)if(_.path===r)return _;return null}),f=await i.lstat(Tt.join(t,r)),h=u!==null,m=c!==null,g=f!==null,v=async()=>{if(m&&!Ub(c,f))return c.oid;{const w=await i.read(Tt.join(t,r)),_=await SM({gitdir:n,type:"blob",object:w});return m&&c.oid===_&&f.size!==-1&&Ca.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:f,oid:_})}),_}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await v()===c.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return u===c.oid,"*deleted";if(h&&g&&!m)return await v()===u?"*undeleted":"*undeletemodified";if(h&&g&&m){const w=await v();return w===u?w===c.oid?"unmodified":"*unmodified":w===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function AM({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:u}=await Lr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const c=Ai.from(u);return AM({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(s==="blob")throw new mi(o.oid,s,"blob",a.join("/"))}return null}async function vne({fs:e,cache:t,gitdir:n}){let r;try{r=await Pt.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof vr)return[]}const{tree:a}=await Rh({fs:e,cache:t,gitdir:n,oid:r});return a}async function wne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const u=new nn(e);return await Gu({fs:u,cache:o,dir:t,gitdir:n,trees:[mo({ref:r}),z0(),Sh()],map:async function(c,[f,h,m]){if(!f&&!m&&h&&!s&&await Th.isIgnored({fs:u,dir:t,filepath:c})||!a.some(j=>iM(c,j)))return null;if(i&&!i(c))return;const[g,v,w]=await Promise.all([f&&f.type(),h&&h.type(),m&&m.type()]),_=[g,v,w].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!_)return;if(w==="commit")return null;if((w==="tree"||w==="special")&&!_)return;const x=g==="blob"?await f.oid():void 0,S=w==="blob"?await m.oid():void 0;let E;g!=="blob"&&v==="blob"&&w!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],A=C.map(j=>C.indexOf(j));return A.shift(),[c,...A]}})}catch(u){throw u.caller="git.statusMatrix",u}}async function _ne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,object:a,force:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const o=new nn(e);if(r===void 0)throw new Ci("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await Pt.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await Pt.exists({fs:o,gitdir:n,ref:r}))throw new Ko("tag",r);await Pt.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function xne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:u,force:c}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",a);const f=new nn(e);if(u)return await Ca.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!c){const g=await f.lstat(Tt.join(t,a));if(g){if(g.isDirectory())throw new Vu("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await f.lstat(Tt.join(t,a)),!h)throw new vr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Vu("directory")}return await Ca.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!s&&!m.has({filepath:a}))throw new vr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await f.readlink(Tt.join(t,a)):await f.read(Tt.join(t,a));i=await Ni({fs:f,gitdir:n,type:"blob",format:"content",object:v})}return m.insert({filepath:a,oid:i,stats:g}),i})}catch(f){throw f.caller="git.updateIndex",f}}function Sne(){try{return nw.version}catch(e){throw e.caller="git.version",e}}async function Ene({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("trees",r),await Gu({fs:new nn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(u){throw u.caller="git.walk",u}}async function kne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),blob:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("blob",r),await Ni({fs:new nn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function Cne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),commit:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("commit",r),await EM({fs:new nn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Ane({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const u=new nn(e);if(i==="parsed"){switch(r){case"commit":a=Mr.from(a).toObject();break;case"tree":a=Ai.from(a).toObject();break;case"blob":a=Wt.from(a,s);break;case"tag":a=ci.from(a).toObject();break;default:throw new mi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Ni({fs:u,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(u){throw u.caller="git.writeObject",u}}async function Tne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("value",a);const s=new nn(e);if(r!==xs.clean(r))throw new Vo(r,xs.clean(r));if(!i&&await Pt.exists({fs:s,gitdir:n,ref:r}))throw new Ko("ref",r);o?await Pt.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await Pt.resolve({fs:s,gitdir:n,ref:a}),await Pt.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function Rne({fs:e,gitdir:t,tag:n}){const r=ci.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Nne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),tag:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tag",r),await Rne({fs:new nn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function Ine({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),tree:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tree",r),await q0({fs:new nn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Pr={Errors:iee,STAGE:Sh,TREE:mo,WORKDIR:z0,add:See,abortMerge:vee,addNote:kee,addRemote:Cee,annotatedTag:Tee,branch:Nee,checkout:oM,clone:Uee,commit:qee,getConfig:cte,getConfigAll:fte,setConfig:lne,currentBranch:Hee,deleteBranch:Gee,deleteRef:Wee,deleteRemote:Zee,deleteTag:Xee,expandOid:tte,expandRef:nte,fastForward:ote,fetch:ste,findMergeBase:lte,findRoot:ute,getRemoteInfo:hte,getRemoteInfo2:pte,hashBlob:gte,indexPack:bte,init:vte,isDescendent:wte,isIgnored:_te,listBranches:xte,listFiles:Ete,listNotes:Cte,listRefs:Ate,listRemotes:Rte,listServerRefs:Ote,listTags:jte,log:Fte,merge:Lte,packObjects:zte,pull:Ute,push:Wte,readBlob:Kte,readCommit:xM,readNote:Yte,readObject:Xte,readTag:Qte,readTree:ene,remove:tne,removeNote:rne,renameBranch:ine,resetIndex:one,updateIndex:xne,resolveRef:sne,status:bne,statusMatrix:wne,tag:_ne,version:Sne,walk:Ene,writeBlob:kne,writeCommit:Cne,writeObject:Ane,writeRef:Tne,writeTag:Nne,writeTree:Ine,stash:yne};function One(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function jne(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:One(e)}async function Dne(e,t){const n=jne(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Mne(e){let t=0;const n=[];await Dne(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Pne(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Fne({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Mne(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?Pne(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,u]of i.headers.entries())r[s]=u;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var Pm={request:Fne};const Fm="https://cors.isomorphic-git.org",ih=new Map,TM=async e=>{const{gitUserName:t,gitUserEmail:n}=qr.getState();if(!t||!n)return ut.error("Git user name and email must be configured in Settings before committing."),!1;try{const r=await Pr.getConfig({fs:Cr,dir:e,path:"user.name"}).catch(()=>null),a=await Pr.getConfig({fs:Cr,dir:e,path:"user.email"}).catch(()=>null);return r!==t&&await Pr.setConfig({fs:Cr,dir:e,path:"user.name",value:t}),a!==n&&await Pr.setConfig({fs:Cr,dir:e,path:"user.email",value:n}),!0}catch(r){return console.error("[VFS Git Op] Error checking/setting Git config:",r),ut.error(`Failed to configure Git user: ${r instanceof Error?r.message:String(r)}`),!1}},Lm=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=ih.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return ut.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(ih.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(ut.error("Authentication cancelled: Password/token not provided."),null)},$m=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),ih.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),ih.delete(n)),null},Bm=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!ih.has(n)&&t.username&&t.password&&(ih.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},Df=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e instanceof Error?e.message:String(e)},Lne=async e=>{const t=Wn(e),n=js(t,".git");try{return(await Zi(n)).isDirectory()}catch(r){return r instanceof Error&&r.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${t}:`,r),!1}},RM=async(e,t,n,r)=>{var i;const a=Wn(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${a}`);try{let o=!1;try{await Zi(js(a,".git")),o=!0}catch(f){if(f.code!=="ENOENT")throw f}if(o)throw console.warn(`[VFS Git Op] Clone target ${a} already contains a .git directory.`),new Error(`Repository already cloned at ${a}.`);const s=Xv(a);if(s!=="/")try{await wh(s,{recursive:!0})}catch(f){if(f.code!=="EEXIST")throw f}let u=n;if(!u)try{if(u=(i=(await Pr.getRemoteInfo({http:Pm,url:t,corsProxy:Fm,onAuth:h=>Lm(h,r),onAuthFailure:$m,onAuthSuccess:Bm})).HEAD)==null?void 0:i.replace("refs/heads/",""),!u)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${u}`)}catch(f){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",f),new Error(`Failed to determine default branch: ${Df(f)}`)}await Pr.clone({fs:Cr,http:Pm,dir:a,corsProxy:Fm,url:t,ref:u,singleBranch:!0,depth:10,onAuth:f=>Lm(f,r),onAuthFailure:$m,onAuthSuccess:Bm,onProgress:f=>{f.phase==="counting objects"&&f.total?console.log(`Clone progress: ${f.phase} ${f.loaded}/${f.total}`):f.phase==="receiving objects"&&f.total?console.log(`Clone progress: ${f.phase} ${f.loaded}/${f.total}`):console.log(`Clone progress: ${f.phase}`)}}),await Zi(js(a,".git"));const c=await Pr.currentBranch({fs:Cr,dir:a,fullname:!1}).catch(()=>null);c!==u&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${c}, expected ${u}. Checking out...`),await Pr.checkout({fs:Cr,dir:a,ref:u})),ut.success(`Repository cloned successfully into ${a} (branch: ${u}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(o){console.error(`[VFS Git Op] Git clone failed for ${t}:`,o);const s=Df(o);if(o instanceof Error&&o.message.includes("already cloned")||ut.error(`Git clone failed: ${s}`),!(o instanceof Error&&o.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${a}`),await k0(a,{recursive:!0,force:!0})}catch(u){console.warn("[VFS Git Op] Failed cleanup after clone error:",u)}throw o}},NM=async e=>{const t=Wn(e);try{await Pr.init({fs:Cr,dir:t}),ut.success(`Initialized empty Git repository in "${ea(t)}"`)}catch(n){throw console.error(`[VFS Git Op] Git init failed for ${t}:`,n),ut.error(`Git init failed: ${n instanceof Error?n.message:String(n)}`),n}},Ak=async(e,t)=>{const n=Wn(e);try{if(!await TM(n))throw new Error("Git user configuration is missing or invalid.");if(await Pr.add({fs:Cr,dir:n,filepath:"."}),!(await Pr.statusMatrix({fs:Cr,dir:n})).some(([,s])=>s!==0)){ut.info("No changes detected to commit.");return}const o=await Pr.commit({fs:Cr,dir:n,message:t,author:{name:qr.getState().gitUserName,email:qr.getState().gitUserEmail}});ut.success(`Changes committed: ${o.substring(0,7)}`)}catch(r){throw console.error(`[VFS Git Op] Git commit failed for ${n}:`,r),ut.error(`Git commit failed: ${r instanceof Error?r.message:String(r)}`),r}},rw=async(e,t,n)=>{const r=Wn(e);try{if(!await TM(r))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");const i=await Pr.currentBranch({fs:Cr,dir:r,fullname:!1}).catch(()=>null);if(i!==t){console.log(`[VFS Git Op] Current branch is ${i}, switching to ${t} before pull...`);try{await Pr.checkout({fs:Cr,dir:r,ref:t}),console.log(`[VFS Git Op] Successfully checked out branch ${t}.`)}catch(u){if(u.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to create from origin/${t}...`);try{await Pr.fetch({fs:Cr,http:Pm,dir:r,corsProxy:Fm,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:c=>Lm(c,n),onAuthFailure:$m,onAuthSuccess:Bm}),await Pr.branch({fs:Cr,dir:r,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(c){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,c),new Error(`Failed to switch to or create local branch "${t}": ${Df(c)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,u),new Error(`Failed to checkout branch "${t}": ${Df(u)}`)}}console.log(`[VFS Git Op] Fetching ${t} for ${r}`),await Pr.fetch({fs:Cr,http:Pm,dir:r,corsProxy:Fm,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>Lm(u,n),onAuthFailure:$m,onAuthSuccess:Bm}),console.log("[VFS Git Op] Fetch successful.");const o=await Pr.resolveRef({fs:Cr,dir:r,ref:"FETCH_HEAD"}).catch(()=>null);if(!o)try{const u=`refs/remotes/origin/${t}`,c=await Pr.resolveRef({fs:Cr,dir:r,ref:u}),f=await Pr.resolveRef({fs:Cr,dir:r,ref:t});if(c===f){ut.info(`Branch "${t}" is already up-to-date.`),console.log(`[VFS Git Op] Branch ${t} already up-to-date.`);return}else console.warn(`[VFS Git Op] FETCH_HEAD missing after fetch, but remote ref ${u} exists. Proceeding with merge attempt.`)}catch(u){throw console.error("[VFS Git Op] Error resolving refs after fetch:",u),new Error(`Could not confirm remote branch "${t}" state after fetch.`)}console.log(`[VFS Git Op] Merging FETCH_HEAD (${o}) into ${t}`);const s=await Pr.merge({fs:Cr,dir:r,ours:t,theirs:"FETCH_HEAD",fastForward:!1,author:{name:qr.getState().gitUserName,email:qr.getState().gitUserEmail}});if(console.log("[VFS Git Op] Merge result:",s),s.oid)await Pr.resolveRef({fs:Cr,dir:r,ref:"HEAD"})===o?(ut.success(`Pulled and fast-forwarded changes for "${ea(r)}"`),console.log(`[VFS Git Op] Pull/Fast-forward successful for ${r}`)):(ut.success(`Pulled and merged changes (merge commit created) for "${ea(r)}"`),console.log(`[VFS Git Op] Pull/Merge successful (merge commit) for ${r}`));else if(s.alreadyMerged)ut.info(`Branch "${t}" is already up-to-date.`),console.log(`[VFS Git Op] Branch ${t} already up-to-date.`);else throw console.error("[VFS Git Op] Merge failed after fetch:",s),new Error("Merge failed after fetch. Conflicts likely occurred. Resolve manually.")}catch(a){throw console.error(`[VFS Git Op] Git pull (fetch/merge) failed for ${r}:`,a),ut.error(`Git pull failed: ${Df(a)}`),a}},Tk=async(e,t,n)=>{var a,i;const r=Wn(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${r}`);const o=await Pr.push({fs:Cr,http:Pm,dir:r,corsProxy:Fm,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:s=>Lm(s,n),onAuthFailure:$m,onAuthSuccess:Bm});if(o!=null&&o.ok)ut.success(`Pushed changes successfully for "${ea(r)}"`);else if((a=o==null?void 0:o.error)!=null&&a.includes("up-to-date"))ut.info(`Branch "${t}" already up-to-date on remote.`);else throw(i=o==null?void 0:o.error)!=null&&i.includes("rejected")?(ut.error(`Push rejected for "${ea(r)}". Pull changes first.`),new Error(o.error)):new Error((o==null?void 0:o.error)||"Push rejected by remote")}catch(o){throw console.error(`[VFS Git Op] Git push failed for ${r}:`,o),o instanceof Error&&o.message.includes("rejected")||ut.error(`Git push failed: ${Df(o)}`),o}},IM=async e=>{const t=Wn(e);console.log(`[VFS Git Op] Git Status on ${t}`);try{const n=await Pr.statusMatrix({fs:Cr,dir:t});console.log("Git Status Matrix:",n);const r=n.map(([a,i,o,s])=>{let u="";return s===2&&(u+="INDEX_Modified "),s===3&&(u+="INDEX_Added "),i===0&&o===2?u+="WT_New":i===1&&o===2?u+="WT_Modified":i===1&&o===0?u+="WT_Deleted":i===1&&o===1&&s===0&&(u="Unmodified"),(!u||u==="INDEX_Unmodified ")&&(u=`h:${i} w:${o} s:${s}`),`${a}: ${u.trim()}`}).filter(a=>!a.endsWith("Unmodified")).join(`
`);ut.info(`Git Status for "${ea(t)}":
${r||"No changes"}`,{duration:15e3})}catch(n){throw console.error(`[VFS Git Op] Git status failed for ${t}:`,n),ut.error(`Git status failed: ${n instanceof Error?n.message:String(n)}`),n}},td=async e=>{const t=Wn(e);if(t!=="/")try{await wh(t,{recursive:!0})}catch(n){if(n instanceof Error&&n.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${t}`);return}throw console.error(`[VFS Op] Failed to create directory ${t}:`,n),ut.error(`Error creating directory "${ea(t)}": ${n instanceof Error?n.message:String(n)}`),n}},OM=async e=>{try{const t={backend:UJ,name:`litechat_vfs_${e}`};return await DJ(t),Cr}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),ut.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},Rk=async e=>{const t=Wn(e);try{try{await Zi(t)}catch(o){if(o.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${t}`),await td(t),[];throw o}const r=(await nc(t)).map(async o=>{const s=js(t,o);try{const u=await Zi(s);return{name:o,path:s,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${s}:`,u),null}});return(await Promise.all(r)).filter(o=>o!==null)}catch(n){throw console.error(`[VFS Op] Failed to list directory ${t}:`,n),ut.error(`Error listing files: ${n instanceof Error?n.message:String(n)}`),n}},Nh=async e=>{const t=Wn(e);try{const n=await S0(t);return Ei.emit(Bb.VFS_FILE_READ,{path:t}),n}catch(n){throw console.error(`[VFS Op] Failed to read file ${t}:`,n),ut.error(`Error reading file "${ea(t)}": ${n instanceof Error?n.message:String(n)}`),n}},aw=async(e,t)=>{const n=Wn(e),r=Xv(n);try{r!=="/"&&await td(r),await E0(n,t),Ei.emit(Bb.VFS_FILE_WRITTEN,{path:n})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${n}:`,a),ut.error(`Error writing file "${ea(n)}": ${a instanceof Error?a.message:String(a)}`)),a}},Nk=async(e,t=!1)=>{const n=Wn(e);if(n==="/")throw ut.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await Zi(n)).isDirectory()?(await k0(n,{recursive:t}),Ei.emit(Bb.VFS_FILE_DELETED,{path:n})):(await x0(n),Ei.emit(Bb.VFS_FILE_DELETED,{path:n})),ut.success(`"${ea(n)}" deleted.`)}catch(r){if(r instanceof Error&&r.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${n}`);return}throw console.error(`[VFS Op] Failed to delete ${n}:`,r),ut.error(`Error deleting "${ea(n)}": ${r instanceof Error?r.message:String(r)}`),r}},jM=async e=>{await td(e)},$ne=async(e,t)=>{try{const n=await Nh(e),r=new Blob([n]),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a;const o=Wn(e);i.download=t||ea(o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(n){console.error(`[VFS Op] Failed to initiate download for ${e}:`,n),n instanceof Error&&n.message.includes("Error reading file")||ut.error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}},DM=async(e,t)=>{const n=Wn(t);let r=0,a=0;const i=Array.from(e);try{await td(n);for(const o of i){const s=js(n,o.name);try{const u=await o.arrayBuffer();await aw(s,new Uint8Array(u)),r++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${o.name}:`,u)}}}catch(o){a=i.length,console.error(`[VFS Op] Failed to prepare target directory ${n} for upload:`,o)}finally{a>0&&r>0?ut.warning(`Upload complete with issues. ${r} succeeded, ${a} failed.`):a===0&&r>0&&ut.success(`Successfully uploaded ${r} file(s) to ${n==="/"?"root":ea(n)}.`)}},Bne=async(e,t)=>{if(!e.name.toLowerCase().endsWith(".zip")){ut.error("Please select a valid ZIP file.");return}const n=Wn(t);let r;try{await td(n),r=await M8.loadAsync(e);const a=Object.values(r.files),i=await Promise.allSettled(a.map(async c=>{const f=js(n,c.name);if(c.dir)await td(f);else{const h=await c.async("uint8array");await aw(f,h)}return{name:c.name,isDir:c.dir}}));let o=0,s=0,u=0;i.forEach(c=>{c.status==="fulfilled"&&c.value?c.value.isDir?s++:o++:c.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",c.reason))}),u>0?ut.warning(`Finished extracting "${e.name}". ${o+s} items succeeded, ${u} failed.`):ut.success(`Successfully extracted ${o} files and ${s} folders from "${e.name}" to ${n==="/"?"root":ea(n)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),ut.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},FI=async(e,t="/")=>{const n=new M8,r=Wn(t),a=ea(r)||"root";try{try{if(!(await Zi(r)).isDirectory()){ut.error(`Cannot export: "${a}" is not a directory.`);return}}catch(f){f instanceof Error&&f.code==="ENOENT"?ut.error(`Cannot export: Path "${a}" not found.`):ut.error(`Cannot export: Error accessing path "${a}". ${f instanceof Error?f.message:String(f)}`);return}const i=async(f,h)=>{const m=await Rk(f);for(const g of m)if(g.isDirectory){if(g.name===".git")continue;const v=h.folder(g.name);if(v)await i(g.path,v);else throw new Error(`Failed to create subfolder ${g.name} in zip.`)}else{const v=await Nh(g.path);h.file(g.name,v)}};await i(r,n);const o=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s;const c=`vfs_${a}_export.zip`;u.download=e||c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),ut.success(`"${a}" exported as ${u.download}.`)}catch(i){console.error("[VFS Op] Failed to download all as zip:",i),i instanceof Error&&(i.message.includes("Error listing files")||i.message.includes("Error reading file")||i.message.includes("Cannot export"))||ut.error(`ZIP export failed: ${i instanceof Error?i.message:String(i)}`)}},MM=async(e,t)=>{const n=Wn(e),r=Wn(t);if(n==="/"||r==="/")throw ut.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(n!==r)try{const a=Xv(r);a!=="/"&&await td(a),await hk(n,r),ut.success(`Renamed "${ea(n)}" to "${ea(r)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||ut.error(`Rename failed: Original item "${ea(n)}" not found.`):a instanceof Error&&a.code==="EEXIST"?ut.error(`Rename failed: An item named "${ea(r)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||ut.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${n} to ${r}:`,a),a}},LI=Cr,zne=1024*5,Une=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},qne=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},Hne=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],Vne=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:Hne.some(r=>n.endsWith(r))},PM=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=L.useState(null),[i,o]=L.useState(null),[s,u]=L.useState(!1),[c,f]=L.useState(!0),h=e.type||"application/octet-stream",m=Vne(e.name,h),g=h.startsWith("image/"),v=h.startsWith("audio/"),w=h.startsWith("video/"),_=e.source==="vfs";L.useEffect(()=>{let j=null;return o(null),e.source==="direct"&&!m&&e.contentBase64?(j=Une(e.contentBase64,h),j||o("Failed to decode file content for preview."),a(j)):a(null),e.source==="direct"&&m&&e.contentText&&e.contentText.length>zne?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&m&&e.contentText===void 0&&o("Text content missing from metadata."),()=>{j&&(URL.revokeObjectURL(j),a(null))}},[e.id,e.source,e.contentBase64,e.contentText,h,m]);const x=async()=>{if(e.source==="vfs"){ut.info("File is already in VFS.");return}const j=qne(e);if(!j){ut.error("Cannot add to VFS: Failed to reconstruct file data.");return}u(!0);try{await DM([j],"/"),ut.success(`"${e.name}" added to VFS root.`)}catch(O){console.error("Failed to add file to VFS:",O),ut.error(`Failed to add "${e.name}" to VFS.`)}finally{u(!1)}},S=()=>f(j=>!j),E=()=>_?y.jsx(p6,{className:"h-5 w-5 text-cyan-500"}):m?y.jsx(cz,{className:"h-5 w-5 text-blue-500"}):g?y.jsx(Rz,{className:"h-5 w-5 text-purple-500"}):v?y.jsx(Lz,{className:"h-5 w-5 text-green-500"}):w?y.jsx(f7,{className:"h-5 w-5 text-orange-500"}):y.jsx(lz,{className:"h-5 w-5 text-muted-foreground"}),C=()=>_?y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(Ff,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):m&&e.contentText!==void 0?y.jsx(CD,{lang:h==="text/markdown"?"markdown":"text",code:e.contentText}):g&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):v&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):w&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),A=L.useMemo(()=>{let j="File";return _?j="VFS File":m?j="Text":g?j="Image":v?j="Audio":w&&(j="Video"),`${j} (${zb(e.size)})`},[_,m,g,v,w,e.size]);return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[E(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",zb(e.size),")"]}),_&&e.path&&y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(Nn,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:S,"aria-label":c?"Unfold preview":"Fold preview",children:y.jsx(c6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:c?"Unfold":"Fold"})]})}),!n&&t&&y.jsxs(y.Fragment,{children:[e.source==="direct"&&y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:x,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Xn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(f6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{children:"Add to VFS"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(Zu,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{children:"Remove from Prompt"})]})})]})]})]}),c?y.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:S,children:A}):y.jsx("div",{className:Ut("p-2 max-h-80 overflow-y-auto"),children:C()})]})},FM=6048e5,Gne=864e5,My=43200,$I=1440,BI=Symbol.for("constructDateFrom");function Ol(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&BI in e?e[BI](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ra(e,t){return Ol(t||e,e)}let Wne={};function V0(){return Wne}function zm(e,t){var s,u,c,f;const n=V0(),r=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,a=Ra(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Xb(e,t){return zm(e,{...t,weekStartsOn:1})}function LM(e,t){const n=Ra(e,t==null?void 0:t.in),r=n.getFullYear(),a=Ol(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Xb(a),o=Ol(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=Xb(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function Jb(e){const t=Ra(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function iw(e,...t){const n=Ol.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function zI(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Kne(e,t,n){const[r,a]=iw(n==null?void 0:n.in,e,t),i=zI(r),o=zI(a),s=+i-Jb(i),u=+o-Jb(o);return Math.round((s-u)/Gne)}function Zne(e,t){const n=LM(e,t),r=Ol(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Xb(r)}function Jy(e,t){const n=+Ra(e)-+Ra(t);return n<0?-1:n>0?1:n}function Yne(e){return Ol(e,Date.now())}function Xne(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Jne(e){return!(!Xne(e)&&typeof e!="number"||isNaN(+Ra(e)))}function Qne(e,t,n){const[r,a]=iw(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function ere(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function tre(e,t){return+Ra(e)-+Ra(t)}function nre(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function rre(e,t){const n=Ra(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function are(e,t){const n=Ra(e,t==null?void 0:t.in);return+nre(n,t)==+rre(n,t)}function ire(e,t,n){const[r,a,i]=iw(n==null?void 0:n.in,e,e,t),o=Jy(a,i),s=Math.abs(Qne(a,i));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*s);let u=Jy(a,i)===-o;are(r)&&s===1&&Jy(r,i)===1&&(u=!1);const c=o*(s-+u);return c===0?0:c}function ore(e,t,n){const r=tre(e,t)/1e3;return ere(n==null?void 0:n.roundingMethod)(r)}function sre(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const lre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ure=(e,t,n)=>{let r;const a=lre[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hS(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const cre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hre={date:hS({formats:cre,defaultWidth:"full"}),time:hS({formats:dre,defaultWidth:"full"}),dateTime:hS({formats:fre,defaultWidth:"full"})},pre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mre=(e,t,n,r)=>pre[e];function Vp(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const gre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_re={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xre=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Sre={ordinalNumber:xre,era:Vp({values:gre,defaultWidth:"wide"}),quarter:Vp({values:yre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Vp({values:bre,defaultWidth:"wide"}),day:Vp({values:vre,defaultWidth:"wide"}),dayPeriod:Vp({values:wre,defaultWidth:"wide",formattingValues:_re,defaultFormattingWidth:"wide"})};function Gp(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?kre(s,h=>h.test(o)):Ere(s,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(o.length);return{value:c,rest:f}}}function Ere(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function kre(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Cre(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const Are=/^(\d+)(th|st|nd|rd)?/i,Tre=/\d+/i,Rre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nre={any:[/^b/i,/^(a|c)/i]},Ire={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ore={any:[/1/i,/2/i,/3/i,/4/i]},jre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Dre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Pre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Fre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$re={ordinalNumber:Cre({matchPattern:Are,parsePattern:Tre,valueCallback:e=>parseInt(e,10)}),era:Gp({matchPatterns:Rre,defaultMatchWidth:"wide",parsePatterns:Nre,defaultParseWidth:"any"}),quarter:Gp({matchPatterns:Ire,defaultMatchWidth:"wide",parsePatterns:Ore,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Gp({matchPatterns:jre,defaultMatchWidth:"wide",parsePatterns:Dre,defaultParseWidth:"any"}),day:Gp({matchPatterns:Mre,defaultMatchWidth:"wide",parsePatterns:Pre,defaultParseWidth:"any"}),dayPeriod:Gp({matchPatterns:Fre,defaultMatchWidth:"any",parsePatterns:Lre,defaultParseWidth:"any"})},$M={code:"en-US",formatDistance:ure,formatLong:hre,formatRelative:mre,localize:Sre,match:$re,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bre(e,t){const n=Ra(e,t==null?void 0:t.in);return Kne(n,sre(n))+1}function zre(e,t){const n=Ra(e,t==null?void 0:t.in),r=+Xb(n)-+Zne(n);return Math.round(r/FM)+1}function BM(e,t){var f,h,m,g;const n=Ra(e,t==null?void 0:t.in),r=n.getFullYear(),a=V0(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Ol((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=zm(o,t),u=Ol((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=zm(u,t);return+n>=+s?r+1:+n>=+c?r:r-1}function Ure(e,t){var s,u,c,f;const n=V0(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,a=BM(e,t),i=Ol((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),zm(i,t)}function qre(e,t){const n=Ra(e,t==null?void 0:t.in),r=+zm(n,t)-+Ure(n,t);return Math.round(r/FM)+1}function cr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const xu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return cr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):cr(n+1,2)},d(e,t){return cr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return cr(e.getHours()%12||12,t.length)},H(e,t){return cr(e.getHours(),t.length)},m(e,t){return cr(e.getMinutes(),t.length)},s(e,t){return cr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return cr(a,t.length)}},vf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},UI={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return xu.y(e,t)},Y:function(e,t,n,r){const a=BM(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return cr(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):cr(i,t.length)},R:function(e,t){const n=LM(e);return cr(n,t.length)},u:function(e,t){const n=e.getFullYear();return cr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return cr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return cr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return xu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return cr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=qre(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):cr(a,t.length)},I:function(e,t,n){const r=zre(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):cr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):xu.d(e,t)},D:function(e,t,n){const r=Bre(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):cr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return cr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return cr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return cr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=vf.noon:r===0?a=vf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=vf.evening:r>=12?a=vf.afternoon:r>=4?a=vf.morning:a=vf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):xu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):xu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):xu.s(e,t)},S:function(e,t){return xu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return HI(r);case"XXXX":case"XX":return $c(r);case"XXXXX":case"XXX":default:return $c(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return HI(r);case"xxxx":case"xx":return $c(r);case"xxxxx":case"xxx":default:return $c(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+qI(r,":");case"OOOO":default:return"GMT"+$c(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+qI(r,":");case"zzzz":default:return"GMT"+$c(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return cr(r,t.length)},T:function(e,t,n){return cr(+e,t.length)}};function qI(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+cr(i,2)}function HI(e,t){return e%60===0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):$c(e,t)}function $c(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=cr(Math.trunc(r/60),2),i=cr(r%60,2);return n+a+t+i}const VI=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},zM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Hre=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return VI(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",VI(r,t)).replace("{{time}}",zM(a,t))},Vre={p:zM,P:Hre},Gre=/^D+$/,Wre=/^Y+$/,Kre=["D","DD","YY","YYYY"];function Zre(e){return Gre.test(e)}function Yre(e){return Wre.test(e)}function Xre(e,t,n){const r=Jre(e,t,n);if(console.warn(r),Kre.includes(e))throw new RangeError(r)}function Jre(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tae=/^'([^]*?)'?$/,nae=/''/g,rae=/[a-zA-Z]/;function GI(e,t,n){var f,h,m,g;const r=V0(),a=r.locale??$M,i=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,s=Ra(e,n==null?void 0:n.in);if(!Jne(s))throw new RangeError("Invalid time value");let u=t.match(eae).map(v=>{const w=v[0];if(w==="p"||w==="P"){const _=Vre[w];return _(v,a.formatLong)}return v}).join("").match(Qre).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:aae(v)};if(UI[w])return{isToken:!0,value:v};if(w.match(rae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(u=a.localize.preprocessor(s,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(v=>{if(!v.isToken)return v.value;const w=v.value;(Yre(w)||Zre(w))&&Xre(w,t,String(e));const _=UI[w[0]];return _(s,w,a.localize,c)}).join("")}function aae(e){const t=e.match(tae);return t?t[1].replace(nae,"'"):e}function iae(e,t,n){const r=V0(),a=(n==null?void 0:n.locale)??r.locale??$M,i=2520,o=Jy(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,c]=iw(n==null?void 0:n.in,...o>0?[t,e]:[e,t]),f=ore(c,u),h=(Jb(c)-Jb(u))/1e3,m=Math.round((f-h)/60);let g;if(m<2)return n!=null&&n.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,s):f<10?a.formatDistance("lessThanXSeconds",10,s):f<20?a.formatDistance("lessThanXSeconds",20,s):f<40?a.formatDistance("halfAMinute",0,s):f<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):m===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",m,s);if(m<45)return a.formatDistance("xMinutes",m,s);if(m<90)return a.formatDistance("aboutXHours",1,s);if(m<$I){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,s)}else{if(m<i)return a.formatDistance("xDays",1,s);if(m<My){const v=Math.round(m/$I);return a.formatDistance("xDays",v,s)}else if(m<My*2)return g=Math.round(m/My),a.formatDistance("aboutXMonths",g,s)}if(g=ire(c,u),g<12){const v=Math.round(m/My);return a.formatDistance("xMonths",v,s)}else{const v=g%12,w=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",w,s):v<9?a.formatDistance("overXYears",w,s):a.formatDistance("almostXYears",w+1,s)}}function UM(e,t){return iae(e,Yne(e),t)}const Ik=wt.memo(({turnData:e,timestamp:t,className:n})=>{var o,s;const r=t?UM(new Date(t),{addSuffix:!0}):"Sending...",a=((o=e.metadata)==null?void 0:o.attachedFiles)&&e.metadata.attachedFiles.length>0,i=e.content&&e.content.trim().length>0;return y.jsxs("div",{className:Ut("user-prompt",n),children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"User"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:r})]}),a&&y.jsx("div",{className:"mb-2 space-y-1",children:(s=e.metadata.attachedFiles)==null?void 0:s.map(u=>y.jsx(PM,{fileMeta:u,isReadOnly:!0},u.id))}),i&&y.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]})});Ik.displayName="UserPromptDisplay";const WI={};function oae(e){let t=WI[e];if(t)return t;t=WI[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function oh(e,t){typeof t!="string"&&(t=oh.defaultChars);const n=oae(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=s<<6&1984|u&63;c<128?a+="":a+=String.fromCharCode(c),i+=3;continue}}if((s&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const f=s<<12&61440|u<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="":a+=String.fromCharCode(f),i+=6;continue}}if((s&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),f=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(f&192)===128){let h=s<<18&1835008|u<<12&258048|c<<6&4032|f&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}oh.defaultChars=";/?:@&=+$,#";oh.componentChars="";const KI={};function sae(e){let t=KI[e];if(t)return t;t=KI[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function G0(e,t,n){typeof t!="string"&&(n=t,t=G0.defaultChars),typeof n>"u"&&(n=!0);const r=sae(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const u=e.charCodeAt(i+1);if(u>=56320&&u<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}G0.defaultChars=";/?:@&=+$,-_.!~*'()#";G0.componentChars="-_.!~*'()";function Ok(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Qb(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const lae=/^([a-z0-9.+-]+:)/i,uae=/:[0-9]*$/,cae=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,dae=["<",">",'"',"`"," ","\r",`
`,"	"],fae=["{","}","|","\\","^","`"].concat(dae),hae=["'"].concat(fae),ZI=["%","/","?",";","#"].concat(hae),YI=["/","?","#"],pae=255,XI=/^[+a-z0-9A-Z_-]{0,63}$/,mae=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,JI={javascript:!0,"javascript:":!0},QI={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function jk(e,t){if(e&&e instanceof Qb)return e;const n=new Qb;return n.parse(e,t),n}Qb.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=cae.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=lae.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&JI[o])&&(i=i.substr(2),this.slashes=!0)),!JI[o]&&(a||o&&!QI[o])){let c=-1;for(let v=0;v<YI.length;v++)r=i.indexOf(YI[v]),r!==-1&&(c===-1||r<c)&&(c=r);let f,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(f=i.slice(0,h),i=i.slice(h+1),this.auth=f),c=-1;for(let v=0;v<ZI.length;v++)r=i.indexOf(ZI[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const m=i.slice(0,c);i=i.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let w=0,_=v.length;w<_;w++){const x=v[w];if(x&&!x.match(XI)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(XI)){const E=v.slice(0,w),C=v.slice(w+1),A=x.match(mae);A&&(E.push(A[1]),C.unshift(A[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>pae&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),QI[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Qb.prototype.parseHost=function(e){let t=uae.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const gae=Object.freeze(Object.defineProperty({__proto__:null,decode:oh,encode:G0,format:Ok,parse:jk},Symbol.toStringTag,{value:"Module"})),qM=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,HM=/[\0-\x1F\x7F-\x9F]/,yae=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Dk=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,VM=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,GM=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,bae=Object.freeze(Object.defineProperty({__proto__:null,Any:qM,Cc:HM,Cf:yae,P:Dk,S:VM,Z:GM},Symbol.toStringTag,{value:"Module"})),vae=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),wae=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var pS;const _ae=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),xae=(pS=String.fromCodePoint)!==null&&pS!==void 0?pS:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Sae(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=_ae.get(e))!==null&&t!==void 0?t:e}var ka;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ka||(ka={}));const Eae=32;var Tu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Tu||(Tu={}));function P2(e){return e>=ka.ZERO&&e<=ka.NINE}function kae(e){return e>=ka.UPPER_A&&e<=ka.UPPER_F||e>=ka.LOWER_A&&e<=ka.LOWER_F}function Cae(e){return e>=ka.UPPER_A&&e<=ka.UPPER_Z||e>=ka.LOWER_A&&e<=ka.LOWER_Z||P2(e)}function Aae(e){return e===ka.EQUALS||Cae(e)}var xa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(xa||(xa={}));var ku;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(ku||(ku={}));class Tae{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=xa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ku.Strict}startEntity(t){this.decodeMode=t,this.state=xa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case xa.EntityStart:return t.charCodeAt(n)===ka.NUM?(this.state=xa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=xa.NamedEntity,this.stateNamedEntity(t,n));case xa.NumericStart:return this.stateNumericStart(t,n);case xa.NumericDecimal:return this.stateNumericDecimal(t,n);case xa.NumericHex:return this.stateNumericHex(t,n);case xa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Eae)===ka.LOWER_X?(this.state=xa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=xa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(P2(a)||kae(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(P2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ka.SEMI)this.consumed+=1;else if(this.decodeMode===ku.Strict)return 0;return this.emitCodePoint(Sae(this.result),this.consumed),this.errors&&(t!==ka.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Tu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Rae(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===ku.Attribute&&(i===0||Aae(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Tu.VALUE_LENGTH)>>14,i!==0){if(o===ka.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==ku.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Tu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Tu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case xa.NamedEntity:return this.result!==0&&(this.decodeMode!==ku.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case xa.NumericDecimal:return this.emitNumericEntity(0,2);case xa.NumericHex:return this.emitNumericEntity(0,3);case xa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case xa.EntityStart:return 0}}}function WM(e){let t="";const n=new Tae(e,r=>t+=xae(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const c=n.write(a,s+1);if(c<0){o=s+n.end();break}o=s+c,s=c===0?o+1:o}const u=t+a.slice(o);return t="",u}}function Rae(e,t,n,r){const a=(t&Tu.BRANCH_LENGTH)>>7,i=t&Tu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=a?-1:e[n+u]-1}let o=n,s=o+a-1;for(;o<=s;){const u=o+s>>>1,c=e[u];if(c<r)o=u+1;else if(c>r)s=u-1;else return e[u+a]}return-1}const Nae=WM(vae);WM(wae);function KM(e,t=ku.Legacy){return Nae(e,t)}function Iae(e){return Object.prototype.toString.call(e)}function Mk(e){return Iae(e)==="[object String]"}const Oae=Object.prototype.hasOwnProperty;function jae(e,t){return Oae.call(e,t)}function ow(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function ZM(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function Pk(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function ev(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const YM=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Dae=/&([a-z#][a-z0-9]{1,31});/gi,Mae=new RegExp(YM.source+"|"+Dae.source,"gi"),Pae=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Fae(e,t){if(t.charCodeAt(0)===35&&Pae.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Pk(r)?ev(r):e}const n=KM(e);return n!==e?n:e}function Lae(e){return e.indexOf("\\")<0?e:e.replace(YM,"$1")}function sh(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Mae,function(t,n,r){return n||Fae(t,r)})}const $ae=/[&<>"]/,Bae=/[&<>"]/g,zae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Uae(e){return zae[e]}function Ku(e){return $ae.test(e)?e.replace(Bae,Uae):e}const qae=/[.?*+^$[\]\\(){}|-]/g;function Hae(e){return e.replace(qae,"\\$&")}function Tr(e){switch(e){case 9:case 32:return!0}return!1}function Um(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function qm(e){return Dk.test(e)||VM.test(e)}function Hm(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function sw(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Vae={mdurl:gae,ucmicro:bae},Gae=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:ZM,assign:ow,escapeHtml:Ku,escapeRE:Hae,fromCodePoint:ev,has:jae,isMdAsciiPunct:Hm,isPunctChar:qm,isSpace:Tr,isString:Mk,isValidEntityCode:Pk,isWhiteSpace:Um,lib:Vae,normalizeReference:sw,unescapeAll:sh,unescapeMd:Lae},Symbol.toStringTag,{value:"Module"}));function Wae(e,t,n){let r,a,i,o;const s=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=u,-1}}let c=-1;return a&&(c=e.pos),e.pos=u,c}function Kae(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=sh(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=sh(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Zae(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=sh(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=sh(e.slice(t,i)),o}const Yae=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Kae,parseLinkLabel:Wae,parseLinkTitle:Zae},Symbol.toStringTag,{value:"Module"})),Fs={};Fs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Ku(i.content)+"</code>"};Fs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Ku(e[t].content)+`</code></pre>
`};Fs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?sh(i.info).trim():"";let s="",u="";if(o){const f=o.split(/(\s+)/g);s=f[0],u=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,s,u)||Ku(i.content):c=Ku(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];f<0?h.push(["class",n.langPrefix+s]):(h[f]=h[f].slice(),h[f][1]+=" "+n.langPrefix+s);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};Fs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Fs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Fs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Fs.text=function(e,t){return Ku(e[t].content)};Fs.html_block=function(e,t){return e[t].content};Fs.html_inline=function(e,t){return e[t].content};function Ih(){this.rules=ow({},Fs)}Ih.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Ku(t.attrs[n][0])+'="'+Ku(t.attrs[n][1])+'"';return a};Ih.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};Ih.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Ih.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Ih.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ti(){this.__rules__=[],this.__cache__=null}Ti.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ti.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ti.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ti.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ti.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ti.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ti.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ti.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Zo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Zo.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};Zo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Zo.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};Zo.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Zo.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function XM(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}XM.prototype.Token=Zo;const Xae=/\r\n?|\n/g,Jae=/\0/g;function Qae(e){let t;t=e.src.replace(Xae,`
`),t=t.replace(Jae,""),e.src=t}function eie(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function tie(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function nie(e){return/^<a[>\s]/i.test(e)}function rie(e){return/^<\/a\s*>/i.test(e)}function aie(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(nie(s.content)&&i>0&&i--,rie(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const u=s.content;let c=e.md.linkify.match(u);const f=[];let h=s.level,m=0;c.length>0&&c[0].index===0&&o>0&&a[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,w=e.md.normalizeLink(v);if(!e.md.validateLink(w))continue;let _=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=c[g].index;if(x>m){const A=new e.Token("text","",0);A.content=u.slice(m,x),A.level=h,f.push(A)}const S=new e.Token("link_open","a",1);S.attrs=[["href",w]],S.level=h++,S.markup="linkify",S.info="auto",f.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,f.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",f.push(C),m=c[g].lastIndex}if(m<u.length){const g=new e.Token("text","",0);g.content=u.slice(m),g.level=h,f.push(g)}t[n].children=a=ZM(a,o,f)}}}}const JM=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,iie=/\((c|tm|r)\)/i,oie=/\((c|tm|r)\)/ig,sie={c:"",r:"",tm:""};function lie(e,t){return sie[t.toLowerCase()]}function uie(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(oie,lie)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function cie(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&JM.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function die(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(iie.test(e.tokens[t].content)&&uie(e.tokens[t].children),JM.test(e.tokens[t].content)&&cie(e.tokens[t].children))}const fie=/['"]/,e4=/['"]/g,t4="";function Py(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function hie(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,u=0,c=s.length;e:for(;u<c;){e4.lastIndex=u;const f=e4.exec(s);if(!f)break;let h=!0,m=!0;u=f.index+1;const g=f[0]==="'";let v=32;if(f.index-1>=0)v=s.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let w=32;if(u<c)w=s.charCodeAt(u);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){w=e[n].content.charCodeAt(0);break}const _=Hm(v)||qm(String.fromCharCode(v)),x=Hm(w)||qm(String.fromCharCode(w)),S=Um(v),E=Um(w);if(E?h=!1:x&&(S||_||(h=!1)),S?m=!1:_&&(E||x||(m=!1)),w===34&&f[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=_,m=x),!h&&!m){g&&(i.content=Py(i.content,f.index,t4));continue}if(m)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let A,j;g?(A=t.md.options.quotes[2],j=t.md.options.quotes[3]):(A=t.md.options.quotes[0],j=t.md.options.quotes[1]),i.content=Py(i.content,f.index,j),e[C.token].content=Py(e[C.token].content,C.pos,A),u+=j.length-1,C.token===a&&(u+=A.length-1),s=i.content,c=s.length,r.length=n;continue e}}h?r.push({token:a,pos:f.index,single:g,level:o}):m&&g&&(i.content=Py(i.content,f.index,t4))}}}function pie(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!fie.test(e.tokens[t].content)||hie(e.tokens[t].children,e)}function mie(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const mS=[["normalize",Qae],["block",eie],["inline",tie],["linkify",aie],["replacements",die],["smartquotes",pie],["text_join",mie]];function Fk(){this.ruler=new Ti;for(let e=0;e<mS.length;e++)this.ruler.push(mS[e][0],mS[e][1])}Fk.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};Fk.prototype.State=XM;function Ls(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,u=0,c=a.length,f=!1;o<c;o++){const h=a.charCodeAt(o);if(!f)if(Tr(h)){s++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(u),this.bsCount.push(0),f=!1,s=0,u=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ls.prototype.push=function(e,t,n){const r=new Zo(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Ls.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Ls.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Ls.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Tr(r))break}return t};Ls.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Tr(this.src.charCodeAt(--t)))return t+1;return t};Ls.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Ls.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Ls.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let u=0;const c=this.bMarks[s];let f=c,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];f<h&&u<r;){const m=this.src.charCodeAt(f);if(Tr(m))m===9?u+=4-(u+this.bsCount[s])%4:u++;else if(f-c<this.tShift[s])u++;else break;f++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(f,h):i[o]=this.src.slice(f,h)}return i.join("")};Ls.prototype.Token=Zo;const gie=65536;function gS(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function n4(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function yie(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Tr(s)||o===45&&Tr(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Tr(C))return!1;i++}let u=gS(e,t+1),c=u.split("|");const f=[];for(let C=0;C<c.length;C++){const A=c[C].trim();if(!A){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=gS(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=n4(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==f.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),w=[t,0];v.map=w;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<c.length;C++){const A=e.push("th_open","th",1);f[C]&&(A.attrs=[["style","text-align:"+f[C]]]);const j=e.push("inline","",0);j.content=c[C].trim(),j.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let j=0,O=g.length;j<O;j++)if(g[j](e,a,n,!0)){C=!0;break}if(C||(u=gS(e,a).trim(),!u)||e.sCount[a]-e.blkIndent>=4||(c=n4(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>gie))break;if(a===t+2){const j=e.push("tbody_open","tbody",1);j.map=S=[t+2,0]}const A=e.push("tr_open","tr",1);A.map=[a,a+1];for(let j=0;j<h;j++){const O=e.push("td_open","td",1);f[j]&&(O.attrs=[["style","text-align:"+f[j]]]);const N=e.push("inline","",0);N.content=c[j]?c[j].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),w[1]=a,e.parentType=m,e.line=a,!0}function bie(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function vie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let u=a-s;if(u<3)return!1;const c=e.src.slice(s,a),f=e.src.slice(a,i);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<u)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}u=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=f,g.content=e.getLines(t+1,h,u,!0),g.markup=c,g.map=[t,e.line],!0}function wie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],u=[],c=[],f=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let A=e.sCount[v]+1,j,O;e.src.charCodeAt(a)===32?(a++,A++,O=!1,j=!0):e.src.charCodeAt(a)===9?(j=!0,(e.bsCount[v]+A)%4===3?(a++,A++,O=!1):O=!0):j=!1;let N=A;for(s.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const z=e.src.charCodeAt(a);if(Tr(z))z===9?N+=4-(N+e.bsCount[v]+(O?1:0))%4:N++;else break;a++}g=a>=i,u.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(j?1:0),c.push(e.sCount[v]),e.sCount[v]=N-A,f.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let A=0,j=h.length;A<j;A++)if(h[A](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const w=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=m,x[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=u[E];return e.blkIndent=w,!0}function _ie(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==o&&!Tr(c))return!1;c===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(s+1).join(String.fromCharCode(o)),!0}function r4(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Tr(i))return-1}return r}function a4(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Tr(i))?-1:a}function xie(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function Sie(e,t,n,r){let a,i,o,s,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(f=!0);let h,m,g;if((g=a4(e,u))>=0){if(h=!0,o=e.bMarks[u]+e.tShift[u],m=Number(e.src.slice(o,g-1)),f&&m!==1)return!1}else if((g=r4(e,u))>=0)h=!1;else return!1;if(f&&e.skipSpaces(g)>=e.eMarks[u])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),w=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),m!==1&&(s.attrs=[["start",m]])):s=e.push("bullet_list_open","ul",1);const _=[u,0];s.map=_,s.markup=String.fromCharCode(v);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";u<n;){i=g,a=e.eMarks[u];const C=e.sCount[u]+g-(e.bMarks[u]+e.tShift[u]);let A=C;for(;i<a;){const te=e.src.charCodeAt(i);if(te===9)A+=4-(A+e.bsCount[u])%4;else if(te===32)A++;else break;i++}const j=i;let O;j>=a?O=1:O=A-C,O>4&&(O=1);const N=C+O;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(v);const z=[u,0];s.map=z,h&&(s.info=e.src.slice(o,g-1));const H=e.tight,Q=e.tShift[u],P=e.sCount[u],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[u]=j-e.bMarks[u],e.sCount[u]=A,j>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,u,n,!0),(!e.tight||x)&&(c=!1),x=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[u]=Q,e.sCount[u]=P,e.tight=H,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(v),u=e.line,z[1]=u,u>=n||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let V=!1;for(let te=0,ae=S.length;te<ae;te++)if(S[te](e,u,n,!0)){V=!0;break}if(V)break;if(h){if(g=a4(e,u),g<0)break;o=e.bMarks[u]+e.tShift[u]}else if(g=r4(e,u),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(v),_[1]=u,e.line=u,e.parentType=E,c&&xie(e,w),!0}function Eie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const O=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let z=!1;for(let H=0,Q=O.length;H<Q;H++)if(O[H](e,S,E,!0)){z=!0;break}if(e.parentType=N,z)return null}const A=e.bMarks[S]+e.tShift[S],j=e.eMarks[S];return e.src.slice(A,j+1)}let u=e.src.slice(a,i+1);i=u.length;let c=-1;for(a=1;a<i;a++){const S=u.charCodeAt(a);if(S===91)return!1;if(S===93){c=a;break}else if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(S===92&&(a++,a<i&&u.charCodeAt(a)===10)){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}const f=e.md.helpers.parseLinkDestination(u,a,i);if(!f.ok)return!1;const h=e.md.normalizeLink(f.str);if(!e.md.validateLink(h))return!1;a=f.pos;const m=a,g=o,v=a;for(;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}let w=e.md.helpers.parseLinkTitle(u,a,i);for(;w.can_continue;){const S=s(o);if(S===null)break;u+=S,a=i,i=u.length,o++,w=e.md.helpers.parseLinkTitle(u,a,i,w)}let _;for(a<i&&v!==a&&w.ok?(_=w.str,a=w.pos):(_="",a=m,o=g);a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10&&_)for(_="",a=m,o=g;a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10)return!1;const x=sw(u.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const kie=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Cie="[a-zA-Z_:][a-zA-Z0-9:._-]*",Aie="[^\"'=<>`\\x00-\\x20]+",Tie="'[^']*'",Rie='"[^"]*"',Nie="(?:"+Aie+"|"+Tie+"|"+Rie+")",Iie="(?:\\s+"+Cie+"(?:\\s*=\\s*"+Nie+")?)",QM="<[A-Za-z][A-Za-z0-9\\-]*"+Iie+"*\\s*\\/?>",eP="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Oie="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",jie="<[?][\\s\\S]*?[?]>",Die="<![A-Za-z][^>]*>",Mie="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Pie=new RegExp("^(?:"+QM+"|"+eP+"|"+Oie+"|"+jie+"|"+Die+"|"+Mie+")"),Fie=new RegExp("^(?:"+QM+"|"+eP+")"),wf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+kie.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Fie.source+"\\s*$"),/^$/,!1]];function Lie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<wf.length&&!wf[s][0].test(o);s++);if(s===wf.length)return!1;if(r)return wf[s][2];let u=t+1;if(!wf[s][1].test(o)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],i=e.eMarks[u],o=e.src.slice(a,i),wf[s][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function $ie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Tr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const u=e.skipCharsBack(i,35,a);u>a&&Tr(e.src.charCodeAt(u-1))&&(i=u),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,i).trim(),f.map=[t,e.line],f.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function Bie(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const v=e.eMarks[s];if(g<v&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let m=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,s,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const u=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=u,f.map=[t,e.line-1],f.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function zie(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const Fy=[["table",yie,["paragraph","reference"]],["code",bie],["fence",vie,["paragraph","reference","blockquote","list"]],["blockquote",wie,["paragraph","reference","blockquote","list"]],["hr",_ie,["paragraph","reference","blockquote","list"]],["list",Sie,["paragraph","reference","blockquote"]],["reference",Eie],["html_block",Lie,["paragraph","reference","blockquote"]],["heading",$ie,["paragraph","reference","blockquote"]],["lheading",Bie],["paragraph",zie]];function lw(){this.ruler=new Ti;for(let e=0;e<Fy.length;e++)this.ruler.push(Fy[e][0],Fy[e][1],{alt:(Fy[e][2]||[]).slice()})}lw.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const u=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,o,n,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};lw.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};lw.prototype.State=Ls;function W0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}W0.prototype.pushPending=function(){const e=new Zo("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};W0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Zo(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};W0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,u=Hm(a)||qm(String.fromCharCode(a)),c=Hm(s)||qm(String.fromCharCode(s)),f=Um(a),h=Um(s),m=!h&&(!c||f||u),g=!f&&(!u||h||c);return{can_open:m&&(t||!g||u),can_close:g&&(t||!m||c),length:o}};W0.prototype.Token=Zo;function Uie(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function qie(e,t){let n=e.pos;for(;n<e.posMax&&!Uie(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Hie=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Vie(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(Hie);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const u=e.md.normalizeLink(s);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function Gie(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Tr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const Lk=[];for(let e=0;e<256;e++)Lk.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Lk[e.charCodeAt(0)]=1});function Wie(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Tr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&Lk[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function Kie(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let u=n,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&e.src.charCodeAt(u)===96;)u++;const f=u-c;if(f===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function Zie(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let u=0;u<i;u+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function i4(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function Yie(e){const t=e.tokens_meta,n=e.tokens_meta.length;i4(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&i4(e,t[r].delimiters)}const tP={tokenize:Zie,postProcess:Yie};function Xie(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function o4(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),u=e.tokens[a.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?s+s:s,u.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?s+s:s,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function Jie(e){const t=e.tokens_meta,n=e.tokens_meta.length;o4(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&o4(e,t[r].delimiters)}const nP={tokenize:Xie,postProcess:Jie};function Qie(e,t){let n,r,a,i,o="",s="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(v>=h)return!1;if(u=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?v=a.pos:o="",u=v;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&u!==v&&a.ok)for(s=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(u=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(u,v++):v=g+1):v=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[sw(r)],!i)return e.pos=f,!1;o=i.href,s=i.title}if(!t){e.pos=m,e.posMax=g;const w=e.push("link_open","a",1),_=[["href",o]];w.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function eoe(e,t){let n,r,a,i,o,s,u,c,f="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(i>=m)return!1;for(c=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(f=e.md.normalizeLink(s.str),e.md.validateLink(f)?i=s.pos:f=""),c=i;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&c!==i&&s.ok)for(u=s.str,i=s.pos;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);else u="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),o=e.env.references[sw(a)],!o)return e.pos=h,!1;f=o.href,u=o.title}if(!t){r=e.src.slice(g,v);const w=[];e.md.inline.parse(r,e.md,e.env,w);const _=e.push("image","img",0),x=[["src",f],["alt",""]];_.attrs=x,_.children=w,_.content=r,u&&x.push(["title",u])}return e.pos=i,e.posMax=m,!0}const toe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,noe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function roe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(noe.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(toe.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function aoe(e){return/^<a[>\s]/i.test(e)}function ioe(e){return/^<\/a\s*>/i.test(e)}function ooe(e){const t=e|32;return t>=97&&t<=122}function soe(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!ooe(a))return!1;const i=e.src.slice(r).match(Pie);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],aoe(o.content)&&e.linkLevel++,ioe(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const loe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,uoe=/^&([a-z][a-z0-9]{1,31});/i;function coe(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(loe);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=Pk(o)?ev(o):ev(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(uoe);if(i){const o=KM(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function s4(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[s.marker][(s.open?3:0)+s.length%3];let c=r-i[r]-1,f=c;for(;c>u;c-=i[c]+1){const h=e[c];if(h.marker===s.marker&&h.open&&h.end<0){let m=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(m=!0),!m){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,s.open=!1,h.end=o,h.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=f)}}function doe(e){const t=e.tokens_meta,n=e.tokens_meta.length;s4(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&s4(t[r].delimiters)}function foe(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const yS=[["text",qie],["linkify",Vie],["newline",Gie],["escape",Wie],["backticks",Kie],["strikethrough",tP.tokenize],["emphasis",nP.tokenize],["link",Qie],["image",eoe],["autolink",roe],["html_inline",soe],["entity",coe]],bS=[["balance_pairs",doe],["strikethrough",tP.postProcess],["emphasis",nP.postProcess],["fragments_join",foe]];function K0(){this.ruler=new Ti;for(let e=0;e<yS.length;e++)this.ruler.push(yS[e][0],yS[e][1]);this.ruler2=new Ti;for(let e=0;e<bS.length;e++)this.ruler2.push(bS[e][0],bS[e][1])}K0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};K0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};K0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};K0.prototype.State=W0;function hoe(e){const t={};e=e||{},t.src_Any=qM.source,t.src_Cc=HM.source,t.src_Z=GM.source,t.src_P=Dk.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function F2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function uw(e){return Object.prototype.toString.call(e)}function poe(e){return uw(e)==="[object String]"}function moe(e){return uw(e)==="[object Object]"}function goe(e){return uw(e)==="[object RegExp]"}function l4(e){return uw(e)==="[object Function]"}function yoe(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const rP={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function boe(e){return Object.keys(e||{}).reduce(function(t,n){return t||rP.hasOwnProperty(n)},!1)}const voe={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},woe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",_oe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function xoe(e){e.__index__=-1,e.__text_cache__=""}function Soe(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function u4(){return function(e,t){t.normalize(e)}}function tv(e){const t=e.re=hoe(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(woe),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,u){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+u)}Object.keys(e.__schemas__).forEach(function(s){const u=e.__schemas__[s];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,moe(u)){goe(u.validate)?c.validate=Soe(u.validate):l4(u.validate)?c.validate=u.validate:i(s,u),l4(u.normalize)?c.normalize=u.normalize:u.normalize?i(s,u):c.normalize=u4();return}if(poe(u)){a.push(s);return}i(s,u)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:u4()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(yoe).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),xoe(e)}function Eoe(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function L2(e,t){const n=new Eoe(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Yi(e,t){if(!(this instanceof Yi))return new Yi(e,t);t||boe(e)&&(t=e,e={}),this.__opts__=F2({},rP,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=F2({},voe,e),this.__compiled__={},this.__tlds__=_oe,this.__tlds_replaced__=!1,this.re={},tv(this)}Yi.prototype.add=function(t,n){return this.__schemas__[t]=n,tv(this),this};Yi.prototype.set=function(t){return this.__opts__=F2(this.__opts__,t),this};Yi.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,u,c,f;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};Yi.prototype.pretest=function(t){return this.re.pretest.test(t)};Yi.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Yi.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(L2(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(L2(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Yi.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,L2(this,0)):null};Yi.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),tv(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,tv(this),this)};Yi.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Yi.prototype.onCompile=function(){};const Mf=2147483647,Ss=36,$k=1,Vm=26,koe=38,Coe=700,aP=72,iP=128,oP="-",Aoe=/^xn--/,Toe=/[^\0-\x7F]/,Roe=/[\x2E\u3002\uFF0E\uFF61]/g,Noe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},vS=Ss-$k,Es=Math.floor,wS=String.fromCharCode;function Eu(e){throw new RangeError(Noe[e])}function Ioe(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function sP(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Roe,".");const a=e.split("."),i=Ioe(a,t).join(".");return r+i}function lP(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const Ooe=e=>String.fromCodePoint(...e),joe=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ss},c4=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},uP=function(e,t,n){let r=0;for(e=n?Es(e/Coe):e>>1,e+=Es(e/t);e>vS*Vm>>1;r+=Ss)e=Es(e/vS);return Es(r+(vS+1)*e/(e+koe))},cP=function(e){const t=[],n=e.length;let r=0,a=iP,i=aP,o=e.lastIndexOf(oP);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&Eu("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const u=r;for(let f=1,h=Ss;;h+=Ss){s>=n&&Eu("invalid-input");const m=joe(e.charCodeAt(s++));m>=Ss&&Eu("invalid-input"),m>Es((Mf-r)/f)&&Eu("overflow"),r+=m*f;const g=h<=i?$k:h>=i+Vm?Vm:h-i;if(m<g)break;const v=Ss-g;f>Es(Mf/v)&&Eu("overflow"),f*=v}const c=t.length+1;i=uP(r-u,c,u==0),Es(r/c)>Mf-a&&Eu("overflow"),a+=Es(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},dP=function(e){const t=[];e=lP(e);const n=e.length;let r=iP,a=0,i=aP;for(const u of e)u<128&&t.push(wS(u));const o=t.length;let s=o;for(o&&t.push(oP);s<n;){let u=Mf;for(const f of e)f>=r&&f<u&&(u=f);const c=s+1;u-r>Es((Mf-a)/c)&&Eu("overflow"),a+=(u-r)*c,r=u;for(const f of e)if(f<r&&++a>Mf&&Eu("overflow"),f===r){let h=a;for(let m=Ss;;m+=Ss){const g=m<=i?$k:m>=i+Vm?Vm:m-i;if(h<g)break;const v=h-g,w=Ss-g;t.push(wS(c4(g+v%w,0))),h=Es(v/w)}t.push(wS(c4(h,0))),i=uP(a,c,s===o),a=0,++s}++a,++r}return t.join("")},Doe=function(e){return sP(e,function(t){return Aoe.test(t)?cP(t.slice(4).toLowerCase()):t})},Moe=function(e){return sP(e,function(t){return Toe.test(t)?"xn--"+dP(t):t})},fP={version:"2.3.1",ucs2:{decode:lP,encode:Ooe},decode:cP,encode:dP,toASCII:Moe,toUnicode:Doe},Poe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Foe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Loe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},$oe={default:Poe,zero:Foe,commonmark:Loe},Boe=/^(vbscript|javascript|file|data):/,zoe=/^data:image\/(gif|png|jpeg|webp);/;function Uoe(e){const t=e.trim().toLowerCase();return Boe.test(t)?zoe.test(t):!0}const hP=["http:","https:","mailto:"];function qoe(e){const t=jk(e,!0);if(t.hostname&&(!t.protocol||hP.indexOf(t.protocol)>=0))try{t.hostname=fP.toASCII(t.hostname)}catch{}return G0(Ok(t))}function Hoe(e){const t=jk(e,!0);if(t.hostname&&(!t.protocol||hP.indexOf(t.protocol)>=0))try{t.hostname=fP.toUnicode(t.hostname)}catch{}return oh(Ok(t),oh.defaultChars+"%")}function yo(e,t){if(!(this instanceof yo))return new yo(e,t);t||Mk(e)||(t=e||{},e="default"),this.inline=new K0,this.block=new lw,this.core=new Fk,this.renderer=new Ih,this.linkify=new Yi,this.validateLink=Uoe,this.normalizeLink=qoe,this.normalizeLinkText=Hoe,this.utils=Gae,this.helpers=ow({},Yae),this.options={},this.configure(e),t&&this.set(t)}yo.prototype.set=function(e){return ow(this.options,e),this};yo.prototype.configure=function(e){const t=this;if(Mk(e)){const n=e;if(e=$oe[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};yo.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};yo.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};yo.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};yo.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};yo.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};yo.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};yo.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const _S=new yo({html:!1,linkify:!0,breaks:!0});function Voe(e){return L.useMemo(()=>{var n;if(!e)return[];try{const r=_S.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const u=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:u,code:s.content}),o++}else{const u=[];for(;o<r.length&&r[o].type!=="fence";)u.push(r[o]),o++;u.length>0&&(i+=_S.renderer.render(u,_S.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const pP=({markdownContent:e,isStreaming:t=!1,className:n})=>{const r=qr(o=>o.enableStreamingMarkdown),a=Voe(e),i=L.useMemo(()=>a.map((o,s)=>{if(typeof o=="string")return y.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:o}},`html-${s}`);if(o.type==="code"){const u=o;return y.jsx(CD,{lang:u.lang,code:u.code},`code-${s}`)}return null}),[a,t]);return e!=null&&e.trim()?t&&!r?y.jsx("pre",{className:Ut("whitespace-pre-wrap text-sm",n),children:e}):y.jsx("div",{className:Ut(n),children:i}):y.jsx("div",{className:Ut("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."})},mP=wt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var v,w;const{dbProviderConfigs:i,getAllAvailableModelDefsForProvider:o}=fi($n(_=>({dbProviderConfigs:_.dbProviderConfigs,getAllAvailableModelDefsForProvider:_.getAllAvailableModelDefsForProvider}))),s=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},u=()=>{t&&t(e.id)},c=()=>{r&&r(e.id)},f=e.endedAt?UM(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=L.useMemo(()=>{var O;const _=(O=e.metadata)==null?void 0:O.modelId;if(!_)return"Unknown Model";const{providerId:x,modelId:S}=c0(_);if(!x||!S)return _;const E=i.find(N=>N.id===x),C=(E==null?void 0:E.name)??x,j=o(x).find(N=>N.id===S);return`${(j==null?void 0:j.name)??S} (${C})`},[(v=e.metadata)==null?void 0:v.modelId,i,o]),m=e.status==="COMPLETED"||e.status==="ERROR",g=e.status==="ERROR";return y.jsxs("div",{className:Ut("group relative rounded-lg border bg-card p-4 shadow-sm transition-colors hover:bg-muted/50",g?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&y.jsx(Ik,{turnData:e.prompt,timestamp:e.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",h,")"]}),y.jsx("span",{className:"text-xs text-muted-foreground",children:f})]}),g&&((w=e.metadata)==null?void 0:w.error)&&y.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[y.jsx("p",{className:"font-semibold",children:"Error:"}),y.jsx("p",{children:e.metadata.error})]}),y.jsx(pP,{markdownContent:e.response,isStreaming:!1})]}),m&&y.jsx("div",{className:"absolute bottom-1 right-1 flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-card/80 backdrop-blur-sm p-0.5 rounded",children:y.jsxs(In,{delayDuration:100,children:[r&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:c,"aria-label":"Edit User Prompt",children:y.jsx(VS,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]}),t&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,"aria-label":"Regenerate Response",children:y.jsx(mv,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Regenerate"})]}),n&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:s,"aria-label":"Delete Interaction",children:y.jsx(Iu,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})]})})]})});mP.displayName="InteractionCard";const Goe=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:r,size:n,onClick:e,className:t,"aria-label":a,children:y.jsx(i7,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Stop"})]})}),$2=wt.memo(({interactionId:e,onStop:t,className:n})=>{var c;const{interaction:r,bufferedContent:a}=Qn($n(f=>({interaction:f.interactions.find(m=>m.id===e),bufferedContent:f.activeStreamBuffers[e]??""}))),{dbProviderConfigs:i,getAllAvailableModelDefsForProvider:o}=fi($n(f=>({dbProviderConfigs:f.dbProviderConfigs,getAllAvailableModelDefsForProvider:f.getAllAvailableModelDefsForProvider}))),s=L.useMemo(()=>{var x;const f=(x=r==null?void 0:r.metadata)==null?void 0:x.modelId;if(!f)return"Loading Model...";const{providerId:h,modelId:m}=c0(f);if(!h||!m)return f;const g=i.find(S=>S.id===h),v=(g==null?void 0:g.name)??h,_=o(h).find(S=>S.id===m);return`${(_==null?void 0:_.name)??m} (${v})`},[(c=r==null?void 0:r.metadata)==null?void 0:c.modelId,i,o]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),y.jsxs("div",{className:Ut("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[y.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const u=()=>{t&&t(e)};return y.jsxs("div",{className:Ut("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&y.jsx(Ik,{turnData:r.prompt,timestamp:r.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",s,")"]}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx(pP,{markdownContent:a,isStreaming:!0})]}),t&&y.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:y.jsx(Goe,{onStop:u,"aria-label":"Stop Generation"})})]})});$2.displayName="StreamingInteractionCard";var Woe=L.createContext(void 0);function Oh(e){const t=L.useContext(Woe);return e||t||"ltr"}function Gm(e,[t,n]){return Math.min(n,Math.max(t,e))}function Koe(e,t){return L.useReducer((n,r)=>t[n][r]??n,e)}var Bk="ScrollArea",[gP,Age]=Ri(Bk),[Zoe,_o]=gP(Bk),yP=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,u]=L.useState(null),[c,f]=L.useState(null),[h,m]=L.useState(null),[g,v]=L.useState(null),[w,_]=L.useState(null),[x,S]=L.useState(0),[E,C]=L.useState(0),[A,j]=L.useState(!1),[O,N]=L.useState(!1),z=xn(t,Q=>u(Q)),H=Oh(a);return y.jsx(Zoe,{scope:n,type:r,dir:H,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:f,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:j,scrollbarY:w,onScrollbarYChange:_,scrollbarYEnabled:O,onScrollbarYEnabledChange:N,onCornerWidthChange:S,onCornerHeightChange:C,children:y.jsx(an.div,{dir:H,...o,ref:z,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});yP.displayName=Bk;var bP="ScrollAreaViewport",vP=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=_o(bP,n),s=L.useRef(null),u=xn(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(an.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});vP.displayName=bP;var $s="ScrollAreaScrollbar",wP=L.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return L.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(Yoe,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(Xoe,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(_P,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(zk,{...r,ref:t}):null});wP.displayName=$s;var Yoe=L.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),[i,o]=L.useState(!1);return L.useEffect(()=>{const s=a.scrollArea;let u=0;if(s){const c=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Na,{present:n||i,children:y.jsx(_P,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Xoe=L.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),i=e.orientation==="horizontal",o=dw(()=>u("SCROLL_END"),100),[s,u]=Koe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return L.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,u]),L.useEffect(()=>{const c=a.viewport,f=i?"scrollLeft":"scrollTop";if(c){let h=c[f];const m=()=>{const g=c[f];h!==g&&(u("SCROLL"),o()),h=g};return c.addEventListener("scroll",m),()=>c.removeEventListener("scroll",m)}},[a.viewport,i,u,o]),y.jsx(Na,{present:n||s!=="hidden",children:y.jsx(zk,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:zt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:zt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),_P=L.forwardRef((e,t)=>{const n=_o($s,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=L.useState(!1),s=e.orientation==="horizontal",u=dw(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?c:f)}},10);return lh(n.viewport,u),lh(n.content,u),y.jsx(Na,{present:r||i,children:y.jsx(zk,{"data-state":i?"visible":"hidden",...a,ref:t})})}),zk=L.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=_o($s,e.__scopeScrollArea),i=L.useRef(null),o=L.useRef(0),[s,u]=L.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=CP(s.viewport,s.content),f={...r,sizes:s,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return rse(m,o.current,s,g)}return n==="horizontal"?y.jsx(Joe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=d4(m,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?y.jsx(Qoe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=d4(m,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),Joe=L.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=_o($s,e.__scopeScrollArea),[o,s]=L.useState(),u=L.useRef(null),c=xn(t,u,i.onScrollbarXChange);return L.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(SP,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":cw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),TP(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:rv(o.paddingLeft),paddingEnd:rv(o.paddingRight)}})}})}),Qoe=L.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=_o($s,e.__scopeScrollArea),[o,s]=L.useState(),u=L.useRef(null),c=xn(t,u,i.onScrollbarYChange);return L.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(SP,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":cw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),TP(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:rv(o.paddingTop),paddingEnd:rv(o.paddingBottom)}})}})}),[ese,xP]=gP($s),SP=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:f,onResize:h,...m}=e,g=_o($s,n),[v,w]=L.useState(null),_=xn(t,z=>w(z)),x=L.useRef(null),S=L.useRef(""),E=g.viewport,C=r.content-r.viewport,A=Ea(f),j=Ea(u),O=dw(h,10);function N(z){if(x.current){const H=z.clientX-x.current.left,Q=z.clientY-x.current.top;c({x:H,y:Q})}}return L.useEffect(()=>{const z=H=>{const Q=H.target;(v==null?void 0:v.contains(Q))&&A(H,C)};return document.addEventListener("wheel",z,{passive:!1}),()=>document.removeEventListener("wheel",z,{passive:!1})},[E,v,C,A]),L.useEffect(j,[r,j]),lh(v,O),lh(g.content,O),y.jsx(ese,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ea(i),onThumbPointerUp:Ea(o),onThumbPositionChange:j,onThumbPointerDown:Ea(s),children:y.jsx(an.div,{...m,ref:_,style:{position:"absolute",...m.style},onPointerDown:zt(e.onPointerDown,z=>{z.button===0&&(z.target.setPointerCapture(z.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),N(z))}),onPointerMove:zt(e.onPointerMove,N),onPointerUp:zt(e.onPointerUp,z=>{const H=z.target;H.hasPointerCapture(z.pointerId)&&H.releasePointerCapture(z.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),nv="ScrollAreaThumb",EP=L.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=xP(nv,e.__scopeScrollArea);return y.jsx(Na,{present:n||a.hasThumb,children:y.jsx(tse,{ref:t,...r})})}),tse=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=_o(nv,n),o=xP(nv,n),{onThumbPositionChange:s}=o,u=xn(t,h=>o.onThumbChange(h)),c=L.useRef(void 0),f=dw(()=>{c.current&&(c.current(),c.current=void 0)},100);return L.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(f(),!c.current){const g=ase(h,s);c.current=g,s()}};return s(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,f,s]),y.jsx(an.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:zt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,w=h.clientY-g.top;o.onThumbPointerDown({x:v,y:w})}),onPointerUp:zt(e.onPointerUp,o.onThumbPointerUp)})});EP.displayName=nv;var Uk="ScrollAreaCorner",kP=L.forwardRef((e,t)=>{const n=_o(Uk,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(nse,{...e,ref:t}):null});kP.displayName=Uk;var nse=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=_o(Uk,n),[i,o]=L.useState(0),[s,u]=L.useState(0),c=!!(i&&s);return lh(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),lh(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),c?y.jsx(an.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function rv(e){return e?parseInt(e,10):0}function CP(e,t){const n=e/t;return isNaN(n)?0:n}function cw(e){const t=CP(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function rse(e,t,n,r="ltr"){const a=cw(n),i=a/2,o=t||i,s=a-o,u=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return AP([u,c],h)(e)}function d4(e,t,n="ltr"){const r=cw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,u=n==="ltr"?[0,o]:[o*-1,0],c=Gm(e,u);return AP([0,o],[0,s])(c)}function AP(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function TP(e,t){return e>0&&e<t}var ase=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function dw(e,t){const n=Ea(e),r=L.useRef(0);return L.useEffect(()=>()=>window.clearTimeout(r.current),[]),L.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function lh(e,t){const n=Ea(t);Fa(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var ise=yP,ose=vP,sse=kP;function fw({className:e,children:t,...n}){return y.jsxs(ise,{"data-slot":"scroll-area",className:Ut("relative",e),...n,children:[y.jsx(ose,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(lse,{}),y.jsx(sse,{})]})}function lse({className:e,orientation:t="vertical",...n}){return y.jsx(wP,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Ut("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(EP,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Aa({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:Ut("bg-accent animate-pulse rounded-md",e),...t})}const use=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:o})=>{const s=L.useRef(null),u=Qn(h=>h.streamingInteractionIds),c=L.useMemo(()=>{const h=[],m=new Set;return[...t].sort((v,w)=>v.index-w.index).forEach(v=>{if(m.has(v.id))return;const w=[v];m.add(v.id),h.push(w)}),h},[t]);L.useEffect(()=>{var m;const h=(m=s.current)==null?void 0:m.querySelector("[data-radix-scroll-area-viewport]");if(h){const{scrollHeight:g,clientHeight:v,scrollTop:w}=h,_=g-v<=w+100,x=n==="streaming"&&u.length>0;(_||x)&&h.scrollTo({top:g,behavior:"smooth"})}},[t,n,u]);const f=()=>n==="loading"?y.jsxs("div",{className:"space-y-4 p-4",children:[y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-32 w-full"}),y.jsx(Aa,{className:"h-20 w-full"})]}):e?t.length===0&&n!=="streaming"?y.jsx("div",{className:"flex h-full items-center justify-center",children:y.jsx("p",{className:"text-muted-foreground",children:"No messages yet."})}):y.jsxs("div",{className:"space-y-4 p-4",children:[c.map(h=>{const m=h[0];return u.includes(m.id)?y.jsx($2,{interactionId:m.id,onStop:o},`${m.id}-streaming`):y.jsx(mP,{interaction:m,onEdit:i,onRegenerate:a,onDelete:m.type==="message.user_assistant"?Qn.getState().deleteInteraction:void 0},m.id)}),n==="streaming"&&u.filter(h=>!t.some(m=>m.id===h)).map(h=>y.jsx($2,{interactionId:h,onStop:o},`${h}-streaming-new`))]}):y.jsx("div",{className:"flex h-full items-center justify-center",children:y.jsx("p",{className:"text-muted-foreground",children:"Select a conversation or start a new one."})});return y.jsx(fw,{className:Ut("flex-grow",r),ref:s,children:f()})},Wp=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0)).sort((i,o)=>(i.order??1/0)-(o.order??1/0));return a.length===0?null:y.jsx("div",{className:Ut(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(wt.Fragment,{children:o?o():null},i.id)})})},cse=".litechat/conversations",RP="/synced_repos",xS="sync_repos";async function dse(e,t,n){n(t.id,"syncing");const r=Wn(`${RP}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let o=!1;try{await e.promises.stat(js(r,".git")),o=!0}catch(s){if(s.code==="ENOENT")o=!1;else throw s}o?(ut.info(`Pulling latest changes for "${t.name}"...`),await rw(r,i,a),ut.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(ut.info(`Cloning repository "${t.name}"...`),await RM(r,t.remoteUrl,i,a),ut.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(o){console.error(`Failed to initialize/sync repository ${t.name}:`,o),n(t.id,"error")}}async function fse(e,t,n,r,a,i,o){var h,m;r(t.id,"syncing");const s=Wn(`${RP}/${n.id}`),u=js(s,cse,`${t.id}.json`),c={username:n.username,password:n.password},f=n.branch||"main";try{try{await e.promises.stat(js(s,".git"))}catch(x){if(x.code==="ENOENT"){ut.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}ut.info(`Pulling latest changes for "${n.name}"...`),await rw(s,f,c);let g=null,v=null;try{const x=await Nh(u),S=new TextDecoder().decode(x);g=JSON.parse(S),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${u} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),ut.warning(`Could not read remote version of conversation: ${x.message}`))}const w=t.updatedAt.getTime(),_=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!g||w>(v??0)||w>_&&w>=(v??0)){ut.info("Local changes detected. Pushing to remote...");const x=await Ht.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:x},null,2);await aw(u,C),await Ak(s,`Sync conversation: ${t.title} (${t.id})`),await Tk(s,f,c),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),ut.success("Conversation synced successfully (pushed).")}else if(v&&v>w){ut.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await Ht.saveConversation(x),await Ht.deleteInteractionsForConversation(t.id);const S=g.interactions.map(E=>Ht.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&o()==="conversation"&&await Qn.getState().loadInteractions(t.id),r(t.id,"idle"),ut.success("Conversation synced successfully (pulled).")}else ut.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const Gi=Ds(Ms((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&ut.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(u=>u.parentId===a).map(u=>u.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null})},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),n!==null?t().initializeVFS(n):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async n=>{if(!n){console.warn("[VfsStore] initializeVFS called without a valid vfsKey.");return}if(t().vfsKey!==n){console.warn(`[VfsStore] Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`);return}if(t().initializingKey!==null){console.warn(`[VfsStore] Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`);return}if(t().configuredVfsKey===n&&t().fs){console.log(`[VfsStore] Initialization skipped for key "${n}" (already configured).`),e({loading:!1});return}const{_setLoading:r,_setError:a,_addNodes:i,_setFsInstance:o,_setConfiguredVfsKey:s}=t();console.log(`[VfsStore] Initializing VFS with key: ${n}`),e({initializingKey:n}),r(!0),a(null);try{const u=await OM(n);if(!u)throw new Error("Filesystem backend initialization failed.");if(t().vfsKey!==n){console.warn(`[VfsStore] Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`),e({initializingKey:null,loading:!1});return}o(u),s(n),console.log(`[VfsStore] VFS instance configured for key: ${n}`);const c="vfs-root";let f=t().nodes[c];try{await u.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(h){if(h.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw h}if(!f||f.path!=="/"){const h=Date.now();f={id:c,parentId:null,name:"",path:"/",type:"folder",createdAt:h,lastModified:h},i([f]),console.log("[VfsStore] Root node added/updated in state.")}e(h=>{h.rootId=f.id,h.currentParentId=f.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${f.id}`),await t().fetchNodes(f.id)}catch(u){console.error(`Failed to initialize VFS for key ${n}:`,u),t().initializingKey===n&&(a(`Failed to initialize VFS (${n}).`),o(null),s(null))}finally{t().initializingKey===n&&e({initializingKey:null,loading:!1})}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:u,configuredVfsKey:c,vfsKey:f,initializingKey:h}=t();if(!o||c!==f||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!o}, Match: ${c===f}, Init: ${h}`);return}r(!0);try{const m=n?s[n]:s[u||""],g=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${c})`);const v=await Rk(g);console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const w=n??u??"",_=new Set(v.map(A=>A.path)),E=(t().childrenMap[w]||[]).map(A=>t().nodes[A]).filter(Boolean).filter(A=>!_.has(A.path)).map(A=>A.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(A=>{const j=Object.values(t().nodes).find(N=>N.path===A.path),O=Date.now();return{id:(j==null?void 0:j.id)||jo(),parentId:n,name:A.name,path:A.path,type:A.isDirectory?"folder":"file",size:A.size,createdAt:(j==null?void 0:j.createdAt)??O,lastModified:A.lastModified.getTime(),mimeType:A.isDirectory?void 0:A.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(A=>{const j=C.map(O=>O.id);(!A.childrenMap[w]||JSON.stringify(A.childrenMap[w].sort())!==JSON.stringify(j.sort()))&&(A.childrenMap[w]=j,console.log(`[VfsStore] Updated childrenMap for parent: ${w}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Wn(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:o}=t();if(!o||t().vfsKey!==t().configuredVfsKey)return;const s=Wn(n),u=r(s);u&&u.type==="folder"?(e(c=>{c.currentParentId=u.id}),t().childrenMap[u.id]||await a(u.id)):s==="/"&&i?(e(c=>{c.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,_addNodes:c,configuredVfsKey:f,vfsKey:h}=t();if(!o||f!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const m=n?s[n]:s[u||""],g=m?m.path:"/",v=Om(g,r.trim());try{throw await o.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await jM(v);const w=Date.now(),x={id:jo(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:w,lastModified:w};c([x])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,configuredVfsKey:c,vfsKey:f}=t();if(!o||c!==f){i("Filesystem not ready.");return}a(!0);try{const h=n?s[n]:s[u||""],m=h?h.path:"/";await DM(Array.from(r),m),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o,configuredVfsKey:s,vfsKey:u}=t();if(!o||s!==u){a("Filesystem not ready.");return}r(!0);try{const c=n.map(f=>t().nodes[f]).filter(Boolean);for(const f of c)await Nk(f.path,f.type==="folder");i(n)}catch(c){console.error("Failed to delete nodes:",c),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:u,rootId:c,configuredVfsKey:f,vfsKey:h}=t();if(!u||f!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=s[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){a(!0);try{const g=m.parentId?s[m.parentId]:s[c||""],v=g?g.path:"/",w=Om(v,r.trim());try{throw await u.promises.stat(w),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await MM(m.path,w);const _={name:r.trim(),path:w,lastModified:Date.now()};o(n,_)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:o,vfsKey:s}=t();if(!a||o!==s)return i("Filesystem not ready."),null;const u=r[n];if(!u||u.type!=="file")return i("File not found."),null;try{const c=await Nh(u.path),f=u.mimeType||"application/octet-stream",h=new Blob([c],{type:f});return{name:u.name,blob:h}}catch(c){return console.error("Failed to download file:",c),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),hse=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${GI(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${GI(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,u,c,f,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(u=r.prompt.metadata)!=null&&u.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${zb(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((f=r.metadata)!=null&&f.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n},SS=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},pse="/synced_repos",Ur=Ds(Ms((e,t)=>({conversations:[],projects:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{const n=Gi.getState();if(n.fs&&n.configuredVfsKey===xS&&!n.loading)return n.fs;console.log(`[ConversationStore] Sync VFS not ready (key: ${n.configuredVfsKey}, fs: ${!!n.fs}, loading: ${n.loading}). Initializing...`);try{await n.initializeVFS(xS);const r=Gi.getState();if(r.fs&&r.configuredVfsKey===xS)return console.log("[ConversationStore] Sync VFS initialized successfully."),r.fs;throw new Error("VFS initialization did not complete successfully.")}catch(r){return console.error("[ConversationStore] Failed to ensure Sync VFS:",r),ut.error(`Filesystem error for sync: ${r instanceof Error?r.message:String(r)}`),null}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([Ht.loadConversations(),Ht.loadProjects(),Ht.loadSyncRepos()]),i={};n.forEach(o=>{if(o.syncRepoId){const s=o.lastSyncedAt instanceof Date?o.lastSyncedAt.getTime():null,u=o.updatedAt instanceof Date?o.updatedAt.getTime():null;s?u&&u>s?i[o.id]="needs-sync":i[o.id]="idle":i[o.id]="needs-sync"}else i[o.id]="idle"}),e({conversations:n,projects:r,syncRepos:a,conversationSyncStatus:i,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=jo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const o=t().getConversationById(r);if(o)await Ht.saveConversation(o);else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(u=>u.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([u])=>u!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){const u=o.conversations[s].metadata??{},c=r.metadata??{},f={...u,...c};Object.assign(o.conversations[s],{...r,metadata:f,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),m=o.conversations[s].lastSyncedAt instanceof Date?o.conversations[s].lastSyncedAt.getTime():null,g=o.conversations[s].updatedAt.getTime();"syncRepoId"in r?o.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(!m||g>m)&&(o.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Ht.saveConversation(o)}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const u=s.conversations.findIndex(c=>c.id===n);if(u!==-1){s.conversations[u]=a;const c=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,f=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&c&&f<=c?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){o.conversations[s]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,c=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&c<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Ht.deleteConversation(n),await Ht.deleteInteractionsForConversation(n),r===n&&a==="conversation"&&await Qn.getState().setCurrentConversationId(null)}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{if(i){s.conversations.push(i);const u=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,c=i.updatedAt.getTime();s.conversationSyncStatus[n]=i.syncRepoId&&u&&c<=u?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},addProject:async n=>{const r=n.parentId??null,a=t().getProjectById(r),i=a?a.path:"/",o=n.name.trim(),s=Om(i,o),u=jo(),c=new Date,f={id:u,path:s,createdAt:c,updatedAt:c,name:o,parentId:r,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(h=>{h.projects.push(f)});try{const h=t().getProjectById(u);if(h){const m=JSON.parse(JSON.stringify(h));await Ht.saveProject(m)}else throw new Error("Failed to retrieve newly added project state");return u}catch(h){throw console.error("ConversationStore: Error adding project",h),h.name==="ConstraintError"?ut.error(`A project or folder named "${o}" already exists in this location.`):ut.error("Failed to save new project."),e(m=>({error:"Failed to save new project",projects:m.projects.filter(g=>g.id!==u)})),h}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ConversationStore: Project ${n} not found.`);return}let i=a.path,o=a.name;if(r.name!==void 0&&r.name!==a.name){o=r.name.trim();const u=t().getProjectById(a.parentId),c=u?u.path:"/";i=Om(c,o)}e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&Object.assign(u.projects[c],{...r,name:o,path:i,updatedAt:new Date})});const s=t().getProjectById(n);if(s)try{const u=JSON.parse(JSON.stringify(s));await Ht.saveProject(u)}catch(u){throw console.error("ConversationStore: Error updating project",u),u.name==="ConstraintError"?ut.error(`A project or folder named "${o}" already exists in this location.`):ut.error("Failed to save project update."),e(c=>{const f=c.projects.findIndex(h=>h.id===n);f!==-1&&(c.projects[f]=a),c.error="Failed to save project update"}),u}else console.error("ConversationStore: Failed to retrieve updated project state after update."),e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&(u.projects[c]=a),u.error="Failed to save project update (state error)"})},deleteProject:async n=>{const r=t().selectedItemId,a=t().selectedItemType;if(!t().projects.find(c=>c.id===n))return;const o=new Set,s=new Set,u=c=>{o.add(c),t().projects.filter(f=>f.parentId===c).forEach(f=>u(f.id)),t().conversations.filter(f=>f.projectId===c).forEach(f=>s.add(f.id))};u(n),e(c=>({projects:c.projects.filter(f=>!o.has(f.id)),conversations:c.conversations.map(f=>s.has(f.id)?{...f,projectId:null}:f),selectedItemId:o.has(r??"")?null:r,selectedItemType:o.has(r??"")?null:a}));try{await Ht.deleteProject(n),o.has(r??"")&&await Qn.getState().setCurrentConversationId(null)}catch(c){throw console.error("ConversationStore: Error deleting project",c),e({error:"Failed to delete project. Please reload."}),c}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await Qn.getState().setCurrentConversationId(r==="conversation"?n:null)):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{try{const r=await n.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.conversation||!Array.isArray(a.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const i=a.conversation,o=a.interactions;if(!i.id||!i.title||!i.createdAt||!i.updatedAt)throw new Error("Invalid conversation data in import file.");const s=await t().addConversation({title:i.title||"Imported Chat",metadata:i.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(c=>Ht.saveInteraction({...c,conversationId:s,id:jo()}));await Promise.all(u),await t().selectItem(s,"conversation"),ut.success("Conversation imported successfully.")}catch(r){throw console.error("ConversationStore: Error importing conversation",r),ut.error(`Import failed: ${r instanceof Error?r.message:String(r)}`),r}},exportConversation:async(n,r)=>{try{const a=t().conversations.find(c=>c.id===n);if(!a)throw new Error("Conversation not found.");const i=await Ht.loadInteractionsForConversation(n);let o,s;const u=a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(r==="json"){const f=JSON.stringify({conversation:a,interactions:i},null,2);o=new Blob([f],{type:"application/json"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.json`}else if(r==="md"){const c=hse(a,i);o=new Blob([c],{type:"text/markdown"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");SS(o,s),ut.success(`Conversation exported as ${r.toUpperCase()}.`)}catch(a){throw console.error("ConversationStore: Error exporting conversation",a),ut.error(`Export failed: ${a instanceof Error?a.message:String(a)}`),a}},exportProject:async n=>{try{const r=t().getProjectById(n);if(!r)throw new Error("Project not found.");const a=t().projects,i=t().conversations,o=async m=>{const g=a.find(x=>x.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const v=a.filter(x=>x.parentId===m),w=i.filter(x=>x.projectId===m),_=[];for(const x of v)_.push(await o(x.id));for(const x of w){const S=await Ht.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(n),u=JSON.stringify(s,null,2),c=new Blob([u],{type:"application/json"}),h=`litechat_project_${r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${n.substring(0,6)}.json`;SS(c,h),ut.success(`Project "${r.name}" exported.`)}catch(r){throw console.error("ConversationStore: Error exporting project",r),ut.error(`Project export failed: ${r instanceof Error?r.message:String(r)}`),r}},exportAllConversations:async()=>{try{const n=t().conversations,r=[];for(const s of n){const u=await Ht.loadInteractionsForConversation(s.id);r.push({conversation:s,interactions:u})}const a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),o=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;SS(i,o),ut.success("All conversations exported.")}catch(n){throw console.error("ConversationStore: Error exporting conversations",n),ut.error(`Export failed: ${n instanceof Error?n.message:String(n)}`),n}},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Ht.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=jo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Ht.saveSyncRepo(s)}else throw new Error("Failed to retrieve newly added sync repo state");return ut.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(u=>u.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,branch:r.branch||o.syncRepos[s].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Ht.saveSyncRepo(o),ut.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const u=s.syncRepos.findIndex(c=>c.id===n);u!==-1&&(s.syncRepos[u]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(o=>o.id===n);if(!r)return;const a=Wn(`${pse}/${n}`);if(!await t()._ensureSyncVfsReady()){ut.error("Filesystem not ready, cannot delete repository folder.");return}e(o=>({syncRepos:o.syncRepos.filter(s=>s.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(o.repoInitializationStatus).filter(([s])=>s!==n))}));try{await Ht.deleteSyncRepo(n),ut.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await Nk(a,!0),ut.info(`Removed local sync folder for "${r.name}".`)}catch(o){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,o),o.code!=="ENOENT"&&ut.warning(`Failed to remove local sync folder: ${o.message}`)}}catch(o){throw console.error("ConversationStore: Error deleting sync repo",o),e(s=>{r&&s.syncRepos.push(r),s.error="Failed to delete sync repository"}),o}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),ut.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){ut.error("Sync repository configuration not found.");return}const a=await t()._ensureSyncVfsReady();if(!a){t()._setRepoInitializationStatus(n,"error");return}await dse(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){ut.error("Conversation not found for syncing.");return}if(!r.syncRepoId){ut.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(s=>s.id===r.syncRepoId);if(!a){ut.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}const i=await t()._ensureSyncVfsReady();if(!i){t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await fse(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const o=t().getConversationById(n);o&&e(s=>{const u=s.conversations.findIndex(c=>c.id===n);u!==-1&&(s.conversations[u]=o)})},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},getTopLevelProjectId:(n,r)=>{if(!n||!r)return null;if(r==="conversation"){const i=t().getConversationById(n);n=(i==null?void 0:i.projectId)??null,r="project"}if(r!=="project"||!n)return null;let a=t().getProjectById(n);for(;a!=null&&a.parentId;){const i=t().getProjectById(a.parentId);if(!i)return a.id;a=i}return(a==null?void 0:a.id)??null},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const o=t().getConversationById(r);if(!o){console.warn("Cannot update tool settings: Selected conversation not found.");return}const s=o.metadata??{},u={...s};n.enabledTools!==void 0&&(u.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(u.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(u)!==JSON.stringify(s)||!o.metadata)&&await i(r,{metadata:u})},getEffectiveProjectSettings:n=>{const r=qr.getState(),a=fi.getState(),i={systemPrompt:r.globalSystemPrompt,modelId:a.selectedModelId,temperature:r.temperature,maxTokens:r.maxTokens,topP:r.topP,topK:r.topK,presencePenalty:r.presencePenalty,frequencyPenalty:r.frequencyPenalty};if(!n)return i;const o=[];let s=n;for(;s;){const c=t().getProjectById(s);c?(o.unshift(c),s=c.parentId):s=null}return o.reduce((c,f)=>({systemPrompt:f.systemPrompt!==void 0?f.systemPrompt:c.systemPrompt,modelId:f.modelId!==void 0?f.modelId:c.modelId,temperature:f.temperature!==void 0?f.temperature:c.temperature,maxTokens:f.maxTokens!==void 0?f.maxTokens:c.maxTokens,topP:f.topP!==void 0?f.topP:c.topP,topK:f.topK!==void 0?f.topK:c.topK,presencePenalty:f.presencePenalty!==void 0?f.presencePenalty:c.presencePenalty,frequencyPenalty:f.frequencyPenalty!==void 0?f.frequencyPenalty:c.frequencyPenalty}),i)}}))),mse=Symbol("Let zodToJsonSchema decide on which parser to use"),f4={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},gse=e=>typeof e=="string"?{...f4,name:e}:{...f4,...e},yse=e=>{const t=gse(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function NP(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function dr(e,t,n,r,a){e[t]=n,NP(e,t,r,a)}function bse(){return{}}function vse(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==$t.ZodAny&&(n.items=rr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&dr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&dr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(dr(n,"minItems",e.exactLength.value,e.exactLength.message,t),dr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function wse(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function _se(){return{type:"boolean"}}function IP(e,t){return rr(e.type._def,t)}const xse=(e,t)=>rr(e.innerType._def,t);function OP(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>OP(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Sse(e,t)}}const Sse=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":dr(n,"minimum",r.value,r.message,t);break;case"max":dr(n,"maximum",r.value,r.message,t);break}return n};function Ese(e,t){return{...rr(e.innerType._def,t),default:e.defaultValue()}}function kse(e,t){return t.effectStrategy==="input"?rr(e.schema._def,t):{}}function Cse(e){return{type:"string",enum:Array.from(e.values)}}const Ase=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Tse(e,t){const n=[rr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),rr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(Ase(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...u}=i;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function Rse(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let ES;const To={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(ES===void 0&&(ES=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ES),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function jP(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ro(n,"email",r.message,t);break;case"format:idn-email":Ro(n,"idn-email",r.message,t);break;case"pattern:zod":si(n,To.email,r.message,t);break}break;case"url":Ro(n,"uri",r.message,t);break;case"uuid":Ro(n,"uuid",r.message,t);break;case"regex":si(n,r.regex,r.message,t);break;case"cuid":si(n,To.cuid,r.message,t);break;case"cuid2":si(n,To.cuid2,r.message,t);break;case"startsWith":si(n,RegExp(`^${kS(r.value,t)}`),r.message,t);break;case"endsWith":si(n,RegExp(`${kS(r.value,t)}$`),r.message,t);break;case"datetime":Ro(n,"date-time",r.message,t);break;case"date":Ro(n,"date",r.message,t);break;case"time":Ro(n,"time",r.message,t);break;case"duration":Ro(n,"duration",r.message,t);break;case"length":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{si(n,RegExp(kS(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Ro(n,"ipv4",r.message,t),r.version!=="v4"&&Ro(n,"ipv6",r.message,t);break}case"base64url":si(n,To.base64url,r.message,t);break;case"jwt":si(n,To.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&si(n,To.ipv4Cidr,r.message,t),r.version!=="v4"&&si(n,To.ipv6Cidr,r.message,t);break}case"emoji":si(n,To.emoji(),r.message,t);break;case"ulid":{si(n,To.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Ro(n,"binary",r.message,t);break}case"contentEncoding:base64":{dr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{si(n,To.base64,r.message,t);break}}break}case"nanoid":si(n,To.nanoid,r.message,t)}return n}function kS(e,t){return t.patternStrategy==="escape"?Ise(e):e}const Nse=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Ise(e){let t="";for(let n=0;n<e.length;n++)Nse.has(e[n])||(t+="\\"),t+=e[n];return t}function Ro(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):dr(e,"format",t,n,r)}function si(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:h4(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):dr(e,"pattern",h4(t,r),n,r)}function h4(e,t){var u;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){s?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),s=!1):r[c+1]==="-"&&((u=r[c+2])!=null&&u.match(/[a-z]/))?(a+=r[c],s=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function DP(e,t){var r,a,i,o,s,u;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===$t.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,f)=>({...c,[f]:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",f]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===$t.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...f}=jP(e.keyType._def,t);return{...n,propertyNames:f}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===$t.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===$t.ZodBranded&&e.keyType._def.type._def.typeName===$t.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=IP(e.keyType._def,t);return{...n,propertyNames:f}}}return n}function Ose(e,t){if(t.mapStrategy==="record")return DP(e,t);const n=rr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function jse(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Dse(){return{not:{}}}function Mse(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const av={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Pse(e,t){if(t.target==="openApi3")return p4(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in av&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=av[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return p4(e,t)}const p4=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>rr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Fse(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:av[e.innerType._def.typeName],nullable:!0}:{type:[av[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=rr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=rr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Lse(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",NP(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function $se(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let u=i[s];if(u===void 0||u._def===void 0)continue;let c=zse(u);c&&n&&(u instanceof Fo&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),c=!1);const f=rr(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});f!==void 0&&(r.properties[s]=f,c||a.push(s))}a.length&&(r.required=a);const o=Bse(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Bse(e,t){if(e.catchall._def.typeName!=="ZodNever")return rr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function zse(e){try{return e.isOptional()}catch{return!0}}const Use=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return rr(e.innerType._def,t);const n=rr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},qse=(e,t)=>{if(t.pipeStrategy==="input")return rr(e.in._def,t);if(t.pipeStrategy==="output")return rr(e.out._def,t);const n=rr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=rr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Hse(e,t){return rr(e.type._def,t)}function Vse(e,t){const r={type:"array",uniqueItems:!0,items:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&dr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&dr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Gse(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>rr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:rr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>rr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Wse(){return{not:{}}}function Kse(){return{}}const Zse=(e,t)=>rr(e.innerType._def,t),Yse=(e,t,n)=>{switch(t){case $t.ZodString:return jP(e,n);case $t.ZodNumber:return Lse(e,n);case $t.ZodObject:return $se(e,n);case $t.ZodBigInt:return wse(e,n);case $t.ZodBoolean:return _se();case $t.ZodDate:return OP(e,n);case $t.ZodUndefined:return Wse();case $t.ZodNull:return Mse(n);case $t.ZodArray:return vse(e,n);case $t.ZodUnion:case $t.ZodDiscriminatedUnion:return Pse(e,n);case $t.ZodIntersection:return Tse(e,n);case $t.ZodTuple:return Gse(e,n);case $t.ZodRecord:return DP(e,n);case $t.ZodLiteral:return Rse(e,n);case $t.ZodEnum:return Cse(e);case $t.ZodNativeEnum:return jse(e);case $t.ZodNullable:return Fse(e,n);case $t.ZodOptional:return Use(e,n);case $t.ZodMap:return Ose(e,n);case $t.ZodSet:return Vse(e,n);case $t.ZodLazy:return()=>e.getter()._def;case $t.ZodPromise:return Hse(e,n);case $t.ZodNaN:case $t.ZodNever:return Dse();case $t.ZodEffects:return kse(e,n);case $t.ZodAny:return bse();case $t.ZodUnknown:return Kse();case $t.ZodDefault:return Ese(e,n);case $t.ZodBranded:return IP(e,n);case $t.ZodReadonly:return Zse(e,n);case $t.ZodCatch:return xse(e,n);case $t.ZodPipeline:return qse(e,n);case $t.ZodFunction:case $t.ZodVoid:case $t.ZodSymbol:return;default:return(r=>{})()}};function rr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(u!==mse)return u}if(r&&!n){const u=Xse(r,t);if(u!==void 0)return u}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Yse(e,e.typeName,t),o=typeof i=="function"?rr(i(),t):i;if(o&&Qse(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return a.jsonSchema=o,u}return a.jsonSchema=o,o}const Xse=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Jse(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Jse=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Qse=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),ele=(e,t)=>{const n=yse(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,f])=>({...u,[c]:rr(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=rr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var Wm={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Km={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Zm={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Ym={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Xm={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},tle=[Wm,Km,Zm,Ym,Xm];Wm.code+"",Km.code+"",Zm.code+"",Ym.code+"",Xm.code+"";Wm.name+"",Wm.code,Km.name+"",Km.code,Zm.name+"",Zm.code,Ym.name+"",Ym.code,Xm.name+"",Xm.code;tle.map(e=>e.code);function nle(e){const t=["ROOT"];let n=-1,r=null;function a(u,c,f){switch(u){case'"':{n=c,t.pop(),t.push(f),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START");break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function o(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":a(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=u,t.pop();break}default:{n=u,a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}default:{n=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,u+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u)):n=u;break}}}let s=e.slice(0,n+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?s+="true".slice(f.length):"false".startsWith(f)?s+="false".slice(f.length):"null".startsWith(f)&&(s+="null".slice(f.length))}}return s}function rle(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Zc({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Zc({text:nle(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var ale={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},ile={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},ole={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},sle={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},lle={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},ule={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},cle={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},dle={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},fle={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},hle={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},ple={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},mle={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},gle={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},yle={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},ble={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},vle={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},hw=[ale,ile,ole,sle,lle,ule,cle,dle,fle,hle,ple,mle,gle,yle,ble,vle];Object.fromEntries(hw.map(e=>[e.code,e]));Object.fromEntries(hw.map(e=>[e.name,e.code]));hw.map(e=>e.code);function Ha(e,t){const n=hw.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function wle(e,t){var n;const r=(n=void 0)!=null?n:!1;return _le(ele(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var B2=Symbol.for("vercel.ai.schema");function _le(e,{validate:t}={}){return{[B2]:!0,_type:void 0,[sb]:!0,jsonSchema:e,validate:t}}function xle(e){return typeof e=="object"&&e!==null&&B2 in e&&e[B2]===!0&&"jsonSchema"in e&&"validate"in e}function pw(e){return xle(e)?e:wle(e)}const m4=globalThis||void 0||self;var Sle=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof m4=="object"?m4:{},Vc="1.9.0",g4=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Ele(e){var t=new Set([e]),n=new Set,r=e.match(g4);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(u){return u===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(g4);if(!c)return i(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||a.major!==f.major?i(u):a.major===0?a.minor===f.minor&&a.patch<=f.patch?o(u):i(u):a.minor<=f.minor?o(u):i(u)}}var kle=Ele(Vc),Cle=Vc.split(".")[0],Jm=Symbol.for("opentelemetry.js.api."+Cle),Qm=Sle;function qk(e,t,n,r){var a;r===void 0&&(r=!1);var i=Qm[Jm]=(a=Qm[Jm])!==null&&a!==void 0?a:{version:Vc};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==Vc){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Vc);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Vc+"."),!0}function e0(e){var t,n,r=(t=Qm[Jm])===null||t===void 0?void 0:t.version;if(!(!r||!kle(r)))return(n=Qm[Jm])===null||n===void 0?void 0:n[e]}function Hk(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Vc+".");var n=Qm[Jm];n&&delete n[e]}var Ale=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Tle=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Rle=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Kp("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Kp("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Kp("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Kp("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Kp("verbose",this._namespace,t)},e}();function Kp(e,t,n){var r=e0("diag");if(r)return n.unshift(t),r[e].apply(r,Tle([],Ale(n),!1))}var zi;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(zi||(zi={}));function Nle(e,t){e<zi.NONE?e=zi.NONE:e>zi.ALL&&(e=zi.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",zi.ERROR),warn:n("warn",zi.WARN),info:n("info",zi.INFO),debug:n("debug",zi.DEBUG),verbose:n("verbose",zi.VERBOSE)}}var Ile=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Ole=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},jle="diag",iv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=e0("diag");if(s)return s[a].apply(s,Ole([],Ile(i),!1))}}var n=this,r=function(a,i){var o,s,u;if(i===void 0&&(i={logLevel:zi.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var f=e0("diag"),h=Nle((s=i.logLevel)!==null&&s!==void 0?s:zi.INFO,a);if(f&&!i.suppressOverrideMessage){var m=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return qk("diag",h,n,!0)};n.setLogger=r,n.disable=function(){Hk(jle,n)},n.createComponentLogger=function(a){return new Rle(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Dle(e){return Symbol.for(e)}var Mle=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Ple=new Mle,Fle=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Lle=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},$le=function(){function e(){}return e.prototype.active=function(){return Ple},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Lle([r],Fle(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Ble=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},zle=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},CS="context",Ule=new $le,MP=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return qk(CS,t,iv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,zle([t,n,r],Ble(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return e0(CS)||Ule},e.prototype.disable=function(){this._getContextManager().disable(),Hk(CS,iv.instance())},e}(),z2;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(z2||(z2={}));var PP="0000000000000000",FP="00000000000000000000000000000000",qle={traceId:FP,spanId:PP,traceFlags:z2.NONE},tm=function(){function e(t){t===void 0&&(t=qle),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),Vk=Dle("OpenTelemetry Context Key SPAN");function Gk(e){return e.getValue(Vk)||void 0}function Hle(){return Gk(MP.getInstance().active())}function Wk(e,t){return e.setValue(Vk,t)}function Vle(e){return e.deleteValue(Vk)}function Gle(e,t){return Wk(e,new tm(t))}function LP(e){var t;return(t=Gk(e))===null||t===void 0?void 0:t.spanContext()}var Wle=/^([0-9a-f]{32})$/i,Kle=/^[0-9a-f]{16}$/i;function Zle(e){return Wle.test(e)&&e!==FP}function Yle(e){return Kle.test(e)&&e!==PP}function $P(e){return Zle(e.traceId)&&Yle(e.spanId)}function Xle(e){return new tm(e)}var AS=MP.getInstance(),BP=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=AS.active());var a=!!(n!=null&&n.root);if(a)return new tm;var i=r&&LP(r);return Jle(i)&&$P(i)?new tm(i):new tm},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var u=o??AS.active(),c=this.startSpan(t,i,u),f=Wk(u,c);return AS.with(f,s,void 0,c)}},e}();function Jle(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Qle=new BP,eue=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Qle},e}(),tue=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new BP},e}(),nue=new tue,y4=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new eue(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:nue},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),ov;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(ov||(ov={}));var TS="trace",rue=function(){function e(){this._proxyTracerProvider=new y4,this.wrapSpanContext=Xle,this.isSpanContextValid=$P,this.deleteSpan=Vle,this.getSpan=Gk,this.getActiveSpan=Hle,this.getSpanContext=LP,this.setSpan=Wk,this.setSpanContext=Gle}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=qk(TS,this._proxyTracerProvider,iv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return e0(TS)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Hk(TS,iv.instance()),this._proxyTracerProvider=new y4},e}(),aue=rue.getInstance(),iue=Object.defineProperty,Kk=(e,t)=>{for(var n in t)iue(e,n,{get:t[n],enumerable:!0})};function sv(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function b4(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function v4({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:u}=await i.read();if(s)break;e.write(u)}}catch(s){throw s}finally{e.end()}})()}var zP="AI_InvalidArgumentError",UP=`vercel.ai.error.${zP}`,oue=Symbol.for(UP),qP,Io=class extends Sn{constructor({parameter:e,value:t,message:n}){super({name:zP,message:`Invalid argument for parameter ${e}: ${n}`}),this[qP]=!0,this.parameter=e,this.value=t}static isInstance(e){return Sn.hasMarker(e,UP)}};qP=oue;var HP="AI_RetryError",VP=`vercel.ai.error.${HP}`,sue=Symbol.for(VP),GP,w4=class extends Sn{constructor({message:e,reason:t,errors:n}){super({name:HP,message:e}),this[GP]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Sn.hasMarker(e,VP)}};GP=sue;var lue=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>WP(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function WP(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Gy(i)||t===0)throw i;const o=hU(i),s=[...a,i],u=s.length;if(u>t)throw new w4({message:`Failed after ${u} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&ha.isInstance(i)&&i.isRetryable===!0&&u<=t)return await cU(n),WP(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw u===1?i:new w4({message:`Failed after ${u} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function uue({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Io({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Io({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:lue({maxRetries:t})}}function U2({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function cue({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var due={startSpan(){return Ly},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Ly);if(typeof n=="function")return n(Ly);if(typeof r=="function")return r(Ly)}},Ly={spanContext(){return fue},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},fue={traceId:"",spanId:"",traceFlags:0};function hue({isEnabled:e=!1,tracer:t}={}){return e?t||aue.getTracer("ai"):due}function q2({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:ov.ERROR,message:o.message})):i.setStatus({code:ov.ERROR})}finally{i.end()}throw o}})}function Rf({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var pue=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Bf(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=rO(this.base64Data)),this.uint8ArrayData}},mue=class extends pue{constructor(e){super(e),this.type="file"}},gue=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function yue(e){for(const t of gue)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var KP="AI_NoObjectGeneratedError",ZP=`vercel.ai.error.${KP}`,bue=Symbol.for(ZP),YP,_4=class extends Sn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:KP,message:e,cause:t}),this[YP]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return Sn.hasMarker(e,ZP)}};YP=bue;var XP="AI_DownloadError",JP=`vercel.ai.error.${XP}`,vue=Symbol.for(JP),QP,RS=class extends Sn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:XP,message:a,cause:r}),this[QP]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Sn.hasMarker(e,JP)}};QP=vue;async function wue({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new RS({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw RS.isInstance(a)?a:new RS({url:r,cause:a})}}var e5="AI_InvalidDataContentError",t5=`vercel.ai.error.${e5}`,_ue=Symbol.for(t5),n5,x4=class extends Sn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:e5,message:n,cause:t}),this[n5]=!0,this.content=e}static isInstance(e){return Sn.hasMarker(e,t5)}};n5=_ue;var r5=F.union([F.string(),F.instanceof(Uint8Array),F.instanceof(ArrayBuffer),F.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function a5(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Bf(new Uint8Array(e)):Bf(e)}function lv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return rO(e)}catch(t){throw new x4({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new x4({content:e})}function xue(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var i5="AI_InvalidMessageRoleError",o5=`vercel.ai.error.${i5}`,Sue=Symbol.for(o5),s5,Eue=class extends Sn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:i5,message:t}),this[s5]=!0,this.role=e}static isInstance(e){return Sn.hasMarker(e,o5)}};s5=Sue;function kue(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function Cue({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=wue}){const a=await Tue(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>Aue(i,a))]}function Aue(e,t){var n,r,a,i,o,s;const u=e.role;switch(u){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>Rue(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var f;const h=(f=c.providerOptions)!=null?f:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:a5(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var f;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(f=c.providerOptions)!=null?f:c.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const c=u;throw new Eue({role:c})}}}async function Tue(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function Rue(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,u,c;const f=e.type;switch(f){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${f}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){const{mimeType:h,base64Content:m}=kue(u.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${f}`);o=h,c=lv(m)}else{const h=t[u.toString()];h?(c=h.data,o??(o=h.mimeType)):c=u}else c=lv(u);switch(f){case"image":return c instanceof Uint8Array&&(o=(r=yue(c))!=null?r:o),{type:"image",image:c,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?a5(c):c,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function Nue({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new Io({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Io({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Io({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Io({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Io({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Io({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Io({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Io({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function S4(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,u,c;try{[s,u]=i.url.split(","),c=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||u==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:lv(u)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:xue(lv(u))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:u,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var l5="AI_MessageConversionError",u5=`vercel.ai.error.${l5}`,Iue=Symbol.for(u5),c5,NS=class extends Sn{constructor({originalMessage:e,message:t}){super({name:l5,message:t}),this[c5]=!0,this.originalMessage=e}static isInstance(e){return Sn.hasMarker(e,u5)}};c5=Iue;function Oue(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],u=o===e.length-1,{role:c,content:f,experimental_attachments:h}=s;switch(c){case"system":{i.push({role:"system",content:f});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:f},...S4(h)]:f});else{const m=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,...S4(h)]:m})}break}case"assistant":{if(s.parts!=null){let v=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const A of C.details)switch(A.type){case"text":S.push({type:"reasoning",text:A.text,signature:A.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:A.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const A=C;throw new Error(`Unsupported part: ${A}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new NS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:A,toolName:j,result:O}=C,N=a[j];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:A,toolName:j,result:N.experimental_toToolResultContent(O),experimental_content:N.experimental_toToolResultContent(O)}:{type:"tool-result",toolCallId:A,toolName:j,result:O}})}),x=[],_=!1,w++},w=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&v(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==w&&v(),x.push(S),_=!0;break}}v();break}const m=s.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:f});break}const g=m.reduce((v,w)=>{var _;return Math.max(v,(_=w.step)!=null?_:0)},0);for(let v=0;v<=g;v++){const w=m.filter(_=>{var x;return((x=_.step)!=null?x:0)===v});w.length!==0&&(i.push({role:"assistant",content:[...u&&f&&v===0?[{type:"text",text:f}]:[],...w.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:w.map(_=>{if(!("result"in _))throw new NS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}f&&!u&&i.push({role:"assistant",content:f});break}case"data":break;default:{const m=c;throw new NS({originalMessage:s,message:`Unsupported role: ${m}`})}}}return i}function jue(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Due);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Due(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var H2=F.lazy(()=>F.union([F.null(),F.string(),F.number(),F.boolean(),F.record(F.string(),H2),F.array(H2)])),Zr=F.record(F.string(),F.record(F.string(),H2)),Mue=F.array(F.union([F.object({type:F.literal("text"),text:F.string()}),F.object({type:F.literal("image"),data:F.string(),mimeType:F.string().optional()})])),d5=F.object({type:F.literal("text"),text:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Pue=F.object({type:F.literal("image"),image:F.union([r5,F.instanceof(URL)]),mimeType:F.string().optional(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),f5=F.object({type:F.literal("file"),data:F.union([r5,F.instanceof(URL)]),filename:F.string().optional(),mimeType:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Fue=F.object({type:F.literal("reasoning"),text:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Lue=F.object({type:F.literal("redacted-reasoning"),data:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),$ue=F.object({type:F.literal("tool-call"),toolCallId:F.string(),toolName:F.string(),args:F.unknown(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Bue=F.object({type:F.literal("tool-result"),toolCallId:F.string(),toolName:F.string(),result:F.unknown(),content:Mue.optional(),isError:F.boolean().optional(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),zue=F.object({role:F.literal("system"),content:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Uue=F.object({role:F.literal("user"),content:F.union([F.string(),F.array(F.union([d5,Pue,f5]))]),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),que=F.object({role:F.literal("assistant"),content:F.union([F.string(),F.array(F.union([d5,f5,Fue,Lue,$ue]))]),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Hue=F.object({role:F.literal("tool"),content:F.array(Bue),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Vue=F.union([zue,Uue,que,Hue]);function Gue({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new pl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new pl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new pl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new pl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=jue(e.messages);if(n==="other")throw new pl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?Oue(e.messages,{tools:t}):e.messages;if(r.length===0)throw new pl({prompt:e,message:"messages must not be empty"});const a=fh({value:r,schema:F.array(Vue)});if(!a.success)throw new pl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Wue({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Kue(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Zue="JSON schema:",Yue="You MUST answer with a JSON object that matches the JSON schema above.",Xue="You MUST answer with JSON.";function Jue({prompt:e,schema:t,schemaPrefix:n=t!=null?Zue:void 0,schemaSuffix:r=t!=null?Yue:Xue}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function IS(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}od({prefix:"aiobj",size:24});var wi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function E4(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Que(){let e=[],t=null,n=!1,r=E4();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=E4(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function ece(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}od({prefix:"aiobj",size:24});var h5="AI_NoOutputSpecifiedError",p5=`vercel.ai.error.${h5}`,tce=Symbol.for(p5),m5,nce=class extends Sn{constructor({message:e="No output specified."}={}){super({name:h5,message:e}),this[m5]=!0}static isInstance(e){return Sn.hasMarker(e,p5)}};m5=tce;var g5="AI_ToolExecutionError",y5=`vercel.ai.error.${g5}`,rce=Symbol.for(y5),b5,ace=class extends Sn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${s0(r)}`}){super({name:g5,message:a,cause:r}),this[b5]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Sn.hasMarker(e,y5)}};b5=rce;function ice(e){return e!=null&&Object.keys(e).length>0}function oce({tools:e,toolChoice:t,activeTools:n}){return ice(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:pw(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var sce=/^([\s\S]*?)(\s+)(\S*)$/;function lce(e){const t=e.match(sce);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var v5="AI_InvalidToolArgumentsError",w5=`vercel.ai.error.${v5}`,uce=Symbol.for(w5),_5,x5=class extends Sn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${s0(n)}`}){super({name:v5,message:r,cause:n}),this[_5]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Sn.hasMarker(e,w5)}};_5=uce;var S5="AI_NoSuchToolError",E5=`vercel.ai.error.${S5}`,cce=Symbol.for(E5),k5,V2=class extends Sn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:S5,message:n}),this[k5]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Sn.hasMarker(e,E5)}};k5=cce;var C5="AI_ToolCallRepairError",A5=`vercel.ai.error.${C5}`,dce=Symbol.for(A5),T5,fce=class extends Sn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${s0(e)}`}){super({name:C5,message:n,cause:e}),this[T5]=!0,this.originalError=t}static isInstance(e){return Sn.hasMarker(e,A5)}};T5=dce;async function hce({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new V2({toolName:e.toolName});try{return await k4({toolCall:e,tools:t})}catch(i){if(n==null||!(V2.isInstance(i)||x5.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>pw(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new fce({cause:s,originalError:i})}if(o==null)throw i;return await k4({toolCall:o,tools:t})}}async function k4({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new V2({toolName:e.toolName,availableTools:Object.keys(t)});const a=pw(r.parameters),i=e.args.trim()===""?fh({value:{},schema:a}):Zc({text:e.args,schema:a});if(i.success===!1)throw new x5({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function pce(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function C4({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const u=[];return u.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&u.push({role:"tool",id:s(),content:i.map(c=>{const f=r[c.toolName];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:f.experimental_toToolResultContent(c.result),experimental_content:f.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),u}od({prefix:"aitxt",size:24});od({prefix:"msg",size:24});var mce={};Kk(mce,{object:()=>vce,text:()=>bce});var R5="AI_InvalidStreamPartError",N5=`vercel.ai.error.${R5}`,gce=Symbol.for(N5),I5,yce=class extends Sn{constructor({chunk:e,message:t}){super({name:R5,message:t}),this[I5]=!0,this.chunk=e}static isInstance(e){return Sn.hasMarker(e,N5)}};I5=gce;var bce=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),vce=({schema:e})=>{const t=pw(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Jue({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=rle(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=Zc({text:n});if(!a.success)throw new _4({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=fh({value:a.value,schema:t});if(!i.success)throw new _4({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function wce(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Zk(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function u(f){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}async function c(f){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}return new ReadableStream({async pull(f){try{if(o){await c(f);return}if(s){await u(f);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||f.enqueue(h.value),m===n?(a=void 0,h.done&&(await c(f),o=!0)):(i=void 0,h.done&&(s=!0,await u(f)))}catch(h){f.error(h)}},cancel(){n.cancel(),r.cancel()}})}function _ce({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:u}){let c=null;const f=new ReadableStream({start(x){c=x}}),h={},m=new Set;let g=!1,v;function w(){g&&m.size===0&&(v!=null&&c.enqueue(v),c.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new mue({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await hce({toolCall:x,tools:e,repairToolCall:u,system:i,messages:o});S.enqueue(C);const A=e[C.toolName];if(A.execute!=null){const j=vs();m.add(j),q2({name:"ai.toolCall",attributes:Rf({telemetry:a,attributes:{...U2({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async O=>A.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(N=>{c.enqueue({...C,type:"tool-result",result:N}),m.delete(j),w();try{O.setAttributes(Rf({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{c.enqueue({type:"error",error:new ace({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:N})}),m.delete(j),w()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:Wue(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,w()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),f.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var xce=od({prefix:"aitxt",size:24}),Sce=od({prefix:"msg",size:24});function Ece({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:u,maxSteps:c=1,experimental_generateMessageId:f=Sce,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:w=v,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:A,onError:j,onFinish:O,onStepFinish:N,_internal:{now:z=ece,generateId:H=xce,currentDate:Q=()=>new Date}={},...P}){return new Cce({model:e,telemetry:g,headers:u,settings:P,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:wce(C),activeTools:S,repairToolCall:E,maxSteps:c,output:h,continueSteps:m,providerOptions:w,onChunk:A,onError:j,onFinish:O,onStepFinish:N,now:z,currentDate:Q,generateId:H,generateMessageId:f})}function kce(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const u=JSON.stringify(s.partial);u!==r&&(a({controller:o,partialOutput:s.partial}),r=u)}},flush(i){n.length>0&&a({controller:i})}})}var Cce=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:u,tools:c,toolChoice:f,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:v,maxSteps:w,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:A,generateMessageId:j,onChunk:O,onError:N,onFinish:z,onStepFinish:H}){this.warningsPromise=new wi,this.usagePromise=new wi,this.finishReasonPromise=new wi,this.providerMetadataPromise=new wi,this.textPromise=new wi,this.reasoningPromise=new wi,this.reasoningDetailsPromise=new wi,this.sourcesPromise=new wi,this.filesPromise=new wi,this.toolCallsPromise=new wi,this.toolResultsPromise=new wi,this.requestPromise=new wi,this.responsePromise=new wi,this.stepsPromise=new wi;var Q;if(w<1)throw new Io({parameter:"maxSteps",value:w,message:"maxSteps must be at least 1"});this.output=_;let P="",Z="",V="",te=[],ae=[],re,Y=[];const ne=[],G={id:A(),timestamp:C(),modelId:e.modelId,messages:[]};let X=[],oe=[],ye,we,fe="initial";const Me=[];let Fe;const Oe=new TransformStream({async transform(ce,se){se.enqueue(ce);const{part:J}=ce;if((J.type==="text-delta"||J.type==="reasoning"||J.type==="source"||J.type==="tool-call"||J.type==="tool-result"||J.type==="tool-call-streaming-start"||J.type==="tool-call-delta")&&await(O==null?void 0:O({chunk:J})),J.type==="error"&&await(N==null?void 0:N({error:J.error})),J.type==="text-delta"&&(P+=J.textDelta,Z+=J.textDelta,V+=J.textDelta),J.type==="reasoning"&&(re==null?(re={type:"text",text:J.textDelta},te.push(re)):re.text+=J.textDelta),J.type==="reasoning-signature"){if(re==null)throw new Sn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});re.signature=J.signature,re=void 0}if(J.type==="redacted-reasoning"&&te.push({type:"redacted",data:J.data}),J.type==="file"&&ae.push(J),J.type==="source"&&(ne.push(J.source),Y.push(J.source)),J.type==="tool-call"&&X.push(J),J.type==="tool-result"&&oe.push(J),J.type==="step-finish"){const xe=C4({text:Z,files:ae,reasoning:te,tools:c??{},toolCalls:X,toolResults:oe,messageId:J.messageId,generateMessageId:j}),Pe=Me.length;let Se="done";Pe+1<w&&(x&&J.finishReason==="length"&&X.length===0?Se="continue":X.length>0&&oe.length===X.length&&(Se="tool-result"));const Ze={stepType:fe,text:P,reasoning:pce(te),reasoningDetails:te,files:ae,sources:Y,toolCalls:X,toolResults:oe,finishReason:J.finishReason,usage:J.usage,warnings:J.warnings,logprobs:J.logprobs,request:J.request,response:{...J.response,messages:[...G.messages,...xe]},providerMetadata:J.experimental_providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,isContinued:J.isContinued};await(H==null?void 0:H(Ze)),Me.push(Ze),X=[],oe=[],P="",Y=[],te=[],ae=[],re=void 0,Se!=="done"&&(fe=Se),Se!=="continue"&&(G.messages.push(...xe),Z="")}J.type==="finish"&&(G.id=J.response.id,G.timestamp=J.response.timestamp,G.modelId=J.response.modelId,G.headers=J.response.headers,we=J.usage,ye=J.finishReason)},async flush(ce){var se;try{if(Me.length===0)return;const J=Me[Me.length-1];Ae.warningsPromise.resolve(J.warnings),Ae.requestPromise.resolve(J.request),Ae.responsePromise.resolve(J.response),Ae.toolCallsPromise.resolve(J.toolCalls),Ae.toolResultsPromise.resolve(J.toolResults),Ae.providerMetadataPromise.resolve(J.experimental_providerMetadata),Ae.reasoningPromise.resolve(J.reasoning),Ae.reasoningDetailsPromise.resolve(J.reasoningDetails);const xe=ye??"unknown",Pe=we??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ae.finishReasonPromise.resolve(xe),Ae.usagePromise.resolve(Pe),Ae.textPromise.resolve(V),Ae.sourcesPromise.resolve(ne),Ae.filesPromise.resolve(J.files),Ae.stepsPromise.resolve(Me),await(z==null?void 0:z({finishReason:xe,logprobs:void 0,usage:Pe,text:V,reasoning:J.reasoning,reasoningDetails:J.reasoningDetails,files:J.files,sources:J.sources,toolCalls:J.toolCalls,toolResults:J.toolResults,request:(se=J.request)!=null?se:{},response:J.response,warnings:J.warnings,providerMetadata:J.providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,steps:Me})),Fe.setAttributes(Rf({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>V},"ai.response.toolCalls":{output:()=>{var Se;return(Se=J.toolCalls)!=null&&Se.length?JSON.stringify(J.toolCalls):void 0}},"ai.usage.promptTokens":Pe.promptTokens,"ai.usage.completionTokens":Pe.completionTokens}}))}catch(J){ce.error(J)}finally{Fe.end()}}}),Re=Que();this.addStream=Re.addStream,this.closeStream=Re.close;let ze=Re.stream;for(const ce of m)ze=ze.pipeThrough(ce({tools:c,stopStream(){Re.terminate()}}));this.baseStream=ze.pipeThrough(kce(_)).pipeThrough(Oe);const{maxRetries:He,retry:Te}=uue({maxRetries:a}),Ce=hue(t),B=cue({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:He}}),ke=Gue({prompt:{system:(Q=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?Q:o,prompt:s,messages:u},tools:c}),Ae=this;q2({name:"ai.streamText",attributes:Rf({telemetry:t,attributes:{...U2({operationId:"ai.streamText",telemetry:t}),...B,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:u})},"ai.settings.maxSteps":w}}),tracer:Ce,endWhenDone:!1,fn:async ce=>{Fe=ce;async function se({currentStep:J,responseMessages:xe,usage:Pe,stepType:Se,previousStepText:Ze,hasLeadingWhitespace:Et,messageId:at}){var _t;const Nt=xe.length===0?ke.type:"messages",Rt=[...ke.messages,...xe],Kt=await Cue({prompt:{type:Nt,system:ke.system,messages:Rt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(_t=e.supportsUrl)==null?void 0:_t.bind(e)}),pe={type:"regular",...oce({tools:c,toolChoice:f,activeTools:g})},{result:{stream:R,warnings:q,rawResponse:de,request:Ie},doStreamSpan:be,startTimestampMs:Ee}=await Te(()=>q2({name:"ai.streamText.doStream",attributes:Rf({telemetry:t,attributes:{...U2({operationId:"ai.streamText.doStream",telemetry:t}),...B,"ai.prompt.format":{input:()=>Nt},"ai.prompt.messages":{input:()=>JSON.stringify(Kt)},"ai.prompt.tools":{input:()=>{var Ct;return(Ct=pe.tools)==null?void 0:Ct.map(Ot=>JSON.stringify(Ot))}},"ai.prompt.toolChoice":{input:()=>pe.toolChoice!=null?JSON.stringify(pe.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ce,endWhenDone:!1,fn:async Ct=>({startTimestampMs:E(),doStreamSpan:Ct,result:await e.doStream({mode:pe,...Nue(r),inputFormat:Nt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:Kt,providerMetadata:S,abortSignal:i,headers:n})})})),le=_ce({tools:c,generatorStream:R,toolCallStreaming:h,tracer:Ce,telemetry:t,system:o,messages:Rt,repairToolCall:v,abortSignal:i}),ft=Ie??{},vt=[],D=[],$e=[],st=[];let ge,De="unknown",Je={promptTokens:0,completionTokens:0,totalTokens:0},It,me=!0,U="",$=Se==="continue"?Ze:"",W,he={id:A(),timestamp:C(),modelId:e.modelId},Ne="",Ve=!1,gt=!0,Gt=!1;async function ht({controller:Ct,chunk:Ot}){Ct.enqueue(Ot),U+=Ot.textDelta,$+=Ot.textDelta,Ve=!0,Gt=Ot.textDelta.trimEnd()!==Ot.textDelta}Ae.addStream(le.pipeThrough(new TransformStream({async transform(Ct,Ot){var Zt,En,zn;if(me){const hr=E()-Ee;me=!1,be.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":hr}),be.setAttributes({"ai.response.msToFirstChunk":hr}),Ot.enqueue({type:"step-start",messageId:at,request:ft,warnings:q??[]})}if(Ct.type==="text-delta"&&Ct.textDelta.length===0)return;const fr=Ct.type;switch(fr){case"text-delta":{if(x){const hr=gt&&Et?Ct.textDelta.trimStart():Ct.textDelta;if(hr.length===0)break;gt=!1,Ne+=hr;const Dn=lce(Ne);Dn!=null&&(Ne=Dn.suffix,await ht({controller:Ot,chunk:{type:"text-delta",textDelta:Dn.prefix+Dn.whitespace}}))}else await ht({controller:Ot,chunk:Ct});break}case"reasoning":{Ot.enqueue(Ct),ge==null?(ge={type:"text",text:Ct.textDelta},$e.push(ge)):ge.text+=Ct.textDelta;break}case"reasoning-signature":{if(Ot.enqueue(Ct),ge==null)throw new yce({chunk:Ct,message:"reasoning-signature without reasoning"});ge.signature=Ct.signature,ge=void 0;break}case"redacted-reasoning":{Ot.enqueue(Ct),$e.push({type:"redacted",data:Ct.data});break}case"tool-call":{Ot.enqueue(Ct),vt.push(Ct);break}case"tool-result":{Ot.enqueue(Ct),D.push(Ct);break}case"response-metadata":{he={id:(Zt=Ct.id)!=null?Zt:he.id,timestamp:(En=Ct.timestamp)!=null?En:he.timestamp,modelId:(zn=Ct.modelId)!=null?zn:he.modelId};break}case"finish":{Je=Ct.usage,De=Ct.finishReason,It=Ct.experimental_providerMetadata,W=Ct.logprobs;const hr=E()-Ee;be.addEvent("ai.stream.finish"),be.setAttributes({"ai.response.msToFinish":hr,"ai.response.avgCompletionTokensPerSecond":1e3*Je.completionTokens/hr});break}case"file":{st.push(Ct),Ot.enqueue(Ct);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Ot.enqueue(Ct);break}case"error":{Ot.enqueue(Ct),De="error";break}default:{const hr=fr;throw new Error(`Unknown chunk type: ${hr}`)}}},async flush(Ct){const Ot=vt.length>0?JSON.stringify(vt):void 0;let Zt="done";J+1<w&&(x&&De==="length"&&vt.length===0?Zt="continue":vt.length>0&&D.length===vt.length&&(Zt="tool-result")),x&&Ne.length>0&&(Zt!=="continue"||Se==="continue"&&!Ve)&&(await ht({controller:Ct,chunk:{type:"text-delta",textDelta:Ne}}),Ne="");try{be.setAttributes(Rf({telemetry:t,attributes:{"ai.response.finishReason":De,"ai.response.text":{output:()=>U},"ai.response.toolCalls":{output:()=>Ot},"ai.response.id":he.id,"ai.response.model":he.modelId,"ai.response.timestamp":he.timestamp.toISOString(),"ai.usage.promptTokens":Je.promptTokens,"ai.usage.completionTokens":Je.completionTokens,"gen_ai.response.finish_reasons":[De],"gen_ai.response.id":he.id,"gen_ai.response.model":he.modelId,"gen_ai.usage.input_tokens":Je.promptTokens,"gen_ai.usage.output_tokens":Je.completionTokens}}))}catch{}finally{be.end()}Ct.enqueue({type:"step-finish",finishReason:De,usage:Je,providerMetadata:It,experimental_providerMetadata:It,logprobs:W,request:ft,response:{...he,headers:de==null?void 0:de.headers},warnings:q,isContinued:Zt==="continue",messageId:at});const En=Kue(Pe,Je);if(Zt==="done")Ct.enqueue({type:"finish",finishReason:De,usage:En,providerMetadata:It,experimental_providerMetadata:It,logprobs:W,response:{...he,headers:de==null?void 0:de.headers}}),Ae.closeStream();else{if(Se==="continue"){const zn=xe[xe.length-1];typeof zn.content=="string"?zn.content+=U:zn.content.push({text:U,type:"text"})}else xe.push(...C4({text:U,files:st,reasoning:$e,tools:c??{},toolCalls:vt,toolResults:D,messageId:at,generateMessageId:j}));await se({currentStep:J+1,responseMessages:xe,usage:En,stepType:Zt,previousStepText:$,hasLeadingWhitespace:Gt,messageId:Zt==="continue"?at:j()})}}})))}await se({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:j()})}}).catch(ce=>{Ae.addStream(new ReadableStream({start(se){se.enqueue({type:"error",error:ce}),se.close()}})),Ae.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return IS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return IS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new nce;return IS(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Ha("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Ha("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Ha("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Ha("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Ha("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Ha("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Ha("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Ha("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Ha("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Ha("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Ha("error",e(i.error)));break}case"step-start":{o.enqueue(Ha("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Ha("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Ha("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const u=s;throw new Error(`Unknown chunk type: ${u}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c}={}){v4({response:e,status:t,statusText:n,headers:b4(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){v4({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:b4(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?Zk(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}),{status:t,statusText:n,headers:sv(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:sv(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},Ace=F.object({name:F.string(),version:F.string()}).passthrough(),Yk=F.object({_meta:F.optional(F.object({}).passthrough())}).passthrough(),t0=Yk,Tce=F.object({method:F.string(),params:F.optional(Yk)}),Rce=F.object({experimental:F.optional(F.object({}).passthrough()),logging:F.optional(F.object({}).passthrough()),prompts:F.optional(F.object({listChanged:F.optional(F.boolean())}).passthrough()),resources:F.optional(F.object({subscribe:F.optional(F.boolean()),listChanged:F.optional(F.boolean())}).passthrough()),tools:F.optional(F.object({listChanged:F.optional(F.boolean())}).passthrough())}).passthrough();t0.extend({protocolVersion:F.string(),capabilities:Rce,serverInfo:Ace,instructions:F.optional(F.string())});var Nce=t0.extend({nextCursor:F.optional(F.string())}),Ice=F.object({name:F.string(),description:F.optional(F.string()),inputSchema:F.object({type:F.literal("object"),properties:F.optional(F.object({}).passthrough())}).passthrough()}).passthrough();Nce.extend({tools:F.array(Ice)});var Oce=F.object({type:F.literal("text"),text:F.string()}).passthrough(),jce=F.object({type:F.literal("image"),data:F.string().base64(),mimeType:F.string()}).passthrough(),O5=F.object({uri:F.string(),mimeType:F.optional(F.string())}).passthrough(),Dce=O5.extend({text:F.string()}),Mce=O5.extend({blob:F.string().base64()}),Pce=F.object({type:F.literal("resource"),resource:F.union([Dce,Mce])}).passthrough();t0.extend({content:F.array(F.union([Oce,jce,Pce])),isError:F.boolean().default(!1).optional()}).or(t0.extend({toolResult:F.unknown()}));var mw="2.0",Fce=F.object({jsonrpc:F.literal(mw),id:F.union([F.string(),F.number().int()])}).merge(Tce).strict(),Lce=F.object({jsonrpc:F.literal(mw),id:F.union([F.string(),F.number().int()]),result:t0}).strict(),$ce=F.object({jsonrpc:F.literal(mw),id:F.union([F.string(),F.number().int()]),error:F.object({code:F.number().int(),message:F.string(),data:F.optional(F.unknown())})}).strict(),Bce=F.object({jsonrpc:F.literal(mw)}).merge(F.object({method:F.string(),params:F.optional(Yk)})).strict();F.union([Fce,Bce,Lce,$ce]);var zce={};Kk(zce,{mergeIntoDataStream:()=>Hce,toDataStream:()=>Uce,toDataStreamResponse:()=>qce});function j5(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function Xk(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&A4((a=n.data)==null?void 0:a.chunk,r);return}A4(n,r)}})).pipeThrough(j5(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Ha("text",n))}}))}function Uce(e,t){return Xk(e,t).pipeThrough(new TextEncoderStream)}function qce(e,t){var n;const r=Xk(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?Zk(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:sv(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Hce(e,t){t.dataStream.merge(Xk(e,t.callbacks))}function A4(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Vce={};Kk(Vce,{mergeIntoDataStream:()=>Kce,toDataStream:()=>Gce,toDataStreamResponse:()=>Wce});function Jk(e,t){const n=Zce();return uU(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(j5(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Ha("text",r))}}))}function Gce(e,t){return Jk(e,t).pipeThrough(new TextEncoderStream)}function Wce(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=Jk(e,i).pipeThrough(new TextEncoderStream),s=a?Zk(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:sv(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Kce(e,t){t.dataStream.merge(Jk(e,t.callbacks))}function Zce(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class Qy{static async startInteraction(t,n){var H,Q,P,Z,V,te,ae,re,Y;const r=Qn.getState(),a=Ur.getState(),i=r.currentConversationId;if(!i)return r.setError("No active conversation."),ut.error("Cannot start interaction: No active conversation."),null;const o=await g2("middleware:interaction:beforeStart",{prompt:t,conversationId:i});if(o===!1)return console.log("AIService: Interaction start cancelled by middleware."),null;const s=o&&typeof o=="object"?o.prompt:t,u=jo(),c=new AbortController;this.activeStreams.set(u,c);const h=r.interactions.filter(ne=>ne.conversationId===i),m=h.reduce((ne,G)=>Math.max(ne,G.index),-1)+1,g=h.length>0?h[h.length-1].id:null,v=[...s.messages];let w=-1;for(let ne=v.length-1;ne>=0;ne--)if(v[ne].role==="user"){w=ne;break}const _=((H=n.metadata)==null?void 0:H.attachedFiles)??[];if(w!==-1&&_.length>0){const ne=v[w],G=[];let X=null,oe=null;if(_.some(fe=>fe.source==="vfs")){const fe=a.getConversationById(i);oe=(fe==null?void 0:fe.projectId)??"orphan",console.log(`[AIService] VFS files detected. Target VFS key: ${oe}`);const Me=Gi.getState().configuredVfsKey;if(LI&&Me===oe)console.log(`[AIService] Using existing VFS instance for key: ${oe}`),X=LI;else{console.log(`[AIService] Existing VFS instance mismatch or unavailable (Configured: ${Me}, Needed: ${oe}). Attempting direct initialization...`);try{if(X=await OM(oe),!X)throw new Error(`Direct VFS initialization failed for key ${oe}.`);console.log(`[AIService] Direct VFS initialization successful for key ${oe}.`)}catch(Fe){console.error(`[AIService] Failed to ensure VFS ready for key ${oe} via direct init:`,Fe),ut.error(`Filesystem error: Could not access files for key ${oe}.`),X=null}}}for(const fe of _){let Me=null;try{if(fe.source==="direct")Me=CR(fe);else if(fe.source==="vfs"&&X&&fe.path){console.log(`[AIService] Fetching VFS file: ${fe.path}`);const Fe=await Nh(fe.path);Me=CR({...fe,contentBytes:Fe,contentText:void 0,contentBase64:void 0})}else fe.source==="vfs"&&(console.warn(`[AIService] Skipping VFS file ${fe.name} as VFS instance for key ${oe} could not be obtained.`),Me={type:"text",text:`[Skipped VFS file: ${fe.name} - Filesystem unavailable]`});Me&&G.push(Me)}catch(Fe){console.error(`[AIService] Error processing file ${fe.name}:`,Fe),G.push({type:"text",text:`[Error processing file: ${fe.name}]`})}}let we=[];typeof ne.content=="string"?ne.content.trim()&&we.push({type:"text",text:ne.content}):Array.isArray(ne.content)&&(we=ne.content.filter(fe=>fe&&typeof fe=="object"&&"type"in fe&&(fe.type==="text"||fe.type==="image"))),v[w]={...ne,content:[...G,...we]},console.log(`AIService: Added ${G.length} file part(s) to user message content.`)}const x={id:u,conversationId:i,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...s.metadata,attachedFiles:(Q=n.metadata.attachedFiles)==null?void 0:Q.map(({contentBase64:ne,contentText:G,...X})=>X),toolCalls:[],toolResults:[]},index:m,parentId:g};r._addInteractionToState(x),r._addStreamingId(u),Ht.saveInteraction({...x}).catch(ne=>{console.error(`AIService: Failed initial persistence for ${u}`,ne)}),Ei.emit("interaction:started",{interactionId:u,conversationId:i,type:x.type});let S,E="ERROR",C,A,j,O;const N=[],z=[];try{const ne=(P=fi.getState().getSelectedModel())==null?void 0:P.instance;if(!ne)throw new Error("Selected model instance not available.");const G=ta.getState().getRegisteredTools(),oe=(((Z=s.metadata)==null?void 0:Z.enabledTools)??[]).reduce((fe,Me)=>{const Fe=G[Me];if(Fe){const Oe={...Fe.definition};Fe.implementation&&(Oe.execute=async Re=>{try{const ze=TW(),He=Fe.definition.parameters.parse(Re),Te=Fe.implementation;return await Te(He,ze)}catch(ze){console.error(`[AIService] Error executing tool ${Me} via SDK:`,ze);const He=ze instanceof Error?ze.message:String(ze);return ze instanceof F.ZodError?{_isError:!0,error:`Invalid arguments: ${ze.errors.map(Te=>`${Te.path.join(".")} (${Te.message})`).join(", ")}`}:{_isError:!0,error:He}}}),fe[Me]=Oe}return fe},{}),ye=((V=s.parameters)==null?void 0:V.maxSteps)??qr.getState().toolMaxSteps,we={model:ne,messages:v,abortSignal:c.signal,maxSteps:ye};Object.keys(oe).length>0&&(we.tools=oe),we.toolChoice=s.toolChoice??(Object.keys(oe).length>0?"auto":"none"),s.system&&(we.system=s.system),s.parameters&&(s.parameters.temperature!==void 0&&(we.temperature=s.parameters.temperature),s.parameters.max_tokens!==void 0&&(we.maxTokens=s.parameters.max_tokens),s.parameters.top_p!==void 0&&(we.topP=s.parameters.top_p),s.parameters.top_k!==void 0&&(we.topK=s.parameters.top_k),s.parameters.presence_penalty!==void 0&&(we.presencePenalty=s.parameters.presence_penalty),s.parameters.frequency_penalty!==void 0&&(we.frequencyPenalty=s.parameters.frequency_penalty)),console.log(`AIService: Calling streamText with options for ${u}:`,{modelId:(te=s.metadata)==null?void 0:te.modelId,system:!!we.system,messageCount:(ae=we==null?void 0:we.messages)==null?void 0:ae.length,temperature:we.temperature,maxTokens:we.maxTokens,toolChoice:we.toolChoice,tools:we.tools?Object.keys(we.tools):void 0,maxSteps:we.maxSteps}),S=await Ece(we);for await(const fe of S.fullStream){if(c.signal.aborted)throw console.log(`AIService: Stream ${u} aborted by signal.`),O="stop",new Error("Stream aborted by user.");switch(fe.type){case"text-delta":{const Me={interactionId:u,chunk:fe.textDelta},Fe=await g2("middleware:interaction:processChunk",Me);if(Fe!==!1){const Oe=Fe&&typeof Fe=="object"&&"chunk"in Fe?Fe.chunk:fe.textDelta;Qn.getState().appendInteractionResponseChunk(u,Oe),Ei.emit("interaction:stream_chunk",{interactionId:u,chunk:Oe})}break}case"tool-call":{const Me=JSON.stringify(fe);N.push(Me),Qn.getState()._updateInteractionInState(u,{metadata:{toolCalls:[...N]}}),console.log(`[AIService] Tool call observed: ${fe.toolName}`,fe.args);break}case"tool-result":{const Me=JSON.stringify(fe);z.push(Me),Qn.getState()._updateInteractionInState(u,{metadata:{toolResults:[...z]}}),console.log(`[AIService] Tool result observed for ${fe.toolName} (Call ID: ${fe.toolCallId})`,fe.result);break}case"finish":console.log("[AIService] Stream finish part received:",fe),O=fe.finishReason,A=fe.usage,j=fe.providerMetadata;break;case"error":throw console.error("[AIService] Stream error part:",fe.error),O="error",new Error(`AI Stream Error: ${fe.error instanceof Error?fe.error.message:fe.error}`);case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"file":case"tool-call-streaming-start":case"tool-call-delta":case"step-start":case"step-finish":break}}if(c.signal.aborted)throw O="stop",new Error("Stream aborted by user.");if(O===void 0){console.warn(`[AIService] Stream loop finished for ${u} without receiving a 'finish' part. Inferring reason.`);const fe=Qn.getState().activeStreamBuffers[u]||"";N.length>0?O="tool-calls":fe.trim()?O="stop":O="other"}}catch(ne){console.error(`AIService: Error during interaction ${u}:`,ne);const G=ne instanceof Error&&ne.message==="Stream aborted by user.";O=O??(G?"stop":"error"),C=G?void 0:ne instanceof Error?ne.message:String(ne),G?(console.log(`AIService: Interaction ${u} cancelled.`),ut.info("Interaction cancelled.")):ut.error(`AI Interaction Error: ${C}`)}finally{this.activeStreams.delete(u);const ne=Qn.getState().activeStreamBuffers[u]||"";switch(O){case"stop":case"length":case"tool-calls":E="COMPLETED";break;case"error":E="ERROR";break;case"other":default:ne.trim()||N.length>0?(E="COMPLETED",console.warn(`[AIService] Interaction ${u} finished with reason '${O||"unknown"}', but content/tools exist. Marking COMPLETED.`)):(E="WARNING",C=C??"Stream ended unexpectedly without output.",console.warn(`[AIService] Interaction ${u} finished with reason '${O||"unknown"}' and no content/tools. Marking WARNING.`));break}const G=((re=Qn.getState().interactions.find(fe=>fe.id===u))==null?void 0:re.metadata)||x.metadata,X={status:E,endedAt:new Date,response:ne,metadata:{...G,...A&&{promptTokens:A.promptTokens,completionTokens:A.completionTokens,totalTokens:A.totalTokens},...j&&{providerMetadata:j},...(E==="ERROR"||E==="WARNING")&&{error:C},toolCalls:N,toolResults:z,attachedFiles:(Y=x.metadata.attachedFiles)==null?void 0:Y.map(({contentBase64:fe,contentText:Me,...Fe})=>Fe)}};Qn.getState()._updateInteractionInState(u,X),Qn.getState()._removeStreamingId(u);const oe=Qn.getState().interactions.find(fe=>fe.id===u);oe?Qn.getState().updateInteractionAndPersist({...oe}).catch(fe=>{console.error(`AIService: Failed final persistence for ${u}`,fe)}):console.error(`AIService: CRITICAL - Could not find final state for interaction ${u} to persist after updates. State might be inconsistent.`);let ye=[],we=[];try{ye=N.map(fe=>JSON.parse(fe)),we=z.map(fe=>JSON.parse(fe))}catch(fe){console.error("[AIService] Failed to parse tool strings for event emitter:",fe)}Ei.emit("interaction:completed",{interactionId:u,status:E,error:C??void 0,toolCalls:ye,toolResults:we}),console.log(`AIService: Finalized interaction ${u} with status ${E}.`)}return u}static stopInteraction(t){const n=this.activeStreams.get(t),r=Qn.getState();if(n&&!n.signal.aborted)console.log(`AIService: Aborting interaction ${t}...`),n.abort();else{console.log(`AIService: No active controller found or already aborted for interaction ${t}. Attempting store cleanup if needed.`);const a=r.interactions.find(i=>i.id===t);if(a&&a.status==="STREAMING"){console.warn(`AIService: Forcing CANCELLED status for interaction ${t} found in STREAMING state without active controller.`);const i=r.activeStreamBuffers[t]||"",o={status:"CANCELLED",endedAt:new Date,response:i,metadata:{...a.metadata||{},error:"Manually stopped (controller missing)"}};r._updateInteractionInState(t,o),r._removeStreamingId(t);const s=Qn.getState().interactions.find(u=>u.id===t);s&&r.updateInteractionAndPersist({...s}).catch(u=>{console.error(`AIService: Failed persistence for forced cancel of ${t}`,u)})}}}}Ua(Qy,"activeStreams",new Map);const n0=Ds(Ms((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Ht.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),ut.error(r)}},addDbMod:async n=>{const r=jo(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Ht.saveMod(a),ut.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(u=>u.id!==r),s.error=o}),ut.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(u=>u.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Ht.saveMod(o),ut.success(`Mod "${o.name}" updated.`)}catch(s){const u="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(c=>{const f=c.dbMods.findIndex(h=>h.id===n);f!==-1&&a&&(c.dbMods[f]=a,c.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),c.error=u}),ut.error(u),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Ht.deleteMod(n),ut.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder),s.error=o}),ut.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function T4(e){const t=e.id,n=e.name,r=ta.getState(),a=n0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>r.registerChatControl(o),registerTool:(o,s,u)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,u)),on:(o,s)=>(Ei.on(o,s),()=>Ei.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=Qn.getState(),s=Ur.getState(),u=qr.getState(),c=fi.getState(),{providerId:f}=c0(c.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:o.status==="streaming",selectedProviderId:f,selectedModelId:c.selectedModelId,activeSystemPrompt:u.globalSystemPrompt,temperature:u.temperature,maxTokens:u.maxTokens,theme:u.theme})},showToast:(o,s)=>{ut[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function Yce(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=T4(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(u){o=u instanceof Error?u:String(u),console.error(`[ModLoader] Error loading mod "${r.name}":`,u),ut.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=T4(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ei.emit(s.error?"mod:error":"mod:loaded",{id:r.id,name:r.name,error:s.error}),s}));return Ei.emit("app:loaded",void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var Xce=(e,t,n,r,a,i,o,s)=>{let u=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(v=>{let w=v==="class",_=w&&i?a.map(x=>i[x]||x):a;w?(u.classList.remove(..._),u.classList.add(i&&i[g]?i[g]:g)):u.setAttribute(v,g)}),h(g)}function h(g){s&&c.includes(g)&&(u.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?m():g;f(v)}catch{}},Jce=L.createContext(void 0),Qce={setTheme:e=>{},themes:[]},ede=()=>{var e;return(e=L.useContext(Jce))!=null?e:Qce};L.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:u,scriptProps:c})=>{let f=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return L.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Xce.toString()})(${f})`}})});const tde=({...e})=>{const{theme:t="system"}=ede();return y.jsx(kW,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function gw({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:Ut("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const D5=L.memo(L.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,...i},o)=>{const s=L.useRef(null),[u,c]=L.useState(e);L.useImperativeHandle(o,()=>({getValue:()=>u,focus:()=>{var v;return(v=s.current)==null?void 0:v.focus()}}));const{focusInputOnNextRender:f,setFocusInputFlag:h}=Ka($n(v=>({focusInputOnNextRender:v.focusInputOnNextRender,setFocusInputFlag:v.setFocusInputFlag})));L.useEffect(()=>{f&&s.current&&(h(!1),requestAnimationFrame(()=>{var v;(v=s.current)==null||v.focus()}))},[f,h]);const m=v=>{if(v.key==="Enter"&&!v.shiftKey&&!n){v.preventDefault();const w=sm.getState().attachedFilesMetadata.length>0;(u.trim().length>0||w)&&(t(),c(""))}},g=v=>{c(v.target.value)};return L.useEffect(()=>{const v=s.current;if(v){v.style.height="auto";const w=v.scrollHeight,_=250;v.style.height=`${Math.min(w,_)}px`,v.style.overflowY=w>_?"auto":"hidden"}},[u]),L.useEffect(()=>{c(e)},[e]),y.jsx(gw,{ref:s,value:u,onChange:g,onKeyDown:m,disabled:n,placeholder:r,rows:1,className:Ut("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...i})}));D5.displayName="InputArea";function nr({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:Ut("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const M5=(e,t)=>{if(!t)return null;let n=nm,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Xn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Ff,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=dE,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=d6,r="text-green-500",a=`Synced with ${t}`;break;default:n=nm,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(n,{className:Ut("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(Nn,{side:"right",children:a})]})})},uv=L.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:j,editInputRef:O})=>{const N=e.id===n,z=e.itemType==="project",H=e.id===v&&e.itemType===w,Q=z&&f.has(e.id),{projects:P,conversations:Z}=z?m(e.id,g):{projects:[],conversations:[]},V=P.length>0||Z.length>0,te=!z&&e.syncRepoId?r[e.id]:void 0,ae=!z&&e.syncRepoId?a.get(e.syncRepoId):void 0,re=!z&&ae?M5(te,ae):null,Y=Ka(fe=>fe.openProjectSettingsModal),ne=()=>{H||(z&&V&&h(e.id),i(e.id,e.itemType))},G=fe=>{fe.stopPropagation(),z?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,fe):o(e.id,fe)},X=fe=>{fe.stopPropagation(),E(e)},oe=fe=>{fe.stopPropagation(),z&&(console.log(`Opening project settings for: ${e.id}`),Y(e.id))},ye=fe=>{fe.key==="Enter"?(fe.preventDefault(),C()):fe.key==="Escape"&&A(z&&_==="New Project")};L.useEffect(()=>{var fe,Me;H&&((fe=O.current)==null||fe.focus(),(Me=O.current)==null||Me.select())},[H,O]);const we=z?e.name:e.title;return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:Ut("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!H&&"hover:bg-muted/50 hover:text-primary/80",N&&!H?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",H&&"bg-muted ring-1 ring-primary",!H&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ne,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[z&&V&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:fe=>{fe.stopPropagation(),h(e.id)},children:Q?y.jsx(sE,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(VB,{className:"h-3 w-3 text-muted-foreground"})}),z&&!V&&y.jsx("span",{className:"w-3 flex-shrink-0"}),z?y.jsx(o0,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(Pz,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),H?y.jsx(nr,{ref:O,value:x,onChange:fe=>S(fe.target.value),onKeyDown:ye,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:fe=>fe.stopPropagation(),disabled:j}):y.jsx("span",{className:"truncate pr-1",children:we}),re]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:H?y.jsxs(y.Fragment,{children:[y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-green-500 hover:text-green-600",onClick:fe=>{fe.stopPropagation(),C()},disabled:j||!x.trim()||x.trim()===_,"aria-label":"Save changes",children:j?y.jsx(Xn,{className:"h-3 w-3 animate-spin"}):y.jsx(id,{className:"h-3 w-3"})}),y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:fe=>{fe.stopPropagation(),A(z&&_==="New Project")},disabled:j,"aria-label":"Cancel edit",children:y.jsx(Zu,{className:"h-3 w-3"})})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[z&&y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:oe,"aria-label":`Settings for ${we}`,children:y.jsx(tz,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Project Settings"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:X,"aria-label":`Edit ${we}`,children:y.jsx(uE,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),z?y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:fe=>c(e.id,fe),"aria-label":`Export project ${we}`,children:y.jsx(oz,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Export Project (JSON)"})]})}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx("div",{className:"p-1 rounded hover:bg-muted cursor-pointer","aria-label":`Export ${we}`,children:y.jsx(nb,{className:"h-3 w-3 text-muted-foreground group-hover/export:text-foreground"})})}),y.jsx(Nn,{side:"top",children:"Export Conversation"})]})}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:fe=>fe.stopPropagation(),children:[y.jsx(Lt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:fe=>u(e.id,"json",fe),children:"JSON"}),y.jsx(Lt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:fe=>u(e.id,"md",fe),children:"MD"})]})]}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:G,"aria-label":`Delete ${we}`,children:y.jsx(Iu,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})})]},e.id),z&&Q&&y.jsxs(y.Fragment,{children:[P.sort((fe,Me)=>Me.updatedAt.getTime()-fe.updatedAt.getTime()).map(fe=>y.jsx(uv,{item:{...fe,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:j,editInputRef:O},fe.id)),Z.sort((fe,Me)=>Me.updatedAt.getTime()-fe.updatedAt.getTime()).map(fe=>y.jsx(uv,{item:{...fe,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:j,editInputRef:O},fe.id))]})]})});uv.displayName="ConversationItemRenderer";function nde({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=L.useState(null),[i,o]=L.useState(null),[s,u]=L.useState(""),[c,f]=L.useState(""),[h,m]=L.useState(!1),g=L.useRef(null),v=L.useCallback(x=>{a(x.id),o(x.itemType);const S=x.itemType==="project"?x.name:x.title;u(S),f(S),m(!1)},[]),w=L.useCallback((x=!1)=>{const S=r;a(null),o(null),u(""),f(""),m(!1),x&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(E=>{console.error("Failed to delete new project on cancel:",E),ut.error("Failed to clean up cancelled new project.")}))},[r,n]),_=L.useCallback(async()=>{if(!r||!i||h)return;const x=c.trim();if(!x||x===s){w(i==="project"&&s==="New Project");return}m(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),ut.success("Item renamed successfully."),a(null),o(null),u(""),f("")}catch(S){console.error("Failed to save item name:",S)}finally{m(!1)}},[r,i,c,s,h,e,t,w]);return{editingItemId:r,editingItemType:i,editingName:s,localEditingName:c,setLocalEditingName:f,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:_,handleCancelEdit:w}}const G2=(e,t,n,r,a,i,o,s,u)=>{if(!n)return!0;const c=`${t}-${e}`;if(u[c]!==void 0)return u[c];let f=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))f=!0;else{const m=s.get(e)||[],g=o.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){f=!0;break}if(!f){for(const v of m)if(G2(v.id,"project",n,r,a,i,o,s,u)){f=!0;break}}}}return u[c]=f,f},rde=()=>{const{conversations:e,projects:t,selectItem:n,selectedItemId:r,selectedItemType:a,addConversation:i,updateConversation:o,deleteConversation:s,addProject:u,updateProject:c,deleteProject:f,exportConversation:h,exportProject:m,isLoading:g,syncRepos:v,conversationSyncStatus:w,getConversationById:_,getProjectById:x}=Ur($n(Te=>({conversations:Te.conversations,projects:Te.projects,selectItem:Te.selectItem,selectedItemId:Te.selectedItemId,selectedItemType:Te.selectedItemType,addConversation:Te.addConversation,updateConversation:Te.updateConversation,deleteConversation:Te.deleteConversation,addProject:Te.addProject,updateProject:Te.updateProject,deleteProject:Te.deleteProject,exportConversation:Te.exportConversation,exportProject:Te.exportProject,isLoading:Te.isLoading,syncRepos:Te.syncRepos,conversationSyncStatus:Te.conversationSyncStatus,getConversationById:Te.getConversationById,getProjectById:Te.getProjectById}))),S=Ka(Te=>Te.setFocusInputFlag),[E,C]=wt.useState(new Set),[A,j]=L.useState(""),{editingItemId:O,editingItemType:N,editingName:z,localEditingName:H,setLocalEditingName:Q,isSavingEdit:P,editInputRef:Z,handleStartEditing:V,handleSaveEdit:te,handleCancelEdit:ae}=nde({updateProject:c,updateConversation:o,deleteProject:f,getProjectById:x,getConversationById:_}),re=L.useCallback(Te=>{C(Ce=>{const B=new Set(Ce);return B.has(Te)?B.delete(Te):B.add(Te),B})},[]),Y=L.useCallback(()=>{if(a==="project")return r;if(a==="conversation"&&r){const Te=_(r);return(Te==null?void 0:Te.projectId)??null}return null},[r,a,_]),ne=L.useCallback(async()=>{if(!O)try{const Te=Y(),Ce=await i({title:"New Chat",projectId:Te});n(Ce,"conversation"),setTimeout(()=>S(!0),0)}catch(Te){console.error("Failed to create new chat:",Te),ut.error("Failed to create new chat.")}},[O,Y,i,n,S]),G=L.useCallback(async()=>{if(!O)try{const Te=Y(),Ce=await u({name:"New Project",parentId:Te});n(Ce,"project"),Te&&C(B=>new Set(B).add(Te)),setTimeout(()=>{const B=x(Ce);B?V({...B,itemType:"project"}):(console.warn("New project data not found immediately, using fallback for edit start"),V({id:Ce,itemType:"project",name:"New Project",parentId:Te,createdAt:new Date,updatedAt:new Date,path:"/New Project"}))},50)}catch(Te){console.error("Failed to create new project:",Te)}},[O,Y,u,n,x,V]),X=L.useCallback((Te,Ce)=>{Te!==O&&(O&&Te!==O&&(H.trim()&&H.trim()!==z?te():ae(N==="project"&&z==="New Project")),(Te!==r||Ce!==a)&&(n(Te,Ce),Ce==="conversation"&&setTimeout(()=>S(!0),0)))},[O,N,z,H,r,a,te,ae,n,S]),oe=L.useCallback((Te,Ce)=>{Ce.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&s(Te).catch(B=>{console.error("Failed to delete conversation:",B),ut.error("Failed to delete conversation.")})},[s]),ye=L.useCallback((Te,Ce)=>{Ce.stopPropagation(),f(Te).catch(B=>{console.error("Failed to delete project:",B),ut.error("Failed to delete project.")})},[f]),we=L.useCallback(async(Te,Ce,B)=>{B.stopPropagation();try{await h(Te,Ce)}catch(ke){console.error(`Failed to export conversation as ${Ce}:`,ke)}},[h]),fe=L.useCallback(async(Te,Ce)=>{Ce.stopPropagation();try{await m(Te)}catch(B){console.error("Failed to export project:",B)}},[m]),Me=L.useMemo(()=>new Map(v.map(Te=>[Te.id,Te.name])),[v]),{projectsById:Fe,conversationsByProjectId:Oe,projectsByParentId:Re}=L.useMemo(()=>{const Te=new Map(t.map(ke=>[ke.id,ke])),Ce=new Map;e.forEach(ke=>{const Ae=ke.projectId??null;Ce.has(Ae)||Ce.set(Ae,[]),Ce.get(Ae).push(ke)});const B=new Map;return t.forEach(ke=>{const Ae=ke.parentId??null;B.has(Ae)||B.set(Ae,[]),B.get(Ae).push(ke)}),{projectsById:Te,conversationsByProjectId:Ce,projectsByParentId:B}},[t,e]),ze=L.useCallback((Te,Ce)=>{const B=Ce.toLowerCase(),ke={},Ae=(Re.get(Te)||[]).filter(se=>G2(se.id,"project",B,t,e,Fe,Oe,Re,ke)),ce=(Oe.get(Te)||[]).filter(se=>se.title.toLowerCase().includes(B));return Ae.sort((se,J)=>J.updatedAt.getTime()-se.updatedAt.getTime()),ce.sort((se,J)=>J.updatedAt.getTime()-se.updatedAt.getTime()),{projects:Ae,conversations:ce}},[t,e,Fe,Oe,Re]),He=L.useMemo(()=>{const Te=A.toLowerCase(),Ce={},B=(Re.get(null)||[]).filter(ce=>G2(ce.id,"project",Te,t,e,Fe,Oe,Re,Ce)),ke=(Oe.get(null)||[]).filter(ce=>ce.title.toLowerCase().includes(Te)),Ae=[...B.map(ce=>({...ce,itemType:"project"})),...ke.map(ce=>({...ce,itemType:"conversation"}))];return Ae.sort((ce,se)=>se.updatedAt.getTime()-ce.updatedAt.getTime()),Ae},[t,e,A,Fe,Oe,Re]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{size:"sm",variant:"ghost",onClick:G,"aria-label":"New Project",disabled:g||!!O,className:"h-7 w-7 p-0",children:y.jsx(lE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"New Project"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{size:"sm",variant:"ghost",onClick:ne,"aria-label":"New Chat",disabled:g||!!O,className:"h-7 w-7 p-0",children:y.jsx(pv,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(g6,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(nr,{type:"search",placeholder:"Filter...",value:A,onChange:Te=>j(Te.target.value),className:"h-8 text-xs pl-8",disabled:g})]}),y.jsx(fw,{className:"flex-grow",children:g?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"})]}):He.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:A.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:He.map(Te=>y.jsx(uv,{item:Te,level:0,selectedItemId:r,conversationSyncStatus:w,repoNameMap:Me,onSelectItem:X,onDeleteConversation:oe,onDeleteProject:ye,onExportConversation:we,onExportProject:fe,expandedProjects:E,toggleProjectExpansion:re,getChildren:ze,filterText:A,editingItemId:O,editingItemType:N,editingName:z,localEditingName:H,setLocalEditingName:Q,handleStartEditing:V,handleSaveEdit:te,handleCancelEdit:ae,isSavingEdit:P,editInputRef:Z},Te.id))})})]})},ade=()=>{const{addConversation:e,addProject:t,selectItem:n,selectedItemId:r,selectedItemType:a,getConversationById:i}=Ur($n(f=>({addConversation:f.addConversation,addProject:f.addProject,selectItem:f.selectItem,selectedItemId:f.selectedItemId,selectedItemType:f.selectedItemType,getConversationById:f.getConversationById}))),o=Ka(f=>f.setFocusInputFlag),s=()=>{if(a==="project")return r;if(a==="conversation"&&r){const f=i(r);return(f==null?void 0:f.projectId)??null}return null},u=async()=>{try{const f=s(),h=await e({title:"New Chat",projectId:f});n(h,"conversation"),setTimeout(()=>o(!0),0)}catch(f){console.error("Failed to create new chat:",f)}},c=async()=>{try{const f=s(),h=await t({name:"New Project",parentId:f});n(h,"project")}catch(f){console.error("Failed to create new project:",f)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(lE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"right",children:"New Project"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(pv,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"right",children:"New Chat"})]})})]})};function ide(){const e=ta.getState().registerChatControl,t=Ur.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",order:10,status:()=>t?"loading":"ready",renderer:()=>wt.createElement(rde),iconRenderer:()=>wt.createElement(ade),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var OS="focusScope.autoFocusOnMount",jS="focusScope.autoFocusOnUnmount",R4={bubbles:!1,cancelable:!0},ode="FocusScope",Z0=L.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,u]=L.useState(null),c=Ea(a),f=Ea(i),h=L.useRef(null),m=xn(t,w=>u(w)),g=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(r){let w=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:Su(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||Su(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const A of E)A.removedNodes.length>0&&Su(s)};document.addEventListener("focusin",w),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),L.useEffect(()=>{if(s){I4.add(g);const w=document.activeElement;if(!s.contains(w)){const x=new CustomEvent(OS,R4);s.addEventListener(OS,c),s.dispatchEvent(x),x.defaultPrevented||(sde(fde(P5(s)),{select:!0}),document.activeElement===w&&Su(s))}return()=>{s.removeEventListener(OS,c),setTimeout(()=>{const x=new CustomEvent(jS,R4);s.addEventListener(jS,f),s.dispatchEvent(x),x.defaultPrevented||Su(w??document.body,{select:!0}),s.removeEventListener(jS,f),I4.remove(g)},0)}}},[s,c,f,g]);const v=L.useCallback(w=>{if(!n&&!r||g.paused)return;const _=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,x=document.activeElement;if(_&&x){const S=w.currentTarget,[E,C]=lde(S);E&&C?!w.shiftKey&&x===C?(w.preventDefault(),n&&Su(E,{select:!0})):w.shiftKey&&x===E&&(w.preventDefault(),n&&Su(C,{select:!0})):x===S&&w.preventDefault()}},[n,r,g.paused]);return y.jsx(an.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});Z0.displayName=ode;function sde(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Su(r,{select:t}),document.activeElement!==n)return}function lde(e){const t=P5(e),n=N4(t,e),r=N4(t.reverse(),e);return[n,r]}function P5(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function N4(e,t){for(const n of e)if(!ude(n,{upTo:t}))return n}function ude(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function cde(e){return e instanceof HTMLInputElement&&"select"in e}function Su(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&cde(e)&&t&&e.select()}}var I4=dde();function dde(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=O4(e,t),e.unshift(t)},remove(t){var n;e=O4(e,t),(n=e[0])==null||n.resume()}}}function O4(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function fde(e){return e.filter(t=>t.tagName!=="A")}var DS=0;function yw(){L.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??j4()),document.body.insertAdjacentElement("beforeend",e[1]??j4()),DS++,()=>{DS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),DS--}},[])}function j4(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _s=function(){return _s=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_s.apply(this,arguments)};function F5(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function hde(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var eb="right-scroll-bar-position",tb="width-before-scroll-bar",pde="with-scroll-bars-hidden",mde="--removed-body-scroll-bar-size";function MS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function gde(e,t){var n=L.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var yde=typeof window<"u"?L.useLayoutEffect:L.useEffect,D4=new WeakMap;function bde(e,t){var n=gde(null,function(r){return e.forEach(function(a){return MS(a,r)})});return yde(function(){var r=D4.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||MS(s,null)}),i.forEach(function(s){a.has(s)||MS(s,o)})}D4.set(n,e)},[e]),n}function vde(e){return e}function wde(e,t){t===void 0&&(t=vde);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var u=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return a}function _de(e){e===void 0&&(e={});var t=wde(null);return t.options=_s({async:!0,ssr:!1},e),t}var L5=function(e){var t=e.sideCar,n=F5(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return L.createElement(r,_s({},n))};L5.isSideCarExport=!0;function xde(e,t){return e.useMedium(t),L5}var $5=_de(),PS=function(){},bw=L.forwardRef(function(e,t){var n=L.useRef(null),r=L.useState({onScrollCapture:PS,onWheelCapture:PS,onTouchMoveCapture:PS}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,v=e.inert,w=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=F5(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,A=bde([n,t]),j=_s(_s({},E),a);return L.createElement(L.Fragment,null,f&&L.createElement(C,{sideCar:$5,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:S}),o?L.cloneElement(L.Children.only(s),_s(_s({},j),{ref:A})):L.createElement(x,_s({},j,{className:u,ref:A}),s))});bw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bw.classNames={fullWidth:tb,zeroRight:eb};var Sde=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ede(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Sde();return t&&e.setAttribute("nonce",t),e}function kde(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Cde(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ade=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Ede())&&(kde(t,n),Cde(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Tde=function(){var e=Ade();return function(t,n){L.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},B5=function(){var e=Tde(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Rde={left:0,top:0,right:0,gap:0},FS=function(e){return parseInt(e||"",10)||0},Nde=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[FS(n),FS(r),FS(a)]},Ide=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Rde;var t=Nde(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Ode=B5(),Pf="data-scroll-locked",jde=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(pde,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Pf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(eb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(tb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(eb," .").concat(eb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(tb," .").concat(tb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Pf,`] {
    `).concat(mde,": ").concat(s,`px;
  }
`)},M4=function(){var e=parseInt(document.body.getAttribute(Pf)||"0",10);return isFinite(e)?e:0},Dde=function(){L.useEffect(function(){return document.body.setAttribute(Pf,(M4()+1).toString()),function(){var e=M4()-1;e<=0?document.body.removeAttribute(Pf):document.body.setAttribute(Pf,e.toString())}},[])},Mde=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Dde();var i=L.useMemo(function(){return Ide(a)},[a]);return L.createElement(Ode,{styles:jde(i,!t,a,n?"":"!important")})},W2=!1;if(typeof window<"u")try{var $y=Object.defineProperty({},"passive",{get:function(){return W2=!0,!0}});window.addEventListener("test",$y,$y),window.removeEventListener("test",$y,$y)}catch{W2=!1}var _f=W2?{passive:!1}:!1,Pde=function(e){return e.tagName==="TEXTAREA"},z5=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Pde(e)&&n[t]==="visible")},Fde=function(e){return z5(e,"overflowY")},Lde=function(e){return z5(e,"overflowX")},P4=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=U5(e,r);if(a){var i=q5(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$de=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Bde=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},U5=function(e,t){return e==="v"?Fde(t):Lde(t)},q5=function(e,t){return e==="v"?$de(t):Bde(t)},zde=function(e,t){return e==="h"&&t==="rtl"?-1:1},Ude=function(e,t,n,r,a){var i=zde(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),c=!1,f=o>0,h=0,m=0;do{var g=q5(e,s),v=g[0],w=g[1],_=g[2],x=w-_-i*v;(v||x)&&U5(e,s)&&(h+=x,m+=v),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(c=!0),c},By=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},F4=function(e){return[e.deltaX,e.deltaY]},L4=function(e){return e&&"current"in e?e.current:e},qde=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Hde=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Vde=0,xf=[];function Gde(e){var t=L.useRef([]),n=L.useRef([0,0]),r=L.useRef(),a=L.useState(Vde++)[0],i=L.useState(B5)[0],o=L.useRef(e);L.useEffect(function(){o.current=e},[e]),L.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var w=hde([e.lockRef.current],(e.shards||[]).map(L4),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=L.useCallback(function(w,_){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var x=By(w),S=n.current,E="deltaX"in w?w.deltaX:S[0]-x[0],C="deltaY"in w?w.deltaY:S[1]-x[1],A,j=w.target,O=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in w&&O==="h"&&j.type==="range")return!1;var N=P4(O,j);if(!N)return!0;if(N?A=O:(A=O==="v"?"h":"v",N=P4(O,j)),!N)return!1;if(!r.current&&"changedTouches"in w&&(E||C)&&(r.current=A),!A)return!0;var z=r.current||A;return Ude(z,_,w,z==="h"?E:C)},[]),u=L.useCallback(function(w){var _=w;if(!(!xf.length||xf[xf.length-1]!==i)){var x="deltaY"in _?F4(_):By(_),S=t.current.filter(function(A){return A.name===_.type&&(A.target===_.target||_.target===A.shadowParent)&&qde(A.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(L4).filter(Boolean).filter(function(A){return A.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),c=L.useCallback(function(w,_,x,S){var E={name:w,delta:_,target:x,should:S,shadowParent:Wde(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),f=L.useCallback(function(w){n.current=By(w),r.current=void 0},[]),h=L.useCallback(function(w){c(w.type,F4(w),w.target,s(w,e.lockRef.current))},[]),m=L.useCallback(function(w){c(w.type,By(w),w.target,s(w,e.lockRef.current))},[]);L.useEffect(function(){return xf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",u,_f),document.addEventListener("touchmove",u,_f),document.addEventListener("touchstart",f,_f),function(){xf=xf.filter(function(w){return w!==i}),document.removeEventListener("wheel",u,_f),document.removeEventListener("touchmove",u,_f),document.removeEventListener("touchstart",f,_f)}},[]);var g=e.removeScrollBar,v=e.inert;return L.createElement(L.Fragment,null,v?L.createElement(i,{styles:Hde(a)}):null,g?L.createElement(Mde,{gapMode:e.gapMode}):null)}function Wde(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Kde=xde($5,Gde);var Y0=L.forwardRef(function(e,t){return L.createElement(bw,_s({},e,{ref:t,sideCar:Kde}))});Y0.classNames=bw.classNames;var Zde=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Sf=new WeakMap,zy=new WeakMap,Uy={},LS=0,H5=function(e){return e&&(e.host||H5(e.parentNode))},Yde=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=H5(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Xde=function(e,t,n,r){var a=Yde(t,Array.isArray(e)?e:[e]);Uy[n]||(Uy[n]=new WeakMap);var i=Uy[n],o=[],s=new Set,u=new Set(a),c=function(h){!h||s.has(h)||(s.add(h),c(h.parentNode))};a.forEach(c);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(m){if(s.has(m))f(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",w=(Sf.get(m)||0)+1,_=(i.get(m)||0)+1;Sf.set(m,w),i.set(m,_),o.push(m),w===1&&v&&zy.set(m,!0),_===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return f(t),s.clear(),LS++,function(){o.forEach(function(h){var m=Sf.get(h)-1,g=i.get(h)-1;Sf.set(h,m),i.set(h,g),m||(zy.has(h)||h.removeAttribute(r),zy.delete(h)),g||h.removeAttribute(n)}),LS--,LS||(Sf=new WeakMap,Sf=new WeakMap,zy=new WeakMap,Uy={})}},vw=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Zde(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Xde(r,a,n,"aria-hidden")):function(){return null}},ww="Dialog",[V5,Tge]=Ri(ww),[Jde,Yo]=V5(ww),G5=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=L.useRef(null),u=L.useRef(null),[c,f]=Os({prop:r,defaultProp:a??!1,onChange:i,caller:ww});return y.jsx(Jde,{scope:t,triggerRef:s,contentRef:u,contentId:Cs(),titleId:Cs(),descriptionId:Cs(),open:c,onOpenChange:f,onOpenToggle:L.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};G5.displayName=ww;var W5="DialogTrigger",Qde=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(W5,n),i=xn(t,a.triggerRef);return y.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tC(a.open),...r,ref:i,onClick:zt(e.onClick,a.onOpenToggle)})});Qde.displayName=W5;var Qk="DialogPortal",[efe,K5]=V5(Qk,{forceMount:void 0}),Z5=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Yo(Qk,t);return y.jsx(efe,{scope:t,forceMount:n,children:L.Children.map(r,o=>y.jsx(Na,{present:n||i.open,children:y.jsx(gh,{asChild:!0,container:a,children:o})}))})};Z5.displayName=Qk;var cv="DialogOverlay",Y5=L.forwardRef((e,t)=>{const n=K5(cv,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Yo(cv,e.__scopeDialog);return i.modal?y.jsx(Na,{present:r||i.open,children:y.jsx(nfe,{...a,ref:t})}):null});Y5.displayName=cv;var tfe=Nu("DialogOverlay.RemoveScroll"),nfe=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(cv,n);return y.jsx(Y0,{as:tfe,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(an.div,{"data-state":tC(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),nd="DialogContent",X5=L.forwardRef((e,t)=>{const n=K5(nd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Yo(nd,e.__scopeDialog);return y.jsx(Na,{present:r||i.open,children:i.modal?y.jsx(rfe,{...a,ref:t}):y.jsx(afe,{...a,ref:t})})});X5.displayName=nd;var rfe=L.forwardRef((e,t)=>{const n=Yo(nd,e.__scopeDialog),r=L.useRef(null),a=xn(t,n.contentRef,r);return L.useEffect(()=>{const i=r.current;if(i)return vw(i)},[]),y.jsx(J5,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:zt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:zt(e.onFocusOutside,i=>i.preventDefault())})}),afe=L.forwardRef((e,t)=>{const n=Yo(nd,e.__scopeDialog),r=L.useRef(!1),a=L.useRef(!1);return y.jsx(J5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),J5=L.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=Yo(nd,n),u=L.useRef(null),c=xn(t,u);return yw(),y.jsxs(y.Fragment,{children:[y.jsx(Z0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(hh,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":tC(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(ife,{titleId:s.titleId}),y.jsx(sfe,{contentRef:u,descriptionId:s.descriptionId})]})]})}),eC="DialogTitle",Q5=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(eC,n);return y.jsx(an.h2,{id:a.titleId,...r,ref:t})});Q5.displayName=eC;var eF="DialogDescription",tF=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(eF,n);return y.jsx(an.p,{id:a.descriptionId,...r,ref:t})});tF.displayName=eF;var nF="DialogClose",rF=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(nF,n);return y.jsx(an.button,{type:"button",...r,ref:t,onClick:zt(e.onClick,()=>a.onOpenChange(!1))})});rF.displayName=nF;function tC(e){return e?"open":"closed"}var aF="DialogTitleWarning",[Rge,iF]=DW(aF,{contentName:nd,titleName:eC,docsSlug:"dialog"}),ife=({titleId:e})=>{const t=iF(aF),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return L.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ofe="DialogDescriptionWarning",sfe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${iF(ofe).contentName}}.`;return L.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},lfe=G5,ufe=Z5,cfe=Y5,dfe=X5,ffe=Q5,hfe=tF,pfe=rF;function _w({...e}){return y.jsx(lfe,{"data-slot":"dialog",...e})}function mfe({...e}){return y.jsx(ufe,{"data-slot":"dialog-portal",...e})}function gfe({className:e,...t}){return y.jsx(cfe,{"data-slot":"dialog-overlay",className:Ut("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function xw({className:e,children:t,...n}){return y.jsxs(mfe,{"data-slot":"dialog-portal",children:[y.jsx(gfe,{}),y.jsxs(dfe,{"data-slot":"dialog-content",className:Ut("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(pfe,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(Zu,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Sw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:Ut("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Ew({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:Ut("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function kw({className:e,...t}){return y.jsx(ffe,{"data-slot":"dialog-title",className:Ut("text-lg leading-none font-semibold",e),...t})}function Cw({className:e,...t}){return y.jsx(hfe,{"data-slot":"dialog-description",className:Ut("text-muted-foreground text-sm",e),...t})}function Aw(e){const t=e+"CollectionProvider",[n,r]=Ri(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:_,children:x}=w,S=wt.useRef(null),E=wt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",u=Nu(s),c=wt.forwardRef((w,_)=>{const{scope:x,children:S}=w,E=i(s,x),C=xn(_,E.collectionRef);return y.jsx(u,{ref:C,children:S})});c.displayName=s;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=Nu(f),g=wt.forwardRef((w,_)=>{const{scope:x,children:S,...E}=w,C=wt.useRef(null),A=xn(_,C),j=i(f,x);return wt.useEffect(()=>(j.itemMap.set(C,{ref:C,...E}),()=>void j.itemMap.delete(C))),y.jsx(m,{[h]:"",ref:A,children:S})});g.displayName=f;function v(w){const _=i(e+"CollectionConsumer",w);return wt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((j,O)=>E.indexOf(j.ref.current)-E.indexOf(O.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var $S="rovingFocusGroup.onEntryFocus",yfe={bubbles:!1,cancelable:!0},X0="RovingFocusGroup",[K2,oF,bfe]=Aw(X0),[vfe,Tw]=Ri(X0,[bfe]),[wfe,_fe]=vfe(X0),sF=L.forwardRef((e,t)=>y.jsx(K2.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(K2.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(xfe,{...e,ref:t})})}));sF.displayName=X0;var xfe=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,m=L.useRef(null),g=xn(t,m),v=Oh(i),[w,_]=Os({prop:o,defaultProp:s??null,onChange:u,caller:X0}),[x,S]=L.useState(!1),E=Ea(c),C=oF(n),A=L.useRef(!1),[j,O]=L.useState(0);return L.useEffect(()=>{const N=m.current;if(N)return N.addEventListener($S,E),()=>N.removeEventListener($S,E)},[E]),y.jsx(wfe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:w,onItemFocus:L.useCallback(N=>_(N),[_]),onItemShiftTab:L.useCallback(()=>S(!0),[]),onFocusableItemAdd:L.useCallback(()=>O(N=>N+1),[]),onFocusableItemRemove:L.useCallback(()=>O(N=>N-1),[]),children:y.jsx(an.div,{tabIndex:x||j===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:zt(e.onMouseDown,()=>{A.current=!0}),onFocus:zt(e.onFocus,N=>{const z=!A.current;if(N.target===N.currentTarget&&z&&!x){const H=new CustomEvent($S,yfe);if(N.currentTarget.dispatchEvent(H),!H.defaultPrevented){const Q=C().filter(ae=>ae.focusable),P=Q.find(ae=>ae.active),Z=Q.find(ae=>ae.id===w),te=[P,Z,...Q].filter(Boolean).map(ae=>ae.ref.current);cF(te,f)}}A.current=!1}),onBlur:zt(e.onBlur,()=>S(!1))})})}),lF="RovingFocusGroupItem",uF=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,u=Cs(),c=i||u,f=_fe(lF,n),h=f.currentTabStopId===c,m=oF(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:w}=f;return L.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),y.jsx(K2.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:y.jsx(an.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:zt(e.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:zt(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:zt(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=kfe(_,f.orientation,f.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=m().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=f.loop?Cfe(E,C+1):E.slice(C+1)}setTimeout(()=>cF(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:w!=null}):o})})});uF.displayName=lF;var Sfe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Efe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function kfe(e,t,n){const r=Efe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Sfe[r]}function cF(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Cfe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var dF=sF,fF=uF,Rw="Tabs",[Afe,Nge]=Ri(Rw,[Tw]),hF=Tw(),[Tfe,nC]=Afe(Rw),pF=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:u="automatic",...c}=e,f=Oh(s),[h,m]=Os({prop:r,onChange:a,defaultProp:i??"",caller:Rw});return y.jsx(Tfe,{scope:n,baseId:Cs(),value:h,onValueChange:m,orientation:o,dir:f,activationMode:u,children:y.jsx(an.div,{dir:f,"data-orientation":o,...c,ref:t})})});pF.displayName=Rw;var mF="TabsList",gF=L.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=nC(mF,n),o=hF(n);return y.jsx(dF,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(an.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});gF.displayName=mF;var yF="TabsTrigger",bF=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=nC(yF,n),s=hF(n),u=_F(o.baseId,r),c=xF(o.baseId,r),f=r===o.value;return y.jsx(fF,{asChild:!0,...s,focusable:!a,active:f,children:y.jsx(an.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:zt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:zt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:zt(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!a&&h&&o.onValueChange(r)})})})});bF.displayName=yF;var vF="TabsContent",wF=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=nC(vF,n),u=_F(s.baseId,r),c=xF(s.baseId,r),f=r===s.value,h=L.useRef(f);return L.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),y.jsx(Na,{present:a||f,children:({present:m})=>y.jsx(an.div,{"data-state":f?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!m,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});wF.displayName=vF;function _F(e,t){return`${e}-trigger-${t}`}function xF(e,t){return`${e}-content-${t}`}var Rfe=pF,Nfe=gF,Ife=bF,Ofe=wF;function Nw({className:e,...t}){return y.jsx(Rfe,{"data-slot":"tabs",className:Ut("flex flex-col gap-2",e),...t})}function Iw({className:e,...t}){return y.jsx(Nfe,{"data-slot":"tabs-list",className:Ut("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function li({className:e,...t}){return y.jsx(Ife,{"data-slot":"tabs-trigger",className:Ut("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ui({className:e,...t}){return y.jsx(Ofe,{"data-slot":"tabs-content",className:Ut("flex-1 outline-none",e),...t})}var jfe="Label",SF=L.forwardRef((e,t)=>y.jsx(an.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));SF.displayName=jfe;var Dfe=SF;function dn({className:e,...t}){return y.jsx(Dfe,{"data-slot":"label",className:Ut("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Ow(e){const t=L.useRef({value:e,previous:e});return L.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var jw="Switch",[Mfe,Ige]=Ri(jw),[Pfe,Ffe]=Mfe(jw),EF=L.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=L.useState(null),v=xn(t,E=>g(E)),w=L.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Os({prop:a,defaultProp:i??!1,onChange:c,caller:jw});return y.jsxs(Pfe,{scope:n,checked:x,disabled:s,children:[y.jsx(an.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":TF(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onClick:zt(e.onClick,E=>{S(C=>!C),_&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),_&&y.jsx(AF,{control:m,bubbles:!w.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"}})]})});EF.displayName=jw;var kF="SwitchThumb",CF=L.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Ffe(kF,n);return y.jsx(an.span,{"data-state":TF(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});CF.displayName=kF;var Lfe="SwitchBubbleInput",AF=L.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=L.useRef(null),s=xn(o,i),u=Ow(n),c=Iv(t);return L.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&g){const v=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(v)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});AF.displayName=Lfe;function TF(e){return e?"checked":"unchecked"}var $fe=EF,Bfe=CF;function jl({className:e,...t}){return y.jsx($fe,{"data-slot":"switch",className:Ut("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Bfe,{"data-slot":"switch-thumb",className:Ut("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var zfe=[" ","Enter","ArrowUp","ArrowDown"],Ufe=[" ","Enter"],rd="Select",[Dw,Mw,qfe]=Aw(rd),[jh,Oge]=Ri(rd,[qfe,Yu]),Pw=Yu(),[Hfe,oc]=jh(rd),[Vfe,Gfe]=jh(rd),RF=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:u,dir:c,name:f,autoComplete:h,disabled:m,required:g,form:v}=e,w=Pw(t),[_,x]=L.useState(null),[S,E]=L.useState(null),[C,A]=L.useState(!1),j=Oh(c),[O,N]=Os({prop:r,defaultProp:a??!1,onChange:i,caller:rd}),[z,H]=Os({prop:o,defaultProp:s,onChange:u,caller:rd}),Q=L.useRef(null),P=_?v||!!_.closest("form"):!0,[Z,V]=L.useState(new Set),te=Array.from(Z).map(ae=>ae.props.value).join(";");return y.jsx(Ov,{...w,children:y.jsxs(Hfe,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:A,contentId:Cs(),value:z,onValueChange:H,open:O,onOpenChange:N,dir:j,triggerPointerDownPosRef:Q,disabled:m,children:[y.jsx(Dw.Provider,{scope:t,children:y.jsx(Vfe,{scope:e.__scopeSelect,onNativeOptionAdd:L.useCallback(ae=>{V(re=>new Set(re).add(ae))},[]),onNativeOptionRemove:L.useCallback(ae=>{V(re=>{const Y=new Set(re);return Y.delete(ae),Y})},[]),children:n})}),P?y.jsxs(XF,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:z,onChange:ae=>H(ae.target.value),disabled:m,form:v,children:[z===void 0?y.jsx("option",{value:""}):null,Array.from(Z)]},te):null]})})};RF.displayName=rd;var NF="SelectTrigger",IF=L.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Pw(n),o=oc(NF,n),s=o.disabled||r,u=xn(t,o.onTriggerChange),c=Mw(n),f=L.useRef("touch"),[h,m,g]=QF(w=>{const _=c().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=e9(_,w,x);S!==void 0&&o.onValueChange(S.value)}),v=w=>{s||(o.onOpenChange(!0),g()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return y.jsx(h0,{asChild:!0,...i,children:y.jsx(an.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":JF(o.value)?"":void 0,...a,ref:u,onClick:zt(a.onClick,w=>{w.currentTarget.focus(),f.current!=="mouse"&&v(w)}),onPointerDown:zt(a.onPointerDown,w=>{f.current=w.pointerType;const _=w.target;_.hasPointerCapture(w.pointerId)&&_.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(v(w),w.preventDefault())}),onKeyDown:zt(a.onKeyDown,w=>{const _=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(_&&w.key===" ")&&zfe.includes(w.key)&&(v(),w.preventDefault())})})})});IF.displayName=NF;var OF="SelectValue",jF=L.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,u=oc(OF,n),{onValueNodeHasChildrenChange:c}=u,f=i!==void 0,h=xn(t,u.onValueNodeChange);return Fa(()=>{c(f)},[c,f]),y.jsx(an.span,{...s,ref:h,style:{pointerEvents:"none"},children:JF(u.value)?y.jsx(y.Fragment,{children:o}):i})});jF.displayName=OF;var Wfe="SelectIcon",DF=L.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(an.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});DF.displayName=Wfe;var Kfe="SelectPortal",MF=e=>y.jsx(gh,{asChild:!0,...e});MF.displayName=Kfe;var ad="SelectContent",PF=L.forwardRef((e,t)=>{const n=oc(ad,e.__scopeSelect),[r,a]=L.useState();if(Fa(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?d0.createPortal(y.jsx(FF,{scope:e.__scopeSelect,children:y.jsx(Dw.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(LF,{...e,ref:t})});PF.displayName=ad;var No=10,[FF,sc]=jh(ad),Zfe="SelectContentImpl",Yfe=Nu("SelectContent.RemoveScroll"),LF=L.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:w,avoidCollisions:_,...x}=e,S=oc(ad,n),[E,C]=L.useState(null),[A,j]=L.useState(null),O=xn(t,Fe=>C(Fe)),[N,z]=L.useState(null),[H,Q]=L.useState(null),P=Mw(n),[Z,V]=L.useState(!1),te=L.useRef(!1);L.useEffect(()=>{if(E)return vw(E)},[E]),yw();const ae=L.useCallback(Fe=>{const[Oe,...Re]=P().map(Te=>Te.ref.current),[ze]=Re.slice(-1),He=document.activeElement;for(const Te of Fe)if(Te===He||(Te==null||Te.scrollIntoView({block:"nearest"}),Te===Oe&&A&&(A.scrollTop=0),Te===ze&&A&&(A.scrollTop=A.scrollHeight),Te==null||Te.focus(),document.activeElement!==He))return},[P,A]),re=L.useCallback(()=>ae([N,E]),[ae,N,E]);L.useEffect(()=>{Z&&re()},[Z,re]);const{onOpenChange:Y,triggerPointerDownPosRef:ne}=S;L.useEffect(()=>{if(E){let Fe={x:0,y:0};const Oe=ze=>{var He,Te;Fe={x:Math.abs(Math.round(ze.pageX)-(((He=ne.current)==null?void 0:He.x)??0)),y:Math.abs(Math.round(ze.pageY)-(((Te=ne.current)==null?void 0:Te.y)??0))}},Re=ze=>{Fe.x<=10&&Fe.y<=10?ze.preventDefault():E.contains(ze.target)||Y(!1),document.removeEventListener("pointermove",Oe),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",Oe),document.addEventListener("pointerup",Re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Oe),document.removeEventListener("pointerup",Re,{capture:!0})}}},[E,Y,ne]),L.useEffect(()=>{const Fe=()=>Y(!1);return window.addEventListener("blur",Fe),window.addEventListener("resize",Fe),()=>{window.removeEventListener("blur",Fe),window.removeEventListener("resize",Fe)}},[Y]);const[G,X]=QF(Fe=>{const Oe=P().filter(He=>!He.disabled),Re=Oe.find(He=>He.ref.current===document.activeElement),ze=e9(Oe,Fe,Re);ze&&setTimeout(()=>ze.ref.current.focus())}),oe=L.useCallback((Fe,Oe,Re)=>{const ze=!te.current&&!Re;(S.value!==void 0&&S.value===Oe||ze)&&(z(Fe),ze&&(te.current=!0))},[S.value]),ye=L.useCallback(()=>E==null?void 0:E.focus(),[E]),we=L.useCallback((Fe,Oe,Re)=>{const ze=!te.current&&!Re;(S.value!==void 0&&S.value===Oe||ze)&&Q(Fe)},[S.value]),fe=r==="popper"?Z2:$F,Me=fe===Z2?{side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:w,avoidCollisions:_}:{};return y.jsx(FF,{scope:n,content:E,viewport:A,onViewportChange:j,itemRefCallback:oe,selectedItem:N,onItemLeave:ye,itemTextRefCallback:we,focusSelectedItem:re,selectedItemText:H,position:r,isPositioned:Z,searchRef:G,children:y.jsx(Y0,{as:Yfe,allowPinchZoom:!0,children:y.jsx(Z0,{asChild:!0,trapped:S.open,onMountAutoFocus:Fe=>{Fe.preventDefault()},onUnmountAutoFocus:zt(a,Fe=>{var Oe;(Oe=S.trigger)==null||Oe.focus({preventScroll:!0}),Fe.preventDefault()}),children:y.jsx(hh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Fe=>Fe.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(fe,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Fe=>Fe.preventDefault(),...x,...Me,onPlaced:()=>V(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:zt(x.onKeyDown,Fe=>{const Oe=Fe.ctrlKey||Fe.altKey||Fe.metaKey;if(Fe.key==="Tab"&&Fe.preventDefault(),!Oe&&Fe.key.length===1&&X(Fe.key),["ArrowUp","ArrowDown","Home","End"].includes(Fe.key)){let ze=P().filter(He=>!He.disabled).map(He=>He.ref.current);if(["ArrowUp","End"].includes(Fe.key)&&(ze=ze.slice().reverse()),["ArrowUp","ArrowDown"].includes(Fe.key)){const He=Fe.target,Te=ze.indexOf(He);ze=ze.slice(Te+1)}setTimeout(()=>ae(ze)),Fe.preventDefault()}})})})})})})});LF.displayName=Zfe;var Xfe="SelectItemAlignedPosition",$F=L.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=oc(ad,n),o=sc(ad,n),[s,u]=L.useState(null),[c,f]=L.useState(null),h=xn(t,O=>f(O)),m=Mw(n),g=L.useRef(!1),v=L.useRef(!0),{viewport:w,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=L.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&w&&_&&x){const O=i.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),z=i.valueNode.getBoundingClientRect(),H=x.getBoundingClientRect();if(i.dir!=="rtl"){const He=H.left-N.left,Te=z.left-He,Ce=O.left-Te,B=O.width+Ce,ke=Math.max(B,N.width),Ae=window.innerWidth-No,ce=Gm(Te,[No,Math.max(No,Ae-ke)]);s.style.minWidth=B+"px",s.style.left=ce+"px"}else{const He=N.right-H.right,Te=window.innerWidth-z.right-He,Ce=window.innerWidth-O.right-Te,B=O.width+Ce,ke=Math.max(B,N.width),Ae=window.innerWidth-No,ce=Gm(Te,[No,Math.max(No,Ae-ke)]);s.style.minWidth=B+"px",s.style.right=ce+"px"}const Q=m(),P=window.innerHeight-No*2,Z=w.scrollHeight,V=window.getComputedStyle(c),te=parseInt(V.borderTopWidth,10),ae=parseInt(V.paddingTop,10),re=parseInt(V.borderBottomWidth,10),Y=parseInt(V.paddingBottom,10),ne=te+ae+Z+Y+re,G=Math.min(_.offsetHeight*5,ne),X=window.getComputedStyle(w),oe=parseInt(X.paddingTop,10),ye=parseInt(X.paddingBottom,10),we=O.top+O.height/2-No,fe=P-we,Me=_.offsetHeight/2,Fe=_.offsetTop+Me,Oe=te+ae+Fe,Re=ne-Oe;if(Oe<=we){const He=Q.length>0&&_===Q[Q.length-1].ref.current;s.style.bottom="0px";const Te=c.clientHeight-w.offsetTop-w.offsetHeight,Ce=Math.max(fe,Me+(He?ye:0)+Te+re),B=Oe+Ce;s.style.height=B+"px"}else{const He=Q.length>0&&_===Q[0].ref.current;s.style.top="0px";const Ce=Math.max(we,te+w.offsetTop+(He?oe:0)+Me)+Re;s.style.height=Ce+"px",w.scrollTop=Oe-we+w.offsetTop}s.style.margin=`${No}px 0`,s.style.minHeight=G+"px",s.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,s,c,w,_,x,i.dir,r]);Fa(()=>E(),[E]);const[C,A]=L.useState();Fa(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const j=L.useCallback(O=>{O&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return y.jsx(Qfe,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:j,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(an.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});$F.displayName=Xfe;var Jfe="SelectPopperPosition",Z2=L.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=No,...i}=e,o=Pw(n);return y.jsx(jv,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Z2.displayName=Jfe;var[Qfe,rC]=jh(ad,{}),Y2="SelectViewport",BF=L.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=sc(Y2,n),o=rC(Y2,n),s=xn(t,i.onViewportChange),u=L.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(Dw.Slot,{scope:n,children:y.jsx(an.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:zt(a.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(u.current-f.scrollTop);if(g>0){const v=window.innerHeight-No*2,w=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(w,_);if(x<v){const S=x+g,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});BF.displayName=Y2;var zF="SelectGroup",[ehe,the]=jh(zF),nhe=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Cs();return y.jsx(ehe,{scope:n,id:a,children:y.jsx(an.div,{role:"group","aria-labelledby":a,...r,ref:t})})});nhe.displayName=zF;var UF="SelectLabel",rhe=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=the(UF,n);return y.jsx(an.div,{id:a.id,...r,ref:t})});rhe.displayName=UF;var dv="SelectItem",[ahe,qF]=jh(dv),HF=L.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=oc(dv,n),u=sc(dv,n),c=s.value===r,[f,h]=L.useState(i??""),[m,g]=L.useState(!1),v=xn(t,S=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,S,r,a)}),w=Cs(),_=L.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(ahe,{scope:n,value:r,disabled:a,textId:w,isSelected:c,onItemTextChange:L.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(Dw.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:y.jsx(an.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:zt(o.onFocus,()=>g(!0)),onBlur:zt(o.onBlur,()=>g(!1)),onClick:zt(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:zt(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:zt(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:zt(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=u.onItemLeave)==null||E.call(u):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:zt(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:zt(o.onKeyDown,S=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(Ufe.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});HF.displayName=dv;var Xp="SelectItemText",VF=L.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=oc(Xp,n),s=sc(Xp,n),u=qF(Xp,n),c=Gfe(Xp,n),[f,h]=L.useState(null),m=xn(t,x=>h(x),u.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,u.value,u.disabled)}),g=f==null?void 0:f.textContent,v=L.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:w,onNativeOptionRemove:_}=c;return Fa(()=>(w(v),()=>_(v)),[w,_,v]),y.jsxs(y.Fragment,{children:[y.jsx(an.span,{id:u.textId,...i,ref:m}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?d0.createPortal(i.children,o.valueNode):null]})});VF.displayName=Xp;var GF="SelectItemIndicator",WF=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return qF(GF,n).isSelected?y.jsx(an.span,{"aria-hidden":!0,...r,ref:t}):null});WF.displayName=GF;var X2="SelectScrollUpButton",KF=L.forwardRef((e,t)=>{const n=sc(X2,e.__scopeSelect),r=rC(X2,e.__scopeSelect),[a,i]=L.useState(!1),o=xn(t,r.onScrollButtonChange);return Fa(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollTop>0;i(c)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(YF,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});KF.displayName=X2;var J2="SelectScrollDownButton",ZF=L.forwardRef((e,t)=>{const n=sc(J2,e.__scopeSelect),r=rC(J2,e.__scopeSelect),[a,i]=L.useState(!1),o=xn(t,r.onScrollButtonChange);return Fa(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<c;i(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(YF,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});ZF.displayName=J2;var YF=L.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=sc("SelectScrollButton",n),o=L.useRef(null),s=Mw(n),u=L.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return L.useEffect(()=>()=>u(),[u]),Fa(()=>{var f;const c=s().find(h=>h.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),y.jsx(an.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:zt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:zt(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:zt(a.onPointerLeave,()=>{u()})})}),ihe="SelectSeparator",ohe=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(an.div,{"aria-hidden":!0,...r,ref:t})});ohe.displayName=ihe;var Q2="SelectArrow",she=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Pw(n),i=oc(Q2,n),o=sc(Q2,n);return i.open&&o.position==="popper"?y.jsx(Dv,{...a,...r,ref:t}):null});she.displayName=Q2;var lhe="SelectBubbleInput",XF=L.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=L.useRef(null),i=xn(r,a),o=Ow(t);return L.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(an.select,{...n,style:{...mD,...n.style},ref:i,defaultValue:t})});XF.displayName=lhe;function JF(e){return e===""||e===void 0}function QF(e){const t=Ea(e),n=L.useRef(""),r=L.useRef(0),a=L.useCallback(o=>{const s=n.current+o;t(s),function u(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(s)},[t]),i=L.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return L.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function e9(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=uhe(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function uhe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var che=RF,dhe=IF,fhe=jF,hhe=DF,phe=MF,mhe=PF,ghe=BF,yhe=HF,bhe=VF,vhe=WF,whe=KF,_he=ZF;function vd({...e}){return y.jsx(che,{"data-slot":"select",...e})}function wd({...e}){return y.jsx(fhe,{"data-slot":"select-value",...e})}function _d({className:e,size:t="default",children:n,...r}){return y.jsxs(dhe,{"data-slot":"select-trigger","data-size":t,className:Ut("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(hhe,{asChild:!0,children:y.jsx(sE,{className:"size-4 opacity-50"})})]})}function xd({className:e,children:t,position:n="popper",...r}){return y.jsx(phe,{children:y.jsxs(mhe,{"data-slot":"select-content",className:Ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(xhe,{}),y.jsx(ghe,{className:Ut("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(She,{})]})})}function Wi({className:e,children:t,...n}){return y.jsxs(yhe,{"data-slot":"select-item",className:Ut("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(vhe,{children:y.jsx(id,{className:"size-4"})})}),y.jsx(bhe,{children:t})]})}function xhe({className:e,...t}){return y.jsx(whe,{"data-slot":"select-scroll-up-button",className:Ut("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(WB,{className:"size-4"})})}function She({className:e,...t}){return y.jsx(_he,{"data-slot":"select-scroll-down-button",className:Ut("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(sE,{className:"size-4"})})}var t9=["PageUp","PageDown"],n9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],r9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Dh="Slider",[eE,Ehe,khe]=Aw(Dh),[a9,jge]=Ri(Dh,[khe]),[Che,Fw]=a9(Dh),i9=L.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...w}=e,_=L.useRef(new Set),x=L.useRef(0),E=o==="horizontal"?Ahe:The,[C=[],A]=Os({prop:f,defaultProp:c,onChange:Q=>{var Z;(Z=[..._.current][x.current])==null||Z.focus(),h(Q)}}),j=L.useRef(C);function O(Q){const P=jhe(C,Q);H(Q,P)}function N(Q){H(Q,x.current)}function z(){const Q=j.current[x.current];C[x.current]!==Q&&m(C)}function H(Q,P,{commit:Z}={commit:!1}){const V=Fhe(i),te=Lhe(Math.round((Q-r)/i)*i+r,V),ae=Gm(te,[r,a]);A((re=[])=>{const Y=Ihe(re,ae,P);if(Phe(Y,u*i)){x.current=Y.indexOf(ae);const ne=String(Y)!==String(re);return ne&&Z&&m(Y),ne?Y:re}else return re})}return y.jsx(Che,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:C,orientation:o,form:v,children:y.jsx(eE.Provider,{scope:e.__scopeSlider,children:y.jsx(eE.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...w,ref:t,onPointerDown:zt(w.onPointerDown,()=>{s||(j.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:O,onSlideMove:s?void 0:N,onSlideEnd:s?void 0:z,onHomeKeyDown:()=>!s&&H(r,0,{commit:!0}),onEndKeyDown:()=>!s&&H(a,C.length-1,{commit:!0}),onStepKeyDown:({event:Q,direction:P})=>{if(!s){const te=t9.includes(Q.key)||Q.shiftKey&&n9.includes(Q.key)?10:1,ae=x.current,re=C[ae],Y=i*te*P;H(re+Y,ae,{commit:!0})}}})})})})});i9.displayName=Dh;var[o9,s9]=a9(Dh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ahe=L.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:u,onStepKeyDown:c,...f}=e,[h,m]=L.useState(null),g=xn(t,E=>m(E)),v=L.useRef(void 0),w=Oh(a),_=w==="ltr",x=_&&!i||!_&&i;function S(E){const C=v.current||h.getBoundingClientRect(),A=[0,C.width],O=aC(A,x?[n,r]:[r,n]);return v.current=C,O(E-C.left)}return y.jsx(o9,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(l9,{dir:w,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);s==null||s(C)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:E=>{const A=r9[x?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:A?-1:1})}})})}),The=L.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:u,...c}=e,f=L.useRef(null),h=xn(t,f),m=L.useRef(void 0),g=!a;function v(w){const _=m.current||f.current.getBoundingClientRect(),x=[0,_.height],E=aC(x,g?[r,n]:[n,r]);return m.current=_,E(w-_.top)}return y.jsx(o9,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(l9,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const _=v(w.clientY);i==null||i(_)},onSlideMove:w=>{const _=v(w.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,s==null||s()},onStepKeyDown:w=>{const x=r9[g?"from-bottom":"from-top"].includes(w.key);u==null||u({event:w,direction:x?-1:1})}})})}),l9=L.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:u,...c}=e,f=Fw(Dh,n);return y.jsx(an.span,{...c,ref:t,onKeyDown:zt(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):t9.concat(n9).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:zt(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:zt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:zt(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),u9="SliderTrack",c9=L.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=Fw(u9,n);return y.jsx(an.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});c9.displayName=u9;var tE="SliderRange",d9=L.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=Fw(tE,n),i=s9(tE,n),o=L.useRef(null),s=xn(t,o),u=a.values.length,c=a.values.map(m=>p9(m,a.min,a.max)),f=u>1?Math.min(...c):0,h=100-Math.max(...c);return y.jsx(an.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});d9.displayName=tE;var nE="SliderThumb",f9=L.forwardRef((e,t)=>{const n=Ehe(e.__scopeSlider),[r,a]=L.useState(null),i=xn(t,s=>a(s)),o=L.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(Rhe,{...e,ref:i,index:o})}),Rhe=L.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=Fw(nE,n),s=s9(nE,n),[u,c]=L.useState(null),f=xn(t,S=>c(S)),h=u?o.form||!!u.closest("form"):!0,m=Iv(u),g=o.values[r],v=g===void 0?0:p9(g,o.min,o.max),w=Ohe(r,o.values.length),_=m==null?void 0:m[s.size],x=_?Dhe(_,v,s.direction):0;return L.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${x}px)`},children:[y.jsx(eE.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(an.span,{role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:zt(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(h9,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});f9.displayName=nE;var Nhe="RadioBubbleInput",h9=L.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=L.useRef(null),i=xn(a,r),o=Ow(t);return L.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("input",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(an.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});h9.displayName=Nhe;function Ihe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function p9(e,t,n){const i=100/(n-t)*(e-t);return Gm(i,[0,100])}function Ohe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function jhe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function Dhe(e,t,n){const r=e/2,i=aC([0,50],[0,r]);return(r-i(t)*n)*n}function Mhe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Phe(e,t){if(t>0){const n=Mhe(e);return Math.min(...n)>=t}return!0}function aC(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Fhe(e){return(String(e).split(".")[1]||"").length}function Lhe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var $he=i9,Bhe=c9,zhe=d9,Uhe=f9;function ks({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=L.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs($he,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:Ut("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(Bhe,{"data-slot":"slider-track",className:Ut("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(zhe,{"data-slot":"slider-range",className:Ut("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,u)=>y.jsx(Uhe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}var qhe="Separator",$4="horizontal",Hhe=["horizontal","vertical"],m9=L.forwardRef((e,t)=>{const{decorative:n,orientation:r=$4,...a}=e,i=Vhe(r)?r:$4,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(an.div,{"data-orientation":i,...s,...a,ref:t})});m9.displayName=qhe;function Vhe(e){return Hhe.includes(e)}var Ghe=m9;function r0({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(Ghe,{"data-slot":"separator-root",decorative:n,orientation:t,className:Ut("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const Whe=()=>{const{theme:e,setTheme:t,enableAdvancedSettings:n,setEnableAdvancedSettings:r,enableStreamingMarkdown:a,setEnableStreamingMarkdown:i,streamingRenderFPS:o,setStreamingRenderFPS:s,streamingCodeRenderFPS:u,setStreamingCodeRenderFPS:c,prismThemeUrl:f,setPrismThemeUrl:h,resetGeneralSettings:m}=qr($n(N=>({theme:N.theme,setTheme:N.setTheme,enableAdvancedSettings:N.enableAdvancedSettings,setEnableAdvancedSettings:N.setEnableAdvancedSettings,enableStreamingMarkdown:N.enableStreamingMarkdown,setEnableStreamingMarkdown:N.setEnableStreamingMarkdown,streamingRenderFPS:N.streamingRenderFPS,setStreamingRenderFPS:N.setStreamingRenderFPS,streamingCodeRenderFPS:N.streamingCodeRenderFPS,setStreamingCodeRenderFPS:N.setStreamingCodeRenderFPS,prismThemeUrl:N.prismThemeUrl,setPrismThemeUrl:N.setPrismThemeUrl,resetGeneralSettings:N.resetGeneralSettings}))),[g,v]=L.useState(o),[w,_]=L.useState(u),x=L.useCallback(N=>{v(N[0])},[]),S=L.useCallback(N=>{s(N[0])},[s]),E=L.useCallback(N=>{const z=N.target.value,H=z===""?30:parseInt(z.replace(/[^0-9]/g,""),10);if(!isNaN(H)){const Q=Math.max(1,Math.min(60,H));s(Q),v(Q)}},[s]),C=L.useCallback(N=>{_(N[0])},[]),A=L.useCallback(N=>{c(N[0])},[c]),j=L.useCallback(N=>{const z=N.target.value,H=z===""?10:parseInt(z.replace(/[^0-9]/g,""),10);if(!isNaN(H)){const Q=Math.max(1,Math.min(60,H));c(Q),_(Q)}},[c]);L.useEffect(()=>{v(o)},[o]),L.useEffect(()=>{_(u)},[u]);const O=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&m()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(dn,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(vd,{value:e??"system",onValueChange:N=>t(N),children:[y.jsx(_d,{id:"theme-select",className:"w-[180px]",children:y.jsx(wd,{placeholder:"Select theme"})}),y.jsxs(xd,{children:[y.jsx(Wi,{value:"light",children:"Light"}),y.jsx(Wi,{value:"dark",children:"Dark"}),y.jsx(Wi,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-1.5",children:[y.jsx(dn,{htmlFor:"prism-theme-url",className:"font-medium",children:"Code Block Theme URL (Optional)"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use the default themes."}),y.jsx(nr,{id:"prism-theme-url",type:"url",placeholder:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",value:f??"",onChange:N=>h(N.target.value)})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(jl,{id:"streaming-markdown-switch",checked:a??!0,onCheckedChange:i})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(dn,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["General Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how smoothly streaming text appears. (Default: 30)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(ks,{id:"streaming-fps-slider",min:1,max:60,step:1,value:[g],onValueChange:x,onValueCommit:S,className:"flex-grow"}),y.jsx(nr,{type:"number",min:1,max:60,step:1,value:g,onChange:E,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(dn,{htmlFor:"streaming-code-fps-slider",className:"font-medium",children:["Code Block Streaming Update Rate (",w," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Specific update rate when code blocks are streaming (lower values reduce lag). (Default: 10)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(ks,{id:"streaming-code-fps-slider",min:1,max:60,step:1,value:[w],onValueChange:C,onValueCommit:A,className:"flex-grow"}),y.jsx(nr,{type:"number",min:1,max:60,step:1,value:w,onChange:j,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(r0,{}),y.jsxs("div",{className:"space-y-2 hidden",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"advanced-settings-switch",className:"font-medium",children:"Enable Advanced Controls"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Show controls for AI parameters (temperature, etc.) and Assistant settings tab."})]}),y.jsx(jl,{id:"advanced-settings-switch",checked:n??!1,onCheckedChange:r})]})]}),y.jsx(r0,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Lt,{variant:"outline",size:"sm",onClick:O,children:[y.jsx(Kz,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},Khe=wt.memo(Whe),g9=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:o,setTopK:s,presencePenalty:u,setPresencePenalty:c,frequencyPenalty:f,setFrequencyPenalty:h,defaultTemperature:m=.7,defaultTopP:g=null,defaultMaxTokens:v=null,defaultTopK:w=null,defaultPresencePenalty:_=0,defaultFrequencyPenalty:x=0,className:S})=>{const[E,C]=L.useState(e??m),[A,j]=L.useState(n??g??1),[O,N]=L.useState(u??_??0),[z,H]=L.useState(f??x??0);L.useEffect(()=>{C(e??m)},[e,m]),L.useEffect(()=>{j(n??g??1)},[n,g]),L.useEffect(()=>{N(u??_??0)},[u,_]),L.useEffect(()=>{H(f??x??0)},[f,x]);const Q=L.useCallback((te,ae)=>{const re=ae.target.value,Y=re===""?null:parseInt(re,10);(re===""||!isNaN(Y)&&Y!==null)&&te(Y)},[]),P=L.useCallback((te,ae)=>{te(ae[0])},[]),Z=L.useCallback(te=>{te(null)},[]),V=m!==void 0||g!==void 0||v!==void 0||w!==void 0||_!==void 0||x!==void 0;return y.jsxs("div",{className:Ut("space-y-4 p-4",S),children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",E.toFixed(2),")"]}),y.jsx(ks,{id:"param-temperature",min:0,max:1,step:.01,value:[E],onValueChange:te=>C(te[0]),onValueCommit:te=>P(t,te)}),V&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(t),disabled:e===null,children:["Use Default (",(m==null?void 0:m.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(A??0).toFixed(2),") "]}),y.jsx(ks,{id:"param-top-p",min:0,max:1,step:.01,value:[A??1],onValueChange:te=>j(te[0]),onValueCommit:te=>P(r,te)}),V&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(nr,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:te=>Q(i,te),min:"1",className:"h-8 text-xs"}),V&&y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(i),disabled:a===null,children:"Use Default"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),y.jsx(nr,{id:"param-top-k",type:"number",placeholder:`Default: ${w??"None"}`,value:o??"",onChange:te=>Q(s,te),min:"1",className:"h-8 text-xs"}),V&&y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(s),disabled:o===null,children:"Use Default"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(O??0).toFixed(2),")"," "]}),y.jsx(ks,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[O??0],onValueChange:te=>N(te[0]),onValueCommit:te=>P(c,te)}),V&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(c),disabled:u===null,children:["Use Default (",(_==null?void 0:_.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(z??0).toFixed(2),")"," "]}),y.jsx(ks,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[z??0],onValueChange:te=>H(te[0]),onValueCommit:te=>P(h,te)}),V&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(h),disabled:f===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]})]})},Zhe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:o,setTopP:s,maxTokens:u,setMaxTokens:c,topK:f,setTopK:h,presencePenalty:m,setPresencePenalty:g,frequencyPenalty:v,setFrequencyPenalty:w}=qr($n(A=>({globalSystemPrompt:A.globalSystemPrompt,setGlobalSystemPrompt:A.setGlobalSystemPrompt,toolMaxSteps:A.toolMaxSteps,setToolMaxSteps:A.setToolMaxSteps,temperature:A.temperature,setTemperature:A.setTemperature,topP:A.topP,setTopP:A.setTopP,maxTokens:A.maxTokens,setMaxTokens:A.setMaxTokens,topK:A.topK,setTopK:A.setTopK,presencePenalty:A.presencePenalty,setPresencePenalty:A.setPresencePenalty,frequencyPenalty:A.frequencyPenalty,setFrequencyPenalty:A.setFrequencyPenalty}))),_=A=>{const j=A.target.value,O=j===""?5:parseInt(j,10);isNaN(O)||r(O)},x=A=>{A!==null&&i(A)},S=A=>{A!==null&&s(A)},E=A=>{A!==null&&g(A)},C=A=>{A!==null&&w(A)};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),y.jsx(dn,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),y.jsx(gw,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:A=>t(A.target.value),rows:4})]}),y.jsx(r0,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),y.jsx(g9,{temperature:a,setTemperature:x,topP:o,setTopP:S,maxTokens:u,setMaxTokens:c,topK:f,setTopK:h,presencePenalty:m,setPresencePenalty:E,frequencyPenalty:v,setFrequencyPenalty:C,className:"p-0 w-full"})]}),y.jsx(r0,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),y.jsx(dn,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),y.jsx(nr,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:_,className:"w-24"})]})]})},Yhe=wt.memo(Zhe),Xhe=()=>{const{importConversation:e,exportAllConversations:t}=Ur($n(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=L.useRef(null),[r,a]=L.useState(!1),[i,o]=L.useState(!1),[s,u]=L.useState(!1),c=()=>{var g;(g=n.current)==null||g.click()},f=L.useCallback(async g=>{var w;const v=(w=g.target.files)==null?void 0:w[0];if(v){a(!0);try{await e(v)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=L.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),m=L.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await Ht.clearAllData(),ut.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const v="Failed to clear all data";console.error(v,g),ut.error(`${v}: ${g instanceof Error?g.message:String(g)}`),u(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:f,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Lt,{onClick:c,variant:"outline",disabled:r,children:[r?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(u7,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Lt,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(nb,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Lt,{onClick:m,variant:"destructive",disabled:s,children:[s?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Iu,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},Jhe=wt.memo(Xhe),Qhe=J4("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function y9({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Ut(Qhe({variant:t}),e),...n})}function b9({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:Ut("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function v9({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:Ut("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function iC({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:Ut("w-full caption-bottom text-sm",e),...t})})}function oC({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:Ut("[&_tr]:border-b",e),...t})}function sC({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:Ut("[&_tr:last-child]:border-0",e),...t})}function Oo({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:Ut("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Ga({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:Ut("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Fr({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:Ut("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const epe=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=n0($n(j=>({loadedMods:j.loadedMods,addDbMod:j.addDbMod,updateDbMod:j.updateDbMod,deleteDbMod:j.deleteDbMod,dbMods:j.dbMods,isLoading:j.isLoading}))),[o,s]=L.useState(""),[u,c]=L.useState(""),[f,h]=L.useState(""),[m,g]=L.useState(!1),[v,w]=L.useState({}),[_,x]=L.useState({}),S=L.useCallback(async()=>{if(!o.trim()){ut.error("Mod name cannot be empty.");return}if(!u.trim()&&!f.trim()){ut.error("Either Mod URL or Script Content must be provided.");return}if(u.trim()&&f.trim()){ut.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const j={name:o.trim(),sourceUrl:u.trim()||null,scriptContent:f.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(j),s(""),c(""),h(""),ut.info("Mod added. Reload required for changes to take effect.")}catch(j){console.error("Failed to add mod (from component):",j)}finally{g(!1)}},[o,u,f,t,a==null?void 0:a.length]),E=L.useCallback(async j=>{w(O=>({...O,[j.id]:!0}));try{await n(j.id,{enabled:!j.enabled}),ut.info(`Mod "${j.name}" ${j.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(O){console.error("Failed to update mod (from component):",O)}finally{w(O=>({...O,[j.id]:!1}))}},[n]),C=L.useCallback(async j=>{if(window.confirm(`Are you sure you want to delete the mod "${j.name}"? This cannot be undone.`)){x(O=>({...O,[j.id]:!0}));try{await r(j.id),ut.info("Mod deleted. Reload required for changes to take effect.")}catch(O){console.error("Failed to delete mod (from component):",O)}finally{x(O=>({...O,[j.id]:!1}))}}},[r]),A=L.useCallback(j=>{const O=e.find(z=>z.id===j);if(O)if(O.error){const z=O.error instanceof Error?O.error.message:String(O.error);return{status:"Error",error:O.error,tooltip:z}}else return{status:"Loaded"};const N=(a||[]).find(z=>z.id===j);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(y9,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(dE,{className:"h-4 w-4"}),y.jsx(b9,{children:"Security Warning"}),y.jsx(v9,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(nr,{id:"mod-name",value:o,onChange:j=>s(j.target.value),placeholder:"My Awesome Mod",disabled:m})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(nr,{id:"mod-url",type:"url",value:u,onChange:j=>c(j.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!f.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(gw,{id:"mod-script",value:f,onChange:j=>h(j.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!u.trim()})]}),y.jsxs(Lt,{onClick:S,disabled:m,children:[m&&y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(In,{delayDuration:100,children:y.jsxs(iC,{children:[y.jsx(oC,{children:y.jsxs(Oo,{children:[y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{children:"Source"}),y.jsx(Ga,{children:"Status"}),y.jsx(Ga,{className:"text-center",children:"Enabled"}),y.jsx(Ga,{className:"text-right",children:"Actions"})]})}),y.jsx(sC,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Oo,{children:y.jsx(Fr,{colSpan:5,children:y.jsx(Aa,{className:"h-10 w-full"})})}),y.jsx(Oo,{children:y.jsx(Fr,{colSpan:5,children:y.jsx(Aa,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Oo,{children:y.jsx(Fr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(j=>{const{status:O,error:N,tooltip:z}=A(j.id),H=j.sourceUrl?new URL(j.sourceUrl).hostname:"Direct Script",Q=v[j.id],P=_[j.id],Z=Q||P,V=O==="Error";return y.jsxs(Oo,{children:[y.jsx(Fr,{className:"font-medium",children:j.name}),y.jsx(Fr,{className:"text-muted-foreground",children:H}),y.jsxs(Fr,{children:[y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx("span",{className:V?"text-destructive font-semibold cursor-help":"",children:O})}),z&&y.jsx(Nn,{className:"max-w-xs break-words",children:y.jsx("p",{children:z})})]}),V&&N&&y.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),y.jsxs(Fr,{className:"text-center",children:[y.jsx(jl,{checked:j.enabled??!1,onCheckedChange:()=>E(j),disabled:Z,"aria-label":`Enable ${j.name}`}),Q&&y.jsx(Xn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(Fr,{className:"text-right",children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>C(j),disabled:Z,"aria-label":`Delete ${j.name}`,className:"text-destructive hover:text-destructive/80",children:P?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Iu,{className:"h-4 w-4"})})})]},j.id)})})]})})})]})]})},tpe=wt.memo(epe),w9=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48"})=>{const[s,u]=L.useState(""),c=L.useMemo(()=>{if(!s)return t;const f=s.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.id.toLowerCase().includes(f))},[t,s]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(nr,{value:s,onChange:f=>u(f.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(fw,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:c.map(f=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(dn,{htmlFor:`enable-model-${e}-${f.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:f.name||f.id,children:f.name||f.id}),y.jsx(jl,{id:`enable-model-${e}-${f.id}`,checked:n.has(f.id),onCheckedChange:h=>r(f.id,h),className:"flex-shrink-0",disabled:i,"aria-label":`Enable model ${f.name||f.id}`})]},f.id))})})]})},npe=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s})=>{var C;const u=EE(e.type),c=kE(e.type),f=Qp(e.type),h=o==="fetching"||s,m=s||o==="fetching",g=s||o==="fetching",w=fi(A=>A.getAllAvailableModelDefsForProvider)(e.id),_=L.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),x=e.apiKeyId?t.some(A=>A.id===e.apiKeyId):!1,S=u&&!x,E=L.useCallback(async(A,j)=>{const O=new Set(e.enabledModels??[]);j?O.add(A):O.delete(A);const N=Array.from(O);try{await i(e.id,{enabledModels:N})}catch(z){ut.error("Failed to update model status."),console.error("Failed to save model toggle:",z)}},[e.enabledModels,e.id,i]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{children:y.jsx("span",{className:Ut("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(Nn,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{children:y.jsx(Ff,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(Nn,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:n,disabled:m,"aria-label":"Edit provider",className:"h-8 w-8",children:y.jsx(uE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:r,disabled:g,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",children:s?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Iu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[u&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?x?y.jsx("span",{className:"text-green-400",children:((C=t.find(A=>A.id===e.apiKeyId))==null?void 0:C.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),c&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),f&&y.jsx("div",{className:"pt-1",children:y.jsxs(Lt,{variant:"outline",size:"sm",onClick:a,disabled:h,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Xn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(id,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(Ff,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(mv,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"font-medium text-card-foreground text-sm",children:"Model Enablement (Saves Immediately):"}),y.jsx(w9,{providerId:e.id,allAvailableModels:w,enabledModelIds:_,onToggleModel:E,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64"})]})]})},rpe=wt.memo(npe),_9=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const o=f=>{r(f==="none"?null:f)},s=(c=a.find(f=>f.id===n))==null?void 0:c.name,u=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(vd,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(_d,{className:Ut("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(wd,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(jz,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):u]})]})})}),y.jsxs(xd,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(Wi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(f=>y.jsx(Wi,{value:f.id,children:f.name||`Key ID: ${f.id.substring(0,6)}...`},f.id))]})]})},ape=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const u=EE(t.type??null),c=kE(t.type??null),f=Qp(t.type??null),h=t.isEnabled??!1,m=t.autoFetchModels??!1,g=L.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=L.useCallback((w,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(w):x.delete(w);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(nr,{id:`edit-name-${e}`,value:t.name||"",onChange:w=>s("name",w.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(vd,{value:t.type??"",onValueChange:w=>s("type",w),disabled:a,children:[y.jsx(_d,{id:`edit-type-${e}`,children:y.jsx(wd,{placeholder:"Select Type"})}),y.jsx(xd,{children:Uj.map(w=>y.jsx(Wi,{value:w.value,children:w.label},w.value))})]})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{children:"API Key"}),y.jsx(_9,{selectedKeyId:t.apiKeyId??null,onKeySelected:w=>s("apiKeyId",w),apiKeys:n,disabled:a})]}),c&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(nr,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:w=>s("baseURL",w.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(jl,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:w=>s("isEnabled",w),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(dn,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(jl,{id:`edit-autofetch-${e}`,checked:m,onCheckedChange:w=>s("autoFetchModels",w),disabled:!f||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(dn,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:f?"":"text-muted-foreground",children:["Auto-fetch models ",f?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(w9,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(r0,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(Zu,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cE,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},ipe=wt.memo(ape),ope=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i})=>{const[o,s]=L.useState(!1),[u,c]=L.useState(!1),[f,h]=L.useState(!1),[m,g]=L.useState({}),v=fi(N=>N.getAllAvailableModelDefsForProvider),[w,_]=L.useState([]),x=L.useMemo(()=>[...w].sort((N,z)=>(N.name||N.id).localeCompare(z.name||z.id)),[w]);L.useEffect(()=>{if(o){const N=v(e.id);_(N),g({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else _([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,e.fetchedModels,v]);const S=()=>s(!0),E=()=>{s(!1),g({}),c(!1)},C=L.useCallback(async()=>{c(!0);try{const N=m.enabledModels&&m.enabledModels.length>0?m.enabledModels:null,z={name:m.name,type:m.type,isEnabled:m.isEnabled,apiKeyId:m.apiKeyId,baseURL:m.baseURL,autoFetchModels:m.autoFetchModels,enabledModels:N};Object.keys(z).forEach(H=>{z[H]===void 0&&delete z[H]}),await n(e.id,z),s(!1),g({}),ut.success(`Provider "${z.name||e.name}" updated.`)}catch(N){console.error("Failed to save provider update:",N),ut.error("Failed to save provider configuration.")}finally{c(!1)}},[m,n,e.id,e.name]),A=L.useCallback((N,z)=>{g(H=>({...H,[N]:z}))},[]),j=L.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(N){console.error("Failed to delete provider:",N),h(!1)}}},[r,e.id,e.name]),O=L.useCallback(async()=>{if(await a(e.id),o){const N=v(e.id);_(N)}},[a,e.id,o,v]);return y.jsx("div",{className:"border-b border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?y.jsx(ipe,{providerId:e.id,editData:m,apiKeys:t,allAvailableModels:x,isSaving:u,onCancel:E,onSave:C,onChange:A,onUpdate:n}):y.jsx(rpe,{provider:e,apiKeys:t,onEdit:S,onDelete:j,onFetchModels:O,onUpdate:n,fetchStatus:i,isDeleting:f})})},spe=wt.memo(ope),lpe=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=L.useState(!1),[i,o]=L.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!0,fetchedModels:null,modelsLastFetchedAt:null}),s=L.useCallback((m,g)=>{o(v=>{const w={...v,[m]:g};if(m==="type"){const _=g;w.apiKeyId=null,w.baseURL=null,w.autoFetchModels=Qp(_),w.enabledModels=null}return(m==="isEnabled"||m==="autoFetchModels")&&(w[m]=!!g),w})},[]),u=L.useCallback(async()=>{if(!i.name||!i.type){ut.error("Provider Name and Type are required.");return}a(!0);try{const m=i.type,g=i.autoFetchModels??Qp(m),v={name:i.name,type:m,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(m){console.error("Failed to add provider (from form component):",m)}finally{a(!1)}},[i,t,n]),c=EE(i.type??null),f=kE(i.type??null),h=Qp(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(nr,{value:i.name||"",onChange:m=>s("name",m.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(vd,{value:i.type??"openai",onValueChange:m=>s("type",m),disabled:r,children:[y.jsx(_d,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(wd,{placeholder:"Select Type"})}),y.jsx(xd,{children:Uj.map(m=>y.jsx(Wi,{value:m.value,children:m.label},m.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(jl,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:m=>s("isEnabled",m),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(dn,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(c||f)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[c&&y.jsx(_9,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:m=>s("apiKeyId",m),apiKeys:e||[],className:"flex-grow",disabled:r}),f&&y.jsx(nr,{value:i.baseURL||"",onChange:m=>s("baseURL",m.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(jl,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:m=>s("autoFetchModels",m),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(dn,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(Zu,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:u,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cE,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})},upe=()=>{const{addDbProviderConfig:e,updateDbProviderConfig:t,deleteDbProviderConfig:n,fetchModels:r,providerFetchStatus:a,dbProviderConfigs:i,apiKeys:o,isLoading:s}=fi($n(v=>({addDbProviderConfig:v.addProviderConfig,updateDbProviderConfig:v.updateProviderConfig,deleteDbProviderConfig:v.deleteProviderConfig,fetchModels:v.fetchModels,providerFetchStatus:v.providerFetchStatus,dbProviderConfigs:v.dbProviderConfigs,apiKeys:v.dbApiKeys,isLoading:v.isLoading}))),[u,c]=L.useState(!1),f=()=>c(!0),h=L.useCallback(()=>c(!1),[]),m=L.useCallback(async v=>{await r(v)},[r]),g=L.useMemo(()=>i||[],[i]);return y.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(lpe,{apiKeys:o||[],onAddProvider:e,onCancel:h}):y.jsxs(Lt,{onClick:f,variant:"outline",className:"w-full",disabled:s,children:[y.jsx(pv,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow overflow-hidden border-t border-border pt-4 mt-4",children:y.jsxs("div",{className:"space-y-2",children:[s&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:g.map(v=>y.jsx(spe,{provider:v,apiKeys:o||[],onUpdate:t,onDelete:n,onFetchModels:m,fetchStatus:a[v.id]||"idle"},v.id))}),!s&&g.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},cpe=wt.memo(upe),dpe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=qr($n(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Git User Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set your user name and email for Git commits made within the VFS. This is required for committing changes."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 rounded-lg border p-4 shadow-sm bg-card",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(nr,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(nr,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})]})})},fpe=wt.memo(dpe),hpe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:o}=Ur($n(N=>({syncRepos:N.syncRepos,addSyncRepo:N.addSyncRepo,updateSyncRepo:N.updateSyncRepo,deleteSyncRepo:N.deleteSyncRepo,initializeOrSyncRepo:N.initializeOrSyncRepo,repoInitializationStatus:N.repoInitializationStatus,isLoading:N.isLoading}))),[s,u]=L.useState(!1),[c,f]=L.useState(null),[h,m]=L.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=L.useState(!1),[w,_]=L.useState({}),x=L.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),u(!1),f(null),v(!1)},[]),S=L.useCallback((N,z)=>{m(H=>({...H,[N]:z}))},[]),E=L.useCallback(async()=>{var N,z,H,Q;if(!((N=h.name)!=null&&N.trim())||!((z=h.remoteUrl)!=null&&z.trim())){ut.error("Repository Name and Remote URL are required.");return}v(!0);try{const P={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((H=h.branch)==null?void 0:H.trim())||"main",username:((Q=h.username)==null?void 0:Q.trim())||null,password:h.password||null};c?await n(c,P):await t(P),x()}catch(P){console.error("Failed to save sync repo:",P)}finally{v(!1)}},[h,c,t,n,x]),C=N=>{f(N.id),m({name:N.name,remoteUrl:N.remoteUrl,branch:N.branch||"main",username:N.username??"",password:N.password??""}),u(!1)},A=L.useCallback(async(N,z)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${z}"? This will unlink it from any conversations and remove the local copy.`)){_(H=>({...H,[N]:!0}));try{await r(N),c===N&&x()}catch(H){console.error("Failed to delete sync repo:",H)}finally{_(H=>({...H,[N]:!1}))}}},[r,c,x]),j=L.useCallback(async N=>{await a(N)},[a]),O=()=>{var N,z;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:c?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-name",children:"Name"}),y.jsx(nr,{id:"repo-name",value:h.name||"",onChange:H=>S("name",H.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(nr,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:H=>S("remoteUrl",H.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(nr,{id:"repo-branch",value:h.branch||"",onChange:H=>S("branch",H.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),y.jsxs("div",{className:"pt-2",children:[y.jsx(dn,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),y.jsxs(y9,{variant:"destructive",className:"mt-2 mb-3",children:[y.jsx(dE,{className:"h-4 w-4"}),y.jsx(b9,{children:"Security Warning"}),y.jsx(v9,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-username",children:"Username"}),y.jsx(nr,{id:"repo-username",value:h.username||"",onChange:H=>S("username",H.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-password",children:"Password / Token"}),y.jsx(nr,{id:"repo-password",type:"password",value:h.password||"",onChange:H=>S("password",H.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[y.jsx(Zu,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((N=h.name)!=null&&N.trim())||!((z=h.remoteUrl)!=null&&z.trim()),type:"button",children:[g&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cE,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!s&&!c&&y.jsxs(Lt,{onClick:()=>u(!0),variant:"outline",className:"w-full mb-4",disabled:o,children:[y.jsx(pv,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(s||c)&&O(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),o&&!s&&!c?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Aa,{className:"h-10 w-full"}),y.jsx(Aa,{className:"h-10 w-full"}),y.jsx(Aa,{className:"h-10 w-full"})]}):e.length===0&&!s&&!c?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(iC,{children:[y.jsx(oC,{children:y.jsxs(Oo,{children:[y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{children:"Remote URL"}),y.jsx(Ga,{children:"Branch"}),y.jsx(Ga,{children:"Auth"}),y.jsx(Ga,{className:"text-right",children:"Actions"})]})}),y.jsx(sC,{children:e.map(N=>{const z=w[N.id],H=c===N.id,Q=!!N.username||!!N.password,P=i[N.id]||"idle",V=z||g||!!c||P==="syncing";let te=null,ae="Initialize/Sync Repository";return P==="syncing"?(te=y.jsx(Xn,{className:"h-4 w-4 animate-spin mr-1"}),ae="Initializing/Syncing..."):P==="idle"?(te=y.jsx(d6,{className:"h-4 w-4 text-green-500 mr-1"}),ae="Sync Successful / Ready"):P==="error"?(te=y.jsx(Ff,{className:"h-4 w-4 text-destructive mr-1"}),ae="Sync Failed"):te=y.jsx(mv,{className:"h-4 w-4 mr-1"}),y.jsxs(Oo,{className:Ut(H?"bg-muted/50":"",V&&!H?"opacity-70":""),children:[y.jsx(Fr,{className:"font-medium",children:N.name}),y.jsx(Fr,{className:"text-xs truncate max-w-xs",children:N.remoteUrl}),y.jsx(Fr,{children:N.branch||"main"}),y.jsx(Fr,{className:"text-xs",children:Q?"Configured":"None"}),y.jsxs(Fr,{className:"text-right space-x-1",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"outline",size:"icon",onClick:()=>j(N.id),className:"h-8 w-8","aria-label":`Initialize or Sync repo ${N.name}`,disabled:V,children:te})}),y.jsx(Nn,{side:"top",children:ae})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>C(N),className:"h-8 w-8","aria-label":`Edit repo ${N.name}`,disabled:V,children:y.jsx(uE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>A(N.id,N.name),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete repo ${N.name}`,disabled:V,children:z?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Iu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})]},N.id)})})]})})]})]})},ppe=wt.memo(hpe),mpe=()=>{const e=Ut("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsxs(Nw,{defaultValue:"config",className:"flex flex-col h-full",children:[y.jsxs(Iw,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(li,{value:"config",className:e,children:"User Config"}),y.jsx(li,{value:"sync",className:e,children:"Sync Repositories"})]}),y.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto",children:[y.jsx(ui,{value:"config",children:y.jsx(fpe,{})}),y.jsx(ui,{value:"sync",children:y.jsx(ppe,{})})]})]})},gpe=wt.memo(mpe),x9=L.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=qr($n(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=n0($n(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=Ka($n(h=>({initialSettingsTab:h.initialSettingsTab,initialSettingsSubTab:h.initialSettingsSubTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[o,s]=L.useState(a||"general");L.useEffect(()=>{e&&s(a||"general")},[e,a]);const u=h=>{h||(t(),i())},c=h=>{s(h)},f=Ut("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(_w,{open:e,onOpenChange:u,children:y.jsxs(xw,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(Sw,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(kw,{children:"Settings"}),y.jsx(Cw,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsxs(Nw,{value:o,onValueChange:c,className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(Iw,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(li,{value:"general",className:f,children:"General"}),y.jsx(li,{value:"providers",className:f,children:"Providers & Models"}),n&&y.jsx(li,{value:"assistant",className:f,children:"Assistant"}),y.jsx(li,{value:"git",className:f,children:"Git"}),y.jsx(li,{value:"data",className:f,children:"Data"}),y.jsx(li,{value:"mods",className:f,children:"Mods"}),r.map(h=>y.jsx(li,{value:h.id,className:f,children:h.title},h.id))]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(ui,{value:"general",children:y.jsx(Khe,{})}),y.jsx(ui,{value:"providers",className:"data-[state=inactive]:hidden",children:y.jsx(cpe,{})}),n&&y.jsx(ui,{value:"assistant",children:y.jsx(Yhe,{})}),y.jsx(ui,{value:"git",className:"h-full",children:y.jsx(gpe,{})}),y.jsx(ui,{value:"data",children:y.jsx(Jhe,{})}),y.jsx(ui,{value:"mods",children:y.jsx(tpe,{})}),r.map(h=>y.jsx(ui,{value:h.id,children:wt.isValidElement(h.component)?h.component:typeof h.component=="function"?y.jsx(h.component,{}):null},h.id))]})]}),y.jsx(Ew,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Lt,{variant:"outline",onClick:()=>u(!1),children:"Close"})})]})})});x9.displayName="SettingsModalComponent";const ype=x9;function bpe(){const e=ta.getState().registerChatControl,t=Ka.getState().toggleChatControlPanel,n=Ka.getState().setInitialSettingsTabs,r=()=>{const i=(o,s)=>{n(null,null),t("settingsModal",!0)};return y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(e7,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"Settings"})]})})},a=()=>{const i=Ka.getState().isChatControlPanelOpen.settingsModal??!1,o=()=>t("settingsModal",!1);return y.jsx(ype,{isOpen:i,onClose:o})};e({id:"core-settings-trigger",panel:"header",order:1e3,status:()=>"ready",renderer:()=>wt.createElement(r),settingsRenderer:()=>wt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function vpe(){const e=ta.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=Ka.getState();return y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?y.jsx(Uz,{className:"h-4 w-4"}):y.jsx(Bz,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"header",order:10,status:()=>"ready",renderer:()=>wt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}var Lw="Popover",[S9,Dge]=Ri(Lw,[Yu]),J0=Yu(),[wpe,lc]=S9(Lw),E9=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=J0(t),u=L.useRef(null),[c,f]=L.useState(!1),[h,m]=Os({prop:r,defaultProp:a??!1,onChange:i,caller:Lw});return y.jsx(Ov,{...s,children:y.jsx(wpe,{scope:t,contentId:Cs(),triggerRef:u,open:h,onOpenChange:m,onOpenToggle:L.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:L.useCallback(()=>f(!0),[]),onCustomAnchorRemove:L.useCallback(()=>f(!1),[]),modal:o,children:n})})};E9.displayName=Lw;var k9="PopoverAnchor",_pe=L.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=lc(k9,n),i=J0(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return L.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(h0,{...i,...r,ref:t})});_pe.displayName=k9;var C9="PopoverTrigger",A9=L.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=lc(C9,n),i=J0(n),o=xn(t,a.triggerRef),s=y.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":O9(a.open),...r,ref:o,onClick:zt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(h0,{asChild:!0,...i,children:s})});A9.displayName=C9;var lC="PopoverPortal",[xpe,Spe]=S9(lC,{forceMount:void 0}),T9=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=lc(lC,t);return y.jsx(xpe,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(gh,{asChild:!0,container:a,children:r})})})};T9.displayName=lC;var uh="PopoverContent",R9=L.forwardRef((e,t)=>{const n=Spe(uh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=lc(uh,e.__scopePopover);return y.jsx(Na,{present:r||i.open,children:i.modal?y.jsx(kpe,{...a,ref:t}):y.jsx(Cpe,{...a,ref:t})})});R9.displayName=uh;var Epe=Nu("PopoverContent.RemoveScroll"),kpe=L.forwardRef((e,t)=>{const n=lc(uh,e.__scopePopover),r=L.useRef(null),a=xn(t,r),i=L.useRef(!1);return L.useEffect(()=>{const o=r.current;if(o)return vw(o)},[]),y.jsx(Y0,{as:Epe,allowPinchZoom:!0,children:y.jsx(N9,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zt(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:zt(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,c=s.button===2||u;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:zt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Cpe=L.forwardRef((e,t)=>{const n=lc(uh,e.__scopePopover),r=L.useRef(!1),a=L.useRef(!1);return y.jsx(N9,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),N9=L.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:f,...h}=e,m=lc(uh,n),g=J0(n);return yw(),y.jsx(Z0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(hh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:y.jsx(jv,{"data-state":O9(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),I9="PopoverClose",Ape=L.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=lc(I9,n);return y.jsx(an.button,{type:"button",...r,ref:t,onClick:zt(e.onClick,()=>a.onOpenChange(!1))})});Ape.displayName=I9;var Tpe="PopoverArrow",Rpe=L.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=J0(n);return y.jsx(Dv,{...a,...r,ref:t})});Rpe.displayName=Tpe;function O9(e){return e?"open":"closed"}var Npe=E9,Ipe=A9,Ope=T9,jpe=R9;function uC({...e}){return y.jsx(Npe,{"data-slot":"popover",...e})}function cC({...e}){return y.jsx(Ipe,{"data-slot":"popover-trigger",...e})}function dC({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(Ope,{children:y.jsx(jpe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const Wc=Ds(Ms(e=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,setModelId:t=>e({modelId:t}),setTemperature:t=>e({temperature:t}),setMaxTokens:t=>e({maxTokens:t}),setTopP:t=>e({topP:t}),setTopK:t=>e({topK:t}),setPresencePenalty:t=>e({presencePenalty:t}),setFrequencyPenalty:t=>e({frequencyPenalty:t}),initializePromptState:t=>{console.log("[PromptStateStore] Initializing with:",t),e({modelId:t.modelId,temperature:t.temperature,maxTokens:t.maxTokens,topP:t.topP,topK:t.topK,presencePenalty:t.presencePenalty,frequencyPenalty:t.frequencyPenalty})},resetPromptState:()=>{console.log("[PromptStateStore] Resetting state."),e({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null})}})));function Dpe(){const e=ta.getState().registerPromptControl,t=()=>{const{temperature:r,setTemperature:a,topP:i,setTopP:o,maxTokens:s,setMaxTokens:u,topK:c,setTopK:f,presencePenalty:h,setPresencePenalty:m,frequencyPenalty:g,setFrequencyPenalty:v}=Wc.getState(),w=qr.getState(),_={temperature:r,setTemperature:a,topP:i,setTopP:o,maxTokens:s,setMaxTokens:u,topK:c,setTopK:f,presencePenalty:h,setPresencePenalty:m,frequencyPenalty:g,setFrequencyPenalty:v,defaultTemperature:w.temperature,defaultTopP:w.topP,defaultMaxTokens:w.maxTokens,defaultTopK:w.topK,defaultPresencePenalty:w.presencePenalty,defaultFrequencyPenalty:w.frequencyPenalty};return y.jsx(g9,{..._})},n=()=>{const r=Qn.getState().status==="streaming",{temperature:a,topP:i,maxTokens:o,topK:s,presencePenalty:u,frequencyPenalty:c}=Wc.getState(),f=qr.getState(),h=a!==f.temperature||i!==f.topP||o!==f.maxTokens||s!==f.topK||u!==f.presencePenalty||c!==f.frequencyPenalty;return y.jsxs(uC,{children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(cC,{asChild:!0,children:y.jsx(Lt,{variant:h?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:r,"aria-label":"Adjust Parameters",children:y.jsx(n7,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:"Parameters"})]})}),y.jsx(dC,{className:"w-auto p-0",align:"start",children:y.jsx(t,{})})]})};e({id:"core-parameters",order:30,status:()=>"ready",triggerRenderer:()=>wt.createElement(n),getParameters:()=>{const{temperature:r,topP:a,maxTokens:i,topK:o,presencePenalty:s,frequencyPenalty:u}=Wc.getState();return{...r!==null&&{temperature:r},...a!==null&&{top_p:a},...i!==null&&{max_tokens:i},...o!==null&&{top_k:o},...s!==null&&{presence_penalty:s},...u!==null&&{frequency_penalty:u}}},show:()=>qr.getState().enableAdvancedSettings}),console.log("[Function] Registered Core Parameter Control")}const j9=20,Mpe=j9*1024*1024;function Ppe(){const e=ta.getState().registerPromptControl,t=()=>{const r=L.useRef(null),a=sm.getState().addAttachedFile,i=Qn.getState().status==="streaming",o=L.useCallback(async u=>{const c=u.target.files;if(c){for(const f of Array.from(c)){if(f.size>Mpe){ut.error(`File "${f.name}" exceeds the ${j9}MB limit.`);continue}try{let h={};const m=Vj(f.name,f.type),g=f.type.startsWith("image/");if(m)h.contentText=await f.text();else if(g){const v=new FileReader,w=new Promise((x,S)=>{v.onload=()=>x(v.result),v.onerror=E=>S(E)});v.readAsDataURL(f);const _=await w;_&&_.includes(",")?h.contentBase64=_.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${f.name}`)}else console.log(`File type ${f.type} (Name: ${f.name}) not directly processed for content storage in InputStore.`);a({source:"direct",name:f.name,type:f.type||"application/octet-stream",size:f.size,...h})}catch(h){console.error(`Error processing file ${f.name}:`,h),ut.error(`Failed to process file "${f.name}": ${h instanceof Error?h.message:String(h)}`)}}u.target&&(u.target.value="")}},[a]),s=()=>{var u;(u=r.current)==null||u.click()};return y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:r,onChange:o,multiple:!0,className:"hidden",disabled:i}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{type:"button",variant:"ghost",size:"icon",onClick:s,disabled:i,className:"h-8 w-8","aria-label":"Attach Files",children:y.jsx(m6,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Attach Files"})]})})]})},n=()=>{const{attachedFilesMetadata:r,removeAttachedFile:a}=sm.getState(),i=Qn.getState().status==="streaming";return r.length===0?null:y.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:r.map(o=>y.jsx(PM,{fileMeta:o,onRemove:a,isReadOnly:i},o.id))})};e({id:"core-file-attachment",order:20,triggerRenderer:()=>wt.createElement(t),renderer:()=>wt.createElement(n),clearOnSubmit:()=>{},show:()=>!0}),console.log("[Function] Registered Core File Attachment Control")}const Fpe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Oo,{className:"bg-muted/30",children:[y.jsx(Fr,{className:"px-2 py-1"}),y.jsx(Fr,{className:"px-2 py-1",children:y.jsx(o0,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(Fr,{className:"py-1 px-2",colSpan:3,children:y.jsx(nr,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(Fr,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(id,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Create (Enter)"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(Zu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var $w="Checkbox",[Lpe,Mge]=Ri($w),[$pe,Bpe]=Lpe($w),D9=L.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=L.useState(null),v=xn(t,C=>g(C)),w=L.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Os({prop:a,defaultProp:i??!1,onChange:c,caller:$w}),E=L.useRef(x);return L.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const A=()=>S(E.current);return C.addEventListener("reset",A),()=>C.removeEventListener("reset",A)}},[m,S]),y.jsxs($pe,{scope:n,state:x,disabled:s,children:[y.jsx(an.button,{type:"button",role:"checkbox","aria-checked":Ru(x)?"mixed":x,"aria-required":o,"data-state":L9(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onKeyDown:zt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:zt(e.onClick,C=>{S(A=>Ru(A)?!0:!A),_&&(w.current=C.isPropagationStopped(),w.current||C.stopPropagation())})}),_&&y.jsx(F9,{control:m,bubbles:!w.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Ru(i)?!1:i})]})});D9.displayName=$w;var M9="CheckboxIndicator",P9=L.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Bpe(M9,n);return y.jsx(Na,{present:r||Ru(i.state)||i.state===!0,children:y.jsx(an.span,{"data-state":L9(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});P9.displayName=M9;var zpe="CheckboxBubbleInput",F9=L.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=L.useRef(null),u=xn(s,o),c=Ow(n),f=Iv(t);L.useEffect(()=>{const m=s.current;if(!m)return;const g=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&w){const _=new Event("click",{bubbles:r});m.indeterminate=Ru(n),w.call(m,Ru(n)?!1:n),m.dispatchEvent(_)}},[c,n,r]);const h=L.useRef(Ru(n)?!1:n);return y.jsx(an.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});F9.displayName=zpe;function Ru(e){return e==="indeterminate"}function L9(e){return Ru(e)?"indeterminate":e?"checked":"unchecked"}var Upe=D9,qpe=P9;function Hpe({className:e,...t}){return y.jsx(Upe,{"data-slot":"checkbox",className:Ut("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(qpe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(id,{className:"size-3.5"})})})}var rE=["Enter"," "],Vpe=["ArrowDown","PageUp","Home"],$9=["ArrowUp","PageDown","End"],Gpe=[...Vpe,...$9],Wpe={ltr:[...rE,"ArrowRight"],rtl:[...rE,"ArrowLeft"]},Kpe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Q0="Menu",[a0,Zpe,Ype]=Aw(Q0),[Sd,B9]=Ri(Q0,[Ype,Yu,Tw]),Bw=Yu(),z9=Tw(),[Xpe,Ed]=Sd(Q0),[Jpe,eg]=Sd(Q0),U9=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=Bw(t),[u,c]=L.useState(null),f=L.useRef(!1),h=Ea(i),m=Oh(a);return L.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),y.jsx(Ov,{...s,children:y.jsx(Xpe,{scope:t,open:n,onOpenChange:h,content:u,onContentChange:c,children:y.jsx(Jpe,{scope:t,onClose:L.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};U9.displayName=Q0;var Qpe="MenuAnchor",fC=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Bw(n);return y.jsx(h0,{...a,...r,ref:t})});fC.displayName=Qpe;var hC="MenuPortal",[eme,q9]=Sd(hC,{forceMount:void 0}),H9=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Ed(hC,t);return y.jsx(eme,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(gh,{asChild:!0,container:a,children:r})})})};H9.displayName=hC;var go="MenuContent",[tme,pC]=Sd(go),V9=L.forwardRef((e,t)=>{const n=q9(go,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Ed(go,e.__scopeMenu),o=eg(go,e.__scopeMenu);return y.jsx(a0.Provider,{scope:e.__scopeMenu,children:y.jsx(Na,{present:r||i.open,children:y.jsx(a0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(nme,{...a,ref:t}):y.jsx(rme,{...a,ref:t})})})})}),nme=L.forwardRef((e,t)=>{const n=Ed(go,e.__scopeMenu),r=L.useRef(null),a=xn(t,r);return L.useEffect(()=>{const i=r.current;if(i)return vw(i)},[]),y.jsx(mC,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:zt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rme=L.forwardRef((e,t)=>{const n=Ed(go,e.__scopeMenu);return y.jsx(mC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ame=Nu("MenuContent.ScrollLock"),mC=L.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...w}=e,_=Ed(go,n),x=eg(go,n),S=Bw(n),E=z9(n),C=Zpe(n),[A,j]=L.useState(null),O=L.useRef(null),N=xn(t,O,_.onContentChange),z=L.useRef(0),H=L.useRef(""),Q=L.useRef(0),P=L.useRef(null),Z=L.useRef("right"),V=L.useRef(0),te=v?Y0:L.Fragment,ae=v?{as:ame,allowPinchZoom:!0}:void 0,re=ne=>{var Fe,Oe;const G=H.current+ne,X=C().filter(Re=>!Re.disabled),oe=document.activeElement,ye=(Fe=X.find(Re=>Re.ref.current===oe))==null?void 0:Fe.textValue,we=X.map(Re=>Re.textValue),fe=gme(we,G,ye),Me=(Oe=X.find(Re=>Re.textValue===fe))==null?void 0:Oe.ref.current;(function Re(ze){H.current=ze,window.clearTimeout(z.current),ze!==""&&(z.current=window.setTimeout(()=>Re(""),1e3))})(G),Me&&setTimeout(()=>Me.focus())};L.useEffect(()=>()=>window.clearTimeout(z.current),[]),yw();const Y=L.useCallback(ne=>{var X,oe;return Z.current===((X=P.current)==null?void 0:X.side)&&bme(ne,(oe=P.current)==null?void 0:oe.area)},[]);return y.jsx(tme,{scope:n,searchRef:H,onItemEnter:L.useCallback(ne=>{Y(ne)&&ne.preventDefault()},[Y]),onItemLeave:L.useCallback(ne=>{var G;Y(ne)||((G=O.current)==null||G.focus(),j(null))},[Y]),onTriggerLeave:L.useCallback(ne=>{Y(ne)&&ne.preventDefault()},[Y]),pointerGraceTimerRef:Q,onPointerGraceIntentChange:L.useCallback(ne=>{P.current=ne},[]),children:y.jsx(te,{...ae,children:y.jsx(Z0,{asChild:!0,trapped:a,onMountAutoFocus:zt(i,ne=>{var G;ne.preventDefault(),(G=O.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(hh,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:y.jsx(dF,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:j,onEntryFocus:zt(u,ne=>{x.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(jv,{role:"menu","aria-orientation":"vertical","data-state":sL(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...w,ref:N,style:{outline:"none",...w.style},onKeyDown:zt(w.onKeyDown,ne=>{const X=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,oe=ne.ctrlKey||ne.altKey||ne.metaKey,ye=ne.key.length===1;X&&(ne.key==="Tab"&&ne.preventDefault(),!oe&&ye&&re(ne.key));const we=O.current;if(ne.target!==we||!Gpe.includes(ne.key))return;ne.preventDefault();const Me=C().filter(Fe=>!Fe.disabled).map(Fe=>Fe.ref.current);$9.includes(ne.key)&&Me.reverse(),pme(Me)}),onBlur:zt(e.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(z.current),H.current="")}),onPointerMove:zt(e.onPointerMove,i0(ne=>{const G=ne.target,X=V.current!==ne.clientX;if(ne.currentTarget.contains(G)&&X){const oe=ne.clientX>V.current?"right":"left";Z.current=oe,V.current=ne.clientX}}))})})})})})})});V9.displayName=go;var ime="MenuGroup",gC=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{role:"group",...r,ref:t})});gC.displayName=ime;var ome="MenuLabel",G9=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{...r,ref:t})});G9.displayName=ome;var fv="MenuItem",B4="menu.itemSelect",zw=L.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=L.useRef(null),o=eg(fv,e.__scopeMenu),s=pC(fv,e.__scopeMenu),u=xn(t,i),c=L.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(B4,{bubbles:!0,cancelable:!0});h.addEventListener(B4,g=>r==null?void 0:r(g),{once:!0}),Gj(h,m),m.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(W9,{...a,ref:u,disabled:n,onClick:zt(e.onClick,f),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),c.current=!0},onPointerUp:zt(e.onPointerUp,h=>{var m;c.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:zt(e.onKeyDown,h=>{const m=s.searchRef.current!=="";n||m&&h.key===" "||rE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});zw.displayName=fv;var W9=L.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=pC(fv,n),s=z9(n),u=L.useRef(null),c=xn(t,u),[f,h]=L.useState(!1),[m,g]=L.useState("");return L.useEffect(()=>{const v=u.current;v&&g((v.textContent??"").trim())},[i.children]),y.jsx(a0.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:y.jsx(fF,{asChild:!0,...s,focusable:!r,children:y.jsx(an.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:zt(e.onPointerMove,i0(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:zt(e.onPointerLeave,i0(v=>o.onItemLeave(v))),onFocus:zt(e.onFocus,()=>h(!0)),onBlur:zt(e.onBlur,()=>h(!1))})})})}),sme="MenuCheckboxItem",K9=L.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(Q9,{scope:e.__scopeMenu,checked:n,children:y.jsx(zw,{role:"menuitemcheckbox","aria-checked":hv(n)?"mixed":n,...a,ref:t,"data-state":bC(n),onSelect:zt(a.onSelect,()=>r==null?void 0:r(hv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});K9.displayName=sme;var Z9="MenuRadioGroup",[lme,ume]=Sd(Z9,{value:void 0,onValueChange:()=>{}}),Y9=L.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ea(r);return y.jsx(lme,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(gC,{...a,ref:t})})});Y9.displayName=Z9;var X9="MenuRadioItem",J9=L.forwardRef((e,t)=>{const{value:n,...r}=e,a=ume(X9,e.__scopeMenu),i=n===a.value;return y.jsx(Q9,{scope:e.__scopeMenu,checked:i,children:y.jsx(zw,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":bC(i),onSelect:zt(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});J9.displayName=X9;var yC="MenuItemIndicator",[Q9,cme]=Sd(yC,{checked:!1}),eL=L.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=cme(yC,n);return y.jsx(Na,{present:r||hv(i.checked)||i.checked===!0,children:y.jsx(an.span,{...a,ref:t,"data-state":bC(i.checked)})})});eL.displayName=yC;var dme="MenuSeparator",tL=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});tL.displayName=dme;var fme="MenuArrow",nL=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Bw(n);return y.jsx(Dv,{...a,...r,ref:t})});nL.displayName=fme;var hme="MenuSub",[Pge,rL]=Sd(hme),Jp="MenuSubTrigger",aL=L.forwardRef((e,t)=>{const n=Ed(Jp,e.__scopeMenu),r=eg(Jp,e.__scopeMenu),a=rL(Jp,e.__scopeMenu),i=pC(Jp,e.__scopeMenu),o=L.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,c={__scopeMenu:e.__scopeMenu},f=L.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return L.useEffect(()=>f,[f]),L.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),u(null)}},[s,u]),y.jsx(fC,{asChild:!0,...c,children:y.jsx(W9,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":sL(n.open),...e,ref:iE(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:zt(e.onPointerMove,i0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:zt(e.onPointerLeave,i0(h=>{var g,v;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const w=(v=n.content)==null?void 0:v.dataset.side,_=w==="right",x=_?-5:5,S=m[_?"left":"right"],E=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:S,y:m.bottom}],side:w}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:zt(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Wpe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});aL.displayName=Jp;var iL="MenuSubContent",oL=L.forwardRef((e,t)=>{const n=q9(go,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Ed(go,e.__scopeMenu),o=eg(go,e.__scopeMenu),s=rL(iL,e.__scopeMenu),u=L.useRef(null),c=xn(t,u);return y.jsx(a0.Provider,{scope:e.__scopeMenu,children:y.jsx(Na,{present:r||i.open,children:y.jsx(a0.Slot,{scope:e.__scopeMenu,children:y.jsx(mC,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=u.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:zt(e.onFocusOutside,f=>{f.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:zt(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:zt(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),m=Kpe[o.dir].includes(f.key);h&&m&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),f.preventDefault())})})})})})});oL.displayName=iL;function sL(e){return e?"open":"closed"}function hv(e){return e==="indeterminate"}function bC(e){return hv(e)?"indeterminate":e?"checked":"unchecked"}function pme(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function mme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function gme(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=mme(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function yme(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function bme(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return yme(n,t)}function i0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var vme=U9,wme=fC,_me=H9,xme=V9,Sme=gC,Eme=G9,kme=zw,Cme=K9,Ame=Y9,Tme=J9,Rme=eL,Nme=tL,Ime=nL,Ome=aL,jme=oL,vC="ContextMenu",[Dme,Fge]=Ri(vC,[B9]),gi=B9(),[Mme,lL]=Dme(vC),uL=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=L.useState(!1),u=gi(t),c=Ea(r),f=L.useCallback(h=>{s(h),c(h)},[c]);return y.jsx(Mme,{scope:t,open:o,onOpenChange:f,modal:i,children:y.jsx(vme,{...u,dir:a,open:o,onOpenChange:f,modal:i,children:n})})};uL.displayName=vC;var cL="ContextMenuTrigger",dL=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=lL(cL,n),o=gi(n),s=L.useRef({x:0,y:0}),u=L.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),c=L.useRef(0),f=L.useCallback(()=>window.clearTimeout(c.current),[]),h=m=>{s.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return L.useEffect(()=>f,[f]),L.useEffect(()=>void(r&&f()),[r,f]),y.jsxs(y.Fragment,{children:[y.jsx(wme,{...o,virtualRef:u}),y.jsx(an.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:zt(e.onContextMenu,m=>{f(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:zt(e.onPointerDown,qy(m=>{f(),c.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:zt(e.onPointerMove,qy(f)),onPointerCancel:r?e.onPointerCancel:zt(e.onPointerCancel,qy(f)),onPointerUp:r?e.onPointerUp:zt(e.onPointerUp,qy(f))})]})});dL.displayName=cL;var Pme="ContextMenuPortal",fL=e=>{const{__scopeContextMenu:t,...n}=e,r=gi(t);return y.jsx(_me,{...r,...n})};fL.displayName=Pme;var hL="ContextMenuContent",pL=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=lL(hL,n),i=gi(n),o=L.useRef(!1);return y.jsx(xme,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var u;(u=e.onInteractOutside)==null||u.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pL.displayName=hL;var Fme="ContextMenuGroup",Lme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Sme,{...a,...r,ref:t})});Lme.displayName=Fme;var $me="ContextMenuLabel",Bme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Eme,{...a,...r,ref:t})});Bme.displayName=$me;var zme="ContextMenuItem",mL=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(kme,{...a,...r,ref:t})});mL.displayName=zme;var Ume="ContextMenuCheckboxItem",qme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Cme,{...a,...r,ref:t})});qme.displayName=Ume;var Hme="ContextMenuRadioGroup",Vme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Ame,{...a,...r,ref:t})});Vme.displayName=Hme;var Gme="ContextMenuRadioItem",Wme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Tme,{...a,...r,ref:t})});Wme.displayName=Gme;var Kme="ContextMenuItemIndicator",Zme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Rme,{...a,...r,ref:t})});Zme.displayName=Kme;var Yme="ContextMenuSeparator",gL=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Nme,{...a,...r,ref:t})});gL.displayName=Yme;var Xme="ContextMenuArrow",Jme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Ime,{...a,...r,ref:t})});Jme.displayName=Xme;var Qme="ContextMenuSubTrigger",e0e=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Ome,{...a,...r,ref:t})});e0e.displayName=Qme;var t0e="ContextMenuSubContent",n0e=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(jme,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});n0e.displayName=t0e;function qy(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var r0e=uL,a0e=dL,i0e=fL,o0e=pL,s0e=mL,l0e=gL;function u0e({...e}){return y.jsx(r0e,{"data-slot":"context-menu",...e})}function c0e({...e}){return y.jsx(a0e,{"data-slot":"context-menu-trigger",...e})}function d0e({className:e,...t}){return y.jsx(i0e,{children:y.jsx(o0e,{"data-slot":"context-menu-content",className:Ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function fl({className:e,inset:t,variant:n="default",...r}){return y.jsx(s0e,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Ut("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function z4({className:e,...t}){return y.jsx(l0e,{"data-slot":"context-menu-separator",className:Ut("bg-border -mx-1 my-1 h-px",e),...t})}const f0e=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:m,handleDelete:g,setNewName:v,renameInputRef:w,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const A=Q=>{Q.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},j=Q=>{Q.key==="Enter"?h():Q.key==="Escape"&&f()},O=e.type==="folder",N=O?r?pz:o0:fz,z=O?r?"text-green-400":"text-yellow-400":"text-blue-400",H=y.jsxs(Oo,{className:Ut("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:A,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(Fr,{className:"px-2 py-1",children:y.jsx(Hpe,{checked:n,onCheckedChange:Q=>u(!!Q,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||O})}),y.jsx(Fr,{className:"px-2 py-1",children:y.jsx(N,{className:Ut("h-5 w-5",z)})}),y.jsx(Fr,{className:"py-1 px-2",children:t?y.jsx(nr,{ref:w,value:a,onChange:Q=>v(Q.target.value),onBlur:h,onKeyDown:j,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:Q=>Q.stopPropagation(),disabled:i}):y.jsx("span",{className:Ut("truncate",O&&"cursor-pointer hover:underline"),title:e.name,onClick:Q=>{O&&(Q.stopPropagation(),s(e))},children:e.name})}),y.jsx(Fr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?zb(e.size):""}),y.jsx(Fr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(Fr,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:Ut("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:Q=>{Q.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(id,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Save (Enter)"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),f()},"aria-label":"Cancel edit",disabled:i,children:y.jsx(Zu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Cancel (Esc)"})]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||o,children:y.jsx(VS,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Rename"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),m(e)},"aria-label":O?"Download folder as ZIP":"Download file",disabled:i,children:y.jsx(nb,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:O?"Download folder (.zip)":"Download file"})]})}),y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:Q=>{Q.stopPropagation(),g(e)},"aria-label":`Delete ${O?"folder":"file"}`,disabled:i,children:y.jsx(Iu,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})})})]},e.id);return O?y.jsxs(u0e,{children:[y.jsx(c0e,{disabled:t||i,asChild:!0,children:H}),y.jsxs(d0e,{children:[y.jsx(fl,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(z4,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(fl,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(Sz,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(fl,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(_z,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(fl,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(h6,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(fl,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(Iz,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(fl,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(nm,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(z4,{}),y.jsxs(fl,{onSelect:()=>c(e),disabled:i,children:[y.jsx(VS,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(fl,{onSelect:()=>m(e),disabled:i,children:[y.jsx(nb,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(fl,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(Iu,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):H},h0e=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:w,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:A,handleGitPull:j,handleGitCommit:O,handleGitPush:N,handleGitStatus:z})=>{const H=L.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx("div",{className:"relative h-full",children:y.jsxs(iC,{className:"w-full text-sm",children:[y.jsx(oC,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Oo,{className:"hover:bg-card",children:[y.jsx(Ga,{className:"w-[40px] px-2"}),y.jsx(Ga,{className:"w-[40px] px-2"}),y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{className:"w-[100px] text-right",children:"Size"}),y.jsx(Ga,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(Ga,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(sC,{children:[r&&y.jsx(Fpe,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:o}),H.map(Q=>{const P=t===Q.path,Z=i.has(Q.id),V=C[Q.path]??!1;return y.jsx(f0e,{entry:Q,isEditingThis:P,isChecked:Z,isGitRepo:V,newName:P?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:v,handleDelete:w,setNewName:_,renameInputRef:S,handleGitInit:A,handleGitPull:j,handleGitCommit:O,handleGitPush:N,handleGitStatus:z},Q.id)}),e.length===0&&!r&&!o&&y.jsx(Oo,{children:y.jsx(Fr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},p0e=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:u,startCreatingFolder:c,handleUploadClick:f,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:v,fileInputRef:w,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:w,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(Az,{className:"h-4 w-4"})}),y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(yz,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(mv,{className:"h-4 w-4"})}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(lE,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),f()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(f6,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(o0,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(az,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(nm,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(zB,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),m0e=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:u})=>y.jsx(_w,{open:e,onOpenChange:t,children:y.jsxs(xw,{children:[y.jsxs(Sw,{children:[y.jsx(kw,{children:"Clone Git Repository"}),y.jsxs(Cw,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:u}),"."]})]}),y.jsxs("div",{className:"grid gap-4 py-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(nr,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(nr,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]}),y.jsxs(Ew,{children:[y.jsx(Lt,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),y.jsx(Lt,{onClick:s,disabled:o||!n.trim(),children:o?y.jsxs(y.Fragment,{children:[y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Cloning..."]}):"Clone"})]})]})}),g0e=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(_w,{open:e,onOpenChange:t,children:y.jsxs(xw,{children:[y.jsxs(Sw,{children:[y.jsx(kw,{children:"Commit Changes"}),y.jsxs(Cw,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]})]}),y.jsx("div",{className:"grid gap-4 py-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(nr,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})}),y.jsxs(Ew,{children:[y.jsx(Lt,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),y.jsx(Lt,{onClick:o,disabled:i||!r.trim(),children:i?y.jsxs(y.Fragment,{children:[y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Committing..."]}):"Commit"})]})]})}),wC=L.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:o,createDirectory:s,uploadFiles:u,deleteNodes:c,renameNode:f,setCurrentPath:h,rootId:m,selectFile:g,deselectFile:v,selectedFileIds:w,vfsKey:_,configuredVfsKey:x,initializingKey:S,_setError:E,_setOperationLoading:C,findNodeByPath:A,initializeVFS:j}=Gi($n(ht=>({nodes:ht.nodes,childrenMap:ht.childrenMap,currentParentId:ht.currentParentId,selectedFileIds:ht.selectedFileIds,loading:ht.loading,operationLoading:ht.operationLoading,error:ht.error,fetchNodes:ht.fetchNodes,createDirectory:ht.createDirectory,uploadFiles:ht.uploadFiles,deleteNodes:ht.deleteNodes,renameNode:ht.renameNode,selectFile:ht.selectFile,deselectFile:ht.deselectFile,setCurrentPath:ht.setCurrentPath,rootId:ht.rootId,vfsKey:ht.vfsKey,configuredVfsKey:ht.configuredVfsKey,initializingKey:ht.initializingKey,_setError:ht._setError,_setOperationLoading:ht._setOperationLoading,findNodeByPath:ht.findNodeByPath,initializeVFS:ht.initializeVFS}))),[O,N]=L.useState(""),[z,H]=L.useState(null),[Q,P]=L.useState(!1),[Z,V]=L.useState(""),[te,ae]=L.useState({}),[re,Y]=L.useState(!1),[ne,G]=L.useState(""),[X,oe]=L.useState(""),[ye,we]=L.useState(!1),[fe,Me]=L.useState(!1),[Fe,Oe]=L.useState(null),[Re,ze]=L.useState(""),[He,Te]=L.useState(!1),[Ce,B]=L.useState({}),ke=L.useRef(null),Ae=L.useRef(null),ce=L.useRef(null),se=L.useRef(null),J=L.useRef(null),xe=n?e[n]:null,Pe=xe?xe.path:"/",Ze=(t[n||m||""]||[]).map(ht=>e[ht]).filter(ht=>!!ht).sort((ht,Ct)=>ht.type==="folder"&&Ct.type==="file"?-1:ht.type==="file"&&Ct.type==="folder"?1:ht.name.localeCompare(Ct.name)),Et=L.useMemo(()=>Ze.filter(ht=>ht.type==="folder").map(ht=>ht.path),[Ze]),at=r||S!==null||_!==x,_t=a||ye||He||Object.values(Ce).some(Boolean);L.useEffect(()=>{n!==null&&!t[n]&&!at&&x===_?o(n):n===null&&m&&!t[m]&&!at&&x===_&&o(m)},[n,t,m,at,o,x,_]),L.useEffect(()=>{var ht,Ct;z&&((ht=se.current)==null||ht.focus(),(Ct=se.current)==null||Ct.select())},[z]),L.useEffect(()=>{var ht;Q&&((ht=J.current)==null||ht.focus())},[Q]),L.useEffect(()=>{(async()=>{if(at||Et.length===0)return;const Ct={};let Ot=!1;for(const Zt of Et)try{const En=await Lne(Zt);te[Zt]!==En&&(Ct[Zt]=En,Ot=!0)}catch(En){console.error(`Error checking git status for ${Zt}:`,En),te[Zt]!==!1&&(Ct[Zt]=!1,Ot=!0)}Ot&&ae(Zt=>({...Zt,...Ct}))})()},[Et,at,te]);const Nt=L.useCallback(async(ht,Ct)=>{if(!(_t||at)){Ct!==!1&&C(!0),E(null);try{await ht()}catch(Ot){console.error("[FileManager Operation Error]:",Ot)}finally{Ct!==!1&&C(!1)}}},[_t,at,E,C]),Rt=L.useCallback(ht=>{_t||at||z||ht.type==="folder"&&Nt(()=>h(ht.path),!1)},[_t,at,z,h,Nt]),Kt=L.useCallback(()=>{if(_t||at||Pe==="/")return;const ht=Xv(Pe);Nt(()=>h(ht),!1)},[_t,at,Pe,h,Nt]),pe=L.useCallback(()=>{_t||at||Pe==="/"||Nt(()=>h("/"),!1)},[_t,at,Pe,h,Nt]),R=L.useCallback(()=>{at||Nt(()=>o(n),!1)},[Nt,o,n,at]),q=L.useCallback((ht,Ct)=>{const Ot=e[Ct];Ot&&Ot.type==="file"?ht?g(Ct):v(Ct):Ot&&Ot.type==="folder"&&ut.info("Folders cannot be attached to the prompt.")},[g,v,e]),de=L.useCallback(ht=>{_t||at||Q||(H(ht.path),N(ht.name),P(!1))},[_t,at,Q]),Ie=L.useCallback(()=>{H(null),N("")},[]),be=L.useCallback(async()=>{if(!z||!O.trim()){Ie();return}const ht=A(z);ht&&ht.name!==O.trim()&&await Nt(()=>f(ht.id,O.trim())),Ie()},[z,O,f,Ie,A,Nt]),Ee=L.useCallback(()=>{_t||at||z||(P(!0),V(""),H(null))},[_t,at,z]),le=L.useCallback(()=>{P(!1),V("")},[]),ft=L.useCallback(async()=>{if(!Z.trim()){le();return}await Nt(()=>s(n,Z.trim())),le()},[Z,s,n,le,Nt]),vt=()=>{var ht;return(ht=ke.current)==null?void 0:ht.click()},D=()=>{var ht;return(ht=Ae.current)==null?void 0:ht.click()},$e=()=>{var ht;return(ht=ce.current)==null?void 0:ht.click()},st=L.useCallback(async ht=>{const Ct=ht.target.files;Ct&&Ct.length>0&&(await Nt(()=>u(n,Ct)),ht.target&&(ht.target.value=""))},[u,n,Nt]),ge=L.useCallback(async ht=>{var Ot;const Ct=(Ot=ht.target.files)==null?void 0:Ot[0];Ct&&(await Nt(async()=>{await Bne(Ct,Pe),await o(n)}),ht.target&&(ht.target.value=""))},[Pe,o,n,Nt]),De=L.useCallback(async ht=>{window.confirm(`Delete ${ht.type} "${ht.name}"?${ht.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Nt(()=>c([ht.id]))},[c,Nt]),Je=L.useCallback(async ht=>{await Nt(async()=>{ht.type==="file"?await $ne(ht.path):await FI(`${ht.name}.zip`,ht.path)})},[Nt]),It=L.useCallback(async()=>{Ze.length!==0&&await Nt(async()=>{const ht=ea(Pe)||"root";await FI(`${ht}_export.zip`,Pe)})},[Pe,Ze.length,Nt]),me=L.useCallback(async(ht,Ct)=>{if(!(Ce[ht]||at||a)){B(Ot=>({...Ot,[ht]:!0})),E(null);try{await Ct()}catch(Ot){console.error(`[FileManager Git Op Error @ ${ht}]:`,Ot)}finally{B(Ot=>({...Ot,[ht]:!1}))}}},[E,Ce,at,a]),U=L.useCallback(ht=>{me(ht,async()=>{await NM(ht),ae(Ct=>({...Ct,[ht]:!0}))})},[me]),$=L.useCallback(ht=>{ut.info("Pulling default branch (auth not implemented yet)..."),me(ht,()=>rw(ht,"main"))},[me]),W=L.useCallback(ht=>{Oe(ht),ze(""),Me(!0)},[]),he=L.useCallback(ht=>{ut.info("Pushing default branch (auth not implemented yet)..."),me(ht,()=>Tk(ht,"main"))},[me]),Ne=L.useCallback(ht=>{me(ht,()=>IM(ht))},[me]),Ve=L.useCallback(()=>{G(""),oe(""),Y(!0)},[]),gt=L.useCallback(async()=>{if(!ne.trim()){ut.error("Repository URL cannot be empty.");return}we(!0),E(null);try{const ht=ea(ne.trim().replace(/\.git$/,""))||"cloned_repo",Ct=Om(Pe,ht);await RM(Ct,ne.trim(),X.trim()||void 0),Y(!1),await R()}catch{}finally{we(!1)}},[ne,X,Pe,E,R]),Gt=L.useCallback(async()=>{if(!Fe||!Re.trim()){ut.error("Commit message cannot be empty.");return}Te(!0),E(null);try{await Ak(Fe,Re.trim()),Me(!1)}catch{}finally{Te(!1)}},[Fe,Re,E]);return at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[y.jsx(Xn,{className:"h-8 w-8 animate-spin mb-2"}),y.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&y.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[y.jsxs("p",{children:["Error loading filesystem: ",i]}),y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>j(_||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):y.jsxs("div",{className:Ut("flex h-full flex-col bg-card text-card-foreground"),children:[y.jsx(p0e,{currentPath:Pe,isAnyLoading:_t||at,isOperationLoading:a,entries:Ze,editingPath:z,creatingFolder:Q,handleNavigateHome:pe,handleNavigateUp:Kt,handleRefresh:R,startCreatingFolder:Ee,handleUploadClick:vt,handleFolderUploadClick:D,handleArchiveUploadClick:$e,handleDownloadAll:It,handleCloneClick:Ve,fileInputRef:ke,folderInputRef:Ae,archiveInputRef:ce,handleFileChange:st,handleArchiveChange:ge}),y.jsx("div",{className:"flex-grow overflow-auto",children:y.jsx(h0e,{entries:Ze,editingPath:z,newName:O,creatingFolder:Q,newFolderName:Z,selectedFileIds:w,isOperationLoading:_t,handleNavigate:Rt,handleCheckboxChange:q,startEditing:de,cancelEditing:Ie,handleRename:be,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Je,handleDelete:De,setNewName:N,setNewFolderName:V,renameInputRef:se,newFolderInputRef:J,gitRepoStatus:te,handleGitInit:U,handleGitPull:$,handleGitCommit:W,handleGitPush:he,handleGitStatus:Ne})}),y.jsx(m0e,{isOpen:re,onOpenChange:Y,cloneRepoUrl:ne,setCloneRepoUrl:G,cloneBranch:X,setCloneBranch:oe,isCloning:ye,onSubmitClone:gt,currentPath:Pe}),y.jsx(g0e,{isOpen:fe,onOpenChange:Me,commitPath:Fe,commitMessage:Re,setCommitMessage:ze,isCommitting:He,onSubmitCommit:Gt})]})});wC.displayName="FileManager";const y0e=({vfsKey:e,selectedItemType:t})=>e==="orphan"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(O3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Shared VFS:"})," All chats ",y.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(O3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(o0,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null;function b0e(){const e=ta.getState().registerPromptControl,t=ta.getState().registerChatControl,n=sm.getState().addAttachedFile,r=()=>{const{toggleChatControlPanel:i,isChatControlPanelOpen:o}=Ka($n(g=>({toggleChatControlPanel:g.toggleChatControlPanel,isChatControlPanelOpen:g.isChatControlPanelOpen}))),{enableVfs:s,selectedFileIds:u,nodes:c,clearSelection:f}=Gi($n(g=>({enableVfs:g.enableVfs,selectedFileIds:g.selectedFileIds,nodes:g.nodes,clearSelection:g.clearSelection}))),h=o.vfs??!1,m=()=>{if(u.size===0){ut.info("No files selected in VFS to attach.");return}let g=0;u.forEach(v=>{const w=c[v];w&&w.type==="file"&&(n({source:"vfs",name:w.name,type:w.mimeType||"application/octet-stream",size:w.size,path:w.path}),g++)}),g>0&&(ut.success(`Attached ${g} file(s) from VFS to the next prompt.`),f())};return s?y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:Ut("h-8 w-8",h&&"bg-muted text-primary"),onClick:()=>i("vfs"),"aria-label":"Toggle Virtual File System",children:y.jsx(p6,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Virtual Filesystem"})]})}),u.size>0&&y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsxs(Lt,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:m,"aria-label":`Attach ${u.size} selected VFS file(s)`,children:[y.jsx(m6,{className:"h-4 w-4 mr-1"})," ","Attach (",u.size,")"]})}),y.jsx(Nn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},a=()=>{const i=Gi(s=>s.vfsKey),o=Ur(s=>s.selectedItemType);return y.jsxs("div",{className:"flex flex-col h-full w-[450px] border-l border-border bg-card",children:[y.jsx(y0e,{vfsKey:i,selectedItemType:o}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(wC,{})})]})};e({id:"core-vfs-prompt-trigger",order:25,show:()=>Gi.getState().enableVfs,triggerRenderer:()=>wt.createElement(r),getParameters:void 0,getMetadata:void 0,clearOnSubmit:void 0}),t({id:"core-vfs-panel-trigger",panel:"drawer_right",order:10,show:()=>Ka.getState().isChatControlPanelOpen.vfs??!1,renderer:()=>wt.createElement(a),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control")}function v0e(){const e=ta.getState().registerPromptControl,t=()=>{const{selectedItemId:n,selectedItemType:r,getConversationById:a,syncRepos:i,linkConversationToRepo:o,syncConversation:s,conversationSyncStatus:u}=Ur($n(O=>({selectedItemId:O.selectedItemId,selectedItemType:O.selectedItemType,getConversationById:O.getConversationById,syncRepos:O.syncRepos,linkConversationToRepo:O.linkConversationToRepo,syncConversation:O.syncConversation,conversationSyncStatus:O.conversationSyncStatus}))),c=Qn.getState().status==="streaming",[f,h]=L.useState(!1),[m,g]=L.useState(!1),v=r==="conversation"&&n?a(n):null,w=(v==null?void 0:v.syncRepoId)??null,_=v?u[v.id]:"idle",x=wt.useMemo(()=>new Map(i.map(O=>[O.id,O.name])),[i]),S=w?x.get(w):void 0,E=L.useCallback(async O=>{if(!v)return;h(!0);const N=O==="none"?null:O;await o(v.id,N),h(!1)},[v,o]),C=L.useCallback(async()=>{!v||!w||(g(!0),await s(v.id),g(!1))},[v,w,s]),A=M5(_,S),j=!w||m||f||c||_==="syncing";return r!=="conversation"?null:y.jsxs(uC,{children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(cC,{asChild:!0,children:y.jsx(Lt,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:c||f||m,"aria-label":"Configure Git Sync",children:_==="syncing"||m||f?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(nm,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:w?`Sync Status: ${_}`:"Link to Sync Repo"})]})}),y.jsxs(dC,{className:"w-64 p-4 space-y-3",align:"start",children:[y.jsx(dn,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),y.jsxs(vd,{value:w??"none",onValueChange:E,disabled:f||m||c,children:[y.jsx(_d,{id:"sync-repo-select",className:"w-full h-9",children:y.jsx(wd,{placeholder:"Select repository..."})}),y.jsxs(xd,{children:[y.jsx(Wi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),i.map(O=>y.jsx(Wi,{value:O.id,children:O.name},O.id))]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",A||"Not Linked"]}),y.jsxs(Lt,{size:"sm",variant:"outline",onClick:C,disabled:j,className:"h-8",children:[m||_==="syncing"?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(h6,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};e({id:"core-git-sync",order:40,triggerRenderer:()=>wt.createElement(t),show:()=>Ur.getState().syncRepos.length>0}),console.log("[Function] Registered Core Git Sync Control")}const w0e=F.object({path:F.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),_0e=F.object({path:F.string().describe("The path of the file to read within the VFS."),encoding:F.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),x0e=F.object({path:F.string().describe("The path where the file should be written."),content:F.string().describe("The content to write to the file."),encoding:F.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),S0e=F.object({path:F.string().describe("The path of the file or directory to delete."),recursive:F.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),E0e=F.object({path:F.string().describe("The path of the directory to create (including parents).")}),k0e=F.object({oldPath:F.string().describe("The current path of the item to rename."),newName:F.string().describe("The new name for the item.")});function C0e(){const e=ta.getState().registerTool,t=()=>{const u=Gi.getState().currentParentId,c=Gi.getState().nodes,f=Gi.getState().rootId,h=u?c[u]:c[f||""];return h?h.path:"/"};console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:w0e},async({path:u})=>{const c=Wn(u||t());try{const f=await Rk(c);return{success:!0,path:c,entries:f.map(h=>({name:h.name,type:h.isDirectory?"folder":"file",size:h.size,lastModified:h.lastModified.toISOString()}))}}catch(f){return{success:!1,path:c,error:f.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:_0e},async({path:u,encoding:c})=>{const f=Wn(u);try{const h=await Nh(f);let m;return c==="base64"?m=btoa(String.fromCharCode(...h)):m=new TextDecoder().decode(h),{success:!0,path:f,content:m,encoding:c}}catch(h){return{success:!1,path:f,error:h.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:x0e},async({path:u,content:c,encoding:f})=>{const h=Wn(u);try{let m;if(f==="base64"){const g=atob(c),v=g.length,w=new Uint8Array(v);for(let _=0;_<v;_++)w[_]=g.charCodeAt(_);m=w}else m=c;return await aw(h,m),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:S0e},async({path:u,recursive:c})=>{const f=Wn(u);try{return await Nk(f,c),{success:!0,path:f}}catch(h){return{success:!1,path:f,error:h.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:E0e},async({path:u})=>{const c=Wn(u);try{return await jM(c),{success:!0,path:c}}catch(f){return{success:!1,path:c,error:f.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:k0e},async({oldPath:u,newName:c})=>{const f=Wn(u),h=Wn(f.substring(0,f.lastIndexOf("/"))||"/"),m=js(h,c);try{return await MM(f,m),{success:!0,oldPath:f,newPath:m}}catch(g){return{success:!1,oldPath:f,newName:c,error:g.message}}}),console.log("[Function] Core VFS Tools Registered.")}const A0e=F.object({path:F.string().describe("The directory path within the VFS to initialize as a Git repository.")}),T0e=F.object({path:F.string().describe("The directory path of the Git repository within the VFS to commit."),message:F.string().describe("The commit message.")}),R0e=F.object({path:F.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:F.string().optional().describe("The branch name to pull.")}),N0e=F.object({path:F.string().describe("The directory path of the Git repository within the VFS to push."),branch:F.string().optional().describe("The branch name to push.")}),I0e=F.object({path:F.string().describe("The directory path of the Git repository within the VFS to check status.")});function O0e(){const e=ta.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:A0e},async({path:o})=>{try{return await NM(o),{success:!0,message:`Repository initialized at ${o}`}}catch(s){return{success:!1,error:s.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:T0e},async({path:o,message:s})=>{const u=qr.getState();if(!u.gitUserName||!u.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await Ak(o,s),{success:!0,message:`Changes committed in ${o}`}}catch(c){return{success:!1,error:c.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:R0e},async({path:o,branch:s})=>{try{return await rw(o,s||"main"),{success:!0,message:`Pulled changes for ${o}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:N0e},async({path:o,branch:s})=>{try{return await Tk(o,s||"main"),{success:!0,message:`Pushed changes for ${o}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:I0e},async({path:o})=>{try{return await IM(o),{success:!0,message:`Status checked for ${o}`}}catch(s){return{success:!1,error:s.message}}}),console.log("[Function] Core Git Tools Registered.")}const j0e=({className:e,localMaxSteps:t,setLocalMaxSteps:n})=>{const{selectedItemId:r,selectedItemType:a,getConversationById:i,updateCurrentConversationToolSettings:o}=Ur($n(E=>({selectedItemId:E.selectedItemId,selectedItemType:E.selectedItemType,getConversationById:E.getConversationById,updateCurrentConversationToolSettings:E.updateCurrentConversationToolSettings}))),s=ta(E=>E.tools),[u,c]=L.useState(""),[f,h]=L.useState(new Set);L.useEffect(()=>{var E;if(a==="conversation"&&r){const C=i(r),A=new Set(((E=C==null?void 0:C.metadata)==null?void 0:E.enabledTools)??[]);h(A)}else h(new Set)},[r,a,i]);const m=L.useMemo(()=>Object.entries(s).map(([E,{definition:C,modId:A}])=>({name:E,description:C.description??"No description provided.",modId:A})).sort((E,C)=>E.name.localeCompare(C.name)),[s]),g=L.useMemo(()=>{const E=u.trim().toLowerCase();return E?m.filter(C=>C.name.toLowerCase().includes(E)||C.description.toLowerCase().includes(E)||C.modId.toLowerCase().includes(E)):m},[m,u]),v=L.useCallback((E,C)=>{h(j=>{const O=new Set(j);return C?O.add(E):O.delete(E),O});const A=new Set(f);C?A.add(E):A.delete(E),o({enabledTools:Array.from(A)})},[f,o]),w=L.useCallback(E=>{const C=E?new Set(m.map(A=>A.name)):new Set;h(C),o({enabledTools:Array.from(C)})},[m,o]),_=E=>{const C=E.target.value;if(C===""){n(null);return}const A=parseInt(C,10);isNaN(A)?n(null):n(A)},x=t===null?"":String(t),S=a!=="conversation"||!r;return y.jsxs("div",{className:Ut("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(g6,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(nr,{type:"search",placeholder:"Filter tools...",value:u,onChange:E=>c(E.target.value),className:"pl-8 h-9",disabled:S})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(dn,{className:"text-xs text-muted-foreground",children:[g.length," tools shown (",f.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>w(!0),disabled:S||m.length===0,children:"Enable All"}),y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>w(!1),disabled:S||m.length===0||f.size===0,children:"Disable All"})]})]}),y.jsx(fw,{className:"h-56 border rounded-md p-2 bg-background/50",children:S?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):m.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):g.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:g.map(E=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx(jl,{id:`tool-switch-${E.name}`,checked:f.has(E.name),onCheckedChange:C=>v(E.name,C),className:"flex-shrink-0",disabled:S}),y.jsxs(dn,{htmlFor:`tool-switch-${E.name}`,className:Ut("text-sm font-normal flex-grow pl-2 space-y-0.5",S?"cursor-not-allowed":"cursor-pointer"),title:`${E.name} (from ${E.modId})`,children:[y.jsx("span",{className:"block font-medium",children:E.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:E.description})]})]},E.name))})}),y.jsxs("div",{className:"pt-2",children:[y.jsx(dn,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),y.jsx(nr,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:_,className:"w-20 h-8 text-xs mt-1",placeholder:String(qr.getState().toolMaxSteps??5),disabled:S}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20)."})]})]})};function D0e(){const e=ta.getState().registerPromptControl,t=()=>{var v,w,_;const{selectedItemId:n,selectedItemType:r,getConversationById:a}=Ur($n(x=>({selectedItemId:x.selectedItemId,selectedItemType:x.selectedItemType,getConversationById:x.getConversationById}))),i=Qn.getState().status==="streaming",o=Object.keys(ta.getState().tools).length,s=r==="conversation"&&n?a(n):null,u=((w=(v=s==null?void 0:s.metadata)==null?void 0:v.enabledTools)==null?void 0:w.length)??0,c=((_=s==null?void 0:s.metadata)==null?void 0:_.toolMaxStepsOverride)??null,[f,h]=L.useState(c);wt.useEffect(()=>{h(c)},[c]);const m=u>0||c!==null,g=i||o===0||r!=="conversation";return y.jsxs(uC,{onOpenChange:x=>{x||Ur.getState().updateCurrentConversationToolSettings({toolMaxStepsOverride:f})},children:[y.jsx(In,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(cC,{asChild:!0,children:y.jsx(Lt,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:g,"aria-label":"Configure Tools",children:y.jsx(p7,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:g?"Tools unavailable (select conversation)":`Tools (${u} enabled)`})]})}),y.jsx(dC,{className:"w-auto p-0",align:"start",children:y.jsx(j0e,{localMaxSteps:f,setLocalMaxSteps:h})})]})};e({id:"core-tool-selector",order:50,triggerRenderer:()=>wt.createElement(t),getMetadata:()=>{var o,s,u;const{selectedItemId:n,selectedItemType:r,getConversationById:a}=Ur.getState(),i=r==="conversation"&&n?a(n):null;return{enabledTools:((o=i==null?void 0:i.metadata)==null?void 0:o.enabledTools)??[],...((s=i==null?void 0:i.metadata)==null?void 0:s.toolMaxStepsOverride)!==null&&{maxSteps:(u=i==null?void 0:i.metadata)==null?void 0:u.toolMaxStepsOverride}}},show:()=>Object.keys(ta.getState().tools).length>0}),console.log("[Function] Registered Core Tool Selector Control")}const _C=wt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const{dbProviderConfigs:a,globalModelSortOrder:i,isLoading:o}=fi($n(c=>({dbProviderConfigs:c.dbProviderConfigs,globalModelSortOrder:c.globalModelSortOrder,isLoading:c.isLoading}))),s=L.useMemo(()=>{const c=new Map,f=new Set;a.forEach(g=>{if(!g.isEnabled||!g.enabledModels)return;const v=g.fetchedModels??(g.type?fi.getState().getAllAvailableModelDefsForProvider(g.id):[]),w=new Map(v.map(_=>[_.id,_]));g.enabledModels.forEach(_=>{const x=Cf(g.id,_),S=w.get(_);S&&(f.add(x),c.set(x,{name:S.name||_,providerName:g.name}))})});const h=[],m=new Set;return i.forEach(g=>{if(f.has(g)){const v=c.get(g);v&&!m.has(g)&&(h.push({id:g,...v}),m.add(g))}}),f.forEach(g=>{if(!m.has(g)){const v=c.get(g);v&&h.push({id:g,...v})}}),h},[a,i]),u=L.useMemo(()=>s.find(c=>c.id===e),[s,e]);return o?y.jsx(Aa,{className:Ut("h-9 w-[200px]",r)}):y.jsxs(vd,{value:e??"none",onValueChange:c=>t(c==="none"?null:c),disabled:n||s.length===0,children:[y.jsx(_d,{className:Ut("w-auto h-9 text-sm",r),"aria-label":"Select AI Model",children:y.jsx(wd,{placeholder:"Select Model...",children:u?y.jsxs("span",{className:"truncate",children:[u.name," (",u.providerName,")"]}):y.jsx("span",{className:"text-muted-foreground",children:"Select Model..."})})}),y.jsx(xd,{children:s.length===0?y.jsx(Wi,{value:"none",disabled:!0,children:"No models enabled"}):s.map(c=>y.jsxs(Wi,{value:c.id,children:[c.name," (",c.providerName,")"]},c.id))})]})});_C.displayName="GlobalModelSelector";const M0e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:o})=>y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),y.jsx(gw,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:s=>t(s.target.value||null),rows:6,disabled:o,className:"mt-1"}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:o||e===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{children:[y.jsx(dn,{children:"Default Model (Overrides Parent/Global)"}),y.jsx(_C,{value:n??i,onChange:r,disabled:o}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:o||n===null,children:"Use Inherited/Default"})]})]}),P0e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:o,setTopK:s,presencePenalty:u,setPresencePenalty:c,frequencyPenalty:f,setFrequencyPenalty:h,localTemp:m,setLocalTemp:g,localTopP:v,setLocalTopP:w,localPresence:_,setLocalPresence:x,localFrequency:S,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:A,effectiveTopP:j,effectiveTopK:O,effectivePresencePenalty:N,effectiveFrequencyPenalty:z,isSaving:H})=>{const Q=L.useCallback((Z,V)=>{const te=V.target.value,ae=te===""?null:parseInt(te,10);(te===""||!isNaN(ae)&&ae!==null)&&Z(ae)},[]),P=L.useCallback((Z,V)=>{Z(V[0])},[]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),y.jsx(ks,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:Z=>g(Z[0]),onValueCommit:Z=>P(t,Z),disabled:H}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:H||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),y.jsx(ks,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:Z=>w(Z[0]),onValueCommit:Z=>P(i,Z),disabled:H}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:H||a===null,children:["Use Inherited/Default (",(j==null?void 0:j.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(nr,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${A??"Default"}`,value:n??"",onChange:Z=>Q(r,Z),min:"1",className:"h-8 text-xs",disabled:H}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:H||n===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),y.jsx(nr,{id:"project-top-k",type:"number",placeholder:`Inherited: ${O??"Default"}`,value:o??"",onChange:Z=>Q(s,Z),min:"1",className:"h-8 text-xs",disabled:H}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>s(null),disabled:H||o===null,children:"Use Inherited/Default"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",_.toFixed(2),")"]}),y.jsx(ks,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:Z=>x(Z[0]),onValueCommit:Z=>P(c,Z),disabled:H}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c(null),disabled:H||u===null,children:["Use Inherited/Default (",(N==null?void 0:N.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),y.jsx(ks,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:Z=>E(Z[0]),onValueCommit:Z=>P(h,Z),disabled:H}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:H||f===null,children:["Use Inherited/Default (",(z==null?void 0:z.toFixed(2))??"N/A",")"]})]})]})},F0e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var o;const i=((o=r.find(s=>s.id===n))==null?void 0:o.name)??"None";return y.jsx("div",{className:"space-y-4",children:y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),y.jsxs(vd,{value:e??"none",onValueChange:s=>t(s==="none"?null:s),disabled:a||r.length===0,children:[y.jsx(_d,{id:"project-sync-repo",children:y.jsx(wd,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),y.jsxs(xd,{children:[y.jsx(Wi,{value:"none",children:y.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(s=>y.jsx(Wi,{value:s.id,children:s.name},s.id))]})]}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},L0e=({projectId:e,projectName:t,isSaving:n})=>{const r=()=>{ut.info(`VFS clearing for project "${t}" is not yet implemented.`)},a=Ut("px-2.5 py-1 text-xs font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary/50","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx("div",{className:"flex flex-col h-full",children:y.jsxs(Nw,{defaultValue:"manage",className:"flex-grow flex flex-col",children:[y.jsxs(Iw,{className:"flex-shrink-0 gap-1 p-1 mb-3 h-auto justify-start bg-muted/50 rounded-md",children:[y.jsx(li,{value:"manage",className:a,children:"Manage Files"}),y.jsx(li,{value:"settings",className:a,children:"Settings & Danger Zone"})]}),y.jsx(ui,{value:"manage",className:"flex-grow flex flex-col overflow-hidden data-[state=inactive]:hidden",children:y.jsx("div",{className:"flex-grow border rounded-md overflow-hidden",children:e?y.jsx(wC,{}):y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})}),y.jsxs(ui,{value:"settings",className:"space-y-4 data-[state=inactive]:hidden",children:[y.jsxs("div",{children:[y.jsx(dn,{children:"Project Filesystem Info"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),y.jsx("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2",children:y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",y.jsx("code",{className:"text-xs",children:e||"N/A"})]})})]}),y.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[y.jsx(dn,{className:"text-destructive",children:"Danger Zone"}),y.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."}),y.jsxs(Lt,{variant:"destructive",size:"sm",onClick:r,disabled:n||!e,children:[y.jsx(Ff,{className:"h-4 w-4 mr-1"}),"Clear Project VFS (Not Implemented)"]})]})]})]})})},$0e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a,getEffectiveProjectSettings:i,syncRepos:o}=Ur($n(ze=>({getProjectById:ze.getProjectById,updateProject:ze.updateProject,getEffectiveProjectSettings:ze.getEffectiveProjectSettings,syncRepos:ze.syncRepos}))),s=qr($n(ze=>({globalSystemPrompt:ze.globalSystemPrompt,temperature:ze.temperature,maxTokens:ze.maxTokens,topP:ze.topP,topK:ze.topK,presencePenalty:ze.presencePenalty,frequencyPenalty:ze.frequencyPenalty}))),u=fi(ze=>ze.selectedModelId),c=Gi(ze=>ze.setVfsKey),[f,h]=L.useState(null),[m,g]=L.useState(null),[v,w]=L.useState(null),[_,x]=L.useState(null),[S,E]=L.useState(null),[C,A]=L.useState(null),[j,O]=L.useState(null),[N,z]=L.useState(null),[H,Q]=L.useState(null),[P,Z]=L.useState(.7),[V,te]=L.useState(1),[ae,re]=L.useState(0),[Y,ne]=L.useState(0),[G,X]=L.useState(!1),[oe,ye]=L.useState("prompt"),we=n?r(n):null,fe=n?i(n):null,Me=L.useCallback(ze=>{var Te;if(!ze)return null;const He=r(ze);return He?((Te=He.metadata)==null?void 0:Te.syncRepoId)!==void 0?He.metadata.syncRepoId:Me(He.parentId):null},[r]),Fe=n?Me(n):null;L.useEffect(()=>{var ze;if(e&&n){console.log(`[ProjectSettingsModal] Opening for ${n}. Setting VFS key.`),c(n);const He=r(n),Te=i(n);h((He==null?void 0:He.systemPrompt)??null),g((He==null?void 0:He.modelId)??null),w((He==null?void 0:He.temperature)??null),x((He==null?void 0:He.maxTokens)??null),E((He==null?void 0:He.topP)??null),A((He==null?void 0:He.topK)??null),O((He==null?void 0:He.presencePenalty)??null),z((He==null?void 0:He.frequencyPenalty)??null),Q(((ze=He==null?void 0:He.metadata)==null?void 0:ze.syncRepoId)??null),Z((Te==null?void 0:Te.temperature)??s.temperature),te((Te==null?void 0:Te.topP)??s.topP??1),re((Te==null?void 0:Te.presencePenalty)??s.presencePenalty??0),ne((Te==null?void 0:Te.frequencyPenalty)??s.frequencyPenalty??0)}else e||(console.log("[ProjectSettingsModal] Closing. Setting VFS key to null."),c(null),h(null),g(null),w(null),x(null),E(null),A(null),O(null),z(null),Q(null))},[e,n,r,i,Me,s,c]),L.useEffect(()=>Z(v??(fe==null?void 0:fe.temperature)??s.temperature),[v,fe,s.temperature]),L.useEffect(()=>te(S??(fe==null?void 0:fe.topP)??s.topP??1),[S,fe,s.topP]),L.useEffect(()=>re(j??(fe==null?void 0:fe.presencePenalty)??s.presencePenalty??0),[j,fe,s.presencePenalty]),L.useEffect(()=>ne(N??(fe==null?void 0:fe.frequencyPenalty)??s.frequencyPenalty??0),[N,fe,s.frequencyPenalty]);const Oe=async()=>{if(n){X(!0);try{const ze=we!=null&&we.parentId?i(we.parentId):{systemPrompt:s.globalSystemPrompt,modelId:u,temperature:s.temperature,maxTokens:s.maxTokens,topP:s.topP,topK:s.topK,presencePenalty:s.presencePenalty,frequencyPenalty:s.frequencyPenalty},He=we!=null&&we.parentId?Me(we.parentId):null,Te={},Ce={...(we==null?void 0:we.metadata)??{}};Te.systemPrompt=f!==ze.systemPrompt?f:void 0,Te.modelId=m!==ze.modelId?m:void 0,Te.temperature=v!==ze.temperature?v:void 0,Te.maxTokens=_!==ze.maxTokens?_:void 0,Te.topP=S!==ze.topP?S:void 0,Te.topK=C!==ze.topK?C:void 0,Te.presencePenalty=j!==ze.presencePenalty?j:void 0,Te.frequencyPenalty=N!==ze.frequencyPenalty?N:void 0,H!==He?Ce.syncRepoId=H:delete Ce.syncRepoId,Te.metadata=Ce,await a(n,Te),ut.success(`Project "${we==null?void 0:we.name}" settings updated.`),t()}catch(ze){ut.error("Failed to save project settings."),console.error("Failed to save project settings:",ze)}finally{X(!1)}}},Re=Ut("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(_w,{open:e,onOpenChange:t,children:y.jsxs(xw,{className:"sm:max-w-[800px] w-[90vw] h-[70vh] min-h-[500px] max-h-[80vh] flex flex-col p-0",children:[y.jsxs(Sw,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsxs(kw,{children:["Project Settings: ",we==null?void 0:we.name]}),y.jsx(Cw,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),y.jsxs(Nw,{value:oe,onValueChange:ye,className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(Iw,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(li,{value:"prompt",className:Re,children:"Prompt & Model"}),y.jsx(li,{value:"params",className:Re,children:"Parameters"}),y.jsx(li,{value:"sync",className:Re,children:"Sync"}),y.jsx(li,{value:"vfs",className:Re,children:"Filesystem"})]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(ui,{value:"prompt",children:y.jsx(M0e,{systemPrompt:f,setSystemPrompt:h,modelId:m,setModelId:g,effectiveSystemPrompt:(fe==null?void 0:fe.systemPrompt)??s.globalSystemPrompt,effectiveModelId:(fe==null?void 0:fe.modelId)??u,isSaving:G})}),y.jsx(ui,{value:"params",children:y.jsx(P0e,{temperature:v,setTemperature:w,maxTokens:_,setMaxTokens:x,topP:S,setTopP:E,topK:C,setTopK:A,presencePenalty:j,setPresencePenalty:O,frequencyPenalty:N,setFrequencyPenalty:z,localTemp:P,setLocalTemp:Z,localTopP:V,setLocalTopP:te,localPresence:ae,setLocalPresence:re,localFrequency:Y,setLocalFrequency:ne,effectiveTemperature:(fe==null?void 0:fe.temperature)??s.temperature,effectiveMaxTokens:(fe==null?void 0:fe.maxTokens)??s.maxTokens,effectiveTopP:(fe==null?void 0:fe.topP)??s.topP,effectiveTopK:(fe==null?void 0:fe.topK)??s.topK,effectivePresencePenalty:(fe==null?void 0:fe.presencePenalty)??s.presencePenalty,effectiveFrequencyPenalty:(fe==null?void 0:fe.frequencyPenalty)??s.frequencyPenalty,isSaving:G})}),y.jsx(ui,{value:"sync",children:y.jsx(F0e,{syncRepoId:H,setSyncRepoId:Q,effectiveSyncRepoId:Fe,syncRepos:o,isSaving:G})}),y.jsxs(ui,{value:"vfs",className:"h-full",children:[" ",y.jsx(L0e,{projectId:n,projectName:(we==null?void 0:we.name)??null,isSaving:G})]})]})]}),y.jsxs(Ew,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:[y.jsx(Lt,{variant:"outline",onClick:t,disabled:G,children:"Cancel"}),y.jsxs(Lt,{onClick:Oe,disabled:G,children:[G&&y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function B0e(){const e=ta.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=Ka.getState();return y.jsx($0e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>wt.createElement(t),order:1e3,status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}function z0e(){const e=ta.getState().registerPromptControl,t=()=>{const{selectModel:n}=fi.getState(),r=Qn.getState().status==="streaming",{modelId:a}=Wc.getState();return y.jsx(_C,{value:a,onChange:n,disabled:r})};e({id:"core-global-model-selector",order:10,status:()=>fi.getState().isLoading?"loading":"ready",triggerRenderer:()=>wt.createElement(t),getParameters:void 0,getMetadata:void 0,show:()=>!0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const U0e=()=>{const[e,t]=L.useState(!0),{selectedItemId:n,selectedItemType:r,loadSidebarItems:a,getConversationById:i,getEffectiveProjectSettings:o}=Ur($n(te=>({selectedItemId:te.selectedItemId,selectedItemType:te.selectedItemType,loadSidebarItems:te.loadSidebarItems,addConversation:te.addConversation,selectItem:te.selectItem,getConversationById:te.getConversationById,getEffectiveProjectSettings:te.getEffectiveProjectSettings}))),{interactions:s,status:u}=Qn($n(te=>({interactions:te.interactions,status:te.status}))),{globalError:c,isSidebarCollapsed:f,isChatControlPanelOpen:h,isProjectSettingsModalOpen:m}=Ka($n(te=>({globalError:te.globalError,isSidebarCollapsed:te.isSidebarCollapsed,isChatControlPanelOpen:te.isChatControlPanelOpen,isProjectSettingsModalOpen:te.isProjectSettingsModalOpen}))),g=h.vfs??!1,v=ta($n(te=>Object.values(te.chatControls))),{loadDbMods:w,setLoadedMods:_}=n0($n(te=>({loadDbMods:te.loadDbMods,setLoadedMods:te.setLoadedMods}))),{loadInitialData:x}=fi($n(te=>({loadInitialData:te.loadInitialData}))),{loadSettings:S}=qr($n(te=>({loadSettings:te.loadSettings}))),{setVfsKey:E}=Gi($n(te=>({setVfsKey:te.setVfsKey}))),{initializePromptState:C,resetPromptState:A}=Wc($n(te=>({initializePromptState:te.initializePromptState,resetPromptState:te.resetPromptState})));L.useEffect(()=>{let te=!0;return(async()=>{var re;console.log("LiteChat: Starting initialization..."),t(!0);try{if(console.log("LiteChat: Loading core data..."),await S(),!te||(console.log("LiteChat: Settings loaded."),await x(),!te)||(console.log("LiteChat: Provider data loaded."),await a(),!te)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),ide(),bpe(),vpe(),z0e(),Dpe(),Ppe(),v0e(),C0e(),O0e(),D0e(),b0e(),B0e(),console.log("LiteChat: Core controls and tools registered."),!te)||(console.log("LiteChat: Loading mods..."),await w(),!te))return;console.log("LiteChat: DB Mods loaded.");const Y=n0.getState().dbMods;console.log(`LiteChat: Processing ${Y.length} mods...`);const ne=await Yce(Y);if(!te)return;_(ne),console.log(`LiteChat: ${ne.length} mods processed.`);const G=Ur.getState().selectedItemId,X=Ur.getState().selectedItemType,oe=X==="project"?G:X==="conversation"?((re=Ur.getState().getConversationById(G))==null?void 0:re.projectId)??null:null,ye=Ur.getState().getEffectiveProjectSettings(oe);C(ye),console.log("LiteChat: Initial prompt state initialized.",ye)}catch(Y){console.error("LiteChat: Initialization failed:",Y),ut.error(`Initialization failed: ${Y instanceof Error?Y.message:String(Y)}`),Ka.getState().setGlobalError("Initialization failed.")}finally{te&&(console.log("LiteChat: Initialization complete."),t(!1))}})(),()=>{te=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[]),L.useEffect(()=>{var re;if(e)return;const te=r==="project"?n:r==="conversation"?((re=i(n))==null?void 0:re.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${n}, Type: ${r}). Calculating effective settings for Project ID: ${te}`);const ae=o(te);C(ae),console.log("[LiteChat Effect] Prompt state updated based on context change.",ae)},[n,r,i,o,C,e]),L.useEffect(()=>{let te=null;if(g){if(r==="project")te=n;else if(r==="conversation"){const ae=i(n);te=(ae==null?void 0:ae.projectId)??"orphan"}else te="orphan";console.log(`[LiteChat Effect] VFS Panel Opened/Context Changed. Setting target key: ${te}`)}else te=null,console.log("[LiteChat Effect] VFS Panel Closed. Setting target key: null");Gi.getState().vfsKey!==te&&E(te)},[g,n,r,i,E]);const j=L.useCallback(async te=>{var Oe,Re,ze;const ae=Ur.getState(),re=Ka.getState(),Y=Wc.getState();let ne=ae.selectedItemType==="conversation"?ae.selectedItemId:null;const G=ae.selectedItemType==="project"?ae.selectedItemId:ae.selectedItemType==="conversation"?((Oe=ae.getConversationById(ae.selectedItemId))==null?void 0:Oe.projectId)??null:null,X=Y.modelId,oe=ae.getEffectiveProjectSettings(G).systemPrompt??void 0;if(!X){ut.error("Please select a model before sending a message.");return}if(!ne){console.log("LiteChat: No conversation selected, creating new one...");try{const He=await ae.addConversation({title:"New Chat",projectId:G});await ae.selectItem(He,"conversation"),ne=Ur.getState().selectedItemId,ne!==He&&(console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),ne=He),console.log(`LiteChat: New conversation created (${ne}), selected, and InteractionStore synced.`),setTimeout(()=>re.setFocusInputFlag(!0),0)}catch(He){console.error("LiteChat: Failed to create new conversation",He),ut.error("Failed to start new chat.");return}}const we=Qn.getState().interactions.filter(He=>He.status==="COMPLETED"&&He.type==="message.user_assistant"),fe=AR(we);if(te.content)fe.push({role:"user",content:te.content});else if((ze=(Re=te.metadata)==null?void 0:Re.attachedFiles)!=null&&ze.length)fe.push({role:"user",content:""});else{console.error("LiteChat: Attempting to submit with no content."),ut.error("Cannot send an empty message.");return}const Me={temperature:Y.temperature,max_tokens:Y.maxTokens,top_p:Y.topP,top_k:Y.topK,presence_penalty:Y.presencePenalty,frequency_penalty:Y.frequencyPenalty,...te.parameters??{}};Object.keys(Me).forEach(He=>{(Me[He]===null||Me[He]===void 0)&&delete Me[He]});const Fe={system:oe,messages:fe,parameters:Me,metadata:{...te.metadata,modelId:X}};Ei.emit("prompt:finalised",{prompt:Fe}),console.log("LiteChat: Submitting prompt to AIService:",Fe);try{await Qy.startInteraction(Fe,te),console.log("LiteChat: AIService interaction started."),A();const He=ae.getEffectiveProjectSettings(G);C(He)}catch(He){console.error("LiteChat: Error starting AI interaction:",He),ut.error(`Failed to start AI interaction: ${He instanceof Error?He.message:String(He)}`)}},[C,A]),O=L.useCallback(async te=>{var He,Te,Ce,B,ke;console.log(`LiteChat: Regenerating interaction ${te}`);const ae=Qn.getState(),re=Ur.getState(),Y=Wc.getState(),ne=ae.interactions.find(Ae=>Ae.id===te);if(!ne||!ne.prompt){console.error(`LiteChat: Cannot regenerate - interaction ${te} or its prompt not found.`),ut.error("Cannot regenerate: Original interaction data missing.");return}if(ne.type!=="message.user_assistant"){console.error(`LiteChat: Cannot regenerate non-user_assistant interaction: ${te}`),ut.error("Can only regenerate from a user message interaction.");return}const G=re.getConversationById(ne.conversationId),X=(G==null?void 0:G.projectId)??null,oe=Y.modelId,ye=re.getEffectiveProjectSettings(X).systemPrompt??void 0;if(!oe){ut.error("Please select a model before regenerating.");return}const we=ne.index,fe=ae.interactions.filter(Ae=>Ae.conversationId===ne.conversationId&&Ae.index<we&&Ae.status==="COMPLETED"&&Ae.type==="message.user_assistant").sort((Ae,ce)=>Ae.index-ce.index),Me=AR(fe);if((He=ne.prompt)!=null&&He.content&&typeof ne.prompt.content=="string")Me.push({role:"user",content:ne.prompt.content});else if((B=(Ce=(Te=ne.prompt)==null?void 0:Te.metadata)==null?void 0:Ce.attachedFiles)!=null&&B.length)Me.push({role:"user",content:""});else{console.error(`LiteChat: Cannot regenerate - missing or invalid user prompt content in interaction ${te}.`),ut.error("Cannot regenerate: Original user prompt missing.");return}const Fe={temperature:Y.temperature,max_tokens:Y.maxTokens,top_p:Y.topP,top_k:Y.topK,presence_penalty:Y.presencePenalty,frequency_penalty:Y.frequencyPenalty,...ne.prompt.parameters??{}};Object.keys(Fe).forEach(Ae=>{(Fe[Ae]===null||Fe[Ae]===void 0)&&delete Fe[Ae]});const Oe=((ke=ne.prompt.metadata)==null?void 0:ke.enabledTools)??[],Re={...ne.prompt.metadata,regeneratedFromId:te,modelId:oe,attachedFiles:void 0,enabledTools:Oe},ze={system:ye,messages:Me,parameters:Fe,metadata:Re};Ei.emit("prompt:finalised",{prompt:ze}),console.log(`LiteChat: Submitting regeneration request for ${te}:`,ze);try{await Qy.startInteraction(ze,ne.prompt),console.log(`LiteChat: AIService regeneration interaction started for ${te}.`)}catch(Ae){console.error(`LiteChat: Error starting regeneration for ${te}:`,Ae),ut.error("Failed to start regeneration.")}},[]),N=L.useCallback(te=>{console.log(`LiteChat: Stopping interaction ${te}`),Qy.stopInteraction(te)},[]),z=L.useMemo(()=>v.filter(te=>(te.panel??"main")==="sidebar"&&(te.show?te.show():!0)).sort((te,ae)=>(te.order??1/0)-(ae.order??1/0)),[v]),H=L.useMemo(()=>v.filter(te=>te.panel==="sidebar-footer"&&(te.show?te.show():!0)).sort((te,ae)=>(te.order??1/0)-(ae.order??1/0)),[v]),Q=L.useMemo(()=>v.filter(te=>te.panel==="header"&&(te.show?te.show():!0)).sort((te,ae)=>(te.order??1/0)-(ae.order??1/0)),[v]),P=L.useMemo(()=>{var te;return(te=v.find(ae=>ae.id==="core-settings-trigger"))==null?void 0:te.settingsRenderer},[v]),Z=L.useMemo(()=>{var te;return(te=v.find(ae=>ae.id==="core-project-settings-trigger"))==null?void 0:te.settingsRenderer},[v]),V=r==="conversation"?n:null;return e?y.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(Xn,{className:"h-12 w-12 animate-spin text-primary"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Ut("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:Ut("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",f?"w-16":"w-64"),children:[y.jsxs("div",{className:Ut("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:Ut(f?"hidden":"block"),children:y.jsx(Wp,{controls:z,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:Ut(f?"block":"hidden"),children:y.jsx(Wp,{controls:z,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:Ut("flex-shrink-0 border-t border-[--border] p-2",f?"flex flex-col items-center gap-2":"flex items-center justify-between"),children:y.jsx(Wp,{controls:H,panelId:"sidebar-footer",renderMode:f?"icon":"full",className:Ut("flex",f?"flex-col gap-2":"items-center gap-1")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Wp,{controls:Q,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(use,{conversationId:V,interactions:s,onRegenerateInteraction:O,onStopInteraction:N,status:u,className:"flex-grow overflow-y-hidden p-4 space-y-4"}),c&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",c]}),y.jsx(jW,{InputAreaRenderer:D5,onSubmit:j,className:"border-t border-[--border] bg-card flex-shrink-0"})]}),y.jsx(Wp,{controls:v,panelId:"drawer_right",renderMode:"full"})]}),h.settingsModal&&P&&P(),m&&Z&&Z(),y.jsx(tde,{richColors:!0,position:"bottom-left",closeButton:!0})]})};function q0e(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(U0e,{})})})}R7();function H0e({children:e}){const t=qr(n=>n.theme);return L.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}K$.createRoot(document.getElementById("root")).render(y.jsx(wt.StrictMode,{children:y.jsx(H0e,{children:y.jsx(q0e,{})})}));
