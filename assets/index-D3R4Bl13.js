var HU=Object.defineProperty;var VU=(e,t,n)=>t in e?HU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var va=(e,t,n)=>VU(e,typeof t!="symbol"?t+"":t,n);function GU(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ui(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xS={exports:{}},Fm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI;function KU(){if(MI)return Fm;MI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:s,ref:a!==void 0?a:null,props:i}}return Fm.Fragment=t,Fm.jsx=n,Fm.jsxs=n,Fm}var PI;function WU(){return PI||(PI=1,xS.exports=KU()),xS.exports}var p=WU(),_S={exports:{}};function ZU(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var I6={exports:{}},la=I6.exports={},Lo,$o;function BE(){throw new Error("setTimeout has not been defined")}function zE(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Lo=setTimeout:Lo=BE}catch{Lo=BE}try{typeof clearTimeout=="function"?$o=clearTimeout:$o=zE}catch{$o=zE}})();function j6(e){if(Lo===setTimeout)return setTimeout(e,0);if((Lo===BE||!Lo)&&setTimeout)return Lo=setTimeout,setTimeout(e,0);try{return Lo(e,0)}catch{try{return Lo.call(null,e,0)}catch{return Lo.call(this,e,0)}}}function YU(e){if($o===clearTimeout)return clearTimeout(e);if(($o===zE||!$o)&&clearTimeout)return $o=clearTimeout,clearTimeout(e);try{return $o(e)}catch{try{return $o.call(null,e)}catch{return $o.call(this,e)}}}var Vl=[],xh=!1,Td,Sv=-1;function XU(){!xh||!Td||(xh=!1,Td.length?Vl=Td.concat(Vl):Sv=-1,Vl.length&&O6())}function O6(){if(!xh){var e=j6(XU);xh=!0;for(var t=Vl.length;t;){for(Td=Vl,Vl=[];++Sv<t;)Td&&Td[Sv].run();Sv=-1,t=Vl.length}Td=null,xh=!1,YU(e)}}la.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Vl.push(new D6(e,t)),Vl.length===1&&!xh&&j6(O6)};function D6(e,t){this.fun=e,this.array=t}D6.prototype.run=function(){this.fun.apply(null,this.array)};la.title="browser";la.browser=!0;la.env={};la.argv=[];la.version="";la.versions={};function oc(){}la.on=oc;la.addListener=oc;la.once=oc;la.off=oc;la.removeListener=oc;la.removeAllListeners=oc;la.emit=oc;la.prependListener=oc;la.prependOnceListener=oc;la.listeners=function(e){return[]};la.binding=function(e){throw new Error("process.binding is not supported")};la.cwd=function(){return"/"};la.chdir=function(e){throw new Error("process.chdir is not supported")};la.umask=function(){return 0};var JU=I6.exports;const ea=ZU(JU);var Fn={},FI;function QU(){if(FI)return Fn;FI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(L){return L===null||typeof L!="object"?null:(L=h&&L[h]||L["@@iterator"],typeof L=="function"?L:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function x(L,J,Q){this.props=L,this.context=J,this.refs=b,this.updater=Q||y}x.prototype.isReactComponent={},x.prototype.setState=function(L,J){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,J,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function w(){}w.prototype=x.prototype;function S(L,J,Q){this.props=L,this.context=J,this.refs=b,this.updater=Q||y}var E=S.prototype=new w;E.constructor=S,v(E,x.prototype),E.isPureReactComponent=!0;var C=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function I(L,J,Q,ee,fe,ve){return Q=ve.ref,{$$typeof:e,type:L,key:J,ref:Q!==void 0?Q:null,props:ve}}function R(L,J){return I(L.type,J,void 0,void 0,void 0,L.props)}function F(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function B(L){var J={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Q){return J[Q]})}var H=/\/+/g;function D(L,J){return typeof L=="object"&&L!==null&&L.key!=null?B(""+L.key):J.toString(36)}function Z(){}function V(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Z,Z):(L.status="pending",L.then(function(J){L.status==="pending"&&(L.status="fulfilled",L.value=J)},function(J){L.status==="pending"&&(L.status="rejected",L.reason=J)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ue(L,J,Q,ee,fe){var ve=typeof L;(ve==="undefined"||ve==="boolean")&&(L=null);var Oe=!1;if(L===null)Oe=!0;else switch(ve){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(L.$$typeof){case e:case t:Oe=!0;break;case d:return Oe=L._init,ue(Oe(L._payload),J,Q,ee,fe)}}if(Oe)return fe=fe(L),Oe=ee===""?"."+D(L,0):ee,C(fe)?(Q="",Oe!=null&&(Q=Oe.replace(H,"$&/")+"/"),ue(fe,J,Q,"",function(Ce){return Ce})):fe!=null&&(F(fe)&&(fe=R(fe,Q+(fe.key==null||L&&L.key===fe.key?"":(""+fe.key).replace(H,"$&/")+"/")+Oe)),J.push(fe)),1;Oe=0;var Ae=ee===""?".":ee+":";if(C(L))for(var Ne=0;Ne<L.length;Ne++)ee=L[Ne],ve=Ae+D(ee,Ne),Oe+=ue(ee,J,Q,ve,fe);else if(Ne=m(L),typeof Ne=="function")for(L=Ne.call(L),Ne=0;!(ee=L.next()).done;)ee=ee.value,ve=Ae+D(ee,Ne++),Oe+=ue(ee,J,Q,ve,fe);else if(ve==="object"){if(typeof L.then=="function")return ue(V(L),J,Q,ee,fe);throw J=String(L),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function ae(L,J,Q){if(L==null)return L;var ee=[],fe=0;return ue(L,ee,"","",function(ve){return J.call(Q,ve,fe++)}),ee}function ne(L){if(L._status===-1){var J=L._result;J=J(),J.then(function(Q){(L._status===0||L._status===-1)&&(L._status=1,L._result=Q)},function(Q){(L._status===0||L._status===-1)&&(L._status=2,L._result=Q)}),L._status===-1&&(L._status=0,L._result=J)}if(L._status===1)return L._result.default;throw L._result}var X=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(J))return}else if(typeof ea=="object"&&typeof ea.emit=="function"){ea.emit("uncaughtException",L);return}console.error(L)};function ie(){}return Fn.Children={map:ae,forEach:function(L,J,Q){ae(L,function(){J.apply(this,arguments)},Q)},count:function(L){var J=0;return ae(L,function(){J++}),J},toArray:function(L){return ae(L,function(J){return J})||[]},only:function(L){if(!F(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Fn.Component=x,Fn.Fragment=n,Fn.Profiler=a,Fn.PureComponent=S,Fn.StrictMode=r,Fn.Suspense=l,Fn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Fn.__COMPILER_RUNTIME={__proto__:null,c:function(L){return T.H.useMemoCache(L)}},Fn.cache=function(L){return function(){return L.apply(null,arguments)}},Fn.cloneElement=function(L,J,Q){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ee=v({},L.props),fe=L.key,ve=void 0;if(J!=null)for(Oe in J.ref!==void 0&&(ve=void 0),J.key!==void 0&&(fe=""+J.key),J)!j.call(J,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&J.ref===void 0||(ee[Oe]=J[Oe]);var Oe=arguments.length-2;if(Oe===1)ee.children=Q;else if(1<Oe){for(var Ae=Array(Oe),Ne=0;Ne<Oe;Ne++)Ae[Ne]=arguments[Ne+2];ee.children=Ae}return I(L.type,fe,void 0,void 0,ve,ee)},Fn.createContext=function(L){return L={$$typeof:s,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:i,_context:L},L},Fn.createElement=function(L,J,Q){var ee,fe={},ve=null;if(J!=null)for(ee in J.key!==void 0&&(ve=""+J.key),J)j.call(J,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(fe[ee]=J[ee]);var Oe=arguments.length-2;if(Oe===1)fe.children=Q;else if(1<Oe){for(var Ae=Array(Oe),Ne=0;Ne<Oe;Ne++)Ae[Ne]=arguments[Ne+2];fe.children=Ae}if(L&&L.defaultProps)for(ee in Oe=L.defaultProps,Oe)fe[ee]===void 0&&(fe[ee]=Oe[ee]);return I(L,ve,void 0,void 0,null,fe)},Fn.createRef=function(){return{current:null}},Fn.forwardRef=function(L){return{$$typeof:o,render:L}},Fn.isValidElement=F,Fn.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:ne}},Fn.memo=function(L,J){return{$$typeof:u,type:L,compare:J===void 0?null:J}},Fn.startTransition=function(L){var J=T.T,Q={};T.T=Q;try{var ee=L(),fe=T.S;fe!==null&&fe(Q,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(ie,X)}catch(ve){X(ve)}finally{T.T=J}},Fn.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Fn.use=function(L){return T.H.use(L)},Fn.useActionState=function(L,J,Q){return T.H.useActionState(L,J,Q)},Fn.useCallback=function(L,J){return T.H.useCallback(L,J)},Fn.useContext=function(L){return T.H.useContext(L)},Fn.useDebugValue=function(){},Fn.useDeferredValue=function(L,J){return T.H.useDeferredValue(L,J)},Fn.useEffect=function(L,J,Q){var ee=T.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(L,J)},Fn.useId=function(){return T.H.useId()},Fn.useImperativeHandle=function(L,J,Q){return T.H.useImperativeHandle(L,J,Q)},Fn.useInsertionEffect=function(L,J){return T.H.useInsertionEffect(L,J)},Fn.useLayoutEffect=function(L,J){return T.H.useLayoutEffect(L,J)},Fn.useMemo=function(L,J){return T.H.useMemo(L,J)},Fn.useOptimistic=function(L,J){return T.H.useOptimistic(L,J)},Fn.useReducer=function(L,J,Q){return T.H.useReducer(L,J,Q)},Fn.useRef=function(L){return T.H.useRef(L)},Fn.useState=function(L){return T.H.useState(L)},Fn.useSyncExternalStore=function(L,J,Q){return T.H.useSyncExternalStore(L,J,Q)},Fn.useTransition=function(){return T.H.useTransition()},Fn.version="19.1.0",Fn}var LI;function hk(){return LI||(LI=1,_S.exports=QU()),_S.exports}var k=hk();const gt=ui(k),M6=GU({__proto__:null,default:gt},[k]);var SS={exports:{}},Lm={},ES={exports:{}},CS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I;function eq(){return $I||($I=1,function(e){function t(ae,ne){var X=ae.length;ae.push(ne);e:for(;0<X;){var ie=X-1>>>1,L=ae[ie];if(0<a(L,ne))ae[ie]=ne,ae[X]=L,X=ie;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ne=ae[0],X=ae.pop();if(X!==ne){ae[0]=X;e:for(var ie=0,L=ae.length,J=L>>>1;ie<J;){var Q=2*(ie+1)-1,ee=ae[Q],fe=Q+1,ve=ae[fe];if(0>a(ee,X))fe<L&&0>a(ve,ee)?(ae[ie]=ve,ae[fe]=X,ie=fe):(ae[ie]=ee,ae[Q]=X,ie=Q);else if(fe<L&&0>a(ve,X))ae[ie]=ve,ae[fe]=X,ie=fe;else break e}}return ne}function a(ae,ne){var X=ae.sortIndex-ne.sortIndex;return X!==0?X:ae.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,h=null,m=3,y=!1,v=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ae){for(var ne=n(u);ne!==null;){if(ne.callback===null)r(u);else if(ne.startTime<=ae)r(u),ne.sortIndex=ne.expirationTime,t(l,ne);else break;ne=n(u)}}function T(ae){if(b=!1,C(ae),!v)if(n(l)!==null)v=!0,j||(j=!0,D());else{var ne=n(u);ne!==null&&ue(T,ne.startTime-ae)}}var j=!1,I=-1,R=5,F=-1;function B(){return x?!0:!(e.unstable_now()-F<R)}function H(){if(x=!1,j){var ae=e.unstable_now();F=ae;var ne=!0;try{e:{v=!1,b&&(b=!1,S(I),I=-1),y=!0;var X=m;try{t:{for(C(ae),h=n(l);h!==null&&!(h.expirationTime>ae&&B());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,m=h.priorityLevel;var L=ie(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof L=="function"){h.callback=L,C(ae),ne=!0;break t}h===n(l)&&r(l),C(ae)}else r(l);h=n(l)}if(h!==null)ne=!0;else{var J=n(u);J!==null&&ue(T,J.startTime-ae),ne=!1}}break e}finally{h=null,m=X,y=!1}ne=void 0}}finally{ne?D():j=!1}}}var D;if(typeof E=="function")D=function(){E(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,V=Z.port2;Z.port1.onmessage=H,D=function(){V.postMessage(null)}}else D=function(){w(H,0)};function ue(ae,ne){I=w(function(){ae(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ae){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var X=m;m=ne;try{return ae()}finally{m=X}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(ae,ne){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var X=m;m=ae;try{return ne()}finally{m=X}},e.unstable_scheduleCallback=function(ae,ne,X){var ie=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ie+X:ie):X=ie,ae){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=X+L,ae={id:d++,callback:ne,priorityLevel:ae,startTime:X,expirationTime:L,sortIndex:-1},X>ie?(ae.sortIndex=X,t(u,ae),n(l)===null&&ae===n(u)&&(b?(S(I),I=-1):b=!0,ue(T,X-ie))):(ae.sortIndex=L,t(l,ae),v||y||(v=!0,j||(j=!0,D()))),ae},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(ae){var ne=m;return function(){var X=m;m=ne;try{return ae.apply(this,arguments)}finally{m=X}}}}(CS)),CS}var BI;function tq(){return BI||(BI=1,ES.exports=eq()),ES.exports}var kS={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI;function nq(){if(zI)return ti;zI=1;var e=hk();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ti.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(l,u,null,d)},ti.flushSync=function(l){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=u,r.p=d,r.d.f()}},ti.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},ti.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ti.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:y}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ti.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},ti.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ti.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},ti.requestFormReset=function(l){r.d.r(l)},ti.unstable_batchedUpdates=function(l,u){return l(u)},ti.useFormState=function(l,u,d){return s.H.useFormState(l,u,d)},ti.useFormStatus=function(){return s.H.useHostTransitionStatus()},ti.version="19.1.0",ti}var UI;function P6(){if(UI)return kS.exports;UI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kS.exports=nq(),kS.exports}var qI;function rq(){if(qI)return Lm;qI=1;var e=tq(),t=hk(),n=P6();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var f=c,g=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(g=f.return),c=f.return;while(c)}return f.tag===3?g:null}function s(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(i(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=i(c),f===null)throw Error(r(188));return f!==c?null:c}for(var g=c,_=f;;){var N=g.return;if(N===null)break;var $=N.alternate;if($===null){if(_=N.return,_!==null){g=_;continue}break}if(N.child===$.child){for($=N.child;$;){if($===g)return o(N),c;if($===_)return o(N),f;$=$.sibling}throw Error(r(188))}if(g.return!==_.return)g=N,_=$;else{for(var oe=!1,_e=N.child;_e;){if(_e===g){oe=!0,g=N,_=$;break}if(_e===_){oe=!0,_=N,g=$;break}_e=_e.sibling}if(!oe){for(_e=$.child;_e;){if(_e===g){oe=!0,g=$,_=N;break}if(_e===_){oe=!0,_=$,g=N;break}_e=_e.sibling}if(!oe)throw Error(r(189))}}if(g.alternate!==_)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function D(c){return c===null||typeof c!="object"?null:(c=H&&c[H]||c["@@iterator"],typeof c=="function"?c:null)}var Z=Symbol.for("react.client.reference");function V(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Z?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case x:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case j:return"SuspenseList";case F:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case y:return"Portal";case E:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case C:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case I:return f=c.displayName||null,f!==null?f:V(c.type)||"Memo";case R:f=c._payload,c=c._init;try{return V(c(f))}catch{}}return null}var ue=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ie=[],L=-1;function J(c){return{current:c}}function Q(c){0>L||(c.current=ie[L],ie[L]=null,L--)}function ee(c,f){L++,ie[L]=c.current,c.current=f}var fe=J(null),ve=J(null),Oe=J(null),Ae=J(null);function Ne(c,f){switch(ee(Oe,f),ee(ve,c),ee(fe,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?cI(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=cI(f),c=uI(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Q(fe),ee(fe,c)}function Ce(){Q(fe),Q(ve),Q(Oe)}function Pe(c){c.memoizedState!==null&&ee(Ae,c);var f=fe.current,g=uI(f,c.type);f!==g&&(ee(ve,c),ee(fe,g))}function Qe(c){ve.current===c&&(Q(fe),Q(ve)),Ae.current===c&&(Q(Ae),jm._currentValue=X)}var Le=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Te=e.unstable_requestPaint,de=e.unstable_now,se=e.unstable_getCurrentPriorityLevel,te=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Fe=e.unstable_NormalPriority,Ee=e.unstable_LowPriority,Ge=e.unstable_IdlePriority,Nt=e.log,it=e.unstable_setDisableYieldValue,St=null,Ft=null;function Dt(c){if(typeof Nt=="function"&&it(c),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(St,c)}catch{}}var Zt=Math.clz32?Math.clz32:K,ye=Math.log,O=Math.LN2;function K(c){return c>>>=0,c===0?32:31-(ye(c)/O|0)|0}var he=256,je=4194304;function be(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ke(c,f,g){var _=c.pendingLanes;if(_===0)return 0;var N=0,$=c.suspendedLanes,oe=c.pingedLanes;c=c.warmLanes;var _e=_&134217727;return _e!==0?(_=_e&~$,_!==0?N=be(_):(oe&=_e,oe!==0?N=be(oe):g||(g=_e&~c,g!==0&&(N=be(g))))):(_e=_&~$,_e!==0?N=be(_e):oe!==0?N=be(oe):g||(g=_&~c,g!==0&&(N=be(g)))),N===0?0:f!==0&&f!==N&&(f&$)===0&&($=N&-N,g=f&-f,$>=g||$===32&&(g&4194048)!==0)?f:N}function le(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function ft(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var c=he;return he<<=1,(he&4194048)===0&&(he=256),c}function P(){var c=je;return je<<=1,(je&62914560)===0&&(je=4194304),c}function Be(c){for(var f=[],g=0;31>g;g++)f.push(c);return f}function nt(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ge(c,f,g,_,N,$){var oe=c.pendingLanes;c.pendingLanes=g,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=g,c.entangledLanes&=g,c.errorRecoveryDisabledLanes&=g,c.shellSuspendCounter=0;var _e=c.entanglements,ze=c.expirationTimes,dt=c.hiddenUpdates;for(g=oe&~g;0<g;){var At=31-Zt(g),Mt=1<<At;_e[At]=0,ze[At]=-1;var mt=dt[At];if(mt!==null)for(dt[At]=null,At=0;At<mt.length;At++){var yt=mt[At];yt!==null&&(yt.lane&=-536870913)}g&=~Mt}_!==0&&De(c,_,0),$!==0&&N===0&&c.tag!==0&&(c.suspendedLanes|=$&~(oe&~f))}function De(c,f,g){c.pendingLanes|=f,c.suspendedLanes&=~f;var _=31-Zt(f);c.entangledLanes|=f,c.entanglements[_]=c.entanglements[_]|1073741824|g&4194090}function Ke(c,f){var g=c.entangledLanes|=f;for(c=c.entanglements;g;){var _=31-Zt(g),N=1<<_;N&f|c[_]&f&&(c[_]|=f),g&=~N}}function Ot(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function me(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function G(){var c=ne.p;return c!==0?c:(c=window.event,c===void 0?32:NI(c.type))}function q(c,f){var g=ne.p;try{return ne.p=c,f()}finally{ne.p=g}}var W=Math.random().toString(36).slice(2),pe="__reactFiber$"+W,Re="__reactProps$"+W,qe="__reactContainer$"+W,pt="__reactEvents$"+W,Wt="__reactListeners$"+W,ut="__reactHandles$"+W,It="__reactResources$"+W,Lt="__reactMarker$"+W;function en(c){delete c[pe],delete c[Re],delete c[pt],delete c[Wt],delete c[ut]}function Nn(c){var f=c[pe];if(f)return f;for(var g=c.parentNode;g;){if(f=g[qe]||g[pe]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(c=pI(c);c!==null;){if(g=c[pe])return g;c=pI(c)}return f}c=g,g=c.parentNode}return null}function Kn(c){if(c=c[pe]||c[qe]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function xr(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function _r(c){var f=c[It];return f||(f=c[It]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Ln(c){c[Lt]=!0}var hi=new Set,yo={};function bo(c,f){vo(c,f),vo(c+"Capture",f)}function vo(c,f){for(yo[c]=f,c=0;c<f.length;c++)hi.add(f[c])}var Kr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wo={},ds={};function dy(c){return Le.call(ds,c)?!0:Le.call(wo,c)?!1:Kr.test(c)?ds[c]=!0:(wo[c]=!0,!1)}function $s(c,f,g){if(dy(f))if(g===null)c.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var _=f.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+g)}}function dl(c,f,g){if(g===null)c.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+g)}}function Gi(c,f,g,_){if(_===null)c.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(g);return}c.setAttributeNS(f,g,""+_)}}var Gu,xo;function fl(c){if(Gu===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Gu=f&&f[1]||"",xo=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gu+c+xo}var mc=!1;function pf(c,f){if(!c||mc)return"";mc=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(f){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(yt){var mt=yt}Reflect.construct(c,[],Mt)}else{try{Mt.call()}catch(yt){mt=yt}c.call(Mt.prototype)}}else{try{throw Error()}catch(yt){mt=yt}(Mt=c())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(yt){if(yt&&mt&&typeof yt.stack=="string")return[yt.stack,mt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=_.DetermineComponentFrameRoot(),oe=$[0],_e=$[1];if(oe&&_e){var ze=oe.split(`
`),dt=_e.split(`
`);for(N=_=0;_<ze.length&&!ze[_].includes("DetermineComponentFrameRoot");)_++;for(;N<dt.length&&!dt[N].includes("DetermineComponentFrameRoot");)N++;if(_===ze.length||N===dt.length)for(_=ze.length-1,N=dt.length-1;1<=_&&0<=N&&ze[_]!==dt[N];)N--;for(;1<=_&&0<=N;_--,N--)if(ze[_]!==dt[N]){if(_!==1||N!==1)do if(_--,N--,0>N||ze[_]!==dt[N]){var At=`
`+ze[_].replace(" at new "," at ");return c.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",c.displayName)),At}while(1<=_&&0<=N);break}}}finally{mc=!1,Error.prepareStackTrace=g}return(g=c?c.displayName||c.name:"")?fl(g):""}function Wn(c){switch(c.tag){case 26:case 27:case 5:return fl(c.type);case 16:return fl("Lazy");case 13:return fl("Suspense");case 19:return fl("SuspenseList");case 0:case 15:return pf(c.type,!1);case 11:return pf(c.type.render,!1);case 1:return pf(c.type,!0);case 31:return fl("Activity");default:return""}}function Dp(c){try{var f="";do f+=Wn(c),c=c.return;while(c);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function pi(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Mp(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Ir(c){var f=Mp(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),_=""+c[f];if(!c.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var N=g.get,$=g.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return N.call(this)},set:function(oe){_=""+oe,$.call(this,oe)}}),Object.defineProperty(c,f,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(oe){_=""+oe},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function _o(c){c._valueTracker||(c._valueTracker=Ir(c))}function gc(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var g=f.getValue(),_="";return c&&(_=Mp(c)?c.checked?"true":"false":c.value),c=_,c!==g?(f.setValue(c),!0):!1}function Bs(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Pp=/[\n"\\]/g;function Xa(c){return c.replace(Pp,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function yc(c,f,g,_,N,$,oe,_e){c.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?c.type=oe:c.removeAttribute("type"),f!=null?oe==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+pi(f)):c.value!==""+pi(f)&&(c.value=""+pi(f)):oe!=="submit"&&oe!=="reset"||c.removeAttribute("value"),f!=null?bc(c,oe,pi(f)):g!=null?bc(c,oe,pi(g)):_!=null&&c.removeAttribute("value"),N==null&&$!=null&&(c.defaultChecked=!!$),N!=null&&(c.checked=N&&typeof N!="function"&&typeof N!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?c.name=""+pi(_e):c.removeAttribute("name")}function Fp(c,f,g,_,N,$,oe,_e){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(c.type=$),f!=null||g!=null){if(!($!=="submit"&&$!=="reset"||f!=null))return;g=g!=null?""+pi(g):"",f=f!=null?""+pi(f):g,_e||f===c.value||(c.value=f),c.defaultValue=f}_=_??N,_=typeof _!="function"&&typeof _!="symbol"&&!!_,c.checked=_e?c.checked:!!_,c.defaultChecked=!!_,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(c.name=oe)}function bc(c,f,g){f==="number"&&Bs(c.ownerDocument)===c||c.defaultValue===""+g||(c.defaultValue=""+g)}function hl(c,f,g,_){if(c=c.options,f){f={};for(var N=0;N<g.length;N++)f["$"+g[N]]=!0;for(g=0;g<c.length;g++)N=f.hasOwnProperty("$"+c[g].value),c[g].selected!==N&&(c[g].selected=N),N&&_&&(c[g].defaultSelected=!0)}else{for(g=""+pi(g),f=null,N=0;N<c.length;N++){if(c[N].value===g){c[N].selected=!0,_&&(c[N].defaultSelected=!0);return}f!==null||c[N].disabled||(f=c[N])}f!==null&&(f.selected=!0)}}function vc(c,f,g){if(f!=null&&(f=""+pi(f),f!==c.value&&(c.value=f),g==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=g!=null?""+pi(g):""}function Lp(c,f,g,_){if(f==null){if(_!=null){if(g!=null)throw Error(r(92));if(ue(_)){if(1<_.length)throw Error(r(93));_=_[0]}g=_}g==null&&(g=""),f=g}g=pi(f),c.defaultValue=g,_=c.textContent,_===g&&_!==""&&_!==null&&(c.value=_)}function wc(c,f){if(f){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=f;return}}c.textContent=f}var tr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mf(c,f,g){var _=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?_?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":_?c.setProperty(f,g):typeof g!="number"||g===0||tr.has(f)?f==="float"?c.cssFloat=g:c[f]=(""+g).trim():c[f]=g+"px"}function fy(c,f,g){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,g!=null){for(var _ in g)!g.hasOwnProperty(_)||f!=null&&f.hasOwnProperty(_)||(_.indexOf("--")===0?c.setProperty(_,""):_==="float"?c.cssFloat="":c[_]="");for(var N in f)_=f[N],f.hasOwnProperty(N)&&g[N]!==_&&mf(c,N,_)}else for(var $ in f)f.hasOwnProperty($)&&mf(c,$,f[$])}function $p(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pl(c){return xc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var fs=null;function gf(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var ml=null,$r=null;function Ki(c){var f=Kn(c);if(f&&(c=f.stateNode)){var g=c[Re]||null;e:switch(c=f.stateNode,f.type){case"input":if(yc(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Xa(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var _=g[f];if(_!==c&&_.form===c.form){var N=_[Re]||null;if(!N)throw Error(r(90));yc(_,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(f=0;f<g.length;f++)_=g[f],_.form===c.form&&gc(_)}break e;case"textarea":vc(c,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&hl(c,!!g.multiple,f,!1)}}}var gl=!1;function _c(c,f,g){if(gl)return c(f,g);gl=!0;try{var _=c(f);return _}finally{if(gl=!1,(ml!==null||$r!==null)&&(eb(),ml&&(f=ml,c=$r,$r=ml=null,Ki(f),c)))for(f=0;f<c.length;f++)Ki(c[f])}}function yl(c,f){var g=c.stateNode;if(g===null)return null;var _=g[Re]||null;if(_===null)return null;g=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(c=c.type,_=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!_;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,f,typeof g));return g}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bp=!1;if(Aa)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){Bp=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{Bp=!1}var hs=null,yf=null,Sc=null;function Ec(){if(Sc)return Sc;var c,f=yf,g=f.length,_,N="value"in hs?hs.value:hs.textContent,$=N.length;for(c=0;c<g&&f[c]===N[c];c++);var oe=g-c;for(_=1;_<=oe&&f[g-_]===N[$-_];_++);return Sc=N.slice(c,1<_?1-_:void 0)}function Cc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Ku(){return!0}function hy(){return!1}function ca(c){function f(g,_,N,$,oe){this._reactName=g,this._targetInst=N,this.type=_,this.nativeEvent=$,this.target=oe,this.currentTarget=null;for(var _e in c)c.hasOwnProperty(_e)&&(g=c[_e],this[_e]=g?g($):$[_e]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?Ku:hy,this.isPropagationStopped=hy,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ku)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ku)},persist:function(){},isPersistent:Ku}),f}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bf=ca(bl),So=d({},bl,{view:0,detail:0}),vf=ca(So),Wu,zp,Zu,wf=d({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Zu&&(Zu&&c.type==="mousemove"?(Wu=c.screenX-Zu.screenX,zp=c.screenY-Zu.screenY):zp=Wu=0,Zu=c),Wu)},movementY:function(c){return"movementY"in c?c.movementY:zp}}),xf=ca(wf),Up=d({},wf,{dataTransfer:0}),py=ca(Up),_f=d({},So,{relatedTarget:0}),kc=ca(_f),Sf=d({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),my=ca(Sf),M1=d({},bl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Ef=ca(M1),qp=d({},bl,{data:0}),Cf=ca(qp),Hp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Na={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yu(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Na[c])?!!f[c]:!1}function vl(){return Yu}var gy=d({},So,{key:function(c){if(c.key){var f=Hp[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Cc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Vp[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(c){return c.type==="keypress"?Cc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Cc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),kf=ca(gy),yy=d({},wf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gp=ca(yy),Tf=d({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),Kp=ca(Tf),wl=d({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wp=ca(wl),Zp=d({},wf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Af=ca(Zp),Yp=d({},bl,{newState:0,oldState:0}),by=ca(Yp),P1=[9,13,27,32],Xu=Aa&&"CompositionEvent"in window,Eo=null;Aa&&"documentMode"in document&&(Eo=document.documentMode);var F1=Aa&&"TextEvent"in window&&!Eo,Nf=Aa&&(!Xu||Eo&&8<Eo&&11>=Eo),Rf=" ",vy=!1;function Xp(c,f){switch(c){case"keyup":return P1.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wy(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var xl=!1;function xy(c,f){switch(c){case"compositionend":return wy(f);case"keypress":return f.which!==32?null:(vy=!0,Rf);case"textInput":return c=f.data,c===Rf&&vy?null:c;default:return null}}function L1(c,f){if(xl)return c==="compositionend"||!Xu&&Xp(c,f)?(c=Ec(),Sc=yf=hs=null,xl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Nf&&f.locale!=="ko"?null:f.data;default:return null}}var _y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function If(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!_y[c.type]:f==="textarea"}function Jp(c,f,g,_){ml?$r?$r.push(_):$r=[_]:ml=_,f=sb(f,"onChange"),0<f.length&&(g=new bf("onChange","change",null,g,_),c.push({event:g,listeners:f}))}var Tc=null,Ju=null;function $1(c){aI(c,0)}function jf(c){var f=xr(c);if(gc(f))return c}function Qu(c,f){if(c==="change")return f}var ps=!1;if(Aa){var Br;if(Aa){var Ac="oninput"in document;if(!Ac){var gi=document.createElement("div");gi.setAttribute("oninput","return;"),Ac=typeof gi.oninput=="function"}Br=Ac}else Br=!1;ps=Br&&(!document.documentMode||9<document.documentMode)}function Sy(){Tc&&(Tc.detachEvent("onpropertychange",Of),Ju=Tc=null)}function Of(c){if(c.propertyName==="value"&&jf(Ju)){var f=[];Jp(f,Ju,c,gf(c)),_c($1,f)}}function Ey(c,f,g){c==="focusin"?(Sy(),Tc=f,Ju=g,Tc.attachEvent("onpropertychange",Of)):c==="focusout"&&Sy()}function _l(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return jf(Ju)}function Qp(c,f){if(c==="click")return jf(f)}function Nc(c,f){if(c==="input"||c==="change")return jf(f)}function Co(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Qa=typeof Object.is=="function"?Object.is:Co;function A(c,f){if(Qa(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var g=Object.keys(c),_=Object.keys(f);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var N=g[_];if(!Le.call(f,N)||!Qa(c[N],f[N]))return!1}return!0}function M(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Y(c,f){var g=M(c);c=0;for(var _;g;){if(g.nodeType===3){if(_=c+g.textContent.length,c<=f&&_>=f)return{node:g,offset:f-c};c=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=M(g)}}function re(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?re(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function ce(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=Bs(c.document);f instanceof c.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)c=f.contentWindow;else break;f=Bs(c.document)}return f}function we(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var Me=Aa&&"documentMode"in document&&11>=document.documentMode,$e=null,We=null,Xe=null,rt=!1;function He(c,f,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;rt||$e==null||$e!==Bs(_)||(_=$e,"selectionStart"in _&&we(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Xe&&A(Xe,_)||(Xe=_,_=sb(We,"onSelect"),0<_.length&&(f=new bf("onSelect","select",null,f,g),c.push({event:f,listeners:_}),f.target=$e)))}function st(c,f){var g={};return g[c.toLowerCase()]=f.toLowerCase(),g["Webkit"+c]="webkit"+f,g["Moz"+c]="moz"+f,g}var Ve={animationend:st("Animation","AnimationEnd"),animationiteration:st("Animation","AnimationIteration"),animationstart:st("Animation","AnimationStart"),transitionrun:st("Transition","TransitionRun"),transitionstart:st("Transition","TransitionStart"),transitioncancel:st("Transition","TransitionCancel"),transitionend:st("Transition","TransitionEnd")},tt={},ot={};Aa&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete Ve.animationend.animation,delete Ve.animationiteration.animation,delete Ve.animationstart.animation),"TransitionEvent"in window||delete Ve.transitionend.transition);function Je(c){if(tt[c])return tt[c];if(!Ve[c])return c;var f=Ve[c],g;for(g in f)if(f.hasOwnProperty(g)&&g in ot)return tt[c]=f[g];return c}var ht=Je("animationend"),bt=Je("animationiteration"),wt=Je("animationstart"),Tt=Je("transitionrun"),qt=Je("transitionstart"),Yt=Je("transitioncancel"),Bt=Je("transitionend"),Kt=new Map,Xt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xt.push("scrollEnd");function zt(c,f){Kt.set(c,f),bo(f,[c])}var nn=new WeakMap;function pn(c,f){if(typeof c=="object"&&c!==null){var g=nn.get(c);return g!==void 0?g:(f={value:c,source:f,stack:Dp(f)},nn.set(c,f),f)}return{value:c,source:f,stack:Dp(f)}}var gn=[],Rn=0,Va=0;function _n(){for(var c=Rn,f=Va=Rn=0;f<c;){var g=gn[f];gn[f++]=null;var _=gn[f];gn[f++]=null;var N=gn[f];gn[f++]=null;var $=gn[f];if(gn[f++]=null,_!==null&&N!==null){var oe=_.pending;oe===null?N.next=N:(N.next=oe.next,oe.next=N),_.pending=N}$!==0&&Ra(g,N,$)}}function ra(c,f,g,_){gn[Rn++]=c,gn[Rn++]=f,gn[Rn++]=g,gn[Rn++]=_,Va|=_,c.lanes|=_,c=c.alternate,c!==null&&(c.lanes|=_)}function ua(c,f,g,_){return ra(c,f,g,_),ms(c)}function zs(c,f){return ra(c,null,null,f),ms(c)}function Ra(c,f,g){c.lanes|=g;var _=c.alternate;_!==null&&(_.lanes|=g);for(var N=!1,$=c.return;$!==null;)$.childLanes|=g,_=$.alternate,_!==null&&(_.childLanes|=g),$.tag===22&&(c=$.stateNode,c===null||c._visibility&1||(N=!0)),c=$,$=$.return;return c.tag===3?($=c.stateNode,N&&f!==null&&(N=31-Zt(g),c=$.hiddenUpdates,_=c[N],_===null?c[N]=[f]:_.push(f),f.lane=g|536870912),$):null}function ms(c){if(50<Em)throw Em=0,V_=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var ko={};function N7(c,f,g,_){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(c,f,g,_){return new N7(c,f,g,_)}function B1(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Sl(c,f){var g=c.alternate;return g===null?(g=Wi(c.tag,f,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=f,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&65011712,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,f=c.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g.refCleanup=c.refCleanup,g}function qA(c,f){c.flags&=65011714;var g=c.alternate;return g===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=g.childLanes,c.lanes=g.lanes,c.child=g.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=g.memoizedProps,c.memoizedState=g.memoizedState,c.updateQueue=g.updateQueue,c.type=g.type,f=g.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Cy(c,f,g,_,N,$){var oe=0;if(_=c,typeof c=="function")B1(c)&&(oe=1);else if(typeof c=="string")oe=IU(c,g,fe.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case F:return c=Wi(31,g,f,N),c.elementType=F,c.lanes=$,c;case v:return ed(g.children,N,$,f);case b:oe=8,N|=24;break;case x:return c=Wi(12,g,f,N|2),c.elementType=x,c.lanes=$,c;case T:return c=Wi(13,g,f,N),c.elementType=T,c.lanes=$,c;case j:return c=Wi(19,g,f,N),c.elementType=j,c.lanes=$,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case w:case E:oe=10;break e;case S:oe=9;break e;case C:oe=11;break e;case I:oe=14;break e;case R:oe=16,_=null;break e}oe=29,g=Error(r(130,c===null?"null":typeof c,"")),_=null}return f=Wi(oe,g,f,N),f.elementType=c,f.type=_,f.lanes=$,f}function ed(c,f,g,_){return c=Wi(7,c,_,f),c.lanes=g,c}function z1(c,f,g){return c=Wi(6,c,null,f),c.lanes=g,c}function U1(c,f,g){return f=Wi(4,c.children!==null?c.children:[],c.key,f),f.lanes=g,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var Df=[],Mf=0,ky=null,Ty=0,gs=[],ys=0,td=null,El=1,Cl="";function nd(c,f){Df[Mf++]=Ty,Df[Mf++]=ky,ky=c,Ty=f}function HA(c,f,g){gs[ys++]=El,gs[ys++]=Cl,gs[ys++]=td,td=c;var _=El;c=Cl;var N=32-Zt(_)-1;_&=~(1<<N),g+=1;var $=32-Zt(f)+N;if(30<$){var oe=N-N%5;$=(_&(1<<oe)-1).toString(32),_>>=oe,N-=oe,El=1<<32-Zt(f)+N|g<<N|_,Cl=$+c}else El=1<<$|g<<N|_,Cl=c}function q1(c){c.return!==null&&(nd(c,1),HA(c,1,0))}function H1(c){for(;c===ky;)ky=Df[--Mf],Df[Mf]=null,Ty=Df[--Mf],Df[Mf]=null;for(;c===td;)td=gs[--ys],gs[ys]=null,Cl=gs[--ys],gs[ys]=null,El=gs[--ys],gs[ys]=null}var yi=null,Jr=null,lr=!1,rd=null,To=!1,V1=Error(r(519));function ad(c){var f=Error(r(418,""));throw nm(pn(f,c)),V1}function VA(c){var f=c.stateNode,g=c.type,_=c.memoizedProps;switch(f[pe]=c,f[Re]=_,g){case"dialog":Yn("cancel",f),Yn("close",f);break;case"iframe":case"object":case"embed":Yn("load",f);break;case"video":case"audio":for(g=0;g<km.length;g++)Yn(km[g],f);break;case"source":Yn("error",f);break;case"img":case"image":case"link":Yn("error",f),Yn("load",f);break;case"details":Yn("toggle",f);break;case"input":Yn("invalid",f),Fp(f,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),_o(f);break;case"select":Yn("invalid",f);break;case"textarea":Yn("invalid",f),Lp(f,_.value,_.defaultValue,_.children),_o(f)}g=_.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||_.suppressHydrationWarning===!0||lI(f.textContent,g)?(_.popover!=null&&(Yn("beforetoggle",f),Yn("toggle",f)),_.onScroll!=null&&Yn("scroll",f),_.onScrollEnd!=null&&Yn("scrollend",f),_.onClick!=null&&(f.onclick=ob),f=!0):f=!1,f||ad(c)}function GA(c){for(yi=c.return;yi;)switch(yi.tag){case 5:case 13:To=!1;return;case 27:case 3:To=!0;return;default:yi=yi.return}}function em(c){if(c!==yi)return!1;if(!lr)return GA(c),lr=!0,!1;var f=c.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=c.type,g=!(g!=="form"&&g!=="button")||oS(c.type,c.memoizedProps)),g=!g),g&&Jr&&ad(c),GA(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(g=c.data,g==="/$"){if(f===0){Jr=qs(c.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;c=c.nextSibling}Jr=null}}else f===27?(f=Jr,Vc(c.type)?(c=dS,dS=null,Jr=c):Jr=f):Jr=yi?qs(c.stateNode.nextSibling):null;return!0}function tm(){Jr=yi=null,lr=!1}function KA(){var c=rd;return c!==null&&(Oi===null?Oi=c:Oi.push.apply(Oi,c),rd=null),c}function nm(c){rd===null?rd=[c]:rd.push(c)}var G1=J(null),id=null,kl=null;function Rc(c,f,g){ee(G1,f._currentValue),f._currentValue=g}function Tl(c){c._currentValue=G1.current,Q(G1)}function K1(c,f,g){for(;c!==null;){var _=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),c===g)break;c=c.return}}function W1(c,f,g,_){var N=c.child;for(N!==null&&(N.return=c);N!==null;){var $=N.dependencies;if($!==null){var oe=N.child;$=$.firstContext;e:for(;$!==null;){var _e=$;$=N;for(var ze=0;ze<f.length;ze++)if(_e.context===f[ze]){$.lanes|=g,_e=$.alternate,_e!==null&&(_e.lanes|=g),K1($.return,g,c),_||(oe=null);break e}$=_e.next}}else if(N.tag===18){if(oe=N.return,oe===null)throw Error(r(341));oe.lanes|=g,$=oe.alternate,$!==null&&($.lanes|=g),K1(oe,g,c),oe=null}else oe=N.child;if(oe!==null)oe.return=N;else for(oe=N;oe!==null;){if(oe===c){oe=null;break}if(N=oe.sibling,N!==null){N.return=oe.return,oe=N;break}oe=oe.return}N=oe}}function rm(c,f,g,_){c=null;for(var N=f,$=!1;N!==null;){if(!$){if((N.flags&524288)!==0)$=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var oe=N.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var _e=N.type;Qa(N.pendingProps.value,oe.value)||(c!==null?c.push(_e):c=[_e])}}else if(N===Ae.current){if(oe=N.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(c!==null?c.push(jm):c=[jm])}N=N.return}c!==null&&W1(f,c,g,_),f.flags|=262144}function Ay(c){for(c=c.firstContext;c!==null;){if(!Qa(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function sd(c){id=c,kl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function ei(c){return WA(id,c)}function Ny(c,f){return id===null&&sd(c),WA(c,f)}function WA(c,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},kl===null){if(c===null)throw Error(r(308));kl=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else kl=kl.next=f;return g}var R7=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(g,_){c.push(_)}};this.abort=function(){f.aborted=!0,c.forEach(function(g){return g()})}},I7=e.unstable_scheduleCallback,j7=e.unstable_NormalPriority,ya={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z1(){return{controller:new R7,data:new Map,refCount:0}}function am(c){c.refCount--,c.refCount===0&&I7(j7,function(){c.controller.abort()})}var im=null,Y1=0,Pf=0,Ff=null;function O7(c,f){if(im===null){var g=im=[];Y1=0,Pf=J_(),Ff={status:"pending",value:void 0,then:function(_){g.push(_)}}}return Y1++,f.then(ZA,ZA),f}function ZA(){if(--Y1===0&&im!==null){Ff!==null&&(Ff.status="fulfilled");var c=im;im=null,Pf=0,Ff=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function D7(c,f){var g=[],_={status:"pending",value:null,reason:null,then:function(N){g.push(N)}};return c.then(function(){_.status="fulfilled",_.value=f;for(var N=0;N<g.length;N++)(0,g[N])(f)},function(N){for(_.status="rejected",_.reason=N,N=0;N<g.length;N++)(0,g[N])(void 0)}),_}var YA=ae.S;ae.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&O7(c,f),YA!==null&&YA(c,f)};var od=J(null);function X1(){var c=od.current;return c!==null?c:Pr.pooledCache}function Ry(c,f){f===null?ee(od,od.current):ee(od,f.pool)}function XA(){var c=X1();return c===null?null:{parent:ya._currentValue,pool:c}}var sm=Error(r(460)),JA=Error(r(474)),Iy=Error(r(542)),J1={then:function(){}};function QA(c){return c=c.status,c==="fulfilled"||c==="rejected"}function jy(){}function eN(c,f,g){switch(g=c[g],g===void 0?c.push(f):g!==f&&(f.then(jy,jy),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,nN(c),c;default:if(typeof f.status=="string")f.then(jy,jy);else{if(c=Pr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(_){if(f.status==="pending"){var N=f;N.status="fulfilled",N.value=_}},function(_){if(f.status==="pending"){var N=f;N.status="rejected",N.reason=_}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,nN(c),c}throw om=f,sm}}var om=null;function tN(){if(om===null)throw Error(r(459));var c=om;return om=null,c}function nN(c){if(c===sm||c===Iy)throw Error(r(483))}var Ic=!1;function Q1(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function e_(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function jc(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Oc(c,f,g){var _=c.updateQueue;if(_===null)return null;if(_=_.shared,(gr&2)!==0){var N=_.pending;return N===null?f.next=f:(f.next=N.next,N.next=f),_.pending=f,f=ms(c),Ra(c,null,g),f}return ra(c,_,f,g),ms(c)}function lm(c,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var _=f.lanes;_&=c.pendingLanes,g|=_,f.lanes=g,Ke(c,g)}}function t_(c,f){var g=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var N=null,$=null;if(g=g.firstBaseUpdate,g!==null){do{var oe={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};$===null?N=$=oe:$=$.next=oe,g=g.next}while(g!==null);$===null?N=$=f:$=$.next=f}else N=$=f;g={baseState:_.baseState,firstBaseUpdate:N,lastBaseUpdate:$,shared:_.shared,callbacks:_.callbacks},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=f:c.next=f,g.lastBaseUpdate=f}var n_=!1;function cm(){if(n_){var c=Ff;if(c!==null)throw c}}function um(c,f,g,_){n_=!1;var N=c.updateQueue;Ic=!1;var $=N.firstBaseUpdate,oe=N.lastBaseUpdate,_e=N.shared.pending;if(_e!==null){N.shared.pending=null;var ze=_e,dt=ze.next;ze.next=null,oe===null?$=dt:oe.next=dt,oe=ze;var At=c.alternate;At!==null&&(At=At.updateQueue,_e=At.lastBaseUpdate,_e!==oe&&(_e===null?At.firstBaseUpdate=dt:_e.next=dt,At.lastBaseUpdate=ze))}if($!==null){var Mt=N.baseState;oe=0,At=dt=ze=null,_e=$;do{var mt=_e.lane&-536870913,yt=mt!==_e.lane;if(yt?(nr&mt)===mt:(_&mt)===mt){mt!==0&&mt===Pf&&(n_=!0),At!==null&&(At=At.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Sn=c,yn=_e;mt=f;var Cr=g;switch(yn.tag){case 1:if(Sn=yn.payload,typeof Sn=="function"){Mt=Sn.call(Cr,Mt,mt);break e}Mt=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=yn.payload,mt=typeof Sn=="function"?Sn.call(Cr,Mt,mt):Sn,mt==null)break e;Mt=d({},Mt,mt);break e;case 2:Ic=!0}}mt=_e.callback,mt!==null&&(c.flags|=64,yt&&(c.flags|=8192),yt=N.callbacks,yt===null?N.callbacks=[mt]:yt.push(mt))}else yt={lane:mt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},At===null?(dt=At=yt,ze=Mt):At=At.next=yt,oe|=mt;if(_e=_e.next,_e===null){if(_e=N.shared.pending,_e===null)break;yt=_e,_e=yt.next,yt.next=null,N.lastBaseUpdate=yt,N.shared.pending=null}}while(!0);At===null&&(ze=Mt),N.baseState=ze,N.firstBaseUpdate=dt,N.lastBaseUpdate=At,$===null&&(N.shared.lanes=0),zc|=oe,c.lanes=oe,c.memoizedState=Mt}}function rN(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function aN(c,f){var g=c.callbacks;if(g!==null)for(c.callbacks=null,c=0;c<g.length;c++)rN(g[c],f)}var Lf=J(null),Oy=J(0);function iN(c,f){c=Dl,ee(Oy,c),ee(Lf,f),Dl=c|f.baseLanes}function r_(){ee(Oy,Dl),ee(Lf,Lf.current)}function a_(){Dl=Oy.current,Q(Lf),Q(Oy)}var Dc=0,Un=null,Sr=null,da=null,Dy=!1,$f=!1,ld=!1,My=0,dm=0,Bf=null,M7=0;function aa(){throw Error(r(321))}function i_(c,f){if(f===null)return!1;for(var g=0;g<f.length&&g<c.length;g++)if(!Qa(c[g],f[g]))return!1;return!0}function s_(c,f,g,_,N,$){return Dc=$,Un=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ae.H=c===null||c.memoizedState===null?UN:qN,ld=!1,$=g(_,N),ld=!1,$f&&($=oN(f,g,_,N)),sN(c),$}function sN(c){ae.H=zy;var f=Sr!==null&&Sr.next!==null;if(Dc=0,da=Sr=Un=null,Dy=!1,dm=0,Bf=null,f)throw Error(r(300));c===null||Ia||(c=c.dependencies,c!==null&&Ay(c)&&(Ia=!0))}function oN(c,f,g,_){Un=c;var N=0;do{if($f&&(Bf=null),dm=0,$f=!1,25<=N)throw Error(r(301));if(N+=1,da=Sr=null,c.updateQueue!=null){var $=c.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}ae.H=U7,$=f(g,_)}while($f);return $}function P7(){var c=ae.H,f=c.useState()[0];return f=typeof f.then=="function"?fm(f):f,c=c.useState()[0],(Sr!==null?Sr.memoizedState:null)!==c&&(Un.flags|=1024),f}function o_(){var c=My!==0;return My=0,c}function l_(c,f,g){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~g}function c_(c){if(Dy){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Dy=!1}Dc=0,da=Sr=Un=null,$f=!1,dm=My=0,Bf=null}function Ii(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return da===null?Un.memoizedState=da=c:da=da.next=c,da}function fa(){if(Sr===null){var c=Un.alternate;c=c!==null?c.memoizedState:null}else c=Sr.next;var f=da===null?Un.memoizedState:da.next;if(f!==null)da=f,Sr=c;else{if(c===null)throw Un.alternate===null?Error(r(467)):Error(r(310));Sr=c,c={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},da===null?Un.memoizedState=da=c:da=da.next=c}return da}function u_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fm(c){var f=dm;return dm+=1,Bf===null&&(Bf=[]),c=eN(Bf,c,f),f=Un,(da===null?f.memoizedState:da.next)===null&&(f=f.alternate,ae.H=f===null||f.memoizedState===null?UN:qN),c}function Py(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return fm(c);if(c.$$typeof===E)return ei(c)}throw Error(r(438,String(c)))}function d_(c){var f=null,g=Un.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var _=Un.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(f={data:_.data.map(function(N){return N.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=u_(),Un.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(c),_=0;_<c;_++)g[_]=B;return f.index++,g}function Al(c,f){return typeof f=="function"?f(c):f}function Fy(c){var f=fa();return f_(f,Sr,c)}function f_(c,f,g){var _=c.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=g;var N=c.baseQueue,$=_.pending;if($!==null){if(N!==null){var oe=N.next;N.next=$.next,$.next=oe}f.baseQueue=N=$,_.pending=null}if($=c.baseState,N===null)c.memoizedState=$;else{f=N.next;var _e=oe=null,ze=null,dt=f,At=!1;do{var Mt=dt.lane&-536870913;if(Mt!==dt.lane?(nr&Mt)===Mt:(Dc&Mt)===Mt){var mt=dt.revertLane;if(mt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Mt===Pf&&(At=!0);else if((Dc&mt)===mt){dt=dt.next,mt===Pf&&(At=!0);continue}else Mt={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=Mt,oe=$):ze=ze.next=Mt,Un.lanes|=mt,zc|=mt;Mt=dt.action,ld&&g($,Mt),$=dt.hasEagerState?dt.eagerState:g($,Mt)}else mt={lane:Mt,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=mt,oe=$):ze=ze.next=mt,Un.lanes|=Mt,zc|=Mt;dt=dt.next}while(dt!==null&&dt!==f);if(ze===null?oe=$:ze.next=_e,!Qa($,c.memoizedState)&&(Ia=!0,At&&(g=Ff,g!==null)))throw g;c.memoizedState=$,c.baseState=oe,c.baseQueue=ze,_.lastRenderedState=$}return N===null&&(_.lanes=0),[c.memoizedState,_.dispatch]}function h_(c){var f=fa(),g=f.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var _=g.dispatch,N=g.pending,$=f.memoizedState;if(N!==null){g.pending=null;var oe=N=N.next;do $=c($,oe.action),oe=oe.next;while(oe!==N);Qa($,f.memoizedState)||(Ia=!0),f.memoizedState=$,f.baseQueue===null&&(f.baseState=$),g.lastRenderedState=$}return[$,_]}function lN(c,f,g){var _=Un,N=fa(),$=lr;if($){if(g===void 0)throw Error(r(407));g=g()}else g=f();var oe=!Qa((Sr||N).memoizedState,g);oe&&(N.memoizedState=g,Ia=!0),N=N.queue;var _e=dN.bind(null,_,N,c);if(hm(2048,8,_e,[c]),N.getSnapshot!==f||oe||da!==null&&da.memoizedState.tag&1){if(_.flags|=2048,zf(9,Ly(),uN.bind(null,_,N,g,f),null),Pr===null)throw Error(r(349));$||(Dc&124)!==0||cN(_,f,g)}return g}function cN(c,f,g){c.flags|=16384,c={getSnapshot:f,value:g},f=Un.updateQueue,f===null?(f=u_(),Un.updateQueue=f,f.stores=[c]):(g=f.stores,g===null?f.stores=[c]:g.push(c))}function uN(c,f,g,_){f.value=g,f.getSnapshot=_,fN(f)&&hN(c)}function dN(c,f,g){return g(function(){fN(f)&&hN(c)})}function fN(c){var f=c.getSnapshot;c=c.value;try{var g=f();return!Qa(c,g)}catch{return!0}}function hN(c){var f=zs(c,2);f!==null&&Qi(f,c,2)}function p_(c){var f=Ii();if(typeof c=="function"){var g=c;if(c=g(),ld){Dt(!0);try{g()}finally{Dt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:c},f}function pN(c,f,g,_){return c.baseState=g,f_(c,Sr,typeof _=="function"?_:Al)}function F7(c,f,g,_,N){if(By(c))throw Error(r(485));if(c=f.action,c!==null){var $={payload:N,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){$.listeners.push(oe)}};ae.T!==null?g(!0):$.isTransition=!1,_($),g=f.pending,g===null?($.next=f.pending=$,mN(f,$)):($.next=g.next,f.pending=g.next=$)}}function mN(c,f){var g=f.action,_=f.payload,N=c.state;if(f.isTransition){var $=ae.T,oe={};ae.T=oe;try{var _e=g(N,_),ze=ae.S;ze!==null&&ze(oe,_e),gN(c,f,_e)}catch(dt){m_(c,f,dt)}finally{ae.T=$}}else try{$=g(N,_),gN(c,f,$)}catch(dt){m_(c,f,dt)}}function gN(c,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(_){yN(c,f,_)},function(_){return m_(c,f,_)}):yN(c,f,g)}function yN(c,f,g){f.status="fulfilled",f.value=g,bN(f),c.state=g,f=c.pending,f!==null&&(g=f.next,g===f?c.pending=null:(g=g.next,f.next=g,mN(c,g)))}function m_(c,f,g){var _=c.pending;if(c.pending=null,_!==null){_=_.next;do f.status="rejected",f.reason=g,bN(f),f=f.next;while(f!==_)}c.action=null}function bN(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function vN(c,f){return f}function wN(c,f){if(lr){var g=Pr.formState;if(g!==null){e:{var _=Un;if(lr){if(Jr){t:{for(var N=Jr,$=To;N.nodeType!==8;){if(!$){N=null;break t}if(N=qs(N.nextSibling),N===null){N=null;break t}}$=N.data,N=$==="F!"||$==="F"?N:null}if(N){Jr=qs(N.nextSibling),_=N.data==="F!";break e}}ad(_)}_=!1}_&&(f=g[0])}}return g=Ii(),g.memoizedState=g.baseState=f,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vN,lastRenderedState:f},g.queue=_,g=$N.bind(null,Un,_),_.dispatch=g,_=p_(!1),$=w_.bind(null,Un,!1,_.queue),_=Ii(),N={state:f,dispatch:null,action:c,pending:null},_.queue=N,g=F7.bind(null,Un,N,$,g),N.dispatch=g,_.memoizedState=c,[f,g,!1]}function xN(c){var f=fa();return _N(f,Sr,c)}function _N(c,f,g){if(f=f_(c,f,vN)[0],c=Fy(Al)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var _=fm(f)}catch(oe){throw oe===sm?Iy:oe}else _=f;f=fa();var N=f.queue,$=N.dispatch;return g!==f.memoizedState&&(Un.flags|=2048,zf(9,Ly(),L7.bind(null,N,g),null)),[_,$,c]}function L7(c,f){c.action=f}function SN(c){var f=fa(),g=Sr;if(g!==null)return _N(f,g,c);fa(),f=f.memoizedState,g=fa();var _=g.queue.dispatch;return g.memoizedState=c,[f,_,!1]}function zf(c,f,g,_){return c={tag:c,create:g,deps:_,inst:f,next:null},f=Un.updateQueue,f===null&&(f=u_(),Un.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=c.next=c:(_=g.next,g.next=c,c.next=_,f.lastEffect=c),c}function Ly(){return{destroy:void 0,resource:void 0}}function EN(){return fa().memoizedState}function $y(c,f,g,_){var N=Ii();_=_===void 0?null:_,Un.flags|=c,N.memoizedState=zf(1|f,Ly(),g,_)}function hm(c,f,g,_){var N=fa();_=_===void 0?null:_;var $=N.memoizedState.inst;Sr!==null&&_!==null&&i_(_,Sr.memoizedState.deps)?N.memoizedState=zf(f,$,g,_):(Un.flags|=c,N.memoizedState=zf(1|f,$,g,_))}function CN(c,f){$y(8390656,8,c,f)}function kN(c,f){hm(2048,8,c,f)}function TN(c,f){return hm(4,2,c,f)}function AN(c,f){return hm(4,4,c,f)}function NN(c,f){if(typeof f=="function"){c=c();var g=f(c);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function RN(c,f,g){g=g!=null?g.concat([c]):null,hm(4,4,NN.bind(null,f,c),g)}function g_(){}function IN(c,f){var g=fa();f=f===void 0?null:f;var _=g.memoizedState;return f!==null&&i_(f,_[1])?_[0]:(g.memoizedState=[c,f],c)}function jN(c,f){var g=fa();f=f===void 0?null:f;var _=g.memoizedState;if(f!==null&&i_(f,_[1]))return _[0];if(_=c(),ld){Dt(!0);try{c()}finally{Dt(!1)}}return g.memoizedState=[_,f],_}function y_(c,f,g){return g===void 0||(Dc&1073741824)!==0?c.memoizedState=f:(c.memoizedState=g,c=MR(),Un.lanes|=c,zc|=c,g)}function ON(c,f,g,_){return Qa(g,f)?g:Lf.current!==null?(c=y_(c,g,_),Qa(c,f)||(Ia=!0),c):(Dc&42)===0?(Ia=!0,c.memoizedState=g):(c=MR(),Un.lanes|=c,zc|=c,f)}function DN(c,f,g,_,N){var $=ne.p;ne.p=$!==0&&8>$?$:8;var oe=ae.T,_e={};ae.T=_e,w_(c,!1,f,g);try{var ze=N(),dt=ae.S;if(dt!==null&&dt(_e,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var At=D7(ze,_);pm(c,f,At,Ji(c))}else pm(c,f,_,Ji(c))}catch(Mt){pm(c,f,{then:function(){},status:"rejected",reason:Mt},Ji())}finally{ne.p=$,ae.T=oe}}function $7(){}function b_(c,f,g,_){if(c.tag!==5)throw Error(r(476));var N=MN(c).queue;DN(c,N,f,X,g===null?$7:function(){return PN(c),g(_)})}function MN(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:X},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:g},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function PN(c){var f=MN(c).next.queue;pm(c,f,{},Ji())}function v_(){return ei(jm)}function FN(){return fa().memoizedState}function LN(){return fa().memoizedState}function B7(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var g=Ji();c=jc(g);var _=Oc(f,c,g);_!==null&&(Qi(_,f,g),lm(_,f,g)),f={cache:Z1()},c.payload=f;return}f=f.return}}function z7(c,f,g){var _=Ji();g={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},By(c)?BN(f,g):(g=ua(c,f,g,_),g!==null&&(Qi(g,c,_),zN(g,f,_)))}function $N(c,f,g){var _=Ji();pm(c,f,g,_)}function pm(c,f,g,_){var N={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(By(c))BN(f,N);else{var $=c.alternate;if(c.lanes===0&&($===null||$.lanes===0)&&($=f.lastRenderedReducer,$!==null))try{var oe=f.lastRenderedState,_e=$(oe,g);if(N.hasEagerState=!0,N.eagerState=_e,Qa(_e,oe))return ra(c,f,N,0),Pr===null&&_n(),!1}catch{}finally{}if(g=ua(c,f,N,_),g!==null)return Qi(g,c,_),zN(g,f,_),!0}return!1}function w_(c,f,g,_){if(_={lane:2,revertLane:J_(),action:_,hasEagerState:!1,eagerState:null,next:null},By(c)){if(f)throw Error(r(479))}else f=ua(c,g,_,2),f!==null&&Qi(f,c,2)}function By(c){var f=c.alternate;return c===Un||f!==null&&f===Un}function BN(c,f){$f=Dy=!0;var g=c.pending;g===null?f.next=f:(f.next=g.next,g.next=f),c.pending=f}function zN(c,f,g){if((g&4194048)!==0){var _=f.lanes;_&=c.pendingLanes,g|=_,f.lanes=g,Ke(c,g)}}var zy={readContext:ei,use:Py,useCallback:aa,useContext:aa,useEffect:aa,useImperativeHandle:aa,useLayoutEffect:aa,useInsertionEffect:aa,useMemo:aa,useReducer:aa,useRef:aa,useState:aa,useDebugValue:aa,useDeferredValue:aa,useTransition:aa,useSyncExternalStore:aa,useId:aa,useHostTransitionStatus:aa,useFormState:aa,useActionState:aa,useOptimistic:aa,useMemoCache:aa,useCacheRefresh:aa},UN={readContext:ei,use:Py,useCallback:function(c,f){return Ii().memoizedState=[c,f===void 0?null:f],c},useContext:ei,useEffect:CN,useImperativeHandle:function(c,f,g){g=g!=null?g.concat([c]):null,$y(4194308,4,NN.bind(null,f,c),g)},useLayoutEffect:function(c,f){return $y(4194308,4,c,f)},useInsertionEffect:function(c,f){$y(4,2,c,f)},useMemo:function(c,f){var g=Ii();f=f===void 0?null:f;var _=c();if(ld){Dt(!0);try{c()}finally{Dt(!1)}}return g.memoizedState=[_,f],_},useReducer:function(c,f,g){var _=Ii();if(g!==void 0){var N=g(f);if(ld){Dt(!0);try{g(f)}finally{Dt(!1)}}}else N=f;return _.memoizedState=_.baseState=N,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:N},_.queue=c,c=c.dispatch=z7.bind(null,Un,c),[_.memoizedState,c]},useRef:function(c){var f=Ii();return c={current:c},f.memoizedState=c},useState:function(c){c=p_(c);var f=c.queue,g=$N.bind(null,Un,f);return f.dispatch=g,[c.memoizedState,g]},useDebugValue:g_,useDeferredValue:function(c,f){var g=Ii();return y_(g,c,f)},useTransition:function(){var c=p_(!1);return c=DN.bind(null,Un,c.queue,!0,!1),Ii().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,g){var _=Un,N=Ii();if(lr){if(g===void 0)throw Error(r(407));g=g()}else{if(g=f(),Pr===null)throw Error(r(349));(nr&124)!==0||cN(_,f,g)}N.memoizedState=g;var $={value:g,getSnapshot:f};return N.queue=$,CN(dN.bind(null,_,$,c),[c]),_.flags|=2048,zf(9,Ly(),uN.bind(null,_,$,g,f),null),g},useId:function(){var c=Ii(),f=Pr.identifierPrefix;if(lr){var g=Cl,_=El;g=(_&~(1<<32-Zt(_)-1)).toString(32)+g,f=""+f+"R"+g,g=My++,0<g&&(f+="H"+g.toString(32)),f+=""}else g=M7++,f=""+f+"r"+g.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:v_,useFormState:wN,useActionState:wN,useOptimistic:function(c){var f=Ii();f.memoizedState=f.baseState=c;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=w_.bind(null,Un,!0,g),g.dispatch=f,[c,f]},useMemoCache:d_,useCacheRefresh:function(){return Ii().memoizedState=B7.bind(null,Un)}},qN={readContext:ei,use:Py,useCallback:IN,useContext:ei,useEffect:kN,useImperativeHandle:RN,useInsertionEffect:TN,useLayoutEffect:AN,useMemo:jN,useReducer:Fy,useRef:EN,useState:function(){return Fy(Al)},useDebugValue:g_,useDeferredValue:function(c,f){var g=fa();return ON(g,Sr.memoizedState,c,f)},useTransition:function(){var c=Fy(Al)[0],f=fa().memoizedState;return[typeof c=="boolean"?c:fm(c),f]},useSyncExternalStore:lN,useId:FN,useHostTransitionStatus:v_,useFormState:xN,useActionState:xN,useOptimistic:function(c,f){var g=fa();return pN(g,Sr,c,f)},useMemoCache:d_,useCacheRefresh:LN},U7={readContext:ei,use:Py,useCallback:IN,useContext:ei,useEffect:kN,useImperativeHandle:RN,useInsertionEffect:TN,useLayoutEffect:AN,useMemo:jN,useReducer:h_,useRef:EN,useState:function(){return h_(Al)},useDebugValue:g_,useDeferredValue:function(c,f){var g=fa();return Sr===null?y_(g,c,f):ON(g,Sr.memoizedState,c,f)},useTransition:function(){var c=h_(Al)[0],f=fa().memoizedState;return[typeof c=="boolean"?c:fm(c),f]},useSyncExternalStore:lN,useId:FN,useHostTransitionStatus:v_,useFormState:SN,useActionState:SN,useOptimistic:function(c,f){var g=fa();return Sr!==null?pN(g,Sr,c,f):(g.baseState=c,[c,g.queue.dispatch])},useMemoCache:d_,useCacheRefresh:LN},Uf=null,mm=0;function Uy(c){var f=mm;return mm+=1,Uf===null&&(Uf=[]),eN(Uf,c,f)}function gm(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function qy(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function HN(c){var f=c._init;return f(c._payload)}function VN(c){function f(at,Ze){if(c){var ct=at.deletions;ct===null?(at.deletions=[Ze],at.flags|=16):ct.push(Ze)}}function g(at,Ze){if(!c)return null;for(;Ze!==null;)f(at,Ze),Ze=Ze.sibling;return null}function _(at){for(var Ze=new Map;at!==null;)at.key!==null?Ze.set(at.key,at):Ze.set(at.index,at),at=at.sibling;return Ze}function N(at,Ze){return at=Sl(at,Ze),at.index=0,at.sibling=null,at}function $(at,Ze,ct){return at.index=ct,c?(ct=at.alternate,ct!==null?(ct=ct.index,ct<Ze?(at.flags|=67108866,Ze):ct):(at.flags|=67108866,Ze)):(at.flags|=1048576,Ze)}function oe(at){return c&&at.alternate===null&&(at.flags|=67108866),at}function _e(at,Ze,ct,jt){return Ze===null||Ze.tag!==6?(Ze=z1(ct,at.mode,jt),Ze.return=at,Ze):(Ze=N(Ze,ct),Ze.return=at,Ze)}function ze(at,Ze,ct,jt){var sn=ct.type;return sn===v?At(at,Ze,ct.props.children,jt,ct.key):Ze!==null&&(Ze.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===R&&HN(sn)===Ze.type)?(Ze=N(Ze,ct.props),gm(Ze,ct),Ze.return=at,Ze):(Ze=Cy(ct.type,ct.key,ct.props,null,at.mode,jt),gm(Ze,ct),Ze.return=at,Ze)}function dt(at,Ze,ct,jt){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ct.containerInfo||Ze.stateNode.implementation!==ct.implementation?(Ze=U1(ct,at.mode,jt),Ze.return=at,Ze):(Ze=N(Ze,ct.children||[]),Ze.return=at,Ze)}function At(at,Ze,ct,jt,sn){return Ze===null||Ze.tag!==7?(Ze=ed(ct,at.mode,jt,sn),Ze.return=at,Ze):(Ze=N(Ze,ct),Ze.return=at,Ze)}function Mt(at,Ze,ct){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=z1(""+Ze,at.mode,ct),Ze.return=at,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case m:return ct=Cy(Ze.type,Ze.key,Ze.props,null,at.mode,ct),gm(ct,Ze),ct.return=at,ct;case y:return Ze=U1(Ze,at.mode,ct),Ze.return=at,Ze;case R:var jt=Ze._init;return Ze=jt(Ze._payload),Mt(at,Ze,ct)}if(ue(Ze)||D(Ze))return Ze=ed(Ze,at.mode,ct,null),Ze.return=at,Ze;if(typeof Ze.then=="function")return Mt(at,Uy(Ze),ct);if(Ze.$$typeof===E)return Mt(at,Ny(at,Ze),ct);qy(at,Ze)}return null}function mt(at,Ze,ct,jt){var sn=Ze!==null?Ze.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return sn!==null?null:_e(at,Ze,""+ct,jt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:return ct.key===sn?ze(at,Ze,ct,jt):null;case y:return ct.key===sn?dt(at,Ze,ct,jt):null;case R:return sn=ct._init,ct=sn(ct._payload),mt(at,Ze,ct,jt)}if(ue(ct)||D(ct))return sn!==null?null:At(at,Ze,ct,jt,null);if(typeof ct.then=="function")return mt(at,Ze,Uy(ct),jt);if(ct.$$typeof===E)return mt(at,Ze,Ny(at,ct),jt);qy(at,ct)}return null}function yt(at,Ze,ct,jt,sn){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return at=at.get(ct)||null,_e(Ze,at,""+jt,sn);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case m:return at=at.get(jt.key===null?ct:jt.key)||null,ze(Ze,at,jt,sn);case y:return at=at.get(jt.key===null?ct:jt.key)||null,dt(Ze,at,jt,sn);case R:var Vn=jt._init;return jt=Vn(jt._payload),yt(at,Ze,ct,jt,sn)}if(ue(jt)||D(jt))return at=at.get(ct)||null,At(Ze,at,jt,sn,null);if(typeof jt.then=="function")return yt(at,Ze,ct,Uy(jt),sn);if(jt.$$typeof===E)return yt(at,Ze,ct,Ny(Ze,jt),sn);qy(Ze,jt)}return null}function Sn(at,Ze,ct,jt){for(var sn=null,Vn=null,fn=Ze,wn=Ze=0,Oa=null;fn!==null&&wn<ct.length;wn++){fn.index>wn?(Oa=fn,fn=null):Oa=fn.sibling;var or=mt(at,fn,ct[wn],jt);if(or===null){fn===null&&(fn=Oa);break}c&&fn&&or.alternate===null&&f(at,fn),Ze=$(or,Ze,wn),Vn===null?sn=or:Vn.sibling=or,Vn=or,fn=Oa}if(wn===ct.length)return g(at,fn),lr&&nd(at,wn),sn;if(fn===null){for(;wn<ct.length;wn++)fn=Mt(at,ct[wn],jt),fn!==null&&(Ze=$(fn,Ze,wn),Vn===null?sn=fn:Vn.sibling=fn,Vn=fn);return lr&&nd(at,wn),sn}for(fn=_(fn);wn<ct.length;wn++)Oa=yt(fn,at,wn,ct[wn],jt),Oa!==null&&(c&&Oa.alternate!==null&&fn.delete(Oa.key===null?wn:Oa.key),Ze=$(Oa,Ze,wn),Vn===null?sn=Oa:Vn.sibling=Oa,Vn=Oa);return c&&fn.forEach(function(Yc){return f(at,Yc)}),lr&&nd(at,wn),sn}function yn(at,Ze,ct,jt){if(ct==null)throw Error(r(151));for(var sn=null,Vn=null,fn=Ze,wn=Ze=0,Oa=null,or=ct.next();fn!==null&&!or.done;wn++,or=ct.next()){fn.index>wn?(Oa=fn,fn=null):Oa=fn.sibling;var Yc=mt(at,fn,or.value,jt);if(Yc===null){fn===null&&(fn=Oa);break}c&&fn&&Yc.alternate===null&&f(at,fn),Ze=$(Yc,Ze,wn),Vn===null?sn=Yc:Vn.sibling=Yc,Vn=Yc,fn=Oa}if(or.done)return g(at,fn),lr&&nd(at,wn),sn;if(fn===null){for(;!or.done;wn++,or=ct.next())or=Mt(at,or.value,jt),or!==null&&(Ze=$(or,Ze,wn),Vn===null?sn=or:Vn.sibling=or,Vn=or);return lr&&nd(at,wn),sn}for(fn=_(fn);!or.done;wn++,or=ct.next())or=yt(fn,at,wn,or.value,jt),or!==null&&(c&&or.alternate!==null&&fn.delete(or.key===null?wn:or.key),Ze=$(or,Ze,wn),Vn===null?sn=or:Vn.sibling=or,Vn=or);return c&&fn.forEach(function(qU){return f(at,qU)}),lr&&nd(at,wn),sn}function Cr(at,Ze,ct,jt){if(typeof ct=="object"&&ct!==null&&ct.type===v&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:e:{for(var sn=ct.key;Ze!==null;){if(Ze.key===sn){if(sn=ct.type,sn===v){if(Ze.tag===7){g(at,Ze.sibling),jt=N(Ze,ct.props.children),jt.return=at,at=jt;break e}}else if(Ze.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===R&&HN(sn)===Ze.type){g(at,Ze.sibling),jt=N(Ze,ct.props),gm(jt,ct),jt.return=at,at=jt;break e}g(at,Ze);break}else f(at,Ze);Ze=Ze.sibling}ct.type===v?(jt=ed(ct.props.children,at.mode,jt,ct.key),jt.return=at,at=jt):(jt=Cy(ct.type,ct.key,ct.props,null,at.mode,jt),gm(jt,ct),jt.return=at,at=jt)}return oe(at);case y:e:{for(sn=ct.key;Ze!==null;){if(Ze.key===sn)if(Ze.tag===4&&Ze.stateNode.containerInfo===ct.containerInfo&&Ze.stateNode.implementation===ct.implementation){g(at,Ze.sibling),jt=N(Ze,ct.children||[]),jt.return=at,at=jt;break e}else{g(at,Ze);break}else f(at,Ze);Ze=Ze.sibling}jt=U1(ct,at.mode,jt),jt.return=at,at=jt}return oe(at);case R:return sn=ct._init,ct=sn(ct._payload),Cr(at,Ze,ct,jt)}if(ue(ct))return Sn(at,Ze,ct,jt);if(D(ct)){if(sn=D(ct),typeof sn!="function")throw Error(r(150));return ct=sn.call(ct),yn(at,Ze,ct,jt)}if(typeof ct.then=="function")return Cr(at,Ze,Uy(ct),jt);if(ct.$$typeof===E)return Cr(at,Ze,Ny(at,ct),jt);qy(at,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ze!==null&&Ze.tag===6?(g(at,Ze.sibling),jt=N(Ze,ct),jt.return=at,at=jt):(g(at,Ze),jt=z1(ct,at.mode,jt),jt.return=at,at=jt),oe(at)):g(at,Ze)}return function(at,Ze,ct,jt){try{mm=0;var sn=Cr(at,Ze,ct,jt);return Uf=null,sn}catch(fn){if(fn===sm||fn===Iy)throw fn;var Vn=Wi(29,fn,null,at.mode);return Vn.lanes=jt,Vn.return=at,Vn}finally{}}}var qf=VN(!0),GN=VN(!1),bs=J(null),Ao=null;function Mc(c){var f=c.alternate;ee(ba,ba.current&1),ee(bs,c),Ao===null&&(f===null||Lf.current!==null||f.memoizedState!==null)&&(Ao=c)}function KN(c){if(c.tag===22){if(ee(ba,ba.current),ee(bs,c),Ao===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(Ao=c)}}else Pc()}function Pc(){ee(ba,ba.current),ee(bs,bs.current)}function Nl(c){Q(bs),Ao===c&&(Ao=null),Q(ba)}var ba=J(0);function Hy(c){for(var f=c;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||uS(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function x_(c,f,g,_){f=c.memoizedState,g=g(_,f),g=g==null?f:d({},f,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var __={enqueueSetState:function(c,f,g){c=c._reactInternals;var _=Ji(),N=jc(_);N.payload=f,g!=null&&(N.callback=g),f=Oc(c,N,_),f!==null&&(Qi(f,c,_),lm(f,c,_))},enqueueReplaceState:function(c,f,g){c=c._reactInternals;var _=Ji(),N=jc(_);N.tag=1,N.payload=f,g!=null&&(N.callback=g),f=Oc(c,N,_),f!==null&&(Qi(f,c,_),lm(f,c,_))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var g=Ji(),_=jc(g);_.tag=2,f!=null&&(_.callback=f),f=Oc(c,_,g),f!==null&&(Qi(f,c,g),lm(f,c,g))}};function WN(c,f,g,_,N,$,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,$,oe):f.prototype&&f.prototype.isPureReactComponent?!A(g,_)||!A(N,$):!0}function ZN(c,f,g,_){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,_),f.state!==c&&__.enqueueReplaceState(f,f.state,null)}function cd(c,f){var g=f;if("ref"in f){g={};for(var _ in f)_!=="ref"&&(g[_]=f[_])}if(c=c.defaultProps){g===f&&(g=d({},g));for(var N in c)g[N]===void 0&&(g[N]=c[N])}return g}var Vy=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof ea=="object"&&typeof ea.emit=="function"){ea.emit("uncaughtException",c);return}console.error(c)};function YN(c){Vy(c)}function XN(c){console.error(c)}function JN(c){Vy(c)}function Gy(c,f){try{var g=c.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(_){setTimeout(function(){throw _})}}function QN(c,f,g){try{var _=c.onCaughtError;_(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function S_(c,f,g){return g=jc(g),g.tag=3,g.payload={element:null},g.callback=function(){Gy(c,f)},g}function eR(c){return c=jc(c),c.tag=3,c}function tR(c,f,g,_){var N=g.type.getDerivedStateFromError;if(typeof N=="function"){var $=_.value;c.payload=function(){return N($)},c.callback=function(){QN(f,g,_)}}var oe=g.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(c.callback=function(){QN(f,g,_),typeof N!="function"&&(Uc===null?Uc=new Set([this]):Uc.add(this));var _e=_.stack;this.componentDidCatch(_.value,{componentStack:_e!==null?_e:""})})}function q7(c,f,g,_,N){if(g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(f=g.alternate,f!==null&&rm(f,g,N,!0),g=bs.current,g!==null){switch(g.tag){case 13:return Ao===null?K_():g.alternate===null&&Qr===0&&(Qr=3),g.flags&=-257,g.flags|=65536,g.lanes=N,_===J1?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([_]):f.add(_),Z_(c,_,N)),!1;case 22:return g.flags|=65536,_===J1?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([_])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([_]):g.add(_)),Z_(c,_,N)),!1}throw Error(r(435,g.tag))}return Z_(c,_,N),K_(),!1}if(lr)return f=bs.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=N,_!==V1&&(c=Error(r(422),{cause:_}),nm(pn(c,g)))):(_!==V1&&(f=Error(r(423),{cause:_}),nm(pn(f,g))),c=c.current.alternate,c.flags|=65536,N&=-N,c.lanes|=N,_=pn(_,g),N=S_(c.stateNode,_,N),t_(c,N),Qr!==4&&(Qr=2)),!1;var $=Error(r(520),{cause:_});if($=pn($,g),Sm===null?Sm=[$]:Sm.push($),Qr!==4&&(Qr=2),f===null)return!0;_=pn(_,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,c=N&-N,g.lanes|=c,c=S_(g.stateNode,_,c),t_(g,c),!1;case 1:if(f=g.type,$=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Uc===null||!Uc.has($))))return g.flags|=65536,N&=-N,g.lanes|=N,N=eR(N),tR(N,c,g,_),t_(g,N),!1}g=g.return}while(g!==null);return!1}var nR=Error(r(461)),Ia=!1;function Ga(c,f,g,_){f.child=c===null?GN(f,null,g,_):qf(f,c.child,g,_)}function rR(c,f,g,_,N){g=g.render;var $=f.ref;if("ref"in _){var oe={};for(var _e in _)_e!=="ref"&&(oe[_e]=_[_e])}else oe=_;return sd(f),_=s_(c,f,g,oe,$,N),_e=o_(),c!==null&&!Ia?(l_(c,f,N),Rl(c,f,N)):(lr&&_e&&q1(f),f.flags|=1,Ga(c,f,_,N),f.child)}function aR(c,f,g,_,N){if(c===null){var $=g.type;return typeof $=="function"&&!B1($)&&$.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=$,iR(c,f,$,_,N)):(c=Cy(g.type,null,_,f,f.mode,N),c.ref=f.ref,c.return=f,f.child=c)}if($=c.child,!I_(c,N)){var oe=$.memoizedProps;if(g=g.compare,g=g!==null?g:A,g(oe,_)&&c.ref===f.ref)return Rl(c,f,N)}return f.flags|=1,c=Sl($,_),c.ref=f.ref,c.return=f,f.child=c}function iR(c,f,g,_,N){if(c!==null){var $=c.memoizedProps;if(A($,_)&&c.ref===f.ref)if(Ia=!1,f.pendingProps=_=$,I_(c,N))(c.flags&131072)!==0&&(Ia=!0);else return f.lanes=c.lanes,Rl(c,f,N)}return E_(c,f,g,_,N)}function sR(c,f,g){var _=f.pendingProps,N=_.children,$=c!==null?c.memoizedState:null;if(_.mode==="hidden"){if((f.flags&128)!==0){if(_=$!==null?$.baseLanes|g:g,c!==null){for(N=f.child=c.child,$=0;N!==null;)$=$|N.lanes|N.childLanes,N=N.sibling;f.childLanes=$&~_}else f.childLanes=0,f.child=null;return oR(c,f,_,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Ry(f,$!==null?$.cachePool:null),$!==null?iN(f,$):r_(),KN(f);else return f.lanes=f.childLanes=536870912,oR(c,f,$!==null?$.baseLanes|g:g,g)}else $!==null?(Ry(f,$.cachePool),iN(f,$),Pc(),f.memoizedState=null):(c!==null&&Ry(f,null),r_(),Pc());return Ga(c,f,N,g),f.child}function oR(c,f,g,_){var N=X1();return N=N===null?null:{parent:ya._currentValue,pool:N},f.memoizedState={baseLanes:g,cachePool:N},c!==null&&Ry(f,null),r_(),KN(f),c!==null&&rm(c,f,_,!0),null}function Ky(c,f){var g=f.ref;if(g===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(c===null||c.ref!==g)&&(f.flags|=4194816)}}function E_(c,f,g,_,N){return sd(f),g=s_(c,f,g,_,void 0,N),_=o_(),c!==null&&!Ia?(l_(c,f,N),Rl(c,f,N)):(lr&&_&&q1(f),f.flags|=1,Ga(c,f,g,N),f.child)}function lR(c,f,g,_,N,$){return sd(f),f.updateQueue=null,g=oN(f,_,g,N),sN(c),_=o_(),c!==null&&!Ia?(l_(c,f,$),Rl(c,f,$)):(lr&&_&&q1(f),f.flags|=1,Ga(c,f,g,$),f.child)}function cR(c,f,g,_,N){if(sd(f),f.stateNode===null){var $=ko,oe=g.contextType;typeof oe=="object"&&oe!==null&&($=ei(oe)),$=new g(_,$),f.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=__,f.stateNode=$,$._reactInternals=f,$=f.stateNode,$.props=_,$.state=f.memoizedState,$.refs={},Q1(f),oe=g.contextType,$.context=typeof oe=="object"&&oe!==null?ei(oe):ko,$.state=f.memoizedState,oe=g.getDerivedStateFromProps,typeof oe=="function"&&(x_(f,g,oe,_),$.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(oe=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),oe!==$.state&&__.enqueueReplaceState($,$.state,null),um(f,_,$,N),cm(),$.state=f.memoizedState),typeof $.componentDidMount=="function"&&(f.flags|=4194308),_=!0}else if(c===null){$=f.stateNode;var _e=f.memoizedProps,ze=cd(g,_e);$.props=ze;var dt=$.context,At=g.contextType;oe=ko,typeof At=="object"&&At!==null&&(oe=ei(At));var Mt=g.getDerivedStateFromProps;At=typeof Mt=="function"||typeof $.getSnapshotBeforeUpdate=="function",_e=f.pendingProps!==_e,At||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(_e||dt!==oe)&&ZN(f,$,_,oe),Ic=!1;var mt=f.memoizedState;$.state=mt,um(f,_,$,N),cm(),dt=f.memoizedState,_e||mt!==dt||Ic?(typeof Mt=="function"&&(x_(f,g,Mt,_),dt=f.memoizedState),(ze=Ic||WN(f,g,ze,_,mt,dt,oe))?(At||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(f.flags|=4194308)):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=dt),$.props=_,$.state=dt,$.context=oe,_=ze):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{$=f.stateNode,e_(c,f),oe=f.memoizedProps,At=cd(g,oe),$.props=At,Mt=f.pendingProps,mt=$.context,dt=g.contextType,ze=ko,typeof dt=="object"&&dt!==null&&(ze=ei(dt)),_e=g.getDerivedStateFromProps,(dt=typeof _e=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(oe!==Mt||mt!==ze)&&ZN(f,$,_,ze),Ic=!1,mt=f.memoizedState,$.state=mt,um(f,_,$,N),cm();var yt=f.memoizedState;oe!==Mt||mt!==yt||Ic||c!==null&&c.dependencies!==null&&Ay(c.dependencies)?(typeof _e=="function"&&(x_(f,g,_e,_),yt=f.memoizedState),(At=Ic||WN(f,g,At,_,mt,yt,ze)||c!==null&&c.dependencies!==null&&Ay(c.dependencies))?(dt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(_,yt,ze),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(_,yt,ze)),typeof $.componentDidUpdate=="function"&&(f.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof $.componentDidUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=yt),$.props=_,$.state=yt,$.context=ze,_=At):(typeof $.componentDidUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),_=!1)}return $=_,Ky(c,f),_=(f.flags&128)!==0,$||_?($=f.stateNode,g=_&&typeof g.getDerivedStateFromError!="function"?null:$.render(),f.flags|=1,c!==null&&_?(f.child=qf(f,c.child,null,N),f.child=qf(f,null,g,N)):Ga(c,f,g,N),f.memoizedState=$.state,c=f.child):c=Rl(c,f,N),c}function uR(c,f,g,_){return tm(),f.flags|=256,Ga(c,f,g,_),f.child}var C_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function k_(c){return{baseLanes:c,cachePool:XA()}}function T_(c,f,g){return c=c!==null?c.childLanes&~g:0,f&&(c|=vs),c}function dR(c,f,g){var _=f.pendingProps,N=!1,$=(f.flags&128)!==0,oe;if((oe=$)||(oe=c!==null&&c.memoizedState===null?!1:(ba.current&2)!==0),oe&&(N=!0,f.flags&=-129),oe=(f.flags&32)!==0,f.flags&=-33,c===null){if(lr){if(N?Mc(f):Pc(),lr){var _e=Jr,ze;if(ze=_e){e:{for(ze=_e,_e=To;ze.nodeType!==8;){if(!_e){_e=null;break e}if(ze=qs(ze.nextSibling),ze===null){_e=null;break e}}_e=ze}_e!==null?(f.memoizedState={dehydrated:_e,treeContext:td!==null?{id:El,overflow:Cl}:null,retryLane:536870912,hydrationErrors:null},ze=Wi(18,null,null,0),ze.stateNode=_e,ze.return=f,f.child=ze,yi=f,Jr=null,ze=!0):ze=!1}ze||ad(f)}if(_e=f.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return uS(_e)?f.lanes=32:f.lanes=536870912,null;Nl(f)}return _e=_.children,_=_.fallback,N?(Pc(),N=f.mode,_e=Wy({mode:"hidden",children:_e},N),_=ed(_,N,g,null),_e.return=f,_.return=f,_e.sibling=_,f.child=_e,N=f.child,N.memoizedState=k_(g),N.childLanes=T_(c,oe,g),f.memoizedState=C_,_):(Mc(f),A_(f,_e))}if(ze=c.memoizedState,ze!==null&&(_e=ze.dehydrated,_e!==null)){if($)f.flags&256?(Mc(f),f.flags&=-257,f=N_(c,f,g)):f.memoizedState!==null?(Pc(),f.child=c.child,f.flags|=128,f=null):(Pc(),N=_.fallback,_e=f.mode,_=Wy({mode:"visible",children:_.children},_e),N=ed(N,_e,g,null),N.flags|=2,_.return=f,N.return=f,_.sibling=N,f.child=_,qf(f,c.child,null,g),_=f.child,_.memoizedState=k_(g),_.childLanes=T_(c,oe,g),f.memoizedState=C_,f=N);else if(Mc(f),uS(_e)){if(oe=_e.nextSibling&&_e.nextSibling.dataset,oe)var dt=oe.dgst;oe=dt,_=Error(r(419)),_.stack="",_.digest=oe,nm({value:_,source:null,stack:null}),f=N_(c,f,g)}else if(Ia||rm(c,f,g,!1),oe=(g&c.childLanes)!==0,Ia||oe){if(oe=Pr,oe!==null&&(_=g&-g,_=(_&42)!==0?1:Ot(_),_=(_&(oe.suspendedLanes|g))!==0?0:_,_!==0&&_!==ze.retryLane))throw ze.retryLane=_,zs(c,_),Qi(oe,c,_),nR;_e.data==="$?"||K_(),f=N_(c,f,g)}else _e.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=ze.treeContext,Jr=qs(_e.nextSibling),yi=f,lr=!0,rd=null,To=!1,c!==null&&(gs[ys++]=El,gs[ys++]=Cl,gs[ys++]=td,El=c.id,Cl=c.overflow,td=f),f=A_(f,_.children),f.flags|=4096);return f}return N?(Pc(),N=_.fallback,_e=f.mode,ze=c.child,dt=ze.sibling,_=Sl(ze,{mode:"hidden",children:_.children}),_.subtreeFlags=ze.subtreeFlags&65011712,dt!==null?N=Sl(dt,N):(N=ed(N,_e,g,null),N.flags|=2),N.return=f,_.return=f,_.sibling=N,f.child=_,_=N,N=f.child,_e=c.child.memoizedState,_e===null?_e=k_(g):(ze=_e.cachePool,ze!==null?(dt=ya._currentValue,ze=ze.parent!==dt?{parent:dt,pool:dt}:ze):ze=XA(),_e={baseLanes:_e.baseLanes|g,cachePool:ze}),N.memoizedState=_e,N.childLanes=T_(c,oe,g),f.memoizedState=C_,_):(Mc(f),g=c.child,c=g.sibling,g=Sl(g,{mode:"visible",children:_.children}),g.return=f,g.sibling=null,c!==null&&(oe=f.deletions,oe===null?(f.deletions=[c],f.flags|=16):oe.push(c)),f.child=g,f.memoizedState=null,g)}function A_(c,f){return f=Wy({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Wy(c,f){return c=Wi(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function N_(c,f,g){return qf(f,c.child,null,g),c=A_(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function fR(c,f,g){c.lanes|=f;var _=c.alternate;_!==null&&(_.lanes|=f),K1(c.return,f,g)}function R_(c,f,g,_,N){var $=c.memoizedState;$===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:N}:($.isBackwards=f,$.rendering=null,$.renderingStartTime=0,$.last=_,$.tail=g,$.tailMode=N)}function hR(c,f,g){var _=f.pendingProps,N=_.revealOrder,$=_.tail;if(Ga(c,f,_.children,g),_=ba.current,(_&2)!==0)_=_&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&fR(c,g,f);else if(c.tag===19)fR(c,g,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}_&=1}switch(ee(ba,_),N){case"forwards":for(g=f.child,N=null;g!==null;)c=g.alternate,c!==null&&Hy(c)===null&&(N=g),g=g.sibling;g=N,g===null?(N=f.child,f.child=null):(N=g.sibling,g.sibling=null),R_(f,!1,N,g,$);break;case"backwards":for(g=null,N=f.child,f.child=null;N!==null;){if(c=N.alternate,c!==null&&Hy(c)===null){f.child=N;break}c=N.sibling,N.sibling=g,g=N,N=c}R_(f,!0,g,null,$);break;case"together":R_(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Rl(c,f,g){if(c!==null&&(f.dependencies=c.dependencies),zc|=f.lanes,(g&f.childLanes)===0)if(c!==null){if(rm(c,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,g=Sl(c,c.pendingProps),f.child=g,g.return=f;c.sibling!==null;)c=c.sibling,g=g.sibling=Sl(c,c.pendingProps),g.return=f;g.sibling=null}return f.child}function I_(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Ay(c)))}function H7(c,f,g){switch(f.tag){case 3:Ne(f,f.stateNode.containerInfo),Rc(f,ya,c.memoizedState.cache),tm();break;case 27:case 5:Pe(f);break;case 4:Ne(f,f.stateNode.containerInfo);break;case 10:Rc(f,f.type,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(Mc(f),f.flags|=128,null):(g&f.child.childLanes)!==0?dR(c,f,g):(Mc(f),c=Rl(c,f,g),c!==null?c.sibling:null);Mc(f);break;case 19:var N=(c.flags&128)!==0;if(_=(g&f.childLanes)!==0,_||(rm(c,f,g,!1),_=(g&f.childLanes)!==0),N){if(_)return hR(c,f,g);f.flags|=128}if(N=f.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),ee(ba,ba.current),_)break;return null;case 22:case 23:return f.lanes=0,sR(c,f,g);case 24:Rc(f,ya,c.memoizedState.cache)}return Rl(c,f,g)}function pR(c,f,g){if(c!==null)if(c.memoizedProps!==f.pendingProps)Ia=!0;else{if(!I_(c,g)&&(f.flags&128)===0)return Ia=!1,H7(c,f,g);Ia=(c.flags&131072)!==0}else Ia=!1,lr&&(f.flags&1048576)!==0&&HA(f,Ty,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var _=f.elementType,N=_._init;if(_=N(_._payload),f.type=_,typeof _=="function")B1(_)?(c=cd(_,c),f.tag=1,f=cR(null,f,_,c,g)):(f.tag=0,f=E_(null,f,_,c,g));else{if(_!=null){if(N=_.$$typeof,N===C){f.tag=11,f=rR(null,f,_,c,g);break e}else if(N===I){f.tag=14,f=aR(null,f,_,c,g);break e}}throw f=V(_)||_,Error(r(306,f,""))}}return f;case 0:return E_(c,f,f.type,f.pendingProps,g);case 1:return _=f.type,N=cd(_,f.pendingProps),cR(c,f,_,N,g);case 3:e:{if(Ne(f,f.stateNode.containerInfo),c===null)throw Error(r(387));_=f.pendingProps;var $=f.memoizedState;N=$.element,e_(c,f),um(f,_,null,g);var oe=f.memoizedState;if(_=oe.cache,Rc(f,ya,_),_!==$.cache&&W1(f,[ya],g,!0),cm(),_=oe.element,$.isDehydrated)if($={element:_,isDehydrated:!1,cache:oe.cache},f.updateQueue.baseState=$,f.memoizedState=$,f.flags&256){f=uR(c,f,_,g);break e}else if(_!==N){N=pn(Error(r(424)),f),nm(N),f=uR(c,f,_,g);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Jr=qs(c.firstChild),yi=f,lr=!0,rd=null,To=!0,g=GN(f,null,_,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(tm(),_===N){f=Rl(c,f,g);break e}Ga(c,f,_,g)}f=f.child}return f;case 26:return Ky(c,f),c===null?(g=bI(f.type,null,f.pendingProps,null))?f.memoizedState=g:lr||(g=f.type,c=f.pendingProps,_=lb(Oe.current).createElement(g),_[pe]=f,_[Re]=c,Wa(_,g,c),Ln(_),f.stateNode=_):f.memoizedState=bI(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Pe(f),c===null&&lr&&(_=f.stateNode=mI(f.type,f.pendingProps,Oe.current),yi=f,To=!0,N=Jr,Vc(f.type)?(dS=N,Jr=qs(_.firstChild)):Jr=N),Ga(c,f,f.pendingProps.children,g),Ky(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&lr&&((N=_=Jr)&&(_=bU(_,f.type,f.pendingProps,To),_!==null?(f.stateNode=_,yi=f,Jr=qs(_.firstChild),To=!1,N=!0):N=!1),N||ad(f)),Pe(f),N=f.type,$=f.pendingProps,oe=c!==null?c.memoizedProps:null,_=$.children,oS(N,$)?_=null:oe!==null&&oS(N,oe)&&(f.flags|=32),f.memoizedState!==null&&(N=s_(c,f,P7,null,null,g),jm._currentValue=N),Ky(c,f),Ga(c,f,_,g),f.child;case 6:return c===null&&lr&&((c=g=Jr)&&(g=vU(g,f.pendingProps,To),g!==null?(f.stateNode=g,yi=f,Jr=null,c=!0):c=!1),c||ad(f)),null;case 13:return dR(c,f,g);case 4:return Ne(f,f.stateNode.containerInfo),_=f.pendingProps,c===null?f.child=qf(f,null,_,g):Ga(c,f,_,g),f.child;case 11:return rR(c,f,f.type,f.pendingProps,g);case 7:return Ga(c,f,f.pendingProps,g),f.child;case 8:return Ga(c,f,f.pendingProps.children,g),f.child;case 12:return Ga(c,f,f.pendingProps.children,g),f.child;case 10:return _=f.pendingProps,Rc(f,f.type,_.value),Ga(c,f,_.children,g),f.child;case 9:return N=f.type._context,_=f.pendingProps.children,sd(f),N=ei(N),_=_(N),f.flags|=1,Ga(c,f,_,g),f.child;case 14:return aR(c,f,f.type,f.pendingProps,g);case 15:return iR(c,f,f.type,f.pendingProps,g);case 19:return hR(c,f,g);case 31:return _=f.pendingProps,g=f.mode,_={mode:_.mode,children:_.children},c===null?(g=Wy(_,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=Sl(c.child,_),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return sR(c,f,g);case 24:return sd(f),_=ei(ya),c===null?(N=X1(),N===null&&(N=Pr,$=Z1(),N.pooledCache=$,$.refCount++,$!==null&&(N.pooledCacheLanes|=g),N=$),f.memoizedState={parent:_,cache:N},Q1(f),Rc(f,ya,N)):((c.lanes&g)!==0&&(e_(c,f),um(f,null,null,g),cm()),N=c.memoizedState,$=f.memoizedState,N.parent!==_?(N={parent:_,cache:_},f.memoizedState=N,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=N),Rc(f,ya,_)):(_=$.cache,Rc(f,ya,_),_!==N.cache&&W1(f,[ya],g,!0))),Ga(c,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Il(c){c.flags|=4}function mR(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!SI(f)){if(f=bs.current,f!==null&&((nr&4194048)===nr?Ao!==null:(nr&62914560)!==nr&&(nr&536870912)===0||f!==Ao))throw om=J1,JA;c.flags|=8192}}function Zy(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?P():536870912,c.lanes|=f,Kf|=f)}function ym(c,f){if(!lr)switch(c.tailMode){case"hidden":f=c.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function Wr(c){var f=c.alternate!==null&&c.alternate.child===c.child,g=0,_=0;if(f)for(var N=c.child;N!==null;)g|=N.lanes|N.childLanes,_|=N.subtreeFlags&65011712,_|=N.flags&65011712,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)g|=N.lanes|N.childLanes,_|=N.subtreeFlags,_|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=_,c.childLanes=g,f}function V7(c,f,g){var _=f.pendingProps;switch(H1(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(f),null;case 1:return Wr(f),null;case 3:return g=f.stateNode,_=null,c!==null&&(_=c.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),Tl(ya),Ce(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(c===null||c.child===null)&&(em(f)?Il(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,KA())),Wr(f),null;case 26:return g=f.memoizedState,c===null?(Il(f),g!==null?(Wr(f),mR(f,g)):(Wr(f),f.flags&=-16777217)):g?g!==c.memoizedState?(Il(f),Wr(f),mR(f,g)):(Wr(f),f.flags&=-16777217):(c.memoizedProps!==_&&Il(f),Wr(f),f.flags&=-16777217),null;case 27:Qe(f),g=Oe.current;var N=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==_&&Il(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return Wr(f),null}c=fe.current,em(f)?VA(f):(c=mI(N,_,g),f.stateNode=c,Il(f))}return Wr(f),null;case 5:if(Qe(f),g=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==_&&Il(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return Wr(f),null}if(c=fe.current,em(f))VA(f);else{switch(N=lb(Oe.current),c){case 1:c=N.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:c=N.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":c=N.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":c=N.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":c=N.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof _.is=="string"?N.createElement("select",{is:_.is}):N.createElement("select"),_.multiple?c.multiple=!0:_.size&&(c.size=_.size);break;default:c=typeof _.is=="string"?N.createElement(g,{is:_.is}):N.createElement(g)}}c[pe]=f,c[Re]=_;e:for(N=f.child;N!==null;){if(N.tag===5||N.tag===6)c.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===f)break e;for(;N.sibling===null;){if(N.return===null||N.return===f)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}f.stateNode=c;e:switch(Wa(c,g,_),g){case"button":case"input":case"select":case"textarea":c=!!_.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Il(f)}}return Wr(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==_&&Il(f);else{if(typeof _!="string"&&f.stateNode===null)throw Error(r(166));if(c=Oe.current,em(f)){if(c=f.stateNode,g=f.memoizedProps,_=null,N=yi,N!==null)switch(N.tag){case 27:case 5:_=N.memoizedProps}c[pe]=f,c=!!(c.nodeValue===g||_!==null&&_.suppressHydrationWarning===!0||lI(c.nodeValue,g)),c||ad(f)}else c=lb(c).createTextNode(_),c[pe]=f,f.stateNode=c}return Wr(f),null;case 13:if(_=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(N=em(f),_!==null&&_.dehydrated!==null){if(c===null){if(!N)throw Error(r(318));if(N=f.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[pe]=f}else tm(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Wr(f),N=!1}else N=KA(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=N),N=!0;if(!N)return f.flags&256?(Nl(f),f):(Nl(f),null)}if(Nl(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=_!==null,c=c!==null&&c.memoizedState!==null,g){_=f.child,N=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(N=_.alternate.memoizedState.cachePool.pool);var $=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&($=_.memoizedState.cachePool.pool),$!==N&&(_.flags|=2048)}return g!==c&&g&&(f.child.flags|=8192),Zy(f,f.updateQueue),Wr(f),null;case 4:return Ce(),c===null&&nS(f.stateNode.containerInfo),Wr(f),null;case 10:return Tl(f.type),Wr(f),null;case 19:if(Q(ba),N=f.memoizedState,N===null)return Wr(f),null;if(_=(f.flags&128)!==0,$=N.rendering,$===null)if(_)ym(N,!1);else{if(Qr!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if($=Hy(c),$!==null){for(f.flags|=128,ym(N,!1),c=$.updateQueue,f.updateQueue=c,Zy(f,c),f.subtreeFlags=0,c=g,g=f.child;g!==null;)qA(g,c),g=g.sibling;return ee(ba,ba.current&1|2),f.child}c=c.sibling}N.tail!==null&&de()>Jy&&(f.flags|=128,_=!0,ym(N,!1),f.lanes=4194304)}else{if(!_)if(c=Hy($),c!==null){if(f.flags|=128,_=!0,c=c.updateQueue,f.updateQueue=c,Zy(f,c),ym(N,!0),N.tail===null&&N.tailMode==="hidden"&&!$.alternate&&!lr)return Wr(f),null}else 2*de()-N.renderingStartTime>Jy&&g!==536870912&&(f.flags|=128,_=!0,ym(N,!1),f.lanes=4194304);N.isBackwards?($.sibling=f.child,f.child=$):(c=N.last,c!==null?c.sibling=$:f.child=$,N.last=$)}return N.tail!==null?(f=N.tail,N.rendering=f,N.tail=f.sibling,N.renderingStartTime=de(),f.sibling=null,c=ba.current,ee(ba,_?c&1|2:c&1),f):(Wr(f),null);case 22:case 23:return Nl(f),a_(),_=f.memoizedState!==null,c!==null?c.memoizedState!==null!==_&&(f.flags|=8192):_&&(f.flags|=8192),_?(g&536870912)!==0&&(f.flags&128)===0&&(Wr(f),f.subtreeFlags&6&&(f.flags|=8192)):Wr(f),g=f.updateQueue,g!==null&&Zy(f,g.retryQueue),g=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==g&&(f.flags|=2048),c!==null&&Q(od),null;case 24:return g=null,c!==null&&(g=c.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),Tl(ya),Wr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function G7(c,f){switch(H1(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Tl(ya),Ce(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Qe(f),null;case 13:if(Nl(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));tm()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Q(ba),null;case 4:return Ce(),null;case 10:return Tl(f.type),null;case 22:case 23:return Nl(f),a_(),c!==null&&Q(od),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return Tl(ya),null;case 25:return null;default:return null}}function gR(c,f){switch(H1(f),f.tag){case 3:Tl(ya),Ce();break;case 26:case 27:case 5:Qe(f);break;case 4:Ce();break;case 13:Nl(f);break;case 19:Q(ba);break;case 10:Tl(f.type);break;case 22:case 23:Nl(f),a_(),c!==null&&Q(od);break;case 24:Tl(ya)}}function bm(c,f){try{var g=f.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var N=_.next;g=N;do{if((g.tag&c)===c){_=void 0;var $=g.create,oe=g.inst;_=$(),oe.destroy=_}g=g.next}while(g!==N)}}catch(_e){jr(f,f.return,_e)}}function Fc(c,f,g){try{var _=f.updateQueue,N=_!==null?_.lastEffect:null;if(N!==null){var $=N.next;_=$;do{if((_.tag&c)===c){var oe=_.inst,_e=oe.destroy;if(_e!==void 0){oe.destroy=void 0,N=f;var ze=g,dt=_e;try{dt()}catch(At){jr(N,ze,At)}}}_=_.next}while(_!==$)}}catch(At){jr(f,f.return,At)}}function yR(c){var f=c.updateQueue;if(f!==null){var g=c.stateNode;try{aN(f,g)}catch(_){jr(c,c.return,_)}}}function bR(c,f,g){g.props=cd(c.type,c.memoizedProps),g.state=c.memoizedState;try{g.componentWillUnmount()}catch(_){jr(c,f,_)}}function vm(c,f){try{var g=c.ref;if(g!==null){switch(c.tag){case 26:case 27:case 5:var _=c.stateNode;break;case 30:_=c.stateNode;break;default:_=c.stateNode}typeof g=="function"?c.refCleanup=g(_):g.current=_}}catch(N){jr(c,f,N)}}function No(c,f){var g=c.ref,_=c.refCleanup;if(g!==null)if(typeof _=="function")try{_()}catch(N){jr(c,f,N)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(N){jr(c,f,N)}else g.current=null}function vR(c){var f=c.type,g=c.memoizedProps,_=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&_.focus();break e;case"img":g.src?_.src=g.src:g.srcSet&&(_.srcset=g.srcSet)}}catch(N){jr(c,c.return,N)}}function j_(c,f,g){try{var _=c.stateNode;hU(_,c.type,g,f),_[Re]=f}catch(N){jr(c,c.return,N)}}function wR(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Vc(c.type)||c.tag===4}function O_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||wR(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Vc(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function D_(c,f,g){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(c,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(c),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=ob));else if(_!==4&&(_===27&&Vc(c.type)&&(g=c.stateNode,f=null),c=c.child,c!==null))for(D_(c,f,g),c=c.sibling;c!==null;)D_(c,f,g),c=c.sibling}function Yy(c,f,g){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?g.insertBefore(c,f):g.appendChild(c);else if(_!==4&&(_===27&&Vc(c.type)&&(g=c.stateNode),c=c.child,c!==null))for(Yy(c,f,g),c=c.sibling;c!==null;)Yy(c,f,g),c=c.sibling}function xR(c){var f=c.stateNode,g=c.memoizedProps;try{for(var _=c.type,N=f.attributes;N.length;)f.removeAttributeNode(N[0]);Wa(f,_,g),f[pe]=c,f[Re]=g}catch($){jr(c,c.return,$)}}var jl=!1,ia=!1,M_=!1,_R=typeof WeakSet=="function"?WeakSet:Set,ja=null;function K7(c,f){if(c=c.containerInfo,iS=pb,c=ce(c),we(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var N=_.anchorOffset,$=_.focusNode;_=_.focusOffset;try{g.nodeType,$.nodeType}catch{g=null;break e}var oe=0,_e=-1,ze=-1,dt=0,At=0,Mt=c,mt=null;t:for(;;){for(var yt;Mt!==g||N!==0&&Mt.nodeType!==3||(_e=oe+N),Mt!==$||_!==0&&Mt.nodeType!==3||(ze=oe+_),Mt.nodeType===3&&(oe+=Mt.nodeValue.length),(yt=Mt.firstChild)!==null;)mt=Mt,Mt=yt;for(;;){if(Mt===c)break t;if(mt===g&&++dt===N&&(_e=oe),mt===$&&++At===_&&(ze=oe),(yt=Mt.nextSibling)!==null)break;Mt=mt,mt=Mt.parentNode}Mt=yt}g=_e===-1||ze===-1?null:{start:_e,end:ze}}else g=null}g=g||{start:0,end:0}}else g=null;for(sS={focusedElem:c,selectionRange:g},pb=!1,ja=f;ja!==null;)if(f=ja,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,ja=c;else for(;ja!==null;){switch(f=ja,$=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&$!==null){c=void 0,g=f,N=$.memoizedProps,$=$.memoizedState,_=g.stateNode;try{var Sn=cd(g.type,N,g.elementType===g.type);c=_.getSnapshotBeforeUpdate(Sn,$),_.__reactInternalSnapshotBeforeUpdate=c}catch(yn){jr(g,g.return,yn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,g=c.nodeType,g===9)cS(c);else if(g===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":cS(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,ja=c;break}ja=f.return}}function SR(c,f,g){var _=g.flags;switch(g.tag){case 0:case 11:case 15:Lc(c,g),_&4&&bm(5,g);break;case 1:if(Lc(c,g),_&4)if(c=g.stateNode,f===null)try{c.componentDidMount()}catch(oe){jr(g,g.return,oe)}else{var N=cd(g.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(N,f,c.__reactInternalSnapshotBeforeUpdate)}catch(oe){jr(g,g.return,oe)}}_&64&&yR(g),_&512&&vm(g,g.return);break;case 3:if(Lc(c,g),_&64&&(c=g.updateQueue,c!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{aN(c,f)}catch(oe){jr(g,g.return,oe)}}break;case 27:f===null&&_&4&&xR(g);case 26:case 5:Lc(c,g),f===null&&_&4&&vR(g),_&512&&vm(g,g.return);break;case 12:Lc(c,g);break;case 13:Lc(c,g),_&4&&kR(c,g),_&64&&(c=g.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(g=nU.bind(null,g),wU(c,g))));break;case 22:if(_=g.memoizedState!==null||jl,!_){f=f!==null&&f.memoizedState!==null||ia,N=jl;var $=ia;jl=_,(ia=f)&&!$?$c(c,g,(g.subtreeFlags&8772)!==0):Lc(c,g),jl=N,ia=$}break;case 30:break;default:Lc(c,g)}}function ER(c){var f=c.alternate;f!==null&&(c.alternate=null,ER(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&en(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Hr=null,ji=!1;function Ol(c,f,g){for(g=g.child;g!==null;)CR(c,f,g),g=g.sibling}function CR(c,f,g){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(St,g)}catch{}switch(g.tag){case 26:ia||No(g,f),Ol(c,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:ia||No(g,f);var _=Hr,N=ji;Vc(g.type)&&(Hr=g.stateNode,ji=!1),Ol(c,f,g),Am(g.stateNode),Hr=_,ji=N;break;case 5:ia||No(g,f);case 6:if(_=Hr,N=ji,Hr=null,Ol(c,f,g),Hr=_,ji=N,Hr!==null)if(ji)try{(Hr.nodeType===9?Hr.body:Hr.nodeName==="HTML"?Hr.ownerDocument.body:Hr).removeChild(g.stateNode)}catch($){jr(g,f,$)}else try{Hr.removeChild(g.stateNode)}catch($){jr(g,f,$)}break;case 18:Hr!==null&&(ji?(c=Hr,hI(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,g.stateNode),Pm(c)):hI(Hr,g.stateNode));break;case 4:_=Hr,N=ji,Hr=g.stateNode.containerInfo,ji=!0,Ol(c,f,g),Hr=_,ji=N;break;case 0:case 11:case 14:case 15:ia||Fc(2,g,f),ia||Fc(4,g,f),Ol(c,f,g);break;case 1:ia||(No(g,f),_=g.stateNode,typeof _.componentWillUnmount=="function"&&bR(g,f,_)),Ol(c,f,g);break;case 21:Ol(c,f,g);break;case 22:ia=(_=ia)||g.memoizedState!==null,Ol(c,f,g),ia=_;break;default:Ol(c,f,g)}}function kR(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Pm(c)}catch(g){jr(f,f.return,g)}}function W7(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new _R),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new _R),f;default:throw Error(r(435,c.tag))}}function P_(c,f){var g=W7(c);f.forEach(function(_){var N=rU.bind(null,c,_);g.has(_)||(g.add(_),_.then(N,N))})}function Zi(c,f){var g=f.deletions;if(g!==null)for(var _=0;_<g.length;_++){var N=g[_],$=c,oe=f,_e=oe;e:for(;_e!==null;){switch(_e.tag){case 27:if(Vc(_e.type)){Hr=_e.stateNode,ji=!1;break e}break;case 5:Hr=_e.stateNode,ji=!1;break e;case 3:case 4:Hr=_e.stateNode.containerInfo,ji=!0;break e}_e=_e.return}if(Hr===null)throw Error(r(160));CR($,oe,N),Hr=null,ji=!1,$=N.alternate,$!==null&&($.return=null),N.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)TR(f,c),f=f.sibling}var Us=null;function TR(c,f){var g=c.alternate,_=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Zi(f,c),Yi(c),_&4&&(Fc(3,c,c.return),bm(3,c),Fc(5,c,c.return));break;case 1:Zi(f,c),Yi(c),_&512&&(ia||g===null||No(g,g.return)),_&64&&jl&&(c=c.updateQueue,c!==null&&(_=c.callbacks,_!==null&&(g=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=g===null?_:g.concat(_))));break;case 26:var N=Us;if(Zi(f,c),Yi(c),_&512&&(ia||g===null||No(g,g.return)),_&4){var $=g!==null?g.memoizedState:null;if(_=c.memoizedState,g===null)if(_===null)if(c.stateNode===null){e:{_=c.type,g=c.memoizedProps,N=N.ownerDocument||N;t:switch(_){case"title":$=N.getElementsByTagName("title")[0],(!$||$[Lt]||$[pe]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=N.createElement(_),N.head.insertBefore($,N.querySelector("head > title"))),Wa($,_,g),$[pe]=c,Ln($),_=$;break e;case"link":var oe=xI("link","href",N).get(_+(g.href||""));if(oe){for(var _e=0;_e<oe.length;_e++)if($=oe[_e],$.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&$.getAttribute("rel")===(g.rel==null?null:g.rel)&&$.getAttribute("title")===(g.title==null?null:g.title)&&$.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){oe.splice(_e,1);break t}}$=N.createElement(_),Wa($,_,g),N.head.appendChild($);break;case"meta":if(oe=xI("meta","content",N).get(_+(g.content||""))){for(_e=0;_e<oe.length;_e++)if($=oe[_e],$.getAttribute("content")===(g.content==null?null:""+g.content)&&$.getAttribute("name")===(g.name==null?null:g.name)&&$.getAttribute("property")===(g.property==null?null:g.property)&&$.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&$.getAttribute("charset")===(g.charSet==null?null:g.charSet)){oe.splice(_e,1);break t}}$=N.createElement(_),Wa($,_,g),N.head.appendChild($);break;default:throw Error(r(468,_))}$[pe]=c,Ln($),_=$}c.stateNode=_}else _I(N,c.type,c.stateNode);else c.stateNode=wI(N,_,c.memoizedProps);else $!==_?($===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):$.count--,_===null?_I(N,c.type,c.stateNode):wI(N,_,c.memoizedProps)):_===null&&c.stateNode!==null&&j_(c,c.memoizedProps,g.memoizedProps)}break;case 27:Zi(f,c),Yi(c),_&512&&(ia||g===null||No(g,g.return)),g!==null&&_&4&&j_(c,c.memoizedProps,g.memoizedProps);break;case 5:if(Zi(f,c),Yi(c),_&512&&(ia||g===null||No(g,g.return)),c.flags&32){N=c.stateNode;try{wc(N,"")}catch(yt){jr(c,c.return,yt)}}_&4&&c.stateNode!=null&&(N=c.memoizedProps,j_(c,N,g!==null?g.memoizedProps:N)),_&1024&&(M_=!0);break;case 6:if(Zi(f,c),Yi(c),_&4){if(c.stateNode===null)throw Error(r(162));_=c.memoizedProps,g=c.stateNode;try{g.nodeValue=_}catch(yt){jr(c,c.return,yt)}}break;case 3:if(db=null,N=Us,Us=cb(f.containerInfo),Zi(f,c),Us=N,Yi(c),_&4&&g!==null&&g.memoizedState.isDehydrated)try{Pm(f.containerInfo)}catch(yt){jr(c,c.return,yt)}M_&&(M_=!1,AR(c));break;case 4:_=Us,Us=cb(c.stateNode.containerInfo),Zi(f,c),Yi(c),Us=_;break;case 12:Zi(f,c),Yi(c);break;case 13:Zi(f,c),Yi(c),c.child.flags&8192&&c.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(U_=de()),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,P_(c,_)));break;case 22:N=c.memoizedState!==null;var ze=g!==null&&g.memoizedState!==null,dt=jl,At=ia;if(jl=dt||N,ia=At||ze,Zi(f,c),ia=At,jl=dt,Yi(c),_&8192)e:for(f=c.stateNode,f._visibility=N?f._visibility&-2:f._visibility|1,N&&(g===null||ze||jl||ia||ud(c)),g=null,f=c;;){if(f.tag===5||f.tag===26){if(g===null){ze=g=f;try{if($=ze.stateNode,N)oe=$.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{_e=ze.stateNode;var Mt=ze.memoizedProps.style,mt=Mt!=null&&Mt.hasOwnProperty("display")?Mt.display:null;_e.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(yt){jr(ze,ze.return,yt)}}}else if(f.tag===6){if(g===null){ze=f;try{ze.stateNode.nodeValue=N?"":ze.memoizedProps}catch(yt){jr(ze,ze.return,yt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}_&4&&(_=c.updateQueue,_!==null&&(g=_.retryQueue,g!==null&&(_.retryQueue=null,P_(c,g))));break;case 19:Zi(f,c),Yi(c),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,P_(c,_)));break;case 30:break;case 21:break;default:Zi(f,c),Yi(c)}}function Yi(c){var f=c.flags;if(f&2){try{for(var g,_=c.return;_!==null;){if(wR(_)){g=_;break}_=_.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var N=g.stateNode,$=O_(c);Yy(c,$,N);break;case 5:var oe=g.stateNode;g.flags&32&&(wc(oe,""),g.flags&=-33);var _e=O_(c);Yy(c,_e,oe);break;case 3:case 4:var ze=g.stateNode.containerInfo,dt=O_(c);D_(c,dt,ze);break;default:throw Error(r(161))}}catch(At){jr(c,c.return,At)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function AR(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;AR(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function Lc(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)SR(c,f.alternate,f),f=f.sibling}function ud(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Fc(4,f,f.return),ud(f);break;case 1:No(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&bR(f,f.return,g),ud(f);break;case 27:Am(f.stateNode);case 26:case 5:No(f,f.return),ud(f);break;case 22:f.memoizedState===null&&ud(f);break;case 30:ud(f);break;default:ud(f)}c=c.sibling}}function $c(c,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var _=f.alternate,N=c,$=f,oe=$.flags;switch($.tag){case 0:case 11:case 15:$c(N,$,g),bm(4,$);break;case 1:if($c(N,$,g),_=$,N=_.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(dt){jr(_,_.return,dt)}if(_=$,N=_.updateQueue,N!==null){var _e=_.stateNode;try{var ze=N.shared.hiddenCallbacks;if(ze!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ze.length;N++)rN(ze[N],_e)}catch(dt){jr(_,_.return,dt)}}g&&oe&64&&yR($),vm($,$.return);break;case 27:xR($);case 26:case 5:$c(N,$,g),g&&_===null&&oe&4&&vR($),vm($,$.return);break;case 12:$c(N,$,g);break;case 13:$c(N,$,g),g&&oe&4&&kR(N,$);break;case 22:$.memoizedState===null&&$c(N,$,g),vm($,$.return);break;case 30:break;default:$c(N,$,g)}f=f.sibling}}function F_(c,f){var g=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==g&&(c!=null&&c.refCount++,g!=null&&am(g))}function L_(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&am(c))}function Ro(c,f,g,_){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)NR(c,f,g,_),f=f.sibling}function NR(c,f,g,_){var N=f.flags;switch(f.tag){case 0:case 11:case 15:Ro(c,f,g,_),N&2048&&bm(9,f);break;case 1:Ro(c,f,g,_);break;case 3:Ro(c,f,g,_),N&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&am(c)));break;case 12:if(N&2048){Ro(c,f,g,_),c=f.stateNode;try{var $=f.memoizedProps,oe=$.id,_e=$.onPostCommit;typeof _e=="function"&&_e(oe,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ze){jr(f,f.return,ze)}}else Ro(c,f,g,_);break;case 13:Ro(c,f,g,_);break;case 23:break;case 22:$=f.stateNode,oe=f.alternate,f.memoizedState!==null?$._visibility&2?Ro(c,f,g,_):wm(c,f):$._visibility&2?Ro(c,f,g,_):($._visibility|=2,Hf(c,f,g,_,(f.subtreeFlags&10256)!==0)),N&2048&&F_(oe,f);break;case 24:Ro(c,f,g,_),N&2048&&L_(f.alternate,f);break;default:Ro(c,f,g,_)}}function Hf(c,f,g,_,N){for(N=N&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var $=c,oe=f,_e=g,ze=_,dt=oe.flags;switch(oe.tag){case 0:case 11:case 15:Hf($,oe,_e,ze,N),bm(8,oe);break;case 23:break;case 22:var At=oe.stateNode;oe.memoizedState!==null?At._visibility&2?Hf($,oe,_e,ze,N):wm($,oe):(At._visibility|=2,Hf($,oe,_e,ze,N)),N&&dt&2048&&F_(oe.alternate,oe);break;case 24:Hf($,oe,_e,ze,N),N&&dt&2048&&L_(oe.alternate,oe);break;default:Hf($,oe,_e,ze,N)}f=f.sibling}}function wm(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=c,_=f,N=_.flags;switch(_.tag){case 22:wm(g,_),N&2048&&F_(_.alternate,_);break;case 24:wm(g,_),N&2048&&L_(_.alternate,_);break;default:wm(g,_)}f=f.sibling}}var xm=8192;function Vf(c){if(c.subtreeFlags&xm)for(c=c.child;c!==null;)RR(c),c=c.sibling}function RR(c){switch(c.tag){case 26:Vf(c),c.flags&xm&&c.memoizedState!==null&&OU(Us,c.memoizedState,c.memoizedProps);break;case 5:Vf(c);break;case 3:case 4:var f=Us;Us=cb(c.stateNode.containerInfo),Vf(c),Us=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=xm,xm=16777216,Vf(c),xm=f):Vf(c));break;default:Vf(c)}}function IR(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function _m(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];ja=_,OR(_,c)}IR(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)jR(c),c=c.sibling}function jR(c){switch(c.tag){case 0:case 11:case 15:_m(c),c.flags&2048&&Fc(9,c,c.return);break;case 3:_m(c);break;case 12:_m(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,Xy(c)):_m(c);break;default:_m(c)}}function Xy(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];ja=_,OR(_,c)}IR(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Fc(8,f,f.return),Xy(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,Xy(f));break;default:Xy(f)}c=c.sibling}}function OR(c,f){for(;ja!==null;){var g=ja;switch(g.tag){case 0:case 11:case 15:Fc(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var _=g.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:am(g.memoizedState.cache)}if(_=g.child,_!==null)_.return=g,ja=_;else e:for(g=c;ja!==null;){_=ja;var N=_.sibling,$=_.return;if(ER(_),_===g){ja=null;break e}if(N!==null){N.return=$,ja=N;break e}ja=$}}}var Z7={getCacheForType:function(c){var f=ei(ya),g=f.data.get(c);return g===void 0&&(g=c(),f.data.set(c,g)),g}},Y7=typeof WeakMap=="function"?WeakMap:Map,gr=0,Pr=null,Zn=null,nr=0,yr=0,Xi=null,Bc=!1,Gf=!1,$_=!1,Dl=0,Qr=0,zc=0,dd=0,B_=0,vs=0,Kf=0,Sm=null,Oi=null,z_=!1,U_=0,Jy=1/0,Qy=null,Uc=null,Ka=0,qc=null,Wf=null,Zf=0,q_=0,H_=null,DR=null,Em=0,V_=null;function Ji(){if((gr&2)!==0&&nr!==0)return nr&-nr;if(ae.T!==null){var c=Pf;return c!==0?c:J_()}return G()}function MR(){vs===0&&(vs=(nr&536870912)===0||lr?vt():536870912);var c=bs.current;return c!==null&&(c.flags|=32),vs}function Qi(c,f,g){(c===Pr&&(yr===2||yr===9)||c.cancelPendingCommit!==null)&&(Yf(c,0),Hc(c,nr,vs,!1)),nt(c,g),((gr&2)===0||c!==Pr)&&(c===Pr&&((gr&2)===0&&(dd|=g),Qr===4&&Hc(c,nr,vs,!1)),Io(c))}function PR(c,f,g){if((gr&6)!==0)throw Error(r(327));var _=!g&&(f&124)===0&&(f&c.expiredLanes)===0||le(c,f),N=_?Q7(c,f):W_(c,f,!0),$=_;do{if(N===0){Gf&&!_&&Hc(c,f,0,!1);break}else{if(g=c.current.alternate,$&&!X7(g)){N=W_(c,f,!1),$=!1;continue}if(N===2){if($=f,c.errorRecoveryDisabledLanes&$)var oe=0;else oe=c.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){f=oe;e:{var _e=c;N=Sm;var ze=_e.current.memoizedState.isDehydrated;if(ze&&(Yf(_e,oe).flags|=256),oe=W_(_e,oe,!1),oe!==2){if($_&&!ze){_e.errorRecoveryDisabledLanes|=$,dd|=$,N=4;break e}$=Oi,Oi=N,$!==null&&(Oi===null?Oi=$:Oi.push.apply(Oi,$))}N=oe}if($=!1,N!==2)continue}}if(N===1){Yf(c,0),Hc(c,f,0,!0);break}e:{switch(_=c,$=N,$){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Hc(_,f,vs,!Bc);break e;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(N=U_+300-de(),10<N)){if(Hc(_,f,vs,!Bc),ke(_,0,!0)!==0)break e;_.timeoutHandle=dI(FR.bind(null,_,g,Oi,Qy,z_,f,vs,dd,Kf,Bc,$,2,-0,0),N);break e}FR(_,g,Oi,Qy,z_,f,vs,dd,Kf,Bc,$,0,-0,0)}}break}while(!0);Io(c)}function FR(c,f,g,_,N,$,oe,_e,ze,dt,At,Mt,mt,yt){if(c.timeoutHandle=-1,Mt=f.subtreeFlags,(Mt&8192||(Mt&16785408)===16785408)&&(Im={stylesheets:null,count:0,unsuspend:jU},RR(f),Mt=DU(),Mt!==null)){c.cancelPendingCommit=Mt(HR.bind(null,c,f,$,g,_,N,oe,_e,ze,At,1,mt,yt)),Hc(c,$,oe,!dt);return}HR(c,f,$,g,_,N,oe,_e,ze)}function X7(c){for(var f=c;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var _=0;_<g.length;_++){var N=g[_],$=N.getSnapshot;N=N.value;try{if(!Qa($(),N))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Hc(c,f,g,_){f&=~B_,f&=~dd,c.suspendedLanes|=f,c.pingedLanes&=~f,_&&(c.warmLanes|=f),_=c.expirationTimes;for(var N=f;0<N;){var $=31-Zt(N),oe=1<<$;_[$]=-1,N&=~oe}g!==0&&De(c,g,f)}function eb(){return(gr&6)===0?(Cm(0),!1):!0}function G_(){if(Zn!==null){if(yr===0)var c=Zn.return;else c=Zn,kl=id=null,c_(c),Uf=null,mm=0,c=Zn;for(;c!==null;)gR(c.alternate,c),c=c.return;Zn=null}}function Yf(c,f){var g=c.timeoutHandle;g!==-1&&(c.timeoutHandle=-1,mU(g)),g=c.cancelPendingCommit,g!==null&&(c.cancelPendingCommit=null,g()),G_(),Pr=c,Zn=g=Sl(c.current,null),nr=f,yr=0,Xi=null,Bc=!1,Gf=le(c,f),$_=!1,Kf=vs=B_=dd=zc=Qr=0,Oi=Sm=null,z_=!1,(f&8)!==0&&(f|=f&32);var _=c.entangledLanes;if(_!==0)for(c=c.entanglements,_&=f;0<_;){var N=31-Zt(_),$=1<<N;f|=c[N],_&=~$}return Dl=f,_n(),g}function LR(c,f){Un=null,ae.H=zy,f===sm||f===Iy?(f=tN(),yr=3):f===JA?(f=tN(),yr=4):yr=f===nR?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Xi=f,Zn===null&&(Qr=1,Gy(c,pn(f,c.current)))}function $R(){var c=ae.H;return ae.H=zy,c===null?zy:c}function BR(){var c=ae.A;return ae.A=Z7,c}function K_(){Qr=4,Bc||(nr&4194048)!==nr&&bs.current!==null||(Gf=!0),(zc&134217727)===0&&(dd&134217727)===0||Pr===null||Hc(Pr,nr,vs,!1)}function W_(c,f,g){var _=gr;gr|=2;var N=$R(),$=BR();(Pr!==c||nr!==f)&&(Qy=null,Yf(c,f)),f=!1;var oe=Qr;e:do try{if(yr!==0&&Zn!==null){var _e=Zn,ze=Xi;switch(yr){case 8:G_(),oe=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(f=!0);var dt=yr;if(yr=0,Xi=null,Xf(c,_e,ze,dt),g&&Gf){oe=0;break e}break;default:dt=yr,yr=0,Xi=null,Xf(c,_e,ze,dt)}}J7(),oe=Qr;break}catch(At){LR(c,At)}while(!0);return f&&c.shellSuspendCounter++,kl=id=null,gr=_,ae.H=N,ae.A=$,Zn===null&&(Pr=null,nr=0,_n()),oe}function J7(){for(;Zn!==null;)zR(Zn)}function Q7(c,f){var g=gr;gr|=2;var _=$R(),N=BR();Pr!==c||nr!==f?(Qy=null,Jy=de()+500,Yf(c,f)):Gf=le(c,f);e:do try{if(yr!==0&&Zn!==null){f=Zn;var $=Xi;t:switch(yr){case 1:yr=0,Xi=null,Xf(c,f,$,1);break;case 2:case 9:if(QA($)){yr=0,Xi=null,UR(f);break}f=function(){yr!==2&&yr!==9||Pr!==c||(yr=7),Io(c)},$.then(f,f);break e;case 3:yr=7;break e;case 4:yr=5;break e;case 7:QA($)?(yr=0,Xi=null,UR(f)):(yr=0,Xi=null,Xf(c,f,$,7));break;case 5:var oe=null;switch(Zn.tag){case 26:oe=Zn.memoizedState;case 5:case 27:var _e=Zn;if(!oe||SI(oe)){yr=0,Xi=null;var ze=_e.sibling;if(ze!==null)Zn=ze;else{var dt=_e.return;dt!==null?(Zn=dt,tb(dt)):Zn=null}break t}}yr=0,Xi=null,Xf(c,f,$,5);break;case 6:yr=0,Xi=null,Xf(c,f,$,6);break;case 8:G_(),Qr=6;break e;default:throw Error(r(462))}}eU();break}catch(At){LR(c,At)}while(!0);return kl=id=null,ae.H=_,ae.A=N,gr=g,Zn!==null?0:(Pr=null,nr=0,_n(),Qr)}function eU(){for(;Zn!==null&&!Se();)zR(Zn)}function zR(c){var f=pR(c.alternate,c,Dl);c.memoizedProps=c.pendingProps,f===null?tb(c):Zn=f}function UR(c){var f=c,g=f.alternate;switch(f.tag){case 15:case 0:f=lR(g,f,f.pendingProps,f.type,void 0,nr);break;case 11:f=lR(g,f,f.pendingProps,f.type.render,f.ref,nr);break;case 5:c_(f);default:gR(g,f),f=Zn=qA(f,Dl),f=pR(g,f,Dl)}c.memoizedProps=c.pendingProps,f===null?tb(c):Zn=f}function Xf(c,f,g,_){kl=id=null,c_(f),Uf=null,mm=0;var N=f.return;try{if(q7(c,N,f,g,nr)){Qr=1,Gy(c,pn(g,c.current)),Zn=null;return}}catch($){if(N!==null)throw Zn=N,$;Qr=1,Gy(c,pn(g,c.current)),Zn=null;return}f.flags&32768?(lr||_===1?c=!0:Gf||(nr&536870912)!==0?c=!1:(Bc=c=!0,(_===2||_===9||_===3||_===6)&&(_=bs.current,_!==null&&_.tag===13&&(_.flags|=16384))),qR(f,c)):tb(f)}function tb(c){var f=c;do{if((f.flags&32768)!==0){qR(f,Bc);return}c=f.return;var g=V7(f.alternate,f,Dl);if(g!==null){Zn=g;return}if(f=f.sibling,f!==null){Zn=f;return}Zn=f=c}while(f!==null);Qr===0&&(Qr=5)}function qR(c,f){do{var g=G7(c.alternate,c);if(g!==null){g.flags&=32767,Zn=g;return}if(g=c.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(c=c.sibling,c!==null)){Zn=c;return}Zn=c=g}while(c!==null);Qr=6,Zn=null}function HR(c,f,g,_,N,$,oe,_e,ze){c.cancelPendingCommit=null;do nb();while(Ka!==0);if((gr&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if($=f.lanes|f.childLanes,$|=Va,ge(c,g,$,oe,_e,ze),c===Pr&&(Zn=Pr=null,nr=0),Wf=f,qc=c,Zf=g,q_=$,H_=N,DR=_,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,aU(Fe,function(){return ZR(),null})):(c.callbackNode=null,c.callbackPriority=0),_=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||_){_=ae.T,ae.T=null,N=ne.p,ne.p=2,oe=gr,gr|=4;try{K7(c,f,g)}finally{gr=oe,ne.p=N,ae.T=_}}Ka=1,VR(),GR(),KR()}}function VR(){if(Ka===1){Ka=0;var c=qc,f=Wf,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=ae.T,ae.T=null;var _=ne.p;ne.p=2;var N=gr;gr|=4;try{TR(f,c);var $=sS,oe=ce(c.containerInfo),_e=$.focusedElem,ze=$.selectionRange;if(oe!==_e&&_e&&_e.ownerDocument&&re(_e.ownerDocument.documentElement,_e)){if(ze!==null&&we(_e)){var dt=ze.start,At=ze.end;if(At===void 0&&(At=dt),"selectionStart"in _e)_e.selectionStart=dt,_e.selectionEnd=Math.min(At,_e.value.length);else{var Mt=_e.ownerDocument||document,mt=Mt&&Mt.defaultView||window;if(mt.getSelection){var yt=mt.getSelection(),Sn=_e.textContent.length,yn=Math.min(ze.start,Sn),Cr=ze.end===void 0?yn:Math.min(ze.end,Sn);!yt.extend&&yn>Cr&&(oe=Cr,Cr=yn,yn=oe);var at=Y(_e,yn),Ze=Y(_e,Cr);if(at&&Ze&&(yt.rangeCount!==1||yt.anchorNode!==at.node||yt.anchorOffset!==at.offset||yt.focusNode!==Ze.node||yt.focusOffset!==Ze.offset)){var ct=Mt.createRange();ct.setStart(at.node,at.offset),yt.removeAllRanges(),yn>Cr?(yt.addRange(ct),yt.extend(Ze.node,Ze.offset)):(ct.setEnd(Ze.node,Ze.offset),yt.addRange(ct))}}}}for(Mt=[],yt=_e;yt=yt.parentNode;)yt.nodeType===1&&Mt.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<Mt.length;_e++){var jt=Mt[_e];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}pb=!!iS,sS=iS=null}finally{gr=N,ne.p=_,ae.T=g}}c.current=f,Ka=2}}function GR(){if(Ka===2){Ka=0;var c=qc,f=Wf,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=ae.T,ae.T=null;var _=ne.p;ne.p=2;var N=gr;gr|=4;try{SR(c,f.alternate,f)}finally{gr=N,ne.p=_,ae.T=g}}Ka=3}}function KR(){if(Ka===4||Ka===3){Ka=0,Te();var c=qc,f=Wf,g=Zf,_=DR;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Ka=5:(Ka=0,Wf=qc=null,WR(c,c.pendingLanes));var N=c.pendingLanes;if(N===0&&(Uc=null),me(g),f=f.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(St,f,void 0,(f.current.flags&128)===128)}catch{}if(_!==null){f=ae.T,N=ne.p,ne.p=2,ae.T=null;try{for(var $=c.onRecoverableError,oe=0;oe<_.length;oe++){var _e=_[oe];$(_e.value,{componentStack:_e.stack})}}finally{ae.T=f,ne.p=N}}(Zf&3)!==0&&nb(),Io(c),N=c.pendingLanes,(g&4194090)!==0&&(N&42)!==0?c===V_?Em++:(Em=0,V_=c):Em=0,Cm(0)}}function WR(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,am(f)))}function nb(c){return VR(),GR(),KR(),ZR()}function ZR(){if(Ka!==5)return!1;var c=qc,f=q_;q_=0;var g=me(Zf),_=ae.T,N=ne.p;try{ne.p=32>g?32:g,ae.T=null,g=H_,H_=null;var $=qc,oe=Zf;if(Ka=0,Wf=qc=null,Zf=0,(gr&6)!==0)throw Error(r(331));var _e=gr;if(gr|=4,jR($.current),NR($,$.current,oe,g),gr=_e,Cm(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(St,$)}catch{}return!0}finally{ne.p=N,ae.T=_,WR(c,f)}}function YR(c,f,g){f=pn(g,f),f=S_(c.stateNode,f,2),c=Oc(c,f,2),c!==null&&(nt(c,2),Io(c))}function jr(c,f,g){if(c.tag===3)YR(c,c,g);else for(;f!==null;){if(f.tag===3){YR(f,c,g);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Uc===null||!Uc.has(_))){c=pn(g,c),g=eR(2),_=Oc(f,g,2),_!==null&&(tR(g,_,f,c),nt(_,2),Io(_));break}}f=f.return}}function Z_(c,f,g){var _=c.pingCache;if(_===null){_=c.pingCache=new Y7;var N=new Set;_.set(f,N)}else N=_.get(f),N===void 0&&(N=new Set,_.set(f,N));N.has(g)||($_=!0,N.add(g),c=tU.bind(null,c,f,g),f.then(c,c))}function tU(c,f,g){var _=c.pingCache;_!==null&&_.delete(f),c.pingedLanes|=c.suspendedLanes&g,c.warmLanes&=~g,Pr===c&&(nr&g)===g&&(Qr===4||Qr===3&&(nr&62914560)===nr&&300>de()-U_?(gr&2)===0&&Yf(c,0):B_|=g,Kf===nr&&(Kf=0)),Io(c)}function XR(c,f){f===0&&(f=P()),c=zs(c,f),c!==null&&(nt(c,f),Io(c))}function nU(c){var f=c.memoizedState,g=0;f!==null&&(g=f.retryLane),XR(c,g)}function rU(c,f){var g=0;switch(c.tag){case 13:var _=c.stateNode,N=c.memoizedState;N!==null&&(g=N.retryLane);break;case 19:_=c.stateNode;break;case 22:_=c.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(f),XR(c,g)}function aU(c,f){return Ie(c,f)}var rb=null,Jf=null,Y_=!1,ab=!1,X_=!1,fd=0;function Io(c){c!==Jf&&c.next===null&&(Jf===null?rb=Jf=c:Jf=Jf.next=c),ab=!0,Y_||(Y_=!0,sU())}function Cm(c,f){if(!X_&&ab){X_=!0;do for(var g=!1,_=rb;_!==null;){if(c!==0){var N=_.pendingLanes;if(N===0)var $=0;else{var oe=_.suspendedLanes,_e=_.pingedLanes;$=(1<<31-Zt(42|c)+1)-1,$&=N&~(oe&~_e),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(g=!0,tI(_,$))}else $=nr,$=ke(_,_===Pr?$:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),($&3)===0||le(_,$)||(g=!0,tI(_,$));_=_.next}while(g);X_=!1}}function iU(){JR()}function JR(){ab=Y_=!1;var c=0;fd!==0&&(pU()&&(c=fd),fd=0);for(var f=de(),g=null,_=rb;_!==null;){var N=_.next,$=QR(_,f);$===0?(_.next=null,g===null?rb=N:g.next=N,N===null&&(Jf=g)):(g=_,(c!==0||($&3)!==0)&&(ab=!0)),_=N}Cm(c)}function QR(c,f){for(var g=c.suspendedLanes,_=c.pingedLanes,N=c.expirationTimes,$=c.pendingLanes&-62914561;0<$;){var oe=31-Zt($),_e=1<<oe,ze=N[oe];ze===-1?((_e&g)===0||(_e&_)!==0)&&(N[oe]=ft(_e,f)):ze<=f&&(c.expiredLanes|=_e),$&=~_e}if(f=Pr,g=nr,g=ke(c,c===f?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),_=c.callbackNode,g===0||c===f&&(yr===2||yr===9)||c.cancelPendingCommit!==null)return _!==null&&_!==null&&z(_),c.callbackNode=null,c.callbackPriority=0;if((g&3)===0||le(c,g)){if(f=g&-g,f===c.callbackPriority)return f;switch(_!==null&&z(_),me(g)){case 2:case 8:g=xe;break;case 32:g=Fe;break;case 268435456:g=Ge;break;default:g=Fe}return _=eI.bind(null,c),g=Ie(g,_),c.callbackPriority=f,c.callbackNode=g,f}return _!==null&&_!==null&&z(_),c.callbackPriority=2,c.callbackNode=null,2}function eI(c,f){if(Ka!==0&&Ka!==5)return c.callbackNode=null,c.callbackPriority=0,null;var g=c.callbackNode;if(nb()&&c.callbackNode!==g)return null;var _=nr;return _=ke(c,c===Pr?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),_===0?null:(PR(c,_,f),QR(c,de()),c.callbackNode!=null&&c.callbackNode===g?eI.bind(null,c):null)}function tI(c,f){if(nb())return null;PR(c,f,!0)}function sU(){gU(function(){(gr&6)!==0?Ie(te,iU):JR()})}function J_(){return fd===0&&(fd=vt()),fd}function nI(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:pl(""+c)}function rI(c,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,c.id&&g.setAttribute("form",c.id),f.parentNode.insertBefore(g,f),c=new FormData(c),g.parentNode.removeChild(g),c}function oU(c,f,g,_,N){if(f==="submit"&&g&&g.stateNode===N){var $=nI((N[Re]||null).action),oe=_.submitter;oe&&(f=(f=oe[Re]||null)?nI(f.formAction):oe.getAttribute("formAction"),f!==null&&($=f,oe=null));var _e=new bf("action","action",null,_,N);c.push({event:_e,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(fd!==0){var ze=oe?rI(N,oe):new FormData(N);b_(g,{pending:!0,data:ze,method:N.method,action:$},null,ze)}}else typeof $=="function"&&(_e.preventDefault(),ze=oe?rI(N,oe):new FormData(N),b_(g,{pending:!0,data:ze,method:N.method,action:$},$,ze))},currentTarget:N}]})}}for(var Q_=0;Q_<Xt.length;Q_++){var eS=Xt[Q_],lU=eS.toLowerCase(),cU=eS[0].toUpperCase()+eS.slice(1);zt(lU,"on"+cU)}zt(ht,"onAnimationEnd"),zt(bt,"onAnimationIteration"),zt(wt,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(Tt,"onTransitionRun"),zt(qt,"onTransitionStart"),zt(Yt,"onTransitionCancel"),zt(Bt,"onTransitionEnd"),vo("onMouseEnter",["mouseout","mouseover"]),vo("onMouseLeave",["mouseout","mouseover"]),vo("onPointerEnter",["pointerout","pointerover"]),vo("onPointerLeave",["pointerout","pointerover"]),bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bo("onBeforeInput",["compositionend","keypress","textInput","paste"]),bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(km));function aI(c,f){f=(f&4)!==0;for(var g=0;g<c.length;g++){var _=c[g],N=_.event;_=_.listeners;e:{var $=void 0;if(f)for(var oe=_.length-1;0<=oe;oe--){var _e=_[oe],ze=_e.instance,dt=_e.currentTarget;if(_e=_e.listener,ze!==$&&N.isPropagationStopped())break e;$=_e,N.currentTarget=dt;try{$(N)}catch(At){Vy(At)}N.currentTarget=null,$=ze}else for(oe=0;oe<_.length;oe++){if(_e=_[oe],ze=_e.instance,dt=_e.currentTarget,_e=_e.listener,ze!==$&&N.isPropagationStopped())break e;$=_e,N.currentTarget=dt;try{$(N)}catch(At){Vy(At)}N.currentTarget=null,$=ze}}}}function Yn(c,f){var g=f[pt];g===void 0&&(g=f[pt]=new Set);var _=c+"__bubble";g.has(_)||(iI(f,c,2,!1),g.add(_))}function tS(c,f,g){var _=0;f&&(_|=4),iI(g,c,_,f)}var ib="_reactListening"+Math.random().toString(36).slice(2);function nS(c){if(!c[ib]){c[ib]=!0,hi.forEach(function(g){g!=="selectionchange"&&(uU.has(g)||tS(g,!1,c),tS(g,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[ib]||(f[ib]=!0,tS("selectionchange",!1,f))}}function iI(c,f,g,_){switch(NI(f)){case 2:var N=FU;break;case 8:N=LU;break;default:N=gS}g=N.bind(null,f,g,c),N=void 0,!Bp||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(N=!0),_?N!==void 0?c.addEventListener(f,g,{capture:!0,passive:N}):c.addEventListener(f,g,!0):N!==void 0?c.addEventListener(f,g,{passive:N}):c.addEventListener(f,g,!1)}function rS(c,f,g,_,N){var $=_;if((f&1)===0&&(f&2)===0&&_!==null)e:for(;;){if(_===null)return;var oe=_.tag;if(oe===3||oe===4){var _e=_.stateNode.containerInfo;if(_e===N)break;if(oe===4)for(oe=_.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===N)return;oe=oe.return}for(;_e!==null;){if(oe=Nn(_e),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){_=$=oe;continue e}_e=_e.parentNode}}_=_.return}_c(function(){var dt=$,At=gf(g),Mt=[];e:{var mt=Kt.get(c);if(mt!==void 0){var yt=bf,Sn=c;switch(c){case"keypress":if(Cc(g)===0)break e;case"keydown":case"keyup":yt=kf;break;case"focusin":Sn="focus",yt=kc;break;case"focusout":Sn="blur",yt=kc;break;case"beforeblur":case"afterblur":yt=kc;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Kp;break;case ht:case bt:case wt:yt=my;break;case Bt:yt=Wp;break;case"scroll":case"scrollend":yt=vf;break;case"wheel":yt=Af;break;case"copy":case"cut":case"paste":yt=Ef;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Gp;break;case"toggle":case"beforetoggle":yt=by}var yn=(f&4)!==0,Cr=!yn&&(c==="scroll"||c==="scrollend"),at=yn?mt!==null?mt+"Capture":null:mt;yn=[];for(var Ze=dt,ct;Ze!==null;){var jt=Ze;if(ct=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||ct===null||at===null||(jt=yl(Ze,at),jt!=null&&yn.push(Tm(Ze,jt,ct))),Cr)break;Ze=Ze.return}0<yn.length&&(mt=new yt(mt,Sn,null,g,At),Mt.push({event:mt,listeners:yn}))}}if((f&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",yt=c==="mouseout"||c==="pointerout",mt&&g!==fs&&(Sn=g.relatedTarget||g.fromElement)&&(Nn(Sn)||Sn[qe]))break e;if((yt||mt)&&(mt=At.window===At?At:(mt=At.ownerDocument)?mt.defaultView||mt.parentWindow:window,yt?(Sn=g.relatedTarget||g.toElement,yt=dt,Sn=Sn?Nn(Sn):null,Sn!==null&&(Cr=i(Sn),yn=Sn.tag,Sn!==Cr||yn!==5&&yn!==27&&yn!==6)&&(Sn=null)):(yt=null,Sn=dt),yt!==Sn)){if(yn=xf,jt="onMouseLeave",at="onMouseEnter",Ze="mouse",(c==="pointerout"||c==="pointerover")&&(yn=Gp,jt="onPointerLeave",at="onPointerEnter",Ze="pointer"),Cr=yt==null?mt:xr(yt),ct=Sn==null?mt:xr(Sn),mt=new yn(jt,Ze+"leave",yt,g,At),mt.target=Cr,mt.relatedTarget=ct,jt=null,Nn(At)===dt&&(yn=new yn(at,Ze+"enter",Sn,g,At),yn.target=ct,yn.relatedTarget=Cr,jt=yn),Cr=jt,yt&&Sn)t:{for(yn=yt,at=Sn,Ze=0,ct=yn;ct;ct=Qf(ct))Ze++;for(ct=0,jt=at;jt;jt=Qf(jt))ct++;for(;0<Ze-ct;)yn=Qf(yn),Ze--;for(;0<ct-Ze;)at=Qf(at),ct--;for(;Ze--;){if(yn===at||at!==null&&yn===at.alternate)break t;yn=Qf(yn),at=Qf(at)}yn=null}else yn=null;yt!==null&&sI(Mt,mt,yt,yn,!1),Sn!==null&&Cr!==null&&sI(Mt,Cr,Sn,yn,!0)}}e:{if(mt=dt?xr(dt):window,yt=mt.nodeName&&mt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&mt.type==="file")var sn=Qu;else if(If(mt))if(ps)sn=Nc;else{sn=_l;var Vn=Ey}else yt=mt.nodeName,!yt||yt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&$p(dt.elementType)&&(sn=Qu):sn=Qp;if(sn&&(sn=sn(c,dt))){Jp(Mt,sn,g,At);break e}Vn&&Vn(c,mt,dt),c==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&bc(mt,"number",mt.value)}switch(Vn=dt?xr(dt):window,c){case"focusin":(If(Vn)||Vn.contentEditable==="true")&&($e=Vn,We=dt,Xe=null);break;case"focusout":Xe=We=$e=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,He(Mt,g,At);break;case"selectionchange":if(Me)break;case"keydown":case"keyup":He(Mt,g,At)}var fn;if(Xu)e:{switch(c){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else xl?Xp(c,g)&&(wn="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(wn="onCompositionStart");wn&&(Nf&&g.locale!=="ko"&&(xl||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&xl&&(fn=Ec()):(hs=At,yf="value"in hs?hs.value:hs.textContent,xl=!0)),Vn=sb(dt,wn),0<Vn.length&&(wn=new Cf(wn,c,null,g,At),Mt.push({event:wn,listeners:Vn}),fn?wn.data=fn:(fn=wy(g),fn!==null&&(wn.data=fn)))),(fn=F1?xy(c,g):L1(c,g))&&(wn=sb(dt,"onBeforeInput"),0<wn.length&&(Vn=new Cf("onBeforeInput","beforeinput",null,g,At),Mt.push({event:Vn,listeners:wn}),Vn.data=fn)),oU(Mt,c,dt,g,At)}aI(Mt,f)})}function Tm(c,f,g){return{instance:c,listener:f,currentTarget:g}}function sb(c,f){for(var g=f+"Capture",_=[];c!==null;){var N=c,$=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||$===null||(N=yl(c,g),N!=null&&_.unshift(Tm(c,N,$)),N=yl(c,f),N!=null&&_.push(Tm(c,N,$))),c.tag===3)return _;c=c.return}return[]}function Qf(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function sI(c,f,g,_,N){for(var $=f._reactName,oe=[];g!==null&&g!==_;){var _e=g,ze=_e.alternate,dt=_e.stateNode;if(_e=_e.tag,ze!==null&&ze===_)break;_e!==5&&_e!==26&&_e!==27||dt===null||(ze=dt,N?(dt=yl(g,$),dt!=null&&oe.unshift(Tm(g,dt,ze))):N||(dt=yl(g,$),dt!=null&&oe.push(Tm(g,dt,ze)))),g=g.return}oe.length!==0&&c.push({event:f,listeners:oe})}var dU=/\r\n?/g,fU=/\u0000|\uFFFD/g;function oI(c){return(typeof c=="string"?c:""+c).replace(dU,`
`).replace(fU,"")}function lI(c,f){return f=oI(f),oI(c)===f}function ob(){}function Er(c,f,g,_,N,$){switch(g){case"children":typeof _=="string"?f==="body"||f==="textarea"&&_===""||wc(c,_):(typeof _=="number"||typeof _=="bigint")&&f!=="body"&&wc(c,""+_);break;case"className":dl(c,"class",_);break;case"tabIndex":dl(c,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":dl(c,g,_);break;case"style":fy(c,_,$);break;case"data":if(f!=="object"){dl(c,"data",_);break}case"src":case"href":if(_===""&&(f!=="a"||g!=="href")){c.removeAttribute(g);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){c.removeAttribute(g);break}_=pl(""+_),c.setAttribute(g,_);break;case"action":case"formAction":if(typeof _=="function"){c.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(g==="formAction"?(f!=="input"&&Er(c,f,"name",N.name,N,null),Er(c,f,"formEncType",N.formEncType,N,null),Er(c,f,"formMethod",N.formMethod,N,null),Er(c,f,"formTarget",N.formTarget,N,null)):(Er(c,f,"encType",N.encType,N,null),Er(c,f,"method",N.method,N,null),Er(c,f,"target",N.target,N,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){c.removeAttribute(g);break}_=pl(""+_),c.setAttribute(g,_);break;case"onClick":_!=null&&(c.onclick=ob);break;case"onScroll":_!=null&&Yn("scroll",c);break;case"onScrollEnd":_!=null&&Yn("scrollend",c);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"multiple":c.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":c.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){c.removeAttribute("xlink:href");break}g=pl(""+_),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,""+_):c.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,""):c.removeAttribute(g);break;case"capture":case"download":_===!0?c.setAttribute(g,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,_):c.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?c.setAttribute(g,_):c.removeAttribute(g);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?c.removeAttribute(g):c.setAttribute(g,_);break;case"popover":Yn("beforetoggle",c),Yn("toggle",c),$s(c,"popover",_);break;case"xlinkActuate":Gi(c,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Gi(c,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Gi(c,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Gi(c,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Gi(c,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Gi(c,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Gi(c,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Gi(c,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Gi(c,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":$s(c,"is",_);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=mi.get(g)||g,$s(c,g,_))}}function aS(c,f,g,_,N,$){switch(g){case"style":fy(c,_,$);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"children":typeof _=="string"?wc(c,_):(typeof _=="number"||typeof _=="bigint")&&wc(c,""+_);break;case"onScroll":_!=null&&Yn("scroll",c);break;case"onScrollEnd":_!=null&&Yn("scrollend",c);break;case"onClick":_!=null&&(c.onclick=ob);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yo.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(N=g.endsWith("Capture"),f=g.slice(2,N?g.length-7:void 0),$=c[Re]||null,$=$!=null?$[g]:null,typeof $=="function"&&c.removeEventListener(f,$,N),typeof _=="function")){typeof $!="function"&&$!==null&&(g in c?c[g]=null:c.hasAttribute(g)&&c.removeAttribute(g)),c.addEventListener(f,_,N);break e}g in c?c[g]=_:_===!0?c.setAttribute(g,""):$s(c,g,_)}}}function Wa(c,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yn("error",c),Yn("load",c);var _=!1,N=!1,$;for($ in g)if(g.hasOwnProperty($)){var oe=g[$];if(oe!=null)switch($){case"src":_=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Er(c,f,$,oe,g,null)}}N&&Er(c,f,"srcSet",g.srcSet,g,null),_&&Er(c,f,"src",g.src,g,null);return;case"input":Yn("invalid",c);var _e=$=oe=N=null,ze=null,dt=null;for(_ in g)if(g.hasOwnProperty(_)){var At=g[_];if(At!=null)switch(_){case"name":N=At;break;case"type":oe=At;break;case"checked":ze=At;break;case"defaultChecked":dt=At;break;case"value":$=At;break;case"defaultValue":_e=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,f));break;default:Er(c,f,_,At,g,null)}}Fp(c,$,_e,ze,dt,oe,N,!1),_o(c);return;case"select":Yn("invalid",c),_=oe=$=null;for(N in g)if(g.hasOwnProperty(N)&&(_e=g[N],_e!=null))switch(N){case"value":$=_e;break;case"defaultValue":oe=_e;break;case"multiple":_=_e;default:Er(c,f,N,_e,g,null)}f=$,g=oe,c.multiple=!!_,f!=null?hl(c,!!_,f,!1):g!=null&&hl(c,!!_,g,!0);return;case"textarea":Yn("invalid",c),$=N=_=null;for(oe in g)if(g.hasOwnProperty(oe)&&(_e=g[oe],_e!=null))switch(oe){case"value":_=_e;break;case"defaultValue":N=_e;break;case"children":$=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(91));break;default:Er(c,f,oe,_e,g,null)}Lp(c,_,N,$),_o(c);return;case"option":for(ze in g)if(g.hasOwnProperty(ze)&&(_=g[ze],_!=null))switch(ze){case"selected":c.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Er(c,f,ze,_,g,null)}return;case"dialog":Yn("beforetoggle",c),Yn("toggle",c),Yn("cancel",c),Yn("close",c);break;case"iframe":case"object":Yn("load",c);break;case"video":case"audio":for(_=0;_<km.length;_++)Yn(km[_],c);break;case"image":Yn("error",c),Yn("load",c);break;case"details":Yn("toggle",c);break;case"embed":case"source":case"link":Yn("error",c),Yn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in g)if(g.hasOwnProperty(dt)&&(_=g[dt],_!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Er(c,f,dt,_,g,null)}return;default:if($p(f)){for(At in g)g.hasOwnProperty(At)&&(_=g[At],_!==void 0&&aS(c,f,At,_,g,void 0));return}}for(_e in g)g.hasOwnProperty(_e)&&(_=g[_e],_!=null&&Er(c,f,_e,_,g,null))}function hU(c,f,g,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,$=null,oe=null,_e=null,ze=null,dt=null,At=null;for(yt in g){var Mt=g[yt];if(g.hasOwnProperty(yt)&&Mt!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":ze=Mt;default:_.hasOwnProperty(yt)||Er(c,f,yt,null,_,Mt)}}for(var mt in _){var yt=_[mt];if(Mt=g[mt],_.hasOwnProperty(mt)&&(yt!=null||Mt!=null))switch(mt){case"type":$=yt;break;case"name":N=yt;break;case"checked":dt=yt;break;case"defaultChecked":At=yt;break;case"value":oe=yt;break;case"defaultValue":_e=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,f));break;default:yt!==Mt&&Er(c,f,mt,yt,_,Mt)}}yc(c,oe,_e,ze,dt,At,$,N);return;case"select":yt=oe=_e=mt=null;for($ in g)if(ze=g[$],g.hasOwnProperty($)&&ze!=null)switch($){case"value":break;case"multiple":yt=ze;default:_.hasOwnProperty($)||Er(c,f,$,null,_,ze)}for(N in _)if($=_[N],ze=g[N],_.hasOwnProperty(N)&&($!=null||ze!=null))switch(N){case"value":mt=$;break;case"defaultValue":_e=$;break;case"multiple":oe=$;default:$!==ze&&Er(c,f,N,$,_,ze)}f=_e,g=oe,_=yt,mt!=null?hl(c,!!g,mt,!1):!!_!=!!g&&(f!=null?hl(c,!!g,f,!0):hl(c,!!g,g?[]:"",!1));return;case"textarea":yt=mt=null;for(_e in g)if(N=g[_e],g.hasOwnProperty(_e)&&N!=null&&!_.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Er(c,f,_e,null,_,N)}for(oe in _)if(N=_[oe],$=g[oe],_.hasOwnProperty(oe)&&(N!=null||$!=null))switch(oe){case"value":mt=N;break;case"defaultValue":yt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==$&&Er(c,f,oe,N,_,$)}vc(c,mt,yt);return;case"option":for(var Sn in g)if(mt=g[Sn],g.hasOwnProperty(Sn)&&mt!=null&&!_.hasOwnProperty(Sn))switch(Sn){case"selected":c.selected=!1;break;default:Er(c,f,Sn,null,_,mt)}for(ze in _)if(mt=_[ze],yt=g[ze],_.hasOwnProperty(ze)&&mt!==yt&&(mt!=null||yt!=null))switch(ze){case"selected":c.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:Er(c,f,ze,mt,_,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in g)mt=g[yn],g.hasOwnProperty(yn)&&mt!=null&&!_.hasOwnProperty(yn)&&Er(c,f,yn,null,_,mt);for(dt in _)if(mt=_[dt],yt=g[dt],_.hasOwnProperty(dt)&&mt!==yt&&(mt!=null||yt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:Er(c,f,dt,mt,_,yt)}return;default:if($p(f)){for(var Cr in g)mt=g[Cr],g.hasOwnProperty(Cr)&&mt!==void 0&&!_.hasOwnProperty(Cr)&&aS(c,f,Cr,void 0,_,mt);for(At in _)mt=_[At],yt=g[At],!_.hasOwnProperty(At)||mt===yt||mt===void 0&&yt===void 0||aS(c,f,At,mt,_,yt);return}}for(var at in g)mt=g[at],g.hasOwnProperty(at)&&mt!=null&&!_.hasOwnProperty(at)&&Er(c,f,at,null,_,mt);for(Mt in _)mt=_[Mt],yt=g[Mt],!_.hasOwnProperty(Mt)||mt===yt||mt==null&&yt==null||Er(c,f,Mt,mt,_,yt)}var iS=null,sS=null;function lb(c){return c.nodeType===9?c:c.ownerDocument}function cI(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uI(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function oS(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var lS=null;function pU(){var c=window.event;return c&&c.type==="popstate"?c===lS?!1:(lS=c,!0):(lS=null,!1)}var dI=typeof setTimeout=="function"?setTimeout:void 0,mU=typeof clearTimeout=="function"?clearTimeout:void 0,fI=typeof Promise=="function"?Promise:void 0,gU=typeof queueMicrotask=="function"?queueMicrotask:typeof fI<"u"?function(c){return fI.resolve(null).then(c).catch(yU)}:dI;function yU(c){setTimeout(function(){throw c})}function Vc(c){return c==="head"}function hI(c,f){var g=f,_=0,N=0;do{var $=g.nextSibling;if(c.removeChild(g),$&&$.nodeType===8)if(g=$.data,g==="/$"){if(0<_&&8>_){g=_;var oe=c.ownerDocument;if(g&1&&Am(oe.documentElement),g&2&&Am(oe.body),g&4)for(g=oe.head,Am(g),oe=g.firstChild;oe;){var _e=oe.nextSibling,ze=oe.nodeName;oe[Lt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||g.removeChild(oe),oe=_e}}if(N===0){c.removeChild($),Pm(f);return}N--}else g==="$"||g==="$?"||g==="$!"?N++:_=g.charCodeAt(0)-48;else _=0;g=$}while(g);Pm(f)}function cS(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":cS(g),en(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}c.removeChild(g)}}function bU(c,f,g,_){for(;c.nodeType===1;){var N=g;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!_&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(_){if(!c[Lt])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if($=c.getAttribute("rel"),$==="stylesheet"&&c.hasAttribute("data-precedence"))break;if($!==N.rel||c.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||c.getAttribute("title")!==(N.title==null?null:N.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if($=c.getAttribute("src"),($!==(N.src==null?null:N.src)||c.getAttribute("type")!==(N.type==null?null:N.type)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&$&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var $=N.name==null?null:""+N.name;if(N.type==="hidden"&&c.getAttribute("name")===$)return c}else return c;if(c=qs(c.nextSibling),c===null)break}return null}function vU(c,f,g){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!g||(c=qs(c.nextSibling),c===null))return null;return c}function uS(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function wU(c,f){var g=c.ownerDocument;if(c.data!=="$?"||g.readyState==="complete")f();else{var _=function(){f(),g.removeEventListener("DOMContentLoaded",_)};g.addEventListener("DOMContentLoaded",_),c._reactRetry=_}}function qs(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var dS=null;function pI(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return c;f--}else g==="/$"&&f++}c=c.previousSibling}return null}function mI(c,f,g){switch(f=lb(g),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Am(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);en(c)}var ws=new Map,gI=new Set;function cb(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Ml=ne.d;ne.d={f:xU,r:_U,D:SU,C:EU,L:CU,m:kU,X:AU,S:TU,M:NU};function xU(){var c=Ml.f(),f=eb();return c||f}function _U(c){var f=Kn(c);f!==null&&f.tag===5&&f.type==="form"?PN(f):Ml.r(c)}var eh=typeof document>"u"?null:document;function yI(c,f,g){var _=eh;if(_&&typeof f=="string"&&f){var N=Xa(f);N='link[rel="'+c+'"][href="'+N+'"]',typeof g=="string"&&(N+='[crossorigin="'+g+'"]'),gI.has(N)||(gI.add(N),c={rel:c,crossOrigin:g,href:f},_.querySelector(N)===null&&(f=_.createElement("link"),Wa(f,"link",c),Ln(f),_.head.appendChild(f)))}}function SU(c){Ml.D(c),yI("dns-prefetch",c,null)}function EU(c,f){Ml.C(c,f),yI("preconnect",c,f)}function CU(c,f,g){Ml.L(c,f,g);var _=eh;if(_&&c&&f){var N='link[rel="preload"][as="'+Xa(f)+'"]';f==="image"&&g&&g.imageSrcSet?(N+='[imagesrcset="'+Xa(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(N+='[imagesizes="'+Xa(g.imageSizes)+'"]')):N+='[href="'+Xa(c)+'"]';var $=N;switch(f){case"style":$=th(c);break;case"script":$=nh(c)}ws.has($)||(c=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:c,as:f},g),ws.set($,c),_.querySelector(N)!==null||f==="style"&&_.querySelector(Nm($))||f==="script"&&_.querySelector(Rm($))||(f=_.createElement("link"),Wa(f,"link",c),Ln(f),_.head.appendChild(f)))}}function kU(c,f){Ml.m(c,f);var g=eh;if(g&&c){var _=f&&typeof f.as=="string"?f.as:"script",N='link[rel="modulepreload"][as="'+Xa(_)+'"][href="'+Xa(c)+'"]',$=N;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=nh(c)}if(!ws.has($)&&(c=d({rel:"modulepreload",href:c},f),ws.set($,c),g.querySelector(N)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Rm($)))return}_=g.createElement("link"),Wa(_,"link",c),Ln(_),g.head.appendChild(_)}}}function TU(c,f,g){Ml.S(c,f,g);var _=eh;if(_&&c){var N=_r(_).hoistableStyles,$=th(c);f=f||"default";var oe=N.get($);if(!oe){var _e={loading:0,preload:null};if(oe=_.querySelector(Nm($)))_e.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},g),(g=ws.get($))&&fS(c,g);var ze=oe=_.createElement("link");Ln(ze),Wa(ze,"link",c),ze._p=new Promise(function(dt,At){ze.onload=dt,ze.onerror=At}),ze.addEventListener("load",function(){_e.loading|=1}),ze.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,ub(oe,f,_)}oe={type:"stylesheet",instance:oe,count:1,state:_e},N.set($,oe)}}}function AU(c,f){Ml.X(c,f);var g=eh;if(g&&c){var _=_r(g).hoistableScripts,N=nh(c),$=_.get(N);$||($=g.querySelector(Rm(N)),$||(c=d({src:c,async:!0},f),(f=ws.get(N))&&hS(c,f),$=g.createElement("script"),Ln($),Wa($,"link",c),g.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},_.set(N,$))}}function NU(c,f){Ml.M(c,f);var g=eh;if(g&&c){var _=_r(g).hoistableScripts,N=nh(c),$=_.get(N);$||($=g.querySelector(Rm(N)),$||(c=d({src:c,async:!0,type:"module"},f),(f=ws.get(N))&&hS(c,f),$=g.createElement("script"),Ln($),Wa($,"link",c),g.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},_.set(N,$))}}function bI(c,f,g,_){var N=(N=Oe.current)?cb(N):null;if(!N)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=th(g.href),g=_r(N).hoistableStyles,_=g.get(f),_||(_={type:"style",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){c=th(g.href);var $=_r(N).hoistableStyles,oe=$.get(c);if(oe||(N=N.ownerDocument||N,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(c,oe),($=N.querySelector(Nm(c)))&&!$._p&&(oe.instance=$,oe.state.loading=5),ws.has(c)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},ws.set(c,g),$||RU(N,c,g,oe.state))),f&&_===null)throw Error(r(528,""));return oe}if(f&&_!==null)throw Error(r(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=nh(g),g=_r(N).hoistableScripts,_=g.get(f),_||(_={type:"script",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function th(c){return'href="'+Xa(c)+'"'}function Nm(c){return'link[rel="stylesheet"]['+c+"]"}function vI(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function RU(c,f,g,_){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?_.loading=1:(f=c.createElement("link"),_.preload=f,f.addEventListener("load",function(){return _.loading|=1}),f.addEventListener("error",function(){return _.loading|=2}),Wa(f,"link",g),Ln(f),c.head.appendChild(f))}function nh(c){return'[src="'+Xa(c)+'"]'}function Rm(c){return"script[async]"+c}function wI(c,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var _=c.querySelector('style[data-href~="'+Xa(g.href)+'"]');if(_)return f.instance=_,Ln(_),_;var N=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return _=(c.ownerDocument||c).createElement("style"),Ln(_),Wa(_,"style",N),ub(_,g.precedence,c),f.instance=_;case"stylesheet":N=th(g.href);var $=c.querySelector(Nm(N));if($)return f.state.loading|=4,f.instance=$,Ln($),$;_=vI(g),(N=ws.get(N))&&fS(_,N),$=(c.ownerDocument||c).createElement("link"),Ln($);var oe=$;return oe._p=new Promise(function(_e,ze){oe.onload=_e,oe.onerror=ze}),Wa($,"link",_),f.state.loading|=4,ub($,g.precedence,c),f.instance=$;case"script":return $=nh(g.src),(N=c.querySelector(Rm($)))?(f.instance=N,Ln(N),N):(_=g,(N=ws.get($))&&(_=d({},g),hS(_,N)),c=c.ownerDocument||c,N=c.createElement("script"),Ln(N),Wa(N,"link",_),c.head.appendChild(N),f.instance=N);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(_=f.instance,f.state.loading|=4,ub(_,g.precedence,c));return f.instance}function ub(c,f,g){for(var _=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=_.length?_[_.length-1]:null,$=N,oe=0;oe<_.length;oe++){var _e=_[oe];if(_e.dataset.precedence===f)$=_e;else if($!==N)break}$?$.parentNode.insertBefore(c,$.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(c,f.firstChild))}function fS(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function hS(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var db=null;function xI(c,f,g){if(db===null){var _=new Map,N=db=new Map;N.set(g,_)}else N=db,_=N.get(g),_||(_=new Map,N.set(g,_));if(_.has(c))return _;for(_.set(c,null),g=g.getElementsByTagName(c),N=0;N<g.length;N++){var $=g[N];if(!($[Lt]||$[pe]||c==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=$.getAttribute(f)||"";oe=c+oe;var _e=_.get(oe);_e?_e.push($):_.set(oe,[$])}}return _}function _I(c,f,g){c=c.ownerDocument||c,c.head.insertBefore(g,f==="title"?c.querySelector("head > title"):null)}function IU(c,f,g){if(g===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function SI(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Im=null;function jU(){}function OU(c,f,g){if(Im===null)throw Error(r(475));var _=Im;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var N=th(g.href),$=c.querySelector(Nm(N));if($){c=$._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(_.count++,_=fb.bind(_),c.then(_,_)),f.state.loading|=4,f.instance=$,Ln($);return}$=c.ownerDocument||c,g=vI(g),(N=ws.get(N))&&fS(g,N),$=$.createElement("link"),Ln($);var oe=$;oe._p=new Promise(function(_e,ze){oe.onload=_e,oe.onerror=ze}),Wa($,"link",g),f.instance=$}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(_.count++,f=fb.bind(_),c.addEventListener("load",f),c.addEventListener("error",f))}}function DU(){if(Im===null)throw Error(r(475));var c=Im;return c.stylesheets&&c.count===0&&pS(c,c.stylesheets),0<c.count?function(f){var g=setTimeout(function(){if(c.stylesheets&&pS(c,c.stylesheets),c.unsuspend){var _=c.unsuspend;c.unsuspend=null,_()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(g)}}:null}function fb(){if(this.count--,this.count===0){if(this.stylesheets)pS(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var hb=null;function pS(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,hb=new Map,f.forEach(MU,c),hb=null,fb.call(c))}function MU(c,f){if(!(f.state.loading&4)){var g=hb.get(c);if(g)var _=g.get(null);else{g=new Map,hb.set(c,g);for(var N=c.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<N.length;$++){var oe=N[$];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(g.set(oe.dataset.precedence,oe),_=oe)}_&&g.set(null,_)}N=f.instance,oe=N.getAttribute("data-precedence"),$=g.get(oe)||_,$===_&&g.set(null,N),g.set(oe,N),this.count++,_=fb.bind(this),N.addEventListener("load",_),N.addEventListener("error",_),$?$.parentNode.insertBefore(N,$.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(N,c.firstChild)),f.state.loading|=4}}var jm={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function PU(c,f,g,_,N,$,oe,_e){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=_,this.onUncaughtError=N,this.onCaughtError=$,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function EI(c,f,g,_,N,$,oe,_e,ze,dt,At,Mt){return c=new PU(c,f,g,oe,_e,ze,dt,Mt),f=1,$===!0&&(f|=24),$=Wi(3,null,null,f),c.current=$,$.stateNode=c,f=Z1(),f.refCount++,c.pooledCache=f,f.refCount++,$.memoizedState={element:_,isDehydrated:g,cache:f},Q1($),c}function CI(c){return c?(c=ko,c):ko}function kI(c,f,g,_,N,$){N=CI(N),_.context===null?_.context=N:_.pendingContext=N,_=jc(f),_.payload={element:g},$=$===void 0?null:$,$!==null&&(_.callback=$),g=Oc(c,_,f),g!==null&&(Qi(g,c,f),lm(g,c,f))}function TI(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<f?g:f}}function mS(c,f){TI(c,f),(c=c.alternate)&&TI(c,f)}function AI(c){if(c.tag===13){var f=zs(c,67108864);f!==null&&Qi(f,c,67108864),mS(c,67108864)}}var pb=!0;function FU(c,f,g,_){var N=ae.T;ae.T=null;var $=ne.p;try{ne.p=2,gS(c,f,g,_)}finally{ne.p=$,ae.T=N}}function LU(c,f,g,_){var N=ae.T;ae.T=null;var $=ne.p;try{ne.p=8,gS(c,f,g,_)}finally{ne.p=$,ae.T=N}}function gS(c,f,g,_){if(pb){var N=yS(_);if(N===null)rS(c,f,_,mb,g),RI(c,_);else if(BU(N,c,f,g,_))_.stopPropagation();else if(RI(c,_),f&4&&-1<$U.indexOf(c)){for(;N!==null;){var $=Kn(N);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var oe=be($.pendingLanes);if(oe!==0){var _e=$;for(_e.pendingLanes|=2,_e.entangledLanes|=2;oe;){var ze=1<<31-Zt(oe);_e.entanglements[1]|=ze,oe&=~ze}Io($),(gr&6)===0&&(Jy=de()+500,Cm(0))}}break;case 13:_e=zs($,2),_e!==null&&Qi(_e,$,2),eb(),mS($,2)}if($=yS(_),$===null&&rS(c,f,_,mb,g),$===N)break;N=$}N!==null&&_.stopPropagation()}else rS(c,f,_,null,g)}}function yS(c){return c=gf(c),bS(c)}var mb=null;function bS(c){if(mb=null,c=Nn(c),c!==null){var f=i(c);if(f===null)c=null;else{var g=f.tag;if(g===13){if(c=s(f),c!==null)return c;c=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return mb=c,null}function NI(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case te:return 2;case xe:return 8;case Fe:case Ee:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var vS=!1,Gc=null,Kc=null,Wc=null,Om=new Map,Dm=new Map,Zc=[],$U="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RI(c,f){switch(c){case"focusin":case"focusout":Gc=null;break;case"dragenter":case"dragleave":Kc=null;break;case"mouseover":case"mouseout":Wc=null;break;case"pointerover":case"pointerout":Om.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dm.delete(f.pointerId)}}function Mm(c,f,g,_,N,$){return c===null||c.nativeEvent!==$?(c={blockedOn:f,domEventName:g,eventSystemFlags:_,nativeEvent:$,targetContainers:[N]},f!==null&&(f=Kn(f),f!==null&&AI(f)),c):(c.eventSystemFlags|=_,f=c.targetContainers,N!==null&&f.indexOf(N)===-1&&f.push(N),c)}function BU(c,f,g,_,N){switch(f){case"focusin":return Gc=Mm(Gc,c,f,g,_,N),!0;case"dragenter":return Kc=Mm(Kc,c,f,g,_,N),!0;case"mouseover":return Wc=Mm(Wc,c,f,g,_,N),!0;case"pointerover":var $=N.pointerId;return Om.set($,Mm(Om.get($)||null,c,f,g,_,N)),!0;case"gotpointercapture":return $=N.pointerId,Dm.set($,Mm(Dm.get($)||null,c,f,g,_,N)),!0}return!1}function II(c){var f=Nn(c.target);if(f!==null){var g=i(f);if(g!==null){if(f=g.tag,f===13){if(f=s(g),f!==null){c.blockedOn=f,q(c.priority,function(){if(g.tag===13){var _=Ji();_=Ot(_);var N=zs(g,_);N!==null&&Qi(N,g,_),mS(g,_)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function gb(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var g=yS(c.nativeEvent);if(g===null){g=c.nativeEvent;var _=new g.constructor(g.type,g);fs=_,g.target.dispatchEvent(_),fs=null}else return f=Kn(g),f!==null&&AI(f),c.blockedOn=g,!1;f.shift()}return!0}function jI(c,f,g){gb(c)&&g.delete(f)}function zU(){vS=!1,Gc!==null&&gb(Gc)&&(Gc=null),Kc!==null&&gb(Kc)&&(Kc=null),Wc!==null&&gb(Wc)&&(Wc=null),Om.forEach(jI),Dm.forEach(jI)}function yb(c,f){c.blockedOn===f&&(c.blockedOn=null,vS||(vS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zU)))}var bb=null;function OI(c){bb!==c&&(bb=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){bb===c&&(bb=null);for(var f=0;f<c.length;f+=3){var g=c[f],_=c[f+1],N=c[f+2];if(typeof _!="function"){if(bS(_||g)===null)continue;break}var $=Kn(g);$!==null&&(c.splice(f,3),f-=3,b_($,{pending:!0,data:N,method:g.method,action:_},_,N))}}))}function Pm(c){function f(ze){return yb(ze,c)}Gc!==null&&yb(Gc,c),Kc!==null&&yb(Kc,c),Wc!==null&&yb(Wc,c),Om.forEach(f),Dm.forEach(f);for(var g=0;g<Zc.length;g++){var _=Zc[g];_.blockedOn===c&&(_.blockedOn=null)}for(;0<Zc.length&&(g=Zc[0],g.blockedOn===null);)II(g),g.blockedOn===null&&Zc.shift();if(g=(c.ownerDocument||c).$$reactFormReplay,g!=null)for(_=0;_<g.length;_+=3){var N=g[_],$=g[_+1],oe=N[Re]||null;if(typeof $=="function")oe||OI(g);else if(oe){var _e=null;if($&&$.hasAttribute("formAction")){if(N=$,oe=$[Re]||null)_e=oe.formAction;else if(bS(N)!==null)continue}else _e=oe.action;typeof _e=="function"?g[_+1]=_e:(g.splice(_,3),_-=3),OI(g)}}}function wS(c){this._internalRoot=c}vb.prototype.render=wS.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var g=f.current,_=Ji();kI(g,_,c,f,null,null)},vb.prototype.unmount=wS.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;kI(c.current,2,null,c,null,null),eb(),f[qe]=null}};function vb(c){this._internalRoot=c}vb.prototype.unstable_scheduleHydration=function(c){if(c){var f=G();c={blockedOn:null,target:c,priority:f};for(var g=0;g<Zc.length&&f!==0&&f<Zc[g].priority;g++);Zc.splice(g,0,c),g===0&&II(c)}};var DI=t.version;if(DI!=="19.1.0")throw Error(r(527,DI,"19.1.0"));ne.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var UU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wb.isDisabled&&wb.supportsFiber)try{St=wb.inject(UU),Ft=wb}catch{}}return Lm.createRoot=function(c,f){if(!a(c))throw Error(r(299));var g=!1,_="",N=YN,$=XN,oe=JN,_e=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(N=f.onUncaughtError),f.onCaughtError!==void 0&&($=f.onCaughtError),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(_e=f.unstable_transitionCallbacks)),f=EI(c,1,!1,null,null,g,_,N,$,oe,_e,null),c[qe]=f.current,nS(c),new wS(f)},Lm.hydrateRoot=function(c,f,g){if(!a(c))throw Error(r(299));var _=!1,N="",$=YN,oe=XN,_e=JN,ze=null,dt=null;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(N=g.identifierPrefix),g.onUncaughtError!==void 0&&($=g.onUncaughtError),g.onCaughtError!==void 0&&(oe=g.onCaughtError),g.onRecoverableError!==void 0&&(_e=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(ze=g.unstable_transitionCallbacks),g.formState!==void 0&&(dt=g.formState)),f=EI(c,1,!0,f,g??null,_,N,$,oe,_e,ze,dt),f.context=CI(null),g=f.current,_=Ji(),_=Ot(_),N=jc(_),N.callback=null,Oc(g,N,_),g=_,f.current.lanes=g,nt(f,g),Io(f),c[qe]=f.current,nS(c),new vb(f)},Lm.version="19.1.0",Lm}var HI;function aq(){if(HI)return SS.exports;HI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),SS.exports=rq(),SS.exports}var iq=aq();const sq=ui(iq);function VI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Yl(...e){return t=>{let n=!1;const r=e.map(a=>{const i=VI(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():VI(e[a],null)}}}}function kn(...e){return k.useCallback(Yl(...e),e)}function du(e){const t=oq(e),n=k.forwardRef((r,a)=>{const{children:i,...s}=r,o=k.Children.toArray(i),l=o.find(cq);if(l){const u=l.props.children,d=o.map(h=>h===l?k.Children.count(u)>1?k.Children.only(null):k.isValidElement(u)?u.props.children:null:h);return p.jsx(t,{...s,ref:a,children:k.isValidElement(u)?k.cloneElement(u,void 0,d):null})}return p.jsx(t,{...s,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var F6=du("Slot");function oq(e){const t=k.forwardRef((n,r)=>{const{children:a,...i}=n;if(k.isValidElement(a)){const s=dq(a),o=uq(i,a.props);return a.type!==k.Fragment&&(o.ref=r?Yl(r,s):s),k.cloneElement(a,o)}return k.Children.count(a)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var L6=Symbol("radix.slottable");function lq(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=L6,t}function cq(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===L6}function uq(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{i(...o),a(...o)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function dq(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function $6(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=$6(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function B6(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=$6(e))&&(r&&(r+=" "),r+=t);return r}const GI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,KI=B6,pk=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return KI(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=GI(d)||GI(h);return a[u][m]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...y}=d;return Object.entries(y).every(v=>{let[b,x]=v;return Array.isArray(x)?x.includes({...i,...o}[b]):{...i,...o}[b]===x})?[...u,h,m]:u},[]);return KI(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},mk="-",fq=e=>{const t=pq(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const o=s.split(mk);return o[0]===""&&o.length!==1&&o.shift(),z6(o,t)||hq(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},z6=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?z6(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(mk);return(s=t.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},WI=/^\[(.+)\]$/,hq=e=>{if(WI.test(e)){const t=WI.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},pq=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)UE(n[a],r,a,t);return r},UE=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:ZI(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(mq(a)){UE(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,s])=>{UE(s,ZI(t,i),n,r)})})},ZI=(e,t)=>{let n=e;return t.split(mk).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},mq=e=>e.isThemeGetter,gq=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return a(i,s),s},set(i,s){n.has(i)?n.set(i,s):a(i,s)}}},qE="!",HE=":",yq=HE.length,bq=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let s=0,o=0,l=0,u;for(let v=0;v<a.length;v++){let b=a[v];if(s===0&&o===0){if(b===HE){i.push(a.slice(l,v)),l=v+yq;continue}if(b==="/"){u=v;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const d=i.length===0?a:a.substring(l),h=vq(d),m=h!==d,y=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:y}};if(t){const a=t+HE,i=r;r=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},vq=e=>e.endsWith(qE)?e.substring(0,e.length-1):e.startsWith(qE)?e.substring(1):e,wq=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},xq=e=>({cache:gq(e.cacheSize),parseClassName:bq(e),sortModifiers:wq(e),...fq(e)}),_q=/\s+/,Sq=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,s=[],o=e.trim().split(_q);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:h,modifiers:m,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let x=!!b,w=r(x?v.substring(0,b):v);if(!w){if(!x){l=d+(l.length>0?" "+l:l);continue}if(w=r(v),!w){l=d+(l.length>0?" "+l:l);continue}x=!1}const S=i(m).join(":"),E=y?S+qE:S,C=E+w;if(s.includes(C))continue;s.push(C);const T=a(w,x);for(let j=0;j<T.length;++j){const I=T[j];s.push(E+I)}l=d+(l.length>0?" "+l:l)}return l};function Eq(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=U6(t))&&(r&&(r+=" "),r+=n);return r}const U6=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=U6(e[r]))&&(n&&(n+=" "),n+=t);return n};function Cq(e,...t){let n,r,a,i=s;function s(l){const u=t.reduce((d,h)=>h(d),e());return n=xq(u),r=n.cache.get,a=n.cache.set,i=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=Sq(l,n);return a(l,d),d}return function(){return i(Eq.apply(null,arguments))}}const wa=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},q6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,H6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kq=/^\d+\/\d+$/,Tq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Aq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Rq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Iq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rh=e=>kq.test(e),qn=e=>!!e&&!Number.isNaN(Number(e)),Xc=e=>!!e&&Number.isInteger(Number(e)),TS=e=>e.endsWith("%")&&qn(e.slice(0,-1)),Pl=e=>Tq.test(e),jq=()=>!0,Oq=e=>Aq.test(e)&&!Nq.test(e),V6=()=>!1,Dq=e=>Rq.test(e),Mq=e=>Iq.test(e),Pq=e=>!on(e)&&!ln(e),Fq=e=>rp(e,W6,V6),on=e=>q6.test(e),hd=e=>rp(e,Z6,Oq),AS=e=>rp(e,Uq,qn),YI=e=>rp(e,G6,V6),Lq=e=>rp(e,K6,Mq),xb=e=>rp(e,Y6,Dq),ln=e=>H6.test(e),$m=e=>ap(e,Z6),$q=e=>ap(e,qq),XI=e=>ap(e,G6),Bq=e=>ap(e,W6),zq=e=>ap(e,K6),_b=e=>ap(e,Y6,!0),rp=(e,t,n)=>{const r=q6.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},ap=(e,t,n=!1)=>{const r=H6.exec(e);return r?r[1]?t(r[1]):n:!1},G6=e=>e==="position"||e==="percentage",K6=e=>e==="image"||e==="url",W6=e=>e==="length"||e==="size"||e==="bg-size",Z6=e=>e==="length",Uq=e=>e==="number",qq=e=>e==="family-name",Y6=e=>e==="shadow",Hq=()=>{const e=wa("color"),t=wa("font"),n=wa("text"),r=wa("font-weight"),a=wa("tracking"),i=wa("leading"),s=wa("breakpoint"),o=wa("container"),l=wa("spacing"),u=wa("radius"),d=wa("shadow"),h=wa("inset-shadow"),m=wa("text-shadow"),y=wa("drop-shadow"),v=wa("blur"),b=wa("perspective"),x=wa("aspect"),w=wa("ease"),S=wa("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...C(),ln,on],j=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],R=()=>[ln,on,l],F=()=>[rh,"full","auto",...R()],B=()=>[Xc,"none","subgrid",ln,on],H=()=>["auto",{span:["full",Xc,ln,on]},Xc,ln,on],D=()=>[Xc,"auto",ln,on],Z=()=>["auto","min","max","fr",ln,on],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...R()],ne=()=>[rh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],X=()=>[e,ln,on],ie=()=>[...C(),XI,YI,{position:[ln,on]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",Bq,Fq,{size:[ln,on]}],Q=()=>[TS,$m,hd],ee=()=>["","none","full",u,ln,on],fe=()=>["",qn,$m,hd],ve=()=>["solid","dashed","dotted","double"],Oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>[qn,TS,XI,YI],Ne=()=>["","none",v,ln,on],Ce=()=>["none",qn,ln,on],Pe=()=>["none",qn,ln,on],Qe=()=>[qn,ln,on],Le=()=>[rh,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Pl],breakpoint:[Pl],color:[jq],container:[Pl],"drop-shadow":[Pl],ease:["in","out","in-out"],font:[Pq],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Pl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Pl],shadow:[Pl],spacing:["px",qn],text:[Pl],"text-shadow":[Pl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",rh,on,ln,x]}],container:["container"],columns:[{columns:[qn,on,ln,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[Xc,"auto",ln,on]}],basis:[{basis:[rh,"full","auto",o,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qn,rh,"auto","initial","none",on]}],grow:[{grow:["",qn,ln,on]}],shrink:[{shrink:["",qn,ln,on]}],order:[{order:[Xc,"first","last","none",ln,on]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[o,"screen",...ne()]}],"min-w":[{"min-w":[o,"screen","none",...ne()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...ne()]}],h:[{h:["screen",...ne()]}],"min-h":[{"min-h":["screen","none",...ne()]}],"max-h":[{"max-h":["screen",...ne()]}],"font-size":[{text:["base",n,$m,hd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ln,AS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",TS,on]}],"font-family":[{font:[$q,on,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ln,on]}],"line-clamp":[{"line-clamp":[qn,"none",ln,AS]}],leading:[{leading:[i,...R()]}],"list-image":[{"list-image":["none",ln,on]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ln,on]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[qn,"from-font","auto",ln,hd]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[qn,"auto",ln,on]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ln,on]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ln,on]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xc,ln,on],radial:["",ln,on],conic:[Xc,ln,on]},zq,Lq]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qn,ln,on]}],"outline-w":[{outline:["",qn,$m,hd]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",d,_b,xb]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,_b,xb]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[qn,hd]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",m,_b,xb]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[qn,ln,on]}],"mix-blend":[{"mix-blend":[...Oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ae()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Ae()}],"mask-image-t-to-pos":[{"mask-t-to":Ae()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Ae()}],"mask-image-r-to-pos":[{"mask-r-to":Ae()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Ae()}],"mask-image-b-to-pos":[{"mask-b-to":Ae()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Ae()}],"mask-image-l-to-pos":[{"mask-l-to":Ae()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Ae()}],"mask-image-x-to-pos":[{"mask-x-to":Ae()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Ae()}],"mask-image-y-to-pos":[{"mask-y-to":Ae()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[ln,on]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ae()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[qn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ae()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ln,on]}],filter:[{filter:["","none",ln,on]}],blur:[{blur:Ne()}],brightness:[{brightness:[qn,ln,on]}],contrast:[{contrast:[qn,ln,on]}],"drop-shadow":[{"drop-shadow":["","none",y,_b,xb]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",qn,ln,on]}],"hue-rotate":[{"hue-rotate":[qn,ln,on]}],invert:[{invert:["",qn,ln,on]}],saturate:[{saturate:[qn,ln,on]}],sepia:[{sepia:["",qn,ln,on]}],"backdrop-filter":[{"backdrop-filter":["","none",ln,on]}],"backdrop-blur":[{"backdrop-blur":Ne()}],"backdrop-brightness":[{"backdrop-brightness":[qn,ln,on]}],"backdrop-contrast":[{"backdrop-contrast":[qn,ln,on]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qn,ln,on]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qn,ln,on]}],"backdrop-invert":[{"backdrop-invert":["",qn,ln,on]}],"backdrop-opacity":[{"backdrop-opacity":[qn,ln,on]}],"backdrop-saturate":[{"backdrop-saturate":[qn,ln,on]}],"backdrop-sepia":[{"backdrop-sepia":["",qn,ln,on]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ln,on]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qn,"initial",ln,on]}],ease:[{ease:["linear","initial",w,ln,on]}],delay:[{delay:[qn,ln,on]}],animate:[{animate:["none",S,ln,on]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,ln,on]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[ln,on,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ln,on]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ln,on]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[qn,$m,hd,AS]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Vq=Cq(Hq);function _t(...e){return Vq(B6(e))}const Gq=pk("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Rt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?F6:"button";return p.jsx(i,{"data-slot":"button",className:_t(Gq({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wq=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),JI=e=>{const t=Wq(e);return t.charAt(0).toUpperCase()+t.slice(1)},X6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>k.createElement("svg",{ref:l,...Zq,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:X6("lucide",a),...o},[...s.map(([u,d])=>k.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=(e,t)=>{const n=k.forwardRef(({className:r,...a},i)=>k.createElement(Yq,{ref:i,iconNode:t,className:X6(`lucide-${Kq(JI(e))}`,`lucide-${e}`,r),...a}));return n.displayName=JI(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Jq=Qt("archive",Xq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],eH=Qt("arrow-down",Qq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],nH=Qt("ban",tH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],aH=Qt("bot",rH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Xw=Qt("brain-circuit",iH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xi=Qt("check",sH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sl=Qt("chevron-down",oH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],J6=Qt("chevron-right",lH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Kd=Qt("chevron-up",cH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Jw=Qt("chevrons-up-down",uH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nh=Qt("circle-alert",dH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gk=Qt("circle-check",fH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Q6=Qt("circle",hH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],yk=Qt("clipboard",pH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],gH=Qt("clock",mH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],eD=Qt("cloud-upload",yH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],tD=Qt("code",bH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],wH=Qt("cog",vH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],_H=Qt("coins",xH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],EH=Qt("copy",SH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],kH=Qt("dollar-sign",CH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],jd=Qt("download",TH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],NH=Qt("ellipsis-vertical",AH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],IH=Qt("file-archive",RH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],OH=Qt("file-down",jH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],MH=Qt("file-json",DH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],FH=Qt("file-question",PH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$H=Qt("file-text",LH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],zH=Qt("file-up",BH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],nD=Qt("file",UH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],rD=Qt("folder-git",qH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],bk=Qt("folder-plus",HH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],QI=Qt("folder-tree",VH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],KH=Qt("folder-up",GH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Dd=Qt("folder",WH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],YH=Qt("funnel",ZH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],fu=Qt("git-branch",XH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],aD=Qt("git-commit-horizontal",JH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],iD=Qt("git-merge",QH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],vk=Qt("git-pull-request",eV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],nV=Qt("grip-vertical",tV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],sD=Qt("hard-drive",rV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],iV=Qt("house",aV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],wk=Qt("image",sV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oD=Qt("info",oV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],VE=Qt("key",lV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],On=Qt("loader-circle",cV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],dV=Qt("menu",uV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],lD=Qt("message-square-plus",fV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],GE=Qt("message-square",hV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],mV=Qt("music",pV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],yV=Qt("panel-left-close",gV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],vV=Qt("panel-right-close",bV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],xk=Qt("paperclip",wV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],g0=Qt("pen",xV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wd=Qt("plus",_V);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],e3=Qt("puzzle",SV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qw=Qt("refresh-cw",EV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_k=Qt("rotate-ccw",CV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zd=Qt("save",kV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],no=Qt("search",TV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],NV=Qt("send-horizontal",AV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],t3=Qt("server",RV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pv=Qt("settings",IV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],OV=Qt("sliders-horizontal",jV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],MV=Qt("sparkles",DV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rg=Qt("square-pen",PV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],LV=Qt("square",FV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],BV=Qt("star",$V);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],KE=Qt("tags",zV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],qV=Qt("text",UV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],$i=Qt("trash-2",HV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ex=Qt("triangle-alert",VV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],KV=Qt("upload",GV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ZV=Qt("user",WV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],n3=Qt("users",YV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],JV=Qt("video",XV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Sk=Qt("wrench",QV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_i=Qt("x",eG);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nG=Qt("zap",tG),r3=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:p.jsx("div",{className:_t(n),children:r.map(a=>{var s,o;const i=t==="trigger"?(s=a.triggerRenderer)==null?void 0:s.call(a):(o=a.renderer)==null?void 0:o.call(a);return i?p.jsx(gt.Fragment,{children:i},a.id):null})})},a3=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(y=>y(t,m))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,a,o);return o},rG=e=>e?a3(e):a3,aG=e=>e;function iG(e,t=aG){const n=gt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return gt.useDebugValue(n),n}const i3=e=>{const t=rG(e),n=r=>iG(t,r);return Object.assign(n,t),n},Os=e=>e?i3(e):i3;var cD=Symbol.for("immer-nothing"),s3=Symbol.for("immer-draftable"),hr=Symbol.for("immer-state");function As(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rh=Object.getPrototypeOf;function Ih(e){return!!e&&!!e[hr]}function Xl(e){var t;return e?uD(e)||Array.isArray(e)||!!e[s3]||!!((t=e.constructor)!=null&&t[s3])||nx(e)||rx(e):!1}var sG=Object.prototype.constructor.toString();function uD(e){if(!e||typeof e!="object")return!1;const t=Rh(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===sG}function cg(e,t){tx(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function tx(e){const t=e[hr];return t?t.type_:Array.isArray(e)?1:nx(e)?2:rx(e)?3:0}function WE(e,t){return tx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dD(e,t,n){const r=tx(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function oG(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function nx(e){return e instanceof Map}function rx(e){return e instanceof Set}function Pa(e){return e.copy_||e.base_}function ZE(e,t){if(nx(e))return new Map(e);if(rx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=uD(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[hr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Rh(e),r)}else{const r=Rh(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function Ek(e,t=!1){return ax(e)||Ih(e)||!Xl(e)||(tx(e)>1&&(e.set=e.add=e.clear=e.delete=lG),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Ek(r,!0))),e}function lG(){As(2)}function ax(e){return Object.isFrozen(e)}var YE={};function Md(e){const t=YE[e];return t||As(0,e),t}function cG(e,t){YE[e]||(YE[e]=t)}var ug;function Fv(){return ug}function uG(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function o3(e,t){t&&(Md("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function XE(e){JE(e),e.drafts_.forEach(dG),e.drafts_=null}function JE(e){e===ug&&(ug=e.parent_)}function l3(e){return ug=uG(ug,e)}function dG(e){const t=e[hr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function c3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[hr].modified_&&(XE(t),As(4)),Xl(e)&&(e=Lv(t,e),t.parent_||$v(t,e)),t.patches_&&Md("Patches").generateReplacementPatches_(n[hr].base_,e,t.patches_,t.inversePatches_)):e=Lv(t,n,[]),XE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cD?e:void 0}function Lv(e,t,n){if(ax(t))return t;const r=t[hr];if(!r)return cg(t,(a,i)=>u3(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return $v(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,s=!1;r.type_===3&&(i=new Set(a),a.clear(),s=!0),cg(i,(o,l)=>u3(e,r,a,o,l,n,s)),$v(e,a,!1),n&&e.patches_&&Md("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function u3(e,t,n,r,a,i,s){if(Ih(a)){const o=i&&t&&t.type_!==3&&!WE(t.assigned_,r)?i.concat(r):void 0,l=Lv(e,a,o);if(dD(n,r,l),Ih(l))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(Xl(a)&&!ax(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Lv(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&$v(e,a)}}function $v(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ek(t,n)}function fG(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Fv(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=Ck;n&&(a=[r],i=dg);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}var Ck={get(e,t){if(t===hr)return e;const n=Pa(e);if(!WE(n,t))return hG(e,n,t);const r=n[t];return e.finalized_||!Xl(r)?r:r===NS(e.base_,t)?(RS(e),e.copy_[t]=fg(r,e)):r},has(e,t){return t in Pa(e)},ownKeys(e){return Reflect.ownKeys(Pa(e))},set(e,t,n){const r=fD(Pa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=NS(Pa(e),t),i=a==null?void 0:a[hr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(oG(n,a)&&(n!==void 0||WE(e.base_,t)))return!0;RS(e),$l(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return NS(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,RS(e),$l(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Pa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){As(11)},getPrototypeOf(e){return Rh(e.base_)},setPrototypeOf(){As(12)}},dg={};cg(Ck,(e,t)=>{dg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});dg.deleteProperty=function(e,t){return dg.set.call(this,e,t,void 0)};dg.set=function(e,t,n){return Ck.set.call(this,e[0],t,n,e[0])};function NS(e,t){const n=e[hr];return(n?Pa(n):e)[t]}function hG(e,t,n){var a;const r=fD(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function fD(e,t){if(!(t in e))return;let n=Rh(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Rh(n)}}function $l(e){e.modified_||(e.modified_=!0,e.parent_&&$l(e.parent_))}function RS(e){e.copy_||(e.copy_=ZE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var pG=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...u){return s.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&As(6),r!==void 0&&typeof r!="function"&&As(7);let a;if(Xl(t)){const i=l3(this),s=fg(t,void 0);let o=!0;try{a=n(s),o=!1}finally{o?XE(i):JE(i)}return o3(i,r),c3(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===cD&&(a=void 0),this.autoFreeze_&&Ek(a,!0),r){const i=[],s=[];Md("Patches").generateReplacementPatches_(t,a,i,s),r(i,s)}return a}else As(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let r,a;return[this.produce(t,n,(s,o)=>{r=s,a=o}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Xl(e)||As(8),Ih(e)&&(e=mG(e));const t=l3(this),n=fg(e,void 0);return n[hr].isManual_=!0,JE(t),n}finishDraft(e,t){const n=e&&e[hr];(!n||!n.isManual_)&&As(9);const{scope_:r}=n;return o3(r,t),c3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=Md("Patches").applyPatches_;return Ih(e)?r(e,t):this.produce(e,a=>r(a,t))}};function fg(e,t){const n=nx(e)?Md("MapSet").proxyMap_(e,t):rx(e)?Md("MapSet").proxySet_(e,t):fG(e,t);return(t?t.scope_:Fv()).drafts_.push(n),n}function mG(e){return Ih(e)||As(10,e),hD(e)}function hD(e){if(!Xl(e)||ax(e))return e;const t=e[hr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ZE(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ZE(e,!0);return cg(n,(r,a)=>{dD(n,r,hD(a))}),t&&(t.finalized_=!1),n}function gG(){class e extends Map{constructor(l,u){super(),this[hr]={type_:2,parent_:u,scope_:u?u.scope_:Fv(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Pa(this[hr]).size}has(l){return Pa(this[hr]).has(l)}set(l,u){const d=this[hr];return s(d),(!Pa(d).has(l)||Pa(d).get(l)!==u)&&(n(d),$l(d),d.assigned_.set(l,!0),d.copy_.set(l,u),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const u=this[hr];return s(u),n(u),$l(u),u.base_.has(l)?u.assigned_.set(l,!1):u.assigned_.delete(l),u.copy_.delete(l),!0}clear(){const l=this[hr];s(l),Pa(l).size&&(n(l),$l(l),l.assigned_=new Map,cg(l.base_,u=>{l.assigned_.set(u,!1)}),l.copy_.clear())}forEach(l,u){const d=this[hr];Pa(d).forEach((h,m,y)=>{l.call(u,this.get(m),m,this)})}get(l){const u=this[hr];s(u);const d=Pa(u).get(l);if(u.finalized_||!Xl(d)||d!==u.base_.get(l))return d;const h=fg(d,u);return n(u),u.copy_.set(l,h),h}keys(){return Pa(this[hr]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=l.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=l.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,u){super(),this[hr]={type_:3,parent_:u,scope_:u?u.scope_:Fv(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Pa(this[hr]).size}has(l){const u=this[hr];return s(u),u.copy_?!!(u.copy_.has(l)||u.drafts_.has(l)&&u.copy_.has(u.drafts_.get(l))):u.base_.has(l)}add(l){const u=this[hr];return s(u),this.has(l)||(i(u),$l(u),u.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const u=this[hr];return s(u),i(u),$l(u),u.copy_.delete(l)||(u.drafts_.has(l)?u.copy_.delete(u.drafts_.get(l)):!1)}clear(){const l=this[hr];s(l),Pa(l).size&&(i(l),$l(l),l.copy_.clear())}values(){const l=this[hr];return s(l),i(l),l.copy_.values()}entries(){const l=this[hr];return s(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,u){const d=this.values();let h=d.next();for(;!h.done;)l.call(u,h.value,h.value,this),h=d.next()}}function a(o,l){return new r(o,l)}function i(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(Xl(l)){const u=fg(l,o);o.drafts_.set(l,u),o.copy_.add(u)}else o.copy_.add(l)}))}function s(o){o.revoked_&&As(3,JSON.stringify(Pa(o)))}cG("MapSet",{proxyMap_:t,proxySet_:a})}var cs=new pG,yG=cs.produce;cs.produceWithPatches.bind(cs);cs.setAutoFreeze.bind(cs);cs.setUseStrictShallowCopy.bind(cs);cs.applyPatches.bind(cs);cs.createDraft.bind(cs);cs.finishDraft.bind(cs);const bG=e=>(t,n,r)=>(r.setState=(a,i,...s)=>{const o=typeof a=="function"?yG(a):a;return t(o,i,...s)},e(r.setState,n,r)),Ds=bG,Rr=Os(Ds((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const s={modId:r,callback:a,order:i};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(s),o.middlewareRegistry[n].sort((l,u)=>(l.order??0)-(u.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var s;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===a)),((s=i.middlewareRegistry[n])==null?void 0:s.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(s=>{s.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${s.tools[r].modId}". Overwriting with registration from mod "${n}".`),s.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Ev={exports:{}},vG=Ev.exports,d3;function wG(){return d3||(d3=1,function(e,t){(function(n,r){e.exports=r()})(vG,function(){var n=function(A,M){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,re){Y.__proto__=re}||function(Y,re){for(var ce in re)Object.prototype.hasOwnProperty.call(re,ce)&&(Y[ce]=re[ce])})(A,M)},r=function(){return(r=Object.assign||function(A){for(var M,Y=1,re=arguments.length;Y<re;Y++)for(var ce in M=arguments[Y])Object.prototype.hasOwnProperty.call(M,ce)&&(A[ce]=M[ce]);return A}).apply(this,arguments)};function a(A,M,Y){for(var re,ce=0,we=M.length;ce<we;ce++)!re&&ce in M||((re=re||Array.prototype.slice.call(M,0,ce))[ce]=M[ce]);return A.concat(re||Array.prototype.slice.call(M))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:kd,s=Object.keys,o=Array.isArray;function l(A,M){return typeof M!="object"||s(M).forEach(function(Y){A[Y]=M[Y]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,M){return d.call(A,M)}function m(A,M){typeof M=="function"&&(M=M(u(A))),(typeof Reflect>"u"?s:Reflect.ownKeys)(M).forEach(function(Y){v(A,Y,M[Y])})}var y=Object.defineProperty;function v(A,M,Y,re){y(A,M,l(Y&&h(Y,"get")&&typeof Y.get=="function"?{get:Y.get,set:Y.set,configurable:!0}:{value:Y,configurable:!0,writable:!0},re))}function b(A){return{from:function(M){return A.prototype=Object.create(M.prototype),v(A.prototype,"constructor",A),{extend:m.bind(null,A.prototype)}}}}var x=Object.getOwnPropertyDescriptor,w=[].slice;function S(A,M,Y){return w.call(A,M,Y)}function E(A,M){return M(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function T(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function j(A,M){if(typeof M=="string"&&h(A,M))return A[M];if(!M)return A;if(typeof M!="string"){for(var Y=[],re=0,ce=M.length;re<ce;++re){var we=j(A,M[re]);Y.push(we)}return Y}var Me=M.indexOf(".");if(Me!==-1){var $e=A[M.substr(0,Me)];return $e==null?void 0:j($e,M.substr(Me+1))}}function I(A,M,Y){if(A&&M!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof M!="string"&&"length"in M){C(typeof Y!="string"&&"length"in Y);for(var re=0,ce=M.length;re<ce;++re)I(A,M[re],Y[re])}else{var we,Me,$e=M.indexOf(".");$e!==-1?(we=M.substr(0,$e),(Me=M.substr($e+1))===""?Y===void 0?o(A)&&!isNaN(parseInt(we))?A.splice(we,1):delete A[we]:A[we]=Y:I($e=!($e=A[we])||!h(A,we)?A[we]={}:$e,Me,Y)):Y===void 0?o(A)&&!isNaN(parseInt(M))?A.splice(M,1):delete A[M]:A[M]=Y}}function R(A){var M,Y={};for(M in A)h(A,M)&&(Y[M]=A[M]);return Y}var F=[].concat;function B(A){return F.apply([],A)}var St="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(B([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(M){return M+A+"Array"})}))).filter(function(A){return i[A]}),H=new Set(St.map(function(A){return i[A]})),D=null;function Z(A){return D=new WeakMap,A=function M(Y){if(!Y||typeof Y!="object")return Y;var re=D.get(Y);if(re)return re;if(o(Y)){re=[],D.set(Y,re);for(var ce=0,we=Y.length;ce<we;++ce)re.push(M(Y[ce]))}else if(H.has(Y.constructor))re=Y;else{var Me,$e=u(Y);for(Me in re=$e===Object.prototype?{}:Object.create($e),D.set(Y,re),Y)h(Y,Me)&&(re[Me]=M(Y[Me]))}return re}(A),D=null,A}var V={}.toString;function ue(A){return V.call(A).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof ae=="symbol"?function(A){var M;return A!=null&&(M=A[ae])&&M.apply(A)}:function(){return null};function X(A,M){return M=A.indexOf(M),0<=M&&A.splice(M,1),0<=M}var ie={};function L(A){var M,Y,re,ce;if(arguments.length===1){if(o(A))return A.slice();if(this===ie&&typeof A=="string")return[A];if(ce=ne(A)){for(Y=[];!(re=ce.next()).done;)Y.push(re.value);return Y}if(A==null)return[A];if(typeof(M=A.length)!="number")return[A];for(Y=new Array(M);M--;)Y[M]=A[M];return Y}for(M=arguments.length,Y=new Array(M);M--;)Y[M]=arguments[M];return Y}var J=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},it=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],gi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(it),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ee(A,M){this.name=A,this.message=M}function fe(A,M){return A+". Errors: "+Object.keys(M).map(function(Y){return M[Y].toString()}).filter(function(Y,re,ce){return ce.indexOf(Y)===re}).join(`
`)}function ve(A,M,Y,re){this.failures=M,this.failedKeys=re,this.successCount=Y,this.message=fe(A,M)}function Oe(A,M){this.name="BulkError",this.failures=Object.keys(M).map(function(Y){return M[Y]}),this.failuresByPos=M,this.message=fe(A,this.failures)}b(ee).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ve).from(ee),b(Oe).from(ee);var Ae=gi.reduce(function(A,M){return A[M]=M+"Error",A},{}),Ne=ee,Ce=gi.reduce(function(A,M){var Y=M+"Error";function re(ce,we){this.name=Y,ce?typeof ce=="string"?(this.message="".concat(ce).concat(we?`
 `+we:""),this.inner=we||null):typeof ce=="object"&&(this.message="".concat(ce.name," ").concat(ce.message),this.inner=ce):(this.message=Q[M]||Y,this.inner=null)}return b(re).from(Ne),A[M]=re,A},{});Ce.Syntax=SyntaxError,Ce.Type=TypeError,Ce.Range=RangeError;var Pe=it.reduce(function(A,M){return A[M+"Error"]=Ce[M],A},{}),Qe=gi.reduce(function(A,M){return["Syntax","Type","Range"].indexOf(M)===-1&&(A[M+"Error"]=Ce[M]),A},{});function Le(){}function Ie(A){return A}function z(A,M){return A==null||A===Ie?M:function(Y){return M(A(Y))}}function Se(A,M){return function(){A.apply(this,arguments),M.apply(this,arguments)}}function Te(A,M){return A===Le?M:function(){var Y=A.apply(this,arguments);Y!==void 0&&(arguments[0]=Y);var re=this.onsuccess,ce=this.onerror;this.onsuccess=null,this.onerror=null;var we=M.apply(this,arguments);return re&&(this.onsuccess=this.onsuccess?Se(re,this.onsuccess):re),ce&&(this.onerror=this.onerror?Se(ce,this.onerror):ce),we!==void 0?we:Y}}function de(A,M){return A===Le?M:function(){A.apply(this,arguments);var Y=this.onsuccess,re=this.onerror;this.onsuccess=this.onerror=null,M.apply(this,arguments),Y&&(this.onsuccess=this.onsuccess?Se(Y,this.onsuccess):Y),re&&(this.onerror=this.onerror?Se(re,this.onerror):re)}}function se(A,M){return A===Le?M:function(Y){var re=A.apply(this,arguments);l(Y,re);var ce=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,Y=M.apply(this,arguments),ce&&(this.onsuccess=this.onsuccess?Se(ce,this.onsuccess):ce),we&&(this.onerror=this.onerror?Se(we,this.onerror):we),re===void 0?Y===void 0?void 0:Y:l(re,Y)}}function te(A,M){return A===Le?M:function(){return M.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function xe(A,M){return A===Le?M:function(){var Y=A.apply(this,arguments);if(Y&&typeof Y.then=="function"){for(var re=this,ce=arguments.length,we=new Array(ce);ce--;)we[ce]=arguments[ce];return Y.then(function(){return M.apply(re,we)})}return M.apply(this,arguments)}}Qe.ModifyError=ve,Qe.DexieError=ee,Qe.BulkError=Oe;var Fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ee(A){Fe=A}var Ge={},Nt=100,St=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,u(A),A];var M=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[M,u(M),A]}(),it=St[0],gi=St[1],St=St[2],gi=gi&&gi.then,Ft=it&&it.constructor,Dt=!!St,Zt=function(A,M){le.push([A,M]),O&&(queueMicrotask(me),O=!1)},ye=!0,O=!0,K=[],he=[],je=Ie,be={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},ke=be,le=[],ft=0,vt=[];function P(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var M=this._PSD=ke;if(typeof A!="function"){if(A!==Ge)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++M.ref,function Y(re,ce){try{ce(function(we){if(re._state===null){if(we===re)throw new TypeError("A promise cannot be resolved with itself.");var Me=re._lib&&G();we&&typeof we.then=="function"?Y(re,function($e,We){we instanceof P?we._then($e,We):we.then($e,We)}):(re._state=!0,re._value=we,De(re)),Me&&q()}},ge.bind(null,re))}catch(we){ge(re,we)}}(this,A)}var Be={get:function(){var A=ke,M=It;function Y(re,ce){var we=this,Me=!A.global&&(A!==ke||M!==It),$e=Me&&!Kn(),We=new P(function(Xe,rt){Ke(we,new nt(bo(re,A,Me,$e),bo(ce,A,Me,$e),Xe,rt,A))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return Y.prototype=Ge,Y},set:function(A){v(this,"then",A&&A.prototype===Ge?Be:{get:function(){return A},set:Be.set})}};function nt(A,M,Y,re,ce){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof M=="function"?M:null,this.resolve=Y,this.reject=re,this.psd=ce}function ge(A,M){var Y,re;he.push(M),A._state===null&&(Y=A._lib&&G(),M=je(M),A._state=!1,A._value=M,re=A,K.some(function(ce){return ce._value===re._value})||K.push(re),De(A),Y&&q())}function De(A){var M=A._listeners;A._listeners=[];for(var Y=0,re=M.length;Y<re;++Y)Ke(A,M[Y]);var ce=A._PSD;--ce.ref||ce.finalize(),ft===0&&(++ft,Zt(function(){--ft==0&&W()},[]))}function Ke(A,M){if(A._state!==null){var Y=A._state?M.onFulfilled:M.onRejected;if(Y===null)return(A._state?M.resolve:M.reject)(A._value);++M.psd.ref,++ft,Zt(Ot,[Y,A,M])}else A._listeners.push(M)}function Ot(A,M,Y){try{var re,ce=M._value;!M._state&&he.length&&(he=[]),re=Fe&&M._consoleTask?M._consoleTask.run(function(){return A(ce)}):A(ce),M._state||he.indexOf(ce)!==-1||function(we){for(var Me=K.length;Me;)if(K[--Me]._value===we._value)return K.splice(Me,1)}(M),Y.resolve(re)}catch(we){Y.reject(we)}finally{--ft==0&&W(),--Y.psd.ref||Y.psd.finalize()}}function me(){yo(be,function(){G()&&q()})}function G(){var A=ye;return O=ye=!1,A}function q(){var A,M,Y;do for(;0<le.length;)for(A=le,le=[],Y=A.length,M=0;M<Y;++M){var re=A[M];re[0].apply(null,re[1])}while(0<le.length);O=ye=!0}function W(){var A=K;K=[],A.forEach(function(re){re._PSD.onunhandled.call(null,re._value,re)});for(var M=vt.slice(0),Y=M.length;Y;)M[--Y]()}function pe(A){return new P(Ge,!1,A)}function Re(A,M){var Y=ke;return function(){var re=G(),ce=ke;try{return Ln(Y,!0),A.apply(this,arguments)}catch(we){M&&M(we)}finally{Ln(ce,!1),re&&q()}}}m(P.prototype,{then:Be,_then:function(A,M){Ke(this,new nt(null,null,A,M,ke))},catch:function(A){if(arguments.length===1)return this.then(null,A);var M=A,Y=arguments[1];return typeof M=="function"?this.then(null,function(re){return(re instanceof M?Y:pe)(re)}):this.then(null,function(re){return(re&&re.name===M?Y:pe)(re)})},finally:function(A){return this.then(function(M){return P.resolve(A()).then(function(){return M})},function(M){return P.resolve(A()).then(function(){return pe(M)})})},timeout:function(A,M){var Y=this;return A<1/0?new P(function(re,ce){var we=setTimeout(function(){return ce(new Ce.Timeout(M))},A);Y.then(re,ce).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(P.prototype,Symbol.toStringTag,"Dexie.Promise"),be.env=hi(),m(P,{all:function(){var A=L.apply(null,arguments).map(xr);return new P(function(M,Y){A.length===0&&M([]);var re=A.length;A.forEach(function(ce,we){return P.resolve(ce).then(function(Me){A[we]=Me,--re||M(A)},Y)})})},resolve:function(A){return A instanceof P?A:A&&typeof A.then=="function"?new P(function(M,Y){A.then(M,Y)}):new P(Ge,!0,A)},reject:pe,race:function(){var A=L.apply(null,arguments).map(xr);return new P(function(M,Y){A.map(function(re){return P.resolve(re).then(M,Y)})})},PSD:{get:function(){return ke},set:function(A){return ke=A}},totalEchoes:{get:function(){return It}},newPSD:en,usePSD:yo,scheduler:{get:function(){return Zt},set:function(A){Zt=A}},rejectionMapper:{get:function(){return je},set:function(A){je=A}},follow:function(A,M){return new P(function(Y,re){return en(function(ce,we){var Me=ke;Me.unhandleds=[],Me.onunhandled=we,Me.finalize=Se(function(){var $e,We=this;$e=function(){We.unhandleds.length===0?ce():we(We.unhandleds[0])},vt.push(function Xe(){$e(),vt.splice(vt.indexOf(Xe),1)}),++ft,Zt(function(){--ft==0&&W()},[])},Me.finalize),A()},M,Y,re)})}}),Ft&&(Ft.allSettled&&v(P,"allSettled",function(){var A=L.apply(null,arguments).map(xr);return new P(function(M){A.length===0&&M([]);var Y=A.length,re=new Array(Y);A.forEach(function(ce,we){return P.resolve(ce).then(function(Me){return re[we]={status:"fulfilled",value:Me}},function(Me){return re[we]={status:"rejected",reason:Me}}).then(function(){return--Y||M(re)})})})}),Ft.any&&typeof AggregateError<"u"&&v(P,"any",function(){var A=L.apply(null,arguments).map(xr);return new P(function(M,Y){A.length===0&&Y(new AggregateError([]));var re=A.length,ce=new Array(re);A.forEach(function(we,Me){return P.resolve(we).then(function($e){return M($e)},function($e){ce[Me]=$e,--re||Y(new AggregateError(ce))})})})}),Ft.withResolvers&&(P.withResolvers=Ft.withResolvers));var qe={awaits:0,echoes:0,id:0},pt=0,Wt=[],ut=0,It=0,Lt=0;function en(A,M,Y,re){var ce=ke,we=Object.create(ce);return we.parent=ce,we.ref=0,we.global=!1,we.id=++Lt,be.env,we.env=Dt?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject}:{},M&&l(we,M),++ce.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},re=yo(we,A,Y,re),we.ref===0&&we.finalize(),re}function Nn(){return qe.id||(qe.id=++pt),++qe.awaits,qe.echoes+=Nt,qe.id}function Kn(){return!!qe.awaits&&(--qe.awaits==0&&(qe.id=0),qe.echoes=qe.awaits*Nt,!0)}function xr(A){return qe.echoes&&A&&A.constructor===Ft?(Nn(),A.then(function(M){return Kn(),M},function(M){return Kn(),Kr(M)})):A}function _r(){var A=Wt[Wt.length-1];Wt.pop(),Ln(A,!1)}function Ln(A,M){var Y,re=ke;(M?!qe.echoes||ut++&&A===ke:!ut||--ut&&A===ke)||queueMicrotask(M?(function(ce){++It,qe.echoes&&--qe.echoes!=0||(qe.echoes=qe.awaits=qe.id=0),Wt.push(ke),Ln(ce,!0)}).bind(null,A):_r),A!==ke&&(ke=A,re===be&&(be.env=hi()),Dt&&(Y=be.env.Promise,M=A.env,(re.global||A.global)&&(Object.defineProperty(i,"Promise",M.PromiseProp),Y.all=M.all,Y.race=M.race,Y.resolve=M.resolve,Y.reject=M.reject,M.allSettled&&(Y.allSettled=M.allSettled),M.any&&(Y.any=M.any))))}function hi(){var A=i.Promise;return Dt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function yo(A,M,Y,re,ce){var we=ke;try{return Ln(A,!0),M(Y,re,ce)}finally{Ln(we,!1)}}function bo(A,M,Y,re){return typeof A!="function"?A:function(){var ce=ke;Y&&Nn(),Ln(M,!0);try{return A.apply(this,arguments)}finally{Ln(ce,!1),re&&queueMicrotask(Kn)}}}function vo(A){Promise===Ft&&qe.echoes===0?ut===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+gi).indexOf("[native code]")===-1&&(Nn=Kn=Le);var Kr=P.reject,wo="",ds="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",dy="String expected.",$s=[],dl="__dbnames",Gi="readonly",Gu="readwrite";function xo(A,M){return A?M?function(){return A.apply(this,arguments)&&M.apply(this,arguments)}:A:M}var fl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function mc(A){return typeof A!="string"||/\./.test(A)?function(M){return M}:function(M){return M[A]===void 0&&A in M&&delete(M=Z(M))[A],M}}function pf(){throw Ce.Type()}function Wn(A,M){try{var Y=Dp(A),re=Dp(M);if(Y!==re)return Y==="Array"?1:re==="Array"?-1:Y==="binary"?1:re==="binary"?-1:Y==="string"?1:re==="string"?-1:Y==="Date"?1:re!=="Date"?NaN:-1;switch(Y){case"number":case"Date":case"string":return M<A?1:A<M?-1:0;case"binary":return function(ce,we){for(var Me=ce.length,$e=we.length,We=Me<$e?Me:$e,Xe=0;Xe<We;++Xe)if(ce[Xe]!==we[Xe])return ce[Xe]<we[Xe]?-1:1;return Me===$e?0:Me<$e?-1:1}(pi(A),pi(M));case"Array":return function(ce,we){for(var Me=ce.length,$e=we.length,We=Me<$e?Me:$e,Xe=0;Xe<We;++Xe){var rt=Wn(ce[Xe],we[Xe]);if(rt!==0)return rt}return Me===$e?0:Me<$e?-1:1}(A,M)}}catch{}return NaN}function Dp(A){var M=typeof A;return M!="object"?M:ArrayBuffer.isView(A)?"binary":(A=ue(A),A==="ArrayBuffer"?"binary":A)}function pi(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var Mp=(Ir.prototype._trans=function(A,M,Y){var re=this._tx||ke.trans,ce=this.name,we=Fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function Me(Xe,rt,He){if(!He.schema[ce])throw new Ce.NotFound("Table "+ce+" not part of transaction");return M(He.idbtrans,He)}var $e=G();try{var We=re&&re.db._novip===this.db._novip?re===ke.trans?re._promise(A,Me,Y):en(function(){return re._promise(A,Me,Y)},{trans:re,transless:ke.transless||ke}):function Xe(rt,He,st,Ve){if(rt.idbdb&&(rt._state.openComplete||ke.letThrough||rt._vip)){var tt=rt._createTransaction(He,st,rt._dbSchema);try{tt.create(),rt._state.PR1398_maxLoop=3}catch(ot){return ot.name===Ae.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,He,st,Ve)})):Kr(ot)}return tt._promise(He,function(ot,Je){return en(function(){return ke.trans=tt,Ve(ot,Je,tt)})}).then(function(ot){if(He==="readwrite")try{tt.idbtrans.commit()}catch{}return He==="readonly"?ot:tt._completion.then(function(){return ot})})}if(rt._state.openComplete)return Kr(new Ce.DatabaseClosed(rt._state.dbOpenError));if(!rt._state.isBeingOpened){if(!rt._state.autoOpen)return Kr(new Ce.DatabaseClosed);rt.open().catch(Le)}return rt._state.dbReadyPromise.then(function(){return Xe(rt,He,st,Ve)})}(this.db,A,[this.name],Me);return we&&(We._consoleTask=we,We=We.catch(function(Xe){return console.trace(Xe),Kr(Xe)})),We}finally{$e&&q()}},Ir.prototype.get=function(A,M){var Y=this;return A&&A.constructor===Object?this.where(A).first(M):A==null?Kr(new Ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(re){return Y.core.get({trans:re,key:A}).then(function(ce){return Y.hook.reading.fire(ce)})}).then(M)},Ir.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(o(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var M=s(A);if(M.length===1)return this.where(M[0]).equals(A[M[0]]);var Y=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&M.every(function(Xe){return 0<=$e.keyPath.indexOf(Xe)})){for(var We=0;We<M.length;++We)if(M.indexOf($e.keyPath[We])===-1)return!1;return!0}return!1}).sort(function($e,We){return $e.keyPath.length-We.keyPath.length})[0];if(Y&&this.db._maxKey!==wo){var we=Y.keyPath.slice(0,M.length);return this.where(we).equals(we.map(function(We){return A[We]}))}!Y&&Fe&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(M.join("+"),"]"));var re=this.schema.idxByName;function ce($e,We){return Wn($e,We)===0}var Me=M.reduce(function(He,We){var Xe=He[0],rt=He[1],He=re[We],st=A[We];return[Xe||He,Xe||!He?xo(rt,He&&He.multi?function(Ve){return Ve=j(Ve,We),o(Ve)&&Ve.some(function(tt){return ce(st,tt)})}:function(Ve){return ce(st,j(Ve,We))}):rt]},[null,null]),we=Me[0],Me=Me[1];return we?this.where(we.name).equals(A[we.keyPath]).filter(Me):Y?this.filter(Me):this.where(M).equals("")},Ir.prototype.filter=function(A){return this.toCollection().and(A)},Ir.prototype.count=function(A){return this.toCollection().count(A)},Ir.prototype.offset=function(A){return this.toCollection().offset(A)},Ir.prototype.limit=function(A){return this.toCollection().limit(A)},Ir.prototype.each=function(A){return this.toCollection().each(A)},Ir.prototype.toArray=function(A){return this.toCollection().toArray(A)},Ir.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ir.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,o(A)?"[".concat(A.join("+"),"]"):A))},Ir.prototype.reverse=function(){return this.toCollection().reverse()},Ir.prototype.mapToClass=function(A){var M,Y=this.db,re=this.name;function ce(){return M!==null&&M.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof pf&&(function(We,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function rt(){this.constructor=We}n(We,Xe),We.prototype=Xe===null?Object.create(Xe):(rt.prototype=Xe.prototype,new rt)}(ce,M=A),Object.defineProperty(ce.prototype,"db",{get:function(){return Y},enumerable:!1,configurable:!0}),ce.prototype.table=function(){return re},A=ce);for(var we=new Set,Me=A.prototype;Me;Me=u(Me))Object.getOwnPropertyNames(Me).forEach(function(We){return we.add(We)});function $e(We){if(!We)return We;var Xe,rt=Object.create(A.prototype);for(Xe in We)if(!we.has(Xe))try{rt[Xe]=We[Xe]}catch{}return rt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),A},Ir.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},Ir.prototype.add=function(A,M){var Y=this,re=this.schema.primKey,ce=re.auto,we=re.keyPath,Me=A;return we&&ce&&(Me=mc(we)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"add",keys:M!=null?[M]:null,values:[Me]})}).then(function($e){return $e.numFailures?P.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{I(A,we,$e)}catch{}return $e})},Ir.prototype.update=function(A,M){return typeof A!="object"||o(A)?this.where(":id").equals(A).modify(M):(A=j(A,this.schema.primKey.keyPath),A===void 0?Kr(new Ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(M))},Ir.prototype.put=function(A,M){var Y=this,re=this.schema.primKey,ce=re.auto,we=re.keyPath,Me=A;return we&&ce&&(Me=mc(we)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"put",values:[Me],keys:M!=null?[M]:null})}).then(function($e){return $e.numFailures?P.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{I(A,we,$e)}catch{}return $e})},Ir.prototype.delete=function(A){var M=this;return this._trans("readwrite",function(Y){return M.core.mutate({trans:Y,type:"delete",keys:[A]})}).then(function(Y){return Y.numFailures?P.reject(Y.failures[0]):void 0})},Ir.prototype.clear=function(){var A=this;return this._trans("readwrite",function(M){return A.core.mutate({trans:M,type:"deleteRange",range:fl})}).then(function(M){return M.numFailures?P.reject(M.failures[0]):void 0})},Ir.prototype.bulkGet=function(A){var M=this;return this._trans("readonly",function(Y){return M.core.getMany({keys:A,trans:Y}).then(function(re){return re.map(function(ce){return M.hook.reading.fire(ce)})})})},Ir.prototype.bulkAdd=function(A,M,Y){var re=this,ce=Array.isArray(M)?M:void 0,we=(Y=Y||(ce?void 0:M))?Y.allKeys:void 0;return this._trans("readwrite",function(Me){var Xe=re.schema.primKey,$e=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new Ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var We=A.length,Xe=Xe&&$e?A.map(mc(Xe)):A;return re.core.mutate({trans:Me,type:"add",keys:ce,values:Xe,wantResults:we}).then(function(tt){var He=tt.numFailures,st=tt.results,Ve=tt.lastResult,tt=tt.failures;if(He===0)return we?st:Ve;throw new Oe("".concat(re.name,".bulkAdd(): ").concat(He," of ").concat(We," operations failed"),tt)})})},Ir.prototype.bulkPut=function(A,M,Y){var re=this,ce=Array.isArray(M)?M:void 0,we=(Y=Y||(ce?void 0:M))?Y.allKeys:void 0;return this._trans("readwrite",function(Me){var Xe=re.schema.primKey,$e=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new Ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var We=A.length,Xe=Xe&&$e?A.map(mc(Xe)):A;return re.core.mutate({trans:Me,type:"put",keys:ce,values:Xe,wantResults:we}).then(function(tt){var He=tt.numFailures,st=tt.results,Ve=tt.lastResult,tt=tt.failures;if(He===0)return we?st:Ve;throw new Oe("".concat(re.name,".bulkPut(): ").concat(He," of ").concat(We," operations failed"),tt)})})},Ir.prototype.bulkUpdate=function(A){var M=this,Y=this.core,re=A.map(function(Me){return Me.key}),ce=A.map(function(Me){return Me.changes}),we=[];return this._trans("readwrite",function(Me){return Y.getMany({trans:Me,keys:re,cache:"clone"}).then(function($e){var We=[],Xe=[];A.forEach(function(He,st){var Ve=He.key,tt=He.changes,ot=$e[st];if(ot){for(var Je=0,ht=Object.keys(tt);Je<ht.length;Je++){var bt=ht[Je],wt=tt[bt];if(bt===M.schema.primKey.keyPath){if(Wn(wt,Ve)!==0)throw new Ce.Constraint("Cannot update primary key in bulkUpdate()")}else I(ot,bt,wt)}we.push(st),We.push(Ve),Xe.push(ot)}});var rt=We.length;return Y.mutate({trans:Me,type:"put",keys:We,values:Xe,updates:{keys:re,changeSpecs:ce}}).then(function(He){var st=He.numFailures,Ve=He.failures;if(st===0)return rt;for(var tt=0,ot=Object.keys(Ve);tt<ot.length;tt++){var Je,ht=ot[tt],bt=we[Number(ht)];bt!=null&&(Je=Ve[ht],delete Ve[ht],Ve[bt]=Je)}throw new Oe("".concat(M.name,".bulkUpdate(): ").concat(st," of ").concat(rt," operations failed"),Ve)})})})},Ir.prototype.bulkDelete=function(A){var M=this,Y=A.length;return this._trans("readwrite",function(re){return M.core.mutate({trans:re,type:"delete",keys:A})}).then(function(Me){var ce=Me.numFailures,we=Me.lastResult,Me=Me.failures;if(ce===0)return we;throw new Oe("".concat(M.name,".bulkDelete(): ").concat(ce," of ").concat(Y," operations failed"),Me)})},Ir);function Ir(){}function _o(A){function M(Me,$e){if($e){for(var We=arguments.length,Xe=new Array(We-1);--We;)Xe[We-1]=arguments[We];return Y[Me].subscribe.apply(null,Xe),A}if(typeof Me=="string")return Y[Me]}var Y={};M.addEventType=we;for(var re=1,ce=arguments.length;re<ce;++re)we(arguments[re]);return M;function we(Me,$e,We){if(typeof Me!="object"){var Xe;$e=$e||te;var rt={subscribers:[],fire:We=We||Le,subscribe:function(He){rt.subscribers.indexOf(He)===-1&&(rt.subscribers.push(He),rt.fire=$e(rt.fire,He))},unsubscribe:function(He){rt.subscribers=rt.subscribers.filter(function(st){return st!==He}),rt.fire=rt.subscribers.reduce($e,We)}};return Y[Me]=M[Me]=rt}s(Xe=Me).forEach(function(He){var st=Xe[He];if(o(st))we(He,Xe[He][0],Xe[He][1]);else{if(st!=="asap")throw new Ce.InvalidArgument("Invalid event config");var Ve=we(He,Ie,function(){for(var tt=arguments.length,ot=new Array(tt);tt--;)ot[tt]=arguments[tt];Ve.subscribers.forEach(function(Je){T(function(){Je.apply(null,ot)})})})}})}}function gc(A,M){return b(M).from({prototype:A}),M}function Bs(A,M){return!(A.filter||A.algorithm||A.or)&&(M?A.justLimit:!A.replayFilter)}function Pp(A,M){A.filter=xo(A.filter,M)}function Xa(A,M,Y){var re=A.replayFilter;A.replayFilter=re?function(){return xo(re(),M())}:M,A.justLimit=Y&&!re}function yc(A,M){if(A.isPrimKey)return M.primaryKey;var Y=M.getIndexByKeyPath(A.index);if(!Y)throw new Ce.Schema("KeyPath "+A.index+" on object store "+M.name+" is not indexed");return Y}function Fp(A,M,Y){var re=yc(A,M.schema);return M.openCursor({trans:Y,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:re,range:A.range}})}function bc(A,M,Y,re){var ce=A.replayFilter?xo(A.filter,A.replayFilter()):A.filter;if(A.or){var we={},Me=function($e,We,Xe){var rt,He;ce&&!ce(We,Xe,function(st){return We.stop(st)},function(st){return We.fail(st)})||((He=""+(rt=We.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(rt)),h(we,He)||(we[He]=!0,M($e,We,Xe)))};return Promise.all([A.or._iterate(Me,Y),hl(Fp(A,re,Y),A.algorithm,Me,!A.keysOnly&&A.valueMapper)])}return hl(Fp(A,re,Y),xo(A.algorithm,ce),M,!A.keysOnly&&A.valueMapper)}function hl(A,M,Y,re){var ce=Re(re?function(we,Me,$e){return Y(re(we),Me,$e)}:Y);return A.then(function(we){if(we)return we.start(function(){var Me=function(){return we.continue()};M&&!M(we,function($e){return Me=$e},function($e){we.stop($e),Me=Le},function($e){we.fail($e),Me=Le})||ce(we.value,we,function($e){return Me=$e}),Me()})})}var vc=(Lp.prototype.execute=function(A){var M=this["@@propmod"];if(M.add!==void 0){var Y=M.add;if(o(Y))return a(a([],o(A)?A:[],!0),Y).sort();if(typeof Y=="number")return(Number(A)||0)+Y;if(typeof Y=="bigint")try{return BigInt(A)+Y}catch{return BigInt(0)+Y}throw new TypeError("Invalid term ".concat(Y))}if(M.remove!==void 0){var re=M.remove;if(o(re))return o(A)?A.filter(function(ce){return!re.includes(ce)}).sort():[];if(typeof re=="number")return Number(A)-re;if(typeof re=="bigint")try{return BigInt(A)-re}catch{return BigInt(0)-re}throw new TypeError("Invalid subtrahend ".concat(re))}return Y=(Y=M.replacePrefix)===null||Y===void 0?void 0:Y[0],Y&&typeof A=="string"&&A.startsWith(Y)?M.replacePrefix[1]+A.substring(Y.length):A},Lp);function Lp(A){this["@@propmod"]=A}var wc=(tr.prototype._read=function(A,M){var Y=this._ctx;return Y.error?Y.table._trans(null,Kr.bind(null,Y.error)):Y.table._trans("readonly",A).then(M)},tr.prototype._write=function(A){var M=this._ctx;return M.error?M.table._trans(null,Kr.bind(null,M.error)):M.table._trans("readwrite",A,"locked")},tr.prototype._addAlgorithm=function(A){var M=this._ctx;M.algorithm=xo(M.algorithm,A)},tr.prototype._iterate=function(A,M){return bc(this._ctx,A,M,this._ctx.table.core)},tr.prototype.clone=function(A){var M=Object.create(this.constructor.prototype),Y=Object.create(this._ctx);return A&&l(Y,A),M._ctx=Y,M},tr.prototype.raw=function(){return this._ctx.valueMapper=null,this},tr.prototype.each=function(A){var M=this._ctx;return this._read(function(Y){return bc(M,A,Y,M.table.core)})},tr.prototype.count=function(A){var M=this;return this._read(function(Y){var re=M._ctx,ce=re.table.core;if(Bs(re,!0))return ce.count({trans:Y,query:{index:yc(re,ce.schema),range:re.range}}).then(function(Me){return Math.min(Me,re.limit)});var we=0;return bc(re,function(){return++we,!1},Y,ce).then(function(){return we})}).then(A)},tr.prototype.sortBy=function(A,M){var Y=A.split(".").reverse(),re=Y[0],ce=Y.length-1;function we(We,Xe){return Xe?we(We[Y[Xe]],Xe-1):We[re]}var Me=this._ctx.dir==="next"?1:-1;function $e(We,Xe){return Wn(we(We,ce),we(Xe,ce))*Me}return this.toArray(function(We){return We.sort($e)}).then(M)},tr.prototype.toArray=function(A){var M=this;return this._read(function(Y){var re=M._ctx;if(re.dir==="next"&&Bs(re,!0)&&0<re.limit){var ce=re.valueMapper,we=yc(re,re.table.core.schema);return re.table.core.query({trans:Y,limit:re.limit,values:!0,query:{index:we,range:re.range}}).then(function($e){return $e=$e.result,ce?$e.map(ce):$e})}var Me=[];return bc(re,function($e){return Me.push($e)},Y,re.table.core).then(function(){return Me})},A)},tr.prototype.offset=function(A){var M=this._ctx;return A<=0||(M.offset+=A,Bs(M)?Xa(M,function(){var Y=A;return function(re,ce){return Y===0||(Y===1?--Y:ce(function(){re.advance(Y),Y=0}),!1)}}):Xa(M,function(){var Y=A;return function(){return--Y<0}})),this},tr.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),Xa(this._ctx,function(){var M=A;return function(Y,re,ce){return--M<=0&&re(ce),0<=M}},!0),this},tr.prototype.until=function(A,M){return Pp(this._ctx,function(Y,re,ce){return!A(Y.value)||(re(ce),M)}),this},tr.prototype.first=function(A){return this.limit(1).toArray(function(M){return M[0]}).then(A)},tr.prototype.last=function(A){return this.reverse().first(A)},tr.prototype.filter=function(A){var M;return Pp(this._ctx,function(Y){return A(Y.value)}),(M=this._ctx).isMatch=xo(M.isMatch,A),this},tr.prototype.and=function(A){return this.filter(A)},tr.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},tr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tr.prototype.desc=function(){return this.reverse()},tr.prototype.eachKey=function(A){var M=this._ctx;return M.keysOnly=!M.isMatch,this.each(function(Y,re){A(re.key,re)})},tr.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},tr.prototype.eachPrimaryKey=function(A){var M=this._ctx;return M.keysOnly=!M.isMatch,this.each(function(Y,re){A(re.primaryKey,re)})},tr.prototype.keys=function(A){var M=this._ctx;M.keysOnly=!M.isMatch;var Y=[];return this.each(function(re,ce){Y.push(ce.key)}).then(function(){return Y}).then(A)},tr.prototype.primaryKeys=function(A){var M=this._ctx;if(M.dir==="next"&&Bs(M,!0)&&0<M.limit)return this._read(function(re){var ce=yc(M,M.table.core.schema);return M.table.core.query({trans:re,values:!1,limit:M.limit,query:{index:ce,range:M.range}})}).then(function(re){return re.result}).then(A);M.keysOnly=!M.isMatch;var Y=[];return this.each(function(re,ce){Y.push(ce.primaryKey)}).then(function(){return Y}).then(A)},tr.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},tr.prototype.firstKey=function(A){return this.limit(1).keys(function(M){return M[0]}).then(A)},tr.prototype.lastKey=function(A){return this.reverse().firstKey(A)},tr.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var M={};return Pp(this._ctx,function(ce){var re=ce.primaryKey.toString(),ce=h(M,re);return M[re]=!0,!ce}),this},tr.prototype.modify=function(A){var M=this,Y=this._ctx;return this._write(function(re){var ce,we,Me;Me=typeof A=="function"?A:(ce=s(A),we=ce.length,function(Je){for(var ht=!1,bt=0;bt<we;++bt){var wt=ce[bt],Tt=A[wt],qt=j(Je,wt);Tt instanceof vc?(I(Je,wt,Tt.execute(qt)),ht=!0):qt!==Tt&&(I(Je,wt,Tt),ht=!0)}return ht});var $e=Y.table.core,He=$e.schema.primaryKey,We=He.outbound,Xe=He.extractKey,rt=200,He=M.db._options.modifyChunkSize;He&&(rt=typeof He=="object"?He[$e.name]||He["*"]||200:He);function st(Je,wt){var bt=wt.failures,wt=wt.numFailures;tt+=Je-wt;for(var Tt=0,qt=s(bt);Tt<qt.length;Tt++){var Yt=qt[Tt];Ve.push(bt[Yt])}}var Ve=[],tt=0,ot=[];return M.clone().primaryKeys().then(function(Je){function ht(wt){var Tt=Math.min(rt,Je.length-wt);return $e.getMany({trans:re,keys:Je.slice(wt,wt+Tt),cache:"immutable"}).then(function(qt){for(var Yt=[],Bt=[],Kt=We?[]:null,Xt=[],zt=0;zt<Tt;++zt){var nn=qt[zt],pn={value:Z(nn),primKey:Je[wt+zt]};Me.call(pn,pn.value,pn)!==!1&&(pn.value==null?Xt.push(Je[wt+zt]):We||Wn(Xe(nn),Xe(pn.value))===0?(Bt.push(pn.value),We&&Kt.push(Je[wt+zt])):(Xt.push(Je[wt+zt]),Yt.push(pn.value)))}return Promise.resolve(0<Yt.length&&$e.mutate({trans:re,type:"add",values:Yt}).then(function(gn){for(var Rn in gn.failures)Xt.splice(parseInt(Rn),1);st(Yt.length,gn)})).then(function(){return(0<Bt.length||bt&&typeof A=="object")&&$e.mutate({trans:re,type:"put",keys:Kt,values:Bt,criteria:bt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<wt}).then(function(gn){return st(Bt.length,gn)})}).then(function(){return(0<Xt.length||bt&&A===mf)&&$e.mutate({trans:re,type:"delete",keys:Xt,criteria:bt,isAdditionalChunk:0<wt}).then(function(gn){return st(Xt.length,gn)})}).then(function(){return Je.length>wt+Tt&&ht(wt+rt)})})}var bt=Bs(Y)&&Y.limit===1/0&&(typeof A!="function"||A===mf)&&{index:Y.index,range:Y.range};return ht(0).then(function(){if(0<Ve.length)throw new ve("Error modifying one or more objects",Ve,tt,ot);return Je.length})})})},tr.prototype.delete=function(){var A=this._ctx,M=A.range;return Bs(A)&&(A.isPrimKey||M.type===3)?this._write(function(Y){var re=A.table.core.schema.primaryKey,ce=M;return A.table.core.count({trans:Y,query:{index:re,range:ce}}).then(function(we){return A.table.core.mutate({trans:Y,type:"deleteRange",range:ce}).then(function(Me){var $e=Me.failures;if(Me.lastResult,Me.results,Me=Me.numFailures,Me)throw new ve("Could not delete some values",Object.keys($e).map(function(We){return $e[We]}),we-Me);return we-Me})})}):this.modify(mf)},tr);function tr(){}var mf=function(A,M){return M.value=null};function fy(A,M){return A<M?-1:A===M?0:1}function $p(A,M){return M<A?-1:A===M?0:1}function mi(A,M,Y){return A=A instanceof ml?new A.Collection(A):A,A._ctx.error=new(Y||TypeError)(M),A}function xc(A){return new A.Collection(A,function(){return gf("")}).limit(0)}function pl(A,M,Y,re){var ce,we,Me,$e,We,Xe,rt,He=Y.length;if(!Y.every(function(tt){return typeof tt=="string"}))return mi(A,dy);function st(tt){ce=tt==="next"?function(Je){return Je.toUpperCase()}:function(Je){return Je.toLowerCase()},we=tt==="next"?function(Je){return Je.toLowerCase()}:function(Je){return Je.toUpperCase()},Me=tt==="next"?fy:$p;var ot=Y.map(function(Je){return{lower:we(Je),upper:ce(Je)}}).sort(function(Je,ht){return Me(Je.lower,ht.lower)});$e=ot.map(function(Je){return Je.upper}),We=ot.map(function(Je){return Je.lower}),rt=(Xe=tt)==="next"?"":re}st("next"),A=new A.Collection(A,function(){return fs($e[0],We[He-1]+re)}),A._ondirectionchange=function(tt){st(tt)};var Ve=0;return A._addAlgorithm(function(tt,ot,Je){var ht=tt.key;if(typeof ht!="string")return!1;var bt=we(ht);if(M(bt,We,Ve))return!0;for(var wt=null,Tt=Ve;Tt<He;++Tt){var qt=function(Yt,Bt,Kt,Xt,zt,nn){for(var pn=Math.min(Yt.length,Xt.length),gn=-1,Rn=0;Rn<pn;++Rn){var Va=Bt[Rn];if(Va!==Xt[Rn])return zt(Yt[Rn],Kt[Rn])<0?Yt.substr(0,Rn)+Kt[Rn]+Kt.substr(Rn+1):zt(Yt[Rn],Xt[Rn])<0?Yt.substr(0,Rn)+Xt[Rn]+Kt.substr(Rn+1):0<=gn?Yt.substr(0,gn)+Bt[gn]+Kt.substr(gn+1):null;zt(Yt[Rn],Va)<0&&(gn=Rn)}return pn<Xt.length&&nn==="next"?Yt+Kt.substr(Yt.length):pn<Yt.length&&nn==="prev"?Yt.substr(0,Kt.length):gn<0?null:Yt.substr(0,gn)+Xt[gn]+Kt.substr(gn+1)}(ht,bt,$e[Tt],We[Tt],Me,Xe);qt===null&&wt===null?Ve=Tt+1:(wt===null||0<Me(wt,qt))&&(wt=qt)}return ot(wt!==null?function(){tt.continue(wt+rt)}:Je),!1}),A}function fs(A,M,Y,re){return{type:2,lower:A,upper:M,lowerOpen:Y,upperOpen:re}}function gf(A){return{type:1,lower:A,upper:A}}var ml=(Object.defineProperty($r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$r.prototype.between=function(A,M,Y,re){Y=Y!==!1,re=re===!0;try{return 0<this._cmp(A,M)||this._cmp(A,M)===0&&(Y||re)&&(!Y||!re)?xc(this):new this.Collection(this,function(){return fs(A,M,!Y,!re)})}catch{return mi(this,ds)}},$r.prototype.equals=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return gf(A)})},$r.prototype.above=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return fs(A,void 0,!0)})},$r.prototype.aboveOrEqual=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return fs(A,void 0,!1)})},$r.prototype.below=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return fs(void 0,A,!1,!0)})},$r.prototype.belowOrEqual=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return fs(void 0,A)})},$r.prototype.startsWith=function(A){return typeof A!="string"?mi(this,dy):this.between(A,A+wo,!0,!0)},$r.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):pl(this,function(M,Y){return M.indexOf(Y[0])===0},[A],wo)},$r.prototype.equalsIgnoreCase=function(A){return pl(this,function(M,Y){return M===Y[0]},[A],"")},$r.prototype.anyOfIgnoreCase=function(){var A=L.apply(ie,arguments);return A.length===0?xc(this):pl(this,function(M,Y){return Y.indexOf(M)!==-1},A,"")},$r.prototype.startsWithAnyOfIgnoreCase=function(){var A=L.apply(ie,arguments);return A.length===0?xc(this):pl(this,function(M,Y){return Y.some(function(re){return M.indexOf(re)===0})},A,wo)},$r.prototype.anyOf=function(){var A=this,M=L.apply(ie,arguments),Y=this._cmp;try{M.sort(Y)}catch{return mi(this,ds)}if(M.length===0)return xc(this);var re=new this.Collection(this,function(){return fs(M[0],M[M.length-1])});re._ondirectionchange=function(we){Y=we==="next"?A._ascending:A._descending,M.sort(Y)};var ce=0;return re._addAlgorithm(function(we,Me,$e){for(var We=we.key;0<Y(We,M[ce]);)if(++ce===M.length)return Me($e),!1;return Y(We,M[ce])===0||(Me(function(){we.continue(M[ce])}),!1)}),re},$r.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$r.prototype.noneOf=function(){var A=L.apply(ie,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return mi(this,ds)}var M=A.reduce(function(Y,re){return Y?Y.concat([[Y[Y.length-1][1],re]]):[[-1/0,re]]},null);return M.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(M,{includeLowers:!1,includeUppers:!1})},$r.prototype.inAnyRange=function(ht,M){var Y=this,re=this._cmp,ce=this._ascending,we=this._descending,Me=this._min,$e=this._max;if(ht.length===0)return xc(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&ce(bt[0],bt[1])<=0}))return mi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ce.InvalidArgument);var We=!M||M.includeLowers!==!1,Xe=M&&M.includeUppers===!0,rt,He=ce;function st(bt,wt){return He(bt[0],wt[0])}try{(rt=ht.reduce(function(bt,wt){for(var Tt=0,qt=bt.length;Tt<qt;++Tt){var Yt=bt[Tt];if(re(wt[0],Yt[1])<0&&0<re(wt[1],Yt[0])){Yt[0]=Me(Yt[0],wt[0]),Yt[1]=$e(Yt[1],wt[1]);break}}return Tt===qt&&bt.push(wt),bt},[])).sort(st)}catch{return mi(this,ds)}var Ve=0,tt=Xe?function(bt){return 0<ce(bt,rt[Ve][1])}:function(bt){return 0<=ce(bt,rt[Ve][1])},ot=We?function(bt){return 0<we(bt,rt[Ve][0])}:function(bt){return 0<=we(bt,rt[Ve][0])},Je=tt,ht=new this.Collection(this,function(){return fs(rt[0][0],rt[rt.length-1][1],!We,!Xe)});return ht._ondirectionchange=function(bt){He=bt==="next"?(Je=tt,ce):(Je=ot,we),rt.sort(st)},ht._addAlgorithm(function(bt,wt,Tt){for(var qt,Yt=bt.key;Je(Yt);)if(++Ve===rt.length)return wt(Tt),!1;return!tt(qt=Yt)&&!ot(qt)||(Y._cmp(Yt,rt[Ve][1])===0||Y._cmp(Yt,rt[Ve][0])===0||wt(function(){He===ce?bt.continue(rt[Ve][0]):bt.continue(rt[Ve][1])}),!1)}),ht},$r.prototype.startsWithAnyOf=function(){var A=L.apply(ie,arguments);return A.every(function(M){return typeof M=="string"})?A.length===0?xc(this):this.inAnyRange(A.map(function(M){return[M,M+wo]})):mi(this,"startsWithAnyOf() only works with strings")},$r);function $r(){}function Ki(A){return Re(function(M){return gl(M),A(M.target.error),!1})}function gl(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var _c="storagemutated",yl="x-storagemutated-1",Aa=_o(null,_c),Bp=(Ja.prototype._lock=function(){return C(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},Ja.prototype._unlock=function(){if(C(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{yo(A[1],A[0])}catch{}}return this},Ja.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},Ja.prototype.create=function(A){var M=this;if(!this.mode)return this;var Y=this.db.idbdb,re=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!Y)switch(re&&re.name){case"DatabaseClosedError":throw new Ce.DatabaseClosed(re);case"MissingAPIError":throw new Ce.MissingAPI(re.message,re);default:throw new Ce.OpenFailed(re)}if(!this.active)throw new Ce.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||Y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(ce){gl(ce),M._reject(A.error)}),A.onabort=Re(function(ce){gl(ce),M.active&&M._reject(new Ce.Abort(A.error)),M.active=!1,M.on("abort").fire(ce)}),A.oncomplete=Re(function(){M.active=!1,M._resolve(),"mutatedParts"in A&&Aa.storagemutated.fire(A.mutatedParts)}),this},Ja.prototype._promise=function(A,M,Y){var re=this;if(A==="readwrite"&&this.mode!=="readwrite")return Kr(new Ce.ReadOnly("Transaction is readonly"));if(!this.active)return Kr(new Ce.TransactionInactive);if(this._locked())return new P(function(we,Me){re._blockedFuncs.push([function(){re._promise(A,M,Y).then(we,Me)},ke])});if(Y)return en(function(){var we=new P(function(Me,$e){re._lock();var We=M(Me,$e,re);We&&We.then&&We.then(Me,$e)});return we.finally(function(){return re._unlock()}),we._lib=!0,we});var ce=new P(function(we,Me){var $e=M(we,Me,re);$e&&$e.then&&$e.then(we,Me)});return ce._lib=!0,ce},Ja.prototype._root=function(){return this.parent?this.parent._root():this},Ja.prototype.waitFor=function(A){var M,Y=this._root(),re=P.resolve(A);Y._waitingFor?Y._waitingFor=Y._waitingFor.then(function(){return re}):(Y._waitingFor=re,Y._waitingQueue=[],M=Y.idbtrans.objectStore(Y.storeNames[0]),function we(){for(++Y._spinCount;Y._waitingQueue.length;)Y._waitingQueue.shift()();Y._waitingFor&&(M.get(-1/0).onsuccess=we)}());var ce=Y._waitingFor;return new P(function(we,Me){re.then(function($e){return Y._waitingQueue.push(Re(we.bind(null,$e)))},function($e){return Y._waitingQueue.push(Re(Me.bind(null,$e)))}).finally(function(){Y._waitingFor===ce&&(Y._waitingFor=null)})})},Ja.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ce.Abort))},Ja.prototype.table=function(A){var M=this._memoizedTables||(this._memoizedTables={});if(h(M,A))return M[A];var Y=this.schema[A];if(!Y)throw new Ce.NotFound("Table "+A+" not part of transaction");return Y=new this.db.Table(A,Y,this),Y.core=this.db.core.table(A),M[A]=Y},Ja);function Ja(){}function hs(A,M,Y,re,ce,we,Me){return{name:A,keyPath:M,unique:Y,multi:re,auto:ce,compound:we,src:(Y&&!Me?"&":"")+(re?"*":"")+(ce?"++":"")+yf(M)}}function yf(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function Sc(A,M,Y){return{name:A,primKey:M,indexes:Y,mappedClass:null,idxByName:(re=function(ce){return[ce.name,ce]},Y.reduce(function(ce,we,Me){return Me=re(we,Me),Me&&(ce[Me[0]]=Me[1]),ce},{}))};var re}var Ec=function(A){try{return A.only([[]]),Ec=function(){return[[]]},[[]]}catch{return Ec=function(){return wo},wo}};function Cc(A){return A==null?function(){}:typeof A=="string"?(M=A).split(".").length===1?function(Y){return Y[M]}:function(Y){return j(Y,M)}:function(Y){return j(Y,A)};var M}function Ku(A){return[].slice.call(A)}var hy=0;function ca(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function bl(A,M,We){function re(Je){if(Je.type===3)return null;if(Je.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ve=Je.lower,tt=Je.upper,ot=Je.lowerOpen,Je=Je.upperOpen;return Ve===void 0?tt===void 0?null:M.upperBound(tt,!!Je):tt===void 0?M.lowerBound(Ve,!!ot):M.bound(Ve,tt,!!ot,!!Je)}function ce(st){var Ve,tt=st.name;return{name:tt,schema:st,mutate:function(ot){var Je=ot.trans,ht=ot.type,bt=ot.keys,wt=ot.values,Tt=ot.range;return new Promise(function(qt,Yt){qt=Re(qt);var Bt=Je.objectStore(tt),Kt=Bt.keyPath==null,Xt=ht==="put"||ht==="add";if(!Xt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var zt,nn=(bt||wt||{length:1}).length;if(bt&&wt&&bt.length!==wt.length)throw new Error("Given keys array must have same length as given values array.");if(nn===0)return qt({numFailures:0,failures:{},results:[],lastResult:void 0});function pn(Ra){++Va,gl(Ra)}var gn=[],Rn=[],Va=0;if(ht==="deleteRange"){if(Tt.type===4)return qt({numFailures:Va,failures:Rn,results:[],lastResult:void 0});Tt.type===3?gn.push(zt=Bt.clear()):gn.push(zt=Bt.delete(re(Tt)))}else{var Kt=Xt?Kt?[wt,bt]:[wt,null]:[bt,null],_n=Kt[0],ra=Kt[1];if(Xt)for(var ua=0;ua<nn;++ua)gn.push(zt=ra&&ra[ua]!==void 0?Bt[ht](_n[ua],ra[ua]):Bt[ht](_n[ua])),zt.onerror=pn;else for(ua=0;ua<nn;++ua)gn.push(zt=Bt[ht](_n[ua])),zt.onerror=pn}function zs(Ra){Ra=Ra.target.result,gn.forEach(function(ms,ko){return ms.error!=null&&(Rn[ko]=ms.error)}),qt({numFailures:Va,failures:Rn,results:ht==="delete"?bt:gn.map(function(ms){return ms.result}),lastResult:Ra})}zt.onerror=function(Ra){pn(Ra),zs(Ra)},zt.onsuccess=zs})},getMany:function(ot){var Je=ot.trans,ht=ot.keys;return new Promise(function(bt,wt){bt=Re(bt);for(var Tt,qt=Je.objectStore(tt),Yt=ht.length,Bt=new Array(Yt),Kt=0,Xt=0,zt=function(gn){gn=gn.target,Bt[gn._pos]=gn.result,++Xt===Kt&&bt(Bt)},nn=Ki(wt),pn=0;pn<Yt;++pn)ht[pn]!=null&&((Tt=qt.get(ht[pn]))._pos=pn,Tt.onsuccess=zt,Tt.onerror=nn,++Kt);Kt===0&&bt(Bt)})},get:function(ot){var Je=ot.trans,ht=ot.key;return new Promise(function(bt,wt){bt=Re(bt);var Tt=Je.objectStore(tt).get(ht);Tt.onsuccess=function(qt){return bt(qt.target.result)},Tt.onerror=Ki(wt)})},query:(Ve=Xe,function(ot){return new Promise(function(Je,ht){Je=Re(Je);var bt,wt,Tt,Kt=ot.trans,qt=ot.values,Yt=ot.limit,zt=ot.query,Bt=Yt===1/0?void 0:Yt,Xt=zt.index,zt=zt.range,Kt=Kt.objectStore(tt),Xt=Xt.isPrimaryKey?Kt:Kt.index(Xt.name),zt=re(zt);if(Yt===0)return Je({result:[]});Ve?((Bt=qt?Xt.getAll(zt,Bt):Xt.getAllKeys(zt,Bt)).onsuccess=function(nn){return Je({result:nn.target.result})},Bt.onerror=Ki(ht)):(bt=0,wt=!qt&&"openKeyCursor"in Xt?Xt.openKeyCursor(zt):Xt.openCursor(zt),Tt=[],wt.onsuccess=function(nn){var pn=wt.result;return pn?(Tt.push(qt?pn.value:pn.primaryKey),++bt===Yt?Je({result:Tt}):void pn.continue()):Je({result:Tt})},wt.onerror=Ki(ht))})}),openCursor:function(ot){var Je=ot.trans,ht=ot.values,bt=ot.query,wt=ot.reverse,Tt=ot.unique;return new Promise(function(qt,Yt){qt=Re(qt);var Xt=bt.index,Bt=bt.range,Kt=Je.objectStore(tt),Kt=Xt.isPrimaryKey?Kt:Kt.index(Xt.name),Xt=wt?Tt?"prevunique":"prev":Tt?"nextunique":"next",zt=!ht&&"openKeyCursor"in Kt?Kt.openKeyCursor(re(Bt),Xt):Kt.openCursor(re(Bt),Xt);zt.onerror=Ki(Yt),zt.onsuccess=Re(function(nn){var pn,gn,Rn,Va,_n=zt.result;_n?(_n.___id=++hy,_n.done=!1,pn=_n.continue.bind(_n),gn=(gn=_n.continuePrimaryKey)&&gn.bind(_n),Rn=_n.advance.bind(_n),Va=function(){throw new Error("Cursor not stopped")},_n.trans=Je,_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=function(){throw new Error("Cursor not started")},_n.fail=Re(Yt),_n.next=function(){var ra=this,ua=1;return this.start(function(){return ua--?ra.continue():ra.stop()}).then(function(){return ra})},_n.start=function(ra){function ua(){if(zt.result)try{ra()}catch(Ra){_n.fail(Ra)}else _n.done=!0,_n.start=function(){throw new Error("Cursor behind last entry")},_n.stop()}var zs=new Promise(function(Ra,ms){Ra=Re(Ra),zt.onerror=Ki(ms),_n.fail=ms,_n.stop=function(ko){_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=Va,Ra(ko)}});return zt.onsuccess=Re(function(Ra){zt.onsuccess=ua,ua()}),_n.continue=pn,_n.continuePrimaryKey=gn,_n.advance=Rn,ua(),zs},qt(_n)):qt(null)},Yt)})},count:function(ot){var Je=ot.query,ht=ot.trans,bt=Je.index,wt=Je.range;return new Promise(function(Tt,qt){var Yt=ht.objectStore(tt),Bt=bt.isPrimaryKey?Yt:Yt.index(bt.name),Yt=re(wt),Bt=Yt?Bt.count(Yt):Bt.count();Bt.onsuccess=Re(function(Kt){return Tt(Kt.target.result)}),Bt.onerror=Ki(qt)})}}}var we,Me,$e,rt=(Me=We,$e=Ku((we=A).objectStoreNames),{schema:{name:we.name,tables:$e.map(function(st){return Me.objectStore(st)}).map(function(st){var Ve=st.keyPath,Je=st.autoIncrement,tt=o(Ve),ot={},Je={name:st.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ve==null,compound:tt,keyPath:Ve,autoIncrement:Je,unique:!0,extractKey:Cc(Ve)},indexes:Ku(st.indexNames).map(function(ht){return st.index(ht)}).map(function(Tt){var bt=Tt.name,wt=Tt.unique,qt=Tt.multiEntry,Tt=Tt.keyPath,qt={name:bt,compound:o(Tt),keyPath:Tt,unique:wt,multiEntry:qt,extractKey:Cc(Tt)};return ot[ca(Tt)]=qt}),getIndexByKeyPath:function(ht){return ot[ca(ht)]}};return ot[":id"]=Je.primaryKey,Ve!=null&&(ot[ca(Ve)]=Je.primaryKey),Je})},hasGetAll:0<$e.length&&"getAll"in Me.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=rt.schema,Xe=rt.hasGetAll,rt=We.tables.map(ce),He={};return rt.forEach(function(st){return He[st.name]=st}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(st){if(!He[st])throw new Error("Table '".concat(st,"' not found"));return He[st]},MIN_KEY:-1/0,MAX_KEY:Ec(M),schema:We}}function bf(A,M,Y,re){var ce=Y.IDBKeyRange;return Y.indexedDB,{dbcore:(re=bl(M,ce,re),A.dbcore.reduce(function(we,Me){return Me=Me.create,r(r({},we),Me(we))},re))}}function So(A,re){var Y=re.db,re=bf(A._middlewares,Y,A._deps,re);A.core=re.dbcore,A.tables.forEach(function(ce){var we=ce.name;A.core.schema.tables.some(function(Me){return Me.name===we})&&(ce.core=A.core.table(we),A[we]instanceof A.Table&&(A[we].core=ce.core))})}function vf(A,M,Y,re){Y.forEach(function(ce){var we=re[ce];M.forEach(function(Me){var $e=function We(Xe,rt){return x(Xe,rt)||(Xe=u(Xe))&&We(Xe,rt)}(Me,ce);(!$e||"value"in $e&&$e.value===void 0)&&(Me===A.Transaction.prototype||Me instanceof A.Transaction?v(Me,ce,{get:function(){return this.table(ce)},set:function(We){y(this,ce,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):Me[ce]=new A.Table(ce,we))})})}function Wu(A,M){M.forEach(function(Y){for(var re in Y)Y[re]instanceof A.Table&&delete Y[re]})}function zp(A,M){return A._cfg.version-M._cfg.version}function Zu(A,M,Y,re){var ce=A._dbSchema;Y.objectStoreNames.contains("$meta")&&!ce.$meta&&(ce.$meta=Sc("$meta",my("")[0],[]),A._storeNames.push("$meta"));var we=A._createTransaction("readwrite",A._storeNames,ce);we.create(Y),we._completion.catch(re);var Me=we._reject.bind(we),$e=ke.transless||ke;en(function(){return ke.trans=we,ke.transless=$e,M!==0?(So(A,Y),Xe=M,((We=we).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(rt){return rt??Xe}):P.resolve(Xe)).then(function(rt){return st=rt,Ve=we,tt=Y,ot=[],rt=(He=A)._versions,Je=He._dbSchema=kc(0,He.idbdb,tt),(rt=rt.filter(function(ht){return ht._cfg.version>=st})).length!==0?(rt.forEach(function(ht){ot.push(function(){var bt=Je,wt=ht._cfg.dbschema;Sf(He,bt,tt),Sf(He,wt,tt),Je=He._dbSchema=wt;var Tt=xf(bt,wt);Tt.add.forEach(function(Xt){Up(tt,Xt[0],Xt[1].primKey,Xt[1].indexes)}),Tt.change.forEach(function(Xt){if(Xt.recreate)throw new Ce.Upgrade("Not yet support for changing primary key");var zt=tt.objectStore(Xt.name);Xt.add.forEach(function(nn){return _f(zt,nn)}),Xt.change.forEach(function(nn){zt.deleteIndex(nn.name),_f(zt,nn)}),Xt.del.forEach(function(nn){return zt.deleteIndex(nn)})});var qt=ht._cfg.contentUpgrade;if(qt&&ht._cfg.version>st){So(He,tt),Ve._memoizedTables={};var Yt=R(wt);Tt.del.forEach(function(Xt){Yt[Xt]=bt[Xt]}),Wu(He,[He.Transaction.prototype]),vf(He,[He.Transaction.prototype],s(Yt),Yt),Ve.schema=Yt;var Bt,Kt=J(qt);return Kt&&Nn(),Tt=P.follow(function(){var Xt;(Bt=qt(Ve))&&Kt&&(Xt=Kn.bind(null,null),Bt.then(Xt,Xt))}),Bt&&typeof Bt.then=="function"?P.resolve(Bt):Tt.then(function(){return Bt})}}),ot.push(function(bt){var wt,Tt,qt=ht._cfg.dbschema;wt=qt,Tt=bt,[].slice.call(Tt.db.objectStoreNames).forEach(function(Yt){return wt[Yt]==null&&Tt.db.deleteObjectStore(Yt)}),Wu(He,[He.Transaction.prototype]),vf(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),Ve.schema=He._dbSchema}),ot.push(function(bt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===ht._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(wt){return wt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?P.resolve(ot.shift()(Ve.idbtrans)).then(ht):P.resolve()}().then(function(){py(Je,tt)})):P.resolve();var He,st,Ve,tt,ot,Je}).catch(Me)):(s(ce).forEach(function(rt){Up(Y,rt,ce[rt].primKey,ce[rt].indexes)}),So(A,Y),void P.follow(function(){return A.on.populate.fire(we)}).catch(Me));var We,Xe})}function wf(A,M){py(A._dbSchema,M),M.db.version%10!=0||M.objectStoreNames.contains("$meta")||M.db.createObjectStore("$meta").add(Math.ceil(M.db.version/10-1),"version");var Y=kc(0,A.idbdb,M);Sf(A,A._dbSchema,M);for(var re=0,ce=xf(Y,A._dbSchema).change;re<ce.length;re++){var we=function(Me){if(Me.change.length||Me.recreate)return console.warn("Unable to patch indexes of table ".concat(Me.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=M.objectStore(Me.name);Me.add.forEach(function(We){Fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Me.name,".").concat(We.src)),_f($e,We)})}(ce[re]);if(typeof we=="object")return we.value}}function xf(A,M){var Y,re={del:[],add:[],change:[]};for(Y in A)M[Y]||re.del.push(Y);for(Y in M){var ce=A[Y],we=M[Y];if(ce){var Me={name:Y,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ce.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ce.primKey.auto!==we.primKey.auto)Me.recreate=!0,re.change.push(Me);else{var $e=ce.idxByName,We=we.idxByName,Xe=void 0;for(Xe in $e)We[Xe]||Me.del.push(Xe);for(Xe in We){var rt=$e[Xe],He=We[Xe];rt?rt.src!==He.src&&Me.change.push(He):Me.add.push(He)}(0<Me.del.length||0<Me.add.length||0<Me.change.length)&&re.change.push(Me)}}else re.add.push([Y,we])}return re}function Up(A,M,Y,re){var ce=A.db.createObjectStore(M,Y.keyPath?{keyPath:Y.keyPath,autoIncrement:Y.auto}:{autoIncrement:Y.auto});return re.forEach(function(we){return _f(ce,we)}),ce}function py(A,M){s(A).forEach(function(Y){M.db.objectStoreNames.contains(Y)||(Fe&&console.debug("Dexie: Creating missing table",Y),Up(M,Y,A[Y].primKey,A[Y].indexes))})}function _f(A,M){A.createIndex(M.name,M.keyPath,{unique:M.unique,multiEntry:M.multi})}function kc(A,M,Y){var re={};return S(M.objectStoreNames,0).forEach(function(ce){for(var we=Y.objectStore(ce),Me=hs(yf(Xe=we.keyPath),Xe||"",!0,!1,!!we.autoIncrement,Xe&&typeof Xe!="string",!0),$e=[],We=0;We<we.indexNames.length;++We){var rt=we.index(we.indexNames[We]),Xe=rt.keyPath,rt=hs(rt.name,Xe,!!rt.unique,!!rt.multiEntry,!1,Xe&&typeof Xe!="string",!1);$e.push(rt)}re[ce]=Sc(ce,Me,$e)}),re}function Sf(A,M,Y){for(var re=Y.db.objectStoreNames,ce=0;ce<re.length;++ce){var we=re[ce],Me=Y.objectStore(we);A._hasGetAll="getAll"in Me;for(var $e=0;$e<Me.indexNames.length;++$e){var We=Me.indexNames[$e],Xe=Me.index(We).keyPath,rt=typeof Xe=="string"?Xe:"["+S(Xe).join("+")+"]";!M[we]||(Xe=M[we].idxByName[rt])&&(Xe.name=We,delete M[we].idxByName[rt],M[we].idxByName[We]=Xe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function my(A){return A.split(",").map(function(M,Y){var re=(M=M.trim()).replace(/([&*]|\+\+)/g,""),ce=/^\[/.test(re)?re.match(/^\[(.*)\]$/)[1].split("+"):re;return hs(re,ce||null,/\&/.test(M),/\*/.test(M),/\+\+/.test(M),o(ce),Y===0)})}var M1=(Ef.prototype._parseStoresSpec=function(A,M){s(A).forEach(function(Y){if(A[Y]!==null){var re=my(A[Y]),ce=re.shift();if(ce.unique=!0,ce.multi)throw new Ce.Schema("Primary key cannot be multi-valued");re.forEach(function(we){if(we.auto)throw new Ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new Ce.Schema("Index must have a name and cannot be an empty string")}),M[Y]=Sc(Y,ce,re)}})},Ef.prototype.stores=function(Y){var M=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Y):Y;var Y=M._versions,re={},ce={};return Y.forEach(function(we){l(re,we._cfg.storesSource),ce=we._cfg.dbschema={},we._parseStoresSpec(re,ce)}),M._dbSchema=ce,Wu(M,[M._allTables,M,M.Transaction.prototype]),vf(M,[M._allTables,M,M.Transaction.prototype,this._cfg.tables],s(ce),ce),M._storeNames=s(ce),this},Ef.prototype.upgrade=function(A){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Le,A),this},Ef);function Ef(){}function qp(A,M){var Y=A._dbNamesDB;return Y||(Y=A._dbNamesDB=new ps(dl,{addons:[],indexedDB:A,IDBKeyRange:M})).version(1).stores({dbnames:"name"}),Y.table("dbnames")}function Cf(A){return A&&typeof A.databases=="function"}function Hp(A){return en(function(){return ke.letThrough=!0,A()})}function Vp(A){return!("from"in A)}var Na=function(A,M){if(!this){var Y=new Na;return A&&"d"in A&&l(Y,A),Y}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?M:A}:{d:0})};function Yu(A,M,Y){var re=Wn(M,Y);if(!isNaN(re)){if(0<re)throw RangeError();if(Vp(A))return l(A,{from:M,to:Y,d:1});var ce=A.l,re=A.r;if(Wn(Y,A.from)<0)return ce?Yu(ce,M,Y):A.l={from:M,to:Y,d:1,l:null,r:null},yy(A);if(0<Wn(M,A.to))return re?Yu(re,M,Y):A.r={from:M,to:Y,d:1,l:null,r:null},yy(A);Wn(M,A.from)<0&&(A.from=M,A.l=null,A.d=re?re.d+1:1),0<Wn(Y,A.to)&&(A.to=Y,A.r=null,A.d=A.l?A.l.d+1:1),Y=!A.r,ce&&!A.l&&vl(A,ce),re&&Y&&vl(A,re)}}function vl(A,M){Vp(M)||function Y(re,We){var we=We.from,Me=We.to,$e=We.l,We=We.r;Yu(re,we,Me),$e&&Y(re,$e),We&&Y(re,We)}(A,M)}function gy(A,M){var Y=kf(M),re=Y.next();if(re.done)return!1;for(var ce=re.value,we=kf(A),Me=we.next(ce.from),$e=Me.value;!re.done&&!Me.done;){if(Wn($e.from,ce.to)<=0&&0<=Wn($e.to,ce.from))return!0;Wn(ce.from,$e.from)<0?ce=(re=Y.next($e.from)).value:$e=(Me=we.next(ce.from)).value}return!1}function kf(A){var M=Vp(A)?null:{s:0,n:A};return{next:function(Y){for(var re=0<arguments.length;M;)switch(M.s){case 0:if(M.s=1,re)for(;M.n.l&&Wn(Y,M.n.from)<0;)M={up:M,n:M.n.l,s:1};else for(;M.n.l;)M={up:M,n:M.n.l,s:1};case 1:if(M.s=2,!re||Wn(Y,M.n.to)<=0)return{value:M.n,done:!1};case 2:if(M.n.r){M.s=3,M={up:M,n:M.n.r,s:0};continue}case 3:M=M.up}return{done:!0}}}}function yy(A){var M,Y,re=(((M=A.r)===null||M===void 0?void 0:M.d)||0)-(((Y=A.l)===null||Y===void 0?void 0:Y.d)||0),ce=1<re?"r":re<-1?"l":"";ce&&(M=ce=="r"?"l":"r",Y=r({},A),re=A[ce],A.from=re.from,A.to=re.to,A[ce]=re[ce],Y[ce]=re[M],(A[M]=Y).d=Gp(Y)),A.d=Gp(A)}function Gp(Y){var M=Y.r,Y=Y.l;return(M?Y?Math.max(M.d,Y.d):M.d:Y?Y.d:0)+1}function Tf(A,M){return s(M).forEach(function(Y){A[Y]?vl(A[Y],M[Y]):A[Y]=function re(ce){var we,Me,$e={};for(we in ce)h(ce,we)&&(Me=ce[we],$e[we]=!Me||typeof Me!="object"||H.has(Me.constructor)?Me:re(Me));return $e}(M[Y])}),A}function Kp(A,M){return A.all||M.all||Object.keys(A).some(function(Y){return M[Y]&&gy(M[Y],A[Y])})}m(Na.prototype,((gi={add:function(A){return vl(this,A),this},addKey:function(A){return Yu(this,A,A),this},addKeys:function(A){var M=this;return A.forEach(function(Y){return Yu(M,Y,Y)}),this},hasKey:function(A){var M=kf(this).next(A).value;return M&&Wn(M.from,A)<=0&&0<=Wn(M.to,A)}})[ae]=function(){return kf(this)},gi));var wl={},Wp={},Zp=!1;function Af(A){Tf(Wp,A),Zp||(Zp=!0,setTimeout(function(){Zp=!1,Yp(Wp,!(Wp={}))},0))}function Yp(A,M){M===void 0&&(M=!1);var Y=new Set;if(A.all)for(var re=0,ce=Object.values(wl);re<ce.length;re++)by(Me=ce[re],A,Y,M);else for(var we in A){var Me,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(we);$e&&(we=$e[1],$e=$e[2],(Me=wl["idb://".concat(we,"/").concat($e)])&&by(Me,A,Y,M))}Y.forEach(function(We){return We()})}function by(A,M,Y,re){for(var ce=[],we=0,Me=Object.entries(A.queries.query);we<Me.length;we++){for(var $e=Me[we],We=$e[0],Xe=[],rt=0,He=$e[1];rt<He.length;rt++){var st=He[rt];Kp(M,st.obsSet)?st.subscribers.forEach(function(Je){return Y.add(Je)}):re&&Xe.push(st)}re&&ce.push([We,Xe])}if(re)for(var Ve=0,tt=ce;Ve<tt.length;Ve++){var ot=tt[Ve],We=ot[0],Xe=ot[1];A.queries.query[We]=Xe}}function P1(A){var M=A._state,Y=A._deps.indexedDB;if(M.isBeingOpened||A.idbdb)return M.dbReadyPromise.then(function(){return M.dbOpenError?Kr(M.dbOpenError):A});M.isBeingOpened=!0,M.dbOpenError=null,M.openComplete=!1;var re=M.openCanceller,ce=Math.round(10*A.verno),we=!1;function Me(){if(M.openCanceller!==re)throw new Ce.DatabaseClosed("db.open() was cancelled")}function $e(){return new P(function(st,Ve){if(Me(),!Y)throw new Ce.MissingAPI;var tt=A.name,ot=M.autoSchema||!ce?Y.open(tt):Y.open(tt,ce);if(!ot)throw new Ce.MissingAPI;ot.onerror=Ki(Ve),ot.onblocked=Re(A._fireOnBlocked),ot.onupgradeneeded=Re(function(Je){var ht;rt=ot.transaction,M.autoSchema&&!A._options.allowEmptyDB?(ot.onerror=gl,rt.abort(),ot.result.close(),(ht=Y.deleteDatabase(tt)).onsuccess=ht.onerror=Re(function(){Ve(new Ce.NoSuchDatabase("Database ".concat(tt," doesnt exist")))})):(rt.onerror=Ki(Ve),Je=Je.oldVersion>Math.pow(2,62)?0:Je.oldVersion,He=Je<1,A.idbdb=ot.result,we&&wf(A,rt),Zu(A,Je/10,rt,Ve))},Ve),ot.onsuccess=Re(function(){rt=null;var Je,ht,bt,wt,Tt,qt=A.idbdb=ot.result,Yt=S(qt.objectStoreNames);if(0<Yt.length)try{var Bt=qt.transaction((wt=Yt).length===1?wt[0]:wt,"readonly");if(M.autoSchema)ht=qt,bt=Bt,(Je=A).verno=ht.version/10,bt=Je._dbSchema=kc(0,ht,bt),Je._storeNames=S(ht.objectStoreNames,0),vf(Je,[Je._allTables],s(bt),bt);else if(Sf(A,A._dbSchema,Bt),((Tt=xf(kc(0,(Tt=A).idbdb,Bt),Tt._dbSchema)).add.length||Tt.change.some(function(Kt){return Kt.add.length||Kt.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),qt.close(),ce=qt.version+1,we=!0,st($e());So(A,Bt)}catch{}$s.push(A),qt.onversionchange=Re(function(Kt){M.vcFired=!0,A.on("versionchange").fire(Kt)}),qt.onclose=Re(function(Kt){A.on("close").fire(Kt)}),He&&(Tt=A._deps,Bt=tt,qt=Tt.indexedDB,Tt=Tt.IDBKeyRange,Cf(qt)||Bt===dl||qp(qt,Tt).put({name:Bt}).catch(Le)),st()},Ve)}).catch(function(st){switch(st==null?void 0:st.name){case"UnknownError":if(0<M.PR1398_maxLoop)return M.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ce)return ce=0,$e()}return P.reject(st)})}var We,Xe=M.dbReadyResolve,rt=null,He=!1;return P.race([re,(typeof navigator>"u"?P.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(st){function Ve(){return indexedDB.databases().finally(st)}We=setInterval(Ve,100),Ve()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then($e)]).then(function(){return Me(),M.onReadyBeingFired=[],P.resolve(Hp(function(){return A.on.ready.fire(A.vip)})).then(function st(){if(0<M.onReadyBeingFired.length){var Ve=M.onReadyBeingFired.reduce(xe,Le);return M.onReadyBeingFired=[],P.resolve(Hp(function(){return Ve(A.vip)})).then(st)}})}).finally(function(){M.openCanceller===re&&(M.onReadyBeingFired=null,M.isBeingOpened=!1)}).catch(function(st){M.dbOpenError=st;try{rt&&rt.abort()}catch{}return re===M.openCanceller&&A._close(),Kr(st)}).finally(function(){M.openComplete=!0,Xe()}).then(function(){var st;return He&&(st={},A.tables.forEach(function(Ve){Ve.schema.indexes.forEach(function(tt){tt.name&&(st["idb://".concat(A.name,"/").concat(Ve.name,"/").concat(tt.name)]=new Na(-1/0,[[[]]]))}),st["idb://".concat(A.name,"/").concat(Ve.name,"/")]=st["idb://".concat(A.name,"/").concat(Ve.name,"/:dels")]=new Na(-1/0,[[[]]])}),Aa(_c).fire(st),Yp(st,!0)),A})}function Xu(A){function M(we){return A.next(we)}var Y=ce(M),re=ce(function(we){return A.throw(we)});function ce(we){return function(We){var $e=we(We),We=$e.value;return $e.done?We:We&&typeof We.then=="function"?We.then(Y,re):o(We)?Promise.all(We).then(Y,re):Y(We)}}return ce(M)()}function Eo(A,M,Y){for(var re=o(A)?A.slice():[A],ce=0;ce<Y;++ce)re.push(M);return re}var F1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(M){var Y=A.table(M),re=Y.schema,ce={},we=[];function Me(He,st,Ve){var tt=ca(He),ot=ce[tt]=ce[tt]||[],Je=He==null?0:typeof He=="string"?1:He.length,ht=0<st,ht=r(r({},Ve),{name:ht?"".concat(tt,"(virtual-from:").concat(Ve.name,")"):Ve.name,lowLevelIndex:Ve,isVirtual:ht,keyTail:st,keyLength:Je,extractKey:Cc(He),unique:!ht&&Ve.unique});return ot.push(ht),ht.isPrimaryKey||we.push(ht),1<Je&&Me(Je===2?He[0]:He.slice(0,Je-1),st+1,Ve),ot.sort(function(bt,wt){return bt.keyTail-wt.keyTail}),ht}M=Me(re.primaryKey.keyPath,0,re.primaryKey),ce[":id"]=[M];for(var $e=0,We=re.indexes;$e<We.length;$e++){var Xe=We[$e];Me(Xe.keyPath,0,Xe)}function rt(He){var st,Ve=He.query.index;return Ve.isVirtual?r(r({},He),{query:{index:Ve.lowLevelIndex,range:(st=He.query.range,Ve=Ve.keyTail,{type:st.type===1?2:st.type,lower:Eo(st.lower,st.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ve),lowerOpen:!0,upper:Eo(st.upper,st.upperOpen?A.MIN_KEY:A.MAX_KEY,Ve),upperOpen:!0})}}):He}return r(r({},Y),{schema:r(r({},re),{primaryKey:M,indexes:we,getIndexByKeyPath:function(He){return(He=ce[ca(He)])&&He[0]}}),count:function(He){return Y.count(rt(He))},query:function(He){return Y.query(rt(He))},openCursor:function(He){var st=He.query.index,Ve=st.keyTail,tt=st.isVirtual,ot=st.keyLength;return tt?Y.openCursor(rt(He)).then(function(ht){return ht&&Je(ht)}):Y.openCursor(He);function Je(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue(Eo(bt,He.reverse?A.MAX_KEY:A.MIN_KEY,Ve)):He.unique?ht.continue(ht.key.slice(0,ot).concat(He.reverse?A.MIN_KEY:A.MAX_KEY,Ve)):ht.continue()}},continuePrimaryKey:{value:function(bt,wt){ht.continuePrimaryKey(Eo(bt,A.MAX_KEY,Ve),wt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function Nf(A,M,Y,re){return Y=Y||{},re=re||"",s(A).forEach(function(ce){var we,Me,$e;h(M,ce)?(we=A[ce],Me=M[ce],typeof we=="object"&&typeof Me=="object"&&we&&Me?($e=ue(we))!==ue(Me)?Y[re+ce]=M[ce]:$e==="Object"?Nf(we,Me,Y,re+ce+"."):we!==Me&&(Y[re+ce]=M[ce]):we!==Me&&(Y[re+ce]=M[ce])):Y[re+ce]=void 0}),s(M).forEach(function(ce){h(A,ce)||(Y[re+ce]=M[ce])}),Y}function Rf(A,M){return M.type==="delete"?M.keys:M.keys||M.values.map(A.extractKey)}var vy={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(M){var Y=A.table(M),re=Y.schema.primaryKey;return r(r({},Y),{mutate:function(ce){var we=ke.trans,Me=we.table(M).hook,$e=Me.deleting,We=Me.creating,Xe=Me.updating;switch(ce.type){case"add":if(We.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"put":if(We.fire===Le&&Xe.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"delete":if($e.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"deleteRange":if($e.fire===Le)break;return we._promise("readwrite",function(){return function He(st,Ve,tt){return Y.query({trans:st,values:!1,query:{index:re,range:Ve},limit:tt}).then(function(ot){var Je=ot.result;return rt({type:"delete",keys:Je,trans:st}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Je.length<tt?{failures:[],numFailures:0,lastResult:void 0}:He(st,r(r({},Ve),{lower:Je[Je.length-1],lowerOpen:!0}),tt)})})}(ce.trans,ce.range,1e4)},!0)}return Y.mutate(ce);function rt(He){var st,Ve,tt,ot=ke.trans,Je=He.keys||Rf(re,He);if(!Je)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Je}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),st=Y,tt=Je,((Ve=He).type==="add"?Promise.resolve([]):st.getMany({trans:Ve.trans,keys:tt,cache:"immutable"})).then(function(ht){var bt=Je.map(function(wt,Tt){var qt,Yt,Bt,Kt=ht[Tt],Xt={onerror:null,onsuccess:null};return He.type==="delete"?$e.fire.call(Xt,wt,Kt,ot):He.type==="add"||Kt===void 0?(qt=We.fire.call(Xt,wt,He.values[Tt],ot),wt==null&&qt!=null&&(He.keys[Tt]=wt=qt,re.outbound||I(He.values[Tt],re.keyPath,wt))):(qt=Nf(Kt,He.values[Tt]),(Yt=Xe.fire.call(Xt,qt,wt,Kt,ot))&&(Bt=He.values[Tt],Object.keys(Yt).forEach(function(zt){h(Bt,zt)?Bt[zt]=Yt[zt]:I(Bt,zt,Yt[zt])}))),Xt});return Y.mutate(He).then(function(wt){for(var Tt=wt.failures,qt=wt.results,Yt=wt.numFailures,wt=wt.lastResult,Bt=0;Bt<Je.length;++Bt){var Kt=(qt||Je)[Bt],Xt=bt[Bt];Kt==null?Xt.onerror&&Xt.onerror(Tt[Bt]):Xt.onsuccess&&Xt.onsuccess(He.type==="put"&&ht[Bt]?He.values[Bt]:Kt)}return{failures:Tt,results:qt,numFailures:Yt,lastResult:wt}}).catch(function(wt){return bt.forEach(function(Tt){return Tt.onerror&&Tt.onerror(wt)}),Promise.reject(wt)})})}}})}})}};function Xp(A,M,Y){try{if(!M||M.keys.length<A.length)return null;for(var re=[],ce=0,we=0;ce<M.keys.length&&we<A.length;++ce)Wn(M.keys[ce],A[we])===0&&(re.push(Y?Z(M.values[ce]):M.values[ce]),++we);return re.length===A.length?re:null}catch{return null}}var wy={stack:"dbcore",level:-1,create:function(A){return{table:function(M){var Y=A.table(M);return r(r({},Y),{getMany:function(re){if(!re.cache)return Y.getMany(re);var ce=Xp(re.keys,re.trans._cache,re.cache==="clone");return ce?P.resolve(ce):Y.getMany(re).then(function(we){return re.trans._cache={keys:re.keys,values:re.cache==="clone"?Z(we):we},we})},mutate:function(re){return re.type!=="add"&&(re.trans._cache=null),Y.mutate(re)}})}}}};function xl(A,M){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!M.schema.primaryKey.outbound}function xy(A,M){switch(A){case"query":return M.values&&!M.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var L1={stack:"dbcore",level:0,name:"Observability",create:function(A){var M=A.schema.name,Y=new Na(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(re,ce,we){if(ke.subscr&&ce!=="readonly")throw new Ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return A.transaction(re,ce,we)},table:function(re){var ce=A.table(re),we=ce.schema,Me=we.primaryKey,He=we.indexes,$e=Me.extractKey,We=Me.outbound,Xe=Me.autoIncrement&&He.filter(function(Ve){return Ve.compound&&Ve.keyPath.includes(Me.keyPath)}),rt=r(r({},ce),{mutate:function(Ve){function tt(zt){return zt="idb://".concat(M,"/").concat(re,"/").concat(zt),wt[zt]||(wt[zt]=new Na)}var ot,Je,ht,bt=Ve.trans,wt=Ve.mutatedParts||(Ve.mutatedParts={}),Tt=tt(""),qt=tt(":dels"),Yt=Ve.type,Xt=Ve.type==="deleteRange"?[Ve.range]:Ve.type==="delete"?[Ve.keys]:Ve.values.length<50?[Rf(Me,Ve).filter(function(zt){return zt}),Ve.values]:[],Bt=Xt[0],Kt=Xt[1],Xt=Ve.trans._cache;return o(Bt)?(Tt.addKeys(Bt),(Xt=Yt==="delete"||Bt.length===Kt.length?Xp(Bt,Xt):null)||qt.addKeys(Bt),(Xt||Kt)&&(ot=tt,Je=Xt,ht=Kt,we.indexes.forEach(function(zt){var nn=ot(zt.name||"");function pn(Rn){return Rn!=null?zt.extractKey(Rn):null}function gn(Rn){return zt.multiEntry&&o(Rn)?Rn.forEach(function(Va){return nn.addKey(Va)}):nn.addKey(Rn)}(Je||ht).forEach(function(Rn,ra){var _n=Je&&pn(Je[ra]),ra=ht&&pn(ht[ra]);Wn(_n,ra)!==0&&(_n!=null&&gn(_n),ra!=null&&gn(ra))})}))):Bt?(Kt={from:(Kt=Bt.lower)!==null&&Kt!==void 0?Kt:A.MIN_KEY,to:(Kt=Bt.upper)!==null&&Kt!==void 0?Kt:A.MAX_KEY},qt.add(Kt),Tt.add(Kt)):(Tt.add(Y),qt.add(Y),we.indexes.forEach(function(zt){return tt(zt.name).add(Y)})),ce.mutate(Ve).then(function(zt){return!Bt||Ve.type!=="add"&&Ve.type!=="put"||(Tt.addKeys(zt.results),Xe&&Xe.forEach(function(nn){for(var pn=Ve.values.map(function(_n){return nn.extractKey(_n)}),gn=nn.keyPath.findIndex(function(_n){return _n===Me.keyPath}),Rn=0,Va=zt.results.length;Rn<Va;++Rn)pn[Rn][gn]=zt.results[Rn];tt(nn.name).addKeys(pn)})),bt.mutatedParts=Tf(bt.mutatedParts||{},wt),zt})}}),He=function(tt){var ot=tt.query,tt=ot.index,ot=ot.range;return[tt,new Na((tt=ot.lower)!==null&&tt!==void 0?tt:A.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:A.MAX_KEY)]},st={get:function(Ve){return[Me,new Na(Ve.key)]},getMany:function(Ve){return[Me,new Na().addKeys(Ve.keys)]},count:He,query:He,openCursor:He};return s(st).forEach(function(Ve){rt[Ve]=function(tt){var ot=ke.subscr,Je=!!ot,ht=xl(ke,ce)&&xy(Ve,tt)?tt.obsSet={}:ot;if(Je){var bt=function(Kt){return Kt="idb://".concat(M,"/").concat(re,"/").concat(Kt),ht[Kt]||(ht[Kt]=new Na)},wt=bt(""),Tt=bt(":dels"),ot=st[Ve](tt),Je=ot[0],ot=ot[1];if((Ve==="query"&&Je.isPrimaryKey&&!tt.values?Tt:bt(Je.name||"")).add(ot),!Je.isPrimaryKey){if(Ve!=="count"){var qt=Ve==="query"&&We&&tt.values&&ce.query(r(r({},tt),{values:!1}));return ce[Ve].apply(this,arguments).then(function(Kt){if(Ve==="query"){if(We&&tt.values)return qt.then(function(pn){return pn=pn.result,wt.addKeys(pn),Kt});var Xt=tt.values?Kt.result.map($e):Kt.result;(tt.values?wt:Tt).addKeys(Xt)}else if(Ve==="openCursor"){var zt=Kt,nn=tt.values;return zt&&Object.create(zt,{key:{get:function(){return Tt.addKey(zt.primaryKey),zt.key}},primaryKey:{get:function(){var pn=zt.primaryKey;return Tt.addKey(pn),pn}},value:{get:function(){return nn&&wt.addKey(zt.primaryKey),zt.value}}})}return Kt})}Tt.add(Y)}}return ce[Ve].apply(this,arguments)}}),rt}})}};function _y(A,M,Y){if(Y.numFailures===0)return M;if(M.type==="deleteRange")return null;var re=M.keys?M.keys.length:"values"in M&&M.values?M.values.length:1;return Y.numFailures===re?null:(M=r({},M),o(M.keys)&&(M.keys=M.keys.filter(function(ce,we){return!(we in Y.failures)})),"values"in M&&o(M.values)&&(M.values=M.values.filter(function(ce,we){return!(we in Y.failures)})),M)}function If(A,M){return Y=A,((re=M).lower===void 0||(re.lowerOpen?0<Wn(Y,re.lower):0<=Wn(Y,re.lower)))&&(A=A,(M=M).upper===void 0||(M.upperOpen?Wn(A,M.upper)<0:Wn(A,M.upper)<=0));var Y,re}function Jp(A,M,st,re,ce,we){if(!st||st.length===0)return A;var Me=M.query.index,$e=Me.multiEntry,We=M.query.range,Xe=re.schema.primaryKey.extractKey,rt=Me.extractKey,He=(Me.lowLevelIndex||Me).extractKey,st=st.reduce(function(Ve,tt){var ot=Ve,Je=[];if(tt.type==="add"||tt.type==="put")for(var ht=new Na,bt=tt.values.length-1;0<=bt;--bt){var wt,Tt=tt.values[bt],qt=Xe(Tt);ht.hasKey(qt)||(wt=rt(Tt),($e&&o(wt)?wt.some(function(zt){return If(zt,We)}):If(wt,We))&&(ht.addKey(qt),Je.push(Tt)))}switch(tt.type){case"add":var Yt=new Na().addKeys(M.values?Ve.map(function(nn){return Xe(nn)}):Ve),ot=Ve.concat(M.values?Je.filter(function(nn){return nn=Xe(nn),!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}):Je.map(function(nn){return Xe(nn)}).filter(function(nn){return!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}));break;case"put":var Bt=new Na().addKeys(tt.values.map(function(nn){return Xe(nn)}));ot=Ve.filter(function(nn){return!Bt.hasKey(M.values?Xe(nn):nn)}).concat(M.values?Je:Je.map(function(nn){return Xe(nn)}));break;case"delete":var Kt=new Na().addKeys(tt.keys);ot=Ve.filter(function(nn){return!Kt.hasKey(M.values?Xe(nn):nn)});break;case"deleteRange":var Xt=tt.range;ot=Ve.filter(function(nn){return!If(Xe(nn),Xt)})}return ot},A);return st===A?A:(st.sort(function(Ve,tt){return Wn(He(Ve),He(tt))||Wn(Xe(Ve),Xe(tt))}),M.limit&&M.limit<1/0&&(st.length>M.limit?st.length=M.limit:A.length===M.limit&&st.length<M.limit&&(ce.dirty=!0)),we?Object.freeze(st):st)}function Tc(A,M){return Wn(A.lower,M.lower)===0&&Wn(A.upper,M.upper)===0&&!!A.lowerOpen==!!M.lowerOpen&&!!A.upperOpen==!!M.upperOpen}function Ju(A,M){return function(Y,re,ce,we){if(Y===void 0)return re!==void 0?-1:0;if(re===void 0)return 1;if((re=Wn(Y,re))===0){if(ce&&we)return 0;if(ce)return 1;if(we)return-1}return re}(A.lower,M.lower,A.lowerOpen,M.lowerOpen)<=0&&0<=function(Y,re,ce,we){if(Y===void 0)return re!==void 0?1:0;if(re===void 0)return-1;if((re=Wn(Y,re))===0){if(ce&&we)return 0;if(ce)return-1;if(we)return 1}return re}(A.upper,M.upper,A.upperOpen,M.upperOpen)}function $1(A,M,Y,re){A.subscribers.add(Y),re.addEventListener("abort",function(){var ce,we;A.subscribers.delete(Y),A.subscribers.size===0&&(ce=A,we=M,setTimeout(function(){ce.subscribers.size===0&&X(we,ce)},3e3))})}var jf={stack:"dbcore",level:0,name:"Cache",create:function(A){var M=A.schema.name;return r(r({},A),{transaction:function(Y,re,ce){var we,Me,$e=A.transaction(Y,re,ce);return re==="readwrite"&&(Me=(we=new AbortController).signal,ce=function(We){return function(){if(we.abort(),re==="readwrite"){for(var Xe=new Set,rt=0,He=Y;rt<He.length;rt++){var st=He[rt],Ve=wl["idb://".concat(M,"/").concat(st)];if(Ve){var tt=A.table(st),ot=Ve.optimisticOps.filter(function(nn){return nn.trans===$e});if($e._explicit&&We&&$e.mutatedParts)for(var Je=0,ht=Object.values(Ve.queries.query);Je<ht.length;Je++)for(var bt=0,wt=(Yt=ht[Je]).slice();bt<wt.length;bt++)Kp((Bt=wt[bt]).obsSet,$e.mutatedParts)&&(X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)}));else if(0<ot.length){Ve.optimisticOps=Ve.optimisticOps.filter(function(nn){return nn.trans!==$e});for(var Tt=0,qt=Object.values(Ve.queries.query);Tt<qt.length;Tt++)for(var Yt,Bt,Kt,Xt=0,zt=(Yt=qt[Tt]).slice();Xt<zt.length;Xt++)(Bt=zt[Xt]).res!=null&&$e.mutatedParts&&(We&&!Bt.dirty?(Kt=Object.isFrozen(Bt.res),Kt=Jp(Bt.res,Bt.req,ot,tt,Bt,Kt),Bt.dirty?(X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)})):Kt!==Bt.res&&(Bt.res=Kt,Bt.promise=P.resolve({result:Kt}))):(Bt.dirty&&X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)})))}}}Xe.forEach(function(nn){return nn()})}}},$e.addEventListener("abort",ce(!1),{signal:Me}),$e.addEventListener("error",ce(!1),{signal:Me}),$e.addEventListener("complete",ce(!0),{signal:Me})),$e},table:function(Y){var re=A.table(Y),ce=re.schema.primaryKey;return r(r({},re),{mutate:function(we){var Me=ke.trans;if(ce.outbound||Me.db._options.cache==="disabled"||Me.explicit||Me.idbtrans.mode!=="readwrite")return re.mutate(we);var $e=wl["idb://".concat(M,"/").concat(Y)];return $e?(Me=re.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||Rf(ce,we).some(function(We){return We==null}))?($e.optimisticOps.push(we),we.mutatedParts&&Af(we.mutatedParts),Me.then(function(We){0<We.numFailures&&(X($e.optimisticOps,we),(We=_y(0,we,We))&&$e.optimisticOps.push(We),we.mutatedParts&&Af(we.mutatedParts))}),Me.catch(function(){X($e.optimisticOps,we),we.mutatedParts&&Af(we.mutatedParts)})):Me.then(function(We){var Xe=_y(0,r(r({},we),{values:we.values.map(function(rt,He){var st;return We.failures[He]?rt:(rt=(st=ce.keyPath)!==null&&st!==void 0&&st.includes(".")?Z(rt):r({},rt),I(rt,ce.keyPath,We.results[He]),rt)})}),We);$e.optimisticOps.push(Xe),queueMicrotask(function(){return we.mutatedParts&&Af(we.mutatedParts)})}),Me):re.mutate(we)},query:function(we){if(!xl(ke,re)||!xy("query",we))return re.query(we);var Me=((Xe=ke.trans)===null||Xe===void 0?void 0:Xe.db._options.cache)==="immutable",He=ke,$e=He.requery,We=He.signal,Xe=function(tt,ot,Je,ht){var bt=wl["idb://".concat(tt,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Je]))return[null,!1,bt,null];var wt=ot[(ht.query?ht.query.index.name:null)||""];if(!wt)return[null,!1,bt,null];switch(Je){case"query":var Tt=wt.find(function(qt){return qt.req.limit===ht.limit&&qt.req.values===ht.values&&Tc(qt.req.query.range,ht.query.range)});return Tt?[Tt,!0,bt,wt]:[wt.find(function(qt){return("limit"in qt.req?qt.req.limit:1/0)>=ht.limit&&(!ht.values||qt.req.values)&&Ju(qt.req.query.range,ht.query.range)}),!1,bt,wt];case"count":return Tt=wt.find(function(qt){return Tc(qt.req.query.range,ht.query.range)}),[Tt,!!Tt,bt,wt]}}(M,Y,"query",we),rt=Xe[0],He=Xe[1],st=Xe[2],Ve=Xe[3];return rt&&He?rt.obsSet=we.obsSet:(He=re.query(we).then(function(tt){var ot=tt.result;if(rt&&(rt.res=ot),Me){for(var Je=0,ht=ot.length;Je<ht;++Je)Object.freeze(ot[Je]);Object.freeze(ot)}else tt.result=Z(ot);return tt}).catch(function(tt){return Ve&&rt&&X(Ve,rt),Promise.reject(tt)}),rt={obsSet:we.obsSet,promise:He,subscribers:new Set,type:"query",req:we,dirty:!1},Ve?Ve.push(rt):(Ve=[rt],(st=st||(wl["idb://".concat(M,"/").concat(Y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=Ve)),$1(rt,Ve,$e,We),rt.promise.then(function(tt){return{result:Jp(tt.result,we,st==null?void 0:st.optimisticOps,re,rt,Me)}})}})}})}};function Qu(A,M){return new Proxy(A,{get:function(Y,re,ce){return re==="db"?M:Reflect.get(Y,re,ce)}})}var ps=(Br.prototype.version=function(A){if(isNaN(A)||A<.1)throw new Ce.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new Ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var M=this._versions,Y=M.filter(function(re){return re._cfg.version===A})[0];return Y||(Y=new this.Version(A),M.push(Y),M.sort(zp),Y.stores({}),this._state.autoSchema=!1,Y)},Br.prototype._whenReady=function(A){var M=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?A():new P(function(Y,re){if(M._state.openComplete)return re(new Ce.DatabaseClosed(M._state.dbOpenError));if(!M._state.isBeingOpened){if(!M._state.autoOpen)return void re(new Ce.DatabaseClosed);M.open().catch(Le)}M._state.dbReadyPromise.then(Y,re)}).then(A)},Br.prototype.use=function(A){var M=A.stack,Y=A.create,re=A.level,ce=A.name;return ce&&this.unuse({stack:M,name:ce}),A=this._middlewares[M]||(this._middlewares[M]=[]),A.push({stack:M,create:Y,level:re??10,name:ce}),A.sort(function(we,Me){return we.level-Me.level}),this},Br.prototype.unuse=function(A){var M=A.stack,Y=A.name,re=A.create;return M&&this._middlewares[M]&&(this._middlewares[M]=this._middlewares[M].filter(function(ce){return re?ce.create!==re:!!Y&&ce.name!==Y})),this},Br.prototype.open=function(){var A=this;return yo(be,function(){return P1(A)})},Br.prototype._close=function(){var A=this._state,M=$s.indexOf(this);if(0<=M&&$s.splice(M,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new P(function(Y){A.dbReadyResolve=Y}),A.openCanceller=new P(function(Y,re){A.cancelOpen=re}))},Br.prototype.close=function(Y){var M=(Y===void 0?{disableAutoOpen:!0}:Y).disableAutoOpen,Y=this._state;M?(Y.isBeingOpened&&Y.cancelOpen(new Ce.DatabaseClosed),this._close(),Y.autoOpen=!1,Y.dbOpenError=new Ce.DatabaseClosed):(this._close(),Y.autoOpen=this._options.autoOpen||Y.isBeingOpened,Y.openComplete=!1,Y.dbOpenError=null)},Br.prototype.delete=function(A){var M=this;A===void 0&&(A={disableAutoOpen:!0});var Y=0<arguments.length&&typeof arguments[0]!="object",re=this._state;return new P(function(ce,we){function Me(){M.close(A);var $e=M._deps.indexedDB.deleteDatabase(M.name);$e.onsuccess=Re(function(){var We,Xe,rt;We=M._deps,Xe=M.name,rt=We.indexedDB,We=We.IDBKeyRange,Cf(rt)||Xe===dl||qp(rt,We).delete(Xe).catch(Le),ce()}),$e.onerror=Ki(we),$e.onblocked=M._fireOnBlocked}if(Y)throw new Ce.InvalidArgument("Invalid closeOptions argument to db.delete()");re.isBeingOpened?re.dbReadyPromise.then(Me):Me()})},Br.prototype.backendDB=function(){return this.idbdb},Br.prototype.isOpen=function(){return this.idbdb!==null},Br.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},Br.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Br.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Br.prototype,"tables",{get:function(){var A=this;return s(this._allTables).map(function(M){return A._allTables[M]})},enumerable:!1,configurable:!0}),Br.prototype.transaction=function(){var A=(function(M,Y,re){var ce=arguments.length;if(ce<2)throw new Ce.InvalidArgument("Too few arguments");for(var we=new Array(ce-1);--ce;)we[ce-1]=arguments[ce];return re=we.pop(),[M,B(we),re]}).apply(this,arguments);return this._transaction.apply(this,A)},Br.prototype._transaction=function(A,M,Y){var re=this,ce=ke.trans;ce&&ce.db===this&&A.indexOf("!")===-1||(ce=null);var we,Me,$e=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(Me=M.map(function(Xe){if(Xe=Xe instanceof re.Table?Xe.name:Xe,typeof Xe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Xe}),A=="r"||A===Gi)we=Gi;else{if(A!="rw"&&A!=Gu)throw new Ce.InvalidArgument("Invalid transaction mode: "+A);we=Gu}if(ce){if(ce.mode===Gi&&we===Gu){if(!$e)throw new Ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ce=null}ce&&Me.forEach(function(Xe){if(ce&&ce.storeNames.indexOf(Xe)===-1){if(!$e)throw new Ce.SubTransaction("Table "+Xe+" not included in parent transaction.");ce=null}}),$e&&ce&&!ce.active&&(ce=null)}}catch(Xe){return ce?ce._promise(null,function(rt,He){He(Xe)}):Kr(Xe)}var We=(function Xe(rt,He,st,Ve,tt){return P.resolve().then(function(){var ot=ke.transless||ke,Je=rt._createTransaction(He,st,rt._dbSchema,Ve);if(Je.explicit=!0,ot={trans:Je,transless:ot},Ve)Je.idbtrans=Ve.idbtrans;else try{Je.create(),Je.idbtrans._explicit=!0,rt._state.PR1398_maxLoop=3}catch(wt){return wt.name===Ae.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,He,st,null,tt)})):Kr(wt)}var ht,bt=J(tt);return bt&&Nn(),ot=P.follow(function(){var wt;(ht=tt.call(Je,Je))&&(bt?(wt=Kn.bind(null,null),ht.then(wt,wt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=Xu(ht)))},ot),(ht&&typeof ht.then=="function"?P.resolve(ht).then(function(wt){return Je.active?wt:Kr(new Ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(wt){return Ve&&Je._resolve(),Je._completion.then(function(){return wt})}).catch(function(wt){return Je._reject(wt),Kr(wt)})})}).bind(null,this,we,Me,ce,Y);return ce?ce._promise(we,We,"lock"):ke.trans?yo(ke.transless,function(){return re._whenReady(We)}):this._whenReady(We)},Br.prototype.table=function(A){if(!h(this._allTables,A))throw new Ce.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},Br);function Br(A,M){var Y=this;this._middlewares={},this.verno=0;var re=Br.dependencies;this._options=M=r({addons:Br.addons,autoOpen:!0,indexedDB:re.indexedDB,IDBKeyRange:re.IDBKeyRange,cache:"cloned"},M),this._deps={indexedDB:M.indexedDB,IDBKeyRange:M.IDBKeyRange},re=M.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ce,we,Me,$e,We,Xe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:M.autoOpen};Xe.dbReadyPromise=new P(function(He){Xe.dbReadyResolve=He}),Xe.openCanceller=new P(function(He,st){Xe.cancelOpen=st}),this._state=Xe,this.name=A,this.on=_o(this,"populate","blocked","versionchange","close",{ready:[xe,Le]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(st,Ve){Br.vip(function(){var tt,ot=Y._state;ot.openComplete?(ot.dbOpenError||P.resolve().then(st),Ve&&He(st)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(st),Ve&&He(st)):(He(st),tt=Y,Ve||He(function Je(){tt.on.ready.unsubscribe(st),tt.on.ready.unsubscribe(Je)}))})}}),this.Collection=(ce=this,gc(wc.prototype,function(ht,Je){this.db=ce;var Ve=fl,tt=null;if(Je)try{Ve=Je()}catch(bt){tt=bt}var ot=ht._ctx,Je=ot.table,ht=Je.hook.reading.fire;this._ctx={table:Je,index:ot.index,isPrimKey:!ot.index||Je.schema.primKey.keyPath&&ot.index===Je.schema.primKey.name,range:Ve,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:tt,or:ot.or,valueMapper:ht!==Ie?ht:null}})),this.Table=(we=this,gc(Mp.prototype,function(He,st,Ve){this.db=we,this._tx=Ve,this.name=He,this.schema=st,this.hook=we._allTables[He]?we._allTables[He].hook:_o(null,{creating:[Te,Le],reading:[z,Ie],updating:[se,Le],deleting:[de,Le]})})),this.Transaction=(Me=this,gc(Bp.prototype,function(He,st,Ve,tt,ot){var Je=this;this.db=Me,this.mode=He,this.storeNames=st,this.schema=Ve,this.chromeTransactionDurability=tt,this.idbtrans=null,this.on=_o(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(ht,bt){Je._resolve=ht,Je._reject=bt}),this._completion.then(function(){Je.active=!1,Je.on.complete.fire()},function(ht){var bt=Je.active;return Je.active=!1,Je.on.error.fire(ht),Je.parent?Je.parent._reject(ht):bt&&Je.idbtrans&&Je.idbtrans.abort(),Kr(ht)})})),this.Version=($e=this,gc(M1.prototype,function(He){this.db=$e,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,gc(ml.prototype,function(He,st,Ve){if(this.db=We,this._ctx={table:He,index:st===":id"?null:st,or:Ve},this._cmp=this._ascending=Wn,this._descending=function(tt,ot){return Wn(ot,tt)},this._max=function(tt,ot){return 0<Wn(tt,ot)?tt:ot},this._min=function(tt,ot){return Wn(tt,ot)<0?tt:ot},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ce.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(Y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Y.name,"'. Closing db now to resume the delete request.")),Y.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(Y.name,"') was blocked")):console.warn("Upgrade '".concat(Y.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=Ec(M.IDBKeyRange),this._createTransaction=function(He,st,Ve,tt){return new Y.Transaction(He,st,Ve,Y._options.chromeTransactionDurability,tt)},this._fireOnBlocked=function(He){Y.on("blocked").fire(He),$s.filter(function(st){return st.name===Y.name&&st!==Y&&!st._state.vcFired}).map(function(st){return st.on("versionchange").fire(He)})},this.use(wy),this.use(jf),this.use(L1),this.use(F1),this.use(vy);var rt=new Proxy(this,{get:function(He,st,Ve){if(st==="_vip")return!0;if(st==="table")return function(ot){return Qu(Y.table(ot),rt)};var tt=Reflect.get(He,st,Ve);return tt instanceof Mp?Qu(tt,rt):st==="tables"?tt.map(function(ot){return Qu(ot,rt)}):st==="_createTransaction"?function(){return Qu(tt.apply(this,arguments),rt)}:tt}});this.vip=rt,re.forEach(function(He){return He(Y)})}var Ac,gi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Sy=(Of.prototype.subscribe=function(A,M,Y){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:M,complete:Y})},Of.prototype[gi]=function(){return this},Of);function Of(A){this._subscribe=A}try{Ac={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Ac={indexedDB:null,IDBKeyRange:null}}function Ey(A){var M,Y=!1,re=new Sy(function(ce){var we=J(A),Me,$e=!1,We={},Xe={},rt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,Me&&Me.abort(),He&&Aa.storagemutated.unsubscribe(Ve))}};ce.start&&ce.start(rt);var He=!1,st=function(){return vo(tt)},Ve=function(ot){Tf(We,ot),Kp(Xe,We)&&st()},tt=function(){var ot,Je,ht;!$e&&Ac.indexedDB&&(We={},ot={},Me&&Me.abort(),Me=new AbortController,ht=function(bt){var wt=G();try{we&&Nn();var Tt=en(A,bt);return Tt=we?Tt.finally(Kn):Tt}finally{wt&&q()}}(Je={subscr:ot,signal:Me.signal,requery:st,querier:A,trans:null}),Promise.resolve(ht).then(function(bt){Y=!0,M=bt,$e||Je.signal.aborted||(We={},function(wt){for(var Tt in wt)if(h(wt,Tt))return;return 1}(Xe=ot)||He||(Aa(_c,Ve),He=!0),vo(function(){return!$e&&ce.next&&ce.next(bt)}))},function(bt){Y=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||$e||vo(function(){$e||ce.error&&ce.error(bt)})}))};return setTimeout(st,0),rt});return re.hasValue=function(){return Y},re.getValue=function(){return M},re}var _l=ps;function Qp(A){var M=Co;try{Co=!0,Aa.storagemutated.fire(A),Yp(A,!0)}finally{Co=M}}m(_l,r(r({},Qe),{delete:function(A){return new _l(A,{addons:[]}).delete()},exists:function(A){return new _l(A,{addons:[]}).open().then(function(M){return M.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return M=_l.dependencies,Y=M.indexedDB,M=M.IDBKeyRange,(Cf(Y)?Promise.resolve(Y.databases()).then(function(re){return re.map(function(ce){return ce.name}).filter(function(ce){return ce!==dl})}):qp(Y,M).toCollection().primaryKeys()).then(A)}catch{return Kr(new Ce.MissingAPI)}var M,Y},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return ke.trans?yo(ke.transless,A):A()},vip:Hp,async:function(A){return function(){try{var M=Xu(A.apply(this,arguments));return M&&typeof M.then=="function"?M:P.resolve(M)}catch(Y){return Kr(Y)}}},spawn:function(A,M,Y){try{var re=Xu(A.apply(Y,M||[]));return re&&typeof re.then=="function"?re:P.resolve(re)}catch(ce){return Kr(ce)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(A,M){return M=P.resolve(typeof A=="function"?_l.ignoreTransaction(A):A).timeout(M||6e4),ke.trans?ke.trans.waitFor(M):M},Promise:P,debug:{get:function(){return Fe},set:function(A){Ee(A)}},derive:b,extend:l,props:m,override:E,Events:_o,on:Aa,liveQuery:Ey,extendObservabilitySet:Tf,getByKeyPath:j,setByKeyPath:I,delByKeyPath:function(A,M){typeof M=="string"?I(A,M,void 0):"length"in M&&[].map.call(M,function(Y){I(A,Y,void 0)})},shallowClone:R,deepClone:Z,getObjectDiff:Nf,cmp:Wn,asap:T,minKey:-1/0,addons:[],connections:$s,errnames:Ae,dependencies:Ac,cache:wl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,M,Y){return A+M/Math.pow(10,2*Y)})})),_l.maxKey=Ec(_l.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Aa(_c,function(A){Co||(A=new CustomEvent(yl,{detail:A}),Co=!0,dispatchEvent(A),Co=!1)}),addEventListener(yl,function(A){A=A.detail,Co||Qp(A)}));var Nc,Co=!1,Qa=function(){};return typeof BroadcastChannel<"u"&&((Qa=function(){(Nc=new BroadcastChannel(yl)).onmessage=function(A){return A.data&&Qp(A.data)}})(),typeof Nc.unref=="function"&&Nc.unref(),Aa(_c,function(A){Co||Nc.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!ps.disableBfCache&&A.persisted){Fe&&console.debug("Dexie: handling persisted pagehide"),Nc!=null&&Nc.close();for(var M=0,Y=$s;M<Y.length;M++)Y[M].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!ps.disableBfCache&&A.persisted&&(Fe&&console.debug("Dexie: handling persisted pageshow"),Qa(),Qp({all:new Na(-1/0,[[]])}))})),P.rejectionMapper=function(A,M){return!A||A instanceof ee||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Pe[A.name]?A:(M=new Pe[A.name](M||A.message,A),"stack"in A&&v(M,"stack",{get:function(){return this.inner.stack}}),M)},Ee(Fe),r(ps,Object.freeze({__proto__:null,Dexie:ps,liveQuery:Ey,Entity:pf,cmp:Wn,PropModification:vc,replacePrefix:function(A,M){return new vc({replacePrefix:[A,M]})},add:function(A){return new vc({add:A})},remove:function(A){return new vc({remove:A})},default:ps,RangeSet:Na,mergeRanges:vl,rangesOverlap:gy}),{default:ps}),ps})}(Ev)),Ev.exports}var xG=wG();const QE=ui(xG),f3=Symbol.for("Dexie"),Bv=globalThis[f3]||(globalThis[f3]=QE);if(QE.semVer!==Bv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${QE.semVer} and ${Bv.semVer}`);const{liveQuery:ySe,mergeRanges:bSe,rangesOverlap:vSe,RangeSet:wSe,cmp:xSe,Entity:_Se,PropModification:SSe,replacePrefix:ESe,add:CSe,remove:kSe}=Bv;class _G extends Bv{constructor(){super("LiteChatDatabase_Rewrite_v1");va(this,"conversations");va(this,"interactions");va(this,"mods");va(this,"appState");va(this,"providerConfigs");va(this,"apiKeys");va(this,"syncRepos");va(this,"projects");va(this,"rules");va(this,"tags");va(this,"tagRuleLinks");this.version(8).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Ct=new _G,Da=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class xt{static async loadConversations(){try{return(await Ct.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Da(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Ct.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Ct.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Ct.interactions.where({conversationId:t}).sortBy("index")).map(r=>Da(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Ct.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Ct.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Ct.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Ct.mods.orderBy("loadOrder").toArray()).map(n=>Da(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Ct.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Ct.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Ct.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Ct.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Ct.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Da(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Ct.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Ct.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Ct.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Da(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Ct.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Ct.transaction("rw",[Ct.apiKeys,Ct.providerConfigs],async()=>{const n=await Ct.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Ct.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Ct.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Ct.syncRepos.toArray()).map(n=>Da(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Ct.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Ct.transaction("rw",[Ct.syncRepos,Ct.conversations],async()=>{const n=await Ct.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Ct.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Ct.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Ct.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Da(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,metadata:t.metadata?{...t.metadata}:{}};return await Ct.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await Ct.projects.where("parentId").equals(r).toArray();for(const s of a)await n(s.id);const i=await Ct.conversations.where("projectId").equals(r).toArray();if(i.length>0){const s=i.map(o=>Ct.conversations.update(o.id,{projectId:null}));await Promise.all(s),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await Ct.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Ct.transaction("rw",[Ct.projects,Ct.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Ct.rules.orderBy("name").toArray()).map(n=>Da(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Ct.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Ct.transaction("rw",[Ct.rules,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("ruleId").equals(t).delete(),await Ct.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Ct.tags.orderBy("name").toArray()).map(n=>Da(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Ct.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Ct.transaction("rw",[Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("tagId").equals(t).delete(),await Ct.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Ct.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Ct.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Ct.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Ct.appState.toArray();n.settings={},r.forEach(a=>{a.key.startsWith("settings:")&&(n.settings[a.key.substring(9)]=a.value)})}return t.importApiKeys&&(n.apiKeys=await Ct.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Ct.providerConfigs.toArray()),t.importProjects&&(n.projects=await Ct.projects.toArray()),t.importConversations&&(n.conversations=await Ct.conversations.toArray(),n.interactions=await Ct.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Ct.rules.toArray(),n.tags=await Ct.tags.toArray(),n.tagRuleLinks=await Ct.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Ct.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Ct.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Ct.transaction("rw",[Ct.appState,Ct.apiKeys,Ct.providerConfigs,Ct.projects,Ct.conversations,Ct.interactions,Ct.rules,Ct.tags,Ct.tagRuleLinks,Ct.mods,Ct.syncRepos],async()=>{if(n.importSettings&&await Ct.appState.clear(),n.importApiKeys&&await Ct.apiKeys.clear(),n.importProviderConfigs&&await Ct.providerConfigs.clear(),n.importProjects&&await Ct.projects.clear(),n.importConversations&&(await Ct.conversations.clear(),await Ct.interactions.clear()),n.importRulesAndTags&&(await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()),n.importMods&&await Ct.mods.clear(),n.importSyncRepos&&await Ct.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([a,i])=>({key:`settings:${a}`,value:i}));await Ct.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Ct.apiKeys.bulkPut(t.apiKeys.map(r=>Da(r))),n.importProviderConfigs&&t.providerConfigs&&await Ct.providerConfigs.bulkPut(t.providerConfigs.map(r=>Da(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Ct.projects.bulkPut(t.projects.map(r=>Da(r))),n.importConversations&&t.conversations&&(await Ct.conversations.bulkPut(t.conversations.map(r=>Da(r,["lastSyncedAt"]))),t.interactions&&await Ct.interactions.bulkPut(t.interactions.map(r=>Da(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Ct.rules.bulkPut(t.rules.map(r=>Da(r))),t.tags&&await Ct.tags.bulkPut(t.tags.map(r=>Da(r))),t.tagRuleLinks&&await Ct.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Ct.mods.bulkPut(t.mods.map(r=>Da(r))),n.importSyncRepos&&t.syncRepos&&await Ct.syncRepos.bulkPut(t.syncRepos.map(r=>Da(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Ct.transaction("rw",[Ct.conversations,Ct.interactions,Ct.mods,Ct.appState,Ct.providerConfigs,Ct.apiKeys,Ct.syncRepos,Ct.projects,Ct.rules,Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.interactions.clear(),await Ct.conversations.clear(),await Ct.projects.clear(),await Ct.mods.clear(),await Ct.appState.clear(),await Ct.providerConfigs.clear(),await Ct.apiKeys.clear(),await Ct.syncRepos.clear(),await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function SG(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const kt=SG();var Et=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(Et||{}),zv=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))(zv||{}),Ho=P6();const pD=ui(Ho);function EG(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const CG=e=>{switch(e){case"success":return AG;case"info":return RG;case"warning":return NG;case"error":return IG;default:return null}},kG=Array(12).fill(0),TG=({visible:e,className:t})=>gt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},gt.createElement("div",{className:"sonner-spinner"},kG.map((n,r)=>gt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),AG=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),NG=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),RG=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),IG=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jG=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},gt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),gt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),OG=()=>{const[e,t]=gt.useState(document.hidden);return gt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let eC=1;class DG{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:eC++,s=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...a,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,s;const o=a.then(async u=>{if(s=["resolve",u],gt.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(PG(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,m=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,m=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...v})}}).catch(async u=>{if(s=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,y=typeof d=="object"&&!gt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...y})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>o.then(()=>s[0]==="reject"?d(s[1]):u(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||eC++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Mi=new DG,MG=(e,t)=>{const n=(t==null?void 0:t.id)||eC++;return Mi.addToast({title:e,...t,id:n}),n},PG=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",FG=MG,LG=()=>Mi.toasts,$G=()=>Mi.getActiveToasts(),Ye=Object.assign(FG,{success:Mi.success,info:Mi.info,warning:Mi.warning,error:Mi.error,custom:Mi.custom,message:Mi.message,promise:Mi.promise,dismiss:Mi.dismiss,loading:Mi.loading},{getHistory:LG,getToasts:$G});EG("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Sb(e){return e.label!==void 0}const BG=3,zG="24px",UG="16px",h3=4e3,qG=356,HG=14,VG=45,GG=200;function jo(...e){return e.filter(Boolean).join(" ")}function KG(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const WG=e=>{var t,n,r,a,i,s,o,l,u;const{invert:d,toast:h,unstyled:m,interacting:y,setHeights:v,visibleToasts:b,heights:x,index:w,toasts:S,expanded:E,removeToast:C,defaultRichColors:T,closeButton:j,style:I,cancelButtonStyle:R,actionButtonStyle:F,className:B="",descriptionClassName:H="",duration:D,position:Z,gap:V,expandByDefault:ue,classNames:ae,icons:ne,closeButtonAriaLabel:X="Close toast"}=e,[ie,L]=gt.useState(null),[J,Q]=gt.useState(null),[ee,fe]=gt.useState(!1),[ve,Oe]=gt.useState(!1),[Ae,Ne]=gt.useState(!1),[Ce,Pe]=gt.useState(!1),[Qe,Le]=gt.useState(!1),[Ie,z]=gt.useState(0),[Se,Te]=gt.useState(0),de=gt.useRef(h.duration||D||h3),se=gt.useRef(null),te=gt.useRef(null),xe=w===0,Fe=w+1<=b,Ee=h.type,Ge=h.dismissible!==!1,Nt=h.className||"",it=h.descriptionClassName||"",St=gt.useMemo(()=>x.findIndex(De=>De.toastId===h.id)||0,[x,h.id]),Ft=gt.useMemo(()=>{var De;return(De=h.closeButton)!=null?De:j},[h.closeButton,j]),Dt=gt.useMemo(()=>h.duration||D||h3,[h.duration,D]),Zt=gt.useRef(0),ye=gt.useRef(0),O=gt.useRef(0),K=gt.useRef(null),[he,je]=Z.split("-"),be=gt.useMemo(()=>x.reduce((De,Ke,Ot)=>Ot>=St?De:De+Ke.height,0),[x,St]),ke=OG(),le=h.invert||d,ft=Ee==="loading";ye.current=gt.useMemo(()=>St*V+be,[St,be]),gt.useEffect(()=>{de.current=Dt},[Dt]),gt.useEffect(()=>{fe(!0)},[]),gt.useEffect(()=>{const De=te.current;if(De){const Ke=De.getBoundingClientRect().height;return Te(Ke),v(Ot=>[{toastId:h.id,height:Ke,position:h.position},...Ot]),()=>v(Ot=>Ot.filter(me=>me.toastId!==h.id))}},[v,h.id]),gt.useLayoutEffect(()=>{if(!ee)return;const De=te.current,Ke=De.style.height;De.style.height="auto";const Ot=De.getBoundingClientRect().height;De.style.height=Ke,Te(Ot),v(me=>me.find(q=>q.toastId===h.id)?me.map(q=>q.toastId===h.id?{...q,height:Ot}:q):[{toastId:h.id,height:Ot,position:h.position},...me])},[ee,h.title,h.description,v,h.id]);const vt=gt.useCallback(()=>{Oe(!0),z(ye.current),v(De=>De.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},GG)},[h,C,v,ye]);gt.useEffect(()=>{if(h.promise&&Ee==="loading"||h.duration===1/0||h.type==="loading")return;let De;return E||y||ke?(()=>{if(O.current<Zt.current){const me=new Date().getTime()-Zt.current;de.current=de.current-me}O.current=new Date().getTime()})():(()=>{de.current!==1/0&&(Zt.current=new Date().getTime(),De=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},de.current))})(),()=>clearTimeout(De)},[E,y,h,Ee,ke,vt]),gt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function P(){var De;if(ne!=null&&ne.loading){var Ke;return gt.createElement("div",{className:jo(ae==null?void 0:ae.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Ee==="loading"},ne.loading)}return gt.createElement(TG,{className:jo(ae==null?void 0:ae.loader,h==null||(De=h.classNames)==null?void 0:De.loader),visible:Ee==="loading"})}const Be=h.icon||(ne==null?void 0:ne[Ee])||CG(Ee);var nt,ge;return gt.createElement("li",{tabIndex:0,ref:te,className:jo(B,Nt,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[Ee],h==null||(n=h.classNames)==null?void 0:n[Ee]),"data-sonner-toast":"","data-rich-colors":(nt=h.richColors)!=null?nt:T,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":ee,"data-promise":!!h.promise,"data-swiped":Qe,"data-removed":ve,"data-visible":Fe,"data-y-position":he,"data-x-position":je,"data-index":w,"data-front":xe,"data-swiping":Ae,"data-dismissible":Ge,"data-type":Ee,"data-invert":le,"data-swipe-out":Ce,"data-swipe-direction":J,"data-expanded":!!(E||ue&&ee),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${ve?Ie:ye.current}px`,"--initial-height":ue?"auto":`${Se}px`,...I,...h.style},onDragEnd:()=>{Ne(!1),L(null),K.current=null},onPointerDown:De=>{ft||!Ge||(se.current=new Date,z(ye.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Ne(!0),K.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,Ke,Ot;if(Ce||!Ge)return;K.current=null;const me=Number(((De=te.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),G=Number(((Ke=te.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),q=new Date().getTime()-((Ot=se.current)==null?void 0:Ot.getTime()),W=ie==="x"?me:G,pe=Math.abs(W)/q;if(Math.abs(W)>=VG||pe>.11){z(ye.current),h.onDismiss==null||h.onDismiss.call(h,h),Q(ie==="x"?me>0?"right":"left":G>0?"down":"up"),vt(),Pe(!0);return}else{var Re,qe;(Re=te.current)==null||Re.style.setProperty("--swipe-amount-x","0px"),(qe=te.current)==null||qe.style.setProperty("--swipe-amount-y","0px")}Le(!1),Ne(!1),L(null)},onPointerMove:De=>{var Ke,Ot,me;if(!K.current||!Ge||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const q=De.clientY-K.current.y,W=De.clientX-K.current.x;var pe;const Re=(pe=e.swipeDirections)!=null?pe:KG(Z);!ie&&(Math.abs(W)>1||Math.abs(q)>1)&&L(Math.abs(W)>Math.abs(q)?"x":"y");let qe={x:0,y:0};const pt=Wt=>1/(1.5+Math.abs(Wt)/20);if(ie==="y"){if(Re.includes("top")||Re.includes("bottom"))if(Re.includes("top")&&q<0||Re.includes("bottom")&&q>0)qe.y=q;else{const Wt=q*pt(q);qe.y=Math.abs(Wt)<Math.abs(q)?Wt:q}}else if(ie==="x"&&(Re.includes("left")||Re.includes("right")))if(Re.includes("left")&&W<0||Re.includes("right")&&W>0)qe.x=W;else{const Wt=W*pt(W);qe.x=Math.abs(Wt)<Math.abs(W)?Wt:W}(Math.abs(qe.x)>0||Math.abs(qe.y)>0)&&Le(!0),(Ot=te.current)==null||Ot.style.setProperty("--swipe-amount-x",`${qe.x}px`),(me=te.current)==null||me.style.setProperty("--swipe-amount-y",`${qe.y}px`)}},Ft&&!h.jsx&&Ee!=="loading"?gt.createElement("button",{"aria-label":X,"data-disabled":ft,"data-close-button":!0,onClick:ft||!Ge?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:jo(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=ne==null?void 0:ne.close)!=null?ge:jG):null,(Ee||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[Ee])!==null||h.icon)?gt.createElement("div",{"data-icon":"",className:jo(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||P():null,h.type!=="loading"?Be:null):null,gt.createElement("div",{"data-content":"",className:jo(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},gt.createElement("div",{"data-title":"",className:jo(ae==null?void 0:ae.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?gt.createElement("div",{"data-description":"",className:jo(H,it,ae==null?void 0:ae.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),gt.isValidElement(h.cancel)?h.cancel:h.cancel&&Sb(h.cancel)?gt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||R,onClick:De=>{Sb(h.cancel)&&Ge&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,De),vt())},className:jo(ae==null?void 0:ae.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,gt.isValidElement(h.action)?h.action:h.action&&Sb(h.action)?gt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||F,onClick:De=>{Sb(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,De),!De.defaultPrevented&&vt())},className:jo(ae==null?void 0:ae.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function p3(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function ZG(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,s=i?"--mobile-offset":"--offset",o=i?UG:zG;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=o:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),n}const YG=gt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:u,mobileOffset:d,theme:h="light",richColors:m,duration:y,style:v,visibleToasts:b=BG,toastOptions:x,dir:w=p3(),gap:S=HG,icons:E,containerAriaLabel:C="Notifications"}=t,[T,j]=gt.useState([]),I=gt.useMemo(()=>Array.from(new Set([a].concat(T.filter(J=>J.position).map(J=>J.position)))),[T,a]),[R,F]=gt.useState([]),[B,H]=gt.useState(!1),[D,Z]=gt.useState(!1),[V,ue]=gt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=gt.useRef(null),ne=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=gt.useRef(null),ie=gt.useRef(!1),L=gt.useCallback(J=>{j(Q=>{var ee;return(ee=Q.find(fe=>fe.id===J.id))!=null&&ee.delete||Mi.dismiss(J.id),Q.filter(({id:fe})=>fe!==J.id)})},[]);return gt.useEffect(()=>Mi.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{j(Q=>Q.map(ee=>ee.id===J.id?{...ee,delete:!0}:ee))});return}setTimeout(()=>{pD.flushSync(()=>{j(Q=>{const ee=Q.findIndex(fe=>fe.id===J.id);return ee!==-1?[...Q.slice(0,ee),{...Q[ee],...J},...Q.slice(ee+1)]:[J,...Q]})})})}),[T]),gt.useEffect(()=>{if(h!=="system"){ue(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:Q})=>{ue(Q?"dark":"light")})}catch{J.addListener(({matches:ee})=>{try{ue(ee?"dark":"light")}catch(fe){console.error(fe)}})}},[h]),gt.useEffect(()=>{T.length<=1&&H(!1)},[T]),gt.useEffect(()=>{const J=Q=>{var ee;if(i.every(Oe=>Q[Oe]||Q.code===Oe)){var ve;H(!0),(ve=ae.current)==null||ve.focus()}Q.code==="Escape"&&(document.activeElement===ae.current||(ee=ae.current)!=null&&ee.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),gt.useEffect(()=>{if(ae.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,ie.current=!1)}},[ae.current]),gt.createElement("section",{ref:n,"aria-label":`${C} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((J,Q)=>{var ee;const[fe,ve]=J.split("-");return T.length?gt.createElement("ol",{key:J,dir:w==="auto"?p3():w,tabIndex:-1,ref:ae,className:l,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":fe,"data-lifted":B&&T.length>1&&!s,"data-x-position":ve,style:{"--front-toast-height":`${((ee=R[0])==null?void 0:ee.height)||0}px`,"--width":`${qG}px`,"--gap":`${S}px`,...v,...ZG(u,d)},onBlur:Oe=>{ie.current&&!Oe.currentTarget.contains(Oe.relatedTarget)&&(ie.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:Oe=>{Oe.target instanceof HTMLElement&&Oe.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,X.current=Oe.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{D||H(!1)},onDragEnd:()=>H(!1),onPointerDown:Oe=>{Oe.target instanceof HTMLElement&&Oe.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},T.filter(Oe=>!Oe.position&&Q===0||Oe.position===J).map((Oe,Ae)=>{var Ne,Ce;return gt.createElement(WG,{key:Oe.id,icons:E,index:Ae,toast:Oe,defaultRichColors:m,duration:(Ne=x==null?void 0:x.duration)!=null?Ne:y,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Ce=x==null?void 0:x.closeButton)!=null?Ce:o,interacting:D,position:J,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,closeButtonAriaLabel:x==null?void 0:x.closeButtonAriaLabel,removeToast:L,toasts:T.filter(Pe=>Pe.position==Oe.position),heights:R.filter(Pe=>Pe.position==Oe.position),setHeights:F,expandByDefault:s,gap:S,expanded:B,swipeDirections:t.swipeDirections})})):null}))}),Hn=Os(Ds((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n}),r!=="loading"&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await xt.loadInteractionsForConversation(n);a.sort((i,s)=>i.index-s.index),e({interactions:a,status:"idle"}),kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(s=>s.id===n);if(i!==-1){const s=a.interactions[i];let o={...s.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]));const l={...s,...r,metadata:o};"response"in r&&(l.response=r.response),"rating"in r&&(l.rating=r.rating),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},rateInteraction:async(n,r)=>{const a=t().interactions.find(i=>i.id===n);if(!a){console.error(`InteractionStore: Interaction ${n} not found for rating.`);return}t()._updateInteractionInState(n,{rating:r});try{await xt.saveInteraction({...a,rating:r})}catch(i){console.error(`InteractionStore: Failed to persist rating for ${n}`,i),t()._updateInteractionInState(n,{rating:a.rating}),Ye.error("Failed to save rating.")}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),XG="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Si=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=XG[n[e]&63];return t};const Jl=Os(Ds((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(s=>s.source==="direct"&&n.source==="direct"?s.name===n.name&&s.size===n.size:s.source==="vfs"&&n.source==="vfs"?s.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const s={id:Si(),...n};a.attachedFilesMetadata.push(s),r=!0}}),r&&kt.emit(Et.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(s=>s.id!==n),r=a.attachedFilesMetadata.length<i}),r&&kt.emit(Et.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&kt.emit(Et.ATTACHED_FILES_CHANGED,{files:[]})}}))),mD=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(mD);const kk=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return mD.has(r)};var gD="vercel.ai.error",JG=Symbol.for(gD),yD,QG=class bD extends Error{constructor({name:t,message:n,cause:r}){super(n),this[yD]=!0,this.name=t,this.cause=r}static isInstance(t){return bD.hasMarker(t,gD)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};yD=JG;var An=QG,vD="AI_APICallError",wD=`vercel.ai.error.${vD}`,eK=Symbol.for(wD),xD,_a=class extends An{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:vD,message:t,cause:o}),this[xD]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return An.hasMarker(t,wD)}};xD=eK;var _D="AI_EmptyResponseBodyError",SD=`vercel.ai.error.${_D}`,tK=Symbol.for(SD),ED,Tk=class extends An{constructor({message:t="Empty response body"}={}){super({name:_D,message:t}),this[ED]=!0}static isInstance(t){return An.hasMarker(t,SD)}};ED=tK;function y0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var CD="AI_InvalidArgumentError",kD=`vercel.ai.error.${CD}`,nK=Symbol.for(kD),TD,Ak=class extends An{constructor({message:t,cause:n,argument:r}){super({name:CD,message:t,cause:n}),this[TD]=!0,this.argument=r}static isInstance(t){return An.hasMarker(t,kD)}};TD=nK;var AD="AI_InvalidPromptError",ND=`vercel.ai.error.${AD}`,rK=Symbol.for(ND),RD,Ll=class extends An{constructor({prompt:t,message:n,cause:r}){super({name:AD,message:`Invalid prompt: ${n}`,cause:r}),this[RD]=!0,this.prompt=t}static isInstance(t){return An.hasMarker(t,ND)}};RD=rK;var ID="AI_InvalidResponseDataError",jD=`vercel.ai.error.${ID}`,aK=Symbol.for(jD),OD,_h=class extends An{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:ID,message:n}),this[OD]=!0,this.data=t}static isInstance(t){return An.hasMarker(t,jD)}};OD=aK;var DD="AI_JSONParseError",MD=`vercel.ai.error.${DD}`,iK=Symbol.for(MD),PD,hu=class extends An{constructor({text:t,cause:n}){super({name:DD,message:`JSON parsing failed: Text: ${t}.
Error message: ${y0(n)}`,cause:n}),this[PD]=!0,this.text=t}static isInstance(t){return An.hasMarker(t,MD)}};PD=iK;var FD="AI_LoadAPIKeyError",LD=`vercel.ai.error.${FD}`,sK=Symbol.for(LD),$D,Eb=class extends An{constructor({message:t}){super({name:FD,message:t}),this[$D]=!0}static isInstance(t){return An.hasMarker(t,LD)}};$D=sK;var BD="AI_TooManyEmbeddingValuesForCallError",zD=`vercel.ai.error.${BD}`,oK=Symbol.for(zD),UD,Nk=class extends An{constructor(t){super({name:BD,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[UD]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return An.hasMarker(t,zD)}};UD=oK;var qD="AI_TypeValidationError",HD=`vercel.ai.error.${qD}`,lK=Symbol.for(HD),VD,cK=class tC extends An{constructor({value:t,cause:n}){super({name:qD,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${y0(n)}`,cause:n}),this[VD]=!0,this.value=t}static isInstance(t){return An.hasMarker(t,HD)}static wrap({value:t,cause:n}){return tC.isInstance(n)&&n.value===t?n:new tC({value:t,cause:n})}};VD=lK;var pu=cK,GD="AI_UnsupportedFunctionalityError",KD=`vercel.ai.error.${GD}`,uK=Symbol.for(KD),WD,Ar=class extends An{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:GD,message:n}),this[WD]=!0,this.functionality=t}static isInstance(t){return An.hasMarker(t,KD)}};WD=uK;let dK=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Rk={},ix={};ix.byteLength=pK;ix.toByteArray=gK;ix.fromByteArray=vK;var Bo=[],Es=[],fK=typeof Uint8Array<"u"?Uint8Array:Array,IS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ah=0,hK=IS.length;ah<hK;++ah)Bo[ah]=IS[ah],Es[IS.charCodeAt(ah)]=ah;Es[45]=62;Es[95]=63;function ZD(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function pK(e){var t=ZD(e),n=t[0],r=t[1];return(n+r)*3/4-r}function mK(e,t,n){return(t+n)*3/4-n}function gK(e){var t,n=ZD(e),r=n[0],a=n[1],i=new fK(mK(e,r,a)),s=0,o=a>0?r-4:r,l;for(l=0;l<o;l+=4)t=Es[e.charCodeAt(l)]<<18|Es[e.charCodeAt(l+1)]<<12|Es[e.charCodeAt(l+2)]<<6|Es[e.charCodeAt(l+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return a===2&&(t=Es[e.charCodeAt(l)]<<2|Es[e.charCodeAt(l+1)]>>4,i[s++]=t&255),a===1&&(t=Es[e.charCodeAt(l)]<<10|Es[e.charCodeAt(l+1)]<<4|Es[e.charCodeAt(l+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function yK(e){return Bo[e>>18&63]+Bo[e>>12&63]+Bo[e>>6&63]+Bo[e&63]}function bK(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(yK(r));return a.join("")}function vK(e){for(var t,n=e.length,r=n%3,a=[],i=16383,s=0,o=n-r;s<o;s+=i)a.push(bK(e,s,s+i>o?o:s+i));return r===1?(t=e[n-1],a.push(Bo[t>>2]+Bo[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(Bo[t>>10]+Bo[t>>4&63]+Bo[t<<2&63]+"=")),a.join("")}var Ik={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ik.read=function(e,t,n,r,a){var i,s,o=a*8-r-1,l=(1<<o)-1,u=l>>1,d=-7,h=n?a-1:0,m=n?-1:1,y=e[t+h];for(h+=m,i=y&(1<<-d)-1,y>>=-d,d+=o;d>0;i=i*256+e[t+h],h+=m,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=r;d>0;s=s*256+e[t+h],h+=m,d-=8);if(i===0)i=1-u;else{if(i===l)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-u}return(y?-1:1)*s*Math.pow(2,i-r)};Ik.write=function(e,t,n,r,a,i){var s,o,l,u=i*8-a-1,d=(1<<u)-1,h=d>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=m/l:t+=m*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*l-1)*Math.pow(2,a),s=s+h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),s=0));a>=8;e[n+y]=o&255,y+=v,o/=256,a-=8);for(s=s<<a|o,u+=a;u>0;e[n+y]=s&255,y+=v,s/=256,u-=8);e[n+y-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=ix,n=Ik,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:s,SharedArrayBuffer:o}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ye=new i(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,i.prototype),Object.setPrototypeOf(ye,O),ye.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(ye){if(ye>a)throw new RangeError('The value "'+ye+'" is invalid for option "size"');const O=new i(ye);return Object.setPrototypeOf(O,d.prototype),O}function d(ye,O,K){if(typeof ye=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ye)}return h(ye,O,K)}d.poolSize=8192;function h(ye,O,K){if(typeof ye=="string")return b(ye,O);if(s.isView(ye))return w(ye);if(ye==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye);if(it(ye,s)||ye&&it(ye.buffer,s)||typeof o<"u"&&(it(ye,o)||ye&&it(ye.buffer,o)))return S(ye,O,K);if(typeof ye=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=ye.valueOf&&ye.valueOf();if(he!=null&&he!==ye)return d.from(he,O,K);const je=E(ye);if(je)return je;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ye[Symbol.toPrimitive]=="function")return d.from(ye[Symbol.toPrimitive]("string"),O,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye)}d.from=function(ye,O,K){return h(ye,O,K)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function m(ye){if(typeof ye!="number")throw new TypeError('"size" argument must be of type number');if(ye<0)throw new RangeError('The value "'+ye+'" is invalid for option "size"')}function y(ye,O,K){return m(ye),ye<=0?u(ye):O!==void 0?typeof K=="string"?u(ye).fill(O,K):u(ye).fill(O):u(ye)}d.alloc=function(ye,O,K){return y(ye,O,K)};function v(ye){return m(ye),u(ye<0?0:C(ye)|0)}d.allocUnsafe=function(ye){return v(ye)},d.allocUnsafeSlow=function(ye){return v(ye)};function b(ye,O){if((typeof O!="string"||O==="")&&(O="utf8"),!d.isEncoding(O))throw new TypeError("Unknown encoding: "+O);const K=j(ye,O)|0;let he=u(K);const je=he.write(ye,O);return je!==K&&(he=he.slice(0,je)),he}function x(ye){const O=ye.length<0?0:C(ye.length)|0,K=u(O);for(let he=0;he<O;he+=1)K[he]=ye[he]&255;return K}function w(ye){if(it(ye,i)){const O=new i(ye);return S(O.buffer,O.byteOffset,O.byteLength)}return x(ye)}function S(ye,O,K){if(O<0||ye.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<O+(K||0))throw new RangeError('"length" is outside of buffer bounds');let he;return O===void 0&&K===void 0?he=new i(ye):K===void 0?he=new i(ye,O):he=new i(ye,O,K),Object.setPrototypeOf(he,d.prototype),he}function E(ye){if(d.isBuffer(ye)){const O=C(ye.length)|0,K=u(O);return K.length===0||ye.copy(K,0,0,O),K}if(ye.length!==void 0)return typeof ye.length!="number"||St(ye.length)?u(0):x(ye);if(ye.type==="Buffer"&&Array.isArray(ye.data))return x(ye.data)}function C(ye){if(ye>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ye|0}function T(ye){return+ye!=ye&&(ye=0),d.alloc(+ye)}d.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==d.prototype},d.compare=function(O,K){if(it(O,i)&&(O=d.from(O,O.offset,O.byteLength)),it(K,i)&&(K=d.from(K,K.offset,K.byteLength)),!d.isBuffer(O)||!d.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===K)return 0;let he=O.length,je=K.length;for(let be=0,ke=Math.min(he,je);be<ke;++be)if(O[be]!==K[be]){he=O[be],je=K[be];break}return he<je?-1:je<he?1:0},d.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(O,K){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return d.alloc(0);let he;if(K===void 0)for(K=0,he=0;he<O.length;++he)K+=O[he].length;const je=d.allocUnsafe(K);let be=0;for(he=0;he<O.length;++he){let ke=O[he];if(it(ke,i))be+ke.length>je.length?(d.isBuffer(ke)||(ke=d.from(ke)),ke.copy(je,be)):i.prototype.set.call(je,ke,be);else if(d.isBuffer(ke))ke.copy(je,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=ke.length}return je};function j(ye,O){if(d.isBuffer(ye))return ye.length;if(s.isView(ye)||it(ye,s))return ye.byteLength;if(typeof ye!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ye);const K=ye.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&K===0)return 0;let je=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return xe(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return Ge(ye).length;default:if(je)return he?-1:xe(ye).length;O=(""+O).toLowerCase(),je=!0}}d.byteLength=j;function I(ye,O,K){let he=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,O>>>=0,K<=O))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return Q(this,O,K);case"utf8":case"utf-8":return ne(this,O,K);case"ascii":return L(this,O,K);case"latin1":case"binary":return J(this,O,K);case"base64":return ae(this,O,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,O,K);default:if(he)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),he=!0}}d.prototype._isBuffer=!0;function R(ye,O,K){const he=ye[O];ye[O]=ye[K],ye[K]=he}d.prototype.swap16=function(){const O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let K=0;K<O;K+=2)R(this,K,K+1);return this},d.prototype.swap32=function(){const O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let K=0;K<O;K+=4)R(this,K,K+3),R(this,K+1,K+2);return this},d.prototype.swap64=function(){const O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let K=0;K<O;K+=8)R(this,K,K+7),R(this,K+1,K+6),R(this,K+2,K+5),R(this,K+3,K+4);return this},d.prototype.toString=function(){const O=this.length;return O===0?"":arguments.length===0?ne(this,0,O):I.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(O){if(!d.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:d.compare(this,O)===0},d.prototype.inspect=function(){let O="";const K=e.INSPECT_MAX_BYTES;return O=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(O+=" ... "),"<Buffer "+O+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(O,K,he,je,be){if(it(O,i)&&(O=d.from(O,O.offset,O.byteLength)),!d.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(K===void 0&&(K=0),he===void 0&&(he=O?O.length:0),je===void 0&&(je=0),be===void 0&&(be=this.length),K<0||he>O.length||je<0||be>this.length)throw new RangeError("out of range index");if(je>=be&&K>=he)return 0;if(je>=be)return-1;if(K>=he)return 1;if(K>>>=0,he>>>=0,je>>>=0,be>>>=0,this===O)return 0;let ke=be-je,le=he-K;const ft=Math.min(ke,le),vt=this.slice(je,be),P=O.slice(K,he);for(let Be=0;Be<ft;++Be)if(vt[Be]!==P[Be]){ke=vt[Be],le=P[Be];break}return ke<le?-1:le<ke?1:0};function F(ye,O,K,he,je){if(ye.length===0)return-1;if(typeof K=="string"?(he=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,St(K)&&(K=je?0:ye.length-1),K<0&&(K=ye.length+K),K>=ye.length){if(je)return-1;K=ye.length-1}else if(K<0)if(je)K=0;else return-1;if(typeof O=="string"&&(O=d.from(O,he)),d.isBuffer(O))return O.length===0?-1:B(ye,O,K,he,je);if(typeof O=="number")return O=O&255,typeof i.prototype.indexOf=="function"?je?i.prototype.indexOf.call(ye,O,K):i.prototype.lastIndexOf.call(ye,O,K):B(ye,[O],K,he,je);throw new TypeError("val must be string, number or Buffer")}function B(ye,O,K,he,je){let be=1,ke=ye.length,le=O.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(ye.length<2||O.length<2)return-1;be=2,ke/=2,le/=2,K/=2}function ft(P,Be){return be===1?P[Be]:P.readUInt16BE(Be*be)}let vt;if(je){let P=-1;for(vt=K;vt<ke;vt++)if(ft(ye,vt)===ft(O,P===-1?0:vt-P)){if(P===-1&&(P=vt),vt-P+1===le)return P*be}else P!==-1&&(vt-=vt-P),P=-1}else for(K+le>ke&&(K=ke-le),vt=K;vt>=0;vt--){let P=!0;for(let Be=0;Be<le;Be++)if(ft(ye,vt+Be)!==ft(O,Be)){P=!1;break}if(P)return vt}return-1}d.prototype.includes=function(O,K,he){return this.indexOf(O,K,he)!==-1},d.prototype.indexOf=function(O,K,he){return F(this,O,K,he,!0)},d.prototype.lastIndexOf=function(O,K,he){return F(this,O,K,he,!1)};function H(ye,O,K,he){K=Number(K)||0;const je=ye.length-K;he?(he=Number(he),he>je&&(he=je)):he=je;const be=O.length;he>be/2&&(he=be/2);let ke;for(ke=0;ke<he;++ke){const le=parseInt(O.substr(ke*2,2),16);if(St(le))return ke;ye[K+ke]=le}return ke}function D(ye,O,K,he){return Nt(xe(O,ye.length-K),ye,K,he)}function Z(ye,O,K,he){return Nt(Fe(O),ye,K,he)}function V(ye,O,K,he){return Nt(Ge(O),ye,K,he)}function ue(ye,O,K,he){return Nt(Ee(O,ye.length-K),ye,K,he)}d.prototype.write=function(O,K,he,je){if(K===void 0)je="utf8",he=this.length,K=0;else if(he===void 0&&typeof K=="string")je=K,he=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(he)?(he=he>>>0,je===void 0&&(je="utf8")):(je=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-K;if((he===void 0||he>be)&&(he=be),O.length>0&&(he<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");je||(je="utf8");let ke=!1;for(;;)switch(je){case"hex":return H(this,O,K,he);case"utf8":case"utf-8":return D(this,O,K,he);case"ascii":case"latin1":case"binary":return Z(this,O,K,he);case"base64":return V(this,O,K,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,O,K,he);default:if(ke)throw new TypeError("Unknown encoding: "+je);je=(""+je).toLowerCase(),ke=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(ye,O,K){return O===0&&K===ye.length?t.fromByteArray(ye):t.fromByteArray(ye.slice(O,K))}function ne(ye,O,K){K=Math.min(ye.length,K);const he=[];let je=O;for(;je<K;){const be=ye[je];let ke=null,le=be>239?4:be>223?3:be>191?2:1;if(je+le<=K){let ft,vt,P,Be;switch(le){case 1:be<128&&(ke=be);break;case 2:ft=ye[je+1],(ft&192)===128&&(Be=(be&31)<<6|ft&63,Be>127&&(ke=Be));break;case 3:ft=ye[je+1],vt=ye[je+2],(ft&192)===128&&(vt&192)===128&&(Be=(be&15)<<12|(ft&63)<<6|vt&63,Be>2047&&(Be<55296||Be>57343)&&(ke=Be));break;case 4:ft=ye[je+1],vt=ye[je+2],P=ye[je+3],(ft&192)===128&&(vt&192)===128&&(P&192)===128&&(Be=(be&15)<<18|(ft&63)<<12|(vt&63)<<6|P&63,Be>65535&&Be<1114112&&(ke=Be))}}ke===null?(ke=65533,le=1):ke>65535&&(ke-=65536,he.push(ke>>>10&1023|55296),ke=56320|ke&1023),he.push(ke),je+=le}return ie(he)}const X=4096;function ie(ye){const O=ye.length;if(O<=X)return String.fromCharCode.apply(String,ye);let K="",he=0;for(;he<O;)K+=String.fromCharCode.apply(String,ye.slice(he,he+=X));return K}function L(ye,O,K){let he="";K=Math.min(ye.length,K);for(let je=O;je<K;++je)he+=String.fromCharCode(ye[je]&127);return he}function J(ye,O,K){let he="";K=Math.min(ye.length,K);for(let je=O;je<K;++je)he+=String.fromCharCode(ye[je]);return he}function Q(ye,O,K){const he=ye.length;(!O||O<0)&&(O=0),(!K||K<0||K>he)&&(K=he);let je="";for(let be=O;be<K;++be)je+=Ft[ye[be]];return je}function ee(ye,O,K){const he=ye.slice(O,K);let je="";for(let be=0;be<he.length-1;be+=2)je+=String.fromCharCode(he[be]+he[be+1]*256);return je}d.prototype.slice=function(O,K){const he=this.length;O=~~O,K=K===void 0?he:~~K,O<0?(O+=he,O<0&&(O=0)):O>he&&(O=he),K<0?(K+=he,K<0&&(K=0)):K>he&&(K=he),K<O&&(K=O);const je=this.subarray(O,K);return Object.setPrototypeOf(je,d.prototype),je};function fe(ye,O,K){if(ye%1!==0||ye<0)throw new RangeError("offset is not uint");if(ye+O>K)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(O,K,he){O=O>>>0,K=K>>>0,he||fe(O,K,this.length);let je=this[O],be=1,ke=0;for(;++ke<K&&(be*=256);)je+=this[O+ke]*be;return je},d.prototype.readUintBE=d.prototype.readUIntBE=function(O,K,he){O=O>>>0,K=K>>>0,he||fe(O,K,this.length);let je=this[O+--K],be=1;for(;K>0&&(be*=256);)je+=this[O+--K]*be;return je},d.prototype.readUint8=d.prototype.readUInt8=function(O,K){return O=O>>>0,K||fe(O,1,this.length),this[O]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(O,K){return O=O>>>0,K||fe(O,2,this.length),this[O]|this[O+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(O,K){return O=O>>>0,K||fe(O,2,this.length),this[O]<<8|this[O+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},d.prototype.readBigUInt64LE=Dt(function(O){O=O>>>0,Te(O,"offset");const K=this[O],he=this[O+7];(K===void 0||he===void 0)&&de(O,this.length-8);const je=K+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24,be=this[++O]+this[++O]*2**8+this[++O]*2**16+he*2**24;return BigInt(je)+(BigInt(be)<<BigInt(32))}),d.prototype.readBigUInt64BE=Dt(function(O){O=O>>>0,Te(O,"offset");const K=this[O],he=this[O+7];(K===void 0||he===void 0)&&de(O,this.length-8);const je=K*2**24+this[++O]*2**16+this[++O]*2**8+this[++O],be=this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+he;return(BigInt(je)<<BigInt(32))+BigInt(be)}),d.prototype.readIntLE=function(O,K,he){O=O>>>0,K=K>>>0,he||fe(O,K,this.length);let je=this[O],be=1,ke=0;for(;++ke<K&&(be*=256);)je+=this[O+ke]*be;return be*=128,je>=be&&(je-=Math.pow(2,8*K)),je},d.prototype.readIntBE=function(O,K,he){O=O>>>0,K=K>>>0,he||fe(O,K,this.length);let je=K,be=1,ke=this[O+--je];for(;je>0&&(be*=256);)ke+=this[O+--je]*be;return be*=128,ke>=be&&(ke-=Math.pow(2,8*K)),ke},d.prototype.readInt8=function(O,K){return O=O>>>0,K||fe(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},d.prototype.readInt16LE=function(O,K){O=O>>>0,K||fe(O,2,this.length);const he=this[O]|this[O+1]<<8;return he&32768?he|4294901760:he},d.prototype.readInt16BE=function(O,K){O=O>>>0,K||fe(O,2,this.length);const he=this[O+1]|this[O]<<8;return he&32768?he|4294901760:he},d.prototype.readInt32LE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},d.prototype.readInt32BE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},d.prototype.readBigInt64LE=Dt(function(O){O=O>>>0,Te(O,"offset");const K=this[O],he=this[O+7];(K===void 0||he===void 0)&&de(O,this.length-8);const je=this[O+4]+this[O+5]*2**8+this[O+6]*2**16+(he<<24);return(BigInt(je)<<BigInt(32))+BigInt(K+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24)}),d.prototype.readBigInt64BE=Dt(function(O){O=O>>>0,Te(O,"offset");const K=this[O],he=this[O+7];(K===void 0||he===void 0)&&de(O,this.length-8);const je=(K<<24)+this[++O]*2**16+this[++O]*2**8+this[++O];return(BigInt(je)<<BigInt(32))+BigInt(this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+he)}),d.prototype.readFloatLE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),n.read(this,O,!0,23,4)},d.prototype.readFloatBE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),n.read(this,O,!1,23,4)},d.prototype.readDoubleLE=function(O,K){return O=O>>>0,K||fe(O,8,this.length),n.read(this,O,!0,52,8)},d.prototype.readDoubleBE=function(O,K){return O=O>>>0,K||fe(O,8,this.length),n.read(this,O,!1,52,8)};function ve(ye,O,K,he,je,be){if(!d.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>je||O<be)throw new RangeError('"value" argument is out of bounds');if(K+he>ye.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(O,K,he,je){if(O=+O,K=K>>>0,he=he>>>0,!je){const le=Math.pow(2,8*he)-1;ve(this,O,K,he,le,0)}let be=1,ke=0;for(this[K]=O&255;++ke<he&&(be*=256);)this[K+ke]=O/be&255;return K+he},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(O,K,he,je){if(O=+O,K=K>>>0,he=he>>>0,!je){const le=Math.pow(2,8*he)-1;ve(this,O,K,he,le,0)}let be=he-1,ke=1;for(this[K+be]=O&255;--be>=0&&(ke*=256);)this[K+be]=O/ke&255;return K+he},d.prototype.writeUint8=d.prototype.writeUInt8=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,1,255,0),this[K]=O&255,K+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,2,65535,0),this[K]=O&255,this[K+1]=O>>>8,K+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,2,65535,0),this[K]=O>>>8,this[K+1]=O&255,K+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,4,4294967295,0),this[K+3]=O>>>24,this[K+2]=O>>>16,this[K+1]=O>>>8,this[K]=O&255,K+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,4,4294967295,0),this[K]=O>>>24,this[K+1]=O>>>16,this[K+2]=O>>>8,this[K+3]=O&255,K+4};function Oe(ye,O,K,he,je){Se(O,he,je,ye,K,7);let be=Number(O&BigInt(4294967295));ye[K++]=be,be=be>>8,ye[K++]=be,be=be>>8,ye[K++]=be,be=be>>8,ye[K++]=be;let ke=Number(O>>BigInt(32)&BigInt(4294967295));return ye[K++]=ke,ke=ke>>8,ye[K++]=ke,ke=ke>>8,ye[K++]=ke,ke=ke>>8,ye[K++]=ke,K}function Ae(ye,O,K,he,je){Se(O,he,je,ye,K,7);let be=Number(O&BigInt(4294967295));ye[K+7]=be,be=be>>8,ye[K+6]=be,be=be>>8,ye[K+5]=be,be=be>>8,ye[K+4]=be;let ke=Number(O>>BigInt(32)&BigInt(4294967295));return ye[K+3]=ke,ke=ke>>8,ye[K+2]=ke,ke=ke>>8,ye[K+1]=ke,ke=ke>>8,ye[K]=ke,K+8}d.prototype.writeBigUInt64LE=Dt(function(O,K=0){return Oe(this,O,K,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Dt(function(O,K=0){return Ae(this,O,K,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(O,K,he,je){if(O=+O,K=K>>>0,!je){const ft=Math.pow(2,8*he-1);ve(this,O,K,he,ft-1,-ft)}let be=0,ke=1,le=0;for(this[K]=O&255;++be<he&&(ke*=256);)O<0&&le===0&&this[K+be-1]!==0&&(le=1),this[K+be]=(O/ke>>0)-le&255;return K+he},d.prototype.writeIntBE=function(O,K,he,je){if(O=+O,K=K>>>0,!je){const ft=Math.pow(2,8*he-1);ve(this,O,K,he,ft-1,-ft)}let be=he-1,ke=1,le=0;for(this[K+be]=O&255;--be>=0&&(ke*=256);)O<0&&le===0&&this[K+be+1]!==0&&(le=1),this[K+be]=(O/ke>>0)-le&255;return K+he},d.prototype.writeInt8=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,1,127,-128),O<0&&(O=255+O+1),this[K]=O&255,K+1},d.prototype.writeInt16LE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,2,32767,-32768),this[K]=O&255,this[K+1]=O>>>8,K+2},d.prototype.writeInt16BE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,2,32767,-32768),this[K]=O>>>8,this[K+1]=O&255,K+2},d.prototype.writeInt32LE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,4,2147483647,-2147483648),this[K]=O&255,this[K+1]=O>>>8,this[K+2]=O>>>16,this[K+3]=O>>>24,K+4},d.prototype.writeInt32BE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[K]=O>>>24,this[K+1]=O>>>16,this[K+2]=O>>>8,this[K+3]=O&255,K+4},d.prototype.writeBigInt64LE=Dt(function(O,K=0){return Oe(this,O,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Dt(function(O,K=0){return Ae(this,O,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(ye,O,K,he,je,be){if(K+he>ye.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Ce(ye,O,K,he,je){return O=+O,K=K>>>0,je||Ne(ye,O,K,4),n.write(ye,O,K,he,23,4),K+4}d.prototype.writeFloatLE=function(O,K,he){return Ce(this,O,K,!0,he)},d.prototype.writeFloatBE=function(O,K,he){return Ce(this,O,K,!1,he)};function Pe(ye,O,K,he,je){return O=+O,K=K>>>0,je||Ne(ye,O,K,8),n.write(ye,O,K,he,52,8),K+8}d.prototype.writeDoubleLE=function(O,K,he){return Pe(this,O,K,!0,he)},d.prototype.writeDoubleBE=function(O,K,he){return Pe(this,O,K,!1,he)},d.prototype.copy=function(O,K,he,je){if(!d.isBuffer(O))throw new TypeError("argument should be a Buffer");if(he||(he=0),!je&&je!==0&&(je=this.length),K>=O.length&&(K=O.length),K||(K=0),je>0&&je<he&&(je=he),je===he||O.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(je<0)throw new RangeError("sourceEnd out of bounds");je>this.length&&(je=this.length),O.length-K<je-he&&(je=O.length-K+he);const be=je-he;return this===O&&typeof i.prototype.copyWithin=="function"?this.copyWithin(K,he,je):i.prototype.set.call(O,this.subarray(he,je),K),be},d.prototype.fill=function(O,K,he,je){if(typeof O=="string"){if(typeof K=="string"?(je=K,K=0,he=this.length):typeof he=="string"&&(je=he,he=this.length),je!==void 0&&typeof je!="string")throw new TypeError("encoding must be a string");if(typeof je=="string"&&!d.isEncoding(je))throw new TypeError("Unknown encoding: "+je);if(O.length===1){const ke=O.charCodeAt(0);(je==="utf8"&&ke<128||je==="latin1")&&(O=ke)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(K<0||this.length<K||this.length<he)throw new RangeError("Out of range index");if(he<=K)return this;K=K>>>0,he=he===void 0?this.length:he>>>0,O||(O=0);let be;if(typeof O=="number")for(be=K;be<he;++be)this[be]=O;else{const ke=d.isBuffer(O)?O:d.from(O,je),le=ke.length;if(le===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(be=0;be<he-K;++be)this[be+K]=ke[be%le]}return this};const Qe={};function Le(ye,O,K){Qe[ye]=class extends K{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ye}]`,this.stack,delete this.name}get code(){return ye}set code(je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:je,writable:!0})}toString(){return`${this.name} [${ye}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(ye){return ye?`${ye} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(ye,O){return`The "${ye}" argument must be of type number. Received type ${typeof O}`},TypeError),Le("ERR_OUT_OF_RANGE",function(ye,O,K){let he=`The value of "${ye}" is out of range.`,je=K;return Number.isInteger(K)&&Math.abs(K)>2**32?je=Ie(String(K)):typeof K=="bigint"&&(je=String(K),(K>BigInt(2)**BigInt(32)||K<-(BigInt(2)**BigInt(32)))&&(je=Ie(je)),je+="n"),he+=` It must be ${O}. Received ${je}`,he},RangeError);function Ie(ye){let O="",K=ye.length;const he=ye[0]==="-"?1:0;for(;K>=he+4;K-=3)O=`_${ye.slice(K-3,K)}${O}`;return`${ye.slice(0,K)}${O}`}function z(ye,O,K){Te(O,"offset"),(ye[O]===void 0||ye[O+K]===void 0)&&de(O,ye.length-(K+1))}function Se(ye,O,K,he,je,be){if(ye>K||ye<O){const ke=typeof O=="bigint"?"n":"";let le;throw O===0||O===BigInt(0)?le=`>= 0${ke} and < 2${ke} ** ${(be+1)*8}${ke}`:le=`>= -(2${ke} ** ${(be+1)*8-1}${ke}) and < 2 ** ${(be+1)*8-1}${ke}`,new Qe.ERR_OUT_OF_RANGE("value",le,ye)}z(he,je,be)}function Te(ye,O){if(typeof ye!="number")throw new Qe.ERR_INVALID_ARG_TYPE(O,"number",ye)}function de(ye,O,K){throw Math.floor(ye)!==ye?(Te(ye,K),new Qe.ERR_OUT_OF_RANGE("offset","an integer",ye)):O<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${O}`,ye)}const se=/[^+/0-9A-Za-z-_]/g;function te(ye){if(ye=ye.split("=")[0],ye=ye.trim().replace(se,""),ye.length<2)return"";for(;ye.length%4!==0;)ye=ye+"=";return ye}function xe(ye,O){O=O||1/0;let K;const he=ye.length;let je=null;const be=[];for(let ke=0;ke<he;++ke){if(K=ye.charCodeAt(ke),K>55295&&K<57344){if(!je){if(K>56319){(O-=3)>-1&&be.push(239,191,189);continue}else if(ke+1===he){(O-=3)>-1&&be.push(239,191,189);continue}je=K;continue}if(K<56320){(O-=3)>-1&&be.push(239,191,189),je=K;continue}K=(je-55296<<10|K-56320)+65536}else je&&(O-=3)>-1&&be.push(239,191,189);if(je=null,K<128){if((O-=1)<0)break;be.push(K)}else if(K<2048){if((O-=2)<0)break;be.push(K>>6|192,K&63|128)}else if(K<65536){if((O-=3)<0)break;be.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if((O-=4)<0)break;be.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return be}function Fe(ye){const O=[];for(let K=0;K<ye.length;++K)O.push(ye.charCodeAt(K)&255);return O}function Ee(ye,O){let K,he,je;const be=[];for(let ke=0;ke<ye.length&&!((O-=2)<0);++ke)K=ye.charCodeAt(ke),he=K>>8,je=K%256,be.push(je),be.push(he);return be}function Ge(ye){return t.toByteArray(te(ye))}function Nt(ye,O,K,he){let je;for(je=0;je<he&&!(je+K>=O.length||je>=ye.length);++je)O[je+K]=ye[je];return je}function it(ye,O){return ye instanceof O||ye!=null&&ye.constructor!=null&&ye.constructor.name!=null&&ye.constructor.name===O.name}function St(ye){return ye!==ye}const Ft=function(){const ye="0123456789abcdef",O=new Array(256);for(let K=0;K<16;++K){const he=K*16;for(let je=0;je<16;++je)O[he+je]=ye[K]+ye[je]}return O}();function Dt(ye){return typeof BigInt>"u"?Zt:ye}function Zt(){throw new Error("BigInt not supported")}})(Rk);const Jt=Rk.Buffer,Fr=Rk.Buffer;var pd={exports:{}},m3;function wK(){if(m3)return pd.exports;m3=1;const e=typeof Jt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),e&&Jt.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const h=u&&u.protoAction||"error",m=u&&u.constructorAction||"error";if(h==="ignore"&&m==="ignore")return d;if(h!=="ignore"&&m!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return d}else if(h!=="ignore"&&m==="ignore"){if(t.test(o)===!1)return d}else if(n.test(o)===!1)return d;return a(d,{protoAction:h,constructorAction:m,safe:u&&u.safe})}function a(o,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let h=[o];for(;h.length;){const m=h;h=[];for(const y of m){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"constructor")&&Object.prototype.hasOwnProperty.call(y.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.constructor}for(const v in y){const b=y[v];b&&typeof b=="object"&&h.push(b)}}}return o}function i(o,l,u){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,u)}finally{Error.stackTraceLimit=d}}function s(o,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return pd.exports=i,pd.exports.default=i,pd.exports.parse=i,pd.exports.safeParse=s,pd.exports.scan=a,pd.exports}var xK=wK();const fo=ui(xK);var _K={};function el(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function SK(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function EK(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function CK(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,y=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=kK(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function kK(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function b0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Yd=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=dK(n,t);if(e==null)return a;if(n.includes(r))throw new Ak({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},zo=Yd();function TK(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function AK(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Cv(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function NK({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Eb({message:`${r} API key must be a string.`});if(typeof ea>"u")throw new Eb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=_K[t],e==null)throw new Eb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Eb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Uv=Symbol.for("vercel.ai.validator");function RK(e){return{[Uv]:!0,validate:e}}function IK(e){return typeof e=="object"&&e!==null&&Uv in e&&e[Uv]===!0&&"validate"in e}function jK(e){return IK(e)?e:OK(e)}function OK(e){return RK(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function DK({value:e,schema:t}){const n=ip({value:e,schema:t});if(!n.success)throw pu.wrap({value:e,cause:n.error});return n.value}function ip({value:e,schema:t}){const n=jK(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:pu.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:pu.wrap({value:e,cause:r})}}}function MK({text:e,schema:t}){try{const n=fo.parse(e);return t==null?n:DK({value:n,schema:t})}catch(n){throw hu.isInstance(n)||pu.isInstance(n)?n:new hu({text:e,cause:n})}}function Pd({text:e,schema:t}){try{const n=fo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=ip({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:hu.isInstance(n)?n:new hu({text:e,cause:n})}}}function g3(e){try{return fo.parse(e),!0}catch{return!1}}function PK({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=ip({value:t[e],schema:n});if(!r.success)throw new Ak({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var FK=()=>globalThis.fetch,ro=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>LK({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),LK=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=FK()})=>{try{const o=await s(e,{method:"POST",headers:AK(t),body:n.content,signal:i}),l=b0(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw Cv(d)||_a.isInstance(d)?d:new _a({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Cv(u)||_a.isInstance(u))?u:new _a({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(Cv(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new _a({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},YD=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=b0(r);if(s.trim()==="")return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=MK({text:s,schema:e});return{responseHeaders:o,value:new _a({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},jk=e=>async({response:t})=>{const n=b0(t);if(t.body==null)throw new Tk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(CK()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Pd({text:r,schema:e}))}}))}},Xd=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Pd({text:a,schema:e}),s=b0(t);if(!i.success)throw new _a({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:$K,atob:BK}=globalThis;function XD(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=BK(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function jh(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return $K(t)}function JD(e){return e==null?void 0:e.replace(/\/$/,"")}var ar;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},e.find=(a,i)=>{for(const s of a)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ar||(ar={}));var nC;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(nC||(nC={}));const an=ar.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Bl=e=>{switch(typeof e){case"undefined":return an.undefined;case"string":return an.string;case"number":return isNaN(e)?an.nan:an.number;case"boolean":return an.boolean;case"function":return an.function;case"bigint":return an.bigint;case"symbol":return an.symbol;case"object":return Array.isArray(e)?an.array:e===null?an.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?an.promise:typeof Map<"u"&&e instanceof Map?an.map:typeof Set<"u"&&e instanceof Set?an.set:typeof Date<"u"&&e instanceof Date?an.date:an.object;default:return an.unknown}},$t=ar.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),zK=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ss extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(s))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof ss))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ar.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ss.create=e=>new ss(e);const Oh=(e,t)=>{let n;switch(e.code){case $t.invalid_type:e.received===an.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case $t.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ar.jsonStringifyReplacer)}`;break;case $t.unrecognized_keys:n=`Unrecognized key(s) in object: ${ar.joinValues(e.keys,", ")}`;break;case $t.invalid_union:n="Invalid input";break;case $t.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ar.joinValues(e.options)}`;break;case $t.invalid_enum_value:n=`Invalid enum value. Expected ${ar.joinValues(e.options)}, received '${e.received}'`;break;case $t.invalid_arguments:n="Invalid function arguments";break;case $t.invalid_return_type:n="Invalid function return type";break;case $t.invalid_date:n="Invalid date";break;case $t.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ar.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case $t.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case $t.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case $t.custom:n="Invalid input";break;case $t.invalid_intersection_types:n="Intersection results could not be merged";break;case $t.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case $t.not_finite:n="Number must be finite";break;default:n=t.defaultError,ar.assertNever(e)}return{message:n}};let QD=Oh;function UK(e){QD=e}function qv(){return QD}const Hv=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},qK=[];function tn(e,t){const n=qv(),r=Hv({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Oh?void 0:Oh].filter(a=>!!a)});e.common.issues.push(r)}class si{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return En;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,s=await a.value;r.push({key:i,value:s})}return si.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return En;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:t.value,value:r}}}const En=Object.freeze({status:"aborted"}),gh=e=>({status:"dirty",value:e}),Ei=e=>({status:"valid",value:e}),rC=e=>e.status==="aborted",aC=e=>e.status==="dirty",Fd=e=>e.status==="valid",hg=e=>typeof Promise<"u"&&e instanceof Promise;function Vv(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function eM(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var un;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(un||(un={}));var Ym,Xm;class tl{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const y3=(e,t)=>{if(Fd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ss(e.common.issues);return this._error=n,this._error}}};function Pn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,o)=>{var l,u;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:o.defaultError}},description:a}}class $n{get description(){return this._def.description}_getType(t){return Bl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Bl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new si,ctx:{common:t.parent.common,data:t.data,parsedType:Bl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(hg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Bl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return y3(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Bl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return Fd(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>Fd(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Bl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(hg(a)?a:Promise.resolve(a));return y3(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const s=t(a),o=()=>i.addIssue({code:$t.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new ao({schema:this,typeName:Vt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Qs.create(this,this._def)}nullable(){return bu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Js.create(this)}promise(){return Mh.create(this,this._def)}or(t){return yg.create([this,t],this._def)}and(t){return bg.create(this,t,this._def)}transform(t){return new ao({...Pn(this._def),schema:this,typeName:Vt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Sg({...Pn(this._def),innerType:this,defaultValue:n,typeName:Vt.ZodDefault})}brand(){return new Ok({typeName:Vt.ZodBranded,type:this,...Pn(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Eg({...Pn(this._def),innerType:this,catchValue:n,typeName:Vt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return v0.create(this,t)}readonly(){return Cg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const HK=/^c[^\s-]{8,}$/i,VK=/^[0-9a-z]+$/,GK=/^[0-9A-HJKMNP-TV-Z]{26}$/i,KK=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,WK=/^[a-z0-9_-]{21}$/i,ZK=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,YK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,XK=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,JK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let jS;const QK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rW=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,aW=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,tM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",iW=new RegExp(`^${tM}$`);function nM(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function sW(e){return new RegExp(`^${nM(e)}$`)}function rM(e){let t=`${tM}T${nM(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function oW(e,t){return!!((t==="v4"||!t)&&QK.test(e)||(t==="v6"||!t)&&tW.test(e))}function lW(e,t){if(!ZK.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function cW(e,t){return!!((t==="v4"||!t)&&eW.test(e)||(t==="v6"||!t)&&nW.test(e))}class Zs extends $n{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==an.string){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:an.string,received:i.parsedType}),En}const r=new si;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=t.data.length>i.value,o=t.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(t,a),s?tn(a,{code:$t.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&tn(a,{code:$t.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")XK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"email",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")jS||(jS=new RegExp(JK,"u")),jS.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"emoji",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")KK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"uuid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")WK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"nanoid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")HK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")VK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid2",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")GK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ulid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),tn(a,{validation:"url",code:$t.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"regex",code:$t.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?rM(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?iW.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?sW(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?YK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"duration",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?oW(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ip",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?lW(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"jwt",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?cW(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cidr",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?rW.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?aW.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64url",code:$t.invalid_string,message:i.message}),r.dirty()):ar.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:$t.invalid_string,...un.errToObj(r)})}_addCheck(t){return new Zs({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...un.errToObj(t)})}url(t){return this._addCheck({kind:"url",...un.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...un.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...un.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...un.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...un.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...un.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...un.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...un.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...un.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...un.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...un.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...un.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...un.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...un.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...un.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...un.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...un.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...un.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...un.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...un.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...un.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...un.errToObj(n)})}nonempty(t){return this.min(1,un.errToObj(t))}trim(){return new Zs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Zs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Zs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Zs.create=e=>{var t;return new Zs({checks:[],typeName:Vt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Pn(e)})};function uW(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class mu extends $n{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==an.number){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:an.number,received:i.parsedType}),En}let r;const a=new si;for(const i of this._def.checks)i.kind==="int"?ar.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?uW(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_finite,message:i.message}),a.dirty()):ar.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new mu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new mu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:un.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:un.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:un.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:un.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ar.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}mu.create=e=>new mu({checks:[],typeName:Vt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Pn(e)});class gu extends $n{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==an.bigint)return this._getInvalidInput(t);let r;const a=new si;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ar.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return tn(n,{code:$t.invalid_type,expected:an.bigint,received:n.parsedType}),En}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new gu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new gu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}gu.create=e=>{var t;return new gu({checks:[],typeName:Vt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Pn(e)})};class pg extends $n{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==an.boolean){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.boolean,received:r.parsedType}),En}return Ei(t.data)}}pg.create=e=>new pg({typeName:Vt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Pn(e)});class Ld extends $n{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==an.date){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:an.date,received:i.parsedType}),En}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_date}),En}const r=new si;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ar.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ld({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:un.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:un.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Ld.create=e=>new Ld({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Vt.ZodDate,...Pn(e)});class Gv extends $n{_parse(t){if(this._getType(t)!==an.symbol){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.symbol,received:r.parsedType}),En}return Ei(t.data)}}Gv.create=e=>new Gv({typeName:Vt.ZodSymbol,...Pn(e)});class mg extends $n{_parse(t){if(this._getType(t)!==an.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.undefined,received:r.parsedType}),En}return Ei(t.data)}}mg.create=e=>new mg({typeName:Vt.ZodUndefined,...Pn(e)});class gg extends $n{_parse(t){if(this._getType(t)!==an.null){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.null,received:r.parsedType}),En}return Ei(t.data)}}gg.create=e=>new gg({typeName:Vt.ZodNull,...Pn(e)});class Dh extends $n{constructor(){super(...arguments),this._any=!0}_parse(t){return Ei(t.data)}}Dh.create=e=>new Dh({typeName:Vt.ZodAny,...Pn(e)});class Od extends $n{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ei(t.data)}}Od.create=e=>new Od({typeName:Vt.ZodUnknown,...Pn(e)});class Ql extends $n{_parse(t){const n=this._getOrReturnCtx(t);return tn(n,{code:$t.invalid_type,expected:an.never,received:n.parsedType}),En}}Ql.create=e=>new Ql({typeName:Vt.ZodNever,...Pn(e)});class Kv extends $n{_parse(t){if(this._getType(t)!==an.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.void,received:r.parsedType}),En}return Ei(t.data)}}Kv.create=e=>new Kv({typeName:Vt.ZodVoid,...Pn(e)});class Js extends $n{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==an.array)return tn(n,{code:$t.invalid_type,expected:an.array,received:n.parsedType}),En;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(s||o)&&(tn(n,{code:s?$t.too_big:$t.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(tn(n,{code:$t.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(tn(n,{code:$t.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>a.type._parseAsync(new tl(n,s,n.path,o)))).then(s=>si.mergeArray(r,s));const i=[...n.data].map((s,o)=>a.type._parseSync(new tl(n,s,n.path,o)));return si.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Js({...this._def,minLength:{value:t,message:un.toString(n)}})}max(t,n){return new Js({...this._def,maxLength:{value:t,message:un.toString(n)}})}length(t,n){return new Js({...this._def,exactLength:{value:t,message:un.toString(n)}})}nonempty(t){return this.min(1,t)}}Js.create=(e,t)=>new Js({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Vt.ZodArray,...Pn(t)});function hh(e){if(e instanceof Zr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Qs.create(hh(r))}return new Zr({...e._def,shape:()=>t})}else return e instanceof Js?new Js({...e._def,type:hh(e.element)}):e instanceof Qs?Qs.create(hh(e.unwrap())):e instanceof bu?bu.create(hh(e.unwrap())):e instanceof nl?nl.create(e.items.map(t=>hh(t))):e}class Zr extends $n{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ar.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==an.object){const u=this._getOrReturnCtx(t);return tn(u,{code:$t.invalid_type,expected:an.object,received:u.parsedType}),En}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ql&&this._def.unknownKeys==="strip"))for(const u in a.data)s.includes(u)||o.push(u);const l=[];for(const u of s){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new tl(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Ql){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")o.length>0&&(tn(a,{code:$t.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new tl(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>si.mergeObjectSync(r,u)):si.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return un.errToObj,new Zr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,s,o;const l=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=un.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Zr({...this._def,unknownKeys:"strip"})}passthrough(){return new Zr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Zr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Zr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Vt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Zr({...this._def,catchall:t})}pick(t){const n={};return ar.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Zr({...this._def,shape:()=>n})}omit(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Zr({...this._def,shape:()=>n})}deepPartial(){return hh(this)}partial(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Zr({...this._def,shape:()=>n})}required(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Qs;)i=i._def.innerType;n[r]=i}}),new Zr({...this._def,shape:()=>n})}keyof(){return aM(ar.objectKeys(this.shape))}}Zr.create=(e,t)=>new Zr({shape:()=>e,unknownKeys:"strip",catchall:Ql.create(),typeName:Vt.ZodObject,...Pn(t)});Zr.strictCreate=(e,t)=>new Zr({shape:()=>e,unknownKeys:"strict",catchall:Ql.create(),typeName:Vt.ZodObject,...Pn(t)});Zr.lazycreate=(e,t)=>new Zr({shape:e,unknownKeys:"strip",catchall:Ql.create(),typeName:Vt.ZodObject,...Pn(t)});class yg extends $n{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new ss(o.ctx.common.issues));return tn(n,{code:$t.invalid_union,unionErrors:s}),En}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(l=>new ss(l));return tn(n,{code:$t.invalid_union,unionErrors:o}),En}}get options(){return this._def.options}}yg.create=(e,t)=>new yg({options:e,typeName:Vt.ZodUnion,...Pn(t)});const Fl=e=>e instanceof wg?Fl(e.schema):e instanceof ao?Fl(e.innerType()):e instanceof xg?[e.value]:e instanceof yu?e.options:e instanceof _g?ar.objectValues(e.enum):e instanceof Sg?Fl(e._def.innerType):e instanceof mg?[void 0]:e instanceof gg?[null]:e instanceof Qs?[void 0,...Fl(e.unwrap())]:e instanceof bu?[null,...Fl(e.unwrap())]:e instanceof Ok||e instanceof Cg?Fl(e.unwrap()):e instanceof Eg?Fl(e._def.innerType):[];class sx extends $n{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==an.object)return tn(n,{code:$t.invalid_type,expected:an.object,received:n.parsedType}),En;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:$t.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),En)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const s=Fl(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new sx({typeName:Vt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Pn(r)})}}function iC(e,t){const n=Bl(e),r=Bl(t);if(e===t)return{valid:!0,data:e};if(n===an.object&&r===an.object){const a=ar.objectKeys(t),i=ar.objectKeys(e).filter(o=>a.indexOf(o)!==-1),s={...e,...t};for(const o of i){const l=iC(e[o],t[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===an.array&&r===an.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const s=e[i],o=t[i],l=iC(s,o);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===an.date&&r===an.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class bg extends $n{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,s)=>{if(rC(i)||rC(s))return En;const o=iC(i.value,s.value);return o.valid?((aC(i)||aC(s))&&n.dirty(),{status:n.value,value:o.data}):(tn(r,{code:$t.invalid_intersection_types}),En)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}bg.create=(e,t,n)=>new bg({left:e,right:t,typeName:Vt.ZodIntersection,...Pn(n)});class nl extends $n{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==an.array)return tn(r,{code:$t.invalid_type,expected:an.array,received:r.parsedType}),En;if(r.data.length<this._def.items.length)return tn(r,{code:$t.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),En;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:$t.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new tl(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>si.mergeArray(n,s)):si.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new nl({...this._def,rest:t})}}nl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nl({items:e,typeName:Vt.ZodTuple,rest:null,...Pn(t)})};class vg extends $n{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==an.object)return tn(r,{code:$t.invalid_type,expected:an.object,received:r.parsedType}),En;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new tl(r,o,r.path,o)),value:s._parse(new tl(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?si.mergeObjectAsync(n,a):si.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof $n?new vg({keyType:t,valueType:n,typeName:Vt.ZodRecord,...Pn(r)}):new vg({keyType:Zs.create(),valueType:t,typeName:Vt.ZodRecord,...Pn(n)})}}class Wv extends $n{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==an.map)return tn(r,{code:$t.invalid_type,expected:an.map,received:r.parsedType}),En;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,l],u)=>({key:a._parse(new tl(r,o,r.path,[u,"key"])),value:i._parse(new tl(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}Wv.create=(e,t,n)=>new Wv({valueType:t,keyType:e,typeName:Vt.ZodMap,...Pn(n)});class $d extends $n{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==an.set)return tn(r,{code:$t.invalid_type,expected:an.set,received:r.parsedType}),En;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(tn(r,{code:$t.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(tn(r,{code:$t.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return En;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new tl(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(t,n){return new $d({...this._def,minSize:{value:t,message:un.toString(n)}})}max(t,n){return new $d({...this._def,maxSize:{value:t,message:un.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}$d.create=(e,t)=>new $d({valueType:e,minSize:null,maxSize:null,typeName:Vt.ZodSet,...Pn(t)});class Sh extends $n{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==an.function)return tn(n,{code:$t.invalid_type,expected:an.function,received:n.parsedType}),En;function r(o,l){return Hv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,qv(),Oh].filter(u=>!!u),issueData:{code:$t.invalid_arguments,argumentsError:l}})}function a(o,l){return Hv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,qv(),Oh].filter(u=>!!u),issueData:{code:$t.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof Mh){const o=this;return Ei(async function(...l){const u=new ss([]),d=await o._def.args.parseAsync(l,i).catch(y=>{throw u.addIssue(r(l,y)),u}),h=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(y=>{throw u.addIssue(a(h,y)),u})})}else{const o=this;return Ei(function(...l){const u=o._def.args.safeParse(l,i);if(!u.success)throw new ss([r(l,u.error)]);const d=Reflect.apply(s,this,u.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new ss([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Sh({...this._def,args:nl.create(t).rest(Od.create())})}returns(t){return new Sh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Sh({args:t||nl.create([]).rest(Od.create()),returns:n||Od.create(),typeName:Vt.ZodFunction,...Pn(r)})}}class wg extends $n{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}wg.create=(e,t)=>new wg({getter:e,typeName:Vt.ZodLazy,...Pn(t)});class xg extends $n{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return tn(n,{received:n.data,code:$t.invalid_literal,expected:this._def.value}),En}return{status:"valid",value:t.data}}get value(){return this._def.value}}xg.create=(e,t)=>new xg({value:e,typeName:Vt.ZodLiteral,...Pn(t)});function aM(e,t){return new yu({values:e,typeName:Vt.ZodEnum,...Pn(t)})}class yu extends $n{constructor(){super(...arguments),Ym.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{expected:ar.joinValues(r),received:n.parsedType,code:$t.invalid_type}),En}if(Vv(this,Ym)||eM(this,Ym,new Set(this._def.values)),!Vv(this,Ym).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{received:n.data,code:$t.invalid_enum_value,options:r}),En}return Ei(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return yu.create(t,{...this._def,...n})}exclude(t,n=this._def){return yu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Ym=new WeakMap;yu.create=aM;class _g extends $n{constructor(){super(...arguments),Xm.set(this,void 0)}_parse(t){const n=ar.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==an.string&&r.parsedType!==an.number){const a=ar.objectValues(n);return tn(r,{expected:ar.joinValues(a),received:r.parsedType,code:$t.invalid_type}),En}if(Vv(this,Xm)||eM(this,Xm,new Set(ar.getValidEnumValues(this._def.values))),!Vv(this,Xm).has(t.data)){const a=ar.objectValues(n);return tn(r,{received:r.data,code:$t.invalid_enum_value,options:a}),En}return Ei(t.data)}get enum(){return this._def.values}}Xm=new WeakMap;_g.create=(e,t)=>new _g({values:e,typeName:Vt.ZodNativeEnum,...Pn(t)});class Mh extends $n{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==an.promise&&n.common.async===!1)return tn(n,{code:$t.invalid_type,expected:an.promise,received:n.parsedType}),En;const r=n.parsedType===an.promise?n.data:Promise.resolve(n.data);return Ei(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Mh.create=(e,t)=>new Mh({type:e,typeName:Vt.ZodPromise,...Pn(t)});class ao extends $n{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:s=>{tn(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return En;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?En:l.status==="dirty"||n.value==="dirty"?gh(l.value):l});{if(n.value==="aborted")return En;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?En:o.status==="dirty"||n.value==="dirty"?gh(o.value):o}}if(a.type==="refinement"){const s=o=>{const l=a.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?En:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?En:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Fd(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Fd(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:n.value,value:o})):s);ar.assertNever(a)}}ao.create=(e,t,n)=>new ao({schema:e,typeName:Vt.ZodEffects,effect:t,...Pn(n)});ao.createWithPreprocess=(e,t,n)=>new ao({schema:t,effect:{type:"preprocess",transform:e},typeName:Vt.ZodEffects,...Pn(n)});class Qs extends $n{_parse(t){return this._getType(t)===an.undefined?Ei(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Qs.create=(e,t)=>new Qs({innerType:e,typeName:Vt.ZodOptional,...Pn(t)});class bu extends $n{_parse(t){return this._getType(t)===an.null?Ei(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}bu.create=(e,t)=>new bu({innerType:e,typeName:Vt.ZodNullable,...Pn(t)});class Sg extends $n{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===an.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Sg.create=(e,t)=>new Sg({innerType:e,typeName:Vt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Pn(t)});class Eg extends $n{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return hg(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ss(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ss(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Eg.create=(e,t)=>new Eg({innerType:e,typeName:Vt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Pn(t)});class Zv extends $n{_parse(t){if(this._getType(t)!==an.nan){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.nan,received:r.parsedType}),En}return{status:"valid",value:t.data}}}Zv.create=e=>new Zv({typeName:Vt.ZodNaN,...Pn(e)});const dW=Symbol("zod_brand");class Ok extends $n{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class v0 extends $n{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?En:i.status==="dirty"?(n.dirty(),gh(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?En:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new v0({in:t,out:n,typeName:Vt.ZodPipeline})}}class Cg extends $n{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Fd(a)&&(a.value=Object.freeze(a.value)),a);return hg(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}Cg.create=(e,t)=>new Cg({innerType:e,typeName:Vt.ZodReadonly,...Pn(t)});function b3(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function iM(e,t={},n){return e?Dh.create().superRefine((r,a)=>{var i,s;const o=e(r);if(o instanceof Promise)return o.then(l=>{var u,d;if(!l){const h=b3(t,r),m=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!o){const l=b3(t,r),u=(s=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...l,fatal:u})}}):Dh.create()}const fW={object:Zr.lazycreate};var Vt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Vt||(Vt={}));const hW=(e,t={message:`Input not instance of ${e.name}`})=>iM(n=>n instanceof e,t),sM=Zs.create,oM=mu.create,pW=Zv.create,mW=gu.create,lM=pg.create,gW=Ld.create,yW=Gv.create,bW=mg.create,vW=gg.create,wW=Dh.create,xW=Od.create,_W=Ql.create,SW=Kv.create,EW=Js.create,CW=Zr.create,kW=Zr.strictCreate,TW=yg.create,AW=sx.create,NW=bg.create,RW=nl.create,IW=vg.create,jW=Wv.create,OW=$d.create,DW=Sh.create,MW=wg.create,PW=xg.create,FW=yu.create,LW=_g.create,$W=Mh.create,v3=ao.create,BW=Qs.create,zW=bu.create,UW=ao.createWithPreprocess,qW=v0.create,HW=()=>sM().optional(),VW=()=>oM().optional(),GW=()=>lM().optional(),KW={string:e=>Zs.create({...e,coerce:!0}),number:e=>mu.create({...e,coerce:!0}),boolean:e=>pg.create({...e,coerce:!0}),bigint:e=>gu.create({...e,coerce:!0}),date:e=>Ld.create({...e,coerce:!0})},WW=En;var U=Object.freeze({__proto__:null,defaultErrorMap:Oh,setErrorMap:UK,getErrorMap:qv,makeIssue:Hv,EMPTY_PATH:qK,addIssueToContext:tn,ParseStatus:si,INVALID:En,DIRTY:gh,OK:Ei,isAborted:rC,isDirty:aC,isValid:Fd,isAsync:hg,get util(){return ar},get objectUtil(){return nC},ZodParsedType:an,getParsedType:Bl,ZodType:$n,datetimeRegex:rM,ZodString:Zs,ZodNumber:mu,ZodBigInt:gu,ZodBoolean:pg,ZodDate:Ld,ZodSymbol:Gv,ZodUndefined:mg,ZodNull:gg,ZodAny:Dh,ZodUnknown:Od,ZodNever:Ql,ZodVoid:Kv,ZodArray:Js,ZodObject:Zr,ZodUnion:yg,ZodDiscriminatedUnion:sx,ZodIntersection:bg,ZodTuple:nl,ZodRecord:vg,ZodMap:Wv,ZodSet:$d,ZodFunction:Sh,ZodLazy:wg,ZodLiteral:xg,ZodEnum:yu,ZodNativeEnum:_g,ZodPromise:Mh,ZodEffects:ao,ZodTransformer:ao,ZodOptional:Qs,ZodNullable:bu,ZodDefault:Sg,ZodCatch:Eg,ZodNaN:Zv,BRAND:dW,ZodBranded:Ok,ZodPipeline:v0,ZodReadonly:Cg,custom:iM,Schema:$n,ZodSchema:$n,late:fW,get ZodFirstPartyTypeKind(){return Vt},coerce:KW,any:wW,array:EW,bigint:mW,boolean:lM,date:gW,discriminatedUnion:AW,effect:v3,enum:FW,function:DW,instanceof:hW,intersection:NW,lazy:MW,literal:PW,map:jW,nan:pW,nativeEnum:LW,never:_W,null:vW,nullable:zW,number:oM,object:CW,oboolean:GW,onumber:VW,optional:BW,ostring:HW,pipeline:qW,preprocess:UW,promise:$W,record:IW,set:OW,strictObject:kW,string:sM,symbol:yW,transformer:v3,tuple:RW,undefined:bW,union:TW,unknown:xW,void:SW,NEVER:WW,ZodIssueCode:$t,quotelessJson:zK,ZodError:ss});function ZW({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:s});break}case"developer":{r.push({role:"developer",content:s});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){r.push({role:"user",content:s[0].text});break}r.push({role:"user",content:s.map((o,l)=>{var u,d,h,m;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${jh(o.image)}`,detail:(h=(d=o.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(o.data instanceof URL)throw new Ar({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=o.filename)!=null?m:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new Ar({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const u of s)switch(u.type){case"text":{o+=u.text;break}case"tool-call":{l.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}}if(t){if(l.length>1)throw new Ar({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of s)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:a}}function w3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function Yv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Dk=U.object({error:U.object({message:U.string(),type:U.string().nullish(),param:U.any().nullish(),code:U.union([U.string(),U.number()]).nullish()})}),vu=YD({errorSchema:Dk,errorToMessage:e=>e.error.message});function Xv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function YW({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice;if(t){const u=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):u.push({name:h.name,description:h.description,parameters:h.parameters});if(s==null)return{functions:u,function_call:void 0,toolWarnings:i};switch(s.type){case"auto":case"none":case void 0:return{functions:u,function_call:void 0,toolWarnings:i};case"required":throw new Ar({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:u,function_call:{name:s.toolName},toolWarnings:i}}}const o=[];for(const u of a)u.type==="provider-defined"?i.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:n?!0:void 0}});if(s==null)return{tools:o,tool_choice:void 0,toolWarnings:i};const l=s.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:i};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const u=l;throw new Ar({functionality:`Unsupported tool choice type: ${u}`})}}}var XW=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:sC(this.modelId)}get defaultObjectGenerationMode(){return eZ(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,y,v,b,x,w,S,E;const C=e.type,T=[];i!=null&&T.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&T.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const j=this.settings.useLegacyFunctionCalling;if(j&&this.settings.parallelToolCalls===!0)throw new Ar({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(j&&this.supportsStructuredOutputs)throw new Ar({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:I,warnings:R}=ZW({prompt:t,useLegacyFunctionCalling:j,systemMessageMode:tZ(this.modelId)});T.push(...R);const F={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:(m=u.name)!=null?m:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(y=h==null?void 0:h.openai)==null?void 0:y.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(x=h==null?void 0:h.openai)==null?void 0:x.prediction,reasoning_effort:(S=(w=h==null?void 0:h.openai)==null?void 0:w.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:I};switch(sC(this.modelId)&&(F.temperature!=null&&(F.temperature=void 0,T.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),F.top_p!=null&&(F.top_p=void 0,T.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),F.frequency_penalty!=null&&(F.frequency_penalty=void 0,T.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),F.presence_penalty!=null&&(F.presence_penalty=void 0,T.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),F.logit_bias!=null&&(F.logit_bias=void 0,T.push({type:"other",message:"logitBias is not supported for reasoning models"})),F.logprobs!=null&&(F.logprobs=void 0,T.push({type:"other",message:"logprobs is not supported for reasoning models"})),F.top_logprobs!=null&&(F.top_logprobs=void 0,T.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),F.max_tokens!=null&&(F.max_completion_tokens==null&&(F.max_completion_tokens=F.max_tokens),F.max_tokens=void 0)),C){case"regular":{const{tools:B,tool_choice:H,functions:D,function_call:Z,toolWarnings:V}=YW({mode:e,useLegacyFunctionCalling:j,structuredOutputs:this.supportsStructuredOutputs});return{args:{...F,tools:B,tool_choice:H,functions:D,function_call:Z},warnings:[...T,...V]}}case"object-json":return{args:{...F,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:T};case"object-tool":return{args:j?{...F,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...F,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:T};default:{const B=C;throw new Error(`Unsupported type: ${B}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l;const{args:u,warnings:d}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:y}=await ro({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:el(this.config.headers(),e.headers),body:u,failedResponseHandler:vu,successfulResponseHandler:Xd(JW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=u,x=m.choices[0],w=(t=m.usage)==null?void 0:t.completion_tokens_details,S=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(w==null?void 0:w.reasoning_tokens)!=null&&(E.openai.reasoningTokens=w==null?void 0:w.reasoning_tokens),(w==null?void 0:w.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=w==null?void 0:w.accepted_prediction_tokens),(w==null?void 0:w.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=w==null?void 0:w.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=x.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&x.message.function_call?[{toolCallType:"function",toolCallId:zo(),toolName:x.message.function_call.name,args:x.message.function_call.arguments}]:(a=x.message.tool_calls)==null?void 0:a.map(C=>{var T;return{toolCallType:"function",toolCallId:(T=C.id)!=null?T:zo(),toolName:C.function.name,args:C.function.arguments}}),finishReason:Yv(x.finish_reason),usage:{promptTokens:(s=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?s:NaN,completionTokens:(l=(o=m.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:y},request:{body:JSON.stringify(u)},response:Xv(m),warnings:d,logprobs:w3(x.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...b.response}),b.text&&w.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const S of b.toolCalls)w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),w.enqueue({type:"tool-call",...S});w.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),w.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await ro({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:el(this.config.headers(),e.headers),body:r,failedResponseHandler:vu,successfulResponseHandler:jk(QW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=t,l=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:y}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,x){var w,S,E,C,T,j,I,R,F,B,H,D;if(!b.success){u="error",x.enqueue({type:"error",error:b.error});return}const Z=b.value;if("error"in Z){u="error",x.enqueue({type:"error",error:Z.error});return}if(m&&(m=!1,x.enqueue({type:"response-metadata",...Xv(Z)})),Z.usage!=null){const{prompt_tokens:X,completion_tokens:ie,prompt_tokens_details:L,completion_tokens_details:J}=Z.usage;d={promptTokens:X??void 0,completionTokens:ie??void 0},(J==null?void 0:J.reasoning_tokens)!=null&&(v.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(L==null?void 0:L.cached_tokens)!=null&&(v.openai.cachedPromptTokens=L==null?void 0:L.cached_tokens)}const V=Z.choices[0];if((V==null?void 0:V.finish_reason)!=null&&(u=Yv(V.finish_reason)),(V==null?void 0:V.delta)==null)return;const ue=V.delta;ue.content!=null&&x.enqueue({type:"text-delta",textDelta:ue.content});const ae=w3(V==null?void 0:V.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const ne=y&&ue.function_call!=null?[{type:"function",id:zo(),function:ue.function_call,index:0}]:ue.tool_calls;if(ne!=null)for(const X of ne){const ie=X.index;if(l[ie]==null){if(X.type!=="function")throw new _h({data:X,message:"Expected 'function' type."});if(X.id==null)throw new _h({data:X,message:"Expected 'id' to be a string."});if(((w=X.function)==null?void 0:w.name)==null)throw new _h({data:X,message:"Expected 'function.name' to be a string."});l[ie]={id:X.id,type:"function",function:{name:X.function.name,arguments:(S=X.function.arguments)!=null?S:""},hasFinished:!1};const J=l[ie];((E=J.function)==null?void 0:E.name)!=null&&((C=J.function)==null?void 0:C.arguments)!=null&&(J.function.arguments.length>0&&x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),g3(J.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(T=J.id)!=null?T:zo(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const L=l[ie];L.hasFinished||(((j=X.function)==null?void 0:j.arguments)!=null&&(L.function.arguments+=(R=(I=X.function)==null?void 0:I.arguments)!=null?R:""),x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:L.id,toolName:L.function.name,argsTextDelta:(F=X.function.arguments)!=null?F:""}),((B=L.function)==null?void 0:B.name)!=null&&((H=L.function)==null?void 0:H.arguments)!=null&&g3(L.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(D=L.id)!=null?D:zo(),toolName:L.function.name,args:L.function.arguments}),L.hasFinished=!0))}},flush(b){var x,w;b.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(x=d.promptTokens)!=null?x:NaN,completionTokens:(w=d.completionTokens)!=null?w:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},cM=U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish(),prompt_tokens_details:U.object({cached_tokens:U.number().nullish()}).nullish(),completion_tokens_details:U.object({reasoning_tokens:U.number().nullish(),accepted_prediction_tokens:U.number().nullish(),rejected_prediction_tokens:U.number().nullish()}).nullish()}).nullish(),JW=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({message:U.object({role:U.literal("assistant").nullish(),content:U.string().nullish(),function_call:U.object({arguments:U.string(),name:U.string()}).nullish(),tool_calls:U.array(U.object({id:U.string().nullish(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).nullish()}),index:U.number(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullish()})),usage:cM}),QW=U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).nullish(),content:U.string().nullish(),function_call:U.object({name:U.string().optional(),arguments:U.string().optional()}).nullish(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullable().optional(),index:U.number()})),usage:cM}),Dk]);function sC(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function eZ(e){return e.startsWith("gpt-4o-audio-preview")}function tZ(e){var t,n;return sC(e)?(n=(t=nZ[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var nZ={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function rZ({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Ll({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ar({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ar({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Ar({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function x3(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var aZ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h}){var m;const y=e.type,v=[];s!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:x}=rZ({prompt:n,inputFormat:t}),w=[...x??[],...u??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,prompt:b,stop:w.length>0?w:void 0};switch(y){case"regular":{if((m=e.tools)!=null&&m.length)throw new Ar({functionality:"tools"});if(e.toolChoice)throw new Ar({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new Ar({functionality:"object-json mode"});case"object-tool":throw new Ar({functionality:"object-tool mode"});default:{const E=y;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await ro({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:el(this.config.headers(),e.headers),body:t,failedResponseHandler:vu,successfulResponseHandler:Xd(iZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:Yv(l.finish_reason),logprobs:x3(l.logprobs),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r,body:i},response:Xv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await ro({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:el(this.config.headers(),e.headers),body:r,failedResponseHandler:vu,successfulResponseHandler:jk(sZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,y){if(!m.success){l="error",y.enqueue({type:"error",error:m.error});return}const v=m.value;if("error"in v){l="error",y.enqueue({type:"error",error:v.error});return}h&&(h=!1,y.enqueue({type:"response-metadata",...Xv(v)})),v.usage!=null&&(u={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=Yv(b.finish_reason)),(b==null?void 0:b.text)!=null&&y.enqueue({type:"text-delta",textDelta:b.text});const x=x3(b==null?void 0:b.logprobs);x!=null&&x.length&&(d===void 0&&(d=[]),d.push(...x))},flush(m){m.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},iZ=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullish()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()})}),sZ=U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string().nullish(),index:U.number(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullish()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),Dk]),oZ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Nk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await ro({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:el(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:vu,successfulResponseHandler:Xd(lZ),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},lZ=U.object({data:U.array(U.object({embedding:U.array(U.number())})),usage:U.object({prompt_tokens:U.number()}).nullish()}),cZ={"dall-e-3":1,"dall-e-2":10},uZ=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:cZ[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const y=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await ro({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:el(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:vu,successfulResponseHandler:Xd(dZ),abortSignal:o,fetch:this.config.fetch});return{images:v.data.map(x=>x.b64_json),warnings:m,response:{timestamp:y,modelId:this.modelId,headers:b}}}},dZ=U.object({data:U.array(U.object({b64_json:U.string()}))});function fZ({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=t;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{n.push({role:"user",content:i.map((s,o)=>{var l,u,d,h;switch(s.type){case"text":return{type:"input_text",text:s.text};case"image":return{type:"input_image",image_url:s.image instanceof URL?s.image.toString():`data:${(l=s.mimeType)!=null?l:"image/jpeg"};base64,${jh(s.image)}`,detail:(d=(u=s.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail};case"file":{if(s.data instanceof URL)throw new Ar({functionality:"File URLs in user messages"});switch(s.mimeType){case"application/pdf":return{type:"input_file",filename:(h=s.filename)!=null?h:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${s.data}`};default:throw new Ar({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const s of i)switch(s.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:s.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:s.toolCallId,name:s.toolName,arguments:JSON.stringify(s.args)});break}}break}case"tool":{for(const s of i)n.push({type:"function_call_output",call_id:s.toolCallId,output:JSON.stringify(s.result)});break}default:{const s=a;throw new Error(`Unsupported role: ${s}`)}}return{messages:n,warnings:r}}function _3({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function hZ({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)switch(l.type){case"function":s.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":s.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:s,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:s,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=o;throw new Ar({functionality:`Unsupported tool choice type: ${l}`})}}}var pZ=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:s,frequencyPenalty:o,seed:l,prompt:u,providerMetadata:d,responseFormat:h}){var m,y,v;const b=[],x=RZ(this.modelId),w=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),s!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=fZ({prompt:u,systemMessageMode:x.systemMessageMode});b.push(...E);const C=PK({provider:"openai",providerOptions:d,schema:IZ}),T=(m=C==null?void 0:C.strictSchemas)!=null?m:!0,j={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:T,name:(y=h.name)!=null?y:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,...x.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},...x.requiredAutoTruncation&&{truncation:"auto"}};switch(x.isReasoningModel&&(j.temperature!=null&&(j.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),j.top_p!=null&&(j.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),w){case"regular":{const{tools:I,tool_choice:R,toolWarnings:F}=hZ({mode:e,strict:T});return{args:{...j,tools:I,tool_choice:R},warnings:[...b,...F]}}case"object-json":return{args:{...j,text:{format:e.schema!=null?{type:"json_schema",strict:T,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...j,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:T}]},warnings:b};default:{const I=w;throw new Error(`Unsupported type: ${I}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=this.getArgs(e),{responseHeaders:l,value:u,rawValue:d}=await ro({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:el(this.config.headers(),e.headers),body:s,failedResponseHandler:vu,successfulResponseHandler:Xd(U.object({id:U.string(),created_at:U.number(),model:U.string(),output:U.array(U.discriminatedUnion("type",[U.object({type:U.literal("message"),role:U.literal("assistant"),content:U.array(U.object({type:U.literal("output_text"),text:U.string(),annotations:U.array(U.object({type:U.literal("url_citation"),start_index:U.number(),end_index:U.number(),url:U.string(),title:U.string()}))}))}),U.object({type:U.literal("function_call"),call_id:U.string(),name:U.string(),arguments:U.string()}),U.object({type:U.literal("web_search_call")}),U.object({type:U.literal("computer_call")}),U.object({type:U.literal("reasoning")})])),incomplete_details:U.object({reason:U.string()}).nullable(),usage:uM})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u.output.filter(y=>y.type==="message").flatMap(y=>y.content).filter(y=>y.type==="output_text"),m=u.output.filter(y=>y.type==="function_call").map(y=>({toolCallType:"function",toolCallId:y.call_id,toolName:y.name,args:y.arguments}));return{text:h.map(y=>y.text).join(`
`),sources:h.flatMap(y=>y.annotations.map(v=>{var b,x,w;return{sourceType:"url",id:(w=(x=(b=this.config).generateId)==null?void 0:x.call(b))!=null?w:zo(),url:v.url,title:v.title}})),finishReason:_3({finishReason:(t=u.incomplete_details)==null?void 0:t.reason,hasToolCalls:m.length>0}),toolCalls:m.length>0?m:void 0,usage:{promptTokens:u.usage.input_tokens,completionTokens:u.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:l,body:d},request:{body:JSON.stringify(s)},response:{id:u.id,timestamp:new Date(u.created_at*1e3),modelId:u.model},providerMetadata:{openai:{responseId:u.id,cachedPromptTokens:(r=(n=u.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=u.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:o}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await ro({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:el(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:vu,successfulResponseHandler:jk(_Z),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let s="unknown",o=NaN,l=NaN,u=null,d=null,h=null;const m={};let y=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,T,j,I;if(!v.success){s="error",b.enqueue({type:"error",error:v.error});return}const R=v.value;if(AZ(R))R.item.type==="function_call"&&(m[R.output_index]={toolName:R.item.name,toolCallId:R.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:R.item.call_id,toolName:R.item.name,argsTextDelta:R.item.arguments}));else if(TZ(R)){const F=m[R.output_index];F!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:F.toolCallId,toolName:F.toolName,argsTextDelta:R.delta})}else kZ(R)?(h=R.response.id,b.enqueue({type:"response-metadata",id:R.response.id,timestamp:new Date(R.response.created_at*1e3),modelId:R.response.model})):SZ(R)?b.enqueue({type:"text-delta",textDelta:R.delta}):EZ(R)&&R.item.type==="function_call"?(m[R.output_index]=void 0,y=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:R.item.call_id,toolName:R.item.name,args:R.item.arguments})):CZ(R)?(s=_3({finishReason:(x=R.response.incomplete_details)==null?void 0:x.reason,hasToolCalls:y}),o=R.response.usage.input_tokens,l=R.response.usage.output_tokens,u=(S=(w=R.response.usage.input_tokens_details)==null?void 0:w.cached_tokens)!=null?S:u,d=(C=(E=R.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:d):NZ(R)&&b.enqueue({type:"source",source:{sourceType:"url",id:(I=(j=(T=i.config).generateId)==null?void 0:j.call(T))!=null?I:zo(),url:R.annotation.url,title:R.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:s,usage:{promptTokens:o,completionTokens:l},...(u!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:u,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},uM=U.object({input_tokens:U.number(),input_tokens_details:U.object({cached_tokens:U.number().nullish()}).nullish(),output_tokens:U.number(),output_tokens_details:U.object({reasoning_tokens:U.number().nullish()}).nullish()}),mZ=U.object({type:U.literal("response.output_text.delta"),delta:U.string()}),gZ=U.object({type:U.enum(["response.completed","response.incomplete"]),response:U.object({incomplete_details:U.object({reason:U.string()}).nullish(),usage:uM})}),yZ=U.object({type:U.literal("response.created"),response:U.object({id:U.string(),created_at:U.number(),model:U.string()})}),bZ=U.object({type:U.literal("response.output_item.done"),output_index:U.number(),item:U.discriminatedUnion("type",[U.object({type:U.literal("message")}),U.object({type:U.literal("function_call"),id:U.string(),call_id:U.string(),name:U.string(),arguments:U.string(),status:U.literal("completed")})])}),vZ=U.object({type:U.literal("response.function_call_arguments.delta"),item_id:U.string(),output_index:U.number(),delta:U.string()}),wZ=U.object({type:U.literal("response.output_item.added"),output_index:U.number(),item:U.discriminatedUnion("type",[U.object({type:U.literal("message")}),U.object({type:U.literal("function_call"),id:U.string(),call_id:U.string(),name:U.string(),arguments:U.string()})])}),xZ=U.object({type:U.literal("response.output_text.annotation.added"),annotation:U.object({type:U.literal("url_citation"),url:U.string(),title:U.string()})}),_Z=U.union([mZ,gZ,yZ,bZ,vZ,wZ,xZ,U.object({type:U.string()}).passthrough()]);function SZ(e){return e.type==="response.output_text.delta"}function EZ(e){return e.type==="response.output_item.done"}function CZ(e){return e.type==="response.completed"||e.type==="response.incomplete"}function kZ(e){return e.type==="response.created"}function TZ(e){return e.type==="response.function_call_arguments.delta"}function AZ(e){return e.type==="response.output_item.added"}function NZ(e){return e.type==="response.output_text.annotation.added"}function RZ(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var IZ=U.object({metadata:U.any().nullish(),parallelToolCalls:U.boolean().nullish(),previousResponseId:U.string().nullish(),store:U.boolean().nullish(),user:U.string().nullish(),reasoningEffort:U.string().nullish(),strictSchemas:U.boolean().nullish(),instructions:U.string().nullish()}),jZ=U.object({});function OZ({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:jZ}}var DZ={webSearchPreview:OZ};function dM(e={}){var t,n,r;const a=(t=JD(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",s=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${NK({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(b,x={})=>new XW(b,x,{provider:`${s}.chat`,url:({path:w})=>`${a}${w}`,headers:o,compatibility:i,fetch:e.fetch}),u=(b,x={})=>new aZ(b,x,{provider:`${s}.completion`,url:({path:w})=>`${a}${w}`,headers:o,compatibility:i,fetch:e.fetch}),d=(b,x={})=>new oZ(b,x,{provider:`${s}.embedding`,url:({path:w})=>`${a}${w}`,headers:o,fetch:e.fetch}),h=(b,x={})=>new uZ(b,x,{provider:`${s}.image`,url:({path:w})=>`${a}${w}`,headers:o,fetch:e.fetch}),m=(b,x)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?u(b,x):l(b,x)},y=b=>new pZ(b,{provider:`${s}.responses`,url:({path:x})=>`${a}${x}`,headers:o,fetch:e.fetch}),v=function(b,x){return m(b,x)};return v.languageModel=m,v.chat=l,v.completion=u,v.responses=y,v.embedding=d,v.textEmbedding=d,v.textEmbeddingModel=d,v.image=h,v.imageModel=h,v.tools=DZ,v}dM({compatibility:"strict"});var fM="vercel.ai.error",MZ=Symbol.for(fM),hM,PZ=class pM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[hM]=!0,this.name=t,this.cause=r}static isInstance(t){return pM.hasMarker(t,fM)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};hM=MZ;var oi=PZ,mM="AI_APICallError",gM=`vercel.ai.error.${mM}`,FZ=Symbol.for(gM),yM,Ul=class extends oi{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:mM,message:t,cause:o}),this[yM]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return oi.hasMarker(t,gM)}};yM=FZ;var bM="AI_EmptyResponseBodyError",vM=`vercel.ai.error.${bM}`,LZ=Symbol.for(vM),wM,$Z=class extends oi{constructor({message:t="Empty response body"}={}){super({name:bM,message:t}),this[wM]=!0}static isInstance(t){return oi.hasMarker(t,vM)}};wM=LZ;function xM(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var _M="AI_InvalidArgumentError",SM=`vercel.ai.error.${_M}`,BZ=Symbol.for(SM),EM,CM=class extends oi{constructor({message:t,cause:n,argument:r}){super({name:_M,message:t,cause:n}),this[EM]=!0,this.argument=r}static isInstance(t){return oi.hasMarker(t,SM)}};EM=BZ;var kM="AI_JSONParseError",TM=`vercel.ai.error.${kM}`,zZ=Symbol.for(TM),AM,Jv=class extends oi{constructor({text:t,cause:n}){super({name:kM,message:`JSON parsing failed: Text: ${t}.
Error message: ${xM(n)}`,cause:n}),this[AM]=!0,this.text=t}static isInstance(t){return oi.hasMarker(t,TM)}};AM=zZ;var NM="AI_LoadAPIKeyError",RM=`vercel.ai.error.${NM}`,UZ=Symbol.for(RM),IM,Cb=class extends oi{constructor({message:t}){super({name:NM,message:t}),this[IM]=!0}static isInstance(t){return oi.hasMarker(t,RM)}};IM=UZ;var jM="AI_TooManyEmbeddingValuesForCallError",OM=`vercel.ai.error.${jM}`,qZ=Symbol.for(OM),DM,HZ=class extends oi{constructor(e){super({name:jM,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[DM]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return oi.hasMarker(e,OM)}};DM=qZ;var MM="AI_TypeValidationError",PM=`vercel.ai.error.${MM}`,VZ=Symbol.for(PM),FM,GZ=class oC extends oi{constructor({value:t,cause:n}){super({name:MM,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${xM(n)}`,cause:n}),this[FM]=!0,this.value=t}static isInstance(t){return oi.hasMarker(t,PM)}static wrap({value:t,cause:n}){return oC.isInstance(n)&&n.value===t?n:new oC({value:t,cause:n})}};FM=VZ;var Qv=GZ,LM="AI_UnsupportedFunctionalityError",$M=`vercel.ai.error.${LM}`,KZ=Symbol.for($M),BM,kv=class extends oi{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:LM,message:n}),this[BM]=!0,this.functionality=t}static isInstance(t){return oi.hasMarker(t,$M)}};BM=KZ;let WZ=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var ZZ={};function lC(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function YZ(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,y=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=XZ(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function XZ(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function ox(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var JZ=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=WZ(n,t);if(e==null)return a;if(n.includes(r))throw new CM({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},QZ=JZ();function eY(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function OS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function tY({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Cb({message:`${r} API key must be a string.`});if(typeof ea>"u")throw new Cb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=ZZ[t],e==null)throw new Cb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Cb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var cC=Symbol.for("vercel.ai.validator");function nY(e){return{[cC]:!0,validate:e}}function rY(e){return typeof e=="object"&&e!==null&&cC in e&&e[cC]===!0&&"validate"in e}function aY(e){return rY(e)?e:iY(e)}function iY(e){return nY(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function sY({value:e,schema:t}){const n=Mk({value:e,schema:t});if(!n.success)throw Qv.wrap({value:e,cause:n.error});return n.value}function Mk({value:e,schema:t}){const n=aY(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Qv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Qv.wrap({value:e,cause:r})}}}function oY({text:e,schema:t}){try{const n=fo.parse(e);return t==null?n:sY({value:n,schema:t})}catch(n){throw Jv.isInstance(n)||Qv.isInstance(n)?n:new Jv({text:e,cause:n})}}function zM({text:e,schema:t}){try{const n=fo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Mk({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Jv.isInstance(n)?n:new Jv({text:e,cause:n})}}}function lY({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Mk({value:t[e],schema:n});if(!r.success)throw new CM({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var cY=()=>globalThis.fetch,uC=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>uY({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),uY=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=cY()})=>{try{const o=await s(e,{method:"POST",headers:eY(t),body:n.content,signal:i}),l=ox(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw OS(d)||Ul.isInstance(d)?d:new Ul({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(OS(u)||Ul.isInstance(u))?u:new Ul({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(OS(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new Ul({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function dC(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var dY=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=ox(r);if(s.trim()==="")return{responseHeaders:o,value:new Ul({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=oY({text:s,schema:e});return{responseHeaders:o,value:new Ul({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new Ul({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},fY=e=>async({response:t})=>{const n=ox(t);if(t.body==null)throw new $Z({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(YZ()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(zM({text:r,schema:e}))}}))}},UM=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=zM({text:a,schema:e}),s=ox(t);if(!i.success)throw new Ul({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:hY}=globalThis;function pY(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return hY(t)}function mY(e){return e==null?void 0:e.replace(/\/$/,"")}function Cs(e){if(gY(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:s,anyOf:o,oneOf:l,format:u,const:d,minLength:h,enum:m}=e,y={};if(n&&(y.description=n),r&&(y.required=r),u&&(y.format=u),d!==void 0&&(y.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(y.type=t.filter(v=>v!=="null")[0],y.nullable=!0):y.type=t:t==="null"?y.type="null":y.type=t),m!==void 0&&(y.enum=m),a!=null&&(y.properties=Object.entries(a).reduce((v,[b,x])=>(v[b]=Cs(x),v),{})),i&&(y.items=Array.isArray(i)?i.map(Cs):Cs(i)),s&&(y.allOf=s.map(Cs)),o)if(o.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=Cs(v[0]);typeof b=="object"&&(y.nullable=!0,Object.assign(y,b))}else y.anyOf=v.map(Cs),y.nullable=!0}else y.anyOf=o.map(Cs);return l&&(y.oneOf=l.map(Cs)),h!==void 0&&(y.minLength=h),y}function gY(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function yY(e){var t,n;const r=[],a=[];let i=!0;for(const{role:s,content:o}of e)switch(s){case"system":{if(!i)throw new kv({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{i=!1;const l=[];for(const u of o)switch(u.type){case"text":{l.push({text:u.text});break}case"image":{l.push(u.image instanceof URL?{fileData:{mimeType:(t=u.mimeType)!=null?t:"image/jpeg",fileUri:u.image.toString()}}:{inlineData:{mimeType:(n=u.mimeType)!=null?n:"image/jpeg",data:pY(u.image)}});break}case"file":{l.push(u.data instanceof URL?{fileData:{mimeType:u.mimeType,fileUri:u.data.toString()}}:{inlineData:{mimeType:u.mimeType,data:u.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new kv({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new kv({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function S3(e){return e.includes("/")?e:`models/${e}`}var bY=U.object({error:U.object({code:U.number().nullable(),message:U.string(),status:U.string()})}),fC=dY({errorSchema:bY,errorToMessage:e=>e.error.message});function vY(e,t,n,r){var a,i;const s=(a=e.tools)!=null&&a.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!u||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(s==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const d=[];for(const y of s)y.type==="provider-defined"?o.push({type:"unsupported-tool",tool:y}):d.push({name:y.name,description:(i=y.description)!=null?i:"",parameters:Cs(y.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:o};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:o};default:{const y=m;throw new kv({functionality:`Unsupported tool choice type: ${y}`})}}}function E3({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var wY=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,y;const v=e.type,b=[],x=lY({provider:"google",providerOptions:h,schema:EY}),w={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:s,presencePenalty:o,stopSequences:l,seed:d,responseMimeType:(u==null?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(u==null?void 0:u.type)==="json"&&u.schema!=null&&this.supportsStructuredOutputs?Cs(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:x==null?void 0:x.responseModalities},{contents:S,systemInstruction:E}=yY(t);switch(v){case"regular":{const{tools:C,toolConfig:T,toolWarnings:j}=vY(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:w,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:T,cachedContent:this.settings.cachedContent},warnings:[...b,...j]}}case"object-json":return{args:{generationConfig:{...w,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?Cs(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:w,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(y=e.tool.description)!=null?y:"",parameters:Cs(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=await this.getArgs(e),l=JSON.stringify(s),u=lC(await dC(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:m}=await uC({url:`${this.config.baseURL}/${S3(this.modelId)}:generateContent`,headers:u,body:s,failedResponseHandler:fC,successfulResponseHandler:UM(_Y),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:y,...v}=s,b=h.candidates[0],x=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,w=C3({parts:x,generateId:this.config.generateId}),S=h.usageMetadata;return{text:k3(x),files:(t=T3(x))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:w,finishReason:E3({finishReason:b.finishReason,hasToolCalls:w!=null&&w.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:y,rawSettings:v},rawResponse:{headers:d,body:m},warnings:o,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:A3({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=lC(await dC(this.config.headers),e.headers),{responseHeaders:i,value:s}=await uC({url:`${this.config.baseURL}/${S3(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:fC,successfulResponseHandler:fY(SY),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let u="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let y=!1;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,T;if(!v.success){b.enqueue({type:"error",error:v.error});return}const j=v.value,I=j.usageMetadata;I!=null&&(d={promptTokens:(x=I.promptTokenCount)!=null?x:NaN,completionTokens:(w=I.candidatesTokenCount)!=null?w:NaN});const R=(S=j.candidates)==null?void 0:S[0];if(R==null)return;const F=R.content;if(F!=null){const B=k3(F.parts);B!=null&&b.enqueue({type:"text-delta",textDelta:B});const H=T3(F.parts);if(H!=null)for(const Z of H)b.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const D=C3({parts:F.parts,generateId:m});if(D!=null)for(const Z of D)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),y=!0}if(R.finishReason!=null){u=E3({finishReason:R.finishReason,hasToolCalls:y});const B=(E=A3({groundingMetadata:R.groundingMetadata,generateId:m}))!=null?E:[];for(const H of B)b.enqueue({type:"source",source:H});h={google:{groundingMetadata:(C=R.groundingMetadata)!=null?C:null,safetyRatings:(T=R.safetyRatings)!=null?T:null}}}},flush(v){v.enqueue({type:"finish",finishReason:u,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function C3({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function k3(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function T3(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function A3({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var qM=U.object({role:U.string(),parts:U.array(U.union([U.object({text:U.string()}),U.object({functionCall:U.object({name:U.string(),args:U.unknown()})}),U.object({inlineData:U.object({mimeType:U.string(),data:U.string()})})])).nullish()}),xY=U.object({web:U.object({uri:U.string(),title:U.string()}).nullish(),retrievedContext:U.object({uri:U.string(),title:U.string()}).nullish()}),HM=U.object({webSearchQueries:U.array(U.string()).nullish(),retrievalQueries:U.array(U.string()).nullish(),searchEntryPoint:U.object({renderedContent:U.string()}).nullish(),groundingChunks:U.array(xY).nullish(),groundingSupports:U.array(U.object({segment:U.object({startIndex:U.number().nullish(),endIndex:U.number().nullish(),text:U.string().nullish()}),segment_text:U.string().nullish(),groundingChunkIndices:U.array(U.number()).nullish(),supportChunkIndices:U.array(U.number()).nullish(),confidenceScores:U.array(U.number()).nullish(),confidenceScore:U.array(U.number()).nullish()})).nullish(),retrievalMetadata:U.union([U.object({webDynamicRetrievalScore:U.number()}),U.object({})]).nullish()}),VM=U.object({category:U.string(),probability:U.string(),probabilityScore:U.number().nullish(),severity:U.string().nullish(),severityScore:U.number().nullish(),blocked:U.boolean().nullish()}),_Y=U.object({candidates:U.array(U.object({content:qM.nullish().or(U.object({}).strict()),finishReason:U.string().nullish(),safetyRatings:U.array(VM).nullish(),groundingMetadata:HM.nullish()})),usageMetadata:U.object({promptTokenCount:U.number().nullish(),candidatesTokenCount:U.number().nullish(),totalTokenCount:U.number().nullish()}).nullish()}),SY=U.object({candidates:U.array(U.object({content:qM.nullish(),finishReason:U.string().nullish(),safetyRatings:U.array(VM).nullish(),groundingMetadata:HM.nullish()})).nullish(),usageMetadata:U.object({promptTokenCount:U.number().nullish(),candidatesTokenCount:U.number().nullish(),totalTokenCount:U.number().nullish()}).nullish()}),EY=U.object({responseModalities:U.array(U.enum(["TEXT","IMAGE"])).nullish()}),CY=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new HZ({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=lC(await dC(this.config.headers),t),{responseHeaders:a,value:i}=await uC({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(s=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:s}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:fC,successfulResponseHandler:UM(kY),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(s=>s.values),usage:void 0,rawResponse:{headers:a}}}},kY=U.object({embeddings:U.array(U.object({values:U.array(U.number())}))});function TY(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function GM(e={}){var t;const n=(t=mY(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":tY({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(o,l={})=>{var u;return new wY(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(u=e.generateId)!=null?u:QZ,isSupportedUrl:TY,fetch:e.fetch})},i=(o,l={})=>new CY(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(o,l)};return s.languageModel=a,s.chat=a,s.generativeAI=a,s.embedding=i,s.textEmbedding=i,s.textEmbeddingModel=i,s}GM();var KM="vercel.ai.error",AY=Symbol.for(KM),WM,NY=class ZM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[WM]=!0,this.name=t,this.cause=r}static isInstance(t){return ZM.hasMarker(t,KM)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};WM=AY;var za=NY,YM="AI_APICallError",XM=`vercel.ai.error.${YM}`,RY=Symbol.for(XM),JM,ql=class extends za{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:s,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:YM,message:e,cause:s}),this[JM]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=o,this.data=l}static isInstance(e){return za.hasMarker(e,XM)}};JM=RY;var QM="AI_EmptyResponseBodyError",e8=`vercel.ai.error.${QM}`,IY=Symbol.for(e8),t8,jY=class extends za{constructor({message:e="Empty response body"}={}){super({name:QM,message:e}),this[t8]=!0}static isInstance(e){return za.hasMarker(e,e8)}};t8=IY;function n8(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var r8="AI_InvalidArgumentError",a8=`vercel.ai.error.${r8}`,OY=Symbol.for(a8),i8,DY=class extends za{constructor({message:t,cause:n,argument:r}){super({name:r8,message:t,cause:n}),this[i8]=!0,this.argument=r}static isInstance(t){return za.hasMarker(t,a8)}};i8=OY;var s8="AI_InvalidPromptError",o8=`vercel.ai.error.${s8}`,MY=Symbol.for(o8),l8,PY=class extends za{constructor({prompt:e,message:t,cause:n}){super({name:s8,message:`Invalid prompt: ${t}`,cause:n}),this[l8]=!0,this.prompt=e}static isInstance(e){return za.hasMarker(e,o8)}};l8=MY;var c8="AI_InvalidResponseDataError",u8=`vercel.ai.error.${c8}`,FY=Symbol.for(u8),d8,DS=class extends za{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:c8,message:t}),this[d8]=!0,this.data=e}static isInstance(e){return za.hasMarker(e,u8)}};d8=FY;var f8="AI_JSONParseError",h8=`vercel.ai.error.${f8}`,LY=Symbol.for(h8),p8,ew=class extends za{constructor({text:e,cause:t}){super({name:f8,message:`JSON parsing failed: Text: ${e}.
Error message: ${n8(t)}`,cause:t}),this[p8]=!0,this.text=e}static isInstance(e){return za.hasMarker(e,h8)}};p8=LY;var m8="AI_LoadAPIKeyError",g8=`vercel.ai.error.${m8}`,$Y=Symbol.for(g8),y8,kb=class extends za{constructor({message:e}){super({name:m8,message:e}),this[y8]=!0}static isInstance(e){return za.hasMarker(e,g8)}};y8=$Y;var b8="AI_TypeValidationError",v8=`vercel.ai.error.${b8}`,BY=Symbol.for(v8),w8,zY=class hC extends za{constructor({value:t,cause:n}){super({name:b8,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${n8(n)}`,cause:n}),this[w8]=!0,this.value=t}static isInstance(t){return za.hasMarker(t,v8)}static wrap({value:t,cause:n}){return hC.isInstance(n)&&n.value===t?n:new hC({value:t,cause:n})}};w8=BY;var tw=zY,x8="AI_UnsupportedFunctionalityError",_8=`vercel.ai.error.${x8}`,UY=Symbol.for(_8),S8,Ts=class extends za{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:x8,message:t}),this[S8]=!0,this.functionality=e}static isInstance(e){return za.hasMarker(e,_8)}};S8=UY;let qY=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},N3=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function MS(e){}function HY(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=MS,onError:n=MS,onRetry:r=MS,onComment:a}=e;let i="",s=!0,o,l="",u="";function d(b){const x=s?b.replace(/^\xEF\xBB\xBF/,""):b,[w,S]=VY(`${i}${x}`);for(const E of w)h(E);i=S,s=!1}function h(b){if(b===""){y();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const x=b.indexOf(":");if(x!==-1){const w=b.slice(0,x),S=b[x+1]===" "?2:1,E=b.slice(x+S);m(w,E,b);return}m(b,"",b)}function m(b,x,w){switch(b){case"event":u=x;break;case"data":l=`${l}${x}
`;break;case"id":o=x.includes("\0")?void 0:x;break;case"retry":/^\d+$/.test(x)?r(parseInt(x,10)):n(new N3(`Invalid \`retry\` value: "${x}"`,{type:"invalid-retry",value:x,line:w}));break;default:n(new N3(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:x,line:w}));break}}function y(){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u=""}function v(b={}){i&&b.consume&&h(i),s=!0,o=void 0,l="",u="",i=""}return{feed:d,reset:v}}function VY(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(a!==-1&&i!==-1?s=Math.min(a,i):a!==-1?s=a:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const o=e.slice(r,s);t.push(o),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class GY extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=HY({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var KY={};function nw(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function lx(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var WY=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=qY(n,t);if(e==null)return a;if(n.includes(r))throw new DY({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Tb=WY();function ZY(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function PS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function YY({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new kb({message:`${r} API key must be a string.`});if(typeof ea>"u")throw new kb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=KY[t],e==null)throw new kb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new kb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var pC=Symbol.for("vercel.ai.validator");function XY(e){return{[pC]:!0,validate:e}}function JY(e){return typeof e=="object"&&e!==null&&pC in e&&e[pC]===!0&&"validate"in e}function QY(e){return JY(e)?e:eX(e)}function eX(e){return XY(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function tX({value:e,schema:t}){const n=E8({value:e,schema:t});if(!n.success)throw tw.wrap({value:e,cause:n.error});return n.value}function E8({value:e,schema:t}){const n=QY(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:tw.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:tw.wrap({value:e,cause:r})}}}function nX({text:e,schema:t}){try{const n=fo.parse(e);return t==null?n:tX({value:n,schema:t})}catch(n){throw ew.isInstance(n)||tw.isInstance(n)?n:new ew({text:e,cause:n})}}function C8({text:e,schema:t}){try{const n=fo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=E8({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:ew.isInstance(n)?n:new ew({text:e,cause:n})}}}function FS(e){try{return fo.parse(e),!0}catch{return!1}}var rX=()=>globalThis.fetch,rw=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>aX({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),aX=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=rX()})=>{try{const o=await s(e,{method:"POST",headers:ZY(t),body:n.content,signal:i}),l=lx(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw PS(d)||ql.isInstance(d)?d:new ql({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(PS(u)||ql.isInstance(u))?u:new ql({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(PS(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new ql({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},iX=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=lx(r);if(s.trim()==="")return{responseHeaders:o,value:new ql({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=nX({text:s,schema:e});return{responseHeaders:o,value:new ql({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new ql({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},k8=e=>async({response:t})=>{const n=lx(t);if(t.body==null)throw new jY({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new GY).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(C8({text:r,schema:e}))}}))}},T8=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=C8({text:a,schema:e}),s=lx(t);if(!i.success)throw new ql({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:sX}=globalThis;function oX(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return sX(t)}function lX(e){return e==null?void 0:e.replace(/\/$/,"")}var cX=Object.defineProperty,uX=Object.defineProperties,dX=Object.getOwnPropertyDescriptors,aw=Object.getOwnPropertySymbols,A8=Object.prototype.hasOwnProperty,N8=Object.prototype.propertyIsEnumerable,R3=(e,t,n)=>t in e?cX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,as=(e,t)=>{for(var n in t||(t={}))A8.call(t,n)&&R3(e,n,t[n]);if(aw)for(var n of aw(t))N8.call(t,n)&&R3(e,n,t[n]);return e},Tv=(e,t)=>uX(e,dX(t)),iw=(e,t)=>{var n={};for(var r in e)A8.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aw)for(var r of aw(e))t.indexOf(r)<0&&N8.call(e,r)&&(n[r]=e[r]);return n};function Oo(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function fX(e){var t,n,r;const a=[];for(const{role:i,content:s,providerMetadata:o}of e)switch(i){case"system":{a.push({role:"system",content:s,cache_control:Oo(o)});break}case"user":{if(s.length===1&&((t=s[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:s[0].text,cache_control:(n=Oo(o))!=null?n:Oo(s[0].providerMetadata)});break}const l=Oo(o),u=s.map(d=>{var h,m,y,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=Oo(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(m=d.mimeType)!=null?m:"image/jpeg"};base64,${oX(d.image)}`},cache_control:(y=Oo(d.providerMetadata))!=null?y:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=Oo(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:u});break}case"assistant":{let l="";const u=[];for(const d of s)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{u.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:u.length>0?u:void 0,cache_control:Oo(o)});break}case"tool":{for(const l of s)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Oo(o))!=null?r:Oo(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function I3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function sw(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Pk=U.object({error:U.object({message:U.string(),type:U.string(),param:U.any().nullable(),code:U.string().nullable()})}),ow=iX({errorSchema:Pk,errorToMessage:e=>e.error.message});function hX(e){return"parameters"in e}var pX=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:s,seed:o,stopSequences:l,responseFormat:u,topK:d,providerMetadata:h}){var m;const y=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},b=as(as(as({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:s,seed:o,stop:l,response_format:u,top_k:d,messages:fX(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(y){case"regular":return as(as({},b),yX(e));case"object-json":return Tv(as({},b),{response_format:{type:"json_object"}});case"object-tool":return Tv(as({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const x=y;throw new Ts({functionality:`${x} mode`})}}}async doGenerate(e){var t,n,r,a,i,s,o;const l=this.getArgs(e),{responseHeaders:u,value:d}=await rw({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:nw(this.config.headers(),e.headers),body:l,failedResponseHandler:ow,successfulResponseHandler:T8(mX),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:m}=h,y=iw(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var x;return{toolCallType:"function",toolCallId:(x=b.id)!=null?x:Tb(),toolName:b.function.name,args:b.function.arguments}}),finishReason:sw(v.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(o=(s=d.usage)==null?void 0:s.completion_tokens)!=null?o:0},rawCall:{rawPrompt:m,rawSettings:y},rawResponse:{headers:u},warnings:[],logprobs:I3(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await rw({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:nw(this.config.headers(),e.headers),body:Tv(as({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:ow,successfulResponseHandler:k8(gX),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,s=iw(a,["messages"]),o=[];let l="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var y,v,b,x,w,S,E,C,T,j,I,R;if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const F=h.value;if("error"in F){l="error",m.enqueue({type:"error",error:F.error});return}F.id&&m.enqueue({type:"response-metadata",id:F.id}),F.model&&m.enqueue({type:"response-metadata",modelId:F.model}),F.usage!=null&&(u={promptTokens:F.usage.prompt_tokens,completionTokens:F.usage.completion_tokens});const B=F.choices[0];if((B==null?void 0:B.finish_reason)!=null&&(l=sw(B.finish_reason)),(B==null?void 0:B.delta)==null)return;const H=B.delta;H.content!=null&&m.enqueue({type:"text-delta",textDelta:H.content}),H.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:H.reasoning});const D=I3(B==null?void 0:B.logprobs);if(D!=null&&D.length&&(d===void 0&&(d=[]),d.push(...D)),H.tool_calls!=null)for(const Z of H.tool_calls){const V=Z.index;if(o[V]==null){if(Z.type!=="function")throw new DS({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new DS({data:Z,message:"Expected 'id' to be a string."});if(((y=Z.function)==null?void 0:y.name)==null)throw new DS({data:Z,message:"Expected 'function.name' to be a string."});o[V]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ae=o[V];if(ae==null)throw new Error("Tool call is missing");((b=ae.function)==null?void 0:b.name)!=null&&((x=ae.function)==null?void 0:x.arguments)!=null&&FS(ae.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(w=ae.id)!=null?w:Tb(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const ue=o[V];if(ue==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(ue.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ue.id,toolName:ue.function.name,argsTextDelta:(T=Z.function.arguments)!=null?T:""}),((j=ue.function)==null?void 0:j.name)!=null&&((I=ue.function)==null?void 0:I.arguments)!=null&&FS(ue.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(R=ue.id)!=null?R:Tb(),toolName:ue.function.name,args:ue.function.arguments}),ue.sent=!0)}},flush(h){var m;if(l==="tool-calls")for(const y of o)y.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=y.id)!=null?m:Tb(),toolName:y.function.name,args:FS(y.function.arguments)?y.function.arguments:"{}"}),y.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},R8=U.object({id:U.string().optional(),model:U.string().optional(),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number(),total_tokens:U.number()}).nullish()}),mX=R8.extend({choices:U.array(U.object({message:U.object({role:U.literal("assistant"),content:U.string().nullable().optional(),reasoning:U.string().nullable().optional(),tool_calls:U.array(U.object({id:U.string().optional().nullable(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).optional()}),index:U.number(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullable().optional(),finish_reason:U.string().optional().nullable()}))}),gX=U.union([R8.extend({choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).optional(),content:U.string().nullish(),reasoning:U.string().nullish().optional(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullable().optional(),index:U.number()}))}),Pk]);function yX(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(s=>hX(s)?{type:"function",function:{name:s.name,description:s.description,parameters:s.parameters}}:{type:"function",function:{name:s.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const s=i;throw new Error(`Unsupported tool choice type: ${s}`)}}}function bX({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new PY({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ts({functionality:"images"});case"file":throw new Ts({functionality:"file attachments"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ts({functionality:"tool-call messages"});case"reasoning":throw new Ts({functionality:"reasoning messages"});case"redacted-reasoning":throw new Ts({functionality:"redacted reasoning messages"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Ts({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a}}function j3(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,s])=>({token:i,logprob:s})):[]}})}var vX=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:s,presencePenalty:o,seed:l,responseFormat:u,topK:d,stopSequences:h,providerMetadata:m}){var y,v;const b=e.type,x=(y=m==null?void 0:m.openrouter)!=null?y:{},{prompt:w}=bX({prompt:n,inputFormat:t}),S=as(as(as({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:o,seed:l,stop:h,response_format:u,top_k:d,prompt:w,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),x);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new Ts({functionality:"tools"});if(e.toolChoice)throw new Ts({functionality:"toolChoice"});return S}case"object-json":throw new Ts({functionality:"object-json mode"});case"object-tool":throw new Ts({functionality:"object-tool mode"});default:{const E=b;throw new Ts({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const s=this.getArgs(e),{responseHeaders:o,value:l}=await rw({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:nw(this.config.headers(),e.headers),body:s,failedResponseHandler:ow,successfulResponseHandler:T8(O3),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=s,{prompt:d}=u,h=iw(u,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const m=l.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:sw(m.finish_reason),logprobs:j3(m.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await rw({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:nw(this.config.headers(),e.headers),body:Tv(as({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:ow,successfulResponseHandler:k8(O3),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,s=iw(a,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){o="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;if("error"in m){o="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(l={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const y=m.choices[0];(y==null?void 0:y.finish_reason)!=null&&(o=sw(y.finish_reason)),(y==null?void 0:y.text)!=null&&h.enqueue({type:"text-delta",textDelta:y.text});const v=j3(y==null?void 0:y.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:o,logprobs:u,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},O3=U.union([U.object({id:U.string().optional(),model:U.string().optional(),choices:U.array(U.object({text:U.string(),reasoning:U.string().nullish().optional(),finish_reason:U.string().nullish(),index:U.number(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullable().optional()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).optional().nullable()}),Pk]);function I8(e={}){var t,n,r;const a=(n=lX((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",s=()=>as({Authorization:`Bearer ${YY({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(h,m={})=>new pX(h,m,{provider:"openrouter.chat",url:({path:y})=>`${a}${y}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,m={})=>new vX(h,m,{provider:"openrouter.completion",url:({path:y})=>`${a}${y}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,m):o(h,m)},d=function(h,m){return u(h,m)};return d.languageModel=u,d.chat=o,d.completion=l,d}I8({compatibility:"strict"});var md={},LS={},D3;function M3(){return D3||(D3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(LS)),LS}var P3;function wX(){return P3||(P3=1,function(e){var t=md&&md.__createBinding||(Object.create?function(u,d,h,m){m===void 0&&(m=h);var y=Object.getOwnPropertyDescriptor(d,h);(!y||("get"in y?!d.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,m,y)}:function(u,d,h,m){m===void 0&&(m=h),u[m]=d[h]}),n=md&&md.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,u,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=M3();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(M3(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function s(u,d=r.Allow.ALL){if(typeof u!="string")throw new TypeError(`expecting str, got ${typeof u}`);if(!u.trim())throw new Error(`${u} is empty`);return o(u.trim(),d)}e.parseJSON=s;const o=(u,d)=>{const h=u.length;let m=0;const y=T=>{throw new a(`${T} at position ${m}`)},v=T=>{throw new i(`${T} at position ${m}`)},b=()=>(C(),m>=h&&y("Unexpected end of input"),u[m]==='"'?x():u[m]==="{"?w():u[m]==="["?S():u.substring(m,m+4)==="null"||r.Allow.NULL&d&&h-m<4&&"null".startsWith(u.substring(m))?(m+=4,null):u.substring(m,m+4)==="true"||r.Allow.BOOL&d&&h-m<4&&"true".startsWith(u.substring(m))?(m+=4,!0):u.substring(m,m+5)==="false"||r.Allow.BOOL&d&&h-m<5&&"false".startsWith(u.substring(m))?(m+=5,!1):u.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&d&&h-m<8&&"Infinity".startsWith(u.substring(m))?(m+=8,1/0):u.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-m&&h-m<9&&"-Infinity".startsWith(u.substring(m))?(m+=9,-1/0):u.substring(m,m+3)==="NaN"||r.Allow.NAN&d&&h-m<3&&"NaN".startsWith(u.substring(m))?(m+=3,NaN):E()),x=()=>{const T=m;let j=!1;for(m++;m<h&&(u[m]!=='"'||j&&u[m-1]==="\\");)j=u[m]==="\\"?!j:!1,m++;if(u.charAt(m)=='"')try{return JSON.parse(u.substring(T,++m-Number(j)))}catch(I){v(String(I))}else if(r.Allow.STR&d)try{return JSON.parse(u.substring(T,m-Number(j))+'"')}catch{return JSON.parse(u.substring(T,u.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},w=()=>{m++,C();const T={};try{for(;u[m]!=="}";){if(C(),m>=h&&r.Allow.OBJ&d)return T;const j=x();C(),m++;try{const I=b();T[j]=I}catch(I){if(r.Allow.OBJ&d)return T;throw I}C(),u[m]===","&&m++}}catch{if(r.Allow.OBJ&d)return T;y("Expected '}' at end of object")}return m++,T},S=()=>{m++;const T=[];try{for(;u[m]!=="]";)T.push(b()),C(),u[m]===","&&m++}catch{if(r.Allow.ARR&d)return T;y("Expected ']' at end of array")}return m++,T},E=()=>{if(m===0){u==="-"&&v("Not sure what '-' is");try{return JSON.parse(u)}catch(j){if(r.Allow.NUM&d)try{return JSON.parse(u.substring(0,u.lastIndexOf("e")))}catch{}v(String(j))}}const T=m;for(u[m]==="-"&&m++;u[m]&&",]}".indexOf(u[m])===-1;)m++;m==h&&!(r.Allow.NUM&d)&&y("Unterminated number literal");try{return JSON.parse(u.substring(T,m))}catch{u.substring(T,m)==="-"&&y("Not sure what '-' is");try{return JSON.parse(u.substring(T,u.lastIndexOf("e")))}catch(I){v(String(I))}}},C=()=>{for(;m<h&&` 
\r	`.includes(u[m]);)m++};return b()},l=s;e.parse=l}(md)),md}var xX=wX();function $S(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new Ar({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(jh(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const s of n)switch(s.type){case"text":{a.push(s.text);break}case"tool-call":{i.push({function:{arguments:s.args,name:s.toolName},id:s.toolCallId,type:"function"});break}default:{const o=s;throw new Error(`Unsupported part: ${o}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var _X=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=xX.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const s=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(s==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:zo(),type:"function"});const o=this._toolCalls[a];o.function.arguments=s,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function SX({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var EX=U.object({error:U.object({code:U.string().nullable(),message:U.string(),param:U.any().nullable(),type:U.string()})}),mC=YD({errorSchema:EX,errorToMessage:e=>e.error.message});function CX({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):i.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const s=a.type;switch(s){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=s;throw new Ar({functionality:`Unsupported tool choice type: ${o}`})}}}function kX(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var TX=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},AX=e=>async({response:t})=>{const n=b0(t);if(t.body===null)throw new Tk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new TX).pipeThrough(new TransformStream({transform(r,a){a.enqueue(Pd({schema:e,text:r}))}}))}},NX=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:s,stopSequences:o,temperature:l,topK:u,topP:d}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const y={format:i==null?void 0:i.type,model:this.modelId,options:kX({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:s,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:u,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=CX({mode:n});return{args:{...y,messages:$S(a),tools:v},type:h,warnings:[...m,...b]}}case"object-json":return{args:{...y,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:$S(a)},type:h,warnings:m};case"object-tool":return{args:{...y,messages:$S(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:s,value:o}=await ro({abortSignal:e.abortSignal,body:i,failedResponseHandler:mC,fetch:this.config.fetch,headers:el(this.config.headers(),e.headers),successfulResponseHandler:Xd(RX),url:`${this.config.baseURL}/chat`}),{messages:l,...u}=i,d=(t=o.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:zo(),toolCallType:"function",toolName:h.function.name}});return{finishReason:SX({finishReason:o.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},request:{body:JSON.stringify(i)},text:(n=o.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const y=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...y.response}),y.text&&b.enqueue({textDelta:y.text,type:"text-delta"}),y.toolCalls)for(const x of y.toolCalls)b.enqueue({argsTextDelta:x.args,toolCallId:x.toolCallId,toolCallType:"function",toolName:x.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...x});b.enqueue({finishReason:y.finishReason,logprobs:y.logprobs,providerMetadata:y.providerMetadata,type:"finish",usage:y.usage}),b.close()}});return{rawCall:y.rawCall,rawResponse:y.rawResponse,stream:v,warnings:y.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await ro({abortSignal:e.abortSignal,body:t,failedResponseHandler:mC,fetch:this.config.fetch,headers:el(this.config.headers(),e.headers),successfulResponseHandler:AX(IX),url:`${this.config.baseURL}/chat`}),{messages:s,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,u=new _X({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(y){y.enqueue({finishReason:d,type:"finish",usage:h})},async transform(y,v){if(!y.success){v.enqueue({error:y.error,type:"error"});return}const b=y.value;if(b.done){d=u.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}m&&u.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},RX=U.object({created_at:U.string(),done:U.literal(!0),done_reason:U.string().optional().nullable(),eval_count:U.number(),eval_duration:U.number(),load_duration:U.number().optional(),message:U.object({content:U.string(),role:U.string(),tool_calls:U.array(U.object({function:U.object({arguments:U.record(U.any()),name:U.string()}),id:U.string().optional()})).optional().nullable()}),model:U.string(),prompt_eval_count:U.number().optional(),prompt_eval_duration:U.number().optional(),total_duration:U.number()}),IX=U.discriminatedUnion("done",[U.object({created_at:U.string(),done:U.literal(!1),message:U.object({content:U.string(),role:U.string()}),model:U.string()}),U.object({created_at:U.string(),done:U.literal(!0),eval_count:U.number(),eval_duration:U.number(),load_duration:U.number().optional(),model:U.string(),prompt_eval_count:U.number().optional(),prompt_eval_duration:U.number().optional(),total_duration:U.number()})]),jX=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new Nk({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await ro({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:mC,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Xd(OX),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},OX=U.object({embeddings:U.array(U.array(U.number())),prompt_eval_count:U.number().nullable()});function j8(e={}){var t;const n=(t=JD(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(o,l={})=>new NX(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(o,l={})=>new jX(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),s=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(o,l)};return s.chat=a,s.embedding=i,s.languageModel=a,s.textEmbedding=i,s.textEmbeddingModel=i,s}j8();let DX=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function Ph(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function MX(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,y=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=PX(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function PX(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function cx(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var FX=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=DX(n,t);if(e==null)return a;if(n.includes(r))throw new Ak({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},BS=FX();function LX(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function zS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var gC=Symbol.for("vercel.ai.validator");function $X(e){return{[gC]:!0,validate:e}}function BX(e){return typeof e=="object"&&e!==null&&gC in e&&e[gC]===!0&&"validate"in e}function zX(e){return BX(e)?e:UX(e)}function UX(e){return $X(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function qX({value:e,schema:t}){const n=O8({value:e,schema:t});if(!n.success)throw pu.wrap({value:e,cause:n.error});return n.value}function O8({value:e,schema:t}){const n=zX(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:pu.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:pu.wrap({value:e,cause:r})}}}function HX({text:e,schema:t}){try{const n=fo.parse(e);return t==null?n:qX({value:n,schema:t})}catch(n){throw hu.isInstance(n)||pu.isInstance(n)?n:new hu({text:e,cause:n})}}function D8({text:e,schema:t}){try{const n=fo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=O8({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:hu.isInstance(n)?n:new hu({text:e,cause:n})}}}function F3(e){try{return fo.parse(e),!0}catch{return!1}}var VX=()=>globalThis.fetch,Fh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>GX({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),GX=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=VX()})=>{try{const o=await s(e,{method:"POST",headers:LX(t),body:n.content,signal:i}),l=cx(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw zS(d)||_a.isInstance(d)?d:new _a({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(zS(u)||_a.isInstance(u))?u:new _a({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(zS(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new _a({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},ux=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=cx(r);if(s.trim()==="")return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=HX({text:s,schema:e});return{responseHeaders:o,value:new _a({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},M8=e=>async({response:t})=>{const n=cx(t);if(t.body==null)throw new Tk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(MX()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(D8({text:r,schema:e}))}}))}},dx=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=D8({text:a,schema:e}),s=cx(t);if(!i.success)throw new _a({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:KX}=globalThis;function WX(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return KX(t)}function ZX(e){return e==null?void 0:e.replace(/\/$/,"")}function Bm(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function YX(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Bm({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Bm(r[0])});break}t.push({role:"user",content:r.map(s=>{var o;const l=Bm(s);switch(s.type){case"text":return{type:"text",text:s.text,...l};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(o=s.mimeType)!=null?o:"image/jpeg"};base64,${WX(s.image)}`},...l};case"file":throw new Ar({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let s="";const o=[];for(const l of r){const u=Bm(l);switch(l.type){case"text":{s+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...u});break}}}t.push({role:"assistant",content:s,tool_calls:o.length>0?o:void 0,...i});break}case"tool":{for(const s of r){const o=Bm(s);t.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result),...o})}break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}}return t}function lw({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function cw(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var XX=U.object({error:U.object({message:U.string(),type:U.string().nullish(),param:U.any().nullish(),code:U.union([U.string(),U.number()]).nullish()})}),fx={errorSchema:XX,errorToMessage:e=>e.error.message};function JX({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):s.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=o;throw new Ar({functionality:`Unsupported tool choice type: ${l}`})}}}var QX=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:fx;this.chunkSchema=tJ(i.errorSchema),this.failedResponseHandler=ux(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,providerMetadata:l,stopSequences:u,responseFormat:d,seed:h}){var m,y;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const x={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(m=d.name)!=null?m:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:h,...l==null?void 0:l[this.providerOptionsName],messages:YX(t)};switch(v){case"regular":{const{tools:w,tool_choice:S,toolWarnings:E}=JX({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...x,tools:w,tool_choice:S},warnings:[...b,...E]}}case"object-json":return{args:{...x,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(y=e.name)!=null?y:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{...x,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const w=v;throw new Error(`Unsupported type: ${w}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l,u;const{args:d,warnings:h}=this.getArgs({...e}),m=JSON.stringify(d),{responseHeaders:y,value:v,rawValue:b}=await Fh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ph(this.config.headers(),e.headers),body:d,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:dx(eJ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:x,...w}=d,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var T;return{toolCallType:"function",toolCallId:(T=C.id)!=null?T:BS(),toolName:C.function.name,args:C.function.arguments}}),finishReason:cw(S.finish_reason),usage:{promptTokens:(o=(s=v.usage)==null?void 0:s.prompt_tokens)!=null?o:NaN,completionTokens:(u=(l=v.usage)==null?void 0:l.completion_tokens)!=null?u:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:x,rawSettings:w},rawResponse:{headers:y,body:b},response:lw(v),warnings:h,request:{body:m}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const w of v.reasoning)w.type==="text"&&x.enqueue({type:"reasoning",textDelta:w.text});else x.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&x.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const w of v.toolCalls)x.enqueue({type:"tool-call",...w});x.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),x.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:o}=await Fh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ph(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:M8(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...u}=n,d=[];let h="unknown",m={promptTokens:void 0,completionTokens:void 0},y=!0;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,T,j,I,R,F,B,H,D,Z;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const V=v.value;if(i==null||i.processChunk(v.rawValue),"error"in V){h="error",b.enqueue({type:"error",error:V.error.message});return}y&&(y=!1,b.enqueue({type:"response-metadata",...lw(V)})),V.usage!=null&&(m={promptTokens:(x=V.usage.prompt_tokens)!=null?x:void 0,completionTokens:(w=V.usage.completion_tokens)!=null?w:void 0});const ue=V.choices[0];if((ue==null?void 0:ue.finish_reason)!=null&&(h=cw(ue.finish_reason)),(ue==null?void 0:ue.delta)==null)return;const ae=ue.delta;if(ae.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:ae.reasoning_content}),ae.content!=null&&b.enqueue({type:"text-delta",textDelta:ae.content}),ae.tool_calls!=null)for(const ne of ae.tool_calls){const X=ne.index;if(d[X]==null){if(ne.type!=="function")throw new _h({data:ne,message:"Expected 'function' type."});if(ne.id==null)throw new _h({data:ne,message:"Expected 'id' to be a string."});if(((S=ne.function)==null?void 0:S.name)==null)throw new _h({data:ne,message:"Expected 'function.name' to be a string."});d[X]={id:ne.id,type:"function",function:{name:ne.function.name,arguments:(E=ne.function.arguments)!=null?E:""},hasFinished:!1};const L=d[X];((C=L.function)==null?void 0:C.name)!=null&&((T=L.function)==null?void 0:T.arguments)!=null&&(L.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:L.id,toolName:L.function.name,argsTextDelta:L.function.arguments}),F3(L.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(j=L.id)!=null?j:BS(),toolName:L.function.name,args:L.function.arguments}),L.hasFinished=!0));continue}const ie=d[X];ie.hasFinished||(((I=ne.function)==null?void 0:I.arguments)!=null&&(ie.function.arguments+=(F=(R=ne.function)==null?void 0:R.arguments)!=null?F:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:(B=ne.function.arguments)!=null?B:""}),((H=ie.function)==null?void 0:H.name)!=null&&((D=ie.function)==null?void 0:D.arguments)!=null&&F3(ie.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=ie.id)!=null?Z:BS(),toolName:ie.function.name,args:ie.function.arguments}),ie.hasFinished=!0))}},flush(v){var b,x;const w=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=m.promptTokens)!=null?b:NaN,completionTokens:(x=m.completionTokens)!=null?x:NaN},...w&&{providerMetadata:w}})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},warnings:r,request:{body:a}}}},eJ=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({message:U.object({role:U.literal("assistant").nullish(),content:U.string().nullish(),reasoning_content:U.string().nullish(),tool_calls:U.array(U.object({id:U.string().nullish(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).nullish()}),finish_reason:U.string().nullish()})),usage:U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish()}).nullish()}),tJ=e=>U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).nullish(),content:U.string().nullish(),reasoning_content:U.string().nullish(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),finish_reason:U.string().nullish()})),usage:U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish()}).nullish()}),e]);function nJ({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Ll({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ar({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ar({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Ar({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var rJ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:fx;this.chunkSchema=iJ(a.errorSchema),this.failedResponseHandler=ux(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h,providerMetadata:m}){var y;const v=e.type,b=[];s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:x,stopSequences:w}=nJ({prompt:n,inputFormat:t}),S=[...w??[],...u??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:x,stop:S.length>0?S:void 0};switch(v){case"regular":{if((y=e.tools)!=null&&y.length)throw new Ar({functionality:"tools"});if(e.toolChoice)throw new Ar({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new Ar({functionality:"object-json mode"});case"object-tool":throw new Ar({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:s}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:u}=await Fh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ph(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:dx(aJ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,m=l.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:cw(m.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o,body:u},response:lw(l),warnings:s,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await Fh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ph(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:M8(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const y=h.value;if("error"in y){l="error",m.enqueue({type:"error",error:y.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...lw(y)})),y.usage!=null&&(u={promptTokens:y.usage.prompt_tokens,completionTokens:y.usage.completion_tokens});const v=y.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=cw(v.finish_reason)),(v==null?void 0:v.text)!=null&&m.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},aJ=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),iJ=e=>U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string().nullish(),index:U.number()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),e]),sJ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new Nk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await Fh({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ph(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:ux((r=this.config.errorStructure)!=null?r:fx),successfulResponseHandler:dx(oJ),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},oJ=U.object({data:U.array(U.object({embedding:U.array(U.number())})),usage:U.object({prompt_tokens:U.number()}).nullish()}),lJ=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h,m;const y=[];r!=null&&y.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&y.push({type:"unsupported-setting",setting:"seed"});const v=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:b,responseHeaders:x}=await Fh({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ph(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:ux((m=this.config.errorStructure)!=null?m:fx),successfulResponseHandler:dx(cJ),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(w=>w.b64_json),warnings:y,response:{timestamp:v,modelId:this.modelId,headers:x}}}},cJ=U.object({data:U.array(U.object({b64_json:U.string()}))});function uJ(e){const t=ZX(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const y=new URL(`${t}${m}`);return e.queryParams&&(y.search=new URLSearchParams(e.queryParams).toString()),y.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>s(h,m),s=(h,m={})=>new QX(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),o=(h,m={})=>new rJ(h,m,a("completion")),l=(h,m={})=>new sJ(h,m,a("embedding")),u=(h,m={})=>new lJ(h,m,a("image")),d=(h,m)=>i(h,m);return d.languageModel=i,d.chatModel=s,d.completionModel=o,d.textEmbeddingModel=l,d.imageModel=u,d}const au=(e,t)=>`${e}:${t}`,lc=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Lh=e=>e==="openai"||e==="openrouter"||e==="google",Fk=e=>e==="ollama"||e==="openai-compatible",Sd=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",cu=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],dJ={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},P8=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function F8(e,t,n){try{switch(e.type){case"openai":return dM({apiKey:n})(t);case"google":return GM({apiKey:n})(t);case"openrouter":return I8({apiKey:n})(t);case"ollama":return j8({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return uJ({baseURL:P8(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function Lk(e,t,n){const a=Bn.getState().getAllAvailableModelDefsForProvider(e.id).find(s=>s.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=F8(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:au(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const L8={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]},zm=new Map,fJ=5*60*1e3,hJ=(e,t)=>{var i,s,o,l,u,d,h,m,y,v,b,x,w,S;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((s=e.architecture)==null?void 0:s.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((u=e.architecture)==null?void 0:u.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((m=e.pricing)==null?void 0:m.request)??"0",image:((y=e.pricing)==null?void 0:y.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((x=e.top_provider)==null?void 0:x.context_length)??e.context_length??null,max_completion_tokens:((w=e.top_provider)==null?void 0:w.max_completion_tokens)??null,is_moderated:((S=e.top_provider)==null?void 0:S.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??L8[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function pJ(e,t){const n=`${e.id}-${e.baseURL||""}`,r=zm.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var o,l,u;let i;const s={Accept:"application/json"};t&&(s.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",s["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",s["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete s.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=P8(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),Ye.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:s});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const x=JSON.parse(b);v=((u=x==null?void 0:x.error)==null?void 0:u.message)||(x==null?void 0:x.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let m=[];if(e.type==="ollama"?m=h.models||[]:m=h.data||h||[],!Array.isArray(m))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const y=m.map(v=>hJ(v,e.type));return y.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${y.length} models for ${e.name}`),y}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),Ye.error(`Failed to fetch models for ${e.name}: ${h}`),zm.delete(n),[]}})();return zm.set(n,a),setTimeout(()=>{zm.get(n)===a&&(zm.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},fJ),a}const US="provider:lastModelSelection",L3="provider:globalModelSortOrder",Bn=Os(Ds((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),xt.saveSetting("enableApiKeyManagement",n),kt.emit(Et.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadSetting("enableApiKeyManagement",!0),[r,a,i,s]=await Promise.all([xt.loadProviderConfigs(),xt.loadApiKeys(),xt.loadSetting(L3,[]),xt.loadSetting(US,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const o=r.reduce((m,y)=>(y.isEnabled&&y.enabledModels&&y.enabledModels.forEach(v=>{m.push(au(y.id,v))}),m),[]),l=new Set(o),u=i.filter(m=>l.has(m));let d=s;d&&l.has(d)||(d=u[0]??null,d||(d=o[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${d}`)),e({globalModelSortOrder:u,selectedModelId:d,isLoading:!1}),await xt.saveSetting(US,d),console.log(`[ProviderStore] Emitting initial ${Et.MODEL_SELECTION_CHANGED} with payload:`,{modelId:d}),kt.emit(Et.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),Ye.error("Failed to load provider data")}},selectModel:n=>{const r=t().selectedModelId;console.log(`[ProviderStore] selectModel called. Current: ${r}, New: ${n}`),r!==n?(e({selectedModelId:n}),xt.saveSetting(US,n),console.log(`[ProviderStore] Emitting ${Et.MODEL_SELECTION_CHANGED} with payload:`,{modelId:n}),kt.emit(Et.MODEL_SELECTION_CHANGED,{modelId:n})):console.log(`[ProviderStore] selectModel skipped: ID ${n} already selected.`)},addApiKey:async(n,r,a)=>{const i=Si(),s=new Date,o={id:i,name:n,value:a,providerId:r,createdAt:s,updatedAt:s};try{return await xt.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),Ye.success(`API Key "${n}" added.`),kt.emit(Et.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),Ye.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await xt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(s=>s.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(s=>s.apiKeyId===n?{...s,apiKeyId:null}:s)}),Ye.success(`API Key "${r}" deleted.`),kt.emit(Et.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),Ye.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=Si(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await xt.saveProviderConfig(i),e(s=>{s.dbProviderConfigs.push(i)}),Ye.success(`Provider "${n.name}" added.`),kt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),t().fetchModels(r).catch(s=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,s)}),r}catch(s){throw console.error("ProviderStore: Error adding provider config",s),Ye.error(`Failed to add Provider: ${s instanceof Error?s.message:String(s)}`),s}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(s=>s.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await xt.saveProviderConfig(i),e(h=>{const m=h.dbProviderConfigs.findIndex(y=>y.id===n);m!==-1&&(h.dbProviderConfigs[m]=i)}),kt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const s=t().globalModelSortOrder,o=t().dbProviderConfigs;let l=[...s];const u=o.reduce((h,m)=>(m.isEnabled&&m.enabledModels&&m.enabledModels.forEach(y=>{h.push(au(m.id,y))}),h),[]),d=new Set(u);l=s.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(s){throw console.error("ProviderStore: Error updating provider config",s),Ye.error(`Failed to update Provider: ${s instanceof Error?s.message:String(s)}`),s}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await xt.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),kt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const s=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(m=>{d.push(au(h.id,m))}),d),[]),o=new Set(s),u=t().globalModelSortOrder.filter(d=>o.has(d));await t().setGlobalModelSortOrder(u),Ye.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),Ye.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){Ye.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,s=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,o=await pJ(r,s);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),Ye.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await xt.saveSetting(L3,r);const a=t().selectedModelId,s=t().dbProviderConfigs.reduce((l,u)=>(u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{l.push(au(u.id,d))}),l),[]),o=new Set(s);if(!a||!o.has(a)){const l=r.find(h=>o.has(h)),u=s[0]??null,d=l??u;d!==a&&(console.log(`[ProviderStore] Selection ${a} invalidated or missing. Selecting ${d}`),t().selectModel(d))}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:s}=lc(n);if(!i||!s)return;const o=r.find(u=>u.id===i);if(!o)return;const l=a.find(u=>u.id===o.apiKeyId);return Lk(o,s,l==null?void 0:l.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(dJ[a]||[]).map(s=>({id:s.id,name:s.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:L8[r.type]??[]}))}}))),Ab="system",Nb="You are a helpful AI assistant.",Rb=.7,Ib=null,jb=null,Ob=null,Db=0,Mb=0,$3=!0,Pb=!0,Fb=!1,Lb=!1,$b=!1,Bb=15,B3=null,z3=null,zb=5,Ub=null,qb=!0,Hb=null,Vb=768,Gb=!1,Kb=!1,Wb=null,Zb=16,Yb="max-w-7xl",Xb=null,fr=Os(Ds((e,t)=>({theme:Ab,globalSystemPrompt:Nb,temperature:Rb,maxTokens:Ib,topP:jb,topK:Ob,presencePenalty:Db,frequencyPenalty:Mb,enableAdvancedSettings:$3,enableStreamingMarkdown:Pb,enableStreamingCodeBlockParsing:Fb,foldStreamingCodeBlocks:Lb,foldUserMessagesOnCompletion:$b,streamingRenderFPS:Bb,gitUserName:B3,gitUserEmail:z3,toolMaxSteps:zb,prismThemeUrl:Ub,autoTitleEnabled:qb,autoTitleModelId:Hb,autoTitlePromptMaxLength:Vb,autoTitleIncludeFiles:Gb,autoTitleIncludeRules:Kb,customFontFamily:Wb,customFontSize:Zb,chatMaxWidth:Yb,customThemeColors:Xb,setTheme:n=>{e({theme:n}),xt.saveSetting("theme",n)},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),xt.saveSetting("globalSystemPrompt",n)},setTemperature:n=>{e({temperature:n}),xt.saveSetting("temperature",n)},setMaxTokens:n=>{e({maxTokens:n}),xt.saveSetting("maxTokens",n)},setTopP:n=>{e({topP:n}),xt.saveSetting("topP",n)},setTopK:n=>{e({topK:n}),xt.saveSetting("topK",n)},setPresencePenalty:n=>{e({presencePenalty:n}),xt.saveSetting("presencePenalty",n)},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),xt.saveSetting("frequencyPenalty",n)},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),xt.saveSetting("enableAdvancedSettings",n)},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),xt.saveSetting("enableStreamingMarkdown",n)},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),xt.saveSetting("enableStreamingCodeBlockParsing",n)},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),xt.saveSetting("foldStreamingCodeBlocks",n)},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),xt.saveSetting("foldUserMessagesOnCompletion",n)},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),xt.saveSetting("streamingRenderFPS",r)},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),xt.saveSetting("gitUserName",r)},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),xt.saveSetting("gitUserEmail",r)},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),xt.saveSetting("toolMaxSteps",r)},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),xt.saveSetting("prismThemeUrl",r)},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),xt.saveSetting("autoTitleEnabled",n)},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),xt.saveSetting("autoTitleModelId",n)},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),xt.saveSetting("autoTitlePromptMaxLength",r)},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),xt.saveSetting("autoTitleIncludeFiles",n)},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),xt.saveSetting("autoTitleIncludeRules",n)},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),xt.saveSetting("customFontFamily",r)},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),xt.saveSetting("customFontSize",r)},setChatMaxWidth:n=>{e({chatMaxWidth:n}),xt.saveSetting("chatMaxWidth",n)},setCustomThemeColors:n=>{e({customThemeColors:n}),xt.saveSetting("customThemeColors",n)},setCustomThemeColor:(n,r)=>{e(a=>{const s={...a.customThemeColors??{}};r===null||r.trim()===""?delete s[n]:s[n]=r.trim(),a.customThemeColors=Object.keys(s).length>0?s:null}),xt.saveSetting("customThemeColors",t().customThemeColors)},loadSettings:async()=>{try{const[n,r,a,i,s,o,l,u,d,h,m,y,v,b,x,w,S,E,C,T,j,I,R,F,B,H,D]=await Promise.all([xt.loadSetting("theme",Ab),xt.loadSetting("temperature",Rb),xt.loadSetting("maxTokens",Ib),xt.loadSetting("topP",jb),xt.loadSetting("topK",Ob),xt.loadSetting("presencePenalty",Db),xt.loadSetting("frequencyPenalty",Mb),xt.loadSetting("globalSystemPrompt",Nb),xt.loadSetting("enableAdvancedSettings",$3),xt.loadSetting("enableStreamingMarkdown",Pb),xt.loadSetting("enableStreamingCodeBlockParsing",Fb),xt.loadSetting("foldStreamingCodeBlocks",Lb),xt.loadSetting("foldUserMessagesOnCompletion",$b),xt.loadSetting("streamingRenderFPS",Bb),xt.loadSetting("gitUserName",B3),xt.loadSetting("gitUserEmail",z3),xt.loadSetting("toolMaxSteps",zb),xt.loadSetting("prismThemeUrl",Ub),xt.loadSetting("autoTitleEnabled",qb),xt.loadSetting("autoTitleModelId",Hb),xt.loadSetting("autoTitlePromptMaxLength",Vb),xt.loadSetting("autoTitleIncludeFiles",Gb),xt.loadSetting("autoTitleIncludeRules",Kb),xt.loadSetting("customFontFamily",Wb),xt.loadSetting("customFontSize",Zb),xt.loadSetting("chatMaxWidth",Yb),xt.loadSetting("customThemeColors",Xb)]);e({theme:n,temperature:r,maxTokens:a,topP:i,topK:s,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:u,enableAdvancedSettings:d,enableStreamingMarkdown:h,enableStreamingCodeBlockParsing:m,foldStreamingCodeBlocks:y,foldUserMessagesOnCompletion:v,streamingRenderFPS:b,gitUserName:x,gitUserEmail:w,toolMaxSteps:S,prismThemeUrl:E,autoTitleEnabled:C,autoTitleModelId:T,autoTitlePromptMaxLength:j,autoTitleIncludeFiles:I,autoTitleIncludeRules:R,customFontFamily:F,customFontSize:B,chatMaxWidth:H,customThemeColors:D})}catch(n){console.error("SettingsStore: Error loading settings",n)}},resetGeneralSettings:async()=>{try{e({enableStreamingMarkdown:Pb,enableStreamingCodeBlockParsing:Fb,foldStreamingCodeBlocks:Lb,foldUserMessagesOnCompletion:$b,streamingRenderFPS:Bb}),await Promise.all([xt.saveSetting("enableStreamingMarkdown",Pb),xt.saveSetting("enableStreamingCodeBlockParsing",Fb),xt.saveSetting("foldStreamingCodeBlocks",Lb),xt.saveSetting("foldUserMessagesOnCompletion",$b),xt.saveSetting("streamingRenderFPS",Bb)]),Ye.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),Ye.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{e({globalSystemPrompt:Nb,temperature:Rb,maxTokens:Ib,topP:jb,topK:Ob,presencePenalty:Db,frequencyPenalty:Mb,toolMaxSteps:zb,autoTitleEnabled:qb,autoTitleModelId:Hb,autoTitlePromptMaxLength:Vb,autoTitleIncludeFiles:Gb,autoTitleIncludeRules:Kb}),await Promise.all([xt.saveSetting("globalSystemPrompt",Nb),xt.saveSetting("temperature",Rb),xt.saveSetting("maxTokens",Ib),xt.saveSetting("topP",jb),xt.saveSetting("topK",Ob),xt.saveSetting("presencePenalty",Db),xt.saveSetting("frequencyPenalty",Mb),xt.saveSetting("toolMaxSteps",zb),xt.saveSetting("autoTitleEnabled",qb),xt.saveSetting("autoTitleModelId",Hb),xt.saveSetting("autoTitlePromptMaxLength",Vb),xt.saveSetting("autoTitleIncludeFiles",Gb),xt.saveSetting("autoTitleIncludeRules",Kb)]),Ye.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),Ye.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{e({theme:Ab,prismThemeUrl:Ub,customFontFamily:Wb,customFontSize:Zb,chatMaxWidth:Yb,customThemeColors:Xb}),await Promise.all([xt.saveSetting("theme",Ab),xt.saveSetting("prismThemeUrl",Ub),xt.saveSetting("customFontFamily",Wb),xt.saveSetting("customFontSize",Zb),xt.saveSetting("chatMaxWidth",Yb),xt.saveSetting("customThemeColors",Xb)]),Ye.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),Ye.error("Failed to reset theme settings.")}}})));async function yC(e,t){const n=Rr.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const s=await i.callback(a);if(s===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;s&&typeof s=="object"&&(a=s)}catch(s){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,s),!1}return a}function mJ(){const e=Hn.getState(),t=Bn.getState(),n=fr.getState(),{providerId:r}=lc(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function gJ(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function U3(e){try{const t=e.type||"application/octet-stream",n=kk(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:gJ(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),Ye.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function q3(e){return e.flatMap(t=>{var a,i,s;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-call"&&u.toolCallId&&u.toolName&&u.args!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,u)}}),o.length>0&&n.push({role:"assistant",content:o})}if((s=t.metadata)!=null&&s.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-result"&&u.toolCallId&&u.toolName&&u.result!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,u)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const H3=e=>Symbol.iterator in e,V3=e=>"entries"in e,G3=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},yJ=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function bJ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!H3(e)||!H3(t)?G3({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):V3(e)&&V3(t)?G3(e,t):yJ(e,t)}function dn(e){const t=gt.useRef(void 0);return n=>{const r=e(n);return bJ(t.current,r)?t.current:t.current=r}}function Ht(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function vJ(e,t){const n=k.createContext(t),r=i=>{const{children:s,...o}=i,l=k.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function a(i){const s=k.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function di(e,t=[]){let n=[];function r(i,s){const o=k.createContext(s),l=n.length;n=[...n,s];const u=h=>{var w;const{scope:m,children:y,...v}=h,b=((w=m==null?void 0:m[e])==null?void 0:w[l])||o,x=k.useMemo(()=>v,Object.values(v));return p.jsx(b.Provider,{value:x,children:y})};u.displayName=i+"Provider";function d(h,m){var b;const y=((b=m==null?void 0:m[e])==null?void 0:b[l])||o,v=k.useContext(y);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(s=>k.createContext(s));return function(o){const l=(o==null?void 0:o[e])||i;return k.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return a.scopeName=e,[r,wJ(a,...t)]}function wJ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...o,...h}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var xJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rn=xJ.reduce((e,t)=>{const n=du(`Primitive.${t}`),r=k.forwardRef((a,i)=>{const{asChild:s,...o}=a,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function $8(e,t){e&&Ho.flushSync(()=>e.dispatchEvent(t))}function La(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function _J(e,t=globalThis==null?void 0:globalThis.document){const n=La(e);k.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var SJ="DismissableLayer",bC="dismissableLayer.update",EJ="dismissableLayer.pointerDownOutside",CJ="dismissableLayer.focusOutside",K3,B8=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sp=k.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...l}=e,u=k.useContext(B8),[d,h]=k.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=k.useState({}),v=kn(t,I=>h(I)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(x),S=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,C=S>=w,T=AJ(I=>{const R=I.target,F=[...u.branches].some(B=>B.contains(R));!C||F||(a==null||a(I),s==null||s(I),I.defaultPrevented||o==null||o())},m),j=NJ(I=>{const R=I.target;[...u.branches].some(B=>B.contains(R))||(i==null||i(I),s==null||s(I),I.defaultPrevented||o==null||o())},m);return _J(I=>{S===u.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&o&&(I.preventDefault(),o()))},m),k.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(K3=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),W3(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=K3)}},[d,m,n,u]),k.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),W3())},[d,u]),k.useEffect(()=>{const I=()=>y({});return document.addEventListener(bC,I),()=>document.removeEventListener(bC,I)},[]),p.jsx(rn.div,{...l,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:Ht(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Ht(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Ht(e.onPointerDownCapture,T.onPointerDownCapture)})});sp.displayName=SJ;var kJ="DismissableLayerBranch",TJ=k.forwardRef((e,t)=>{const n=k.useContext(B8),r=k.useRef(null),a=kn(t,r);return k.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(rn.div,{...e,ref:a})});TJ.displayName=kJ;function AJ(e,t=globalThis==null?void 0:globalThis.document){const n=La(e),r=k.useRef(!1),a=k.useRef(()=>{});return k.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){z8(EJ,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function NJ(e,t=globalThis==null?void 0:globalThis.document){const n=La(e),r=k.useRef(!1);return k.useEffect(()=>{const a=i=>{i.target&&!r.current&&z8(CJ,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function W3(){const e=new CustomEvent(bC);document.dispatchEvent(e)}function z8(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?$8(a,i):a.dispatchEvent(i)}var Ua=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},RJ=M6[" useId ".trim().toString()]||(()=>{}),IJ=0;function Ea(e){const[t,n]=k.useState(RJ());return Ua(()=>{n(r=>r??String(IJ++))},[e]),t?`radix-${t}`:""}const jJ=["top","right","bottom","left"],wu=Math.min,is=Math.max,uw=Math.round,Jb=Math.floor,Zo=e=>({x:e,y:e}),OJ={left:"right",right:"left",bottom:"top",top:"bottom"},DJ={start:"end",end:"start"};function vC(e,t,n){return is(e,wu(t,n))}function ec(e,t){return typeof e=="function"?e(t):e}function tc(e){return e.split("-")[0]}function op(e){return e.split("-")[1]}function $k(e){return e==="x"?"y":"x"}function Bk(e){return e==="y"?"height":"width"}function xu(e){return["top","bottom"].includes(tc(e))?"y":"x"}function zk(e){return $k(xu(e))}function MJ(e,t,n){n===void 0&&(n=!1);const r=op(e),a=zk(e),i=Bk(a);let s=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=dw(s)),[s,dw(s)]}function PJ(e){const t=dw(e);return[wC(e),t,wC(t)]}function wC(e){return e.replace(/start|end/g,t=>DJ[t])}function FJ(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:s;default:return[]}}function LJ(e,t,n,r){const a=op(e);let i=FJ(tc(e),n==="start",r);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(wC)))),i}function dw(e){return e.replace(/left|right|bottom|top/g,t=>OJ[t])}function $J(e){return{top:0,right:0,bottom:0,left:0,...e}}function U8(e){return typeof e!="number"?$J(e):{top:e,right:e,bottom:e,left:e}}function fw(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function Z3(e,t,n){let{reference:r,floating:a}=e;const i=xu(t),s=zk(t),o=Bk(s),l=tc(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[o]/2-a[o]/2;let y;switch(l){case"top":y={x:d,y:r.y-a.height};break;case"bottom":y={x:d,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-a.width,y:h};break;default:y={x:r.x,y:r.y}}switch(op(t)){case"start":y[s]-=m*(n&&u?-1:1);break;case"end":y[s]+=m*(n&&u?-1:1);break}return y}const BJ=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,o=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=Z3(u,r,l),m=r,y={},v=0;for(let b=0;b<o.length;b++){const{name:x,fn:w}=o[b],{x:S,y:E,data:C,reset:T}=await w({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:y,rects:u,platform:s,elements:{reference:e,floating:t}});d=S??d,h=E??h,y={...y,[x]:{...y[x],...C}},T&&v<=50&&(v++,typeof T=="object"&&(T.placement&&(m=T.placement),T.rects&&(u=T.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):T.rects),{x:d,y:h}=Z3(u,m,l)),b=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:y}};async function kg(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:y=0}=ec(t,e),v=U8(y),x=o[m?h==="floating"?"reference":"floating":h],w=fw(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),S=h==="floating"?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},T=fw(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:E,strategy:l}):S);return{top:(w.top-T.top+v.top)/C.y,bottom:(T.bottom-w.bottom+v.bottom)/C.y,left:(w.left-T.left+v.left)/C.x,right:(T.right-w.right+v.right)/C.x}}const zJ=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:u,padding:d=0}=ec(e,t)||{};if(u==null)return{};const h=U8(d),m={x:n,y:r},y=zk(a),v=Bk(y),b=await s.getDimensions(u),x=y==="y",w=x?"top":"left",S=x?"bottom":"right",E=x?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[y]-m[y]-i.floating[v],T=m[y]-i.reference[y],j=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let I=j?j[E]:0;(!I||!await(s.isElement==null?void 0:s.isElement(j)))&&(I=o.floating[E]||i.floating[v]);const R=C/2-T/2,F=I/2-b[v]/2-1,B=wu(h[w],F),H=wu(h[S],F),D=B,Z=I-b[v]-H,V=I/2-b[v]/2+R,ue=vC(D,V,Z),ae=!l.arrow&&op(a)!=null&&V!==ue&&i.reference[v]/2-(V<D?B:H)-b[v]/2<0,ne=ae?V<D?V-D:V-Z:0;return{[y]:m[y]+ne,data:{[y]:ue,centerOffset:V-ue-ne,...ae&&{alignmentOffset:ne}},reset:ae}}}),UJ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...x}=ec(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=tc(a),S=xu(o),E=tc(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),T=m||(E||!b?[dw(o)]:PJ(o)),j=v!=="none";!m&&j&&T.push(...LJ(o,b,v,C));const I=[o,...T],R=await kg(t,x),F=[];let B=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&F.push(R[w]),h){const V=MJ(a,s,C);F.push(R[V[0]],R[V[1]])}if(B=[...B,{placement:a,overflows:F}],!F.every(V=>V<=0)){var H,D;const V=(((H=i.flip)==null?void 0:H.index)||0)+1,ue=I[V];if(ue)return{data:{index:V,overflows:B},reset:{placement:ue}};let ae=(D=B.filter(ne=>ne.overflows[0]<=0).sort((ne,X)=>ne.overflows[1]-X.overflows[1])[0])==null?void 0:D.placement;if(!ae)switch(y){case"bestFit":{var Z;const ne=(Z=B.filter(X=>{if(j){const ie=xu(X.placement);return ie===S||ie==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ie=>ie>0).reduce((ie,L)=>ie+L,0)]).sort((X,ie)=>X[1]-ie[1])[0])==null?void 0:Z[0];ne&&(ae=ne);break}case"initialPlacement":ae=o;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function Y3(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function X3(e){return jJ.some(t=>e[t]>=0)}const qJ=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=ec(e,t);switch(r){case"referenceHidden":{const i=await kg(t,{...a,elementContext:"reference"}),s=Y3(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:X3(s)}}}case"escaped":{const i=await kg(t,{...a,altBoundary:!0}),s=Y3(i,n.floating);return{data:{escapedOffsets:s,escaped:X3(s)}}}default:return{}}}}};async function HJ(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),s=tc(n),o=op(n),l=xu(n)==="y",u=["left","top"].includes(s)?-1:1,d=i&&l?-1:1,h=ec(t,e);let{mainAxis:m,crossAxis:y,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof v=="number"&&(y=o==="end"?v*-1:v),l?{x:y*d,y:m*u}:{x:m*u,y:y*d}}const VJ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await HJ(t,e);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},GJ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:x=>{let{x:w,y:S}=x;return{x:w,y:S}}},...l}=ec(e,t),u={x:n,y:r},d=await kg(t,l),h=xu(tc(a)),m=$k(h);let y=u[m],v=u[h];if(i){const x=m==="y"?"top":"left",w=m==="y"?"bottom":"right",S=y+d[x],E=y-d[w];y=vC(S,y,E)}if(s){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",S=v+d[x],E=v-d[w];v=vC(S,v,E)}const b=o.fn({...t,[m]:y,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[m]:i,[h]:s}}}}}},KJ=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=ec(e,t),d={x:n,y:r},h=xu(a),m=$k(h);let y=d[m],v=d[h];const b=ec(o,t),x=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=m==="y"?"height":"width",C=i.reference[m]-i.floating[E]+x.mainAxis,T=i.reference[m]+i.reference[E]-x.mainAxis;y<C?y=C:y>T&&(y=T)}if(u){var w,S;const E=m==="y"?"width":"height",C=["top","left"].includes(tc(a)),T=i.reference[h]-i.floating[E]+(C&&((w=s.offset)==null?void 0:w[h])||0)+(C?0:x.crossAxis),j=i.reference[h]+i.reference[E]+(C?0:((S=s.offset)==null?void 0:S[h])||0)-(C?x.crossAxis:0);v<T?v=T:v>j&&(v=j)}return{[m]:y,[h]:v}}}},WJ=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...u}=ec(e,t),d=await kg(t,u),h=tc(a),m=op(a),y=xu(a)==="y",{width:v,height:b}=i.floating;let x,w;h==="top"||h==="bottom"?(x=h,w=m===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(w=h,x=m==="end"?"top":"bottom");const S=b-d.top-d.bottom,E=v-d.left-d.right,C=wu(b-d[x],S),T=wu(v-d[w],E),j=!t.middlewareData.shift;let I=C,R=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(R=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=S),j&&!m){const B=is(d.left,0),H=is(d.right,0),D=is(d.top,0),Z=is(d.bottom,0);y?R=v-2*(B!==0||H!==0?B+H:is(d.left,d.right)):I=b-2*(D!==0||Z!==0?D+Z:is(d.top,d.bottom))}await l({...t,availableWidth:R,availableHeight:I});const F=await s.getDimensions(o.floating);return v!==F.width||b!==F.height?{reset:{rects:!0}}:{}}}};function hx(){return typeof window<"u"}function lp(e){return q8(e)?(e.nodeName||"").toLowerCase():"#document"}function os(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ol(e){var t;return(t=(q8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function q8(e){return hx()?e instanceof Node||e instanceof os(e).Node:!1}function io(e){return hx()?e instanceof Element||e instanceof os(e).Element:!1}function rl(e){return hx()?e instanceof HTMLElement||e instanceof os(e).HTMLElement:!1}function J3(e){return!hx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof os(e).ShadowRoot}function w0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=so(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function ZJ(e){return["table","td","th"].includes(lp(e))}function px(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Uk(e){const t=qk(),n=io(e)?so(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function YJ(e){let t=_u(e);for(;rl(t)&&!$h(t);){if(Uk(t))return t;if(px(t))return null;t=_u(t)}return null}function qk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $h(e){return["html","body","#document"].includes(lp(e))}function so(e){return os(e).getComputedStyle(e)}function mx(e){return io(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _u(e){if(lp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||J3(e)&&e.host||ol(e);return J3(t)?t.host:t}function H8(e){const t=_u(e);return $h(t)?e.ownerDocument?e.ownerDocument.body:e.body:rl(t)&&w0(t)?t:H8(t)}function Tg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=H8(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),s=os(a);if(i){const o=xC(s);return t.concat(s,s.visualViewport||[],w0(a)?a:[],o&&n?Tg(o):[])}return t.concat(a,Tg(a,[],n))}function xC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function V8(e){const t=so(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=rl(e),i=a?e.offsetWidth:n,s=a?e.offsetHeight:r,o=uw(n)!==i||uw(r)!==s;return o&&(n=i,r=s),{width:n,height:r,$:o}}function Hk(e){return io(e)?e:e.contextElement}function Eh(e){const t=Hk(e);if(!rl(t))return Zo(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=V8(t);let s=(i?uw(n.width):n.width)/r,o=(i?uw(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const XJ=Zo(0);function G8(e){const t=os(e);return!qk()||!t.visualViewport?XJ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function JJ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==os(e)?!1:t}function Bd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=Hk(e);let s=Zo(1);t&&(r?io(r)&&(s=Eh(r)):s=Eh(e));const o=JJ(i,n,r)?G8(i):Zo(0);let l=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,d=a.width/s.x,h=a.height/s.y;if(i){const m=os(i),y=r&&io(r)?os(r):r;let v=m,b=xC(v);for(;b&&r&&y!==v;){const x=Eh(b),w=b.getBoundingClientRect(),S=so(b),E=w.left+(b.clientLeft+parseFloat(S.paddingLeft))*x.x,C=w.top+(b.clientTop+parseFloat(S.paddingTop))*x.y;l*=x.x,u*=x.y,d*=x.x,h*=x.y,l+=E,u+=C,v=os(b),b=xC(v)}}return fw({width:d,height:h,x:l,y:u})}function Vk(e,t){const n=mx(e).scrollLeft;return t?t.left+n:Bd(ol(e)).left+n}function K8(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:Vk(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function QJ(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",s=ol(r),o=t?px(t.floating):!1;if(r===s||o&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Zo(1);const d=Zo(0),h=rl(r);if((h||!h&&!i)&&((lp(r)!=="body"||w0(s))&&(l=mx(r)),rl(r))){const y=Bd(r);u=Eh(r),d.x=y.x+r.clientLeft,d.y=y.y+r.clientTop}const m=s&&!h&&!i?K8(s,l,!0):Zo(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-l.scrollTop*u.y+d.y+m.y}}function eQ(e){return Array.from(e.getClientRects())}function tQ(e){const t=ol(e),n=mx(e),r=e.ownerDocument.body,a=is(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=is(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Vk(e);const o=-n.scrollTop;return so(r).direction==="rtl"&&(s+=is(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:s,y:o}}function nQ(e,t){const n=os(e),r=ol(e),a=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const u=qk();(!u||u&&t==="fixed")&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}function rQ(e,t){const n=Bd(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=rl(e)?Eh(e):Zo(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y,l=a*i.x,u=r*i.y;return{width:s,height:o,x:l,y:u}}function Q3(e,t,n){let r;if(t==="viewport")r=nQ(e,n);else if(t==="document")r=tQ(ol(e));else if(io(t))r=rQ(t,n);else{const a=G8(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return fw(r)}function W8(e,t){const n=_u(e);return n===t||!io(n)||$h(n)?!1:so(n).position==="fixed"||W8(n,t)}function aQ(e,t){const n=t.get(e);if(n)return n;let r=Tg(e,[],!1).filter(o=>io(o)&&lp(o)!=="body"),a=null;const i=so(e).position==="fixed";let s=i?_u(e):e;for(;io(s)&&!$h(s);){const o=so(s),l=Uk(s);!l&&o.position==="fixed"&&(a=null),(i?!l&&!a:!l&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||w0(s)&&!l&&W8(e,s))?r=r.filter(d=>d!==s):a=o,s=_u(s)}return t.set(e,r),r}function iQ(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const s=[...n==="clippingAncestors"?px(t)?[]:aQ(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((u,d)=>{const h=Q3(t,d,a);return u.top=is(h.top,u.top),u.right=wu(h.right,u.right),u.bottom=wu(h.bottom,u.bottom),u.left=is(h.left,u.left),u},Q3(t,o,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function sQ(e){const{width:t,height:n}=V8(e);return{width:t,height:n}}function oQ(e,t,n){const r=rl(t),a=ol(t),i=n==="fixed",s=Bd(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=Zo(0);if(r||!r&&!i)if((lp(t)!=="body"||w0(a))&&(o=mx(t)),r){const m=Bd(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else a&&(l.x=Vk(a));const u=a&&!r&&!i?K8(a,o):Zo(0),d=s.left+o.scrollLeft-l.x-u.x,h=s.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:s.width,height:s.height}}function qS(e){return so(e).position==="static"}function ej(e,t){if(!rl(e)||so(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ol(e)===n&&(n=n.ownerDocument.body),n}function Z8(e,t){const n=os(e);if(px(e))return n;if(!rl(e)){let a=_u(e);for(;a&&!$h(a);){if(io(a)&&!qS(a))return a;a=_u(a)}return n}let r=ej(e,t);for(;r&&ZJ(r)&&qS(r);)r=ej(r,t);return r&&$h(r)&&qS(r)&&!Uk(r)?n:r||YJ(e)||n}const lQ=async function(e){const t=this.getOffsetParent||Z8,n=this.getDimensions,r=await n(e.floating);return{reference:oQ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cQ(e){return so(e).direction==="rtl"}const uQ={convertOffsetParentRelativeRectToViewportRelativeRect:QJ,getDocumentElement:ol,getClippingRect:iQ,getOffsetParent:Z8,getElementRects:lQ,getClientRects:eQ,getDimensions:sQ,getScale:Eh,isElement:io,isRTL:cQ};function Y8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function dQ(e,t){let n=null,r;const a=ol(e);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:y}=u;if(o||t(),!m||!y)return;const v=Jb(h),b=Jb(a.clientWidth-(d+m)),x=Jb(a.clientHeight-(h+y)),w=Jb(d),E={rootMargin:-v+"px "+-b+"px "+-x+"px "+-w+"px",threshold:is(0,wu(1,l))||1};let C=!0;function T(j){const I=j[0].intersectionRatio;if(I!==l){if(!C)return s();I?s(!1,I):r=setTimeout(()=>{s(!1,1e-7)},1e3)}I===1&&!Y8(u,e.getBoundingClientRect())&&s(),C=!1}try{n=new IntersectionObserver(T,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(T,E)}n.observe(e)}return s(!0),i}function fQ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Hk(e),d=a||i?[...u?Tg(u):[],...Tg(t)]:[];d.forEach(w=>{a&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=u&&o?dQ(u,n):null;let m=-1,y=null;s&&(y=new ResizeObserver(w=>{let[S]=w;S&&S.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(t)})),n()}),u&&!l&&y.observe(u),y.observe(t));let v,b=l?Bd(e):null;l&&x();function x(){const w=Bd(e);b&&!Y8(b,w)&&n(),b=w,v=requestAnimationFrame(x)}return n(),()=>{var w;d.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(w=y)==null||w.disconnect(),y=null,l&&cancelAnimationFrame(v)}}const hQ=VJ,pQ=GJ,mQ=UJ,gQ=WJ,yQ=qJ,tj=zJ,bQ=KJ,vQ=(e,t,n)=>{const r=new Map,a={platform:uQ,...n},i={...a.platform,_c:r};return BJ(e,t,{...a,platform:i})};var Av=typeof document<"u"?k.useLayoutEffect:k.useEffect;function hw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!hw(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!hw(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function X8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nj(e,t){const n=X8(e);return Math.round(t*n)/n}function HS(e){const t=k.useRef(e);return Av(()=>{t.current=e}),t}function wQ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[d,h]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,y]=k.useState(r);hw(m,r)||y(r);const[v,b]=k.useState(null),[x,w]=k.useState(null),S=k.useCallback(X=>{X!==j.current&&(j.current=X,b(X))},[]),E=k.useCallback(X=>{X!==I.current&&(I.current=X,w(X))},[]),C=i||v,T=s||x,j=k.useRef(null),I=k.useRef(null),R=k.useRef(d),F=l!=null,B=HS(l),H=HS(a),D=HS(u),Z=k.useCallback(()=>{if(!j.current||!I.current)return;const X={placement:t,strategy:n,middleware:m};H.current&&(X.platform=H.current),vQ(j.current,I.current,X).then(ie=>{const L={...ie,isPositioned:D.current!==!1};V.current&&!hw(R.current,L)&&(R.current=L,Ho.flushSync(()=>{h(L)}))})},[m,t,n,H,D]);Av(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[u]);const V=k.useRef(!1);Av(()=>(V.current=!0,()=>{V.current=!1}),[]),Av(()=>{if(C&&(j.current=C),T&&(I.current=T),C&&T){if(B.current)return B.current(C,T,Z);Z()}},[C,T,Z,B,F]);const ue=k.useMemo(()=>({reference:j,floating:I,setReference:S,setFloating:E}),[S,E]),ae=k.useMemo(()=>({reference:C,floating:T}),[C,T]),ne=k.useMemo(()=>{const X={position:n,left:0,top:0};if(!ae.floating)return X;const ie=nj(ae.floating,d.x),L=nj(ae.floating,d.y);return o?{...X,transform:"translate("+ie+"px, "+L+"px)",...X8(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:L}},[n,o,ae.floating,d.x,d.y]);return k.useMemo(()=>({...d,update:Z,refs:ue,elements:ae,floatingStyles:ne}),[d,Z,ue,ae,ne])}const xQ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?tj({element:r.current,padding:a}).fn(n):{}:r?tj({element:r,padding:a}).fn(n):{}}}},_Q=(e,t)=>({...hQ(e),options:[e,t]}),SQ=(e,t)=>({...pQ(e),options:[e,t]}),EQ=(e,t)=>({...bQ(e),options:[e,t]}),CQ=(e,t)=>({...mQ(e),options:[e,t]}),kQ=(e,t)=>({...gQ(e),options:[e,t]}),TQ=(e,t)=>({...yQ(e),options:[e,t]}),AQ=(e,t)=>({...xQ(e),options:[e,t]});var NQ="Arrow",J8=k.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return p.jsx(rn.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});J8.displayName=NQ;var RQ=J8;function gx(e){const[t,n]=k.useState(void 0);return Ua(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=e.offsetWidth,o=e.offsetHeight;n({width:s,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Gk="Popper",[Q8,ju]=di(Gk),[IQ,eP]=Q8(Gk),tP=e=>{const{__scopePopper:t,children:n}=e,[r,a]=k.useState(null);return p.jsx(IQ,{scope:t,anchor:r,onAnchorChange:a,children:n})};tP.displayName=Gk;var nP="PopperAnchor",rP=k.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=eP(nP,n),s=k.useRef(null),o=kn(t,s);return k.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:p.jsx(rn.div,{...a,ref:o})});rP.displayName=nP;var Kk="PopperContent",[jQ,OQ]=Q8(Kk),aP=k.forwardRef((e,t)=>{var Ae,Ne,Ce,Pe,Qe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:v,...b}=e,x=eP(Kk,n),[w,S]=k.useState(null),E=kn(t,Ie=>S(Ie)),[C,T]=k.useState(null),j=gx(C),I=(j==null?void 0:j.width)??0,R=(j==null?void 0:j.height)??0,F=r+(i!=="center"?"-"+i:""),B=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},H=Array.isArray(u)?u:[u],D=H.length>0,Z={padding:B,boundary:H.filter(MQ),altBoundary:D},{refs:V,floatingStyles:ue,placement:ae,isPositioned:ne,middlewareData:X}=wQ({strategy:"fixed",placement:F,whileElementsMounted:(...Ie)=>fQ(...Ie,{animationFrame:y==="always"}),elements:{reference:x.anchor},middleware:[_Q({mainAxis:a+R,alignmentAxis:s}),l&&SQ({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?EQ():void 0,...Z}),l&&CQ({...Z}),kQ({...Z,apply:({elements:Ie,rects:z,availableWidth:Se,availableHeight:Te})=>{const{width:de,height:se}=z.reference,te=Ie.floating.style;te.setProperty("--radix-popper-available-width",`${Se}px`),te.setProperty("--radix-popper-available-height",`${Te}px`),te.setProperty("--radix-popper-anchor-width",`${de}px`),te.setProperty("--radix-popper-anchor-height",`${se}px`)}}),C&&AQ({element:C,padding:o}),PQ({arrowWidth:I,arrowHeight:R}),m&&TQ({strategy:"referenceHidden",...Z})]}),[ie,L]=oP(ae),J=La(v);Ua(()=>{ne&&(J==null||J())},[ne,J]);const Q=(Ae=X.arrow)==null?void 0:Ae.x,ee=(Ne=X.arrow)==null?void 0:Ne.y,fe=((Ce=X.arrow)==null?void 0:Ce.centerOffset)!==0,[ve,Oe]=k.useState();return Ua(()=>{w&&Oe(window.getComputedStyle(w).zIndex)},[w]),p.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ne?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Pe=X.transformOrigin)==null?void 0:Pe.x,(Qe=X.transformOrigin)==null?void 0:Qe.y].join(" "),...((Le=X.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(jQ,{scope:n,placedSide:ie,onArrowChange:T,arrowX:Q,arrowY:ee,shouldHideArrow:fe,children:p.jsx(rn.div,{"data-side":ie,"data-align":L,...b,ref:E,style:{...b.style,animation:ne?void 0:"none"}})})})});aP.displayName=Kk;var iP="PopperArrow",DQ={top:"bottom",right:"left",bottom:"top",left:"right"},sP=k.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=OQ(iP,r),s=DQ[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(RQ,{...a,ref:n,style:{...a.style,display:"block"}})})});sP.displayName=iP;function MQ(e){return e!==null}var PQ=e=>({name:"transformOrigin",options:e,fn(t){var x,w,S;const{placement:n,rects:r,middlewareData:a}=t,s=((x=a.arrow)==null?void 0:x.centerOffset)!==0,o=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[u,d]=oP(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=a.arrow)==null?void 0:w.x)??0)+o/2,y=(((S=a.arrow)==null?void 0:S.y)??0)+l/2;let v="",b="";return u==="bottom"?(v=s?h:`${m}px`,b=`${-l}px`):u==="top"?(v=s?h:`${m}px`,b=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,b=s?h:`${y}px`):u==="left"&&(v=`${r.floating.width+l}px`,b=s?h:`${y}px`),{data:{x:v,y:b}}}});function oP(e){const[t,n="center"]=e.split("-");return[t,n]}var yx=tP,x0=rP,bx=aP,vx=sP,FQ="Portal",cp=k.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[a,i]=k.useState(!1);Ua(()=>i(!0),[]);const s=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?pD.createPortal(p.jsx(rn.div,{...r,ref:t}),s):null});cp.displayName=FQ;function LQ(e,t){return k.useReducer((n,r)=>t[n][r]??n,e)}var Ta=e=>{const{present:t,children:n}=e,r=$Q(t),a=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),i=kn(r.ref,BQ(a));return typeof n=="function"||r.isPresent?k.cloneElement(a,{ref:i}):null};Ta.displayName="Presence";function $Q(e){const[t,n]=k.useState(),r=k.useRef(null),a=k.useRef(e),i=k.useRef("none"),s=e?"mounted":"unmounted",[o,l]=LQ(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const u=Qb(r.current);i.current=o==="mounted"?u:"none"},[o]),Ua(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,y=Qb(u);e?l("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&m!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),Ua(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=y=>{const b=Qb(r.current).includes(y.animationName);if(y.target===t&&b&&(l("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},m=y=>{y.target===t&&(i.current=Qb(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:k.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Qb(e){return(e==null?void 0:e.animationName)||"none"}function BQ(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var zQ=M6[" useInsertionEffect ".trim().toString()]||Ua;function Is({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,s]=UQ({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:a;{const d=k.useRef(e!==void 0);k.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=k.useCallback(d=>{var h;if(o){const m=qQ(d)?d(e):d;m!==e&&((h=s.current)==null||h.call(s,m))}else i(d)},[o,e,i,s]);return[l,u]}function UQ({defaultProp:e,onChange:t}){const[n,r]=k.useState(e),a=k.useRef(n),i=k.useRef(t);return zQ(()=>{i.current=t},[t]),k.useEffect(()=>{var s;a.current!==n&&((s=i.current)==null||s.call(i,n),a.current=n)},[n,a]),[n,r,i]}function qQ(e){return typeof e=="function"}var lP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),HQ="VisuallyHidden",cP=k.forwardRef((e,t)=>p.jsx(rn.span,{...e,ref:t,style:{...lP,...e.style}}));cP.displayName=HQ;var VQ=cP,[wx,VSe]=di("Tooltip",[ju]),xx=ju(),uP="TooltipProvider",GQ=700,_C="tooltip.open",[KQ,Wk]=wx(uP),dP=e=>{const{__scopeTooltip:t,delayDuration:n=GQ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,s=k.useRef(!0),o=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),p.jsx(KQ,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:k.useCallback(u=>{o.current=u},[]),disableHoverableContent:a,children:i})};dP.displayName=uP;var Ag="Tooltip",[WQ,_0]=wx(Ag),fP=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,l=Wk(Ag,e.__scopeTooltip),u=xx(t),[d,h]=k.useState(null),m=Ea(),y=k.useRef(0),v=s??l.disableHoverableContent,b=o??l.delayDuration,x=k.useRef(!1),[w,S]=Is({prop:r,defaultProp:a??!1,onChange:I=>{I?(l.onOpen(),document.dispatchEvent(new CustomEvent(_C))):l.onClose(),i==null||i(I)},caller:Ag}),E=k.useMemo(()=>w?x.current?"delayed-open":"instant-open":"closed",[w]),C=k.useCallback(()=>{window.clearTimeout(y.current),y.current=0,x.current=!1,S(!0)},[S]),T=k.useCallback(()=>{window.clearTimeout(y.current),y.current=0,S(!1)},[S]),j=k.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{x.current=!0,S(!0),y.current=0},b)},[b,S]);return k.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),p.jsx(yx,{...u,children:p.jsx(WQ,{scope:t,contentId:m,open:w,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayedRef.current?j():C()},[l.isOpenDelayedRef,j,C]),onTriggerLeave:k.useCallback(()=>{v?T():(window.clearTimeout(y.current),y.current=0)},[T,v]),onOpen:C,onClose:T,disableHoverableContent:v,children:n})})};fP.displayName=Ag;var SC="TooltipTrigger",hP=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=_0(SC,n),i=Wk(SC,n),s=xx(n),o=k.useRef(null),l=kn(t,o,a.onTriggerChange),u=k.useRef(!1),d=k.useRef(!1),h=k.useCallback(()=>u.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(x0,{asChild:!0,...s,children:p.jsx(rn.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:Ht(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ht(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Ht(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ht(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ht(e.onBlur,a.onClose),onClick:Ht(e.onClick,a.onClose)})})});hP.displayName=SC;var Zk="TooltipPortal",[ZQ,YQ]=wx(Zk,{forceMount:void 0}),pP=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=_0(Zk,t);return p.jsx(ZQ,{scope:t,forceMount:n,children:p.jsx(Ta,{present:n||i.open,children:p.jsx(cp,{asChild:!0,container:a,children:r})})})};pP.displayName=Zk;var Bh="TooltipContent",mP=k.forwardRef((e,t)=>{const n=YQ(Bh,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,s=_0(Bh,e.__scopeTooltip);return p.jsx(Ta,{present:r||s.open,children:s.disableHoverableContent?p.jsx(gP,{side:a,...i,ref:t}):p.jsx(XQ,{side:a,...i,ref:t})})}),XQ=k.forwardRef((e,t)=>{const n=_0(Bh,e.__scopeTooltip),r=Wk(Bh,e.__scopeTooltip),a=k.useRef(null),i=kn(t,a),[s,o]=k.useState(null),{trigger:l,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=k.useCallback(()=>{o(null),h(!1)},[h]),y=k.useCallback((v,b)=>{const x=v.currentTarget,w={x:v.clientX,y:v.clientY},S=tee(w,x.getBoundingClientRect()),E=nee(w,S),C=ree(b.getBoundingClientRect()),T=iee([...E,...C]);o(T),h(!0)},[h]);return k.useEffect(()=>()=>m(),[m]),k.useEffect(()=>{if(l&&d){const v=x=>y(x,d),b=x=>y(x,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,y,m]),k.useEffect(()=>{if(s){const v=b=>{const x=b.target,w={x:b.clientX,y:b.clientY},S=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),E=!aee(w,s);S?m():E&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,s,u,m]),p.jsx(gP,{...e,ref:i})}),[JQ,QQ]=wx(Ag,{isInside:!1}),eee=lq("TooltipContent"),gP=k.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,l=_0(Bh,n),u=xx(n),{onClose:d}=l;return k.useEffect(()=>(document.addEventListener(_C,d),()=>document.removeEventListener(_C,d)),[d]),k.useEffect(()=>{if(l.trigger){const h=m=>{const y=m.target;y!=null&&y.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),p.jsx(sp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:p.jsxs(bx,{"data-state":l.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(eee,{children:r}),p.jsx(JQ,{scope:n,isInside:!0,children:p.jsx(VQ,{id:l.contentId,role:"tooltip",children:a||r})})]})})});mP.displayName=Bh;var yP="TooltipArrow",bP=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=xx(n);return QQ(yP,n).isInside?null:p.jsx(vx,{...a,...r,ref:t})});bP.displayName=yP;function tee(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function nee(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function ree(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function aee(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function iee(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),see(t)}function see(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var oee=dP,lee=fP,cee=hP,uee=pP,dee=mP,fee=bP;function Gn({delayDuration:e=0,...t}){return p.jsx(oee,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Xn({...e}){return p.jsx(Gn,{children:p.jsx(lee,{"data-slot":"tooltip",...e})})}function Jn({...e}){return p.jsx(cee,{"data-slot":"tooltip-trigger",...e})}function Qn({className:e,sideOffset:t=0,children:n,...r}){return p.jsx(uee,{children:p.jsxs(dee,{"data-slot":"tooltip-content",sideOffset:t,className:_t("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,p.jsx(fee,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var VS={exports:{}},rj;function hee(){return rj||(rj=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof l?new l(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var T,j;switch(o.util.type(E)){case"Object":if(j=o.util.objId(E),C[j])return C[j];T={},C[j]=T;for(var I in E)E.hasOwnProperty(I)&&(T[I]=S(E[I],C));return T;case"Array":return j=o.util.objId(E),C[j]?C[j]:(T=[],C[j]=T,E.forEach(function(R,F){T[F]=S(R,C)}),T);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(T){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var T="no-"+E;S;){var j=S.classList;if(j.contains(E))return!0;if(j.contains(T))return!1;S=S.parentElement}return!!C}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(S,E){var C=o.util.clone(o.languages[S]);for(var T in E)C[T]=E[T];return C},insertBefore:function(S,E,C,T){T=T||o.languages;var j=T[S],I={};for(var R in j)if(j.hasOwnProperty(R)){if(R==E)for(var F in C)C.hasOwnProperty(F)&&(I[F]=C[F]);C.hasOwnProperty(R)||(I[R]=j[R])}var B=T[S];return T[S]=I,o.languages.DFS(o.languages,function(H,D){D===B&&H!=S&&(this[H]=I)}),I},DFS:function S(E,C,T,j){j=j||{};var I=o.util.objId;for(var R in E)if(E.hasOwnProperty(R)){C.call(E,R,E[R],T||R);var F=E[R],B=o.util.type(F);B==="Object"&&!j[I(F)]?(j[I(F)]=!0,S(F,C,null,j)):B==="Array"&&!j[I(F)]&&(j[I(F)]=!0,S(F,C,R,j))}}},plugins:{},highlightAll:function(S,E){o.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var T={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),o.hooks.run("before-all-elements-highlight",T);for(var j=0,I;I=T.elements[j++];)o.highlightElement(I,E===!0,T.callback)},highlightElement:function(S,E,C){var T=o.util.getLanguage(S),j=o.languages[T];o.util.setLanguage(S,T);var I=S.parentElement;I&&I.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(I,T);var R=S.textContent,F={element:S,language:T,grammar:j,code:R};function B(D){F.highlightedCode=D,o.hooks.run("before-insert",F),F.element.innerHTML=F.highlightedCode,o.hooks.run("after-highlight",F),o.hooks.run("complete",F),C&&C.call(F.element)}if(o.hooks.run("before-sanity-check",F),I=F.element.parentElement,I&&I.nodeName.toLowerCase()==="pre"&&!I.hasAttribute("tabindex")&&I.setAttribute("tabindex","0"),!F.code){o.hooks.run("complete",F),C&&C.call(F.element);return}if(o.hooks.run("before-highlight",F),!F.grammar){B(o.util.encode(F.code));return}if(E&&r.Worker){var H=new Worker(o.filename);H.onmessage=function(D){B(D.data)},H.postMessage(JSON.stringify({language:F.language,code:F.code,immediateClose:!0}))}else B(o.highlight(F.code,F.grammar,F.language))},highlight:function(S,E,C){var T={code:S,grammar:E,language:C};if(o.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=o.tokenize(T.code,T.grammar),o.hooks.run("after-tokenize",T),l.stringify(o.util.encode(T.tokens),T.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var T in C)E[T]=C[T];delete E.rest}var j=new h;return m(j,j.head,S),d(S,j,E,j.head,0),v(j)},hooks:{all:{},add:function(S,E){var C=o.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=o.hooks.all[S];if(!(!C||!C.length))for(var T=0,j;j=C[T++];)j(E)}},Token:l};r.Prism=o;function l(S,E,C,T){this.type=S,this.content=E,this.alias=C,this.length=(T||"").length|0}l.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var T="";return E.forEach(function(B){T+=S(B,C)}),T}var j={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},I=E.alias;I&&(Array.isArray(I)?Array.prototype.push.apply(j.classes,I):j.classes.push(I)),o.hooks.run("wrap",j);var R="";for(var F in j.attributes)R+=" "+F+'="'+(j.attributes[F]||"").replace(/"/g,"&quot;")+'"';return"<"+j.tag+' class="'+j.classes.join(" ")+'"'+R+">"+j.content+"</"+j.tag+">"};function u(S,E,C,T){S.lastIndex=E;var j=S.exec(C);if(j&&T&&j[1]){var I=j[1].length;j.index+=I,j[0]=j[0].slice(I)}return j}function d(S,E,C,T,j,I){for(var R in C)if(!(!C.hasOwnProperty(R)||!C[R])){var F=C[R];F=Array.isArray(F)?F:[F];for(var B=0;B<F.length;++B){if(I&&I.cause==R+","+B)return;var H=F[B],D=H.inside,Z=!!H.lookbehind,V=!!H.greedy,ue=H.alias;if(V&&!H.pattern.global){var ae=H.pattern.toString().match(/[imsuy]*$/)[0];H.pattern=RegExp(H.pattern.source,ae+"g")}for(var ne=H.pattern||H,X=T.next,ie=j;X!==E.tail&&!(I&&ie>=I.reach);ie+=X.value.length,X=X.next){var L=X.value;if(E.length>S.length)return;if(!(L instanceof l)){var J=1,Q;if(V){if(Q=u(ne,ie,S,Z),!Q||Q.index>=S.length)break;var Oe=Q.index,ee=Q.index+Q[0].length,fe=ie;for(fe+=X.value.length;Oe>=fe;)X=X.next,fe+=X.value.length;if(fe-=X.value.length,ie=fe,X.value instanceof l)continue;for(var ve=X;ve!==E.tail&&(fe<ee||typeof ve.value=="string");ve=ve.next)J++,fe+=ve.value.length;J--,L=S.slice(ie,fe),Q.index-=ie}else if(Q=u(ne,0,L,Z),!Q)continue;var Oe=Q.index,Ae=Q[0],Ne=L.slice(0,Oe),Ce=L.slice(Oe+Ae.length),Pe=ie+L.length;I&&Pe>I.reach&&(I.reach=Pe);var Qe=X.prev;Ne&&(Qe=m(E,Qe,Ne),ie+=Ne.length),y(E,Qe,J);var Le=new l(R,D?o.tokenize(Ae,D):Ae,ue,Ae);if(X=m(E,Qe,Le),Ce&&m(E,X,Ce),J>1){var Ie={cause:R+","+B,reach:Pe};d(S,E,C,X.prev,ie,Ie),I&&Ie.reach>I.reach&&(I.reach=Ie.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function m(S,E,C){var T=E.next,j={value:C,prev:E,next:T};return E.next=j,T.prev=j,S.length++,j}function y(S,E,C){for(var T=E.next,j=0;j<C&&T!==S.tail;j++)T=T.next;E.next=T,T.prev=E,S.length-=j}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,T=E.code,j=E.immediateClose;r.postMessage(o.highlight(T,o.languages[C],C)),j&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function x(){o.manual||o.highlightAll()}if(!o.manual){var w=document.readyState;w==="loading"||w==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",x):window.requestAnimationFrame?window.requestAnimationFrame(x):window.setTimeout(x,16)}return o}(t);e.exports&&(e.exports=n),typeof kd<"u"&&(kd.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,x){return" Error "+b+" while fetching file: "+x},i=" Error: File does not exist or is empty",s={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",h="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function m(b,x,w){var S=new XMLHttpRequest;S.open("GET",b,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?x(S.responseText):S.status>=400?w(a(S.status,S.statusText)):w(i))},S.send(null)}function y(b){var x=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(x){var w=Number(x[1]),S=x[2],E=x[3];return S?E?[w,Number(E)]:[w,void 0]:[w,w]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var x=b.element;if(x.matches(h)){b.code="",x.setAttribute(o,l);var w=x.appendChild(document.createElement("CODE"));w.textContent=r;var S=x.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=s[C]||C}n.util.setLanguage(w,E),n.util.setLanguage(x,E);var T=n.plugins.autoloader;T&&T.loadLanguages(E),m(S,function(j){x.setAttribute(o,u);var I=y(x.getAttribute("data-range"));if(I){var R=j.split(/\r\n?|\n/g),F=I[0],B=I[1]==null?R.length:I[1];F<0&&(F+=R.length),F=Math.max(0,Math.min(F-1,R.length)),B<0&&(B+=R.length),B=Math.max(0,Math.min(B,R.length)),j=R.slice(F,B).join(`
`),x.hasAttribute("data-start")||x.setAttribute("data-start",String(F+1))}w.textContent=j,n.highlightElement(w)},function(j){x.setAttribute(o,d),w.textContent=j})}}),n.plugins.fileHighlight={highlight:function(x){for(var w=(x||document).querySelectorAll(h),S=0,E;E=w[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(VS)),VS.exports}var pee=hee();const mee=ui(pee);var aj={},ij;function gee(){return ij||(ij=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),aj}gee();var sj={},oj;function yee(){return oj||(oj=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),sj}yee();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,s=0;s<a.length;s++)i[a[s]]=e.languages.bash[a[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var y=0,v=m.length;y<v;y++){var b=m[y];if(b.type!=="code"){h(b.content);continue}var x=b.content[1],w=b.content[3];if(x&&w&&x.type==="code-language"&&w.type==="code-block"&&typeof x.content=="string"){var S=x.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;w.alias?typeof w.alias=="string"?w.alias=[w.alias,E]:w.alias.push(E):w.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",m=0,y=d.classes.length;m<y;m++){var v=d.classes[m],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var x=e.languages[h];if(x)d.content=e.highlight(u(d.content),x,h);else if(h&&h!=="none"&&e.plugins.autoloader){var w="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=w,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(w);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var h=d.replace(s,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,y){if(y=y.toLowerCase(),y[0]==="#"){var v;return y[1]==="x"?v=parseInt(y.slice(2),16):v=Number(y.slice(1)),l(v)}else{var b=o[y];return b||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(o,l){l=(l||"").replace(/m/g,"")+"m";var u=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(u,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(i),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var lj={},cj;function bee(){return cj||(cj=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),lj}bee();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const vee=({lang:e,code:t,isStreaming:n=!1})=>{const{foldStreamingCodeBlocks:r}=fr(dn(v=>({prismThemeUrl:v.prismThemeUrl,theme:v.theme,foldStreamingCodeBlocks:v.foldStreamingCodeBlocks}))),[a,i]=k.useState(!1),[s,o]=k.useState(n?r:!1),l=k.useRef(null),u=k.useCallback(()=>{if(l.current&&t)try{l.current.style.whiteSpace!=="pre-wrap"&&(l.current.style.whiteSpace="pre-wrap"),l.current.textContent=t,mee.highlightElement(l.current)}catch(v){console.error("Prism highlight error:",v),l.current.textContent=t}else l.current&&(l.current.textContent="")},[t]);k.useEffect(()=>{s||u()},[t,e,s,u]);const d=async()=>{try{await navigator.clipboard.writeText(t),i(!0),Ye.success("Code copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(v){Ye.error("Failed to copy code."),console.error("Clipboard copy failed:",v)}},h=()=>{const v=s;o(b=>!b),v&&setTimeout(u,0)},m=e?`language-${e}`:"language-plaintext",y=k.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":s?"Unfold code":"Fold code",children:p.jsx(Jw,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{side:"top",children:s?"Unfold":"Fold"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:d,"aria-label":"Copy code",children:a?p.jsx(xi,{className:"h-3.5 w-3.5 text-green-500"}):p.jsx(yk,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{side:"top",children:"Copy"})]})})]})]}),p.jsx("div",{})]}),!s&&p.jsx("div",{className:"overflow-hidden w-full",children:p.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:p.jsx("code",{ref:l,className:m+" block"})})}),s&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:h,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:y})})]})},S0=k.memo(vee);var lt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(lt||(lt={}));const uj={[lt.EPERM]:"Operation not permitted",[lt.ENOENT]:"No such file or directory",[lt.EINTR]:"Interrupted system call",[lt.EIO]:"Input/output error",[lt.ENXIO]:"No such device or address",[lt.EBADF]:"Bad file descriptor",[lt.EAGAIN]:"Resource temporarily unavailable",[lt.ENOMEM]:"Cannot allocate memory",[lt.EACCES]:"Permission denied",[lt.EFAULT]:"Bad address",[lt.ENOTBLK]:"Block device required",[lt.EBUSY]:"Resource busy or locked",[lt.EEXIST]:"File exists",[lt.EXDEV]:"Invalid cross-device link",[lt.ENODEV]:"No such device",[lt.ENOTDIR]:"File is not a directory",[lt.EISDIR]:"File is a directory",[lt.EINVAL]:"Invalid argument",[lt.ENFILE]:"Too many open files in system",[lt.EMFILE]:"Too many open files",[lt.ETXTBSY]:"Text file busy",[lt.EFBIG]:"File is too big",[lt.ENOSPC]:"No space left on disk",[lt.ESPIPE]:"Illegal seek",[lt.EROFS]:"Cannot modify a read-only file system",[lt.EMLINK]:"Too many links",[lt.EPIPE]:"Broken pipe",[lt.EDOM]:"Numerical argument out of domain",[lt.ERANGE]:"Numerical result out of range",[lt.EDEADLK]:"Resource deadlock would occur",[lt.ENAMETOOLONG]:"File name too long",[lt.ENOLCK]:"No locks available",[lt.ENOSYS]:"Function not implemented",[lt.ENOTEMPTY]:"Directory is not empty",[lt.ELOOP]:"Too many levels of symbolic links",[lt.ENOMSG]:"No message of desired type",[lt.EBADE]:"Invalid exchange",[lt.EBADR]:"Invalid request descriptor",[lt.EXFULL]:"Exchange full",[lt.ENOANO]:"No anode",[lt.EBADRQC]:"Invalid request code",[lt.ENOSTR]:"Device not a stream",[lt.ENODATA]:"No data available",[lt.ETIME]:"Timer expired",[lt.ENOSR]:"Out of streams resources",[lt.ENONET]:"Machine is not on the network",[lt.EREMOTE]:"Object is remote",[lt.ENOLINK]:"Link has been severed",[lt.ECOMM]:"Communication error on send",[lt.EPROTO]:"Protocol error",[lt.EBADMSG]:"Bad message",[lt.EOVERFLOW]:"Value too large for defined data type",[lt.EBADFD]:"File descriptor in bad state",[lt.ESTRPIPE]:"Streams pipe error",[lt.ENOTSOCK]:"Socket operation on non-socket",[lt.EDESTADDRREQ]:"Destination address required",[lt.EMSGSIZE]:"Message too long",[lt.EPROTOTYPE]:"Protocol wrong type for socket",[lt.ENOPROTOOPT]:"Protocol not available",[lt.EPROTONOSUPPORT]:"Protocol not supported",[lt.ESOCKTNOSUPPORT]:"Socket type not supported",[lt.ENOTSUP]:"Operation is not supported",[lt.ENETDOWN]:"Network is down",[lt.ENETUNREACH]:"Network is unreachable",[lt.ENETRESET]:"Network dropped connection on reset",[lt.ETIMEDOUT]:"Connection timed out",[lt.ECONNREFUSED]:"Connection refused",[lt.EHOSTDOWN]:"Host is down",[lt.EHOSTUNREACH]:"No route to host",[lt.EALREADY]:"Operation already in progress",[lt.EINPROGRESS]:"Operation now in progress",[lt.ESTALE]:"Stale file handle",[lt.EREMOTEIO]:"Remote I/O error",[lt.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(lt[t],uj[lt[t]],n,r)}constructor(t,n=uj[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=lt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var GS={exports:{}},dj;function wee(){return dj||(dj=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new a(d,h||l,m),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],y]:l._events[v].push(y):(l._events[v]=y,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,y=h.length,v=new Array(y);m<y;m++)v[m]=h[m].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,m,y,v){var b=n?n+u:u;if(!this._events[b])return!1;var x=this._events[b],w=arguments.length,S,E;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,m),!0;case 5:return x.fn.call(x.context,d,h,m,y),!0;case 6:return x.fn.call(x.context,d,h,m,y,v),!0}for(E=1,S=new Array(w-1);E<w;E++)S[E-1]=arguments[E];x.fn.apply(x.context,S)}else{var C=x.length,T;for(E=0;E<C;E++)switch(x[E].once&&this.removeListener(u,x[E].fn,void 0,!0),w){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,d);break;case 3:x[E].fn.call(x[E].context,d,h);break;case 4:x[E].fn.call(x[E].context,d,h,m);break;default:if(!S)for(T=1,S=new Array(w-1);T<w;T++)S[T-1]=arguments[T];x[E].fn.apply(x[E].context,S)}}return!0},o.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,m){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var b=0,x=[],w=v.length;b<w;b++)(v[b].fn!==d||m&&!v[b].once||h&&v[b].context!==h)&&x.push(v[b]);x.length?this._events[y]=x.length===1?x[0]:x:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(GS)),GS.exports}var xee=wee();const Yk=ui(xee);var R6;let _ee=class extends Yk{constructor(n){super();va(this,R6,"List");va(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),s=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),s}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(R6=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function fj(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function br(e){throw e}const hj=Intl.NumberFormat("en",{notation:"compact"});hj.format.bind(hj);function Jd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function See(e){try{return JSON.parse(e),!0}catch{return!1}}function EC(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function Xk(e){return e.at(0).toUpperCase()+e.slice(1)}const Eee=new TextEncoder;function Ed(e){return Eee.encode(e)}const pj=new TextDecoder;function Jk(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return pj.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),pj.decode(t)}function Ng(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Ng(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function Cee(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var kee={};let Tee="process"in globalThis&&"env"in globalThis.process&&kee.U_DEBUG=="true";function Rg(...e){Tee&&console.debug("[U]",...e)}const mj=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],Aee=[...mj,...mj.map(e=>Xk(e)),"char"],Qk=/^(u?int|float)(8|16|32|64|128)$/i;function vP(e){return e=="char"?"uint8":e.toLowerCase()}function eT(e){return Qk.test(e.toString())}function CC(e){return e=="char"||Qk.test(e.toString().toLowerCase())}function Nee(e){if(!CC(e))throw new TypeError("Not a valid primitive type: "+e)}const gj=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function wP(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function Ree(e){return e!=null&&typeof e=="object"&&"struct"in e}function _x(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function eo(e){return typeof e=="function"&&Symbol.metadata in e&&Ree(e[Symbol.metadata])}function E0(e){return e!=null&&typeof e=="object"&&eo(e.constructor)}function xP(e){if(!E0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function tT(e){return E0(e)||eo(e)}function _P(e){if(!tT(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function nT(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function qr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=qr(e[i]);return a}if(typeof e=="string")return Nee(e),+vP(e).match(Qk)[2]/8;if(nT(e))return e[Symbol.size];_P(e);const t=eo(e)?e:e.constructor;_x(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(eo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(E0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,qr(i)):r+=qr(i);continue}if(typeof a.length!="string")continue;let s=0;for(let o=0;o<e[a.length];o++)s+=qr(tT(i[o])?i[o]:a.type);n.isUnion?r=Math.max(r,s):r+=s}return r}function Iee(e,t){var i;_P(e);const n=eo(e)?e:e.constructor;_x(n);const{struct:r}=n[Symbol.metadata];if(eo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??br(new Error("Struct does not have member: "+t));let a=0;for(const s of r.members.values()){if(s.name==t)return a;const o=e[s.name];a+=qr(tT(o)?o:s.type)}throw new Error("Struct does not have member: "+t)}function jee(e,t){return Math.ceil(e/t)*t}function Qd(e={}){return function(n,r){const a=new Map;let i=0,s=!1;for(const{name:o,type:l,length:u}of wP(r)){if(!CC(l)&&!eo(l))throw new TypeError("Not a valid type: "+l);if(typeof u=="string"){const m=a.get(u);if(!m)throw new Error(`"${u}" is undefined or declared after "${o}"`);if(!eT(m.type))throw new Error(`"${u}" is not a number and cannot be used to count "${o}"`)}let d=`${typeof l=="string"?l:l.name} ${o}`;u!==void 0&&(d+=`[${u}]`),a.set(o,{name:o,staticOffset:e.isUnion?0:i,type:CC(l)?vP(l):l,length:u,decl:d});const h=typeof u=="string"||eo(l)&&l[Symbol.metadata].struct.isDynamic?0:qr(l)*(u||1);s||(s=eo(l)?l[Symbol.metadata].struct.isDynamic:typeof u=="string"),i=e.isUnion?Math.max(i,h):i+h,i=jee(i,e.align||1),Rg("define",n.name+"."+o)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:s,isUnion:e.isUnion??!1},n}}function Ig(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return wP(r).push({name:a,type:e,length:t}),n}}function SP(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:br(new Error("Array lengths must be natural numbers"))}function Za(e){if(nT(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();xP(e),_x(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=qr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Rg("serialize",e.constructor.name);let s=0,o=0;for(const l of n.values()){const u=SP(e,l);Rg("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),s=o,o+=E0(h)?qr(h):qr(l.type),!eT(l.type)){a.set(h?Za(h):new Uint8Array(qr(l.type)),s);continue}const m=`set${Xk(l.type)}`;if(m=="setInt64"){i.setBigInt64(s,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(s,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(s+(t.bigEndian?8:0),h&gj,!t.bigEndian),i.setBigInt64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(s+(t.bigEndian?8:0),h&gj,!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(s+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](s,Number(h),!t.bigEndian)}}return a}function Sx(e,t){const n=Cee(t);if(nT(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);xP(e),_x(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Rg("deserialize",e.constructor.name);let s=0,o=0;for(const l of a.values()){const u=SP(e,l);Rg("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name]:e;const m=u!=-1?d:l.name,y=h[m]===null||h[m]===void 0,v=y&&eo(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(s=o,!E0(h[m])&&!v&&(o+=qr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(s))+e[l.name].slice(d+1);continue}if(!eT(l.type)){if(v&&eo(l.type))h[m]??(h[m]=new l.type);else if(y)continue;Sx(h[m],new Uint8Array(n.subarray(s))),o+=qr(h[m]);continue}u&&u!=-1&&(h||(h=[]));const b=`get${Xk(l.type)}`;if(b=="getInt64"){h[m]=i.getBigInt64(s,!r.bigEndian);continue}if(b=="getUint64"){h[m]=i.getBigUint64(s,!r.bigEndian);continue}if(b=="getInt128"){h[m]=i.getBigInt64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[m]=i.getBigUint64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[m]=i.getFloat64(s+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[b](s,!r.bigEndian)}}}function Oee(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Ig(e,n):Ig(e)(n,r)}return t}const xn=Object.fromEntries(Aee.map(e=>[e,Oee(e)]));function Dee(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const ho={root:"/",pwd:"/",credentials:Dee({uid:0,gid:0}),descriptors:new Map};function EP(e,t){let n="",r=0,a=-1,i=0,s="\0";for(let o=0;o<=e.length;++o){if(o<e.length)s=e[o];else{if(s=="/")break;s="/"}if(s=="/"){if(!(a===o-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}else if(n.length!==0){n="",r=0,a=o,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else s==="."&&i!==-1?++i:i=-1}return n}function nc(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:ho.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=EP(n,!r),r?`/${n}`:n.length?n:"/"}function Mee(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=EP(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function cr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?Mee(t):"."}function CP(e,t){if(e===t||(e=nc.call(this,e),t=nc.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,s=t.length-i,o=a<s?a:s;let l=-1,u=0;for(;u<o;u++){const h=e[n+u];if(h!==t[i+u])break;h==="/"&&(l=u)}if(u===o)if(s>o){if(t[i+u]==="/")return t.slice(i+u+1);if(u===0)return t.slice(i+u)}else a>o&&(e[n+u]==="/"?l=u:u===0&&(l=0));let d="";for(u=n+l+1;u<=r;++u)(u===r||e[u]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function ir(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function zh(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Fo(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,s=-1,o=!0,l=e.length-1,u=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){i=l+1;break}continue}s===-1&&(o=!1,s=l+1),e[l]==="."?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}if(s!==-1){const d=i===0&&t?1:i;a===-1||u===0||u===1&&a===s-1&&a===i+1?n.base=n.name=e.slice(d,s):(n.name=e.slice(d,a),n.base=e.slice(d,s),n.ext=e.slice(a,s))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(vn||(vn={}));vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";const Pee=new _ee;function Fee(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};Pee.add(n),Vee(n)}function Lee(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+cr(i,e.path)}function Ou(e){return function(t,n={}){return Fee(e,Lee(t,n)),t}}Ou(vn.EMERG);const $ee=Ou(vn.ALERT),Ex=Ou(vn.CRIT),Pi=Ou(vn.ERR),ii=Ou(vn.WARN),rT=Ou(vn.NOTICE),kP=Ou(vn.INFO),ag=Ou(vn.DEBUG);function Bee(e,t){return`\x1B[${t}m${e}\x1B[0m`}function zee(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[Bee(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";let Uee=e=>[...zee(e),e.message];function qee(e){const t=Uee(e);return typeof t=="string"?[t]:Array.from(t)}let Hee=console.error;function Vee(e){e.level>Gee||Hee(...qee(e))}let Gee=vn.ALERT;function aT(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function Kee(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function Wee(e,t){if(typeof t!="object"||t===null)throw Pi(new Ue(lt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){ag("Using default for option: "+n);continue}throw Pi(new Ue(lt.EINVAL,"Missing required option: "+n))}const i=(u,d=a)=>{var h;return typeof u=="function"?Symbol.hasInstance in u&&u.prototype?a instanceof u:u(a):typeof a===u||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===u};if(Array.isArray(r.type)?r.type.some(u=>i(u)):i(r.type))continue;const s=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,o=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw Pi(new Ue(lt.EINVAL,`Incorrect type for "${n}": ${s} (expected ${l})`))}}function TP(e){return e!=null&&typeof e=="object"&&"backend"in e&&aT(e.backend)}const iT=0,Ca=4,ta=2,Nv=1,sT=1,Zee=2,Yee=4,AP=0,ri=1,Gl=2,Cx=64,kx=128,Xee=256,Tx=512,zd=1024,Jee=65536,Qee=262144,ete=131072,Ax=1052672,tte=4096,nte=32768,rte=16384,ate=2048,kr=61440,ef=49152,cc=40960,to=32768,tf=24576,pa=16384,nf=8192,rf=4096,C0=2048,k0=1024,ite=512,ste=448,NP=256,RP=128,IP=64,ote=56,jP=32,OP=16,DP=8,lte=7,MP=4,PP=2,FP=1,cte=0,Ci=4294967295,LP=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:sT,COPYFILE_FICLONE:Zee,COPYFILE_FICLONE_FORCE:Yee,F_OK:iT,O_APPEND:zd,O_CREAT:Cx,O_DIRECT:rte,O_DIRECTORY:Jee,O_DSYNC:tte,O_EXCL:kx,O_NOATIME:Qee,O_NOCTTY:Xee,O_NOFOLLOW:ete,O_NONBLOCK:ate,O_RDONLY:AP,O_RDWR:Gl,O_SYMLINK:nte,O_SYNC:Ax,O_TRUNC:Tx,O_WRONLY:ri,R_OK:Ca,S_IFBLK:tf,S_IFCHR:nf,S_IFDIR:pa,S_IFIFO:rf,S_IFLNK:cc,S_IFMT:kr,S_IFREG:to,S_IFSOCK:ef,S_IRGRP:jP,S_IROTH:MP,S_IRUSR:NP,S_IRWXG:ote,S_IRWXO:lte,S_IRWXU:ste,S_ISGID:k0,S_ISUID:C0,S_ISVTX:ite,S_IWGRP:OP,S_IWOTH:PP,S_IWUSR:RP,S_IXGRP:DP,S_IXOTH:FP,S_IXUSR:IP,UV_FS_O_FILEMAP:cte,W_OK:ta,X_OK:Nv,size_max:Ci},Symbol.toStringTag,{value:"Module"})),ev=BigInt(1e3);class $P{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:s,size:o,mode:l,ino:u,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(s??0),this.size=this._convert(o??0),this.ino=this._convert(u??0),this.mode=this._convert(l??420&to),(this.mode&kr)==0&&(this.mode=this.mode|this._convert(to)),Object.assign(this,d)}isFile(){return(this.mode&kr)===to}isDirectory(){return(this.mode&kr)===pa}isSymbolicLink(){return(this.mode&kr)===cc}isSocket(){return(this.mode&kr)===ef}isBlockDevice(){return(this.mode&kr)===tf}isCharacterDevice(){return(this.mode&kr)===nf}isFIFO(){return(this.mode&kr)===rf}toJSON(){return Jd(this,kC)}hasAccess(t,n){return pr(n,this._isBigint?new uc(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*ev}get mtimeNs(){return BigInt(this.mtimeMs)*ev}get ctimeNs(){return BigInt(this.ctimeMs)*ev}get birthtimeNs(){return BigInt(this.birthtimeMs)*ev}}function BP(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<Ci?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<Ci?e.gid=n:r=!1,r}class uc extends $P{constructor(){super(...arguments),this._isBigint=!1}}class af extends $P{constructor(){super(...arguments),this._isBigint=!0}}function ute(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class dte{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Ci,this.ffree=Ci}}class fte{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(Ci),this.ffree=BigInt(Ci)}}var Mr=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},bn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},oT=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const es=0,hte=1024;let yj=(()=>{var e,t;let n=[Qd()],r,a=[],i,s,o=[],l=[],u,d=[],h=[],m,y=[],v=[],b,x=[],w=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=bn(this,o,0),this.valueSize=(bn(this,l),bn(this,d,0)),this._key=(bn(this,h),bn(this,y,"")),this._value=(bn(this,v),bn(this,x,new Uint8Array(hte))),bn(this,w),S&&(this.key=S),E&&(this.value=E)}},oT(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=xn).uint32.bind(e)],u=[(t=xn).uint32.bind(t)],m=[xn.char("keySize")],b=[xn.uint8("valueSize")],Mr(null,null,s,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},o,l),Mr(null,null,u,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},d,h),Mr(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},y,v),Mr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},x,w),Mr(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),bn(i,a)})(),i})(),Su=(()=>{var e;let t=[Qd()],n,r=[],a,i,s=[],o=[],l,u=[],d=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const y=this.get(h);if(y){y.value=m;return}this.data.push(new yj(h,m)),this.size++}remove(h){const m=this.data.findIndex(y=>y.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=bn(this,s,0),this.data=(bn(this,o),bn(this,u,[])),bn(this,d)}},oT(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=xn).uint32.bind(e)],l=[Ig(yj,"size")],Mr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,y)=>{m.size=y}},metadata:h},s,o),Mr(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,y)=>{m.data=y}},metadata:h},u,d),Mr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),bn(a,r)})(),a})();const kC=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],pte=4;var Fi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Fi||(Fi={}));let ha=(()=>{var e,t,n,r,a,i,s,o,l,u,d,h,m,y,v,b;let x=[Qd()],w,S=[],E,C,T=[],j=[],I,R=[],F=[],B,H=[],D=[],Z,V=[],ue=[],ae,ne=[],X=[],ie,L=[],J=[],Q,ee=[],fe=[],ve,Oe=[],Ae=[],Ne,Ce=[],Pe=[],Qe,Le=[],Ie=[],z,Se=[],Te=[],de,se=[],te=[],xe,Fe=[],Ee=[],Ge,Nt=[],it=[],St,Ft=[],Dt=[],Zt,ye=[],O=[],K,he=[],je=[],be,ke=[],le=[];var ft=E=class{constructor(vt){if(this.data=bn(this,T,EC(0,Ci)),this.__data_old=(bn(this,j),bn(this,R,0)),this.size=(bn(this,F),bn(this,H,0)),this.mode=(bn(this,D),bn(this,V,0)),this.nlink=(bn(this,ue),bn(this,ne,1)),this.uid=(bn(this,X),bn(this,L,0)),this.gid=(bn(this,J),bn(this,ee,0)),this.atimeMs=(bn(this,fe),bn(this,Oe,Date.now())),this.birthtimeMs=(bn(this,Ae),bn(this,Ce,Date.now())),this.mtimeMs=(bn(this,Pe),bn(this,Le,Date.now())),this.ctimeMs=(bn(this,Ie),bn(this,Se,Date.now())),this.ino=(bn(this,Te),bn(this,se,EC(0,Ci))),this.__ino_old=(bn(this,te),bn(this,Fe,0)),this.flags=(bn(this,Ee),bn(this,Nt,0)),this.__after_flags=(bn(this,it),bn(this,Ft,0)),this.version=(bn(this,Dt),bn(this,ye,0)),this.__padding=(bn(this,O),bn(this,he,[])),this.attributes=(bn(this,je),bn(this,ke,new Su)),bn(this,le),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<qr(ft))throw Ex(new Ue(lt.EIO,"Buffer is too small to create an inode"));Sx(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Jd(this,kC),attributes:this.attributes}}toStats(){return new uc(this)}update(vt){if(!vt)return!1;let P=!1;for(const Be of kC)vt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==vt[Be]&&(Be=="atimeMs"&&this.flags&Fi.NoAtime||(this[Be]=vt[Be],P=!0)));return vt.attributes&&(this.attributes=vt.attributes,P=!0),P&&(this.ctimeMs=Date.now()),P}};return oT(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=xn).uint32.bind(e)],I=[(t=xn).uint32.bind(t)],B=[(n=xn).uint32.bind(n)],Z=[(r=xn).uint16.bind(r)],ae=[(a=xn).uint32.bind(a)],ie=[(i=xn).uint32.bind(i)],Q=[(s=xn).uint32.bind(s)],ve=[(o=xn).float64.bind(o)],Ne=[(l=xn).float64.bind(l)],Qe=[(u=xn).float64.bind(u)],z=[(d=xn).float64.bind(d)],de=[(h=xn).uint32.bind(h)],xe=[(m=xn).uint32.bind(m)],Ge=[(y=xn).uint32.bind(y)],St=[(v=xn).uint16.bind(v)],Zt=[(b=xn).uint32.bind(b)],K=[xn.uint8(48)],be=[Ig(Su)],Mr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:P=>"data"in P,get:P=>P.data,set:(P,Be)=>{P.data=Be}},metadata:vt},T,j),Mr(null,null,I,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:P=>"__data_old"in P,get:P=>P.__data_old,set:(P,Be)=>{P.__data_old=Be}},metadata:vt},R,F),Mr(null,null,B,{kind:"field",name:"size",static:!1,private:!1,access:{has:P=>"size"in P,get:P=>P.size,set:(P,Be)=>{P.size=Be}},metadata:vt},H,D),Mr(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:P=>"mode"in P,get:P=>P.mode,set:(P,Be)=>{P.mode=Be}},metadata:vt},V,ue),Mr(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:P=>"nlink"in P,get:P=>P.nlink,set:(P,Be)=>{P.nlink=Be}},metadata:vt},ne,X),Mr(null,null,ie,{kind:"field",name:"uid",static:!1,private:!1,access:{has:P=>"uid"in P,get:P=>P.uid,set:(P,Be)=>{P.uid=Be}},metadata:vt},L,J),Mr(null,null,Q,{kind:"field",name:"gid",static:!1,private:!1,access:{has:P=>"gid"in P,get:P=>P.gid,set:(P,Be)=>{P.gid=Be}},metadata:vt},ee,fe),Mr(null,null,ve,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:P=>"atimeMs"in P,get:P=>P.atimeMs,set:(P,Be)=>{P.atimeMs=Be}},metadata:vt},Oe,Ae),Mr(null,null,Ne,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:P=>"birthtimeMs"in P,get:P=>P.birthtimeMs,set:(P,Be)=>{P.birthtimeMs=Be}},metadata:vt},Ce,Pe),Mr(null,null,Qe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:P=>"mtimeMs"in P,get:P=>P.mtimeMs,set:(P,Be)=>{P.mtimeMs=Be}},metadata:vt},Le,Ie),Mr(null,null,z,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:P=>"ctimeMs"in P,get:P=>P.ctimeMs,set:(P,Be)=>{P.ctimeMs=Be}},metadata:vt},Se,Te),Mr(null,null,de,{kind:"field",name:"ino",static:!1,private:!1,access:{has:P=>"ino"in P,get:P=>P.ino,set:(P,Be)=>{P.ino=Be}},metadata:vt},se,te),Mr(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:P=>"__ino_old"in P,get:P=>P.__ino_old,set:(P,Be)=>{P.__ino_old=Be}},metadata:vt},Fe,Ee),Mr(null,null,Ge,{kind:"field",name:"flags",static:!1,private:!1,access:{has:P=>"flags"in P,get:P=>P.flags,set:(P,Be)=>{P.flags=Be}},metadata:vt},Nt,it),Mr(null,null,St,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:P=>"__after_flags"in P,get:P=>P.__after_flags,set:(P,Be)=>{P.__after_flags=Be}},metadata:vt},Ft,Dt),Mr(null,null,Zt,{kind:"field",name:"version",static:!1,private:!1,access:{has:P=>"version"in P,get:P=>P.version,set:(P,Be)=>{P.version=Be}},metadata:vt},ye,O),Mr(null,null,K,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:P=>"__padding"in P,get:P=>P.__padding,set:(P,Be)=>{P.__padding=Be}},metadata:vt},he,je),Mr(null,null,be,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:P=>"attributes"in P,get:P=>P.attributes,set:(P,Be)=>{P.attributes=Be}},metadata:vt},ke,le),Mr(null,w={value:E},x,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=w.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),bn(E,S)})(),ft=E})();function mte(e){return(e.mode&kr)===to}function oo(e){return(e.mode&kr)===pa}function Uh(e){return(e.mode&kr)===cc}function gte(e){return(e.mode&kr)===ef}function jg(e){return(e.mode&kr)===tf}function Og(e){return(e.mode&kr)===nf}function yte(e){return(e.mode&kr)===rf}function pr(e,t,n){const r=(e==null?void 0:e.credentials)||ho.credentials;if(Uh(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&NP&&(a|=Ca),t.mode&RP&&(a|=ta),t.mode&IP&&(a|=Nv)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&jP&&(a|=Ca),t.mode&OP&&(a|=ta),t.mode&DP&&(a|=Nv)),t.mode&MP&&(a|=Ca),t.mode&PP&&(a|=ta),t.mode&FP&&(a|=Nv),(a&n)===n}const bj=1;class pw extends Map{constructor(){super(...arguments),this.maxSize=Ci}toJSON(){return{version:bj,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*qr(ha);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&kr)!=pa)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())ir(a)==t&&a!=t&&(r[zh(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&kr)!=pa)continue;const a={};for(const i of this.keys())ir(i)==n&&i!=n&&(a[zh(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=bj)throw new Ue(lt.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=EC(1,Ci)),r=="/"&&(a.ino=0),this.set(r,new ha(a));return this}static parse(t){if(!See(t))throw new Ue(lt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new pw;return r.fromJSON(n),r}}const KS=4096;let lT=class TC{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===TC.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===TC.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:s=a}=n;for(let o=i;o<s;o+=KS){const l=o+KS>s?s-o:KS,u=new Uint8Array(l);await this.read(t,u,o,o+l).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,s)=>{let o=!1;const l=d=>{o=!0,s.error(d)},{size:u}=await this.stat(t);await this.write(t,i,a).catch(l),!o&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(u,a)}).catch(l))}})}};function bi(e){return JSON.parse(Jk(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function xs(e){return Ed(JSON.stringify(e))}function Du(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(lt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function mw(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(lt.EINVAL,"Invalid time.")}}function hn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(lt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(lt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(lt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:nc(e)}function Kl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:Du("mode"in e?e==null?void 0:e.mode:null,r)}}class bte{constructor(t,n,r,a){va(this,"id");va(this,"_size");va(this,"options");va(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,s)=>i.start-s.start),r.ranges=r.ranges.reduce((i,s)=>(!i.length||i.at(-1).end<s.start?i.push(s):i.at(-1).end=Math.max(i.at(-1).end,s.end),i),[]),r.data=Ng(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)){if(s.start>=n)break;r.push({start:Math.max(t,s.start),end:Math.min(n,s.end)})}}r.sort((i,s)=>i.start-s.start);const a=[];for(const i of r){const s=a.at(-1);s&&i.start<=s.end?s.end=Math.max(s.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Ng(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},s=this.regions.findIndex(o=>o.offset>n);return s==-1?this.regions.push(i):this.regions.splice(s,0,i),this.collect(),this}}var WS,ZS,YS;(WS=Promise.withResolvers)!==null&&WS!==void 0||(Promise.withResolvers=(ii("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(ZS=Symbol.dispose)!==null&&ZS!==void 0||(Symbol.dispose=(ii("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(YS=Symbol.asyncDispose)!==null&&YS!==void 0||(Symbol.asyncDispose=(ii("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class zP{constructor(t){this.store=t}}class vte extends zP{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class AC extends zP{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new bte(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const s=i.missing(n,r);for(const{start:l,end:u}of s)this.async(this.get(t,l,u));if(s.length)throw Pi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const o=i.regionAt(n);if(!o){ii("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class wte{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof AC))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof AC))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Or=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Dr=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class UP extends lT{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const s=CP(t,a);if(s.startsWith(".."))continue;let o=cr(n,s);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:a,newKey:o,ino:i})}for(const{oldKey:a,newKey:i,ino:s}of r){this._ids.delete(a),this._ids.set(i,s);const o=this._paths.get(s);if(!o){ii("Missing paths in table for ino "+s);continue}o.delete(a),o.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,ag(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!0),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),await r.set(s.ino,Za(s)),a.has(i)&&await r.set(s.data,xs(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!1),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),r.setSync(s.ino,Za(s)),a.has(i)&&r.setSync(s.data,xs(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new pw,a=Or(n,this.transaction(),!0),i=[["/",0]],s=fj(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new ha(await a.get(l));if(r.set(o,u),u.mode&pa){const d=bi((t=await a.get(u.data))!==null&&t!==void 0?t:br(Ue.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([cr(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new pw,a=Or(n,this.transaction(),!1),i=[["/",0]],s=fj(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new ha(a.getSync(l));if(r.set(o,u),u.mode&pa){const d=bi((t=a.getSync(u.data))!==null&&t!==void 0?t:br(Ue.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([cr(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async rename(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!0),l=Fo(t),u=Fo(n),d=await this.findInode(o,l.dir,"rename"),h=bi((r=await o.get(d.data))!==null&&r!==void 0?r:br(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Pi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const y=u.dir==l.dir,v=y?d:await this.findInode(o,u.dir,"rename"),b=y?h:bi((a=await o.get(v.data))!==null&&a!==void 0?a:br(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const x=new ha((i=await o.get(b[u.base]))!==null&&i!==void 0?i:br(Ue.With("ENOENT",n,"rename")));if(!x.toStats().isFile())throw Ue.With("EPERM",n,"rename");await o.remove(x.data),await o.remove(b[u.base])}b[u.base]=m,await o.set(d.data,xs(h)),await o.set(v.data,xs(b)),await o.commit(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}renameSync(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!1),l=Fo(t),u=Fo(n),d=this.findInodeSync(o,l.dir,"rename"),h=bi((r=o.getSync(d.data))!==null&&r!==void 0?r:br(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Pi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const y=u.dir===l.dir,v=y?d:this.findInodeSync(o,u.dir,"rename"),b=y?h:bi((a=o.getSync(v.data))!==null&&a!==void 0?a:br(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const x=new ha((i=o.getSync(b[u.base]))!==null&&i!==void 0?i:br(Ue.With("ENOENT",n,"rename")));if(!x.toStats().isFile())throw Ue.With("EPERM",n,"rename");o.removeSync(x.data),o.removeSync(b[u.base])}b[u.base]=m,o.setSync(d.data,xs(h)),o.setSync(v.data,xs(b)),o.commitSync(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Za(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Dr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Za(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Dr(r)}}async createFile(t,n){return n.mode|=to,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=to,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=pa,await this.commitNew(t,n,Ed("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=pa,this.commitNewSync(t,n,Ed("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(bi((n=await a.get(i.data))!==null&&n!==void 0?n:br(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Dr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(bi((n=a.getSync(i.data))!==null&&n!==void 0?n:br(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Dr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!0),s=await this.findInode(i,t,"sync");n&&await i.set(s.data,n),s.update(r)&&(this._add(s.ino,t),await i.set(s.ino,Za(s))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Dr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!1),s=this.findInodeSync(i,t,"sync");n&&i.setSync(s.data,n),s.update(r)&&(this._add(s.ino,t),i.setSync(s.ino,Za(s))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Dr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!0),s=ir(n),o=await this.findInode(i,s,"link"),l=bi((r=await i.get(o.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",s,"link"))),u=await this.findInode(i,t,"link");u.nlink++,l[zh(n)]=u.ino,this._add(u.ino,n),await i.set(u.ino,Za(u)),await i.set(o.data,xs(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Dr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!1),s=ir(n),o=this.findInodeSync(i,s,"link"),l=bi((r=i.getSync(o.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",s,"link"))),u=this.findInodeSync(i,t,"link");u.nlink++,l[zh(n)]=u.ino,this._add(u.ino,n),i.setSync(u.ino,Za(u)),i.setSync(o.data,xs(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Dr(a)}}async read(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const u=(i=await o.get(l.data,r,a))!==null&&i!==void 0?i:br(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Pi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}readSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const u=(i=o.getSync(l.data,r,a))!==null&&i!==void 0?i:br(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Pi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Or(i,this.transaction(),!0),o=await this.findInode(s,t,"write");let l=n;s.flag("partial")||(l=Ng((a=await s.get(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await s.set(o.data,l,r),this._add(o.ino,t),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Dr(i);s&&await s}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Or(i,this.transaction(),!1),o=this.findInodeSync(s,t,"write");let l=n;s.flag("partial")||(l=Ng((a=s.getSync(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),s.setSync(o.data,l,r),this._add(o.ino,t),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Dr(i)}}transaction(){return new wte(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Or(t,this.transaction(),!0);if(await n.get(es))return;const r=new ha({ino:es,data:1,mode:511|pa});await n.set(r.data,Ed("{}")),this._add(es,"/"),await n.set(es,Za(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Dr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Or(t,this.transaction(),!1);if(n.getSync(es))return;const r=new ha({ino:es,data:1,mode:511|pa});n.setSync(r.data,Ed("{}")),this._add(es,"/"),n.setSync(es,Za(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Dr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){ii("Attempted to populate tables after initialization");return}ag("Populating tables with existing store metadata");const n=Or(t,this.transaction(),!0),r=await n.get(es);if(!r){rT("Store does not have a root inode");const o=new ha({ino:es,data:1,mode:511|pa});await n.set(o.data,Ed("{}")),this._add(es,"/"),await n.set(es,Za(o)),await n.commit();return}if(r.length<qr(ha)){Ex("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const s=[["/",es]];for(;s.length>0;){i++;const[o,l]=s.shift();this._add(l,o);const u=await n.get(l);if(!u){ii("Store is missing data for inode: "+l);continue}if(u.length<qr(ha)){ii(`Invalid inode size for ino ${l}: ${u.length}`);continue}const d=new ha(u);if((d.mode&pa)!=pa||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){ii("Store is missing directory data: "+d.data);continue}const m=bi(h);for(const[y,v]of Object.entries(m))s.push([cr(o,y),v])}ag(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Dr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ha((a=await t.get(i))!==null&&a!==void 0?a:br(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ha((a=t.getSync(i))!==null&&a!==void 0?a:br(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>Ci)throw Pi(new Ue(lt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Or(s,this.transaction(),!0),{dir:l,base:u}=Fo(t),d=await this.findInode(o,l,a),h=bi((i=await o.get(d.data))!==null&&i!==void 0?i:br(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),y=new ha({...n,ino:m,data:m+1,size:r.byteLength});return await o.set(y.ino,Za(y)),await o.set(y.data,r),h[u]=y.ino,await o.set(d.data,xs(h)),await o.commit(),y}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}commitNewSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Or(s,this.transaction(),!1),{dir:l,base:u}=Fo(t),d=this.findInodeSync(o,l,a),h=bi((i=o.getSync(d.data))!==null&&i!==void 0?i:br(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),y=new ha({...n,ino:m,data:m+1,size:r.byteLength});return o.setSync(y.ino,Za(y)),o.setSync(y.data,r),h[u]=y.ino,o.setSync(d.data,xs(h)),o.commitSync(),y}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Or(i,this.transaction(),!0),{dir:l,base:u}=Fo(t),d=await this.findInode(o,l,s),h=bi((r=await o.get(d.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",l,s)));if(!h[u])throw Ue.With("ENOENT",t,s);const m=h[u],y=new ha((a=await o.get(m))!==null&&a!==void 0?a:br(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&oo(y))throw Ue.With("EISDIR",t,s);await o.set(d.data,xs(h)),y.nlink>1?(y.update({nlink:y.nlink-1}),await o.set(y.ino,Za(y))):(await o.remove(y.data),await o.remove(m),this._remove(m)),await o.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Dr(i);s&&await s}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Or(i,this.transaction(),!1),{dir:l,base:u}=Fo(t),d=this.findInodeSync(o,l,s),h=bi((r=o.getSync(d.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",l,s))),m=h[u];if(!m)throw Ue.With("ENOENT",t,s);const y=new ha((a=o.getSync(m))!==null&&a!==void 0?a:br(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&oo(y))throw Ue.With("EISDIR",t,s);o.setSync(d.data,xs(h)),y.nlink>1?(y.update({nlink:y.nlink-1}),o.setSync(y.ino,Za(y))):(o.removeSync(y.data),o.removeSync(m),this._remove(m)),o.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Dr(i)}}}class xte extends vte{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class _te extends Map{constructor(t=Ci,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new xte(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const Ste={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new UP(new _te(e,t));return n.checkRootSync(),n}},Ete=Ste;let ka=!0;class vj extends Yk{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let s=this._buffer.indexOf(`
`);s>=0;s=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,s);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(s+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;_s(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;_s(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);tv(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);tv(this.output,0),_s(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,_s(this.output,-a.length,0),_s(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;_s(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(_s(this.output,-this._cursor,0),_s(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);tv(this.output,0),_s(this.output,0,0),this.output.write(this._prompt+r),this.line=r,_s(this.output,-r.length,0),_s(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(tv(this.output,0),_s(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return ii("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return ii("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function Cte(e,t,n,r){return"input"in e?new vj(e.input,e.output,e.completer,e.terminal):new vj(e,t,n,r)}function tv(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function _s(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class gw{get position(){return this.flag&zd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,s){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=s,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&Ax||this.inode.flags&Fi.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&ri||this.flag&Gl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&ri||this.flag&Gl))throw new Ue(lt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Fi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!Og(this.inode)&&!jg(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,this.fs.writeSync(this.internalPath,s,a),this._isSync&&this.sync(),s.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ri)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Fi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Og(this.inode)&&!jg(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>kr?-61441:kr)|t,(this._isSync||t>kr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,BP(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Fi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function yw(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:ho.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function fi(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:ho.descriptors).get(t);if(!a)throw new Ue(lt.EBADF);return a}function qP(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:ho.descriptors).delete(t)}const kte=/[rwasx]{1,2}\+?/;function Wl(e){if(typeof e=="number")return e;if(!kte.test(e))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);return Tte(e)}function Tte(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?AP:Cx;return e.includes("w")&&(t|=Tx),e.includes("a")&&(t|=zd),e.includes("+")?t|=Gl:e.includes("r")||(t|=ri),e.includes("s")&&(t|=Ax),e.includes("x")&&(t|=kx),t}function HP(e){let t=0;return e&ri||(t|=Ca),(e&ri||e&Gl)&&(t|=ta),t}const Dg=new Map;cT("/",Ete.create({label:"root"}));function cT(e,t){if(e[0]!="/"&&(e="/"+e),e=nc.call(this,e),Dg.has(e))throw Pi(new Ue(lt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Dg.set(e,t),kP(`Mounted ${t.name} on ${e}`),ag(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function VP(e){if(e[0]!="/"&&(e="/"+e),e=nc.call(this,e),!Dg.has(e)){ii(e+" is already unmounted");return}Dg.delete(e),rT("Unmounted "+e)}function zn(e,t){const n=(t==null?void 0:t.root)||ho.root;e=hn(cr(n,e));const r=[...Dg].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(Nte(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw $ee(new Ue(lt.EIO,"No file system",e))}function XS(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function mr(e,t){typeof e.stack=="string"&&(e.stack=XS(e.stack,t));try{e.message=XS(e.message,t)}catch{}return e.path&&(e.path=XS(e.path,t)),e}function GP(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Ci),files:(t?BigInt:Number)(n.totalNodes||Ci),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function Ate(e){var t,n,r,a,i,s,o;const l=this!==null&&this!==void 0?this:ho;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(lt.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const u=cr(l.root,e);for(const d of(o=(s=l.descriptors)===null||s===void 0?void 0:s.values())!==null&&o!==void 0?o:[]){if(!d.path.startsWith(l.root))throw Ue.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(u.length>l.root.length)throw new Ue(lt.EPERM,"Can not chroot() outside of current root");l.root=u}function Nte(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class KP extends Yk{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class WP extends KP{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?cr(t.root,n):n,Ite(this.realpath,this)}close(){super.emit("close"),jte(this.realpath,this)}[Symbol.dispose](){this.close()}}class Rte extends KP{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Eu(this.path);ute(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Eu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const iu=new Map;function Ite(e,t){const n=hn(e);iu.has(n)||iu.set(n,new Set),iu.get(n).add(t)}function jte(e,t){const n=hn(e);iu.has(n)&&(iu.get(n).delete(t),iu.get(n).size===0&&iu.delete(n))}function Ya(e,t,n){var r;e&&(n=cr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=hn(n);for(let a=n;a!="/";a=ir(a)){const i=iu.get(a);if(i)for(const s of i)s.emit("change",t,CP.call(s._context,a,n)||zh(n))}}var T0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},A0=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function Ote(e,t){e=hn(e),t=hn(t);const n=zn(e,this),r=zn(t,this);if(!Eu.call(this,ir(e)).hasAccess(ta,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Ya(this,"rename",e.toString()),Ya(this,"change",t.toString());return}pT.call(this,t,hT(e)),fT.call(this,e),Ya(this,"rename",e.toString())}catch(a){throw mr(a,{[n.path]:e,[r.path]:t})}}function uT(e){e=hn(e);try{const{fs:t,path:n}=zn(Mu.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==lt.ENOENT)return!1;throw t}}function Eu(e,t){e=hn(e);const{fs:n,path:r}=zn(Mu.call(this,e),this);try{const a=n.statSync(r);if(ka&&!pr(this,a,Ca))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new af(a):new uc(a)}catch(a){throw mr(a,{[r]:e})}}function dT(e,t){e=hn(e);const{fs:n,path:r}=zn(e,this);try{const a=n.statSync(r);if(ka&&!pr(this,a,Ca))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new af(a):new uc(a)}catch(a){throw mr(a,{[r]:e})}}function Dte(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=T0(n,sf.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(lt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{A0(n)}}function fT(e){e=hn(e);const{fs:t,path:n}=zn(e,this);try{if(ka&&!pr(this,t.statSync(n),ta))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}function sf(e,t){var n;e=hn(e);const r=Du(t.mode,420),a=Wl(t.flag);e=t.preserveSymlinks?e:Mu.call(this,e);const{fs:i,path:s}=zn(e,this);let o;try{o=i.statSync(s)}catch{}if(!o){if(!(a&Cx))throw Ue.With("ENOENT",e,"_open");const u=i.statSync(ir(s));if(!pr(this,u,ta))throw Ue.With("EACCES",ir(e),"_open");if(!oo(u))throw Ue.With("ENOTDIR",ir(e),"_open");if(!t.allowDirectory&&r&pa)throw Ue.With("EISDIR",e,"_open");if(!pr(this,u,ta))throw Ue.With("EACCES",ir(s),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ho.credentials,m=i.createFileSync(s,{mode:r,uid:u.mode&C0?u.uid:d,gid:u.mode&k0?u.gid:h});return new gw(this,e,i,s,a,m)}if(!pr(this,o,r)||!pr(this,o,HP(a)))throw Ue.With("EACCES",e,"_open");if(a&kx)throw Ue.With("EEXIST",e,"_open");const l=new gw(this,e,i,s,a,o);if(a&Tx&&l.truncate(0),!t.allowDirectory&&o.mode&pa)throw Ue.With("EISDIR",e,"_open");return l}function Nx(e,t,n=iT){return yw(sf.call(this,e,{flag:t,mode:n}))}function Rx(e,t,n){return yw(sf.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function ZP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=T0(r,typeof e=="number"?fi(this,e):sf.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),s=new Uint8Array(i);return a.read(s,0,i,0),s}catch(a){r.error=a,r.hasError=!0}finally{A0(r)}}function hT(e,t={}){const n=Kl(t,null,"r",420);if(Wl(n.flag)&ri)throw new Ue(lt.EINVAL,"Flag passed to readFile must allow for reading");const a=Fr.from(ZP.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function pT(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Kl(n,"utf8","w+",420),i=Wl(a.flag);if(!(i&ri||i&Gl))throw new Ue(lt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!s)throw new Ue(lt.EINVAL,"Data not specified");T0(r,typeof e=="number"?fi(this,e):sf.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength,0),Ya(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{A0(r)}}function Mte(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Kl(n,"utf8","a+",420),i=Wl(a.flag);if(!(i&zd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);T0(r,sf.call(this,typeof e=="number"?fi(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{A0(r)}}function Pte(e,t){const n=fi(this,e).stat();return t!=null&&t.bigint?new af(n):new uc(n)}function of(e){fi(this,e).close(),qP(this,e)}function Fte(e,t=0){if(t||(t=0),t<0)throw new Ue(lt.EINVAL);fi(this,e).truncate(t)}function Lte(e){fi(this,e).sync()}function $te(e){fi(this,e).datasync()}function Bte(e,t,n,r,a){let i,s,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";s=0,i=Fr.from(t,h),o=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n,o=r,l=typeof a=="number"?a:null;const u=fi(this,e);l??(l=u.position);const d=u.write(i,s,o,l);return Ya(this,"change",u.path),d}function zte(e,t,n,r,a){const i=fi(this,e),s=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,s,r,a)}function mT(e,t,n){fi(this,e).chown(t,n)}function gT(e,t){const n=Du(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode.");fi(this,e).chmod(n)}function yT(e,t,n){fi(this,e).utimes(mw(t),mw(n))}function YP(e){e=hn(e);const{fs:t,path:n}=zn(Mu.call(this,e),this);try{const r=t.statSync(n);if(!oo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ka&&!pr(this,r,ta))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}function bT(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ho.credentials;t=typeof t=="object"?t:{mode:t};const s=Du(t==null?void 0:t.mode,511);e=Mu.call(this,e);const{fs:o,path:l,root:u}=zn(e,this),d={[l]:e},h=(m,y)=>{if(!pr(this,y,ta))throw Ue.With("EACCES",ir(m),"mkdir");const v=o.mkdirSync(m,{mode:s,uid:y.mode&C0?y.uid:a,gid:y.mode&k0?y.gid:i});return Ya(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){h(l,o.statSync(ir(l)));return}const m=[];for(let v=l,b=e;!o.existsSync(v);v=ir(v),b=ir(b))m.unshift(v),d[v]=b;if(!m.length)return;const y=[o.statSync(ir(m[0]))];for(const[v,b]of m.entries())y.push(h(b,y[v]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw mr(m,d)}}function up(e,t){t=typeof t=="object"?t:{encoding:t},e=hn(e);const{fs:n,path:r}=zn(Mu.call(this,e),this);let a;try{const s=n.statSync(r);if(ka&&!pr(this,s,Ca))throw Ue.With("EACCES",r,"readdir");if(!oo(s))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(s){throw mr(s,{[r]:e})}const i=[];for(const s of a){let o;try{o=n.statSync(cr(r,s))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new Mg(s,o)):(t==null?void 0:t.encoding)=="buffer"?i.push(Fr.from(s)):i.push(s),!(!oo(o)||!(t!=null&&t.recursive)))for(const l of up.call(this,cr(e,s),t))l instanceof Mg?(l.path=cr(s,l.path),i.push(l)):Fr.isBuffer(l)?i.push(Fr.from(cr(s,Jk(l)))):i.push(cr(s,l))}return i}function Ute(e,t){if(e=hn(e),!Eu(ir(e)).hasAccess(Ca,this))throw Ue.With("EACCES",ir(e),"link");if(t=hn(t),!Eu(ir(t)).hasAccess(ta,this))throw Ue.With("EACCES",ir(t),"link");const{fs:n,path:r}=zn(e,this),a=zn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ka&&!pr(this,n.statSync(r),Ca))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw mr(i,{[r]:e,[a.path]:t})}}function qte(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid type: "+n);t=hn(t);const a=T0(r,sf.call(this,t,{flag:"wx",mode:420}),!1);a.write(Ed(hn(e,!0))),a.chmod(cc)}catch(a){r.error=a,r.hasError=!0}finally{A0(r)}}function NC(e,t){const n=Fr.from(ZP.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function Hte(e,t,n){const r=Nx.call(this,e,"r+");mT.call(this,r,t,n),of.call(this,r)}function Vte(e,t,n){const r=Rx.call(this,e,"r+");mT.call(this,r,t,n),of.call(this,r)}function Gte(e,t){const n=Nx.call(this,e,"r+");gT.call(this,n,t),of.call(this,n)}function Kte(e,t){const n=Rx.call(this,e,"r+");gT.call(this,n,t),of.call(this,n)}function XP(e,t,n){const r=Nx.call(this,e,"r+");yT.call(this,r,t,n),of.call(this,r)}function Wte(e,t,n){const r=Rx.call(this,e,"r+");yT.call(this,r,t,n),of.call(this,r)}function RC(e,t,n){try{const l=zn(t,e),u=l.fs.statSync(l.path);if(!Uh(u))return{...l,fullPath:t,stats:u};const d=nc.call(e,ir(t),NC.call(e,t).toString());return RC(e,d)}catch{}const{base:r,dir:a}=Fo(t),i=a=="/"?"/":Mu.call(e,a),s=cr(i,r),o=zn(s,e);try{const l=o.fs.statSync(o.path);if(!Uh(l))return{...o,fullPath:s,stats:l};const u=nc.call(e,i,NC.call(e,s).toString());return RC(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw mr(l,{[o.path]:s})}}function Mu(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=RC(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Fr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function Zte(e,t=384){if(!pr(this,Eu.call(this,e),t))throw new Ue(lt.EACCES)}function JP(e,t){e=hn(e);let n;try{n=dT.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&kr){case pa:if(t!=null&&t.recursive)for(const r of up.call(this,e))JP.call(this,cr(e,r),t);YP.call(this,e);break;case to:case cc:case tf:case nf:fT.call(this,e);break;case rf:case ef:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}function Yte(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return bT.call(this,a),n=="buffer"?Fr.from(a):a}function QP(e,t,n){if(e=hn(e),t=hn(t),n&&n&sT&&uT(t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");pT.call(this,t,hT(e)),Ya(this,"rename",t.toString())}function Xte(e,t,n){const r=fi(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function Jte(e,t,n){const r=fi(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function Qte(e,t){return e=hn(e),new vT(e,this)}function e5(e,t,n){e=hn(e),t=hn(t);const r=dT.call(this,e);if(n!=null&&n.errorOnExist&&uT.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&kr){case pa:if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");bT.call(this,t,{recursive:!0});for(const a of up.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(cr(e,a.name),cr(t,a.name))||e5.call(this,cr(e,a.name),cr(t,a.name),n);break;case to:case cc:QP.call(this,e,t);break;case tf:case nf:case rf:case ef:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&XP.call(this,t,r.atime,r.mtime)}function ene(e,t){e=hn(e);const{fs:n}=zn(e,this);return GP(n,t==null?void 0:t.bigint)}function tne(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),s=[];function o(l){const u=up(l,{withFileTypes:r,encoding:"utf8"});for(const d of u){const h=r?d.path:l+"/"+d;a(r?d:h)||(Eu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&o(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&s.push(r?d.path:h.replace(/^\/+/g,"")))}}return o(n),s}class Mg{get name(){return zh(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return mte(this.stats)}isDirectory(){return oo(this.stats)}isBlockDevice(){return jg(this.stats)}isCharacterDevice(){return Og(this.stats)}isSymbolicLink(){return Uh(this.stats)}isFIFO(){return yte(this.stats)}isSocket(){return gte(this.stats)}}class vT{checkClosed(){if(this.closed)throw new Ue(lt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await cf.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=up.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var JS={exports:{}},QS={exports:{}},e2={},wj;function Pu(){return wj||(wj=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=m,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;a[45]=62,a[95]=63;function u(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var T=C===E?0:4-C%4;return[C,T]}function d(S){var E=u(S),C=E[0],T=E[1];return(C+T)*3/4-T}function h(S,E,C){return(E+C)*3/4-C}function m(S){var E,C=u(S),T=C[0],j=C[1],I=new i(h(S,T,j)),R=0,F=j>0?T-4:T,B;for(B=0;B<F;B+=4)E=a[S.charCodeAt(B)]<<18|a[S.charCodeAt(B+1)]<<12|a[S.charCodeAt(B+2)]<<6|a[S.charCodeAt(B+3)],I[R++]=E>>16&255,I[R++]=E>>8&255,I[R++]=E&255;return j===2&&(E=a[S.charCodeAt(B)]<<2|a[S.charCodeAt(B+1)]>>4,I[R++]=E&255),j===1&&(E=a[S.charCodeAt(B)]<<10|a[S.charCodeAt(B+1)]<<4|a[S.charCodeAt(B+2)]>>2,I[R++]=E>>8&255,I[R++]=E&255),I}function y(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var T,j=[],I=E;I<C;I+=3)T=(S[I]<<16&16711680)+(S[I+1]<<8&65280)+(S[I+2]&255),j.push(y(T));return j.join("")}function b(S){for(var E,C=S.length,T=C%3,j=[],I=16383,R=0,F=C-T;R<F;R+=I)j.push(v(S,R,R+I>F?F:R+I));return T===1?(E=S[C-1],j.push(r[E>>2]+r[E<<4&63]+"==")):T===2&&(E=(S[C-2]<<8)+S[C-1],j.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),j.join("")}var x={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */x.read=function(S,E,C,T,j){var I,R,F=j*8-T-1,B=(1<<F)-1,H=B>>1,D=-7,Z=C?j-1:0,V=C?-1:1,ue=S[E+Z];for(Z+=V,I=ue&(1<<-D)-1,ue>>=-D,D+=F;D>0;I=I*256+S[E+Z],Z+=V,D-=8);for(R=I&(1<<-D)-1,I>>=-D,D+=T;D>0;R=R*256+S[E+Z],Z+=V,D-=8);if(I===0)I=1-H;else{if(I===B)return R?NaN:(ue?-1:1)*(1/0);R=R+Math.pow(2,T),I=I-H}return(ue?-1:1)*R*Math.pow(2,I-T)},x.write=function(S,E,C,T,j,I){var R,F,B,H=I*8-j-1,D=(1<<H)-1,Z=D>>1,V=j===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=T?0:I-1,ae=T?1:-1,ne=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(F=isNaN(E)?1:0,R=D):(R=Math.floor(Math.log(E)/Math.LN2),E*(B=Math.pow(2,-R))<1&&(R--,B*=2),R+Z>=1?E+=V/B:E+=V*Math.pow(2,1-Z),E*B>=2&&(R++,B/=2),R+Z>=D?(F=0,R=D):R+Z>=1?(F=(E*B-1)*Math.pow(2,j),R=R+Z):(F=E*Math.pow(2,Z-1)*Math.pow(2,j),R=0));j>=8;S[C+ue]=F&255,ue+=ae,F/=256,j-=8);for(R=R<<j|F,H+=j;H>0;S[C+ue]=R&255,ue+=ae,R/=256,H-=8);S[C+ue-ae]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=x,T=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=D,S.SlowBuffer=ee,S.INSPECT_MAX_BYTES=50;const j=2147483647;S.kMaxLength=j;const{Uint8Array:I,ArrayBuffer:R,SharedArrayBuffer:F}=globalThis;D.TYPED_ARRAY_SUPPORT=B(),!D.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function B(){try{const G=new I(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,I.prototype),Object.setPrototypeOf(G,q),G.foo()===42}catch{return!1}}Object.defineProperty(D.prototype,"parent",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.buffer}}),Object.defineProperty(D.prototype,"offset",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.byteOffset}});function H(G){if(G>j)throw new RangeError('The value "'+G+'" is invalid for option "size"');const q=new I(G);return Object.setPrototypeOf(q,D.prototype),q}function D(G,q,W){if(typeof G=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(G)}return Z(G,q,W)}D.poolSize=8192;function Z(G,q,W){if(typeof G=="string")return ne(G,q);if(R.isView(G))return ie(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(ge(G,R)||G&&ge(G.buffer,R)||typeof F<"u"&&(ge(G,F)||G&&ge(G.buffer,F)))return L(G,q,W);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=G.valueOf&&G.valueOf();if(pe!=null&&pe!==G)return D.from(pe,q,W);const Re=J(G);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return D.from(G[Symbol.toPrimitive]("string"),q,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}D.from=function(G,q,W){return Z(G,q,W)},Object.setPrototypeOf(D.prototype,I.prototype),Object.setPrototypeOf(D,I);function V(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function ue(G,q,W){return V(G),G<=0?H(G):q!==void 0?typeof W=="string"?H(G).fill(q,W):H(G).fill(q):H(G)}D.alloc=function(G,q,W){return ue(G,q,W)};function ae(G){return V(G),H(G<0?0:Q(G)|0)}D.allocUnsafe=function(G){return ae(G)},D.allocUnsafeSlow=function(G){return ae(G)};function ne(G,q){if((typeof q!="string"||q==="")&&(q="utf8"),!D.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const W=fe(G,q)|0;let pe=H(W);const Re=pe.write(G,q);return Re!==W&&(pe=pe.slice(0,Re)),pe}function X(G){const q=G.length<0?0:Q(G.length)|0,W=H(q);for(let pe=0;pe<q;pe+=1)W[pe]=G[pe]&255;return W}function ie(G){if(ge(G,I)){const q=new I(G);return L(q.buffer,q.byteOffset,q.byteLength)}return X(G)}function L(G,q,W){if(q<0||G.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<q+(W||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return q===void 0&&W===void 0?pe=new I(G):W===void 0?pe=new I(G,q):pe=new I(G,q,W),Object.setPrototypeOf(pe,D.prototype),pe}function J(G){if(D.isBuffer(G)){const q=Q(G.length)|0,W=H(q);return W.length===0||G.copy(W,0,0,q),W}if(G.length!==void 0)return typeof G.length!="number"||De(G.length)?H(0):X(G);if(G.type==="Buffer"&&Array.isArray(G.data))return X(G.data)}function Q(G){if(G>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return G|0}function ee(G){return+G!=G&&(G=0),D.alloc(+G)}D.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==D.prototype},D.compare=function(q,W){if(ge(q,I)&&(q=D.from(q,q.offset,q.byteLength)),ge(W,I)&&(W=D.from(W,W.offset,W.byteLength)),!D.isBuffer(q)||!D.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===W)return 0;let pe=q.length,Re=W.length;for(let qe=0,pt=Math.min(pe,Re);qe<pt;++qe)if(q[qe]!==W[qe]){pe=q[qe],Re=W[qe];break}return pe<Re?-1:Re<pe?1:0},D.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},D.concat=function(q,W){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return D.alloc(0);let pe;if(W===void 0)for(W=0,pe=0;pe<q.length;++pe)W+=q[pe].length;const Re=D.allocUnsafe(W);let qe=0;for(pe=0;pe<q.length;++pe){let pt=q[pe];if(ge(pt,I))qe+pt.length>Re.length?(D.isBuffer(pt)||(pt=D.from(pt)),pt.copy(Re,qe)):I.prototype.set.call(Re,pt,qe);else if(D.isBuffer(pt))pt.copy(Re,qe);else throw new TypeError('"list" argument must be an Array of Buffers');qe+=pt.length}return Re};function fe(G,q){if(D.isBuffer(G))return G.length;if(R.isView(G)||ge(G,R))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const W=G.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&W===0)return 0;let Re=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ft(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return Be(G).length;default:if(Re)return pe?-1:ft(G).length;q=(""+q).toLowerCase(),Re=!0}}D.byteLength=fe;function ve(G,q,W){let pe=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,q>>>=0,W<=q))return"";for(G||(G="utf8");;)switch(G){case"hex":return xe(this,q,W);case"utf8":case"utf-8":return Se(this,q,W);case"ascii":return se(this,q,W);case"latin1":case"binary":return te(this,q,W);case"base64":return z(this,q,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,q,W);default:if(pe)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),pe=!0}}D.prototype._isBuffer=!0;function Oe(G,q,W){const pe=G[q];G[q]=G[W],G[W]=pe}D.prototype.swap16=function(){const q=this.length;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<q;W+=2)Oe(this,W,W+1);return this},D.prototype.swap32=function(){const q=this.length;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<q;W+=4)Oe(this,W,W+3),Oe(this,W+1,W+2);return this},D.prototype.swap64=function(){const q=this.length;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<q;W+=8)Oe(this,W,W+7),Oe(this,W+1,W+6),Oe(this,W+2,W+5),Oe(this,W+3,W+4);return this},D.prototype.toString=function(){const q=this.length;return q===0?"":arguments.length===0?Se(this,0,q):ve.apply(this,arguments)},D.prototype.toLocaleString=D.prototype.toString,D.prototype.equals=function(q){if(!D.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q?!0:D.compare(this,q)===0},D.prototype.inspect=function(){let q="";const W=S.INSPECT_MAX_BYTES;return q=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(q+=" ... "),"<Buffer "+q+">"},T&&(D.prototype[T]=D.prototype.inspect),D.prototype.compare=function(q,W,pe,Re,qe){if(ge(q,I)&&(q=D.from(q,q.offset,q.byteLength)),!D.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(W===void 0&&(W=0),pe===void 0&&(pe=q?q.length:0),Re===void 0&&(Re=0),qe===void 0&&(qe=this.length),W<0||pe>q.length||Re<0||qe>this.length)throw new RangeError("out of range index");if(Re>=qe&&W>=pe)return 0;if(Re>=qe)return-1;if(W>=pe)return 1;if(W>>>=0,pe>>>=0,Re>>>=0,qe>>>=0,this===q)return 0;let pt=qe-Re,Wt=pe-W;const ut=Math.min(pt,Wt),It=this.slice(Re,qe),Lt=q.slice(W,pe);for(let en=0;en<ut;++en)if(It[en]!==Lt[en]){pt=It[en],Wt=Lt[en];break}return pt<Wt?-1:Wt<pt?1:0};function Ae(G,q,W,pe,Re){if(G.length===0)return-1;if(typeof W=="string"?(pe=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,De(W)&&(W=Re?0:G.length-1),W<0&&(W=G.length+W),W>=G.length){if(Re)return-1;W=G.length-1}else if(W<0)if(Re)W=0;else return-1;if(typeof q=="string"&&(q=D.from(q,pe)),D.isBuffer(q))return q.length===0?-1:Ne(G,q,W,pe,Re);if(typeof q=="number")return q=q&255,typeof I.prototype.indexOf=="function"?Re?I.prototype.indexOf.call(G,q,W):I.prototype.lastIndexOf.call(G,q,W):Ne(G,[q],W,pe,Re);throw new TypeError("val must be string, number or Buffer")}function Ne(G,q,W,pe,Re){let qe=1,pt=G.length,Wt=q.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(G.length<2||q.length<2)return-1;qe=2,pt/=2,Wt/=2,W/=2}function ut(Lt,en){return qe===1?Lt[en]:Lt.readUInt16BE(en*qe)}let It;if(Re){let Lt=-1;for(It=W;It<pt;It++)if(ut(G,It)===ut(q,Lt===-1?0:It-Lt)){if(Lt===-1&&(Lt=It),It-Lt+1===Wt)return Lt*qe}else Lt!==-1&&(It-=It-Lt),Lt=-1}else for(W+Wt>pt&&(W=pt-Wt),It=W;It>=0;It--){let Lt=!0;for(let en=0;en<Wt;en++)if(ut(G,It+en)!==ut(q,en)){Lt=!1;break}if(Lt)return It}return-1}D.prototype.includes=function(q,W,pe){return this.indexOf(q,W,pe)!==-1},D.prototype.indexOf=function(q,W,pe){return Ae(this,q,W,pe,!0)},D.prototype.lastIndexOf=function(q,W,pe){return Ae(this,q,W,pe,!1)};function Ce(G,q,W,pe){W=Number(W)||0;const Re=G.length-W;pe?(pe=Number(pe),pe>Re&&(pe=Re)):pe=Re;const qe=q.length;pe>qe/2&&(pe=qe/2);let pt;for(pt=0;pt<pe;++pt){const Wt=parseInt(q.substr(pt*2,2),16);if(De(Wt))return pt;G[W+pt]=Wt}return pt}function Pe(G,q,W,pe){return nt(ft(q,G.length-W),G,W,pe)}function Qe(G,q,W,pe){return nt(vt(q),G,W,pe)}function Le(G,q,W,pe){return nt(Be(q),G,W,pe)}function Ie(G,q,W,pe){return nt(P(q,G.length-W),G,W,pe)}D.prototype.write=function(q,W,pe,Re){if(W===void 0)Re="utf8",pe=this.length,W=0;else if(pe===void 0&&typeof W=="string")Re=W,pe=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(pe)?(pe=pe>>>0,Re===void 0&&(Re="utf8")):(Re=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const qe=this.length-W;if((pe===void 0||pe>qe)&&(pe=qe),q.length>0&&(pe<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let pt=!1;for(;;)switch(Re){case"hex":return Ce(this,q,W,pe);case"utf8":case"utf-8":return Pe(this,q,W,pe);case"ascii":case"latin1":case"binary":return Qe(this,q,W,pe);case"base64":return Le(this,q,W,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,q,W,pe);default:if(pt)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),pt=!0}},D.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(G,q,W){return q===0&&W===G.length?E.fromByteArray(G):E.fromByteArray(G.slice(q,W))}function Se(G,q,W){W=Math.min(G.length,W);const pe=[];let Re=q;for(;Re<W;){const qe=G[Re];let pt=null,Wt=qe>239?4:qe>223?3:qe>191?2:1;if(Re+Wt<=W){let ut,It,Lt,en;switch(Wt){case 1:qe<128&&(pt=qe);break;case 2:ut=G[Re+1],(ut&192)===128&&(en=(qe&31)<<6|ut&63,en>127&&(pt=en));break;case 3:ut=G[Re+1],It=G[Re+2],(ut&192)===128&&(It&192)===128&&(en=(qe&15)<<12|(ut&63)<<6|It&63,en>2047&&(en<55296||en>57343)&&(pt=en));break;case 4:ut=G[Re+1],It=G[Re+2],Lt=G[Re+3],(ut&192)===128&&(It&192)===128&&(Lt&192)===128&&(en=(qe&15)<<18|(ut&63)<<12|(It&63)<<6|Lt&63,en>65535&&en<1114112&&(pt=en))}}pt===null?(pt=65533,Wt=1):pt>65535&&(pt-=65536,pe.push(pt>>>10&1023|55296),pt=56320|pt&1023),pe.push(pt),Re+=Wt}return de(pe)}const Te=4096;function de(G){const q=G.length;if(q<=Te)return String.fromCharCode.apply(String,G);let W="",pe=0;for(;pe<q;)W+=String.fromCharCode.apply(String,G.slice(pe,pe+=Te));return W}function se(G,q,W){let pe="";W=Math.min(G.length,W);for(let Re=q;Re<W;++Re)pe+=String.fromCharCode(G[Re]&127);return pe}function te(G,q,W){let pe="";W=Math.min(G.length,W);for(let Re=q;Re<W;++Re)pe+=String.fromCharCode(G[Re]);return pe}function xe(G,q,W){const pe=G.length;(!q||q<0)&&(q=0),(!W||W<0||W>pe)&&(W=pe);let Re="";for(let qe=q;qe<W;++qe)Re+=Ke[G[qe]];return Re}function Fe(G,q,W){const pe=G.slice(q,W);let Re="";for(let qe=0;qe<pe.length-1;qe+=2)Re+=String.fromCharCode(pe[qe]+pe[qe+1]*256);return Re}D.prototype.slice=function(q,W){const pe=this.length;q=~~q,W=W===void 0?pe:~~W,q<0?(q+=pe,q<0&&(q=0)):q>pe&&(q=pe),W<0?(W+=pe,W<0&&(W=0)):W>pe&&(W=pe),W<q&&(W=q);const Re=this.subarray(q,W);return Object.setPrototypeOf(Re,D.prototype),Re};function Ee(G,q,W){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+q>W)throw new RangeError("Trying to access beyond buffer length")}D.prototype.readUintLE=D.prototype.readUIntLE=function(q,W,pe){q=q>>>0,W=W>>>0,pe||Ee(q,W,this.length);let Re=this[q],qe=1,pt=0;for(;++pt<W&&(qe*=256);)Re+=this[q+pt]*qe;return Re},D.prototype.readUintBE=D.prototype.readUIntBE=function(q,W,pe){q=q>>>0,W=W>>>0,pe||Ee(q,W,this.length);let Re=this[q+--W],qe=1;for(;W>0&&(qe*=256);)Re+=this[q+--W]*qe;return Re},D.prototype.readUint8=D.prototype.readUInt8=function(q,W){return q=q>>>0,W||Ee(q,1,this.length),this[q]},D.prototype.readUint16LE=D.prototype.readUInt16LE=function(q,W){return q=q>>>0,W||Ee(q,2,this.length),this[q]|this[q+1]<<8},D.prototype.readUint16BE=D.prototype.readUInt16BE=function(q,W){return q=q>>>0,W||Ee(q,2,this.length),this[q]<<8|this[q+1]},D.prototype.readUint32LE=D.prototype.readUInt32LE=function(q,W){return q=q>>>0,W||Ee(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+this[q+3]*16777216},D.prototype.readUint32BE=D.prototype.readUInt32BE=function(q,W){return q=q>>>0,W||Ee(q,4,this.length),this[q]*16777216+(this[q+1]<<16|this[q+2]<<8|this[q+3])},D.prototype.readBigUInt64LE=Ot(function(q){q=q>>>0,je(q,"offset");const W=this[q],pe=this[q+7];(W===void 0||pe===void 0)&&be(q,this.length-8);const Re=W+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24,qe=this[++q]+this[++q]*2**8+this[++q]*2**16+pe*2**24;return BigInt(Re)+(BigInt(qe)<<BigInt(32))}),D.prototype.readBigUInt64BE=Ot(function(q){q=q>>>0,je(q,"offset");const W=this[q],pe=this[q+7];(W===void 0||pe===void 0)&&be(q,this.length-8);const Re=W*2**24+this[++q]*2**16+this[++q]*2**8+this[++q],qe=this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+pe;return(BigInt(Re)<<BigInt(32))+BigInt(qe)}),D.prototype.readIntLE=function(q,W,pe){q=q>>>0,W=W>>>0,pe||Ee(q,W,this.length);let Re=this[q],qe=1,pt=0;for(;++pt<W&&(qe*=256);)Re+=this[q+pt]*qe;return qe*=128,Re>=qe&&(Re-=Math.pow(2,8*W)),Re},D.prototype.readIntBE=function(q,W,pe){q=q>>>0,W=W>>>0,pe||Ee(q,W,this.length);let Re=W,qe=1,pt=this[q+--Re];for(;Re>0&&(qe*=256);)pt+=this[q+--Re]*qe;return qe*=128,pt>=qe&&(pt-=Math.pow(2,8*W)),pt},D.prototype.readInt8=function(q,W){return q=q>>>0,W||Ee(q,1,this.length),this[q]&128?(255-this[q]+1)*-1:this[q]},D.prototype.readInt16LE=function(q,W){q=q>>>0,W||Ee(q,2,this.length);const pe=this[q]|this[q+1]<<8;return pe&32768?pe|4294901760:pe},D.prototype.readInt16BE=function(q,W){q=q>>>0,W||Ee(q,2,this.length);const pe=this[q+1]|this[q]<<8;return pe&32768?pe|4294901760:pe},D.prototype.readInt32LE=function(q,W){return q=q>>>0,W||Ee(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},D.prototype.readInt32BE=function(q,W){return q=q>>>0,W||Ee(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},D.prototype.readBigInt64LE=Ot(function(q){q=q>>>0,je(q,"offset");const W=this[q],pe=this[q+7];(W===void 0||pe===void 0)&&be(q,this.length-8);const Re=this[q+4]+this[q+5]*2**8+this[q+6]*2**16+(pe<<24);return(BigInt(Re)<<BigInt(32))+BigInt(W+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24)}),D.prototype.readBigInt64BE=Ot(function(q){q=q>>>0,je(q,"offset");const W=this[q],pe=this[q+7];(W===void 0||pe===void 0)&&be(q,this.length-8);const Re=(W<<24)+this[++q]*2**16+this[++q]*2**8+this[++q];return(BigInt(Re)<<BigInt(32))+BigInt(this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+pe)}),D.prototype.readFloatLE=function(q,W){return q=q>>>0,W||Ee(q,4,this.length),C.read(this,q,!0,23,4)},D.prototype.readFloatBE=function(q,W){return q=q>>>0,W||Ee(q,4,this.length),C.read(this,q,!1,23,4)},D.prototype.readDoubleLE=function(q,W){return q=q>>>0,W||Ee(q,8,this.length),C.read(this,q,!0,52,8)},D.prototype.readDoubleBE=function(q,W){return q=q>>>0,W||Ee(q,8,this.length),C.read(this,q,!1,52,8)};function Ge(G,q,W,pe,Re,qe){if(!D.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>Re||q<qe)throw new RangeError('"value" argument is out of bounds');if(W+pe>G.length)throw new RangeError("Index out of range")}D.prototype.writeUintLE=D.prototype.writeUIntLE=function(q,W,pe,Re){if(q=+q,W=W>>>0,pe=pe>>>0,!Re){const Wt=Math.pow(2,8*pe)-1;Ge(this,q,W,pe,Wt,0)}let qe=1,pt=0;for(this[W]=q&255;++pt<pe&&(qe*=256);)this[W+pt]=q/qe&255;return W+pe},D.prototype.writeUintBE=D.prototype.writeUIntBE=function(q,W,pe,Re){if(q=+q,W=W>>>0,pe=pe>>>0,!Re){const Wt=Math.pow(2,8*pe)-1;Ge(this,q,W,pe,Wt,0)}let qe=pe-1,pt=1;for(this[W+qe]=q&255;--qe>=0&&(pt*=256);)this[W+qe]=q/pt&255;return W+pe},D.prototype.writeUint8=D.prototype.writeUInt8=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,1,255,0),this[W]=q&255,W+1},D.prototype.writeUint16LE=D.prototype.writeUInt16LE=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,2,65535,0),this[W]=q&255,this[W+1]=q>>>8,W+2},D.prototype.writeUint16BE=D.prototype.writeUInt16BE=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,2,65535,0),this[W]=q>>>8,this[W+1]=q&255,W+2},D.prototype.writeUint32LE=D.prototype.writeUInt32LE=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,4,4294967295,0),this[W+3]=q>>>24,this[W+2]=q>>>16,this[W+1]=q>>>8,this[W]=q&255,W+4},D.prototype.writeUint32BE=D.prototype.writeUInt32BE=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,4,4294967295,0),this[W]=q>>>24,this[W+1]=q>>>16,this[W+2]=q>>>8,this[W+3]=q&255,W+4};function Nt(G,q,W,pe,Re){he(q,pe,Re,G,W,7);let qe=Number(q&BigInt(4294967295));G[W++]=qe,qe=qe>>8,G[W++]=qe,qe=qe>>8,G[W++]=qe,qe=qe>>8,G[W++]=qe;let pt=Number(q>>BigInt(32)&BigInt(4294967295));return G[W++]=pt,pt=pt>>8,G[W++]=pt,pt=pt>>8,G[W++]=pt,pt=pt>>8,G[W++]=pt,W}function it(G,q,W,pe,Re){he(q,pe,Re,G,W,7);let qe=Number(q&BigInt(4294967295));G[W+7]=qe,qe=qe>>8,G[W+6]=qe,qe=qe>>8,G[W+5]=qe,qe=qe>>8,G[W+4]=qe;let pt=Number(q>>BigInt(32)&BigInt(4294967295));return G[W+3]=pt,pt=pt>>8,G[W+2]=pt,pt=pt>>8,G[W+1]=pt,pt=pt>>8,G[W]=pt,W+8}D.prototype.writeBigUInt64LE=Ot(function(q,W=0){return Nt(this,q,W,BigInt(0),BigInt("0xffffffffffffffff"))}),D.prototype.writeBigUInt64BE=Ot(function(q,W=0){return it(this,q,W,BigInt(0),BigInt("0xffffffffffffffff"))}),D.prototype.writeIntLE=function(q,W,pe,Re){if(q=+q,W=W>>>0,!Re){const ut=Math.pow(2,8*pe-1);Ge(this,q,W,pe,ut-1,-ut)}let qe=0,pt=1,Wt=0;for(this[W]=q&255;++qe<pe&&(pt*=256);)q<0&&Wt===0&&this[W+qe-1]!==0&&(Wt=1),this[W+qe]=(q/pt>>0)-Wt&255;return W+pe},D.prototype.writeIntBE=function(q,W,pe,Re){if(q=+q,W=W>>>0,!Re){const ut=Math.pow(2,8*pe-1);Ge(this,q,W,pe,ut-1,-ut)}let qe=pe-1,pt=1,Wt=0;for(this[W+qe]=q&255;--qe>=0&&(pt*=256);)q<0&&Wt===0&&this[W+qe+1]!==0&&(Wt=1),this[W+qe]=(q/pt>>0)-Wt&255;return W+pe},D.prototype.writeInt8=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,1,127,-128),q<0&&(q=255+q+1),this[W]=q&255,W+1},D.prototype.writeInt16LE=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,2,32767,-32768),this[W]=q&255,this[W+1]=q>>>8,W+2},D.prototype.writeInt16BE=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,2,32767,-32768),this[W]=q>>>8,this[W+1]=q&255,W+2},D.prototype.writeInt32LE=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,4,2147483647,-2147483648),this[W]=q&255,this[W+1]=q>>>8,this[W+2]=q>>>16,this[W+3]=q>>>24,W+4},D.prototype.writeInt32BE=function(q,W,pe){return q=+q,W=W>>>0,pe||Ge(this,q,W,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[W]=q>>>24,this[W+1]=q>>>16,this[W+2]=q>>>8,this[W+3]=q&255,W+4},D.prototype.writeBigInt64LE=Ot(function(q,W=0){return Nt(this,q,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),D.prototype.writeBigInt64BE=Ot(function(q,W=0){return it(this,q,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function St(G,q,W,pe,Re,qe){if(W+pe>G.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Ft(G,q,W,pe,Re){return q=+q,W=W>>>0,Re||St(G,q,W,4),C.write(G,q,W,pe,23,4),W+4}D.prototype.writeFloatLE=function(q,W,pe){return Ft(this,q,W,!0,pe)},D.prototype.writeFloatBE=function(q,W,pe){return Ft(this,q,W,!1,pe)};function Dt(G,q,W,pe,Re){return q=+q,W=W>>>0,Re||St(G,q,W,8),C.write(G,q,W,pe,52,8),W+8}D.prototype.writeDoubleLE=function(q,W,pe){return Dt(this,q,W,!0,pe)},D.prototype.writeDoubleBE=function(q,W,pe){return Dt(this,q,W,!1,pe)},D.prototype.copy=function(q,W,pe,Re){if(!D.isBuffer(q))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Re&&Re!==0&&(Re=this.length),W>=q.length&&(W=q.length),W||(W=0),Re>0&&Re<pe&&(Re=pe),Re===pe||q.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),q.length-W<Re-pe&&(Re=q.length-W+pe);const qe=Re-pe;return this===q&&typeof I.prototype.copyWithin=="function"?this.copyWithin(W,pe,Re):I.prototype.set.call(q,this.subarray(pe,Re),W),qe},D.prototype.fill=function(q,W,pe,Re){if(typeof q=="string"){if(typeof W=="string"?(Re=W,W=0,pe=this.length):typeof pe=="string"&&(Re=pe,pe=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!D.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(q.length===1){const pt=q.charCodeAt(0);(Re==="utf8"&&pt<128||Re==="latin1")&&(q=pt)}}else typeof q=="number"?q=q&255:typeof q=="boolean"&&(q=Number(q));if(W<0||this.length<W||this.length<pe)throw new RangeError("Out of range index");if(pe<=W)return this;W=W>>>0,pe=pe===void 0?this.length:pe>>>0,q||(q=0);let qe;if(typeof q=="number")for(qe=W;qe<pe;++qe)this[qe]=q;else{const pt=D.isBuffer(q)?q:D.from(q,Re),Wt=pt.length;if(Wt===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(qe=0;qe<pe-W;++qe)this[qe+W]=pt[qe%Wt]}return this};const Zt={};function ye(G,q,W){Zt[G]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(G,q){return`The "${G}" argument must be of type number. Received type ${typeof q}`},TypeError),ye("ERR_OUT_OF_RANGE",function(G,q,W){let pe=`The value of "${G}" is out of range.`,Re=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Re=O(String(W)):typeof W=="bigint"&&(Re=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Re=O(Re)),Re+="n"),pe+=` It must be ${q}. Received ${Re}`,pe},RangeError);function O(G){let q="",W=G.length;const pe=G[0]==="-"?1:0;for(;W>=pe+4;W-=3)q=`_${G.slice(W-3,W)}${q}`;return`${G.slice(0,W)}${q}`}function K(G,q,W){je(q,"offset"),(G[q]===void 0||G[q+W]===void 0)&&be(q,G.length-(W+1))}function he(G,q,W,pe,Re,qe){if(G>W||G<q){const pt=typeof q=="bigint"?"n":"";let Wt;throw q===0||q===BigInt(0)?Wt=`>= 0${pt} and < 2${pt} ** ${(qe+1)*8}${pt}`:Wt=`>= -(2${pt} ** ${(qe+1)*8-1}${pt}) and < 2 ** ${(qe+1)*8-1}${pt}`,new Zt.ERR_OUT_OF_RANGE("value",Wt,G)}K(pe,Re,qe)}function je(G,q){if(typeof G!="number")throw new Zt.ERR_INVALID_ARG_TYPE(q,"number",G)}function be(G,q,W){throw Math.floor(G)!==G?(je(G,W),new Zt.ERR_OUT_OF_RANGE("offset","an integer",G)):q<0?new Zt.ERR_BUFFER_OUT_OF_BOUNDS:new Zt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${q}`,G)}const ke=/[^+/0-9A-Za-z-_]/g;function le(G){if(G=G.split("=")[0],G=G.trim().replace(ke,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function ft(G,q){q=q||1/0;let W;const pe=G.length;let Re=null;const qe=[];for(let pt=0;pt<pe;++pt){if(W=G.charCodeAt(pt),W>55295&&W<57344){if(!Re){if(W>56319){(q-=3)>-1&&qe.push(239,191,189);continue}else if(pt+1===pe){(q-=3)>-1&&qe.push(239,191,189);continue}Re=W;continue}if(W<56320){(q-=3)>-1&&qe.push(239,191,189),Re=W;continue}W=(Re-55296<<10|W-56320)+65536}else Re&&(q-=3)>-1&&qe.push(239,191,189);if(Re=null,W<128){if((q-=1)<0)break;qe.push(W)}else if(W<2048){if((q-=2)<0)break;qe.push(W>>6|192,W&63|128)}else if(W<65536){if((q-=3)<0)break;qe.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((q-=4)<0)break;qe.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return qe}function vt(G){const q=[];for(let W=0;W<G.length;++W)q.push(G.charCodeAt(W)&255);return q}function P(G,q){let W,pe,Re;const qe=[];for(let pt=0;pt<G.length&&!((q-=2)<0);++pt)W=G.charCodeAt(pt),pe=W>>8,Re=W%256,qe.push(Re),qe.push(pe);return qe}function Be(G){return E.toByteArray(le(G))}function nt(G,q,W,pe){let Re;for(Re=0;Re<pe&&!(Re+W>=q.length||Re>=G.length);++Re)q[Re+W]=G[Re];return Re}function ge(G,q){return G instanceof q||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===q.name}function De(G){return G!==G}const Ke=function(){const G="0123456789abcdef",q=new Array(256);for(let W=0;W<16;++W){const pe=W*16;for(let Re=0;Re<16;++Re)q[pe+Re]=G[W]+G[Re]}return q}();function Ot(G){return typeof BigInt>"u"?me:G}function me(){throw new Error("BigInt not supported")}})(t);const w=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=w,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(e2)),e2}var t2,xj;function Xr(){if(xj)return t2;xj=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return t2={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},t2}var n2={exports:{}},r2,_j;function t5(){return _j||(_j=1,r2={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),r2}var a2,Sj;function Ti(){if(Sj)return a2;Sj=1;const{format:e,inspect:t}=t5(),{AggregateError:n}=Xr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function u(x,w){if(!x)throw new l.ERR_INTERNAL_ASSERTION(w)}function d(x){let w="",S=x.length;const E=x[0]==="-"?1:0;for(;S>=E+4;S-=3)w=`_${x.slice(S-3,S)}${w}`;return`${x.slice(0,S)}${w}`}function h(x,w,S){if(typeof w=="function")return u(w.length<=S.length,`Code: ${x}; The provided arguments length (${S.length}) does not match the required ones (${w.length}).`),w(...S);const E=(w.match(/%[dfijoOs]/g)||[]).length;return u(E===S.length,`Code: ${x}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?w:e(w,...S)}function m(x,w,S){S||(S=Error);class E extends S{constructor(...T){super(h(x,w,T))}toString(){return`${this.name} [${x}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${x}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=x,E.prototype[a]=!0,l[x]=E}function y(x){const w=o+x.name;return Object.defineProperty(x,"name",{value:w}),x}function v(x,w){if(x&&w&&x!==w){if(Array.isArray(w.errors))return w.errors.push(x),w;const S=new r([w,x],w.message);return S.code=w.code,S}return x||w}class b extends Error{constructor(w="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",S);super(w,S),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(x,w,S)=>{u(typeof x=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let E="The ";x.endsWith(" argument")?E+=`${x} `:E+=`"${x}" ${x.includes(".")?"property":"argument"} `,E+="must be ";const C=[],T=[],j=[];for(const R of w)u(typeof R=="string","All expected entries have to be of type string"),i.includes(R)?C.push(R.toLowerCase()):s.test(R)?T.push(R):(u(R!=="object",'The value "object" should be written as "Object"'),j.push(R));if(T.length>0){const R=C.indexOf("object");R!==-1&&(C.splice(C,R,1),T.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const R=C.pop();E+=`one of type ${C.join(", ")}, or ${R}`}}(T.length>0||j.length>0)&&(E+=" or ")}if(T.length>0){switch(T.length){case 1:E+=`an instance of ${T[0]}`;break;case 2:E+=`an instance of ${T[0]} or ${T[1]}`;break;default:{const R=T.pop();E+=`an instance of ${T.join(", ")}, or ${R}`}}j.length>0&&(E+=" or ")}switch(j.length){case 0:break;case 1:j[0].toLowerCase()!==j[0]&&(E+="an "),E+=`${j[0]}`;break;case 2:E+=`one of ${j[0]} or ${j[1]}`;break;default:{const R=j.pop();E+=`one of ${j.join(", ")}, or ${R}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var I;if((I=S.constructor)!==null&&I!==void 0&&I.name)E+=`. Received an instance of ${S.constructor.name}`;else{const R=t(S,{depth:-1});E+=`. Received ${R}`}}else{let R=t(S,{colors:!1});R.length>25&&(R=`${R.slice(0,25)}...`),E+=`. Received type ${typeof S} (${R})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(x,w,S="is invalid")=>{let E=t(w);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${x.includes(".")?"property":"argument"} '${x}' ${S}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(x,w,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${x} to be returned from the "${w}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(...x)=>{u(x.length>0,"At least one arg needs to be specified");let w;const S=x.length;switch(x=(Array.isArray(x)?x:[x]).map(E=>`"${E}"`).join(" or "),S){case 1:w+=`The ${x[0]} argument`;break;case 2:w+=`The ${x[0]} and ${x[1]} arguments`;break;default:{const E=x.pop();w+=`The ${x.join(", ")}, and ${E} arguments`}break}return`${w} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(x,w,S)=>{u(w,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=d(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=d(E)),E+="n"}else E=t(S);return`The value of "${x}" is out of range. It must be ${w}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),a2={AbortError:b,aggregateTwoErrors:y(v),hideStackFrames:y,codes:l},a2}var Um={exports:{}},Ej;function Pg(){if(Ej)return Um.exports;Ej=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Um.exports=e,Um.exports.AbortSignal=t,Um.exports.default=e,Um.exports}var nv={exports:{}},Cj;function Ix(){if(Cj)return nv.exports;Cj=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(T,j,I){return Function.prototype.apply.call(T,j,I)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:n=function(T){return Object.getOwnPropertyNames(T)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(T){return T!==T};function i(){i.init.call(this)}nv.exports=i,nv.exports.once=w,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");s=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||a(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function l(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(T){for(var j=[],I=1;I<arguments.length;I++)j.push(arguments[I]);var R=T==="error",F=this._events;if(F!==void 0)R=R&&F.error===void 0;else if(!R)return!1;if(R){var B;if(j.length>0&&(B=j[0]),B instanceof Error)throw B;var H=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw H.context=B,H}var D=F[T];if(D===void 0)return!1;if(typeof D=="function")t(D,this,j);else for(var Z=D.length,V=v(D,Z),I=0;I<Z;++I)t(V[I],this,j);return!0};function u(C,T,j,I){var R,F,B;if(o(j),F=C._events,F===void 0?(F=C._events=Object.create(null),C._eventsCount=0):(F.newListener!==void 0&&(C.emit("newListener",T,j.listener?j.listener:j),F=C._events),B=F[T]),B===void 0)B=F[T]=j,++C._eventsCount;else if(typeof B=="function"?B=F[T]=I?[j,B]:[B,j]:I?B.unshift(j):B.push(j),R=l(C),R>0&&B.length>R&&!B.warned){B.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=C,H.type=T,H.count=B.length,r(H)}return C}i.prototype.addListener=function(T,j){return u(this,T,j,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(T,j){return u(this,T,j,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,T,j){var I={fired:!1,wrapFn:void 0,target:C,type:T,listener:j},R=d.bind(I);return R.listener=j,I.wrapFn=R,R}i.prototype.once=function(T,j){return o(j),this.on(T,h(this,T,j)),this},i.prototype.prependOnceListener=function(T,j){return o(j),this.prependListener(T,h(this,T,j)),this},i.prototype.removeListener=function(T,j){var I,R,F,B,H;if(o(j),R=this._events,R===void 0)return this;if(I=R[T],I===void 0)return this;if(I===j||I.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete R[T],R.removeListener&&this.emit("removeListener",T,I.listener||j));else if(typeof I!="function"){for(F=-1,B=I.length-1;B>=0;B--)if(I[B]===j||I[B].listener===j){H=I[B].listener,F=B;break}if(F<0)return this;F===0?I.shift():b(I,F),I.length===1&&(R[T]=I[0]),R.removeListener!==void 0&&this.emit("removeListener",T,H||j)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(T){var j,I,R;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[T]),this;if(arguments.length===0){var F=Object.keys(I),B;for(R=0;R<F.length;++R)B=F[R],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=I[T],typeof j=="function")this.removeListener(T,j);else if(j!==void 0)for(R=j.length-1;R>=0;R--)this.removeListener(T,j[R]);return this};function m(C,T,j){var I=C._events;if(I===void 0)return[];var R=I[T];return R===void 0?[]:typeof R=="function"?j?[R.listener||R]:[R]:j?x(R):v(R,R.length)}i.prototype.listeners=function(T){return m(this,T,!0)},i.prototype.rawListeners=function(T){return m(this,T,!1)},i.listenerCount=function(C,T){return typeof C.listenerCount=="function"?C.listenerCount(T):y.call(C,T)},i.prototype.listenerCount=y;function y(C){var T=this._events;if(T!==void 0){var j=T[C];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,T){for(var j=new Array(T),I=0;I<T;++I)j[I]=C[I];return j}function b(C,T){for(;T+1<C.length;T++)C[T]=C[T+1];C.pop()}function x(C){for(var T=new Array(C.length),j=0;j<T.length;++j)T[j]=C[j].listener||C[j];return T}function w(C,T){return new Promise(function(j,I){function R(B){C.removeListener(T,F),I(B)}function F(){typeof C.removeListener=="function"&&C.removeListener("error",R),j([].slice.call(arguments))}E(C,T,F,{once:!0}),T!=="error"&&S(C,R,{once:!0})})}function S(C,T,j){typeof C.on=="function"&&E(C,"error",T,j)}function E(C,T,j,I){if(typeof C.on=="function")I.once?C.once(T,j):C.on(T,j);else if(typeof C.addEventListener=="function")C.addEventListener(T,function R(F){I.once&&C.removeEventListener(T,R),j(F)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return nv.exports}var kj;function Bi(){return kj||(kj=1,function(e){const t=Pu(),{format:n,inspect:r}=t5(),{codes:{ERR_INVALID_ARG_TYPE:a}}=Ti(),{kResistStopPropagation:i,AggregateError:s,SymbolDispose:o}=Xr(),l=globalThis.AbortSignal||Pg().AbortSignal,u=globalThis.AbortController||Pg().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(x){return x instanceof h}:function(x){return!1},y=(b,x)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(x,"AbortSignal",b)},v=(b,x)=>{if(typeof b!="function")throw new a(x,"Function",b)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(b){let x=!1;return function(...w){x||(x=!0,b.apply(this,w))}},createDeferredPromise:function(){let b,x;return{promise:new Promise((S,E)=>{b=S,x=E}),resolve:b,reject:x}},promisify(b){return new Promise((x,w)=>{b((S,...E)=>S?w(S):x(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:m,deprecate(b,x){return b},addAbortListener:Ix().addAbortListener||function(x,w){if(x===void 0)throw new a("signal","AbortSignal",x);y(x,"signal"),v(w,"listener");let S;return x.aborted?queueMicrotask(()=>w()):(x.addEventListener("abort",w,{__proto__:null,once:!0,[i]:!0}),S=()=>{x.removeEventListener("abort",w)}),{__proto__:null,[o](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(x){if(x.length===1)return x[0];const w=new u,S=()=>w.abort();return x.forEach(E=>{y(E,"signals"),E.addEventListener("abort",S,{once:!0})}),w.signal.addEventListener("abort",()=>{x.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),w.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(n2)),n2.exports}var rv={},i2,Tj;function N0(){if(Tj)return i2;Tj=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:y}=Xr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=Ti(),{normalizeEncoding:C}=Bi(),{isAsyncFunction:T,isArrayBufferView:j}=Bi().types,I={};function R(te){return te===(te|0)}function F(te){return te===te>>>0}const B=/^[0-7]+$/,H="must be a 32-bit unsigned integer or an octal string";function D(te,xe,Fe){if(typeof te>"u"&&(te=Fe),typeof te=="string"){if(d(B,te)===null)throw new w(xe,te,H);te=l(te,8)}return ue(te,xe),te}const Z=v((te,xe,Fe=o,Ee=s)=>{if(typeof te!="number")throw new x(xe,"number",te);if(!a(te))throw new S(xe,"an integer",te);if(te<Fe||te>Ee)throw new S(xe,`>= ${Fe} && <= ${Ee}`,te)}),V=v((te,xe,Fe=-2147483648,Ee=2147483647)=>{if(typeof te!="number")throw new x(xe,"number",te);if(!a(te))throw new S(xe,"an integer",te);if(te<Fe||te>Ee)throw new S(xe,`>= ${Fe} && <= ${Ee}`,te)}),ue=v((te,xe,Fe=!1)=>{if(typeof te!="number")throw new x(xe,"number",te);if(!a(te))throw new S(xe,"an integer",te);const Ee=Fe?1:0,Ge=4294967295;if(te<Ee||te>Ge)throw new S(xe,`>= ${Ee} && <= ${Ge}`,te)});function ae(te,xe){if(typeof te!="string")throw new x(xe,"string",te)}function ne(te,xe,Fe=void 0,Ee){if(typeof te!="number")throw new x(xe,"number",te);if(Fe!=null&&te<Fe||Ee!=null&&te>Ee||(Fe!=null||Ee!=null)&&i(te))throw new S(xe,`${Fe!=null?`>= ${Fe}`:""}${Fe!=null&&Ee!=null?" && ":""}${Ee!=null?`<= ${Ee}`:""}`,te)}const X=v((te,xe,Fe)=>{if(!t(Fe,te)){const Ge="must be one of: "+n(r(Fe,Nt=>typeof Nt=="string"?`'${Nt}'`:h(Nt)),", ");throw new w(xe,te,Ge)}});function ie(te,xe){if(typeof te!="boolean")throw new x(xe,"boolean",te)}function L(te,xe,Fe){return te==null||!u(te,xe)?Fe:te[xe]}const J=v((te,xe,Fe=null)=>{const Ee=L(Fe,"allowArray",!1),Ge=L(Fe,"allowFunction",!1);if(!L(Fe,"nullable",!1)&&te===null||!Ee&&e(te)||typeof te!="object"&&(!Ge||typeof te!="function"))throw new x(xe,"Object",te)}),Q=v((te,xe)=>{if(te!=null&&typeof te!="object"&&typeof te!="function")throw new x(xe,"a dictionary",te)}),ee=v((te,xe,Fe=0)=>{if(!e(te))throw new x(xe,"Array",te);if(te.length<Fe){const Ee=`must be longer than ${Fe}`;throw new w(xe,te,Ee)}});function fe(te,xe){ee(te,xe);for(let Fe=0;Fe<te.length;Fe++)ae(te[Fe],`${xe}[${Fe}]`)}function ve(te,xe){ee(te,xe);for(let Fe=0;Fe<te.length;Fe++)ie(te[Fe],`${xe}[${Fe}]`)}function Oe(te,xe){ee(te,xe);for(let Fe=0;Fe<te.length;Fe++){const Ee=te[Fe],Ge=`${xe}[${Fe}]`;if(Ee==null)throw new x(Ge,"AbortSignal",Ee);Qe(Ee,Ge)}}function Ae(te,xe="signal"){if(ae(te,xe),I[te]===void 0)throw I[m(te)]!==void 0?new E(te+" (signals must use all capital letters)"):new E(te)}const Ne=v((te,xe="buffer")=>{if(!j(te))throw new x(xe,["Buffer","TypedArray","DataView"],te)});function Ce(te,xe){const Fe=C(xe),Ee=te.length;if(Fe==="hex"&&Ee%2!==0)throw new w("encoding",xe,`is invalid for data of length ${Ee}`)}function Pe(te,xe="Port",Fe=!0){if(typeof te!="number"&&typeof te!="string"||typeof te=="string"&&y(te).length===0||+te!==+te>>>0||te>65535||te===0&&!Fe)throw new b(xe,te,Fe);return te|0}const Qe=v((te,xe)=>{if(te!==void 0&&(te===null||typeof te!="object"||!("aborted"in te)))throw new x(xe,"AbortSignal",te)}),Le=v((te,xe)=>{if(typeof te!="function")throw new x(xe,"Function",te)}),Ie=v((te,xe)=>{if(typeof te!="function"||T(te))throw new x(xe,"Function",te)}),z=v((te,xe)=>{if(te!==void 0)throw new x(xe,"undefined",te)});function Se(te,xe,Fe){if(!t(Fe,te))throw new x(xe,`('${n(Fe,"|")}')`,te)}const Te=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function de(te,xe){if(typeof te>"u"||!d(Te,te))throw new w(xe,te,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function se(te){if(typeof te=="string")return de(te,"hints"),te;if(e(te)){const xe=te.length;let Fe="";if(xe===0)return Fe;for(let Ee=0;Ee<xe;Ee++){const Ge=te[Ee];de(Ge,"hints"),Fe+=Ge,Ee!==xe-1&&(Fe+=", ")}return Fe}throw new w("hints",te,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return i2={isInt32:R,isUint32:F,parseFileMode:D,validateArray:ee,validateStringArray:fe,validateBooleanArray:ve,validateAbortSignalArray:Oe,validateBoolean:ie,validateBuffer:Ne,validateDictionary:Q,validateEncoding:Ce,validateFunction:Le,validateInt32:V,validateInteger:Z,validateNumber:ne,validateObject:J,validateOneOf:X,validatePlainFunction:Ie,validatePort:Pe,validateSignalName:Ae,validateString:ae,validateUint32:ue,validateUndefined:z,validateUnion:Se,validateAbortSignal:Qe,validateLinkHeaderValue:se},i2}var av={exports:{}},s2={},Aj;function lf(){return Aj||(Aj=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=s}catch{a=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function l(C){if(a===setTimeout)return setTimeout(C,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function u(C){if(i===clearTimeout)return clearTimeout(C);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var d=[],h=!1,m,y=-1;function v(){!h||!m||(h=!1,m.length?d=m.concat(d):y=-1,d.length&&b())}function b(){if(!h){var C=l(v);h=!0;for(var T=d.length;T;){for(m=d,d=[];++y<T;)m&&m[y].run();y=-1,T=d.length}m=null,h=!1,u(C)}}r.nextTick=function(C){var T=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)T[j-1]=arguments[j];d.push(new x(C,T)),d.length===1&&!h&&l(b)};function x(C,T){this.fun=C,this.array=T}x.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function w(){}r.on=w,r.addListener=w,r.once=w,r.off=w,r.removeListener=w,r.removeAllListeners=w,r.emit=w,r.prependListener=w,r.prependOnceListener=w,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(s2)),s2}var o2,Nj;function dc(){if(Nj)return o2;Nj=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Xr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d(L,J=!1){var Q;return!!(L&&typeof L.pipe=="function"&&typeof L.on=="function"&&(!J||typeof L.pause=="function"&&typeof L.resume=="function")&&(!L._writableState||((Q=L._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!L._writableState||L._readableState))}function h(L){var J;return!!(L&&typeof L.write=="function"&&typeof L.on=="function"&&(!L._readableState||((J=L._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function m(L){return!!(L&&typeof L.pipe=="function"&&L._readableState&&typeof L.on=="function"&&typeof L.write=="function")}function y(L){return L&&(L._readableState||L._writableState||typeof L.write=="function"&&typeof L.on=="function"||typeof L.pipe=="function"&&typeof L.on=="function")}function v(L){return!!(L&&!y(L)&&typeof L.pipeThrough=="function"&&typeof L.getReader=="function"&&typeof L.cancel=="function")}function b(L){return!!(L&&!y(L)&&typeof L.getWriter=="function"&&typeof L.abort=="function")}function x(L){return!!(L&&!y(L)&&typeof L.readable=="object"&&typeof L.writable=="object")}function w(L){return v(L)||b(L)||x(L)}function S(L,J){return L==null?!1:J===!0?typeof L[e]=="function":J===!1?typeof L[t]=="function":typeof L[e]=="function"||typeof L[t]=="function"}function E(L){if(!y(L))return null;const J=L._writableState,Q=L._readableState,ee=J||Q;return!!(L.destroyed||L[r]||ee!=null&&ee.destroyed)}function C(L){if(!h(L))return null;if(L.writableEnded===!0)return!0;const J=L._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function T(L,J){if(!h(L))return null;if(L.writableFinished===!0)return!0;const Q=L._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||J===!1&&Q.ended===!0&&Q.length===0)}function j(L){if(!d(L))return null;if(L.readableEnded===!0)return!0;const J=L._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function I(L,J){if(!d(L))return null;const Q=L._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||J===!1&&Q.ended===!0&&Q.length===0)}function R(L){return L&&L[i]!=null?L[i]:typeof(L==null?void 0:L.readable)!="boolean"?null:E(L)?!1:d(L)&&L.readable&&!I(L)}function F(L){return L&&L[s]!=null?L[s]:typeof(L==null?void 0:L.writable)!="boolean"?null:E(L)?!1:h(L)&&L.writable&&!C(L)}function B(L,J){return y(L)?E(L)?!0:!((J==null?void 0:J.readable)!==!1&&R(L)||(J==null?void 0:J.writable)!==!1&&F(L)):null}function H(L){var J,Q;return y(L)?L.writableErrored?L.writableErrored:(J=(Q=L._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function D(L){var J,Q;return y(L)?L.readableErrored?L.readableErrored:(J=(Q=L._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function Z(L){if(!y(L))return null;if(typeof L.closed=="boolean")return L.closed;const J=L._writableState,Q=L._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(J==null?void 0:J.closed)||(Q==null?void 0:Q.closed):typeof L._closed=="boolean"&&V(L)?L._closed:null}function V(L){return typeof L._closed=="boolean"&&typeof L._defaultKeepAlive=="boolean"&&typeof L._removedConnection=="boolean"&&typeof L._removedContLen=="boolean"}function ue(L){return typeof L._sent100=="boolean"&&V(L)}function ae(L){var J;return typeof L._consuming=="boolean"&&typeof L._dumped=="boolean"&&((J=L.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function ne(L){if(!y(L))return null;const J=L._writableState,Q=L._readableState,ee=J||Q;return!ee&&ue(L)||!!(ee&&ee.autoDestroy&&ee.emitClose&&ee.closed===!1)}function X(L){var J;return!!(L&&((J=L[o])!==null&&J!==void 0?J:L.readableDidRead||L.readableAborted))}function ie(L){var J,Q,ee,fe,ve,Oe,Ae,Ne,Ce,Pe;return!!(L&&((J=(Q=(ee=(fe=(ve=(Oe=L[a])!==null&&Oe!==void 0?Oe:L.readableErrored)!==null&&ve!==void 0?ve:L.writableErrored)!==null&&fe!==void 0?fe:(Ae=L._readableState)===null||Ae===void 0?void 0:Ae.errorEmitted)!==null&&ee!==void 0?ee:(Ne=L._writableState)===null||Ne===void 0?void 0:Ne.errorEmitted)!==null&&Q!==void 0?Q:(Ce=L._readableState)===null||Ce===void 0?void 0:Ce.errored)!==null&&J!==void 0?J:!((Pe=L._writableState)===null||Pe===void 0)&&Pe.errored))}return o2={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:o,isErrored:ie,kIsErrored:a,isReadable:R,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:Z,isDuplexNodeStream:m,isFinished:B,isIterable:S,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:j,isReadableFinished:I,isReadableErrored:D,isNodeStream:y,isWebStream:w,isWritable:F,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:T,isWritableErrored:H,isServerRequest:ae,isServerResponse:ue,willEmitClose:ne,isTransformStream:x},o2}var Rj;function Fu(){if(Rj)return av.exports;Rj=1;const e=lf(),{AbortError:t,codes:n}=Ti(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:s}=Bi(),{validateAbortSignal:o,validateFunction:l,validateObject:u,validateBoolean:d}=N0(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:y}=Xr(),{isClosed:v,isReadable:b,isReadableNodeStream:x,isReadableStream:w,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:T,isWritableStream:j,isWritableFinished:I,isWritableErrored:R,isNodeStream:F,willEmitClose:B,kIsClosedPromise:H}=dc();let D;function Z(X){return X.setHeader&&typeof X.abort=="function"}const V=()=>{};function ue(X,ie,L){var J,Q;if(arguments.length===2?(L=ie,ie=i):ie==null?ie=i:u(ie,"options"),l(L,"callback"),o(ie.signal,"options.signal"),L=s(L),w(X)||j(X))return ae(X,ie,L);if(!F(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const ee=(J=ie.readable)!==null&&J!==void 0?J:x(X),fe=(Q=ie.writable)!==null&&Q!==void 0?Q:T(X),ve=X._writableState,Oe=X._readableState,Ae=()=>{X.writable||Pe()};let Ne=B(X)&&x(X)===ee&&T(X)===fe,Ce=I(X,!1);const Pe=()=>{Ce=!0,X.destroyed&&(Ne=!1),!(Ne&&(!X.readable||ee))&&(!ee||Qe)&&L.call(X)};let Qe=S(X,!1);const Le=()=>{Qe=!0,X.destroyed&&(Ne=!1),!(Ne&&(!X.writable||fe))&&(!fe||Ce)&&L.call(X)},Ie=te=>{L.call(X,te)};let z=v(X);const Se=()=>{z=!0;const te=R(X)||E(X);if(te&&typeof te!="boolean")return L.call(X,te);if(ee&&!Qe&&x(X,!0)&&!S(X,!1))return L.call(X,new a);if(fe&&!Ce&&!I(X,!1))return L.call(X,new a);L.call(X)},Te=()=>{z=!0;const te=R(X)||E(X);if(te&&typeof te!="boolean")return L.call(X,te);L.call(X)},de=()=>{X.req.on("finish",Pe)};Z(X)?(X.on("complete",Pe),Ne||X.on("abort",Se),X.req?de():X.on("request",de)):fe&&!ve&&(X.on("end",Ae),X.on("close",Ae)),!Ne&&typeof X.aborted=="boolean"&&X.on("aborted",Se),X.on("end",Le),X.on("finish",Pe),ie.error!==!1&&X.on("error",Ie),X.on("close",Se),z?e.nextTick(Se):ve!=null&&ve.errorEmitted||Oe!=null&&Oe.errorEmitted?Ne||e.nextTick(Te):(!ee&&(!Ne||b(X))&&(Ce||C(X)===!1)||!fe&&(!Ne||C(X))&&(Qe||b(X)===!1)||Oe&&X.req&&X.aborted)&&e.nextTick(Te);const se=()=>{L=V,X.removeListener("aborted",Se),X.removeListener("complete",Pe),X.removeListener("abort",Se),X.removeListener("request",de),X.req&&X.req.removeListener("finish",Pe),X.removeListener("end",Ae),X.removeListener("close",Ae),X.removeListener("finish",Pe),X.removeListener("end",Le),X.removeListener("error",Ie),X.removeListener("close",Se)};if(ie.signal&&!z){const te=()=>{const xe=L;se(),xe.call(X,new t(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)e.nextTick(te);else{D=D||Bi().addAbortListener;const xe=D(ie.signal,te),Fe=L;L=s((...Ee)=>{xe[y](),Fe.apply(X,Ee)})}}return se}function ae(X,ie,L){let J=!1,Q=V;if(ie.signal)if(Q=()=>{J=!0,L.call(X,new t(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)e.nextTick(Q);else{D=D||Bi().addAbortListener;const fe=D(ie.signal,Q),ve=L;L=s((...Oe)=>{fe[y](),ve.apply(X,Oe)})}const ee=(...fe)=>{J||e.nextTick(()=>L.apply(X,fe))};return m(X[H].promise,ee,ee),V}function ne(X,ie){var L;let J=!1;return ie===null&&(ie=i),(L=ie)!==null&&L!==void 0&&L.cleanup&&(d(ie.cleanup,"cleanup"),J=ie.cleanup),new h((Q,ee)=>{const fe=ue(X,ie,ve=>{J&&fe(),ve?ee(ve):Q()})})}return av.exports=ue,av.exports.finished=ne,av.exports}var l2,Ij;function dp(){if(Ij)return l2;Ij=1;const e=lf(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=Ti(),{Symbol:a}=Xr(),{kIsDestroyed:i,isDestroyed:s,isFinished:o,isServerRequest:l}=dc(),u=a("kDestroy"),d=a("kConstruct");function h(B,H,D){B&&(B.stack,H&&!H.errored&&(H.errored=B),D&&!D.errored&&(D.errored=B))}function m(B,H){const D=this._readableState,Z=this._writableState,V=Z||D;return Z!=null&&Z.destroyed||D!=null&&D.destroyed?(typeof H=="function"&&H(),this):(h(B,Z,D),Z&&(Z.destroyed=!0),D&&(D.destroyed=!0),V.constructed?y(this,B,H):this.once(u,function(ue){y(this,t(ue,B),H)}),this)}function y(B,H,D){let Z=!1;function V(ue){if(Z)return;Z=!0;const ae=B._readableState,ne=B._writableState;h(ue,ne,ae),ne&&(ne.closed=!0),ae&&(ae.closed=!0),typeof D=="function"&&D(ue),ue?e.nextTick(v,B,ue):e.nextTick(b,B)}try{B._destroy(H||null,V)}catch(ue){V(ue)}}function v(B,H){x(B,H),b(B)}function b(B){const H=B._readableState,D=B._writableState;D&&(D.closeEmitted=!0),H&&(H.closeEmitted=!0),(D!=null&&D.emitClose||H!=null&&H.emitClose)&&B.emit("close")}function x(B,H){const D=B._readableState,Z=B._writableState;Z!=null&&Z.errorEmitted||D!=null&&D.errorEmitted||(Z&&(Z.errorEmitted=!0),D&&(D.errorEmitted=!0),B.emit("error",H))}function w(){const B=this._readableState,H=this._writableState;B&&(B.constructed=!0,B.closed=!1,B.closeEmitted=!1,B.destroyed=!1,B.errored=null,B.errorEmitted=!1,B.reading=!1,B.ended=B.readable===!1,B.endEmitted=B.readable===!1),H&&(H.constructed=!0,H.destroyed=!1,H.closed=!1,H.closeEmitted=!1,H.errored=null,H.errorEmitted=!1,H.finalCalled=!1,H.prefinished=!1,H.ended=H.writable===!1,H.ending=H.writable===!1,H.finished=H.writable===!1)}function S(B,H,D){const Z=B._readableState,V=B._writableState;if(V!=null&&V.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||V!=null&&V.autoDestroy?B.destroy(H):H&&(H.stack,V&&!V.errored&&(V.errored=H),Z&&!Z.errored&&(Z.errored=H),D?e.nextTick(x,B,H):x(B,H))}function E(B,H){if(typeof B._construct!="function")return;const D=B._readableState,Z=B._writableState;D&&(D.constructed=!1),Z&&(Z.constructed=!1),B.once(d,H),!(B.listenerCount(d)>1)&&e.nextTick(C,B)}function C(B){let H=!1;function D(Z){if(H){S(B,Z??new n);return}H=!0;const V=B._readableState,ue=B._writableState,ae=ue||V;V&&(V.constructed=!0),ue&&(ue.constructed=!0),ae.destroyed?B.emit(u,Z):Z?S(B,Z,!0):e.nextTick(T,B)}try{B._construct(Z=>{e.nextTick(D,Z)})}catch(Z){e.nextTick(D,Z)}}function T(B){B.emit(d)}function j(B){return(B==null?void 0:B.setHeader)&&typeof B.abort=="function"}function I(B){B.emit("close")}function R(B,H){B.emit("error",H),e.nextTick(I,B)}function F(B,H){!B||s(B)||(!H&&!o(B)&&(H=new r),l(B)?(B.socket=null,B.destroy(H)):j(B)?B.abort():j(B.req)?B.req.abort():typeof B.destroy=="function"?B.destroy(H):typeof B.close=="function"?B.close():H?e.nextTick(R,B,H):e.nextTick(I,B),B.destroyed||(B[i]=!0))}return l2={construct:E,destroyer:F,destroy:m,undestroy:w,errorOrDestroy:S},l2}var c2,jj;function wT(){if(jj)return c2;jj=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Xr(),{EventEmitter:n}=Ix();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,s){const o=this;function l(b){i.writable&&i.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function u(){o.readable&&o.resume&&o.resume()}i.on("drain",u),!i._isStdio&&(!s||s.end!==!1)&&(o.on("end",h),o.on("close",m));let d=!1;function h(){d||(d=!0,i.end())}function m(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function y(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(o,"error",y),a(i,"error",y);function v(){o.removeListener("data",l),i.removeListener("drain",u),o.removeListener("end",h),o.removeListener("close",m),o.removeListener("error",y),i.removeListener("error",y),o.removeListener("end",v),o.removeListener("close",v),i.removeListener("close",v)}return o.on("end",v),o.on("close",v),i.on("close",v),i.emit("pipe",o),i};function a(i,s,o){if(typeof i.prependListener=="function")return i.prependListener(s,o);!i._events||!i._events[s]?i.on(s,o):e(i._events[s])?i._events[s].unshift(o):i._events[s]=[o,i._events[s]]}return c2={Stream:r,prependListener:a},c2}var u2={exports:{}},Oj;function jx(){return Oj||(Oj=1,function(e){const{SymbolDispose:t}=Xr(),{AbortError:n,codes:r}=Ti(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:s}=dc(),o=Fu(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new l(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,y){if(d(m,"signal"),!a(y)&&!i(y))throw new l("stream",["ReadableStream","WritableStream","Stream"],y);return e.exports.addAbortSignalNoValidate(m,y)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const y=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[s](new n(void 0,{cause:h.reason}))};if(h.aborted)y();else{u=u||Bi().addAbortListener;const v=u(h,y);o(m,v[t])}return m}}(u2)),u2.exports}var d2,Dj;function nne(){if(Dj)return d2;Dj=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Xr(),{Buffer:a}=Pu(),{inspect:i}=Bi();return d2=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=o+l.data;return u}concat(o){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(o>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(o,l){const u=this.head.data;if(o<u.length){const d=u.slice(0,o);return this.head.data=u.slice(o),d}return o===u.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",u=this.head,d=0;do{const h=u.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(h,0,o),this.head=u,u.data=e(h,o));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(o){const l=a.allocUnsafe(o),u=o;let d=this.head,h=0;do{const m=d.data;if(o>m.length)n(l,m,u-o),o-=m.length;else{o===m.length?(n(l,m,u-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(m.buffer,m.byteOffset,o),u-o),this.head=d,d.data=m.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return i(this,{...l,depth:0,customInspect:!1})}},d2}var f2,Mj;function Ox(){if(Mj)return f2;Mj=1;const{MathFloor:e,NumberIsInteger:t}=Xr(),{validateInteger:n}=N0(),{ERR_INVALID_ARG_VALUE:r}=Ti().codes;let a=16*1024,i=16;function s(d,h,m){return d.highWaterMark!=null?d.highWaterMark:h?d[m]:null}function o(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function u(d,h,m,y){const v=s(h,y,m);if(v!=null){if(!t(v)||v<0){const b=y?`options.${m}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return o(d.objectMode)}return f2={getHighWaterMark:u,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},f2}var h2={},iv={exports:{}},Pj;function xT(){return Pj||(Pj=1,function(e,t){var n=Pu(),r=n.Buffer;function a(s,o){for(var l in s)o[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(s,o,l){return r(s,o,l)}a(r,i),i.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,o,l)},i.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return o!==void 0?typeof l=="string"?u.fill(o,l):u.fill(o):u.fill(0),u},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(iv,iv.exports)),iv.exports}var Fj;function rne(){if(Fj)return h2;Fj=1;var e=xT().Buffer,t=e.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(w){if(!w)return"utf8";for(var S;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(S)return;w=(""+w).toLowerCase(),S=!0}}function r(w){var S=n(w);if(typeof S!="string"&&(e.isEncoding===t||!t(w)))throw new Error("Unknown encoding: "+w);return S||w}h2.StringDecoder=a;function a(w){this.encoding=r(w);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=m,S=4;break;case"utf8":this.fillLast=l,S=4;break;case"base64":this.text=y,this.end=v,S=3;break;default:this.write=b,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(w){if(w.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(w),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<w.length?S?S+this.text(w,E):this.text(w,E):S||""},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function i(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function s(w,S,E){var C=S.length-1;if(C<E)return 0;var T=i(S[C]);return T>=0?(T>0&&(w.lastNeed=T-1),T):--C<E||T===-2?0:(T=i(S[C]),T>=0?(T>0&&(w.lastNeed=T-2),T):--C<E||T===-2?0:(T=i(S[C]),T>=0?(T>0&&(T===2?T=0:w.lastNeed=T-3),T):0))}function o(w,S,E){if((S[0]&192)!==128)return w.lastNeed=0,"";if(w.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return w.lastNeed=1,"";if(w.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return w.lastNeed=2,""}}function l(w){var S=this.lastTotal-this.lastNeed,E=o(this,w);if(E!==void 0)return E;if(this.lastNeed<=w.length)return w.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,S,0,w.length),this.lastNeed-=w.length}function u(w,S){var E=s(this,w,S);if(!this.lastNeed)return w.toString("utf8",S);this.lastTotal=E;var C=w.length-(E-this.lastNeed);return w.copy(this.lastChar,0,C),w.toString("utf8",S,C)}function d(w){var S=w&&w.length?this.write(w):"";return this.lastNeed?S+"":S}function h(w,S){if((w.length-S)%2===0){var E=w.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",S,w.length-1)}function m(w){var S=w&&w.length?this.write(w):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function y(w,S){var E=(w.length-S)%3;return E===0?w.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",S,w.length-E))}function v(w){var S=w&&w.length?this.write(w):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(w){return w.toString(this.encoding)}function x(w){return w&&w.length?this.write(w):""}return h2}var p2,Lj;function n5(){if(Lj)return p2;Lj=1;const e=lf(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Xr(),{Buffer:a}=Pu(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:s}=Ti().codes;function o(l,u,d){let h;if(typeof u=="string"||u instanceof a)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let m;if(u&&u[n])m=!0,h=u[n]();else if(u&&u[r])m=!1,h=u[r]();else throw new i("iterable",["Iterable"],u);const y=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;y._read=function(){v||(v=!0,x())},y._destroy=function(w,S){t(b(w),()=>e.nextTick(S,w),E=>e.nextTick(S,E||w))};async function b(w){const S=w!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:T}=await h.throw(w);if(await C,T)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function x(){for(;;){try{const{value:w,done:S}=m?await h.next():h.next();if(S)y.push(null);else{const E=w&&typeof w.then=="function"?await w:w;if(E===null)throw v=!1,new s;if(y.push(E))continue;v=!1}}catch(w){y.destroy(w)}break}}return y}return p2=o,p2}var m2,$j;function Dx(){if($j)return m2;$j=1;const e=lf(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:m}=Xr();m2=Ee,Ee.ReadableState=Fe;const{EventEmitter:y}=Ix(),{Stream:v,prependListener:b}=wT(),{Buffer:x}=Pu(),{addAbortSignal:w}=jx(),S=Fu();let E=Bi().debuglog("stream",me=>{E=me});const C=nne(),T=dp(),{getHighWaterMark:j,getDefaultHighWaterMark:I}=Ox(),{aggregateTwoErrors:R,codes:{ERR_INVALID_ARG_TYPE:F,ERR_METHOD_NOT_IMPLEMENTED:B,ERR_OUT_OF_RANGE:H,ERR_STREAM_PUSH_AFTER_EOF:D,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:V}=Ti(),{validateObject:ue}=N0(),ae=m("kPaused"),{StringDecoder:ne}=rne(),X=n5();o(Ee.prototype,v.prototype),o(Ee,v);const ie=()=>{},{errorOrDestroy:L}=T,J=1,Q=2,ee=4,fe=8,ve=16,Oe=32,Ae=64,Ne=128,Ce=256,Pe=512,Qe=1024,Le=2048,Ie=4096,z=8192,Se=16384,Te=32768,de=65536,se=1<<17,te=1<<18;function xe(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(G){G?this.state|=me:this.state&=~me}}}i(Fe.prototype,{objectMode:xe(J),ended:xe(Q),endEmitted:xe(ee),reading:xe(fe),constructed:xe(ve),sync:xe(Oe),needReadable:xe(Ae),emittedReadable:xe(Ne),readableListening:xe(Ce),resumeScheduled:xe(Pe),errorEmitted:xe(Qe),emitClose:xe(Le),autoDestroy:xe(Ie),destroyed:xe(z),closed:xe(Se),closeEmitted:xe(Te),multiAwaitDrain:xe(de),readingMore:xe(se),dataEmitted:xe(te)});function Fe(me,G,q){typeof q!="boolean"&&(q=G instanceof rc()),this.state=Le|Ie|ve|Oe,me&&me.objectMode&&(this.state|=J),q&&me&&me.readableObjectMode&&(this.state|=J),this.highWaterMark=me?j(this,me,"readableHighWaterMark",q):I(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new ne(me.encoding),this.encoding=me.encoding)}function Ee(me){if(!(this instanceof Ee))return new Ee(me);const G=this instanceof rc();this._readableState=new Fe(me,this,G),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!G&&w(me.signal,this)),v.call(this,me),T.construct(this,()=>{this._readableState.needReadable&&O(this,this._readableState)})}Ee.prototype.destroy=T.destroy,Ee.prototype._undestroy=T.undestroy,Ee.prototype._destroy=function(me,G){G(me)},Ee.prototype[y.captureRejectionSymbol]=function(me){this.destroy(me)},Ee.prototype[d]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new V,this.destroy(me)),new l((G,q)=>S(this,W=>W&&W!==me?q(W):G(null)))},Ee.prototype.push=function(me,G){return Ge(this,me,G,!1)},Ee.prototype.unshift=function(me,G){return Ge(this,me,G,!0)};function Ge(me,G,q,W){E("readableAddChunk",G);const pe=me._readableState;let Re;if((pe.state&J)===0&&(typeof G=="string"?(q=q||pe.defaultEncoding,pe.encoding!==q&&(W&&pe.encoding?G=x.from(G,q).toString(pe.encoding):(G=x.from(G,q),q=""))):G instanceof x?q="":v._isUint8Array(G)?(G=v._uint8ArrayToBuffer(G),q=""):G!=null&&(Re=new F("chunk",["string","Buffer","Uint8Array"],G))),Re)L(me,Re);else if(G===null)pe.state&=-9,Dt(me,pe);else if((pe.state&J)!==0||G&&G.length>0)if(W)if((pe.state&ee)!==0)L(me,new Z);else{if(pe.destroyed||pe.errored)return!1;Nt(me,pe,G,!0)}else if(pe.ended)L(me,new D);else{if(pe.destroyed||pe.errored)return!1;pe.state&=-9,pe.decoder&&!q?(G=pe.decoder.write(G),pe.objectMode||G.length!==0?Nt(me,pe,G,!1):O(me,pe)):Nt(me,pe,G,!1)}else W||(pe.state&=-9,O(me,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function Nt(me,G,q,W){G.flowing&&G.length===0&&!G.sync&&me.listenerCount("data")>0?((G.state&de)!==0?G.awaitDrainWriters.clear():G.awaitDrainWriters=null,G.dataEmitted=!0,me.emit("data",q)):(G.length+=G.objectMode?1:q.length,W?G.buffer.unshift(q):G.buffer.push(q),(G.state&Ae)!==0&&Zt(me)),O(me,G)}Ee.prototype.isPaused=function(){const me=this._readableState;return me[ae]===!0||me.flowing===!1},Ee.prototype.setEncoding=function(me){const G=new ne(me);this._readableState.decoder=G,this._readableState.encoding=this._readableState.decoder.encoding;const q=this._readableState.buffer;let W="";for(const pe of q)W+=G.write(pe);return q.clear(),W!==""&&q.push(W),this._readableState.length=W.length,this};const it=1073741824;function St(me){if(me>it)throw new H("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function Ft(me,G){return me<=0||G.length===0&&G.ended?0:(G.state&J)!==0?1:r(me)?G.flowing&&G.length?G.buffer.first().length:G.length:me<=G.length?me:G.ended?G.length:0}Ee.prototype.read=function(me){E("read",me),me===void 0?me=NaN:n(me)||(me=a(me,10));const G=this._readableState,q=me;if(me>G.highWaterMark&&(G.highWaterMark=St(me)),me!==0&&(G.state&=-129),me===0&&G.needReadable&&((G.highWaterMark!==0?G.length>=G.highWaterMark:G.length>0)||G.ended))return E("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?nt(this):Zt(this),null;if(me=Ft(me,G),me===0&&G.ended)return G.length===0&&nt(this),null;let W=(G.state&Ae)!==0;if(E("need readable",W),(G.length===0||G.length-me<G.highWaterMark)&&(W=!0,E("length less than watermark",W)),G.ended||G.reading||G.destroyed||G.errored||!G.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),G.state|=fe|Oe,G.length===0&&(G.state|=Ae);try{this._read(G.highWaterMark)}catch(Re){L(this,Re)}G.state&=-33,G.reading||(me=Ft(q,G))}let pe;return me>0?pe=Be(me,G):pe=null,pe===null?(G.needReadable=G.length<=G.highWaterMark,me=0):(G.length-=me,G.multiAwaitDrain?G.awaitDrainWriters.clear():G.awaitDrainWriters=null),G.length===0&&(G.ended||(G.needReadable=!0),q!==me&&G.ended&&nt(this)),pe!==null&&!G.errorEmitted&&!G.closeEmitted&&(G.dataEmitted=!0,this.emit("data",pe)),pe};function Dt(me,G){if(E("onEofChunk"),!G.ended){if(G.decoder){const q=G.decoder.end();q&&q.length&&(G.buffer.push(q),G.length+=G.objectMode?1:q.length)}G.ended=!0,G.sync?Zt(me):(G.needReadable=!1,G.emittedReadable=!0,ye(me))}}function Zt(me){const G=me._readableState;E("emitReadable",G.needReadable,G.emittedReadable),G.needReadable=!1,G.emittedReadable||(E("emitReadable",G.flowing),G.emittedReadable=!0,e.nextTick(ye,me))}function ye(me){const G=me._readableState;E("emitReadable_",G.destroyed,G.length,G.ended),!G.destroyed&&!G.errored&&(G.length||G.ended)&&(me.emit("readable"),G.emittedReadable=!1),G.needReadable=!G.flowing&&!G.ended&&G.length<=G.highWaterMark,ft(me)}function O(me,G){!G.readingMore&&G.constructed&&(G.readingMore=!0,e.nextTick(K,me,G))}function K(me,G){for(;!G.reading&&!G.ended&&(G.length<G.highWaterMark||G.flowing&&G.length===0);){const q=G.length;if(E("maybeReadMore read 0"),me.read(0),q===G.length)break}G.readingMore=!1}Ee.prototype._read=function(me){throw new B("_read()")},Ee.prototype.pipe=function(me,G){const q=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new u(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(me),E("pipe count=%d opts=%j",W.pipes.length,G);const Re=(!G||G.end!==!1)&&me!==e.stdout&&me!==e.stderr?pt:_r;W.endEmitted?e.nextTick(Re):q.once("end",Re),me.on("unpipe",qe);function qe(Ln,hi){E("onunpipe"),Ln===q&&hi&&hi.hasUnpiped===!1&&(hi.hasUnpiped=!0,It())}function pt(){E("onend"),me.end()}let Wt,ut=!1;function It(){E("cleanup"),me.removeListener("close",Kn),me.removeListener("finish",xr),Wt&&me.removeListener("drain",Wt),me.removeListener("error",Nn),me.removeListener("unpipe",qe),q.removeListener("end",pt),q.removeListener("end",_r),q.removeListener("data",en),ut=!0,Wt&&W.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Wt()}function Lt(){ut||(W.pipes.length===1&&W.pipes[0]===me?(E("false write response, pause",0),W.awaitDrainWriters=me,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(me)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(me)),q.pause()),Wt||(Wt=he(q,me),me.on("drain",Wt))}q.on("data",en);function en(Ln){E("ondata");const hi=me.write(Ln);E("dest.write",hi),hi===!1&&Lt()}function Nn(Ln){if(E("onerror",Ln),_r(),me.removeListener("error",Nn),me.listenerCount("error")===0){const hi=me._writableState||me._readableState;hi&&!hi.errorEmitted?L(me,Ln):me.emit("error",Ln)}}b(me,"error",Nn);function Kn(){me.removeListener("finish",xr),_r()}me.once("close",Kn);function xr(){E("onfinish"),me.removeListener("close",Kn),_r()}me.once("finish",xr);function _r(){E("unpipe"),q.unpipe(me)}return me.emit("pipe",q),me.writableNeedDrain===!0?Lt():W.flowing||(E("pipe resume"),q.resume()),me};function he(me,G){return function(){const W=me._readableState;W.awaitDrainWriters===G?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(G)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}Ee.prototype.unpipe=function(me){const G=this._readableState,q={hasUnpiped:!1};if(G.pipes.length===0)return this;if(!me){const pe=G.pipes;G.pipes=[],this.pause();for(let Re=0;Re<pe.length;Re++)pe[Re].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(G.pipes,me);return W===-1?this:(G.pipes.splice(W,1),G.pipes.length===0&&this.pause(),me.emit("unpipe",this,q),this)},Ee.prototype.on=function(me,G){const q=v.prototype.on.call(this,me,G),W=this._readableState;return me==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):me==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Zt(this):W.reading||e.nextTick(be,this)),q},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.removeListener=function(me,G){const q=v.prototype.removeListener.call(this,me,G);return me==="readable"&&e.nextTick(je,this),q},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.removeAllListeners=function(me){const G=v.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(je,this),G};function je(me){const G=me._readableState;G.readableListening=me.listenerCount("readable")>0,G.resumeScheduled&&G[ae]===!1?G.flowing=!0:me.listenerCount("data")>0?me.resume():G.readableListening||(G.flowing=null)}function be(me){E("readable nexttick read 0"),me.read(0)}Ee.prototype.resume=function(){const me=this._readableState;return me.flowing||(E("resume"),me.flowing=!me.readableListening,ke(this,me)),me[ae]=!1,this};function ke(me,G){G.resumeScheduled||(G.resumeScheduled=!0,e.nextTick(le,me,G))}function le(me,G){E("resume",G.reading),G.reading||me.read(0),G.resumeScheduled=!1,me.emit("resume"),ft(me),G.flowing&&!G.reading&&me.read(0)}Ee.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function ft(me){const G=me._readableState;for(E("flow",G.flowing);G.flowing&&me.read()!==null;);}Ee.prototype.wrap=function(me){let G=!1;me.on("data",W=>{!this.push(W)&&me.pause&&(G=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",W=>{L(this,W)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{G&&me.resume&&(G=!1,me.resume())};const q=s(me);for(let W=1;W<q.length;W++){const pe=q[W];this[pe]===void 0&&typeof me[pe]=="function"&&(this[pe]=me[pe].bind(me))}return this},Ee.prototype[h]=function(){return vt(this)},Ee.prototype.iterator=function(me){return me!==void 0&&ue(me,"options"),vt(this,me)};function vt(me,G){typeof me.read!="function"&&(me=Ee.wrap(me,{objectMode:!0}));const q=P(me,G);return q.stream=me,q}async function*P(me,G){let q=ie;function W(qe){this===me?(q(),q=ie):q=qe}me.on("readable",W);let pe;const Re=S(me,{writable:!1},qe=>{pe=qe?R(pe,qe):null,q(),q=ie});try{for(;;){const qe=me.destroyed?null:me.read();if(qe!==null)yield qe;else{if(pe)throw pe;if(pe===null)return;await new l(W)}}}catch(qe){throw pe=R(pe,qe),pe}finally{(pe||(G==null?void 0:G.destroyOnReturn)!==!1)&&(pe===void 0||me._readableState.autoDestroy)?T.destroyer(me,null):(me.off("readable",W),Re())}}i(Ee.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Fe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(me){this[ae]=!!me}}}),Ee._fromList=Be;function Be(me,G){if(G.length===0)return null;let q;return G.objectMode?q=G.buffer.shift():!me||me>=G.length?(G.decoder?q=G.buffer.join(""):G.buffer.length===1?q=G.buffer.first():q=G.buffer.concat(G.length),G.buffer.clear()):q=G.buffer.consume(me,G.decoder),q}function nt(me){const G=me._readableState;E("endReadable",G.endEmitted),G.endEmitted||(G.ended=!0,e.nextTick(ge,G,me))}function ge(me,G){if(E("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,G.emit("end"),G.writable&&G.allowHalfOpen===!1)e.nextTick(De,G);else if(me.autoDestroy){const q=G._writableState;(!q||q.autoDestroy&&(q.finished||q.writable===!1))&&G.destroy()}}}function De(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}Ee.from=function(me,G){return X(Ee,me,G)};let Ke;function Ot(){return Ke===void 0&&(Ke={}),Ke}return Ee.fromWeb=function(me,G){return Ot().newStreamReadableFromReadableStream(me,G)},Ee.toWeb=function(me,G){return Ot().newReadableStreamFromStreamReadable(me,G)},Ee.wrap=function(me,G){var q,W;return new Ee({objectMode:(q=(W=me.readableObjectMode)!==null&&W!==void 0?W:me.objectMode)!==null&&q!==void 0?q:!0,...G,destroy(pe,Re){T.destroyer(me,pe),Re(pe)}}).wrap(me)},m2}var g2,Bj;function _T(){if(Bj)return g2;Bj=1;const e=lf(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:u}=Xr();g2=ue,ue.WritableState=Z;const{EventEmitter:d}=Ix(),h=wT().Stream,{Buffer:m}=Pu(),y=dp(),{addAbortSignal:v}=jx(),{getHighWaterMark:b,getDefaultHighWaterMark:x}=Ox(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:j,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:R,ERR_UNKNOWN_ENCODING:F}=Ti().codes,{errorOrDestroy:B}=y;s(ue.prototype,h.prototype),s(ue,h);function H(){}const D=l("kOnFinished");function Z(Ie,z,Se){typeof Se!="boolean"&&(Se=z instanceof rc()),this.objectMode=!!(Ie&&Ie.objectMode),Se&&(this.objectMode=this.objectMode||!!(Ie&&Ie.writableObjectMode)),this.highWaterMark=Ie?b(this,Ie,"writableHighWaterMark",Se):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Te=!!(Ie&&Ie.decodeStrings===!1);this.decodeStrings=!Te,this.defaultEncoding=Ie&&Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=L.bind(void 0,z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ie||Ie.emitClose!==!1,this.autoDestroy=!Ie||Ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[D]=[]}function V(Ie){Ie.buffered=[],Ie.bufferedIndex=0,Ie.allBuffers=!0,Ie.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ue(Ie){const z=this instanceof rc();if(!z&&!r(ue,this))return new ue(Ie);this._writableState=new Z(Ie,this,z),Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final),typeof Ie.construct=="function"&&(this._construct=Ie.construct),Ie.signal&&v(Ie.signal,this)),h.call(this,Ie),y.construct(this,()=>{const Se=this._writableState;Se.writing||fe(this,Se),Ne(this,Se)})}a(ue,u,{__proto__:null,value:function(Ie){return r(this,Ie)?!0:this!==ue?!1:Ie&&Ie._writableState instanceof Z}}),ue.prototype.pipe=function(){B(this,new C)};function ae(Ie,z,Se,Te){const de=Ie._writableState;if(typeof Se=="function")Te=Se,Se=de.defaultEncoding;else{if(!Se)Se=de.defaultEncoding;else if(Se!=="buffer"&&!m.isEncoding(Se))throw new F(Se);typeof Te!="function"&&(Te=H)}if(z===null)throw new I;if(!de.objectMode)if(typeof z=="string")de.decodeStrings!==!1&&(z=m.from(z,Se),Se="buffer");else if(z instanceof m)Se="buffer";else if(h._isUint8Array(z))z=h._uint8ArrayToBuffer(z),Se="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],z);let se;return de.ending?se=new R:de.destroyed&&(se=new T("write")),se?(e.nextTick(Te,se),B(Ie,se,!0),se):(de.pendingcb++,ne(Ie,de,z,Se,Te))}ue.prototype.write=function(Ie,z,Se){return ae(this,Ie,z,Se)===!0},ue.prototype.cork=function(){this._writableState.corked++},ue.prototype.uncork=function(){const Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||fe(this,Ie))},ue.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=o(z)),!m.isEncoding(z))throw new F(z);return this._writableState.defaultEncoding=z,this};function ne(Ie,z,Se,Te,de){const se=z.objectMode?1:Se.length;z.length+=se;const te=z.length<z.highWaterMark;return te||(z.needDrain=!0),z.writing||z.corked||z.errored||!z.constructed?(z.buffered.push({chunk:Se,encoding:Te,callback:de}),z.allBuffers&&Te!=="buffer"&&(z.allBuffers=!1),z.allNoop&&de!==H&&(z.allNoop=!1)):(z.writelen=se,z.writecb=de,z.writing=!0,z.sync=!0,Ie._write(Se,Te,z.onwrite),z.sync=!1),te&&!z.errored&&!z.destroyed}function X(Ie,z,Se,Te,de,se,te){z.writelen=Te,z.writecb=te,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new T("write")):Se?Ie._writev(de,z.onwrite):Ie._write(de,se,z.onwrite),z.sync=!1}function ie(Ie,z,Se,Te){--z.pendingcb,Te(Se),ee(z),B(Ie,Se)}function L(Ie,z){const Se=Ie._writableState,Te=Se.sync,de=Se.writecb;if(typeof de!="function"){B(Ie,new E);return}Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0,z?(z.stack,Se.errored||(Se.errored=z),Ie._readableState&&!Ie._readableState.errored&&(Ie._readableState.errored=z),Te?e.nextTick(ie,Ie,Se,z,de):ie(Ie,Se,z,de)):(Se.buffered.length>Se.bufferedIndex&&fe(Ie,Se),Te?Se.afterWriteTickInfo!==null&&Se.afterWriteTickInfo.cb===de?Se.afterWriteTickInfo.count++:(Se.afterWriteTickInfo={count:1,cb:de,stream:Ie,state:Se},e.nextTick(J,Se.afterWriteTickInfo)):Q(Ie,Se,1,de))}function J({stream:Ie,state:z,count:Se,cb:Te}){return z.afterWriteTickInfo=null,Q(Ie,z,Se,Te)}function Q(Ie,z,Se,Te){for(!z.ending&&!Ie.destroyed&&z.length===0&&z.needDrain&&(z.needDrain=!1,Ie.emit("drain"));Se-- >0;)z.pendingcb--,Te();z.destroyed&&ee(z),Ne(Ie,z)}function ee(Ie){if(Ie.writing)return;for(let de=Ie.bufferedIndex;de<Ie.buffered.length;++de){var z;const{chunk:se,callback:te}=Ie.buffered[de],xe=Ie.objectMode?1:se.length;Ie.length-=xe,te((z=Ie.errored)!==null&&z!==void 0?z:new T("write"))}const Se=Ie[D].splice(0);for(let de=0;de<Se.length;de++){var Te;Se[de]((Te=Ie.errored)!==null&&Te!==void 0?Te:new T("end"))}V(Ie)}function fe(Ie,z){if(z.corked||z.bufferProcessing||z.destroyed||!z.constructed)return;const{buffered:Se,bufferedIndex:Te,objectMode:de}=z,se=Se.length-Te;if(!se)return;let te=Te;if(z.bufferProcessing=!0,se>1&&Ie._writev){z.pendingcb-=se-1;const xe=z.allNoop?H:Ee=>{for(let Ge=te;Ge<Se.length;++Ge)Se[Ge].callback(Ee)},Fe=z.allNoop&&te===0?Se:t(Se,te);Fe.allBuffers=z.allBuffers,X(Ie,z,!0,z.length,Fe,"",xe),V(z)}else{do{const{chunk:xe,encoding:Fe,callback:Ee}=Se[te];Se[te++]=null;const Ge=de?1:xe.length;X(Ie,z,!1,Ge,xe,Fe,Ee)}while(te<Se.length&&!z.writing);te===Se.length?V(z):te>256?(Se.splice(0,te),z.bufferedIndex=0):z.bufferedIndex=te}z.bufferProcessing=!1}ue.prototype._write=function(Ie,z,Se){if(this._writev)this._writev([{chunk:Ie,encoding:z}],Se);else throw new S("_write()")},ue.prototype._writev=null,ue.prototype.end=function(Ie,z,Se){const Te=this._writableState;typeof Ie=="function"?(Se=Ie,Ie=null,z=null):typeof z=="function"&&(Se=z,z=null);let de;if(Ie!=null){const se=ae(this,Ie,z);se instanceof n&&(de=se)}return Te.corked&&(Te.corked=1,this.uncork()),de||(!Te.errored&&!Te.ending?(Te.ending=!0,Ne(this,Te,!0),Te.ended=!0):Te.finished?de=new j("end"):Te.destroyed&&(de=new T("end"))),typeof Se=="function"&&(de||Te.finished?e.nextTick(Se,de):Te[D].push(Se)),this};function ve(Ie){return Ie.ending&&!Ie.destroyed&&Ie.constructed&&Ie.length===0&&!Ie.errored&&Ie.buffered.length===0&&!Ie.finished&&!Ie.writing&&!Ie.errorEmitted&&!Ie.closeEmitted}function Oe(Ie,z){let Se=!1;function Te(de){if(Se){B(Ie,de??E());return}if(Se=!0,z.pendingcb--,de){const se=z[D].splice(0);for(let te=0;te<se.length;te++)se[te](de);B(Ie,de,z.sync)}else ve(z)&&(z.prefinished=!0,Ie.emit("prefinish"),z.pendingcb++,e.nextTick(Ce,Ie,z))}z.sync=!0,z.pendingcb++;try{Ie._final(Te)}catch(de){Te(de)}z.sync=!1}function Ae(Ie,z){!z.prefinished&&!z.finalCalled&&(typeof Ie._final=="function"&&!z.destroyed?(z.finalCalled=!0,Oe(Ie,z)):(z.prefinished=!0,Ie.emit("prefinish")))}function Ne(Ie,z,Se){ve(z)&&(Ae(Ie,z),z.pendingcb===0&&(Se?(z.pendingcb++,e.nextTick((Te,de)=>{ve(de)?Ce(Te,de):de.pendingcb--},Ie,z)):ve(z)&&(z.pendingcb++,Ce(Ie,z))))}function Ce(Ie,z){z.pendingcb--,z.finished=!0;const Se=z[D].splice(0);for(let Te=0;Te<Se.length;Te++)Se[Te]();if(Ie.emit("finish"),z.autoDestroy){const Te=Ie._readableState;(!Te||Te.autoDestroy&&(Te.endEmitted||Te.readable===!1))&&Ie.destroy()}}i(ue.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ie){this._writableState&&(this._writableState.destroyed=Ie)}},writable:{__proto__:null,get(){const Ie=this._writableState;return!!Ie&&Ie.writable!==!1&&!Ie.destroyed&&!Ie.errored&&!Ie.ending&&!Ie.ended},set(Ie){this._writableState&&(this._writableState.writable=!!Ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ie=this._writableState;return Ie?!Ie.destroyed&&!Ie.ending&&Ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Pe=y.destroy;ue.prototype.destroy=function(Ie,z){const Se=this._writableState;return!Se.destroyed&&(Se.bufferedIndex<Se.buffered.length||Se[D].length)&&e.nextTick(ee,Se),Pe.call(this,Ie,z),this},ue.prototype._undestroy=y.undestroy,ue.prototype._destroy=function(Ie,z){z(Ie)},ue.prototype[d.captureRejectionSymbol]=function(Ie){this.destroy(Ie)};let Qe;function Le(){return Qe===void 0&&(Qe={}),Qe}return ue.fromWeb=function(Ie,z){return Le().newStreamWritableFromWritableStream(Ie,z)},ue.toWeb=function(Ie){return Le().newWritableStreamFromStreamWritable(Ie)},g2}var y2,zj;function ane(){if(zj)return y2;zj=1;const e=lf(),t=Pu(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=dc(),h=Fu(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:v}}=Ti(),{destroyer:b}=dp(),x=rc(),w=Dx(),S=_T(),{createDeferredPromise:E}=Bi(),C=n5(),T=globalThis.Blob||t.Blob,j=typeof T<"u"?function(Z){return Z instanceof T}:function(Z){return!1},I=globalThis.AbortController||Pg().AbortController,{FunctionPrototypeCall:R}=Xr();class F extends x{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}y2=function D(Z,V){if(l(Z))return Z;if(s(Z))return H({readable:Z});if(o(Z))return H({writable:Z});if(i(Z))return H({writable:!1,readable:!1});if(u(Z))return H({readable:w.fromWeb(Z)});if(d(Z))return H({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:ae,write:ne,final:X,destroy:ie}=B(Z);if(a(ae))return C(F,ae,{objectMode:!0,write:ne,final:X,destroy:ie});const L=ae==null?void 0:ae.then;if(typeof L=="function"){let J;const Q=R(L,ae,ee=>{if(ee!=null)throw new v("nully","body",ee)},ee=>{b(J,ee)});return J=new F({objectMode:!0,readable:!1,write:ne,final(ee){X(async()=>{try{await Q,e.nextTick(ee,null)}catch(fe){e.nextTick(ee,fe)}})},destroy:ie})}throw new v("Iterable, AsyncIterable or AsyncFunction",V,ae)}if(j(Z))return D(Z.arrayBuffer());if(a(Z))return C(F,Z,{objectMode:!0,writable:!1});if(u(Z==null?void 0:Z.readable)&&d(Z==null?void 0:Z.writable))return F.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ae=Z!=null&&Z.readable?s(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:D(Z.readable):void 0,ne=Z!=null&&Z.writable?o(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:D(Z.writable):void 0;return H({readable:ae,writable:ne})}const ue=Z==null?void 0:Z.then;if(typeof ue=="function"){let ae;return R(ue,Z,ne=>{ne!=null&&ae.push(ne),ae.push(null)},ne=>{b(ae,ne)}),ae=new F({objectMode:!0,writable:!1,read(){}})}throw new y(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function B(D){let{promise:Z,resolve:V}=E();const ue=new I,ae=ue.signal;return{value:D(async function*(){for(;;){const X=Z;Z=null;const{chunk:ie,done:L,cb:J}=await X;if(e.nextTick(J),L)return;if(ae.aborted)throw new m(void 0,{cause:ae.reason});({promise:Z,resolve:V}=E()),yield ie}}(),{signal:ae}),write(X,ie,L){const J=V;V=null,J({chunk:X,done:!1,cb:L})},final(X){const ie=V;V=null,ie({done:!0,cb:X})},destroy(X,ie){ue.abort(),ie(X)}}}function H(D){const Z=D.readable&&typeof D.readable.read!="function"?w.wrap(D.readable):D.readable,V=D.writable;let ue=!!n(Z),ae=!!r(V),ne,X,ie,L,J;function Q(ee){const fe=L;L=null,fe?fe(ee):ee&&J.destroy(ee)}return J=new F({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:ue,writable:ae}),ae&&(h(V,ee=>{ae=!1,ee&&b(Z,ee),Q(ee)}),J._write=function(ee,fe,ve){V.write(ee,fe)?ve():ne=ve},J._final=function(ee){V.end(),X=ee},V.on("drain",function(){if(ne){const ee=ne;ne=null,ee()}}),V.on("finish",function(){if(X){const ee=X;X=null,ee()}})),ue&&(h(Z,ee=>{ue=!1,ee&&b(Z,ee),Q(ee)}),Z.on("readable",function(){if(ie){const ee=ie;ie=null,ee()}}),Z.on("end",function(){J.push(null)}),J._read=function(){for(;;){const ee=Z.read();if(ee===null){ie=J._read;return}if(!J.push(ee))return}}),J._destroy=function(ee,fe){!ee&&L!==null&&(ee=new m),ie=null,ne=null,X=null,L===null?fe(ee):(L=fe,b(V,ee),b(Z,ee))},J}return y2}var b2,Uj;function rc(){if(Uj)return b2;Uj=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Xr();b2=s;const a=Dx(),i=_T();r(s.prototype,a.prototype),r(s,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const m=d[h];s.prototype[m]||(s.prototype[m]=i.prototype[m])}}function s(d){if(!(this instanceof s))return new s(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}s.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},s.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return s.from=function(d){return u||(u=ane()),u(d,"body")},b2}var v2,qj;function r5(){if(qj)return v2;qj=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Xr();v2=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=Ti().codes,r=rc(),{getHighWaterMark:a}=Ox();e(s.prototype,r.prototype),e(s,r);const i=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const d=u?a(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[i]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function o(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){u?u(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==o&&o.call(this)}return s.prototype._final=o,s.prototype._transform=function(u,d,h){throw new n("_transform()")},s.prototype._write=function(u,d,h){const m=this._readableState,y=this._writableState,v=m.length;this._transform(u,d,(b,x)=>{if(b){h(b);return}x!=null&&this.push(x),y.ended||v===m.length||m.length<m.highWaterMark?h():this[i]=h})},s.prototype._read=function(){if(this[i]){const u=this[i];this[i]=null,u()}},v2}var w2,Hj;function a5(){if(Hj)return w2;Hj=1;const{ObjectSetPrototypeOf:e}=Xr();w2=n;const t=r5();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},w2}var x2,Vj;function ST(){if(Vj)return x2;Vj=1;const e=lf(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Xr(),i=Fu(),{once:s}=Bi(),o=dp(),l=rc(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=Ti(),{validateFunction:x,validateAbortSignal:w}=N0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:T,isTransformStream:j,isWebStream:I,isReadableStream:R,isReadableFinished:F}=dc(),B=globalThis.AbortController||Pg().AbortController;let H,D,Z;function V(ee,fe,ve){let Oe=!1;ee.on("close",()=>{Oe=!0});const Ae=i(ee,{readable:fe,writable:ve},Ne=>{Oe=!Ne});return{destroy:Ne=>{Oe||(Oe=!0,o.destroyer(ee,Ne||new y("pipe")))},cleanup:Ae}}function ue(ee){return x(ee[ee.length-1],"streams[stream.length - 1]"),ee.pop()}function ae(ee){if(S(ee))return ee;if(C(ee))return ne(ee);throw new d("val",["Readable","Iterable","AsyncIterable"],ee)}async function*ne(ee){D||(D=Dx()),yield*D.prototype[r].call(ee)}async function X(ee,fe,ve,{end:Oe}){let Ae,Ne=null;const Ce=Le=>{if(Le&&(Ae=Le),Ne){const Ie=Ne;Ne=null,Ie()}},Pe=()=>new n((Le,Ie)=>{Ae?Ie(Ae):Ne=()=>{Ae?Ie(Ae):Le()}});fe.on("drain",Ce);const Qe=i(fe,{readable:!1},Ce);try{fe.writableNeedDrain&&await Pe();for await(const Le of ee)fe.write(Le)||await Pe();Oe&&(fe.end(),await Pe()),ve()}catch(Le){ve(Ae!==Le?u(Ae,Le):Le)}finally{Qe(),fe.off("drain",Ce)}}async function ie(ee,fe,ve,{end:Oe}){j(fe)&&(fe=fe.writable);const Ae=fe.getWriter();try{for await(const Ne of ee)await Ae.ready,Ae.write(Ne).catch(()=>{});await Ae.ready,Oe&&await Ae.close(),ve()}catch(Ne){try{await Ae.abort(Ne),ve(Ne)}catch(Ce){ve(Ce)}}}function L(...ee){return J(ee,s(ue(ee)))}function J(ee,fe,ve){if(ee.length===1&&t(ee[0])&&(ee=ee[0]),ee.length<2)throw new m("streams");const Oe=new B,Ae=Oe.signal,Ne=ve==null?void 0:ve.signal,Ce=[];w(Ne,"options.signal");function Pe(){de(new b)}Z=Z||Bi().addAbortListener;let Qe;Ne&&(Qe=Z(Ne,Pe));let Le,Ie;const z=[];let Se=0;function Te(Ee){de(Ee,--Se===0)}function de(Ee,Ge){var Nt;if(Ee&&(!Le||Le.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Le=Ee),!(!Le&&!Ge)){for(;z.length;)z.shift()(Le);(Nt=Qe)===null||Nt===void 0||Nt[a](),Oe.abort(),Ge&&(Le||Ce.forEach(it=>it()),e.nextTick(fe,Le,Ie))}}let se;for(let Ee=0;Ee<ee.length;Ee++){const Ge=ee[Ee],Nt=Ee<ee.length-1,it=Ee>0,St=Nt||(ve==null?void 0:ve.end)!==!1,Ft=Ee===ee.length-1;if(T(Ge)){let Dt=function(Zt){Zt&&Zt.name!=="AbortError"&&Zt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Te(Zt)};var Fe=Dt;if(St){const{destroy:Zt,cleanup:ye}=V(Ge,Nt,it);z.push(Zt),E(Ge)&&Ft&&Ce.push(ye)}Ge.on("error",Dt),E(Ge)&&Ft&&Ce.push(()=>{Ge.removeListener("error",Dt)})}if(Ee===0)if(typeof Ge=="function"){if(se=Ge({signal:Ae}),!S(se))throw new h("Iterable, AsyncIterable or Stream","source",se)}else S(Ge)||C(Ge)||j(Ge)?se=Ge:se=l.from(Ge);else if(typeof Ge=="function"){if(j(se)){var te;se=ae((te=se)===null||te===void 0?void 0:te.readable)}else se=ae(se);if(se=Ge(se,{signal:Ae}),Nt){if(!S(se,!0))throw new h("AsyncIterable",`transform[${Ee-1}]`,se)}else{var xe;H||(H=a5());const Dt=new H({objectMode:!0}),Zt=(xe=se)===null||xe===void 0?void 0:xe.then;if(typeof Zt=="function")Se++,Zt.call(se,K=>{Ie=K,K!=null&&Dt.write(K),St&&Dt.end(),e.nextTick(Te)},K=>{Dt.destroy(K),e.nextTick(Te,K)});else if(S(se,!0))Se++,X(se,Dt,Te,{end:St});else if(R(se)||j(se)){const K=se.readable||se;Se++,X(K,Dt,Te,{end:St})}else throw new h("AsyncIterable or Promise","destination",se);se=Dt;const{destroy:ye,cleanup:O}=V(se,!1,!0);z.push(ye),Ft&&Ce.push(O)}}else if(T(Ge)){if(C(se)){Se+=2;const Dt=Q(se,Ge,Te,{end:St});E(Ge)&&Ft&&Ce.push(Dt)}else if(j(se)||R(se)){const Dt=se.readable||se;Se++,X(Dt,Ge,Te,{end:St})}else if(S(se))Se++,X(se,Ge,Te,{end:St});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=Ge}else if(I(Ge)){if(C(se))Se++,ie(ae(se),Ge,Te,{end:St});else if(R(se)||S(se))Se++,ie(se,Ge,Te,{end:St});else if(j(se))Se++,ie(se.readable,Ge,Te,{end:St});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=Ge}else se=l.from(Ge)}return(Ae!=null&&Ae.aborted||Ne!=null&&Ne.aborted)&&e.nextTick(Pe),se}function Q(ee,fe,ve,{end:Oe}){let Ae=!1;if(fe.on("close",()=>{Ae||ve(new v)}),ee.pipe(fe,{end:!1}),Oe){let Ce=function(){Ae=!0,fe.end()};var Ne=Ce;F(ee)?e.nextTick(Ce):ee.once("end",Ce)}else ve();return i(ee,{readable:!0,writable:!1},Ce=>{const Pe=ee._readableState;Ce&&Ce.code==="ERR_STREAM_PREMATURE_CLOSE"&&Pe&&Pe.ended&&!Pe.errored&&!Pe.errorEmitted?ee.once("end",ve).once("error",ve):ve(Ce)}),i(fe,{readable:!1,writable:!0},ve)}return x2={pipelineImpl:J,pipeline:L},x2}var _2,Gj;function i5(){if(Gj)return _2;Gj=1;const{pipeline:e}=ST(),t=rc(),{destroyer:n}=dp(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:s,isTransformStream:o,isWritableStream:l,isReadableStream:u}=dc(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=Ti(),y=Fu();return _2=function(...b){if(b.length===0)throw new m("streams");if(b.length===1)return t.from(b[0]);const x=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const H=b.length-1;b[H]=t.from(b[H])}for(let H=0;H<b.length;++H)if(!(!r(b[H])&&!s(b[H]))){if(H<b.length-1&&!(a(b[H])||u(b[H])||o(b[H])))throw new h(`streams[${H}]`,x[H],"must be readable");if(H>0&&!(i(b[H])||l(b[H])||o(b[H])))throw new h(`streams[${H}]`,x[H],"must be writable")}let w,S,E,C,T;function j(H){const D=C;C=null,D?D(H):H?T.destroy(H):!B&&!F&&T.destroy()}const I=b[0],R=e(b,j),F=!!(i(I)||l(I)||o(I)),B=!!(a(R)||u(R)||o(R));if(T=new t({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(R!=null&&R.readableObjectMode),writable:F,readable:B}),F){if(r(I))T._write=function(D,Z,V){I.write(D,Z)?V():w=V},T._final=function(D){I.end(),S=D},I.on("drain",function(){if(w){const D=w;w=null,D()}});else if(s(I)){const Z=(o(I)?I.writable:I).getWriter();T._write=async function(V,ue,ae){try{await Z.ready,Z.write(V).catch(()=>{}),ae()}catch(ne){ae(ne)}},T._final=async function(V){try{await Z.ready,Z.close().catch(()=>{}),S=V}catch(ue){V(ue)}}}const H=o(R)?R.readable:R;y(H,()=>{if(S){const D=S;S=null,D()}})}if(B){if(r(R))R.on("readable",function(){if(E){const H=E;E=null,H()}}),R.on("end",function(){T.push(null)}),T._read=function(){for(;;){const H=R.read();if(H===null){E=T._read;return}if(!T.push(H))return}};else if(s(R)){const D=(o(R)?R.readable:R).getReader();T._read=async function(){for(;;)try{const{value:Z,done:V}=await D.read();if(!T.push(Z))return;if(V){T.push(null);return}}catch{return}}}}return T._destroy=function(H,D){!H&&C!==null&&(H=new d),E=null,w=null,S=null,C===null?D(H):(C=D,r(R)&&n(R,H))},T},_2}var Kj;function ine(){if(Kj)return rv;Kj=1;const e=globalThis.AbortController||Pg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=Ti(),{validateAbortSignal:s,validateInteger:o,validateObject:l}=N0(),u=Xr().Symbol("kWeak"),d=Xr().Symbol("kResistStopPropagation"),{finished:h}=Fu(),m=i5(),{addAbortSignalNoValidate:y}=jx(),{isWritable:v,isNodeStream:b}=dc(),{deprecate:x}=Bi(),{ArrayPrototypePush:w,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:T,Promise:j,PromiseReject:I,PromiseResolve:R,PromisePrototypeThen:F,Symbol:B}=Xr(),H=B("kEmpty"),D=B("kEof");function Z(Ne,Ce){if(Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&s(Ce.signal,"options.signal"),b(Ne)&&!v(Ne))throw new t("stream",Ne,"must be writable");const Pe=m(this,Ne);return Ce!=null&&Ce.signal&&y(Ce.signal,Pe),Pe}function V(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&s(Ce.signal,"options.signal");let Pe=1;(Ce==null?void 0:Ce.concurrency)!=null&&(Pe=E(Ce.concurrency));let Qe=Pe-1;return(Ce==null?void 0:Ce.highWaterMark)!=null&&(Qe=E(Ce.highWaterMark)),o(Pe,"options.concurrency",1),o(Qe,"options.highWaterMark",0),Qe+=Pe,(async function*(){const Ie=Bi().AbortSignalAny([Ce==null?void 0:Ce.signal].filter(S)),z=this,Se=[],Te={signal:Ie};let de,se,te=!1,xe=0;function Fe(){te=!0,Ee()}function Ee(){xe-=1,Ge()}function Ge(){se&&!te&&xe<Pe&&Se.length<Qe&&(se(),se=null)}async function Nt(){try{for await(let it of z){if(te)return;if(Ie.aborted)throw new i;try{if(it=Ne(it,Te),it===H)continue;it=R(it)}catch(St){it=I(St)}xe+=1,F(it,Ee,Fe),Se.push(it),de&&(de(),de=null),!te&&(Se.length>=Qe||xe>=Pe)&&await new j(St=>{se=St})}Se.push(D)}catch(it){const St=I(it);F(St,Ee,Fe),Se.push(St)}finally{te=!0,de&&(de(),de=null)}}Nt();try{for(;;){for(;Se.length>0;){const it=await Se[0];if(it===D)return;if(Ie.aborted)throw new i;it!==H&&(yield it),Se.shift(),Ge()}await new j(it=>{de=it})}}finally{te=!0,se&&(se(),se=null)}}).call(this)}function ue(Ne=void 0){return Ne!=null&&l(Ne,"options"),(Ne==null?void 0:Ne.signal)!=null&&s(Ne.signal,"options.signal"),(async function*(){let Pe=0;for await(const Le of this){var Qe;if(Ne!=null&&(Qe=Ne.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i({cause:Ne.signal.reason});yield[Pe++,Le]}}).call(this)}async function ae(Ne,Ce=void 0){for await(const Pe of L.call(this,Ne,Ce))return!0;return!1}async function ne(Ne,Ce=void 0){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);return!await ae.call(this,async(...Pe)=>!await Ne(...Pe),Ce)}async function X(Ne,Ce){for await(const Pe of L.call(this,Ne,Ce))return Pe}async function ie(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);async function Pe(Qe,Le){return await Ne(Qe,Le),H}for await(const Qe of V.call(this,Pe,Ce));}function L(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);async function Pe(Qe,Le){return await Ne(Qe,Le)?Qe:H}return V.call(this,Pe,Ce)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(Ne,Ce,Pe){var Qe;if(typeof Ne!="function")throw new n("reducer",["Function","AsyncFunction"],Ne);Pe!=null&&l(Pe,"options"),(Pe==null?void 0:Pe.signal)!=null&&s(Pe.signal,"options.signal");let Le=arguments.length>1;if(Pe!=null&&(Qe=Pe.signal)!==null&&Qe!==void 0&&Qe.aborted){const de=new i(void 0,{cause:Pe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(de)),de}const Ie=new e,z=Ie.signal;if(Pe!=null&&Pe.signal){const de={once:!0,[u]:this,[d]:!0};Pe.signal.addEventListener("abort",()=>Ie.abort(),de)}let Se=!1;try{for await(const de of this){var Te;if(Se=!0,Pe!=null&&(Te=Pe.signal)!==null&&Te!==void 0&&Te.aborted)throw new i;Le?Ce=await Ne(Ce,de,{signal:z}):(Ce=de,Le=!0)}if(!Se&&!Le)throw new J}finally{Ie.abort()}return Ce}async function ee(Ne){Ne!=null&&l(Ne,"options"),(Ne==null?void 0:Ne.signal)!=null&&s(Ne.signal,"options.signal");const Ce=[];for await(const Qe of this){var Pe;if(Ne!=null&&(Pe=Ne.signal)!==null&&Pe!==void 0&&Pe.aborted)throw new i(void 0,{cause:Ne.signal.reason});w(Ce,Qe)}return Ce}function fe(Ne,Ce){const Pe=V.call(this,Ne,Ce);return(async function*(){for await(const Le of Pe)yield*Le}).call(this)}function ve(Ne){if(Ne=C(Ne),T(Ne))return 0;if(Ne<0)throw new a("number",">= 0",Ne);return Ne}function Oe(Ne,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&s(Ce.signal,"options.signal"),Ne=ve(Ne),(async function*(){var Qe;if(Ce!=null&&(Qe=Ce.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const Ie of this){var Le;if(Ce!=null&&(Le=Ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;Ne--<=0&&(yield Ie)}}).call(this)}function Ae(Ne,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&s(Ce.signal,"options.signal"),Ne=ve(Ne),(async function*(){var Qe;if(Ce!=null&&(Qe=Ce.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const Ie of this){var Le;if(Ce!=null&&(Le=Ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;if(Ne-- >0&&(yield Ie),Ne<=0)return}}).call(this)}return rv.streamReturningOperators={asIndexedPairs:x(ue,"readable.asIndexedPairs will be removed in a future version."),drop:Oe,filter:L,flatMap:fe,map:V,take:Ae,compose:Z},rv.promiseReturningOperators={every:ne,forEach:ie,reduce:Q,toArray:ee,some:ae,find:X},rv}var S2,Wj;function s5(){if(Wj)return S2;Wj=1;const{ArrayPrototypePop:e,Promise:t}=Xr(),{isIterable:n,isNodeStream:r,isWebStream:a}=dc(),{pipelineImpl:i}=ST(),{finished:s}=Fu();o5();function o(...l){return new t((u,d)=>{let h,m;const y=l[l.length-1];if(y&&typeof y=="object"&&!r(y)&&!n(y)&&!a(y)){const v=e(l);h=v.signal,m=v.end}i(l,(v,b)=>{v?d(v):u(b)},{signal:h,end:m})})}return S2={finished:s,pipeline:o},S2}var Zj;function o5(){if(Zj)return QS.exports;Zj=1;const{Buffer:e}=Pu(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Xr(),{promisify:{custom:a}}=Bi(),{streamReturningOperators:i,promiseReturningOperators:s}=ine(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Ti(),l=i5(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Ox(),{pipeline:h}=ST(),{destroyer:m}=dp(),y=Fu(),v=s5(),b=dc(),x=QS.exports=wT().Stream;x.isDestroyed=b.isDestroyed,x.isDisturbed=b.isDisturbed,x.isErrored=b.isErrored,x.isReadable=b.isReadable,x.isWritable=b.isWritable,x.Readable=Dx();for(const E of n(i)){let T=function(...j){if(new.target)throw o();return x.Readable.from(r(C,this,j))};var S=T;const C=i[E];t(T,"name",{__proto__:null,value:C.name}),t(T,"length",{__proto__:null,value:C.length}),t(x.Readable.prototype,E,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(s)){let T=function(...I){if(new.target)throw o();return r(C,this,I)};var S=T;const C=s[E];t(T,"name",{__proto__:null,value:C.name}),t(T,"length",{__proto__:null,value:C.length}),t(x.Readable.prototype,E,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}x.Writable=_T(),x.Duplex=rc(),x.Transform=r5(),x.PassThrough=a5(),x.pipeline=h;const{addAbortSignal:w}=jx();return x.addAbortSignal=w,x.finished=y,x.destroy=m,x.compose=l,x.setDefaultHighWaterMark=u,x.getDefaultHighWaterMark=d,t(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(y,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),x.Stream=x,x._isUint8Array=function(C){return C instanceof Uint8Array},x._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},QS.exports}var Yj;function sne(){return Yj||(Yj=1,function(e){const t=o5(),n=s5(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(JS)),JS.exports}var l5=sne();class ET extends l5.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(lt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class CT extends l5.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(ii(new Ue(lt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(ii(new Ue(lt.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(lt.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(lt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Ms=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ps=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class li{get position(){return this.flag&zd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=fi(t,n);Object.assign(this,Jd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&Ax||this.inode.flags&Fi.Sync)}_emitChange(){Ya(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,BP(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=Du(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>kr?-61441:kr)|n,(this._isSync||n>kr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(lt.EINVAL);if(this.dirty=!0,!(this.flag&ri||this.flag&Gl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=mw(t),this.inode.mtimeMs=mw(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Kl(n,"utf8","a",420);if(!(Wl(r.flag)&zd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Fr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ri)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Fi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Og(this.inode)&&!jg(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Kl(t,null,"r",292);if(Wl(n.flag)&ri)throw new Ue(lt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),s=Fr.from(i);return n.encoding?s.toString(n.encoding):s}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Fi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&ri)throw Ue.With("EBADF",this.path,"readLines");return Cte({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!pr(this.context,this.inode,Ca))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new af(this.inode):new uc(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Fi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&ri||this.flag&Gl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!Og(this.inode)&&!jg(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,await this.fs.write(this.internalPath,s,a),this._isSync&&await this.sync(),s.byteLength}async write(t,n,r,a){let i,s,o;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,s=0,i=Fr.from(t,typeof r=="string"?r:"utf8"),o=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n??0,o=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,s,o,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=Kl(n,"utf8","w",420),a=Wl(r.flag);if(!(a&ri||a&Gl))throw new Ue(lt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Fr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),qP(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&ri)throw Ue.With("EBADF",this.path,"createReadStream");return new ET(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Fi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"createWriteStream");return new CT(t,this)}}async function c5(e,t){e=hn(e),t=hn(t);const n=zn(e,this),r=zn(t,this);if(!(await fp.call(this,ir(e))).hasAccess(ta,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Ya(this,"rename",e.toString()),Ya(this,"change",t.toString());return}await Lx.call(this,t,await Fx(e)),await Px.call(this,e),Ya(this,"rename",e.toString())}catch(a){throw mr(a,{[n.path]:e,[r.path]:t})}}async function R0(e){try{const{fs:t,path:n}=zn(await Lu.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function fp(e,t){e=hn(e);const{fs:n,path:r}=zn(await Lu.call(this,e),this);try{const a=await n.stat(r);if(ka&&!pr(this,a,Ca))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new af(a):new uc(a)}catch(a){throw mr(a,{[r]:e})}}async function Mx(e,t){e=hn(e);const{fs:n,path:r}=zn(e,this);try{const a=await n.stat(r);if(ka&&!pr(this,a,Ca))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new af(a):new uc(a)}catch(a){throw mr(a,{[r]:e})}}async function u5(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Ms(n,await Fs.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ps(n);r&&await r}}async function Px(e){e=hn(e);const{fs:t,path:n}=zn(e,this);try{if(ka&&!pr(this,await t.stat(n),ta))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}async function hp(e,t,n){var r;t=hn(t);const a=Du(n.mode,420),i=Wl(n.flag),{fullPath:s,fs:o,path:l,stats:u}=await vw(e,t.toString(),n.preserveSymlinks);if(!u){if(!(i&Cx))throw Ue.With("ENOENT",s,"_open");const h=await o.stat(ir(l));if(!pr(e,h,ta))throw Ue.With("EACCES",ir(s),"_open");if(!oo(h))throw Ue.With("ENOTDIR",ir(s),"_open");const{euid:m,egid:y}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:ho.credentials,v=await o.createFile(l,{mode:a,uid:h.mode&C0?h.uid:m,gid:h.mode&k0?h.gid:y});return new li(e,yw(new gw(e,t,o,l,i,v)))}if(!pr(e,u,HP(i)))throw Ue.With("EACCES",s,"_open");if(i&kx)throw Ue.With("EEXIST",s,"_open");const d=new li(e,yw(new gw(e,t,o,l,i,u)));return i&Tx&&await d.truncate(0),d}async function Fs(e,t="r",n=420){return await hp(this,e,{flag:t,mode:n})}async function Fx(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Kl(t,null,"r",292);return await Ms(n,typeof e=="object"&&"fd"in e?e:await Fs.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ps(n);r&&await r}}async function Lx(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Kl(n,"utf8","w+",420),i=Ms(r,e instanceof li?e:await Fs.call(this,e.toString(),a.flag,a.mode),!0),s=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof s!="string"&&!(s instanceof Uint8Array))throw new Ue(lt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ps(r);a&&await a}}async function d5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Kl(n,"utf8","a",420);if(!(Wl(a.flag)&zd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Ms(r,typeof e=="object"&&"fd"in e?e:await Fs.call(this,e,a.flag,a.mode),!0).appendFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ps(r);a&&await a}}async function kT(e){e=await Lu.call(this,e);const{fs:t,path:n}=zn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!oo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ka&&!pr(this,r,ta))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}async function $x(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ho.credentials;t=typeof t=="object"?t:{mode:t};const s=Du(t==null?void 0:t.mode,511);e=await Lu.call(this,e);const{fs:o,path:l,root:u}=zn(e,this),d={[l]:e},h=async(m,y)=>{if(!pr(this,y,ta))throw Ue.With("EACCES",ir(m),"mkdir");const v=await o.mkdir(m,{mode:s,uid:y.mode&C0?y.uid:a,gid:y.mode&k0?y.gid:i});return Ya(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){await h(l,await o.stat(ir(l)));return}const m=[];for(let v=l,b=e;!await o.exists(v);v=ir(v),b=ir(b))m.unshift(v),d[v]=b;if(!m.length)return;const y=[await o.stat(ir(m[0]))];for(const[v,b]of m.entries())y.push(await h(b,y[v]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw mr(m,d)}}async function cf(e,t){t=typeof t=="object"?t:{encoding:t},e=await Lu.call(this,e);const{fs:n,path:r}=zn(e,this),a=await n.stat(r).catch(l=>br(mr(l,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!pr(this,a,Ca))throw Ue.With("EACCES",e,"readdir");if(!oo(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>br(mr(l,{[r]:e}))),s=[],o=async l=>{let u;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(u=await n.stat(cr(r,l)).catch(d=>{if(d.code!="ENOENT")throw mr(d,{[r]:e})}),!u))&&(t!=null&&t.withFileTypes?s.push(new Mg(l,u)):(t==null?void 0:t.encoding)=="buffer"?s.push(Fr.from(l)):s.push(l),!(!(t!=null&&t.recursive)||!oo(u))))for(const d of await cf.call(this,cr(e,l),t))d instanceof Mg?(d.path=cr(l,d.path),s.push(d)):Fr.isBuffer(d)?s.push(Fr.from(cr(l,Jk(d)))):s.push(cr(l,d))};return await Promise.all(i.map(o)),s}async function f5(e,t){e=hn(e),t=hn(t);const{fs:n,path:r}=zn(e,this),a=zn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ka&&!pr(this,await n.stat(ir(r)),Ca))throw Ue.With("EACCES",ir(r),"link");if(ka&&!(await fp.call(this,ir(t))).hasAccess(ta,this))throw Ue.With("EACCES",ir(t),"link");if(ka&&!pr(this,await n.stat(r),Ca))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw mr(i,{[a.path]:t,[r]:e})}}async function h5(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid symlink type: "+n);if(t=hn(t),await R0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=Ms(r,await hp(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(hn(e,!0)),await a.chmod(cc)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ps(r);a&&await a}}async function bw(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Ms(n,await hp(this,hn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Ps(n);r&&await r}}async function p5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ms(r,await Fs.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ps(r);a&&await a}}async function m5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ms(r,await hp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ps(r);a&&await a}}async function g5(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ms(n,await Fs.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ps(n);r&&await r}}async function y5(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ms(n,await hp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ps(n);r&&await r}}async function TT(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ms(r,await Fs.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ps(r);a&&await a}}async function b5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ms(r,await hp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Ps(r);a&&await a}}async function vw(e,t,n){if(n){const l=zn(t,e),u=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:u}}try{const l=zn(t,e),u=await l.fs.stat(l.path);if(!Uh(u))return{...l,fullPath:t,stats:u};const d=nc.call(e,ir(t),(await bw.call(e,t)).toString());return await vw(e,d)}catch{}const{base:r,dir:a}=Fo(t),i=a=="/"?"/":await Lu.call(e,a),s=cr(i,r),o=zn(s,e);try{const l=await o.fs.stat(o.path);if(!Uh(l))return{...o,fullPath:s,stats:l};const u=nc.call(e,i,(await bw.call(e,s)).toString());return await vw(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw mr(l,{[o.path]:s})}}async function Lu(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=await vw(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Fr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function one(e,t={}){const n=new WP(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(s,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:s,filename:o},done:!1})});function i(){a=!0,n.close();for(const s of r)s({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:s,resolve:o}=Promise.withResolvers();return r.push(o),s},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function v5(e,t=iT){if(!(await fp.call(this,e)).hasAccess(t,this))throw new Ue(lt.EACCES)}async function AT(e,t){e=hn(e);const n=await Mx.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&kr){case pa:if(t!=null&&t.recursive)for(const r of await cf.call(this,e))await AT.call(this,cr(e,r),t);await kT.call(this,e);break;case to:case cc:case tf:case nf:await Px.call(this,e);break;case rf:case ef:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}async function w5(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await $x.call(this,a),n=="buffer"?Fr.from(a):a}async function NT(e,t,n){if(e=hn(e),t=hn(t),n&&n&sT&&await R0.call(this,t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");await Lx.call(this,t,await Fx.call(this,e)),Ya(this,"rename",t.toString())}function x5(e,t){return e=hn(e),Promise.resolve(new vT(e,this))}async function RT(e,t,n){e=hn(e),t=hn(t);const r=await Mx.call(this,e);if(n!=null&&n.errorOnExist&&await R0.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&kr){case pa:{if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([cf.call(this,e,{withFileTypes:!0}),$x.call(this,t,{recursive:!0})]),i=async s=>{n.filter&&!n.filter(cr(e,s.name),cr(t,s.name))||await RT.call(this,cr(e,s.name),cr(t,s.name),n)};await Promise.all(a.map(i));break}case to:case cc:await NT.call(this,e,t);break;case tf:case nf:case rf:case ef:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await TT.call(this,t,r.atime,r.mtime)}async function _5(e,t){e=hn(e);const{fs:n}=zn(e,this);return Promise.resolve(GP(n,t==null?void 0:t.bigint))}function S5(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*s(o){const l=await cf(o,{withFileTypes:r,encoding:"utf8"});for(const u of l){const d=r?u.path:o+"/"+u;a(r?u:d)||((await fp(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*s(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?u:d.replace(/^\/+/g,"")))}}return s(n)}const lne=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:li,access:v5,appendFile:d5,chmod:g5,chown:p5,constants:LP,copyFile:NT,cp:RT,exists:R0,glob:S5,lchmod:y5,lchown:m5,link:f5,lstat:Mx,lutimes:b5,mkdir:$x,mkdtemp:w5,open:Fs,opendir:x5,readFile:Fx,readdir:cf,readlink:bw,realpath:Lu,rename:c5,rm:AT,rmdir:kT,stat:fp,statfs:_5,symlink:h5,truncate:u5,unlink:Px,utimes:TT,watch:one,writeFile:Lx},Symbol.toStringTag,{value:"Module"})),In=()=>{};async function cne(e){const t=[];for await(const n of e)t.push(n);return t}function une(e,t,n=In){c5.call(this,e,t).then(()=>n()).catch(n)}function dne(e,t=In){R0.call(this,e).then(t).catch(()=>t(!1))}function fne(e,t,n=In){n=typeof t=="function"?t:n,fp.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function hne(e,t,n=In){n=typeof t=="function"?t:n,Mx.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function pne(e,t=0,n=In){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;u5.call(this,e,r).then(()=>n()).catch(n)}function mne(e,t=In){Px.call(this,e).then(()=>t()).catch(t)}function gne(e,t,n,r=In){const a=Du(n,420);r=typeof n=="function"?n:r,Fs.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function yne(e,t,n=In){n=typeof t=="function"?t:n,Fx.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function bne(e,t,n,r=In){r=typeof n=="function"?n:r,Lx.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function vne(e,t,n,r=In){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,d5.call(this,e,t,a).then(()=>r()).catch(r)}function wne(e,t,n=In){n=typeof t=="function"?t:n,new li(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new af(r):r)).catch(n)}function xne(e,t=In){new li(this,e).close().then(()=>t()).catch(t)}function _ne(e,t,n=In){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new li(this,e);if(r<0)throw new Ue(lt.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function Sne(e,t=In){new li(this,e).sync().then(()=>t()).catch(t)}function Ene(e,t=In){new li(this,e).datasync().then(()=>t()).catch(t)}function Cne(e,t,n,r,a,i=In){let s,o,l,u,d;const h=new li(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":u=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(lt.EINVAL,"Invalid arguments"));return}s=Fr.from(t),o=0,l=s.length;const m=i;h.write(s,o,l,u).then(({bytesWritten:y})=>m(void 0,y,s.toString(d))).catch(m)}else{s=Fr.from(t.buffer),o=n,l=r,u=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(s,o,l,u).then(({bytesWritten:y})=>m(void 0,y,s)).catch(m)}}function kne(e,t,n,r,a,i=In){new li(this,e).read(t,n,r,a).then(({bytesRead:s,buffer:o})=>i(void 0,s,o)).catch(i)}function Tne(e,t,n,r=In){new li(this,e).chown(t,n).then(()=>r()).catch(r)}function Ane(e,t,n){new li(this,e).chmod(t).then(()=>n()).catch(n)}function Nne(e,t,n,r=In){new li(this,e).utimes(t,n).then(()=>r()).catch(r)}function Rne(e,t=In){kT.call(this,e).then(()=>t()).catch(t)}function Ine(e,t,n=In){$x.call(this,e,t).then(()=>n()).catch(n)}function jne(e,t,n=In){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};cf.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function One(e,t,n=In){f5.call(this,e,t).then(()=>n()).catch(n)}function Dne(e,t,n,r=In){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,h5.call(this,e,t,a).then(()=>r()).catch(r)}function Mne(e,t,n=In){n=typeof t=="function"?t:n,bw.call(this,e).then(r=>n(void 0,r)).catch(n)}function Pne(e,t,n,r=In){p5.call(this,e,t,n).then(()=>r()).catch(r)}function Fne(e,t,n,r=In){m5.call(this,e,t,n).then(()=>r()).catch(r)}function Lne(e,t,n=In){g5.call(this,e,t).then(()=>n()).catch(n)}function $ne(e,t,n=In){y5.call(this,e,t).then(()=>n()).catch(n)}function Bne(e,t,n,r=In){TT.call(this,e,t,n).then(()=>r()).catch(r)}function zne(e,t,n,r=In){b5.call(this,e,t,n).then(()=>r()).catch(r)}function Une(e,t,n=In){n=typeof t=="function"?t:n,Lu.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function qne(e,t,n=In){const r=typeof t=="number"?t:Ca;n=typeof t=="function"?t:n,v5.call(this,e,r).then(()=>n()).catch(n)}const yh=new Map;function Hne(e,t,n){const r=hn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(lt.EINVAL,"No listener specified",e.toString(),"watchFile");if(yh.has(r)){const s=yh.get(r);s&&s.listeners.add(n);return}const i=new Rte(this,r,a);i.on("change",(s,o)=>{const l=yh.get(r);if(l)for(const u of l.listeners)u(s,o)}),yh.set(r,{watcher:i,listeners:new Set})}function Vne(e,t=In){const n=hn(e),r=yh.get(n);r&&(t&&t!==In?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),yh.delete(n)))}function Gne(e,t,n){const r=new WP(this,hn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||In),r}function Kne(e,t){t=typeof t=="object"?t:{encoding:t};const n=Fs.call(this,e,"r",t==null?void 0:t.mode);return new ET({...t,autoClose:!0},n)}function Wne(e,t){t=typeof t=="object"?t:{encoding:t};const n=Fs.call(this,e,"w",t==null?void 0:t.mode);return new CT(t,n)}function Zne(e,t,n=In){n=typeof t=="function"?t:n,AT.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function Yne(e,t,n=In){n=typeof t=="function"?t:n,w5.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function Xne(e,t,n,r=In){r=typeof n=="function"?n:r,NT.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function Jne(e,t,n,r=In){r=typeof n=="function"?n:r,new li(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function Qne(e,t,n,r=In){r=typeof n=="function"?n:r,new li(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function ere(e,t,n=In){n=typeof t=="function"?t:n,x5.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function tre(e,t,n,r=In){r=typeof n=="function"?n:r,RT.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function nre(e,t,n=In){n=typeof t=="function"?t:n,_5.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function rre(e,t){const n=await Fs.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function are(e,t,n=In){n=typeof t=="function"?t:n;const r=S5.call(this,e,typeof t=="function"?void 0:t);cne(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var gd=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},ts=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},ire=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},ww;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(ww||(ww={}));let E5=(()=>{var e,t,n,r,a;let i=[Qd()],s,o=[],l,u,d=[],h=[],m,y=[],v=[],b,x=[],w=[],S,E=[],C=[],T,j=[],I=[],R,F=[],B=[];return l=class{constructor(H=br(new Ue(lt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=ts(this,d,0),this.extsize=(ts(this,h),ts(this,y,0)),this.nextents=(ts(this,v),ts(this,x,0)),this.projid=(ts(this,w),ts(this,E,0)),this.cowextsize=(ts(this,C),ts(this,j,0)),this.pad=(ts(this,I),ts(this,F,[])),ts(this,B),this.extsize=H.size,this.nextents=1,this.projid=H.uid,this.cowextsize=H.size;for(const D of Object.keys(Fi))H.flags&Fi[D]&&D in ww&&(this.xflags|=ww[D])}},ire(l,"fsxattr"),(()=>{const H=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=xn).uint32.bind(e)],m=[(t=xn).uint32.bind(t)],b=[(n=xn).uint32.bind(n)],S=[(r=xn).uint32.bind(r)],T=[(a=xn).uint32.bind(a)],R=[xn.char(8)],gd(null,null,u,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:D=>"xflags"in D,get:D=>D.xflags,set:(D,Z)=>{D.xflags=Z}},metadata:H},d,h),gd(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:D=>"extsize"in D,get:D=>D.extsize,set:(D,Z)=>{D.extsize=Z}},metadata:H},y,v),gd(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:D=>"nextents"in D,get:D=>D.nextents,set:(D,Z)=>{D.nextents=Z}},metadata:H},x,w),gd(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:D=>"projid"in D,get:D=>D.projid,set:(D,Z)=>{D.projid=Z}},metadata:H},E,C),gd(null,null,T,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:D=>"cowextsize"in D,get:D=>D.cowextsize,set:(D,Z)=>{D.cowextsize=Z}},metadata:H},j,I),gd(null,null,R,{kind:"field",name:"pad",static:!1,private:!1,access:{has:D=>"pad"in D,get:D=>D.pad,set:(D,Z)=>{D.pad=Z}},metadata:H},F,B),gd(null,s={value:l},i,{kind:"class",name:l.name,metadata:H},null,o),l=s.value,H&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H}),ts(l,o)})(),l})();var Ur;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Ur||(Ur={}));var Ys;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Ys||(Ys={}));async function sre(e,t,...n){e=hn(e);const{fs:r,path:a}=zn(e,this);try{const i=new ha(await r.stat(a));switch(t){case Ur.GetFlags:case Ys.GetFlags:return i.flags;case Ur.SetFlags:case Ys.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Ur.GetVersion:case Ys.GetVersion:return i.version;case Ur.SetVersion:case Ys.SetVersion:i.version=n[0],await r.touch(a,i);return;case Ur.Fiemap:break;case Ur.GetXattr:return new E5(i);case Ur.SetXattr:break;case Ur.GetLabel:return r.label;case Ur.SetLabel:r.label=n[0];return;case Ur.GetUUID:return r.uuid;case Ur.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw mr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function ore(e,t,...n){e=hn(e);const{fs:r,path:a}=zn(e,this);try{const i=new ha(r.statSync(a));switch(t){case Ur.GetFlags:case Ys.GetFlags:return i.flags;case Ur.SetFlags:case Ys.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Ur.GetVersion:case Ys.GetVersion:return i.version;case Ur.SetVersion:case Ys.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Ur.Fiemap:break;case Ur.GetXattr:return new E5(i);case Ur.SetXattr:break;case Ur.GetLabel:return r.label;case Ur.SetLabel:r.label=n[0];return;case Ur.GetUUID:return r.uuid;case Ur.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw mr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const lre=[];function pp(e,t,n,r){if(!t.startsWith("user.")&&!lre.includes(t))throw new Ue(lt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function cre(e,t,n={}){var r;e=hn(e);const{fs:a,path:i}=zn(e,this);pp(this,t,e,"xattr.get");try{const s=await a.stat(i);if(ka&&!pr(this,s,Ca))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new Su);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Fr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw mr(s,{[i]:e})}}function ure(e,t,n={}){var r;e=hn(e),pp(this,t,e,"xattr.get");const{fs:a,path:i}=zn(e,this);try{const s=a.statSync(i);if(ka&&!pr(this,s,Ca))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new Su);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Fr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw mr(s,{[i]:e})}}async function dre(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=zn(e,this);pp(this,t,e,"xattr.set");try{const o=await i.stat(s);if(ka&&!pr(this,o,ta))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new Su);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Fr.from(n)),await i.touch(s,Jd(o,"attributes"))}catch(o){throw mr(o,{[s]:e})}}function fre(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=zn(e,this);pp(this,t,e,"xattr.set");try{const o=i.statSync(s);if(ka&&!pr(this,o,ta))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new Su);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Fr.from(n)),i.touchSync(s,Jd(o,"attributes"))}catch(o){throw mr(o,{[s]:e})}}async function hre(e,t){var n;e=hn(e);const{fs:r,path:a}=zn(e,this);pp(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(ka&&!pr(this,i,ta))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Su),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,Jd(i,"attributes"))}catch(i){throw mr(i,{[a]:e})}}function pre(e,t){var n;e=hn(e);const{fs:r,path:a}=zn(e,this);pp(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(ka&&!pr(this,i,ta))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Su),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,Jd(i,"attributes"))}catch(i){throw mr(i,{[a]:e})}}async function mre(e){e=hn(e);const{fs:t,path:n}=zn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw mr(r,{[n]:e})}}function gre(e){e=hn(e);const{fs:t,path:n}=zn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw mr(r,{[n]:e})}}const yre=Object.freeze(Object.defineProperty({__proto__:null,get:cre,getSync:ure,list:mre,listSync:gre,remove:hre,removeSync:pre,set:dre,setSync:fre},Symbol.toStringTag,{value:"Module"})),Ha=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:fte,Dir:vT,Dirent:Mg,get IOC(){return Ur},get IOC32(){return Ys},ReadStream:ET,Stats:uc,StatsFs:dte,WriteStream:CT,access:qne,accessSync:Zte,appendFile:vne,appendFileSync:Mte,chmod:Lne,chmodSync:Gte,chown:Pne,chownSync:Hte,chroot:Ate,close:xne,closeSync:of,constants:LP,copyFile:Xne,copyFileSync:QP,cp:tre,cpSync:e5,createReadStream:Kne,createWriteStream:Wne,exists:dne,existsSync:uT,fchmod:Ane,fchmodSync:gT,fchown:Tne,fchownSync:mT,fdatasync:Ene,fdatasyncSync:$te,fstat:wne,fstatSync:Pte,fsync:Sne,fsyncSync:Lte,ftruncate:_ne,ftruncateSync:Fte,futimes:Nne,futimesSync:yT,glob:are,globSync:tne,ioctl:sre,ioctlSync:ore,lchmod:$ne,lchmodSync:Kte,lchown:Fne,lchownSync:Vte,link:One,linkSync:Ute,lopenSync:Rx,lstat:hne,lstatSync:dT,lutimes:zne,lutimesSync:Wte,mkdir:Ine,mkdirSync:bT,mkdtemp:Yne,mkdtempSync:Yte,mount:cT,open:gne,openAsBlob:rre,openSync:Nx,opendir:ere,opendirSync:Qte,promises:lne,read:kne,readFile:yne,readFileSync:hT,readSync:zte,readdir:jne,readdirSync:up,readlink:Mne,readlinkSync:NC,readv:Jne,readvSync:Xte,realpath:Une,realpathSync:Mu,rename:une,renameSync:Ote,rm:Zne,rmSync:JP,rmdir:Rne,rmdirSync:YP,stat:fne,statSync:Eu,statfs:nre,statfsSync:ene,symlink:Dne,symlinkSync:qte,truncate:pne,truncateSync:Dte,umount:VP,unlink:mne,unlinkSync:fT,unwatchFile:Vne,utimes:Bne,utimesSync:XP,watch:Gne,watchFile:Hne,write:Cne,writeFile:bne,writeFileSync:pT,writeSync:Bte,writev:Qne,writevSync:Jte,xattr:yre},Symbol.toStringTag,{value:"Module"}));function Xj(e){return TP(e)||aT(e)||e instanceof lT}async function C5(e,t=0){if(typeof e!="object"||e==null)throw Pi(new Ue(lt.EINVAL,"Invalid options on mount configuration"));if(!Xj(e))throw Pi(new Ue(lt.EINVAL,"Invalid mount configuration"));if(e instanceof lT)return await e.ready(),e;aT(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&Xj(i)){if(kP("Resolving nested mount configuration: "+a),t>10)throw Pi(new Ue(lt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await C5(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Pi(new Ue(lt.EPERM,"Backend not available: "+n.name));Wee(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function bre(e){if(!TP(e))throw new TypeError("Invalid single mount point configuration");const t=await C5(e);VP("/"),cT("/",t)}const vre=["delete"];Math.max(...vre.map(e=>e.length));Kee("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const k5=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;k5[e]=t}function wre(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^k5[(t^e[n])&255];return(t^4294967295)>>>0}var zr=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},Tn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},IT=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let Jj=(()=>{var e,t,n,r;let a=[Qd()],i,s=[],o,l,u=[],d=[],h,m=[],y=[],v,b=[],x=[],w,S=[],E=[];return o=class{constructor(){this.id=Tn(this,u,0),this.offset_=(Tn(this,d),Tn(this,m,0)),this.offset=(Tn(this,y),Tn(this,b,0)),this.size=(Tn(this,x),Tn(this,S,0)),Tn(this,E)}},IT(o,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],w=[(r=xn).uint32.bind(r)],zr(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:T=>"id"in T,get:T=>T.id,set:(T,j)=>{T.id=j}},metadata:C},u,d),zr(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:T=>"offset_"in T,get:T=>T.offset_,set:(T,j)=>{T.offset_=j}},metadata:C},m,y),zr(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:T=>"offset"in T,get:T=>T.offset,set:(T,j)=>{T.offset=j}},metadata:C},b,x),zr(null,null,w,{kind:"field",name:"size",static:!1,private:!1,access:{has:T=>"size"in T,get:T=>T.size,set:(T,j)=>{T.size=j}},metadata:C},S,E),zr(null,i={value:o},a,{kind:"class",name:o.name,metadata:C},null,s),o=i.value,C&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),Tn(o,s)})(),o})();const Qj=255;let yd=(()=>{var e,t,n,r;let a=[Qd()],i,s=[],o,l,u=[],d=[],h,m=[],y=[],v,b=[],x=[],w,S=[],E=[],C,T=[],j=[];var I=o=class{constructor(R=br(new Ue(lt.EINVAL,"Metadata block must be initialized with a superblock")),F=0){if(this.superblock=R,this.offset=F,this.checksum=Tn(this,u,0),this.timestamp=(Tn(this,d),Tn(this,m,Date.now())),this.previous_offset_=(Tn(this,y),Tn(this,b,0)),this.previous_offset=(Tn(this,x),Tn(this,S,0)),this._previous=Tn(this,E),this.entries=Tn(this,T,Array.from({length:Qj},()=>new Jj)),Tn(this,j),this.superblock=R,this.offset=F,!!F&&(Sx(this,R.store._buffer.subarray(F,F+qr(I))),!T5(this)))throw Ex(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+F.toString(16)))}get previous(){var R;if(this.previous_offset)return(R=this._previous)!==null&&R!==void 0||(this._previous=new I(this.superblock,this.previous_offset)),this._previous}};return IT(o,"MetadataBlock"),(()=>{const R=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],w=[(r=xn).uint32.bind(r)],C=[Ig(Jj,Qj)],zr(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:F=>"checksum"in F,get:F=>F.checksum,set:(F,B)=>{F.checksum=B}},metadata:R},u,d),zr(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:F=>"timestamp"in F,get:F=>F.timestamp,set:(F,B)=>{F.timestamp=B}},metadata:R},m,y),zr(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:F=>"previous_offset_"in F,get:F=>F.previous_offset_,set:(F,B)=>{F.previous_offset_=B}},metadata:R},b,x),zr(null,null,w,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:F=>"previous_offset"in F,get:F=>F.previous_offset,set:(F,B)=>{F.previous_offset=B}},metadata:R},S,E),zr(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:F=>"entries"in F,get:F=>F.entries,set:(F,B)=>{F.entries=B}},metadata:R},T,j),zr(null,i={value:o},a,{kind:"class",name:o.name,metadata:R},null,s),I=o=i.value,R&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:R}),Tn(o,s)})(),I=o})();const e4=2049864546;(()=>{var e,t,n,r,a,i,s,o,l,u,d;let h=[Qd()],m,y=[],v,b,x=[],w=[],S,E=[],C=[],T,j=[],I=[],R,F=[],B=[],H,D=[],Z=[],V,ue=[],ae=[],ne,X=[],ie=[],L,J=[],Q=[],ee,fe=[],ve=[],Oe,Ae=[],Ne=[],Ce,Pe=[],Qe=[],Le,Ie=[],z=[],Se,Te=[],de=[];var se=v=class{constructor(te=br(new Ue(lt.EINVAL,"Super block must be initialized with a store"))){if(this.store=te,this.checksum=Tn(this,x,0),this.magic=(Tn(this,w),Tn(this,E,e4)),this.version=(Tn(this,C),Tn(this,j,1)),this.inode_format=(Tn(this,I),Tn(this,F,pte)),this.flags=(Tn(this,B),Tn(this,D,0)),this.used_bytes=(Tn(this,Z),Tn(this,ue,BigInt(0))),this.total_bytes=(Tn(this,ae),Tn(this,X,BigInt(0))),this.uuid=(Tn(this,ie),Tn(this,J,BigInt(0))),this.metadata_block_size=(Tn(this,Q),Tn(this,fe,qr(yd))),this.metadata_offset_=(Tn(this,ve),Tn(this,Ae,0)),this.metadata_offset=(Tn(this,Ne),Tn(this,Pe,0)),this.metadata=Tn(this,Qe),this.label=Tn(this,Ie,""),this._padding=(Tn(this,z),Tn(this,Te,new Array(132).fill(0))),Tn(this,de),this.store=te,te._view.getUint32(Iee(se,"magic"),!0)!=e4){ii("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new yd(this),this.metadata.offset=qr(se),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(qr(se)+qr(yd)),this.total_bytes=BigInt(te._buffer.byteLength),te._write(this),te._write(this.metadata);return}if(Sx(this,te._buffer.subarray(0,qr(se))),!T5(this))throw Ex(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new yd(this,this.metadata_offset)}rotateMetadata(){const te=new yd(this);return te.offset=Number(this.used_bytes),te.previous_offset=this.metadata_offset,this.metadata=te,this.metadata_offset=te.offset,this.store._write(te),this.used_bytes+=BigInt(qr(yd)),this.store._write(this),te}isUnused(te,xe){if(!xe)return!0;if(te+xe>this.total_bytes||te<qr(se))return!1;for(let Fe=this.metadata;Fe;Fe=Fe.previous){if(te<Fe.offset+qr(yd)&&te+xe>Fe.offset)return!1;for(const Ee of Fe.entries)if(Ee.offset&&(te>=Ee.offset&&te<Ee.offset+Ee.size||te+xe>Ee.offset&&te+xe<=Ee.offset+Ee.size||te<=Ee.offset&&te+xe>=Ee.offset+Ee.size))return!1}return!0}};return IT(v,"SuperBlock"),(()=>{const te=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=xn).uint32.bind(e)],S=[(t=xn).uint32.bind(t)],T=[(n=xn).uint16.bind(n)],R=[(r=xn).uint16.bind(r)],H=[(a=xn).uint32.bind(a)],V=[(i=xn).uint64.bind(i)],ne=[(s=xn).uint64.bind(s)],L=[(o=xn).uint128.bind(o)],ee=[(l=xn).uint32.bind(l)],Oe=[(u=xn).uint32.bind(u)],Ce=[(d=xn).uint32.bind(d)],Le=[xn.char(64)],Se=[xn.char(132)],zr(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Fe)=>{xe.checksum=Fe}},metadata:te},x,w),zr(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Fe)=>{xe.magic=Fe}},metadata:te},E,C),zr(null,null,T,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Fe)=>{xe.version=Fe}},metadata:te},j,I),zr(null,null,R,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Fe)=>{xe.inode_format=Fe}},metadata:te},F,B),zr(null,null,H,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Fe)=>{xe.flags=Fe}},metadata:te},D,Z),zr(null,null,V,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Fe)=>{xe.used_bytes=Fe}},metadata:te},ue,ae),zr(null,null,ne,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Fe)=>{xe.total_bytes=Fe}},metadata:te},X,ie),zr(null,null,L,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Fe)=>{xe.uuid=Fe}},metadata:te},J,Q),zr(null,null,ee,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Fe)=>{xe.metadata_block_size=Fe}},metadata:te},fe,ve),zr(null,null,Oe,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Fe)=>{xe.metadata_offset_=Fe}},metadata:te},Ae,Ne),zr(null,null,Ce,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Fe)=>{xe.metadata_offset=Fe}},metadata:te},Pe,Qe),zr(null,null,Le,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Fe)=>{xe.label=Fe}},metadata:te},Ie,z),zr(null,null,Se,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Fe)=>{xe._padding=Fe}},metadata:te},Te,de),zr(null,m={value:v},h,{kind:"class",name:v.name,metadata:te},null,y),se=v=m.value,te&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:te}),Tn(v,y)})(),se=v})();function T5(e){const t=Za(e),n=wre(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Ha;function xre(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function IC(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?lt[xre(e)]:lt.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function bh(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(IC(e.error))}})}class _re extends AC{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await bh(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await bh(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await bh(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),bh(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(IC(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(IC(this.tx.error)),this.tx.abort(),t}}async function Sre(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(ii("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await bh(n)}class Ere{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new _re(t,this)}}const Cre={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await bh(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await Sre(e.storeName||"zenfs",e.idbFactory),n=new Ere(t),r=new UP(n);if(e!=null&&e.disableAsyncCache)return rT("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},kre=Cre;function sv(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var E2={exports:{}},t4;function Tre(){return t4||(t4=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function s(u,d){if(!a[u]){if(!r[u]){var h=typeof sv=="function"&&sv;if(!d&&h)return h(u,!0);if(o)return o(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var y=a[u]={exports:{}};r[u][0].call(y.exports,function(v){var b=r[u][1][v];return s(b||v)},y,y.exports,n,r,a,i)}return a[u].exports}for(var o=typeof sv=="function"&&sv,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,r,a){var i=n("./utils"),s=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,d,h,m,y,v,b,x=[],w=0,S=l.length,E=S,C=i.getTypeOf(l)!=="string";w<l.length;)E=S-w,h=C?(u=l[w++],d=w<S?l[w++]:0,w<S?l[w++]:0):(u=l.charCodeAt(w++),d=w<S?l.charCodeAt(w++):0,w<S?l.charCodeAt(w++):0),m=u>>2,y=(3&u)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,x.push(o.charAt(m)+o.charAt(y)+o.charAt(v)+o.charAt(b));return x.join("")},a.decode=function(l){var u,d,h,m,y,v,b=0,x=0,w="data:";if(l.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=s.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)u=o.indexOf(l.charAt(b++))<<2|(m=o.indexOf(l.charAt(b++)))>>4,d=(15&m)<<4|(y=o.indexOf(l.charAt(b++)))>>2,h=(3&y)<<6|(v=o.indexOf(l.charAt(b++))),S[x++]=u,y!==64&&(S[x++]=d),v!==64&&(S[x++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),s=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,h,m,y,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=m,this.compression=y,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,m){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,d,h,m){var y=s,v=m+h;u^=-1;for(var b=m;b<v;b++)u=u>>>8^y[255&(u^d[b])];return-1^u}(0|l,o,o.length,0):function(u,d,h,m){var y=s,v=m+h;u^=-1;for(var b=m;b<v;b++)u=u>>>8^y[255&(u^d.charCodeAt(b))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(h,m){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(y,v){var b,x="";for(b=0;b<v;b++)x+=String.fromCharCode(255&y),y>>>=8;return x}function s(y,v,b,x,w,S){var E,C,T=y.file,j=y.compression,I=S!==u.utf8encode,R=o.transformTo("string",S(T.name)),F=o.transformTo("string",u.utf8encode(T.name)),B=T.comment,H=o.transformTo("string",S(B)),D=o.transformTo("string",u.utf8encode(B)),Z=F.length!==T.name.length,V=D.length!==B.length,ue="",ae="",ne="",X=T.dir,ie=T.date,L={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(L.crc32=y.crc32,L.compressedSize=y.compressedSize,L.uncompressedSize=y.uncompressedSize);var J=0;v&&(J|=8),I||!Z&&!V||(J|=2048);var Q=0,ee=0;X&&(Q|=16),w==="UNIX"?(ee=798,Q|=function(ve,Oe){var Ae=ve;return ve||(Ae=Oe?16893:33204),(65535&Ae)<<16}(T.unixPermissions,X)):(ee=20,Q|=function(ve){return 63&(ve||0)}(T.dosPermissions)),E=ie.getUTCHours(),E<<=6,E|=ie.getUTCMinutes(),E<<=5,E|=ie.getUTCSeconds()/2,C=ie.getUTCFullYear()-1980,C<<=4,C|=ie.getUTCMonth()+1,C<<=5,C|=ie.getUTCDate(),Z&&(ae=i(1,1)+i(d(R),4)+F,ue+="up"+i(ae.length,2)+ae),V&&(ne=i(1,1)+i(d(H),4)+D,ue+="uc"+i(ne.length,2)+ne);var fe="";return fe+=`
\0`,fe+=i(J,2),fe+=j.magic,fe+=i(E,2),fe+=i(C,2),fe+=i(L.crc32,4),fe+=i(L.compressedSize,4),fe+=i(L.uncompressedSize,4),fe+=i(R.length,2),fe+=i(ue.length,2),{fileRecord:h.LOCAL_FILE_HEADER+fe+R+ue,dirRecord:h.CENTRAL_FILE_HEADER+i(ee,2)+fe+i(H.length,2)+"\0\0\0\0"+i(Q,4)+i(x,4)+R+ue+H}}var o=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),h=n("../signature");function m(y,v,b,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=x,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,l),m.prototype.push=function(y){var v=y.meta.percent||0,b=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-x-1))/b:100}}))},m.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var v=this.streamFiles&&!y.file.dir;if(v){var b=s(y,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(y){this.accumulate=!1;var v=this.streamFiles&&!y.file.dir,b=s(y,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(x){return h.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var y=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-y,x=function(w,S,E,C,T){var j=o.transformTo("string",T(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(w,2)+i(w,2)+i(S,4)+i(E,4)+i(j.length,2)+j}(this.dirRecords.length,b,y,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(y){this._sources.push(y);var v=this;return y.on("data",function(b){v.processChunk(b)}),y.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),y.on("error",function(b){v.error(b)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(y){var v=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var b=0;b<v.length;b++)try{v[b].error(y)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,v=0;v<y.length;v++)y[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),s=n("./ZipFileWorker");a.generateWorker=function(o,l,u){var d=new s(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(m,y){h++;var v=function(S,E){var C=S||E,T=i[C];if(!T)throw new Error(C+" is not a valid compression method !");return T}(y.options.compression,l.compression),b=y.options.compressionOptions||l.compressionOptions||{},x=y.dir,w=y.date;y._compressWorker(v,b).withStreamInfo("file",{name:m,dir:x,date:w,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),s=n("./external"),o=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(m){return new s.Promise(function(y,v){var b=m.decompressed.getContentWorker().pipe(new u);b.on("error",function(x){v(x)}).on("end",function(){b.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(m,y){var v=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,y.optimizedBinaryString,y.base64).then(function(b){var x=new l(y);return x.load(b),x}).then(function(b){var x=[s.Promise.resolve(b)],w=b.files;if(y.checkCRC32)for(var S=0;S<w.length;S++)x.push(h(w[S]));return s.Promise.all(x)}).then(function(b){for(var x=b.shift(),w=x.files,S=0;S<w.length;S++){var E=w[S],C=E.fileNameStr,T=i.resolve(E.fileNameStr);v.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:y.createFolders}),E.dir||(v.file(T).unsafeOriginalName=C)}return x.zipComment.length&&(v.comment=x.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),s=n("../stream/GenericWorker");function o(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,s),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function s(o,l,u){i.call(this,l),this._helper=o;var d=this;o.on("data",function(h,m){d.push(h)||d._helper.pause(),u&&u(m)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Jt<"u",newBufferFrom:function(i,s){if(Jt.from&&Jt.from!==Uint8Array.from)return Jt.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Jt(i,s)},allocBuffer:function(i){if(Jt.alloc)return Jt.alloc(i);var s=new Jt(i);return s.fill(0),s},isBuffer:function(i){return Jt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(T,j,I){var R,F=o.getTypeOf(j),B=o.extend(I||{},d);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(T=w(T)),B.createFolders&&(R=x(T))&&S.call(this,R,!0);var H=F==="string"&&B.binary===!1&&B.base64===!1;I&&I.binary!==void 0||(B.binary=!H),(j instanceof h&&j.uncompressedSize===0||B.dir||!j||j.length===0)&&(B.base64=!1,B.binary=!0,j="",B.compression="STORE",F="string");var D=null;D=j instanceof h||j instanceof l?j:v.isNode&&v.isStream(j)?new b(T,j):o.prepareContent(T,j,B.binary,B.optimizedBinaryString,B.base64);var Z=new m(T,D,B);this.files[T]=Z}var s=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),y=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),x=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var j=T.lastIndexOf("/");return 0<j?T.substring(0,j):""},w=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},S=function(T,j){return j=j!==void 0?j:d.createFolders,T=w(T),this.files[T]||i.call(this,T,null,{dir:!0,createFolders:j}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var j,I,R;for(j in this.files)R=this.files[j],(I=j.slice(this.root.length,j.length))&&j.slice(0,this.root.length)===this.root&&T(I,R)},filter:function(T){var j=[];return this.forEach(function(I,R){T(I,R)&&j.push(R)}),j},file:function(T,j,I){if(arguments.length!==1)return T=this.root+T,i.call(this,T,j,I),this;if(E(T)){var R=T;return this.filter(function(B,H){return!H.dir&&R.test(B)})}var F=this.files[this.root+T];return F&&!F.dir?F:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(F,B){return B.dir&&T.test(F)});var j=this.root+T,I=S.call(this,j),R=this.clone();return R.root=I.name,R},remove:function(T){T=this.root+T;var j=this.files[T];if(j||(T.slice(-1)!=="/"&&(T+="/"),j=this.files[T]),j&&!j.dir)delete this.files[T];else for(var I=this.filter(function(F,B){return B.name.slice(0,T.length)===T}),R=0;R<I.length;R++)delete this.files[I[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var j,I={};try{if((I=o.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");o.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var R=I.comment||this.comment||"";j=y.generateWorker(this,I,R)}catch(F){(j=new l("error")).error(F)}return new u(j,I.type||"string",I.mimeType)},generateAsync:function(T,j){return this.generateInternalStream(T).accumulate(j)},generateNodeStream:function(T,j){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(j)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===u&&this.data[m+2]===d&&this.data[m+3]===h)return m-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.readData(4);return l===m[0]&&u===m[1]&&d===m[2]&&h===m[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),s=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||s.uint8array?m==="nodebuffer"?new u(h):s.uint8array?new d(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),s=n("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),s=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,s),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),s=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,b){return new d.Promise(function(x,w){var S=[],E=v._internalType,C=v._outputType,T=v._mimeType;v.on("data",function(j,I){S.push(j),b&&b(I)}).on("error",function(j){S=[],w(j)}).on("end",function(){try{var j=function(I,R,F){switch(I){case"blob":return i.newBlob(i.transformTo("arraybuffer",R),F);case"base64":return l.encode(R);default:return i.transformTo(I,R)}}(C,function(I,R){var F,B=0,H=null,D=0;for(F=0;F<R.length;F++)D+=R[F].length;switch(I){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(H=new Uint8Array(D),F=0;F<R.length;F++)H.set(R[F],B),B+=R[F].length;return H;case"nodebuffer":return Jt.concat(R);default:throw new Error("concat : unsupported type '"+I+"'")}}(E,S),T);x(j)}catch(I){w(I)}S=[]}).resume()})}function y(v,b,x){var w=b;switch(b){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=b,this._mimeType=x,i.checkSupport(w),this._worker=v.pipe(new s(w)),v.lock()}catch(S){this._worker=new o("error"),this._worker.error(S)}}y.prototype={accumulate:function(v){return m(this,v)},on:function(v,b){var x=this;return v==="data"?this._worker.on(v,function(w){b.call(x,w.data,w.meta)}):this._worker.on(v,function(){i.delay(b,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Jt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),s=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}a.utf8encode=function(y){return s.nodebuffer?o.newBufferFrom(y,"utf-8"):function(v){var b,x,w,S,E,C=v.length,T=0;for(S=0;S<C;S++)(64512&(x=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(w=v.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),S++),T+=x<128?1:x<2048?2:x<65536?3:4;for(b=s.uint8array?new Uint8Array(T):new Array(T),S=E=0;E<T;S++)(64512&(x=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(w=v.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),S++),x<128?b[E++]=x:(x<2048?b[E++]=192|x>>>6:(x<65536?b[E++]=224|x>>>12:(b[E++]=240|x>>>18,b[E++]=128|x>>>12&63),b[E++]=128|x>>>6&63),b[E++]=128|63&x);return b}(y)},a.utf8decode=function(y){return s.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(v){var b,x,w,S,E=v.length,C=new Array(2*E);for(b=x=0;b<E;)if((w=v[b++])<128)C[x++]=w;else if(4<(S=u[w]))C[x++]=65533,b+=S-1;else{for(w&=S===2?31:S===3?15:7;1<S&&b<E;)w=w<<6|63&v[b++],S--;1<S?C[x++]=65533:w<65536?C[x++]=w:(w-=65536,C[x++]=55296|w>>10&1023,C[x++]=56320|1023&w)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)}(y=i.transformTo(s.uint8array?"uint8array":"array",y))},i.inherits(h,l),h.prototype.processChunk=function(y){var v=i.transformTo(s.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var x=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+u[S[C]]>E?C:E}(v),w=v;x!==v.length&&(s.uint8array?(w=v.subarray(0,x),this.leftOver=v.subarray(x,v.length)):(w=v.slice(0,x),this.leftOver=v.slice(x,v.length))),this.push({data:a.utf8decode(w),meta:y.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,l),m.prototype.processChunk=function(y){this.push({data:a.utf8encode(y.data),meta:y.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),s=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function u(b){return b}function d(b,x){for(var w=0;w<b.length;++w)x[w]=255&b.charCodeAt(w);return x}n("setimmediate"),a.newBlob=function(b,x){a.checkSupport("blob");try{return new Blob([b],{type:x})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(b),w.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,x,w){var S=[],E=0,C=b.length;if(C<=w)return String.fromCharCode.apply(null,b);for(;E<C;)x==="array"||x==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+w,C)))):S.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+w,C)))),E+=w;return S.join("")},stringifyByChar:function(b){for(var x="",w=0;w<b.length;w++)x+=String.fromCharCode(b[w]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(b){var x=65536,w=a.getTypeOf(b),S=!0;if(w==="uint8array"?S=h.applyCanBeUsed.uint8array:w==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<x;)try{return h.stringifyByChunk(b,w,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(b)}function y(b,x){for(var w=0;w<b.length;w++)x[w]=b[w];return x}a.applyFromCharCode=m;var v={};v.string={string:u,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,o.allocBuffer(b.length))}},v.array={string:m,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return m(new Uint8Array(b))},array:function(b){return y(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:m,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:m,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:u},a.transformTo=function(b,x){if(x=x||"",!b)return x;a.checkSupport(b);var w=a.getTypeOf(x);return v[w][b](x)},a.resolve=function(b){for(var x=b.split("/"),w=[],S=0;S<x.length;S++){var E=x[S];E==="."||E===""&&S!==0&&S!==x.length-1||(E===".."?w.pop():w.push(E))}return w.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var x,w,S="";for(w=0;w<(b||"").length;w++)S+="\\x"+((x=b.charCodeAt(w))<16?"0":"")+x.toString(16).toUpperCase();return S},a.delay=function(b,x,w){setImmediate(function(){b.apply(w||null,x||[])})},a.inherits=function(b,x){function w(){}w.prototype=x.prototype,b.prototype=new w},a.extend=function(){var b,x,w={};for(b=0;b<arguments.length;b++)for(x in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],x)&&w[x]===void 0&&(w[x]=arguments[b][x]);return w},a.prepareContent=function(b,x,w,S,E){return l.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(T,j){var I=new FileReader;I.onload=function(R){T(R.target.result)},I.onerror=function(R){j(R.target.error)},I.readAsArrayBuffer(C)}):C}).then(function(C){var T=a.getTypeOf(C);return T?(T==="arraybuffer"?C=a.transformTo("uint8array",C):T==="string"&&(E?C=s.decode(C):w&&S!==!0&&(C=function(j){return d(j,i.uint8array?new Uint8Array(j.length):new Array(j.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(m)+", expected "+s.pretty(h)+")")}},isSignature:function(h,m){var y=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===m;return this.reader.setIndex(y),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",y=s.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,y,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),m=this.reader.readInt(4),y=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var v=m-y;if(0<v)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),h=n("./support");function m(y,v){this.options=y,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var v,b;if(y.skip(22),this.fileNameLength=y.readInt(2),b=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(x){for(var w in d)if(Object.prototype.hasOwnProperty.call(d,w)&&d[w].magic===x)return d[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var v=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(v),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var v,b,x,w=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<w;)v=y.readInt(2),b=y.readInt(2),x=y.readData(b),this.extraFields[v]={id:v,length:b,value:x};y.setIndex(w)},handleUTF8:function(){var y=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=s.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var w=s.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var v=i(y.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var v=i(y.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(y.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,x){this.name=v,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=b,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,x="string";try{if(!v)throw new Error("No output type specified.");var w=(x=v.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!w&&(b=b.pipe(new l.Utf8EncodeWorker)),!S&&w&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new s(b,x,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(x,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<h.length;y++)i.prototype[h[y]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var s,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,s=function(){m.port2.postMessage(0)}}var y=[];function v(){var b,x;o=!0;for(var w=y.length;w;){for(x=y,y=[],b=-1;++b<w;)x[b]();w=y.length}o=!1}r.exports=function(b){y.push(b)!==1||o||s()}}).call(this,typeof kd<"u"?kd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function s(){}var o={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,w!==s&&b(this,w)}function m(w,S,E){this.promise=w,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function y(w,S,E){i(function(){var C;try{C=S(E)}catch(T){return o.reject(w,T)}C===w?o.reject(w,new TypeError("Cannot resolve promise with itself")):o.resolve(w,C)})}function v(w){var S=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof S=="function")return function(){S.apply(w,arguments)}}function b(w,S){var E=!1;function C(I){E||(E=!0,o.reject(w,I))}function T(I){E||(E=!0,o.resolve(w,I))}var j=x(function(){S(T,C)});j.status==="error"&&C(j.value)}function x(w,S){var E={};try{E.value=w(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(w){if(typeof w!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(w()).then(function(){return E})},function(E){return S.resolve(w()).then(function(){throw E})})},h.prototype.catch=function(w){return this.then(null,w)},h.prototype.then=function(w,S){if(typeof w!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var E=new this.constructor(s);return this.state!==d?y(E,this.state===u?w:S,this.outcome):this.queue.push(new m(E,w,S)),E},m.prototype.callFulfilled=function(w){o.resolve(this.promise,w)},m.prototype.otherCallFulfilled=function(w){y(this.promise,this.onFulfilled,w)},m.prototype.callRejected=function(w){o.reject(this.promise,w)},m.prototype.otherCallRejected=function(w){y(this.promise,this.onRejected,w)},o.resolve=function(w,S){var E=x(v,S);if(E.status==="error")return o.reject(w,E.value);var C=E.value;if(C)b(w,C);else{w.state=u,w.outcome=S;for(var T=-1,j=w.queue.length;++T<j;)w.queue[T].callFulfilled(S)}return w},o.reject=function(w,S){w.state=l,w.outcome=S;for(var E=-1,C=w.queue.length;++E<C;)w.queue[E].callRejected(S);return w},h.resolve=function(w){return w instanceof this?w:o.resolve(new this(s),w)},h.reject=function(w){var S=new this(s);return o.reject(S,w)},h.all=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,C=!1;if(!E)return this.resolve([]);for(var T=new Array(E),j=0,I=-1,R=new this(s);++I<E;)F(w[I],I);return R;function F(B,H){S.resolve(B).then(function(D){T[H]=D,++j!==E||C||(C=!0,o.resolve(R,T))},function(D){C||(C=!0,o.reject(R,D))})}},h.race=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,C=!1;if(!E)return this.resolve([]);for(var T=-1,j=new this(s);++T<E;)I=w[T],S.resolve(I).then(function(R){C||(C=!0,o.resolve(j,R))},function(R){C||(C=!0,o.reject(j,R))});var I;return j}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,h=0,m=-1,y=0,v=8;function b(w){if(!(this instanceof b))return new b(w);this.options=s.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},w||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(l[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?o.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[E]);this._dict_set=!0}}function x(w,S){var E=new b(S);if(E.push(w,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(w,S){var E,C,T=this.strm,j=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof w=="string"?T.input=o.string2buf(w):d.call(w)==="[object ArrayBuffer]"?T.input=new Uint8Array(w):T.input=w,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new s.Buf8(j),T.next_out=0,T.avail_out=j),(E=i.deflate(T,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(T.output,T.next_out))):this.onData(s.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(T.avail_out=0))},b.prototype.onData=function(w){this.chunks.push(w)},b.prototype.onEnd=function(w){w===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Deflate=b,a.deflate=x,a.deflateRaw=function(w,S){return(S=S||{}).raw=!0,x(w,S)},a.gzip=function(w,S){return(S=S||{}).gzip=!0,x(w,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function y(b){if(!(this instanceof y))return new y(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||b&&b.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var w=i.inflateInit2(this.strm,x.windowBits);if(w!==l.Z_OK)throw new Error(u[w]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,x){var w=new y(x);if(w.push(b,!0),w.err)throw w.msg||u[w.err];return w.result}y.prototype.push=function(b,x){var w,S,E,C,T,j,I=this.strm,R=this.options.chunkSize,F=this.options.dictionary,B=!1;if(this.ended)return!1;S=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?I.input=o.binstring2buf(b):m.call(b)==="[object ArrayBuffer]"?I.input=new Uint8Array(b):I.input=b,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(R),I.next_out=0,I.avail_out=R),(w=i.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&F&&(j=typeof F=="string"?o.string2buf(F):m.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,w=i.inflateSetDictionary(this.strm,j)),w===l.Z_BUF_ERROR&&B===!0&&(w=l.Z_OK,B=!1),w!==l.Z_STREAM_END&&w!==l.Z_OK)return this.onEnd(w),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&w!==l.Z_STREAM_END&&(I.avail_in!==0||S!==l.Z_FINISH&&S!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(I.output,I.next_out),C=I.next_out-E,T=o.buf2string(I.output,E),I.next_out=C,I.avail_out=R-C,C&&s.arraySet(I.output,I.output,E,C,0),this.onData(T)):this.onData(s.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(B=!0)}while((0<I.avail_in||I.avail_out===0)&&w!==l.Z_STREAM_END);return w===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(w=i.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l.Z_OK):S!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=y,a.inflate=v,a.inflateRaw=function(b,x){return(x=x||{}).raw=!0,v(b,x)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,d,h,m){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),m);else for(var y=0;y<h;y++)l[m+y]=u[d+y]},flattenChunks:function(l){var u,d,h,m,y,v;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(v=new Uint8Array(h),u=m=0,d=l.length;u<d;u++)y=l[u],v.set(y,m),m+=y.length;return v}},o={arraySet:function(l,u,d,h,m){for(var y=0;y<h;y++)l[m+y]=u[d+y]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,m){if(m<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var y="",v=0;v<m;v++)y+=String.fromCharCode(h[v]);return y}l[254]=l[254]=1,a.string2buf=function(h){var m,y,v,b,x,w=h.length,S=0;for(b=0;b<w;b++)(64512&(y=h.charCodeAt(b)))==55296&&b+1<w&&(64512&(v=h.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),b++),S+=y<128?1:y<2048?2:y<65536?3:4;for(m=new i.Buf8(S),b=x=0;x<S;b++)(64512&(y=h.charCodeAt(b)))==55296&&b+1<w&&(64512&(v=h.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),b++),y<128?m[x++]=y:(y<2048?m[x++]=192|y>>>6:(y<65536?m[x++]=224|y>>>12:(m[x++]=240|y>>>18,m[x++]=128|y>>>12&63),m[x++]=128|y>>>6&63),m[x++]=128|63&y);return m},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),y=0,v=m.length;y<v;y++)m[y]=h.charCodeAt(y);return m},a.buf2string=function(h,m){var y,v,b,x,w=m||h.length,S=new Array(2*w);for(y=v=0;y<w;)if((b=h[y++])<128)S[v++]=b;else if(4<(x=l[b]))S[v++]=65533,y+=x-1;else{for(b&=x===2?31:x===3?15:7;1<x&&y<w;)b=b<<6|63&h[y++],x--;1<x?S[v++]=65533:b<65536?S[v++]=b:(b-=65536,S[v++]=55296|b>>10&1023,S[v++]=56320|1023&b)}return d(S,v)},a.utf8border=function(h,m){var y;for((m=m||h.length)>h.length&&(m=h.length),y=m-1;0<=y&&(192&h[y])==128;)y--;return y<0||y===0?m:y+l[h[y]]>m?y:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,s,o,l){for(var u=65535&i|0,d=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(u=u+s[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();r.exports=function(s,o,l,u){var d=i,h=u+l;s^=-1;for(var m=u;m<h;m++)s=s>>>8^d[255&(s^o[m])];return-1^s}},{}],46:[function(n,r,a){var i,s=n("../utils/common"),o=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),h=0,m=4,y=0,v=-2,b=-1,x=4,w=2,S=8,E=9,C=286,T=30,j=19,I=2*C+1,R=15,F=3,B=258,H=B+F+1,D=42,Z=113,V=1,ue=2,ae=3,ne=4;function X(z,Se){return z.msg=d[Se],Se}function ie(z){return(z<<1)-(4<z?9:0)}function L(z){for(var Se=z.length;0<=--Se;)z[Se]=0}function J(z){var Se=z.state,Te=Se.pending;Te>z.avail_out&&(Te=z.avail_out),Te!==0&&(s.arraySet(z.output,Se.pending_buf,Se.pending_out,Te,z.next_out),z.next_out+=Te,Se.pending_out+=Te,z.total_out+=Te,z.avail_out-=Te,Se.pending-=Te,Se.pending===0&&(Se.pending_out=0))}function Q(z,Se){o._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,Se),z.block_start=z.strstart,J(z.strm)}function ee(z,Se){z.pending_buf[z.pending++]=Se}function fe(z,Se){z.pending_buf[z.pending++]=Se>>>8&255,z.pending_buf[z.pending++]=255&Se}function ve(z,Se){var Te,de,se=z.max_chain_length,te=z.strstart,xe=z.prev_length,Fe=z.nice_match,Ee=z.strstart>z.w_size-H?z.strstart-(z.w_size-H):0,Ge=z.window,Nt=z.w_mask,it=z.prev,St=z.strstart+B,Ft=Ge[te+xe-1],Dt=Ge[te+xe];z.prev_length>=z.good_match&&(se>>=2),Fe>z.lookahead&&(Fe=z.lookahead);do if(Ge[(Te=Se)+xe]===Dt&&Ge[Te+xe-1]===Ft&&Ge[Te]===Ge[te]&&Ge[++Te]===Ge[te+1]){te+=2,Te++;do;while(Ge[++te]===Ge[++Te]&&Ge[++te]===Ge[++Te]&&Ge[++te]===Ge[++Te]&&Ge[++te]===Ge[++Te]&&Ge[++te]===Ge[++Te]&&Ge[++te]===Ge[++Te]&&Ge[++te]===Ge[++Te]&&Ge[++te]===Ge[++Te]&&te<St);if(de=B-(St-te),te=St-B,xe<de){if(z.match_start=Se,Fe<=(xe=de))break;Ft=Ge[te+xe-1],Dt=Ge[te+xe]}}while((Se=it[Se&Nt])>Ee&&--se!=0);return xe<=z.lookahead?xe:z.lookahead}function Oe(z){var Se,Te,de,se,te,xe,Fe,Ee,Ge,Nt,it=z.w_size;do{if(se=z.window_size-z.lookahead-z.strstart,z.strstart>=it+(it-H)){for(s.arraySet(z.window,z.window,it,it,0),z.match_start-=it,z.strstart-=it,z.block_start-=it,Se=Te=z.hash_size;de=z.head[--Se],z.head[Se]=it<=de?de-it:0,--Te;);for(Se=Te=it;de=z.prev[--Se],z.prev[Se]=it<=de?de-it:0,--Te;);se+=it}if(z.strm.avail_in===0)break;if(xe=z.strm,Fe=z.window,Ee=z.strstart+z.lookahead,Ge=se,Nt=void 0,Nt=xe.avail_in,Ge<Nt&&(Nt=Ge),Te=Nt===0?0:(xe.avail_in-=Nt,s.arraySet(Fe,xe.input,xe.next_in,Nt,Ee),xe.state.wrap===1?xe.adler=l(xe.adler,Fe,Nt,Ee):xe.state.wrap===2&&(xe.adler=u(xe.adler,Fe,Nt,Ee)),xe.next_in+=Nt,xe.total_in+=Nt,Nt),z.lookahead+=Te,z.lookahead+z.insert>=F)for(te=z.strstart-z.insert,z.ins_h=z.window[te],z.ins_h=(z.ins_h<<z.hash_shift^z.window[te+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[te+F-1])&z.hash_mask,z.prev[te&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=te,te++,z.insert--,!(z.lookahead+z.insert<F)););}while(z.lookahead<H&&z.strm.avail_in!==0)}function Ae(z,Se){for(var Te,de;;){if(z.lookahead<H){if(Oe(z),z.lookahead<H&&Se===h)return V;if(z.lookahead===0)break}if(Te=0,z.lookahead>=F&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+F-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Te!==0&&z.strstart-Te<=z.w_size-H&&(z.match_length=ve(z,Te)),z.match_length>=F)if(de=o._tr_tally(z,z.strstart-z.match_start,z.match_length-F),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=F){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+F-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else de=o._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(de&&(Q(z,!1),z.strm.avail_out===0))return V}return z.insert=z.strstart<F-1?z.strstart:F-1,Se===m?(Q(z,!0),z.strm.avail_out===0?ae:ne):z.last_lit&&(Q(z,!1),z.strm.avail_out===0)?V:ue}function Ne(z,Se){for(var Te,de,se;;){if(z.lookahead<H){if(Oe(z),z.lookahead<H&&Se===h)return V;if(z.lookahead===0)break}if(Te=0,z.lookahead>=F&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+F-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=F-1,Te!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Te<=z.w_size-H&&(z.match_length=ve(z,Te),z.match_length<=5&&(z.strategy===1||z.match_length===F&&4096<z.strstart-z.match_start)&&(z.match_length=F-1)),z.prev_length>=F&&z.match_length<=z.prev_length){for(se=z.strstart+z.lookahead-F,de=o._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-F),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=se&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+F-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=F-1,z.strstart++,de&&(Q(z,!1),z.strm.avail_out===0))return V}else if(z.match_available){if((de=o._tr_tally(z,0,z.window[z.strstart-1]))&&Q(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return V}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(de=o._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<F-1?z.strstart:F-1,Se===m?(Q(z,!0),z.strm.avail_out===0?ae:ne):z.last_lit&&(Q(z,!1),z.strm.avail_out===0)?V:ue}function Ce(z,Se,Te,de,se){this.good_length=z,this.max_lazy=Se,this.nice_length=Te,this.max_chain=de,this.func=se}function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*I),this.dyn_dtree=new s.Buf16(2*(2*T+1)),this.bl_tree=new s.Buf16(2*(2*j+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(R+1),this.heap=new s.Buf16(2*C+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(z){var Se;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=w,(Se=z.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?D:Z,z.adler=Se.wrap===2?0:1,Se.last_flush=h,o._tr_init(Se),y):X(z,v)}function Le(z){var Se=Qe(z);return Se===y&&function(Te){Te.window_size=2*Te.w_size,L(Te.head),Te.max_lazy_match=i[Te.level].max_lazy,Te.good_match=i[Te.level].good_length,Te.nice_match=i[Te.level].nice_length,Te.max_chain_length=i[Te.level].max_chain,Te.strstart=0,Te.block_start=0,Te.lookahead=0,Te.insert=0,Te.match_length=Te.prev_length=F-1,Te.match_available=0,Te.ins_h=0}(z.state),Se}function Ie(z,Se,Te,de,se,te){if(!z)return v;var xe=1;if(Se===b&&(Se=6),de<0?(xe=0,de=-de):15<de&&(xe=2,de-=16),se<1||E<se||Te!==S||de<8||15<de||Se<0||9<Se||te<0||x<te)return X(z,v);de===8&&(de=9);var Fe=new Pe;return(z.state=Fe).strm=z,Fe.wrap=xe,Fe.gzhead=null,Fe.w_bits=de,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=se+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+F-1)/F),Fe.window=new s.Buf8(2*Fe.w_size),Fe.head=new s.Buf16(Fe.hash_size),Fe.prev=new s.Buf16(Fe.w_size),Fe.lit_bufsize=1<<se+6,Fe.pending_buf_size=4*Fe.lit_bufsize,Fe.pending_buf=new s.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=Se,Fe.strategy=te,Fe.method=Te,Le(z)}i=[new Ce(0,0,0,0,function(z,Se){var Te=65535;for(Te>z.pending_buf_size-5&&(Te=z.pending_buf_size-5);;){if(z.lookahead<=1){if(Oe(z),z.lookahead===0&&Se===h)return V;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var de=z.block_start+Te;if((z.strstart===0||z.strstart>=de)&&(z.lookahead=z.strstart-de,z.strstart=de,Q(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-H&&(Q(z,!1),z.strm.avail_out===0))return V}return z.insert=0,Se===m?(Q(z,!0),z.strm.avail_out===0?ae:ne):(z.strstart>z.block_start&&(Q(z,!1),z.strm.avail_out),V)}),new Ce(4,4,8,4,Ae),new Ce(4,5,16,8,Ae),new Ce(4,6,32,32,Ae),new Ce(4,4,16,16,Ne),new Ce(8,16,32,32,Ne),new Ce(8,16,128,128,Ne),new Ce(8,32,128,256,Ne),new Ce(32,128,258,1024,Ne),new Ce(32,258,258,4096,Ne)],a.deflateInit=function(z,Se){return Ie(z,Se,S,15,8,0)},a.deflateInit2=Ie,a.deflateReset=Le,a.deflateResetKeep=Qe,a.deflateSetHeader=function(z,Se){return z&&z.state?z.state.wrap!==2?v:(z.state.gzhead=Se,y):v},a.deflate=function(z,Se){var Te,de,se,te;if(!z||!z.state||5<Se||Se<0)return z?X(z,v):v;if(de=z.state,!z.output||!z.input&&z.avail_in!==0||de.status===666&&Se!==m)return X(z,z.avail_out===0?-5:v);if(de.strm=z,Te=de.last_flush,de.last_flush=Se,de.status===D)if(de.wrap===2)z.adler=0,ee(de,31),ee(de,139),ee(de,8),de.gzhead?(ee(de,(de.gzhead.text?1:0)+(de.gzhead.hcrc?2:0)+(de.gzhead.extra?4:0)+(de.gzhead.name?8:0)+(de.gzhead.comment?16:0)),ee(de,255&de.gzhead.time),ee(de,de.gzhead.time>>8&255),ee(de,de.gzhead.time>>16&255),ee(de,de.gzhead.time>>24&255),ee(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),ee(de,255&de.gzhead.os),de.gzhead.extra&&de.gzhead.extra.length&&(ee(de,255&de.gzhead.extra.length),ee(de,de.gzhead.extra.length>>8&255)),de.gzhead.hcrc&&(z.adler=u(z.adler,de.pending_buf,de.pending,0)),de.gzindex=0,de.status=69):(ee(de,0),ee(de,0),ee(de,0),ee(de,0),ee(de,0),ee(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),ee(de,3),de.status=Z);else{var xe=S+(de.w_bits-8<<4)<<8;xe|=(2<=de.strategy||de.level<2?0:de.level<6?1:de.level===6?2:3)<<6,de.strstart!==0&&(xe|=32),xe+=31-xe%31,de.status=Z,fe(de,xe),de.strstart!==0&&(fe(de,z.adler>>>16),fe(de,65535&z.adler)),z.adler=1}if(de.status===69)if(de.gzhead.extra){for(se=de.pending;de.gzindex<(65535&de.gzhead.extra.length)&&(de.pending!==de.pending_buf_size||(de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),J(z),se=de.pending,de.pending!==de.pending_buf_size));)ee(de,255&de.gzhead.extra[de.gzindex]),de.gzindex++;de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),de.gzindex===de.gzhead.extra.length&&(de.gzindex=0,de.status=73)}else de.status=73;if(de.status===73)if(de.gzhead.name){se=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),J(z),se=de.pending,de.pending===de.pending_buf_size)){te=1;break}te=de.gzindex<de.gzhead.name.length?255&de.gzhead.name.charCodeAt(de.gzindex++):0,ee(de,te)}while(te!==0);de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),te===0&&(de.gzindex=0,de.status=91)}else de.status=91;if(de.status===91)if(de.gzhead.comment){se=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),J(z),se=de.pending,de.pending===de.pending_buf_size)){te=1;break}te=de.gzindex<de.gzhead.comment.length?255&de.gzhead.comment.charCodeAt(de.gzindex++):0,ee(de,te)}while(te!==0);de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),te===0&&(de.status=103)}else de.status=103;if(de.status===103&&(de.gzhead.hcrc?(de.pending+2>de.pending_buf_size&&J(z),de.pending+2<=de.pending_buf_size&&(ee(de,255&z.adler),ee(de,z.adler>>8&255),z.adler=0,de.status=Z)):de.status=Z),de.pending!==0){if(J(z),z.avail_out===0)return de.last_flush=-1,y}else if(z.avail_in===0&&ie(Se)<=ie(Te)&&Se!==m)return X(z,-5);if(de.status===666&&z.avail_in!==0)return X(z,-5);if(z.avail_in!==0||de.lookahead!==0||Se!==h&&de.status!==666){var Fe=de.strategy===2?function(Ee,Ge){for(var Nt;;){if(Ee.lookahead===0&&(Oe(Ee),Ee.lookahead===0)){if(Ge===h)return V;break}if(Ee.match_length=0,Nt=o._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++,Nt&&(Q(Ee,!1),Ee.strm.avail_out===0))return V}return Ee.insert=0,Ge===m?(Q(Ee,!0),Ee.strm.avail_out===0?ae:ne):Ee.last_lit&&(Q(Ee,!1),Ee.strm.avail_out===0)?V:ue}(de,Se):de.strategy===3?function(Ee,Ge){for(var Nt,it,St,Ft,Dt=Ee.window;;){if(Ee.lookahead<=B){if(Oe(Ee),Ee.lookahead<=B&&Ge===h)return V;if(Ee.lookahead===0)break}if(Ee.match_length=0,Ee.lookahead>=F&&0<Ee.strstart&&(it=Dt[St=Ee.strstart-1])===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]){Ft=Ee.strstart+B;do;while(it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&St<Ft);Ee.match_length=B-(Ft-St),Ee.match_length>Ee.lookahead&&(Ee.match_length=Ee.lookahead)}if(Ee.match_length>=F?(Nt=o._tr_tally(Ee,1,Ee.match_length-F),Ee.lookahead-=Ee.match_length,Ee.strstart+=Ee.match_length,Ee.match_length=0):(Nt=o._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++),Nt&&(Q(Ee,!1),Ee.strm.avail_out===0))return V}return Ee.insert=0,Ge===m?(Q(Ee,!0),Ee.strm.avail_out===0?ae:ne):Ee.last_lit&&(Q(Ee,!1),Ee.strm.avail_out===0)?V:ue}(de,Se):i[de.level].func(de,Se);if(Fe!==ae&&Fe!==ne||(de.status=666),Fe===V||Fe===ae)return z.avail_out===0&&(de.last_flush=-1),y;if(Fe===ue&&(Se===1?o._tr_align(de):Se!==5&&(o._tr_stored_block(de,0,0,!1),Se===3&&(L(de.head),de.lookahead===0&&(de.strstart=0,de.block_start=0,de.insert=0))),J(z),z.avail_out===0))return de.last_flush=-1,y}return Se!==m?y:de.wrap<=0?1:(de.wrap===2?(ee(de,255&z.adler),ee(de,z.adler>>8&255),ee(de,z.adler>>16&255),ee(de,z.adler>>24&255),ee(de,255&z.total_in),ee(de,z.total_in>>8&255),ee(de,z.total_in>>16&255),ee(de,z.total_in>>24&255)):(fe(de,z.adler>>>16),fe(de,65535&z.adler)),J(z),0<de.wrap&&(de.wrap=-de.wrap),de.pending!==0?y:1)},a.deflateEnd=function(z){var Se;return z&&z.state?(Se=z.state.status)!==D&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==Z&&Se!==666?X(z,v):(z.state=null,Se===Z?X(z,-3):y):v},a.deflateSetDictionary=function(z,Se){var Te,de,se,te,xe,Fe,Ee,Ge,Nt=Se.length;if(!z||!z.state||(te=(Te=z.state).wrap)===2||te===1&&Te.status!==D||Te.lookahead)return v;for(te===1&&(z.adler=l(z.adler,Se,Nt,0)),Te.wrap=0,Nt>=Te.w_size&&(te===0&&(L(Te.head),Te.strstart=0,Te.block_start=0,Te.insert=0),Ge=new s.Buf8(Te.w_size),s.arraySet(Ge,Se,Nt-Te.w_size,Te.w_size,0),Se=Ge,Nt=Te.w_size),xe=z.avail_in,Fe=z.next_in,Ee=z.input,z.avail_in=Nt,z.next_in=0,z.input=Se,Oe(Te);Te.lookahead>=F;){for(de=Te.strstart,se=Te.lookahead-(F-1);Te.ins_h=(Te.ins_h<<Te.hash_shift^Te.window[de+F-1])&Te.hash_mask,Te.prev[de&Te.w_mask]=Te.head[Te.ins_h],Te.head[Te.ins_h]=de,de++,--se;);Te.strstart=de,Te.lookahead=F-1,Oe(Te)}return Te.strstart+=Te.lookahead,Te.block_start=Te.strstart,Te.insert=Te.lookahead,Te.lookahead=0,Te.match_length=Te.prev_length=F-1,Te.match_available=0,z.next_in=Fe,z.input=Ee,z.avail_in=xe,Te.wrap=te,y},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,s){var o,l,u,d,h,m,y,v,b,x,w,S,E,C,T,j,I,R,F,B,H,D,Z,V,ue;o=i.state,l=i.next_in,V=i.input,u=l+(i.avail_in-5),d=i.next_out,ue=i.output,h=d-(s-i.avail_out),m=d+(i.avail_out-257),y=o.dmax,v=o.wsize,b=o.whave,x=o.wnext,w=o.window,S=o.hold,E=o.bits,C=o.lencode,T=o.distcode,j=(1<<o.lenbits)-1,I=(1<<o.distbits)-1;e:do{E<15&&(S+=V[l++]<<E,E+=8,S+=V[l++]<<E,E+=8),R=C[S&j];t:for(;;){if(S>>>=F=R>>>24,E-=F,(F=R>>>16&255)===0)ue[d++]=65535&R;else{if(!(16&F)){if((64&F)==0){R=C[(65535&R)+(S&(1<<F)-1)];continue t}if(32&F){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}B=65535&R,(F&=15)&&(E<F&&(S+=V[l++]<<E,E+=8),B+=S&(1<<F)-1,S>>>=F,E-=F),E<15&&(S+=V[l++]<<E,E+=8,S+=V[l++]<<E,E+=8),R=T[S&I];n:for(;;){if(S>>>=F=R>>>24,E-=F,!(16&(F=R>>>16&255))){if((64&F)==0){R=T[(65535&R)+(S&(1<<F)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(H=65535&R,E<(F&=15)&&(S+=V[l++]<<E,(E+=8)<F&&(S+=V[l++]<<E,E+=8)),y<(H+=S&(1<<F)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(S>>>=F,E-=F,(F=d-h)<H){if(b<(F=H-F)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(Z=w,(D=0)===x){if(D+=v-F,F<B){for(B-=F;ue[d++]=w[D++],--F;);D=d-H,Z=ue}}else if(x<F){if(D+=v+x-F,(F-=x)<B){for(B-=F;ue[d++]=w[D++],--F;);if(D=0,x<B){for(B-=F=x;ue[d++]=w[D++],--F;);D=d-H,Z=ue}}}else if(D+=x-F,F<B){for(B-=F;ue[d++]=w[D++],--F;);D=d-H,Z=ue}for(;2<B;)ue[d++]=Z[D++],ue[d++]=Z[D++],ue[d++]=Z[D++],B-=3;B&&(ue[d++]=Z[D++],1<B&&(ue[d++]=Z[D++]))}else{for(D=d-H;ue[d++]=ue[D++],ue[d++]=ue[D++],ue[d++]=ue[D++],2<(B-=3););B&&(ue[d++]=ue[D++],1<B&&(ue[d++]=ue[D++]))}break}}break}}while(l<u&&d<m);l-=B=E>>3,S&=(1<<(E-=B<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=d<m?m-d+257:257-(d-m),o.hold=S,o.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),s=n("./adler32"),o=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,h=2,m=0,y=-2,v=1,b=852,x=592;function w(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(D){var Z;return D&&D.state?(Z=D.state,D.total_in=D.total_out=Z.total=0,D.msg="",Z.wrap&&(D.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(b),Z.distcode=Z.distdyn=new i.Buf32(x),Z.sane=1,Z.back=-1,m):y}function C(D){var Z;return D&&D.state?((Z=D.state).wsize=0,Z.whave=0,Z.wnext=0,E(D)):y}function T(D,Z){var V,ue;return D&&D.state?(ue=D.state,Z<0?(V=0,Z=-Z):(V=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?y:(ue.window!==null&&ue.wbits!==Z&&(ue.window=null),ue.wrap=V,ue.wbits=Z,C(D))):y}function j(D,Z){var V,ue;return D?(ue=new S,(D.state=ue).window=null,(V=T(D,Z))!==m&&(D.state=null),V):y}var I,R,F=!0;function B(D){if(F){var Z;for(I=new i.Buf32(512),R=new i.Buf32(32),Z=0;Z<144;)D.lens[Z++]=8;for(;Z<256;)D.lens[Z++]=9;for(;Z<280;)D.lens[Z++]=7;for(;Z<288;)D.lens[Z++]=8;for(u(d,D.lens,0,288,I,0,D.work,{bits:9}),Z=0;Z<32;)D.lens[Z++]=5;u(h,D.lens,0,32,R,0,D.work,{bits:5}),F=!1}D.lencode=I,D.lenbits=9,D.distcode=R,D.distbits=5}function H(D,Z,V,ue){var ae,ne=D.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),ue>=ne.wsize?(i.arraySet(ne.window,Z,V-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(ue<(ae=ne.wsize-ne.wnext)&&(ae=ue),i.arraySet(ne.window,Z,V-ue,ae,ne.wnext),(ue-=ae)?(i.arraySet(ne.window,Z,V-ue,ue,0),ne.wnext=ue,ne.whave=ne.wsize):(ne.wnext+=ae,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=ae))),0}a.inflateReset=C,a.inflateReset2=T,a.inflateResetKeep=E,a.inflateInit=function(D){return j(D,15)},a.inflateInit2=j,a.inflate=function(D,Z){var V,ue,ae,ne,X,ie,L,J,Q,ee,fe,ve,Oe,Ae,Ne,Ce,Pe,Qe,Le,Ie,z,Se,Te,de,se=0,te=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return y;(V=D.state).mode===12&&(V.mode=13),X=D.next_out,ae=D.output,L=D.avail_out,ne=D.next_in,ue=D.input,ie=D.avail_in,J=V.hold,Q=V.bits,ee=ie,fe=L,Se=m;e:for(;;)switch(V.mode){case v:if(V.wrap===0){V.mode=13;break}for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if(2&V.wrap&&J===35615){te[V.check=0]=255&J,te[1]=J>>>8&255,V.check=o(V.check,te,2,0),Q=J=0,V.mode=2;break}if(V.flags=0,V.head&&(V.head.done=!1),!(1&V.wrap)||(((255&J)<<8)+(J>>8))%31){D.msg="incorrect header check",V.mode=30;break}if((15&J)!=8){D.msg="unknown compression method",V.mode=30;break}if(Q-=4,z=8+(15&(J>>>=4)),V.wbits===0)V.wbits=z;else if(z>V.wbits){D.msg="invalid window size",V.mode=30;break}V.dmax=1<<z,D.adler=V.check=1,V.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if(V.flags=J,(255&V.flags)!=8){D.msg="unknown compression method",V.mode=30;break}if(57344&V.flags){D.msg="unknown header flags set",V.mode=30;break}V.head&&(V.head.text=J>>8&1),512&V.flags&&(te[0]=255&J,te[1]=J>>>8&255,V.check=o(V.check,te,2,0)),Q=J=0,V.mode=3;case 3:for(;Q<32;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}V.head&&(V.head.time=J),512&V.flags&&(te[0]=255&J,te[1]=J>>>8&255,te[2]=J>>>16&255,te[3]=J>>>24&255,V.check=o(V.check,te,4,0)),Q=J=0,V.mode=4;case 4:for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}V.head&&(V.head.xflags=255&J,V.head.os=J>>8),512&V.flags&&(te[0]=255&J,te[1]=J>>>8&255,V.check=o(V.check,te,2,0)),Q=J=0,V.mode=5;case 5:if(1024&V.flags){for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}V.length=J,V.head&&(V.head.extra_len=J),512&V.flags&&(te[0]=255&J,te[1]=J>>>8&255,V.check=o(V.check,te,2,0)),Q=J=0}else V.head&&(V.head.extra=null);V.mode=6;case 6:if(1024&V.flags&&(ie<(ve=V.length)&&(ve=ie),ve&&(V.head&&(z=V.head.extra_len-V.length,V.head.extra||(V.head.extra=new Array(V.head.extra_len)),i.arraySet(V.head.extra,ue,ne,ve,z)),512&V.flags&&(V.check=o(V.check,ue,ve,ne)),ie-=ve,ne+=ve,V.length-=ve),V.length))break e;V.length=0,V.mode=7;case 7:if(2048&V.flags){if(ie===0)break e;for(ve=0;z=ue[ne+ve++],V.head&&z&&V.length<65536&&(V.head.name+=String.fromCharCode(z)),z&&ve<ie;);if(512&V.flags&&(V.check=o(V.check,ue,ve,ne)),ie-=ve,ne+=ve,z)break e}else V.head&&(V.head.name=null);V.length=0,V.mode=8;case 8:if(4096&V.flags){if(ie===0)break e;for(ve=0;z=ue[ne+ve++],V.head&&z&&V.length<65536&&(V.head.comment+=String.fromCharCode(z)),z&&ve<ie;);if(512&V.flags&&(V.check=o(V.check,ue,ve,ne)),ie-=ve,ne+=ve,z)break e}else V.head&&(V.head.comment=null);V.mode=9;case 9:if(512&V.flags){for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if(J!==(65535&V.check)){D.msg="header crc mismatch",V.mode=30;break}Q=J=0}V.head&&(V.head.hcrc=V.flags>>9&1,V.head.done=!0),D.adler=V.check=0,V.mode=12;break;case 10:for(;Q<32;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}D.adler=V.check=w(J),Q=J=0,V.mode=11;case 11:if(V.havedict===0)return D.next_out=X,D.avail_out=L,D.next_in=ne,D.avail_in=ie,V.hold=J,V.bits=Q,2;D.adler=V.check=1,V.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(V.last){J>>>=7&Q,Q-=7&Q,V.mode=27;break}for(;Q<3;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}switch(V.last=1&J,Q-=1,3&(J>>>=1)){case 0:V.mode=14;break;case 1:if(B(V),V.mode=20,Z!==6)break;J>>>=2,Q-=2;break e;case 2:V.mode=17;break;case 3:D.msg="invalid block type",V.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){D.msg="invalid stored block lengths",V.mode=30;break}if(V.length=65535&J,Q=J=0,V.mode=15,Z===6)break e;case 15:V.mode=16;case 16:if(ve=V.length){if(ie<ve&&(ve=ie),L<ve&&(ve=L),ve===0)break e;i.arraySet(ae,ue,ne,ve,X),ie-=ve,ne+=ve,L-=ve,X+=ve,V.length-=ve;break}V.mode=12;break;case 17:for(;Q<14;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if(V.nlen=257+(31&J),J>>>=5,Q-=5,V.ndist=1+(31&J),J>>>=5,Q-=5,V.ncode=4+(15&J),J>>>=4,Q-=4,286<V.nlen||30<V.ndist){D.msg="too many length or distance symbols",V.mode=30;break}V.have=0,V.mode=18;case 18:for(;V.have<V.ncode;){for(;Q<3;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}V.lens[xe[V.have++]]=7&J,J>>>=3,Q-=3}for(;V.have<19;)V.lens[xe[V.have++]]=0;if(V.lencode=V.lendyn,V.lenbits=7,Te={bits:V.lenbits},Se=u(0,V.lens,0,19,V.lencode,0,V.work,Te),V.lenbits=Te.bits,Se){D.msg="invalid code lengths set",V.mode=30;break}V.have=0,V.mode=19;case 19:for(;V.have<V.nlen+V.ndist;){for(;Ce=(se=V.lencode[J&(1<<V.lenbits)-1])>>>16&255,Pe=65535&se,!((Ne=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if(Pe<16)J>>>=Ne,Q-=Ne,V.lens[V.have++]=Pe;else{if(Pe===16){for(de=Ne+2;Q<de;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if(J>>>=Ne,Q-=Ne,V.have===0){D.msg="invalid bit length repeat",V.mode=30;break}z=V.lens[V.have-1],ve=3+(3&J),J>>>=2,Q-=2}else if(Pe===17){for(de=Ne+3;Q<de;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}Q-=Ne,z=0,ve=3+(7&(J>>>=Ne)),J>>>=3,Q-=3}else{for(de=Ne+7;Q<de;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}Q-=Ne,z=0,ve=11+(127&(J>>>=Ne)),J>>>=7,Q-=7}if(V.have+ve>V.nlen+V.ndist){D.msg="invalid bit length repeat",V.mode=30;break}for(;ve--;)V.lens[V.have++]=z}}if(V.mode===30)break;if(V.lens[256]===0){D.msg="invalid code -- missing end-of-block",V.mode=30;break}if(V.lenbits=9,Te={bits:V.lenbits},Se=u(d,V.lens,0,V.nlen,V.lencode,0,V.work,Te),V.lenbits=Te.bits,Se){D.msg="invalid literal/lengths set",V.mode=30;break}if(V.distbits=6,V.distcode=V.distdyn,Te={bits:V.distbits},Se=u(h,V.lens,V.nlen,V.ndist,V.distcode,0,V.work,Te),V.distbits=Te.bits,Se){D.msg="invalid distances set",V.mode=30;break}if(V.mode=20,Z===6)break e;case 20:V.mode=21;case 21:if(6<=ie&&258<=L){D.next_out=X,D.avail_out=L,D.next_in=ne,D.avail_in=ie,V.hold=J,V.bits=Q,l(D,fe),X=D.next_out,ae=D.output,L=D.avail_out,ne=D.next_in,ue=D.input,ie=D.avail_in,J=V.hold,Q=V.bits,V.mode===12&&(V.back=-1);break}for(V.back=0;Ce=(se=V.lencode[J&(1<<V.lenbits)-1])>>>16&255,Pe=65535&se,!((Ne=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if(Ce&&(240&Ce)==0){for(Qe=Ne,Le=Ce,Ie=Pe;Ce=(se=V.lencode[Ie+((J&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Pe=65535&se,!(Qe+(Ne=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}J>>>=Qe,Q-=Qe,V.back+=Qe}if(J>>>=Ne,Q-=Ne,V.back+=Ne,V.length=Pe,Ce===0){V.mode=26;break}if(32&Ce){V.back=-1,V.mode=12;break}if(64&Ce){D.msg="invalid literal/length code",V.mode=30;break}V.extra=15&Ce,V.mode=22;case 22:if(V.extra){for(de=V.extra;Q<de;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}V.length+=J&(1<<V.extra)-1,J>>>=V.extra,Q-=V.extra,V.back+=V.extra}V.was=V.length,V.mode=23;case 23:for(;Ce=(se=V.distcode[J&(1<<V.distbits)-1])>>>16&255,Pe=65535&se,!((Ne=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if((240&Ce)==0){for(Qe=Ne,Le=Ce,Ie=Pe;Ce=(se=V.distcode[Ie+((J&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Pe=65535&se,!(Qe+(Ne=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}J>>>=Qe,Q-=Qe,V.back+=Qe}if(J>>>=Ne,Q-=Ne,V.back+=Ne,64&Ce){D.msg="invalid distance code",V.mode=30;break}V.offset=Pe,V.extra=15&Ce,V.mode=24;case 24:if(V.extra){for(de=V.extra;Q<de;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}V.offset+=J&(1<<V.extra)-1,J>>>=V.extra,Q-=V.extra,V.back+=V.extra}if(V.offset>V.dmax){D.msg="invalid distance too far back",V.mode=30;break}V.mode=25;case 25:if(L===0)break e;if(ve=fe-L,V.offset>ve){if((ve=V.offset-ve)>V.whave&&V.sane){D.msg="invalid distance too far back",V.mode=30;break}Oe=ve>V.wnext?(ve-=V.wnext,V.wsize-ve):V.wnext-ve,ve>V.length&&(ve=V.length),Ae=V.window}else Ae=ae,Oe=X-V.offset,ve=V.length;for(L<ve&&(ve=L),L-=ve,V.length-=ve;ae[X++]=Ae[Oe++],--ve;);V.length===0&&(V.mode=21);break;case 26:if(L===0)break e;ae[X++]=V.length,L--,V.mode=21;break;case 27:if(V.wrap){for(;Q<32;){if(ie===0)break e;ie--,J|=ue[ne++]<<Q,Q+=8}if(fe-=L,D.total_out+=fe,V.total+=fe,fe&&(D.adler=V.check=V.flags?o(V.check,ae,fe,X-fe):s(V.check,ae,fe,X-fe)),fe=L,(V.flags?J:w(J))!==V.check){D.msg="incorrect data check",V.mode=30;break}Q=J=0}V.mode=28;case 28:if(V.wrap&&V.flags){for(;Q<32;){if(ie===0)break e;ie--,J+=ue[ne++]<<Q,Q+=8}if(J!==(4294967295&V.total)){D.msg="incorrect length check",V.mode=30;break}Q=J=0}V.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return y}return D.next_out=X,D.avail_out=L,D.next_in=ne,D.avail_in=ie,V.hold=J,V.bits=Q,(V.wsize||fe!==D.avail_out&&V.mode<30&&(V.mode<27||Z!==4))&&H(D,D.output,D.next_out,fe-D.avail_out)?(V.mode=31,-4):(ee-=D.avail_in,fe-=D.avail_out,D.total_in+=ee,D.total_out+=fe,V.total+=fe,V.wrap&&fe&&(D.adler=V.check=V.flags?o(V.check,ae,fe,D.next_out-fe):s(V.check,ae,fe,D.next_out-fe)),D.data_type=V.bits+(V.last?64:0)+(V.mode===12?128:0)+(V.mode===20||V.mode===15?256:0),(ee==0&&fe===0||Z===4)&&Se===m&&(Se=-5),Se)},a.inflateEnd=function(D){if(!D||!D.state)return y;var Z=D.state;return Z.window&&(Z.window=null),D.state=null,m},a.inflateGetHeader=function(D,Z){var V;return D&&D.state?(2&(V=D.state).wrap)==0?y:((V.head=Z).done=!1,m):y},a.inflateSetDictionary=function(D,Z){var V,ue=Z.length;return D&&D.state?(V=D.state).wrap!==0&&V.mode!==11?y:V.mode===11&&s(1,Z,ue,0)!==V.check?-3:H(D,Z,ue,ue)?(V.mode=31,-4):(V.havedict=1,m):y},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,m,y,v,b,x,w){var S,E,C,T,j,I,R,F,B,H=w.bits,D=0,Z=0,V=0,ue=0,ae=0,ne=0,X=0,ie=0,L=0,J=0,Q=null,ee=0,fe=new i.Buf16(16),ve=new i.Buf16(16),Oe=null,Ae=0;for(D=0;D<=15;D++)fe[D]=0;for(Z=0;Z<y;Z++)fe[h[m+Z]]++;for(ae=H,ue=15;1<=ue&&fe[ue]===0;ue--);if(ue<ae&&(ae=ue),ue===0)return v[b++]=20971520,v[b++]=20971520,w.bits=1,0;for(V=1;V<ue&&fe[V]===0;V++);for(ae<V&&(ae=V),D=ie=1;D<=15;D++)if(ie<<=1,(ie-=fe[D])<0)return-1;if(0<ie&&(d===0||ue!==1))return-1;for(ve[1]=0,D=1;D<15;D++)ve[D+1]=ve[D]+fe[D];for(Z=0;Z<y;Z++)h[m+Z]!==0&&(x[ve[h[m+Z]]++]=Z);if(I=d===0?(Q=Oe=x,19):d===1?(Q=s,ee-=257,Oe=o,Ae-=257,256):(Q=l,Oe=u,-1),D=V,j=b,X=Z=J=0,C=-1,T=(L=1<<(ne=ae))-1,d===1&&852<L||d===2&&592<L)return 1;for(;;){for(R=D-X,B=x[Z]<I?(F=0,x[Z]):x[Z]>I?(F=Oe[Ae+x[Z]],Q[ee+x[Z]]):(F=96,0),S=1<<D-X,V=E=1<<ne;v[j+(J>>X)+(E-=S)]=R<<24|F<<16|B|0,E!==0;);for(S=1<<D-1;J&S;)S>>=1;if(S!==0?(J&=S-1,J+=S):J=0,Z++,--fe[D]==0){if(D===ue)break;D=h[m+x[Z]]}if(ae<D&&(J&T)!==C){for(X===0&&(X=ae),j+=V,ie=1<<(ne=D-X);ne+X<ue&&!((ie-=fe[ne+X])<=0);)ne++,ie<<=1;if(L+=1<<ne,d===1&&852<L||d===2&&592<L)return 1;v[C=J&T]=ae<<24|ne<<16|j-b|0}}return J!==0&&(v[j+J]=D-X<<24|64<<16|0),w.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),s=0,o=1;function l(se){for(var te=se.length;0<=--te;)se[te]=0}var u=0,d=29,h=256,m=h+1+d,y=30,v=19,b=2*m+1,x=15,w=16,S=7,E=256,C=16,T=17,j=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(m+2));l(H);var D=new Array(2*y);l(D);var Z=new Array(512);l(Z);var V=new Array(256);l(V);var ue=new Array(d);l(ue);var ae,ne,X,ie=new Array(y);function L(se,te,xe,Fe,Ee){this.static_tree=se,this.extra_bits=te,this.extra_base=xe,this.elems=Fe,this.max_length=Ee,this.has_stree=se&&se.length}function J(se,te){this.dyn_tree=se,this.max_code=0,this.stat_desc=te}function Q(se){return se<256?Z[se]:Z[256+(se>>>7)]}function ee(se,te){se.pending_buf[se.pending++]=255&te,se.pending_buf[se.pending++]=te>>>8&255}function fe(se,te,xe){se.bi_valid>w-xe?(se.bi_buf|=te<<se.bi_valid&65535,ee(se,se.bi_buf),se.bi_buf=te>>w-se.bi_valid,se.bi_valid+=xe-w):(se.bi_buf|=te<<se.bi_valid&65535,se.bi_valid+=xe)}function ve(se,te,xe){fe(se,xe[2*te],xe[2*te+1])}function Oe(se,te){for(var xe=0;xe|=1&se,se>>>=1,xe<<=1,0<--te;);return xe>>>1}function Ae(se,te,xe){var Fe,Ee,Ge=new Array(x+1),Nt=0;for(Fe=1;Fe<=x;Fe++)Ge[Fe]=Nt=Nt+xe[Fe-1]<<1;for(Ee=0;Ee<=te;Ee++){var it=se[2*Ee+1];it!==0&&(se[2*Ee]=Oe(Ge[it]++,it))}}function Ne(se){var te;for(te=0;te<m;te++)se.dyn_ltree[2*te]=0;for(te=0;te<y;te++)se.dyn_dtree[2*te]=0;for(te=0;te<v;te++)se.bl_tree[2*te]=0;se.dyn_ltree[2*E]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function Ce(se){8<se.bi_valid?ee(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function Pe(se,te,xe,Fe){var Ee=2*te,Ge=2*xe;return se[Ee]<se[Ge]||se[Ee]===se[Ge]&&Fe[te]<=Fe[xe]}function Qe(se,te,xe){for(var Fe=se.heap[xe],Ee=xe<<1;Ee<=se.heap_len&&(Ee<se.heap_len&&Pe(te,se.heap[Ee+1],se.heap[Ee],se.depth)&&Ee++,!Pe(te,Fe,se.heap[Ee],se.depth));)se.heap[xe]=se.heap[Ee],xe=Ee,Ee<<=1;se.heap[xe]=Fe}function Le(se,te,xe){var Fe,Ee,Ge,Nt,it=0;if(se.last_lit!==0)for(;Fe=se.pending_buf[se.d_buf+2*it]<<8|se.pending_buf[se.d_buf+2*it+1],Ee=se.pending_buf[se.l_buf+it],it++,Fe===0?ve(se,Ee,te):(ve(se,(Ge=V[Ee])+h+1,te),(Nt=I[Ge])!==0&&fe(se,Ee-=ue[Ge],Nt),ve(se,Ge=Q(--Fe),xe),(Nt=R[Ge])!==0&&fe(se,Fe-=ie[Ge],Nt)),it<se.last_lit;);ve(se,E,te)}function Ie(se,te){var xe,Fe,Ee,Ge=te.dyn_tree,Nt=te.stat_desc.static_tree,it=te.stat_desc.has_stree,St=te.stat_desc.elems,Ft=-1;for(se.heap_len=0,se.heap_max=b,xe=0;xe<St;xe++)Ge[2*xe]!==0?(se.heap[++se.heap_len]=Ft=xe,se.depth[xe]=0):Ge[2*xe+1]=0;for(;se.heap_len<2;)Ge[2*(Ee=se.heap[++se.heap_len]=Ft<2?++Ft:0)]=1,se.depth[Ee]=0,se.opt_len--,it&&(se.static_len-=Nt[2*Ee+1]);for(te.max_code=Ft,xe=se.heap_len>>1;1<=xe;xe--)Qe(se,Ge,xe);for(Ee=St;xe=se.heap[1],se.heap[1]=se.heap[se.heap_len--],Qe(se,Ge,1),Fe=se.heap[1],se.heap[--se.heap_max]=xe,se.heap[--se.heap_max]=Fe,Ge[2*Ee]=Ge[2*xe]+Ge[2*Fe],se.depth[Ee]=(se.depth[xe]>=se.depth[Fe]?se.depth[xe]:se.depth[Fe])+1,Ge[2*xe+1]=Ge[2*Fe+1]=Ee,se.heap[1]=Ee++,Qe(se,Ge,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(Dt,Zt){var ye,O,K,he,je,be,ke=Zt.dyn_tree,le=Zt.max_code,ft=Zt.stat_desc.static_tree,vt=Zt.stat_desc.has_stree,P=Zt.stat_desc.extra_bits,Be=Zt.stat_desc.extra_base,nt=Zt.stat_desc.max_length,ge=0;for(he=0;he<=x;he++)Dt.bl_count[he]=0;for(ke[2*Dt.heap[Dt.heap_max]+1]=0,ye=Dt.heap_max+1;ye<b;ye++)nt<(he=ke[2*ke[2*(O=Dt.heap[ye])+1]+1]+1)&&(he=nt,ge++),ke[2*O+1]=he,le<O||(Dt.bl_count[he]++,je=0,Be<=O&&(je=P[O-Be]),be=ke[2*O],Dt.opt_len+=be*(he+je),vt&&(Dt.static_len+=be*(ft[2*O+1]+je)));if(ge!==0){do{for(he=nt-1;Dt.bl_count[he]===0;)he--;Dt.bl_count[he]--,Dt.bl_count[he+1]+=2,Dt.bl_count[nt]--,ge-=2}while(0<ge);for(he=nt;he!==0;he--)for(O=Dt.bl_count[he];O!==0;)le<(K=Dt.heap[--ye])||(ke[2*K+1]!==he&&(Dt.opt_len+=(he-ke[2*K+1])*ke[2*K],ke[2*K+1]=he),O--)}}(se,te),Ae(Ge,Ft,se.bl_count)}function z(se,te,xe){var Fe,Ee,Ge=-1,Nt=te[1],it=0,St=7,Ft=4;for(Nt===0&&(St=138,Ft=3),te[2*(xe+1)+1]=65535,Fe=0;Fe<=xe;Fe++)Ee=Nt,Nt=te[2*(Fe+1)+1],++it<St&&Ee===Nt||(it<Ft?se.bl_tree[2*Ee]+=it:Ee!==0?(Ee!==Ge&&se.bl_tree[2*Ee]++,se.bl_tree[2*C]++):it<=10?se.bl_tree[2*T]++:se.bl_tree[2*j]++,Ge=Ee,Ft=(it=0)===Nt?(St=138,3):Ee===Nt?(St=6,3):(St=7,4))}function Se(se,te,xe){var Fe,Ee,Ge=-1,Nt=te[1],it=0,St=7,Ft=4;for(Nt===0&&(St=138,Ft=3),Fe=0;Fe<=xe;Fe++)if(Ee=Nt,Nt=te[2*(Fe+1)+1],!(++it<St&&Ee===Nt)){if(it<Ft)for(;ve(se,Ee,se.bl_tree),--it!=0;);else Ee!==0?(Ee!==Ge&&(ve(se,Ee,se.bl_tree),it--),ve(se,C,se.bl_tree),fe(se,it-3,2)):it<=10?(ve(se,T,se.bl_tree),fe(se,it-3,3)):(ve(se,j,se.bl_tree),fe(se,it-11,7));Ge=Ee,Ft=(it=0)===Nt?(St=138,3):Ee===Nt?(St=6,3):(St=7,4)}}l(ie);var Te=!1;function de(se,te,xe,Fe){fe(se,(u<<1)+(Fe?1:0),3),function(Ee,Ge,Nt,it){Ce(Ee),ee(Ee,Nt),ee(Ee,~Nt),i.arraySet(Ee.pending_buf,Ee.window,Ge,Nt,Ee.pending),Ee.pending+=Nt}(se,te,xe)}a._tr_init=function(se){Te||(function(){var te,xe,Fe,Ee,Ge,Nt=new Array(x+1);for(Ee=Fe=0;Ee<d-1;Ee++)for(ue[Ee]=Fe,te=0;te<1<<I[Ee];te++)V[Fe++]=Ee;for(V[Fe-1]=Ee,Ee=Ge=0;Ee<16;Ee++)for(ie[Ee]=Ge,te=0;te<1<<R[Ee];te++)Z[Ge++]=Ee;for(Ge>>=7;Ee<y;Ee++)for(ie[Ee]=Ge<<7,te=0;te<1<<R[Ee]-7;te++)Z[256+Ge++]=Ee;for(xe=0;xe<=x;xe++)Nt[xe]=0;for(te=0;te<=143;)H[2*te+1]=8,te++,Nt[8]++;for(;te<=255;)H[2*te+1]=9,te++,Nt[9]++;for(;te<=279;)H[2*te+1]=7,te++,Nt[7]++;for(;te<=287;)H[2*te+1]=8,te++,Nt[8]++;for(Ae(H,m+1,Nt),te=0;te<y;te++)D[2*te+1]=5,D[2*te]=Oe(te,5);ae=new L(H,I,h+1,m,x),ne=new L(D,R,0,y,x),X=new L(new Array(0),F,0,v,S)}(),Te=!0),se.l_desc=new J(se.dyn_ltree,ae),se.d_desc=new J(se.dyn_dtree,ne),se.bl_desc=new J(se.bl_tree,X),se.bi_buf=0,se.bi_valid=0,Ne(se)},a._tr_stored_block=de,a._tr_flush_block=function(se,te,xe,Fe){var Ee,Ge,Nt=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(it){var St,Ft=4093624447;for(St=0;St<=31;St++,Ft>>>=1)if(1&Ft&&it.dyn_ltree[2*St]!==0)return s;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return o;for(St=32;St<h;St++)if(it.dyn_ltree[2*St]!==0)return o;return s}(se)),Ie(se,se.l_desc),Ie(se,se.d_desc),Nt=function(it){var St;for(z(it,it.dyn_ltree,it.l_desc.max_code),z(it,it.dyn_dtree,it.d_desc.max_code),Ie(it,it.bl_desc),St=v-1;3<=St&&it.bl_tree[2*B[St]+1]===0;St--);return it.opt_len+=3*(St+1)+5+5+4,St}(se),Ee=se.opt_len+3+7>>>3,(Ge=se.static_len+3+7>>>3)<=Ee&&(Ee=Ge)):Ee=Ge=xe+5,xe+4<=Ee&&te!==-1?de(se,te,xe,Fe):se.strategy===4||Ge===Ee?(fe(se,2+(Fe?1:0),3),Le(se,H,D)):(fe(se,4+(Fe?1:0),3),function(it,St,Ft,Dt){var Zt;for(fe(it,St-257,5),fe(it,Ft-1,5),fe(it,Dt-4,4),Zt=0;Zt<Dt;Zt++)fe(it,it.bl_tree[2*B[Zt]+1],3);Se(it,it.dyn_ltree,St-1),Se(it,it.dyn_dtree,Ft-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,Nt+1),Le(se,se.dyn_ltree,se.dyn_dtree)),Ne(se),Fe&&Ce(se)},a._tr_tally=function(se,te,xe){return se.pending_buf[se.d_buf+2*se.last_lit]=te>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&te,se.pending_buf[se.l_buf+se.last_lit]=255&xe,se.last_lit++,te===0?se.dyn_ltree[2*xe]++:(se.matches++,te--,se.dyn_ltree[2*(V[xe]+h+1)]++,se.dyn_dtree[2*Q(te)]++),se.last_lit===se.lit_bufsize-1},a._tr_align=function(se){fe(se,2,3),ve(se,E,H),function(te){te.bi_valid===16?(ee(te,te.bi_buf),te.bi_buf=0,te.bi_valid=0):8<=te.bi_valid&&(te.pending_buf[te.pending++]=255&te.bi_buf,te.bi_buf>>=8,te.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(s,o){if(!s.setImmediate){var l,u,d,h,m=1,y={},v=!1,b=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,l={}.toString.call(s.process)==="[object process]"?function(C){ea.nextTick(function(){S(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,T=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=T,C}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(C){s.postMessage(h+C,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){d.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(C){var T=b.createElement("script");T.onreadystatechange=function(){S(C),T.onreadystatechange=null,u.removeChild(T),T=null},u.appendChild(T)}):function(C){setTimeout(S,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var T=new Array(arguments.length-1),j=0;j<T.length;j++)T[j]=arguments[j+1];var I={callback:C,args:T};return y[m]=I,l(m),m++},x.clearImmediate=w}function w(C){delete y[C]}function S(C){if(v)setTimeout(S,0,C);else{var T=y[C];if(T){v=!0;try{(function(j){var I=j.callback,R=j.args;switch(R.length){case 0:I();break;case 1:I(R[0]);break;case 2:I(R[0],R[1]);break;case 3:I(R[0],R[1],R[2]);break;default:I.apply(o,R)}})(T)}finally{w(C),v=!1}}}}function E(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof kd<"u"?kd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(E2)),E2.exports}var Are=Tre();const A5=ui(Are),Fg=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},rr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},al=(...e)=>rr(e.map(t=>t.trim()).filter(Boolean).join("/")),I0=e=>{const t=rr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},ma=e=>{const t=rr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Lg=(e,t)=>rr(e==="/"?`/${t}`:`${e}/${t}`);var C2,n4;function Nre(){if(n4)return C2;n4=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof ea>"u"||typeof ea.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof r!="function"&&(a=r,r=null,o=new this.Promise(function(E,C){i=E,s=C})),a=a||{};var l=!1,u=null,d=null,h=null,m=this,y=function(E,C,T){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),l||(o?C?s(C):i(T):typeof r=="function"&&r(C,T),l=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},v=function(E){if(l)return y(E);u&&(clearTimeout(u),u=null),m.domainReentrant&&E&&(m.domains[t]=ea.domain);var C=a.maxExecutionTime||m.maxExecutionTime;if(C&&(h=setTimeout(function(){m.queues[t]&&y(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var T=!1;try{n(function(j,I){T||(T=!0,y(E,j,I))})}catch(j){T||(T=!0,y(E,j))}}else m._promiseTry(function(){return n()}).then(function(j){y(E,void 0,j)},function(j){y(E,j)})};m.domainReentrant&&ea.domain&&(v=ea.domain.bind(v));var b=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],v(!0);else if(m.domainReentrant&&ea.domain&&ea.domain===m.domains[t])v(!1);else if(m.queues[t].length>=b)y(!1,new Error("Too many pending tasks in queue "+t));else{var x=function(){v(!0)};a.skipQueue?m.queues[t].unshift(x):m.queues[t].push(x);var w=a.timeout||m.timeout;w&&(u=setTimeout(function(){u=null,y(!1,new Error("async-lock timed out in queue "+t))},w))}var S=a.maxOccupationTime||m.maxOccupationTime;if(S&&(d=setTimeout(function(){m.queues[t]&&y(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),o)return o},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,s=function(l,u){return function(d){i.acquire(l,u,d,a)}},o=t.reduceRight(function(l,u){return s(u,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,u){o.length===1?o(function(d,h){d?u(d):l(h)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},C2=e,C2}var k2,r4;function Rre(){return r4||(r4=1,k2=Nre()),k2}var Ire=Rre();const $g=ui(Ire);var ov={exports:{}},a4;function jre(){return a4||(a4=1,typeof Object.create=="function"?ov.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ov.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),ov.exports}var T2,i4;function Ore(){if(i4)return T2;i4=1;var e=xT().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,s=n.length,o=this._len,l=0;l<s;){for(var u=o%i,d=Math.min(s-l,i-u),h=0;h<d;h++)a[u+h]=n[l+h];o+=d,l+=d,o%i===0&&this._update(a)}return this._len+=s,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,s=(a-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},T2=t,T2}var A2,s4;function Dre(){if(s4)return A2;s4=1;var e=jre(),t=Ore(),n=xT().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(d){return d<<1|d>>>31}function o(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function u(d,h,m,y){return d===0?h&m|~h&y:d===2?h&m|h&y|m&y:h^m^y}return i.prototype._update=function(d){for(var h=this._w,m=this._a|0,y=this._b|0,v=this._c|0,b=this._d|0,x=this._e|0,w=0;w<16;++w)h[w]=d.readInt32BE(w*4);for(;w<80;++w)h[w]=s(h[w-3]^h[w-8]^h[w-14]^h[w-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=o(m)+u(E,y,v,b)+x+h[S]+r[E]|0;x=b,b=v,v=l(y),y=m,m=C}this._a=m+this._a|0,this._b=y+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},A2=i,A2}var Mre=Dre();const N5=ui(Mre);var N2,o4;function Pre(){if(o4)return N2;o4=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var s="",o=0,l=-1,u=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||u===1))if(l!==h-1&&u===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=h,u=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=h,u=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+a.slice(l+1,h):s=a.slice(l+1,h),o=h-l-1;l=h,u=0}else d===46&&u!==-1?++u:u=-1}return s}function n(a,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+a+o:o}var r={resolve:function(){for(var i="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var u;l>=0?u=arguments[l]:(o===void 0&&(o=ea.cwd()),u=o),e(u),u.length!==0&&(i=u+"/"+i,s=u.charCodeAt(0)===47)}return i=t(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var s=i.charCodeAt(0)===47,o=i.charCodeAt(i.length-1)===47;return i=t(i,!s),i.length===0&&!s&&(i="."),i.length>0&&o&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":r.normalize(i)},relative:function(i,s){if(e(i),e(s),i===s||(i=r.resolve(i),s=r.resolve(s),i===s))return"";for(var o=1;o<i.length&&i.charCodeAt(o)===47;++o);for(var l=i.length,u=l-o,d=1;d<s.length&&s.charCodeAt(d)===47;++d);for(var h=s.length,m=h-d,y=u<m?u:m,v=-1,b=0;b<=y;++b){if(b===y){if(m>y){if(s.charCodeAt(d+b)===47)return s.slice(d+b+1);if(b===0)return s.slice(d+b)}else u>y&&(i.charCodeAt(o+b)===47?v=b:b===0&&(v=0));break}var x=i.charCodeAt(o+b),w=s.charCodeAt(d+b);if(x!==w)break;x===47&&(v=b)}var S="";for(b=o+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+s.slice(d+v):(d+=v,s.charCodeAt(d)===47&&++d,s.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var s=i.charCodeAt(0),o=s===47,l=-1,u=!0,d=i.length-1;d>=1;--d)if(s=i.charCodeAt(d),s===47){if(!u){l=d;break}}else u=!1;return l===-1?o?"/":".":o&&l===1?"//":i.slice(0,l)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(i);var o=0,l=-1,u=!0,d;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var h=s.length-1,m=-1;for(d=i.length-1;d>=0;--d){var y=i.charCodeAt(d);if(y===47){if(!u){o=d+1;break}}else m===-1&&(u=!1,m=d+1),h>=0&&(y===s.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=m))}return o===l?l=m:l===-1&&(l=i.length),i.slice(o,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!u){o=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":i.slice(o,l)}},extname:function(i){e(i);for(var s=-1,o=0,l=-1,u=!0,d=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!u){o=h+1;break}continue}l===-1&&(u=!1,l=h+1),m===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===o+1?"":i.slice(s,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var o=i.charCodeAt(0),l=o===47,u;l?(s.root="/",u=1):u=0;for(var d=-1,h=0,m=-1,y=!0,v=i.length-1,b=0;v>=u;--v){if(o=i.charCodeAt(v),o===47){if(!y){h=v+1;break}continue}m===-1&&(y=!1,m=v+1),o===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||m===-1||b===0||b===1&&d===m-1&&d===h+1?m!==-1&&(h===0&&l?s.base=s.name=i.slice(1,m):s.base=s.name=i.slice(h,m)):(h===0&&l?(s.name=i.slice(1,d),s.base=i.slice(1,m)):(s.name=i.slice(h,d),s.base=i.slice(h,m)),s.ext=i.slice(d,m)),h>0?s.dir=i.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,N2=r,N2}var Pt=Pre(),R2={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var l4;function Fre(){return l4||(l4=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var R=0,F=new Array(256),B=0;B!=256;++B)R=B,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,F[B]=R;return typeof Int32Array<"u"?new Int32Array(F):F}var r=n();function a(R){var F=0,B=0,H=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(H=0;H!=256;++H)D[H]=R[H];for(H=0;H!=256;++H)for(B=R[H],F=256+H;F<4096;F+=256)B=D[F]=B>>>8^R[B&255];var Z=[];for(H=1;H!=16;++H)Z[H-1]=typeof Int32Array<"u"?D.subarray(H*256,H*256+256):D.slice(H*256,H*256+256);return Z}var i=a(r),s=i[0],o=i[1],l=i[2],u=i[3],d=i[4],h=i[5],m=i[6],y=i[7],v=i[8],b=i[9],x=i[10],w=i[11],S=i[12],E=i[13],C=i[14];function T(R,F){for(var B=F^-1,H=0,D=R.length;H<D;)B=B>>>8^r[(B^R.charCodeAt(H++))&255];return~B}function j(R,F){for(var B=F^-1,H=R.length-15,D=0;D<H;)B=C[R[D++]^B&255]^E[R[D++]^B>>8&255]^S[R[D++]^B>>16&255]^w[R[D++]^B>>>24]^x[R[D++]]^b[R[D++]]^v[R[D++]]^y[R[D++]]^m[R[D++]]^h[R[D++]]^d[R[D++]]^u[R[D++]]^l[R[D++]]^o[R[D++]]^s[R[D++]]^r[R[D++]];for(H+=15;D<H;)B=B>>>8^r[(B^R[D++])&255];return~B}function I(R,F){for(var B=F^-1,H=0,D=R.length,Z=0,V=0;H<D;)Z=R.charCodeAt(H++),Z<128?B=B>>>8^r[(B^Z)&255]:Z<2048?(B=B>>>8^r[(B^(192|Z>>6&31))&255],B=B>>>8^r[(B^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,V=R.charCodeAt(H++)&1023,B=B>>>8^r[(B^(240|Z>>8&7))&255],B=B>>>8^r[(B^(128|Z>>2&63))&255],B=B>>>8^r[(B^(128|V>>6&15|(Z&3)<<4))&255],B=B>>>8^r[(B^(128|V&63))&255]):(B=B>>>8^r[(B^(224|Z>>12&15))&255],B=B>>>8^r[(B^(128|Z>>6&63))&255],B=B>>>8^r[(B^(128|Z&63))&255]);return~B}t.table=r,t.bstr=T,t.buf=j,t.str=I})}(R2)),R2}var Lre=Fre();const $re=ui(Lre);var I2={},c4;function $u(){return c4||(c4=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,s){return Object.prototype.hasOwnProperty.call(i,s)}e.assign=function(i){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var o=s.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(i[l]=o[l])}}return i},e.shrinkBuf=function(i,s){return i.length===s?i:i.subarray?i.subarray(0,s):(i.length=s,i)};var r={arraySet:function(i,s,o,l,u){if(s.subarray&&i.subarray){i.set(s.subarray(o,o+l),u);return}for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){var s,o,l,u,d,h;for(l=0,s=0,o=i.length;s<o;s++)l+=i[s].length;for(h=new Uint8Array(l),u=0,s=0,o=i.length;s<o;s++)d=i[s],h.set(d,u),u+=d.length;return h}},a={arraySet:function(i,s,o,l,u){for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(I2)),I2}var ih={},Hs={},bd={},u4;function Bre(){if(u4)return bd;u4=1;var e=$u(),t=4,n=0,r=1,a=2;function i(O){for(var K=O.length;--K>=0;)O[K]=0}var s=0,o=1,l=2,u=3,d=258,h=29,m=256,y=m+1+h,v=30,b=19,x=2*y+1,w=15,S=16,E=7,C=256,T=16,j=17,I=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=512,Z=new Array((y+2)*2);i(Z);var V=new Array(v*2);i(V);var ue=new Array(D);i(ue);var ae=new Array(d-u+1);i(ae);var ne=new Array(h);i(ne);var X=new Array(v);i(X);function ie(O,K,he,je,be){this.static_tree=O,this.extra_bits=K,this.extra_base=he,this.elems=je,this.max_length=be,this.has_stree=O&&O.length}var L,J,Q;function ee(O,K){this.dyn_tree=O,this.max_code=0,this.stat_desc=K}function fe(O){return O<256?ue[O]:ue[256+(O>>>7)]}function ve(O,K){O.pending_buf[O.pending++]=K&255,O.pending_buf[O.pending++]=K>>>8&255}function Oe(O,K,he){O.bi_valid>S-he?(O.bi_buf|=K<<O.bi_valid&65535,ve(O,O.bi_buf),O.bi_buf=K>>S-O.bi_valid,O.bi_valid+=he-S):(O.bi_buf|=K<<O.bi_valid&65535,O.bi_valid+=he)}function Ae(O,K,he){Oe(O,he[K*2],he[K*2+1])}function Ne(O,K){var he=0;do he|=O&1,O>>>=1,he<<=1;while(--K>0);return he>>>1}function Ce(O){O.bi_valid===16?(ve(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):O.bi_valid>=8&&(O.pending_buf[O.pending++]=O.bi_buf&255,O.bi_buf>>=8,O.bi_valid-=8)}function Pe(O,K){var he=K.dyn_tree,je=K.max_code,be=K.stat_desc.static_tree,ke=K.stat_desc.has_stree,le=K.stat_desc.extra_bits,ft=K.stat_desc.extra_base,vt=K.stat_desc.max_length,P,Be,nt,ge,De,Ke,Ot=0;for(ge=0;ge<=w;ge++)O.bl_count[ge]=0;for(he[O.heap[O.heap_max]*2+1]=0,P=O.heap_max+1;P<x;P++)Be=O.heap[P],ge=he[he[Be*2+1]*2+1]+1,ge>vt&&(ge=vt,Ot++),he[Be*2+1]=ge,!(Be>je)&&(O.bl_count[ge]++,De=0,Be>=ft&&(De=le[Be-ft]),Ke=he[Be*2],O.opt_len+=Ke*(ge+De),ke&&(O.static_len+=Ke*(be[Be*2+1]+De)));if(Ot!==0){do{for(ge=vt-1;O.bl_count[ge]===0;)ge--;O.bl_count[ge]--,O.bl_count[ge+1]+=2,O.bl_count[vt]--,Ot-=2}while(Ot>0);for(ge=vt;ge!==0;ge--)for(Be=O.bl_count[ge];Be!==0;)nt=O.heap[--P],!(nt>je)&&(he[nt*2+1]!==ge&&(O.opt_len+=(ge-he[nt*2+1])*he[nt*2],he[nt*2+1]=ge),Be--)}}function Qe(O,K,he){var je=new Array(w+1),be=0,ke,le;for(ke=1;ke<=w;ke++)je[ke]=be=be+he[ke-1]<<1;for(le=0;le<=K;le++){var ft=O[le*2+1];ft!==0&&(O[le*2]=Ne(je[ft]++,ft))}}function Le(){var O,K,he,je,be,ke=new Array(w+1);for(he=0,je=0;je<h-1;je++)for(ne[je]=he,O=0;O<1<<R[je];O++)ae[he++]=je;for(ae[he-1]=je,be=0,je=0;je<16;je++)for(X[je]=be,O=0;O<1<<F[je];O++)ue[be++]=je;for(be>>=7;je<v;je++)for(X[je]=be<<7,O=0;O<1<<F[je]-7;O++)ue[256+be++]=je;for(K=0;K<=w;K++)ke[K]=0;for(O=0;O<=143;)Z[O*2+1]=8,O++,ke[8]++;for(;O<=255;)Z[O*2+1]=9,O++,ke[9]++;for(;O<=279;)Z[O*2+1]=7,O++,ke[7]++;for(;O<=287;)Z[O*2+1]=8,O++,ke[8]++;for(Qe(Z,y+1,ke),O=0;O<v;O++)V[O*2+1]=5,V[O*2]=Ne(O,5);L=new ie(Z,R,m+1,y,w),J=new ie(V,F,0,v,w),Q=new ie(new Array(0),B,0,b,E)}function Ie(O){var K;for(K=0;K<y;K++)O.dyn_ltree[K*2]=0;for(K=0;K<v;K++)O.dyn_dtree[K*2]=0;for(K=0;K<b;K++)O.bl_tree[K*2]=0;O.dyn_ltree[C*2]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function z(O){O.bi_valid>8?ve(O,O.bi_buf):O.bi_valid>0&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Se(O,K,he,je){z(O),ve(O,he),ve(O,~he),e.arraySet(O.pending_buf,O.window,K,he,O.pending),O.pending+=he}function Te(O,K,he,je){var be=K*2,ke=he*2;return O[be]<O[ke]||O[be]===O[ke]&&je[K]<=je[he]}function de(O,K,he){for(var je=O.heap[he],be=he<<1;be<=O.heap_len&&(be<O.heap_len&&Te(K,O.heap[be+1],O.heap[be],O.depth)&&be++,!Te(K,je,O.heap[be],O.depth));)O.heap[he]=O.heap[be],he=be,be<<=1;O.heap[he]=je}function se(O,K,he){var je,be,ke=0,le,ft;if(O.last_lit!==0)do je=O.pending_buf[O.d_buf+ke*2]<<8|O.pending_buf[O.d_buf+ke*2+1],be=O.pending_buf[O.l_buf+ke],ke++,je===0?Ae(O,be,K):(le=ae[be],Ae(O,le+m+1,K),ft=R[le],ft!==0&&(be-=ne[le],Oe(O,be,ft)),je--,le=fe(je),Ae(O,le,he),ft=F[le],ft!==0&&(je-=X[le],Oe(O,je,ft)));while(ke<O.last_lit);Ae(O,C,K)}function te(O,K){var he=K.dyn_tree,je=K.stat_desc.static_tree,be=K.stat_desc.has_stree,ke=K.stat_desc.elems,le,ft,vt=-1,P;for(O.heap_len=0,O.heap_max=x,le=0;le<ke;le++)he[le*2]!==0?(O.heap[++O.heap_len]=vt=le,O.depth[le]=0):he[le*2+1]=0;for(;O.heap_len<2;)P=O.heap[++O.heap_len]=vt<2?++vt:0,he[P*2]=1,O.depth[P]=0,O.opt_len--,be&&(O.static_len-=je[P*2+1]);for(K.max_code=vt,le=O.heap_len>>1;le>=1;le--)de(O,he,le);P=ke;do le=O.heap[1],O.heap[1]=O.heap[O.heap_len--],de(O,he,1),ft=O.heap[1],O.heap[--O.heap_max]=le,O.heap[--O.heap_max]=ft,he[P*2]=he[le*2]+he[ft*2],O.depth[P]=(O.depth[le]>=O.depth[ft]?O.depth[le]:O.depth[ft])+1,he[le*2+1]=he[ft*2+1]=P,O.heap[1]=P++,de(O,he,1);while(O.heap_len>=2);O.heap[--O.heap_max]=O.heap[1],Pe(O,K),Qe(he,vt,O.bl_count)}function xe(O,K,he){var je,be=-1,ke,le=K[0*2+1],ft=0,vt=7,P=4;for(le===0&&(vt=138,P=3),K[(he+1)*2+1]=65535,je=0;je<=he;je++)ke=le,le=K[(je+1)*2+1],!(++ft<vt&&ke===le)&&(ft<P?O.bl_tree[ke*2]+=ft:ke!==0?(ke!==be&&O.bl_tree[ke*2]++,O.bl_tree[T*2]++):ft<=10?O.bl_tree[j*2]++:O.bl_tree[I*2]++,ft=0,be=ke,le===0?(vt=138,P=3):ke===le?(vt=6,P=3):(vt=7,P=4))}function Fe(O,K,he){var je,be=-1,ke,le=K[0*2+1],ft=0,vt=7,P=4;for(le===0&&(vt=138,P=3),je=0;je<=he;je++)if(ke=le,le=K[(je+1)*2+1],!(++ft<vt&&ke===le)){if(ft<P)do Ae(O,ke,O.bl_tree);while(--ft!==0);else ke!==0?(ke!==be&&(Ae(O,ke,O.bl_tree),ft--),Ae(O,T,O.bl_tree),Oe(O,ft-3,2)):ft<=10?(Ae(O,j,O.bl_tree),Oe(O,ft-3,3)):(Ae(O,I,O.bl_tree),Oe(O,ft-11,7));ft=0,be=ke,le===0?(vt=138,P=3):ke===le?(vt=6,P=3):(vt=7,P=4)}}function Ee(O){var K;for(xe(O,O.dyn_ltree,O.l_desc.max_code),xe(O,O.dyn_dtree,O.d_desc.max_code),te(O,O.bl_desc),K=b-1;K>=3&&O.bl_tree[H[K]*2+1]===0;K--);return O.opt_len+=3*(K+1)+5+5+4,K}function Ge(O,K,he,je){var be;for(Oe(O,K-257,5),Oe(O,he-1,5),Oe(O,je-4,4),be=0;be<je;be++)Oe(O,O.bl_tree[H[be]*2+1],3);Fe(O,O.dyn_ltree,K-1),Fe(O,O.dyn_dtree,he-1)}function Nt(O){var K=4093624447,he;for(he=0;he<=31;he++,K>>>=1)if(K&1&&O.dyn_ltree[he*2]!==0)return n;if(O.dyn_ltree[9*2]!==0||O.dyn_ltree[10*2]!==0||O.dyn_ltree[13*2]!==0)return r;for(he=32;he<m;he++)if(O.dyn_ltree[he*2]!==0)return r;return n}var it=!1;function St(O){it||(Le(),it=!0),O.l_desc=new ee(O.dyn_ltree,L),O.d_desc=new ee(O.dyn_dtree,J),O.bl_desc=new ee(O.bl_tree,Q),O.bi_buf=0,O.bi_valid=0,Ie(O)}function Ft(O,K,he,je){Oe(O,(s<<1)+(je?1:0),3),Se(O,K,he)}function Dt(O){Oe(O,o<<1,3),Ae(O,C,Z),Ce(O)}function Zt(O,K,he,je){var be,ke,le=0;O.level>0?(O.strm.data_type===a&&(O.strm.data_type=Nt(O)),te(O,O.l_desc),te(O,O.d_desc),le=Ee(O),be=O.opt_len+3+7>>>3,ke=O.static_len+3+7>>>3,ke<=be&&(be=ke)):be=ke=he+5,he+4<=be&&K!==-1?Ft(O,K,he,je):O.strategy===t||ke===be?(Oe(O,(o<<1)+(je?1:0),3),se(O,Z,V)):(Oe(O,(l<<1)+(je?1:0),3),Ge(O,O.l_desc.max_code+1,O.d_desc.max_code+1,le+1),se(O,O.dyn_ltree,O.dyn_dtree)),Ie(O),je&&z(O)}function ye(O,K,he){return O.pending_buf[O.d_buf+O.last_lit*2]=K>>>8&255,O.pending_buf[O.d_buf+O.last_lit*2+1]=K&255,O.pending_buf[O.l_buf+O.last_lit]=he&255,O.last_lit++,K===0?O.dyn_ltree[he*2]++:(O.matches++,K--,O.dyn_ltree[(ae[he]+m+1)*2]++,O.dyn_dtree[fe(K)*2]++),O.last_lit===O.lit_bufsize-1}return bd._tr_init=St,bd._tr_stored_block=Ft,bd._tr_flush_block=Zt,bd._tr_tally=ye,bd._tr_align=Dt,bd}var j2,d4;function R5(){if(d4)return j2;d4=1;function e(t,n,r,a){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+n[a++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}return j2=e,j2}var O2,f4;function I5(){if(f4)return O2;f4=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,s){var o=t,l=s+i;r^=-1;for(var u=s;u<l;u++)r=r>>>8^o[(r^a[u])&255];return r^-1}return O2=n,O2}var D2,h4;function jT(){return h4||(h4=1,D2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),D2}var p4;function zre(){if(p4)return Hs;p4=1;var e=$u(),t=Bre(),n=R5(),r=I5(),a=jT(),i=0,s=1,o=3,l=4,u=5,d=0,h=1,m=-2,y=-3,v=-5,b=-1,x=1,w=2,S=3,E=4,C=0,T=2,j=8,I=9,R=15,F=8,B=29,H=256,D=H+1+B,Z=30,V=19,ue=2*D+1,ae=15,ne=3,X=258,ie=X+ne+1,L=32,J=42,Q=69,ee=73,fe=91,ve=103,Oe=113,Ae=666,Ne=1,Ce=2,Pe=3,Qe=4,Le=3;function Ie(P,Be){return P.msg=a[Be],Be}function z(P){return(P<<1)-(P>4?9:0)}function Se(P){for(var Be=P.length;--Be>=0;)P[Be]=0}function Te(P){var Be=P.state,nt=Be.pending;nt>P.avail_out&&(nt=P.avail_out),nt!==0&&(e.arraySet(P.output,Be.pending_buf,Be.pending_out,nt,P.next_out),P.next_out+=nt,Be.pending_out+=nt,P.total_out+=nt,P.avail_out-=nt,Be.pending-=nt,Be.pending===0&&(Be.pending_out=0))}function de(P,Be){t._tr_flush_block(P,P.block_start>=0?P.block_start:-1,P.strstart-P.block_start,Be),P.block_start=P.strstart,Te(P.strm)}function se(P,Be){P.pending_buf[P.pending++]=Be}function te(P,Be){P.pending_buf[P.pending++]=Be>>>8&255,P.pending_buf[P.pending++]=Be&255}function xe(P,Be,nt,ge){var De=P.avail_in;return De>ge&&(De=ge),De===0?0:(P.avail_in-=De,e.arraySet(Be,P.input,P.next_in,De,nt),P.state.wrap===1?P.adler=n(P.adler,Be,De,nt):P.state.wrap===2&&(P.adler=r(P.adler,Be,De,nt)),P.next_in+=De,P.total_in+=De,De)}function Fe(P,Be){var nt=P.max_chain_length,ge=P.strstart,De,Ke,Ot=P.prev_length,me=P.nice_match,G=P.strstart>P.w_size-ie?P.strstart-(P.w_size-ie):0,q=P.window,W=P.w_mask,pe=P.prev,Re=P.strstart+X,qe=q[ge+Ot-1],pt=q[ge+Ot];P.prev_length>=P.good_match&&(nt>>=2),me>P.lookahead&&(me=P.lookahead);do if(De=Be,!(q[De+Ot]!==pt||q[De+Ot-1]!==qe||q[De]!==q[ge]||q[++De]!==q[ge+1])){ge+=2,De++;do;while(q[++ge]===q[++De]&&q[++ge]===q[++De]&&q[++ge]===q[++De]&&q[++ge]===q[++De]&&q[++ge]===q[++De]&&q[++ge]===q[++De]&&q[++ge]===q[++De]&&q[++ge]===q[++De]&&ge<Re);if(Ke=X-(Re-ge),ge=Re-X,Ke>Ot){if(P.match_start=Be,Ot=Ke,Ke>=me)break;qe=q[ge+Ot-1],pt=q[ge+Ot]}}while((Be=pe[Be&W])>G&&--nt!==0);return Ot<=P.lookahead?Ot:P.lookahead}function Ee(P){var Be=P.w_size,nt,ge,De,Ke,Ot;do{if(Ke=P.window_size-P.lookahead-P.strstart,P.strstart>=Be+(Be-ie)){e.arraySet(P.window,P.window,Be,Be,0),P.match_start-=Be,P.strstart-=Be,P.block_start-=Be,ge=P.hash_size,nt=ge;do De=P.head[--nt],P.head[nt]=De>=Be?De-Be:0;while(--ge);ge=Be,nt=ge;do De=P.prev[--nt],P.prev[nt]=De>=Be?De-Be:0;while(--ge);Ke+=Be}if(P.strm.avail_in===0)break;if(ge=xe(P.strm,P.window,P.strstart+P.lookahead,Ke),P.lookahead+=ge,P.lookahead+P.insert>=ne)for(Ot=P.strstart-P.insert,P.ins_h=P.window[Ot],P.ins_h=(P.ins_h<<P.hash_shift^P.window[Ot+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[Ot+ne-1])&P.hash_mask,P.prev[Ot&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=Ot,Ot++,P.insert--,!(P.lookahead+P.insert<ne)););}while(P.lookahead<ie&&P.strm.avail_in!==0)}function Ge(P,Be){var nt=65535;for(nt>P.pending_buf_size-5&&(nt=P.pending_buf_size-5);;){if(P.lookahead<=1){if(Ee(P),P.lookahead===0&&Be===i)return Ne;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var ge=P.block_start+nt;if((P.strstart===0||P.strstart>=ge)&&(P.lookahead=P.strstart-ge,P.strstart=ge,de(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-ie&&(de(P,!1),P.strm.avail_out===0))return Ne}return P.insert=0,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):(P.strstart>P.block_start&&(de(P,!1),P.strm.avail_out===0),Ne)}function Nt(P,Be){for(var nt,ge;;){if(P.lookahead<ie){if(Ee(P),P.lookahead<ie&&Be===i)return Ne;if(P.lookahead===0)break}if(nt=0,P.lookahead>=ne&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,nt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),nt!==0&&P.strstart-nt<=P.w_size-ie&&(P.match_length=Fe(P,nt)),P.match_length>=ne)if(ge=t._tr_tally(P,P.strstart-P.match_start,P.match_length-ne),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=ne){P.match_length--;do P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,nt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart;while(--P.match_length!==0);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else ge=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(ge&&(de(P,!1),P.strm.avail_out===0))return Ne}return P.insert=P.strstart<ne-1?P.strstart:ne-1,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):P.last_lit&&(de(P,!1),P.strm.avail_out===0)?Ne:Ce}function it(P,Be){for(var nt,ge,De;;){if(P.lookahead<ie){if(Ee(P),P.lookahead<ie&&Be===i)return Ne;if(P.lookahead===0)break}if(nt=0,P.lookahead>=ne&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,nt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=ne-1,nt!==0&&P.prev_length<P.max_lazy_match&&P.strstart-nt<=P.w_size-ie&&(P.match_length=Fe(P,nt),P.match_length<=5&&(P.strategy===x||P.match_length===ne&&P.strstart-P.match_start>4096)&&(P.match_length=ne-1)),P.prev_length>=ne&&P.match_length<=P.prev_length){De=P.strstart+P.lookahead-ne,ge=t._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-ne),P.lookahead-=P.prev_length-1,P.prev_length-=2;do++P.strstart<=De&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,nt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart);while(--P.prev_length!==0);if(P.match_available=0,P.match_length=ne-1,P.strstart++,ge&&(de(P,!1),P.strm.avail_out===0))return Ne}else if(P.match_available){if(ge=t._tr_tally(P,0,P.window[P.strstart-1]),ge&&de(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return Ne}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(ge=t._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<ne-1?P.strstart:ne-1,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):P.last_lit&&(de(P,!1),P.strm.avail_out===0)?Ne:Ce}function St(P,Be){for(var nt,ge,De,Ke,Ot=P.window;;){if(P.lookahead<=X){if(Ee(P),P.lookahead<=X&&Be===i)return Ne;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=ne&&P.strstart>0&&(De=P.strstart-1,ge=Ot[De],ge===Ot[++De]&&ge===Ot[++De]&&ge===Ot[++De])){Ke=P.strstart+X;do;while(ge===Ot[++De]&&ge===Ot[++De]&&ge===Ot[++De]&&ge===Ot[++De]&&ge===Ot[++De]&&ge===Ot[++De]&&ge===Ot[++De]&&ge===Ot[++De]&&De<Ke);P.match_length=X-(Ke-De),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=ne?(nt=t._tr_tally(P,1,P.match_length-ne),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(nt=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),nt&&(de(P,!1),P.strm.avail_out===0))return Ne}return P.insert=0,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):P.last_lit&&(de(P,!1),P.strm.avail_out===0)?Ne:Ce}function Ft(P,Be){for(var nt;;){if(P.lookahead===0&&(Ee(P),P.lookahead===0)){if(Be===i)return Ne;break}if(P.match_length=0,nt=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,nt&&(de(P,!1),P.strm.avail_out===0))return Ne}return P.insert=0,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):P.last_lit&&(de(P,!1),P.strm.avail_out===0)?Ne:Ce}function Dt(P,Be,nt,ge,De){this.good_length=P,this.max_lazy=Be,this.nice_length=nt,this.max_chain=ge,this.func=De}var Zt;Zt=[new Dt(0,0,0,0,Ge),new Dt(4,4,8,4,Nt),new Dt(4,5,16,8,Nt),new Dt(4,6,32,32,Nt),new Dt(4,4,16,16,it),new Dt(8,16,32,32,it),new Dt(8,16,128,128,it),new Dt(8,32,128,256,it),new Dt(32,128,258,1024,it),new Dt(32,258,258,4096,it)];function ye(P){P.window_size=2*P.w_size,Se(P.head),P.max_lazy_match=Zt[P.level].max_lazy,P.good_match=Zt[P.level].good_length,P.nice_match=Zt[P.level].nice_length,P.max_chain_length=Zt[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=ne-1,P.match_available=0,P.ins_h=0}function O(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=j,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(ue*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*V+1)*2),Se(this.dyn_ltree),Se(this.dyn_dtree),Se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*D+1),Se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*D+1),Se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function K(P){var Be;return!P||!P.state?Ie(P,m):(P.total_in=P.total_out=0,P.data_type=T,Be=P.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?J:Oe,P.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),d)}function he(P){var Be=K(P);return Be===d&&ye(P.state),Be}function je(P,Be){return!P||!P.state||P.state.wrap!==2?m:(P.state.gzhead=Be,d)}function be(P,Be,nt,ge,De,Ke){if(!P)return m;var Ot=1;if(Be===b&&(Be=6),ge<0?(Ot=0,ge=-ge):ge>15&&(Ot=2,ge-=16),De<1||De>I||nt!==j||ge<8||ge>15||Be<0||Be>9||Ke<0||Ke>E)return Ie(P,m);ge===8&&(ge=9);var me=new O;return P.state=me,me.strm=P,me.wrap=Ot,me.gzhead=null,me.w_bits=ge,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=De+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+ne-1)/ne),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<De+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=Be,me.strategy=Ke,me.method=nt,he(P)}function ke(P,Be){return be(P,Be,j,R,F,C)}function le(P,Be){var nt,ge,De,Ke;if(!P||!P.state||Be>u||Be<0)return P?Ie(P,m):m;if(ge=P.state,!P.output||!P.input&&P.avail_in!==0||ge.status===Ae&&Be!==l)return Ie(P,P.avail_out===0?v:m);if(ge.strm=P,nt=ge.last_flush,ge.last_flush=Be,ge.status===J)if(ge.wrap===2)P.adler=0,se(ge,31),se(ge,139),se(ge,8),ge.gzhead?(se(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),se(ge,ge.gzhead.time&255),se(ge,ge.gzhead.time>>8&255),se(ge,ge.gzhead.time>>16&255),se(ge,ge.gzhead.time>>24&255),se(ge,ge.level===9?2:ge.strategy>=w||ge.level<2?4:0),se(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(se(ge,ge.gzhead.extra.length&255),se(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(P.adler=r(P.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=Q):(se(ge,0),se(ge,0),se(ge,0),se(ge,0),se(ge,0),se(ge,ge.level===9?2:ge.strategy>=w||ge.level<2?4:0),se(ge,Le),ge.status=Oe);else{var Ot=j+(ge.w_bits-8<<4)<<8,me=-1;ge.strategy>=w||ge.level<2?me=0:ge.level<6?me=1:ge.level===6?me=2:me=3,Ot|=me<<6,ge.strstart!==0&&(Ot|=L),Ot+=31-Ot%31,ge.status=Oe,te(ge,Ot),ge.strstart!==0&&(te(ge,P.adler>>>16),te(ge,P.adler&65535)),P.adler=1}if(ge.status===Q)if(ge.gzhead.extra){for(De=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-De,De)),Te(P),De=ge.pending,ge.pending===ge.pending_buf_size));)se(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>De&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-De,De)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=ee)}else ge.status=ee;if(ge.status===ee)if(ge.gzhead.name){De=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-De,De)),Te(P),De=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.name.length?Ke=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Ke=0,se(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>De&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-De,De)),Ke===0&&(ge.gzindex=0,ge.status=fe)}else ge.status=fe;if(ge.status===fe)if(ge.gzhead.comment){De=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-De,De)),Te(P),De=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.comment.length?Ke=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Ke=0,se(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>De&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-De,De)),Ke===0&&(ge.status=ve)}else ge.status=ve;if(ge.status===ve&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Te(P),ge.pending+2<=ge.pending_buf_size&&(se(ge,P.adler&255),se(ge,P.adler>>8&255),P.adler=0,ge.status=Oe)):ge.status=Oe),ge.pending!==0){if(Te(P),P.avail_out===0)return ge.last_flush=-1,d}else if(P.avail_in===0&&z(Be)<=z(nt)&&Be!==l)return Ie(P,v);if(ge.status===Ae&&P.avail_in!==0)return Ie(P,v);if(P.avail_in!==0||ge.lookahead!==0||Be!==i&&ge.status!==Ae){var G=ge.strategy===w?Ft(ge,Be):ge.strategy===S?St(ge,Be):Zt[ge.level].func(ge,Be);if((G===Pe||G===Qe)&&(ge.status=Ae),G===Ne||G===Pe)return P.avail_out===0&&(ge.last_flush=-1),d;if(G===Ce&&(Be===s?t._tr_align(ge):Be!==u&&(t._tr_stored_block(ge,0,0,!1),Be===o&&(Se(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Te(P),P.avail_out===0))return ge.last_flush=-1,d}return Be!==l?d:ge.wrap<=0?h:(ge.wrap===2?(se(ge,P.adler&255),se(ge,P.adler>>8&255),se(ge,P.adler>>16&255),se(ge,P.adler>>24&255),se(ge,P.total_in&255),se(ge,P.total_in>>8&255),se(ge,P.total_in>>16&255),se(ge,P.total_in>>24&255)):(te(ge,P.adler>>>16),te(ge,P.adler&65535)),Te(P),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?d:h)}function ft(P){var Be;return!P||!P.state?m:(Be=P.state.status,Be!==J&&Be!==Q&&Be!==ee&&Be!==fe&&Be!==ve&&Be!==Oe&&Be!==Ae?Ie(P,m):(P.state=null,Be===Oe?Ie(P,y):d))}function vt(P,Be){var nt=Be.length,ge,De,Ke,Ot,me,G,q,W;if(!P||!P.state||(ge=P.state,Ot=ge.wrap,Ot===2||Ot===1&&ge.status!==J||ge.lookahead))return m;for(Ot===1&&(P.adler=n(P.adler,Be,nt,0)),ge.wrap=0,nt>=ge.w_size&&(Ot===0&&(Se(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),W=new e.Buf8(ge.w_size),e.arraySet(W,Be,nt-ge.w_size,ge.w_size,0),Be=W,nt=ge.w_size),me=P.avail_in,G=P.next_in,q=P.input,P.avail_in=nt,P.next_in=0,P.input=Be,Ee(ge);ge.lookahead>=ne;){De=ge.strstart,Ke=ge.lookahead-(ne-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[De+ne-1])&ge.hash_mask,ge.prev[De&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=De,De++;while(--Ke);ge.strstart=De,ge.lookahead=ne-1,Ee(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=ne-1,ge.match_available=0,P.next_in=G,P.input=q,P.avail_in=me,ge.wrap=Ot,d}return Hs.deflateInit=ke,Hs.deflateInit2=be,Hs.deflateReset=he,Hs.deflateResetKeep=K,Hs.deflateSetHeader=je,Hs.deflate=le,Hs.deflateEnd=ft,Hs.deflateSetDictionary=vt,Hs.deflateInfo="pako deflate (from Nodeca project)",Hs}var vd={},m4;function j5(){if(m4)return vd;m4=1;var e=$u(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,vd.string2buf=function(s){var o,l,u,d,h,m=s.length,y=0;for(d=0;d<m;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),y+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(y),h=0,d=0;h<y;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),l<128?o[h++]=l:l<2048?(o[h++]=192|l>>>6,o[h++]=128|l&63):l<65536?(o[h++]=224|l>>>12,o[h++]=128|l>>>6&63,o[h++]=128|l&63):(o[h++]=240|l>>>18,o[h++]=128|l>>>12&63,o[h++]=128|l>>>6&63,o[h++]=128|l&63);return o};function i(s,o){if(o<65534&&(s.subarray&&n||!s.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(s,o));for(var l="",u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l}return vd.buf2binstring=function(s){return i(s,s.length)},vd.binstring2buf=function(s){for(var o=new e.Buf8(s.length),l=0,u=o.length;l<u;l++)o[l]=s.charCodeAt(l);return o},vd.buf2string=function(s,o){var l,u,d,h,m=o||s.length,y=new Array(m*2);for(u=0,l=0;l<m;){if(d=s[l++],d<128){y[u++]=d;continue}if(h=r[d],h>4){y[u++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<m;)d=d<<6|s[l++]&63,h--;if(h>1){y[u++]=65533;continue}d<65536?y[u++]=d:(d-=65536,y[u++]=55296|d>>10&1023,y[u++]=56320|d&1023)}return i(y,u)},vd.utf8border=function(s,o){var l;for(o=o||s.length,o>s.length&&(o=s.length),l=o-1;l>=0&&(s[l]&192)===128;)l--;return l<0||l===0?o:l+r[s[l]]>o?l:o},vd}var M2,g4;function O5(){if(g4)return M2;g4=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return M2=e,M2}var y4;function Ure(){if(y4)return ih;y4=1;var e=zre(),t=$u(),n=j5(),r=jT(),a=O5(),i=Object.prototype.toString,s=0,o=4,l=0,u=1,d=2,h=-1,m=0,y=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==l)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var T;if(typeof E.dictionary=="string"?T=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?T=new Uint8Array(E.dictionary):T=E.dictionary,C=e.deflateSetDictionary(this.strm,T),C!==l)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,T=this.options.chunkSize,j,I;if(this.ended)return!1;I=E===~~E?E:E===!0?o:s,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(T),C.next_out=0,C.avail_out=T),j=e.deflate(C,I),j!==u&&j!==l)return this.onEnd(j),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(I===o||I===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&j!==u);return I===o?(j=e.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===l):(I===d&&(this.onEnd(l),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function b(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function x(S,E){return E=E||{},E.raw=!0,b(S,E)}function w(S,E){return E=E||{},E.gzip=!0,b(S,E)}return ih.Deflate=v,ih.deflate=b,ih.deflateRaw=x,ih.gzip=w,ih}var sh={},Ss={},P2,b4;function qre(){if(b4)return P2;b4=1;var e=30,t=12;return P2=function(r,a){var i,s,o,l,u,d,h,m,y,v,b,x,w,S,E,C,T,j,I,R,F,B,H,D,Z;i=r.state,s=r.next_in,D=r.input,o=s+(r.avail_in-5),l=r.next_out,Z=r.output,u=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,m=i.wsize,y=i.whave,v=i.wnext,b=i.window,x=i.hold,w=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,T=(1<<i.distbits)-1;e:do{w<15&&(x+=D[s++]<<w,w+=8,x+=D[s++]<<w,w+=8),j=S[x&C];t:for(;;){if(I=j>>>24,x>>>=I,w-=I,I=j>>>16&255,I===0)Z[l++]=j&65535;else if(I&16){R=j&65535,I&=15,I&&(w<I&&(x+=D[s++]<<w,w+=8),R+=x&(1<<I)-1,x>>>=I,w-=I),w<15&&(x+=D[s++]<<w,w+=8,x+=D[s++]<<w,w+=8),j=E[x&T];n:for(;;){if(I=j>>>24,x>>>=I,w-=I,I=j>>>16&255,I&16){if(F=j&65535,I&=15,w<I&&(x+=D[s++]<<w,w+=8,w<I&&(x+=D[s++]<<w,w+=8)),F+=x&(1<<I)-1,F>h){r.msg="invalid distance too far back",i.mode=e;break e}if(x>>>=I,w-=I,I=l-u,F>I){if(I=F-I,I>y&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(B=0,H=b,v===0){if(B+=m-I,I<R){R-=I;do Z[l++]=b[B++];while(--I);B=l-F,H=Z}}else if(v<I){if(B+=m+v-I,I-=v,I<R){R-=I;do Z[l++]=b[B++];while(--I);if(B=0,v<R){I=v,R-=I;do Z[l++]=b[B++];while(--I);B=l-F,H=Z}}}else if(B+=v-I,I<R){R-=I;do Z[l++]=b[B++];while(--I);B=l-F,H=Z}for(;R>2;)Z[l++]=H[B++],Z[l++]=H[B++],Z[l++]=H[B++],R-=3;R&&(Z[l++]=H[B++],R>1&&(Z[l++]=H[B++]))}else{B=l-F;do Z[l++]=Z[B++],Z[l++]=Z[B++],Z[l++]=Z[B++],R-=3;while(R>2);R&&(Z[l++]=Z[B++],R>1&&(Z[l++]=Z[B++]))}}else if((I&64)===0){j=E[(j&65535)+(x&(1<<I)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((I&64)===0){j=S[(j&65535)+(x&(1<<I)-1)];continue t}else if(I&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(s<o&&l<d);R=w>>3,s-=R,w-=R<<3,x&=(1<<w)-1,r.next_in=s,r.next_out=l,r.avail_in=s<o?5+(o-s):5-(s-o),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=x,i.bits=w},P2}var F2,v4;function Hre(){if(v4)return F2;v4=1;var e=$u(),t=15,n=852,r=592,a=0,i=1,s=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return F2=function(m,y,v,b,x,w,S,E){var C=E.bits,T=0,j=0,I=0,R=0,F=0,B=0,H=0,D=0,Z=0,V=0,ue,ae,ne,X,ie,L=null,J=0,Q,ee=new e.Buf16(t+1),fe=new e.Buf16(t+1),ve=null,Oe=0,Ae,Ne,Ce;for(T=0;T<=t;T++)ee[T]=0;for(j=0;j<b;j++)ee[y[v+j]]++;for(F=C,R=t;R>=1&&ee[R]===0;R--);if(F>R&&(F=R),R===0)return x[w++]=1<<24|64<<16|0,x[w++]=1<<24|64<<16|0,E.bits=1,0;for(I=1;I<R&&ee[I]===0;I++);for(F<I&&(F=I),D=1,T=1;T<=t;T++)if(D<<=1,D-=ee[T],D<0)return-1;if(D>0&&(m===a||R!==1))return-1;for(fe[1]=0,T=1;T<t;T++)fe[T+1]=fe[T]+ee[T];for(j=0;j<b;j++)y[v+j]!==0&&(S[fe[y[v+j]]++]=j);if(m===a?(L=ve=S,Q=19):m===i?(L=o,J-=257,ve=l,Oe-=257,Q=256):(L=u,ve=d,Q=-1),V=0,j=0,T=I,ie=w,B=F,H=0,ne=-1,Z=1<<F,X=Z-1,m===i&&Z>n||m===s&&Z>r)return 1;for(;;){Ae=T-H,S[j]<Q?(Ne=0,Ce=S[j]):S[j]>Q?(Ne=ve[Oe+S[j]],Ce=L[J+S[j]]):(Ne=96,Ce=0),ue=1<<T-H,ae=1<<B,I=ae;do ae-=ue,x[ie+(V>>H)+ae]=Ae<<24|Ne<<16|Ce|0;while(ae!==0);for(ue=1<<T-1;V&ue;)ue>>=1;if(ue!==0?(V&=ue-1,V+=ue):V=0,j++,--ee[T]===0){if(T===R)break;T=y[v+S[j]]}if(T>F&&(V&X)!==ne){for(H===0&&(H=F),ie+=I,B=T-H,D=1<<B;B+H<R&&(D-=ee[B+H],!(D<=0));)B++,D<<=1;if(Z+=1<<B,m===i&&Z>n||m===s&&Z>r)return 1;ne=V&X,x[ne]=F<<24|B<<16|ie-w|0}}return V!==0&&(x[ie+V]=T-H<<24|64<<16|0),E.bits=F,0},F2}var w4;function Vre(){if(w4)return Ss;w4=1;var e=$u(),t=R5(),n=I5(),r=qre(),a=Hre(),i=0,s=1,o=2,l=4,u=5,d=6,h=0,m=1,y=2,v=-2,b=-3,x=-4,w=-5,S=8,E=1,C=2,T=3,j=4,I=5,R=6,F=7,B=8,H=9,D=10,Z=11,V=12,ue=13,ae=14,ne=15,X=16,ie=17,L=18,J=19,Q=20,ee=21,fe=22,ve=23,Oe=24,Ae=25,Ne=26,Ce=27,Pe=28,Qe=29,Le=30,Ie=31,z=32,Se=852,Te=592,de=15,se=de;function te(be){return(be>>>24&255)+(be>>>8&65280)+((be&65280)<<8)+((be&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Fe(be){var ke;return!be||!be.state?v:(ke=be.state,be.total_in=be.total_out=ke.total=0,be.msg="",ke.wrap&&(be.adler=ke.wrap&1),ke.mode=E,ke.last=0,ke.havedict=0,ke.dmax=32768,ke.head=null,ke.hold=0,ke.bits=0,ke.lencode=ke.lendyn=new e.Buf32(Se),ke.distcode=ke.distdyn=new e.Buf32(Te),ke.sane=1,ke.back=-1,h)}function Ee(be){var ke;return!be||!be.state?v:(ke=be.state,ke.wsize=0,ke.whave=0,ke.wnext=0,Fe(be))}function Ge(be,ke){var le,ft;return!be||!be.state||(ft=be.state,ke<0?(le=0,ke=-ke):(le=(ke>>4)+1,ke<48&&(ke&=15)),ke&&(ke<8||ke>15))?v:(ft.window!==null&&ft.wbits!==ke&&(ft.window=null),ft.wrap=le,ft.wbits=ke,Ee(be))}function Nt(be,ke){var le,ft;return be?(ft=new xe,be.state=ft,ft.window=null,le=Ge(be,ke),le!==h&&(be.state=null),le):v}function it(be){return Nt(be,se)}var St=!0,Ft,Dt;function Zt(be){if(St){var ke;for(Ft=new e.Buf32(512),Dt=new e.Buf32(32),ke=0;ke<144;)be.lens[ke++]=8;for(;ke<256;)be.lens[ke++]=9;for(;ke<280;)be.lens[ke++]=7;for(;ke<288;)be.lens[ke++]=8;for(a(s,be.lens,0,288,Ft,0,be.work,{bits:9}),ke=0;ke<32;)be.lens[ke++]=5;a(o,be.lens,0,32,Dt,0,be.work,{bits:5}),St=!1}be.lencode=Ft,be.lenbits=9,be.distcode=Dt,be.distbits=5}function ye(be,ke,le,ft){var vt,P=be.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new e.Buf8(P.wsize)),ft>=P.wsize?(e.arraySet(P.window,ke,le-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(vt=P.wsize-P.wnext,vt>ft&&(vt=ft),e.arraySet(P.window,ke,le-ft,vt,P.wnext),ft-=vt,ft?(e.arraySet(P.window,ke,le-ft,ft,0),P.wnext=ft,P.whave=P.wsize):(P.wnext+=vt,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=vt))),0}function O(be,ke){var le,ft,vt,P,Be,nt,ge,De,Ke,Ot,me,G,q,W,pe=0,Re,qe,pt,Wt,ut,It,Lt,en,Nn=new e.Buf8(4),Kn,xr,_r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!be||!be.state||!be.output||!be.input&&be.avail_in!==0)return v;le=be.state,le.mode===V&&(le.mode=ue),Be=be.next_out,vt=be.output,ge=be.avail_out,P=be.next_in,ft=be.input,nt=be.avail_in,De=le.hold,Ke=le.bits,Ot=nt,me=ge,en=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=ue;break}for(;Ke<16;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if(le.wrap&2&&De===35615){le.check=0,Nn[0]=De&255,Nn[1]=De>>>8&255,le.check=n(le.check,Nn,2,0),De=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((De&255)<<8)+(De>>8))%31){be.msg="incorrect header check",le.mode=Le;break}if((De&15)!==S){be.msg="unknown compression method",le.mode=Le;break}if(De>>>=4,Ke-=4,Lt=(De&15)+8,le.wbits===0)le.wbits=Lt;else if(Lt>le.wbits){be.msg="invalid window size",le.mode=Le;break}le.dmax=1<<Lt,be.adler=le.check=1,le.mode=De&512?D:V,De=0,Ke=0;break;case C:for(;Ke<16;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if(le.flags=De,(le.flags&255)!==S){be.msg="unknown compression method",le.mode=Le;break}if(le.flags&57344){be.msg="unknown header flags set",le.mode=Le;break}le.head&&(le.head.text=De>>8&1),le.flags&512&&(Nn[0]=De&255,Nn[1]=De>>>8&255,le.check=n(le.check,Nn,2,0)),De=0,Ke=0,le.mode=T;case T:for(;Ke<32;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}le.head&&(le.head.time=De),le.flags&512&&(Nn[0]=De&255,Nn[1]=De>>>8&255,Nn[2]=De>>>16&255,Nn[3]=De>>>24&255,le.check=n(le.check,Nn,4,0)),De=0,Ke=0,le.mode=j;case j:for(;Ke<16;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}le.head&&(le.head.xflags=De&255,le.head.os=De>>8),le.flags&512&&(Nn[0]=De&255,Nn[1]=De>>>8&255,le.check=n(le.check,Nn,2,0)),De=0,Ke=0,le.mode=I;case I:if(le.flags&1024){for(;Ke<16;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}le.length=De,le.head&&(le.head.extra_len=De),le.flags&512&&(Nn[0]=De&255,Nn[1]=De>>>8&255,le.check=n(le.check,Nn,2,0)),De=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=R;case R:if(le.flags&1024&&(G=le.length,G>nt&&(G=nt),G&&(le.head&&(Lt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ft,P,G,Lt)),le.flags&512&&(le.check=n(le.check,ft,G,P)),nt-=G,P+=G,le.length-=G),le.length))break e;le.length=0,le.mode=F;case F:if(le.flags&2048){if(nt===0)break e;G=0;do Lt=ft[P+G++],le.head&&Lt&&le.length<65536&&(le.head.name+=String.fromCharCode(Lt));while(Lt&&G<nt);if(le.flags&512&&(le.check=n(le.check,ft,G,P)),nt-=G,P+=G,Lt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=B;case B:if(le.flags&4096){if(nt===0)break e;G=0;do Lt=ft[P+G++],le.head&&Lt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Lt));while(Lt&&G<nt);if(le.flags&512&&(le.check=n(le.check,ft,G,P)),nt-=G,P+=G,Lt)break e}else le.head&&(le.head.comment=null);le.mode=H;case H:if(le.flags&512){for(;Ke<16;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if(De!==(le.check&65535)){be.msg="header crc mismatch",le.mode=Le;break}De=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),be.adler=le.check=0,le.mode=V;break;case D:for(;Ke<32;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}be.adler=le.check=te(De),De=0,Ke=0,le.mode=Z;case Z:if(le.havedict===0)return be.next_out=Be,be.avail_out=ge,be.next_in=P,be.avail_in=nt,le.hold=De,le.bits=Ke,y;be.adler=le.check=1,le.mode=V;case V:if(ke===u||ke===d)break e;case ue:if(le.last){De>>>=Ke&7,Ke-=Ke&7,le.mode=Ce;break}for(;Ke<3;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}switch(le.last=De&1,De>>>=1,Ke-=1,De&3){case 0:le.mode=ae;break;case 1:if(Zt(le),le.mode=Q,ke===d){De>>>=2,Ke-=2;break e}break;case 2:le.mode=ie;break;case 3:be.msg="invalid block type",le.mode=Le}De>>>=2,Ke-=2;break;case ae:for(De>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if((De&65535)!==(De>>>16^65535)){be.msg="invalid stored block lengths",le.mode=Le;break}if(le.length=De&65535,De=0,Ke=0,le.mode=ne,ke===d)break e;case ne:le.mode=X;case X:if(G=le.length,G){if(G>nt&&(G=nt),G>ge&&(G=ge),G===0)break e;e.arraySet(vt,ft,P,G,Be),nt-=G,P+=G,ge-=G,Be+=G,le.length-=G;break}le.mode=V;break;case ie:for(;Ke<14;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if(le.nlen=(De&31)+257,De>>>=5,Ke-=5,le.ndist=(De&31)+1,De>>>=5,Ke-=5,le.ncode=(De&15)+4,De>>>=4,Ke-=4,le.nlen>286||le.ndist>30){be.msg="too many length or distance symbols",le.mode=Le;break}le.have=0,le.mode=L;case L:for(;le.have<le.ncode;){for(;Ke<3;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}le.lens[_r[le.have++]]=De&7,De>>>=3,Ke-=3}for(;le.have<19;)le.lens[_r[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,Kn={bits:le.lenbits},en=a(i,le.lens,0,19,le.lencode,0,le.work,Kn),le.lenbits=Kn.bits,en){be.msg="invalid code lengths set",le.mode=Le;break}le.have=0,le.mode=J;case J:for(;le.have<le.nlen+le.ndist;){for(;pe=le.lencode[De&(1<<le.lenbits)-1],Re=pe>>>24,qe=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if(pt<16)De>>>=Re,Ke-=Re,le.lens[le.have++]=pt;else{if(pt===16){for(xr=Re+2;Ke<xr;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if(De>>>=Re,Ke-=Re,le.have===0){be.msg="invalid bit length repeat",le.mode=Le;break}Lt=le.lens[le.have-1],G=3+(De&3),De>>>=2,Ke-=2}else if(pt===17){for(xr=Re+3;Ke<xr;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}De>>>=Re,Ke-=Re,Lt=0,G=3+(De&7),De>>>=3,Ke-=3}else{for(xr=Re+7;Ke<xr;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}De>>>=Re,Ke-=Re,Lt=0,G=11+(De&127),De>>>=7,Ke-=7}if(le.have+G>le.nlen+le.ndist){be.msg="invalid bit length repeat",le.mode=Le;break}for(;G--;)le.lens[le.have++]=Lt}}if(le.mode===Le)break;if(le.lens[256]===0){be.msg="invalid code -- missing end-of-block",le.mode=Le;break}if(le.lenbits=9,Kn={bits:le.lenbits},en=a(s,le.lens,0,le.nlen,le.lencode,0,le.work,Kn),le.lenbits=Kn.bits,en){be.msg="invalid literal/lengths set",le.mode=Le;break}if(le.distbits=6,le.distcode=le.distdyn,Kn={bits:le.distbits},en=a(o,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,Kn),le.distbits=Kn.bits,en){be.msg="invalid distances set",le.mode=Le;break}if(le.mode=Q,ke===d)break e;case Q:le.mode=ee;case ee:if(nt>=6&&ge>=258){be.next_out=Be,be.avail_out=ge,be.next_in=P,be.avail_in=nt,le.hold=De,le.bits=Ke,r(be,me),Be=be.next_out,vt=be.output,ge=be.avail_out,P=be.next_in,ft=be.input,nt=be.avail_in,De=le.hold,Ke=le.bits,le.mode===V&&(le.back=-1);break}for(le.back=0;pe=le.lencode[De&(1<<le.lenbits)-1],Re=pe>>>24,qe=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if(qe&&(qe&240)===0){for(Wt=Re,ut=qe,It=pt;pe=le.lencode[It+((De&(1<<Wt+ut)-1)>>Wt)],Re=pe>>>24,qe=pe>>>16&255,pt=pe&65535,!(Wt+Re<=Ke);){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}De>>>=Wt,Ke-=Wt,le.back+=Wt}if(De>>>=Re,Ke-=Re,le.back+=Re,le.length=pt,qe===0){le.mode=Ne;break}if(qe&32){le.back=-1,le.mode=V;break}if(qe&64){be.msg="invalid literal/length code",le.mode=Le;break}le.extra=qe&15,le.mode=fe;case fe:if(le.extra){for(xr=le.extra;Ke<xr;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}le.length+=De&(1<<le.extra)-1,De>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=ve;case ve:for(;pe=le.distcode[De&(1<<le.distbits)-1],Re=pe>>>24,qe=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if((qe&240)===0){for(Wt=Re,ut=qe,It=pt;pe=le.distcode[It+((De&(1<<Wt+ut)-1)>>Wt)],Re=pe>>>24,qe=pe>>>16&255,pt=pe&65535,!(Wt+Re<=Ke);){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}De>>>=Wt,Ke-=Wt,le.back+=Wt}if(De>>>=Re,Ke-=Re,le.back+=Re,qe&64){be.msg="invalid distance code",le.mode=Le;break}le.offset=pt,le.extra=qe&15,le.mode=Oe;case Oe:if(le.extra){for(xr=le.extra;Ke<xr;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}le.offset+=De&(1<<le.extra)-1,De>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){be.msg="invalid distance too far back",le.mode=Le;break}le.mode=Ae;case Ae:if(ge===0)break e;if(G=me-ge,le.offset>G){if(G=le.offset-G,G>le.whave&&le.sane){be.msg="invalid distance too far back",le.mode=Le;break}G>le.wnext?(G-=le.wnext,q=le.wsize-G):q=le.wnext-G,G>le.length&&(G=le.length),W=le.window}else W=vt,q=Be-le.offset,G=le.length;G>ge&&(G=ge),ge-=G,le.length-=G;do vt[Be++]=W[q++];while(--G);le.length===0&&(le.mode=ee);break;case Ne:if(ge===0)break e;vt[Be++]=le.length,ge--,le.mode=ee;break;case Ce:if(le.wrap){for(;Ke<32;){if(nt===0)break e;nt--,De|=ft[P++]<<Ke,Ke+=8}if(me-=ge,be.total_out+=me,le.total+=me,me&&(be.adler=le.check=le.flags?n(le.check,vt,me,Be-me):t(le.check,vt,me,Be-me)),me=ge,(le.flags?De:te(De))!==le.check){be.msg="incorrect data check",le.mode=Le;break}De=0,Ke=0}le.mode=Pe;case Pe:if(le.wrap&&le.flags){for(;Ke<32;){if(nt===0)break e;nt--,De+=ft[P++]<<Ke,Ke+=8}if(De!==(le.total&4294967295)){be.msg="incorrect length check",le.mode=Le;break}De=0,Ke=0}le.mode=Qe;case Qe:en=m;break e;case Le:en=b;break e;case Ie:return x;case z:default:return v}return be.next_out=Be,be.avail_out=ge,be.next_in=P,be.avail_in=nt,le.hold=De,le.bits=Ke,(le.wsize||me!==be.avail_out&&le.mode<Le&&(le.mode<Ce||ke!==l))&&ye(be,be.output,be.next_out,me-be.avail_out),Ot-=be.avail_in,me-=be.avail_out,be.total_in+=Ot,be.total_out+=me,le.total+=me,le.wrap&&me&&(be.adler=le.check=le.flags?n(le.check,vt,me,be.next_out-me):t(le.check,vt,me,be.next_out-me)),be.data_type=le.bits+(le.last?64:0)+(le.mode===V?128:0)+(le.mode===Q||le.mode===ne?256:0),(Ot===0&&me===0||ke===l)&&en===h&&(en=w),en}function K(be){if(!be||!be.state)return v;var ke=be.state;return ke.window&&(ke.window=null),be.state=null,h}function he(be,ke){var le;return!be||!be.state||(le=be.state,(le.wrap&2)===0)?v:(le.head=ke,ke.done=!1,h)}function je(be,ke){var le=ke.length,ft,vt,P;return!be||!be.state||(ft=be.state,ft.wrap!==0&&ft.mode!==Z)?v:ft.mode===Z&&(vt=1,vt=t(vt,ke,le,0),vt!==ft.check)?b:(P=ye(be,ke,le,le),P?(ft.mode=Ie,x):(ft.havedict=1,h))}return Ss.inflateReset=Ee,Ss.inflateReset2=Ge,Ss.inflateResetKeep=Fe,Ss.inflateInit=it,Ss.inflateInit2=Nt,Ss.inflate=O,Ss.inflateEnd=K,Ss.inflateGetHeader=he,Ss.inflateSetDictionary=je,Ss.inflateInfo="pako inflate (from Nodeca project)",Ss}var L2,x4;function D5(){return x4||(x4=1,L2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),L2}var $2,_4;function Gre(){if(_4)return $2;_4=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return $2=e,$2}var S4;function Kre(){if(S4)return sh;S4=1;var e=Vre(),t=$u(),n=j5(),r=D5(),a=jT(),i=O5(),s=Gre(),o=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var y=e.inflateInit2(this.strm,m.windowBits);if(y!==r.Z_OK)throw new Error(a[y]);if(this.header=new s,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):o.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(y=e.inflateSetDictionary(this.strm,m.dictionary),y!==r.Z_OK)))throw new Error(a[y])}l.prototype.push=function(h,m){var y=this.strm,v=this.options.chunkSize,b=this.options.dictionary,x,w,S,E,C,T=!1;if(this.ended)return!1;w=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?y.input=n.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?y.input=new Uint8Array(h):y.input=h,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new t.Buf8(v),y.next_out=0,y.avail_out=v),x=e.inflate(y,r.Z_NO_FLUSH),x===r.Z_NEED_DICT&&b&&(x=e.inflateSetDictionary(this.strm,b)),x===r.Z_BUF_ERROR&&T===!0&&(x=r.Z_OK,T=!1),x!==r.Z_STREAM_END&&x!==r.Z_OK)return this.onEnd(x),this.ended=!0,!1;y.next_out&&(y.avail_out===0||x===r.Z_STREAM_END||y.avail_in===0&&(w===r.Z_FINISH||w===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(y.output,y.next_out),E=y.next_out-S,C=n.buf2string(y.output,S),y.next_out=E,y.avail_out=v-E,E&&t.arraySet(y.output,y.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(y.output,y.next_out))),y.avail_in===0&&y.avail_out===0&&(T=!0)}while((y.avail_in>0||y.avail_out===0)&&x!==r.Z_STREAM_END);return x===r.Z_STREAM_END&&(w=r.Z_FINISH),w===r.Z_FINISH?(x=e.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===r.Z_OK):(w===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),y.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function u(h,m){var y=new l(m);if(y.push(h,!0),y.err)throw y.msg||a[y.err];return y.result}function d(h,m){return m=m||{},m.raw=!0,u(h,m)}return sh.Inflate=l,sh.inflate=u,sh.inflateRaw=d,sh.ungzip=u,sh}var B2,E4;function Wre(){if(E4)return B2;E4=1;var e=$u().assign,t=Ure(),n=Kre(),r=D5(),a={};return e(a,t,n,r),B2=a,B2}var Zre=Wre();const OT=ui(Zre);var z2,C4;function Yre(){if(C4)return z2;C4=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,s)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):n.errorFirst?r.push((o,l)=>{o?s(o):i(l)}):r.push(i),t.apply(this,r)})};return z2=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=s=>{const o=l=>typeof l=="string"?s===l:l.test(s);return n.include?n.include.some(o):!n.exclude.some(o)};let i;r==="function"?i=function(...s){return n.excludeMain?t(...s):e(t,n).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&a(s)?e(o,n):o}return i},z2}var Xre=Yre();const U2=ui(Xre);var q2,k4;function Jre(){if(k4)return q2;k4=1;var e={};function t(ne){return Array.isArray(ne)?ne:[ne]}const n="",r=" ",a="\\",i=/^\s+$/,s=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,u=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const y=m,v=(ne,X,ie)=>Object.defineProperty(ne,X,{value:ie}),b=/([0-z])-([0-z])/g,x=()=>!1,w=ne=>ne.replace(b,(X,ie,L)=>ie.charCodeAt(0)<=L.charCodeAt(0)?X:n),S=ne=>{const{length:X}=ne;return ne.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ne,X,ie)=>X+(ie.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(ne,X)=>{const{length:ie}=X;return X.slice(0,ie-ie%2)+r}],[/[\\$.|*+(){^]/g,ne=>`\\${ne}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ne,X,ie)=>X+6<ie.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ne,X,ie)=>{const L=ie.replace(/\\\*/g,"[^\\/]*");return X+L}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ne,X,ie,L,J)=>X===a?`\\[${ie}${S(L)}${J}`:J==="]"&&L.length%2===0?`[${w(ie)}${L}]`:"[]"],[/(?:[^*])$/,ne=>/\/$/.test(ne)?`${ne}$`:`${ne}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ne,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),T=(ne,X)=>{let ie=C[ne];return ie||(ie=E.reduce((L,[J,Q])=>L.replace(J,Q.bind(ne)),ne),C[ne]=ie),X?new RegExp(ie,"i"):new RegExp(ie)},j=ne=>typeof ne=="string",I=ne=>ne&&j(ne)&&!i.test(ne)&&!s.test(ne)&&ne.indexOf("#")!==0,R=ne=>ne.split(u);class F{constructor(X,ie,L,J){this.origin=X,this.pattern=ie,this.negative=L,this.regex=J}}const B=(ne,X)=>{const ie=ne;let L=!1;ne.indexOf("!")===0&&(L=!0,ne=ne.substr(1)),ne=ne.replace(o,"!").replace(l,"#");const J=T(ne,X);return new F(ie,ne,L,J)},H=(ne,X)=>{throw new X(ne)},D=(ne,X,ie)=>j(ne)?ne?D.isNotRelative(ne)?ie(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:ie("path must not be empty",TypeError):ie(`path must be a string, but got \`${X}\``,TypeError),Z=ne=>d.test(ne);D.isNotRelative=Z,D.convert=ne=>ne;class V{constructor({ignorecase:X=!0,ignoreCase:ie=X,allowRelativePaths:L=!1}={}){v(this,y,!0),this._rules=[],this._ignoreCase=ie,this._allowRelativePaths=L,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[y]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(I(X)){const ie=B(X,this._ignoreCase);this._added=!0,this._rules.push(ie)}}add(X){return this._added=!1,t(j(X)?R(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,ie){let L=!1,J=!1;return this._rules.forEach(Q=>{const{negative:ee}=Q;if(J===ee&&L!==J||ee&&!L&&!J&&!ie)return;Q.regex.test(X)&&(L=!ee,J=ee)}),{ignored:L,unignored:J}}_test(X,ie,L,J){const Q=X&&D.convert(X);return D(Q,X,this._allowRelativePaths?x:H),this._t(Q,ie,L,J)}_t(X,ie,L,J){if(X in ie)return ie[X];if(J||(J=X.split(h)),J.pop(),!J.length)return ie[X]=this._testOne(X,L);const Q=this._t(J.join(h)+h,ie,L,J);return ie[X]=Q.ignored?Q:this._testOne(X,L)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const ue=ne=>new V(ne),ae=ne=>D(ne&&D.convert(ne),ne,x);if(ue.isPathValid=ae,ue.default=ue,q2=ue,typeof ea<"u"&&(e&&e.IGNORE_TEST_WIN32||ea.platform==="win32")){const ne=ie=>/^\\\\\?\\/.test(ie)||/["<>|\u0000-\u001F]+/u.test(ie)?ie:ie.replace(/\\/g,"/");D.convert=ne;const X=/^[a-z]:\//i;D.isNotRelative=ie=>X.test(ie)||Z(ie)}return q2}var Qre=Jre();const eae=ui(Qre);var H2,T4;function tae(){if(T4)return H2;T4=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return H2=n,H2}var nae=tae();const Vo=ui(nae);var V2,A4;function rae(){return A4||(A4=1,V2=function(e,t){var n=e,r=t,a=n.length,i=r.length,s=!1,o=null,l=a+1,u=[],d=[],h=[],m="",y=-1,v=0,b=1,x,w,S=function(){a>=i&&(x=n,w=a,n=r,r=x,a=i,i=w,s=!0,l=a+1)},E=function(I,R,F){return{x:I,y:R,k:F}},C=function(I,R){return{elem:I,t:R}},T=function(I,R,F){var B,H,D;for(R>F?B=u[I-1+l]:B=u[I+1+l],D=Math.max(R,F),H=D-I;H<a&&D<i&&n[H]===r[D];)++H,++D;return u[I+l]=d.length,d[d.length]=new E(H,D,B),D},j=function(I){var R,F,B;for(R=F=0,B=I.length-1;B>=0;--B)for(;R<I[B].x||F<I[B].y;)I[B].y-I[B].x>F-R?(s?h[h.length]=new C(r[F],y):h[h.length]=new C(r[F],b),++F):I[B].y-I[B].x<F-R?(s?h[h.length]=new C(n[R],b):h[h.length]=new C(n[R],y),++R):(h[h.length]=new C(n[R],v),m+=n[R],++R,++F)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return m},getses:function(){return h},compose:function(){var I,R,F,B,H,D,Z,V;for(I=i-a,R=a+i+3,F={},Z=0;Z<R;++Z)F[Z]=-1,u[Z]=-1;B=-1;do{for(++B,V=-B;V<=I-1;++V)F[V+l]=T(V,F[V-1+l]+1,F[V+1+l]);for(V=I+B;V>=I+1;--V)F[V+l]=T(V,F[V-1+l]+1,F[V+1+l]);F[I+l]=T(I,F[I-1+l]+1,F[I+1+l])}while(F[I+l]!==i);for(o=I+2*B,H=u[I+l],D=[];H!==-1;)D[D.length]=new E(d[H].x,d[H].y,null),H=d[H].k;j(D)}}}),V2}var G2,N4;function aae(){if(N4)return G2;N4=1;var e=rae();function t(i,s){var o=new e(i,s);o.compose();for(var l=o.getses(),u,d,h=i.length-1,m=s.length-1,y=l.length-1;y>=0;--y)l[y].t===o.SES_COMMON?(d?(d.chain={file1index:h,file2index:m,chain:null},d=d.chain):(u={file1index:h,file2index:m,chain:null},d=u),h--,m--):l[y].t===o.SES_DELETE?h--:l[y].t===o.SES_ADD&&m--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,u):v}function n(i,s){for(var o=[],l=i.length,u=s.length,d=t(i,s);d!==null;d=d.chain){var h=l-d.file1index-1,m=u-d.file2index-1;l=d.file1index,u=d.file2index,(h||m)&&o.push({file1:[l+1,h],file2:[u+1,m]})}return o.reverse(),o}function r(i,s,o){var l,u=n(s,i),d=n(s,o),h=[];function m(X,ie){h.push([X.file1[0],ie,X.file1[1],X.file2[0],X.file2[1]])}for(l=0;l<u.length;l++)m(u[l],0);for(l=0;l<d.length;l++)m(d[l],2);h.sort(function(X,ie){return X[0]-ie[0]});var y=[],v=0;function b(X){X>v&&(y.push([1,v,X-v]),v=X)}for(var x=0;x<h.length;x++){for(var w=x,S=h[x],E=S[0],C=E+S[2];x<h.length-1;){var T=h[x+1],j=T[0];if(j>C)break;C=Math.max(C,j+T[2]),x++}if(b(E),w==x)S[4]>0&&y.push([S[1],S[3],S[4]]);else{var I={0:[i.length,-1,s.length,-1],2:[o.length,-1,s.length,-1]};for(l=w;l<=x;l++){S=h[l];var R=S[1],F=I[R],B=S[0],H=B+S[2],D=S[3],Z=D+S[4];F[0]=Math.min(D,F[0]),F[1]=Math.max(Z,F[1]),F[2]=Math.min(B,F[2]),F[3]=Math.max(H,F[3])}var V=I[0][0]+(E-I[0][2]),ue=I[0][1]+(C-I[0][3]),ae=I[2][0]+(E-I[2][2]),ne=I[2][1]+(C-I[2][3]);y.push([-1,V,ue-V,E,C-E,ae,ne-ae])}v=C}return b(s.length),y}function a(i,s,o){var l=[],u=[i,s,o],d=r(i,s,o),h=[];function m(){h.length&&l.push({ok:h}),h=[]}function y(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],T=0;T<S[2];T++)if(i[T+E]!=o[T+C])return!0;return!1}for(var b=0;b<d.length;b++){var x=d[b],w=x[0];w==-1?v(x)?(m(),l.push({conflict:{a:i.slice(x[1],x[1]+x[2]),aIndex:x[1],o:s.slice(x[3],x[3]+x[4]),oIndex:x[3],b:o.slice(x[5],x[5]+x[6]),bIndex:x[5]}})):y(u[0].slice(x[1],x[1]+x[2])):y(u[w].slice(x[1],x[1]+x[2]))}return m(),l}return G2=a,G2}var iae=aae();const sae=ui(iae);class sr extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new sr(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class j0 extends sr{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=j0.code,this.data={filepaths:t}}}j0.code="UnmergedPathsError";class jn extends sr{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=jn.code,this.data={message:t}}}jn.code="InternalError";class mp extends sr{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=mp.code,this.data={filepath:t}}}mp.code="UnsafeFilepathError";class Uo{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function Bx(e,t){return-(e<t)||+(e>t)}function M5(e,t){return Bx(e.path,t.path)}function P5(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const Do=2**32;function R4(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function qh(e){const[t,n]=R4(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=R4(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Do,ctimeNanoseconds:n%Do,mtimeSeconds:r%Do,mtimeNanoseconds:a%Do,dev:e.dev%Do,ino:e.ino%Do,mode:P5(e.mode%Do),uid:e.uid%Do,gid:e.gid%Do,size:e.size>-1?e.size%Do:0}}function oae(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let K2=null;async function ac(e){return K2===null&&(K2=await cae()),K2?F5(e):lae(e)}function lae(e){return new N5().update(e).digest("hex")}async function F5(e){const t=await crypto.subtle.digest("SHA-1",e);return oae(t)}async function cae(){try{if(await F5(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function uae(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function dae(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Jt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Cd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Jt.isBuffer(t))return Cd.fromBuffer(t);if(t===null)return new Cd(null);throw new jn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new jn("Index file is empty (.git/index)");const n=new Cd,r=new Uo(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new jn(`Invalid dircache magic file number: ${a}`);const i=await ac(t.slice(0,-20)),s=t.slice(-20).toString("hex");if(s!==i)throw new jn(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${i}`);const o=r.readUInt32BE();if(o!==2)throw new jn(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let u=0;for(;!r.eof()&&u<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=uae(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new jn(`Got a path length of: ${m}`);if(d.path=r.toString("utf8",m),d.path.includes("..\\")||d.path.includes("../"))throw new mp(d.path);let y=8-(r.tell()-12)%8;for(y===0&&(y=8);y--;){const v=r.readUInt8();if(v!==0)throw new jn(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new jn("Unexpected end of file")}d.stages=[],n._addEntry(d),u++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(M5)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=qh(n);const i=Jt.from(t),s={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Jt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Jt.alloc(r),i=new Uo(a),s=qh(t);return i.writeUInt32BE(s.ctimeSeconds),i.writeUInt32BE(s.ctimeNanoseconds),i.writeUInt32BE(s.mtimeSeconds),i.writeUInt32BE(s.mtimeNanoseconds),i.writeUInt32BE(s.dev),i.writeUInt32BE(s.ino),i.writeUInt32BE(s.mode),i.writeUInt32BE(s.uid),i.writeUInt32BE(s.gid),i.writeUInt32BE(s.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(dae(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Jt.alloc(12),n=new Uo(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(Cd._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(Cd._entryToBuffer(l));r=await Promise.all(r);const a=Jt.concat(r),i=Jt.concat([t,a]),s=await ac(i);return Jt.concat([i,Jt.from(s,"hex")])}}function xw(e,t,n=!0,r=!0){const a=qh(e),i=qh(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let W2=null;const Z2=Symbol("IndexCache");function fae(){return{map:new Map,stats:new Map}}async function hae(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Cd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function pae(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:xw(r,a)}class Ba{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[Z2]||(r[Z2]=fae());const s=`${n}/index`;W2===null&&(W2=new $g({maxPending:1/0}));let o,l=[];return await W2.acquire(s,async()=>{const u=r[Z2];await pae(t,s,u)&&await hae(t,s,u);const d=u.map.get(s);if(l=d.unmergedPaths,l.length&&!a)throw new j0(l);if(o=await i(d),d._dirty){const h=await d.toObject();await t.write(s,h),u.stats.set(s,await t.lstat(s)),d._dirty=!1}}),o}}function _w(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Hh(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function L5(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:_w(a),metadata:{},children:[]};t.set(a,i),i.parent=n(Hh(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const s={type:"blob",fullpath:a,basename:_w(a),metadata:i,parent:n(Hh(a)),children:[]};s.parent&&s.parent.children.push(s),t.set(a,s)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function mae(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new jn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class gae{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ba.acquire({fs:t,gitdir:n,cache:r},async function(i){return L5(i.entries)});const a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(s=>s.fullpath);return i.sort(Bx),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:qh(r.metadata);t._type=r.type==="tree"?"tree":mae(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const zx=Symbol("GitWalkSymbol");function gp(){const e=Object.create(null);return Object.defineProperty(e,zx,{value:function({fs:t,gitdir:n,cache:r}){return new gae({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class Nr extends sr{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Nr.code,this.data={what:t}}}Nr.code="NotFoundError";class Ai extends sr{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Ai.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}Ai.code="ObjectTypeError";class Cu extends sr{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Cu.code,this.data={value:t}}}Cu.code="InvalidOidError";class O0 extends sr{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=O0.code,this.data={remote:t}}}O0.code="NoRefspecError";class Sw{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Sw(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Ew{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,s]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=a==="*";if(l!==(s==="*"))throw new jn("Invalid refspec");return new Ew({remotePath:r,localPath:i,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class DT{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Ew.from(r));return new DT(n)}add(t){const n=Ew.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function yae(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const bae=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},qm=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},I4={core:{filemode:qm,bare:qm,logallrefupdates:qm,symlinks:qm,ignorecase:qm,bigFileThreshold:bae}},vae=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,wae=/^[A-Za-z0-9-.]+$/,xae=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,_ae=/^[A-Za-z][A-Za-z-]*$/,Sae=/^(.*?)( *[#;].*)$/,Eae=e=>{const t=vae.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},Cae=e=>{const t=xae.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=kae(r),i=Tae(a);return[n,i]}return null},kae=e=>{const t=Sae.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return j4(n)&&j4(r)?`${n}${r}`:n},j4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Tae=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",s=n==="\\"&&a[r+1]==='"';return i||s?t:t+n},""),O4=e=>e!=null?e.toLowerCase():null,jC=(e,t,n)=>[O4(e),t,O4(n)].filter(r=>r!=null).join("."),D4=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:jC(n,a,r),sectionPath:jC(n,a,null),isSection:!!n}},Aae=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class MT{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,s=null;const o=a.trim(),l=Eae(o),u=l!=null;if(u)[n,r]=l;else{const h=Cae(o);h!=null&&([i,s]=h)}const d=jC(n,r,i);return{line:a,isSection:u,section:n,subsection:r,name:i,value:s,path:d}}):[]}static from(t){return new MT(t)}async get(t,n=!1){const r=D4(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:s,value:o})=>{const l=I4[i]&&I4[i][s];return l?l(o):o});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:s,path:o,sectionPath:l,isSection:u}=D4(t),d=Aae(this.parsedConfig,h=>h.path===o);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],m=Object.assign({},h,{name:s,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,m):this.parsedConfig[d]=m}else{const h=this.parsedConfig.findIndex(y=>y.path===l),m={section:a,subsection:i,name:s,value:n,modified:!0,path:o};if(wae.test(a)&&_ae.test(s))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const y={isSection:u,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(y,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:s=!1})=>s?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class ga{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return MT.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const lv=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],Nae=["config","description","index","shallow","commondir"];let Y2;async function Jc(e,t){return Y2===void 0&&(Y2=new $g),Y2.acquire(e,t)}class Ut{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:u=!1}){for(const x of a.values())if(!x.match(/[0-9a-f]{40}/))throw new Cu(x);const d=await ga.get({fs:t,gitdir:n});if(!o){if(o=await d.getall(`remote.${r}.fetch`),o.length===0)throw new O0(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=DT.from(o),m=new Map;if(u){const x=await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ut.deleteRefs({fs:t,gitdir:n,refs:x.map(w=>`refs/tags/${w}`)})}if(s){for(const x of a.keys())if(x.startsWith("refs/tags")&&!x.endsWith("^{}")&&!await Ut.exists({fs:t,gitdir:n,ref:x})){const w=a.get(x);m.set(x,w)}}const y=h.translate([...a.keys()]);for(const[x,w]of y){const S=a.get(x);m.set(w,S)}const v=h.translate([...i.keys()]);for(const[x,w]of v){const S=i.get(x),E=h.translateOne(S);E&&m.set(w,`ref: ${E}`)}const b=[];if(l){for(const x of h.localNamespaces()){const w=(await Ut.listRefs({fs:t,gitdir:n,filepath:x})).map(S=>`${x}/${S}`);for(const S of w)m.has(S)||b.push(S)}b.length>0&&await Ut.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[x,w]of m)await Jc(x,async()=>t.write(Pt.join(n,x),`${w.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Cu(a);await Jc(r,async()=>t.write(Pt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Jc(r,async()=>t.write(Pt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ut.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Pt.join(n,o))));let a=await Jc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Sw.from(a),s=i.refs.size;for(const o of r)i.refs.has(o)&&i.delete(o);i.refs.size<s&&(a=i.toString(),await Jc("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ut.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ut.packedRefs({fs:t,gitdir:n}),s=lv(r).filter(o=>!Nae.includes(o));for(const o of s){const l=await Jc(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||i.get(o));if(l)return Ut.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new Nr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ut.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ut.packedRefs({fs:t,gitdir:n}),i=lv(r);for(const s of i)if(await Jc(s,async()=>t.exists(`${n}/${s}`))||a.has(s))return s;throw new Nr(r)}static async expandAgainstMap({ref:t,map:n}){const r=lv(t);for(const a of r)if(await n.has(a))return a;throw new Nr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ut.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=lv(t);for(const s of i){const o=a.get(s);if(o)return Ut.resolveAgainstMap({ref:o.trim(),fullref:s,depth:r,map:a})}throw new Nr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Jc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Sw.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ut.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(s=>s.replace(`${n}/${r}/`,""))}catch{i=[]}for(let s of(await a).keys())s.startsWith(r)&&(s=s.replace(r+"/",""),i.includes(s)||i.push(s));return i.sort(yae),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ut.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ut.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function Rae(e,t){return Bx(M4(e),M4(t))}function M4(e){return e.mode==="040000"?e.path+"/":e.path}function $5(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new jn(`Unexpected GitTree entry mode: ${e}`)}function Iae(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new jn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new jn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const s=$5(i),o=e.slice(r+1,a).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new mp(o);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:o,oid:l,type:s})}return t}function jae(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new jn(`Could not understand file mode: ${e}`)}function Oae(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=jae(e.mode),e.type||(e.type=$5(e.mode)),e}class Ui{constructor(t){if(Jt.isBuffer(t))this._entries=Iae(t);else if(Array.isArray(t))this._entries=t.map(Oae);else throw new jn("invalid type passed to GitTree constructor");this._entries.sort(M5)}static from(t){return new Ui(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Rae),Jt.concat(t.map(n=>{const r=Jt.from(n.mode.replace(/^0/,"")),a=Jt.from(" "),i=Jt.from(n.path,"utf8"),s=Jt.from([0]),o=Jt.from(n.oid,"hex");return Jt.concat([r,a,i,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class yp{static wrap({type:t,object:n}){return Jt.concat([Jt.from(`${t} ${n.byteLength.toString()}\0`),Jt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),s=t.length-(r+1);if(parseInt(i)!==s)throw new jn(`Length mismatch: expected ${i} bytes but got ${s} instead.`);return{type:a,object:Jt.from(t.slice(r+1))}}}async function B5({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Dae(e,t){const n=new Uo(e),r=P4(n);if(r!==t.byteLength)throw new jn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=P4(n);let i;const s=L4(n,t);if(s.byteLength===a)i=s;else{i=Jt.alloc(a);const o=new Uo(i);for(o.copy(s);!n.eof();)o.copy(L4(n,t));const l=o.tell();if(a!==l)throw new jn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function P4(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function F4(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function L4(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const s=F4(e,n&a,4);let o=F4(e,(n&i)>>4,3);return o===0&&(o=65536),t.slice(s,s+o)}else return e.slice(n)}function Mae(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function z5(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Mae(e)}class U5{constructor(t){if(typeof Jt>"u")throw new Error("Missing Buffer dependency");this.stream=z5(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Jt.alloc(0):(n&&(n=Jt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>Pae(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Jt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function Pae(e){return e.reduce((t,n)=>t+n.length,0)}async function Fae(e,t){const n=new U5(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new jn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new jn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const s=n.tell(),{type:o,length:l,ofs:u,reference:d}=await Lae(n),h=new OT.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new jn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new jn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const y=n.tell();await t({data:h.result,type:o,num:i,offset:s,end:y,reference:d,ofs:u})}}}}async function Lae(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let s=4;do t=await e.byte(),r|=(t&127)<<s,s+=7;while(t&128)}let a,i;if(n===6){let s=0;a=0;const o=[];do t=await e.byte(),a|=(t&127)<<s,s+=7,o.push(t);while(t&128);i=Jt.from(o)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function q5(e){return OT.inflate(e)}function $ae(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function Bae(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Vh{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new Uo(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new jn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new jn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const s=r.readUInt32BE(),o=[];for(let d=0;d<s;d++){const h=r.slice(20).toString("hex");o[d]=h}r.seek(r.tell()+4*s);const l=new Map;for(let d=0;d<s;d++)l.set(o[d],r.readUInt32BE());const u=r.slice(20).toString("hex");return new Vh({hashes:o,crcs:{},offsets:l,packfileSha:u,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},s=t.slice(-20).toString("hex"),o=[],l={},u=new Map;let d=null,h=null;await Fae([t],async({data:x,type:w,reference:S,offset:E,num:C})=>{d===null&&(d=C);const T=Math.floor((d-C)*100/d);T!==h&&r&&await r({phase:"Receiving objects",loaded:d-C,total:d}),h=T,w=a[w],["commit","tree","blob","tag"].includes(w)?i[E]={type:w,offset:E}:w==="ofs-delta"?i[E]={type:w,offset:E}:w==="ref-delta"&&(i[E]={type:w,offset:E})});const m=Object.keys(i).map(Number);for(const[x,w]of m.entries()){const S=x+1===m.length?t.byteLength-20:m[x+1],E=i[w],C=$re.buf(t.slice(w,S))>>>0;E.end=S,E.crc=C}const y=new Vh({pack:Promise.resolve(t),packfileSha:s,crcs:l,hashes:o,offsets:u,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let x in i){x=Number(x);const w=Math.floor(v*100/d);w!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=w;const S=i[x];if(!S.oid)try{y.readDepth=0,y.externalReadDepth=0;const{type:E,object:C}=await y.readSlice({start:x});b[y.readDepth]+=1;const T=await ac(yp.wrap({type:E,object:C}));S.oid=T,o.push(T),u.set(T,x),l[T]=S.crc}catch{continue}}return o.sort(),y}async toBuffer(){const t=[],n=(u,d)=>{t.push(Jt.from(u,d))};n("ff744f63","hex"),n("00000002","hex");const r=new Uo(Jt.alloc(256*4));for(let u=0;u<256;u++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=u&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const u of this.hashes)n(u,"hex");const a=new Uo(Jt.alloc(this.hashes.length*4));for(const u of this.hashes)a.writeUInt32BE(this.crcs[u]);t.push(a.buffer);const i=new Uo(Jt.alloc(this.hashes.length*4));for(const u of this.hashes)i.writeUInt32BE(this.offsets.get(u));t.push(i.buffer),n(this.packfileSha,"hex");const s=Jt.concat(t),o=await ac(s),l=Jt.alloc(20);return l.write(o,"hex"),Jt.concat([s,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new jn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new jn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new Uo(r),i=a.readUInt8(),s=i&112;let o=n[s];if(o===void 0)throw new jn("Unrecognized type: 0b"+s.toString(2));const l=i&15;let u=l;i&128&&(u=Bae(a,l));let h=null,m=null;if(o==="ofs_delta"){const v=$ae(a),b=t-v;({object:h,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:v}))}const y=r.slice(a.tell());if(m=Jt.from(await q5(y)),m.byteLength!==u)throw new jn(`Packfile told us object would have length ${u} but it had length ${m.byteLength}`);return h&&(m=Jt.from(Dae(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:m}),{type:o,format:"content",object:m}}}const cv=Symbol("PackfileCache");async function zae({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Vh.fromIdx({idx:i,getExternalRefDelta:n})}function PT({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[cv]||(t[cv]=new Map);let s=t[cv].get(n);return s||(s=zae({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[cv].set(n,s)),s}async function Uae({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await PT({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(u.error)throw new jn(u.error);if(u.offsets.has(r)){if(!u.pack){const h=l.replace(/idx$/,"pack");u.pack=e.read(h)}const d=await u.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${o.replace(/idx$/,"pack")}`,d}}return null}async function Gr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>Gr({fs:e,cache:t,gitdir:n,oid:d});let s;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Jt.from("tree 0\0")}),s||(s=await B5({fs:e,gitdir:n,oid:r})),!s){if(s=await Uae({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!s)throw new Nr(r);return s}if(a==="deflated"||(s.format==="deflated"&&(s.object=Jt.from(await q5(s.object)),s.format="wrapped"),a==="wrapped"))return s;const o=await ac(s.object);if(o!==r)throw new jn(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:u}=yp.unwrap(s.object);if(s.type=u,s.object=l,s.format="content",a==="content")return s;throw new jn(`invalid requested format "${a}"`)}class po extends sr{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=po.code,this.data={noun:t,where:n,canForce:r}}}po.code="AlreadyExistsError";class D0 extends sr{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=D0.code,this.data={nouns:t,short:n,matches:r}}}D0.code="AmbiguousError";class M0 extends sr{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=M0.code,this.data={filepaths:t}}}M0.code="CheckoutConflictError";class P0 extends sr{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=P0.code,this.data={ref:t,oid:n}}}P0.code="CommitNotFetchedError";class F0 extends sr{constructor(){super("Empty response from git server."),this.code=this.name=F0.code,this.data={}}}F0.code="EmptyServerResponseError";class L0 extends sr{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=L0.code,this.data={}}}L0.code="FastForwardError";class $0 extends sr{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=$0.code,this.data={prettyDetails:t,result:n}}}$0.code="GitPushError";class Gh extends sr{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Gh.code,this.data={statusCode:t,statusMessage:n,response:r}}}Gh.code="HttpError";class ku extends sr{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=ku.code,this.data={reason:t}}}ku.code="InvalidFilepathError";class lo extends sr{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=lo.code,this.data={ref:t,suggestion:n}}}lo.code="InvalidRefNameError";class B0 extends sr{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=B0.code,this.data={depth:t}}}B0.code="MaxDepthError";class bp extends sr{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=bp.code,this.data={}}}bp.code="MergeNotSupportedError";class vp extends sr{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=vp.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}vp.code="MergeConflictError";class ci extends sr{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=ci.code,this.data={role:t}}}ci.code="MissingNameError";class zi extends sr{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=zi.code,this.data={parameter:t}}}zi.code="MissingParameterError";class z0 extends sr{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=z0.code,this.data={errors:t},this.errors=t}}z0.code="MultipleGitError";class uf extends sr{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=uf.code,this.data={expected:t,actual:n}}}uf.code="ParseError";class Kh extends sr{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Kh.code,this.data={reason:t}}}Kh.code="PushRejectedError";class su extends sr{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=su.code,this.data={capability:t,parameter:n}}}su.code="RemoteCapabilityError";class U0 extends sr{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=U0.code,this.data={preview:t,response:n}}}U0.code="SmartHttpError";class q0 extends sr{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=q0.code,this.data={url:t,transport:n,suggestion:r}}}q0.code="UnknownTransportError";class H0 extends sr{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=H0.code,this.data={url:t}}}H0.code="UrlParseError";class wp extends sr{constructor(){super("The operation was canceled."),this.code=this.name=wp.code,this.data={}}}wp.code="UserCanceledError";class V0 extends sr{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=V0.code,this.data={filepath:t}}}V0.code="IndexResetError";class G0 extends sr{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=G0.code,this.data={ref:t}}}G0.code="NoCommitError";var qae=Object.freeze({__proto__:null,AlreadyExistsError:po,AmbiguousError:D0,CheckoutConflictError:M0,CommitNotFetchedError:P0,EmptyServerResponseError:F0,FastForwardError:L0,GitPushError:$0,HttpError:Gh,InternalError:jn,InvalidFilepathError:ku,InvalidOidError:Cu,InvalidRefNameError:lo,MaxDepthError:B0,MergeNotSupportedError:bp,MergeConflictError:vp,MissingNameError:ci,MissingParameterError:zi,MultipleGitError:z0,NoRefspecError:O0,NotFoundError:Nr,ObjectTypeError:Ai,ParseError:uf,PushRejectedError:Kh,RemoteCapabilityError:su,SmartHttpError:U0,UnknownTransportError:q0,UnsafeFilepathError:mp,UrlParseError:H0,UserCanceledError:wp,UnmergedPathsError:j0,IndexResetError:V0,NoCommitError:G0});function OC({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=Hae(r),`${e} <${t}> ${n} ${r}`}function Hae(e){const t=Vae(Gae(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function Vae(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function Gae(e){return e===0?e:-e}function zl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Cw(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:Kae(a)}}function Kae(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),Wae(r)}function Wae(e){return e===0?e:-e}class wi{constructor(t){if(typeof t=="string")this._tag=t;else if(Jt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=wi.render(t);else throw new jn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new wi(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${OC(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.tagger&&(r.tagger=Cw(r.tagger)),r.committer&&(r.committer=Cw(r.committer)),r}withoutSignature(){const t=zl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return zl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Jt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=zl(i);const s=a+i;return wi.from(s)}}function X2(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function Zae(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Vr{constructor(t){if(typeof t=="string")this._commit=t;else if(Jt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Vr.render(t);else throw new jn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Vr.justHeaders(t),a=Vr.justMessage(t),i=zl(r+`
gpgsig`+X2(n)+`
`+a);return new Vr(i)}static from(t){return new Vr(t)}toObject(){return Jt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Vr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return zl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Vr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.author&&(r.author=Cw(r.author)),r.committer&&(r.committer=Cw(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new jn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${OC(r)}
`;const a=t.committer||t.author;return n+=`committer ${OC(a)}
`,t.gpgsig&&(n+="gpgsig"+X2(t.gpgsig)),n}static render(t){return Vr.renderHeaders(t)+`
`+zl(t.message)}render(){return this._commit}withoutSignature(){const t=zl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return zl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return Zae(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Vr.justMessage(t._commit);let{signature:s}=await n({payload:a,secretKey:r});s=zl(s);const l=Vr.justHeaders(t._commit)+`
gpgsig`+X2(s)+`
`+i;return Vr.from(l)}}async function Wh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ui.from([]),oid:r};const{type:a,object:i}=await Gr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=wi.from(i).parse().object,Wh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Vr.from(i).parse().tree,Wh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new Ai(r,a,"tree");return{tree:Ui.from(i),oid:r}}class Yae{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const s=new Map;let o;try{o=await Ut.resolve({fs:t,gitdir:n,ref:r})}catch(u){u instanceof Nr&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Wh({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,s=await this.mapPromise,o=s.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:u,object:d}=await Gr({fs:r,cache:a,gitdir:i,oid:l});if(u!==o.type)throw new Ai(l,u,o.type);const h=Ui.from(d);for(const m of h)s.set(Pt.join(n,m.path),m);return h.entries().map(m=>Pt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=P5(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,o=n.get(t._fullpath).oid,{type:l,object:u}=await Gr({fs:r,cache:a,gitdir:i,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(u)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function Ns({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,zx,{value:function({fs:n,gitdir:r,cache:a}){return new Yae({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class Xae{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Pt.join(a,n));return i===null?null:i.map(s=>Pt.join(n,s))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=qh(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const s=await(await this._getGitConfig(n,a)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:s});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let s;await Ba.acquire({fs:r,gitdir:a,cache:i},async function(o){const l=o.entriesMap.get(t._fullpath),u=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof ea<"u"?ea.platform!=="win32":!0;if(!l||xw(u,l,h,m)){const y=await t.content();y===void 0?s=void 0:(s=await ac(yp.wrap({type:"blob",object:y})),l&&s===l.oid&&(!h||u.mode===l.mode)&&xw(u,l,h,m)&&o.insert({filepath:t._fullpath,stats:u,oid:s}))}else s=l.oid}),t._oid=s}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await ga.get({fs:t,gitdir:n}),this.config)}}function K0(){const e=Object.create(null);return Object.defineProperty(e,zx,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new Xae({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function Jae(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const H5=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class Qae{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*eie(e){const t=new Qae;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let s=0;s<a;s++)r[s]!==void 0&&r[s]===n?(i[s]=r[s],r[s]=e[s].next().value):i[s]=null,r[s]!==void 0&&t.consider(r[s]);if(yield i,t.value===null)return}}async function Tu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,u)=>u,reduce:s=async(l,u)=>{const d=H5(u);return l!==void 0&&d.unshift(l),d},iterate:o=(l,u)=>Promise.all([...u].map(l))}){const l=a.map(y=>y[zx]({fs:e,dir:n,gitdir:r,cache:t})),u=new Array(l.length).fill("."),d=Jae(0,l.length),h=async y=>{d.map(x=>{const w=y[x];y[x]=w&&new l[x].ConstructEntry(w)});const b=(await Promise.all(d.map(x=>{const w=y[x];return w?l[x].readdir(w):[]}))).map(x=>(x===null?[]:x)[Symbol.iterator]());return{entries:y,children:eie(b)}},m=async y=>{const{entries:v,children:b}=await h(y),x=v.find(S=>S&&S._fullpath)._fullpath,w=await i(x,v);if(w!==null){let S=await o(m,b);return S=S.filter(E=>E!==void 0),s(w,S)}};return m(u)}async function DC(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Pt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?DC(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function tie(e){return nie(e)&&$4(e.then)&&$4(e.catch)}function nie(e){return e&&typeof e=="object"}function $4(e){return typeof e=="function"}function B4(e){return tie((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const z4=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function U4(e,t){if(B4(t))for(const n of z4)e[`_${n}`]=t[n].bind(t);else for(const n of z4)e[`_${n}`]=U2(t[n].bind(t));B4(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=DC.bind(null,e):t.rm?e._rm=U2(t.rm.bind(t)):t.rmdir.length>2?e._rm=U2(t.rmdir.bind(t)):e._rm=DC.bind(null,e)}class cn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?U4(this,t.promises):U4(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Jt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Hh(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=Hh(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(Bx),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Jt.isBuffer(r)?r:Jt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function et(e,t){if(t===void 0)throw new zi(e)}async function kw(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function rie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{et("fs",e),et("dir",t),et("gitdir",n);const i=new cn(e),s=[Ns({ref:r}),K0(),gp()];let o=[];await Ba.acquire({fs:i,gitdir:n,cache:a},async function(u){o=u.unmergedPaths});const l=await Tu({fs:i,cache:a,dir:t,gitdir:n,trees:s,map:async function(u,[d,h,m]){const y=!await kw(h,m),v=o.includes(u),b=!await kw(m,d);if(y||v)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new V0(u)}});await Ba.acquire({fs:i,gitdir:n,cache:a},async function(u){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class xp{static async isIgnored({fs:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a}){if(_w(a)===".git")return!0;if(a===".")return!1;let i="";const s=Pt.join(r,"info","exclude");await t.exists(s)&&(i=await t.read(s,"utf8"));const o=[{gitignore:Pt.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),m=l.slice(d).join("/");o.push({gitignore:Pt.join(n,h,".gitignore"),filepath:m})}let u=!1;for(const d of o){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const m=eae().add(i);m.add(h);const y=Hh(d.filepath);if(y!=="."&&m.ignores(y))return!0;u?u=!m.test(d.filepath).unignored:u=m.test(d.filepath).ignored}return u}}async function aie({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,s=`${t}/${i}`;await e.exists(s)||await e.write(s,n)}let J2=null;async function V5(e){return J2===null&&(J2=sie()),J2?iie(e):OT.deflate(e)}async function iie(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function sie(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Hi({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:s=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=yp.wrap({type:n,object:r})),i=await ac(r),r=Jt.from(await V5(r))),s||await aie({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function G5(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function oie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:s=!0}){try{et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r);const o=new cn(e);await Ba.acquire({fs:o,gitdir:n,cache:a},async l=>{const d=await(await ga.get({fs:o,gitdir:n})).get("core.autocrlf");return MC({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:i,parallel:s,autocrlf:d})})}catch(o){throw o.caller="git.add",o}}async function MC({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:s,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async m=>{if(!i&&await xp.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const y=await n.lstat(Pt.join(e,m));if(!y)throw new Nr(m);if(y.isDirectory()){const v=await n.readdir(Pt.join(e,m));if(s){const b=v.map(x=>MC({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,x)],index:a,force:i,parallel:s,autocrlf:o}));await Promise.all(b)}else for(const b of v)await MC({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,b)],index:a,force:i,parallel:s,autocrlf:o})}else{const v=y.isSymbolicLink()?await n.readlink(Pt.join(e,m)).then(G5):await n.read(Pt.join(e,m),{autocrlf:o});if(v===null)throw new Nr(m);const b=await Hi({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:m,stats:y,oid:b})}}),u=await Promise.allSettled(l),d=u.filter(m=>m.status==="rejected").map(m=>m.reason);if(d.length>1)throw new z0(d);if(d.length===1)throw d[0];return u.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function Bg({fs:e,gitdir:t,path:n}){return(await ga.get({fs:e,gitdir:t})).get(n)}function K5(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Au({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await Bg({fs:e,gitdir:t,path:"user.name"}),email:await Bg({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},s=K5({},i,r?r.author:void 0,n);if(s.name!==void 0)return s}async function Zh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),s={name:await Bg({fs:e,gitdir:t,path:"user.name"}),email:await Bg({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=K5({},s,a?a.committer:void 0,n,r);if(o.name!==void 0)return o}async function W5({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Gr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=wi.from(i).parse().object,W5({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new Ai(r,a,"commit");return{commit:Vr.from(i),oid:r}}async function Yh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await W5({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function Ux({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:y}){let v=!1;h||(h=await Ut.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,x;try{b=await Ut.resolve({fs:e,gitdir:r,ref:h}),x=await Yh({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new G0(h);const w=l?await Au({fs:e,gitdir:r,author:i,commit:x.commit}):await Au({fs:e,gitdir:r,author:i});if(!w)throw new ci("author");const S=l?await Zh({fs:e,gitdir:r,author:w,committer:s,commit:x.commit}):await Zh({fs:e,gitdir:r,author:w,committer:s});if(!S)throw new ci("committer");return Ba.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const T=L5(E.entries).get(".");if(y||(y=await Z5({fs:e,gitdir:r,inode:T,dryRun:u})),m?m=await Promise.all(m.map(R=>Ut.resolve({fs:e,gitdir:r,ref:R}))):l?m=x.commit.parent:m=b?[b]:[],!a)if(l)a=x.commit.message;else throw new zi("message");let j=Vr.from({tree:y,parent:m,author:w,committer:S,message:a});o&&(j=await Vr.sign(j,n,o));const I=await Hi({fs:e,gitdir:r,type:"commit",object:j.toObject(),dryRun:u});return!d&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:h,value:I}),I})}async function Z5({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await Z5({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=Ui.from(i);return await Hi({fs:e,gitdir:t,type:"tree",object:s.toObject(),dryRun:r})}async function W0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new ku("leading-slash");if(a.endsWith("/"))throw new ku("trailing-slash");const i=r,s=await Wh({fs:e,cache:t,gitdir:n,oid:r}),o=s.tree;if(a==="")r=s.oid;else{const l=a.split("/");r=await Y5({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:i,filepath:a})}return r}async function Y5({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s}){const o=a.shift();for(const l of r)if(l.path===o){if(a.length===0)return l.oid;{const{type:u,object:d}=await Gr({fs:e,cache:t,gitdir:n,oid:l.oid});if(u!=="tree")throw new Ai(i,u,"tree",s);return r=Ui.from(d),Y5({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s})}}throw new Nr(`file or directory found at "${i}:${s}"`)}async function _p({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await W0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:s}=await Wh({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,tree:i.entries()}}async function Z0({fs:e,gitdir:t,tree:n}){const r=Ui.from(n).toObject();return await Hi({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function lie({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:s,force:o,author:l,committer:u,signingKey:d}){let h;try{h=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(w){if(!(w instanceof Nr))throw w}let y=(await _p({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)y=y.filter(w=>w.path!==i);else for(const w of y)if(w.path===i)throw new po("note",i);typeof s=="string"&&(s=Jt.from(s,"utf8"));const v=await Hi({fs:e,gitdir:r,type:"blob",object:s,format:"content"});y.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await Z0({fs:e,gitdir:r,tree:y});return await Ux({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:u,signingKey:d})}async function cie({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:s,force:o,author:l,committer:u,signingKey:d,cache:h={}}){try{et("fs",e),et("gitdir",r),et("oid",i),et("note",s),d&&et("onSign",t);const m=new cn(e),y=await Au({fs:m,gitdir:r,author:l});if(!y)throw new ci("author");const v=await Zh({fs:m,gitdir:r,author:y,committer:u});if(!v)throw new ci("committer");return await lie({fs:new cn(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:s,force:o,author:y,committer:v,signingKey:d})}catch(m){throw m.caller="git.addNote",m}}async function X5({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==Vo.clean(n))throw new lo(n,Vo.clean(n));const i=await ga.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new po("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await ga.save({fs:e,gitdir:t,config:i})}async function uie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return et("fs",e),et("gitdir",n),et("remote",r),et("url",a),await X5({fs:new cn(e),gitdir:n,remote:r,url:a,force:i})}catch(s){throw s.caller="git.addRemote",s}}async function die({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await Ut.exists({fs:e,gitdir:r,ref:a}))throw new po("tag",a);const h=await Ut.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:m}=await Gr({fs:e,cache:t,gitdir:r,oid:h});let y=wi.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:s,gpgsig:o});u&&(y=await wi.sign(y,n,u));const v=await Hi({fs:e,gitdir:r,type:"tag",object:y.toObject()});await Ut.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function fie({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1,cache:h={}}){try{et("fs",e),et("gitdir",r),et("ref",a),u&&et("onSign",t);const m=new cn(e),y=await Au({fs:m,gitdir:r,author:i});if(!y)throw new ci("tagger");return await die({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:y,message:s,gpgsig:o,object:l,signingKey:u,force:d})}catch(m){throw m.caller="git.annotatedTag",m}}async function hie({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==Vo.clean(n))throw new lo(n,Vo.clean(n));const s=`refs/heads/${n}`;if(!i&&await Ut.exists({fs:e,gitdir:t,ref:s}))throw new po("branch",n,!1);let o;try{o=await Ut.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Ut.writeRef({fs:e,gitdir:t,ref:s,value:o}),a&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function pie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:s=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),await hie({fs:new cn(e),gitdir:n,ref:r,object:a,checkout:i,force:s})}catch(o){throw o.caller="git.branch",o}}const J5=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function FT({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:s,ref:o,filepaths:l,noCheckout:u,noUpdateHead:d,dryRun:h,force:m,track:y=!0}){let v;if(r)try{v=await Ut.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Ut.resolve({fs:e,gitdir:i,ref:o})}catch(x){if(o==="HEAD")throw x;const w=`${s}/${o}`;if(b=await Ut.resolve({fs:e,gitdir:i,ref:w}),y){const S=await ga.get({fs:e,gitdir:i});await S.set(`branch.${o}.remote`,s),await S.set(`branch.${o}.merge`,`refs/heads/${o}`),await ga.save({fs:e,gitdir:i,config:S})}await Ut.writeRef({fs:e,gitdir:i,ref:`refs/heads/${o}`,value:b})}if(!u){let x;try{x=await mie({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:o,force:m,filepaths:l})}catch(T){throw T instanceof Nr&&T.data.what===b?new P0(o,b):T}const w=x.filter(([T])=>T==="conflict").map(([T,j])=>j);if(w.length>0)throw new M0(w);const S=x.filter(([T])=>T==="error").map(([T,j])=>j);if(S.length>0)throw new jn(S.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const C=x.length;await Ba.acquire({fs:e,gitdir:i,cache:t},async function(T){await Promise.all(x.filter(([j])=>j==="delete"||j==="delete-index").map(async function([j,I]){const R=`${a}/${I}`;j==="delete"&&await e.rm(R),T.delete({filepath:I}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ba.acquire({fs:e,gitdir:i,cache:t},async function(T){for(const[j,I]of x)if(j==="rmdir"||j==="rmdir-index"){const R=`${a}/${I}`;try{j==="rmdir-index"&&T.delete({filepath:I}),await e.rmdir(R),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(F){if(F.code==="ENOTEMPTY")console.log(`Did not delete ${I} because directory is not empty`);else throw F}}}),await Promise.all(x.filter(([T])=>T==="mkdir"||T==="mkdir-index").map(async function([T,j]){const I=`${a}/${j}`;await e.mkdir(I),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ba.acquire({fs:e,gitdir:i,cache:t},async function(T){await Promise.all(x.filter(([j])=>j==="create"||j==="create-index"||j==="update"||j==="mkdir-index").map(async function([j,I,R,F,B]){const H=`${a}/${I}`;try{if(j!=="create-index"&&j!=="mkdir-index"){const{object:Z}=await Gr({fs:e,cache:t,gitdir:i,oid:R});if(B&&await e.rm(H),F===33188)await e.write(H,Z);else if(F===33261)await e.write(H,Z,{mode:511});else if(F===40960)await e.writelink(H,Z);else throw new jn(`Invalid mode 0o${F.toString(8)} detected in blob ${R}`)}const D=await e.lstat(H);F===33261&&(D.mode=493),j==="mkdir-index"&&(D.mode=57344),T.insert({filepath:I,stats:D,oid:R}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(D){console.log(D)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const x=await Ut.expand({fs:e,gitdir:i,ref:o});x.startsWith("refs/heads")?await Ut.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:x}):await Ut.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function mie({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:s,filepaths:o}){let l=0;return Tu({fs:e,cache:t,dir:r,gitdir:a,trees:[Ns({ref:i}),K0(),gp()],map:async function(u,[d,h,m]){if(u===".")return;if(o&&!o.some(v=>J5(u,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!m,!!d,!!h].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(u)?["delete",u]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",u];case"blob":return["create",u,await d.oid(),await d.mode()];case"commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",u];case"blob-blob":return await d.oid()!==await h.oid()?s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]:await d.mode()!==await h.mode()?s?["update",u,await d.oid(),await d.mode(),!0]:["conflict",u]:["create-index",u,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",u];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",u];case"101":switch(await m.type()){case"tree":return["rmdir",u];case"blob":return await m.oid()!==await h.oid()?s?["delete",u]:["conflict",u]:["delete",u];case"commit":return["rmdir-index",u];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await d.oid()&&await m.mode()===await d.mode()&&!s)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await d.oid())return s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]}else if(s)return["update",u,await d.oid(),await d.mode(),await d.mode()!==await m.mode()];return await d.mode()!==await m.mode()?["update",u,await d.oid(),await d.mode(),!0]:await d.oid()!==await m.oid()?["update",u,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",u,await d.oid()];case"blob-tree":return["update-blob-to-tree",u];case"commit-commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await d.type()}`]}}},reduce:async function(u,d){return d=H5(d),u?u&&u[0]==="rmdir"?(d.push(u),d):(d.unshift(u),d):d}})}async function Q5({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Pt.join(r,".git"),remote:i="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:u=s===void 0,dryRun:d=!1,force:h=!1,track:m=!0,cache:y={}}){try{et("fs",e),et("dir",r),et("gitdir",a);const v=s||"HEAD";return await FT({fs:new cn(e),cache:y,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:o,noCheckout:l,noUpdateHead:u,dryRun:d,force:h,track:m})}catch(v){throw v.caller="git.checkout",v}}const gie=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Ad(e){const t=gie.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function Bu({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ut.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ut.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:Ad(a)}function yie(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function eF({username:e="",password:t=""}){return`Basic ${Jt.from(`${e}:${t}`).toString("base64")}`}async function Y0(e,t){const n=z5(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Tw(e){let t=0;const n=[];await Y0(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function q4(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function PC(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class oa{static flush(){return Jt.from("0000","utf8")}static delim(){return Jt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Jt.from(t));const n=t.length+4,r=PC(4,n);return Jt.concat([Jt.from(r,"utf8"),t])}static streamReader(t){const n=new U5(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function H4(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function V4(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=oa.streamReader(e);let s=await i();for(;s===null;)s=await i();if(s===!0)throw new F0;if(s.includes("version 2"))return H4(i);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new uf(`# service=${t}\\n`,s.toString("utf8"));let o=await i();for(;o===null;)o=await i();if(o===!0)return{capabilities:n,refs:r,symrefs:a};if(o=o.toString("utf8"),o.includes("version 2"))return H4(i);const[l,u]=Q2(o,"\0","\\x00");if(u.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=Q2(l," "," ");for(r.set(h,d);;){const m=await i();if(m===!0)break;if(m!==null){const[y,v]=Q2(m.toString("utf8")," "," ");r.set(v,y)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function Q2(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new uf(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const G4=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,K4=(e,t)=>{(t.username||t.password)&&(e.Authorization=eF(t)),t.headers&&Object.assign(e,t.headers)},eE=async e=>{try{const t=Jt.from(await Tw(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Aw{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:o,url:l,headers:u,protocolVersion:d}){let{url:h,auth:m}=q4(l);const y=s?G4(s,h):h;(m.username||m.password)&&(u.Authorization=eF(m)),d===2&&(u["Git-Protocol"]="version=2");let v,b,x=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${y}/info/refs?service=${o}`,headers:u}),b=!1,v.statusCode===401||v.statusCode===203){const w=x?i:r;if(w){if(m=await w(h,{...m,headers:{...u}}),m&&m.cancel)throw new wp;m&&(K4(u,m),x=!0,b=!0)}}else v.statusCode===200&&x&&a&&await a(h,m);while(b);if(v.statusCode!==200){const{response:w}=await eE(v);throw new Gh(v.statusCode,v.statusMessage,w)}if(v.headers["content-type"]===`application/x-${o}-advertisement`){const w=await V4(v.body,{service:o});return w.auth=m,w}else{const{preview:w,response:S,data:E}=await eE(v);try{const C=await V4([E],{service:o});return C.auth=m,C}catch{throw new U0(w,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:s,body:o,headers:l}){const u=q4(i);u&&(i=u.url),r&&(i=G4(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,K4(l,s);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:o,headers:l});if(d.statusCode!==200){const{response:h}=eE(d);throw new Gh(d.statusCode,d.statusMessage,h)}return d}}function bie({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class qx{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Aw),n.set("https",Aw);const r=bie({url:t});if(!r)throw new H0(t);if(n.has(r.transport))return n.get(r.transport);throw new q0(t,r.transport,r.transport==="ssh"?yie(t):void 0)}}let wd=null;class zg{static async read({fs:t,gitdir:n}){wd===null&&(wd=new $g);const r=Pt.join(n,"shallow"),a=new Set;return await wd.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(s=>a.add(s))}),a}static async write({fs:t,gitdir:n,oids:r}){wd===null&&(wd=new $g);const a=Pt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await wd.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await wd.acquire(a,async function(){await t.rm(a)})}}async function vie({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function wie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Pt.join(n,"objects/pack"));i=i.filter(s=>s.endsWith(".idx"));for(const s of i){const o=`${n}/objects/pack/${s}`,l=await PT({fs:e,cache:t,filename:o,getExternalRefDelta:a});if(l.error)throw new jn(l.error);if(l.offsets.has(r))return!0}return!1}async function W4({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=o=>Gr({fs:e,cache:t,gitdir:n,oid:o});let s=await vie({fs:e,gitdir:n,oid:r});return s||(s=await wie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),s}function xie(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function tF(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const Hx={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Rv{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function _ie(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function nF(e){const t=new Rv;let n="";return(async()=>(await Y0(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=_ie(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class rF{static demux(t){const n=oa.streamReader(t),r=new Rv,a=new Rv,i=new Rv,s=async function(){const o=await n();if(o===null)return s();if(o===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(o[0]){case 1:{a.write(o.slice(1));break}case 2:{i.write(o.slice(1));break}case 3:{const l=o.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}s()};return s(),{packetlines:r,packfile:a,progress:i}}}async function Sie(e){const{packetlines:t,packfile:n,progress:r}=rF.demux(e),a=[],i=[],s=[];let o=!1,l=!1;return new Promise((u,d)=>{Y0(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const y=m.slice(-41).trim();y.length!==40&&d(new Cu(y)),a.push(y)}else if(m.startsWith("unshallow")){const y=m.slice(-41).trim();y.length!==40&&d(new Cu(y)),i.push(y)}else if(m.startsWith("ACK")){const[,y,v]=m.split(" ");s.push({oid:y,status:v}),v||(l=!0)}else m.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))})})}function Eie({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:s=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const u of t)o.push(oa.encode(`want ${u}${l}
`)),l="";for(const u of r)o.push(oa.encode(`shallow ${u}
`));a!==null&&o.push(oa.encode(`deepen ${a}
`)),i!==null&&o.push(oa.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const u of s)o.push(oa.encode(`deepen-not ${u}
`));o.push(oa.flush());for(const u of n)o.push(oa.encode(`have ${u}
`));return o.push(oa.encode(`done
`)),o}async function LT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:u,remoteRef:d,remote:h,url:m,corsProxy:y,depth:v=null,since:b=null,exclude:x=[],relative:w=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:T=!1,pruneTags:j=!1}){const I=u||await Bu({fs:e,gitdir:l,test:!0}),R=await ga.get({fs:e,gitdir:l}),F=h||I&&await R.get(`branch.${I}.remote`)||"origin",B=m||await R.get(`remote.${F}.url`);if(typeof B>"u")throw new zi("remote OR url");const H=d||I&&await R.get(`branch.${I}.merge`)||u||"HEAD";y===void 0&&(y=await R.get("http.corsProxy"));const D=qx.getRemoteHelperFor({url:B}),Z=await D.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:y,service:"git-upload-pack",url:B,headers:C,protocolVersion:1}),V=Z.auth,ue=Z.refs;if(ue.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new su("shallow","depth");if(b!==null&&!Z.capabilities.has("deepen-since"))throw new su("deepen-since","since");if(x.length>0&&!Z.capabilities.has("deepen-not"))throw new su("deepen-not","exclude");if(w===!0&&!Z.capabilities.has("deepen-relative"))throw new su("deepen-relative","relative");const{oid:ae,fullref:ne}=Ut.resolveAgainstMap({ref:H,map:ue});for(const Le of ue.keys())Le===ne||Le==="HEAD"||Le.startsWith("refs/heads/")||S&&Le.startsWith("refs/tags/")||ue.delete(Le);const X=tF([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Hx.agent}`]);w&&X.push("deepen-relative");const ie=E?[ae]:ue.values(),L=E?[I]:await Ut.listRefs({fs:e,gitdir:l,filepath:"refs"});let J=[];for(let Le of L)try{Le=await Ut.expand({fs:e,gitdir:l,ref:Le});const Ie=await Ut.resolve({fs:e,gitdir:l,ref:Le});await W4({fs:e,cache:t,gitdir:l,oid:Ie})&&J.push(Ie)}catch{}J=[...new Set(J)];const Q=await zg.read({fs:e,gitdir:l}),ee=Z.capabilities.has("shallow")?[...Q]:[],fe=Eie({capabilities:X,wants:ie,haves:J,shallows:ee,depth:v,since:b,exclude:x}),ve=Jt.from(await Tw(fe)),Oe=await D.connect({http:n,onProgress:r,corsProxy:y,service:"git-upload-pack",url:B,auth:V,body:[ve],headers:C}),Ae=await Sie(Oe.body);Oe.headers&&(Ae.headers=Oe.headers);for(const Le of Ae.shallows)if(!Q.has(Le))try{const{object:Ie}=await Gr({fs:e,cache:t,gitdir:l,oid:Le}),z=new Vr(Ie),Se=await Promise.all(z.headers().parent.map(de=>W4({fs:e,cache:t,gitdir:l,oid:de})));Se.length===0||Se.every(de=>de)||Q.add(Le)}catch{Q.add(Le)}for(const Le of Ae.unshallows)Q.delete(Le);if(await zg.write({fs:e,gitdir:l,oids:Q}),E){const Le=new Map([[ne,ae]]),Ie=new Map;let z=10,Se=ne;for(;z--;){const se=Z.symrefs.get(Se);if(se===void 0)break;Ie.set(Se,se),Se=se}const Te=ue.get(Se);Te&&Le.set(Se,Te);const{pruned:de}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:F,refs:Le,symrefs:Ie,tags:S,prune:T});T&&(Ae.pruned=de)}else{const{pruned:Le}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:F,refs:ue,symrefs:Z.symrefs,tags:S,prune:T,pruneTags:j});T&&(Ae.pruned=Le)}if(Ae.HEAD=Z.symrefs.get("HEAD"),Ae.HEAD===void 0){const{oid:Le}=Ut.resolveAgainstMap({ref:"HEAD",map:ue});for(const[Ie,z]of ue.entries())if(Ie!=="HEAD"&&z===Le){Ae.HEAD=Ie;break}}const Ne=ne.startsWith("refs/tags")?"tag":"branch";if(Ae.FETCH_HEAD={oid:ae,description:`${Ne} '${Ad(ne)}' of ${B}`},r||a){const Le=nF(Ae.progress);Y0(Le,async Ie=>{if(a&&await a(Ie),r){const z=Ie.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);z&&await r({phase:z[1].trim(),loaded:parseInt(z[2],10),total:parseInt(z[3],10)})}})}const Ce=Jt.from(await Tw(Ae.packfile));if(Oe.body.error)throw Oe.body.error;const Pe=Ce.slice(-20).toString("hex"),Qe={defaultBranch:Ae.HEAD,fetchHead:Ae.FETCH_HEAD.oid,fetchHeadDescription:Ae.FETCH_HEAD.description};if(Ae.headers&&(Qe.headers=Ae.headers),T&&(Qe.pruned=Ae.pruned),Pe!==""&&!xie(Ce)){Qe.packfile=`objects/pack/pack-${Pe}.pack`;const Le=Pt.join(l,Qe.packfile);await e.write(Le,Ce);const Ie=Se=>Gr({fs:e,cache:t,gitdir:l,oid:Se}),z=await Vh.fromPack({pack:Ce,getExternalRefDelta:Ie,onProgress:r});await e.write(Le.replace(/\.pack$/,".idx"),await z.toBuffer())}return Qe}async function aF({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(s=>r+"/"+s);for(const s of i)await e.mkdir(s);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function Cie({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:u,gitdir:d,url:h,corsProxy:m,ref:y,remote:v,depth:b,since:x,exclude:w,relative:S,singleBranch:E,noCheckout:C,noTags:T,headers:j}){try{if(await aF({fs:e,gitdir:d}),await X5({fs:e,gitdir:d,remote:v,url:h,force:!1}),m){const F=await ga.get({fs:e,gitdir:d});await F.set("http.corsProxy",m),await ga.save({fs:e,gitdir:d,config:F})}const{defaultBranch:I,fetchHead:R}=await LT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:d,ref:y,remote:v,corsProxy:m,depth:b,since:x,exclude:w,relative:S,singleBranch:E,headers:j,tags:!T});if(R===null)return;y=y||I,y=y.replace("refs/heads/",""),await FT({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:u,gitdir:d,ref:y,remote:v,noCheckout:C})}catch(I){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),I}}async function kie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u=Pt.join(l,".git"),url:d,corsProxy:h=void 0,ref:m=void 0,remote:y="origin",depth:v=void 0,since:b=void 0,exclude:x=[],relative:w=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:T={},cache:j={}}){try{return et("fs",e),et("http",t),et("gitdir",u),E||et("dir",l),et("url",d),await Cie({fs:new cn(e),cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u,url:d,corsProxy:h,ref:m,remote:y,depth:v,since:b,exclude:x,relative:w,singleBranch:S,noCheckout:E,noTags:C,headers:T})}catch(I){throw I.caller="git.clone",I}}async function Tie({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:y,cache:v={}}){try{et("fs",e),l||et("message",a),o&&et("onSign",t);const b=new cn(e);return await Ux({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l,dryRun:u,noUpdateBranch:d,ref:h,parent:m,tree:y})}catch(b){throw b.caller="git.commit",b}}async function Aie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return et("fs",e),et("gitdir",n),await Bu({fs:new cn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Nie({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ut.exists({fs:e,gitdir:t,ref:n}))throw new Nr(n);const a=await Ut.expand({fs:e,gitdir:t,ref:n}),i=await Bu({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await Ut.resolve({fs:e,gitdir:t,ref:a});await Ut.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Ut.deleteRef({fs:e,gitdir:t,ref:a});const s=Ad(n),o=await ga.get({fs:e,gitdir:t});await o.deleteSection("branch",s),await ga.save({fs:e,gitdir:t,config:o})}async function Rie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await Nie({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Iie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{et("fs",e),et("ref",r),await Ut.deleteRef({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function jie({fs:e,gitdir:t,remote:n}){const r=await ga.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await ga.save({fs:e,gitdir:t,config:r})}async function Oie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("remote",r),await jie({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Die({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ut.deleteRef({fs:e,gitdir:t,ref:n})}async function Mie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await Die({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Pie({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Fie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await PT({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(u.error)throw new jn(u.error);for(const d of u.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function Lie({fs:e,cache:t,gitdir:n,oid:r}){const a=o=>Gr({fs:e,cache:t,gitdir:n,oid:o}),i=await Pie({fs:e,gitdir:n,oid:r}),s=await Fie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const o of s)i.indexOf(o)===-1&&i.push(o);if(i.length===1)return i[0];throw i.length>1?new D0("oids",r,i):new Nr(`an object matching "${r}"`)}async function $ie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Lie({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function Bie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ut.expand({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function $T({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let s=r.map((o,l)=>({index:l,oid:o}));for(;s.length;){const o=new Set;for(const{oid:u,index:d}of s)a[u]||(a[u]=new Set),a[u].add(d),a[u].size===i&&o.add(u);if(o.size>0)return[...o];const l=new Map;for(const{oid:u,index:d}of s)try{const{object:h}=await Gr({fs:e,cache:t,gitdir:n,oid:u}),m=Vr.from(h),{parent:y}=m.parseHeaders();for(const v of y)(!a[v]||!a[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}s=Array.from(l.values())}return[]}const tE=/^.*(\r?\n|$)/gm;function zie({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],s=t[2],o=i.match(tE),l=a.match(tE),u=s.match(tE),d=sae(o,l,u),h=7;let m="",y=!0;for(const v of d)v.ok&&(m+=v.ok.join("")),v.conflict&&(y=!1,m+=`${"<".repeat(h)} ${n}
`,m+=v.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=v.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:y,mergedText:m}}async function Uie({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),index:a,ourOid:i,baseOid:s,theirOid:o,ourName:l="ours",baseName:u="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:y}){const v=Ns({ref:i}),b=Ns({ref:s}),x=Ns({ref:o}),w=[],S=[],E=[],C=[],T=await Tu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,x],map:async function(j,[I,R,F]){const B=_w(j),H=await kw(I,R),D=await kw(F,R);switch(`${H}-${D}`){case"false-false":return{mode:await R.mode(),path:B,oid:await R.oid(),type:await R.type()};case"false-true":return F?{mode:await F.mode(),path:B,oid:await F.oid(),type:await F.type()}:void 0;case"true-false":return I?{mode:await I.mode(),path:B,oid:await I.oid(),type:await I.type()}:void 0;case"true-true":{if(I&&R&&F&&await I.type()==="blob"&&await R.type()==="blob"&&await F.type()==="blob")return qie({fs:e,gitdir:r,path:B,ours:I,base:R,theirs:F,ourName:l,baseName:u,theirName:d,mergeDriver:y}).then(async Z=>{if(Z.cleanMerge)m||a.insert({filepath:j,oid:Z.mergeResult.oid,stage:0});else if(w.push(j),S.push(j),!m){const V=await R.oid(),ue=await I.oid(),ae=await F.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:V,stage:1}),a.insert({filepath:j,oid:ue,stage:2}),a.insert({filepath:j,oid:ae,stage:3})}return Z.mergeResult});if(R&&!I&&F&&await R.type()==="blob"&&await F.type()==="blob"){if(w.push(j),E.push(j),!m){const Z=await R.oid(),V=await F.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:Z,stage:1}),a.insert({filepath:j,oid:V,stage:3})}return{mode:await F.mode(),oid:await F.oid(),type:"blob",path:B}}if(R&&I&&!F&&await R.type()==="blob"&&await I.type()==="blob"){if(w.push(j),C.push(j),!m){const Z=await R.oid(),V=await I.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:Z,stage:1}),a.insert({filepath:j,oid:V,stage:2})}return{mode:await I.mode(),oid:await I.oid(),type:"blob",path:B}}if(R&&!I&&!F&&await R.type()==="blob")return;throw new bp}}},reduce:w.length!==0&&(!n||m)?void 0:async(j,I)=>{const R=I.filter(Boolean);if(j&&!(j&&j.type==="tree"&&R.length===0)){if(R.length>0){const B=new Ui(R).toObject(),H=await Hi({fs:e,gitdir:r,type:"tree",object:B,dryRun:h});j.oid=H}return j}}});return w.length!==0?(n&&!m&&await Tu({fs:e,cache:t,dir:n,gitdir:r,trees:[Ns({ref:T.oid})],map:async function(j,[I]){const R=`${n}/${j}`;if(await I.type()==="blob"){const F=await I.mode(),B=new TextDecoder().decode(await I.content());await e.write(R,B,{mode:F})}return!0}}),new vp(w,S,E,C)):T.oid}async function qie({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:s,theirName:o,baseName:l,dryRun:u,mergeDriver:d=zie}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const y=Jt.from(await r.content()).toString("utf8"),v=Jt.from(await a.content()).toString("utf8"),b=Jt.from(await i.content()).toString("utf8"),{mergedText:x,cleanMerge:w}=await d({branches:[l,s,o],contents:[v,y,b],path:n}),S=await Hi({fs:e,gitdir:t,type:"blob",object:Jt.from(x,"utf8"),dryRun:u});return{cleanMerge:w,mergeResult:{mode:m,path:n,oid:S,type:h}}}async function iF({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:y,signingKey:v,onSign:b,mergeDriver:x}){a===void 0&&(a=await Bu({fs:e,gitdir:r,fullname:!0})),a=await Ut.expand({fs:e,gitdir:r,ref:a}),i=await Ut.expand({fs:e,gitdir:r,ref:i});const w=await Ut.resolve({fs:e,gitdir:r,ref:a}),S=await Ut.resolve({fs:e,gitdir:r,ref:i}),E=await $T({fs:e,cache:t,gitdir:r,oids:[w,S]});if(E.length!==1)throw new bp;const C=E[0];if(C===S)return{oid:w,alreadyMerged:!0};if(s&&C===w)return!l&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(o)throw new L0;const T=await Ba.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async I=>Uie({fs:e,cache:t,dir:n,gitdir:r,index:I,ourOid:w,theirOid:S,baseOid:C,ourName:Ad(a),baseName:"base",theirName:Ad(i),dryRun:l,abortOnConflict:d,mergeDriver:x}));if(T instanceof vp)throw T;return h||(h=`Merge branch '${Ad(i)}' into ${Ad(a)}`),{oid:await Ux({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:T,parent:[w,S],author:m,committer:y,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:u}),tree:T,mergeCommit:!0}}}async function sF({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:u,ref:d,url:h,remote:m,remoteRef:y,prune:v,pruneTags:b,fastForward:x,fastForwardOnly:w,corsProxy:S,singleBranch:E,headers:C,author:T,committer:j,signingKey:I}){try{if(!d){const B=await Bu({fs:e,gitdir:u});if(!B)throw new zi("ref");d=B}const{fetchHead:R,fetchHeadDescription:F}=await LT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:u,corsProxy:S,ref:d,url:h,remote:m,remoteRef:y,singleBranch:E,headers:C,prune:v,pruneTags:b});await iF({fs:e,cache:t,gitdir:u,ours:d,theirs:R,fastForward:x,fastForwardOnly:w,message:`Merge ${F}`,author:T,committer:j,signingKey:I,dryRun:!1,noUpdateBranch:!1}),await FT({fs:e,cache:t,onProgress:r,dir:l,gitdir:u,ref:d,remote:m,noCheckout:!1})}catch(R){throw R.caller="git.pull",R}}async function Hie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,corsProxy:y,singleBranch:v,headers:b={},cache:x={}}){try{et("fs",e),et("http",t),et("gitdir",l);const w={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await sF({fs:new cn(e),cache:x,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:y,singleBranch:v,headers:b,author:w,committer:w})}catch(w){throw w.caller="git.fastForward",w}}async function Vie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,remote:d,remoteRef:h,url:m,corsProxy:y,depth:v=null,since:b=null,exclude:x=[],relative:w=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:T=!1,pruneTags:j=!1,cache:I={}}){try{return et("fs",e),et("http",t),et("gitdir",l),await LT({fs:new cn(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,gitdir:l,ref:u,remote:d,remoteRef:h,url:m,corsProxy:y,depth:v,since:b,exclude:x,relative:w,tags:S,singleBranch:E,headers:C,prune:T,pruneTags:j})}catch(R){throw R.caller="git.fetch",R}}async function Gie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await $T({fs:new cn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function oF({fs:e,filepath:t}){if(await e.exists(Pt.join(t,".git")))return t;{const n=Hh(t);if(n===t)throw new Nr(`git root for ${t}`);return oF({fs:e,filepath:n})}}async function Kie({fs:e,filepath:t}){try{return et("fs",e),et("filepath",t),await oF({fs:new cn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function Wie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await Bg({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function Zie({fs:e,gitdir:t,path:n}){return(await ga.get({fs:e,gitdir:t})).getall(n)}async function Yie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await Zie({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function Xie({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1}){try{et("http",e),et("url",i);const u=await qx.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:1}),d={capabilities:[...u.capabilities]};for(const[h,m]of u.refs){const y=h.split("/"),v=y.pop();let b=d;for(const x of y)b[x]=b[x]||{},b=b[x];b[v]=m}for(const[h,m]of u.symrefs){const y=h.split("/"),v=y.pop();let b=d;for(const x of y)b[x]=b[x]||{},b=b[x];b[v]=m}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function lF(e,t,n,r){const a=[];for(const[i,s]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),u=a[a.length-1],d=u.ref===l?u:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=s}continue}const o={ref:i,oid:s};n&&e.symrefs.has(i)&&(o.target=e.symrefs.get(i)),a.push(o)}return a}async function Jie({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{et("http",e),et("url",i);const d=await qx.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const m of d.capabilities){const[y,v]=m.split("=");v?h[y]=v:h[y]=!0}return{protocolVersion:1,capabilities:h,refs:lF(d,void 0,!0,!0)}}catch(u){throw u.caller="git.getRemoteInfo2",u}}async function Qie({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=yp.wrap({type:e,object:t})),r=await ac(t)),{oid:r,object:t}}async function ese({object:e}){try{et("object",e),typeof e=="string"?e=Jt.from(e,"utf8"):e=Jt.from(e);const t="blob",{oid:n,object:r}=await Qie({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function tse({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Pt.join(r,i);const s=await e.read(i),o=u=>Gr({fs:e,cache:t,gitdir:a,oid:u}),l=await Vh.fromPack({pack:s,getExternalRefDelta:o,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function nse({fs:e,onProgress:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a,cache:i={}}){try{return et("fs",e),et("dir",n),et("gitdir",n),et("filepath",a),await tse({fs:new cn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(s){throw s.caller="git.indexPack",s}}async function rse({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){try{return et("fs",e),et("gitdir",r),t||et("dir",n),await aF({fs:new cn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function cF({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const s=await zg.read({fs:e,gitdir:n});if(!r)throw new zi("oid");if(!a)throw new zi("ancestor");if(r===a)return!1;const o=[r],l=new Set;let u=0;for(;o.length;){if(u++===i)throw new B0(i);const d=o.shift(),{type:h,object:m}=await Gr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Ai(d,h,"commit");const y=Vr.from(m).parse();for(const v of y.parent)if(v===a)return!0;if(!s.has(d))for(const v of y.parent)l.has(v)||(o.push(v),l.add(v))}return!1}async function ase({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:s={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),et("ancestor",a),await cF({fs:new cn(e),cache:s,gitdir:n,oid:r,ancestor:a,depth:i})}catch(o){throw o.caller="git.isDescendent",o}}async function ise({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r),xp.isIgnored({fs:new cn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function sse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("gitdir",n),Ut.listBranches({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function ose({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ut.resolve({gitdir:t,fs:e,ref:n}),i=[];return await uF({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ba.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function uF({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:s}=await _p({fs:e,cache:t,gitdir:n,oid:r});for(const o of s)o.type==="tree"?await uF({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:a,prefix:Pt.join(i,o.path)}):a.push(Pt.join(i,o.path))}async function lse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),await ose({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function cse({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ut.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof Nr)return[]}return(await _p({fs:e,cache:t,gitdir:n,oid:a})).tree.map(o=>({target:o.path,note:o.oid}))}async function use({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),await cse({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function dse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("gitdir",n),Ut.listRefs({fs:new cn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function fse({fs:e,gitdir:t}){const n=await ga.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const s=await n.get(`remote.${i}.url`);return{remote:i,url:s}}))}async function hse({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),await fse({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function pse(e){const t=oa.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...s]=r.split(" "),o={ref:i,oid:a};for(const l of s){const[u,d]=l.split(":");u==="symref-target"?o.target=d:u==="peeled"&&(o.peeled=d)}n.push(o)}return n}async function mse({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(oa.encode(`command=ls-refs
`)),r.push(oa.encode(`agent=${Hx.agent}
`)),(n||t||e)&&r.push(oa.delim()),n&&r.push(oa.encode("peel")),t&&r.push(oa.encode("symrefs")),e&&r.push(oa.encode(`ref-prefix ${e}`)),r.push(oa.flush()),r}async function gse({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:u,symrefs:d,peelTags:h}){try{et("http",e),et("url",i);const m=await Aw.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(m.protocolVersion===1)return lF(m,u,d,h);const y=await mse({prefix:u,symrefs:d,peelTags:h}),v=await Aw.connect({http:e,auth:m.auth,headers:s,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,body:y});return pse(v.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function yse({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),Ut.listTags({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function bse(e,t){return e.committer.timestamp-t.committer.timestamp}const vse="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function Z4({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===vse)return;const i=r;let s;const o=await Wh({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return a===o.oid?s=o.path:(s=await dF({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function dF({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:s=[],parentPath:o=""}){const l=r.entries().map(function(u){let d;return u.oid===a?(d=Pt.join(o,u.path),s.push(d)):u.type==="tree"&&(d=Gr({fs:e,cache:t,gitdir:n,oid:u.oid}).then(function({object:h}){return dF({fs:e,cache:t,gitdir:n,tree:Ui.from(h),fileId:a,oid:i,filepaths:s,parentPath:Pt.join(o,u.path)})})),d});return await Promise.all(l),s}async function wse({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l}){const u=typeof s>"u"?void 0:Math.floor(s.valueOf()/1e3),d=[],h=await zg.read({fs:e,gitdir:n}),m=await Ut.resolve({fs:e,gitdir:n,ref:a}),y=[await Yh({fs:e,cache:t,gitdir:n,oid:m})];let v,b,x;function w(S){x&&r&&d.push(S)}for(;y.length>0;){const S=y.pop();if(u!==void 0&&S.commit.committer.timestamp<=u)break;if(r){let E;try{E=await W0({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=S,x=!0}catch(C){if(C instanceof Nr){let T=l&&v;if(T&&(T=await Z4({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),T))if(Array.isArray(T)){if(b){const j=await Z4({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(j))if(T=T.filter(I=>j.indexOf(I)===-1),T.length===1)T=T[0],r=T,b&&d.push(b);else{T=!1,b&&d.push(b);break}}}else r=T,b&&d.push(b);if(!T){if(x&&v&&(d.push(b),!o))break;if(!o&&!l)throw C}b=S,x=!1}else throw C}}else d.push(S);if(i!==void 0&&d.length===i){w(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await Yh({fs:e,cache:t,gitdir:n,oid:E});y.map(T=>T.oid).includes(C.oid)||y.push(C)}y.length===0&&w(S),y.sort((E,C)=>bse(E.commit,C.commit))}return d}async function xse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:s,force:o,follow:l,cache:u={}}){try{return et("fs",e),et("gitdir",n),et("ref",a),await wse({fs:new cn(e),cache:u,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l})}catch(d){throw d.caller="git.log",d}}async function _se({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:y,signingKey:v,cache:b={},mergeDriver:x}){try{et("fs",e),v&&et("onSign",t);const w=new cn(e),S=await Au({fs:w,gitdir:r,author:m});if(!S&&(!o||!s))throw new ci("author");const E=await Zh({fs:w,gitdir:r,author:S,committer:y});if(!E&&(!o||!s))throw new ci("committer");return await iF({fs:w,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:u,abortOnConflict:d,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:x})}catch(w){throw w.caller="git.merge",w}}const Sse={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function fF({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new N5,s=[];function o(d,h){const m=Jt.from(d,h);s.push(m),i.update(m)}async function l({stype:d,object:h}){const m=Sse[d];let y=h.length,v=y>15?128:0;const b=y&15;y=y>>>4;let x=(v|m|b).toString(16);for(o(x,"hex");v;)v=y>127?128:0,x=v|y&127,o(PC(2,x),"hex"),y=y>>>7;o(Jt.from(await V5(h)))}o("PACK"),o("00000002","hex"),o(PC(8,a.length),"hex");for(const d of a){const{type:h,object:m}=await Gr({fs:e,cache:t,gitdir:r,oid:d});await l({object:m,stype:h})}const u=i.digest();return s.push(u),s}async function Ese({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await fF({fs:e,cache:t,gitdir:n,oids:r}),s=Jt.from(await Tw(i)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return a?(await e.write(Pt.join(n,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function Cse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await Ese({fs:new cn(e),cache:i,gitdir:n,oids:r,write:a})}catch(s){throw s.caller="git.packObjects",s}}async function kse({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,prune:y=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:x=!1,corsProxy:w,singleBranch:S,headers:E={},author:C,committer:T,signingKey:j,cache:I={}}){try{et("fs",e),et("gitdir",l);const R=new cn(e),F=await Au({fs:R,gitdir:l,author:C});if(!F)throw new ci("author");const B=await Zh({fs:R,gitdir:l,author:F,committer:T});if(!B)throw new ci("committer");return await sF({fs:R,cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForward:b,fastForwardOnly:x,corsProxy:w,singleBranch:S,headers:E,author:F,committer:B,signingKey:j,prune:y,pruneTags:v})}catch(R){throw R.caller="git.pull",R}}async function Tse({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),start:a,finish:i}){const s=await zg.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const h of a)o.add(await Ut.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Ut.resolve({fs:e,gitdir:r,ref:h});l.add(m)}catch{}const u=new Set;async function d(h){u.add(h);const{type:m,object:y}=await Gr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const b=wi.from(y).headers().object;return d(b)}if(m!=="commit")throw new Ai(h,m,"commit");if(!s.has(h)){const b=Vr.from(y).headers().parent;for(h of b)!l.has(h)&&!u.has(h)&&await d(h)}}for(const h of o)await d(h);return u}async function nE({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new Set;async function s(o){if(i.has(o))return;i.add(o);const{type:l,object:u}=await Gr({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const h=wi.from(u).headers().object;await s(h)}else if(l==="commit"){const h=Vr.from(u).headers().tree;await s(h)}else if(l==="tree"){const d=Ui.from(u);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await s(h.oid)}}for(const o of a)await s(o);return i}async function Ase(e){const t={};let n="";const r=oa.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new uf('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const s of i){if(s.trim()==="")continue;const o=s.slice(0,2),l=s.slice(3);let u=l.indexOf(" ");u===-1&&(u=l.length);const d=l.slice(0,u),h=l.slice(u+1);t.refs[d]={ok:o==="ok",error:h}}return t}async function Nse({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(oa.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(oa.flush()),n}async function Rse({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:u,ref:d,remoteRef:h,remote:m,url:y,force:v=!1,delete:b=!1,corsProxy:x,headers:w={}}){const S=d||await Bu({fs:e,gitdir:u});if(typeof S>"u")throw new zi("ref");const E=await ga.get({fs:e,gitdir:u});m=m||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=y||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof C>"u")throw new zi("remote OR url");const T=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new zi("remoteRef");x===void 0&&(x=await E.get("http.corsProxy"));const j=await Ut.expand({fs:e,gitdir:u,ref:S}),I=b?"0000000000000000000000000000000000000000":await Ut.resolve({fs:e,gitdir:u,ref:j}),R=qx.getRemoteHelperFor({url:C}),F=await R.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:x,service:"git-receive-pack",url:C,headers:w,protocolVersion:1}),B=F.auth;let H;if(!T)H=j;else try{H=await Ut.expandAgainstMap({ref:T,map:F.refs})}catch(Q){if(Q instanceof Nr)H=T.startsWith("refs/")?T:`refs/heads/${T}`;else throw Q}const D=F.refs.get(H)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:m,url:C,localRef:{ref:b?"(delete)":j,oid:I},remoteRef:{ref:H,oid:D}}))throw new wp;const Z=!F.capabilities.has("no-thin");let V=new Set;if(!b){const Q=[...F.refs.values()];let ee=new Set;if(D!=="0000000000000000000000000000000000000000"){const fe=await $T({fs:e,cache:t,gitdir:u,oids:[I,D]});for(const ve of fe)Q.push(ve);Z&&(ee=await nE({fs:e,cache:t,gitdir:u,oids:fe}))}if(!Q.includes(I)){const fe=await Tse({fs:e,cache:t,gitdir:u,start:[I],finish:Q});V=await nE({fs:e,cache:t,gitdir:u,oids:fe})}if(Z){try{const fe=await Ut.resolve({fs:e,gitdir:u,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:ve}=await Ut.resolveAgainstMap({ref:fe.replace(`refs/remotes/${m}/`,""),fullref:fe,map:F.refs}),Oe=[ve];for(const Ae of await nE({fs:e,cache:t,gitdir:u,oids:Oe}))ee.add(Ae)}catch{}for(const fe of ee)V.delete(fe)}if(I===D&&(v=!0),!v){if(j.startsWith("refs/tags")&&D!=="0000000000000000000000000000000000000000")throw new Kh("tag-exists");if(I!=="0000000000000000000000000000000000000000"&&D!=="0000000000000000000000000000000000000000"&&!await cF({fs:e,cache:t,gitdir:u,oid:I,ancestor:D,depth:-1}))throw new Kh("not-fast-forward")}}const ue=tF([...F.capabilities],["report-status","side-band-64k",`agent=${Hx.agent}`]),ae=await Nse({capabilities:ue,triplets:[{oldoid:D,oid:I,fullRef:H}]}),ne=b?[]:await fF({fs:e,cache:t,gitdir:u,oids:[...V]}),X=await R.connect({http:n,onProgress:r,corsProxy:x,service:"git-receive-pack",url:C,auth:B,headers:w,body:[...ae,...ne]}),{packfile:ie,progress:L}=await rF.demux(X.body);if(a){const Q=nF(L);Y0(Q,async ee=>{await a(ee)})}const J=await Ase(ie);if(X.headers&&(J.headers=X.headers),m&&J.ok&&J.refs[H].ok&&!j.startsWith("refs/tags")){const Q=`refs/remotes/${m}/${H.replace("refs/heads","")}`;b?await Ut.deleteRef({fs:e,gitdir:u,ref:Q}):await Ut.writeRef({fs:e,gitdir:u,ref:Q,value:I})}if(J.ok&&Object.values(J.refs).every(Q=>Q.ok))return J;{const Q=Object.entries(J.refs).filter(([ee,fe])=>!fe.ok).map(([ee,fe])=>`
  - ${ee}: ${fe.error}`).join("");throw new $0(Q,J)}}async function Ise({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,dir:l,gitdir:u=Pt.join(l,".git"),ref:d,remoteRef:h,remote:m="origin",url:y,force:v=!1,delete:b=!1,corsProxy:x,headers:w={},cache:S={}}){try{return et("fs",e),et("http",t),et("gitdir",u),await Rse({fs:new cn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,gitdir:u,ref:d,remoteRef:h,remote:m,url:y,force:v,delete:b,corsProxy:x,headers:w})}catch(E){throw E.caller="git.push",E}}async function hF({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Gr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=wi.from(i).parse().object,hF({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new Ai(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function pF({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await W0({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await hF({fs:e,cache:t,gitdir:n,oid:r})}async function jse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await pF({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readBlob",s}}async function mF({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Yh({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Ose({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ut.resolve({gitdir:n,fs:e,ref:r}),{blob:s}=await pF({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return s}async function Dse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oid",a),await Ose({fs:new cn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(s){throw s.caller="git.readNote",s}}async function Mse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:s=void 0,cache:o={}}){try{et("fs",e),et("gitdir",n),et("oid",r);const l=new cn(e);i!==void 0&&(r=await W0({fs:l,cache:o,gitdir:n,oid:r,filepath:i}));const d=await Gr({fs:l,cache:o,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Vr.from(d.object).parse();break;case"tree":d.object=Ui.from(d.object).entries();break;case"blob":s?d.object=d.object.toString(s):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=wi.from(d.object).parse();break;default:throw new Ai(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function Pse({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Gr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new Ai(r,a,"tag");const s=wi.from(i);return{oid:r,tag:s.parse(),payload:s.payload()}}async function Fse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Pse({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function Lse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await _p({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readTree",s}}async function $se({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r),await Ba.acquire({fs:new cn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function Bse({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l}){let u;try{u=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof Nr))throw v}let h=(await _p({fs:e,gitdir:r,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const m=await Z0({fs:e,gitdir:r,tree:h});return await Ux({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:u&&[u],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function zse({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l,cache:u={}}){try{et("fs",e),et("gitdir",r),et("oid",i);const d=new cn(e),h=await Au({fs:d,gitdir:r,author:s});if(!h)throw new ci("author");const m=await Zh({fs:d,gitdir:r,author:h,committer:o});if(!m)throw new ci("committer");return await Bse({fs:d,cache:u,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function Use({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==Vo.clean(r))throw new lo(r,Vo.clean(r));if(n!==Vo.clean(n))throw new lo(n,Vo.clean(n));const i=`refs/heads/${n}`,s=`refs/heads/${r}`;if(await Ut.exists({fs:e,gitdir:t,ref:s}))throw new po("branch",r,!1);const l=await Ut.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ut.writeRef({fs:e,gitdir:t,ref:s,value:l}),await Ut.deleteRef({fs:e,gitdir:t,ref:i});const d=await Bu({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function qse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oldref",a),await Use({fs:new cn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(s){throw s.caller="git.renameBranch",s}}async function gF({gitdir:e,type:t,object:n}){return ac(yp.wrap({type:t,object:n}))}async function Hse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const s=new cn(e);let o,l;try{o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(o)try{o=await W0({fs:s,cache:i,gitdir:n,oid:o,filepath:r})}catch{o=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await s.read(Pt.join(t,r));d&&(l=await gF({gitdir:n,type:"blob",object:d}),o===l&&(u=await s.lstat(Pt.join(t,r)))),await Ba.acquire({fs:s,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),o&&h.insert({filepath:r,stats:u,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function Vse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,depth:a}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ut.resolve({fs:new cn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function Gse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r,value:a,append:i=!1}){try{et("fs",e),et("gitdir",n),et("path",r);const s=new cn(e),o=await ga.get({fs:s,gitdir:n});i?await o.append(r,a):await o.set(r,a),await ga.save({fs:s,gitdir:n,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function yF({fs:e,gitdir:t,commit:n}){const r=Vr.from(n).toObject();return await Hi({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Nw{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=Nw.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${s} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,s)=>n?`stash@{${s}}: ${i.split("	")[1]}`:i)}}const Kse={stage:gp,workdir:K0};let rE;async function Xh(e,t){return rE===void 0&&(rE=new $g),rE.acquire(e,t)}async function Wse(e,t,n,r,a=null){const i=Pt.join(n,r),s=await e.lstat(i);if(!s)throw new Nr(i);if(s.isDirectory())throw new jn(`${i}: file expected, but found directory`);const o=a?await B5({fs:e,gitdir:t,oid:a}):void 0;let l=o?a:void 0;return o||await Xh({fs:e,gitdir:t,currentFilepath:i},async()=>{const u=s.isSymbolicLink()?await e.readlink(i).then(G5):await e.read(i);if(u===null)throw new Nr(i);l=await Hi({fs:e,gitdir:t,type:"blob",object:u})}),l}async function Zse({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const s=await Promise.all(i.children.map(a));i.oid=await Z0({fs:e,gitdir:n,tree:s}),i.mode=16384}}else i.type==="blob"&&(i.oid=await Wse(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function Y4({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(y=>typeof y=="string"?Kse[y]():y),s=[],d=await Tu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(y,[v,b])=>{if(!(y==="."||await xp.isIgnored({fs:e,dir:t,gitdir:n,filepath:y}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&s.push([v,b]),{mode:await b.mode(),path:y,oid:await b.oid(),type:await b.type()}},reduce:async(y,v)=>(v=v.filter(Boolean),y?(y.children=v,y):v.length>0?v:void 0),iterate:async(y,v)=>{const b=[];for(const x of v){const[w,S]=x;a?S&&(await e.exists(`${t}/${S.toString()}`)?b.push(x):s.push([null,S])):w&&(S?b.push(x):s.push([w,null]))}return b.length?Promise.all(b.map(y)):[]}});if(s.length===0||d.length===0)return null;const m=(await Zse({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(y=>({mode:y.mode,path:y.path,oid:y.oid,type:y.type}));return Z0({fs:e,gitdir:n,tree:m})}async function Yse({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const s=[],o=[],l=await Tu({fs:e,cache:{},dir:t,gitdir:n,trees:[Ns({ref:a}),Ns({ref:r})],map:async(u,[d,h])=>{if(u==="."||await xp.isIgnored({fs:e,dir:t,gitdir:n,filepath:u}))return;const m=h?await h.type():await d.type();if(m!=="tree"&&m!=="blob")return;if(!h&&d){const v=m==="tree"?"rmdir":"rm";return m==="tree"&&s.push(u),m==="blob"&&i&&o.push({filepath:u,oid:await d.oid()}),{method:v,filepath:u}}const y=await h.oid();if(!d||await d.oid()!==y)return m==="tree"?{method:"mkdir",filepath:u}:(i&&o.push({filepath:u,oid:y,stats:await e.lstat(Pt.join(t,u))}),{method:"write",filepath:u,oid:y})}});await Xh({fs:e,gitdir:n,dirRemoved:s,ops:l},async()=>{for(const u of l){const d=Pt.join(t,u.filepath);switch(u.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!s.some(h=>d.startsWith(h))){const{object:h}=await Gr({fs:e,cache:{},gitdir:n,oid:u.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await Ba.acquire({fs:e,gitdir:n,cache:{}},async u=>{o.forEach(({filepath:d,stats:h,oid:m})=>{u.insert({filepath:d,stats:h,oid:m})})})}class Zl{constructor({fs:t,dir:n,gitdir:r=Pt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Pt.join(this.gitdir,Zl.refStash)}get refLogsStashPath(){return Pt.join(this.gitdir,Zl.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Au({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new ci("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return yF({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new lo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Yh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ut.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Zl.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Nw.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Xh({filepath:i,entry:a},async()=>{const s=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,s+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Nw.getStashReflogEntry(r,t)}}async function Xse({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Zl({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await Bu({fs:e,gitdir:n,fullname:!1}),s=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await mF({fs:e,dir:t,gitdir:n,oid:s})).commit.message,u=[s];let d=null,h=Ns({ref:"HEAD"});const m=await Y4({fs:e,dir:t,gitdir:n,treePair:[Ns({ref:"HEAD"}),"stage"]});if(m){const x=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:u});u.push(x),d=m,h=gp()}const y=await Y4({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(y){const x=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:y,parent:[u[u.length-1]]});u.push(x),d=y}if(!d||!m&&!y)throw new Nr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${s.substring(0,7)} ${l}`,b=await a.writeStashCommit({message:v,tree:d,parent:u});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await Q5({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function bF({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Zl({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:s=null}=i.commit?i.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){const u=(await Yh({fs:e,cache:{},gitdir:n,oid:s[o+1]})).commit.message.startsWith("stash-Index");await Yse({fs:e,dir:t,gitdir:n,stashCommit:s[o+1],parentCommit:s[o],wasStaged:u})}}async function vF({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Zl({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const s=a.refStashPath;await Xh(s,async()=>{await e.exists(s)&&await e.rm(s)});const o=await a.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=a.refLogsStashPath;await Xh({reflogEntries:o,stashReflogPath:l,stashMgr:a},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const u=o[o.length-1].split(" ")[1];await a.writeStashRef(u)}else await e.rm(l)})}async function Jse({fs:e,dir:t,gitdir:n}){return new Zl({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function Qse({fs:e,dir:t,gitdir:n}){const r=new Zl({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await Xh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function eoe({fs:e,dir:t,gitdir:n,refIdx:r=0}){await bF({fs:e,dir:t,gitdir:n,refIdx:r}),await vF({fs:e,dir:t,gitdir:n,refIdx:r})}async function toe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){et("fs",e),et("dir",t),et("gitdir",n),et("op",r);const s={push:Xse,apply:bF,drop:vF,list:Jse,clear:Qse,pop:eoe},o=["apply","drop","pop"];try{const l=new cn(e);["refs","logs","logs/refs"].map(h=>Pt.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=s[r];if(d){if(o.includes(r)&&i<0)throw new lo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function noe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const i=new cn(e);if(await xp.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await roe({fs:i,cache:a,gitdir:n}),l=await wF({fs:i,cache:a,gitdir:n,tree:o,path:r}),u=await Ba.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const x of b)if(x.path===r)return x;return null}),d=await i.lstat(Pt.join(t,r)),h=l!==null,m=u!==null,y=d!==null,v=async()=>{if(m&&!xw(u,d))return u.oid;{const b=await i.read(Pt.join(t,r)),x=await gF({gitdir:n,type:"blob",object:b});return m&&u.oid===x&&d.size!==-1&&Ba.acquire({fs:i,gitdir:n,cache:a},async function(w){w.insert({filepath:r,stats:d,oid:x})}),x}};if(!h&&!y&&!m)return"absent";if(!h&&!y&&m)return"*absent";if(!h&&y&&!m)return"*added";if(!h&&y&&m)return await v()===u.oid?"added":"*added";if(h&&!y&&!m)return"deleted";if(h&&!y&&m)return l===u.oid,"*deleted";if(h&&y&&!m)return await v()===l?"*undeleted":"*undeletemodified";if(h&&y&&m){const b=await v();return b===l?b===u.oid?"unmodified":"*unmodified":b===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function wF({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const s of r)if(s.path===i){if(a.length===0)return s.oid;const{type:o,object:l}=await Gr({fs:e,cache:t,gitdir:n,oid:s.oid});if(o==="tree"){const u=Ui.from(l);return wF({fs:e,cache:t,gitdir:n,tree:u,path:a})}if(o==="blob")throw new Ai(s.oid,o,"blob",a.join("/"))}return null}async function roe({fs:e,cache:t,gitdir:n}){let r;try{r=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof Nr)return[]}const{tree:a}=await _p({fs:e,cache:t,gitdir:n,oid:r});return a}async function aoe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:s={},ignored:o=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const l=new cn(e);return await Tu({fs:l,cache:s,dir:t,gitdir:n,trees:[Ns({ref:r}),K0(),gp()],map:async function(u,[d,h,m]){if(!d&&!m&&h&&!o&&await xp.isIgnored({fs:l,dir:t,filepath:u})||!a.some(j=>J5(u,j)))return null;if(i&&!i(u))return;const[y,v,b]=await Promise.all([d&&d.type(),h&&h.type(),m&&m.type()]),x=[y,v,b].includes("blob");if((y==="tree"||y==="special")&&!x)return;if(y==="commit")return null;if((v==="tree"||v==="special")&&!x)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!x)return;const w=y==="blob"?await d.oid():void 0,S=b==="blob"?await m.oid():void 0;let E;y!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,w,E,S],T=C.map(j=>C.indexOf(j));return T.shift(),[u,...T]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function ioe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,force:i=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const s=new cn(e);if(r===void 0)throw new zi("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"});if(!i&&await Ut.exists({fs:s,gitdir:n,ref:r}))throw new po("tag",r);await Ut.writeRef({fs:s,gitdir:n,ref:r,value:o})}catch(s){throw s.caller="git.tag",s}}async function soe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:s,add:o,remove:l,force:u}){try{et("fs",e),et("gitdir",n),et("filepath",a);const d=new cn(e);if(l)return await Ba.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!u){const y=await d.lstat(Pt.join(t,a));if(y){if(y.isDirectory())throw new ku("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Pt.join(t,a)),!h)throw new Nr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new ku("directory")}return await Ba.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!o&&!m.has({filepath:a}))throw new Nr(`file at "${a}" in index and "add" not set`);let y;if(i)y={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{y=h;const v=y.isSymbolicLink()?await d.readlink(Pt.join(t,a)):await d.read(Pt.join(t,a));i=await Hi({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return m.insert({filepath:a,oid:i,stats:y}),i})}catch(d){throw d.caller="git.updateIndex",d}}function ooe(){try{return Hx.version}catch(e){throw e.caller="git.version",e}}async function loe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),trees:r,map:a,reduce:i,iterate:s,cache:o={}}){try{return et("fs",e),et("gitdir",n),et("trees",r),await Tu({fs:new cn(e),cache:o,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function coe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),blob:r}){try{return et("fs",e),et("gitdir",n),et("blob",r),await Hi({fs:new cn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function uoe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r}){try{return et("fs",e),et("gitdir",n),et("commit",r),await yF({fs:new cn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function doe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),type:r,object:a,format:i="parsed",oid:s,encoding:o=void 0}){try{const l=new cn(e);if(i==="parsed"){switch(r){case"commit":a=Vr.from(a).toObject();break;case"tree":a=Ui.from(a).toObject();break;case"blob":a=Jt.from(a,o);break;case"tag":a=wi.from(a).toObject();break;default:throw new Ai(s||"",r,"blob|commit|tag|tree")}i="content"}return s=await Hi({fs:l,gitdir:n,type:r,object:a,oid:s,format:i}),s}catch(l){throw l.caller="git.writeObject",l}}async function foe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:s=!1}){try{et("fs",e),et("gitdir",n),et("ref",r),et("value",a);const o=new cn(e);if(r!==Vo.clean(r))throw new lo(r,Vo.clean(r));if(!i&&await Ut.exists({fs:o,gitdir:n,ref:r}))throw new po("ref",r);s?await Ut.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:a}):(a=await Ut.resolve({fs:o,gitdir:n,ref:a}),await Ut.writeRef({fs:o,gitdir:n,ref:r,value:a}))}catch(o){throw o.caller="git.writeRef",o}}async function hoe({fs:e,gitdir:t,tag:n}){const r=wi.from(n).toObject();return await Hi({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function poe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tag:r}){try{return et("fs",e),et("gitdir",n),et("tag",r),await hoe({fs:new cn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function moe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tree:r}){try{return et("fs",e),et("gitdir",n),et("tree",r),await Z0({fs:new cn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Sa={Errors:qae,STAGE:gp,TREE:Ns,WORKDIR:K0,add:oie,abortMerge:rie,addNote:cie,addRemote:uie,annotatedTag:fie,branch:pie,checkout:Q5,clone:kie,commit:Tie,getConfig:Wie,getConfigAll:Yie,setConfig:Gse,currentBranch:Aie,deleteBranch:Rie,deleteRef:Iie,deleteRemote:Oie,deleteTag:Mie,expandOid:$ie,expandRef:Bie,fastForward:Hie,fetch:Vie,findMergeBase:Gie,findRoot:Kie,getRemoteInfo:Xie,getRemoteInfo2:Jie,hashBlob:ese,indexPack:nse,init:rse,isDescendent:ase,isIgnored:ise,listBranches:sse,listFiles:lse,listNotes:use,listRefs:dse,listRemotes:hse,listServerRefs:gse,listTags:yse,log:xse,merge:_se,packObjects:Cse,pull:kse,push:Ise,readBlob:jse,readCommit:mF,readNote:Dse,readObject:Mse,readTag:Fse,readTree:Lse,remove:$se,removeNote:zse,renameBranch:qse,resetIndex:Hse,updateIndex:soe,resolveRef:Vse,status:noe,statusMatrix:aoe,tag:ioe,version:ooe,walk:loe,writeBlob:coe,writeCommit:uoe,writeObject:doe,writeRef:foe,writeTag:poe,writeTree:moe,stash:toe};function goe(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function yoe(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:goe(e)}async function boe(e,t){const n=yoe(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function voe(e){let t=0;const n=[];await boe(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function woe(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function xoe({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await voe(a));const i=await fetch(t,{method:n,headers:r,body:a}),s=i.body&&i.body.getReader?woe(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[o,l]of i.headers.entries())r[o]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:s,headers:r}}var Ug={request:xoe};const qg="https://cors.isomorphic-git.org",Jh=new Map,xF=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=fr.getState();if(!n||!r)return Ye.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await Sa.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await Sa.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await Sa.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await Sa.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),Ye.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},Hg=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=Jh.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return Ye.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(Jh.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(Ye.error("Authentication cancelled: Password/token not provided."),null)},Vg=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),Jh.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),Jh.delete(n)),null},Gg=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!Jh.has(n)&&t.username&&t.password&&(Jh.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},Ch=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},_oe=async(e,t)=>{const n=Ha,r=rr(e),a=al(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},_F=async(e,t,n,r,a)=>{var o;const i=(a==null?void 0:a.fsInstance)??Ha,s=rr(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${s}`);try{let l=!1;try{await i.promises.stat(al(s,".git")),l=!0}catch(m){if(m.code!=="ENOENT")throw m}if(l)throw console.warn(`[VFS Git Op] Clone target ${s} already contains a .git directory.`),new Error(`Repository already cloned at ${s}.`);const u=I0(s);if(u!=="/")try{await i.promises.mkdir(u,{recursive:!0})}catch(m){if(m.code!=="EEXIST")throw m}let d=n;if(!d)try{if(d=(o=(await Sa.getRemoteInfo({http:Ug,url:t,corsProxy:qg,onAuth:y=>Hg(y,r),onAuthFailure:Vg,onAuthSuccess:Gg})).HEAD)==null?void 0:o.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(m){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",m),new Error(`Failed to determine default branch: ${Ch(m)}`)}await Sa.clone({fs:i,http:Ug,dir:s,corsProxy:qg,url:t,ref:d,singleBranch:!0,depth:10,onAuth:m=>Hg(m,r),onAuthFailure:Vg,onAuthSuccess:Gg,onProgress:m=>{m.phase==="counting objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):m.phase==="receiving objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):console.log(`Clone progress: ${m.phase}`)}}),await i.promises.stat(al(s,".git"));const h=await Sa.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await Sa.checkout({fs:i,dir:s,ref:d})),Ye.success(`Repository cloned successfully into ${s} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const u=Ch(l);if(l instanceof Error&&l.message.includes("already cloned")||Ye.error(`Git clone failed: ${u}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${s}`),await i.promises.rm(s,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},SF=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);try{await Sa.init({fs:n,dir:r}),Ye.success(`Initialized empty Git repository in "${ma(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),Ye.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},BT=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(e);try{if(!await xF(a,r))throw new Error("Git user configuration is missing or invalid.");if(await Sa.add({fs:r,dir:a,filepath:"."}),!(await Sa.statusMatrix({fs:r,dir:a})).some(([,,u])=>u!==0)){Ye.info("No changes detected to commit.");return}const l=await Sa.commit({fs:r,dir:a,message:t,author:{name:fr.getState().gitUserName,email:fr.getState().gitUserEmail}});Ye.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),Ye.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},Vx=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??Ha,i=rr(e);try{if(!await xF(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const o=await Sa.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Sa.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Sa.fetch({fs:a,http:Ug,dir:i,corsProxy:qg,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>Hg(u,n),onAuthFailure:Vg,onAuthSuccess:Gg}),await Sa.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(u){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,u),new Error(`Failed to switch to or create local branch "${t}": ${Ch(u)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${Ch(l)}`)}}await Sa.pull({fs:a,http:Ug,dir:i,ref:t,singleBranch:!0,author:{name:fr.getState().gitUserName,email:fr.getState().gitUserEmail},corsProxy:qg,onAuth:l=>Hg(l,n),onAuthFailure:Vg,onAuthSuccess:Gg}),Ye.success(`Pulled changes successfully for "${ma(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(s){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,s),s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")?Ye.info(`Branch "${t}" is already up-to-date.`):Ye.error(`Git pull failed: ${Ch(s)}`),!(s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")))throw s}},zT=async(e,t,n,r)=>{var s,o;const a=(r==null?void 0:r.fsInstance)??Ha,i=rr(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await Sa.push({fs:a,http:Ug,dir:i,corsProxy:qg,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:u=>Hg(u,n),onAuthFailure:Vg,onAuthSuccess:Gg});if(l!=null&&l.ok)Ye.success(`Pushed changes successfully for "${ma(i)}"`);else if((s=l==null?void 0:l.error)!=null&&s.includes("up-to-date"))Ye.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(Ye.error(`Push rejected for "${ma(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||Ye.error(`Git push failed: ${Ch(l)}`),l}},EF=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await Sa.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([s,o,l,u])=>{let d="";return u===2&&(d+="INDEX_Modified "),u===3&&(d+="INDEX_Added "),o===0&&l===2?d+="WT_New":o===1&&l===2?d+="WT_Modified":o===1&&l===0?d+="WT_Deleted":o===1&&l===1&&u===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${o} w:${l} s:${u}`),`${s}: ${d.trim()}`}).filter(s=>!s.endsWith("Unmodified")).join(`
`);Ye.info(`Git Status for "${ma(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),Ye.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},Ud=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),Ye.error(`Error creating directory "${ma(r)}": ${a instanceof Error?a.message:String(a)}`),a}},Soe=async e=>{try{const t={backend:kre,name:`litechat_vfs_${e}`};return await bre(t),Ha}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),Ye.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},UT=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await Ud(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const u=al(r,l);try{const d=await n.promises.stat(u);return{name:l,path:u,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${u}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),Ye.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},df=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);try{const a=await n.promises.readFile(r);return kt.emit(Et.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),Ye.error(`Error reading file "${ma(r)}": ${a instanceof Error?a.message:String(a)}`),a}},Gx=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(e),i=I0(a);try{i!=="/"&&await Ud(i,{fsInstance:r}),await r.promises.writeFile(a,t),kt.emit(Et.VFS_FILE_WRITTEN,{path:a})}catch(s){throw s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,s),Ye.error(`Error writing file "${ma(a)}": ${s instanceof Error?s.message:String(s)}`)),s}},qT=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(e);if(a==="/")throw Ye.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),kt.emit(Et.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),kt.emit(Et.VFS_FILE_DELETED,{path:a})),Ye.success(`"${ma(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),Ye.error(`Error deleting "${ma(a)}": ${i instanceof Error?i.message:String(i)}`),i}},CF=async(e,t)=>{await Ud(e,t)},Eoe=async(e,t,n)=>{try{const r=await df(e,n),a=new Blob([r]),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i;const o=rr(e);s.download=t||ma(o),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||Ye.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},kF=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(t);let i=0,s=0;const o=Array.from(e);try{await Ud(a,{fsInstance:r});for(const l of o){const u=al(a,l.name);try{const d=await l.arrayBuffer();await Gx(u,new Uint8Array(d),{fsInstance:r}),i++}catch(d){s++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){s=o.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{s>0&&i>0?Ye.warning(`Upload complete with issues. ${i} succeeded, ${s} failed.`):s===0&&i>0&&Ye.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":ma(a)}.`)}},Coe=async(e,t,n)=>{const r=Ha;if(!e.name.toLowerCase().endsWith(".zip")){Ye.error("Please select a valid ZIP file.");return}const a=rr(t);let i;try{await Ud(a,{fsInstance:r}),i=await A5.loadAsync(e);const s=Object.values(i.files),o=await Promise.allSettled(s.map(async h=>{const m=al(a,h.name);if(h.dir)await Ud(m,{fsInstance:r});else{const y=await h.async("uint8array");await Gx(m,y,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,u=0,d=0;o.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?u++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?Ye.warning(`Finished extracting "${e.name}". ${l+u} items succeeded, ${d} failed.`):Ye.success(`Successfully extracted ${l} files and ${u} folders from "${e.name}" to ${a==="/"?"root":ma(a)}.`)}catch(s){s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,s),Ye.error(`ZIP extraction failed: ${s instanceof Error?s.message:String(s)}`))}},X4=async(e,t="/",n)=>{const r=Ha,a=new A5,i=rr(t),s=ma(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){Ye.error(`Cannot export: "${s}" is not a directory.`);return}}catch(m){m instanceof Error&&m.code==="ENOENT"?Ye.error(`Cannot export: Path "${s}" not found.`):Ye.error(`Cannot export: Error accessing path "${s}". ${m instanceof Error?m.message:String(m)}`);return}const o=async(m,y)=>{const v=await UT(m,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const x=y.folder(b.name);if(x)await o(b.path,x);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const x=await df(b.path,{fsInstance:r});y.file(b.name,x)}};await o(i,a);const l=await a.generateAsync({type:"blob"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u;const h=`vfs_${s}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),Ye.success(`"${s}" exported as ${d.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||Ye.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},TF=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(e),i=rr(t);if(a==="/"||i==="/")throw Ye.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const s=I0(i);s!=="/"&&await Ud(s,{fsInstance:r}),await r.promises.rename(a,i),Ye.success(`Renamed "${ma(a)}" to "${ma(i)}"`)}catch(s){throw s instanceof Error&&s.code==="ENOENT"?s.message.includes("Error creating directory")||Ye.error(`Rename failed: Original item "${ma(a)}" not found.`):s instanceof Error&&s.code==="EEXIST"?Ye.error(`Rename failed: An item named "${ma(i)}" already exists.`):s instanceof Error&&s.message.includes("Error creating directory")||Ye.error(`Rename failed: ${s instanceof Error?s.message:String(s)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,s),s}},koe=1024*5,Toe=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},J4=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},HT=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=k.useState(null),[i,s]=k.useState(null),[o,l]=k.useState(!1),[u,d]=k.useState(!1),[h,m]=k.useState(!0),y=e.type||"application/octet-stream",v=kk(e.name,y),b=y.startsWith("image/"),x=y.startsWith("audio/"),w=y.startsWith("video/"),S=e.source==="vfs";k.useEffect(()=>{let F=null;return s(null),e.source==="direct"&&!v&&e.contentBase64?(F=Toe(e.contentBase64,y),F||s("Failed to decode file content for preview."),a(F)):a(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>koe?s(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&s("Text content missing from metadata."),()=>{F&&(URL.revokeObjectURL(F),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,y,v]);const E=async()=>{if(e.source==="vfs"){Ye.info("File is already in VFS.");return}const F=J4(e);if(!F){Ye.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await kF([F],"/"),Ye.success(`"${e.name}" added to VFS root.`)}catch(B){console.error("Failed to add file to VFS:",B),Ye.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{d(!0);try{let F;if(e.source==="vfs"&&e.path){const D=await df(e.path);F=new Blob([D],{type:y})}else{const D=J4(e);if(!D)throw new Error("Could not reconstruct file data.");F=D}const B=URL.createObjectURL(F),H=document.createElement("a");H.href=B,H.download=e.name,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(B)}catch(F){console.error("Failed to download file:",F),Ye.error(`Download failed: ${F instanceof Error?F.message:String(F)}`)}finally{d(!1)}},T=()=>m(F=>!F),j=()=>S?p.jsx(sD,{className:"h-5 w-5 text-cyan-500"}):v?p.jsx($H,{className:"h-5 w-5 text-blue-500"}):b?p.jsx(wk,{className:"h-5 w-5 text-purple-500"}):x?p.jsx(mV,{className:"h-5 w-5 text-green-500"}):w?p.jsx(JV,{className:"h-5 w-5 text-orange-500"}):p.jsx(FH,{className:"h-5 w-5 text-muted-foreground"}),I=()=>S?p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?p.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[p.jsx(Nh,{className:"h-4 w-4"}),p.jsx("span",{children:i})]}):v&&e.contentText!==void 0?p.jsx(S0,{lang:y==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?p.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):x&&r?p.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):w&&r?p.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),R=k.useMemo(()=>{let F="File";return S?F="VFS File":v?F="Text":b?F="Image":x?F="Audio":w&&(F="Video"),`${F} (${Fg(e.size)})`},[S,v,b,x,w,e.size]);return p.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[j(),p.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",Fg(e.size),")"]}),S&&e.path&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),p.jsx(Qn,{children:p.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:u,"aria-label":"Download file",children:u?p.jsx(On,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(jd,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{children:"Download File"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:T,"aria-label":h?"Unfold preview":"Fold preview",children:p.jsx(Jw,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&p.jsxs(p.Fragment,{children:[e.source==="direct"&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:o,"aria-label":"Add to VFS",children:o?p.jsx(On,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(eD,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{children:"Add to VFS"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:p.jsx(_i,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{children:"Remove from Prompt"})]})})]})]})]}),h?p.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:T,children:R}):p.jsx("div",{className:_t("p-2 max-h-80 overflow-y-auto"),children:I()})]})},Aoe=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:a})=>{const[i,s]=k.useState(!1),[o,l]=k.useState(!1),u=Rr(dn(E=>E.promptControls)),d=Hn(dn(E=>E.status==="streaming")),{attachedFilesMetadata:h,clearAttachedFiles:m,removeAttachedFile:y}=Jl(dn(E=>({attachedFilesMetadata:E.attachedFilesMetadata,clearAttachedFiles:E.clearAttachedFiles,removeAttachedFile:E.removeAttachedFile}))),v=k.useMemo(()=>Object.values(u).filter(E=>E.show?E.show():!0),[u]),b=k.useMemo(()=>v.filter(E=>E.renderer),[v]),x=k.useMemo(()=>v.filter(E=>E.triggerRenderer),[v]),w=k.useCallback(async()=>{var j,I;const C=(((j=a==null?void 0:a.current)==null?void 0:j.getValue())??"").trim(),T=Jl.getState().attachedFilesMetadata;if(!(!C&&T.length===0)&&!(d||i)){s(!0);try{let R={},F={};for(const Z of v){if(Z.getParameters){const V=await Z.getParameters();V&&(R={...R,...V})}if(Z.getMetadata){const V=await Z.getMetadata();V&&(F={...F,...V})}}T.length>0&&(F.attachedFiles=[...T]);let B={id:Si(),content:C,parameters:R,metadata:F};kt.emit(Et.PROMPT_SUBMITTED,{turnData:B});const H=await yC(zv.PROMPT_TURN_FINALIZE,{turnData:B});if(H===!1){console.log("Prompt submission cancelled by middleware."),s(!1);return}const D=H&&typeof H=="object"?H.turnData:B;await t(D),m(),v.forEach(Z=>{Z.clearOnSubmit&&Z.clearOnSubmit()}),(I=a.current)==null||I.clearValue(),l(!1)}catch(R){console.error("Error during prompt submission:",R),Ye.error(`Failed to send message: ${R instanceof Error?R.message:String(R)}`)}finally{s(!1)}}},[a,d,i,v,t,m]),S=k.useCallback(E=>{l(E.trim().length>0)},[]);return p.jsxs("div",{className:_t("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[b.length>0&&p.jsx(r3,{controls:b,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),h.length>0&&p.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 border rounded-md p-2 bg-muted/20 mb-2",children:h.map(E=>p.jsx(HT,{fileMeta:E,onRemove:y,isReadOnly:!1},E.id))}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx(e,{ref:a,onSubmit:w,disabled:d||i,placeholder:r,onValueChange:S,className:"flex-grow"}),p.jsx(Rt,{type:"button",size:"icon",onClick:w,disabled:d||i||!o&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(NV,{className:"h-4 w-4"})})]}),p.jsx(r3,{controls:x,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})},AF=6048e5,Noe=864e5,uv=43200,Q4=1440,eO=Symbol.for("constructDateFrom");function ic(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&eO in e?e[eO](t):e instanceof Date?new e.constructor(t):new Date(t)}function qa(e,t){return ic(t||e,e)}let Roe={};function X0(){return Roe}function Kg(e,t){var o,l,u,d;const n=X0(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=qa(e,t==null?void 0:t.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function Rw(e,t){return Kg(e,{...t,weekStartsOn:1})}function NF(e,t){const n=qa(e,t==null?void 0:t.in),r=n.getFullYear(),a=ic(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Rw(a),s=ic(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Rw(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Iw(e){const t=qa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Kx(e,...t){const n=ic.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function tO(e,t){const n=qa(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Ioe(e,t,n){const[r,a]=Kx(n==null?void 0:n.in,e,t),i=tO(r),s=tO(a),o=+i-Iw(i),l=+s-Iw(s);return Math.round((o-l)/Noe)}function joe(e,t){const n=NF(e,t),r=ic(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Rw(r)}function Iv(e,t){const n=+qa(e)-+qa(t);return n<0?-1:n>0?1:n}function Ooe(e){return ic(e,Date.now())}function Doe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Moe(e){return!(!Doe(e)&&typeof e!="number"||isNaN(+qa(e)))}function Poe(e,t,n){const[r,a]=Kx(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function Foe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function Loe(e,t){return+qa(e)-+qa(t)}function $oe(e,t){const n=qa(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function Boe(e,t){const n=qa(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function zoe(e,t){const n=qa(e,t==null?void 0:t.in);return+$oe(n,t)==+Boe(n,t)}function Uoe(e,t,n){const[r,a,i]=Kx(n==null?void 0:n.in,e,e,t),s=Iv(a,i),o=Math.abs(Poe(a,i));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*o);let l=Iv(a,i)===-s;zoe(r)&&o===1&&Iv(r,i)===1&&(l=!1);const u=s*(o-+l);return u===0?0:u}function qoe(e,t,n){const r=Loe(e,t)/1e3;return Foe(n==null?void 0:n.roundingMethod)(r)}function Hoe(e,t){const n=qa(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Voe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Goe=(e,t,n)=>{let r;const a=Voe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function aE(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Koe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Woe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Zoe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yoe={date:aE({formats:Koe,defaultWidth:"full"}),time:aE({formats:Woe,defaultWidth:"full"}),dateTime:aE({formats:Zoe,defaultWidth:"full"})},Xoe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Joe=(e,t,n,r)=>Xoe[e];function Hm(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Qoe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ele={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tle={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nle={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rle={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ale={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ile=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},sle={ordinalNumber:ile,era:Hm({values:Qoe,defaultWidth:"wide"}),quarter:Hm({values:ele,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Hm({values:tle,defaultWidth:"wide"}),day:Hm({values:nle,defaultWidth:"wide"}),dayPeriod:Hm({values:rle,defaultWidth:"wide",formattingValues:ale,defaultFormattingWidth:"wide"})};function Vm(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?lle(o,h=>h.test(s)):ole(o,h=>h.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function ole(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function lle(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function cle(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const ule=/^(\d+)(th|st|nd|rd)?/i,dle=/\d+/i,fle={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hle={any:[/^b/i,/^(a|c)/i]},ple={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mle={any:[/1/i,/2/i,/3/i,/4/i]},gle={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yle={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ble={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vle={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wle={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xle={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_le={ordinalNumber:cle({matchPattern:ule,parsePattern:dle,valueCallback:e=>parseInt(e,10)}),era:Vm({matchPatterns:fle,defaultMatchWidth:"wide",parsePatterns:hle,defaultParseWidth:"any"}),quarter:Vm({matchPatterns:ple,defaultMatchWidth:"wide",parsePatterns:mle,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Vm({matchPatterns:gle,defaultMatchWidth:"wide",parsePatterns:yle,defaultParseWidth:"any"}),day:Vm({matchPatterns:ble,defaultMatchWidth:"wide",parsePatterns:vle,defaultParseWidth:"any"}),dayPeriod:Vm({matchPatterns:wle,defaultMatchWidth:"any",parsePatterns:xle,defaultParseWidth:"any"})},RF={code:"en-US",formatDistance:Goe,formatLong:Yoe,formatRelative:Joe,localize:sle,match:_le,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Sle(e,t){const n=qa(e,t==null?void 0:t.in);return Ioe(n,Hoe(n))+1}function Ele(e,t){const n=qa(e,t==null?void 0:t.in),r=+Rw(n)-+joe(n);return Math.round(r/AF)+1}function IF(e,t){var d,h,m,y;const n=qa(e,t==null?void 0:t.in),r=n.getFullYear(),a=X0(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((y=(m=a.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,s=ic((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const o=Kg(s,t),l=ic((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=Kg(l,t);return+n>=+o?r+1:+n>=+u?r:r-1}function Cle(e,t){var o,l,u,d;const n=X0(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=IF(e,t),i=ic((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Kg(i,t)}function kle(e,t){const n=qa(e,t==null?void 0:t.in),r=+Kg(n,t)-+Cle(n,t);return Math.round(r/AF)+1}function vr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Qc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return vr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):vr(n+1,2)},d(e,t){return vr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return vr(e.getHours()%12||12,t.length)},H(e,t){return vr(e.getHours(),t.length)},m(e,t){return vr(e.getMinutes(),t.length)},s(e,t){return vr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return vr(a,t.length)}},oh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nO={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Qc.y(e,t)},Y:function(e,t,n,r){const a=IF(e,r),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return vr(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):vr(i,t.length)},R:function(e,t){const n=NF(e);return vr(n,t.length)},u:function(e,t){const n=e.getFullYear();return vr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return vr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return vr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Qc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return vr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=kle(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):vr(a,t.length)},I:function(e,t,n){const r=Ele(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):vr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Qc.d(e,t)},D:function(e,t,n){const r=Sle(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):vr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return vr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return vr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return vr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=oh.noon:r===0?a=oh.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=oh.evening:r>=12?a=oh.afternoon:r>=4?a=oh.morning:a=oh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Qc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Qc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):vr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):vr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Qc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Qc.s(e,t)},S:function(e,t){return Qc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return aO(r);case"XXXX":case"XX":return xd(r);case"XXXXX":case"XXX":default:return xd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return aO(r);case"xxxx":case"xx":return xd(r);case"xxxxx":case"xxx":default:return xd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+rO(r,":");case"OOOO":default:return"GMT"+xd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+rO(r,":");case"zzzz":default:return"GMT"+xd(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return vr(r,t.length)},T:function(e,t,n){return vr(+e,t.length)}};function rO(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+vr(i,2)}function aO(e,t){return e%60===0?(e>0?"-":"+")+vr(Math.abs(e)/60,2):xd(e,t)}function xd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=vr(Math.trunc(r/60),2),i=vr(r%60,2);return n+a+t+i}const iO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},jF=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Tle=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return iO(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",iO(r,t)).replace("{{time}}",jF(a,t))},Ale={p:jF,P:Tle},Nle=/^D+$/,Rle=/^Y+$/,Ile=["D","DD","YY","YYYY"];function jle(e){return Nle.test(e)}function Ole(e){return Rle.test(e)}function Dle(e,t,n){const r=Mle(e,t,n);if(console.warn(r),Ile.includes(e))throw new RangeError(r)}function Mle(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ple=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fle=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lle=/^'([^]*?)'?$/,$le=/''/g,Ble=/[a-zA-Z]/;function FC(e,t,n){var d,h,m,y;const r=X0(),a=r.locale??RF,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.weekStartsOn)??0,o=qa(e,n==null?void 0:n.in);if(!Moe(o))throw new RangeError("Invalid time value");let l=t.match(Fle).map(v=>{const b=v[0];if(b==="p"||b==="P"){const x=Ale[b];return x(v,a.formatLong)}return v}).join("").match(Ple).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:zle(v)};if(nO[b])return{isToken:!0,value:v};if(b.match(Ble))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Ole(b)||jle(b))&&Dle(b,t,String(e));const x=nO[b[0]];return x(o,b,a.localize,u)}).join("")}function zle(e){const t=e.match(Lle);return t?t[1].replace($le,"'"):e}function Ule(e,t,n){const r=X0(),a=(n==null?void 0:n.locale)??r.locale??RF,i=2520,s=Iv(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,u]=Kx(n==null?void 0:n.in,...s>0?[t,e]:[e,t]),d=qoe(u,l),h=(Iw(u)-Iw(l))/1e3,m=Math.round((d-h)/60);let y;if(m<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):m===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",m,o);if(m<45)return a.formatDistance("xMinutes",m,o);if(m<90)return a.formatDistance("aboutXHours",1,o);if(m<Q4){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,o)}else{if(m<i)return a.formatDistance("xDays",1,o);if(m<uv){const v=Math.round(m/Q4);return a.formatDistance("xDays",v,o)}else if(m<uv*2)return y=Math.round(m/uv),a.formatDistance("aboutXMonths",y,o)}if(y=Uoe(u,l),y<12){const v=Math.round(m/uv);return a.formatDistance("xMonths",v,o)}else{const v=y%12,b=Math.trunc(y/12);return v<3?a.formatDistance("aboutXYears",b,o):v<9?a.formatDistance("overXYears",b,o):a.formatDistance("almostXYears",b+1,o)}}function OF(e,t){return Ule(e,Ooe(e),t)}const Dn=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:s="ghost",size:o="icon",className:l,"aria-label":u,...d})=>{const h=typeof t=="function";return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:s,size:o,onClick:a,disabled:i,className:_t("h-6 w-6",l),"aria-label":u,...d,children:h?p.jsx(t,{className:_t("h-3.5 w-3.5",n)}):t})}),p.jsx(Qn,{side:r,children:p.jsx("p",{children:e})})]})})},VT=gt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var v,b,x;const a=fr(w=>w.foldUserMessagesOnCompletion),[i,s]=k.useState(r&&a),[o,l]=k.useState(!1);k.useEffect(()=>{r&&a&&s(!0)},[r,a]);const u=t?OF(new Date(t),{addSuffix:!0}):"Sending...",d=((v=e.metadata)==null?void 0:v.attachedFiles)&&e.metadata.attachedFiles.length>0,h=e.content&&e.content.trim().length>0,m=k.useCallback(()=>s(w=>!w),[]),y=k.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),Ye.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(w){Ye.error("Failed to copy prompt."),console.error("Clipboard copy failed:",w)}},[e.content]);return p.jsxs("div",{className:_t("user-prompt relative group/user overflow-wrap-anywhere",n),children:[p.jsxs("div",{className:_t("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[p.jsx(ZV,{className:"h-4 w-4 text-primary flex-shrink-0"}),p.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[h&&p.jsx(Dn,{tooltipText:"Copy Prompt",onClick:y,"aria-label":"Copy user prompt",icon:o?p.jsx(xi,{className:"text-green-500"}):p.jsx(yk,{}),className:"h-5 w-5"}),(h||d)&&p.jsx(Dn,{tooltipText:i?"Unfold":"Fold",onClick:m,"aria-label":i?"Unfold prompt":"Fold prompt",icon:i?p.jsx(sl,{}):p.jsx(Kd,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:u})})]}),!i&&p.jsxs(p.Fragment,{children:[d&&p.jsx("div",{className:"mb-2 space-y-1",children:(b=e.metadata.attachedFiles)==null?void 0:b.map(w=>p.jsx(HT,{fileMeta:w,isReadOnly:!0},w.id))}),h&&p.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]}),i&&p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:m,children:[h?`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`:"",h&&d?" + ":"",d?`${(x=e.metadata.attachedFiles)==null?void 0:x.length} file(s)`:""]})]})});VT.displayName="UserPromptDisplay";const sO=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,qle=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i,promptTokens:s,completionTokens:o,timeToFirstToken:l,generationTime:u})=>{const[d,h]=k.useState(!1),m=k.useCallback(async()=>{if(!n||typeof n!="string"){Ye.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),h(!0),Ye.success("Assistant response copied!"),setTimeout(()=>h(!1),1500)}catch(v){Ye.error("Failed to copy response."),console.error("Clipboard copy failed:",v)}},[n]),y=s!==void 0&&o!==void 0?s+o:void 0;return p.jsxs("div",{className:_t("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(aH,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[y!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(_H,{className:"h-3 w-3"}),p.jsx("span",{children:y.toLocaleString()})]}),p.jsxs(Qn,{side:"bottom",children:["Tokens: ",s??"?"," (Prompt) +"," ",o??"?"," (Completion) = ",y]})]})}),l!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(nG,{className:"h-3 w-3"}),p.jsx("span",{children:sO(l)})]}),p.jsx(Qn,{side:"bottom",children:"Time to First Token"})]})}),u!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(gH,{className:"h-3 w-3"}),p.jsx("span",{children:sO(u)})]}),p.jsx(Qn,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),p.jsxs("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:[p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[n&&typeof n=="string"&&p.jsx(Dn,{tooltipText:"Copy Response",onClick:m,"aria-label":"Copy assistant response",icon:d?p.jsx(xi,{className:"text-green-500"}):p.jsx(yk,{}),className:"h-5 w-5"}),i&&p.jsx(Dn,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?p.jsx(sl,{}):p.jsx(Kd,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]})]})},Hle=({interactionId:e,currentRating:t})=>{const n=Hn(i=>i.rateInteraction),r=i=>{n(e,i===t?null:i)},a=Array.from({length:11},(i,s)=>s-5);return p.jsx("div",{className:"flex items-center gap-1",children:a.map(i=>{let s="";i===-5?s="Terrible":i===-4?s="Very Bad":i===-3?s="Bad":i===-2?s="Poor":i===-1?s="Below Average":i===0?s="Neutral":i===1?s="Above Average":i===2?s="Good":i===3?s="Very Good":i===4?s="Excellent":i===5&&(s="Perfect");let o="text-muted-foreground",l="hover:text-foreground",u="";i<0?(l="hover:text-red-500",t===i&&(o="text-red-500",u="fill-red-500")):i===0?(l="hover:text-gray-500",t===i&&(o="text-gray-500",u="fill-gray-500")):(l="hover:text-green-500",t===i&&(o="text-green-500",u="fill-green-500"));const d=t===i?"bg-muted":"";return p.jsx(Dn,{tooltipText:s,onClick:()=>r(i),"aria-label":`Rate response as ${s}`,icon:p.jsx(BV,{className:_t(u,t===i?"fill-current":"fill-none")}),variant:"ghost",className:_t("h-4 w-4 md:h-5 md:w-5 p-0",o,l,d)},i)})})},Vle=({interaction:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},i=()=>{t&&t(e.id)},s=()=>{r&&r(e.id)};return p.jsxs("div",{className:_t("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[p.jsx(Hle,{interactionId:e.id,currentRating:e.rating}),r&&p.jsx(Dn,{tooltipText:"Edit",onClick:s,"aria-label":"Edit User Prompt",icon:p.jsx(rg,{}),className:"h-5 w-5 md:h-6 md:w-6"}),t&&p.jsx(Dn,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:p.jsx(Qw,{}),className:"h-5 w-5 md:h-6 md:w-6"}),n&&p.jsx(Dn,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:p.jsx($i,{}),className:"h-5 w-5 md:h-6 md:w-6 text-destructive hover:text-destructive/80"})]})},oO={};function Gle(e){let t=oO[e];if(t)return t;t=oO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Qh(e,t){typeof t!="string"&&(t=Qh.defaultChars);const n=Gle(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,s=r.length;i<s;i+=3){const o=parseInt(r.slice(i+1,i+3),16);if(o<128){a+=n[o];continue}if((o&224)===192&&i+3<s){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const u=o<<6&1984|l&63;u<128?a+="":a+=String.fromCharCode(u),i+=3;continue}}if((o&240)===224&&i+6<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(u&192)===128){const d=o<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?a+="":a+=String.fromCharCode(d),i+=6;continue}}if((o&248)===240&&i+9<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let h=o<<18&1835008|l<<12&258048|u<<6&4032|d&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Qh.defaultChars=";/?:@&=+$,#";Qh.componentChars="";const lO={};function Kle(e){let t=lO[e];if(t)return t;t=lO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function J0(e,t,n){typeof t!="string"&&(n=t,t=J0.defaultChars),typeof n>"u"&&(n=!0);const r=Kle(t);let a="";for(let i=0,s=e.length;i<s;i++){const o=e.charCodeAt(i);if(n&&o===37&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(o<128){a+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<s){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}J0.defaultChars=";/?:@&=+$,-_.!~*'()#";J0.componentChars="-_.!~*'()";function GT(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function jw(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Wle=/^([a-z0-9.+-]+:)/i,Zle=/:[0-9]*$/,Yle=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Xle=["<",">",'"',"`"," ","\r",`
`,"	"],Jle=["{","}","|","\\","^","`"].concat(Xle),Qle=["'"].concat(Jle),cO=["%","/","?",";","#"].concat(Qle),uO=["/","?","#"],ece=255,dO=/^[+a-z0-9A-Z_-]{0,63}$/,tce=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,fO={javascript:!0,"javascript:":!0},hO={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function KT(e,t){if(e&&e instanceof jw)return e;const n=new jw;return n.parse(e,t),n}jw.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const u=Yle.exec(i);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=Wle.exec(i);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,i=i.substr(s.length)),(t||s||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(s&&fO[s])&&(i=i.substr(2),this.slashes=!0)),!fO[s]&&(a||s&&!hO[s])){let u=-1;for(let v=0;v<uO.length;v++)r=i.indexOf(uO[v]),r!==-1&&(u===-1||r<u)&&(u=r);let d,h;u===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",u),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),u=-1;for(let v=0;v<cO.length;v++)r=i.indexOf(cO[v]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=i.length),i[u-1]===":"&&u--;const m=i.slice(0,u);i=i.slice(u),this.parseHost(m),this.hostname=this.hostname||"";const y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y){const v=this.hostname.split(/\./);for(let b=0,x=v.length;b<x;b++){const w=v[b];if(w&&!w.match(dO)){let S="";for(let E=0,C=w.length;E<C;E++)w.charCodeAt(E)>127?S+="x":S+=w[E];if(!S.match(dO)){const E=v.slice(0,b),C=v.slice(b+1),T=w.match(tce);T&&(E.push(T[1]),C.unshift(T[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>ece&&(this.hostname=""),y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),hO[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};jw.prototype.parseHost=function(e){let t=Zle.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const nce=Object.freeze(Object.defineProperty({__proto__:null,decode:Qh,encode:J0,format:GT,parse:KT},Symbol.toStringTag,{value:"Module"})),DF=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,MF=/[\0-\x1F\x7F-\x9F]/,rce=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,WT=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,PF=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,FF=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ace=Object.freeze(Object.defineProperty({__proto__:null,Any:DF,Cc:MF,Cf:rce,P:WT,S:PF,Z:FF},Symbol.toStringTag,{value:"Module"})),ice=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),sce=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var iE;const oce=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),lce=(iE=String.fromCodePoint)!==null&&iE!==void 0?iE:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function cce(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=oce.get(e))!==null&&t!==void 0?t:e}var $a;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})($a||($a={}));const uce=32;var ou;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(ou||(ou={}));function LC(e){return e>=$a.ZERO&&e<=$a.NINE}function dce(e){return e>=$a.UPPER_A&&e<=$a.UPPER_F||e>=$a.LOWER_A&&e<=$a.LOWER_F}function fce(e){return e>=$a.UPPER_A&&e<=$a.UPPER_Z||e>=$a.LOWER_A&&e<=$a.LOWER_Z||LC(e)}function hce(e){return e===$a.EQUALS||fce(e)}var Ma;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ma||(Ma={}));var ru;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(ru||(ru={}));class pce{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ma.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ru.Strict}startEntity(t){this.decodeMode=t,this.state=Ma.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ma.EntityStart:return t.charCodeAt(n)===$a.NUM?(this.state=Ma.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ma.NamedEntity,this.stateNamedEntity(t,n));case Ma.NumericStart:return this.stateNumericStart(t,n);case Ma.NumericDecimal:return this.stateNumericDecimal(t,n);case Ma.NumericHex:return this.stateNumericHex(t,n);case Ma.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|uce)===$a.LOWER_X?(this.state=Ma.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ma.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(LC(a)||dce(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(LC(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===$a.SEMI)this.consumed+=1;else if(this.decodeMode===ru.Strict)return 0;return this.emitCodePoint(cce(this.result),this.consumed),this.errors&&(t!==$a.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&ou.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=mce(r,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===ru.Attribute&&(i===0||hce(s))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&ou.VALUE_LENGTH)>>14,i!==0){if(s===$a.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==ru.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&ou.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~ou.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Ma.NamedEntity:return this.result!==0&&(this.decodeMode!==ru.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ma.NumericDecimal:return this.emitNumericEntity(0,2);case Ma.NumericHex:return this.emitNumericEntity(0,3);case Ma.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ma.EntityStart:return 0}}}function LF(e){let t="";const n=new pce(e,r=>t+=lce(r));return function(a,i){let s=0,o=0;for(;(o=a.indexOf("&",o))>=0;){t+=a.slice(s,o),n.startEntity(i);const u=n.write(a,o+1);if(u<0){s=o+n.end();break}s=o+u,o=u===0?s+1:s}const l=t+a.slice(s);return t="",l}}function mce(e,t,n,r){const a=(t&ou.BRANCH_LENGTH)>>7,i=t&ou.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let s=n,o=s+a-1;for(;s<=o;){const l=s+o>>>1,u=e[l];if(u<r)s=l+1;else if(u>r)o=l-1;else return e[l+a]}return-1}const gce=LF(ice);LF(sce);function $F(e,t=ru.Legacy){return gce(e,t)}function yce(e){return Object.prototype.toString.call(e)}function ZT(e){return yce(e)==="[object String]"}const bce=Object.prototype.hasOwnProperty;function vce(e,t){return bce.call(e,t)}function Wx(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function BF(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function YT(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Ow(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const zF=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,wce=/&([a-z#][a-z0-9]{1,31});/gi,xce=new RegExp(zF.source+"|"+wce.source,"gi"),_ce=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Sce(e,t){if(t.charCodeAt(0)===35&&_ce.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return YT(r)?Ow(r):e}const n=$F(e);return n!==e?n:e}function Ece(e){return e.indexOf("\\")<0?e:e.replace(zF,"$1")}function ep(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(xce,function(t,n,r){return n||Sce(t,r)})}const Cce=/[&<>"]/,kce=/[&<>"]/g,Tce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Ace(e){return Tce[e]}function Nu(e){return Cce.test(e)?e.replace(kce,Ace):e}const Nce=/[.?*+^$[\]\\(){}|-]/g;function Rce(e){return e.replace(Nce,"\\$&")}function Lr(e){switch(e){case 9:case 32:return!0}return!1}function Wg(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Zg(e){return WT.test(e)||PF.test(e)}function Yg(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Zx(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Ice={mdurl:nce,ucmicro:ace},jce=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:BF,assign:Wx,escapeHtml:Nu,escapeRE:Rce,fromCodePoint:Ow,has:vce,isMdAsciiPunct:Yg,isPunctChar:Zg,isSpace:Lr,isString:ZT,isValidEntityCode:YT,isWhiteSpace:Wg,lib:Ice,normalizeReference:Zx,unescapeAll:ep,unescapeMd:Ece},Symbol.toStringTag,{value:"Module"}));function Oce(e,t,n){let r,a,i,s;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(s=e.pos,e.md.inline.skipToken(e),i===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return a&&(u=e.pos),e.pos=l,u}function Dce(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=ep(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let s=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(s++,s>32))return i;if(r===41){if(s===0)break;s--}a++}return t===a||s!==0||(i.str=ep(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Mce(e,t,n,r){let a,i=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(i>=n)return s;let o=e.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return s;t++,i++,o===40&&(o=41),s.marker=o}for(;i<n;){if(a=e.charCodeAt(i),a===s.marker)return s.pos=i+1,s.str+=ep(e.slice(t,i)),s.ok=!0,s;if(a===40&&s.marker===41)return s;a===92&&i+1<n&&i++,i++}return s.can_continue=!0,s.str+=ep(e.slice(t,i)),s}const Pce=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Dce,parseLinkLabel:Oce,parseLinkTitle:Mce},Symbol.toStringTag,{value:"Module"})),ll={};ll.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Nu(i.content)+"</code>"};ll.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Nu(e[t].content)+`</code></pre>
`};ll.fence=function(e,t,n,r,a){const i=e[t],s=i.info?ep(i.info).trim():"";let o="",l="";if(s){const d=s.split(/(\s+)/g);o=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(i.content,o,l)||Nu(i.content):u=Nu(i.content),u.indexOf("<pre")===0)return u+`
`;if(s){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+o]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+o);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${u}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${u}</code></pre>
`};ll.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};ll.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};ll.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};ll.text=function(e,t){return Nu(e[t].content)};ll.html_block=function(e,t){return e[t].content};ll.html_inline=function(e,t){return e[t].content};function Sp(){this.rules=Wx({},ll)}Sp.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Nu(t.attrs[n][0])+'="'+Nu(t.attrs[n][1])+'"';return a};Sp.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let s=!1;if(a.block&&(s=!0,a.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1)}return i+=s?`>
`:">",i};Sp.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Sp.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Sp.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;o==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function qi(){this.__rules__=[],this.__cache__=null}qi.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};qi.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};qi.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};qi.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};qi.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};qi.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};qi.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};qi.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};qi.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};qi.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function mo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}mo.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};mo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};mo.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};mo.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};mo.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function UF(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}UF.prototype.Token=mo;const Fce=/\r\n?|\n/g,Lce=/\0/g;function $ce(e){let t;t=e.src.replace(Fce,`
`),t=t.replace(Lce,""),e.src=t}function Bce(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function zce(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function Uce(e){return/^<a[>\s]/i.test(e)}function qce(e){return/^<\/a\s*>/i.test(e)}function Hce(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let s=a.length-1;s>=0;s--){const o=a[s];if(o.type==="link_close"){for(s--;a[s].level!==o.level&&a[s].type!=="link_open";)s--;continue}if(o.type==="html_inline"&&(Uce(o.content)&&i>0&&i--,qce(o.content)&&i++),!(i>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let u=e.md.linkify.match(l);const d=[];let h=o.level,m=0;u.length>0&&u[0].index===0&&s>0&&a[s-1].type==="text_special"&&(u=u.slice(1));for(let y=0;y<u.length;y++){const v=u[y].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let x=u[y].text;u[y].schema?u[y].schema==="mailto:"&&!/^mailto:/i.test(x)?x=e.md.normalizeLinkText("mailto:"+x).replace(/^mailto:/,""):x=e.md.normalizeLinkText(x):x=e.md.normalizeLinkText("http://"+x).replace(/^http:\/\//,"");const w=u[y].index;if(w>m){const T=new e.Token("text","",0);T.content=l.slice(m,w),T.level=h,d.push(T)}const S=new e.Token("link_open","a",1);S.attrs=[["href",b]],S.level=h++,S.markup="linkify",S.info="auto",d.push(S);const E=new e.Token("text","",0);E.content=x,E.level=h,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",d.push(C),m=u[y].lastIndex}if(m<l.length){const y=new e.Token("text","",0);y.content=l.slice(m),y.level=h,d.push(y)}t[n].children=a=BF(a,s,d)}}}}const qF=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Vce=/\((c|tm|r)\)/i,Gce=/\((c|tm|r)\)/ig,Kce={c:"",r:"",tm:""};function Wce(e,t){return Kce[t.toLowerCase()]}function Zce(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(Gce,Wce)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Yce(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&qF.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Xce(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Vce.test(e.tokens[t].content)&&Zce(e.tokens[t].children),qF.test(e.tokens[t].content)&&Yce(e.tokens[t].children))}const Jce=/['"]/,pO=/['"]/g,mO="";function dv(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Qce(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],s=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,i.type!=="text")continue;let o=i.content,l=0,u=o.length;e:for(;l<u;){pO.lastIndex=l;const d=pO.exec(o);if(!d)break;let h=!0,m=!0;l=d.index+1;const y=d[0]==="'";let v=32;if(d.index-1>=0)v=o.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<u)b=o.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const x=Yg(v)||Zg(String.fromCharCode(v)),w=Yg(b)||Zg(String.fromCharCode(b)),S=Wg(v),E=Wg(b);if(E?h=!1:w&&(S||x||(h=!1)),S?m=!1:x&&(E||w||(m=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=x,m=w),!h&&!m){y&&(i.content=dv(i.content,d.index,mO));continue}if(m)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<s)break;if(C.single===y&&r[n].level===s){C=r[n];let T,j;y?(T=t.md.options.quotes[2],j=t.md.options.quotes[3]):(T=t.md.options.quotes[0],j=t.md.options.quotes[1]),i.content=dv(i.content,d.index,j),e[C.token].content=dv(e[C.token].content,C.pos,T),l+=j.length-1,C.token===a&&(l+=T.length-1),o=i.content,u=o.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:y,level:s}):m&&y&&(i.content=dv(i.content,d.index,mO))}}}function eue(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Jce.test(e.tokens[t].content)||Qce(e.tokens[t].children,e)}function tue(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const s=r[i].children,o=s.length;for(t=0;t<o;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<o;t++)s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const sE=[["normalize",$ce],["block",Bce],["inline",zce],["linkify",Hce],["replacements",Xce],["smartquotes",eue],["text_join",tue]];function XT(){this.ruler=new qi;for(let e=0;e<sE.length;e++)this.ruler.push(sE[e][0],sE[e][1])}XT.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};XT.prototype.State=UF;function cl(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,s=0,o=0,l=0,u=a.length,d=!1;s<u;s++){const h=a.charCodeAt(s);if(!d)if(Lr(h)){o++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||s===u-1)&&(h!==10&&s++,this.bMarks.push(i),this.eMarks.push(s),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),d=!1,o=0,l=0,i=s+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}cl.prototype.push=function(e,t,n){const r=new mo(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};cl.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};cl.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};cl.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Lr(r))break}return t};cl.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Lr(this.src.charCodeAt(--t)))return t+1;return t};cl.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};cl.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};cl.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let s=0,o=t;o<n;o++,s++){let l=0;const u=this.bMarks[o];let d=u,h;for(o+1<n||a?h=this.eMarks[o]+1:h=this.eMarks[o];d<h&&l<r;){const m=this.src.charCodeAt(d);if(Lr(m))m===9?l+=4-(l+this.bsCount[o])%4:l++;else if(d-u<this.tShift[o])l++;else break;d++}l>r?i[s]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[s]=this.src.slice(d,h)}return i.join("")};cl.prototype.Token=mo;const nue=65536;function oE(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function gO(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,s=0,o="";for(;r<n;)a===124&&(i?(o+=e.substring(s,r-1),s=r):(t.push(o+e.substring(s,r)),o="",s=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(o+e.substring(s)),t}function rue(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58||i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!Lr(o)||s===45&&Lr(o))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Lr(C))return!1;i++}let l=oE(e,t+1),u=l.split("|");const d=[];for(let C=0;C<u.length;C++){const T=u[C].trim();if(!T){if(C===0||C===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(T))return!1;T.charCodeAt(T.length-1)===58?d.push(T.charCodeAt(0)===58?"center":"right"):T.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=oE(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=gO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==d.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const y=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const x=e.push("thead_open","thead",1);x.map=[t,t+1];const w=e.push("tr_open","tr",1);w.map=[t,t+1];for(let C=0;C<u.length;C++){const T=e.push("th_open","th",1);d[C]&&(T.attrs=[["style","text-align:"+d[C]]]);const j=e.push("inline","",0);j.content=u[C].trim(),j.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let j=0,I=y.length;j<I;j++)if(y[j](e,a,n,!0)){C=!0;break}if(C||(l=oE(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(u=gO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>nue))break;if(a===t+2){const j=e.push("tbody_open","tbody",1);j.map=S=[t+2,0]}const T=e.push("tr_open","tr",1);T.map=[a,a+1];for(let j=0;j<h;j++){const I=e.push("td_open","td",1);d[j]&&(I.attrs=[["style","text-align:"+d[j]]]);const R=e.push("inline","",0);R.content=u[j]?u[j].trim():"",R.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=m,e.line=a,!0}function aue(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function iue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const s=e.src.charCodeAt(a);if(s!==126&&s!==96)return!1;let o=a;a=e.skipChars(a,s);let l=a-o;if(l<3)return!1;const u=e.src.slice(o,a),d=e.src.slice(a,i);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=o=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===s&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,s),!(a-o<l)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}l=e.sCount[t],e.line=h+(m?1:0);const y=e.push("fence","code",0);return y.info=d,y.content=e.getLines(t+1,h,l,!0),y.markup=u,y.map=[t,e.line],!0}function sue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const o=[],l=[],u=[],d=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let y=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let T=e.sCount[v]+1,j,I;e.src.charCodeAt(a)===32?(a++,T++,I=!1,j=!0):e.src.charCodeAt(a)===9?(j=!0,(e.bsCount[v]+T)%4===3?(a++,T++,I=!1):I=!0):j=!1;let R=T;for(o.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const F=e.src.charCodeAt(a);if(Lr(F))F===9?R+=4-(R+e.bsCount[v]+(I?1:0))%4:R++;else break;a++}y=a>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(j?1:0),u.push(e.sCount[v]),e.sCount[v]=R-T,d.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(y)break;let C=!1;for(let T=0,j=h.length;T<j;T++)if(h[T](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const x=e.push("blockquote_open","blockquote",1);x.markup=">";const w=[t,0];x.map=w,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=s,e.parentType=m,w[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=d[E],e.sCount[E+t]=u[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function oue(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(i++);if(s!==42&&s!==45&&s!==95)return!1;let o=1;for(;i<a;){const u=e.src.charCodeAt(i++);if(u!==s&&!Lr(u))return!1;u===s&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(s)),!0}function yO(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Lr(i))return-1}return r}function bO(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Lr(i))?-1:a}function lue(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function cue(e,t,n,r){let a,i,s,o,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,m,y;if((y=bO(e,l))>=0){if(h=!0,s=e.bMarks[l]+e.tShift[l],m=Number(e.src.slice(s,y-1)),d&&m!==1)return!1}else if((y=yO(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(y)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(y-1),b=e.tokens.length;h?(o=e.push("ordered_list_open","ol",1),m!==1&&(o.attrs=[["start",m]])):o=e.push("bullet_list_open","ul",1);const x=[l,0];o.map=x,o.markup=String.fromCharCode(v);let w=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=y,a=e.eMarks[l];const C=e.sCount[l]+y-(e.bMarks[l]+e.tShift[l]);let T=C;for(;i<a;){const ue=e.src.charCodeAt(i);if(ue===9)T+=4-(T+e.bsCount[l])%4;else if(ue===32)T++;else break;i++}const j=i;let I;j>=a?I=1:I=T-C,I>4&&(I=1);const R=C+I;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(v);const F=[l,0];o.map=F,h&&(o.info=e.src.slice(s,y-1));const B=e.tight,H=e.tShift[l],D=e.sCount[l],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=R,e.tight=!0,e.tShift[l]=j-e.bMarks[l],e.sCount[l]=T,j>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||w)&&(u=!1),w=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[l]=H,e.sCount[l]=D,e.tight=B,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(v),l=e.line,F[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let V=!1;for(let ue=0,ae=S.length;ue<ae;ue++)if(S[ue](e,l,n,!0)){V=!0;break}if(V)break;if(h){if(y=bO(e,l),y<0)break;s=e.bMarks[l]+e.tShift[l]}else if(y=yO(e,l),y<0)break;if(v!==e.src.charCodeAt(y-1))break}return h?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(v),x[1]=l,e.line=l,e.parentType=E,u&&lue(e,b),!0}function uue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function o(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const I=e.md.block.ruler.getRules("reference"),R=e.parentType;e.parentType="reference";let F=!1;for(let B=0,H=I.length;B<H;B++)if(I[B](e,S,E,!0)){F=!0;break}if(e.parentType=R,F)return null}const T=e.bMarks[S]+e.tShift[S],j=e.eMarks[S];return e.src.slice(T,j+1)}let l=e.src.slice(a,i+1);i=l.length;let u=-1;for(a=1;a<i;a++){const S=l.charCodeAt(a);if(S===91)return!1;if(S===93){u=a;break}else if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(S===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(a=u+2;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Lr(S))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const m=a,y=s,v=a;for(;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Lr(S))break}let b=e.md.helpers.parseLinkTitle(l,a,i);for(;b.can_continue;){const S=o(s);if(S===null)break;l+=S,a=i,i=l.length,s++,b=e.md.helpers.parseLinkTitle(l,a,i,b)}let x;for(a<i&&v!==a&&b.ok?(x=b.str,a=b.pos):(x="",a=m,s=y);a<i;){const S=l.charCodeAt(a);if(!Lr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10&&x)for(x="",a=m,s=y;a<i;){const S=l.charCodeAt(a);if(!Lr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const w=Zx(l.slice(1,u));return w?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[w]>"u"&&(e.env.references[w]={title:x,href:h}),e.line=s),!0):!1}const due=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fue="[a-zA-Z_:][a-zA-Z0-9:._-]*",hue="[^\"'=<>`\\x00-\\x20]+",pue="'[^']*'",mue='"[^"]*"',gue="(?:"+hue+"|"+pue+"|"+mue+")",yue="(?:\\s+"+fue+"(?:\\s*=\\s*"+gue+")?)",HF="<[A-Za-z][A-Za-z0-9\\-]*"+yue+"*\\s*\\/?>",VF="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",bue="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",vue="<[?][\\s\\S]*?[?]>",wue="<![A-Za-z][^>]*>",xue="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",_ue=new RegExp("^(?:"+HF+"|"+VF+"|"+bue+"|"+vue+"|"+wue+"|"+xue+")"),Sue=new RegExp("^(?:"+HF+"|"+VF+")"),lh=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+due.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Sue.source+"\\s*$"),/^$/,!1]];function Eue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let s=e.src.slice(a,i),o=0;for(;o<lh.length&&!lh[o][0].test(s);o++);if(o===lh.length)return!1;if(r)return lh[o][2];let l=t+1;if(!lh[o][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],s=e.src.slice(a,i),lh[o][1].test(s)){s.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function Cue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(a);if(s!==35||a>=i)return!1;let o=1;for(s=e.src.charCodeAt(++a);s===35&&a<i&&o<=6;)o++,s=e.src.charCodeAt(++a);if(o>6||a<i&&!Lr(s))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&Lr(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const u=e.push("heading_open","h"+String(o),1);u.markup="########".slice(0,o),u.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function kue(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,s,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let y=e.bMarks[o]+e.tShift[o];const v=e.eMarks[o];if(y<v&&(s=e.src.charCodeAt(y),(s===45||s===61)&&(y=e.skipChars(y,s),y=e.skipSpaces(y),y>=v))){i=s===61?1:2;break}}if(e.sCount[o]<0)continue;let m=!1;for(let y=0,v=r.length;y<v;y++)if(r[y](e,o,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const u=e.push("heading_open","h"+String(i),1);u.markup=String.fromCharCode(s),u.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(s),e.parentType=a,!0}function Tue(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let u=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){u=!0;break}if(u)break}const s=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const fv=[["table",rue,["paragraph","reference"]],["code",aue],["fence",iue,["paragraph","reference","blockquote","list"]],["blockquote",sue,["paragraph","reference","blockquote","list"]],["hr",oue,["paragraph","reference","blockquote","list"]],["list",cue,["paragraph","reference","blockquote"]],["reference",uue],["html_block",Eue,["paragraph","reference","blockquote"]],["heading",Cue,["paragraph","reference","blockquote"]],["lheading",kue],["paragraph",Tue]];function Yx(){this.ruler=new qi;for(let e=0;e<fv.length;e++)this.ruler.push(fv[e][0],fv[e][1],{alt:(fv[e][2]||[]).slice()})}Yx.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let s=t,o=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let u=!1;for(let d=0;d<a;d++)if(u=r[d](e,s,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),s=e.line,s<n&&e.isEmpty(s)&&(o=!0,s++,e.line=s)}};Yx.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};Yx.prototype.State=cl;function Q0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Q0.prototype.pushPending=function(){const e=new mo("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Q0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new mo(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};Q0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const s=i-e,o=i<n?this.src.charCodeAt(i):32,l=Yg(a)||Zg(String.fromCharCode(a)),u=Yg(o)||Zg(String.fromCharCode(o)),d=Wg(a),h=Wg(o),m=!h&&(!u||d||l),y=!d&&(!l||h||u);return{can_open:m&&(t||!y||l),can_close:y&&(t||!m||u),length:s}};Q0.prototype.Token=mo;function Aue(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Nue(e,t){let n=e.pos;for(;n<e.posMax&&!Aue(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Rue=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Iue(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(Rue);if(!a)return!1;const i=a[1],s=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!s)return!1;let o=s.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(o);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=o.length-i.length,!0}function jue(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Lr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const JT=[];for(let e=0;e<256;e++)JT.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){JT[e.charCodeAt(0)]=1});function Oue(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Lr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=e.src[n+1],n++)}const s="\\"+i;if(!t){const o=e.push("text_special","",0);a<256&&JT[a]!==0?o.content=i:o.content=s,o.markup=s,o.info="escape"}return e.pos=n+1,!0}function Due(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(a,n),o=s.length;if(e.backticksScanned&&(e.backticks[o]||0)<=a)return t||(e.pending+=s),e.pos+=o,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===o){if(!t){const h=e.push("code_inline","code",0);h.markup=s,h.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=u}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=o,!0}function Mue(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const s=String.fromCharCode(r);if(i<2)return!1;let o;i%2&&(o=e.push("text","",0),o.content=s,i--);for(let l=0;l<i;l+=2)o=e.push("text","",0),o.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function vO(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const s=t[i];if(s.marker!==126||s.end===-1)continue;const o=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const i=r.pop();let s=i+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,i!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[i],e.tokens[i]=n)}}function Pue(e){const t=e.tokens_meta,n=e.tokens_meta.length;vO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&vO(e,t[r].delimiters)}const GF={tokenize:Mue,postProcess:Pue};function Fue(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function wO(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],s=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,o=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?o+o:o,l.content="";const u=e.tokens[i.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?o+o:o,u.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function Lue(e){const t=e.tokens_meta,n=e.tokens_meta.length;wO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&wO(e,t[r].delimiters)}const KF={tokenize:Fue,postProcess:Lue};function $ue(e,t){let n,r,a,i,s="",o="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,m=e.pos+1,y=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(y<0)return!1;let v=y+1;if(v<h&&e.src.charCodeAt(v)===40){for(u=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(s=e.md.normalizeLink(a.str),e.md.validateLink(s)?v=a.pos:s="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&a.ok)for(o=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(u=!0),v++}if(u){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=y+1):v=y+1,r||(r=e.src.slice(m,y)),i=e.env.references[Zx(r)],!i)return e.pos=d,!1;s=i.href,o=i.title}if(!t){e.pos=m,e.posMax=y;const b=e.push("link_open","a",1),x=[["href",s]];b.attrs=x,o&&x.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function Bue(e,t){let n,r,a,i,s,o,l,u,d="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const y=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);if(i>=m)return!1;for(u=i,o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),o.ok&&(d=e.md.normalizeLink(o.str),e.md.validateLink(d)?i=o.pos:d=""),u=i;i<m&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);if(o=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&u!==i&&o.ok)for(l=o.str,i=o.pos;i<m&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);else l="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(u=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(u,i++):i=v+1):i=v+1,a||(a=e.src.slice(y,v)),s=e.env.references[Zx(a)],!s)return e.pos=h,!1;d=s.href,l=s.title}if(!t){r=e.src.slice(y,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const x=e.push("image","img",0),w=[["src",d],["alt",""]];x.attrs=w,x.children=b,x.content=r,l&&w.push(["title",l])}return e.pos=i,e.posMax=m,!0}const zue=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Uue=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function que(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const i=e.src.slice(r+1,n);if(Uue.test(i)){const s=e.md.normalizeLink(i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}if(zue.test(i)){const s=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}return!1}function Hue(e){return/^<a[>\s]/i.test(e)}function Vue(e){return/^<\/a\s*>/i.test(e)}function Gue(e){const t=e|32;return t>=97&&t<=122}function Kue(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!Gue(a))return!1;const i=e.src.slice(r).match(_ue);if(!i)return!1;if(!t){const s=e.push("html_inline","",0);s.content=i[0],Hue(s.content)&&e.linkLevel++,Vue(s.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const Wue=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Zue=/^&([a-z][a-z0-9]{1,31});/i;function Yue(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(Wue);if(i){if(!t){const s=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=e.push("text_special","",0);o.content=YT(s)?Ow(s):Ow(65533),o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(Zue);if(i){const s=$F(i[0]);if(s!==i[0]){if(!t){const o=e.push("text_special","",0);o.content=s,o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function xO(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let s=0;s<n;s++){const o=e[s];if(i.push(0),(e[r].marker!==o.marker||a!==o.token-1)&&(r=s),a=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let u=r-i[r]-1,d=u;for(;u>l;u-=i[u]+1){const h=e[u];if(h.marker===o.marker&&h.open&&h.end<0){let m=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(m=!0),!m){const y=u>0&&!e[u-1].open?i[u-1]+1:0;i[s]=s-u+y,i[u]=y,o.open=!1,h.end=s,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=d)}}function Xue(e){const t=e.tokens_meta,n=e.tokens_meta.length;xO(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&xO(t[r].delimiters)}function Jue(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const lE=[["text",Nue],["linkify",Iue],["newline",jue],["escape",Oue],["backticks",Due],["strikethrough",GF.tokenize],["emphasis",KF.tokenize],["link",$ue],["image",Bue],["autolink",que],["html_inline",Kue],["entity",Yue]],cE=[["balance_pairs",Xue],["strikethrough",GF.postProcess],["emphasis",KF.postProcess],["fragments_join",Jue]];function ey(){this.ruler=new qi;for(let e=0;e<lE.length;e++)this.ruler.push(lE[e][0],lE[e][1]);this.ruler2=new qi;for(let e=0;e<cE.length;e++)this.ruler2.push(cE[e][0],cE[e][1])}ey.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let s=!1;if(e.level<a){for(let o=0;o<r;o++)if(e.level++,s=n[o](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,i[t]=e.pos};ey.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let s=!1;if(e.level<a){for(let o=0;o<n;o++)if(s=t[o](e,!1),s){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};ey.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),s=i.length;for(let o=0;o<s;o++)i[o](a)};ey.prototype.State=Q0;function Que(e){const t={};e=e||{},t.src_Any=DF.source,t.src_Cc=MF.source,t.src_Z=FF.source,t.src_P=WT.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function $C(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function Xx(e){return Object.prototype.toString.call(e)}function ede(e){return Xx(e)==="[object String]"}function tde(e){return Xx(e)==="[object Object]"}function nde(e){return Xx(e)==="[object RegExp]"}function _O(e){return Xx(e)==="[object Function]"}function rde(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const WF={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function ade(e){return Object.keys(e||{}).reduce(function(t,n){return t||WF.hasOwnProperty(n)},!1)}const ide={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},sde="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",ode="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function lde(e){e.__index__=-1,e.__text_cache__=""}function cde(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function SO(){return function(e,t){t.normalize(e)}}function Dw(e){const t=e.re=Que(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(sde),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[o]=u,tde(l)){nde(l.validate)?u.validate=cde(l.validate):_O(l.validate)?u.validate=l.validate:i(o,l),_O(l.normalize)?u.normalize=l.normalize:l.normalize?i(o,l):u.normalize=SO();return}if(ede(l)){a.push(o);return}i(o,l)}),a.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:SO()};const s=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(rde).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),lde(e)}function ude(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function BC(e,t){const n=new ude(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function us(e,t){if(!(this instanceof us))return new us(e,t);t||ade(e)&&(t=e,e={}),this.__opts__=$C({},WF,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=$C({},ide,e),this.__compiled__={},this.__tlds__=ode,this.__tlds_replaced__=!1,this.re={},Dw(this)}us.prototype.add=function(t,n){return this.__schemas__[t]=n,Dw(this),this};us.prototype.set=function(t){return this.__opts__=$C(this.__opts__,t),this};us.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,s,o,l,u,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(s=a.index+a[1].length,o=a.index+a[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o))),this.__index__>=0};us.prototype.pretest=function(t){return this.re.pretest.test(t)};us.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};us.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(BC(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(BC(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};us.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,BC(this,0)):null};us.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Dw(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Dw(this),this)};us.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};us.prototype.onCompile=function(){};const kh=2147483647,Go=36,QT=1,Xg=26,dde=38,fde=700,ZF=72,YF=128,XF="-",hde=/^xn--/,pde=/[^\0-\x7F]/,mde=/[\x2E\u3002\uFF0E\uFF61]/g,gde={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},uE=Go-QT,Ko=Math.floor,dE=String.fromCharCode;function tu(e){throw new RangeError(gde[e])}function yde(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function JF(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(mde,".");const a=e.split("."),i=yde(a,t).join(".");return r+i}function QF(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const bde=e=>String.fromCodePoint(...e),vde=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Go},EO=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},eL=function(e,t,n){let r=0;for(e=n?Ko(e/fde):e>>1,e+=Ko(e/t);e>uE*Xg>>1;r+=Go)e=Ko(e/uE);return Ko(r+(uE+1)*e/(e+dde))},tL=function(e){const t=[],n=e.length;let r=0,a=YF,i=ZF,s=e.lastIndexOf(XF);s<0&&(s=0);for(let o=0;o<s;++o)e.charCodeAt(o)>=128&&tu("not-basic"),t.push(e.charCodeAt(o));for(let o=s>0?s+1:0;o<n;){const l=r;for(let d=1,h=Go;;h+=Go){o>=n&&tu("invalid-input");const m=vde(e.charCodeAt(o++));m>=Go&&tu("invalid-input"),m>Ko((kh-r)/d)&&tu("overflow"),r+=m*d;const y=h<=i?QT:h>=i+Xg?Xg:h-i;if(m<y)break;const v=Go-y;d>Ko(kh/v)&&tu("overflow"),d*=v}const u=t.length+1;i=eL(r-l,u,l==0),Ko(r/u)>kh-a&&tu("overflow"),a+=Ko(r/u),r%=u,t.splice(r++,0,a)}return String.fromCodePoint(...t)},nL=function(e){const t=[];e=QF(e);const n=e.length;let r=YF,a=0,i=ZF;for(const l of e)l<128&&t.push(dE(l));const s=t.length;let o=s;for(s&&t.push(XF);o<n;){let l=kh;for(const d of e)d>=r&&d<l&&(l=d);const u=o+1;l-r>Ko((kh-a)/u)&&tu("overflow"),a+=(l-r)*u,r=l;for(const d of e)if(d<r&&++a>kh&&tu("overflow"),d===r){let h=a;for(let m=Go;;m+=Go){const y=m<=i?QT:m>=i+Xg?Xg:m-i;if(h<y)break;const v=h-y,b=Go-y;t.push(dE(EO(y+v%b,0))),h=Ko(v/b)}t.push(dE(EO(h,0))),i=eL(a,u,o===s),a=0,++o}++a,++r}return t.join("")},wde=function(e){return JF(e,function(t){return hde.test(t)?tL(t.slice(4).toLowerCase()):t})},xde=function(e){return JF(e,function(t){return pde.test(t)?"xn--"+nL(t):t})},rL={version:"2.3.1",ucs2:{decode:QF,encode:bde},decode:tL,encode:nL,toASCII:xde,toUnicode:wde},_de={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Sde={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Ede={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Cde={default:_de,zero:Sde,commonmark:Ede},kde=/^(vbscript|javascript|file|data):/,Tde=/^data:image\/(gif|png|jpeg|webp);/;function Ade(e){const t=e.trim().toLowerCase();return kde.test(t)?Tde.test(t):!0}const aL=["http:","https:","mailto:"];function Nde(e){const t=KT(e,!0);if(t.hostname&&(!t.protocol||aL.indexOf(t.protocol)>=0))try{t.hostname=rL.toASCII(t.hostname)}catch{}return J0(GT(t))}function Rde(e){const t=KT(e,!0);if(t.hostname&&(!t.protocol||aL.indexOf(t.protocol)>=0))try{t.hostname=rL.toUnicode(t.hostname)}catch{}return Qh(GT(t),Qh.defaultChars+"%")}function js(e,t){if(!(this instanceof js))return new js(e,t);t||ZT(e)||(t=e||{},e="default"),this.inline=new ey,this.block=new Yx,this.core=new XT,this.renderer=new Sp,this.linkify=new us,this.validateLink=Ade,this.normalizeLink=Nde,this.normalizeLinkText=Rde,this.utils=jce,this.helpers=Wx({},Pce),this.options={},this.configure(e),t&&this.set(t)}js.prototype.set=function(e){return Wx(this.options,e),this};js.prototype.configure=function(e){const t=this;if(ZT(e)){const n=e;if(e=Cde[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};js.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};js.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};js.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};js.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};js.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};js.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};js.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const fE=new js({html:!1,linkify:!0,breaks:!0});function iL(e){return k.useMemo(()=>{var n;if(!e)return[];try{const r=fE.parse(e,{}),a=[];let i="",s=0;for(;s<r.length;){const o=r[s];if(o.type==="fence"){i&&(a.push(i),i="");const l=((n=o.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:o.content}),s++}else{const l=[];for(;s<r.length&&r[s].type!=="fence";)l.push(r[s]),s++;l.length>0&&(i+=fE.renderer.render(l,fE.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const Ide=({toolCall:e})=>{const[t,n]=k.useState(!0),r=()=>n(i=>!i),a=k.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return p.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Dn,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?p.jsx(sl,{}):p.jsx(Kd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(S0,{lang:"json",code:a})]})},jde=({toolResult:e})=>{const[t,n]=k.useState(!0),r=()=>n(s=>!s),a=k.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return p.jsxs("div",{className:_t("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:_t("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Dn,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?p.jsx(sl,{}):p.jsx(Kd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(S0,{lang:i?"text":"json",code:a})]})},Ode=({markdownContent:e})=>{const t=iL(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return p.jsx(S0,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},Dde=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:s,toggleFold:o})=>{const[l,u]=k.useState(!0),d=k.useCallback(()=>u(b=>!b),[]),h=!!r,m=e&&(typeof e!="string"||e.trim().length>0),y=t&&t.length>0,v=n&&n.length>0;return s?p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:o,children:[h?"[Reasoning] ":"",y?`[${t==null?void 0:t.length} Tool Call(s)] `:"",m&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:y||v||h?"":"[No text response]"]}):p.jsxs(p.Fragment,{children:[a&&i&&p.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:i})]}),h&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(Xw,{className:"h-3.5 w-3.5"})," Reasoning"]}),p.jsx(Dn,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:d,"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?p.jsx(sl,{}):p.jsx(Kd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!l&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:r})]}),t==null?void 0:t.map((b,x)=>{try{const w=JSON.parse(b);return p.jsx(Ide,{toolCall:w},`call-${x}`)}catch(w){return console.error("Failed to parse tool call string:",w),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${x}`)}}),n==null?void 0:n.map((b,x)=>{try{const w=JSON.parse(b);return p.jsx(jde,{toolResult:w},`res-${x}`)}catch(w){return console.error("Failed to parse tool result string:",w),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${x}`)}}),p.jsx(Ode,{markdownContent:e}),!m&&!y&&!v&&!h&&p.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},sL=gt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var C,T,j,I,R,F,B,H,D,Z,V,ue;const[i,s]=k.useState(!1),{dbProviderConfigs:o,getAllAvailableModelDefsForProvider:l}=Bn(dn(ae=>({dbProviderConfigs:ae.dbProviderConfigs,getAllAvailableModelDefsForProvider:ae.getAllAvailableModelDefsForProvider}))),u=k.useCallback(()=>s(ae=>!ae),[]),d=e.endedAt?OF(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=k.useMemo(()=>{var ee;const ae=(ee=e.metadata)==null?void 0:ee.modelId;if(!ae)return"Unknown Model";const{providerId:ne,modelId:X}=lc(ae);if(!ne||!X)return ae;const ie=o.find(fe=>fe.id===ne),L=(ie==null?void 0:ie.name)??ne,Q=l(ne).find(fe=>fe.id===X);return`${(Q==null?void 0:Q.name)??X} (${L})`},[(C=e.metadata)==null?void 0:C.modelId,o,l]),m=e.status==="COMPLETED",y=m||e.status==="ERROR",v=e.status==="ERROR",b=e.response&&(typeof e.response!="string"||e.response.trim().length>0),x=((T=e.metadata)==null?void 0:T.toolCalls)&&e.metadata.toolCalls.length>0,w=((j=e.metadata)==null?void 0:j.toolResults)&&e.metadata.toolResults.length>0,S=!!((I=e.metadata)!=null&&I.reasoning),E=b||x||w||S;return p.jsxs("div",{className:_t("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",v?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&p.jsx(VT,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:m}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[p.jsx(qle,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:u,canFold:E,promptTokens:(R=e.metadata)==null?void 0:R.promptTokens,completionTokens:(F=e.metadata)==null?void 0:F.completionTokens,timeToFirstToken:(B=e.metadata)==null?void 0:B.timeToFirstToken,generationTime:(H=e.metadata)==null?void 0:H.generationTime}),p.jsx(Dde,{response:e.response,toolCalls:(D=e.metadata)==null?void 0:D.toolCalls,toolResults:(Z=e.metadata)==null?void 0:Z.toolResults,reasoning:(V=e.metadata)==null?void 0:V.reasoning,isError:v,errorMessage:(ue=e.metadata)==null?void 0:ue.error,isFolded:i,toggleFold:u})]}),y&&p.jsx(Vle,{interaction:e,onEdit:r,onRegenerate:t,onDelete:n})]})});sL.displayName="InteractionCard";const CO=(e,t,n,r)=>{if(typeof e=="string")return e.trim()?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const a=e,i=a.lang?`language-${a.lang}`:"language-plaintext";return n?p.jsx(S0,{lang:a.lang,code:a.code,isStreaming:r},`code-${t}`):p.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[p.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:p.jsx("div",{className:"text-sm font-medium",children:a.lang?a.lang.toUpperCase():"CODE"})}),p.jsx("code",{className:_t(i,"block p-4 font-mono text-sm leading-relaxed"),children:a.code})]},`pre-${t}`)}return null},Mde=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=fr(dn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,enableStreamingCodeBlockParsing:m.enableStreamingCodeBlockParsing}))),i=iL(r?e:null),[s,o]=k.useState([]),[l,u]=k.useState(null),d=k.useRef(0);k.useEffect(()=>{if(!r){o([]),u(e??null),d.current=0;return}const m=d.current,y=i.slice(m,i.length-1);if(y.length>0){const b=y.map((x,w)=>CO(x,m+w,a,!1)).filter(x=>x!==null);o(x=>[...x,...b]),d.current+=y.length}const v=i.length>0?i[i.length-1]:null;JSON.stringify(v)!==JSON.stringify(l)&&u(v),e||(o([]),u(null),d.current=0)},[i,r,a,l,e]);const h=k.useMemo(()=>!l||!r?null:CO(l,d.current,a,!0),[l,a,r]);return!(e!=null&&e.trim())&&s.length===0?p.jsx("div",{className:_t("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."}):r?p.jsxs("div",{className:_t(n),children:[s,h]}):p.jsx("pre",{className:_t("whitespace-pre-wrap text-sm",n),children:e})},Pde=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>p.jsx(Dn,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:p.jsx(LV,{}),variant:r,size:n,className:t}),zC=gt.memo(({interactionId:e,onStop:t,className:n})=>{var v;const{interaction:r,interactionStatus:a}=Hn(dn(b=>{const x=b.interactions.find(w=>w.id===e);return{interaction:x,interactionStatus:x==null?void 0:x.status}})),i=fr(b=>b.streamingRenderFPS),[s,o]=k.useState(""),l=k.useRef(null),u=k.useRef(0);k.useEffect(()=>{const b=1e3/i;let x=!0;const w=S=>{if(!x)return;if(Hn.getState().streamingInteractionIds.includes(e)){if(S-u.current>=b){const C=Hn.getState().activeStreamBuffers[e]??"";o(C),u.current=S}l.current=requestAnimationFrame(w)}else{const C=Hn.getState().activeStreamBuffers[e]??"";o(C),l.current=null}};return l.current=requestAnimationFrame(w),()=>{x=!1,l.current&&(cancelAnimationFrame(l.current),l.current=null)}},[e,i]),k.useEffect(()=>{if(a&&a!=="STREAMING"){const b=Hn.getState().activeStreamBuffers[e]??"";o(b),l.current&&(cancelAnimationFrame(l.current),l.current=null)}},[a,e]);const{dbProviderConfigs:d,getAllAvailableModelDefsForProvider:h}=Bn(dn(b=>({dbProviderConfigs:b.dbProviderConfigs,getAllAvailableModelDefsForProvider:b.getAllAvailableModelDefsForProvider}))),m=k.useMemo(()=>{var j;const b=(j=r==null?void 0:r.metadata)==null?void 0:j.modelId;if(!b)return"Loading Model...";const{providerId:x,modelId:w}=lc(b);if(!x||!w)return b;const S=d.find(I=>I.id===x),E=(S==null?void 0:S.name)??x,T=h(x).find(I=>I.id===w);return`${(T==null?void 0:T.name)??w} (${E})`},[(v=r==null?void 0:r.metadata)==null?void 0:v.modelId,d,h]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),p.jsxs("div",{className:_t("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[p.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const y=()=>{t&&t(e)};return p.jsxs("div",{className:_t("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&p.jsx(VT,{turnData:r.prompt,timestamp:r.startedAt,isAssistantComplete:!1}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",m,")"]}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsx(Mde,{markdownContent:s,isStreaming:!0})]}),t&&p.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200",children:p.jsx(Pde,{onStop:y,"aria-label":"Stop Generation"})})]})});zC.displayName="StreamingInteractionCard";var Fde=k.createContext(void 0);function Ep(e){const t=k.useContext(Fde);return e||t||"ltr"}function Jg(e,[t,n]){return Math.min(n,Math.max(t,e))}function Lde(e,t){return k.useReducer((n,r)=>t[n][r]??n,e)}var eA="ScrollArea",[oL,JSe]=di(eA),[$de,Ls]=oL(eA),lL=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,l]=k.useState(null),[u,d]=k.useState(null),[h,m]=k.useState(null),[y,v]=k.useState(null),[b,x]=k.useState(null),[w,S]=k.useState(0),[E,C]=k.useState(0),[T,j]=k.useState(!1),[I,R]=k.useState(!1),F=kn(t,H=>l(H)),B=Ep(a);return p.jsx($de,{scope:n,type:r,dir:B,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:T,onScrollbarXEnabledChange:j,scrollbarY:b,onScrollbarYChange:x,scrollbarYEnabled:I,onScrollbarYEnabledChange:R,onCornerWidthChange:S,onCornerHeightChange:C,children:p.jsx(rn.div,{dir:B,...s,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});lL.displayName=eA;var cL="ScrollAreaViewport",uL=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,s=Ls(cL,n),o=k.useRef(null),l=kn(t,o,s.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),p.jsx(rn.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});uL.displayName=cL;var ul="ScrollAreaScrollbar",dL=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ls(ul,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o=e.orientation==="horizontal";return k.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),a.type==="hover"?p.jsx(Bde,{...r,ref:t,forceMount:n}):a.type==="scroll"?p.jsx(zde,{...r,ref:t,forceMount:n}):a.type==="auto"?p.jsx(fL,{...r,ref:t,forceMount:n}):a.type==="always"?p.jsx(tA,{...r,ref:t}):null});dL.displayName=ul;var Bde=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ls(ul,e.__scopeScrollArea),[i,s]=k.useState(!1);return k.useEffect(()=>{const o=a.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),p.jsx(Ta,{present:n||i,children:p.jsx(fL,{"data-state":i?"visible":"hidden",...r,ref:t})})}),zde=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ls(ul,e.__scopeScrollArea),i=e.orientation==="horizontal",s=Qx(()=>l("SCROLL_END"),100),[o,l]=Lde("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return k.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,a.scrollHideDelay,l]),k.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const y=u[d];h!==y&&(l("SCROLL"),s()),h=y};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,l,s]),p.jsx(Ta,{present:n||o!=="hidden",children:p.jsx(tA,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ht(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Ht(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),fL=k.forwardRef((e,t)=>{const n=Ls(ul,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,s]=k.useState(!1),o=e.orientation==="horizontal",l=Qx(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?u:d)}},10);return tp(n.viewport,l),tp(n.content,l),p.jsx(Ta,{present:r||i,children:p.jsx(tA,{"data-state":i?"visible":"hidden",...a,ref:t})})}),tA=k.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Ls(ul,e.__scopeScrollArea),i=k.useRef(null),s=k.useRef(0),[o,l]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=yL(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:m=>s.current=m};function h(m,y){return Kde(m,s.current,o,y)}return n==="horizontal"?p.jsx(Ude,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,y=kO(m,o,a.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?p.jsx(qde,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,y=kO(m,o);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),Ude=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ls(ul,e.__scopeScrollArea),[s,o]=k.useState(),l=k.useRef(null),u=kn(t,l,i.onScrollbarXChange);return k.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(pL,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Jx(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),vL(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Pw(s.paddingLeft),paddingEnd:Pw(s.paddingRight)}})}})}),qde=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ls(ul,e.__scopeScrollArea),[s,o]=k.useState(),l=k.useRef(null),u=kn(t,l,i.onScrollbarYChange);return k.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(pL,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Jx(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),vL(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Pw(s.paddingTop),paddingEnd:Pw(s.paddingBottom)}})}})}),[Hde,hL]=oL(ul),pL=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,y=Ls(ul,n),[v,b]=k.useState(null),x=kn(t,F=>b(F)),w=k.useRef(null),S=k.useRef(""),E=y.viewport,C=r.content-r.viewport,T=La(d),j=La(l),I=Qx(h,10);function R(F){if(w.current){const B=F.clientX-w.current.left,H=F.clientY-w.current.top;u({x:B,y:H})}}return k.useEffect(()=>{const F=B=>{const H=B.target;(v==null?void 0:v.contains(H))&&T(B,C)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[E,v,C,T]),k.useEffect(j,[r,j]),tp(v,I),tp(y.content,I),p.jsx(Hde,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:La(i),onThumbPointerUp:La(s),onThumbPositionChange:j,onThumbPointerDown:La(o),children:p.jsx(rn.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:Ht(e.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),w.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),R(F))}),onPointerMove:Ht(e.onPointerMove,R),onPointerUp:Ht(e.onPointerUp,F=>{const B=F.target;B.hasPointerCapture(F.pointerId)&&B.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=S.current,y.viewport&&(y.viewport.style.scrollBehavior=""),w.current=null})})})}),Mw="ScrollAreaThumb",mL=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=hL(Mw,e.__scopeScrollArea);return p.jsx(Ta,{present:n||a.hasThumb,children:p.jsx(Vde,{ref:t,...r})})}),Vde=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Ls(Mw,n),s=hL(Mw,n),{onThumbPositionChange:o}=s,l=kn(t,h=>s.onThumbChange(h)),u=k.useRef(void 0),d=Qx(()=>{u.current&&(u.current(),u.current=void 0)},100);return k.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!u.current){const y=Wde(h,o);u.current=y,o()}};return o(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,o]),p.jsx(rn.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ht(e.onPointerDownCapture,h=>{const y=h.target.getBoundingClientRect(),v=h.clientX-y.left,b=h.clientY-y.top;s.onThumbPointerDown({x:v,y:b})}),onPointerUp:Ht(e.onPointerUp,s.onThumbPointerUp)})});mL.displayName=Mw;var nA="ScrollAreaCorner",gL=k.forwardRef((e,t)=>{const n=Ls(nA,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(Gde,{...e,ref:t}):null});gL.displayName=nA;var Gde=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Ls(nA,n),[i,s]=k.useState(0),[o,l]=k.useState(0),u=!!(i&&o);return tp(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),tp(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),s(d)}),u?p.jsx(rn.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Pw(e){return e?parseInt(e,10):0}function yL(e,t){const n=e/t;return isNaN(n)?0:n}function Jx(e){const t=yL(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Kde(e,t,n,r="ltr"){const a=Jx(n),i=a/2,s=t||i,o=a-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return bL([l,u],h)(e)}function kO(e,t,n="ltr"){const r=Jx(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-r,l=n==="ltr"?[0,s]:[s*-1,0],u=Jg(e,l);return bL([0,s],[0,o])(u)}function bL(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function vL(e,t){return e>0&&e<t}var Wde=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,o=n.top!==i.top;(s||o)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Qx(e,t){const n=La(e),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function tp(e,t){const n=La(t);Ua(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Zde=lL,Yde=uL,Xde=gL;function Ru({className:e,children:t,...n}){return p.jsxs(Zde,{"data-slot":"scroll-area",className:_t("relative",e),...n,children:[p.jsx(Yde,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),p.jsx(Jde,{}),p.jsx(Xde,{})]})}function Jde({className:e,orientation:t="vertical",...n}){return p.jsx(dL,{"data-slot":"scroll-area-scrollbar",orientation:t,className:_t("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:p.jsx(mL,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function ur({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:_t("bg-accent animate-pulse rounded-md",e),...t})}const TO=()=>p.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[p.jsx(lD,{className:"h-16 w-16 text-muted-foreground mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),p.jsx("p",{className:"text-muted-foreground max-w-md",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat."})]}),ls=Os(Ds(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:t=>{e(n=>{n.isVfsModalOpen=t??!n.isVfsModalOpen})}}))),Qde=".litechat/conversations",wL="/synced_repos";async function efe(e,t,n){n(t.id,"syncing");const r=rr(`${wL}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let s=!1;try{await e.promises.stat(al(r,".git")),s=!0}catch(o){if(o.code==="ENOENT")s=!1;else throw o}s?(Ye.info(`Pulling latest changes for "${t.name}"...`),await Vx(r,i,a,{fsInstance:e}),Ye.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(Ye.info(`Cloning repository "${t.name}"...`),await _F(r,t.remoteUrl,i,a,{fsInstance:e}),Ye.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(s){console.error(`Failed to initialize/sync repository ${t.name}:`,s),n(t.id,"error")}}async function tfe(e,t,n,r,a,i,s){var h,m;r(t.id,"syncing");const o=rr(`${wL}/${n.id}`),l=al(o,Qde,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(al(o,".git"))}catch(w){if(w.code==="ENOENT"){Ye.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw w}Ye.info(`Pulling latest changes for "${n.name}"...`),await Vx(o,d,u,{fsInstance:e});let y=null,v=null;try{const w=await df(l,{fsInstance:e}),S=new TextDecoder().decode(w);y=JSON.parse(S),v=(h=y==null?void 0:y.conversation)!=null&&h.updatedAt?new Date(y.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(w){w.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${w.message}`),Ye.warning(`Could not read remote version of conversation: ${w.message}`))}const b=t.updatedAt.getTime(),x=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!y||b>(v??0)||b>x&&b>=(v??0)){Ye.info("Local changes detected. Pushing to remote...");const w=await xt.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:w},null,2);await Gx(l,C,{fsInstance:e}),await BT(o,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await zT(o,d,u,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),Ye.success("Conversation synced successfully (pushed).")}else if(v&&v>b){Ye.info("Remote changes detected. Updating local conversation...");const w={...y.conversation,createdAt:new Date(y.conversation.createdAt),updatedAt:new Date(y.conversation.updatedAt),lastSyncedAt:new Date};await xt.saveConversation(w),await xt.deleteInteractionsForConversation(t.id);const S=y.interactions.map(E=>xt.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&s()==="conversation"&&await Hn.getState().loadInteractions(t.id),r(t.id,"idle"),Ye.success("Conversation synced successfully (pulled).")}else Ye.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(y){console.error(`Sync failed for conversation ${t.id}:`,y),r(t.id,"error",y.message)}}const co=Os(Ds((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&Ye.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const s=i.parentId??r.rootId??"";a[s]||(a[s]=r.childrenMap[s]?[...r.childrenMap[s]]:[]),a[s].includes(i.id)||a[s].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const s=i.parentId??r.rootId??"";if(r.childrenMap[s]&&(r.childrenMap[s]=r.childrenMap[s].filter(o=>o!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),kt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),kt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),kt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:s,_addNodes:o,_setFsInstance:l,_setConfiguredVfsKey:u}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),s(null));try{const d=await Soe(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const y=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${y}`),e({initializingKey:null,loading:!1}),new Error(y)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),u(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let m=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(y){if(y.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw y}if(!m||m.path!=="/"){const y=Date.now();m={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:y,lastModified:y},o([m]),console.log("[VfsStore] Root node added/updated in state.")}return e(y=>{y.rootId=m.id,y.currentParentId=m.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${m.id}`),await t().fetchNodes(m.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(s(h),a||(l(null),u(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d,initializingKey:h}=t();if(!s||u!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!s}, Match: ${u===d}, Init: ${h}`);return}r(!0);try{const m=n?o[n]:o[l||""],y=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${y} (Key: ${u})`);const v=await UT(y,{fsInstance:s});console.log(`[VfsStore] Fetched ${v.length} entries for ${y}`);const b=n??l??"",x=new Set(v.map(T=>T.path)),E=(t().childrenMap[b]||[]).map(T=>t().nodes[T]).filter(Boolean).filter(T=>!x.has(T.path)).map(T=>T.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(T=>{const j=Object.values(t().nodes).find(R=>R.path===T.path),I=Date.now();return{id:(j==null?void 0:j.id)||Si(),parentId:n,name:T.name,path:T.path,type:T.isDirectory?"folder":"file",size:T.size,createdAt:(j==null?void 0:j.createdAt)??I,lastModified:T.lastModified.getTime(),mimeType:T.isDirectory?void 0:T.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(T=>{const j=C.map(I=>I.id);(!T.childrenMap[b]||JSON.stringify(T.childrenMap[b].sort())!==JSON.stringify(j.sort()))&&(T.childrenMap[b]=j,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=rr(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:s}=t();if(!s||t().vfsKey!==t().configuredVfsKey)return;const o=rr(n),l=r(o);l&&l.type==="folder"?(e(u=>{u.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,_addNodes:u,configuredVfsKey:d,vfsKey:h}=t();if(!s||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const m=n?o[n]:o[l||""],y=m?m.path:"/",v=Lg(y,r.trim());try{throw await s.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await CF(v,{fsInstance:s});const b=Date.now(),w={id:Si(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};u([w])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d}=t();if(!s||u!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/";await kF(Array.from(r),m,{fsInstance:s}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:s,configuredVfsKey:o,vfsKey:l}=t();if(!s||o!==l){a("Filesystem not ready.");return}r(!0);try{const u=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of u)await qT(d.path,d.type==="folder",{fsInstance:s});i(n)}catch(u){console.error("Failed to delete nodes:",u),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:s,nodes:o,fs:l,rootId:u,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=o[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){a(!0);try{const y=m.parentId?o[m.parentId]:o[u||""],v=y?y.path:"/",b=Lg(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(w){if(w.code!=="ENOENT")throw w}await TF(m.path,b,{fsInstance:l});const x={name:r.trim(),path:b,lastModified:Date.now()};s(n,x)}catch(y){console.error("Failed to rename item:",y),i(y.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:s,vfsKey:o}=t();if(!a||s!==o)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const u=await df(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([u],{type:d});return{name:l.name,blob:h}}catch(u){return console.error("Failed to download file:",u),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),ai=Os(Ds((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{const r=Si(),a=new Date,i=n.parentId??null,s=i?t().getProjectById(i):null,o=s?s.path:"/",l=Lg(o,n.name),u={id:r,createdAt:a,updatedAt:a,name:n.name,parentId:i,path:l,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(d=>{d.projects.push(u),d.projects.sort((h,m)=>m.updatedAt.getTime()-h.updatedAt.getTime())});try{const d=t().getProjectById(r);if(d)await xt.saveProject(d),await co.getState().initializeVFS(r);else throw new Error("Failed to retrieve newly added project state");return r}catch(d){throw console.error("ProjectStore: Error adding project",d),e(h=>({error:"Failed to save new project",projects:h.projects.filter(m=>m.id!==r)})),d}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}let i=a.path;if(r.name&&r.name!==a.name){const o=I0(a.path);i=Lg(o,r.name)}const s={...a,...r,path:i,updatedAt:new Date};e(o=>{const l=o.projects.findIndex(u=>u.id===n);l!==-1&&(o.projects[l]=s,o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()))});try{await xt.saveProject(s)}catch(o){throw console.error("ProjectStore: Error updating project",o),e(l=>{const u=l.projects.findIndex(d=>d.id===n);u!==-1&&(l.projects[u]=a,l.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())),l.error="Failed to save project update"}),o}},deleteProject:async n=>{const r=t().getProjectById(n);if(!r)return;const a=t().projects.filter(s=>s.parentId===n).map(s=>s.id),i=[n,...a];e(s=>({projects:s.projects.filter(o=>!i.includes(o.id))})),mn.getState()._unlinkConversationsFromProjects(i);try{await xt.deleteProject(n),Ye.success(`Project "${r.name}" deleted.`)}catch(s){throw console.error("ProjectStore: Error deleting project",s),e(o=>{const l=t().projects.filter(u=>i.includes(u.id)).concat(r);o.projects.push(...l),o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),o.error="Failed to delete project"}),s}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getProjectHierarchy:n=>{const r=[];let a=n;for(;a;){const i=t().getProjectById(a);if(i)r.unshift({id:i.id,name:i.name}),a=i.parentId;else break}return r},getEffectiveProjectSettings:n=>{const r=fr.getState(),a=Bn.getState().selectedModelId;let i=n,s={systemPrompt:null,modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null};for(;i;){const o=t().getProjectById(i);if(o)s.systemPrompt===null&&o.systemPrompt!==null&&o.systemPrompt!==void 0&&(s.systemPrompt=o.systemPrompt),s.modelId===null&&o.modelId!==null&&o.modelId!==void 0&&(s.modelId=o.modelId),s.temperature===null&&o.temperature!==null&&o.temperature!==void 0&&(s.temperature=o.temperature),s.maxTokens===null&&o.maxTokens!==null&&o.maxTokens!==void 0&&(s.maxTokens=o.maxTokens),s.topP===null&&o.topP!==null&&o.topP!==void 0&&(s.topP=o.topP),s.topK===null&&o.topK!==null&&o.topK!==void 0&&(s.topK=o.topK),s.presencePenalty===null&&o.presencePenalty!==null&&o.presencePenalty!==void 0&&(s.presencePenalty=o.presencePenalty),s.frequencyPenalty===null&&o.frequencyPenalty!==null&&o.frequencyPenalty!==void 0&&(s.frequencyPenalty=o.frequencyPenalty),i=o.parentId;else break}return s.systemPrompt===null&&(s.systemPrompt=r.globalSystemPrompt),s.modelId===null&&(s.modelId=a),s.temperature===null&&(s.temperature=r.temperature),s.maxTokens===null&&(s.maxTokens=r.maxTokens),s.topP===null&&(s.topP=r.topP),s.topK===null&&(s.topK=r.topK),s.presencePenalty===null&&(s.presencePenalty=r.presencePenalty),s.frequencyPenalty===null&&(s.frequencyPenalty=r.frequencyPenalty),s}}))),hv=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},nfe=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${FC(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${FC(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,s,o,l,u,d,h;((a=r.prompt)!=null&&a.content||(o=(s=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${Fg(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(u=r.metadata)!=null&&u.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class vh{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const s=i.conversation,o=i.interactions;if(!s.id||!s.title||!s.createdAt||!s.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:s.title||"Imported Chat",metadata:s.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(d=>xt.saveInteraction({...d,conversationId:l,id:Si()}));await Promise.all(u),await r(l,"conversation"),Ye.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),Ye.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=mn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await xt.loadInteractionsForConversation(t);let i,s;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const u=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([u],{type:"application/json"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=nfe(r,a);i=new Blob([l],{type:"text/markdown"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");hv(i,s),Ye.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),Ye.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=ai.getState(),{conversations:a}=mn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const s=async m=>{const y=n.find(w=>w.id===m);if(!y)throw new Error(`Project ${m} not found in state.`);const v=n.filter(w=>w.parentId===m),b=a.filter(w=>w.projectId===m),x=[];for(const w of v)x.push(await s(w.id));for(const w of b){const S=await xt.loadInteractionsForConversation(w.id);x.push({conversation:w,interactions:S})}return{project:y,children:x}},o=await s(t),l=JSON.stringify(o,null,2),u=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;hv(u,h),Ye.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),Ye.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=mn.getState().conversations,n=[];for(const s of t){const o=await xt.loadInteractionsForConversation(s.id);n.push({conversation:s,interactions:o})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;hv(a,i),Ye.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),Ye.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await xt.getAllDataForExport(t),r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;hv(a,i),Ye.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),Ye.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.version)throw new Error("Invalid import file format. Missing version or basic structure.");await xt.importAllData(a,n),Ye.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),Ye.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const AO="sync_repos",rfe="/synced_repos",mn=Os(Ds((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await co.getState().initializeVFS(AO,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${AO}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),Ye.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await ai.getState().loadProjects();const[n,r]=await Promise.all([xt.loadConversations(),xt.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const s=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,o=i.updatedAt instanceof Date?i.updatedAt.getTime():null;s?o&&o>s?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=Si(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(s=>{s.conversations.some(o=>o.id===i.id)||(s.conversations.unshift(i),s.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const s=t().getConversationById(r);if(s)await xt.saveConversation(s),kt.emit(Et.CONVERSATION_ADDED,{conversation:s});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(s){throw console.error("ConversationStore: Error adding conversation",s),e(o=>({error:"Failed to save new conversation",conversations:o.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([l])=>l!==r))})),s}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=s.conversations[o].metadata??{},u=r.metadata??{},d={...l,...u};Object.assign(s.conversations[o],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),m=s.conversations[o].lastSyncedAt instanceof Date?s.conversations[o].lastSyncedAt.getTime():null,y=s.conversations[o].updatedAt.getTime();"syncRepoId"in r?s.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&s.conversations[o].syncRepoId&&s.conversationSyncStatus[n]==="idle"&&(!m||y>m)&&(s.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const s=JSON.parse(JSON.stringify(i));await xt.saveConversation(s),kt.emit(Et.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(s){throw console.error("ConversationStore: Error updating conversation",s),e(o=>{const l=o.conversations.findIndex(u=>u.id===n);if(l!==-1){o.conversations[l]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&d<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),s}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){s.conversations[o]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,u=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&l&&u<=l?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(s=>s.id===n);if(i){e(s=>({conversations:s.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([o])=>o!==n))}));try{await xt.deleteConversation(n),await xt.deleteInteractionsForConversation(n),kt.emit(Et.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await Hn.getState().setCurrentConversationId(null),kt.emit(Et.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(s){throw console.error("ConversationStore: Error deleting conversation",s),e(o=>{if(i){o.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&l&&u<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),s}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await Hn.getState().setCurrentConversationId(r==="conversation"?n:null),kt.emit(Et.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?kt.emit(Et.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?kt.emit(Et.PROJECT_SELECTED,{projectId:n}):(kt.emit(Et.CONVERSATION_SELECTED,{conversationId:null}),kt.emit(Et.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await vh.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await vh.exportConversation(n,r)},exportProject:async n=>{await vh.exportProject(n)},exportAllConversations:async()=>{await vh.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await xt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=Si(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(s=>{s.syncRepos.push(i)});try{const s=t().syncRepos.find(o=>o.id===r);if(s){const o=JSON.parse(JSON.stringify(s));await xt.saveSyncRepo(o),kt.emit(Et.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return Ye.success(`Sync repository "${i.name}" added.`),r}catch(s){throw console.error("ConversationStore: Error adding sync repo",s),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),s}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(s=>s.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(s.syncRepos[o],{...r,branch:r.branch||s.syncRepos[o].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(s=>s.id===n);if(i)try{const s=JSON.parse(JSON.stringify(i));await xt.saveSyncRepo(s),kt.emit(Et.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),Ye.success(`Sync repository "${i.name}" updated.`)}catch(s){throw console.error("ConversationStore: Error updating sync repo",s),e(o=>{const l=o.syncRepos.findIndex(u=>u.id===n);l!==-1&&(o.syncRepos[l]=a),o.error="Failed to save sync repository update"}),s}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&(s.syncRepos[o]=a),s.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(s=>s.id===n);if(!r)return;const a=rr(`${rfe}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(s=>({syncRepos:s.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(s.repoInitializationStatus).filter(([o])=>o!==n))}));try{await xt.deleteSyncRepo(n),kt.emit(Et.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),Ye.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await qT(a,!0,{fsInstance:i}),Ye.info(`Removed local sync folder for "${r.name}".`)}catch(s){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,s),s.code!=="ENOENT"&&Ye.warning(`Failed to remove local sync folder: ${s.message}`)}}catch(s){throw console.error("ConversationStore: Error deleting sync repo",s),e(o=>{r&&o.syncRepos.push(r),o.error="Failed to delete sync repository"}),s}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),Ye.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),kt.emit(Et.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),kt.emit(Et.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){Ye.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await efe(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){Ye.error("Conversation not found for syncing.");return}if(!r.syncRepoId){Ye.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(o=>o.id===r.syncRepoId);if(!a){Ye.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await tfe(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const s=t().getConversationById(n);s&&e(o=>{const l=o.conversations.findIndex(u=>u.id===n);l!==-1&&(o.conversations[l]=s)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const s=t().getConversationById(r);if(!s){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=s.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!s.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}})));function Cn({className:e,type:t,...n}){return p.jsx("input",{type:t,"data-slot":"input",className:_t("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function e1(e){const t=e+"CollectionProvider",[n,r]=di(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:x,children:w}=b,S=gt.useRef(null),E=gt.useRef(new Map).current;return p.jsx(a,{scope:x,itemMap:E,collectionRef:S,children:w})};s.displayName=t;const o=e+"CollectionSlot",l=du(o),u=gt.forwardRef((b,x)=>{const{scope:w,children:S}=b,E=i(o,w),C=kn(x,E.collectionRef);return p.jsx(l,{ref:C,children:S})});u.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=du(d),y=gt.forwardRef((b,x)=>{const{scope:w,children:S,...E}=b,C=gt.useRef(null),T=kn(x,C),j=i(d,w);return gt.useEffect(()=>(j.itemMap.set(C,{ref:C,...E}),()=>void j.itemMap.delete(C))),p.jsx(m,{[h]:"",ref:T,children:S})});y.displayName=d;function v(b){const x=i(e+"CollectionConsumer",b);return gt.useCallback(()=>{const S=x.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((j,I)=>E.indexOf(j.ref.current)-E.indexOf(I.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:s,Slot:u,ItemSlot:y},v,r]}var hE=0;function t1(){k.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??NO()),document.body.insertAdjacentElement("beforeend",e[1]??NO()),hE++,()=>{hE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),hE--}},[])}function NO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var pE="focusScope.autoFocusOnMount",mE="focusScope.autoFocusOnUnmount",RO={bubbles:!1,cancelable:!0},afe="FocusScope",ty=k.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,l]=k.useState(null),u=La(a),d=La(i),h=k.useRef(null),m=kn(t,b=>l(b)),y=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let b=function(E){if(y.paused||!o)return;const C=E.target;o.contains(C)?h.current=C:eu(h.current,{select:!0})},x=function(E){if(y.paused||!o)return;const C=E.relatedTarget;C!==null&&(o.contains(C)||eu(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const T of E)T.removedNodes.length>0&&eu(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",x);const S=new MutationObserver(w);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",x),S.disconnect()}}},[r,o,y.paused]),k.useEffect(()=>{if(o){jO.add(y);const b=document.activeElement;if(!o.contains(b)){const w=new CustomEvent(pE,RO);o.addEventListener(pE,u),o.dispatchEvent(w),w.defaultPrevented||(ife(ufe(xL(o)),{select:!0}),document.activeElement===b&&eu(o))}return()=>{o.removeEventListener(pE,u),setTimeout(()=>{const w=new CustomEvent(mE,RO);o.addEventListener(mE,d),o.dispatchEvent(w),w.defaultPrevented||eu(b??document.body,{select:!0}),o.removeEventListener(mE,d),jO.remove(y)},0)}}},[o,u,d,y]);const v=k.useCallback(b=>{if(!n&&!r||y.paused)return;const x=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,w=document.activeElement;if(x&&w){const S=b.currentTarget,[E,C]=sfe(S);E&&C?!b.shiftKey&&w===C?(b.preventDefault(),n&&eu(E,{select:!0})):b.shiftKey&&w===E&&(b.preventDefault(),n&&eu(C,{select:!0})):w===S&&b.preventDefault()}},[n,r,y.paused]);return p.jsx(rn.div,{tabIndex:-1,...s,ref:m,onKeyDown:v})});ty.displayName=afe;function ife(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(eu(r,{select:t}),document.activeElement!==n)return}function sfe(e){const t=xL(e),n=IO(t,e),r=IO(t.reverse(),e);return[n,r]}function xL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function IO(e,t){for(const n of e)if(!ofe(n,{upTo:t}))return n}function ofe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function lfe(e){return e instanceof HTMLInputElement&&"select"in e}function eu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&lfe(e)&&t&&e.select()}}var jO=cfe();function cfe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=OO(e,t),e.unshift(t)},remove(t){var n;e=OO(e,t),(n=e[0])==null||n.resume()}}}function OO(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ufe(e){return e.filter(t=>t.tagName!=="A")}function n1(e){const t=k.useRef({value:e,previous:e});return k.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var dfe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ch=new WeakMap,pv=new WeakMap,mv={},gE=0,_L=function(e){return e&&(e.host||_L(e.parentNode))},ffe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=_L(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},hfe=function(e,t,n,r){var a=ffe(t,Array.isArray(e)?e:[e]);mv[n]||(mv[n]=new WeakMap);var i=mv[n],s=[],o=new Set,l=new Set(a),u=function(h){!h||o.has(h)||(o.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(o.has(m))d(m);else try{var y=m.getAttribute(r),v=y!==null&&y!=="false",b=(ch.get(m)||0)+1,x=(i.get(m)||0)+1;ch.set(m,b),i.set(m,x),s.push(m),b===1&&v&&pv.set(m,!0),x===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(t),o.clear(),gE++,function(){s.forEach(function(h){var m=ch.get(h)-1,y=i.get(h)-1;ch.set(h,m),i.set(h,y),m||(pv.has(h)||h.removeAttribute(r),pv.delete(h)),y||h.removeAttribute(n)}),gE--,gE||(ch=new WeakMap,ch=new WeakMap,pv=new WeakMap,mv={})}},r1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=dfe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),hfe(r,a,n,"aria-hidden")):function(){return null}},qo=function(){return qo=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qo.apply(this,arguments)};function SL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function pfe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var jv="right-scroll-bar-position",Ov="width-before-scroll-bar",mfe="with-scroll-bars-hidden",gfe="--removed-body-scroll-bar-size";function yE(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function yfe(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var bfe=typeof window<"u"?k.useLayoutEffect:k.useEffect,DO=new WeakMap;function vfe(e,t){var n=yfe(null,function(r){return e.forEach(function(a){return yE(a,r)})});return bfe(function(){var r=DO.get(n);if(r){var a=new Set(r),i=new Set(e),s=n.current;a.forEach(function(o){i.has(o)||yE(o,null)}),i.forEach(function(o){a.has(o)||yE(o,s)})}DO.set(n,e)},[e]),n}function wfe(e){return e}function xfe(e,t){t===void 0&&(t=wfe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(i),s=n}var l=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return a}function _fe(e){e===void 0&&(e={});var t=xfe(null);return t.options=qo({async:!0,ssr:!1},e),t}var EL=function(e){var t=e.sideCar,n=SL(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,qo({},n))};EL.isSideCarExport=!0;function Sfe(e,t){return e.useMedium(t),EL}var CL=_fe(),bE=function(){},a1=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:bE,onWheelCapture:bE,onTouchMoveCapture:bE}),a=r[0],i=r[1],s=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,y=e.noIsolation,v=e.inert,b=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,S=e.gapMode,E=SL(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,T=vfe([n,t]),j=qo(qo({},E),a);return k.createElement(k.Fragment,null,d&&k.createElement(C,{sideCar:CL,removeScrollBar:u,shards:h,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),s?k.cloneElement(k.Children.only(o),qo(qo({},j),{ref:T})):k.createElement(w,qo({},j,{className:l,ref:T}),o))});a1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};a1.classNames={fullWidth:Ov,zeroRight:jv};var Efe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cfe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Efe();return t&&e.setAttribute("nonce",t),e}function kfe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Tfe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Afe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Cfe())&&(kfe(t,n),Tfe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Nfe=function(){var e=Afe();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},kL=function(){var e=Nfe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Rfe={left:0,top:0,right:0,gap:0},vE=function(e){return parseInt(e||"",10)||0},Ife=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[vE(n),vE(r),vE(a)]},jfe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Rfe;var t=Ife(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Ofe=kL(),Th="data-scroll-locked",Dfe=function(e,t,n,r){var a=e.left,i=e.top,s=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(mfe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Th,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jv,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Ov,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(jv," .").concat(jv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ov," .").concat(Ov,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Th,`] {
    `).concat(gfe,": ").concat(o,`px;
  }
`)},MO=function(){var e=parseInt(document.body.getAttribute(Th)||"0",10);return isFinite(e)?e:0},Mfe=function(){k.useEffect(function(){return document.body.setAttribute(Th,(MO()+1).toString()),function(){var e=MO()-1;e<=0?document.body.removeAttribute(Th):document.body.setAttribute(Th,e.toString())}},[])},Pfe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Mfe();var i=k.useMemo(function(){return jfe(a)},[a]);return k.createElement(Ofe,{styles:Dfe(i,!t,a,n?"":"!important")})},UC=!1;if(typeof window<"u")try{var gv=Object.defineProperty({},"passive",{get:function(){return UC=!0,!0}});window.addEventListener("test",gv,gv),window.removeEventListener("test",gv,gv)}catch{UC=!1}var uh=UC?{passive:!1}:!1,Ffe=function(e){return e.tagName==="TEXTAREA"},TL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Ffe(e)&&n[t]==="visible")},Lfe=function(e){return TL(e,"overflowY")},$fe=function(e){return TL(e,"overflowX")},PO=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=AL(e,r);if(a){var i=NL(e,r),s=i[1],o=i[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Bfe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},zfe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},AL=function(e,t){return e==="v"?Lfe(t):$fe(t)},NL=function(e,t){return e==="v"?Bfe(t):zfe(t)},Ufe=function(e,t){return e==="h"&&t==="rtl"?-1:1},qfe=function(e,t,n,r,a){var i=Ufe(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,l=t.contains(o),u=!1,d=s>0,h=0,m=0;do{var y=NL(e,o),v=y[0],b=y[1],x=y[2],w=b-x-i*v;(v||w)&&AL(e,o)&&(h+=w,m+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(u=!0),u},yv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},FO=function(e){return[e.deltaX,e.deltaY]},LO=function(e){return e&&"current"in e?e.current:e},Hfe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Vfe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Gfe=0,dh=[];function Kfe(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),a=k.useState(Gfe++)[0],i=k.useState(kL)[0],s=k.useRef(e);k.useEffect(function(){s.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=pfe([e.lockRef.current],(e.shards||[]).map(LO),!0).filter(Boolean);return b.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=k.useCallback(function(b,x){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var w=yv(b),S=n.current,E="deltaX"in b?b.deltaX:S[0]-w[0],C="deltaY"in b?b.deltaY:S[1]-w[1],T,j=b.target,I=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&I==="h"&&j.type==="range")return!1;var R=PO(I,j);if(!R)return!0;if(R?T=I:(T=I==="v"?"h":"v",R=PO(I,j)),!R)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=T),!T)return!0;var F=r.current||T;return qfe(F,x,b,F==="h"?E:C)},[]),l=k.useCallback(function(b){var x=b;if(!(!dh.length||dh[dh.length-1]!==i)){var w="deltaY"in x?FO(x):yv(x),S=t.current.filter(function(T){return T.name===x.type&&(T.target===x.target||x.target===T.shadowParent)&&Hfe(T.delta,w)})[0];if(S&&S.should){x.cancelable&&x.preventDefault();return}if(!S){var E=(s.current.shards||[]).map(LO).filter(Boolean).filter(function(T){return T.contains(x.target)}),C=E.length>0?o(x,E[0]):!s.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),u=k.useCallback(function(b,x,w,S){var E={name:b,delta:x,target:w,should:S,shadowParent:Wfe(w)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),d=k.useCallback(function(b){n.current=yv(b),r.current=void 0},[]),h=k.useCallback(function(b){u(b.type,FO(b),b.target,o(b,e.lockRef.current))},[]),m=k.useCallback(function(b){u(b.type,yv(b),b.target,o(b,e.lockRef.current))},[]);k.useEffect(function(){return dh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,uh),document.addEventListener("touchmove",l,uh),document.addEventListener("touchstart",d,uh),function(){dh=dh.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,uh),document.removeEventListener("touchmove",l,uh),document.removeEventListener("touchstart",d,uh)}},[]);var y=e.removeScrollBar,v=e.inert;return k.createElement(k.Fragment,null,v?k.createElement(i,{styles:Vfe(a)}):null,y?k.createElement(Pfe,{gapMode:e.gapMode}):null)}function Wfe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Zfe=Sfe(CL,Kfe);var ny=k.forwardRef(function(e,t){return k.createElement(a1,qo({},e,{ref:t,sideCar:Zfe}))});ny.classNames=a1.classNames;var Yfe=[" ","Enter","ArrowUp","ArrowDown"],Xfe=[" ","Enter"],qd="Select",[i1,s1,Jfe]=e1(qd),[Cp,QSe]=di(qd,[Jfe,ju]),o1=ju(),[Qfe,zu]=Cp(qd),[ehe,the]=Cp(qd),RL=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:m,required:y,form:v}=e,b=o1(t),[x,w]=k.useState(null),[S,E]=k.useState(null),[C,T]=k.useState(!1),j=Ep(u),[I,R]=Is({prop:r,defaultProp:a??!1,onChange:i,caller:qd}),[F,B]=Is({prop:s,defaultProp:o,onChange:l,caller:qd}),H=k.useRef(null),D=x?v||!!x.closest("form"):!0,[Z,V]=k.useState(new Set),ue=Array.from(Z).map(ae=>ae.props.value).join(";");return p.jsx(yx,{...b,children:p.jsxs(Qfe,{required:y,scope:t,trigger:x,onTriggerChange:w,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:T,contentId:Ea(),value:F,onValueChange:B,open:I,onOpenChange:R,dir:j,triggerPointerDownPosRef:H,disabled:m,children:[p.jsx(i1.Provider,{scope:t,children:p.jsx(ehe,{scope:e.__scopeSelect,onNativeOptionAdd:k.useCallback(ae=>{V(ne=>new Set(ne).add(ae))},[]),onNativeOptionRemove:k.useCallback(ae=>{V(ne=>{const X=new Set(ne);return X.delete(ae),X})},[]),children:n})}),D?p.jsxs(JL,{"aria-hidden":!0,required:y,tabIndex:-1,name:d,autoComplete:h,value:F,onChange:ae=>B(ae.target.value),disabled:m,form:v,children:[F===void 0?p.jsx("option",{value:""}):null,Array.from(Z)]},ue):null]})})};RL.displayName=qd;var IL="SelectTrigger",jL=k.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=o1(n),s=zu(IL,n),o=s.disabled||r,l=kn(t,s.onTriggerChange),u=s1(n),d=k.useRef("touch"),[h,m,y]=e$(b=>{const x=u().filter(E=>!E.disabled),w=x.find(E=>E.value===s.value),S=t$(x,b,w);S!==void 0&&s.onValueChange(S.value)}),v=b=>{o||(s.onOpenChange(!0),y()),b&&(s.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return p.jsx(x0,{asChild:!0,...i,children:p.jsx(rn.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":QL(s.value)?"":void 0,...a,ref:l,onClick:Ht(a.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:Ht(a.onPointerDown,b=>{d.current=b.pointerType;const x=b.target;x.hasPointerCapture(b.pointerId)&&x.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:Ht(a.onKeyDown,b=>{const x=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(x&&b.key===" ")&&Yfe.includes(b.key)&&(v(),b.preventDefault())})})})});jL.displayName=IL;var OL="SelectValue",DL=k.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...o}=e,l=zu(OL,n),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=kn(t,l.onValueNodeChange);return Ua(()=>{u(d)},[u,d]),p.jsx(rn.span,{...o,ref:h,style:{pointerEvents:"none"},children:QL(l.value)?p.jsx(p.Fragment,{children:s}):i})});DL.displayName=OL;var nhe="SelectIcon",ML=k.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return p.jsx(rn.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});ML.displayName=nhe;var rhe="SelectPortal",PL=e=>p.jsx(cp,{asChild:!0,...e});PL.displayName=rhe;var Hd="SelectContent",FL=k.forwardRef((e,t)=>{const n=zu(Hd,e.__scopeSelect),[r,a]=k.useState();if(Ua(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ho.createPortal(p.jsx(LL,{scope:e.__scopeSelect,children:p.jsx(i1.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),i):null}return p.jsx($L,{...e,ref:t})});FL.displayName=Hd;var Ks=10,[LL,Uu]=Cp(Hd),ahe="SelectContentImpl",ihe=du("SelectContent.RemoveScroll"),$L=k.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:y,sticky:v,hideWhenDetached:b,avoidCollisions:x,...w}=e,S=zu(Hd,n),[E,C]=k.useState(null),[T,j]=k.useState(null),I=kn(t,Ae=>C(Ae)),[R,F]=k.useState(null),[B,H]=k.useState(null),D=s1(n),[Z,V]=k.useState(!1),ue=k.useRef(!1);k.useEffect(()=>{if(E)return r1(E)},[E]),t1();const ae=k.useCallback(Ae=>{const[Ne,...Ce]=D().map(Le=>Le.ref.current),[Pe]=Ce.slice(-1),Qe=document.activeElement;for(const Le of Ae)if(Le===Qe||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Ne&&T&&(T.scrollTop=0),Le===Pe&&T&&(T.scrollTop=T.scrollHeight),Le==null||Le.focus(),document.activeElement!==Qe))return},[D,T]),ne=k.useCallback(()=>ae([R,E]),[ae,R,E]);k.useEffect(()=>{Z&&ne()},[Z,ne]);const{onOpenChange:X,triggerPointerDownPosRef:ie}=S;k.useEffect(()=>{if(E){let Ae={x:0,y:0};const Ne=Pe=>{var Qe,Le;Ae={x:Math.abs(Math.round(Pe.pageX)-(((Qe=ie.current)==null?void 0:Qe.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((Le=ie.current)==null?void 0:Le.y)??0))}},Ce=Pe=>{Ae.x<=10&&Ae.y<=10?Pe.preventDefault():E.contains(Pe.target)||X(!1),document.removeEventListener("pointermove",Ne),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[E,X,ie]),k.useEffect(()=>{const Ae=()=>X(!1);return window.addEventListener("blur",Ae),window.addEventListener("resize",Ae),()=>{window.removeEventListener("blur",Ae),window.removeEventListener("resize",Ae)}},[X]);const[L,J]=e$(Ae=>{const Ne=D().filter(Qe=>!Qe.disabled),Ce=Ne.find(Qe=>Qe.ref.current===document.activeElement),Pe=t$(Ne,Ae,Ce);Pe&&setTimeout(()=>Pe.ref.current.focus())}),Q=k.useCallback((Ae,Ne,Ce)=>{const Pe=!ue.current&&!Ce;(S.value!==void 0&&S.value===Ne||Pe)&&(F(Ae),Pe&&(ue.current=!0))},[S.value]),ee=k.useCallback(()=>E==null?void 0:E.focus(),[E]),fe=k.useCallback((Ae,Ne,Ce)=>{const Pe=!ue.current&&!Ce;(S.value!==void 0&&S.value===Ne||Pe)&&H(Ae)},[S.value]),ve=r==="popper"?qC:BL,Oe=ve===qC?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:y,sticky:v,hideWhenDetached:b,avoidCollisions:x}:{};return p.jsx(LL,{scope:n,content:E,viewport:T,onViewportChange:j,itemRefCallback:Q,selectedItem:R,onItemLeave:ee,itemTextRefCallback:fe,focusSelectedItem:ne,selectedItemText:B,position:r,isPositioned:Z,searchRef:L,children:p.jsx(ny,{as:ihe,allowPinchZoom:!0,children:p.jsx(ty,{asChild:!0,trapped:S.open,onMountAutoFocus:Ae=>{Ae.preventDefault()},onUnmountAutoFocus:Ht(a,Ae=>{var Ne;(Ne=S.trigger)==null||Ne.focus({preventScroll:!0}),Ae.preventDefault()}),children:p.jsx(sp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:Ae=>Ae.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:p.jsx(ve,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Ae=>Ae.preventDefault(),...w,...Oe,onPlaced:()=>V(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Ht(w.onKeyDown,Ae=>{const Ne=Ae.ctrlKey||Ae.altKey||Ae.metaKey;if(Ae.key==="Tab"&&Ae.preventDefault(),!Ne&&Ae.key.length===1&&J(Ae.key),["ArrowUp","ArrowDown","Home","End"].includes(Ae.key)){let Pe=D().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(Ae.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ae.key)){const Qe=Ae.target,Le=Pe.indexOf(Qe);Pe=Pe.slice(Le+1)}setTimeout(()=>ae(Pe)),Ae.preventDefault()}})})})})})})});$L.displayName=ahe;var she="SelectItemAlignedPosition",BL=k.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=zu(Hd,n),s=Uu(Hd,n),[o,l]=k.useState(null),[u,d]=k.useState(null),h=kn(t,I=>d(I)),m=s1(n),y=k.useRef(!1),v=k.useRef(!0),{viewport:b,selectedItem:x,selectedItemText:w,focusSelectedItem:S}=s,E=k.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&b&&x&&w){const I=i.trigger.getBoundingClientRect(),R=u.getBoundingClientRect(),F=i.valueNode.getBoundingClientRect(),B=w.getBoundingClientRect();if(i.dir!=="rtl"){const Qe=B.left-R.left,Le=F.left-Qe,Ie=I.left-Le,z=I.width+Ie,Se=Math.max(z,R.width),Te=window.innerWidth-Ks,de=Jg(Le,[Ks,Math.max(Ks,Te-Se)]);o.style.minWidth=z+"px",o.style.left=de+"px"}else{const Qe=R.right-B.right,Le=window.innerWidth-F.right-Qe,Ie=window.innerWidth-I.right-Le,z=I.width+Ie,Se=Math.max(z,R.width),Te=window.innerWidth-Ks,de=Jg(Le,[Ks,Math.max(Ks,Te-Se)]);o.style.minWidth=z+"px",o.style.right=de+"px"}const H=m(),D=window.innerHeight-Ks*2,Z=b.scrollHeight,V=window.getComputedStyle(u),ue=parseInt(V.borderTopWidth,10),ae=parseInt(V.paddingTop,10),ne=parseInt(V.borderBottomWidth,10),X=parseInt(V.paddingBottom,10),ie=ue+ae+Z+X+ne,L=Math.min(x.offsetHeight*5,ie),J=window.getComputedStyle(b),Q=parseInt(J.paddingTop,10),ee=parseInt(J.paddingBottom,10),fe=I.top+I.height/2-Ks,ve=D-fe,Oe=x.offsetHeight/2,Ae=x.offsetTop+Oe,Ne=ue+ae+Ae,Ce=ie-Ne;if(Ne<=fe){const Qe=H.length>0&&x===H[H.length-1].ref.current;o.style.bottom="0px";const Le=u.clientHeight-b.offsetTop-b.offsetHeight,Ie=Math.max(ve,Oe+(Qe?ee:0)+Le+ne),z=Ne+Ie;o.style.height=z+"px"}else{const Qe=H.length>0&&x===H[0].ref.current;o.style.top="0px";const Ie=Math.max(fe,ue+b.offsetTop+(Qe?Q:0)+Oe)+Ce;o.style.height=Ie+"px",b.scrollTop=Ne-fe+b.offsetTop}o.style.margin=`${Ks}px 0`,o.style.minHeight=L+"px",o.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,o,u,b,x,w,i.dir,r]);Ua(()=>E(),[E]);const[C,T]=k.useState();Ua(()=>{u&&T(window.getComputedStyle(u).zIndex)},[u]);const j=k.useCallback(I=>{I&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return p.jsx(lhe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:y,onScrollButtonChange:j,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:p.jsx(rn.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});BL.displayName=she;var ohe="SelectPopperPosition",qC=k.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ks,...i}=e,s=o1(n);return p.jsx(bx,{...s,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qC.displayName=ohe;var[lhe,rA]=Cp(Hd,{}),HC="SelectViewport",zL=k.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Uu(HC,n),s=rA(HC,n),o=kn(t,i.onViewportChange),l=k.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(i1.Slot,{scope:n,children:p.jsx(rn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ht(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=s;if(m!=null&&m.current&&h){const y=Math.abs(l.current-d.scrollTop);if(y>0){const v=window.innerHeight-Ks*2,b=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),w=Math.max(b,x);if(w<v){const S=w+y,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});zL.displayName=HC;var UL="SelectGroup",[che,uhe]=Cp(UL),dhe=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ea();return p.jsx(che,{scope:n,id:a,children:p.jsx(rn.div,{role:"group","aria-labelledby":a,...r,ref:t})})});dhe.displayName=UL;var qL="SelectLabel",fhe=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=uhe(qL,n);return p.jsx(rn.div,{id:a.id,...r,ref:t})});fhe.displayName=qL;var Fw="SelectItem",[hhe,HL]=Cp(Fw),VL=k.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,o=zu(Fw,n),l=Uu(Fw,n),u=o.value===r,[d,h]=k.useState(i??""),[m,y]=k.useState(!1),v=kn(t,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,a)}),b=Ea(),x=k.useRef("touch"),w=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(hhe,{scope:n,value:r,disabled:a,textId:b,isSelected:u,onItemTextChange:k.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:p.jsx(i1.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:p.jsx(rn.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:v,onFocus:Ht(s.onFocus,()=>y(!0)),onBlur:Ht(s.onBlur,()=>y(!1)),onClick:Ht(s.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:Ht(s.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:Ht(s.onPointerDown,S=>{x.current=S.pointerType}),onPointerMove:Ht(s.onPointerMove,S=>{var E;x.current=S.pointerType,a?(E=l.onItemLeave)==null||E.call(l):x.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ht(s.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:Ht(s.onKeyDown,S=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(Xfe.includes(S.key)&&w(),S.key===" "&&S.preventDefault())})})})})});VL.displayName=Fw;var Jm="SelectItemText",GL=k.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=zu(Jm,n),o=Uu(Jm,n),l=HL(Jm,n),u=the(Jm,n),[d,h]=k.useState(null),m=kn(t,w=>h(w),l.onItemTextChange,w=>{var S;return(S=o.itemTextRefCallback)==null?void 0:S.call(o,w,l.value,l.disabled)}),y=d==null?void 0:d.textContent,v=k.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:b,onNativeOptionRemove:x}=u;return Ua(()=>(b(v),()=>x(v)),[b,x,v]),p.jsxs(p.Fragment,{children:[p.jsx(rn.span,{id:l.textId,...i,ref:m}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Ho.createPortal(i.children,s.valueNode):null]})});GL.displayName=Jm;var KL="SelectItemIndicator",WL=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return HL(KL,n).isSelected?p.jsx(rn.span,{"aria-hidden":!0,...r,ref:t}):null});WL.displayName=KL;var VC="SelectScrollUpButton",ZL=k.forwardRef((e,t)=>{const n=Uu(VC,e.__scopeSelect),r=rA(VC,e.__scopeSelect),[a,i]=k.useState(!1),s=kn(t,r.onScrollButtonChange);return Ua(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(XL,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});ZL.displayName=VC;var GC="SelectScrollDownButton",YL=k.forwardRef((e,t)=>{const n=Uu(GC,e.__scopeSelect),r=rA(GC,e.__scopeSelect),[a,i]=k.useState(!1),s=kn(t,r.onScrollButtonChange);return Ua(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(XL,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});YL.displayName=GC;var XL=k.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Uu("SelectScrollButton",n),s=k.useRef(null),o=s1(n),l=k.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return k.useEffect(()=>()=>l(),[l]),Ua(()=>{var d;const u=o().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),p.jsx(rn.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ht(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:Ht(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:Ht(a.onPointerLeave,()=>{l()})})}),phe="SelectSeparator",mhe=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(rn.div,{"aria-hidden":!0,...r,ref:t})});mhe.displayName=phe;var KC="SelectArrow",ghe=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=o1(n),i=zu(KC,n),s=Uu(KC,n);return i.open&&s.position==="popper"?p.jsx(vx,{...a,...r,ref:t}):null});ghe.displayName=KC;var yhe="SelectBubbleInput",JL=k.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=k.useRef(null),i=kn(r,a),s=n1(t);return k.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(rn.select,{...n,style:{...lP,...n.style},ref:i,defaultValue:t})});JL.displayName=yhe;function QL(e){return e===""||e===void 0}function e$(e){const t=La(e),n=k.useRef(""),r=k.useRef(0),a=k.useCallback(s=>{const o=n.current+s;t(o),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),i=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function t$(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=bhe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function bhe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var vhe=RL,whe=jL,xhe=DL,_he=ML,She=PL,Ehe=FL,Che=zL,khe=VL,The=GL,Ahe=WL,Nhe=ZL,Rhe=YL;function Yo({...e}){return p.jsx(vhe,{"data-slot":"select",...e})}function Xo({...e}){return p.jsx(xhe,{"data-slot":"select-value",...e})}function Jo({className:e,size:t="default",children:n,...r}){return p.jsxs(whe,{"data-slot":"select-trigger","data-size":t,className:_t("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,p.jsx(_he,{asChild:!0,children:p.jsx(sl,{className:"size-4 opacity-50"})})]})}function Qo({className:e,children:t,position:n="popper",...r}){return p.jsx(She,{children:p.jsxs(Ehe,{"data-slot":"select-content",className:_t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(Ihe,{}),p.jsx(Che,{className:_t("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),p.jsx(jhe,{})]})})}function sa({className:e,children:t,...n}){return p.jsxs(khe,{"data-slot":"select-item",className:_t("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[p.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(Ahe,{children:p.jsx(xi,{className:"size-4"})})}),p.jsx(The,{children:t})]})}function Ihe({className:e,...t}){return p.jsx(Nhe,{"data-slot":"select-scroll-up-button",className:_t("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Kd,{className:"size-4"})})}function jhe({className:e,...t}){return p.jsx(Rhe,{"data-slot":"select-scroll-down-button",className:_t("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(sl,{className:"size-4"})})}var Ohe="Label",n$=k.forwardRef((e,t)=>p.jsx(rn.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));n$.displayName=Ohe;var Dhe=n$;function Gt({className:e,...t}){return p.jsx(Dhe,{"data-slot":"label",className:_t("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const r$=({initialProviderType:e=null,initialName:t="",initialValue:n="",initialApiKeyId:r=null,onSave:a,onCancel:i,isSaving:s,className:o})=>{const[l,u]=k.useState(t),[d,h]=k.useState(n),[m,y]=k.useState(e),v=k.useRef(null);k.useEffect(()=>{u(t),h(n),y(e)},[t,n,e,r]);const b=k.useCallback(w=>{var T,j;const S=w;y(S);const E=(T=cu.find(I=>I.value===S))==null?void 0:T.label,C=(j=cu.find(I=>I.value===m))==null?void 0:j.label;E&&(!l.trim()||l===`${C}`)&&u(`${E}`),requestAnimationFrame(()=>{var I;(I=v.current)==null||I.focus()})},[l,m]),x=k.useCallback(async()=>{if(!l.trim()||!d.trim()||!m){Ye.error("Key Name, Provider Type, and API Key Value are required.");return}await a(l.trim(),m,d.trim())},[l,d,m,a]);return p.jsxs("div",{className:_t("space-y-4",o),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"api-key-provider",children:"Provider Type"}),p.jsxs(Yo,{value:m??"",onValueChange:b,disabled:s,children:[p.jsx(Jo,{id:"api-key-provider",children:p.jsx(Xo,{placeholder:"Select Provider Type"})}),p.jsx(Qo,{children:cu.map(w=>p.jsx(sa,{value:w.value,children:w.label},w.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"api-key-name",children:"Key Name"}),p.jsx(Cn,{id:"api-key-name",value:l,onChange:w=>u(w.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:s})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"api-key-value",children:"API Key Value"}),p.jsx(Cn,{ref:v,id:"api-key-value",type:"password",value:d,onChange:w=>h(w.target.value),placeholder:"Enter your API key",required:!0,disabled:s,autoComplete:"new-password"})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:i,disabled:s,type:"button",children:[p.jsx(_i,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:x,disabled:s||!l.trim()||!d.trim()||!m,type:"button",children:[s&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Zd,{className:"h-4 w-4 mr-1"})," ",s?"Saving...":"Save API Key"]})]})]})};var l1="Switch",[Mhe,e2e]=di(l1),[Phe,Fhe]=Mhe(l1),a$=k.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,y]=k.useState(null),v=kn(t,E=>y(E)),b=k.useRef(!1),x=m?d||!!m.closest("form"):!0,[w,S]=Is({prop:a,defaultProp:i??!1,onChange:u,caller:l1});return p.jsxs(Phe,{scope:n,checked:w,disabled:o,children:[p.jsx(rn.button,{type:"button",role:"switch","aria-checked":w,"aria-required":s,"data-state":l$(w),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onClick:Ht(e.onClick,E=>{S(C=>!C),x&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),x&&p.jsx(o$,{control:m,bubbles:!b.current,name:r,value:l,checked:w,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});a$.displayName=l1;var i$="SwitchThumb",s$=k.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Fhe(i$,n);return p.jsx(rn.span,{"data-state":l$(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});s$.displayName=i$;var Lhe="SwitchBubbleInput",o$=k.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const s=k.useRef(null),o=kn(s,i),l=n1(n),u=gx(t);return k.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&y){const v=new Event("click",{bubbles:r});y.call(d,n),d.dispatchEvent(v)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});o$.displayName=Lhe;function l$(e){return e?"checked":"unchecked"}var $he=a$,Bhe=s$;function Li({className:e,...t}){return p.jsx($he,{"data-slot":"switch",className:_t("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(Bhe,{"data-slot":"switch-thumb",className:_t("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const c$=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var u;const s=d=>{r(d==="none"?null:d)},o=(u=a.find(d=>d.id===n))==null?void 0:u.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return p.jsxs(Yo,{value:n??"none",onValueChange:s,disabled:i||a.length===0,children:[p.jsx(Jo,{className:_t("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:p.jsx(Xo,{asChild:!0,children:p.jsxs("div",{className:"flex items-center overflow-hidden",children:[p.jsx(VE,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),p.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&p.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?p.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),p.jsxs(Qo,{className:"bg-popover border-border text-popover-foreground",children:[p.jsx(sa,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>p.jsx(sa,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},u$=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:a="",initialApiKeyId:i=null})=>{var x;const[s,o]=k.useState(!1),[l,u]=k.useState({name:a,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,enabledModels:null,autoFetchModels:Sd(r),fetchedModels:null,modelsLastFetchedAt:null});k.useEffect(()=>{u(w=>({...w,name:a||w.name||"",type:r||w.type||null,apiKeyId:i||w.apiKeyId||null,autoFetchModels:r?Sd(r):w.autoFetchModels}))},[a,r,i]);const d=k.useCallback((w,S)=>{u(E=>{var j,I;const C={...E,[w]:S},T=E.name||"";if(w==="type"){const R=S,F=(j=cu.find(H=>H.value===E.type))==null?void 0:j.label;C.apiKeyId=null,C.baseURL=null,C.autoFetchModels=R?Sd(R):!1,C.enabledModels=null;const B=(I=cu.find(H=>H.value===R))==null?void 0:I.label;if(B&&(!T.trim()||T===F)&&(C.name=B),R&&Lh(R)){const H=(e||[]).filter(D=>D.providerId===R);H.length>0&&(C.apiKeyId=H[0].id)}}return(w==="isEnabled"||w==="autoFetchModels")&&(C[w]=!!S),C})},[e]),h=k.useCallback(async()=>{var w,S;if(!((w=l.name)!=null&&w.trim())||!l.type){Ye.error("Provider Name and Type are required.");return}o(!0);try{const E=l.type,C=l.autoFetchModels??Sd(E),T={name:l.name.trim(),type:E,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((S=l.baseURL)==null?void 0:S.trim())||null,enabledModels:null,autoFetchModels:C,fetchedModels:null,modelsLastFetchedAt:null};await t(T),n()}catch(E){console.error("Failed to add provider (from form component):",E)}finally{o(!1)}},[l,t,n]),m=Lh(l.type??null),y=Fk(l.type??null),v=Sd(l.type??null),b=(e||[]).filter(w=>!l.type||w.providerId===l.type);return p.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"new-provider-type",children:"Provider Type"}),p.jsxs(Yo,{value:l.type??"",onValueChange:w=>d("type",w),disabled:s,children:[p.jsx(Jo,{id:"new-provider-type",children:p.jsx(Xo,{placeholder:"Select Type"})}),p.jsx(Qo,{children:cu.map(w=>p.jsx(sa,{value:w.value,children:w.label},w.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"new-provider-name",children:"Provider Name"}),p.jsx(Cn,{id:"new-provider-name",value:l.name||"",onChange:w=>d("name",w.target.value),placeholder:"e.g., My Ollama",disabled:s,"aria-label":"Provider Name"})]}),m&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Gt,{children:"API Key"}),p.jsx(c$,{label:"API Key",selectedKeyId:l.apiKeyId??null,onKeySelected:w=>d("apiKeyId",w),apiKeys:b,disabled:s||!l.type})]}),y&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Gt,{htmlFor:"new-provider-baseurl",children:"Base URL"}),p.jsx(Cn,{id:"new-provider-baseurl",value:l.baseURL||"",onChange:w=>d("baseURL",w.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:s,"aria-label":"Base URL"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Li,{id:"new-enabled",checked:l.isEnabled??!0,onCheckedChange:w=>d("isEnabled",w),disabled:s,"aria-labelledby":"new-enabled-label"}),p.jsx(Gt,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Li,{id:"new-autofetch",checked:l.autoFetchModels??!1,onCheckedChange:w=>d("autoFetchModels",w),disabled:!v||s,"aria-labelledby":"new-autofetch-label"}),p.jsxs(Gt,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:_t("text-sm",v?"":"text-muted-foreground"),children:["Auto-fetch models ",v?"":"(Not Supported)"]})]})]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:n,disabled:s,type:"button",children:[p.jsx(_i,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:h,disabled:s||!((x=l.name)!=null&&x.trim())||!l.type,type:"button",children:[s&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Zd,{className:"h-4 w-4 mr-1"})," ",s?"Adding...":"Add Provider"]})]})]})};var c1="Collapsible",[zhe,t2e]=di(c1),[Uhe,aA]=zhe(c1),d$=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:s,...o}=e,[l,u]=Is({prop:r,defaultProp:a??!1,onChange:s,caller:c1});return p.jsx(Uhe,{scope:n,disabled:i,contentId:Ea(),open:l,onOpenToggle:k.useCallback(()=>u(d=>!d),[u]),children:p.jsx(rn.div,{"data-state":sA(l),"data-disabled":i?"":void 0,...o,ref:t})})});d$.displayName=c1;var f$="CollapsibleTrigger",h$=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=aA(f$,n);return p.jsx(rn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":sA(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Ht(e.onClick,a.onOpenToggle)})});h$.displayName=f$;var iA="CollapsibleContent",p$=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=aA(iA,e.__scopeCollapsible);return p.jsx(Ta,{present:n||a.open,children:({present:i})=>p.jsx(qhe,{...r,ref:t,present:i})})});p$.displayName=iA;var qhe=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=e,s=aA(iA,n),[o,l]=k.useState(r),u=k.useRef(null),d=kn(t,u),h=k.useRef(0),m=h.current,y=k.useRef(0),v=y.current,b=s.open||o,x=k.useRef(b),w=k.useRef(void 0);return k.useEffect(()=>{const S=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(S)},[]),Ua(()=>{const S=u.current;if(S){w.current=w.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const E=S.getBoundingClientRect();h.current=E.height,y.current=E.width,x.current||(S.style.transitionDuration=w.current.transitionDuration,S.style.animationName=w.current.animationName),l(r)}},[s.open,r]),p.jsx(rn.div,{"data-state":sA(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!b,...i,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:b&&a})});function sA(e){return e?"open":"closed"}var Hhe=d$;function Vhe({...e}){return p.jsx(Hhe,{"data-slot":"collapsible",...e})}function Ghe({...e}){return p.jsx(h$,{"data-slot":"collapsible-trigger",...e})}function Khe({...e}){return p.jsx(p$,{"data-slot":"collapsible-content",...e})}const Whe=({stepNumber:e,title:t,description:n,isComplete:r,isActive:a,children:i,contentClassName:s,openOnComplete:o})=>{const[l,u]=k.useState(a&&!r);k.useEffect(()=>{a&&(!r||o)&&u(!0)},[a,r,o]);const d=r?gk:Q6,h=r?"text-green-500":a?"text-primary":"text-muted-foreground";return p.jsxs(Vhe,{open:l,onOpenChange:u,className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between space-x-4 px-1",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(d,{className:_t("h-5 w-5 flex-shrink-0",h)}),p.jsxs("h4",{className:_t("text-sm font-semibold",r?"text-muted-foreground line-through":"text-primary"),children:["Step ",e,": ",t]})]}),p.jsx(Ghe,{asChild:!0,children:p.jsxs(Rt,{variant:"ghost",size:"sm",className:"w-9 p-0",children:[l?p.jsx(sl,{className:"h-4 w-4"}):p.jsx(J6,{className:"h-4 w-4"}),p.jsxs("span",{className:"sr-only",children:["Toggle ",t]})]})})]}),p.jsx(Khe,{className:"space-y-2",children:p.jsxs("div",{className:_t("rounded-md border px-4 py-3 font-mono text-sm shadow-sm bg-card ml-8",s),children:[p.jsx("p",{className:"text-sm mb-3 text-card-foreground",children:n}),i]})})]})};var u1="Popover",[m$,n2e]=di(u1,[ju]),ry=ju(),[Zhe,qu]=m$(u1),g$=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=ry(t),l=k.useRef(null),[u,d]=k.useState(!1),[h,m]=Is({prop:r,defaultProp:a??!1,onChange:i,caller:u1});return p.jsx(yx,{...o,children:p.jsx(Zhe,{scope:t,contentId:Ea(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:k.useCallback(()=>m(y=>!y),[m]),hasCustomAnchor:u,onCustomAnchorAdd:k.useCallback(()=>d(!0),[]),onCustomAnchorRemove:k.useCallback(()=>d(!1),[]),modal:s,children:n})})};g$.displayName=u1;var y$="PopoverAnchor",Yhe=k.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=qu(y$,n),i=ry(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return k.useEffect(()=>(s(),()=>o()),[s,o]),p.jsx(x0,{...i,...r,ref:t})});Yhe.displayName=y$;var b$="PopoverTrigger",v$=k.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=qu(b$,n),i=ry(n),s=kn(t,a.triggerRef),o=p.jsx(rn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":E$(a.open),...r,ref:s,onClick:Ht(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:p.jsx(x0,{asChild:!0,...i,children:o})});v$.displayName=b$;var oA="PopoverPortal",[Xhe,Jhe]=m$(oA,{forceMount:void 0}),w$=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=qu(oA,t);return p.jsx(Xhe,{scope:t,forceMount:n,children:p.jsx(Ta,{present:n||i.open,children:p.jsx(cp,{asChild:!0,container:a,children:r})})})};w$.displayName=oA;var np="PopoverContent",x$=k.forwardRef((e,t)=>{const n=Jhe(np,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=qu(np,e.__scopePopover);return p.jsx(Ta,{present:r||i.open,children:i.modal?p.jsx(epe,{...a,ref:t}):p.jsx(tpe,{...a,ref:t})})});x$.displayName=np;var Qhe=du("PopoverContent.RemoveScroll"),epe=k.forwardRef((e,t)=>{const n=qu(np,e.__scopePopover),r=k.useRef(null),a=kn(t,r),i=k.useRef(!1);return k.useEffect(()=>{const s=r.current;if(s)return r1(s)},[]),p.jsx(ny,{as:Qhe,allowPinchZoom:!0,children:p.jsx(_$,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ht(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ht(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ht(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),tpe=k.forwardRef((e,t)=>{const n=qu(np,e.__scopePopover),r=k.useRef(!1),a=k.useRef(!1);return p.jsx(_$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),_$=k.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=e,m=qu(np,n),y=ry(n);return t1(),p.jsx(ty,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(sp,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:p.jsx(bx,{"data-state":E$(m.open),role:"dialog",id:m.contentId,...y,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),S$="PopoverClose",npe=k.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=qu(S$,n);return p.jsx(rn.button,{type:"button",...r,ref:t,onClick:Ht(e.onClick,()=>a.onOpenChange(!1))})});npe.displayName=S$;var rpe="PopoverArrow",ape=k.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=ry(n);return p.jsx(vx,{...a,...r,ref:t})});ape.displayName=rpe;function E$(e){return e?"open":"closed"}var ipe=g$,spe=v$,ope=w$,lpe=x$;function fc({...e}){return p.jsx(ipe,{"data-slot":"popover",...e})}function hc({...e}){return p.jsx(spe,{"data-slot":"popover-trigger",...e})}function pc({className:e,align:t="center",sideOffset:n=4,...r}){return p.jsx(ope,{children:p.jsx(lpe,{"data-slot":"popover-content",align:t,sideOffset:n,className:_t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const $O=e=>{if(!e)return null;const t=parseFloat(e);return isNaN(t)?null:t/1e6},lA=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:s="h-48",onModelClick:o})=>{const[l,u]=k.useState(""),[d,h]=k.useState(!1),[m,y]=k.useState("all"),[v,b]=k.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[x,w]=k.useState(""),[S,E]=k.useState(""),[C,T]=k.useState(""),[j,I]=k.useState(""),R=k.useMemo(()=>{let H=t;if(m==="enabled"?H=H.filter(J=>n.has(J.id)):m==="disabled"&&(H=H.filter(J=>!n.has(J.id))),l.trim()){const J=l.toLowerCase();H=H.filter(Q=>Q.name.toLowerCase().includes(J)||Q.id.toLowerCase().includes(J))}const D=Object.entries(v).filter(([,J])=>J).map(([J])=>J);D.length>0&&(H=H.filter(J=>{var fe;const Q=new Set(J.supported_parameters??[]),ee=new Set(((fe=J.architecture)==null?void 0:fe.input_modalities)??[]);return D.every(ve=>{switch(ve){case"reasoning":return Q.has("reasoning");case"webSearch":return Q.has("web_search")||Q.has("web_search_options");case"tools":return Q.has("tools");case"multimodal":return Array.from(ee).some(Oe=>Oe!=="text");default:return!0}})}));const Z=parseFloat(x),V=parseFloat(S),ue=parseFloat(C),ae=parseFloat(j),ne=!isNaN(Z),X=!isNaN(V),ie=!isNaN(ue),L=!isNaN(ae);return(ne||X||ie||L)&&(H=H.filter(J=>{var Qe,Le;const Q=$O((Qe=J.pricing)==null?void 0:Qe.prompt),ee=$O((Le=J.pricing)==null?void 0:Le.completion),fe=ne?Z/1e6:-1/0,ve=X?V/1e6:1/0,Oe=ie?ue/1e6:-1/0,Ae=L?ae/1e6:1/0,Ne=Q!==null&&Q>=fe&&Q<=ve,Ce=ee!==null&&ee>=Oe&&ee<=Ae;let Pe=!0;return(ne||X)&&Pe&&(Pe=Ne),(ie||L)&&Pe&&(Pe=Ce),Pe})),H},[t,l,m,n,v,x,S,C,j]),F=H=>{b(D=>({...D,[H]:!D[H]}))},B=(m!=="all"?1:0)+Object.values(v).filter(Boolean).length+(x||S||C||j?1:0);return a?p.jsxs("div",{className:`space-y-2 ${s}`,children:[p.jsx(ur,{className:"h-8 w-full"}),p.jsx(ur,{className:"h-8 w-full"}),p.jsx(ur,{className:"h-8 w-full"})]}):t.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(no,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Cn,{value:l,onChange:H=>u(H.target.value),placeholder:"Filter models by name...",className:"pl-8 h-9 w-full text-xs",type:"text",disabled:i})]}),p.jsxs(fc,{open:d,onOpenChange:h,children:[p.jsx(hc,{asChild:!0,children:p.jsxs(Rt,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:i,children:[p.jsx(YH,{className:"h-4 w-4 mr-1"}),"Filters",B>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:B})]})}),p.jsxs(pc,{className:"w-72 p-4 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Gt,{className:"text-xs font-semibold",children:"Status"}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(Rt,{variant:m==="all"?"secondary":"outline",size:"sm",onClick:()=>y("all"),children:"All"}),p.jsxs(Rt,{variant:m==="enabled"?"secondary":"outline",size:"sm",onClick:()=>y("enabled"),children:[p.jsx(xi,{className:"h-3 w-3 mr-1"})," Enabled"]}),p.jsxs(Rt,{variant:m==="disabled"?"secondary":"outline",size:"sm",onClick:()=>y("disabled"),children:[p.jsx(nH,{className:"h-3 w-3 mr-1"})," Disabled"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Gt,{className:"text-xs font-semibold",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.jsx(Dn,{tooltipText:"Reasoning","aria-label":"Reasoning",icon:p.jsx(Xw,{}),onClick:()=>F("reasoning"),variant:v.reasoning?"secondary":"outline",className:_t(v.reasoning&&"text-primary")}),p.jsx(Dn,{tooltipText:"Web Search","aria-label":"Web Search",icon:p.jsx(no,{}),onClick:()=>F("webSearch"),variant:v.webSearch?"secondary":"outline",className:_t(v.webSearch&&"text-primary")}),p.jsx(Dn,{tooltipText:"Tools","aria-label":"Tools",icon:p.jsx(Sk,{}),onClick:()=>F("tools"),variant:v.tools?"secondary":"outline",className:_t(v.tools&&"text-primary")}),p.jsx(Dn,{tooltipText:"Multimodal","aria-label":"Multimodal",icon:p.jsx(wk,{}),onClick:()=>F("multimodal"),variant:v.multimodal?"secondary":"outline",className:_t(v.multimodal&&"text-primary")})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Gt,{className:"text-xs font-semibold flex items-center gap-1",children:[p.jsx(kH,{className:"h-3 w-3"})," Price Range ($ / 1M Tokens)"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(Cn,{type:"number",min:"0",step:"0.01",placeholder:"Min Input",value:x,onChange:H=>w(H.target.value),className:"h-8 text-xs","aria-label":"Minimum input price per million tokens"}),p.jsx(Cn,{type:"number",min:"0",step:"0.01",placeholder:"Max Input",value:S,onChange:H=>E(H.target.value),className:"h-8 text-xs","aria-label":"Maximum input price per million tokens"}),p.jsx(Cn,{type:"number",min:"0",step:"0.01",placeholder:"Min Output",value:C,onChange:H=>T(H.target.value),className:"h-8 text-xs","aria-label":"Minimum output price per million tokens"}),p.jsx(Cn,{type:"number",min:"0",step:"0.01",placeholder:"Max Output",value:j,onChange:H=>I(H.target.value),className:"h-8 text-xs","aria-label":"Maximum output price per million tokens"})]})]})]})]})]}),p.jsx(Ru,{className:`${s} w-full rounded-md border border-border p-3 bg-background/50`,children:p.jsxs("div",{className:"space-y-2",children:[R.map(H=>p.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[p.jsx(Li,{id:`enable-model-${e}-${H.id}`,checked:n.has(H.id),onCheckedChange:D=>r(H.id,D),disabled:i,"aria-label":`Enable model ${H.name||H.id}`,className:"flex-shrink-0",onClick:D=>D.stopPropagation()}),p.jsx(Gt,{htmlFor:`enable-model-${e}-${H.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate pl-2",title:H.name||H.id,onClick:o?()=>o(H.id):void 0,children:H.name||H.id})]},H.id)),R.length===0&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No models match the current filters."})]})})]})},_d=gt.forwardRef(({className:e,href:t,children:n,...r},a)=>p.jsx("a",{ref:a,href:t,target:"_blank",rel:"noopener noreferrer",className:_t("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));_d.displayName="Lnk";const cpe=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:a,getAllAvailableModelDefsForProvider:i,isLoading:s,enableApiKeyManagement:o}=Bn(dn(L=>({apiKeys:L.dbApiKeys,addApiKey:L.addApiKey,providers:L.dbProviderConfigs,addProviderConfig:L.addProviderConfig,updateProviderConfig:L.updateProviderConfig,getAllAvailableModelDefsForProvider:L.getAllAvailableModelDefsForProvider,isLoading:L.isLoading,enableApiKeyManagement:L.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:u}=ls(dn(L=>({toggleChatControlPanel:L.toggleChatControlPanel,setInitialSettingsTabs:L.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=mn(dn(L=>({addConversation:L.addConversation,selectItem:L.selectItem}))),[m,y]=k.useState(!1),[v,b]=k.useState(!1),[x,w]=k.useState(!1),[S,E]=k.useState(!1),C=k.useMemo(()=>!o||e.length>0,[o,e]),T=k.useMemo(()=>n.length>0,[n]),j=k.useMemo(()=>n.some(L=>L.isEnabled&&L.enabledModels&&L.enabledModels.length>0),[n]),I=k.useMemo(()=>{const L=[...n].sort((J,Q)=>Q.createdAt.getTime()-J.createdAt.getTime());return L.length>0?L[0]:null},[n]),R=k.useMemo(()=>I?i(I.id):[],[I,i]),F=k.useMemo(()=>new Set((I==null?void 0:I.enabledModels)??[]),[I]),{initialProviderTypeForForm:B,initialProviderNameForForm:H,initialApiKeyIdForForm:D}=k.useMemo(()=>{var L;if(T)return{type:void 0,name:void 0,keyId:void 0};if(e.length>0){const Q=[...e].sort((ee,fe)=>fe.createdAt.getTime()-ee.createdAt.getTime()).find(ee=>Lh(ee.providerId));if(Q){const ee=Q.providerId,fe=((L=cu.find(ve=>ve.value===ee))==null?void 0:L.label)||ee;return{initialProviderTypeForForm:ee,initialProviderNameForForm:fe,initialApiKeyIdForForm:Q.id}}}return{initialProviderTypeForForm:void 0,initialProviderNameForForm:void 0,initialApiKeyIdForForm:void 0}},[e,T]),Z=k.useCallback(async(L,J,Q)=>{y(!0);try{await t(L,J,Q)}finally{y(!1)}},[t]),V=k.useCallback(async L=>{b(!0);try{const J={...L,apiKeyId:L.apiKeyId??(Lh(L.type)?D:null)};return await r(J)}finally{b(!1)}},[r,D]),ue=k.useCallback(async(L,J)=>{if(!I)return;E(!0);const Q=new Set(I.enabledModels??[]);J?Q.add(L):Q.delete(L);const ee=Array.from(Q);try{await a(I.id,{enabledModels:ee})}catch(fe){Ye.error("Failed to update model status."),console.error("Failed to save model toggle:",fe)}finally{E(!1)}},[I,a]),ae=k.useCallback(async()=>{w(!0);try{const L=await d({title:"New Chat"});await h(L,"conversation")}catch(L){Ye.error("Failed to start your first chat."),console.error("Failed to start first chat:",L),w(!1)}},[d,h]),ne=(L,J)=>{u(L,J),l("settingsModal",!0)},X=[...o?[{id:"api-key",title:"Add API Key (Optional)",description:p.jsxs("div",{children:[p.jsxs("p",{children:["To use providers like"," ",p.jsx(_d,{href:"https://platform.openai.com/api-keys",children:"OpenAI"}),","," ",p.jsx(_d,{href:"https://aistudio.google.com/app/apikey",children:"Google"}),","," ",p.jsx(_d,{href:"https://console.anthropic.com/settings/keys",children:"Anthropic (Claude)"}),", or ",p.jsx(_d,{href:"https://openrouter.ai/keys",children:"OpenRouter"})," ","or any OpenAi API compatible provider , add an API key. Keys are stored securely in your browser."]}),p.jsxs("p",{className:"py-2",children:['If you want truly local AI, "no internet required", you can setup ',p.jsx(_d,{href:"https://www.ollama.com/",children:"Ollama"})," or,"," ",p.jsx(_d,{href:"https://lmstudio.ai/",children:"LMStudio"})," (or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys."]})]}),isComplete:C,content:p.jsx(r$,{onSave:Z,onCancel:()=>{},isSaving:m,className:"border-none shadow-none p-0",initialProviderType:B})}]:[],{id:"add-provider",title:"Add AI Provider",description:"Connect to an AI provider like OpenAI, Ollama, or others to start chatting.",isComplete:T,content:p.jsx(u$,{apiKeys:e,onAddProvider:V,onCancel:()=>{},initialType:B,initialName:H,initialApiKeyId:D})},{id:"enable-models",title:"Enable Models",description:p.jsxs(p.Fragment,{children:["Enable models for the provider you just added (",p.jsx("strong",{children:(I==null?void 0:I.name)||"..."}),"). Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."]}),isComplete:j,content:I?p.jsx(lA,{providerId:I.id,allAvailableModels:R,enabledModelIds:F,onToggleModel:ue,isLoading:s||S,listHeightClass:"h-48"}):p.jsxs("p",{className:"text-sm text-muted-foreground italic",children:["Add a provider in Step ",o?"2":"1"," first."]})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:p.jsxs(Rt,{onClick:ae,disabled:x||!j,size:"sm",children:[p.jsx(lD,{className:"mr-2 h-4 w-4"}),x?"Starting...":"Start First Chat"]}),contentClassName:""}],ie=X.findIndex(L=>!L.isComplete);return s?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-2xl mx-auto w-full",children:[p.jsx(ur,{className:"h-10 w-3/4"}),p.jsx(ur,{className:"h-20 w-full"}),p.jsx(ur,{className:"h-10 w-3/4"}),p.jsx(ur,{className:"h-20 w-full"})]}):p.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx(Pv,{className:"h-12 w-12 text-primary mx-auto mb-3"}),p.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"LiteChat Setup"}),p.jsx("p",{className:"text-muted-foreground",children:"Follow these steps to configure LiteChat."})]}),p.jsx("div",{className:"space-y-4",children:X.map((L,J)=>{const Q=J===ie;return p.jsx(Whe,{stepNumber:J+1,title:L.title,description:L.description,isComplete:L.id!=="start-chat"&&L.isComplete,isActive:Q,openOnComplete:L.id==="enable-models",contentClassName:L.id==="add-provider"||L.id==="api-key"?"p-0 border-none shadow-none bg-transparent":L.id==="enable-models"?"p-0":L.contentClassName,children:L.content},L.id)})}),!s&&!T&&ie===-1&&p.jsxs("div",{className:"text-center text-muted-foreground mt-6",children:[p.jsx(Nh,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),p.jsx("p",{className:"text-sm",children:"Configuration issue detected. Please review provider settings."}),p.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>ne("providers"),className:"mt-2",children:"Go to Settings"})]})]})})},upe=["conversation.title_generation"],dpe=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:s})=>{const o=k.useRef(null),l=k.useRef(null),[u,d]=k.useState(!1),h=Hn(I=>I.streamingInteractionIds),m=fr(I=>I.chatMaxWidth),{isLoading:y}=Bn(dn(I=>({providers:I.dbProviderConfigs,apiKeys:I.dbApiKeys,isLoading:I.isLoading,enableApiKeyManagement:I.enableApiKeyManagement}))),{conversationCount:v,isConversationLoading:b}=mn(dn(I=>({conversationCount:I.conversations.length,isConversationLoading:I.isLoading}))),{projectCount:x,isProjectLoading:w}=ai(dn(I=>({projectCount:I.projects.length,isProjectLoading:I.isLoading}))),S=k.useMemo(()=>y||b||w?!1:v===0&&x===0,[v,x,y,b,w]),E=k.useMemo(()=>{const I=[],R=new Set;return[...t].sort((B,H)=>B.index-H.index).forEach(B=>{if(!R.has(B.id)&&!upe.includes(B.type)){const H=[B];R.add(B.id),I.push(H)}}),I},[t]),C=(I="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:I})};k.useEffect(()=>{if(l.current){const{scrollHeight:I,clientHeight:R,scrollTop:F}=l.current,B=I-R<=F+150,H=n==="streaming"&&h.length>0;(B||H)&&requestAnimationFrame(()=>{C(H?"smooth":"auto")})}},[E.length,n,h]),k.useEffect(()=>{const I=l.current;if(!I)return;const R=()=>{const{scrollHeight:F,clientHeight:B,scrollTop:H}=I,D=H<F-B-B*.5;d(D)};return I.addEventListener("scroll",R,{passive:!0}),R(),()=>{I.removeEventListener("scroll",R)}},[]),k.useEffect(()=>{o.current&&(l.current=o.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const T=()=>y||b||w?p.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[p.jsx(ur,{className:"h-24 w-full"}),p.jsx(ur,{className:"h-32 w-full"}),p.jsx(ur,{className:"h-20 w-full"})]}):S?p.jsx(cpe,{}):e?E.length===0&&n!=="streaming"?p.jsx(TO,{}):p.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[E.map(I=>{const R=I[0];return h.includes(R.id)?p.jsx(zC,{interactionId:R.id,onStop:s},`${R.id}-streaming`):p.jsx(sL,{interaction:R,onEdit:i,onRegenerate:a,onDelete:void 0},R.id)}),n==="streaming"&&h.filter(I=>!t.some(R=>R.id===I)).map(I=>p.jsx(zC,{interactionId:I,onStop:s},`${I}-streaming-new`))]}):p.jsx(TO,{}),j=m||"max-w-7xl";return p.jsxs("div",{className:_t("flex-grow relative",r),children:[p.jsx(Ru,{className:"h-full w-full",ref:o,children:p.jsx("div",{className:_t("chat-canvas-container mx-auto",j),children:T()})}),u&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>C(),"aria-label":"Scroll to bottom",children:p.jsx(eH,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"left",children:"Scroll to Bottom"})]})})]})},fh=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:p.jsx("div",{className:_t(r),children:a.map(i=>{const s=n==="icon"?i.iconRenderer:i.renderer;return p.jsx(gt.Fragment,{children:s?s():null},i.id)})})},fpe=Symbol("Let zodToJsonSchema decide on which parser to use"),BO={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},hpe=e=>typeof e=="string"?{...BO,name:e}:{...BO,...e},ppe=e=>{const t=hpe(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function C$(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function wr(e,t,n,r,a){e[t]=n,C$(e,t,r,a)}function mpe(){return{}}function gpe(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Vt.ZodAny&&(n.items=dr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&wr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&wr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(wr(n,"minItems",e.exactLength.value,e.exactLength.message,t),wr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function ype(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?wr(n,"minimum",r.value,r.message,t):wr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),wr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?wr(n,"maximum",r.value,r.message,t):wr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),wr(n,"maximum",r.value,r.message,t));break;case"multipleOf":wr(n,"multipleOf",r.value,r.message,t);break}return n}function bpe(){return{type:"boolean"}}function k$(e,t){return dr(e.type._def,t)}const vpe=(e,t)=>dr(e.innerType._def,t);function T$(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>T$(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return wpe(e,t)}}const wpe=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":wr(n,"minimum",r.value,r.message,t);break;case"max":wr(n,"maximum",r.value,r.message,t);break}return n};function xpe(e,t){return{...dr(e.innerType._def,t),default:e.defaultValue()}}function _pe(e,t){return t.effectStrategy==="input"?dr(e.schema._def,t):{}}function Spe(e){return{type:"string",enum:Array.from(e.values)}}const Epe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Cpe(e,t){const n=[dr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),dr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(Epe(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;s=l}else r=void 0;a.push(s)}}),a.length?{allOf:a,...r}:void 0}function kpe(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let wE;const Vs={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(wE===void 0&&(wE=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),wE),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function A$(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":wr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":wr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Gs(n,"email",r.message,t);break;case"format:idn-email":Gs(n,"idn-email",r.message,t);break;case"pattern:zod":vi(n,Vs.email,r.message,t);break}break;case"url":Gs(n,"uri",r.message,t);break;case"uuid":Gs(n,"uuid",r.message,t);break;case"regex":vi(n,r.regex,r.message,t);break;case"cuid":vi(n,Vs.cuid,r.message,t);break;case"cuid2":vi(n,Vs.cuid2,r.message,t);break;case"startsWith":vi(n,RegExp(`^${xE(r.value,t)}`),r.message,t);break;case"endsWith":vi(n,RegExp(`${xE(r.value,t)}$`),r.message,t);break;case"datetime":Gs(n,"date-time",r.message,t);break;case"date":Gs(n,"date",r.message,t);break;case"time":Gs(n,"time",r.message,t);break;case"duration":Gs(n,"duration",r.message,t);break;case"length":wr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),wr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{vi(n,RegExp(xE(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Gs(n,"ipv4",r.message,t),r.version!=="v4"&&Gs(n,"ipv6",r.message,t);break}case"base64url":vi(n,Vs.base64url,r.message,t);break;case"jwt":vi(n,Vs.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&vi(n,Vs.ipv4Cidr,r.message,t),r.version!=="v4"&&vi(n,Vs.ipv6Cidr,r.message,t);break}case"emoji":vi(n,Vs.emoji(),r.message,t);break;case"ulid":{vi(n,Vs.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Gs(n,"binary",r.message,t);break}case"contentEncoding:base64":{wr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{vi(n,Vs.base64,r.message,t);break}}break}case"nanoid":vi(n,Vs.nanoid,r.message,t)}return n}function xE(e,t){return t.patternStrategy==="escape"?Ape(e):e}const Tpe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Ape(e){let t="";for(let n=0;n<e.length;n++)Tpe.has(e[n])||(t+="\\"),t+=e[n];return t}function Gs(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):wr(e,"format",t,n,r)}function vi(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:zO(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):wr(e,"pattern",zO(t,r),n,r)}function zO(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,s=!1,o=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(s){if(r[u].match(/[a-z]/)){o?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),o=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],o=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=s?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:s&&r[u]==="]"?s=!1:!s&&r[u]==="["&&(s=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function N$(e,t){var r,a,i,s,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Vt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,d)=>({...u,[d]:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Vt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=A$(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===Vt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===Vt.ZodBranded&&e.keyType._def.type._def.typeName===Vt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=k$(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function Npe(e,t){if(t.mapStrategy==="record")return N$(e,t);const n=dr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Rpe(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Ipe(){return{not:{}}}function jpe(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Lw={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Ope(e,t){if(t.target==="openApi3")return UO(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Lw&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const s=Lw[i._def.typeName];return s&&!a.includes(s)?[...a,s]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...a,s];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,s,o)=>o.indexOf(i)===s);return{type:a.length>1?a:a[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return UO(e,t)}const UO=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>dr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Dpe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Lw[e.innerType._def.typeName],nullable:!0}:{type:[Lw[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=dr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=dr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Mpe(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",C$(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?wr(n,"minimum",r.value,r.message,t):wr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),wr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?wr(n,"maximum",r.value,r.message,t):wr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),wr(n,"maximum",r.value,r.message,t));break;case"multipleOf":wr(n,"multipleOf",r.value,r.message,t);break}return n}function Ppe(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let u=Lpe(l);u&&n&&(l instanceof Qs&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=dr(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,u||a.push(o))}a.length&&(r.required=a);const s=Fpe(e,t);return s!==void 0&&(r.additionalProperties=s),r}function Fpe(e,t){if(e.catchall._def.typeName!=="ZodNever")return dr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Lpe(e){try{return e.isOptional()}catch{return!0}}const $pe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return dr(e.innerType._def,t);const n=dr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Bpe=(e,t)=>{if(t.pipeStrategy==="input")return dr(e.in._def,t);if(t.pipeStrategy==="output")return dr(e.out._def,t);const n=dr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=dr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function zpe(e,t){return dr(e.type._def,t)}function Upe(e,t){const r={type:"array",uniqueItems:!0,items:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&wr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&wr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function qpe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>dr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:dr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>dr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Hpe(){return{not:{}}}function Vpe(){return{}}const Gpe=(e,t)=>dr(e.innerType._def,t),Kpe=(e,t,n)=>{switch(t){case Vt.ZodString:return A$(e,n);case Vt.ZodNumber:return Mpe(e,n);case Vt.ZodObject:return Ppe(e,n);case Vt.ZodBigInt:return ype(e,n);case Vt.ZodBoolean:return bpe();case Vt.ZodDate:return T$(e,n);case Vt.ZodUndefined:return Hpe();case Vt.ZodNull:return jpe(n);case Vt.ZodArray:return gpe(e,n);case Vt.ZodUnion:case Vt.ZodDiscriminatedUnion:return Ope(e,n);case Vt.ZodIntersection:return Cpe(e,n);case Vt.ZodTuple:return qpe(e,n);case Vt.ZodRecord:return N$(e,n);case Vt.ZodLiteral:return kpe(e,n);case Vt.ZodEnum:return Spe(e);case Vt.ZodNativeEnum:return Rpe(e);case Vt.ZodNullable:return Dpe(e,n);case Vt.ZodOptional:return $pe(e,n);case Vt.ZodMap:return Npe(e,n);case Vt.ZodSet:return Upe(e,n);case Vt.ZodLazy:return()=>e.getter()._def;case Vt.ZodPromise:return zpe(e,n);case Vt.ZodNaN:case Vt.ZodNever:return Ipe();case Vt.ZodEffects:return _pe(e,n);case Vt.ZodAny:return mpe();case Vt.ZodUnknown:return Vpe();case Vt.ZodDefault:return xpe(e,n);case Vt.ZodBranded:return k$(e,n);case Vt.ZodReadonly:return Gpe(e,n);case Vt.ZodCatch:return vpe(e,n);case Vt.ZodPipeline:return Bpe(e,n);case Vt.ZodFunction:case Vt.ZodVoid:case Vt.ZodSymbol:return;default:return(r=>{})()}};function dr(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==fpe)return l}if(r&&!n){const l=Wpe(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Kpe(e,e.typeName,t),s=typeof i=="function"?dr(i(),t):i;if(s&&Ype(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return a.jsonSchema=s,l}return a.jsonSchema=s,s}const Wpe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Zpe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Zpe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Ype=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Xpe=(e,t)=>{const n=ppe(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,d])=>({...l,[u]:dr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=dr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const o=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var Qg={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},e0={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},t0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},n0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},r0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},Jpe=[Qg,e0,t0,n0,r0];Qg.code+"",e0.code+"",t0.code+"",n0.code+"",r0.code+"";Qg.name+"",Qg.code,e0.name+"",e0.code,t0.name+"",t0.code,n0.name+"",n0.code,r0.name+"",r0.code;Jpe.map(e=>e.code);function Qpe(e){const t=["ROOT"];let n=-1,r=null;function a(l,u,d){switch(l){case'"':{n=u,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function s(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":a(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?o+="true".slice(d.length):"false".startsWith(d)?o+="false".slice(d.length):"null".startsWith(d)&&(o+="null".slice(d.length))}}return o}function eme(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Pd({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Pd({text:Qpe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var tme={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},nme={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},rme={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ame={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},ime={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},sme={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},ome={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},lme={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},cme={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},ume={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},dme={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},fme={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},hme={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},pme={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},mme={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},gme={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},d1=[tme,nme,rme,ame,ime,sme,ome,lme,cme,ume,dme,fme,hme,pme,mme,gme];Object.fromEntries(d1.map(e=>[e.code,e]));Object.fromEntries(d1.map(e=>[e.name,e.code]));d1.map(e=>e.code);function ni(e,t){const n=d1.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function yme(e,t){var n;const r=(n=void 0)!=null?n:!1;return bme(Xpe(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var WC=Symbol.for("vercel.ai.schema");function bme(e,{validate:t}={}){return{[WC]:!0,_type:void 0,[Uv]:!0,jsonSchema:e,validate:t}}function vme(e){return typeof e=="object"&&e!==null&&WC in e&&e[WC]===!0&&"jsonSchema"in e&&"validate"in e}function f1(e){return vme(e)?e:yme(e)}const qO=globalThis||void 0||self;var wme=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof qO=="object"?qO:{},Nd="1.9.0",HO=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function xme(e){var t=new Set([e]),n=new Set,r=e.match(HO);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(o){return n.add(o),!1}function s(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(HO);if(!u)return i(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?s(l):i(l):a.minor<=d.minor?s(l):i(l)}}var _me=xme(Nd),Sme=Nd.split(".")[0],a0=Symbol.for("opentelemetry.js.api."+Sme),i0=wme;function cA(e,t,n,r){var a;r===void 0&&(r=!1);var i=i0[a0]=(a=i0[a0])!==null&&a!==void 0?a:{version:Nd};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==Nd){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Nd);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Nd+"."),!0}function s0(e){var t,n,r=(t=i0[a0])===null||t===void 0?void 0:t.version;if(!(!r||!_me(r)))return(n=i0[a0])===null||n===void 0?void 0:n[e]}function uA(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Nd+".");var n=i0[a0];n&&delete n[e]}var Eme=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Cme=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},kme=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Gm("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Gm("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Gm("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Gm("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Gm("verbose",this._namespace,t)},e}();function Gm(e,t,n){var r=s0("diag");if(r)return n.unshift(t),r[e].apply(r,Cme([],Eme(n),!1))}var rs;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(rs||(rs={}));function Tme(e,t){e<rs.NONE?e=rs.NONE:e>rs.ALL&&(e=rs.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",rs.ERROR),warn:n("warn",rs.WARN),info:n("info",rs.INFO),debug:n("debug",rs.DEBUG),verbose:n("verbose",rs.VERBOSE)}}var Ame=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Nme=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Rme="diag",$w=function(){function e(){function t(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=s0("diag");if(o)return o[a].apply(o,Nme([],Ame(i),!1))}}var n=this,r=function(a,i){var s,o,l;if(i===void 0&&(i={logLevel:rs.INFO}),a===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var d=s0("diag"),h=Tme((o=i.logLevel)!==null&&o!==void 0?o:rs.INFO,a);if(d&&!i.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return cA("diag",h,n,!0)};n.setLogger=r,n.disable=function(){uA(Rme,n)},n.createComponentLogger=function(a){return new kme(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Ime(e){return Symbol.for(e)}var jme=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Ome=new jme,Dme=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Mme=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Pme=function(){function e(){}return e.prototype.active=function(){return Ome},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Mme([r],Dme(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Fme=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Lme=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},_E="context",$me=new Pme,R$=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return cA(_E,t,$w.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,Lme([t,n,r],Fme(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return s0(_E)||$me},e.prototype.disable=function(){this._getContextManager().disable(),uA(_E,$w.instance())},e}(),ZC;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ZC||(ZC={}));var I$="0000000000000000",j$="00000000000000000000000000000000",Bme={traceId:j$,spanId:I$,traceFlags:ZC.NONE},ig=function(){function e(t){t===void 0&&(t=Bme),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),dA=Ime("OpenTelemetry Context Key SPAN");function fA(e){return e.getValue(dA)||void 0}function zme(){return fA(R$.getInstance().active())}function hA(e,t){return e.setValue(dA,t)}function Ume(e){return e.deleteValue(dA)}function qme(e,t){return hA(e,new ig(t))}function O$(e){var t;return(t=fA(e))===null||t===void 0?void 0:t.spanContext()}var Hme=/^([0-9a-f]{32})$/i,Vme=/^[0-9a-f]{16}$/i;function Gme(e){return Hme.test(e)&&e!==j$}function Kme(e){return Vme.test(e)&&e!==I$}function D$(e){return Gme(e.traceId)&&Kme(e.spanId)}function Wme(e){return new ig(e)}var SE=R$.getInstance(),M$=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=SE.active());var a=!!(n!=null&&n.root);if(a)return new ig;var i=r&&O$(r);return Zme(i)&&D$(i)?new ig(i):new ig},e.prototype.startActiveSpan=function(t,n,r,a){var i,s,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(i=n,o=r):(i=n,s=r,o=a);var l=s??SE.active(),u=this.startSpan(t,i,l),d=hA(l,u);return SE.with(d,o,void 0,u)}},e}();function Zme(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Yme=new M$,Xme=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Yme},e}(),Jme=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new M$},e}(),Qme=new Jme,VO=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Xme(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Qme},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),Bw;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Bw||(Bw={}));var EE="trace",ege=function(){function e(){this._proxyTracerProvider=new VO,this.wrapSpanContext=Wme,this.isSpanContextValid=D$,this.deleteSpan=Ume,this.getSpan=fA,this.getActiveSpan=zme,this.getSpanContext=O$,this.setSpan=hA,this.setSpanContext=qme}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=cA(EE,this._proxyTracerProvider,$w.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return s0(EE)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){uA(EE,$w.instance()),this._proxyTracerProvider=new VO},e}(),tge=ege.getInstance(),nge=Object.defineProperty,pA=(e,t)=>{for(var n in t)nge(e,n,{get:t[n],enumerable:!0})};function zw(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function GO(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function KO({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await i.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var P$="AI_InvalidArgumentError",F$=`vercel.ai.error.${P$}`,rge=Symbol.for(F$),L$,Ws=class extends An{constructor({parameter:e,value:t,message:n}){super({name:P$,message:`Invalid argument for parameter ${e}: ${n}`}),this[L$]=!0,this.parameter=e,this.value=t}static isInstance(e){return An.hasMarker(e,F$)}};L$=rge;var $$="AI_RetryError",B$=`vercel.ai.error.${$$}`,age=Symbol.for(B$),z$,WO=class extends An{constructor({message:e,reason:t,errors:n}){super({name:$$,message:e}),this[z$]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return An.hasMarker(e,B$)}};z$=age;var ige=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>U$(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function U$(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Cv(i)||t===0)throw i;const s=TK(i),o=[...a,i],l=o.length;if(l>t)throw new WO({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:o});if(i instanceof Error&&_a.isInstance(i)&&i.isRetryable===!0&&l<=t)return await EK(n),U$(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?i:new WO({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:o})}}function sge({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Ws({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Ws({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:ige({maxRetries:t})}}function YC({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function oge({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,o])=>(i[`ai.settings.${s}`]=o,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[s,o])=>(i[`ai.telemetry.metadata.${s}`]=o,i),{}),...Object.entries(r??{}).reduce((i,[s,o])=>(o!==void 0&&(i[`ai.request.headers.${s}`]=o),i),{})}}var lge={startSpan(){return bv},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(bv);if(typeof n=="function")return n(bv);if(typeof r=="function")return r(bv)}},bv={spanContext(){return cge},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},cge={traceId:"",spanId:"",traceFlags:0};function uge({isEnabled:e=!1,tracer:t}={}){return e?t||tge.getTracer("ai"):lge}function XC({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return a&&i.end(),s}catch(s){try{s instanceof Error?(i.recordException({name:s.name,message:s.message,stack:s.stack}),i.setStatus({code:Bw.ERROR,message:s.message})):i.setStatus({code:Bw.ERROR})}finally{i.end()}throw s}})}function wh({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var dge=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=jh(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=XD(this.base64Data)),this.uint8ArrayData}},fge=class extends dge{constructor(e){super(e),this.type="file"}},hge=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function pge(e){for(const t of hge)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var q$="AI_NoObjectGeneratedError",H$=`vercel.ai.error.${q$}`,mge=Symbol.for(H$),V$,ZO=class extends An{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:q$,message:e,cause:t}),this[V$]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return An.hasMarker(e,H$)}};V$=mge;var G$="AI_DownloadError",K$=`vercel.ai.error.${G$}`,gge=Symbol.for(K$),W$,CE=class extends An{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:G$,message:a,cause:r}),this[W$]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return An.hasMarker(e,K$)}};W$=gge;async function yge({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new CE({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw CE.isInstance(a)?a:new CE({url:r,cause:a})}}var Z$="AI_InvalidDataContentError",Y$=`vercel.ai.error.${Z$}`,bge=Symbol.for(Y$),X$,YO=class extends An{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:Z$,message:n,cause:t}),this[X$]=!0,this.content=e}static isInstance(e){return An.hasMarker(e,Y$)}};X$=bge;var J$=U.union([U.string(),U.instanceof(Uint8Array),U.instanceof(ArrayBuffer),U.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function Q$(e){return typeof e=="string"?e:e instanceof ArrayBuffer?jh(new Uint8Array(e)):jh(e)}function Uw(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return XD(e)}catch(t){throw new YO({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new YO({content:e})}function vge(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var e9="AI_InvalidMessageRoleError",t9=`vercel.ai.error.${e9}`,wge=Symbol.for(t9),n9,xge=class extends An{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:e9,message:t}),this[n9]=!0,this.role=e}static isInstance(e){return An.hasMarker(e,t9)}};n9=wge;function _ge(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function Sge({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=yge}){const a=await Cge(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>Ege(i,a))]}function Ege(e,t){var n,r,a,i,s,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(u=>kge(u,t)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{var d;const h=(d=u.providerOptions)!=null?d:u.experimental_providerMetadata;switch(u.type){case"file":return{type:"file",data:u.data instanceof URL?u.data:Q$(u.data),filename:u.filename,mimeType:u.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:u.text,signature:u.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:u.data,providerMetadata:h};case"text":return{type:"text",text:u.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,args:u.args,providerMetadata:h}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const u=l;throw new xge({role:u})}}}async function Cge(e,t,n,r){const a=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(a.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:o})=>[s.toString(),o]))}function kge(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,o,l,u;const d=e.type;switch(d){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:m}=_ge(l.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${d}`);s=h,u=Uw(m)}else{const h=t[l.toString()];h?(u=h.data,s??(s=h.mimeType)):u=l}else u=Uw(l);switch(d){case"image":return u instanceof Uint8Array&&(s=(r=pge(u))!=null?r:s),{type:"image",image:u,mimeType:s,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?Q$(u):u,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function Tge({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new Ws({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Ws({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Ws({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Ws({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Ws({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Ws({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Ws({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new Ws({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:o}}function XO(e){var t,n,r;const a=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let o,l,u;try{[o,l]=i.url.split(","),u=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:Uw(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:vge(Uw(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return a}var r9="AI_MessageConversionError",a9=`vercel.ai.error.${r9}`,Age=Symbol.for(a9),i9,kE=class extends An{constructor({originalMessage:e,message:t}){super({name:r9,message:t}),this[i9]=!0,this.originalMessage=e}static isInstance(e){return An.hasMarker(e,a9)}};i9=Age;function Nge(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const o=e[s],l=s===e.length-1,{role:u,content:d,experimental_attachments:h}=o;switch(u){case"system":{i.push({role:"system",content:d});break}case"user":{if(o.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...XO(h)]:d});else{const m=o.parts.filter(y=>y.type==="text").map(y=>({type:"text",text:y.text}));i.push({role:"user",content:h?[...m,...XO(h)]:m})}break}case"assistant":{if(o.parts!=null){let v=function(){const S=[];for(const C of w)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const T of C.details)switch(T.type){case"text":S.push({type:"reasoning",text:T.text,signature:T.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:T.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const T=C;throw new Error(`Unsupported part: ${T}`)}}i.push({role:"assistant",content:S});const E=w.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new kE({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:T,toolName:j,result:I}=C,R=a[j];return(R==null?void 0:R.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:T,toolName:j,result:R.experimental_toToolResultContent(I),experimental_content:R.experimental_toToolResultContent(I)}:{type:"tool-result",toolCallId:T,toolName:j,result:I}})}),w=[],x=!1,b++},b=0,x=!1,w=[];for(const S of o.parts)switch(S.type){case"text":{x&&v(),w.push(S);break}case"file":case"reasoning":{w.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==b&&v(),w.push(S),x=!0;break}}v();break}const m=o.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:d});break}const y=m.reduce((v,b)=>{var x;return Math.max(v,(x=b.step)!=null?x:0)},0);for(let v=0;v<=y;v++){const b=m.filter(x=>{var w;return((w=x.step)!=null?w:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:x,toolName:w,args:S})=>({type:"tool-call",toolCallId:x,toolName:w,args:S}))]}),i.push({role:"tool",content:b.map(x=>{if(!("result"in x))throw new kE({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(x)});const{toolCallId:w,toolName:S,result:E}=x,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:w,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:w,toolName:S,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const m=u;throw new kE({originalMessage:o,message:`Unsupported role: ${m}`})}}}return i}function Rge(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Ige);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Ige(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var JC=U.lazy(()=>U.union([U.null(),U.string(),U.number(),U.boolean(),U.record(U.string(),JC),U.array(JC)])),na=U.record(U.string(),U.record(U.string(),JC)),jge=U.array(U.union([U.object({type:U.literal("text"),text:U.string()}),U.object({type:U.literal("image"),data:U.string(),mimeType:U.string().optional()})])),s9=U.object({type:U.literal("text"),text:U.string(),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),Oge=U.object({type:U.literal("image"),image:U.union([J$,U.instanceof(URL)]),mimeType:U.string().optional(),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),o9=U.object({type:U.literal("file"),data:U.union([J$,U.instanceof(URL)]),filename:U.string().optional(),mimeType:U.string(),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),Dge=U.object({type:U.literal("reasoning"),text:U.string(),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),Mge=U.object({type:U.literal("redacted-reasoning"),data:U.string(),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),Pge=U.object({type:U.literal("tool-call"),toolCallId:U.string(),toolName:U.string(),args:U.unknown(),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),Fge=U.object({type:U.literal("tool-result"),toolCallId:U.string(),toolName:U.string(),result:U.unknown(),content:jge.optional(),isError:U.boolean().optional(),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),Lge=U.object({role:U.literal("system"),content:U.string(),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),$ge=U.object({role:U.literal("user"),content:U.union([U.string(),U.array(U.union([s9,Oge,o9]))]),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),Bge=U.object({role:U.literal("assistant"),content:U.union([U.string(),U.array(U.union([s9,o9,Dge,Mge,Pge]))]),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),zge=U.object({role:U.literal("tool"),content:U.array(Fge),providerOptions:na.optional(),experimental_providerMetadata:na.optional()}),Uge=U.union([Lge,$ge,Bge,zge]);function qge({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Ll({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Ll({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Ll({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Ll({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Rge(e.messages);if(n==="other")throw new Ll({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?Nge(e.messages,{tools:t}):e.messages;if(r.length===0)throw new Ll({prompt:e,message:"messages must not be empty"});const a=ip({value:r,schema:U.array(Uge)});if(!a.success)throw new Ll({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Hge({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Vge(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Gge="JSON schema:",Kge="You MUST answer with a JSON object that matches the JSON schema above.",Wge="You MUST answer with JSON.";function Zge({prompt:e,schema:t,schemaPrefix:n=t!=null?Gge:void 0,schemaSuffix:r=t!=null?Kge:Wge}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function TE(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Yd({prefix:"aiobj",size:24});var Di=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function JO(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Yge(){let e=[],t=null,n=!1,r=JO();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=JO(),await r.promise,a();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Xge(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Yd({prefix:"aiobj",size:24});var l9="AI_NoOutputSpecifiedError",c9=`vercel.ai.error.${l9}`,Jge=Symbol.for(c9),u9,Qge=class extends An{constructor({message:e="No output specified."}={}){super({name:l9,message:e}),this[u9]=!0}static isInstance(e){return An.hasMarker(e,c9)}};u9=Jge;var d9="AI_ToolExecutionError",f9=`vercel.ai.error.${d9}`,e0e=Symbol.for(f9),h9,t0e=class extends An{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${y0(r)}`}){super({name:d9,message:a,cause:r}),this[h9]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return An.hasMarker(e,f9)}};h9=e0e;function n0e(e){return e!=null&&Object.keys(e).length>0}function r0e({tools:e,toolChoice:t,activeTools:n}){return n0e(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const s=i.type;switch(s){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:f1(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const o=s;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var a0e=/^([\s\S]*?)(\s+)(\S*)$/;function i0e(e){const t=e.match(a0e);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var p9="AI_InvalidToolArgumentsError",m9=`vercel.ai.error.${p9}`,s0e=Symbol.for(m9),g9,y9=class extends An{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${y0(n)}`}){super({name:p9,message:r,cause:n}),this[g9]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return An.hasMarker(e,m9)}};g9=s0e;var b9="AI_NoSuchToolError",v9=`vercel.ai.error.${b9}`,o0e=Symbol.for(v9),w9,QC=class extends An{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:b9,message:n}),this[w9]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return An.hasMarker(e,v9)}};w9=o0e;var x9="AI_ToolCallRepairError",_9=`vercel.ai.error.${x9}`,l0e=Symbol.for(_9),S9,c0e=class extends An{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${y0(e)}`}){super({name:x9,message:n,cause:e}),this[S9]=!0,this.originalError=t}static isInstance(e){return An.hasMarker(e,_9)}};S9=l0e;async function u0e({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new QC({toolName:e.toolName});try{return await QO({toolCall:e,tools:t})}catch(i){if(n==null||!(QC.isInstance(i)||y9.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>f1(t[o].parameters).jsonSchema,system:r,messages:a,error:i})}catch(o){throw new c0e({cause:o,originalError:i})}if(s==null)throw i;return await QO({toolCall:s,tools:t})}}async function QO({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new QC({toolName:e.toolName,availableTools:Object.keys(t)});const a=f1(r.parameters),i=e.args.trim()===""?ip({value:{},schema:a}):Pd({text:e.args,schema:a});if(i.success===!1)throw new y9({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function d0e(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function e6({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:s,generateMessageId:o}){const l=[];return l.push({role:"assistant",content:[...n.map(u=>u.type==="text"?{...u,type:"reasoning"}:{...u,type:"redacted-reasoning"}),...t.map(u=>({type:"file",data:u.base64,mimeType:u.mimeType})),{type:"text",text:e},...a],id:s}),i.length>0&&l.push({role:"tool",id:o(),content:i.map(u=>{const d=r[u.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:d.experimental_toToolResultContent(u.result),experimental_content:d.experimental_toToolResultContent(u.result)}:{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result}})}),l}Yd({prefix:"aitxt",size:24});Yd({prefix:"msg",size:24});var f0e={};pA(f0e,{object:()=>g0e,text:()=>m0e});var E9="AI_InvalidStreamPartError",C9=`vercel.ai.error.${E9}`,h0e=Symbol.for(C9),k9,p0e=class extends An{constructor({chunk:e,message:t}){super({name:E9,message:t}),this[k9]=!0,this.chunk=e}static isInstance(e){return An.hasMarker(e,C9)}};k9=h0e;var m0e=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),g0e=({schema:e})=>{const t=f1(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Zge({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=eme(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=Pd({text:n});if(!a.success)throw new ZO({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=ip({value:a.value,schema:t});if(!i.success)throw new ZO({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function T9(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function mA(e,t){const n=e.getReader(),r=t.getReader();let a,i,s=!1,o=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function u(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(s){await u(d);return}if(o){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(y=>({result:y,reader:n})),i.then(y=>({result:y,reader:r}))]);h.done||d.enqueue(h.value),m===n?(a=void 0,h.done&&(await u(d),s=!0)):(i=void 0,h.done&&(o=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function y0e({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:s,abortSignal:o,repairToolCall:l}){let u=null;const d=new ReadableStream({start(w){u=w}}),h={},m=new Set;let y=!1,v;function b(){y&&m.size===0&&(v!=null&&u.enqueue(v),u.close())}const x=new TransformStream({async transform(w,S){const E=w.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(w);break}case"file":{S.enqueue(new fge({data:w.data,mimeType:w.mimeType}));break}case"tool-call-delta":{n&&(h[w.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:w.toolCallId,toolName:w.toolName}),h[w.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:w.toolCallId,toolName:w.toolName,argsTextDelta:w.argsTextDelta}));break}case"tool-call":{try{const C=await u0e({toolCall:w,tools:e,repairToolCall:l,system:i,messages:s});S.enqueue(C);const T=e[C.toolName];if(T.execute!=null){const j=zo();m.add(j),XC({name:"ai.toolCall",attributes:wh({telemetry:a,attributes:{...YC({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async I=>T.execute(C.args,{toolCallId:C.toolCallId,messages:s,abortSignal:o}).then(R=>{u.enqueue({...C,type:"tool-result",result:R}),m.delete(j),b();try{I.setAttributes(wh({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(R)}}}))}catch{}},R=>{u.enqueue({type:"error",error:new t0e({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:R})}),m.delete(j),b()})})}}catch(C){u.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:w.finishReason,logprobs:w.logprobs,usage:Hge(w.usage),experimental_providerMetadata:w.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){y=!0,b()}});return new ReadableStream({async start(w){return Promise.all([t.pipeThrough(x).pipeTo(new WritableStream({write(S){w.enqueue(S)},close(){}})),d.pipeTo(new WritableStream({write(S){w.enqueue(S)},close(){w.close()}}))])}})}var b0e=Yd({prefix:"aitxt",size:24}),v0e=Yd({prefix:"msg",size:24});function w0e({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:s,abortSignal:o,headers:l,maxSteps:u=1,experimental_generateMessageId:d=v0e,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:y,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:x=!1,toolCallStreaming:w=x,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:T,onError:j,onFinish:I,onStepFinish:R,_internal:{now:F=Xge,generateId:B=b0e,currentDate:H=()=>new Date}={},...D}){return new _0e({model:e,telemetry:y,headers:l,settings:D,maxRetries:s,abortSignal:o,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:w,transforms:T9(C),activeTools:S,repairToolCall:E,maxSteps:u,output:h,continueSteps:m,providerOptions:b,onChunk:T,onError:j,onFinish:I,onStepFinish:R,now:F,currentDate:H,generateId:B,generateMessageId:d})}function x0e(e){if(!e)return new TransformStream({transform(i,s){s.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:s=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:s}),n=""}return new TransformStream({transform(i,s){if(i.type==="step-finish"&&a({controller:s}),i.type!=="text-delta"){s.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(a({controller:s,partialOutput:o.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var _0e=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:s,prompt:o,messages:l,tools:u,toolChoice:d,toolCallStreaming:h,transforms:m,activeTools:y,repairToolCall:v,maxSteps:b,output:x,continueSteps:w,providerOptions:S,now:E,currentDate:C,generateId:T,generateMessageId:j,onChunk:I,onError:R,onFinish:F,onStepFinish:B}){this.warningsPromise=new Di,this.usagePromise=new Di,this.finishReasonPromise=new Di,this.providerMetadataPromise=new Di,this.textPromise=new Di,this.reasoningPromise=new Di,this.reasoningDetailsPromise=new Di,this.sourcesPromise=new Di,this.filesPromise=new Di,this.toolCallsPromise=new Di,this.toolResultsPromise=new Di,this.requestPromise=new Di,this.responsePromise=new Di,this.stepsPromise=new Di;var H;if(b<1)throw new Ws({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=x;let D="",Z="",V="",ue=[],ae=[],ne,X=[];const ie=[],L={id:T(),timestamp:C(),modelId:e.modelId,messages:[]};let J=[],Q=[],ee,fe,ve="initial";const Oe=[];let Ae;const Ne=new TransformStream({async transform(de,se){se.enqueue(de);const{part:te}=de;if((te.type==="text-delta"||te.type==="reasoning"||te.type==="source"||te.type==="tool-call"||te.type==="tool-result"||te.type==="tool-call-streaming-start"||te.type==="tool-call-delta")&&await(I==null?void 0:I({chunk:te})),te.type==="error"&&await(R==null?void 0:R({error:te.error})),te.type==="text-delta"&&(D+=te.textDelta,Z+=te.textDelta,V+=te.textDelta),te.type==="reasoning"&&(ne==null?(ne={type:"text",text:te.textDelta},ue.push(ne)):ne.text+=te.textDelta),te.type==="reasoning-signature"){if(ne==null)throw new An({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});ne.signature=te.signature,ne=void 0}if(te.type==="redacted-reasoning"&&ue.push({type:"redacted",data:te.data}),te.type==="file"&&ae.push(te),te.type==="source"&&(ie.push(te.source),X.push(te.source)),te.type==="tool-call"&&J.push(te),te.type==="tool-result"&&Q.push(te),te.type==="step-finish"){const xe=e6({text:Z,files:ae,reasoning:ue,tools:u??{},toolCalls:J,toolResults:Q,messageId:te.messageId,generateMessageId:j}),Fe=Oe.length;let Ee="done";Fe+1<b&&(w&&te.finishReason==="length"&&J.length===0?Ee="continue":J.length>0&&Q.length===J.length&&(Ee="tool-result"));const Ge={stepType:ve,text:D,reasoning:d0e(ue),reasoningDetails:ue,files:ae,sources:X,toolCalls:J,toolResults:Q,finishReason:te.finishReason,usage:te.usage,warnings:te.warnings,logprobs:te.logprobs,request:te.request,response:{...te.response,messages:[...L.messages,...xe]},providerMetadata:te.experimental_providerMetadata,experimental_providerMetadata:te.experimental_providerMetadata,isContinued:te.isContinued};await(B==null?void 0:B(Ge)),Oe.push(Ge),J=[],Q=[],D="",X=[],ue=[],ae=[],ne=void 0,Ee!=="done"&&(ve=Ee),Ee!=="continue"&&(L.messages.push(...xe),Z="")}te.type==="finish"&&(L.id=te.response.id,L.timestamp=te.response.timestamp,L.modelId=te.response.modelId,L.headers=te.response.headers,fe=te.usage,ee=te.finishReason)},async flush(de){var se;try{if(Oe.length===0)return;const te=Oe[Oe.length-1];Te.warningsPromise.resolve(te.warnings),Te.requestPromise.resolve(te.request),Te.responsePromise.resolve(te.response),Te.toolCallsPromise.resolve(te.toolCalls),Te.toolResultsPromise.resolve(te.toolResults),Te.providerMetadataPromise.resolve(te.experimental_providerMetadata),Te.reasoningPromise.resolve(te.reasoning),Te.reasoningDetailsPromise.resolve(te.reasoningDetails);const xe=ee??"unknown",Fe=fe??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Te.finishReasonPromise.resolve(xe),Te.usagePromise.resolve(Fe),Te.textPromise.resolve(V),Te.sourcesPromise.resolve(ie),Te.filesPromise.resolve(te.files),Te.stepsPromise.resolve(Oe),await(F==null?void 0:F({finishReason:xe,logprobs:void 0,usage:Fe,text:V,reasoning:te.reasoning,reasoningDetails:te.reasoningDetails,files:te.files,sources:te.sources,toolCalls:te.toolCalls,toolResults:te.toolResults,request:(se=te.request)!=null?se:{},response:te.response,warnings:te.warnings,providerMetadata:te.providerMetadata,experimental_providerMetadata:te.experimental_providerMetadata,steps:Oe})),Ae.setAttributes(wh({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>V},"ai.response.toolCalls":{output:()=>{var Ee;return(Ee=te.toolCalls)!=null&&Ee.length?JSON.stringify(te.toolCalls):void 0}},"ai.usage.promptTokens":Fe.promptTokens,"ai.usage.completionTokens":Fe.completionTokens}}))}catch(te){de.error(te)}finally{Ae.end()}}}),Ce=Yge();this.addStream=Ce.addStream,this.closeStream=Ce.close;let Pe=Ce.stream;for(const de of m)Pe=Pe.pipeThrough(de({tools:u,stopStream(){Ce.terminate()}}));this.baseStream=Pe.pipeThrough(x0e(x)).pipeThrough(Ne);const{maxRetries:Qe,retry:Le}=sge({maxRetries:a}),Ie=uge(t),z=oge({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Qe}}),Se=qge({prompt:{system:(H=x==null?void 0:x.injectIntoSystemPrompt({system:s,model:e}))!=null?H:s,prompt:o,messages:l},tools:u}),Te=this;XC({name:"ai.streamText",attributes:wh({telemetry:t,attributes:{...YC({operationId:"ai.streamText",telemetry:t}),...z,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:Ie,endWhenDone:!1,fn:async de=>{Ae=de;async function se({currentStep:te,responseMessages:xe,usage:Fe,stepType:Ee,previousStepText:Ge,hasLeadingWhitespace:Nt,messageId:it}){var St;const Ft=xe.length===0?Se.type:"messages",Dt=[...Se.messages,...xe],Zt=await Sge({prompt:{type:Ft,system:Se.system,messages:Dt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(St=e.supportsUrl)==null?void 0:St.bind(e)}),ye={type:"regular",...r0e({tools:u,toolChoice:d,activeTools:y})},{result:{stream:O,warnings:K,rawResponse:he,request:je},doStreamSpan:be,startTimestampMs:ke}=await Le(()=>XC({name:"ai.streamText.doStream",attributes:wh({telemetry:t,attributes:{...YC({operationId:"ai.streamText.doStream",telemetry:t}),...z,"ai.prompt.format":{input:()=>Ft},"ai.prompt.messages":{input:()=>JSON.stringify(Zt)},"ai.prompt.tools":{input:()=>{var It;return(It=ye.tools)==null?void 0:It.map(Lt=>JSON.stringify(Lt))}},"ai.prompt.toolChoice":{input:()=>ye.toolChoice!=null?JSON.stringify(ye.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ie,endWhenDone:!1,fn:async It=>({startTimestampMs:E(),doStreamSpan:It,result:await e.doStream({mode:ye,...Tge(r),inputFormat:Ft,responseFormat:x==null?void 0:x.responseFormat({model:e}),prompt:Zt,providerMetadata:S,abortSignal:i,headers:n})})})),le=y0e({tools:u,generatorStream:O,toolCallStreaming:h,tracer:Ie,telemetry:t,system:s,messages:Dt,repairToolCall:v,abortSignal:i}),ft=je??{},vt=[],P=[],Be=[],nt=[];let ge,De="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Ot,me=!0,G="",q=Ee==="continue"?Ge:"",W,pe={id:T(),timestamp:C(),modelId:e.modelId},Re="",qe=!1,pt=!0,Wt=!1;async function ut({controller:It,chunk:Lt}){It.enqueue(Lt),G+=Lt.textDelta,q+=Lt.textDelta,qe=!0,Wt=Lt.textDelta.trimEnd()!==Lt.textDelta}Te.addStream(le.pipeThrough(new TransformStream({async transform(It,Lt){var en,Nn,Kn;if(me){const _r=E()-ke;me=!1,be.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":_r}),be.setAttributes({"ai.response.msToFirstChunk":_r}),Lt.enqueue({type:"step-start",messageId:it,request:ft,warnings:K??[]})}if(It.type==="text-delta"&&It.textDelta.length===0)return;const xr=It.type;switch(xr){case"text-delta":{if(w){const _r=pt&&Nt?It.textDelta.trimStart():It.textDelta;if(_r.length===0)break;pt=!1,Re+=_r;const Ln=i0e(Re);Ln!=null&&(Re=Ln.suffix,await ut({controller:Lt,chunk:{type:"text-delta",textDelta:Ln.prefix+Ln.whitespace}}))}else await ut({controller:Lt,chunk:It});break}case"reasoning":{Lt.enqueue(It),ge==null?(ge={type:"text",text:It.textDelta},Be.push(ge)):ge.text+=It.textDelta;break}case"reasoning-signature":{if(Lt.enqueue(It),ge==null)throw new p0e({chunk:It,message:"reasoning-signature without reasoning"});ge.signature=It.signature,ge=void 0;break}case"redacted-reasoning":{Lt.enqueue(It),Be.push({type:"redacted",data:It.data});break}case"tool-call":{Lt.enqueue(It),vt.push(It);break}case"tool-result":{Lt.enqueue(It),P.push(It);break}case"response-metadata":{pe={id:(en=It.id)!=null?en:pe.id,timestamp:(Nn=It.timestamp)!=null?Nn:pe.timestamp,modelId:(Kn=It.modelId)!=null?Kn:pe.modelId};break}case"finish":{Ke=It.usage,De=It.finishReason,Ot=It.experimental_providerMetadata,W=It.logprobs;const _r=E()-ke;be.addEvent("ai.stream.finish"),be.setAttributes({"ai.response.msToFinish":_r,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/_r});break}case"file":{nt.push(It),Lt.enqueue(It);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Lt.enqueue(It);break}case"error":{Lt.enqueue(It),De="error";break}default:{const _r=xr;throw new Error(`Unknown chunk type: ${_r}`)}}},async flush(It){const Lt=vt.length>0?JSON.stringify(vt):void 0;let en="done";te+1<b&&(w&&De==="length"&&vt.length===0?en="continue":vt.length>0&&P.length===vt.length&&(en="tool-result")),w&&Re.length>0&&(en!=="continue"||Ee==="continue"&&!qe)&&(await ut({controller:It,chunk:{type:"text-delta",textDelta:Re}}),Re="");try{be.setAttributes(wh({telemetry:t,attributes:{"ai.response.finishReason":De,"ai.response.text":{output:()=>G},"ai.response.toolCalls":{output:()=>Lt},"ai.response.id":pe.id,"ai.response.model":pe.modelId,"ai.response.timestamp":pe.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[De],"gen_ai.response.id":pe.id,"gen_ai.response.model":pe.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{be.end()}It.enqueue({type:"step-finish",finishReason:De,usage:Ke,providerMetadata:Ot,experimental_providerMetadata:Ot,logprobs:W,request:ft,response:{...pe,headers:he==null?void 0:he.headers},warnings:K,isContinued:en==="continue",messageId:it});const Nn=Vge(Fe,Ke);if(en==="done")It.enqueue({type:"finish",finishReason:De,usage:Nn,providerMetadata:Ot,experimental_providerMetadata:Ot,logprobs:W,response:{...pe,headers:he==null?void 0:he.headers}}),Te.closeStream();else{if(Ee==="continue"){const Kn=xe[xe.length-1];typeof Kn.content=="string"?Kn.content+=G:Kn.content.push({text:G,type:"text"})}else xe.push(...e6({text:G,files:nt,reasoning:Be,tools:u??{},toolCalls:vt,toolResults:P,messageId:it,generateMessageId:j}));await se({currentStep:te+1,responseMessages:xe,usage:Nn,stepType:en,previousStepText:q,hasLeadingWhitespace:Wt,messageId:en==="continue"?it:j()})}}})))}await se({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:j()})}}).catch(de=>{Te.addStream(new ReadableStream({start(se){se.enqueue({type:"error",error:de}),se.close()}})),Te.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return TE(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return TE(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new Qge;return TE(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,s)=>{const o=i.type;switch(o){case"text-delta":{s.enqueue(ni("text",i.textDelta));break}case"reasoning":{n&&s.enqueue(ni("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&s.enqueue(ni("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&s.enqueue(ni("reasoning_signature",{signature:i.signature}));break}case"file":{s.enqueue(ni("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&s.enqueue(ni("source",i.source));break}case"tool-call-streaming-start":{s.enqueue(ni("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{s.enqueue(ni("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{s.enqueue(ni("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{s.enqueue(ni("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{s.enqueue(ni("error",e(i.error)));break}case"step-start":{s.enqueue(ni("start_step",{messageId:i.messageId}));break}case"step-finish":{s.enqueue(ni("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&s.enqueue(ni("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u}={}){KO({response:e,status:t,statusText:n,headers:GO(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){KO({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:GO(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?mA(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:zw(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:zw(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};function S0e(e,t){if(t.length===0)return null;const n=e.indexOf(t);if(n!==-1)return n;for(let r=e.length-1;r>=0;r--){const a=e.substring(r);if(t.startsWith(a))return r}return null}function E0e({tagName:e,separator:t=`
`,startWithReasoning:n=!1}){const r=`<${e}>`,a=`</${e}>`;return{middlewareVersion:"v1",wrapGenerate:async({doGenerate:i})=>{const{text:s,...o}=await i();if(s==null)return{text:s,...o};const l=n?r+s:s,u=new RegExp(`${r}(.*?)${a}`,"gs"),d=Array.from(l.matchAll(u));if(!d.length)return{text:l,...o};const h=d.map(y=>y[1]).join(t);let m=l;for(let y=d.length-1;y>=0;y--){const v=d[y],b=m.slice(0,v.index),x=m.slice(v.index+v[0].length);m=b+(b.length>0&&x.length>0?t:"")+x}return{...o,text:m,reasoning:h}},wrapStream:async({doStream:i})=>{const{stream:s,...o}=await i();let l=!0,u=!0,d=!1,h=n,m="";return{stream:s.pipeThrough(new TransformStream({transform:(y,v)=>{if(y.type!=="text-delta"){v.enqueue(y);return}m+=y.textDelta;function b(x){if(x.length>0){const w=d&&(h?!l:!u)?t:"";v.enqueue({type:h?"reasoning":"text-delta",textDelta:w+x}),d=!1,h?l=!1:u=!1}}do{const x=h?a:r,w=S0e(m,x);if(w==null){b(m),m="";break}if(b(m.slice(0,w)),w+x.length<=m.length)m=m.slice(w+x.length),h=!h,d=!0;else{m=m.slice(w);break}}while(!0)}})),...o}}}}var C0e=({model:e,middleware:t,modelId:n,providerId:r})=>T9(t).reverse().reduce((a,i)=>k0e({model:a,middleware:i,modelId:n,providerId:r}),e),k0e=({model:e,middleware:{transformParams:t,wrapGenerate:n,wrapStream:r},modelId:a,providerId:i})=>{var s;async function o({params:l,type:u}){return t?await t({params:l,type:u}):l}return{specificationVersion:"v1",provider:i??e.provider,modelId:a??e.modelId,defaultObjectGenerationMode:e.defaultObjectGenerationMode,supportsImageUrls:e.supportsImageUrls,supportsUrl:(s=e.supportsUrl)==null?void 0:s.bind(e),supportsStructuredOutputs:e.supportsStructuredOutputs,async doGenerate(l){const u=await o({params:l,type:"generate"}),d=async()=>e.doGenerate(u);return n?n({doGenerate:d,doStream:async()=>e.doStream(u),params:u,model:e}):d()},async doStream(l){const u=await o({params:l,type:"stream"}),d=async()=>e.doGenerate(u),h=async()=>e.doStream(u);return r?r({doGenerate:d,doStream:h,params:u,model:e}):h()}}},T0e=U.object({name:U.string(),version:U.string()}).passthrough(),gA=U.object({_meta:U.optional(U.object({}).passthrough())}).passthrough(),o0=gA,A0e=U.object({method:U.string(),params:U.optional(gA)}),N0e=U.object({experimental:U.optional(U.object({}).passthrough()),logging:U.optional(U.object({}).passthrough()),prompts:U.optional(U.object({listChanged:U.optional(U.boolean())}).passthrough()),resources:U.optional(U.object({subscribe:U.optional(U.boolean()),listChanged:U.optional(U.boolean())}).passthrough()),tools:U.optional(U.object({listChanged:U.optional(U.boolean())}).passthrough())}).passthrough();o0.extend({protocolVersion:U.string(),capabilities:N0e,serverInfo:T0e,instructions:U.optional(U.string())});var R0e=o0.extend({nextCursor:U.optional(U.string())}),I0e=U.object({name:U.string(),description:U.optional(U.string()),inputSchema:U.object({type:U.literal("object"),properties:U.optional(U.object({}).passthrough())}).passthrough()}).passthrough();R0e.extend({tools:U.array(I0e)});var j0e=U.object({type:U.literal("text"),text:U.string()}).passthrough(),O0e=U.object({type:U.literal("image"),data:U.string().base64(),mimeType:U.string()}).passthrough(),A9=U.object({uri:U.string(),mimeType:U.optional(U.string())}).passthrough(),D0e=A9.extend({text:U.string()}),M0e=A9.extend({blob:U.string().base64()}),P0e=U.object({type:U.literal("resource"),resource:U.union([D0e,M0e])}).passthrough();o0.extend({content:U.array(U.union([j0e,O0e,P0e])),isError:U.boolean().default(!1).optional()}).or(o0.extend({toolResult:U.unknown()}));var h1="2.0",F0e=U.object({jsonrpc:U.literal(h1),id:U.union([U.string(),U.number().int()])}).merge(A0e).strict(),L0e=U.object({jsonrpc:U.literal(h1),id:U.union([U.string(),U.number().int()]),result:o0}).strict(),$0e=U.object({jsonrpc:U.literal(h1),id:U.union([U.string(),U.number().int()]),error:U.object({code:U.number().int(),message:U.string(),data:U.optional(U.unknown())})}).strict(),B0e=U.object({jsonrpc:U.literal(h1)}).merge(U.object({method:U.string(),params:U.optional(gA)})).strict();U.union([F0e,B0e,L0e,$0e]);var z0e={};pA(z0e,{mergeIntoDataStream:()=>H0e,toDataStream:()=>U0e,toDataStreamResponse:()=>q0e});function N9(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function yA(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&t6((a=n.data)==null?void 0:a.chunk,r);return}t6(n,r)}})).pipeThrough(N9(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(ni("text",n))}}))}function U0e(e,t){return yA(e,t).pipeThrough(new TextEncoderStream)}function q0e(e,t){var n;const r=yA(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,s=a?mA(a.stream,r):r;return new Response(s,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:zw(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function H0e(e,t){t.dataStream.merge(yA(e,t.callbacks))}function t6(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var V0e={};pA(V0e,{mergeIntoDataStream:()=>W0e,toDataStream:()=>G0e,toDataStreamResponse:()=>K0e});function bA(e,t){const n=Z0e();return SK(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(N9(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(ni("text",r))}}))}function G0e(e,t){return bA(e,t).pipeThrough(new TextEncoderStream)}function K0e(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,s=bA(e,i).pipeThrough(new TextEncoderStream),o=a?mA(a.stream,s):s;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:zw(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function W0e(e,t){t.dataStream.merge(bA(e,t.callbacks))}function Z0e(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class Y0e{static async executeInteraction(t,n,r){let a,i=!1;try{a=await w0e(n);for await(const s of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(s.type){case"text-delta":r.onChunk(s.textDelta);break;case"tool-call":r.onToolCall(s);break;case"tool-result":r.onToolResult(s);break;case"finish":i=!0,r.onFinish({finishReason:s.finishReason,usage:s.usage,providerMetadata:s.providerMetadata});break;case"error":r.onError(new Error(`AI Stream Error Part: ${s.error instanceof Error?s.error.message:s.error}`));return;default:break}}!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(s){console.error(`[AIService] Error during streamText call for ${t}:`,s),s instanceof Error&&s.name==="AbortError"||r.onError(s instanceof Error?s:new Error(String(s)))}finally{console.log(`[AIService] Stream processing loop finished for ${t}.`)}}}const Dv={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,async startInteraction(e,t,n,r="message.user_assistant"){var H,D,Z,V,ue,ae,ne,X,ie;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const a=await yC(zv.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(a===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const i=a&&typeof a=="object"?a.prompt:e,s=Si(),o=new AbortController;this._activeControllers.set(s,o),this._streamingToolData.set(s,{calls:[],results:[]}),this._firstChunkTimestamps.delete(s),this._interactionStartTimes.delete(s);const l=Hn.getState(),d=l.interactions.filter(L=>L.conversationId===t),h=r==="conversation.title_generation"?-1:d.reduce((L,J)=>Math.max(L,J.index),-1)+1,m=r==="conversation.title_generation"?null:d.length>0?d[d.length-1].id:null,y=performance.now();this._interactionStartTimes.set(s,y);const v={id:s,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...i.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:h,parentId:m};r!=="conversation.title_generation"?(l._addInteractionToState(v),l._addStreamingId(s)):(l._addInteractionToState(v),l._addStreamingId(s),console.log(`[InteractionService] Added title generation interaction ${s} to state.`)),xt.saveInteraction({...v}).catch(L=>{console.error(`[InteractionService] Failed initial persistence for ${s}`,L)}),kt.emit(Et.INTERACTION_STARTED,{interactionId:s,conversationId:t,type:v.type});const b=(H=i.metadata)==null?void 0:H.modelId;if(!b)return this._finalizeInteraction(s,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:x,modelId:w}=lc(b);if(!x||!w)return this._finalizeInteraction(s,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const S=Bn.getState().dbProviderConfigs.find(L=>L.id===x);if(!S)return this._finalizeInteraction(s,"ERROR",new Error(`Provider configuration not found for ID: ${x}`),r),null;const E=Bn.getState().getApiKeyForProvider(x),C=F8(S,w,E);if(!C)return this._finalizeInteraction(s,"ERROR",new Error(`Failed to instantiate model instance for ${b} from provider ${S.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const T=r!=="conversation.title_generation"?(((D=i.metadata)==null?void 0:D.enabledTools)??[]).reduce((L,J)=>{const ee=Rr.getState().getRegisteredTools()[J];if(ee!=null&&ee.implementation){const fe={...ee.definition};fe.execute=async ve=>{const Oe=Hn.getState().currentConversationId,Ae=Oe?mn.getState().getConversationById(Oe):null,Ne=(Ae==null?void 0:Ae.projectId)??"orphan";let Ce;try{Ce=await co.getState().initializeVFS(Ne,{force:!0})}catch(Pe){return{_isError:!0,error:`Filesystem error: ${Pe.message}`}}try{const Pe=mJ(),Qe=ee.definition.parameters.parse(ve),Le=ee.implementation,Ie={...Pe,fsInstance:Ce};return await Le(Qe,Ie)}catch(Pe){const Qe=Pe instanceof Error?Pe.message:String(Pe);return Pe instanceof U.ZodError?{_isError:!0,error:`Invalid arguments: ${Pe.errors.map(Le=>`${Le.path.join(".")} (${Le.message})`).join(", ")}`}:{_isError:!0,error:Qe}}},L[J]=fe}return L},{}):void 0,j=((Z=i.parameters)==null?void 0:Z.maxSteps)??fr.getState().toolMaxSteps,I=E0e({tagName:"reasoning"}),F={model:C0e({model:C,middleware:I}),messages:i.messages,abortSignal:o.signal,system:i.system,temperature:(V=i.parameters)==null?void 0:V.temperature,maxTokens:(ue=i.parameters)==null?void 0:ue.max_tokens,topP:(ae=i.parameters)==null?void 0:ae.top_p,topK:(ne=i.parameters)==null?void 0:ne.top_k,presencePenalty:(X=i.parameters)==null?void 0:X.presence_penalty,frequencyPenalty:(ie=i.parameters)==null?void 0:ie.frequency_penalty,maxSteps:j,...T&&Object.keys(T).length>0&&{tools:T},toolChoice:i.toolChoice??(T&&Object.keys(T).length>0?"auto":"none")},B={onChunk:L=>this._handleChunk(s,L),onToolCall:L=>this._handleToolCall(s,L),onToolResult:L=>this._handleToolResult(s,L),onFinish:L=>this._handleFinish(s,L,r),onError:L=>this._handleError(s,L,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${s}`),Y0e.executeInteraction(s,F,B).catch(L=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${s}:`,L),this._handleError(s,L instanceof Error?L:new Error("Failed to start AI execution"),r)}),s},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),Ye.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=Hn.getState(),r=n.interactions.find(a=>a.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await yC(zv.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;Hn.getState().appendInteractionResponseChunk(e,a),kt.emit(Et.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),Hn.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),Hn.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",a){var C;const i=Hn.getState(),s=i.interactions.find(T=>T.id===e);if(!s||s.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=i.activeStreamBuffers[e]??"",l=this._streamingToolData.get(e)||{calls:[],results:[]},u=(s==null?void 0:s.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}`);const d=performance.now(),h=this._interactionStartTimes.get(e),m=this._firstChunkTimestamps.get(e),y=h?Math.round(d-h):void 0,v=h&&m?Math.round(m-h):void 0,b=a==null?void 0:a.reasoning,x={status:t,endedAt:new Date,response:o||null,metadata:{...u,...(a==null?void 0:a.usage)&&{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens,totalTokens:a.usage.totalTokens},...(a==null?void 0:a.providerMetadata)&&{providerMetadata:a.providerMetadata},toolCalls:l.calls,toolResults:l.results,reasoning:b,timeToFirstToken:v,generationTime:y,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&x.response&&typeof x.response=="string"){const T=x.response.trim().replace(/^"|"$/g,"");T&&s&&(console.log(`[InteractionService] Updating conversation ${s.conversationId} title to: "${T}"`),mn.getState().updateConversation(s.conversationId,{title:T}).catch(j=>console.error("Failed to update conversation title:",j)))}i._updateInteractionInState(e,x),i._removeStreamingId(e);const w=Hn.getState().interactions.find(T=>T.id===e);w?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((C=w.response)==null?void 0:C.length)??0}`),xt.saveInteraction({...w}).catch(T=>{console.error(`[InteractionService] Failed final persistence for ${e}`,T)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let S=[],E=[];try{S=l.calls.map(T=>JSON.parse(T)),E=l.results.map(T=>JSON.parse(T))}catch(T){console.error("[InteractionService] Failed to parse tool strings for event emitter:",T)}kt.emit(Et.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:S,toolResults:E}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Mo=(e,t)=>{kt.emit(Et.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},ki=Os(Ds((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Mo("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Mo("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Mo("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Mo("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Mo("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Mo("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Mo("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Mo("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Mo("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Mo("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),kt.emit(Et.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),kt.emit(Et.PROMPT_PARAMS_CHANGED,{params:r}))}}))),sc=Os(Ds((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([xt.loadRules(),xt.loadTags(),xt.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:a,isLoading:!1})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),Ye.error("Failed to load rules and tags.")}},addRule:async n=>{const r=Si(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.rules.push(i),s.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{return await xt.saveRule(i),Ye.success(`Rule "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding rule",s),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),Ye.error("Failed to save new rule."),s}},updateRule:async(n,r)=>{const a=t().rules.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.rules.findIndex(l=>l.id===n);o!==-1&&(s.rules[o]=i,s.rules.sort((l,u)=>l.name.localeCompare(u.name)))});try{await xt.saveRule(i),Ye.success(`Rule "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating rule",s),e(o=>{const l=o.rules.findIndex(u=>u.id===n);l!==-1&&(o.rules[l]=a,o.rules.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save rule update"}),Ye.error("Failed to save rule update."),s}},deleteRule:async n=>{const r=t().rules.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.ruleId===n);e(i=>({rules:i.rules.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.ruleId!==n)}));try{await xt.deleteRule(n),Ye.success(`Rule "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting rule",i),e(s=>{s.rules.push(r),s.rules.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete rule"}),Ye.error("Failed to delete rule."),i}},addTag:async n=>{const r=Si(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.tags.push(i),s.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{return await xt.saveTag(i),Ye.success(`Tag "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding tag",s),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),Ye.error("Failed to save new tag."),s}},updateTag:async(n,r)=>{const a=t().tags.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.tags.findIndex(l=>l.id===n);o!==-1&&(s.tags[o]=i,s.tags.sort((l,u)=>l.name.localeCompare(u.name)))});try{await xt.saveTag(i),Ye.success(`Tag "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating tag",s),e(o=>{const l=o.tags.findIndex(u=>u.id===n);l!==-1&&(o.tags[l]=a,o.tags.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save tag update"}),Ye.error("Failed to save tag update."),s}},deleteTag:async n=>{const r=t().tags.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.tagId===n);e(i=>({tags:i.tags.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.tagId!==n)}));try{await xt.deleteTag(n),Ye.success(`Tag "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting tag",i),e(s=>{s.tags.push(r),s.tags.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete tag"}),Ye.error("Failed to delete tag."),i}},linkTagToRule:async(n,r)=>{const a=`${n}-${r}`;if(t().tagRuleLinks.find(o=>o.id===a))return;const s={id:a,tagId:n,ruleId:r};e(o=>{o.tagRuleLinks.push(s)});try{await xt.saveTagRuleLink(s)}catch(o){throw console.error("RulesStore: Error linking tag to rule",o),e(l=>({error:"Failed to link tag and rule",tagRuleLinks:l.tagRuleLinks.filter(u=>u.id!==a)})),Ye.error("Failed to link tag and rule."),o}},unlinkTagFromRule:async(n,r)=>{const a=`${n}-${r}`,i=t().tagRuleLinks.find(s=>s.id===a);if(i){e(s=>({tagRuleLinks:s.tagRuleLinks.filter(o=>o.id!==a)}));try{await xt.deleteTagRuleLink(a)}catch(s){throw console.error("RulesStore: Error unlinking tag from rule",s),e(o=>{o.tagRuleLinks.push(i),o.error="Failed to unlink tag and rule"}),Ye.error("Failed to unlink tag and rule."),s}}},getRulesForTag:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.tagId===n).map(i=>i.ruleId));return r.rules.filter(i=>a.has(i.id))},getTagsForRule:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.ruleId===n).map(i=>i.tagId));return r.tags.filter(i=>a.has(i.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(a=>r.has(a.id))}}))),n6={async submitPrompt(e){var V,ue,ae,ne,X,ie;console.log("[ConversationService] submitPrompt called",e);const t=Hn.getState(),n=ai.getState(),r=ki.getState(),a=mn.getState(),i=sc.getState(),s=fr.getState(),o=t.currentConversationId;if(!o){Ye.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const l=a.getConversationById(o),u=(l==null?void 0:l.projectId)??null,h=t.interactions.filter(L=>L.conversationId===o).length===0&&s.autoTitleEnabled&&((V=e.metadata)==null?void 0:V.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,y=t.interactions.filter(L=>L.status==="COMPLETED"&&L.type==="message.user_assistant"),v=q3(y);let b=e.content;const x=[],w=((ue=e.metadata)==null?void 0:ue.activeTagIds)??[],S=((ae=e.metadata)==null?void 0:ae.activeRuleIds)??[],E=new Set(S);w.forEach(L=>{i.getRulesForTag(L).forEach(J=>E.add(J.id))});const C=i.getRulesByIds(Array.from(E))||[],T=C.filter(L=>L.type==="system").map(L=>L.content),j=C.filter(L=>L.type==="before").map(L=>L.content),I=C.filter(L=>L.type==="after").map(L=>L.content);j.length>0&&(b=`${j.join(`
`)}

${b}`),I.length>0&&(b=`${b}

    ${I.join(`
`)}`),b&&x.push({type:"text",text:b});const R=((ne=e.metadata)==null?void 0:ne.attachedFiles)??[];if(R.length>0){const L=await this._processFilesForPrompt(R,o);x.unshift(...L)}x.length>0?v.push({role:"user",content:x}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");const F=(X=e.metadata)==null?void 0:X.turnSystemPrompt,B=n.getEffectiveProjectSettings(u);let H=F??B.systemPrompt??void 0;T.length>0&&(H=`${H?`${H}

        `:""}${T.join(`
`)}`);const D={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(D).forEach(L=>{(D[L]===null||D[L]===void 0)&&delete D[L]});const Z={system:H,messages:v,parameters:D,metadata:{...(({turnSystemPrompt:L,activeTagIds:J,activeRuleIds:Q,autoTitleEnabledForTurn:ee,...fe})=>fe)(e.metadata??{}),modelId:r.modelId??void 0,attachedFiles:(ie=e.metadata.attachedFiles)==null?void 0:ie.map(({contentBase64:L,contentText:J,...Q})=>Q)}};try{const L=Dv.startInteraction(Z,o,e);h&&(console.log("[ConversationService] Triggering asynchronous title generation."),this.generateConversationTitle(o,e,C).catch(J=>{console.error("[ConversationService] Background title generation failed:",J)})),await L}catch(L){throw console.error("[ConversationService] Error starting interaction:",L),Ye.error(`Failed to start interaction: ${L instanceof Error?L.message:String(L)}`),L}},async generateConversationTitle(e,t,n){var o,l;const r=fr.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let a=t.content;if(a.length>r.autoTitlePromptMaxLength&&(a=a.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const u=t.metadata.attachedFiles.map(d=>d.name).join(", ");a+=`

[Attached files: ${u}]`}if(r.autoTitleIncludeRules&&n.length>0){const u=n.map(d=>d.name).join(", ");a+=`

[Active rules: ${u}]`}const i={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:a}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},s={id:Si(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:i.parameters,metadata:{...i.metadata,originalTurnId:t.id}};try{await Dv.startInteraction(i,e,s,"conversation.title_generation")}catch(u){console.error("[ConversationService] Error starting title generation interaction:",u)}},async regenerateInteraction(e){var Z,V,ue,ae;console.log("[ConversationService] regenerateInteraction called",e);const t=Hn.getState(),n=ai.getState(),r=ki.getState(),a=mn.getState(),i=sc.getState(),s=t.interactions.find(ne=>ne.id===e);if(!s||!s.prompt){Ye.error("Cannot regenerate: Original interaction data missing.");return}const o=s.prompt,l=s.conversationId,u=a.getConversationById(l),d=(u==null?void 0:u.projectId)??null,h=s.index,m=t.interactions.filter(ne=>ne.conversationId===l&&ne.index<h&&ne.status==="COMPLETED"&&ne.type==="message.user_assistant").sort((ne,X)=>ne.index-X.index),y=q3(m);let v=o.content;const b=[],x=((Z=o.metadata)==null?void 0:Z.activeTagIds)??[],w=((V=o.metadata)==null?void 0:V.activeRuleIds)??[],S=new Set(w);x.forEach(ne=>{i.getRulesForTag(ne).forEach(X=>S.add(X.id))});const E=i.getRulesByIds(Array.from(S))||[],C=E.filter(ne=>ne.type==="before").map(ne=>ne.content),T=E.filter(ne=>ne.type==="after").map(ne=>ne.content);C.length>0&&(v=`${C.join(`
`)}

${v}`),T.length>0&&(v=`${v}

    ${T.join(`
`)}`),v&&b.push({type:"text",text:v});const j=((ue=o.metadata)==null?void 0:ue.attachedFiles)??[];if(j.length>0){const ne=await this._processFilesForPrompt(j,l);b.unshift(...ne)}b.length>0?y.push({role:"user",content:b}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");const I=(ae=o.metadata)==null?void 0:ae.turnSystemPrompt,R=n.getEffectiveProjectSettings(d);let F=I??R.systemPrompt??void 0;const B=E.filter(ne=>ne.type==="system").map(ne=>ne.content);B.length>0&&(F=`${F?`${F}

        `:""}${B.join(`
`)}`);const H={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(H).forEach(ne=>{(H[ne]===null||H[ne]===void 0)&&delete H[ne]});const D={system:F,messages:y,parameters:H,metadata:{...(({turnSystemPrompt:ne,activeTagIds:X,activeRuleIds:ie,autoTitleEnabledForTurn:L,...J})=>J)(o.metadata??{}),modelId:r.modelId??void 0,regeneratedFromId:e,attachedFiles:j.map(({contentBase64:ne,contentText:X,...ie})=>ie)}};try{await Dv.startInteraction(D,l,o,"message.assistant_regen")}catch(ne){throw console.error("[ConversationService] Error starting regeneration interaction:",ne),Ye.error(`Failed to start regeneration: ${ne instanceof Error?ne.message:String(ne)}`),ne}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=mn.getState().getConversationById(t),s=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(s)}catch{Ye.error(`Filesystem unavailable for key ${s}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let s=null;try{if(i.source==="direct")s=U3(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const o=await df(i.path,{fsInstance:a});s=U3({...i,contentBytes:o})}else if(i.source==="vfs"&&!a)continue;s&&n.push(s)}catch(o){console.error(`[ConversationService] Error processing file ${i.name}:`,o),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await co.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}},l0=Os(Ds((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),Ye.error(r)}},addDbMod:async n=>{const r=Si(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((s,o)=>s.loadOrder-o.loadOrder)});try{return await xt.saveMod(a),Ye.success(`Mod "${a.name}" added.`),r}catch(i){const s="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=s}),Ye.error(s),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(o=>{i=o.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...o.dbMods[i]},o.dbMods[i]={...o.dbMods[i],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const s=i!==-1?t().dbMods[i]:void 0;if(s)try{await xt.saveMod(s),Ye.success(`Mod "${s.name}" updated.`)}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(u=>{const d=u.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(u.dbMods[d]=a,u.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),u.error=l}),Ye.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(s=>s.id!==n)}));try{await xt.deleteMod(n),Ye.success(`Mod "${a}" deleted.`)}catch(i){const s="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder),o.error=s}),Ye.error(s),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function r6(e){const t=e.id,n=e.name,r=Rr.getState(),a=l0.getState();return{modId:t,modName:n,registerPromptControl:s=>r.registerPromptControl(s),registerChatControl:s=>{const o={...s,status:s.status??(()=>"ready")};return r.registerChatControl(o)},registerTool:(s,o,l)=>(console.log(`[${n}] Registering tool: ${s}`),r.registerTool(t,s,o,l)),on:(s,o)=>(kt.on(s,o),()=>kt.off(s,o)),addMiddleware:(s,o)=>r.registerMiddleware(s,t,o),registerSettingsTab:s=>(a._addSettingsTab(s),()=>a._removeSettingsTab(s.id)),getContextSnapshot:()=>{const s=Hn.getState(),o=mn.getState(),l=fr.getState(),u=Bn.getState(),{providerId:d}=lc(u.selectedModelId),h=o.selectedItemType==="conversation"?o.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(s.currentConversationId===h?s.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:s.status==="streaming",selectedProviderId:d,selectedModelId:u.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(s,o)=>{Ye[s](`[${n}] ${o}`)},log:(s,...o)=>{console[s](`[Mod: ${n}]`,...o)}}}async function X0e(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,s=null;try{if(i=r6(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const u=await fetch(r.sourceUrl);if(!u.ok)throw new Error(`Failed to fetch mod script: ${u.status} ${u.statusText}`);a=await u.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(u){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,u),u}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){s=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),Ye.error(`Error loading mod "${r.name}": ${s instanceof Error?s.message:s}`)}i||(i=r6(r));const o={id:r.id,name:r.name,api:i,error:s??void 0};return kt.emit(o.error?Et.MOD_ERROR:Et.MOD_LOADED,{id:r.id,name:r.name,error:o.error}),o}));return kt.emit(Et.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var J0e=(e,t,n,r,a,i,s,o)=>{let l=document.documentElement,u=["light","dark"];function d(y){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",x=b&&i?a.map(w=>i[w]||w):a;b?(l.classList.remove(...x),l.classList.add(i&&i[y]?i[y]:y)):l.setAttribute(v,y)}),h(y)}function h(y){o&&u.includes(y)&&(l.style.colorScheme=y)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let y=localStorage.getItem(t)||n,v=s&&y==="system"?m():y;d(v)}catch{}},Q0e=k.createContext(void 0),eye={setTheme:e=>{},themes:[]},tye=()=>{var e;return(e=k.useContext(Q0e))!=null?e:eye};k.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:s,themes:o,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,t,i,e,o,s,r,a]).slice(1,-1);return k.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${J0e.toString()})(${d})`}})});const nye=({...e})=>{const{theme:t="system"}=tye();return p.jsx(YG,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function Hu({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:_t("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const R9=k.memo(k.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...s},o)=>{const l=k.useRef(null),[u,d]=k.useState(e);k.useImperativeHandle(o,()=>({getValue:()=>u,focus:()=>{var y;return(y=l.current)==null?void 0:y.focus()},clearValue:()=>{d(""),i&&i(""),requestAnimationFrame(()=>{const y=l.current;y&&(y.style.height="auto",y.style.height=`${y.scrollHeight}px`,y.style.overflowY="hidden")})}}));const h=y=>{var v;if(y.key==="Enter"&&!y.shiftKey&&!n){y.preventDefault();const b=Jl.getState().attachedFilesMetadata.length>0;(u.trim().length>0||b)&&(t(),(v=o==null?void 0:o.current)==null||v.clearValue())}},m=y=>{const v=y.target.value;d(v),i&&i(v),kt.emit(Et.PROMPT_INPUT_CHANGE,{value:v})};return k.useEffect(()=>{const y=l.current;if(y){y.style.height="auto";const v=y.scrollHeight,b=250;y.style.height=`${Math.min(v,b)}px`,y.style.overflowY=v>b?"auto":"hidden"}},[u]),k.useEffect(()=>{e!==u&&(d(e),i&&i(e))},[e]),p.jsx(Hu,{ref:l,value:u,onChange:m,onKeyDown:h,disabled:n,placeholder:r,rows:1,className:_t("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...s})}));R9.displayName="InputArea";const rye=({controls:e=[]})=>{const[t,n]=k.useState(!0),[r,a]=k.useState(!1),i=k.useRef(null),s=mn(ee=>ee.selectedItemId),o=mn(ee=>ee.selectedItemType),l=mn(ee=>ee.loadSidebarItems),u=mn(ee=>ee.getConversationById),{getEffectiveProjectSettings:d}=ai(dn(ee=>({projects:ee.projects,getProjectById:ee.getProjectById,getEffectiveProjectSettings:ee.getEffectiveProjectSettings}))),{interactions:h,status:m}=Hn(dn(ee=>({interactions:ee.interactions,status:ee.status}))),{globalError:y,isSidebarCollapsed:v,isChatControlPanelOpen:b,isProjectSettingsModalOpen:x,isVfsModalOpen:w}=ls(dn(ee=>({globalError:ee.globalError,isSidebarCollapsed:ee.isSidebarCollapsed,isChatControlPanelOpen:ee.isChatControlPanelOpen,isProjectSettingsModalOpen:ee.isProjectSettingsModalOpen,isVfsModalOpen:ee.isVfsModalOpen}))),S=Rr(dn(ee=>Object.values(ee.chatControls))),{loadDbMods:E,setLoadedMods:C}=l0(dn(ee=>({loadDbMods:ee.loadDbMods,setLoadedMods:ee.setLoadedMods}))),{loadInitialData:T}=Bn(dn(ee=>({loadInitialData:ee.loadInitialData}))),{loadSettings:j}=fr(dn(ee=>({loadSettings:ee.loadSettings}))),{setVfsKey:I}=co(dn(ee=>({setVfsKey:ee.setVfsKey}))),{initializePromptState:R}=ki(dn(ee=>({initializePromptState:ee.initializePromptState}))),{loadRulesAndTags:F}=sc(dn(ee=>({loadRulesAndTags:ee.loadRulesAndTags}))),B=k.useCallback(()=>{a(ee=>!ee)},[]);k.useEffect(()=>{r&&a(!1)},[s,o]);const H=k.useCallback(()=>{requestAnimationFrame(()=>{var ee;(ee=i.current)==null||ee.focus()})},[]);k.useEffect(()=>{let ee=!0;return(async()=>{var ve;console.log("LiteChat: Starting initialization..."),n(!0);try{if(console.log("LiteChat: Loading core data..."),await j(),!ee||(console.log("LiteChat: Settings loaded."),await T(),!ee)||(console.log("LiteChat: Provider data loaded."),await F(),!ee)||(console.log("LiteChat: Rules and Tags loaded."),await l(),!ee)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),e.forEach(Pe=>{try{Pe()}catch(Qe){console.error("LiteChat: Error running registration function:",Qe)}}),console.log("LiteChat: Core controls and tools registered."),!ee)||(console.log("LiteChat: Loading mods..."),await E(),!ee))return;console.log("LiteChat: DB Mods loaded.");const Oe=l0.getState().dbMods;console.log(`LiteChat: Processing ${Oe.length} mods...`);const Ae=await X0e(Oe);if(!ee)return;C(Ae),console.log(`LiteChat: ${Ae.length} mods processed.`);const Ne=o==="project"?s:o==="conversation"?((ve=u(s))==null?void 0:ve.projectId)??null:null,Ce=d(Ne);R(Ce),console.log("LiteChat: Initial prompt state initialized.",Ce)}catch(Oe){console.error("LiteChat: Initialization failed:",Oe),Ye.error(`Initialization failed: ${Oe instanceof Error?Oe.message:String(Oe)}`),ls.getState().setGlobalError("Initialization failed.")}finally{ee&&(console.log("LiteChat: Initialization complete."),n(!1))}})(),()=>{ee=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[e]);const D=k.useRef({itemId:null,itemType:null});k.useEffect(()=>{var fe;if(t)return;const ee={itemId:s,itemType:o};if(ee.itemId!==D.current.itemId||ee.itemType!==D.current.itemType){const ve=o==="project"?s:o==="conversation"?((fe=u(s))==null?void 0:fe.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${s}, Type: ${o}). Calculating effective settings for Project ID: ${ve}`);const Oe=d(ve);R(Oe),console.log("[LiteChat Effect] Prompt state updated based on context change.",Oe),D.current=ee,ee.itemType==="conversation"&&H()}},[s,o,u,d,R,t,H]),k.useEffect(()=>{let ee=null;if(w||o==="project"){if(o==="project")ee=s;else if(o==="conversation"){const fe=mn.getState().getConversationById(s);ee=(fe==null?void 0:fe.projectId)??"orphan"}else ee="orphan";console.log(`[LiteChat Effect] VFS Context Required. Setting target key: ${ee}`)}else ee=null,console.log("[LiteChat Effect] VFS Context Not Required. Setting target key: null");co.getState().vfsKey!==ee&&I(ee)},[w,s,o,I]);const Z=k.useCallback(async ee=>{var Ae;const fe=mn.getState();let ve=fe.selectedItemType==="conversation"?fe.selectedItemId:null;const Oe=fe.selectedItemType==="project"?fe.selectedItemId:fe.selectedItemType==="conversation"?((Ae=fe.getConversationById(fe.selectedItemId))==null?void 0:Ae.projectId)??null:null;if(!ve){console.log("LiteChat: No conversation selected, creating new one...");try{const Ne=await fe.addConversation({title:"New Chat",projectId:Oe});await fe.selectItem(Ne,"conversation"),ve=mn.getState().selectedItemId,ve!==Ne&&console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),console.log(`LiteChat: New conversation created (${ve}), selected.`)}catch(Ne){console.error("LiteChat: Failed to create new conversation",Ne),Ye.error("Failed to start new chat.");return}}console.log("LiteChat: Submitting turn data to ConversationService...");try{const Ne=ki.getState(),Ce={...ee,metadata:{...ee.metadata,modelId:Ne.modelId}};await n6.submitPrompt(Ce),console.log("LiteChat: ConversationService processing initiated."),H()}catch(Ne){console.error("LiteChat: Error submitting prompt:",Ne),H()}},[H]),V=k.useCallback(async ee=>{console.log(`LiteChat: Regenerating interaction ${ee}`);try{await n6.regenerateInteraction(ee),console.log(`LiteChat: ConversationService regeneration initiated for ${ee}.`),H()}catch(fe){console.error("LiteChat: Error regenerating interaction:",fe),H()}},[H]),ue=k.useCallback(ee=>{console.log(`LiteChat: Stopping interaction ${ee}`),Dv.abortInteraction(ee),H()},[H]),ae=k.useMemo(()=>S.filter(ee=>(ee.panel??"main")==="sidebar"&&(ee.show?ee.show():!0)).map(ee=>ee),[S]),ne=k.useMemo(()=>S.filter(ee=>ee.panel==="sidebar-footer"&&(ee.show?ee.show():!0)).map(ee=>ee),[S]),X=k.useMemo(()=>S.filter(ee=>ee.panel==="header"&&(ee.show?ee.show():!0)).map(ee=>ee),[S]),ie=k.useMemo(()=>{var ee;return(ee=S.find(fe=>fe.id==="core-settings-trigger"))==null?void 0:ee.settingsRenderer},[S]),L=k.useMemo(()=>{var ee;return(ee=S.find(fe=>fe.id==="core-project-settings-trigger"))==null?void 0:ee.settingsRenderer},[S]),J=k.useMemo(()=>{var ee;return(ee=S.find(fe=>fe.id==="core-vfs-modal-panel"))==null?void 0:ee.renderer},[S]),Q=o==="conversation"?s:null;return t?p.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx(On,{className:"h-12 w-12 animate-spin text-primary"}),p.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[p.jsxs("div",{className:_t("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",v?"w-16":"w-64"),children:[p.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[p.jsx("div",{className:_t(v?"hidden":"block"),children:p.jsx(fh,{controls:ae,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:_t(v?"block":"hidden"),children:p.jsx(fh,{controls:ae,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),p.jsx("div",{className:_t("flex-shrink-0 border-t border-border p-2",v?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:p.jsx(fh,{controls:ne,panelId:"sidebar-footer",renderMode:v?"icon":"full",className:_t("flex",v?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&p.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex",children:[p.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm animate-fadeIn",onClick:B}),p.jsxs("div",{className:"relative w-4/5 max-w-xs bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[p.jsx("h2",{className:"font-semibold",children:"LiteChat Menu"}),p.jsx("button",{onClick:B,className:"p-1 rounded-md hover:bg-muted","aria-label":"Close menu",children:p.jsx(_i,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:p.jsx(fh,{controls:ae,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border p-4",children:p.jsx(fh,{controls:ne,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"})})]})]}),p.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[p.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-muted",onClick:B,"aria-label":"Open menu",children:p.jsx(dV,{className:"h-5 w-5"})}),p.jsx(fh,{controls:X,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),p.jsx(dpe,{conversationId:Q,interactions:h,onRegenerateInteraction:V,onStopInteraction:ue,status:m,className:"flex-grow overflow-y-hidden"}),y&&p.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",y]}),p.jsx(Aoe,{InputAreaRenderer:R9,onSubmit:Z,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:i})]})]}),b.settingsModal&&ie&&ie(),x&&L&&L(),w&&J&&J(),p.jsx(nye,{richColors:!0,position:"bottom-right",closeButton:!0})]})},aye="prism-theme-link",iye="prism-default-light-theme-link",sye="prism-default-dark-theme-link",oye="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",lye="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css",AE=e=>{let t=document.getElementById(e);return t||(t=document.createElement("link"),t.id=e,t.rel="stylesheet",document.head.appendChild(t)),t},cye=()=>{const{prismThemeUrl:e,theme:t}=fr(dn(a=>({prismThemeUrl:a.prismThemeUrl,theme:a.theme}))),n=k.useMemo(()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=k.useMemo(()=>{const a=t==="system"?n:t;return a==="dark"||a==="TijuDark"?"dark":"light"},[t,n]);return k.useEffect(()=>{if(typeof window>"u")return;const a=AE(iye),i=AE(sye),s=AE(aye);return a.disabled=!0,i.disabled=!0,s.disabled=!0,a.href=oye,i.href=lye,e?(s.href=e,s.disabled=!1):(console.log(r),r==="dark"?i.disabled=!1:a.disabled=!1),()=>{}},[e,r]),null},NE=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),RE=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],uye=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=fr(dn(a=>({theme:a.theme,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,customThemeColors:a.customThemeColors})));return k.useEffect(()=>{const a=document.body,i=document.documentElement;a.classList.remove("light","dark","TijuLight","TijuDark","custom"),RE.forEach(s=>{i.style.removeProperty(`--${NE(s)}`)}),i.style.removeProperty("--custom-font-family"),i.style.removeProperty("--custom-font-size"),e==="light"?a.classList.add("light"):e==="dark"?a.classList.add("dark"):e==="TijuLight"?a.classList.add("TijuLight"):e==="TijuDark"?a.classList.add("TijuDark"):e==="custom"?(a.classList.add("custom"),t?i.style.setProperty("--custom-font-family",t):i.style.removeProperty("--custom-font-family"),n?i.style.setProperty("--custom-font-size",`${n}px`):i.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([s,o])=>{if(o&&RE.includes(s)){const l=`--${NE(s)}`;i.style.setProperty(l,o)}else if(RE.includes(s)){const l=`--${NE(s)}`;i.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?a.classList.add("dark"):a.classList.add("light")},[e,t,n,r]),null},a6="0.1.0-dev",dye="https://github.com/DimitriGilbert/LiteChat",i6=({textToCopy:e,label:t,className:n})=>{const[r,a]=k.useState(!1),i=async()=>{try{await navigator.clipboard.writeText(e),a(!0),Ye.success(`${t} copied to clipboard!`),setTimeout(()=>a(!1),2e3)}catch(s){Ye.error(`Failed to copy ${t.toLowerCase()}.`),console.error(`Clipboard copy failed for ${t}:`,s)}};return p.jsxs(Rt,{variant:"outline",onClick:i,className:n,children:[r?p.jsx(xi,{className:"mr-2 h-4 w-4 text-green-500"}):p.jsx(EH,{className:"mr-2 h-4 w-4"}),r?"Copied!":`Copy ${t}`]})};class fye extends k.Component{constructor(){super(...arguments);va(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueUrl(){var a;const n=`${dye}/issues`,r=encodeURIComponent(`Crash Report: ${((a=this.state.error)==null?void 0:a.message.substring(0,50))??"Unknown Error"}`);return`${n}/new?title=${r}`}generateErrorReport(n=!1){const{error:r,errorInfo:a}=this.state,i=`
`,s=n?"```":"";let o=`## LiteChat Error Report${i}${i}`;return o+=`**Version:** ${a6}${i}`,o+=`**Timestamp:** ${new Date().toISOString()}${i}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${i}${i}`,r?o+=`**Error Message:**${i}${s}${i}${r.message}${i}${s}${i}${i}`:o+=`**Error Message:** Unknown Error${i}${i}`,a!=null&&a.componentStack&&(o+=`**Component Stack:**${i}${s}text${i}${a.componentStack.trim()}${i}${s}${i}${i}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${i}${s}text${i}${r.stack.trim()}${i}${s}${i}${i}`),o+=`**Steps to Reproduce (Please Describe):**${i}1. ...${i}2. ...${i}${i}`,o+=`**Expected Behavior:**${i}...${i}${i}`,o+=`**Actual Behavior:**${i}...${i}`,o}generateAIPrompt(){var i,s;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${a6}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((i=r==null?void 0:r.componentStack)==null?void 0:i.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((s=n==null?void 0:n.stack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:p.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[p.jsx(ex,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),p.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue. Copy the details and paste them into the GitHub issue."}),p.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[p.jsx(Rt,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),p.jsx(i6,{textToCopy:this.generateErrorReport(),label:"Details"}),p.jsx(i6,{textToCopy:this.generateAIPrompt(),label:"AI Debug Prompt"}),p.jsx(Rt,{variant:"outline",asChild:!0,children:p.jsxs("a",{href:this.getGitHubIssueUrl(),target:"_blank",rel:"noopener noreferrer",children:[p.jsx(tD,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})})]})]})}):this.props.children}}const I9=(e,t)=>{if(!t)return null;let n=fu,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=On,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Nh,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=ex,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=gk,r="text-green-500",a=`Synced with ${t}`;break;default:n=fu,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(n,{className:_t("h-3 w-3 ml-1 flex-shrink-0",r)})}),p.jsx(Qn,{side:"right",children:a})]})})},qw=k.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:y,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:T,isSavingEdit:j,editInputRef:I})=>{const R=e.id===n,F=e.itemType==="project",B=e.id===v&&e.itemType===b,H=F&&d.has(e.id),{projects:D,conversations:Z}=F?m(e.id,y):{projects:[],conversations:[]},V=D.length>0||Z.length>0,ue=!F&&e.syncRepoId?r[e.id]:void 0,ae=!F&&e.syncRepoId?a.get(e.syncRepoId):void 0,ne=!F&&ae?I9(ue,ae):null,X=ls(Ae=>Ae.openProjectSettingsModal),ie=()=>{B||(F&&V&&h(e.id),i(e.id,e.itemType))},L=Ae=>{Ae.stopPropagation(),F?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,Ae):s(e.id,Ae)},J=Ae=>{Ae.stopPropagation(),E(e)},Q=Ae=>{Ae.stopPropagation(),F&&X(e.id)},ee=Ae=>{Ae.key==="Enter"?(Ae.preventDefault(),C()):Ae.key==="Escape"&&T()},fe=F?e.name:e.title,ve=j?On:xi,Oe=j?"h-3 w-3 animate-spin":"h-3 w-3";return p.jsxs(p.Fragment,{children:[p.jsxs("li",{className:_t("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!B&&"hover:bg-muted/50 hover:text-primary/80",R&&!B?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",B&&"bg-muted ring-1 ring-primary",!B&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ie,title:B?"":fe,children:[p.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[F&&V&&p.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:Ae=>{Ae.stopPropagation(),h(e.id)},children:H?p.jsx(sl,{className:"h-3 w-3 text-muted-foreground"}):p.jsx(J6,{className:"h-3 w-3 text-muted-foreground"})}),F&&!V&&p.jsx("span",{className:"w-3 flex-shrink-0"}),F?p.jsx(Dd,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):p.jsx(GE,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),B?p.jsx(Cn,{ref:I,value:w,onChange:Ae=>S(Ae.target.value),onKeyDown:ee,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:Ae=>Ae.stopPropagation(),disabled:j}):p.jsx("span",{className:"truncate flex-shrink min-w-0",children:fe}),ne]}),p.jsx("div",{className:_t("flex items-center flex-shrink-0 ml-1","opacity-0 group-hover:opacity-100 transition-opacity duration-150",B?"opacity-100":""),onClick:Ae=>Ae.stopPropagation(),children:B?p.jsxs(p.Fragment,{children:[p.jsx(Dn,{tooltipText:"Save (Enter)",onClick:Ae=>{Ae.stopPropagation(),C()},disabled:j||!w.trim(),"aria-label":"Save changes",icon:p.jsx(ve,{}),iconClassName:Oe,className:"h-5 w-5 text-green-500 hover:text-green-600"}),p.jsx(Dn,{tooltipText:"Cancel (Esc)",onClick:Ae=>{Ae.stopPropagation(),T()},disabled:j,"aria-label":"Cancel edit",icon:p.jsx(_i,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[F&&p.jsx(Dn,{tooltipText:"Project Settings",onClick:Q,"aria-label":`Settings for ${fe}`,icon:p.jsx(wH,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),p.jsx(Dn,{tooltipText:"Edit",onClick:J,"aria-label":`Edit ${fe}`,icon:p.jsx(g0,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),F?p.jsx(Dn,{tooltipText:"Export Project (JSON)",onClick:Ae=>u(e.id,Ae),"aria-label":`Export project ${fe}`,icon:p.jsx(MH,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):p.jsxs("div",{className:"relative group/export",children:[p.jsx(Dn,{tooltipText:"Export Conversation","aria-label":`Export ${fe}`,icon:p.jsx(jd,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),p.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:Ae=>Ae.stopPropagation(),children:[p.jsx(Rt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ae=>l(e.id,"json",Ae),children:"JSON"}),p.jsx(Rt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ae=>l(e.id,"md",Ae),children:"MD"})]})]}),p.jsx(Dn,{tooltipText:"Delete",onClick:L,"aria-label":`Delete ${fe}`,icon:p.jsx($i,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),F&&H&&p.jsxs(p.Fragment,{children:[D.sort((Ae,Ne)=>Ne.updatedAt.getTime()-Ae.updatedAt.getTime()).map(Ae=>p.jsx(qw,{item:{...Ae,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:y,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:T,isSavingEdit:j,editInputRef:I},Ae.id)),Z.sort((Ae,Ne)=>Ne.updatedAt.getTime()-Ae.updatedAt.getTime()).map(Ae=>p.jsx(qw,{item:{...Ae,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:y,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:T,isSavingEdit:j,editInputRef:I},Ae.id))]})]})});qw.displayName="ConversationItemRenderer";function hye({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=k.useState(null),[i,s]=k.useState(null),[o,l]=k.useState(""),[u,d]=k.useState(""),[h,m]=k.useState(!1),y=k.useRef(null),v=k.useCallback(w=>{a(w.id),s(w.itemType);const S=w.itemType==="project"?w.name:w.title;l(S),d(S),m(!1)},[]),b=k.useCallback(w=>{const S=r,E=w??(i==="project"&&o==="New Project");a(null),s(null),l(""),d(""),m(!1),E&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(C=>{console.error("Failed to delete new project on cancel:",C),Ye.error("Failed to clean up cancelled new project.")}))},[r,i,o,n]),x=k.useCallback(async()=>{var E;if(!r||!i||h)return;const w=u.trim(),S=i==="project"&&o==="New Project";if(!w){Ye.error("Name cannot be empty."),(E=y.current)==null||E.focus();return}if(w===o&&!S){b();return}m(!0);try{i==="project"?await e(r,{name:w}):await t(r,{title:w}),Ye.success("Item renamed successfully."),a(null),s(null),l(""),d("")}catch(C){console.error("Failed to save item name:",C),Ye.error(`Failed to rename item: ${C instanceof Error?C.message:String(C)}`)}finally{m(!1)}},[r,i,u,o,h,e,t,b]);return k.useEffect(()=>{r&&y.current&&(y.current.focus(),y.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:o,localEditingName:u,setLocalEditingName:d,isSavingEdit:h,editInputRef:y,handleStartEditing:v,handleSaveEdit:x,handleCancelEdit:b}}const ek=(e,t,n,r,a,i,s,o,l)=>{if(!n)return!0;const u=`${t}-${e}`;if(l[u]!==void 0)return l[u];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const m=o.get(e)||[],y=s.get(e)||[];for(const v of y)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of m)if(ek(v.id,"project",n,r,a,i,s,o,l)){d=!0;break}}}}return l[u]=d,d},pye=()=>{const e=mn(z=>z.selectedItemId),t=mn(z=>z.selectedItemType),n=mn(z=>z.isLoading),r=ai(z=>z.isLoading),{conversations:a,syncRepos:i,conversationSyncStatus:s}=mn(dn(z=>({conversations:z.conversations,syncRepos:z.syncRepos,conversationSyncStatus:z.conversationSyncStatus}))),o=ai(z=>z.projects),l=mn(z=>z.selectItem),u=mn(z=>z.addConversation),d=mn(z=>z.updateConversation),h=mn(z=>z.deleteConversation),m=mn(z=>z.exportConversation),y=mn(z=>z.exportProject),v=mn(z=>z.getConversationById),b=ai(z=>z.addProject),x=ai(z=>z.updateProject),w=ai(z=>z.deleteProject),S=ai(z=>z.getProjectById),[E,C]=gt.useState(new Set),[T,j]=k.useState(""),I=n||r,R=hye({updateProject:x,updateConversation:d,deleteProject:w,getProjectById:S,getConversationById:v}),{editingItemId:F,editingItemType:B,originalName:H,localEditingName:D,setLocalEditingName:Z,isSavingEdit:V,editInputRef:ue,handleStartEditing:ae,handleSaveEdit:ne,handleCancelEdit:X}=R,ie=k.useCallback(z=>{C(Se=>{const Te=new Set(Se);return Te.has(z)?Te.delete(z):Te.add(z),Te})},[]),L=k.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const z=v(e);return(z==null?void 0:z.projectId)??null}return null},[e,t,v]),J=k.useCallback(async()=>{if(!F)try{const z=L(),Se=await u({title:"New Chat",projectId:z});l(Se,"conversation")}catch(z){console.error("Failed to create new chat:",z),Ye.error("Failed to create new chat.")}},[F,L,u,l]),Q=k.useCallback(async()=>{if(!F)try{const z=L(),Se=await b({name:"New Project",parentId:z});l(Se,"project"),z&&C(Te=>new Set(Te).add(z)),setTimeout(()=>{const Te=S(Se);Te?ae({...Te,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch(z){console.error("Failed to create new project:",z)}},[F,L,b,l,S,ae]),ee=k.useCallback((z,Se)=>{z!==F&&(F&&z!==F&&(D.trim()&&D.trim()!==H?ne():X()),(z!==e||Se!==t)&&l(z,Se))},[F,D,H,e,t,ne,X,l]),fe=k.useCallback((z,Se)=>{Se.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&h(z).catch(Te=>{console.error("Failed to delete conversation:",Te),Ye.error("Failed to delete conversation.")})},[h]),ve=k.useCallback((z,Se)=>{Se.stopPropagation(),w(z).catch(Te=>{console.error("Failed to delete project:",Te),Ye.error("Failed to delete project.")})},[w]),Oe=k.useCallback(async(z,Se,Te)=>{Te.stopPropagation();try{await m(z,Se)}catch(de){console.error(`Failed to export conversation as ${Se}:`,de)}},[m]),Ae=k.useCallback(async(z,Se)=>{Se.stopPropagation();try{await y(z)}catch(Te){console.error("Failed to export project:",Te)}},[y]),Ne=k.useMemo(()=>new Map((i||[]).map(z=>[z.id,z.name])),[i]),{projectsById:Ce,conversationsByProjectId:Pe,projectsByParentId:Qe}=k.useMemo(()=>{const z=new Map(o.map(de=>[de.id,de])),Se=new Map;a.forEach(de=>{const se=de.projectId??null;Se.has(se)||Se.set(se,[]),Se.get(se).push(de)});const Te=new Map;return o.forEach(de=>{const se=de.parentId??null;Te.has(se)||Te.set(se,[]),Te.get(se).push(de)}),{projectsById:z,conversationsByProjectId:Se,projectsByParentId:Te}},[o,a]),Le=k.useCallback((z,Se)=>{const Te=Se.toLowerCase(),de={},se=(Qe.get(z)||[]).filter(xe=>ek(xe.id,"project",Te,o,a,Ce,Pe,Qe,de)),te=(Pe.get(z)||[]).filter(xe=>xe.title.toLowerCase().includes(Te));return se.sort((xe,Fe)=>Fe.updatedAt.getTime()-xe.updatedAt.getTime()),te.sort((xe,Fe)=>Fe.updatedAt.getTime()-xe.updatedAt.getTime()),{projects:se,conversations:te}},[o,a,Ce,Pe,Qe]),Ie=k.useMemo(()=>{const z=T.toLowerCase(),Se={},Te=(Qe.get(null)||[]).filter(te=>ek(te.id,"project",z,o,a,Ce,Pe,Qe,Se)),de=(Pe.get(null)||[]).filter(te=>te.title.toLowerCase().includes(z)),se=[...Te.map(te=>({...te,itemType:"project"})),...de.map(te=>({...te,itemType:"conversation"}))];return se.sort((te,xe)=>xe.updatedAt.getTime()-te.updatedAt.getTime()),se},[o,a,T,Ce,Pe,Qe]);return p.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[p.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{size:"sm",variant:"ghost",onClick:Q,"aria-label":"New Project",disabled:I||!!F,className:"h-7 w-7 p-0",children:p.jsx(bk,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"bottom",children:"New Project"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{size:"sm",variant:"ghost",onClick:J,"aria-label":"New Chat",disabled:I||!!F,className:"h-7 w-7 p-0",children:p.jsx(Wd,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"bottom",children:"New Chat"})]})})]})]}),p.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[p.jsx(no,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),p.jsx(Cn,{type:"search",placeholder:"Filter...",value:T,onChange:z=>j(z.target.value),className:"h-8 text-xs pl-8",disabled:I})]}),p.jsx("div",{className:"flex-grow",children:I?p.jsxs("div",{className:"space-y-1 p-1",children:[p.jsx(ur,{className:"h-8 w-full"}),p.jsx(ur,{className:"h-8 w-full"}),p.jsx(ur,{className:"h-8 w-full"})]}):Ie.length===0?p.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:T.trim()!==""?"No items match your filter.":"Workspace is empty."}):p.jsx("ul",{className:"space-y-0.5 p-1",children:Ie.map(z=>p.jsx(qw,{item:z,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:Ne,onSelectItem:ee,onDeleteConversation:fe,onDeleteProject:ve,onExportConversation:Oe,onExportProject:Ae,expandedProjects:E,toggleProjectExpansion:ie,getChildren:Le,filterText:T,editingItemId:F,editingItemType:B,originalName:H,localEditingName:D,setLocalEditingName:Z,handleStartEditing:ae,handleSaveEdit:ne,handleCancelEdit:X,isSavingEdit:V,editInputRef:ue},z.id))})})]})},mye=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=mn(dn(l=>({addConversation:l.addConversation,selectItem:l.selectItem,selectedItemId:l.selectedItemId,selectedItemType:l.selectedItemType,getConversationById:l.getConversationById}))),{addProject:a}=ai(dn(l=>({addProject:l.addProject,getProjectById:l.getProjectById}))),i=()=>{if(r==="project")return n;if(r==="conversation"&&n){const l=mn.getState().getConversationById(n);return(l==null?void 0:l.projectId)??null}return null},s=async()=>{try{const l=i(),u=await e({title:"New Chat",projectId:l});t(u,"conversation")}catch(l){console.error("Failed to create new chat:",l)}},o=async()=>{try{const l=i(),u=await a({name:"New Project",parentId:l});t(u,"project")}catch(l){console.error("Failed to create new project:",l)}};return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8","aria-label":"New Project",children:p.jsx(bk,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"right",children:"New Project"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:p.jsx(Wd,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"right",children:"New Chat"})]})})]})};function gye(){const e=Rr.getState().registerChatControl,t=mn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>gt.createElement(pye),iconRenderer:()=>gt.createElement(mye),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var p1="Dialog",[j9,r2e]=di(p1),[yye,go]=j9(p1),O9=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=k.useRef(null),l=k.useRef(null),[u,d]=Is({prop:r,defaultProp:a??!1,onChange:i,caller:p1});return p.jsx(yye,{scope:t,triggerRef:o,contentRef:l,contentId:Ea(),titleId:Ea(),descriptionId:Ea(),open:u,onOpenChange:d,onOpenToggle:k.useCallback(()=>d(h=>!h),[d]),modal:s,children:n})};O9.displayName=p1;var D9="DialogTrigger",bye=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=go(D9,n),i=kn(t,a.triggerRef);return p.jsx(rn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":xA(a.open),...r,ref:i,onClick:Ht(e.onClick,a.onOpenToggle)})});bye.displayName=D9;var vA="DialogPortal",[vye,M9]=j9(vA,{forceMount:void 0}),P9=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=go(vA,t);return p.jsx(vye,{scope:t,forceMount:n,children:k.Children.map(r,s=>p.jsx(Ta,{present:n||i.open,children:p.jsx(cp,{asChild:!0,container:a,children:s})}))})};P9.displayName=vA;var Hw="DialogOverlay",F9=k.forwardRef((e,t)=>{const n=M9(Hw,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=go(Hw,e.__scopeDialog);return i.modal?p.jsx(Ta,{present:r||i.open,children:p.jsx(xye,{...a,ref:t})}):null});F9.displayName=Hw;var wye=du("DialogOverlay.RemoveScroll"),xye=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=go(Hw,n);return p.jsx(ny,{as:wye,allowPinchZoom:!0,shards:[a.contentRef],children:p.jsx(rn.div,{"data-state":xA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Vd="DialogContent",L9=k.forwardRef((e,t)=>{const n=M9(Vd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=go(Vd,e.__scopeDialog);return p.jsx(Ta,{present:r||i.open,children:i.modal?p.jsx(_ye,{...a,ref:t}):p.jsx(Sye,{...a,ref:t})})});L9.displayName=Vd;var _ye=k.forwardRef((e,t)=>{const n=go(Vd,e.__scopeDialog),r=k.useRef(null),a=kn(t,n.contentRef,r);return k.useEffect(()=>{const i=r.current;if(i)return r1(i)},[]),p.jsx($9,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ht(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Ht(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&i.preventDefault()}),onFocusOutside:Ht(e.onFocusOutside,i=>i.preventDefault())})}),Sye=k.forwardRef((e,t)=>{const n=go(Vd,e.__scopeDialog),r=k.useRef(!1),a=k.useRef(!1);return p.jsx($9,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),$9=k.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=go(Vd,n),l=k.useRef(null),u=kn(t,l);return t1(),p.jsxs(p.Fragment,{children:[p.jsx(ty,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(sp,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":xA(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(Eye,{titleId:o.titleId}),p.jsx(kye,{contentRef:l,descriptionId:o.descriptionId})]})]})}),wA="DialogTitle",B9=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=go(wA,n);return p.jsx(rn.h2,{id:a.titleId,...r,ref:t})});B9.displayName=wA;var z9="DialogDescription",U9=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=go(z9,n);return p.jsx(rn.p,{id:a.descriptionId,...r,ref:t})});U9.displayName=z9;var q9="DialogClose",H9=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=go(q9,n);return p.jsx(rn.button,{type:"button",...r,ref:t,onClick:Ht(e.onClick,()=>a.onOpenChange(!1))})});H9.displayName=q9;function xA(e){return e?"open":"closed"}var V9="DialogTitleWarning",[a2e,G9]=vJ(V9,{contentName:Vd,titleName:wA,docsSlug:"dialog"}),Eye=({titleId:e})=>{const t=G9(V9),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return k.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Cye="DialogDescriptionWarning",kye=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${G9(Cye).contentName}}.`;return k.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},K9=O9,W9=P9,Z9=F9,Y9=L9,Tye=B9,Aye=U9,X9=H9;function m1({...e}){return p.jsx(K9,{"data-slot":"dialog",...e})}function Nye({...e}){return p.jsx(W9,{"data-slot":"dialog-portal",...e})}function Rye({...e}){return p.jsx(X9,{"data-slot":"dialog-close",...e})}function Iye({className:e,...t}){return p.jsx(Z9,{"data-slot":"dialog-overlay",className:_t("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function g1({className:e,children:t,...n}){return p.jsxs(Nye,{"data-slot":"dialog-portal",children:[p.jsx(Iye,{}),p.jsxs(Y9,{"data-slot":"dialog-content",className:_t("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,p.jsxs(X9,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(_i,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function y1({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-header",className:_t("flex flex-col gap-2 text-center sm:text-left",e),...t})}function b1({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-footer",className:_t("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function v1({className:e,...t}){return p.jsx(Tye,{"data-slot":"dialog-title",className:_t("text-lg leading-none font-semibold",e),...t})}function w1({className:e,...t}){return p.jsx(Aye,{"data-slot":"dialog-description",className:_t("text-muted-foreground text-sm",e),...t})}var J9=["PageUp","PageDown"],Q9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],eB={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},kp="Slider",[tk,jye,Oye]=e1(kp),[tB,i2e]=di(kp,[Oye]),[Dye,x1]=tB(kp),nB=k.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:y=!1,form:v,...b}=e,x=k.useRef(new Set),w=k.useRef(0),E=s==="horizontal"?Mye:Pye,[C=[],T]=Is({prop:d,defaultProp:u,onChange:H=>{var Z;(Z=[...x.current][w.current])==null||Z.focus(),h(H)}}),j=k.useRef(C);function I(H){const D=zye(C,H);B(H,D)}function R(H){B(H,w.current)}function F(){const H=j.current[w.current];C[w.current]!==H&&m(C)}function B(H,D,{commit:Z}={commit:!1}){const V=Vye(i),ue=Gye(Math.round((H-r)/i)*i+r,V),ae=Jg(ue,[r,a]);T((ne=[])=>{const X=$ye(ne,ae,D);if(Hye(X,l*i)){w.current=X.indexOf(ae);const ie=String(X)!==String(ne);return ie&&Z&&m(X),ie?X:ne}else return ne})}return p.jsx(Dye,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:a,valueIndexToChangeRef:w,thumbs:x.current,values:C,orientation:s,form:v,children:p.jsx(tk.Provider,{scope:e.__scopeSlider,children:p.jsx(tk.Slot,{scope:e.__scopeSlider,children:p.jsx(E,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:Ht(b.onPointerDown,()=>{o||(j.current=C)}),min:r,max:a,inverted:y,onSlideStart:o?void 0:I,onSlideMove:o?void 0:R,onSlideEnd:o?void 0:F,onHomeKeyDown:()=>!o&&B(r,0,{commit:!0}),onEndKeyDown:()=>!o&&B(a,C.length-1,{commit:!0}),onStepKeyDown:({event:H,direction:D})=>{if(!o){const ue=J9.includes(H.key)||H.shiftKey&&Q9.includes(H.key)?10:1,ae=w.current,ne=C[ae],X=i*ue*D;B(ne+X,ae,{commit:!0})}}})})})})});nB.displayName=kp;var[rB,aB]=tB(kp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Mye=k.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=e,[h,m]=k.useState(null),y=kn(t,E=>m(E)),v=k.useRef(void 0),b=Ep(a),x=b==="ltr",w=x&&!i||!x&&i;function S(E){const C=v.current||h.getBoundingClientRect(),T=[0,C.width],I=_A(T,w?[n,r]:[r,n]);return v.current=C,I(E-C.left)}return p.jsx(rB,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:p.jsx(iB,{dir:b,"data-orientation":"horizontal",...d,ref:y,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);s==null||s(C)},onSlideMove:E=>{const C=S(E.clientX);o==null||o(C)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const T=eB[w?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:T?-1:1})}})})}),Pye=k.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...u}=e,d=k.useRef(null),h=kn(t,d),m=k.useRef(void 0),y=!a;function v(b){const x=m.current||d.current.getBoundingClientRect(),w=[0,x.height],E=_A(w,y?[r,n]:[n,r]);return m.current=x,E(b-x.top)}return p.jsx(rB,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:p.jsx(iB,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const x=v(b.clientY);i==null||i(x)},onSlideMove:b=>{const x=v(b.clientY);s==null||s(x)},onSlideEnd:()=>{m.current=void 0,o==null||o()},onStepKeyDown:b=>{const w=eB[y?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:w?-1:1})}})})}),iB=k.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...u}=e,d=x1(kp,n);return p.jsx(rn.span,{...u,ref:t,onKeyDown:Ht(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):J9.concat(Q9).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:Ht(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:Ht(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Ht(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),sB="SliderTrack",oB=k.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=x1(sB,n);return p.jsx(rn.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});oB.displayName=sB;var nk="SliderRange",lB=k.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=x1(nk,n),i=aB(nk,n),s=k.useRef(null),o=kn(t,s),l=a.values.length,u=a.values.map(m=>dB(m,a.min,a.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return p.jsx(rn.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});lB.displayName=nk;var rk="SliderThumb",cB=k.forwardRef((e,t)=>{const n=jye(e.__scopeSlider),[r,a]=k.useState(null),i=kn(t,o=>a(o)),s=k.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(Fye,{...e,ref:i,index:s})}),Fye=k.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,s=x1(rk,n),o=aB(rk,n),[l,u]=k.useState(null),d=kn(t,S=>u(S)),h=l?s.form||!!l.closest("form"):!0,m=gx(l),y=s.values[r],v=y===void 0?0:dB(y,s.min,s.max),b=Bye(r,s.values.length),x=m==null?void 0:m[o.size],w=x?Uye(x,v,o.direction):0;return k.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${w}px)`},children:[p.jsx(tk.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(rn.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":s.min,"aria-valuenow":y,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:d,style:y===void 0?{display:"none"}:e.style,onFocus:Ht(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&p.jsx(uB,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:y},r)]})});cB.displayName=rk;var Lye="RadioBubbleInput",uB=k.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=k.useRef(null),i=kn(a,r),s=n1(t);return k.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(rn.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});uB.displayName=Lye;function $ye(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function dB(e,t,n){const i=100/(n-t)*(e-t);return Jg(i,[0,100])}function Bye(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function zye(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function Uye(e,t,n){const r=e/2,i=_A([0,50],[0,r]);return(r-i(t)*n)*n}function qye(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Hye(e,t){if(t>0){const n=qye(e);return Math.min(...n)>=t}return!0}function _A(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Vye(e){return(String(e).split(".")[1]||"").length}function Gye(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Kye=nB,Wye=oB,Zye=lB,Yye=cB;function Wo({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const s=k.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return p.jsxs(Kye,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:_t("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[p.jsx(Wye,{"data-slot":"slider-track",className:_t("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(Zye,{"data-slot":"slider-range",className:_t("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>p.jsx(Yye,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var Xye="Separator",s6="horizontal",Jye=["horizontal","vertical"],fB=k.forwardRef((e,t)=>{const{decorative:n,orientation:r=s6,...a}=e,i=Qye(r)?r:s6,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(rn.div,{"data-orientation":i,...o,...a,ref:t})});fB.displayName=Xye;function Qye(e){return Jye.includes(e)}var ebe=fB;function Xs({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return p.jsx(ebe,{"data-slot":"separator-root",decorative:n,orientation:t,className:_t("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const tbe=()=>{const{enableStreamingMarkdown:e,setEnableStreamingMarkdown:t,enableStreamingCodeBlockParsing:n,setEnableStreamingCodeBlockParsing:r,foldStreamingCodeBlocks:a,setFoldStreamingCodeBlocks:i,foldUserMessagesOnCompletion:s,setFoldUserMessagesOnCompletion:o,streamingRenderFPS:l,setStreamingRenderFPS:u,resetGeneralSettings:d}=fr(dn(w=>({theme:w.theme,setTheme:w.setTheme,enableStreamingMarkdown:w.enableStreamingMarkdown,setEnableStreamingMarkdown:w.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:w.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:w.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:w.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:w.setFoldStreamingCodeBlocks,foldUserMessagesOnCompletion:w.foldUserMessagesOnCompletion,setFoldUserMessagesOnCompletion:w.setFoldUserMessagesOnCompletion,streamingRenderFPS:w.streamingRenderFPS,setStreamingRenderFPS:w.setStreamingRenderFPS,prismThemeUrl:w.prismThemeUrl,setPrismThemeUrl:w.setPrismThemeUrl,resetGeneralSettings:w.resetGeneralSettings}))),[h,m]=k.useState(l),y=k.useCallback(w=>{m(w[0])},[]),v=k.useCallback(w=>{u(w[0])},[u]),b=k.useCallback(w=>{const S=w.target.value,E=S===""?15:parseInt(S.replace(/[^0-9]/g,""),10);if(!isNaN(E)){const C=Math.max(3,Math.min(60,E));u(C),m(C)}},[u]);k.useEffect(()=>{m(l)},[l]);const x=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&d()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),p.jsx(Li,{id:"streaming-markdown-switch",checked:e??!0,onCheckedChange:t})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),p.jsx(Li,{id:"streaming-codeblock-switch",checked:n??!1,onCheckedChange:r})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),p.jsx(Li,{id:"fold-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"fold-user-message-switch",className:"font-medium",children:"Fold User Messages After Response"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse the user's prompt message once the assistant finishes responding."})]}),p.jsx(Li,{id:"fold-user-message-switch",checked:s??!1,onCheckedChange:o})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsxs("div",{children:[p.jsxs(Gt,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",h," FPS)"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(Wo,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[h],onValueChange:y,onValueCommit:v,className:"flex-grow"}),p.jsx(Cn,{type:"number",min:3,max:60,step:1,value:h,onChange:b,className:"w-20 h-8 text-xs"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),p.jsx(Xs,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(Rt,{variant:"outline",size:"sm",onClick:x,children:[p.jsx(_k,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},nbe=gt.memo(tbe),hB=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:m=.7,defaultTopP:y=null,defaultMaxTokens:v=null,defaultTopK:b=null,defaultPresencePenalty:x=0,defaultFrequencyPenalty:w=0,className:S})=>{const{selectedModelId:E,dbProviderConfigs:C,dbApiKeys:T}=Bn(dn(L=>({selectedModelId:L.selectedModelId,dbProviderConfigs:L.dbProviderConfigs,dbApiKeys:L.dbApiKeys}))),j=k.useMemo(()=>{if(!E)return;const{providerId:L,modelId:J}=lc(E);if(!L||!J)return;const Q=C.find(fe=>fe.id===L);if(!Q)return;const ee=T.find(fe=>fe.id===Q.apiKeyId);return Lk(Q,J,ee==null?void 0:ee.value)},[E,C,T]),I=k.useMemo(()=>{var L;return new Set(((L=j==null?void 0:j.metadata)==null?void 0:L.supported_parameters)??[])},[j]),[R,F]=k.useState(e??m),[B,H]=k.useState(n??y??1),[D,Z]=k.useState(l??x??0),[V,ue]=k.useState(d??w??0);k.useEffect(()=>{F(e??m)},[e,m]),k.useEffect(()=>{H(n??y??1)},[n,y]),k.useEffect(()=>{Z(l??x??0)},[l,x]),k.useEffect(()=>{ue(d??w??0)},[d,w]);const ae=k.useCallback((L,J)=>{const Q=J.target.value,ee=Q===""?null:parseInt(Q,10);(Q===""||!isNaN(ee)&&ee!==null)&&L(ee)},[]),ne=k.useCallback((L,J)=>{L(J[0])},[]),X=k.useCallback(L=>{L(null)},[]),ie=m!==void 0||y!==void 0||v!==void 0||b!==void 0||x!==void 0||w!==void 0;return p.jsxs("div",{className:_t("space-y-4 p-4",S),children:[I.has("temperature")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",R.toFixed(2),")"]}),p.jsx(Wo,{id:"param-temperature",min:0,max:1,step:.01,value:[R],onValueChange:L=>F(L[0]),onValueCommit:L=>ne(t,L)}),ie&&p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(t),disabled:e===null,children:["Use Default (",(m==null?void 0:m.toFixed(2))??"N/A",")"]})]}),I.has("top_p")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(B??0).toFixed(2),")"]}),p.jsx(Wo,{id:"param-top-p",min:0,max:1,step:.01,value:[B??1],onValueChange:L=>H(L[0]),onValueCommit:L=>ne(r,L)}),ie&&p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(r),disabled:n===null,children:["Use Default (",(y==null?void 0:y.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[I.has("max_tokens")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(Cn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:L=>ae(i,L),min:"1",className:"h-8 text-xs"}),ie&&p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(i),disabled:a===null,children:"Use Default"})]}),I.has("top_k")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),p.jsx(Cn,{id:"param-top-k",type:"number",placeholder:`Default: ${b??"None"}`,value:s??"",onChange:L=>ae(o,L),min:"1",className:"h-8 text-xs"}),ie&&p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(o),disabled:s===null,children:"Use Default"})]})]}),I.has("presence_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(D??0).toFixed(2),")"]}),p.jsx(Wo,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[D??0],onValueChange:L=>Z(L[0]),onValueCommit:L=>ne(u,L)}),ie&&p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(u),disabled:l===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]}),I.has("frequency_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(V??0).toFixed(2),")"]}),p.jsx(Wo,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[V??0],onValueChange:L=>ue(L[0]),onValueCommit:L=>ne(h,L)}),ie&&p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(h),disabled:d===null,children:["Use Default (",(w==null?void 0:w.toFixed(2))??"N/A",")"]})]})]})};var o6=1,rbe=.9,abe=.8,ibe=.17,IE=.1,jE=.999,sbe=.9999,obe=.99,lbe=/[\\\/_+.#"@\[\(\{&]/,cbe=/[\\\/_+.#"@\[\(\{&]/g,ube=/[\s-]/,pB=/[\s-]/g;function ak(e,t,n,r,a,i,s){if(i===t.length)return a===e.length?o6:obe;var o=`${a},${i}`;if(s[o]!==void 0)return s[o];for(var l=r.charAt(i),u=n.indexOf(l,a),d=0,h,m,y,v;u>=0;)h=ak(e,t,n,r,u+1,i+1,s),h>d&&(u===a?h*=o6:lbe.test(e.charAt(u-1))?(h*=abe,y=e.slice(a,u-1).match(cbe),y&&a>0&&(h*=Math.pow(jE,y.length))):ube.test(e.charAt(u-1))?(h*=rbe,v=e.slice(a,u-1).match(pB),v&&a>0&&(h*=Math.pow(jE,v.length))):(h*=ibe,a>0&&(h*=Math.pow(jE,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=sbe)),(h<IE&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(m=ak(e,t,n,r,u+1,i+2,s),m*IE>h&&(h=m*IE)),h>d&&(d=h),u=n.indexOf(l,u+1);return s[o]=d,d}function l6(e){return e.toLowerCase().replace(pB," ")}function dbe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,ak(e,t,l6(e),l6(t),0,0,{})}var Km='[cmdk-group=""]',OE='[cmdk-group-items=""]',fbe='[cmdk-group-heading=""]',mB='[cmdk-item=""]',c6=`${mB}:not([aria-disabled="true"])`,ik="cmdk-item-select",ph="data-value",hbe=(e,t,n)=>dbe(e,t,n),gB=k.createContext(void 0),ay=()=>k.useContext(gB),yB=k.createContext(void 0),SA=()=>k.useContext(yB),bB=k.createContext(void 0),vB=k.forwardRef((e,t)=>{let n=mh(()=>{var Q,ee;return{search:"",value:(ee=(Q=e.value)!=null?Q:e.defaultValue)!=null?ee:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=mh(()=>new Set),a=mh(()=>new Map),i=mh(()=>new Map),s=mh(()=>new Set),o=wB(e),{label:l,children:u,value:d,onValueChange:h,filter:m,shouldFilter:y,loop:v,disablePointerSelection:b=!1,vimBindings:x=!0,...w}=e,S=Ea(),E=Ea(),C=Ea(),T=k.useRef(null),j=Ebe();Gd(()=>{if(d!==void 0){let Q=d.trim();n.current.value=Q,I.emit()}},[d]),Gd(()=>{j(6,Z)},[]);let I=k.useMemo(()=>({subscribe:Q=>(s.current.add(Q),()=>s.current.delete(Q)),snapshot:()=>n.current,setState:(Q,ee,fe)=>{var ve,Oe,Ae,Ne;if(!Object.is(n.current[Q],ee)){if(n.current[Q]=ee,Q==="search")D(),B(),j(1,H);else if(Q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ce=document.getElementById(C);Ce?Ce.focus():(ve=document.getElementById(S))==null||ve.focus()}if(j(7,()=>{var Ce;n.current.selectedItemId=(Ce=V())==null?void 0:Ce.id,I.emit()}),fe||j(5,Z),((Oe=o.current)==null?void 0:Oe.value)!==void 0){let Ce=ee??"";(Ne=(Ae=o.current).onValueChange)==null||Ne.call(Ae,Ce);return}}I.emit()}},emit:()=>{s.current.forEach(Q=>Q())}}),[]),R=k.useMemo(()=>({value:(Q,ee,fe)=>{var ve;ee!==((ve=i.current.get(Q))==null?void 0:ve.value)&&(i.current.set(Q,{value:ee,keywords:fe}),n.current.filtered.items.set(Q,F(ee,fe)),j(2,()=>{B(),I.emit()}))},item:(Q,ee)=>(r.current.add(Q),ee&&(a.current.has(ee)?a.current.get(ee).add(Q):a.current.set(ee,new Set([Q]))),j(3,()=>{D(),B(),n.current.value||H(),I.emit()}),()=>{i.current.delete(Q),r.current.delete(Q),n.current.filtered.items.delete(Q);let fe=V();j(4,()=>{D(),(fe==null?void 0:fe.getAttribute("id"))===Q&&H(),I.emit()})}),group:Q=>(a.current.has(Q)||a.current.set(Q,new Set),()=>{i.current.delete(Q),a.current.delete(Q)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:T}),[]);function F(Q,ee){var fe,ve;let Oe=(ve=(fe=o.current)==null?void 0:fe.filter)!=null?ve:hbe;return Q?Oe(Q,n.current.search,ee):0}function B(){if(!n.current.search||o.current.shouldFilter===!1)return;let Q=n.current.filtered.items,ee=[];n.current.filtered.groups.forEach(ve=>{let Oe=a.current.get(ve),Ae=0;Oe.forEach(Ne=>{let Ce=Q.get(Ne);Ae=Math.max(Ce,Ae)}),ee.push([ve,Ae])});let fe=T.current;ue().sort((ve,Oe)=>{var Ae,Ne;let Ce=ve.getAttribute("id"),Pe=Oe.getAttribute("id");return((Ae=Q.get(Pe))!=null?Ae:0)-((Ne=Q.get(Ce))!=null?Ne:0)}).forEach(ve=>{let Oe=ve.closest(OE);Oe?Oe.appendChild(ve.parentElement===Oe?ve:ve.closest(`${OE} > *`)):fe.appendChild(ve.parentElement===fe?ve:ve.closest(`${OE} > *`))}),ee.sort((ve,Oe)=>Oe[1]-ve[1]).forEach(ve=>{var Oe;let Ae=(Oe=T.current)==null?void 0:Oe.querySelector(`${Km}[${ph}="${encodeURIComponent(ve[0])}"]`);Ae==null||Ae.parentElement.appendChild(Ae)})}function H(){let Q=ue().find(fe=>fe.getAttribute("aria-disabled")!=="true"),ee=Q==null?void 0:Q.getAttribute(ph);I.setState("value",ee||void 0)}function D(){var Q,ee,fe,ve;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Oe=0;for(let Ae of r.current){let Ne=(ee=(Q=i.current.get(Ae))==null?void 0:Q.value)!=null?ee:"",Ce=(ve=(fe=i.current.get(Ae))==null?void 0:fe.keywords)!=null?ve:[],Pe=F(Ne,Ce);n.current.filtered.items.set(Ae,Pe),Pe>0&&Oe++}for(let[Ae,Ne]of a.current)for(let Ce of Ne)if(n.current.filtered.items.get(Ce)>0){n.current.filtered.groups.add(Ae);break}n.current.filtered.count=Oe}function Z(){var Q,ee,fe;let ve=V();ve&&(((Q=ve.parentElement)==null?void 0:Q.firstChild)===ve&&((fe=(ee=ve.closest(Km))==null?void 0:ee.querySelector(fbe))==null||fe.scrollIntoView({block:"nearest"})),ve.scrollIntoView({block:"nearest"}))}function V(){var Q;return(Q=T.current)==null?void 0:Q.querySelector(`${mB}[aria-selected="true"]`)}function ue(){var Q;return Array.from(((Q=T.current)==null?void 0:Q.querySelectorAll(c6))||[])}function ae(Q){let ee=ue()[Q];ee&&I.setState("value",ee.getAttribute(ph))}function ne(Q){var ee;let fe=V(),ve=ue(),Oe=ve.findIndex(Ne=>Ne===fe),Ae=ve[Oe+Q];(ee=o.current)!=null&&ee.loop&&(Ae=Oe+Q<0?ve[ve.length-1]:Oe+Q===ve.length?ve[0]:ve[Oe+Q]),Ae&&I.setState("value",Ae.getAttribute(ph))}function X(Q){let ee=V(),fe=ee==null?void 0:ee.closest(Km),ve;for(;fe&&!ve;)fe=Q>0?_be(fe,Km):Sbe(fe,Km),ve=fe==null?void 0:fe.querySelector(c6);ve?I.setState("value",ve.getAttribute(ph)):ne(Q)}let ie=()=>ae(ue().length-1),L=Q=>{Q.preventDefault(),Q.metaKey?ie():Q.altKey?X(1):ne(1)},J=Q=>{Q.preventDefault(),Q.metaKey?ae(0):Q.altKey?X(-1):ne(-1)};return k.createElement(rn.div,{ref:t,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:Q=>{var ee;(ee=w.onKeyDown)==null||ee.call(w,Q);let fe=Q.nativeEvent.isComposing||Q.keyCode===229;if(!(Q.defaultPrevented||fe))switch(Q.key){case"n":case"j":{x&&Q.ctrlKey&&L(Q);break}case"ArrowDown":{L(Q);break}case"p":case"k":{x&&Q.ctrlKey&&J(Q);break}case"ArrowUp":{J(Q);break}case"Home":{Q.preventDefault(),ae(0);break}case"End":{Q.preventDefault(),ie();break}case"Enter":{Q.preventDefault();let ve=V();if(ve){let Oe=new Event(ik);ve.dispatchEvent(Oe)}}}}},k.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:kbe},l),_1(e,Q=>k.createElement(yB.Provider,{value:I},k.createElement(gB.Provider,{value:R},Q))))}),pbe=k.forwardRef((e,t)=>{var n,r;let a=Ea(),i=k.useRef(null),s=k.useContext(bB),o=ay(),l=wB(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;Gd(()=>{if(!u)return o.item(a,s==null?void 0:s.id)},[u]);let d=xB(a,i,[e.value,e.children,i],e.keywords),h=SA(),m=Iu(j=>j.value&&j.value===d.current),y=Iu(j=>u||o.filter()===!1?!0:j.search?j.filtered.items.get(a)>0:!0);k.useEffect(()=>{let j=i.current;if(!(!j||e.disabled))return j.addEventListener(ik,v),()=>j.removeEventListener(ik,v)},[y,e.onSelect,e.disabled]);function v(){var j,I;b(),(I=(j=l.current).onSelect)==null||I.call(j,d.current)}function b(){h.setState("value",d.current,!0)}if(!y)return null;let{disabled:x,value:w,onSelect:S,forceMount:E,keywords:C,...T}=e;return k.createElement(rn.div,{ref:Yl(i,t),...T,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!m,"data-disabled":!!x,"data-selected":!!m,onPointerMove:x||o.getDisablePointerSelection()?void 0:b,onClick:x?void 0:v},e.children)}),mbe=k.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,s=Ea(),o=k.useRef(null),l=k.useRef(null),u=Ea(),d=ay(),h=Iu(y=>a||d.filter()===!1?!0:y.search?y.filtered.groups.has(s):!0);Gd(()=>d.group(s),[]),xB(s,o,[e.value,e.heading,l]);let m=k.useMemo(()=>({id:s,forceMount:a}),[a]);return k.createElement(rn.div,{ref:Yl(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&k.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),_1(e,y=>k.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},k.createElement(bB.Provider,{value:m},y))))}),gbe=k.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=k.useRef(null),i=Iu(s=>!s.search);return!n&&!i?null:k.createElement(rn.div,{ref:Yl(a,t),...r,"cmdk-separator":"",role:"separator"})}),ybe=k.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=SA(),s=Iu(u=>u.search),o=Iu(u=>u.selectedItemId),l=ay();return k.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),k.createElement(rn.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:a?e.value:s,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),bbe=k.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=k.useRef(null),s=k.useRef(null),o=Iu(u=>u.selectedItemId),l=ay();return k.useEffect(()=>{if(s.current&&i.current){let u=s.current,d=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let y=u.offsetHeight;d.style.setProperty("--cmdk-list-height",y.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(h),m.unobserve(u)}}},[]),k.createElement(rn.div,{ref:Yl(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},_1(e,u=>k.createElement("div",{ref:Yl(s,l.listInnerRef),"cmdk-list-sizer":""},u)))}),vbe=k.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:s,...o}=e;return k.createElement(K9,{open:n,onOpenChange:r},k.createElement(W9,{container:s},k.createElement(Z9,{"cmdk-overlay":"",className:a}),k.createElement(Y9,{"aria-label":e.label,"cmdk-dialog":"",className:i},k.createElement(vB,{ref:t,...o}))))}),wbe=k.forwardRef((e,t)=>Iu(n=>n.filtered.count===0)?k.createElement(rn.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),xbe=k.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return k.createElement(rn.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},_1(e,s=>k.createElement("div",{"aria-hidden":!0},s)))}),Tp=Object.assign(vB,{List:bbe,Item:pbe,Input:ybe,Group:mbe,Separator:gbe,Dialog:vbe,Empty:wbe,Loading:xbe});function _be(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Sbe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function wB(e){let t=k.useRef(e);return Gd(()=>{t.current=e}),t}var Gd=typeof window>"u"?k.useEffect:k.useLayoutEffect;function mh(e){let t=k.useRef();return t.current===void 0&&(t.current=e()),t}function Iu(e){let t=SA(),n=()=>e(t.snapshot());return k.useSyncExternalStore(t.subscribe,n,n)}function xB(e,t,n,r=[]){let a=k.useRef(),i=ay();return Gd(()=>{var s;let o=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),l=r.map(u=>u.trim());i.value(e,o,l),(s=t.current)==null||s.setAttribute(ph,o),a.current=o}),a}var Ebe=()=>{let[e,t]=k.useState(),n=mh(()=>new Map);return Gd(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Cbe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function _1({asChild:e,children:t},n){return e&&k.isValidElement(t)?k.cloneElement(Cbe(t),{ref:t.ref},n(t.props.children)):n(t)}var kbe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function _B({className:e,...t}){return p.jsx(Tp,{"data-slot":"command",className:_t("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function SB({className:e,...t}){return p.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[p.jsx(no,{className:"size-4 shrink-0 opacity-50"}),p.jsx(Tp.Input,{"data-slot":"command-input",className:_t("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function EB({className:e,...t}){return p.jsx(Tp.List,{"data-slot":"command-list",className:_t("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function CB({...e}){return p.jsx(Tp.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function kB({className:e,...t}){return p.jsx(Tp.Group,{"data-slot":"command-group",className:_t("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function TB({className:e,...t}){return p.jsx(Tp.Item,{"data-slot":"command-item",className:_t("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const S1=gt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=k.useState(!1),[s,o]=k.useState(""),[l,u]=k.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),{dbProviderConfigs:d,globalModelSortOrder:h,isLoading:m}=Bn(dn(E=>({dbProviderConfigs:E.dbProviderConfigs,globalModelSortOrder:E.globalModelSortOrder,isLoading:E.isLoading}))),y=k.useMemo(()=>{const E=new Map,C=new Set;d.forEach(I=>{if(!I.isEnabled||!I.enabledModels)return;const R=Bn.getState().getAllAvailableModelDefsForProvider(I.id)??[],F=new Map(R.map(B=>[B.id,B]));I.enabledModels.forEach(B=>{const H=au(I.id,B),D=F.get(B);D&&(C.add(H),E.set(H,{name:D.name||B,providerName:I.name,metadata:D}))})});const T=[],j=new Set;return h.forEach(I=>{if(C.has(I)){const R=E.get(I);R&&!j.has(I)&&(T.push({id:I,...R}),j.add(I))}}),C.forEach(I=>{if(!j.has(I)){const R=E.get(I);R&&T.push({id:I,...R})}}),T},[d,h]),v=k.useMemo(()=>{let E=y;if(s.trim()){const T=s.toLowerCase();E=y.filter(j=>j.name.toLowerCase().includes(T)||j.providerName.toLowerCase().includes(T)||j.id.toLowerCase().includes(T))}const C=Object.entries(l).filter(([,T])=>T).map(([T])=>T);return C.length===0?E:E.filter(T=>{var R,F,B;const j=new Set(((R=T.metadata)==null?void 0:R.supported_parameters)??[]),I=new Set(((B=(F=T.metadata)==null?void 0:F.architecture)==null?void 0:B.input_modalities)??[]);return C.every(H=>{switch(H){case"reasoning":return j.has("reasoning");case"webSearch":return j.has("web_search")||j.has("web_search_options");case"tools":return j.has("tools");case"multimodal":return Array.from(I).some(D=>D!=="text");default:return!0}})})},[y,s,l]),b=k.useMemo(()=>y.find(E=>E.id===e),[y,e]),x=k.useCallback(E=>{t(E===e?null:E),i(!1),o("")},[t,e]),w=E=>{u(C=>({...C,[E]:!C[E]}))};if(m)return p.jsx(ur,{className:_t("h-9 w-[250px]",r)});const S=Object.values(l).filter(Boolean).length;return p.jsxs(fc,{open:a,onOpenChange:i,children:[p.jsx(hc,{asChild:!0,children:p.jsxs(Rt,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||y.length===0,className:_t("w-auto justify-between h-9 text-sm font-normal",r),children:[p.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:b?`${b.name} (${b.providerName})`:"Select Model..."}),p.jsx(Jw,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(pc,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:p.jsxs(_B,{shouldFilter:!1,children:[p.jsxs("div",{className:"flex items-center border-b px-3",children:[p.jsx(no,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(SB,{placeholder:"Search model...",value:s,onValueChange:o,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[p.jsx(Dn,{tooltipText:"Filter: Reasoning",icon:p.jsx(Xw,{}),onClick:()=>w("reasoning"),variant:l.reasoning?"secondary":"ghost",className:_t("h-7 w-7",l.reasoning&&"text-primary"),"aria-label":"Filter by reasoning capability"}),p.jsx(Dn,{tooltipText:"Filter: Web Search",icon:p.jsx(no,{}),onClick:()=>w("webSearch"),variant:l.webSearch?"secondary":"ghost",className:_t("h-7 w-7",l.webSearch&&"text-primary"),"aria-label":"Filter by web search capability"}),p.jsx(Dn,{tooltipText:"Filter: Tools",icon:p.jsx(Sk,{}),onClick:()=>w("tools"),variant:l.tools?"secondary":"ghost",className:_t("h-7 w-7",l.tools&&"text-primary"),"aria-label":"Filter by tool usage capability"}),p.jsx(Dn,{tooltipText:"Filter: Multimodal",icon:p.jsx(wk,{}),onClick:()=>w("multimodal"),variant:l.multimodal?"secondary":"ghost",className:_t("h-7 w-7",l.multimodal&&"text-primary"),"aria-label":"Filter by multimodal capability"})]})]}),p.jsxs(EB,{children:[p.jsx(CB,{children:S>0?"No models match all active filters.":"No model found."}),p.jsx(kB,{children:v.map(E=>p.jsxs(TB,{value:E.id,onSelect:x,children:[p.jsx(xi,{className:_t("mr-2 h-4 w-4",e===E.id?"opacity-100":"opacity-0")}),p.jsxs("span",{className:"truncate",children:[E.name," (",E.providerName,")"]})]},E.id))})]})]})})]})});S1.displayName="GlobalModelSelector";const Tbe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:s,setTopP:o,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:m,setPresencePenalty:y,frequencyPenalty:v,setFrequencyPenalty:b,autoTitleEnabled:x,setAutoTitleEnabled:w,autoTitleModelId:S,setAutoTitleModelId:E,autoTitlePromptMaxLength:C,setAutoTitlePromptMaxLength:T,autoTitleIncludeFiles:j,setAutoTitleIncludeFiles:I,autoTitleIncludeRules:R,setAutoTitleIncludeRules:F,resetAssistantSettings:B}=fr(dn(X=>({globalSystemPrompt:X.globalSystemPrompt,setGlobalSystemPrompt:X.setGlobalSystemPrompt,toolMaxSteps:X.toolMaxSteps,setToolMaxSteps:X.setToolMaxSteps,temperature:X.temperature,setTemperature:X.setTemperature,topP:X.topP,setTopP:X.setTopP,maxTokens:X.maxTokens,setMaxTokens:X.setMaxTokens,topK:X.topK,setTopK:X.setTopK,presencePenalty:X.presencePenalty,setPresencePenalty:X.setPresencePenalty,frequencyPenalty:X.frequencyPenalty,setFrequencyPenalty:X.setFrequencyPenalty,autoTitleEnabled:X.autoTitleEnabled,setAutoTitleEnabled:X.setAutoTitleEnabled,autoTitleModelId:X.autoTitleModelId,setAutoTitleModelId:X.setAutoTitleModelId,autoTitlePromptMaxLength:X.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:X.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:X.autoTitleIncludeFiles,setAutoTitleIncludeFiles:X.setAutoTitleIncludeFiles,autoTitleIncludeRules:X.autoTitleIncludeRules,setAutoTitleIncludeRules:X.setAutoTitleIncludeRules,resetAssistantSettings:X.resetAssistantSettings}))),H=X=>{const ie=X.target.value,L=ie===""?5:parseInt(ie,10);isNaN(L)||r(L)},D=X=>{const ie=X.target.value,L=ie===""?768:parseInt(ie,10);isNaN(L)||T(L)},Z=X=>{X!==null&&i(X)},V=X=>{X!==null&&o(X)},ue=X=>{X!==null&&y(X)},ae=X=>{X!==null&&b(X)},ne=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&B()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),p.jsx(Gt,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),p.jsx(Hu,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:X=>t(X.target.value),rows:4})]}),p.jsx(Xs,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),p.jsx(hB,{temperature:a,setTemperature:Z,topP:s,setTopP:V,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:m,setPresencePenalty:ue,frequencyPenalty:v,setFrequencyPenalty:ae,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]}),p.jsx(Xs,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),p.jsx(Gt,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),p.jsx(Cn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:H,className:"w-24"})]}),p.jsx(Xs,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Automatic Title Generation"}),p.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[p.jsx(Li,{id:"auto-title-enabled",checked:x,onCheckedChange:w,"aria-labelledby":"auto-title-enabled-label"}),p.jsx(Gt,{id:"auto-title-enabled-label",htmlFor:"auto-title-enabled",children:"Enable Auto-Title for New Chats"})]}),x&&p.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted ml-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"auto-title-model",children:"Model for Title Generation"}),p.jsx(S1,{value:S,onChange:E,className:"w-full"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a fast and capable model for generating concise titles."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"auto-title-max-length",children:"Max Prompt Length for Title Generation (Chars)"}),p.jsx(Cn,{id:"auto-title-max-length",type:"number",min:"100",max:"4000",step:"10",value:C,onChange:D,className:"w-24"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Limits the initial prompt length sent for title generation (100-4000)."})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Li,{id:"auto-title-include-files",checked:j,onCheckedChange:I,"aria-labelledby":"auto-title-include-files-label"}),p.jsx(Gt,{id:"auto-title-include-files-label",htmlFor:"auto-title-include-files",children:"Include file names/types in title prompt"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Li,{id:"auto-title-include-rules",checked:R,onCheckedChange:F,"aria-labelledby":"auto-title-include-rules-label"}),p.jsx(Gt,{id:"auto-title-include-rules-label",htmlFor:"auto-title-include-rules",children:"Include active rules in title prompt"})]})]})]}),p.jsx(Xs,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(Rt,{variant:"outline",size:"sm",onClick:ne,children:[p.jsx(_k,{className:"mr-2 h-4 w-4"}),"Reset Assistant Settings"]})})]})},Abe=gt.memo(Tbe);var E1="Checkbox",[Nbe,s2e]=di(E1),[Rbe,Ibe]=Nbe(E1),AB=k.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,y]=k.useState(null),v=kn(t,C=>y(C)),b=k.useRef(!1),x=m?d||!!m.closest("form"):!0,[w,S]=Is({prop:a,defaultProp:i??!1,onChange:u,caller:E1}),E=k.useRef(w);return k.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const T=()=>S(E.current);return C.addEventListener("reset",T),()=>C.removeEventListener("reset",T)}},[m,S]),p.jsxs(Rbe,{scope:n,state:w,disabled:o,children:[p.jsx(rn.button,{type:"button",role:"checkbox","aria-checked":uu(w)?"mixed":w,"aria-required":s,"data-state":jB(w),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onKeyDown:Ht(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Ht(e.onClick,C=>{S(T=>uu(T)?!0:!T),x&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),x&&p.jsx(IB,{control:m,bubbles:!b.current,name:r,value:l,checked:w,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:uu(i)?!1:i})]})});AB.displayName=E1;var NB="CheckboxIndicator",RB=k.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Ibe(NB,n);return p.jsx(Ta,{present:r||uu(i.state)||i.state===!0,children:p.jsx(rn.span,{"data-state":jB(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});RB.displayName=NB;var jbe="CheckboxBubbleInput",IB=k.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},s)=>{const o=k.useRef(null),l=kn(o,s),u=n1(n),d=gx(t);k.useEffect(()=>{const m=o.current;if(!m)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(u!==n&&b){const x=new Event("click",{bubbles:r});m.indeterminate=uu(n),b.call(m,uu(n)?!1:n),m.dispatchEvent(x)}},[u,n,r]);const h=k.useRef(uu(n)?!1:n);return p.jsx(rn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});IB.displayName=jbe;function uu(e){return e==="indeterminate"}function jB(e){return uu(e)?"indeterminate":e?"checked":"unchecked"}var Obe=AB,Dbe=RB;function c0({className:e,...t}){return p.jsx(Obe,{"data-slot":"checkbox",className:_t("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(Dbe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(xi,{className:"size-3.5"})})})}const Mbe=()=>{const{importConversation:e,exportAllConversations:t}=mn(dn(D=>({importConversation:D.importConversation,exportAllConversations:D.exportAllConversations}))),n=k.useRef(null),r=k.useRef(null),[a,i]=k.useState(!1),[s,o]=k.useState(!1),[l,u]=k.useState(!1),[d,h]=k.useState(!1),[m,y]=k.useState(!1),[v,b]=k.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),[x,w]=k.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),S=()=>{var D;(D=n.current)==null||D.click()},E=()=>{var D;(D=r.current)==null||D.click()},C=k.useCallback(async D=>{var V;const Z=(V=D.target.files)==null?void 0:V[0];if(Z){i(!0);try{await e(Z)}catch(ue){console.error("Import failed (from component):",ue)}finally{n.current&&(n.current.value=""),i(!1)}}},[e]),T=k.useCallback(async D=>{var V;const Z=(V=D.target.files)==null?void 0:V[0];if(Z){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}y(!0);try{await vh.importFullConfiguration(Z,v)}catch(ue){console.error("Full import failed (from component):",ue)}finally{r.current&&(r.current.value=""),y(!1)}}},[v]),j=k.useCallback(async()=>{o(!0);try{await t()}catch(D){console.error("Export all failed (from component):",D)}finally{o(!1)}},[t]),I=k.useCallback(async()=>{h(!0);try{await vh.exportFullConfiguration(x)}catch(D){console.error("Full export failed (from component):",D)}finally{h(!1)}},[x]),R=k.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await xt.clearAllData(),Ye.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(D){const Z="Failed to clear all data";console.error(Z,D),Ye.error(`${Z}: ${D instanceof Error?D.message:String(D)}`),u(!1)}}},[]),F=(D,Z)=>{b(V=>({...V,[D]:Z}))},B=(D,Z)=>{w(V=>({...V,[D]:Z}))},H=(D,Z,V,ue)=>{const ae=D==="import"?v:x,ne=D==="import"?F:B,X=D==="import"?m:d;return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(c0,{id:`${D}-${Z}`,checked:ae[Z],onCheckedChange:ie=>ne(Z,!!ie),disabled:X}),p.jsxs(Gt,{htmlFor:`${D}-${Z}`,className:"text-sm font-normal flex items-center gap-1.5",children:[p.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})," ",V]})]},`${D}-${Z}`)};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Gt,{className:"font-semibold",children:"Import Conversation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),p.jsx("input",{type:"file",ref:n,onChange:C,accept:".json",className:"hidden",id:"import-file-input",disabled:a}),p.jsxs(Rt,{onClick:S,variant:"outline",size:"sm",disabled:a,children:[a?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(KV,{className:"mr-2 h-4 w-4"}),a?"Importing...":"Select File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Gt,{className:"font-semibold",children:"Export All Conversations"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),p.jsxs(Rt,{onClick:j,variant:"outline",size:"sm",disabled:s,children:[s?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(jd,{className:"mr-2 h-4 w-4"}),s?"Exporting...":"Export All Chats"]})]})]})]}),p.jsx(Xs,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Gt,{className:"font-semibold",children:"Import Full Configuration"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Import a full configuration backup (.json). Select which data types to import below."," ",p.jsx("strong",{className:"text-destructive",children:"This will overwrite existing data for selected types."})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[H("import","importSettings","Settings",Pv),H("import","importApiKeys","API Keys",VE),H("import","importProviderConfigs","Providers",t3),H("import","importProjects","Projects",QI),H("import","importConversations","Conversations",GE),H("import","importRulesAndTags","Rules & Tags",KE),H("import","importMods","Mods",e3),H("import","importSyncRepos","Sync Repos",fu)]}),p.jsx("input",{type:"file",ref:r,onChange:T,accept:".json",className:"hidden",id:"full-import-file-input",disabled:m}),p.jsxs(Rt,{onClick:E,variant:"outline",size:"sm",disabled:m,className:"mt-2",children:[m?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(zH,{className:"mr-2 h-4 w-4"}),m?"Importing...":"Select Full Backup File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Gt,{className:"font-semibold",children:"Export Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[H("export","importSettings","Settings",Pv),H("export","importApiKeys","API Keys",VE),H("export","importProviderConfigs","Providers",t3),H("export","importProjects","Projects",QI),H("export","importConversations","Conversations",GE),H("export","importRulesAndTags","Rules & Tags",KE),H("export","importMods","Mods",e3),H("export","importSyncRepos","Sync Repos",fu)]}),p.jsxs(Rt,{onClick:I,variant:"outline",size:"sm",disabled:d,className:"mt-2",children:[d?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(OH,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export Full Backup"]})]})]})]}),p.jsx(Xs,{}),p.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[p.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),p.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),p.jsxs(Rt,{onClick:R,variant:"destructive",disabled:l,children:[l?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx($i,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},Pbe=gt.memo(Mbe),Fbe=pk("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function OB({className:e,variant:t,...n}){return p.jsx("div",{"data-slot":"alert",role:"alert",className:_t(Fbe({variant:t}),e),...n})}function DB({className:e,...t}){return p.jsx("div",{"data-slot":"alert-title",className:_t("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function MB({className:e,...t}){return p.jsx("div",{"data-slot":"alert-description",className:_t("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function Ap({className:e,...t}){return p.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:p.jsx("table",{"data-slot":"table",className:_t("w-full caption-bottom text-sm",e),...t})})}function Np({className:e,...t}){return p.jsx("thead",{"data-slot":"table-header",className:_t("[&_tr]:border-b",e),...t})}function Rp({className:e,...t}){return p.jsx("tbody",{"data-slot":"table-body",className:_t("[&_tr:last-child]:border-0",e),...t})}function Yr({className:e,...t}){return p.jsx("tr",{"data-slot":"table-row",className:_t("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Tr({className:e,...t}){return p.jsx("th",{"data-slot":"table-head",className:_t("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Mn({className:e,...t}){return p.jsx("td",{"data-slot":"table-cell",className:_t("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const Lbe=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=l0(dn(j=>({loadedMods:j.loadedMods,addDbMod:j.addDbMod,updateDbMod:j.updateDbMod,deleteDbMod:j.deleteDbMod,dbMods:j.dbMods,isLoading:j.isLoading}))),[s,o]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState(""),[m,y]=k.useState(!1),[v,b]=k.useState({}),[x,w]=k.useState({}),S=k.useCallback(async()=>{if(!s.trim()){Ye.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){Ye.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){Ye.error("Provide either a Mod URL or Script Content, not both.");return}y(!0);try{const j={name:s.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(j),o(""),u(""),h(""),Ye.info("Mod added. Reload required for changes to take effect.")}catch(j){console.error("Failed to add mod (from component):",j)}finally{y(!1)}},[s,l,d,t,a==null?void 0:a.length]),E=k.useCallback(async j=>{b(I=>({...I,[j.id]:!0}));try{await n(j.id,{enabled:!j.enabled}),Ye.info(`Mod "${j.name}" ${j.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(I){console.error("Failed to update mod (from component):",I)}finally{b(I=>({...I,[j.id]:!1}))}},[n]),C=k.useCallback(async j=>{if(window.confirm(`Are you sure you want to delete the mod "${j.name}"? This cannot be undone.`)){w(I=>({...I,[j.id]:!0}));try{await r(j.id),Ye.info("Mod deleted. Reload required for changes to take effect.")}catch(I){console.error("Failed to delete mod (from component):",I)}finally{w(I=>({...I,[j.id]:!1}))}}},[r]),T=k.useCallback(j=>{const I=e.find(F=>F.id===j);if(I)if(I.error){const F=I.error instanceof Error?I.error.message:String(I.error);return{status:"Error",error:I.error,tooltip:F}}else return{status:"Loaded"};const R=(a||[]).find(F=>F.id===j);return R?R.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs(OB,{variant:"destructive",className:"border-destructive/50",children:[p.jsx(ex,{className:"h-4 w-4"}),p.jsx(DB,{children:"Security Warning"}),p.jsx(MB,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),p.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Gt,{htmlFor:"mod-name",children:"Mod Name"}),p.jsx(Cn,{id:"mod-name",value:s,onChange:j=>o(j.target.value),placeholder:"My Awesome Mod",disabled:m})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Gt,{htmlFor:"mod-url",children:"Source URL (Optional)"}),p.jsx(Cn,{id:"mod-url",type:"url",value:l,onChange:j=>u(j.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!d.trim()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Gt,{htmlFor:"mod-script",children:"Script Content (Optional)"}),p.jsx(Hu,{id:"mod-script",value:d,onChange:j=>h(j.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!l.trim()})]}),p.jsxs(Rt,{onClick:S,disabled:m,children:[m&&p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),p.jsx("div",{className:"rounded-md border",children:p.jsx(Gn,{delayDuration:100,children:p.jsxs(Ap,{children:[p.jsx(Np,{children:p.jsxs(Yr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{children:"Source"}),p.jsx(Tr,{children:"Status"}),p.jsx(Tr,{className:"text-center",children:"Enabled"}),p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Rp,{children:i?p.jsxs(p.Fragment,{children:[p.jsx(Yr,{children:p.jsx(Mn,{colSpan:5,children:p.jsx(ur,{className:"h-10 w-full"})})}),p.jsx(Yr,{children:p.jsx(Mn,{colSpan:5,children:p.jsx(ur,{className:"h-10 w-full"})})})]}):(a||[]).length===0?p.jsx(Yr,{children:p.jsx(Mn,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(j=>{const{status:I,error:R,tooltip:F}=T(j.id),B=j.sourceUrl?new URL(j.sourceUrl).hostname:"Direct Script",H=v[j.id],D=x[j.id],Z=H||D,V=I==="Error";return p.jsxs(Yr,{children:[p.jsx(Mn,{className:"font-medium",children:j.name}),p.jsx(Mn,{className:"text-muted-foreground",children:B}),p.jsxs(Mn,{children:[p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx("span",{className:V?"text-destructive font-semibold cursor-help":"",children:I})}),F&&p.jsx(Qn,{className:"max-w-xs break-words",children:p.jsx("p",{children:F})})]}),V&&R&&p.jsx("p",{className:"text-xs text-destructive truncate",children:R instanceof Error?R.message:String(R)})]}),p.jsxs(Mn,{className:"text-center",children:[p.jsx(Li,{checked:j.enabled??!1,onCheckedChange:()=>E(j),disabled:Z,"aria-label":`Enable ${j.name}`}),H&&p.jsx(On,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),p.jsx(Mn,{className:"text-right",children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:()=>C(j),disabled:Z,"aria-label":`Delete ${j.name}`,className:"text-destructive hover:text-destructive/80",children:D?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx($i,{className:"h-4 w-4"})})})]},j.id)})})]})})})]})]})},$be=gt.memo(Lbe),Bbe=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:s,isDeleting:o,onSelectModelForDetails:l})=>{var H,D;const[u,d]=k.useState(!0),h=Lh(e.type),m=Fk(e.type),y=Sd(e.type),v=s==="fetching"||o,b=o||s==="fetching",x=o||s==="fetching",S=Bn(Z=>Z.getAllAvailableModelDefsForProvider)(e.id),E=k.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),C=e.apiKeyId?t.some(Z=>Z.id===e.apiKeyId):!1,T=h&&!C,j=k.useCallback(async(Z,V)=>{const ue=new Set(e.enabledModels??[]);V?ue.add(Z):ue.delete(Z);const ae=Array.from(ue);try{await i(e.id,{enabledModels:ae})}catch(ne){Ye.error("Failed to update model status."),console.error("Failed to save model toggle:",ne)}},[e.enabledModels,e.id,i]),I=()=>d(Z=>!Z),R=((H=e.enabledModels)==null?void 0:H.length)??0,F=S.length,B=Z=>{const V=au(e.id,Z);l(V)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{children:p.jsx("span",{className:_t("h-2.5 w-2.5 rounded-full flex-shrink-0 block",s==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),p.jsx(Qn,{side:"top",children:s==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),p.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),p.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),T&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{children:p.jsx(Nh,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),p.jsx(Qn,{side:"top",children:p.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),p.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[p.jsx(Dn,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:p.jsx(g0,{}),className:"h-8 w-8"}),p.jsx(Dn,{tooltipText:"Delete",onClick:r,disabled:x,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx($i,{})})]})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&p.jsxs("div",{children:["API Key:"," ",e.apiKeyId?C?p.jsx("span",{className:"text-green-400",children:((D=t.find(Z=>Z.id===e.apiKeyId))==null?void 0:D.name)||"Linked (Unnamed Key)"}):p.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):p.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),m&&p.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),p.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?p.jsx("span",{className:"text-green-400",children:"Enabled"}):p.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),y&&p.jsx("div",{className:"pt-1",children:p.jsxs(Rt,{variant:"outline",size:"sm",onClick:a,disabled:v,className:"text-xs h-7 px-2",children:[s==="fetching"&&p.jsx(On,{className:"h-3 w-3 mr-1 animate-spin"}),s==="success"&&p.jsx(xi,{className:"h-3 w-3 mr-1 text-green-500"}),s==="error"&&p.jsx(Nh,{className:"h-3 w-3 mr-1 text-destructive"}),s==="idle"&&p.jsx(Qw,{className:"h-3 w-3 mr-1"}),s==="fetching"?"Fetching...":s==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),p.jsxs("div",{className:"space-y-1 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",R," / ",F," enabled)"]}),p.jsx(Dn,{tooltipText:u?"Show Models":"Hide Models",onClick:I,"aria-label":u?"Show model list":"Hide model list",icon:u?p.jsx(sl,{}):p.jsx(Kd,{}),className:"h-6 w-6"})]}),!u&&p.jsx(lA,{providerId:e.id,allAvailableModels:S,enabledModelIds:E,onToggleModel:j,isLoading:s==="fetching",disabled:o,listHeightClass:"h-64",onModelClick:B})]})]})},zbe=gt.memo(Bbe),Ube=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:s,onChange:o})=>{const l=Lh(t.type??null),u=Fk(t.type??null),d=Sd(t.type??null),h=t.isEnabled??!1,m=t.autoFetchModels??!1,y=k.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=k.useCallback((b,x)=>{const w=new Set(t.enabledModels??[]);x?w.add(b):w.delete(b);const S=Array.from(w);o("enabledModels",S)},[t.enabledModels,o]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(Gt,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),p.jsx(Cn,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>o("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(Gt,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),p.jsxs(Yo,{value:t.type??"",onValueChange:b=>o("type",b),disabled:a,children:[p.jsx(Jo,{id:`edit-type-${e}`,children:p.jsx(Xo,{placeholder:"Select Type"})}),p.jsx(Qo,{children:cu.map(b=>p.jsx(sa,{value:b.value,children:b.label},b.value))})]})]}),l&&p.jsxs("div",{className:"space-y-1",children:[p.jsx(Gt,{children:"API Key"}),p.jsx(c$,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>o("apiKeyId",b),apiKeys:n,disabled:a})]}),u&&p.jsxs("div",{className:"space-y-1",children:[p.jsx(Gt,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),p.jsx(Cn,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>o("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),p.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[p.jsx(Li,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>o("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),p.jsx(Gt,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Li,{id:`edit-autofetch-${e}`,checked:m,onCheckedChange:b=>o("autoFetchModels",b),disabled:!d||a,"aria-labelledby":`edit-autofetch-label-${e}`}),p.jsxs(Gt,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:d?"":"text-muted-foreground",children:["Auto-fetch models ",d?"":"(Not Supported)"]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),p.jsx(lA,{providerId:e,allAvailableModels:r,enabledModelIds:y,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),p.jsx(Xs,{className:"my-4"}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[p.jsx(_i,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:s,disabled:a,type:"button",children:[a&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Zd,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},qbe=gt.memo(Ube),Hbe=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:s})=>{const[o,l]=k.useState(!1),[u,d]=k.useState(!1),[h,m]=k.useState(!1),[y,v]=k.useState({}),b=Bn(F=>F.getAllAvailableModelDefsForProvider),[x,w]=k.useState([]),S=k.useMemo(()=>[...x].sort((F,B)=>(F.name||F.id).localeCompare(B.name||B.id)),[x]);k.useEffect(()=>{if(o){const F=b(e.id);w(F.map(B=>({id:B.id,name:B.name}))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else w([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),C=()=>{l(!1),v({}),d(!1)},T=k.useCallback(async()=>{d(!0);try{const F=y.enabledModels&&y.enabledModels.length>0?y.enabledModels:null,B={name:y.name,type:y.type,isEnabled:y.isEnabled,apiKeyId:y.apiKeyId,baseURL:y.baseURL,autoFetchModels:y.autoFetchModels,enabledModels:F};Object.keys(B).forEach(H=>{B[H]===void 0&&delete B[H]}),await n(e.id,B),l(!1),v({}),Ye.success(`Provider "${B.name||e.name}" updated.`)}catch(F){console.error("Failed to save provider update:",F),Ye.error("Failed to save provider configuration.")}finally{d(!1)}},[y,n,e.id,e.name]),j=k.useCallback((F,B)=>{v(H=>({...H,[F]:B}))},[]),I=k.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){m(!0);try{await r(e.id)}catch(F){console.error("Failed to delete provider:",F),m(!1)}}},[r,e.id,e.name]),R=k.useCallback(async()=>{if(await a(e.id),o){const F=b(e.id);w(F.map(B=>({id:B.id,name:B.name})))}},[a,e.id,o,b]);return p.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?p.jsx(qbe,{providerId:e.id,editData:y,apiKeys:t,allAvailableModels:S,isSaving:u,onCancel:C,onSave:T,onChange:j,onUpdate:n}):p.jsx(zbe,{provider:e,apiKeys:t,onEdit:E,onDelete:I,onFetchModels:R,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:s})})},Vbe=gt.memo(Hbe);var DE="rovingFocusGroup.onEntryFocus",Gbe={bubbles:!1,cancelable:!0},iy="RovingFocusGroup",[sk,PB,Kbe]=e1(iy),[Wbe,C1]=di(iy,[Kbe]),[Zbe,Ybe]=Wbe(iy),FB=k.forwardRef((e,t)=>p.jsx(sk.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(sk.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Xbe,{...e,ref:t})})}));FB.displayName=iy;var Xbe=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=k.useRef(null),y=kn(t,m),v=Ep(i),[b,x]=Is({prop:s,defaultProp:o??null,onChange:l,caller:iy}),[w,S]=k.useState(!1),E=La(u),C=PB(n),T=k.useRef(!1),[j,I]=k.useState(0);return k.useEffect(()=>{const R=m.current;if(R)return R.addEventListener(DE,E),()=>R.removeEventListener(DE,E)},[E]),p.jsx(Zbe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:k.useCallback(R=>x(R),[x]),onItemShiftTab:k.useCallback(()=>S(!0),[]),onFocusableItemAdd:k.useCallback(()=>I(R=>R+1),[]),onFocusableItemRemove:k.useCallback(()=>I(R=>R-1),[]),children:p.jsx(rn.div,{tabIndex:w||j===0?-1:0,"data-orientation":r,...h,ref:y,style:{outline:"none",...e.style},onMouseDown:Ht(e.onMouseDown,()=>{T.current=!0}),onFocus:Ht(e.onFocus,R=>{const F=!T.current;if(R.target===R.currentTarget&&F&&!w){const B=new CustomEvent(DE,Gbe);if(R.currentTarget.dispatchEvent(B),!B.defaultPrevented){const H=C().filter(ae=>ae.focusable),D=H.find(ae=>ae.active),Z=H.find(ae=>ae.id===b),ue=[D,Z,...H].filter(Boolean).map(ae=>ae.ref.current);BB(ue,d)}}T.current=!1}),onBlur:Ht(e.onBlur,()=>S(!1))})})}),LB="RovingFocusGroupItem",$B=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s,...o}=e,l=Ea(),u=i||l,d=Ybe(LB,n),h=d.currentTabStopId===u,m=PB(n),{onFocusableItemAdd:y,onFocusableItemRemove:v,currentTabStopId:b}=d;return k.useEffect(()=>{if(r)return y(),()=>v()},[r,y,v]),p.jsx(sk.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:p.jsx(rn.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Ht(e.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:Ht(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ht(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const w=eve(x,d.orientation,d.dir);if(w!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let E=m().filter(C=>C.focusable).map(C=>C.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const C=E.indexOf(x.currentTarget);E=d.loop?tve(E,C+1):E.slice(C+1)}setTimeout(()=>BB(E))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:b!=null}):s})})});$B.displayName=LB;var Jbe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Qbe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function eve(e,t,n){const r=Qbe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Jbe[r]}function BB(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function tve(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var zB=FB,UB=$B,k1="Tabs",[nve,o2e]=di(k1,[C1]),qB=C1(),[rve,EA]=nve(k1),HB=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...u}=e,d=Ep(o),[h,m]=Is({prop:r,onChange:a,defaultProp:i??"",caller:k1});return p.jsx(rve,{scope:n,baseId:Ea(),value:h,onValueChange:m,orientation:s,dir:d,activationMode:l,children:p.jsx(rn.div,{dir:d,"data-orientation":s,...u,ref:t})})});HB.displayName=k1;var VB="TabsList",GB=k.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=EA(VB,n),s=qB(n);return p.jsx(zB,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(rn.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});GB.displayName=VB;var KB="TabsTrigger",WB=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,s=EA(KB,n),o=qB(n),l=XB(s.baseId,r),u=JB(s.baseId,r),d=r===s.value;return p.jsx(UB,{asChild:!0,...o,focusable:!a,active:d,children:p.jsx(rn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:Ht(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:Ht(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:Ht(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!a&&h&&s.onValueChange(r)})})})});WB.displayName=KB;var ZB="TabsContent",YB=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...s}=e,o=EA(ZB,n),l=XB(o.baseId,r),u=JB(o.baseId,r),d=r===o.value,h=k.useRef(d);return k.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),p.jsx(Ta,{present:a||d,children:({present:m})=>p.jsx(rn.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});YB.displayName=ZB;function XB(e,t){return`${e}-trigger-${t}`}function JB(e,t){return`${e}-content-${t}`}var ave=HB,ive=GB,sve=WB,ove=YB;function lve({className:e,...t}){return p.jsx(ave,{"data-slot":"tabs",className:_t("flex flex-col gap-2",e),...t})}function cve({className:e,...t}){return p.jsx(ive,{"data-slot":"tabs-list",className:_t("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function uve({className:e,...t}){return p.jsx(sve,{"data-slot":"tabs-trigger",className:_t("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function dve({className:e,...t}){return p.jsx(ove,{"data-slot":"tabs-content",className:_t("flex-1 outline-none",e),...t})}const Vu=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:s,scrollable:o})=>{var y;const[l,u]=k.useState(n??t??((y=e[0])==null?void 0:y.value));k.useEffect(()=>{n!==void 0&&n!==l&&u(n)},[n,l]);const d=v=>{u(v),r&&r(v)},h=_t("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),m=({children:v})=>{const b=_t("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",s);return o?p.jsx(Ru,{className:b,children:v}):p.jsx("div",{className:b,children:v})};return p.jsxs(lve,{value:l,onValueChange:d,defaultValue:t,className:_t("flex flex-col h-full",a),children:[p.jsx(cve,{className:_t("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>p.jsx(uve,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),p.jsx(m,{children:e.map(v=>p.jsx(dve,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})};function fve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const T1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ip(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function CA(e){return"nodeType"in e}function Vi(e){var t,n;return e?Ip(e)?e:CA(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function kA(e){const{Document:t}=Vi(e);return e instanceof t}function sy(e){return Ip(e)?!1:e instanceof Vi(e).HTMLElement}function QB(e){return e instanceof Vi(e).SVGElement}function jp(e){return e?Ip(e)?e.document:CA(e)?kA(e)?e:sy(e)||QB(e)?e.ownerDocument:document:document:document}const il=T1?k.useLayoutEffect:k.useEffect;function TA(e){const t=k.useRef(e);return il(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function hve(){const e=k.useRef(null),t=k.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=k.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function u0(e,t){t===void 0&&(t=[e]);const n=k.useRef(e);return il(()=>{n.current!==e&&(n.current=e)},t),n}function oy(e,t){const n=k.useRef();return k.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Vw(e){const t=TA(e),n=k.useRef(null),r=k.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function ok(e){const t=k.useRef();return k.useEffect(()=>{t.current=e},[e]),t.current}let ME={};function ly(e,t){return k.useMemo(()=>{if(t)return t;const n=ME[e]==null?0:ME[e]+1;return ME[e]=n,e+"-"+n},[e,t])}function ez(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>{const o=Object.entries(s);for(const[l,u]of o){const d=i[l];d!=null&&(i[l]=d+e*u)}return i},{...t})}}const Ah=ez(1),d0=ez(-1);function pve(e){return"clientX"in e&&"clientY"in e}function AA(e){if(!e)return!1;const{KeyboardEvent:t}=Vi(e.target);return t&&e instanceof t}function mve(e){if(!e)return!1;const{TouchEvent:t}=Vi(e.target);return t&&e instanceof t}function lk(e){if(mve(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return pve(e)?{x:e.clientX,y:e.clientY}:null}const f0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[f0.Translate.toString(e),f0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),u6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gve(e){return e.matches(u6)?e:e.querySelector(u6)}const yve={display:"none"};function bve(e){let{id:t,value:n}=e;return gt.createElement("div",{id:t,style:yve},n)}function vve(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function wve(){const[e,t]=k.useState("");return{announce:k.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const tz=k.createContext(null);function xve(e){const t=k.useContext(tz);k.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function _ve(){const[e]=k.useState(()=>new Set),t=k.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[k.useCallback(r=>{let{type:a,event:i}=r;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const Sve={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Eve={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Cve(e){let{announcements:t=Eve,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Sve}=e;const{announce:i,announcement:s}=wve(),o=ly("DndLiveRegion"),[l,u]=k.useState(!1);if(k.useEffect(()=>{u(!0)},[]),xve(k.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:y}=h;t.onDragMove&&i(t.onDragMove({active:m,over:y}))},onDragOver(h){let{active:m,over:y}=h;i(t.onDragOver({active:m,over:y}))},onDragEnd(h){let{active:m,over:y}=h;i(t.onDragEnd({active:m,over:y}))},onDragCancel(h){let{active:m,over:y}=h;i(t.onDragCancel({active:m,over:y}))}}),[i,t])),!l)return null;const d=gt.createElement(gt.Fragment,null,gt.createElement(bve,{id:r,value:a.draggable}),gt.createElement(vve,{id:o,announcement:s}));return n?Ho.createPortal(d,n):d}var xa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(xa||(xa={}));function Gw(){}function d6(e,t){return k.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function kve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const uo=Object.freeze({x:0,y:0});function nz(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rz(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Tve(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function f6(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function az(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function h6(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Ave=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=h6(t,t.left,t.top),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=nz(h6(l),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(rz)},Nve=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=f6(t),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=f6(l),d=a.reduce((m,y,v)=>m+nz(u[v],y),0),h=Number((d/4).toFixed(4));i.push({id:o,data:{droppableContainer:s,value:h}})}}return i.sort(rz)};function Rve(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const l=t.width*t.height,u=e.width*e.height,d=s*o,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const Ive=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:s}=i,o=n.get(s);if(o){const l=Rve(o,t);l>0&&a.push({id:s,data:{droppableContainer:i,value:l}})}}return a.sort(Tve)};function jve(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function iz(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:uo}function Ove(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...n})}}const Dve=Ove(1);function Mve(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Pve(e,t,n){const r=Mve(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,l=e.left-s-(1-a)*parseFloat(n),u=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const Fve={ignoreTransform:!1};function Op(e,t){t===void 0&&(t=Fve);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Vi(e).getComputedStyle(e);u&&(n=Pve(n,u,d))}const{top:r,left:a,width:i,height:s,bottom:o,right:l}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:l}}function p6(e){return Op(e,{ignoreTransform:!0})}function Lve(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function $ve(e,t){return t===void 0&&(t=Vi(e).getComputedStyle(e)),t.position==="fixed"}function Bve(e,t){t===void 0&&(t=Vi(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function A1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(kA(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!sy(a)||QB(a)||n.includes(a))return n;const i=Vi(e).getComputedStyle(a);return a!==e&&Bve(a,i)&&n.push(a),$ve(a,i)?n:r(a.parentNode)}return e?r(e):n}function sz(e){const[t]=A1(e,1);return t??null}function PE(e){return!T1||!e?null:Ip(e)?e:CA(e)?kA(e)||e===jp(e).scrollingElement?window:sy(e)?e:null:null}function oz(e){return Ip(e)?e.scrollX:e.scrollLeft}function lz(e){return Ip(e)?e.scrollY:e.scrollTop}function ck(e){return{x:oz(e),y:lz(e)}}var Fa;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Fa||(Fa={}));function cz(e){return!T1||!e?!1:e===document.scrollingElement}function uz(e){const t={x:0,y:0},n=cz(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:r,minScroll:t}}const zve={x:.2,y:.2};function Uve(e,t,n,r,a){let{top:i,left:s,right:o,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=zve);const{isTop:u,isBottom:d,isLeft:h,isRight:m}=uz(e),y={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+b.height?(y.y=Fa.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(y.y=Fa.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!m&&o>=t.right-b.width?(y.x=Fa.Forward,v.x=r*Math.abs((t.right-b.width-o)/b.width)):!h&&s<=t.left+b.width&&(y.x=Fa.Backward,v.x=r*Math.abs((t.left+b.width-s)/b.width)),{direction:y,speed:v}}function qve(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function dz(e){return e.reduce((t,n)=>Ah(t,ck(n)),uo)}function Hve(e){return e.reduce((t,n)=>t+oz(n),0)}function Vve(e){return e.reduce((t,n)=>t+lz(n),0)}function Gve(e,t){if(t===void 0&&(t=Op),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);sz(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Kve=[["x",["left","right"],Hve],["y",["top","bottom"],Vve]];class NA{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=A1(n),a=dz(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of Kve)for(const l of s)Object.defineProperty(this,l,{get:()=>{const u=o(r),d=a[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class sg{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Wve(e){const{EventTarget:t}=Vi(e);return e instanceof t?e:jp(e)}function FE(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ks;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ks||(ks={}));function m6(e){e.preventDefault()}function Zve(e){e.stopPropagation()}var er;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(er||(er={}));const fz={start:[er.Space,er.Enter],cancel:[er.Esc],end:[er.Space,er.Enter,er.Tab]},Yve=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case er.Right:return{...n,x:n.x+25};case er.Left:return{...n,x:n.x-25};case er.Down:return{...n,y:n.y+25};case er.Up:return{...n,y:n.y-25}}};class RA{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new sg(jp(n)),this.windowListeners=new sg(Vi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ks.Resize,this.handleCancel),this.windowListeners.add(ks.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ks.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Gve(r),n(uo)}handleKeyDown(t){if(AA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=fz,coordinateGetter:s=Yve,scrollBehavior:o="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:uo;this.referenceCoordinates||(this.referenceCoordinates=d);const h=s(t,{active:n,context:r.current,currentCoordinates:d});if(h){const m=d0(h,d),y={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const x=t.code,{isTop:w,isRight:S,isLeft:E,isBottom:C,maxScroll:T,minScroll:j}=uz(b),I=qve(b),R={x:Math.min(x===er.Right?I.right-I.width/2:I.right,Math.max(x===er.Right?I.left:I.left+I.width/2,h.x)),y:Math.min(x===er.Down?I.bottom-I.height/2:I.bottom,Math.max(x===er.Down?I.top:I.top+I.height/2,h.y))},F=x===er.Right&&!S||x===er.Left&&!E,B=x===er.Down&&!C||x===er.Up&&!w;if(F&&R.x!==h.x){const H=b.scrollLeft+m.x,D=x===er.Right&&H<=T.x||x===er.Left&&H>=j.x;if(D&&!m.y){b.scrollTo({left:H,behavior:o});return}D?y.x=b.scrollLeft-H:y.x=x===er.Right?b.scrollLeft-T.x:b.scrollLeft-j.x,y.x&&b.scrollBy({left:-y.x,behavior:o});break}else if(B&&R.y!==h.y){const H=b.scrollTop+m.y,D=x===er.Down&&H<=T.y||x===er.Up&&H>=j.y;if(D&&!m.x){b.scrollTo({top:H,behavior:o});return}D?y.y=b.scrollTop-H:y.y=x===er.Down?b.scrollTop-T.y:b.scrollTop-j.y,y.y&&b.scrollBy({top:-y.y,behavior:o});break}}this.handleMove(t,Ah(d0(h,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}RA.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=fz,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function g6(e){return!!(e&&"distance"in e)}function y6(e){return!!(e&&"delay"in e)}class IA{constructor(t,n,r){var a;r===void 0&&(r=Wve(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=jp(s),this.documentListeners=new sg(this.document),this.listeners=new sg(r),this.windowListeners=new sg(Vi(s)),this.initialCoordinates=(a=lk(i))!=null?a:uo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ks.Resize,this.handleCancel),this.windowListeners.add(ks.DragStart,m6),this.windowListeners.add(ks.VisibilityChange,this.handleCancel),this.windowListeners.add(ks.ContextMenu,m6),this.documentListeners.add(ks.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(y6(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(g6(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ks.Click,Zve,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ks.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const l=(n=lk(t))!=null?n:uo,u=d0(a,l);if(!r&&o){if(g6(o)){if(o.tolerance!=null&&FE(u,o.tolerance))return this.handleCancel();if(FE(u,o.distance))return this.handleStart()}if(y6(o)&&FE(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===er.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Xve={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class jA extends IA{constructor(t){const{event:n}=t,r=jp(n.target);super(t,Xve,r)}}jA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Jve={move:{name:"mousemove"},end:{name:"mouseup"}};var uk;(function(e){e[e.RightClick=2]="RightClick"})(uk||(uk={}));class Qve extends IA{constructor(t){super(t,Jve,jp(t.event.target))}}Qve.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===uk.RightClick?!1:(r==null||r({event:n}),!0)}}];const LE={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ewe extends IA{constructor(t){super(t,LE)}static setup(){return window.addEventListener(LE.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(LE.move.name,t)};function t(){}}}ewe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var og;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(og||(og={}));var Kw;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Kw||(Kw={}));function twe(e){let{acceleration:t,activator:n=og.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:o=Kw.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:m}=e;const y=rwe({delta:h,disabled:!i}),[v,b]=hve(),x=k.useRef({x:0,y:0}),w=k.useRef({x:0,y:0}),S=k.useMemo(()=>{switch(n){case og.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case og.DraggableRect:return a}},[n,a,l]),E=k.useRef(null),C=k.useCallback(()=>{const j=E.current;if(!j)return;const I=x.current.x*w.current.x,R=x.current.y*w.current.y;j.scrollBy(I,R)},[]),T=k.useMemo(()=>o===Kw.TreeOrder?[...u].reverse():u,[o,u]);k.useEffect(()=>{if(!i||!u.length||!S){b();return}for(const j of T){if((r==null?void 0:r(j))===!1)continue;const I=u.indexOf(j),R=d[I];if(!R)continue;const{direction:F,speed:B}=Uve(j,R,S,t,m);for(const H of["x","y"])y[H][F[H]]||(B[H]=0,F[H]=0);if(B.x>0||B.y>0){b(),E.current=j,v(C,s),x.current=B,w.current=F;return}}x.current={x:0,y:0},w.current={x:0,y:0},b()},[t,C,r,b,i,s,JSON.stringify(S),JSON.stringify(y),v,u,T,d,JSON.stringify(m)])}const nwe={x:{[Fa.Backward]:!1,[Fa.Forward]:!1},y:{[Fa.Backward]:!1,[Fa.Forward]:!1}};function rwe(e){let{delta:t,disabled:n}=e;const r=ok(t);return oy(a=>{if(n||!r||!a)return nwe;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Fa.Backward]:a.x[Fa.Backward]||i.x===-1,[Fa.Forward]:a.x[Fa.Forward]||i.x===1},y:{[Fa.Backward]:a.y[Fa.Backward]||i.y===-1,[Fa.Forward]:a.y[Fa.Forward]||i.y===1}}},[n,t,r])}function awe(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return oy(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function iwe(e,t){return k.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var h0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(h0||(h0={}));var dk;(function(e){e.Optimized="optimized"})(dk||(dk={}));const b6=new Map;function swe(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=k.useState(null),{frequency:o,measure:l,strategy:u}=a,d=k.useRef(e),h=x(),m=u0(h),y=k.useCallback(function(w){w===void 0&&(w=[]),!m.current&&s(S=>S===null?w:S.concat(w.filter(E=>!S.includes(E))))},[m]),v=k.useRef(null),b=oy(w=>{if(h&&!n)return b6;if(!w||w===b6||d.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,T=C?new NA(l(C),C):null;E.rect.current=T,T&&S.set(E.id,T)}return S}return w},[e,i,n,h,l]);return k.useEffect(()=>{d.current=e},[e]),k.useEffect(()=>{h||y()},[n,h]),k.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),k.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{y(),v.current=null},o))},[o,h,y,...r]),{droppableRects:b,measureDroppableContainers:y,measuringScheduled:i!=null};function x(){switch(u){case h0.Always:return!1;case h0.BeforeDragging:return n;default:return!n}}}function hz(e,t){return oy(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function owe(e,t){return hz(e,t)}function lwe(e){let{callback:t,disabled:n}=e;const r=TA(t),a=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return k.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function N1(e){let{callback:t,disabled:n}=e;const r=TA(t),a=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return k.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function cwe(e){return new NA(Op(e),e)}function v6(e,t,n){t===void 0&&(t=cwe);const[r,a]=k.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const s=lwe({callback(l){if(e)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=N1({callback:i});return il(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),r}function uwe(e){const t=hz(e);return iz(e,t)}const w6=[];function dwe(e){const t=k.useRef(e),n=oy(r=>e?r&&r!==w6&&e&&t.current&&e.parentNode===t.current.parentNode?r:A1(e):w6,[e]);return k.useEffect(()=>{t.current=e},[e]),n}function fwe(e){const[t,n]=k.useState(null),r=k.useRef(e),a=k.useCallback(i=>{const s=PE(i.target);s&&n(o=>o?(o.set(s,ck(s)),new Map(o)):null)},[]);return k.useEffect(()=>{const i=r.current;if(e!==i){s(i);const o=e.map(l=>{const u=PE(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,ck(u)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(l=>{const u=PE(l);u==null||u.removeEventListener("scroll",a)})}},[a,e]),k.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>Ah(i,s),uo):dz(e):uo,[e,t])}function x6(e,t){t===void 0&&(t=[]);const n=k.useRef(null);return k.useEffect(()=>{n.current=null},t),k.useEffect(()=>{const r=e!==uo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?d0(e,n.current):uo}function hwe(e){k.useEffect(()=>{if(!T1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function pwe(e,t){return k.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=s=>{i(s,t)},n},{}),[e,t])}function pz(e){return k.useMemo(()=>e?Lve(e):null,[e])}const _6=[];function mwe(e,t){t===void 0&&(t=Op);const[n]=e,r=pz(n?Vi(n):null),[a,i]=k.useState(_6);function s(){i(()=>e.length?e.map(l=>cz(l)?r:new NA(t(l),l)):_6)}const o=N1({callback:s});return il(()=>{o==null||o.disconnect(),s(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),a}function gwe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return sy(t)?t:e}function ywe(e){let{measure:t}=e;const[n,r]=k.useState(null),a=k.useCallback(u=>{for(const{target:d}of u)if(sy(d)){r(h=>{const m=t(d);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=N1({callback:a}),s=k.useCallback(u=>{const d=gwe(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[o,l]=Vw(s);return k.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const bwe=[{sensor:jA,options:{}},{sensor:RA,options:{}}],vwe={current:{}},Mv={draggable:{measure:p6},droppable:{measure:p6,strategy:h0.WhileDragging,frequency:dk.Optimized},dragOverlay:{measure:Op}};class lg extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const wwe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new lg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gw},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Mv,measureDroppableContainers:Gw,windowRect:null,measuringScheduled:!1},xwe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gw,draggableNodes:new Map,over:null,measureDroppableContainers:Gw},R1=k.createContext(xwe),mz=k.createContext(wwe);function _we(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new lg}}}function Swe(e,t){switch(t.type){case xa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case xa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case xa.DragEnd:case xa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xa.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new lg(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case xa.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new lg(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case xa.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new lg(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Ewe(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=k.useContext(R1),i=ok(r),s=ok(n==null?void 0:n.id);return k.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!AA(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=gve(d);if(h){h.focus();break}}})}},[r,t,a,s,i]),null}function Cwe(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function kwe(e){return k.useMemo(()=>({draggable:{...Mv.draggable,...e==null?void 0:e.draggable},droppable:{...Mv.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Mv.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Twe(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=k.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;il(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=iz(d,r);if(s||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=sz(u);m&&m.scrollBy({top:h.y,left:h.x})}},[t,s,o,r,n])}const gz=k.createContext({...uo,scaleX:1,scaleY:1});var nu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(nu||(nu={}));const Awe=k.memo(function(t){var n,r,a,i;let{id:s,accessibility:o,autoScroll:l=!0,children:u,sensors:d=bwe,collisionDetection:h=Ive,measuring:m,modifiers:y,...v}=t;const b=k.useReducer(Swe,void 0,_we),[x,w]=b,[S,E]=_ve(),[C,T]=k.useState(nu.Uninitialized),j=C===nu.Initialized,{draggable:{active:I,nodes:R,translate:F},droppable:{containers:B}}=x,H=I!=null?R.get(I):null,D=k.useRef({initial:null,translated:null}),Z=k.useMemo(()=>{var nt;return I!=null?{id:I,data:(nt=H==null?void 0:H.data)!=null?nt:vwe,rect:D}:null},[I,H]),V=k.useRef(null),[ue,ae]=k.useState(null),[ne,X]=k.useState(null),ie=u0(v,Object.values(v)),L=ly("DndDescribedBy",s),J=k.useMemo(()=>B.getEnabled(),[B]),Q=kwe(m),{droppableRects:ee,measureDroppableContainers:fe,measuringScheduled:ve}=swe(J,{dragging:j,dependencies:[F.x,F.y],config:Q.droppable}),Oe=awe(R,I),Ae=k.useMemo(()=>ne?lk(ne):null,[ne]),Ne=Be(),Ce=owe(Oe,Q.draggable.measure);Twe({activeNode:I!=null?R.get(I):null,config:Ne.layoutShiftCompensation,initialRect:Ce,measure:Q.draggable.measure});const Pe=v6(Oe,Q.draggable.measure,Ce),Qe=v6(Oe?Oe.parentElement:null),Le=k.useRef({activatorEvent:null,active:null,activeNode:Oe,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:B,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=B.getNodeFor((n=Le.current.over)==null?void 0:n.id),z=ywe({measure:Q.dragOverlay.measure}),Se=(r=z.nodeRef.current)!=null?r:Oe,Te=j?(a=z.rect)!=null?a:Pe:null,de=!!(z.nodeRef.current&&z.rect),se=uwe(de?null:Pe),te=pz(Se?Vi(Se):null),xe=dwe(j?Ie??Oe:null),Fe=mwe(xe),Ee=Cwe(y,{transform:{x:F.x-se.x,y:F.y-se.y,scaleX:1,scaleY:1},activatorEvent:ne,active:Z,activeNodeRect:Pe,containerNodeRect:Qe,draggingNodeRect:Te,over:Le.current.over,overlayNodeRect:z.rect,scrollableAncestors:xe,scrollableAncestorRects:Fe,windowRect:te}),Ge=Ae?Ah(Ae,F):null,Nt=fwe(xe),it=x6(Nt),St=x6(Nt,[Pe]),Ft=Ah(Ee,it),Dt=Te?Dve(Te,Ee):null,Zt=Z&&Dt?h({active:Z,collisionRect:Dt,droppableRects:ee,droppableContainers:J,pointerCoordinates:Ge}):null,ye=az(Zt,"id"),[O,K]=k.useState(null),he=de?Ee:Ah(Ee,St),je=jve(he,(i=O==null?void 0:O.rect)!=null?i:null,Pe),be=k.useRef(null),ke=k.useCallback((nt,ge)=>{let{sensor:De,options:Ke}=ge;if(V.current==null)return;const Ot=R.get(V.current);if(!Ot)return;const me=nt.nativeEvent,G=new De({active:V.current,activeNode:Ot,event:me,options:Ke,context:Le,onAbort(W){if(!R.get(W))return;const{onDragAbort:Re}=ie.current,qe={id:W};Re==null||Re(qe),S({type:"onDragAbort",event:qe})},onPending(W,pe,Re,qe){if(!R.get(W))return;const{onDragPending:Wt}=ie.current,ut={id:W,constraint:pe,initialCoordinates:Re,offset:qe};Wt==null||Wt(ut),S({type:"onDragPending",event:ut})},onStart(W){const pe=V.current;if(pe==null)return;const Re=R.get(pe);if(!Re)return;const{onDragStart:qe}=ie.current,pt={activatorEvent:me,active:{id:pe,data:Re.data,rect:D}};Ho.unstable_batchedUpdates(()=>{qe==null||qe(pt),T(nu.Initializing),w({type:xa.DragStart,initialCoordinates:W,active:pe}),S({type:"onDragStart",event:pt}),ae(be.current),X(me)})},onMove(W){w({type:xa.DragMove,coordinates:W})},onEnd:q(xa.DragEnd),onCancel:q(xa.DragCancel)});be.current=G;function q(W){return async function(){const{active:Re,collisions:qe,over:pt,scrollAdjustedTranslate:Wt}=Le.current;let ut=null;if(Re&&Wt){const{cancelDrop:It}=ie.current;ut={activatorEvent:me,active:Re,collisions:qe,delta:Wt,over:pt},W===xa.DragEnd&&typeof It=="function"&&await Promise.resolve(It(ut))&&(W=xa.DragCancel)}V.current=null,Ho.unstable_batchedUpdates(()=>{w({type:W}),T(nu.Uninitialized),K(null),ae(null),X(null),be.current=null;const It=W===xa.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Lt=ie.current[It];Lt==null||Lt(ut),S({type:It,event:ut})}})}}},[R]),le=k.useCallback((nt,ge)=>(De,Ke)=>{const Ot=De.nativeEvent,me=R.get(Ke);if(V.current!==null||!me||Ot.dndKit||Ot.defaultPrevented)return;const G={active:me};nt(De,ge.options,G)===!0&&(Ot.dndKit={capturedBy:ge.sensor},V.current=Ke,ke(De,ge))},[R,ke]),ft=iwe(d,le);hwe(d),il(()=>{Pe&&C===nu.Initializing&&T(nu.Initialized)},[Pe,C]),k.useEffect(()=>{const{onDragMove:nt}=ie.current,{active:ge,activatorEvent:De,collisions:Ke,over:Ot}=Le.current;if(!ge||!De)return;const me={active:ge,activatorEvent:De,collisions:Ke,delta:{x:Ft.x,y:Ft.y},over:Ot};Ho.unstable_batchedUpdates(()=>{nt==null||nt(me),S({type:"onDragMove",event:me})})},[Ft.x,Ft.y]),k.useEffect(()=>{const{active:nt,activatorEvent:ge,collisions:De,droppableContainers:Ke,scrollAdjustedTranslate:Ot}=Le.current;if(!nt||V.current==null||!ge||!Ot)return;const{onDragOver:me}=ie.current,G=Ke.get(ye),q=G&&G.rect.current?{id:G.id,rect:G.rect.current,data:G.data,disabled:G.disabled}:null,W={active:nt,activatorEvent:ge,collisions:De,delta:{x:Ot.x,y:Ot.y},over:q};Ho.unstable_batchedUpdates(()=>{K(q),me==null||me(W),S({type:"onDragOver",event:W})})},[ye]),il(()=>{Le.current={activatorEvent:ne,active:Z,activeNode:Oe,collisionRect:Dt,collisions:Zt,droppableRects:ee,draggableNodes:R,draggingNode:Se,draggingNodeRect:Te,droppableContainers:B,over:O,scrollableAncestors:xe,scrollAdjustedTranslate:Ft},D.current={initial:Te,translated:Dt}},[Z,Oe,Zt,Dt,R,Se,Te,ee,B,O,xe,Ft]),twe({...Ne,delta:F,draggingRect:Dt,pointerCoordinates:Ge,scrollableAncestors:xe,scrollableAncestorRects:Fe});const vt=k.useMemo(()=>({active:Z,activeNode:Oe,activeNodeRect:Pe,activatorEvent:ne,collisions:Zt,containerNodeRect:Qe,dragOverlay:z,draggableNodes:R,droppableContainers:B,droppableRects:ee,over:O,measureDroppableContainers:fe,scrollableAncestors:xe,scrollableAncestorRects:Fe,measuringConfiguration:Q,measuringScheduled:ve,windowRect:te}),[Z,Oe,Pe,ne,Zt,Qe,z,R,B,ee,O,fe,xe,Fe,Q,ve,te]),P=k.useMemo(()=>({activatorEvent:ne,activators:ft,active:Z,activeNodeRect:Pe,ariaDescribedById:{draggable:L},dispatch:w,draggableNodes:R,over:O,measureDroppableContainers:fe}),[ne,ft,Z,Pe,w,L,R,O,fe]);return gt.createElement(tz.Provider,{value:E},gt.createElement(R1.Provider,{value:P},gt.createElement(mz.Provider,{value:vt},gt.createElement(gz.Provider,{value:je},u)),gt.createElement(Ewe,{disabled:(o==null?void 0:o.restoreFocus)===!1})),gt.createElement(Cve,{...o,hiddenTextDescribedById:L}));function Be(){const nt=(ue==null?void 0:ue.autoScrollEnabled)===!1,ge=typeof l=="object"?l.enabled===!1:l===!1,De=j&&!nt&&!ge;return typeof l=="object"?{...l,enabled:De}:{enabled:De}}}),Nwe=k.createContext(null),S6="button",Rwe="Draggable";function Iwe(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=ly(Rwe),{activators:s,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:m}=k.useContext(R1),{role:y=S6,roleDescription:v="draggable",tabIndex:b=0}=a??{},x=(l==null?void 0:l.id)===t,w=k.useContext(x?gz:Nwe),[S,E]=Vw(),[C,T]=Vw(),j=pwe(s,t),I=u0(n);il(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:I}),()=>{const F=h.get(t);F&&F.key===i&&h.delete(t)}),[h,t]);const R=k.useMemo(()=>({role:y,tabIndex:b,"aria-disabled":r,"aria-pressed":x&&y===S6?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,y,b,x,v,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:R,isDragging:x,listeners:r?void 0:j,node:S,over:m,setNodeRef:E,setActivatorNodeRef:T,transform:w}}function jwe(){return k.useContext(mz)}const Owe="Droppable",Dwe={timeout:25};function Mwe(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=ly(Owe),{active:s,dispatch:o,over:l,measureDroppableContainers:u}=k.useContext(R1),d=k.useRef({disabled:n}),h=k.useRef(!1),m=k.useRef(null),y=k.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:x}={...Dwe,...a},w=u0(b??r),S=k.useCallback(()=>{if(!h.current){h.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),y.current=null},x)},[x]),E=N1({callback:S,disabled:v||!s}),C=k.useCallback((R,F)=>{E&&(F&&(E.unobserve(F),h.current=!1),R&&E.observe(R))},[E]),[T,j]=Vw(C),I=u0(t);return k.useEffect(()=>{!E||!T.current||(E.disconnect(),h.current=!1,E.observe(T.current))},[T,E]),k.useEffect(()=>(o({type:xa.RegisterDroppable,element:{id:r,key:i,disabled:n,node:T,rect:m,data:I}}),()=>o({type:xa.UnregisterDroppable,key:i,id:r})),[r]),k.useEffect(()=>{n!==d.current.disabled&&(o({type:xa.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:s,rect:m,isOver:(l==null?void 0:l.id)===r,node:T,over:l,setNodeRef:j}}function OA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Pwe(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function vv(e){return e!==null&&e>=0}function Fwe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Lwe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const yz=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=OA(t,r,n),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},wv={scaleX:1,scaleY:1},$we=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=(t=i[n])!=null?t:r;if(!o)return null;if(a===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(o.top+o.height):u.top-o.top,...wv}:null}const l=Bwe(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-l,...wv}:a<n&&a>=s?{x:0,y:o.height+l,...wv}:{x:0,y:0,...wv}};function Bwe(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const bz="Sortable",vz=gt.createContext({activeIndex:-1,containerId:bz,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:yz,disabled:{draggable:!1,droppable:!1}});function zwe(e){let{children:t,id:n,items:r,strategy:a=yz,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:d}=jwe(),h=ly(bz,n),m=o.rect!==null,y=k.useMemo(()=>r.map(j=>typeof j=="object"&&"id"in j?j.id:j),[r]),v=s!=null,b=s?y.indexOf(s.id):-1,x=u?y.indexOf(u.id):-1,w=k.useRef(y),S=!Fwe(y,w.current),E=x!==-1&&b===-1||S,C=Lwe(i);il(()=>{S&&v&&d(y)},[S,y,v,d]),k.useEffect(()=>{w.current=y},[y]);const T=k.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:y,overIndex:x,useDragOverlay:m,sortedRects:Pwe(y,l),strategy:a}),[b,h,C.draggable,C.droppable,E,y,x,l,m,a]);return gt.createElement(vz.Provider,{value:T},t)}const Uwe=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return OA(n,r,a).indexOf(t)},qwe=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:l,transition:u}=e;return!u||!r||o!==i&&a===s?!1:n?!0:s!==a&&t===l},Hwe={duration:200,easing:"ease"},wz="transform",Vwe=f0.Transition.toString({property:wz,duration:0,easing:"linear"}),Gwe={roleDescription:"sortable"};function Kwe(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=k.useState(null),o=k.useRef(n);return il(()=>{if(!t&&n!==o.current&&r.current){const l=a.current;if(l){const u=Op(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&s(d)}}n!==o.current&&(o.current=n)},[t,n,r,a]),k.useEffect(()=>{i&&s(null)},[i]),i}function Wwe(e){let{animateLayoutChanges:t=qwe,attributes:n,disabled:r,data:a,getNewIndex:i=Uwe,id:s,strategy:o,resizeObserverConfig:l,transition:u=Hwe}=e;const{items:d,containerId:h,activeIndex:m,disabled:y,disableTransforms:v,sortedRects:b,overIndex:x,useDragOverlay:w,strategy:S}=k.useContext(vz),E=Zwe(r,y),C=d.indexOf(s),T=k.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...a}),[h,a,C,d]),j=k.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:I,node:R,isOver:F,setNodeRef:B}=Mwe({id:s,data:T,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...l}}),{active:H,activatorEvent:D,activeNodeRect:Z,attributes:V,setNodeRef:ue,listeners:ae,isDragging:ne,over:X,setActivatorNodeRef:ie,transform:L}=Iwe({id:s,data:T,attributes:{...Gwe,...n},disabled:E.draggable}),J=fve(B,ue),Q=!!H,ee=Q&&!v&&vv(m)&&vv(x),fe=!w&&ne,ve=fe&&ee?L:null,Ae=ee?ve??(o??S)({rects:b,activeNodeRect:Z,activeIndex:m,overIndex:x,index:C}):null,Ne=vv(m)&&vv(x)?i({id:s,items:d,activeIndex:m,overIndex:x}):C,Ce=H==null?void 0:H.id,Pe=k.useRef({activeId:Ce,items:d,newIndex:Ne,containerId:h}),Qe=d!==Pe.current.items,Le=t({active:H,containerId:h,isDragging:ne,isSorting:Q,id:s,index:C,items:d,newIndex:Pe.current.newIndex,previousItems:Pe.current.items,previousContainerId:Pe.current.containerId,transition:u,wasDragging:Pe.current.activeId!=null}),Ie=Kwe({disabled:!Le,index:C,node:R,rect:I});return k.useEffect(()=>{Q&&Pe.current.newIndex!==Ne&&(Pe.current.newIndex=Ne),h!==Pe.current.containerId&&(Pe.current.containerId=h),d!==Pe.current.items&&(Pe.current.items=d)},[Q,Ne,h,d]),k.useEffect(()=>{if(Ce===Pe.current.activeId)return;if(Ce!=null&&Pe.current.activeId==null){Pe.current.activeId=Ce;return}const Se=setTimeout(()=>{Pe.current.activeId=Ce},50);return()=>clearTimeout(Se)},[Ce]),{active:H,activeIndex:m,attributes:V,data:T,rect:I,index:C,newIndex:Ne,items:d,isOver:F,isSorting:Q,isDragging:ne,listeners:ae,node:R,overIndex:x,over:X,setNodeRef:J,setActivatorNodeRef:ie,setDroppableNodeRef:B,setDraggableNodeRef:ue,transform:Ie??Ae,transition:z()};function z(){if(Ie||Qe&&Pe.current.newIndex===C)return Vwe;if(!(fe&&!AA(D)||!u)&&(Q||Le))return f0.Transition.toString({...u,property:wz})}}function Zwe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Ww(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Ywe=[er.Down,er.Right,er.Up,er.Left],Xwe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(Ywe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=a.get(h.id);if(m)switch(e.code){case er.Down:r.top<m.top&&l.push(h);break;case er.Up:r.top>m.top&&l.push(h);break;case er.Left:r.left>m.left&&l.push(h);break;case er.Right:r.left<m.left&&l.push(h);break}});const u=Nve({collisionRect:r,droppableRects:a,droppableContainers:l});let d=az(u,"id");if(d===(s==null?void 0:s.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),m=i.get(d),y=m?a.get(m.id):null,v=m==null?void 0:m.node.current;if(v&&y&&h&&m){const x=A1(v).some((j,I)=>o[I]!==j),w=xz(h,m),S=Jwe(h,m),E=x||!w?{x:0,y:0}:{x:S?r.width-y.width:0,y:S?r.height-y.height:0},C={x:y.left,y:y.top};return E.x&&E.y?C:d0(C,E)}}}};function xz(e,t){return!Ww(e)||!Ww(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Jwe(e,t){return!Ww(e)||!Ww(t)||!xz(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Qwe=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:l}=Wwe({id:e,disabled:n}),u={transform:f0.Transform.toString(s),transition:o,zIndex:l?10:void 0,opacity:n?.5:1};return p.jsxs("div",{ref:i,style:u,...r,...a,className:_t("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[p.jsx(nV,{className:_t("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),p.jsx(Gt,{className:_t("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},exe=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAllAvailableModelDefsForProvider:a}=Bn(dn(m=>({setGlobalModelSortOrder:m.setGlobalModelSortOrder,dbProviderConfigs:m.dbProviderConfigs,globalModelSortOrder:m.globalModelSortOrder,isLoading:m.isLoading,getAllAvailableModelDefsForProvider:m.getAllAvailableModelDefsForProvider}))),[i,s]=k.useState(""),o=k.useMemo(()=>{const m=new Map,y=new Set;t.forEach(w=>{if(!w.isEnabled||!w.enabledModels)return;const S=a(w.id),E=new Map(S.map(C=>[C.id,C]));w.enabledModels.forEach(C=>{const T=au(w.id,C),j=E.get(C);j&&(y.add(T),m.set(T,{id:T,name:j.name||C,providerId:w.id,providerName:w.name,metadata:j}))})});const v=[],b=new Set;n.forEach(w=>{if(y.has(w)){const S=m.get(w);S&&!b.has(w)&&(v.push(S),b.add(w))}});const x=Array.from(y).filter(w=>!b.has(w)).map(w=>m.get(w)).filter(w=>!!w).sort((w,S)=>w.name.localeCompare(S.name));return[...v,...x]},[t,n,a]),l=k.useMemo(()=>{if(!i.trim())return o;const m=i.toLowerCase();return o.filter(y=>y.name.toLowerCase().includes(m)||y.providerName.toLowerCase().includes(m)||y.id.toLowerCase().includes(m))},[o,i]),u=k.useMemo(()=>l.map(m=>m.id),[l]),d=k.useCallback(m=>{const{active:y,over:v}=m;if(v&&y.id!==v.id){const b=o.map(C=>C.id),x=y.id,w=v.id,S=b.indexOf(x),E=b.indexOf(w);if(S!==-1&&E!==-1){const C=OA(b,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[o,e]),h=kve(d6(jA),d6(RA,{coordinateGetter:Xwe}));return r?p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx(ur,{className:"h-8 w-1/3"}),p.jsx(ur,{className:"h-6 w-1/2"}),p.jsx(ur,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),p.jsx(Xs,{}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(Gt,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),p.jsxs("div",{className:"relative",children:[p.jsx(no,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Cn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:m=>s(m.target.value),className:"pl-8 w-full",disabled:r})]}),p.jsx(Ru,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?p.jsx(Awe,{sensors:h,collisionDetection:Ave,onDragEnd:d,children:p.jsx(zwe,{items:u,strategy:$we,children:l.map(m=>p.jsx(Qwe,{id:m.id,name:`${m.name} (${m.providerName})`},m.id))})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},txe=pk("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function _z({className:e,variant:t,asChild:n=!1,...r}){const a=n?F6:"span";return p.jsx(a,{"data-slot":"badge",className:_t(txe({variant:t}),e),...r})}const nxe=({modelId:e})=>{var s,o,l,u,d,h,m,y,v,b,x,w,S;const{getProviderById:t,getAllAvailableModelDefsForProvider:n}=Bn(E=>({getProviderById:C=>E.dbProviderConfigs.find(T=>T.id===C),getAllAvailableModelDefsForProvider:E.getAllAvailableModelDefsForProvider})),r=k.useMemo(()=>{if(!e)return null;const{providerId:E,modelId:C}=lc(e);if(!E||!C)return null;const T=t(E);if(!T)return null;const I=n(E).find(R=>R.id===C);return I?{...I,providerName:T.name}:null},[e,t,n]);if(!r)return p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select a model from a provider's list to view its details."});const a=E=>{if(!E)return"N/A";const C=parseFloat(E);return isNaN(C)||C===0?"Free":`$${C.toFixed(4)} / 1M tokens`},i=E=>E?`${E.toLocaleString()} tokens`:"Unknown";return p.jsx(Ru,{className:"h-full p-1",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-xl font-semibold",children:[r.name," ",p.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.providerName,")"]})]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:r.id}),r.description&&p.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:p.jsx("p",{children:r.description})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Context & Limits"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Context Length:"})," ",i(((s=r.top_provider)==null?void 0:s.context_length)??r.context_length)]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Max Completion Tokens:"})," ",(o=r.top_provider)!=null&&o.max_completion_tokens?r.top_provider.max_completion_tokens.toLocaleString():"Default"]}),r.per_request_limits&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Request Limits:"})," ",p.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.per_request_limits,null,2)})]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Pricing (per 1M tokens)"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Prompt:"})," ",a((l=r.pricing)==null?void 0:l.prompt)]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Completion:"})," ",a((u=r.pricing)==null?void 0:u.completion)]}),((d=r.pricing)==null?void 0:d.request)&&parseFloat(r.pricing.request)>0&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Request:"})," $",parseFloat(r.pricing.request).toFixed(6)]}),((h=r.pricing)==null?void 0:h.image)&&parseFloat(r.pricing.image)>0&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Image:"})," $",parseFloat(r.pricing.image).toFixed(6)]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Architecture"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Modality:"})," ",((m=r.architecture)==null?void 0:m.modality)??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Input Modalities:"})," ",((v=(y=r.architecture)==null?void 0:y.input_modalities)==null?void 0:v.join(", "))??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Output Modalities:"})," ",((x=(b=r.architecture)==null?void 0:b.output_modalities)==null?void 0:x.join(", "))??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Tokenizer:"})," ",((w=r.architecture)==null?void 0:w.tokenizer)??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Instruct Type:"})," ",((S=r.architecture)==null?void 0:S.instruct_type)??"N/A"]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Supported Parameters"}),p.jsx("div",{className:"flex flex-wrap gap-1",children:r.supported_parameters&&r.supported_parameters.length>0?r.supported_parameters.map(E=>p.jsx(_z,{variant:"secondary",children:E},E)):p.jsx("span",{className:"text-muted-foreground italic",children:"None specified"})})]})]})]})})},rxe=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=Bn(dn(m=>({apiKeys:m.dbApiKeys,addApiKey:m.addApiKey,deleteApiKey:m.deleteApiKey,isLoading:m.isLoading}))),[a,i]=k.useState(!1),[s,o]=k.useState(!1),[l,u]=k.useState({}),d=k.useCallback(async(m,y,v)=>{o(!0);try{await t(m,y,v),i(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),h=k.useCallback(async(m,y)=>{if(window.confirm(`Are you sure you want to delete the API key "${y}"? This will unlink it from any providers using it.`)){u(v=>({...v,[m]:!0}));try{await n(m)}catch(v){console.error("Failed to delete API key (from component):",v)}finally{u(v=>({...v,[m]:!1}))}}},[n]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!a&&p.jsxs(Rt,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[p.jsx(Wd,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),a&&p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),p.jsx(r$,{onSave:d,onCancel:()=>i(!1),isSaving:s})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!a?p.jsxs("div",{className:"space-y-2",children:[p.jsx(ur,{className:"h-10 w-full"}),p.jsx(ur,{className:"h-10 w-full"})]}):(e||[]).length===0&&!a?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Ap,{children:[p.jsx(Np,{children:p.jsxs(Yr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{children:"Provider Type"}),p.jsx(Tr,{children:"Created"}),p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Rp,{children:(e||[]).map(m=>{const y=l[m.id];return p.jsxs(Yr,{className:y?"opacity-50":"",children:[p.jsx(Mn,{className:"font-medium",children:m.name||"Unnamed Key"}),p.jsx(Mn,{children:m.providerId||"Unknown"}),p.jsx(Mn,{className:"text-xs text-muted-foreground",children:FC(new Date(m.createdAt),"PPp")}),p.jsx(Mn,{className:"text-right",children:p.jsx(Dn,{tooltipText:"Delete Key",onClick:()=>h(m.id,m.name||"Unnamed Key"),disabled:y,"aria-label":`Delete key ${m.name||"Unnamed Key"}`,icon:y?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx($i,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},m.id)})})]})})]})]})},axe=gt.memo(rxe),ixe=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:s,apiKeys:o,isLoading:l}=Bn(dn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[u,d]=k.useState(!1),h=()=>d(!0),m=k.useCallback(()=>d(!1),[]),y=k.useCallback(async b=>{await a(b)},[a]),v=k.useMemo(()=>s||[],[s]);return p.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),p.jsx("div",{className:"flex-shrink-0",children:u?p.jsx(u$,{apiKeys:o||[],onAddProvider:t,onCancel:m}):p.jsxs(Rt,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[p.jsx(Wd,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),p.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:p.jsxs("div",{className:"space-y-2",children:[l&&!u?p.jsx(p.Fragment,{children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsx(ur,{className:"h-24 w-full"}),p.jsx(ur,{className:"h-24 w-full"}),p.jsx(ur,{className:"h-24 w-full"})]})}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>p.jsx(Vbe,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:y,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!u&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},sxe=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=Bn(dn(s=>({selectedModelForDetails:s._selectedModelForDetails,setSelectedModelForDetails:s.setSelectedModelForDetails}))),[n,r]=k.useState("providers-config"),a=k.useCallback(s=>{t(s),s&&r("providers-details")},[t]),i=k.useMemo(()=>[{value:"providers-config",label:"Configuration",content:p.jsx(ixe,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:p.jsx(exe,{})},{value:"api-keys",label:"API Keys",content:p.jsx(axe,{})},{value:"providers-details",label:"Model Details",content:p.jsx(nxe,{modelId:e})}],[e,a]);return p.jsx(Vu,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},oxe=gt.memo(sxe),Qm=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:s})=>p.jsxs("div",{className:_t("space-y-3",r),children:[p.jsxs("div",{children:[p.jsx("h3",{className:_t("text-lg font-medium",a),children:e}),t&&p.jsx("p",{className:_t("text-sm text-muted-foreground",i),children:t})]}),p.jsx("div",{className:_t(s),children:n})]}),lxe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=fr(dn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return p.jsx("div",{className:"space-y-6 p-1",children:p.jsx(Qm,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"git-user-name",children:"Git User Name"}),p.jsx(Cn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"git-user-email",children:"Git User Email"}),p.jsx(Cn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},cxe=gt.memo(lxe),uxe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:s}=mn(dn(R=>({syncRepos:R.syncRepos,addSyncRepo:R.addSyncRepo,updateSyncRepo:R.updateSyncRepo,deleteSyncRepo:R.deleteSyncRepo,initializeOrSyncRepo:R.initializeOrSyncRepo,repoInitializationStatus:R.repoInitializationStatus,isLoading:R.isLoading}))),[o,l]=k.useState(!1),[u,d]=k.useState(null),[h,m]=k.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[y,v]=k.useState(!1),[b,x]=k.useState({}),w=k.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),S=k.useCallback((R,F)=>{m(B=>({...B,[R]:F}))},[]),E=k.useCallback(async()=>{var R,F,B,H;if(!((R=h.name)!=null&&R.trim())||!((F=h.remoteUrl)!=null&&F.trim())){Ye.error("Repository Name and Remote URL are required.");return}v(!0);try{const D={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((B=h.branch)==null?void 0:B.trim())||"main",username:((H=h.username)==null?void 0:H.trim())||null,password:h.password||null};u?await n(u,D):await t(D),w()}catch(D){console.error("Failed to save sync repo:",D)}finally{v(!1)}},[h,u,t,n,w]),C=R=>{d(R.id),m({name:R.name,remoteUrl:R.remoteUrl,branch:R.branch||"main",username:R.username??"",password:R.password??""}),l(!1)},T=k.useCallback(async(R,F)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${F}"? This will unlink it from any conversations and remove the local copy.`)){x(B=>({...B,[R]:!0}));try{await r(R),u===R&&w()}catch(B){console.error("Failed to delete sync repo:",B)}finally{x(B=>({...B,[R]:!1}))}}},[r,u,w]),j=k.useCallback(async R=>{await a(R)},[a]),I=()=>{var R,F;return p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:u?"Edit Sync Repository":"Add New Sync Repository"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Gt,{htmlFor:"repo-name",children:"Name"}),p.jsx(Cn,{id:"repo-name",value:h.name||"",onChange:B=>S("name",B.target.value),placeholder:"e.g., My Backup",required:!0,className:"mt-1",disabled:y})]}),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsx(Gt,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),p.jsx(Cn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:B=>S("remoteUrl",B.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:y})]}),p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Gt,{htmlFor:"repo-branch",children:"Branch"}),p.jsx(Cn,{id:"repo-branch",value:h.branch||"",onChange:B=>S("branch",B.target.value),placeholder:"main",className:"mt-1",disabled:y})]})]}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Gt,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),p.jsxs(OB,{variant:"destructive",className:"mt-2 mb-3",children:[p.jsx(ex,{className:"h-4 w-4"}),p.jsx(DB,{children:"Security Warning"}),p.jsx(MB,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"repo-username",children:"Username"}),p.jsx(Cn,{id:"repo-username",value:h.username||"",onChange:B=>S("username",B.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:y,autoComplete:"off"})]}),p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"repo-password",children:"Password / Token"}),p.jsx(Cn,{id:"repo-password",type:"password",value:h.password||"",onChange:B=>S("password",B.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:y,autoComplete:"new-password"})]})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:w,disabled:y,type:"button",children:[p.jsx(_i,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:E,disabled:y||!((R=h.name)!=null&&R.trim())||!((F=h.remoteUrl)!=null&&F.trim()),type:"button",children:[y&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Zd,{className:"h-4 w-4 mr-1"})," ",y?"Saving...":"Save Repository"]})]})]})};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!o&&!u&&p.jsxs(Rt,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:s,children:[p.jsx(Wd,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||u)&&I(),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),s&&!o&&!u?p.jsxs("div",{className:"space-y-2",children:[p.jsx(ur,{className:"h-10 w-full"}),p.jsx(ur,{className:"h-10 w-full"}),p.jsx(ur,{className:"h-10 w-full"})]}):e.length===0&&!o&&!u?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):p.jsxs("div",{className:"border rounded-md overflow-x-auto",children:[" ",p.jsxs(Ap,{children:[p.jsx(Np,{children:p.jsxs(Yr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{className:"hidden md:table-cell",children:"Remote URL"})," ",p.jsx(Tr,{className:"hidden lg:table-cell",children:"Branch"})," ",p.jsx(Tr,{className:"hidden lg:table-cell",children:"Auth"})," ",p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Rp,{children:e.map(R=>{const F=b[R.id],B=u===R.id,H=!!R.username||!!R.password,D=i[R.id]||"idle",V=F||y||!!u||D==="syncing";let ue=null,ae="Initialize/Sync Repository";return D==="syncing"?(ue=p.jsx(On,{className:"h-4 w-4 animate-spin mr-1"}),ae="Initializing/Syncing..."):D==="idle"?(ue=p.jsx(gk,{className:"h-4 w-4 text-green-500 mr-1"}),ae="Sync Successful / Ready"):D==="error"?(ue=p.jsx(Nh,{className:"h-4 w-4 text-destructive mr-1"}),ae="Sync Failed"):ue=p.jsx(Qw,{className:"h-4 w-4 mr-1"}),p.jsxs(Yr,{className:_t(B?"bg-muted/50":"",V&&!B?"opacity-70":""),children:[p.jsx(Mn,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:R.name}),p.jsx(Mn,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:R.remoteUrl}),p.jsx(Mn,{className:"hidden lg:table-cell",children:R.branch||"main"}),p.jsx(Mn,{className:"text-xs hidden lg:table-cell",children:H?"Configured":"None"}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Dn,{tooltipText:ae,onClick:()=>j(R.id),"aria-label":`Initialize or Sync repo ${R.name}`,disabled:V,icon:ue,variant:"outline",className:"h-8 w-8"}),p.jsx(Dn,{tooltipText:"Edit",onClick:()=>C(R),"aria-label":`Edit repo ${R.name}`,disabled:V,icon:p.jsx(g0,{}),className:"h-8 w-8"}),p.jsx(Dn,{tooltipText:"Delete",onClick:()=>T(R.id,R.name),"aria-label":`Delete repo ${R.name}`,disabled:V,icon:F?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx($i,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},R.id)})})]})]})]})]})},dxe=gt.memo(uxe),fxe=()=>{const e=k.useMemo(()=>[{value:"config",label:"User Config",content:p.jsx(cxe,{})},{value:"sync",label:"Sync Repositories",content:p.jsx(dxe,{})}],[]);return p.jsx(Vu,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},hxe=gt.memo(fxe),pxe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=k.useState((e==null?void 0:e.name)||""),[s,o]=k.useState((e==null?void 0:e.content)||""),[l,u]=k.useState((e==null?void 0:e.type)||"before");k.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.content)||""),u((e==null?void 0:e.type)||"before")},[e]);const d=k.useCallback(async()=>{if(!a.trim()||!s.trim()){Ye.error("Rule Name and Content are required.");return}await n({name:a.trim(),content:s.trim(),type:l})},[a,s,l,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Gt,{htmlFor:"rule-name",children:"Rule Name"}),p.jsx(Cn,{id:"rule-name",value:a,onChange:h=>i(h.target.value),placeholder:"e.g., Always respond in JSON",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"rule-type",children:"Rule Type"}),p.jsxs(Yo,{value:l,onValueChange:h=>u(h),disabled:t,children:[p.jsx(Jo,{id:"rule-type",children:p.jsx(Xo,{placeholder:"Select Type"})}),p.jsxs(Qo,{children:[p.jsx(sa,{value:"system",children:"System Prompt"}),p.jsx(sa,{value:"before",children:"Before User Prompt"}),p.jsx(sa,{value:"after",children:"After User Prompt"})]})]})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"rule-content",children:"Rule Content"}),p.jsx(Hu,{id:"rule-content",value:s,onChange:h=>o(h.target.value),placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(_i,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:d,disabled:t||!a.trim()||!s.trim(),type:"button",children:[t&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Zd,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Rule"]})]})]})},mxe=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:a})=>{const i=s=>{window.confirm(`Are you sure you want to delete the rule "${s.name}"? This will also remove it from any tags.`)&&a(s.id,s.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Ap,{children:[p.jsx(Np,{children:p.jsxs(Yr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{children:"Type"}),p.jsx(Tr,{children:"Content Preview"}),p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Rp,{children:t?p.jsxs(p.Fragment,{children:[p.jsx(Yr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx(ur,{className:"h-10 w-full"})})}),p.jsx(Yr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx(ur,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Yr,{children:p.jsx(Mn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(s=>{const o=n[s.id];return p.jsxs(Yr,{children:[p.jsx(Mn,{className:"font-medium",children:s.name}),p.jsx(Mn,{className:"capitalize",children:s.type}),p.jsx(Mn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.content}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Dn,{tooltipText:"Edit Rule",onClick:()=>r(s),disabled:o,icon:p.jsx(g0,{}),className:"h-8 w-8","aria-label":`Edit rule ${s.name}`}),p.jsx(Dn,{tooltipText:"Delete Rule",onClick:()=>i(s),disabled:o,icon:o?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx($i,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${s.name}`})]})]},s.id)})})]})})},gxe=()=>{const{rules:e,addRule:t,updateRule:n,deleteRule:r,isLoading:a}=sc(dn(S=>({rules:S.rules,addRule:S.addRule,updateRule:S.updateRule,deleteRule:S.deleteRule,isLoading:S.isLoading}))),[i,s]=k.useState(!1),[o,l]=k.useState(null),[u,d]=k.useState(!1),[h,m]=k.useState({}),y=()=>{l(null),s(!0)},v=S=>{l(S),s(!0)},b=k.useCallback(()=>{s(!1),l(null),d(!1)},[]),x=k.useCallback(async S=>{d(!0);try{o?await n(o.id,S):await t(S),b()}catch{}finally{d(!1)}},[t,n,o,b]),w=k.useCallback(async S=>{m(E=>({...E,[S]:!0}));try{await r(S),(o==null?void 0:o.id)===S&&b()}catch{}finally{m(E=>({...E,[S]:!1}))}},[r,o,b]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&p.jsxs(Rt,{onClick:y,variant:"outline",className:"w-full",disabled:a,children:[p.jsx(Wd,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&p.jsx(pxe,{initialData:o??void 0,isSaving:u,onSave:x,onCancel:b}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),p.jsx(mxe,{rules:e,isLoading:a,isDeleting:h,onEdit:v,onDelete:w})]})]})},yxe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=k.useState((e==null?void 0:e.name)||""),[s,o]=k.useState((e==null?void 0:e.description)||"");k.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.description)||"")},[e]);const l=k.useCallback(async()=>{if(!a.trim()){Ye.error("Tag Name is required.");return}await n({name:a.trim(),description:(s==null?void 0:s.trim())||null})},[a,s,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"tag-name",children:"Tag Name"}),p.jsx(Cn,{id:"tag-name",value:a,onChange:u=>i(u.target.value),placeholder:"e.g., Code Generation, Summarization",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"tag-description",children:"Description (Optional)"}),p.jsx(Hu,{id:"tag-description",value:s||"",onChange:u=>o(u.target.value),placeholder:"Describe when to use this tag...",rows:2,disabled:t})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(_i,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:l,disabled:t||!a.trim(),type:"button",children:[t&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Zd,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Tag"]})]})]})},bxe=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:a,onDelete:i})=>{const s=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&i(o.id,o.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Ap,{children:[p.jsx(Np,{children:p.jsxs(Yr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{children:"Description"}),p.jsx(Tr,{children:"Linked Rules"}),p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Rp,{children:n?p.jsxs(p.Fragment,{children:[p.jsx(Yr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx(ur,{className:"h-10 w-full"})})}),p.jsx(Yr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx(ur,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Yr,{children:p.jsx(Mn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],u=t.get(o.id)||[];return p.jsxs(Yr,{children:[p.jsx(Mn,{className:"font-medium",children:o.name}),p.jsx(Mn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),p.jsx(Mn,{className:"text-xs",children:u.length>0?u.map(d=>d.name).join(", "):"None"}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Dn,{tooltipText:"Edit Tag & Rules",onClick:()=>a(o),disabled:l,icon:p.jsx(g0,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),p.jsx(Dn,{tooltipText:"Delete Tag",onClick:()=>s(o),disabled:l,icon:l?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx($i,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},vxe=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:a=!1})=>{const[i,s]=k.useState(!1),[o,l]=k.useState(""),u=k.useMemo(()=>[...t].sort((v,b)=>v.name.localeCompare(b.name)),[t]),d=k.useMemo(()=>{const v=o.toLowerCase();return v?u.filter(b=>b.name.toLowerCase().includes(v)||b.content.toLowerCase().includes(v)||b.type.toLowerCase().includes(v)):u},[u,o]),h=k.useCallback(v=>{const b=n.has(v);r(e.id,v,!b),l("")},[n,r,e.id]),m=k.useCallback((v,b)=>{b.stopPropagation(),r(e.id,v,!1)},[r,e.id]),y=k.useMemo(()=>u.filter(v=>n.has(v.id)),[u,n]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs(Gt,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),p.jsxs(fc,{open:i,onOpenChange:s,children:[p.jsx(hc,{asChild:!0,children:p.jsxs(Rt,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between h-9",disabled:a||t.length===0,children:[p.jsx("span",{className:"truncate",children:y.length>0?`${y.length} rule(s) selected`:"Select rules..."}),p.jsx(Jw,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(pc,{className:"w-[--radix-popover-trigger-width] p-0",children:p.jsxs(_B,{shouldFilter:!1,children:[p.jsx(SB,{placeholder:"Search rules...",value:o,onValueChange:l}),p.jsxs(EB,{children:[p.jsx(CB,{children:t.length===0?"No rules defined.":"No rules found."}),p.jsx(kB,{children:d.map(v=>{const b=n.has(v.id);return p.jsxs(TB,{value:v.id,onSelect:()=>h(v.id),className:"cursor-pointer",children:[p.jsx(xi,{className:_t("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),p.jsx("span",{className:"truncate",children:v.name}),p.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",v.type,")"]})]},v.id)})})]})]})})]}),y.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:y.map(v=>p.jsxs(_z,{variant:"secondary",className:"flex items-center gap-1",children:[p.jsx("span",{className:"truncate",children:v.name}),p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>m(v.id,b),disabled:a,"aria-label":`Unlink rule ${v.name}`,children:p.jsx(_i,{className:"h-3 w-3"})})]},v.id))})]})},wxe=()=>{const{tags:e,rules:t,tagRuleLinks:n,addTag:r,updateTag:a,deleteTag:i,linkTagToRule:s,unlinkTagFromRule:o,getRulesForTag:l,isLoading:u}=sc(dn(B=>({tags:B.tags,rules:B.rules,tagRuleLinks:B.tagRuleLinks,addTag:B.addTag,updateTag:B.updateTag,deleteTag:B.deleteTag,linkTagToRule:B.linkTagToRule,unlinkTagFromRule:B.unlinkTagFromRule,getRulesForTag:B.getRulesForTag,isLoading:B.isLoading}))),[d,h]=k.useState(!1),[m,y]=k.useState(null),[v,b]=k.useState(!1),[x,w]=k.useState({}),S=()=>{y(null),h(!0)},E=B=>{y(B),h(!0)},C=k.useCallback(()=>{h(!1),y(null),b(!1)},[]),T=k.useCallback(async B=>{b(!0);try{m?await a(m.id,B):await r(B),m||C()}catch{}finally{b(!1)}},[r,a,m,C]),j=k.useCallback(async B=>{w(H=>({...H,[B]:!0}));try{await i(B),(m==null?void 0:m.id)===B&&C()}catch{}finally{w(H=>({...H,[B]:!1}))}},[i,m,C]),I=k.useCallback(async(B,H,D)=>{try{D?await s(B,H):await o(B,H)}catch{}},[s,o]),R=k.useMemo(()=>{const B=new Map;return e.forEach(H=>{B.set(H.id,l(H.id))}),B},[e,l]),F=k.useMemo(()=>m?new Set(n.filter(B=>B.tagId===m.id).map(B=>B.ruleId)):new Set,[m,n]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!d&&p.jsxs(Rt,{onClick:S,variant:"outline",className:"w-full",disabled:u,children:[p.jsx(Wd,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),d&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(yxe,{initialData:m??void 0,isSaving:v,onSave:T,onCancel:C}),m&&p.jsx(vxe,{tag:m,allRules:t,linkedRuleIds:F,onLinkChange:I,disabled:v})]}),p.jsx(Xs,{}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),p.jsx(bxe,{tags:e,rulesByTagId:R,isLoading:u,isDeleting:x,onEdit:E,onDelete:j})]})]})},xxe=()=>{const e=k.useMemo(()=>[{value:"rules",label:"Rules",content:p.jsx(gxe,{})},{value:"tags",label:"Tags",content:p.jsx(wxe,{})}],[]);return p.jsx(Vu,{tabs:e,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},_xe=({label:e,colorKey:t,value:n,onChange:r})=>{const[a,i]=k.useState(n??"");k.useEffect(()=>{i(n??"")},[n]);const s=()=>{r(t,a.trim()||null)},o=l=>{i(l.target.value)};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Gt,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),p.jsx(Cn,{id:`color-${t}`,type:"text",value:a,onChange:o,onBlur:s,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),p.jsx(Cn,{type:"color",value:a!=null&&a.startsWith("#")?a:"#000000",onChange:l=>{i(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},xv=[{name:"Default Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css"},{name:"A11y Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css"},{name:"Atom Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-atom-dark.min.css"},{name:"Atelier Sulphurpool Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-base16-ateliersulphurpool.light.min.css"},{name:"CB",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-cb.min.css"},{name:"Coldark Cold",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-cold.min.css"},{name:"Coldark Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css"},{name:"Coy (No Shadow)",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coy-without-shadows.min.css"},{name:"Darcula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-darcula.min.css"},{name:"Dracula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-dracula.min.css"},{name:"Duotone Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-dark.min.css"},{name:"Duotone Earth",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-earth.min.css"},{name:"Duotone Forest",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-forest.min.css"},{name:"Duotone Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-light.min.css"},{name:"Duotone Sea",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-sea.min.css"},{name:"Duotone Space",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-space.min.css"},{name:"GH Colors",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css"},{name:"Gruvbox Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-dark.min.css"},{name:"Gruvbox Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css"},{name:"Holi",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-holi-theme.min.css"},{name:"Hopscotch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-hopscotch.min.css"},{name:"Lucario",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-lucario.min.css"},{name:"Material Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-dark.min.css"},{name:"Material Oceanic",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-oceanic.min.css"},{name:"Night Owl",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-night-owl.min.css"},{name:"Nord",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-nord.min.css"},{name:"One Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css"},{name:"One Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-light.min.css"},{name:"Pojoaque",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-pojoaque.min.css"},{name:"Shades of Purple",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-shades-of-purple.min.css"},{name:"Solarized Dark Atom",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-solarized-dark-atom.min.css"},{name:"Synthwave '84",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css"},{name:"VS",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vs.min.css"},{name:"VSC Dark Plus",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css"},{name:"Xonokai",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-xonokai.min.css"},{name:"Z-Touch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-z-touch.min.css"}],Sxe=()=>{const{theme:e,setTheme:t,prismThemeUrl:n,setPrismThemeUrl:r,customFontFamily:a,setCustomFontFamily:i,customFontSize:s,setCustomFontSize:o,chatMaxWidth:l,setChatMaxWidth:u,customThemeColors:d,setCustomThemeColor:h,resetThemeSettings:m}=fr(dn(R=>({theme:R.theme,setTheme:R.setTheme,prismThemeUrl:R.prismThemeUrl,setPrismThemeUrl:R.setPrismThemeUrl,customFontFamily:R.customFontFamily,setCustomFontFamily:R.setCustomFontFamily,customFontSize:R.customFontSize,setCustomFontSize:R.setCustomFontSize,chatMaxWidth:R.chatMaxWidth,setChatMaxWidth:R.setChatMaxWidth,customThemeColors:R.customThemeColors,setCustomThemeColor:R.setCustomThemeColor,resetThemeSettings:R.resetThemeSettings}))),[y,v]=k.useState(s??16),[b,x]=k.useState(xv.some(R=>R.url===n)?"":n??"");k.useEffect(()=>{v(s??16)},[s]),k.useEffect(()=>{xv.some(R=>R.url===n)?x(""):x(n??"")},[n]);const w=k.useCallback(R=>{o(R[0])},[o]),S=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&m()},E=R=>{r(R==="default"?null:R),R==="default"||!xv.some(B=>B.url===R)?x(R==="default"?"":R):x("")},C=R=>{const F=R.target.value.trim();x(F),r(F||null)},T=[{value:"max-w-3xl",label:"Very Small (3xl)"},{value:"max-w-4xl",label:"Small (4xl)"},{value:"max-w-5xl",label:"Medium (5xl)"},{value:"max-w-6xl",label:"Large (6xl)"},{value:"max-w-7xl",label:"Very Large (7xl)"},{value:"max-w-full",label:"Full Width"}],j=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}],I=n===null?"default":n;return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsx(Qm,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Gt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsxs(Yo,{value:e??"system",onValueChange:R=>t(R),children:[p.jsx(Jo,{id:"theme-select",className:"w-[180px]",children:p.jsx(Xo,{placeholder:"Select theme"})}),p.jsxs(Qo,{children:[p.jsx(sa,{value:"light",children:"Default Light"}),p.jsx(sa,{value:"dark",children:"Default Dark"}),p.jsx(sa,{value:"system",children:"System"}),p.jsx(sa,{value:"TijuLight",children:"Tiju Light"}),p.jsx(sa,{value:"TijuDark",children:"Tiju Dark"}),p.jsx(sa,{value:"custom",children:"User Custom"})]})]})]})}),p.jsxs(Qm,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-4",children:[p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"custom-font-family",children:"Custom Font Family"}),p.jsx(Cn,{id:"custom-font-family",value:a??"",onChange:R=>i(R.target.value||null),placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"custom-font-size",children:["Base Font Size (",y,"px)"]}),p.jsx(Wo,{id:"custom-font-size",min:12,max:20,step:1,value:[y],onValueChange:R=>v(R[0]),onValueCommit:w}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"chat-max-width",children:"Chat Content Max Width"}),p.jsxs(Yo,{value:l??"max-w-7xl",onValueChange:R=>u(R||null),children:[p.jsx(Jo,{id:"chat-max-width",className:"w-full mt-1",children:p.jsx(Xo,{placeholder:"Select max width"})}),p.jsx(Qo,{children:T.map(R=>p.jsx(sa,{value:R.value,children:R.label},R.value))})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),p.jsxs(Qm,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-3",children:[p.jsx(Gt,{htmlFor:"prism-theme-select",children:"Select Theme or Enter URL"}),p.jsxs(Yo,{value:I,onValueChange:E,children:[p.jsx(Jo,{id:"prism-theme-select",className:"w-full",children:p.jsx(Xo,{placeholder:"Select code theme..."})}),p.jsxs(Qo,{children:[p.jsx(sa,{value:"default",children:"Default (Matches Theme)"}),xv.map(R=>p.jsx(sa,{value:R.url,children:R.name},R.url))]})]}),p.jsx(Cn,{id:"prism-theme-url-custom",type:"url",placeholder:"Or paste custom theme URL here...",value:b,onChange:C,className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a preset theme or paste a URL to a PrismJS CSS file. Leave blank or select 'Default' to use themes matching light/dark mode."})]}),p.jsx(Qm,{title:"Custom Theme Colors",description:"Define custom colors. Applies only when 'User Custom' theme is selected. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:j.map(({key:R,label:F})=>p.jsx(_xe,{label:F,colorKey:R,value:d==null?void 0:d[R],onChange:h},R))})}),p.jsx(Xs,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(Rt,{variant:"outline",size:"sm",onClick:S,children:[p.jsx(_k,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]})})]})},Exe=gt.memo(Sxe),Sz=k.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=fr(dn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=l0(dn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=ls(dn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[s,o]=k.useState(a||"general");k.useEffect(()=>{e&&o(a||"general")},[e,a]);const l=h=>{h||(t(),i())},u=h=>{o(h)},d=k.useMemo(()=>{const h=[{value:"general",label:"General",content:p.jsx(nbe,{})},{value:"theme",label:"Theme",content:p.jsx(Exe,{})},{value:"providers",label:"Providers & Models",content:p.jsx(oxe,{})},...n?[{value:"assistant",label:"Assistant",content:p.jsx(Abe,{})}]:[],{value:"rules-tags",label:"Rules & Tags",content:p.jsx(xxe,{})},{value:"git",label:"Git",content:p.jsx(hxe,{})},{value:"data",label:"Data",content:p.jsx(Pbe,{})},{value:"mods",label:"Mods",content:p.jsx($be,{})}],m=r.map(y=>({value:y.id,label:y.title,content:gt.isValidElement(y.component)?y.component:typeof y.component=="function"?p.jsx(y.component,{}):null}));return[...h,...m]},[n,r]);return p.jsx(m1,{open:e,onOpenChange:l,children:p.jsxs(g1,{className:_t("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[p.jsxs(y1,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsx(v1,{children:"Settings"}),p.jsx(w1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),p.jsx(Vu,{tabs:d,initialValue:s,onValueChange:u,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsx(b1,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:p.jsx(Rt,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});Sz.displayName="SettingsModalComponent";const Cxe=Sz;function kxe(){const e=Rr.getState().registerChatControl,t=ls.getState().toggleChatControlPanel,n=ls.getState().setInitialSettingsTabs,r=()=>{const i=(s,o)=>{n(null,null),t("settingsModal",!0)};return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:p.jsx(Pv,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:"Settings"})]})})},a=()=>{const i=ls.getState().isChatControlPanelOpen.settingsModal??!1,s=()=>t("settingsModal",!1);return p.jsx(Cxe,{isOpen:i,onClose:s})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(r),iconRenderer:()=>gt.createElement(r),settingsRenderer:()=>gt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function Txe(){const e=Rr.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=ls.getState();return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?p.jsx(vV,{className:"h-4 w-4"}):p.jsx(yV,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(t),iconRenderer:()=>gt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}const Axe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=ki(dn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),s=fr.getState(),[o,l]=k.useState(()=>ki.getState());k.useEffect(()=>{const d=h=>{l(m=>({...m,...h.params}))};return kt.on(Et.PROMPT_PARAMS_CHANGED,d),()=>{kt.off(Et.PROMPT_PARAMS_CHANGED,d)}},[]);const u={temperature:o.temperature??null,setTemperature:e,topP:o.topP??null,setTopP:t,maxTokens:o.maxTokens??null,setMaxTokens:n,topK:o.topK??null,setTopK:r,presencePenalty:o.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:o.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:s.temperature,defaultTopP:s.topP,defaultMaxTokens:s.maxTokens,defaultTopK:s.topK,defaultPresencePenalty:s.presencePenalty,defaultFrequencyPenalty:s.frequencyPenalty};return p.jsx(hB,{...u})},Nxe=()=>{const[e,t]=k.useState(()=>Hn.getState().status==="streaming"),[n,r]=k.useState(!0);return k.useEffect(()=>{const a=o=>{t(o.status==="streaming")},i=o=>{var y;if(!o.modelId){r(!1);return}const{getSelectedModel:l}=Bn.getState(),u=l(),d=((y=u==null?void 0:u.metadata)==null?void 0:y.supported_parameters)??[],h=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],m=fr.getState().enableAdvancedSettings;r(m&&d.some(v=>h.includes(v)))},s=o=>{o.key==="enableAdvancedSettings"&&i({modelId:Bn.getState().selectedModelId})};return i({modelId:Bn.getState().selectedModelId}),kt.on(Et.INTERACTION_STATUS_CHANGED,a),kt.on(Et.MODEL_SELECTION_CHANGED,i),kt.on(Et.SETTINGS_CHANGED,s),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,a),kt.off(Et.MODEL_SELECTION_CHANGED,i),kt.off(Et.SETTINGS_CHANGED,s)}},[]),n?p.jsxs(fc,{children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(hc,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:e,"aria-label":"Adjust Advanced Parameters",children:p.jsx(OV,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:"Advanced Parameters"})]})}),p.jsx(pc,{className:"w-auto p-0",align:"start",children:p.jsx(Axe,{})})]}):null};function Rxe(){const e=Rr.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>gt.createElement(Nxe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:s}=ki.getState(),o=(u,d,h)=>{h!==null&&(u[d]=h)},l={};return o(l,"temperature",t),o(l,"top_p",n),o(l,"max_tokens",r),o(l,"top_k",a),o(l,"presence_penalty",i),o(l,"frequency_penalty",s),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const Ez=20,Ixe=Ez*1024*1024,jxe=()=>{const e=k.useRef(null),t=Jl.getState().addAttachedFile,[n,r]=k.useState(()=>Hn.getState().status==="streaming"),[a,i]=k.useState(!0);k.useEffect(()=>{const u=h=>{r(h.status==="streaming")},d=h=>{var b,x;if(!h.modelId){i(!1);return}const{getSelectedModel:m}=Bn.getState(),y=m(),v=(x=(b=y==null?void 0:y.metadata)==null?void 0:b.architecture)==null?void 0:x.input_modalities;i(!v||v.some(w=>w!=="text"))};return d({modelId:Bn.getState().selectedModelId}),kt.on(Et.INTERACTION_STATUS_CHANGED,u),kt.on(Et.MODEL_SELECTION_CHANGED,d),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,u),kt.off(Et.MODEL_SELECTION_CHANGED,d)}},[]);const s=k.useCallback(async u=>{const d=u.target.files;if(!d)return;const h=a;for(const m of Array.from(d)){if(m.size>Ixe){Ye.error(`File "${m.name}" exceeds the ${Ez}MB limit.`);continue}const y=kk(m.name,m.type),v=m.type.startsWith("image/");if(!y&&!h){Ye.warning(`File "${m.name}" (${m.type}) cannot be uploaded. The current model only supports text input.`);continue}try{let b={};if(y)b.contentText=await m.text();else if(v){const x=new FileReader,w=new Promise((E,C)=>{x.onload=()=>E(x.result),x.onerror=T=>C(T)});x.readAsDataURL(m);const S=await w;S&&S.includes(",")?b.contentBase64=S.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${m.name}`)}else h&&console.log(`File type ${m.type} (Name: ${m.name}) not directly processed for content storage, but model supports non-text.`);t({source:"direct",name:m.name,type:m.type||"application/octet-stream",size:m.size,...b})}catch(b){console.error(`Error processing file ${m.name}:`,b),Ye.error(`Failed to process file "${m.name}": ${b instanceof Error?b.message:String(b)}`)}}u.target&&(u.target.value="")},[t,a]),o=()=>{var u;(u=e.current)==null||u.click()},l=a?"Attach Files (Text, Images, etc.)":"Attach Text Files";return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:e,onChange:s,multiple:!0,className:"hidden",disabled:n}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{type:"button",variant:"ghost",size:"icon",onClick:o,disabled:n,className:"h-8 w-8","aria-label":l,children:p.jsx(xk,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:l})]})})]})},Oxe=()=>{const e=Jl.getState().removeAttachedFile,[t,n]=k.useState(()=>Jl.getState().attachedFilesMetadata),[r,a]=k.useState(()=>Hn.getState().status==="streaming");return k.useEffect(()=>{const i=o=>{n(o.files)},s=o=>{a(o.status==="streaming")};return kt.on(Et.ATTACHED_FILES_CHANGED,i),kt.on(Et.INTERACTION_STATUS_CHANGED,s),()=>{kt.off(Et.ATTACHED_FILES_CHANGED,i),kt.off(Et.INTERACTION_STATUS_CHANGED,s)}},[]),t.length===0?null:p.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:t.map(i=>p.jsx(HT,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function Dxe(){const e=Rr.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>gt.createElement(jxe),renderer:()=>gt.createElement(Oxe)}),console.log("[Function] Registered Core File Attachment Control")}const Mxe=()=>{const{toggleVfsModal:e,isVfsModalOpen:t}=ls(dn(l=>({toggleVfsModal:l.toggleVfsModal,isVfsModalOpen:l.isVfsModalOpen}))),{enableVfs:n,selectedFileIds:r,nodes:a,clearSelection:i}=co(dn(l=>({enableVfs:l.enableVfs,selectedFileIds:l.selectedFileIds,nodes:l.nodes,clearSelection:l.clearSelection}))),s=Jl.getState().addAttachedFile,o=()=>{if(r.size===0){Ye.info("No files selected in VFS to attach.");return}let l=0;r.forEach(u=>{const d=a[u];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0&&(Ye.success(`Attached ${l} file(s) from VFS to the next prompt.`),i(),e(!1))};return n?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:_t("h-8 w-8",t&&"bg-muted text-primary"),onClick:()=>e(),"aria-label":"Toggle Virtual File System",children:p.jsx(sD,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:"Virtual Filesystem"})]})}),r.size>0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsxs(Rt,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:o,"aria-label":`Attach ${r.size} selected VFS file(s)`,children:[p.jsx(xk,{className:"h-4 w-4 mr-1"}),"Attach (",r.size,")"]})}),p.jsx(Qn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},Cz=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i,isMobile:s=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return s?p.jsxs("div",{className:"flex items-center gap-2 p-1",children:[p.jsx(Dd,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),p.jsx(Cn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:i}),p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(xi,{className:"h-4 w-4"})}),p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(_i,{className:"h-4 w-4"})})]})]}):p.jsxs(Yr,{className:"bg-muted/30",children:[p.jsx(Mn,{className:"px-2 py-1"}),p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(Dd,{className:"h-5 w-5 text-yellow-400"})}),p.jsx(Mn,{className:"py-1 px-2",colSpan:3,children:p.jsx(Cn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),p.jsx(Mn,{className:"text-right pr-4 py-1",children:p.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(xi,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:"Create (Enter)"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(_i,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var fk=["Enter"," "],Pxe=["ArrowDown","PageUp","Home"],kz=["ArrowUp","PageDown","End"],Fxe=[...Pxe,...kz],Lxe={ltr:[...fk,"ArrowRight"],rtl:[...fk,"ArrowLeft"]},$xe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cy="Menu",[p0,Bxe,zxe]=e1(cy),[ff,I1]=di(cy,[zxe,ju,C1]),j1=ju(),Tz=C1(),[Uxe,hf]=ff(cy),[qxe,uy]=ff(cy),Az=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:s=!0}=e,o=j1(t),[l,u]=k.useState(null),d=k.useRef(!1),h=La(i),m=Ep(a);return k.useEffect(()=>{const y=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),p.jsx(yx,{...o,children:p.jsx(Uxe,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:u,children:p.jsx(qxe,{scope:t,onClose:k.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:s,children:r})})})};Az.displayName=cy;var Hxe="MenuAnchor",DA=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=j1(n);return p.jsx(x0,{...a,...r,ref:t})});DA.displayName=Hxe;var MA="MenuPortal",[Vxe,Nz]=ff(MA,{forceMount:void 0}),Rz=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=hf(MA,t);return p.jsx(Vxe,{scope:t,forceMount:n,children:p.jsx(Ta,{present:n||i.open,children:p.jsx(cp,{asChild:!0,container:a,children:r})})})};Rz.displayName=MA;var Rs="MenuContent",[Gxe,PA]=ff(Rs),Iz=k.forwardRef((e,t)=>{const n=Nz(Rs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=hf(Rs,e.__scopeMenu),s=uy(Rs,e.__scopeMenu);return p.jsx(p0.Provider,{scope:e.__scopeMenu,children:p.jsx(Ta,{present:r||i.open,children:p.jsx(p0.Slot,{scope:e.__scopeMenu,children:s.modal?p.jsx(Kxe,{...a,ref:t}):p.jsx(Wxe,{...a,ref:t})})})})}),Kxe=k.forwardRef((e,t)=>{const n=hf(Rs,e.__scopeMenu),r=k.useRef(null),a=kn(t,r);return k.useEffect(()=>{const i=r.current;if(i)return r1(i)},[]),p.jsx(FA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ht(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Wxe=k.forwardRef((e,t)=>{const n=hf(Rs,e.__scopeMenu);return p.jsx(FA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Zxe=du("MenuContent.ScrollLock"),FA=k.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:y,disableOutsideScroll:v,...b}=e,x=hf(Rs,n),w=uy(Rs,n),S=j1(n),E=Tz(n),C=Bxe(n),[T,j]=k.useState(null),I=k.useRef(null),R=kn(t,I,x.onContentChange),F=k.useRef(0),B=k.useRef(""),H=k.useRef(0),D=k.useRef(null),Z=k.useRef("right"),V=k.useRef(0),ue=v?ny:k.Fragment,ae=v?{as:Zxe,allowPinchZoom:!0}:void 0,ne=ie=>{var Ae,Ne;const L=B.current+ie,J=C().filter(Ce=>!Ce.disabled),Q=document.activeElement,ee=(Ae=J.find(Ce=>Ce.ref.current===Q))==null?void 0:Ae.textValue,fe=J.map(Ce=>Ce.textValue),ve=o1e(fe,L,ee),Oe=(Ne=J.find(Ce=>Ce.textValue===ve))==null?void 0:Ne.ref.current;(function Ce(Pe){B.current=Pe,window.clearTimeout(F.current),Pe!==""&&(F.current=window.setTimeout(()=>Ce(""),1e3))})(L),Oe&&setTimeout(()=>Oe.focus())};k.useEffect(()=>()=>window.clearTimeout(F.current),[]),t1();const X=k.useCallback(ie=>{var J,Q;return Z.current===((J=D.current)==null?void 0:J.side)&&c1e(ie,(Q=D.current)==null?void 0:Q.area)},[]);return p.jsx(Gxe,{scope:n,searchRef:B,onItemEnter:k.useCallback(ie=>{X(ie)&&ie.preventDefault()},[X]),onItemLeave:k.useCallback(ie=>{var L;X(ie)||((L=I.current)==null||L.focus(),j(null))},[X]),onTriggerLeave:k.useCallback(ie=>{X(ie)&&ie.preventDefault()},[X]),pointerGraceTimerRef:H,onPointerGraceIntentChange:k.useCallback(ie=>{D.current=ie},[]),children:p.jsx(ue,{...ae,children:p.jsx(ty,{asChild:!0,trapped:a,onMountAutoFocus:Ht(i,ie=>{var L;ie.preventDefault(),(L=I.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:p.jsx(sp,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:y,children:p.jsx(zB,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:j,onEntryFocus:Ht(l,ie=>{w.isUsingKeyboardRef.current||ie.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(bx,{role:"menu","aria-orientation":"vertical","data-state":Kz(x.open),"data-radix-menu-content":"",dir:w.dir,...S,...b,ref:R,style:{outline:"none",...b.style},onKeyDown:Ht(b.onKeyDown,ie=>{const J=ie.target.closest("[data-radix-menu-content]")===ie.currentTarget,Q=ie.ctrlKey||ie.altKey||ie.metaKey,ee=ie.key.length===1;J&&(ie.key==="Tab"&&ie.preventDefault(),!Q&&ee&&ne(ie.key));const fe=I.current;if(ie.target!==fe||!Fxe.includes(ie.key))return;ie.preventDefault();const Oe=C().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);kz.includes(ie.key)&&Oe.reverse(),i1e(Oe)}),onBlur:Ht(e.onBlur,ie=>{ie.currentTarget.contains(ie.target)||(window.clearTimeout(F.current),B.current="")}),onPointerMove:Ht(e.onPointerMove,m0(ie=>{const L=ie.target,J=V.current!==ie.clientX;if(ie.currentTarget.contains(L)&&J){const Q=ie.clientX>V.current?"right":"left";Z.current=Q,V.current=ie.clientX}}))})})})})})})});Iz.displayName=Rs;var Yxe="MenuGroup",LA=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{role:"group",...r,ref:t})});LA.displayName=Yxe;var Xxe="MenuLabel",jz=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{...r,ref:t})});jz.displayName=Xxe;var Zw="MenuItem",E6="menu.itemSelect",O1=k.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=k.useRef(null),s=uy(Zw,e.__scopeMenu),o=PA(Zw,e.__scopeMenu),l=kn(t,i),u=k.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(E6,{bubbles:!0,cancelable:!0});h.addEventListener(E6,y=>r==null?void 0:r(y),{once:!0}),$8(h,m),m.defaultPrevented?u.current=!1:s.onClose()}};return p.jsx(Oz,{...a,ref:l,disabled:n,onClick:Ht(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:Ht(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:Ht(e.onKeyDown,h=>{const m=o.searchRef.current!=="";n||m&&h.key===" "||fk.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});O1.displayName=Zw;var Oz=k.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,s=PA(Zw,n),o=Tz(n),l=k.useRef(null),u=kn(t,l),[d,h]=k.useState(!1),[m,y]=k.useState("");return k.useEffect(()=>{const v=l.current;v&&y((v.textContent??"").trim())},[i.children]),p.jsx(p0.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:p.jsx(UB,{asChild:!0,...o,focusable:!r,children:p.jsx(rn.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Ht(e.onPointerMove,m0(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ht(e.onPointerLeave,m0(v=>s.onItemLeave(v))),onFocus:Ht(e.onFocus,()=>h(!0)),onBlur:Ht(e.onBlur,()=>h(!1))})})})}),Jxe="MenuCheckboxItem",Dz=k.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return p.jsx($z,{scope:e.__scopeMenu,checked:n,children:p.jsx(O1,{role:"menuitemcheckbox","aria-checked":Yw(n)?"mixed":n,...a,ref:t,"data-state":BA(n),onSelect:Ht(a.onSelect,()=>r==null?void 0:r(Yw(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Dz.displayName=Jxe;var Mz="MenuRadioGroup",[Qxe,e1e]=ff(Mz,{value:void 0,onValueChange:()=>{}}),Pz=k.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=La(r);return p.jsx(Qxe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:p.jsx(LA,{...a,ref:t})})});Pz.displayName=Mz;var Fz="MenuRadioItem",Lz=k.forwardRef((e,t)=>{const{value:n,...r}=e,a=e1e(Fz,e.__scopeMenu),i=n===a.value;return p.jsx($z,{scope:e.__scopeMenu,checked:i,children:p.jsx(O1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":BA(i),onSelect:Ht(r.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,n)},{checkForDefaultPrevented:!1})})})});Lz.displayName=Fz;var $A="MenuItemIndicator",[$z,t1e]=ff($A,{checked:!1}),Bz=k.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=t1e($A,n);return p.jsx(Ta,{present:r||Yw(i.checked)||i.checked===!0,children:p.jsx(rn.span,{...a,ref:t,"data-state":BA(i.checked)})})});Bz.displayName=$A;var n1e="MenuSeparator",zz=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});zz.displayName=n1e;var r1e="MenuArrow",Uz=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=j1(n);return p.jsx(vx,{...a,...r,ref:t})});Uz.displayName=r1e;var a1e="MenuSub",[l2e,qz]=ff(a1e),eg="MenuSubTrigger",Hz=k.forwardRef((e,t)=>{const n=hf(eg,e.__scopeMenu),r=uy(eg,e.__scopeMenu),a=qz(eg,e.__scopeMenu),i=PA(eg,e.__scopeMenu),s=k.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=k.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return k.useEffect(()=>d,[d]),k.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),p.jsx(DA,{asChild:!0,...u,children:p.jsx(Oz,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Kz(n.open),...e,ref:Yl(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ht(e.onPointerMove,m0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Ht(e.onPointerLeave,m0(h=>{var y,v;d();const m=(y=n.content)==null?void 0:y.getBoundingClientRect();if(m){const b=(v=n.content)==null?void 0:v.dataset.side,x=b==="right",w=x?-5:5,S=m[x?"left":"right"],E=m[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:S,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:S,y:m.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ht(e.onKeyDown,h=>{var y;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Lxe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),h.preventDefault())})})})});Hz.displayName=eg;var Vz="MenuSubContent",Gz=k.forwardRef((e,t)=>{const n=Nz(Rs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=hf(Rs,e.__scopeMenu),s=uy(Rs,e.__scopeMenu),o=qz(Vz,e.__scopeMenu),l=k.useRef(null),u=kn(t,l);return p.jsx(p0.Provider,{scope:e.__scopeMenu,children:p.jsx(Ta,{present:r||i.open,children:p.jsx(p0.Slot,{scope:e.__scopeMenu,children:p.jsx(FA,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;s.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ht(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ht(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:Ht(e.onKeyDown,d=>{var y;const h=d.currentTarget.contains(d.target),m=$xe[s.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(y=o.trigger)==null||y.focus(),d.preventDefault())})})})})})});Gz.displayName=Vz;function Kz(e){return e?"open":"closed"}function Yw(e){return e==="indeterminate"}function BA(e){return Yw(e)?"indeterminate":e?"checked":"unchecked"}function i1e(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function s1e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function o1e(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=s1e(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function l1e(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function c1e(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return l1e(n,t)}function m0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Wz=Az,Zz=DA,Yz=Rz,Xz=Iz,Jz=LA,Qz=jz,e7=O1,t7=Dz,n7=Pz,r7=Lz,a7=Bz,i7=zz,s7=Uz,o7=Hz,l7=Gz,zA="ContextMenu",[u1e,c2e]=di(zA,[I1]),Ni=I1(),[d1e,c7]=u1e(zA),u7=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[s,o]=k.useState(!1),l=Ni(t),u=La(r),d=k.useCallback(h=>{o(h),u(h)},[u]);return p.jsx(d1e,{scope:t,open:s,onOpenChange:d,modal:i,children:p.jsx(Wz,{...l,dir:a,open:s,onOpenChange:d,modal:i,children:n})})};u7.displayName=zA;var d7="ContextMenuTrigger",f7=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=c7(d7,n),s=Ni(n),o=k.useRef({x:0,y:0}),l=k.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),u=k.useRef(0),d=k.useCallback(()=>window.clearTimeout(u.current),[]),h=m=>{o.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return k.useEffect(()=>d,[d]),k.useEffect(()=>void(r&&d()),[r,d]),p.jsxs(p.Fragment,{children:[p.jsx(Zz,{...s,virtualRef:l}),p.jsx(rn.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Ht(e.onContextMenu,m=>{d(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:Ht(e.onPointerDown,_v(m=>{d(),u.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:Ht(e.onPointerMove,_v(d)),onPointerCancel:r?e.onPointerCancel:Ht(e.onPointerCancel,_v(d)),onPointerUp:r?e.onPointerUp:Ht(e.onPointerUp,_v(d))})]})});f7.displayName=d7;var f1e="ContextMenuPortal",h7=e=>{const{__scopeContextMenu:t,...n}=e,r=Ni(t);return p.jsx(Yz,{...r,...n})};h7.displayName=f1e;var p7="ContextMenuContent",m7=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=c7(p7,n),i=Ni(n),s=k.useRef(!1);return p.jsx(Xz,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&s.current&&o.preventDefault(),s.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!a.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});m7.displayName=p7;var h1e="ContextMenuGroup",p1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(Jz,{...a,...r,ref:t})});p1e.displayName=h1e;var m1e="ContextMenuLabel",g1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(Qz,{...a,...r,ref:t})});g1e.displayName=m1e;var y1e="ContextMenuItem",g7=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(e7,{...a,...r,ref:t})});g7.displayName=y1e;var b1e="ContextMenuCheckboxItem",v1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(t7,{...a,...r,ref:t})});v1e.displayName=b1e;var w1e="ContextMenuRadioGroup",x1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(n7,{...a,...r,ref:t})});x1e.displayName=w1e;var _1e="ContextMenuRadioItem",S1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(r7,{...a,...r,ref:t})});S1e.displayName=_1e;var E1e="ContextMenuItemIndicator",C1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(a7,{...a,...r,ref:t})});C1e.displayName=E1e;var k1e="ContextMenuSeparator",y7=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(i7,{...a,...r,ref:t})});y7.displayName=k1e;var T1e="ContextMenuArrow",A1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(s7,{...a,...r,ref:t})});A1e.displayName=T1e;var N1e="ContextMenuSubTrigger",R1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(o7,{...a,...r,ref:t})});R1e.displayName=N1e;var I1e="ContextMenuSubContent",j1e=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ni(n);return p.jsx(l7,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});j1e.displayName=I1e;function _v(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var O1e=u7,D1e=f7,M1e=h7,P1e=m7,F1e=g7,L1e=y7;function C6({...e}){return p.jsx(O1e,{"data-slot":"context-menu",...e})}function k6({...e}){return p.jsx(D1e,{"data-slot":"context-menu-trigger",...e})}function T6({className:e,...t}){return p.jsx(M1e,{children:p.jsx(P1e,{"data-slot":"context-menu-content",className:_t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function ns({className:e,inset:t,variant:n="default",...r}){return p.jsx(F1e,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:_t("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function A6({className:e,...t}){return p.jsx(L1e,{"data-slot":"context-menu-separator",className:_t("bg-border -mx-1 my-1 h-px",e),...t})}const $1e=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:m,handleDelete:y,setNewName:v,renameInputRef:b,handleGitInit:x,handleGitPull:w,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const T=e.type==="folder",j=H=>{H.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(T?o(e):l(!n,e.id))},I=H=>{H.key==="Enter"?h():H.key==="Escape"&&d()},R=T?r?rD:Dd:nD,F=T?r?"text-green-400":"text-yellow-400":"text-blue-400",B=p.jsxs(Yr,{className:_t("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!T&&"cursor-pointer"),onClick:j,onDoubleClick:()=>!i&&!t&&o(e),children:[p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(c0,{checked:n,onCheckedChange:H=>l(!!H,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||T})}),p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(R,{className:_t("h-5 w-5",F)})}),p.jsx(Mn,{className:"py-1 px-2",children:t?p.jsx(Cn,{ref:b,value:a,onChange:H=>v(H.target.value),onBlur:h,onKeyDown:I,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:H=>H.stopPropagation(),disabled:i}):p.jsx("span",{className:_t("truncate",T&&"cursor-pointer hover:underline"),title:e.name,onClick:H=>{T&&(H.stopPropagation(),o(e))},children:e.name})}),p.jsx(Mn,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?Fg(e.size):""}),p.jsx(Mn,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),p.jsx(Mn,{className:"text-right pr-4 py-1",children:p.jsx("div",{className:_t("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?p.jsxs(p.Fragment,{children:[p.jsx(Dn,{tooltipText:"Save (Enter)",onClick:H=>{H.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(xi,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),p.jsx(Dn,{tooltipText:"Cancel (Esc)",onClick:H=>{H.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:p.jsx(_i,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Dn,{tooltipText:"Rename",onClick:H=>{H.stopPropagation(),u(e)},"aria-label":"Rename",disabled:i||s,icon:p.jsx(rg,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Dn,{tooltipText:T?"Download folder (.zip)":"Download file",onClick:H=>{H.stopPropagation(),m(e)},"aria-label":T?"Download folder as ZIP":"Download file",disabled:i,icon:p.jsx(jd,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Dn,{tooltipText:"Delete",onClick:H=>{H.stopPropagation(),y(e)},"aria-label":`Delete ${T?"folder":"file"}`,disabled:i,icon:p.jsx($i,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return T?p.jsxs(C6,{children:[p.jsx(k6,{disabled:t||i,asChild:!0,children:B}),p.jsxs(T6,{children:[p.jsx(ns,{onSelect:()=>o(e),disabled:t||i,children:"Open Folder"}),p.jsx(A6,{}),r?p.jsxs(p.Fragment,{children:[p.jsxs(ns,{onSelect:()=>w(e.path),disabled:i,children:[p.jsx(iD,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),p.jsxs(ns,{onSelect:()=>S(e.path),disabled:i,children:[p.jsx(aD,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),p.jsxs(ns,{onSelect:()=>E(e.path),disabled:i,children:[p.jsx(vk,{className:"mr-2 h-4 w-4"}),"Git Push"]}),p.jsxs(ns,{onSelect:()=>C(e.path),disabled:i,children:[p.jsx(oD,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):p.jsxs(ns,{onSelect:()=>x(e.path),disabled:i,children:[p.jsx(fu,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),p.jsx(A6,{}),p.jsxs(ns,{onSelect:()=>u(e),disabled:i,children:[p.jsx(rg,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(ns,{onSelect:()=>m(e),disabled:i,children:[p.jsx(jd,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),p.jsxs(ns,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>y(e),disabled:i,children:[p.jsx($i,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):p.jsxs(C6,{children:[p.jsx(k6,{disabled:t||i,asChild:!0,children:B}),p.jsxs(T6,{children:[p.jsxs(ns,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),p.jsxs(ns,{onSelect:()=>u(e),disabled:i,children:[p.jsx(rg,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(ns,{onSelect:()=>m(e),disabled:i,children:[p.jsx(jd,{className:"mr-2 h-4 w-4"}),"Download File"]}),p.jsxs(ns,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>y(e),disabled:i,children:[p.jsx($i,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},B1e=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:y,handleDownload:v,handleDelete:b,setNewName:x,setNewFolderName:w,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:T,handleGitPull:j,handleGitCommit:I,handleGitPush:R,handleGitStatus:F})=>{const B=k.useMemo(()=>e,[e]);return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):p.jsx("div",{className:"relative h-full",children:p.jsxs(Ap,{className:"w-full text-sm",children:[p.jsx(Np,{className:"sticky top-0 bg-card z-10",children:p.jsxs(Yr,{className:"hover:bg-card",children:[p.jsx(Tr,{className:"w-[40px] px-2"}),p.jsx(Tr,{className:"w-[40px] px-2"}),p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{className:"w-[100px] text-right",children:"Size"}),p.jsx(Tr,{className:"w-[150px] text-right",children:"Modified"}),p.jsx(Tr,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),p.jsxs(Rp,{children:[r&&p.jsx(Cz,{newFolderName:a,setNewFolderName:w,handleCreateFolder:y,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s}),B.map(H=>{const D=t===H.path,Z=i.has(H.id),V=C[H.path]??!1;return p.jsx($1e,{entry:H,isEditingThis:D,isChecked:Z,isGitRepo:V,newName:D?n:"",isOperationLoading:s,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:x,renameInputRef:S,handleGitInit:T,handleGitPull:j,handleGitCommit:I,handleGitPush:R,handleGitStatus:F},H.id)}),e.length===0&&!r&&!s&&p.jsx(Yr,{children:p.jsx(Mn,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},z1e=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:s,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:u,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:y,handleCloneClick:v,fileInputRef:b,folderInputRef:x,archiveInputRef:w,handleFileChange:S,handleArchiveChange:E})=>p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:b,onChange:S,className:"hidden",multiple:!0,disabled:t}),p.jsx("input",{type:"file",ref:x,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),p.jsx("input",{type:"file",ref:w,onChange:E,className:"hidden",accept:".zip",disabled:t}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(Rt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:p.jsx(iV,{className:"h-4 w-4"})}),p.jsx(Rt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:p.jsx(KH,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),p.jsx("div",{className:"flex-grow"}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",p.jsx(Rt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(Qw,{className:"h-4 w-4"})}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(bk,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(eD,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(Dd,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(IH,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(fu,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),y()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(Jq,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),b7=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:s,isSubmitting:o,submitDisabled:l=!1,className:u,contentClassName:d})=>{const h=async m=>{m==null||m.preventDefault(),!(o||l)&&await s()};return p.jsx(m1,{open:e,onOpenChange:t,children:p.jsxs(g1,{className:_t(u),children:[p.jsxs(y1,{children:[p.jsx(v1,{children:n}),r&&p.jsx(w1,{children:r})]}),p.jsx("div",{className:_t("py-4",d),children:a}),p.jsxs(b1,{children:[p.jsx(Rye,{asChild:!0,children:p.jsx(Rt,{variant:"outline",disabled:o,children:"Cancel"})}),p.jsxs(Rt,{onClick:h,disabled:o||l,children:[o&&p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":i]})]})]})})},U1e=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:s,onSubmitClone:o,currentPath:l})=>p.jsx(b7,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:p.jsxs(p.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",p.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:s,submitDisabled:!n.trim(),children:p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Gt,{htmlFor:"clone-url",className:"text-right",children:"URL"}),p.jsx(Cn,{id:"clone-url",value:n,onChange:u=>r(u.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:s})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Gt,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),p.jsx(Cn,{id:"clone-branch",value:a,onChange:u=>i(u.target.value),className:"col-span-3",placeholder:"main (default)",disabled:s})]})]})}),q1e=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:s})=>p.jsx(b7,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:p.jsxs(p.Fragment,{children:["Enter a commit message for the changes in ",p.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:s,isSubmitting:i,submitDisabled:!r.trim(),children:p.jsx("div",{className:"grid gap-4",children:p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Gt,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),p.jsx(Cn,{id:"commit-msg",value:r,onChange:o=>a(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})});var D1="DropdownMenu",[H1e,u2e]=di(D1,[I1]),Ri=I1(),[V1e,v7]=H1e(D1),w7=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=Ri(t),u=k.useRef(null),[d,h]=Is({prop:a,defaultProp:i??!1,onChange:s,caller:D1});return p.jsx(V1e,{scope:t,triggerId:Ea(),triggerRef:u,contentId:Ea(),open:d,onOpenChange:h,onOpenToggle:k.useCallback(()=>h(m=>!m),[h]),modal:o,children:p.jsx(Wz,{...l,open:d,onOpenChange:h,dir:r,modal:o,children:n})})};w7.displayName=D1;var x7="DropdownMenuTrigger",_7=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=v7(x7,n),s=Ri(n);return p.jsx(Zz,{asChild:!0,...s,children:p.jsx(rn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Yl(t,i.triggerRef),onPointerDown:Ht(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Ht(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});_7.displayName=x7;var G1e="DropdownMenuPortal",S7=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ri(t);return p.jsx(Yz,{...r,...n})};S7.displayName=G1e;var E7="DropdownMenuContent",C7=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v7(E7,n),i=Ri(n),s=k.useRef(!1);return p.jsx(Xz,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Ht(e.onCloseAutoFocus,o=>{var l;s.current||(l=a.triggerRef.current)==null||l.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:Ht(e.onInteractOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!a.modal||d)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C7.displayName=E7;var K1e="DropdownMenuGroup",W1e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(Jz,{...a,...r,ref:t})});W1e.displayName=K1e;var Z1e="DropdownMenuLabel",Y1e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(Qz,{...a,...r,ref:t})});Y1e.displayName=Z1e;var X1e="DropdownMenuItem",k7=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(e7,{...a,...r,ref:t})});k7.displayName=X1e;var J1e="DropdownMenuCheckboxItem",Q1e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(t7,{...a,...r,ref:t})});Q1e.displayName=J1e;var e_e="DropdownMenuRadioGroup",t_e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(n7,{...a,...r,ref:t})});t_e.displayName=e_e;var n_e="DropdownMenuRadioItem",r_e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(r7,{...a,...r,ref:t})});r_e.displayName=n_e;var a_e="DropdownMenuItemIndicator",i_e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(a7,{...a,...r,ref:t})});i_e.displayName=a_e;var s_e="DropdownMenuSeparator",T7=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(i7,{...a,...r,ref:t})});T7.displayName=s_e;var o_e="DropdownMenuArrow",l_e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(s7,{...a,...r,ref:t})});l_e.displayName=o_e;var c_e="DropdownMenuSubTrigger",u_e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(o7,{...a,...r,ref:t})});u_e.displayName=c_e;var d_e="DropdownMenuSubContent",f_e=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ri(n);return p.jsx(l7,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});f_e.displayName=d_e;var h_e=w7,p_e=_7,m_e=S7,g_e=C7,y_e=k7,b_e=T7;function v_e({...e}){return p.jsx(h_e,{"data-slot":"dropdown-menu",...e})}function w_e({...e}){return p.jsx(p_e,{"data-slot":"dropdown-menu-trigger",...e})}function x_e({className:e,sideOffset:t=4,...n}){return p.jsx(m_e,{children:p.jsx(g_e,{"data-slot":"dropdown-menu-content",sideOffset:t,className:_t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Po({className:e,inset:t,variant:n="default",...r}){return p.jsx(y_e,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:_t("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function N6({className:e,...t}){return p.jsx(b_e,{"data-slot":"dropdown-menu-separator",className:_t("bg-border -mx-1 my-1 h-px",e),...t})}const __e=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:y,handleDownload:v,handleDelete:b,setNewName:x,setNewFolderName:w,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:T,handleGitPull:j,handleGitCommit:I,handleGitPush:R,handleGitStatus:F})=>{const B=H=>{H.key==="Enter"?h():H.key==="Escape"&&d()};return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):p.jsxs("div",{className:"p-2 space-y-1",children:[r&&p.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:p.jsx(Cz,{newFolderName:a,setNewFolderName:w,handleCreateFolder:y,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s,isMobile:!0})}),e.map(H=>{const D=t===H.path,Z=i.has(H.id),V=C[H.path]??!1,ue=H.type==="folder",ae=ue?V?rD:Dd:nD,ne=ue?V?"text-green-400":"text-yellow-400":"text-blue-400";return p.jsxs("div",{className:_t("flex items-center justify-between p-2 border rounded-md",D&&"bg-muted ring-1 ring-primary",s&&"opacity-70 cursor-not-allowed",!D&&"hover:bg-muted/50",!D&&"cursor-pointer"),onClick:()=>{D||s||(ue?o(H):l(!Z,H.id))},children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!ue&&p.jsx(c0,{checked:Z,onCheckedChange:X=>l(!!X,H.id),"aria-label":`Select ${H.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:s,onClick:X=>X.stopPropagation()}),ue&&p.jsx("div",{className:"w-6 flex-shrink-0"}),p.jsx(ae,{className:_t("h-5 w-5 flex-shrink-0",ne)}),p.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[D?p.jsx(Cn,{ref:S,value:n,onChange:X=>x(X.target.value),onBlur:h,onKeyDown:B,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:X=>X.stopPropagation(),disabled:s}):p.jsx("span",{className:"text-sm font-medium truncate",title:H.name,children:H.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:H.type==="file"&&H.size!==void 0?Fg(H.size):H.type==="folder"?V?"Git Repository":"Folder":""})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:D?p.jsxs(p.Fragment,{children:[p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:X=>{X.stopPropagation(),h()},disabled:s||!n.trim(),"aria-label":"Save name",children:s?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(xi,{className:"h-4 w-4"})}),p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:X=>{X.stopPropagation(),d()},disabled:s,"aria-label":"Cancel edit",children:p.jsx(_i,{className:"h-4 w-4"})})]}):p.jsxs(v_e,{children:[p.jsx(w_e,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:X=>X.stopPropagation(),disabled:s,"aria-label":"More actions",children:p.jsx(NH,{className:"h-4 w-4"})})}),p.jsxs(x_e,{align:"end",onClick:X=>X.stopPropagation(),children:[ue&&p.jsx(Po,{onSelect:()=>o(H),children:"Open Folder"}),!ue&&p.jsxs(Po,{onSelect:()=>l(!Z,H.id),children:[Z?"Deselect":"Select"," File"]}),p.jsxs(Po,{onSelect:()=>u(H),children:[p.jsx(rg,{className:"mr-2 h-4 w-4"})," Rename"]}),p.jsxs(Po,{onSelect:()=>v(H),children:[p.jsx(jd,{className:"mr-2 h-4 w-4"})," Download"," ",ue?"as ZIP":""]}),ue&&p.jsx(N6,{}),ue&&V&&p.jsxs(p.Fragment,{children:[p.jsxs(Po,{onSelect:()=>j(H.path),children:[p.jsx(iD,{className:"mr-2 h-4 w-4"})," Git Pull"]}),p.jsxs(Po,{onSelect:()=>I(H.path),children:[p.jsx(aD,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),p.jsxs(Po,{onSelect:()=>R(H.path),children:[p.jsx(vk,{className:"mr-2 h-4 w-4"})," Git Push"]}),p.jsxs(Po,{onSelect:()=>F(H.path),children:[p.jsx(oD,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),ue&&!V&&p.jsxs(Po,{onSelect:()=>T(H.path),children:[p.jsx(fu,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),p.jsx(N6,{}),p.jsxs(Po,{className:"text-red-600 focus:text-red-600",onSelect:()=>b(H),children:[p.jsx($i,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},H.id)}),e.length===0&&!r&&!s&&p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},UA=k.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:s,createDirectory:o,uploadFiles:l,deleteNodes:u,renameNode:d,setCurrentPath:h,rootId:m,selectFile:y,deselectFile:v,selectedFileIds:b,vfsKey:x,configuredVfsKey:w,initializingKey:S,_setError:E,_setOperationLoading:C,findNodeByPath:T,initializeVFS:j}=co(dn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[I,R]=k.useState(""),[F,B]=k.useState(null),[H,D]=k.useState(!1),[Z,V]=k.useState(""),[ue,ae]=k.useState({}),[ne,X]=k.useState(!1),[ie,L]=k.useState(""),[J,Q]=k.useState(""),[ee,fe]=k.useState(!1),[ve,Oe]=k.useState(!1),[Ae,Ne]=k.useState(null),[Ce,Pe]=k.useState(""),[Qe,Le]=k.useState(!1),[Ie,z]=k.useState({}),Se=k.useRef(null),Te=k.useRef(null),de=k.useRef(null),se=k.useRef(null),te=k.useRef(null),xe=n?e[n]:null,Fe=xe?xe.path:"/",Ge=(t[n||m||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,It)=>ut.type==="folder"&&It.type==="file"?-1:ut.type==="file"&&It.type==="folder"?1:ut.name.localeCompare(It.name)),Nt=k.useMemo(()=>Ge.filter(ut=>ut.type==="folder").map(ut=>ut.path),[Ge]),it=r||S!==null||x!==w,St=a||ee||Qe||Object.values(Ie).some(Boolean);k.useEffect(()=>{n!==null&&!t[n]&&!it&&w===x?s(n):n===null&&m&&!t[m]&&!it&&w===x&&s(m)},[n,t,m,it,s,w,x]),k.useEffect(()=>{var ut,It;F&&((ut=se.current)==null||ut.focus(),(It=se.current)==null||It.select())},[F]),k.useEffect(()=>{var ut;H&&((ut=te.current)==null||ut.focus())},[H]),k.useEffect(()=>{(async()=>{if(it||Nt.length===0)return;const It={};let Lt=!1;for(const en of Nt)try{const Nn=await _oe(en);ue[en]!==Nn&&(It[en]=Nn,Lt=!0)}catch(Nn){console.error(`Error checking git status for ${en}:`,Nn),ue[en]!==!1&&(It[en]=!1,Lt=!0)}Lt&&ae(en=>({...en,...It}))})()},[Nt,it,ue]);const Ft=k.useCallback(async(ut,It)=>{if(!(St||it)){It!==!1&&C(!0),E(null);try{await ut()}catch(Lt){console.error("[FileManager Operation Error]:",Lt)}finally{It!==!1&&C(!1)}}},[St,it,E,C]),Dt=k.useCallback(ut=>{St||it||F||ut.type==="folder"&&Ft(()=>h(ut.path),!1)},[St,it,F,h,Ft]),Zt=k.useCallback(()=>{if(St||it||Fe==="/")return;const ut=I0(Fe);Ft(()=>h(ut),!1)},[St,it,Fe,h,Ft]),ye=k.useCallback(()=>{St||it||Fe==="/"||Ft(()=>h("/"),!1)},[St,it,Fe,h,Ft]),O=k.useCallback(()=>{it||Ft(()=>s(n),!1)},[Ft,s,n,it]),K=k.useCallback((ut,It)=>{const Lt=e[It];Lt&&Lt.type==="file"?ut?y(It):v(It):Lt&&Lt.type==="folder"&&Ye.info("Folders cannot be attached to the prompt.")},[y,v,e]),he=k.useCallback(ut=>{St||it||H||(B(ut.path),R(ut.name),D(!1))},[St,it,H]),je=k.useCallback(()=>{B(null),R("")},[]),be=k.useCallback(async()=>{if(!F||!I.trim()){je();return}const ut=T(F);ut&&ut.name!==I.trim()&&await Ft(()=>d(ut.id,I.trim())),je()},[F,I,d,je,T,Ft]),ke=k.useCallback(()=>{St||it||F||(D(!0),V(""),B(null))},[St,it,F]),le=k.useCallback(()=>{D(!1),V("")},[]),ft=k.useCallback(async()=>{if(!Z.trim()){le();return}await Ft(()=>o(n,Z.trim())),le()},[Z,o,n,le,Ft]),vt=()=>{var ut;return(ut=Se.current)==null?void 0:ut.click()},P=()=>{var ut;return(ut=Te.current)==null?void 0:ut.click()},Be=()=>{var ut;return(ut=de.current)==null?void 0:ut.click()},nt=k.useCallback(async ut=>{const It=ut.target.files;It&&It.length>0&&(await Ft(()=>l(n,It)),ut.target&&(ut.target.value=""))},[l,n,Ft]),ge=k.useCallback(async ut=>{var Lt;const It=(Lt=ut.target.files)==null?void 0:Lt[0];It&&(await Ft(async()=>{await Coe(It,Fe),await s(n)}),ut.target&&(ut.target.value=""))},[Fe,s,n,Ft]),De=k.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ft(()=>u([ut.id]))},[u,Ft]),Ke=k.useCallback(async ut=>{await Ft(async()=>{ut.type==="file"?await Eoe(ut.path):await X4(`${ut.name}.zip`,ut.path)})},[Ft]),Ot=k.useCallback(async()=>{Ge.length!==0&&await Ft(async()=>{const ut=ma(Fe)||"root";await X4(`${ut}_export.zip`,Fe)})},[Fe,Ge.length,Ft]),me=k.useCallback(async(ut,It)=>{if(!(Ie[ut]||it||a)){z(Lt=>({...Lt,[ut]:!0})),E(null);try{await It()}catch(Lt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Lt)}finally{z(Lt=>({...Lt,[ut]:!1}))}}},[E,Ie,it,a]),G=k.useCallback(ut=>{me(ut,async()=>{await SF(ut),ae(It=>({...It,[ut]:!0}))})},[me]),q=k.useCallback(ut=>{Ye.info("Pulling default branch (auth not implemented yet)..."),me(ut,()=>Vx(ut,"main"))},[me]),W=k.useCallback(ut=>{Ne(ut),Pe(""),Oe(!0)},[]),pe=k.useCallback(ut=>{Ye.info("Pushing default branch (auth not implemented yet)..."),me(ut,()=>zT(ut,"main"))},[me]),Re=k.useCallback(ut=>{me(ut,()=>EF(ut))},[me]),qe=k.useCallback(()=>{L(""),Q(""),X(!0)},[]),pt=k.useCallback(async()=>{if(!ie.trim()){Ye.error("Repository URL cannot be empty.");return}fe(!0),E(null);try{const ut=ma(ie.trim().replace(/\.git$/,""))||"cloned_repo",It=Lg(Fe,ut);await _F(It,ie.trim(),J.trim()||void 0),X(!1),await O()}catch{}finally{fe(!1)}},[ie,J,Fe,E,O]),Wt=k.useCallback(async()=>{if(!Ae||!Ce.trim()){Ye.error("Commit message cannot be empty.");return}Le(!0),E(null);try{await BT(Ae,Ce.trim()),Oe(!1)}catch{}finally{Le(!1)}},[Ae,Ce,E]);return it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[p.jsx(On,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&p.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[p.jsxs("p",{children:["Error loading filesystem: ",i]}),p.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>j(x||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):p.jsxs("div",{className:_t("flex h-full flex-col bg-card text-card-foreground"),children:[p.jsx(z1e,{currentPath:Fe,isAnyLoading:St||it,isOperationLoading:a,entries:Ge,editingPath:F,creatingFolder:H,handleNavigateHome:ye,handleNavigateUp:Zt,handleRefresh:O,startCreatingFolder:ke,handleUploadClick:vt,handleFolderUploadClick:P,handleArchiveUploadClick:Be,handleDownloadAll:Ot,handleCloneClick:qe,fileInputRef:Se,folderInputRef:Te,archiveInputRef:de,handleFileChange:nt,handleArchiveChange:ge}),p.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:p.jsx(B1e,{entries:Ge,editingPath:F,newName:I,creatingFolder:H,newFolderName:Z,selectedFileIds:b,isOperationLoading:St,handleNavigate:Dt,handleCheckboxChange:K,startEditing:he,cancelEditing:je,handleRename:be,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:De,setNewName:R,setNewFolderName:V,renameInputRef:se,newFolderInputRef:te,gitRepoStatus:ue,handleGitInit:G,handleGitPull:q,handleGitCommit:W,handleGitPush:pe,handleGitStatus:Re})}),p.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:p.jsx(__e,{entries:Ge,editingPath:F,newName:I,creatingFolder:H,newFolderName:Z,selectedFileIds:b,isOperationLoading:St,handleNavigate:Dt,handleCheckboxChange:K,startEditing:he,cancelEditing:je,handleRename:be,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:De,setNewName:R,setNewFolderName:V,renameInputRef:se,newFolderInputRef:te,gitRepoStatus:ue,handleGitInit:G,handleGitPull:q,handleGitCommit:W,handleGitPush:pe,handleGitStatus:Re})}),p.jsx(U1e,{isOpen:ne,onOpenChange:X,cloneRepoUrl:ie,setCloneRepoUrl:L,cloneBranch:J,setCloneBranch:Q,isCloning:ee,onSubmitClone:pt,currentPath:Fe}),p.jsx(q1e,{isOpen:ve,onOpenChange:Oe,commitPath:Ae,commitMessage:Ce,setCommitMessage:Pe,isCommitting:Qe,onSubmitCommit:Wt})]})});UA.displayName="FileManager";const S_e=({vfsKey:e,selectedItemType:t})=>e==="orphan"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(n3,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Shared VFS:"})," All chats ",p.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(n3,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(Dd,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,E_e=()=>{const{isVfsModalOpen:e,toggleVfsModal:t}=ls(dn(d=>({isVfsModalOpen:d.isVfsModalOpen,toggleVfsModal:d.toggleVfsModal}))),{vfsKey:n,selectedFileIds:r,clearSelection:a,nodes:i}=co(dn(d=>({vfsKey:d.vfsKey,selectedFileIds:d.selectedFileIds,clearSelection:d.clearSelection,nodes:d.nodes}))),s=mn(d=>d.selectedItemType),o=Jl.getState().addAttachedFile,l=()=>{if(r.size===0){Ye.info("No files selected in VFS to attach.");return}let d=0;r.forEach(h=>{const m=i[h];m&&m.type==="file"&&(o({source:"vfs",name:m.name,type:m.mimeType||"application/octet-stream",size:m.size,path:m.path}),d++)}),d>0?(Ye.success(`Attached ${d} file(s) from VFS to the next prompt.`),a(),t(!1)):Ye.warning("No valid files were selected to attach.")},u=()=>{a(),t(!1)};return p.jsx(m1,{open:e,onOpenChange:u,children:p.jsxs(g1,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[p.jsxs(y1,{className:"p-4 pb-2 border-b flex-shrink-0",children:[p.jsx(v1,{children:"Virtual Filesystem"}),p.jsx(w1,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),p.jsx(S_e,{vfsKey:n,selectedItemType:s})]}),p.jsx("div",{className:"flex-grow overflow-hidden",children:p.jsx(UA,{})}),p.jsxs(b1,{className:"p-4 pt-2 border-t flex-shrink-0",children:[p.jsx(Rt,{variant:"outline",onClick:u,children:"Close"}),p.jsxs(Rt,{onClick:l,disabled:r.size===0,children:[p.jsx(xk,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r.size,")"]})]})]})})};function C_e(){const e=Rr.getState().registerPromptControl,t=Rr.getState().registerChatControl;e({id:"core-vfs-prompt-trigger",show:()=>co.getState().enableVfs,triggerRenderer:()=>gt.createElement(Mxe)}),t({id:"core-vfs-modal-panel",panel:void 0,show:()=>ls.getState().isVfsModalOpen,renderer:()=>gt.createElement(E_e),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control (Prompt Trigger & Modal)")}const k_e=()=>{const{linkConversationToRepo:e,syncConversation:t}=mn(dn(B=>({linkConversationToRepo:B.linkConversationToRepo,syncConversation:B.syncConversation}))),[n,r]=k.useState(()=>mn.getState().selectedItemId),[a,i]=k.useState(()=>mn.getState().selectedItemType),[s,o]=k.useState(()=>mn.getState().syncRepos),[l,u]=k.useState(()=>mn.getState().conversationSyncStatus),[d,h]=k.useState(()=>Hn.getState().status==="streaming"),[m,y]=k.useState(null),[v,b]=k.useState("idle"),[x,w]=k.useState(!1),[S,E]=k.useState(!1);k.useEffect(()=>{const B=ae=>{r(ae.selectedItemId),i(ae.selectedItemType)},H=()=>{o(mn.getState().syncRepos)},D=ae=>{u(ne=>({...ne,[ae.conversationId]:ae.status}))},Z=ae=>{h(ae.status==="streaming")},V=ae=>{ae.conversationId===n&&ae.updates.syncRepoId!==void 0&&y(ae.updates.syncRepoId)},ue=mn.getState();return r(ue.selectedItemId),i(ue.selectedItemType),o(ue.syncRepos),u(ue.conversationSyncStatus),kt.on(Et.CONTEXT_CHANGED,B),kt.on(Et.SYNC_REPO_CHANGED,H),kt.on(Et.CONVERSATION_SYNC_STATUS_CHANGED,D),kt.on(Et.INTERACTION_STATUS_CHANGED,Z),kt.on(Et.CONVERSATION_UPDATED,V),()=>{kt.off(Et.CONTEXT_CHANGED,B),kt.off(Et.SYNC_REPO_CHANGED,H),kt.off(Et.CONVERSATION_SYNC_STATUS_CHANGED,D),kt.off(Et.INTERACTION_STATUS_CHANGED,Z),kt.off(Et.CONVERSATION_UPDATED,V)}},[n]),k.useEffect(()=>{if(a==="conversation"&&n){const B=mn.getState().getConversationById(n);y((B==null?void 0:B.syncRepoId)??null),b(l[n]??"idle")}else y(null),b("idle")},[n,a,l]);const C=gt.useMemo(()=>new Map(s.map(B=>[B.id,B.name])),[s]),T=m?C.get(m):void 0,j=k.useCallback(async B=>{if(!n||a!=="conversation")return;w(!0),await e(n,B==="none"?null:B),w(!1)},[n,a,e]),I=k.useCallback(async()=>{!n||!m||(E(!0),await t(n),E(!1))},[n,m,t]),R=I9(v,T),F=!m||S||x||d||v==="syncing";return a!=="conversation"||s.length===0?null:p.jsxs(fc,{children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(hc,{asChild:!0,children:p.jsx(Rt,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||x||S,"aria-label":"Configure Git Sync",children:v==="syncing"||S||x?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(fu,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:m?`Sync Status: ${v}`:"Link to Sync Repo"})]})}),p.jsxs(pc,{className:"w-64 p-4 space-y-3",align:"start",children:[p.jsx(Gt,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),p.jsxs(Yo,{value:m??"none",onValueChange:j,disabled:x||S||d,children:[p.jsx(Jo,{id:"sync-repo-select",className:"w-full h-9",children:p.jsx(Xo,{placeholder:"Select repository..."})}),p.jsxs(Qo,{children:[p.jsx(sa,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map(B=>p.jsx(sa,{value:B.id,children:B.name},B.id))]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",R||"Not Linked"]}),p.jsxs(Rt,{size:"sm",variant:"outline",onClick:I,disabled:F,className:"h-8",children:[S||v==="syncing"?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(vk,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function T_e(){const e=Rr.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>gt.createElement(k_e)}),console.log("[Function] Registered Core Git Sync Control")}const A_e=U.object({path:U.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),N_e=U.object({path:U.string().describe("The path of the file to read within the VFS."),encoding:U.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),R_e=U.object({path:U.string().describe("The path where the file should be written."),content:U.string().describe("The content to write to the file."),encoding:U.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),I_e=U.object({path:U.string().describe("The path of the file or directory to delete."),recursive:U.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),j_e=U.object({path:U.string().describe("The path of the directory to create (including parents).")}),O_e=U.object({oldPath:U.string().describe("The current path of the item to rename."),newName:U.string().describe("The new name for the item.")});function D_e(){const e=Rr.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:A_e},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=rr(o||"/");try{const h=await UT(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(m=>({name:m.name,type:m.isDirectory?"folder":"file",size:m.size,lastModified:m.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:N_e},async({path:o,encoding:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o);try{const m=await df(h,{fsInstance:d});let y;return l==="base64"?y=btoa(String.fromCharCode(...m)):y=new TextDecoder().decode(m),{success:!0,path:h,content:y,encoding:l}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:R_e},async({path:o,content:l,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=rr(o);try{let y;if(u==="base64"){const v=atob(l),b=v.length,x=new Uint8Array(b);for(let w=0;w<b;w++)x[w]=v.charCodeAt(w);y=x}else y=l;return await Gx(m,y,{fsInstance:h}),{success:!0,path:m}}catch(y){return{success:!1,path:m,error:y.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:I_e},async({path:o,recursive:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o);try{return await qT(h,l,{fsInstance:d}),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:j_e},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=rr(o);try{return await CF(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:O_e},async({oldPath:o,newName:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o),m=rr(h.substring(0,h.lastIndexOf("/"))||"/"),y=al(m,l);try{return await TF(h,y,{fsInstance:d}),{success:!0,oldPath:h,newPath:y}}catch(v){return{success:!1,oldPath:h,newName:l,error:v.message}}}),console.log("[Function] Core VFS Tools Registered.")}const M_e=U.object({path:U.string().describe("The directory path within the VFS to initialize as a Git repository.")}),P_e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to commit."),message:U.string().describe("The commit message.")}),F_e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:U.string().optional().describe("The branch name to pull.")}),L_e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to push."),branch:U.string().optional().describe("The branch name to push.")}),$_e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to check status.")});function B_e(){const e=Rr.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:M_e},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await SF(s,{fsInstance:l}),{success:!0,message:`Repository initialized at ${s}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:P_e},async({path:s,message:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=fr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await BT(s,o,{fsInstance:u}),{success:!0,message:`Changes committed in ${s}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:F_e},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await Vx(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:L_e},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await zT(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:$_e},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await EF(s,{fsInstance:l}),{success:!0,message:`Status checked for ${s}`}}catch(u){return{success:!1,error:u.message}}}),console.log("[Function] Core Git Tools Registered.")}const z_e=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:s})=>{const o=Rr(S=>S.tools),l=fr(S=>S.toolMaxSteps),[u,d]=k.useState(""),h=k.useMemo(()=>Object.entries(o).map(([S,{definition:E,modId:C}])=>({name:S,description:E.description??"No description provided.",modId:C})).sort((S,E)=>S.name.localeCompare(E.name)),[o]),m=k.useMemo(()=>{const S=u.trim().toLowerCase();return S?h.filter(E=>E.name.toLowerCase().includes(S)||E.description.toLowerCase().includes(S)||E.modId.toLowerCase().includes(S)):h},[h,u]),y=k.useCallback((S,E)=>{n(C=>{const T=new Set(C);return E?T.add(S):T.delete(S),T})},[n]),v=k.useCallback(S=>{n(()=>S?new Set(h.map(E=>E.name)):new Set)},[h,n]),b=S=>{const E=S.target.value;if(E===""){a(null);return}const C=parseInt(E,10);if(isNaN(C))a(null);else{const T=Math.max(1,Math.min(20,C));a(T)}},x=r===null?"":String(r),w=s!=="conversation"||!i;return p.jsxs("div",{className:_t("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[p.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),p.jsxs("div",{className:"relative",children:[p.jsx(no,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Cn,{type:"search",placeholder:"Filter tools...",value:u,onChange:S=>d(S.target.value),className:"pl-8 h-9",disabled:w})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs(Gt,{className:"text-xs text-muted-foreground",children:[m.length," tools shown (",t.size," enabled)"]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:w||h.length===0,children:"Enable All"}),p.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:w||h.length===0||t.size===0,children:"Disable All"})]})]}),p.jsx(Ru,{className:"h-56 border rounded-md p-2 bg-background/50",children:w?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(S=>p.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[p.jsx(Li,{id:`tool-switch-${S.name}`,checked:t.has(S.name),onCheckedChange:E=>y(S.name,E),className:"flex-shrink-0",disabled:w}),p.jsxs(Gt,{htmlFor:`tool-switch-${S.name}`,className:_t("text-sm font-normal flex-grow pl-2 space-y-0.5",w?"cursor-not-allowed":"cursor-pointer"),title:`${S.name} (from ${S.modId})`,children:[p.jsx("span",{className:"block font-medium",children:S.name}),p.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:S.description})]})]},S.name))})}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Gt,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),p.jsx(Cn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:w}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let lu=new Set,Hl=null,tg=()=>{};const U_e=()=>{const[e,t]=k.useState({enabledTools:lu,maxStepsOverride:Hl}),[n,r]=k.useState(e.maxStepsOverride),[a,i]=k.useState(!1),[s,o]=k.useState(()=>Hn.getState().status==="streaming"),[l,u]=k.useState(!0),[d,h]=k.useState(()=>mn.getState().selectedItemType),[m,y]=k.useState(()=>mn.getState().selectedItemId),v=Object.keys(Rr.getState().tools).length;k.useEffect(()=>(tg=E=>{const C=E({enabledTools:lu,maxStepsOverride:Hl});lu=C.enabledTools,Hl=C.maxStepsOverride,t(C)},t({enabledTools:lu,maxStepsOverride:Hl}),()=>{tg=()=>{}}),[]),k.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),k.useEffect(()=>{const E=j=>{o(j.status==="streaming")},C=j=>{var B,H;if(!j.modelId){u(!1);return}const{getSelectedModel:I}=Bn.getState(),R=I(),F=Object.keys(Rr.getState().tools).length>0;u(F&&(((H=(B=R==null?void 0:R.metadata)==null?void 0:B.supported_parameters)==null?void 0:H.includes("tools"))??!1))},T=j=>{h(j.selectedItemType),y(j.selectedItemId)};return C({modelId:Bn.getState().selectedModelId}),T({selectedItemId:mn.getState().selectedItemId,selectedItemType:mn.getState().selectedItemType}),kt.on(Et.INTERACTION_STATUS_CHANGED,E),kt.on(Et.MODEL_SELECTION_CHANGED,C),kt.on(Et.CONTEXT_CHANGED,T),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,E),kt.off(Et.MODEL_SELECTION_CHANGED,C),kt.off(Et.CONTEXT_CHANGED,T)}},[]);const b=E=>{i(E),!E&&n!==e.maxStepsOverride&&tg(C=>({...C,maxStepsOverride:n}))},x=k.useCallback(E=>{tg(C=>({...C,enabledTools:E(C.enabledTools)}))},[]),w=e.enabledTools.size>0||e.maxStepsOverride!==null,S=s||v===0||d!=="conversation";return l?p.jsxs(fc,{open:a,onOpenChange:b,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(hc,{asChild:!0,children:p.jsx(Rt,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:S,"aria-label":"Configure Tools",children:p.jsx(Sk,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:S?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),p.jsx(pc,{className:"w-auto p-0",align:"start",children:p.jsx(z_e,{enabledTools:e.enabledTools,setEnabledTools:x,localMaxSteps:n,setLocalMaxSteps:r,conversationId:m,conversationType:d})})]}):null};function q_e(){const e=Rr.getState().registerPromptControl;lu=new Set,Hl=null,e({id:"core-tool-selector",triggerRenderer:()=>gt.createElement(U_e),getMetadata:()=>{if(lu.size>0||Hl!==null)return{enabledTools:Array.from(lu),...Hl!==null&&{maxSteps:Hl}}},clearOnSubmit:()=>{lu=new Set,Hl=null,tg(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}const H_e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:s})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),p.jsx(Hu,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:o=>t(o.target.value||null),rows:6,disabled:s,className:"mt-1"}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:s||e===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{children:[p.jsx(Gt,{children:"Default Model (Overrides Parent/Global)"}),p.jsx(S1,{value:n??i,onChange:r,disabled:s}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:s||n===null,children:"Use Inherited/Default"})]})]}),V_e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:m,setLocalTemp:y,localTopP:v,setLocalTopP:b,localPresence:x,setLocalPresence:w,localFrequency:S,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:T,effectiveTopP:j,effectiveTopK:I,effectivePresencePenalty:R,effectiveFrequencyPenalty:F,isSaving:B})=>{const H=k.useCallback((Z,V)=>{const ue=V.target.value,ae=ue===""?null:parseInt(ue,10);(ue===""||!isNaN(ae)&&ae!==null)&&Z(ae)},[]),D=k.useCallback((Z,V)=>{Z(V[0])},[]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),p.jsx(Wo,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:Z=>y(Z[0]),onValueCommit:Z=>D(t,Z),disabled:B}),p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:B||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),p.jsx(Wo,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:Z=>b(Z[0]),onValueCommit:Z=>D(i,Z),disabled:B}),p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:B||a===null,children:["Use Inherited/Default (",(j==null?void 0:j.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(Cn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${T??"Default"}`,value:n??"",onChange:Z=>H(r,Z),min:"1",className:"h-8 text-xs",disabled:B}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:B||n===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Gt,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),p.jsx(Cn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${I??"Default"}`,value:s??"",onChange:Z=>H(o,Z),min:"1",className:"h-8 text-xs",disabled:B}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>o(null),disabled:B||s===null,children:"Use Inherited/Default"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",x.toFixed(2),")"]}),p.jsx(Wo,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[x],onValueChange:Z=>w(Z[0]),onValueCommit:Z=>D(u,Z),disabled:B}),p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>u(null),disabled:B||l===null,children:["Use Inherited/Default (",(R==null?void 0:R.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Gt,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),p.jsx(Wo,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:Z=>E(Z[0]),onValueCommit:Z=>D(h,Z),disabled:B}),p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:B||d===null,children:["Use Inherited/Default (",(F==null?void 0:F.toFixed(2))??"N/A",")"]})]})]})},G_e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var s;const i=((s=r.find(o=>o.id===n))==null?void 0:s.name)??"None";return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(Gt,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),p.jsxs(Yo,{value:e??"none",onValueChange:o=>t(o==="none"?null:o),disabled:a||r.length===0,children:[p.jsx(Jo,{id:"project-sync-repo",children:p.jsx(Xo,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),p.jsxs(Qo,{children:[p.jsx(sa,{value:"none",children:p.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(o=>p.jsx(sa,{value:o.id,children:o.name},o.id))]})]}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},K_e=({projectId:e})=>{const t=k.useMemo(()=>[{value:"manage",label:"Manage Files",content:p.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?p.jsx(UA,{}):p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Gt,{children:"Project Filesystem Info"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),p.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",p.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),p.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[p.jsx(Gt,{className:"text-destructive",children:"Danger Zone"}),p.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return p.jsx(Vu,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:_t("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},W_e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=ai(dn(Pe=>({getProjectById:Pe.getProjectById,updateProject:Pe.updateProject}))),i=ai(Pe=>Pe.getEffectiveProjectSettings),s=mn(Pe=>Pe.syncRepos),o=fr(dn(Pe=>({globalSystemPrompt:Pe.globalSystemPrompt,temperature:Pe.temperature,maxTokens:Pe.maxTokens,topP:Pe.topP,topK:Pe.topK,presencePenalty:Pe.presencePenalty,frequencyPenalty:Pe.frequencyPenalty}))),l=Bn(Pe=>Pe.selectedModelId),u=co(Pe=>Pe.setVfsKey),[d,h]=k.useState(null),[m,y]=k.useState(null),[v,b]=k.useState(null),[x,w]=k.useState(null),[S,E]=k.useState(null),[C,T]=k.useState(null),[j,I]=k.useState(null),[R,F]=k.useState(null),[B,H]=k.useState(null),[D,Z]=k.useState(.7),[V,ue]=k.useState(1),[ae,ne]=k.useState(0),[X,ie]=k.useState(0),[L,J]=k.useState(!1),[Q,ee]=k.useState("prompt"),{project:fe,effectiveSettings:ve}=k.useMemo(()=>{const Pe=n?r(n):null,Qe=n?i(n):null;return{project:Pe,effectiveSettings:Qe}},[n,r,i]),Oe=k.useCallback(Pe=>{var Le;if(!Pe)return null;const Qe=r(Pe);return Qe?((Le=Qe.metadata)==null?void 0:Le.syncRepoId)!==void 0?Qe.metadata.syncRepoId:Oe(Qe.parentId):null},[r]),Ae=n?Oe(n):null;k.useEffect(()=>{var Pe;e&&n&&fe&&ve?(u(n),h(fe.systemPrompt??null),y(fe.modelId??null),b(fe.temperature??null),w(fe.maxTokens??null),E(fe.topP??null),T(fe.topK??null),I(fe.presencePenalty??null),F(fe.frequencyPenalty??null),H(((Pe=fe.metadata)==null?void 0:Pe.syncRepoId)??null),Z(ve.temperature??o.temperature),ue(ve.topP??o.topP??1),ne(ve.presencePenalty??o.presencePenalty??0),ie(ve.frequencyPenalty??o.frequencyPenalty??0),ee("prompt")):e||(u(null),h(null),y(null),b(null),w(null),E(null),T(null),I(null),F(null),H(null))},[e,n,fe,ve,o,u]),k.useEffect(()=>Z(v??(ve==null?void 0:ve.temperature)??o.temperature),[v,ve,o.temperature]),k.useEffect(()=>ue(S??(ve==null?void 0:ve.topP)??o.topP??1),[S,ve,o.topP]),k.useEffect(()=>ne(j??(ve==null?void 0:ve.presencePenalty)??o.presencePenalty??0),[j,ve,o.presencePenalty]),k.useEffect(()=>ie(R??(ve==null?void 0:ve.frequencyPenalty)??o.frequencyPenalty??0),[R,ve,o.frequencyPenalty]);const Ne=async()=>{if(!(!n||!fe)){J(!0);try{const Pe=fe.parentId?i(fe.parentId):{systemPrompt:o.globalSystemPrompt,modelId:l,temperature:o.temperature,maxTokens:o.maxTokens,topP:o.topP,topK:o.topK,presencePenalty:o.presencePenalty,frequencyPenalty:o.frequencyPenalty},Qe=fe.parentId?Oe(fe.parentId):null,Le={},Ie={...fe.metadata??{}};d!==Pe.systemPrompt?Le.systemPrompt=d:Le.systemPrompt=void 0,m!==Pe.modelId?Le.modelId=m:Le.modelId=void 0,v!==Pe.temperature?Le.temperature=v:Le.temperature=void 0,x!==Pe.maxTokens?Le.maxTokens=x:Le.maxTokens=void 0,S!==Pe.topP?Le.topP=S:Le.topP=void 0,C!==Pe.topK?Le.topK=C:Le.topK=void 0,j!==Pe.presencePenalty?Le.presencePenalty=j:Le.presencePenalty=void 0,R!==Pe.frequencyPenalty?Le.frequencyPenalty=R:Le.frequencyPenalty=void 0,B!==Qe?Ie.syncRepoId=B:delete Ie.syncRepoId,Le.metadata=Ie,await a(n,Le),Ye.success(`Project "${fe.name}" settings updated.`),t()}catch(Pe){Ye.error("Failed to save project settings."),console.error("Failed to save project settings:",Pe)}finally{J(!1)}}},Ce=k.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:p.jsx(H_e,{systemPrompt:d,setSystemPrompt:h,modelId:m,setModelId:y,effectiveSystemPrompt:(ve==null?void 0:ve.systemPrompt)??o.globalSystemPrompt,effectiveModelId:(ve==null?void 0:ve.modelId)??l,isSaving:L})},{value:"params",label:"Parameters",content:p.jsx(V_e,{temperature:v,setTemperature:b,maxTokens:x,setMaxTokens:w,topP:S,setTopP:E,topK:C,setTopK:T,presencePenalty:j,setPresencePenalty:I,frequencyPenalty:R,setFrequencyPenalty:F,localTemp:D,setLocalTemp:Z,localTopP:V,setLocalTopP:ue,localPresence:ae,setLocalPresence:ne,localFrequency:X,setLocalFrequency:ie,effectiveTemperature:(ve==null?void 0:ve.temperature)??o.temperature,effectiveMaxTokens:(ve==null?void 0:ve.maxTokens)??o.maxTokens,effectiveTopP:(ve==null?void 0:ve.topP)??o.topP,effectiveTopK:(ve==null?void 0:ve.topK)??o.topK,effectivePresencePenalty:(ve==null?void 0:ve.presencePenalty)??o.presencePenalty,effectiveFrequencyPenalty:(ve==null?void 0:ve.frequencyPenalty)??o.frequencyPenalty,isSaving:L})},{value:"sync",label:"Sync",content:p.jsx(G_e,{syncRepoId:B,setSyncRepoId:H,effectiveSyncRepoId:Ae,syncRepos:s,isSaving:L})},{value:"vfs",label:"Filesystem",content:p.jsx(K_e,{projectId:n,projectName:(fe==null?void 0:fe.name)??null,isSaving:L})}],[d,m,v,x,S,C,j,R,B,ve,o,l,L,D,V,ae,X,Ae,s,n,fe==null?void 0:fe.name]);return p.jsx(m1,{open:e,onOpenChange:t,children:p.jsxs(g1,{className:_t("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[p.jsxs(y1,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsxs(v1,{children:["Project Settings: ",fe==null?void 0:fe.name]}),p.jsx(w1,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),p.jsx(Vu,{tabs:Ce,initialValue:Q,onValueChange:ee,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsxs(b1,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[p.jsx(Rt,{variant:"outline",onClick:t,disabled:L,children:"Cancel"}),p.jsxs(Rt,{onClick:Ne,disabled:L,children:[L&&p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function Z_e(){const e=Rr.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=ls.getState();return p.jsx(W_e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>gt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const Y_e=()=>{const{selectedModelId:e,selectModel:t}=Bn(dn(l=>({selectedModelId:l.selectedModelId,selectModel:l.selectModel}))),n=ki(l=>l.setModelId),[r,a]=k.useState(()=>Hn.getState().status==="streaming"),[i,s]=k.useState(e);k.useEffect(()=>{const l=h=>{a(h.status==="streaming")},u=h=>{s(h.modelId),n(h.modelId)},d=Bn.getState().selectedModelId;return s(d),n(d),kt.on(Et.INTERACTION_STATUS_CHANGED,l),kt.on(Et.MODEL_SELECTION_CHANGED,u),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,l),kt.off(Et.MODEL_SELECTION_CHANGED,u)}},[n]);const o=l=>{t(l),n(l)};return p.jsx(S1,{value:i,onChange:o,disabled:r})};function X_e(){const e=Rr.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>Bn.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(Y_e),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const J_e=({initialPromptValue:e,onPromptChange:t})=>{const[n,r]=k.useState(e),[a,i]=k.useState(!1),[s,o]=k.useState(null),[l,u]=k.useState(()=>Hn.getState().status==="streaming");k.useEffect(()=>{r(e)},[e]),k.useEffect(()=>{const v=C=>{u(C.status==="streaming")},b=(C,T)=>{var B;const{getConversationById:j}=mn.getState(),{getEffectiveProjectSettings:I}=ai.getState(),R=fr.getState().globalSystemPrompt,F=T==="project"?C:T==="conversation"?((B=j(C))==null?void 0:B.projectId)??null:null;o(I(F).systemPrompt??R)},x=C=>{b(C.selectedItemId,C.selectedItemType)},w=C=>{var I;const T=mn.getState();(T.selectedItemType==="project"?T.selectedItemId:T.selectedItemType==="conversation"?((I=T.getConversationById(T.selectedItemId))==null?void 0:I.projectId)??null:null)===C.projectId&&b(T.selectedItemId,T.selectedItemType)},S=C=>{if(C.key==="globalSystemPrompt"){const T=mn.getState();b(T.selectedItemId,T.selectedItemType)}},E=mn.getState();return b(E.selectedItemId,E.selectedItemType),kt.on(Et.INTERACTION_STATUS_CHANGED,v),kt.on(Et.CONTEXT_CHANGED,x),kt.on(Et.PROJECT_UPDATED,w),kt.on(Et.SETTINGS_CHANGED,S),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,v),kt.off(Et.CONTEXT_CHANGED,x),kt.off(Et.PROJECT_UPDATED,w),kt.off(Et.SETTINGS_CHANGED,S)}},[]);const d=k.useCallback(()=>{t(n.trim()),i(!1)},[n,t]),h=k.useCallback(()=>{r(""),t(""),i(!1)},[t]),m=v=>{v&&r(e),i(v)},y=e.trim().length>0;return p.jsxs(fc,{open:a,onOpenChange:m,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(hc,{asChild:!0,children:p.jsx(Rt,{variant:y?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:l,"aria-label":"Set System Prompt for Next Turn",children:p.jsx(qV,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:y?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),p.jsxs(pc,{className:"w-80 p-4 space-y-3",align:"start",children:[p.jsx(Gt,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),p.jsx(Hu,{id:"turn-system-prompt",placeholder:`Inherited: ${(s==null?void 0:s.substring(0,50))||"Default"}${s&&s.length>50?"...":""}`,value:n,onChange:v=>r(v.target.value),rows:5,className:"text-sm"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx(Rt,{variant:"outline",size:"sm",onClick:h,disabled:!n.trim(),children:"Clear Override"}),p.jsx(Rt,{size:"sm",onClick:d,children:"Set for Next Turn"})]})]})]})};let Wm="";function Q_e(){const e=Rr.getState().registerPromptControl;Wm="";const t=n=>{Wm=n};e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>gt.createElement(J_e,{initialPromptValue:Wm,onPromptChange:t}),getMetadata:()=>{const n=Wm.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{Wm=""}}),console.log("[Function] Registered Core System Prompt Control")}const eSe=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=ki(dn(w=>({structuredOutputJson:w.structuredOutputJson,setStructuredOutputJson:w.setStructuredOutputJson}))),[n,r]=k.useState(!1),[a,i]=k.useState(e??""),[s,o]=k.useState(""),[l,u]=k.useState([]),d=k.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),Ye.success("Structured output applied for next turn.")}catch{Ye.error("Invalid JSON format.")}},[a,t]),h=k.useCallback(()=>{i(""),t(null),r(!1),Ye.info("Structured output cleared.")},[t]),m=k.useCallback(()=>{if(!s.trim()){Ye.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const w={id:Date.now().toString(),name:s.trim(),json:a};u(S=>[...S,w]),o(""),Ye.success(`"${w.name}" saved to library.`)}catch{Ye.error("Cannot save invalid JSON to library.")}},[a,s]),y=k.useCallback(w=>{i(w.json),t(w.json),r(!1),Ye.success(`Loaded "${w.name}" from library.`)},[t]),v=k.useCallback(w=>{u(S=>S.filter(E=>E.id!==w)),Ye.info("Item removed from library.")},[]);k.useEffect(()=>{n&&i(e??"")},[n,e]);const b=[{value:"entry",label:"Entry",content:p.jsxs("div",{className:"space-y-3 p-1",children:[p.jsx(Gt,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),p.jsx(Hu,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:w=>i(w.target.value),rows:8,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-between items-end gap-2",children:[p.jsxs("div",{className:"flex-grow space-y-1",children:[p.jsx(Gt,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),p.jsx(Cn,{id:"structured-output-name",value:s,onChange:w=>o(w.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),p.jsxs(Rt,{size:"sm",variant:"outline",onClick:m,disabled:!s.trim()||!a.trim(),className:"h-8",children:[p.jsx(Zd,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsx(Rt,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),p.jsx(Rt,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:p.jsx("div",{className:"space-y-2 p-1",children:l.length===0?p.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(w=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[p.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:w.name}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(Rt,{size:"sm",variant:"outline",onClick:()=>y(w),className:"h-7 px-2 text-xs",children:"Use"}),p.jsx(Rt,{size:"icon",variant:"ghost",onClick:()=>v(w.id),className:"h-7 w-7 text-destructive",children:p.jsx($i,{className:"h-3.5 w-3.5"})})]})]},w.id))})}],x=!!e;return p.jsxs(fc,{open:n,onOpenChange:r,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(hc,{asChild:!0,children:p.jsx(Rt,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:p.jsx(tD,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:x?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),p.jsx(pc,{className:"w-[450px] p-0",align:"start",children:p.jsx(Vu,{tabs:b,defaultValue:"entry"})})]})},tSe=()=>{const[e,t]=k.useState(!0);return k.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=Bn.getState(),i=a(),s=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,o=Array.isArray(s)&&s.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${o}`),t(o)};return n({modelId:Bn.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${Et.MODEL_SELECTION_CHANGED}`),kt.on(Et.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),kt.off(Et.MODEL_SELECTION_CHANGED,n)}},[]),e?p.jsx(eSe,{}):null};function nSe(){const e=Rr.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>gt.createElement(tSe),getParameters:()=>{const{structuredOutputJson:t}=ki.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{ki.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const A7=4,$E=e=>{let t=0;return e.forEach(n=>{var r,a,i,s;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(s=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||s.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/A7)},rSe=()=>{const[e,t]=k.useState(""),[n,r]=k.useState(0),[a,i]=k.useState([]),[s,o]=k.useState(null),[l,u]=k.useState(0);k.useEffect(()=>{const b=Jl.getState(),x=Bn.getState(),w=Hn.getState();if(i(b.attachedFilesMetadata),o(x.selectedModelId),w.currentConversationId){const I=w.interactions.filter(R=>R.status==="COMPLETED");r($E(I))}else r(0);const S=I=>{t(I.value)},E=I=>{i(I.files)},C=I=>{console.log(I),o(I.modelId)},T=()=>{const I=Hn.getState();if(I.currentConversationId){const R=I.interactions.filter(F=>F.status==="COMPLETED");r($E(R))}},j=()=>{const I=Hn.getState();if(I.currentConversationId){const R=I.interactions.filter(F=>F.status==="COMPLETED");r($E(R))}else r(0)};return kt.on(Et.PROMPT_INPUT_CHANGE,S),kt.on(Et.ATTACHED_FILES_CHANGED,E),kt.on(Et.MODEL_SELECTION_CHANGED,C),kt.on(Et.INTERACTION_COMPLETED,T),kt.on(Et.CONTEXT_CHANGED,j),()=>{kt.off(Et.PROMPT_INPUT_CHANGE,S),kt.off(Et.ATTACHED_FILES_CHANGED,E),kt.off(Et.MODEL_SELECTION_CHANGED,C),kt.off(Et.INTERACTION_COMPLETED,T),kt.off(Et.CONTEXT_CHANGED,j)}},[]),k.useEffect(()=>{var R;if(!s){u(0);return}const{dbProviderConfigs:b,dbApiKeys:x}=Bn.getState(),{providerId:w,modelId:S}=lc(s);if(!w||!S){u(0);return}const E=b.find(F=>F.id===w);if(!E){u(0);return}const C=x.find(F=>F.id===E.apiKeyId),T=Lk(E,S,C==null?void 0:C.value),j=T==null?void 0:T.metadata,I=((R=j==null?void 0:j.top_provider)==null?void 0:R.context_length)??(j==null?void 0:j.context_length)??0;u(I)},[s]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:m}=k.useMemo(()=>{const b=new TextEncoder().encode(e).length,x=a.reduce((C,T)=>C+T.size,0),w=Math.ceil((b+x)/A7),S=n+w,E=l?Math.min(100,Math.round(S/l*100)):0;return{estimatedInputTokens:w,totalEstimatedTokens:S,contextPercentage:E}},[e,a,n,l]),y=k.useMemo(()=>m>85?"text-red-600 dark:text-red-500":m>70?"text-orange-500 dark:text-orange-400":m>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[m]);if(!s||l===0)return null;const v=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${m}%) [History: ${n}, Input: ${d}]`;return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:p.jsx(Q6,{className:_t("h-3 w-3 fill-current",y)})})}),p.jsx(Qn,{side:"top",children:v})]})})};function aSe(){const e=Rr.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>gt.createElement(rSe),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const iSe=({initialEnabled:e,onToggle:t})=>{const[n,r]=k.useState(e),[a,i]=k.useState(()=>Hn.getState().status==="streaming"),[s,o]=k.useState(!0);k.useEffect(()=>{r(e)},[e]),k.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var b,x;if(!m.modelId){o(!1);return}const{getSelectedModel:y}=Bn.getState(),v=y();o(((x=(b=v==null?void 0:v.metadata)==null?void 0:b.supported_parameters)==null?void 0:x.includes("reasoning"))??!1)};return h({modelId:Bn.getState().selectedModelId}),kt.on(Et.INTERACTION_STATUS_CHANGED,d),kt.on(Et.MODEL_SELECTION_CHANGED,h),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,d),kt.off(Et.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:p.jsx(Xw,{className:_t("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Qn,{side:"top",children:l?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function sSe(){const e=Rr.getState().registerPromptControl,t=ki.getState(),n=r=>{t.setReasoningEnabled(r)};e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>gt.createElement(iSe,{initialEnabled:t.reasoningEnabled,onToggle:n}),getParameters:()=>{const{reasoningEnabled:r}=ki.getState();return r===!0?{reasoning:!0}:void 0},clearOnSubmit:()=>{t.setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const oSe=({initialEnabled:e,onToggle:t})=>{const[n,r]=k.useState(e),[a,i]=k.useState(()=>Hn.getState().status==="streaming"),[s,o]=k.useState(!0);k.useEffect(()=>{r(e)},[e]),k.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var x;if(!m.modelId){o(!1);return}const{getSelectedModel:y}=Bn.getState(),v=y(),b=((x=v==null?void 0:v.metadata)==null?void 0:x.supported_parameters)??[];o(b.includes("web_search")||b.includes("web_search_options"))};return h({modelId:Bn.getState().selectedModelId}),kt.on(Et.INTERACTION_STATUS_CHANGED,d),kt.on(Et.MODEL_SELECTION_CHANGED,h),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,d),kt.off(Et.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:p.jsx(no,{className:_t("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Qn,{side:"top",children:l?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function lSe(){const e=Rr.getState().registerPromptControl,t=ki.getState(),n=r=>{t.setWebSearchEnabled(r)};e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>gt.createElement(oSe,{initialEnabled:t.webSearchEnabled,onToggle:n}),getParameters:()=>{const{webSearchEnabled:r}=ki.getState();return r===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{t.setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const cSe=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r})=>{const{rules:a,tags:i,getRulesForTag:s}=sc(dn(S=>({rules:S.rules,tags:S.tags,getRulesForTag:S.getRulesForTag}))),[o,l]=k.useState(""),[u,d]=k.useState(""),h=k.useMemo(()=>{const S=o.toLowerCase();return S?i.filter(E=>{var C;return E.name.toLowerCase().includes(S)||((C=E.description)==null?void 0:C.toLowerCase().includes(S))}):i},[i,o]),m=k.useMemo(()=>{const S=u.toLowerCase();return S?a.filter(E=>E.name.toLowerCase().includes(S)||E.content.toLowerCase().includes(S)||E.type.toLowerCase().includes(S)):a},[a,u]),y=k.useCallback((S,E)=>{n(S,E)},[n]),v=k.useCallback((S,E)=>{r(S,E)},[r]),b=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(no,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Cn,{type:"search",placeholder:"Filter tags...",value:o,onChange:S=>l(S.target.value),className:"pl-8 h-9"})]}),p.jsx(Ru,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No tags defined.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(S=>{const E=s(S.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(c0,{id:`tag-activate-${S.id}`,checked:e.has(S.id),onCheckedChange:C=>y(S.id,!!C),className:"mt-0.5"}),p.jsxs(Gt,{htmlFor:`tag-activate-${S.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:S.name}),S.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:S.description}),E.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",E.map(C=>C.name).join(", ")]})]})]})},S.id)})})})]}),x=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(no,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Cn,{type:"search",placeholder:"Filter rules...",value:u,onChange:S=>d(S.target.value),className:"pl-8 h-9"})]}),p.jsx(Ru,{className:"h-64 border rounded-md p-2 bg-background/50",children:m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:a.length===0?"No rules defined.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(S=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(c0,{id:`rule-activate-${S.id}`,checked:t.has(S.id),onCheckedChange:E=>v(S.id,!!E),className:"mt-0.5"}),p.jsxs(Gt,{htmlFor:`rule-activate-${S.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:S.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",S.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",S.content]})]})]})},S.id))})})]}),w=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:x()}];return p.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:p.jsx(Vu,{tabs:w,defaultValue:"tags"})})};let Rd=new Set,Id=new Set,ng=()=>{};const uSe=()=>{const[e,t]=k.useState({activeTagIds:Rd,activeRuleIds:Id}),[n,r]=k.useState(!1),[a,i]=k.useState(()=>Hn.getState().status==="streaming"),s=sc(h=>h.rules.length>0||h.tags.length>0);k.useEffect(()=>(ng=h=>{const m=h({activeTagIds:Rd,activeRuleIds:Id});Rd=m.activeTagIds,Id=m.activeRuleIds,t(m)},t({activeTagIds:Rd,activeRuleIds:Id}),()=>{ng=()=>{}}),[]),k.useEffect(()=>{const h=m=>{i(m.status==="streaming")};return kt.on(Et.INTERACTION_STATUS_CHANGED,h),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,h)}},[]);const o=k.useCallback((h,m)=>{ng(y=>{const v=new Set(y.activeTagIds);return m?v.add(h):v.delete(h),{...y,activeTagIds:v}})},[]),l=k.useCallback((h,m)=>{ng(y=>{const v=new Set(y.activeRuleIds);return m?v.add(h):v.delete(h),{...y,activeRuleIds:v}})},[]),u=e.activeTagIds.size>0||e.activeRuleIds.size>0,d=a||!s;return s?p.jsxs(fc,{open:n,onOpenChange:r,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(hc,{asChild:!0,children:p.jsx(Rt,{variant:u?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d,"aria-label":"Configure Rules & Tags for Next Turn",children:p.jsx(KE,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:u?`Rules/Tags Active (${e.activeTagIds.size} tags, ${e.activeRuleIds.size} rules)`:"Activate Rules/Tags (Next Turn)"})]})}),p.jsx(pc,{className:"w-auto p-0",align:"start",children:p.jsx(cSe,{activeTagIds:e.activeTagIds,activeRuleIds:e.activeRuleIds,onToggleTag:o,onToggleRule:l})})]}):null};function dSe(){const e=Rr.getState().registerPromptControl;Rd=new Set,Id=new Set,e({id:"core-rules-tags",status:()=>sc.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(uSe),getMetadata:()=>{const t=Array.from(Rd),n=Array.from(Id);if(t.length>0||n.length>0)return{activeTagIds:t,activeRuleIds:n}},clearOnSubmit:()=>{Rd=new Set,Id=new Set,ng(()=>({activeTagIds:new Set,activeRuleIds:new Set}))},show:()=>{const t=sc.getState();return t.rules.length>0||t.tags.length>0}}),console.log("[Function] Registered Core Rules & Tags Control")}const fSe=({initialEnabled:e,onToggle:t})=>{const[n,r]=k.useState(e),[a,i]=k.useState(()=>Hn.getState().status==="streaming"),[s,o]=k.useState(!1),l=fr(d=>d.autoTitleEnabled);k.useEffect(()=>{r(e)},[e]),k.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=()=>{const m=Hn.getState(),y=m.currentConversationId!==null&&m.interactions.filter(v=>v.conversationId===m.currentConversationId).length===0;o(y),!y&&n&&u()};return h(),kt.on(Et.INTERACTION_STATUS_CHANGED,d),kt.on(Et.CONTEXT_CHANGED,h),kt.on(Et.INTERACTION_COMPLETED,h),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,d),kt.off(Et.CONTEXT_CHANGED,h),kt.off(Et.INTERACTION_COMPLETED,h)}},[n]);const u=()=>{const d=!n;r(d),t(d)};return!l||!s?null:p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Rt,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:p.jsx(MV,{className:_t("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),p.jsx(Qn,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})})};let Zm=!1;function hSe(){const e=Rr.getState().registerPromptControl;Zm=!1;const t=n=>{Zm=n};e({id:"core-auto-title",status:()=>"ready",triggerRenderer:()=>gt.createElement(fSe,{initialEnabled:Zm,onToggle:t}),getMetadata:()=>Zm?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{Zm=!1}}),console.log("[Function] Registered Core Auto-Title Control")}const pSe=[gye,Txe,kxe,Z_e,X_e,hSe,aSe,sSe,lSe,Dxe,C_e,dSe,Q_e,q_e,Rxe,nSe,T_e,D_e,B_e];function mSe(){return p.jsxs(fye,{children:[p.jsx(uye,{}),p.jsx(cye,{}),p.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:p.jsx("main",{className:"flex-grow overflow-hidden",children:p.jsx(rye,{controls:pSe})})})]})}gG();sq.createRoot(document.getElementById("root")).render(p.jsx(gt.StrictMode,{children:p.jsx(mSe,{})}));
