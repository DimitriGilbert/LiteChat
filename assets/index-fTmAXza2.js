var pK=Object.defineProperty;var mK=(e,t,n)=>t in e?pK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ea=(e,t,n)=>mK(e,typeof t!="symbol"?t+"":t,n);function gK(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V2={exports:{}},_g={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p4;function yK(){if(p4)return _g;p4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:s,ref:a!==void 0?a:null,props:i}}return _g.Fragment=t,_g.jsx=n,_g.jsxs=n,_g}var m4;function bK(){return m4||(m4=1,V2.exports=yK()),V2.exports}var m=bK(),H2={exports:{}};function vK(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T8={exports:{}},ha=T8.exports={},Qo,el;function wT(){throw new Error("setTimeout has not been defined")}function xT(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Qo=setTimeout:Qo=wT}catch{Qo=wT}try{typeof clearTimeout=="function"?el=clearTimeout:el=xT}catch{el=xT}})();function k8(e){if(Qo===setTimeout)return setTimeout(e,0);if((Qo===wT||!Qo)&&setTimeout)return Qo=setTimeout,setTimeout(e,0);try{return Qo(e,0)}catch{try{return Qo.call(null,e,0)}catch{return Qo.call(this,e,0)}}}function wK(e){if(el===clearTimeout)return clearTimeout(e);if((el===xT||!el)&&clearTimeout)return el=clearTimeout,clearTimeout(e);try{return el(e)}catch{try{return el.call(null,e)}catch{return el.call(this,e)}}}var lc=[],rp=!1,Qd,Mw=-1;function xK(){!rp||!Qd||(rp=!1,Qd.length?lc=Qd.concat(lc):Mw=-1,lc.length&&A8())}function A8(){if(!rp){var e=k8(xK);rp=!0;for(var t=lc.length;t;){for(Qd=lc,lc=[];++Mw<t;)Qd&&Qd[Mw].run();Mw=-1,t=lc.length}Qd=null,rp=!1,wK(e)}}ha.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];lc.push(new N8(e,t)),lc.length===1&&!rp&&k8(A8)};function N8(e,t){this.fun=e,this.array=t}N8.prototype.run=function(){this.fun.apply(null,this.array)};ha.title="browser";ha.browser=!0;ha.env={};ha.argv=[];ha.version="";ha.versions={};function Tc(){}ha.on=Tc;ha.addListener=Tc;ha.once=Tc;ha.off=Tc;ha.removeListener=Tc;ha.removeAllListeners=Tc;ha.emit=Tc;ha.prependListener=Tc;ha.prependOnceListener=Tc;ha.listeners=function(e){return[]};ha.binding=function(e){throw new Error("process.binding is not supported")};ha.cwd=function(){return"/"};ha.chdir=function(e){throw new Error("process.chdir is not supported")};ha.umask=function(){return 0};var _K=T8.exports;const aa=vK(_K);var Ln={},g4;function SK(){if(g4)return Ln;g4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(B){return B===null||typeof B!="object"?null:(B=h&&B[h]||B["@@iterator"],typeof B=="function"?B:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function x(B,J,Q){this.props=B,this.context=J,this.refs=b,this.updater=Q||g}x.prototype.isReactComponent={},x.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},x.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function w(){}w.prototype=x.prototype;function S(B,J,Q){this.props=B,this.context=J,this.refs=b,this.updater=Q||g}var E=S.prototype=new w;E.constructor=S,v(E,x.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function I(B,J,Q,ne,he,de){return Q=de.ref,{$$typeof:e,type:B,key:J,ref:Q!==void 0?Q:null,props:de}}function N(B,J){return I(B.type,J,void 0,void 0,void 0,B.props)}function P(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function L(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Q){return J[Q]})}var H=/\/+/g;function M(B,J){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):J.toString(36)}function Z(){}function q(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(Z,Z):(B.status="pending",B.then(function(J){B.status==="pending"&&(B.status="fulfilled",B.value=J)},function(J){B.status==="pending"&&(B.status="rejected",B.reason=J)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ue(B,J,Q,ne,he){var de=typeof B;(de==="undefined"||de==="boolean")&&(B=null);var Ie=!1;if(B===null)Ie=!0;else switch(de){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(B.$$typeof){case e:case t:Ie=!0;break;case d:return Ie=B._init,ue(Ie(B._payload),J,Q,ne,he)}}if(Ie)return he=he(B),Ie=ne===""?"."+M(B,0):ne,C(he)?(Q="",Ie!=null&&(Q=Ie.replace(H,"$&/")+"/"),ue(he,J,Q,"",function(Ee){return Ee})):he!=null&&(P(he)&&(he=N(he,Q+(he.key==null||B&&B.key===he.key?"":(""+he.key).replace(H,"$&/")+"/")+Ie)),J.push(he)),1;Ie=0;var Te=ne===""?".":ne+":";if(C(B))for(var Ae=0;Ae<B.length;Ae++)ne=B[Ae],de=Te+M(ne,Ae),Ie+=ue(ne,J,Q,de,he);else if(Ae=p(B),typeof Ae=="function")for(B=Ae.call(B),Ae=0;!(ne=B.next()).done;)ne=ne.value,de=Te+M(ne,Ae++),Ie+=ue(ne,J,Q,de,he);else if(de==="object"){if(typeof B.then=="function")return ue(q(B),J,Q,ne,he);throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function ae(B,J,Q){if(B==null)return B;var ne=[],he=0;return ue(B,ne,"","",function(de){return J.call(Q,de,he++)}),ne}function ee(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(Q){(B._status===0||B._status===-1)&&(B._status=1,B._result=Q)},function(Q){(B._status===0||B._status===-1)&&(B._status=2,B._result=Q)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var X=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(J))return}else if(typeof aa=="object"&&typeof aa.emit=="function"){aa.emit("uncaughtException",B);return}console.error(B)};function ie(){}return Ln.Children={map:ae,forEach:function(B,J,Q){ae(B,function(){J.apply(this,arguments)},Q)},count:function(B){var J=0;return ae(B,function(){J++}),J},toArray:function(B){return ae(B,function(J){return J})||[]},only:function(B){if(!P(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ln.Component=x,Ln.Fragment=n,Ln.Profiler=a,Ln.PureComponent=S,Ln.StrictMode=r,Ln.Suspense=l,Ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ln.__COMPILER_RUNTIME={__proto__:null,c:function(B){return k.H.useMemoCache(B)}},Ln.cache=function(B){return function(){return B.apply(null,arguments)}},Ln.cloneElement=function(B,J,Q){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ne=v({},B.props),he=B.key,de=void 0;if(J!=null)for(Ie in J.ref!==void 0&&(de=void 0),J.key!==void 0&&(he=""+J.key),J)!j.call(J,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&J.ref===void 0||(ne[Ie]=J[Ie]);var Ie=arguments.length-2;if(Ie===1)ne.children=Q;else if(1<Ie){for(var Te=Array(Ie),Ae=0;Ae<Ie;Ae++)Te[Ae]=arguments[Ae+2];ne.children=Te}return I(B.type,he,void 0,void 0,de,ne)},Ln.createContext=function(B){return B={$$typeof:s,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:i,_context:B},B},Ln.createElement=function(B,J,Q){var ne,he={},de=null;if(J!=null)for(ne in J.key!==void 0&&(de=""+J.key),J)j.call(J,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(he[ne]=J[ne]);var Ie=arguments.length-2;if(Ie===1)he.children=Q;else if(1<Ie){for(var Te=Array(Ie),Ae=0;Ae<Ie;Ae++)Te[Ae]=arguments[Ae+2];he.children=Te}if(B&&B.defaultProps)for(ne in Ie=B.defaultProps,Ie)he[ne]===void 0&&(he[ne]=Ie[ne]);return I(B,de,void 0,void 0,null,he)},Ln.createRef=function(){return{current:null}},Ln.forwardRef=function(B){return{$$typeof:o,render:B}},Ln.isValidElement=P,Ln.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:ee}},Ln.memo=function(B,J){return{$$typeof:c,type:B,compare:J===void 0?null:J}},Ln.startTransition=function(B){var J=k.T,Q={};k.T=Q;try{var ne=B(),he=k.S;he!==null&&he(Q,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(ie,X)}catch(de){X(de)}finally{k.T=J}},Ln.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ln.use=function(B){return k.H.use(B)},Ln.useActionState=function(B,J,Q){return k.H.useActionState(B,J,Q)},Ln.useCallback=function(B,J){return k.H.useCallback(B,J)},Ln.useContext=function(B){return k.H.useContext(B)},Ln.useDebugValue=function(){},Ln.useDeferredValue=function(B,J){return k.H.useDeferredValue(B,J)},Ln.useEffect=function(B,J,Q){var ne=k.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(B,J)},Ln.useId=function(){return k.H.useId()},Ln.useImperativeHandle=function(B,J,Q){return k.H.useImperativeHandle(B,J,Q)},Ln.useInsertionEffect=function(B,J){return k.H.useInsertionEffect(B,J)},Ln.useLayoutEffect=function(B,J){return k.H.useLayoutEffect(B,J)},Ln.useMemo=function(B,J){return k.H.useMemo(B,J)},Ln.useOptimistic=function(B,J){return k.H.useOptimistic(B,J)},Ln.useReducer=function(B,J,Q){return k.H.useReducer(B,J,Q)},Ln.useRef=function(B){return k.H.useRef(B)},Ln.useState=function(B){return k.H.useState(B)},Ln.useSyncExternalStore=function(B,J,Q){return k.H.useSyncExternalStore(B,J,Q)},Ln.useTransition=function(){return k.H.useTransition()},Ln.version="19.1.0",Ln}var y4;function pA(){return y4||(y4=1,H2.exports=SK()),H2.exports}var T=pA();const gt=bi(T),R8=gK({__proto__:null,default:gt},[T]);var q2={exports:{}},Sg={},G2={exports:{}},W2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b4;function EK(){return b4||(b4=1,function(e){function t(ae,ee){var X=ae.length;ae.push(ee);e:for(;0<X;){var ie=X-1>>>1,B=ae[ie];if(0<a(B,ee))ae[ie]=ee,ae[X]=B,X=ie;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ee=ae[0],X=ae.pop();if(X!==ee){ae[0]=X;e:for(var ie=0,B=ae.length,J=B>>>1;ie<J;){var Q=2*(ie+1)-1,ne=ae[Q],he=Q+1,de=ae[he];if(0>a(ne,X))he<B&&0>a(de,ne)?(ae[ie]=de,ae[he]=X,ie=he):(ae[ie]=ne,ae[Q]=X,ie=Q);else if(he<B&&0>a(de,X))ae[ie]=de,ae[he]=X,ie=he;else break e}}return ee}function a(ae,ee){var X=ae.sortIndex-ee.sortIndex;return X!==0?X:ae.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,h=null,p=3,g=!1,v=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ae){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=ae)r(c),ee.sortIndex=ee.expirationTime,t(l,ee);else break;ee=n(c)}}function k(ae){if(b=!1,C(ae),!v)if(n(l)!==null)v=!0,j||(j=!0,M());else{var ee=n(c);ee!==null&&ue(k,ee.startTime-ae)}}var j=!1,I=-1,N=5,P=-1;function L(){return x?!0:!(e.unstable_now()-P<N)}function H(){if(x=!1,j){var ae=e.unstable_now();P=ae;var ee=!0;try{e:{v=!1,b&&(b=!1,S(I),I=-1),g=!0;var X=p;try{t:{for(C(ae),h=n(l);h!==null&&!(h.expirationTime>ae&&L());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,p=h.priorityLevel;var B=ie(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof B=="function"){h.callback=B,C(ae),ee=!0;break t}h===n(l)&&r(l),C(ae)}else r(l);h=n(l)}if(h!==null)ee=!0;else{var J=n(c);J!==null&&ue(k,J.startTime-ae),ee=!1}}break e}finally{h=null,p=X,g=!1}ee=void 0}}finally{ee?M():j=!1}}}var M;if(typeof E=="function")M=function(){E(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=H,M=function(){q.postMessage(null)}}else M=function(){w(H,0)};function ue(ae,ee){I=w(function(){ae(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(ae){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var X=p;p=ee;try{return ae()}finally{p=X}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(ae,ee){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var X=p;p=ae;try{return ee()}finally{p=X}},e.unstable_scheduleCallback=function(ae,ee,X){var ie=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ie+X:ie):X=ie,ae){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,ae={id:d++,callback:ee,priorityLevel:ae,startTime:X,expirationTime:B,sortIndex:-1},X>ie?(ae.sortIndex=X,t(c,ae),n(l)===null&&ae===n(c)&&(b?(S(I),I=-1):b=!0,ue(k,X-ie))):(ae.sortIndex=B,t(l,ae),v||g||(v=!0,j||(j=!0,M()))),ae},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(ae){var ee=p;return function(){var X=p;p=ee;try{return ae.apply(this,arguments)}finally{p=X}}}}(W2)),W2}var v4;function CK(){return v4||(v4=1,G2.exports=EK()),G2.exports}var K2={exports:{}},oi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w4;function TK(){if(w4)return oi;w4=1;var e=pA();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return oi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,oi.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(l,c,null,d)},oi.flushSync=function(l){var c=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=c,r.p=d,r.d.f()}},oi.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},oi.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},oi.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},oi.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},oi.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},oi.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},oi.requestFormReset=function(l){r.d.r(l)},oi.unstable_batchedUpdates=function(l,c){return l(c)},oi.useFormState=function(l,c,d){return s.H.useFormState(l,c,d)},oi.useFormStatus=function(){return s.H.useHostTransitionStatus()},oi.version="19.1.0",oi}var x4;function I8(){if(x4)return K2.exports;x4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),K2.exports=TK(),K2.exports}var _4;function kK(){if(_4)return Sg;_4=1;var e=CK(),t=pA(),n=I8();function r(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function s(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(i(u)!==u)throw Error(r(188))}function l(u){var f=u.alternate;if(!f){if(f=i(u),f===null)throw Error(r(188));return f!==u?null:u}for(var y=u,_=f;;){var R=y.return;if(R===null)break;var $=R.alternate;if($===null){if(_=R.return,_!==null){y=_;continue}break}if(R.child===$.child){for($=R.child;$;){if($===y)return o(R),u;if($===_)return o(R),f;$=$.sibling}throw Error(r(188))}if(y.return!==_.return)y=R,_=$;else{for(var oe=!1,_e=R.child;_e;){if(_e===y){oe=!0,y=R,_=$;break}if(_e===_){oe=!0,_=R,y=$;break}_e=_e.sibling}if(!oe){for(_e=$.child;_e;){if(_e===y){oe=!0,y=$,_=R;break}if(_e===_){oe=!0,_=$,y=R;break}_e=_e.sibling}if(!oe)throw Error(r(189))}}if(y.alternate!==_)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function M(u){return u===null||typeof u!="object"?null:(u=H&&u[H]||u["@@iterator"],typeof u=="function"?u:null)}var Z=Symbol.for("react.client.reference");function q(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Z?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case x:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case j:return"SuspenseList";case P:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case E:return(u.displayName||"Context")+".Provider";case S:return(u._context.displayName||"Context")+".Consumer";case C:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return f=u.displayName||null,f!==null?f:q(u.type)||"Memo";case N:f=u._payload,u=u._init;try{return q(u(f))}catch{}}return null}var ue=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ie=[],B=-1;function J(u){return{current:u}}function Q(u){0>B||(u.current=ie[B],ie[B]=null,B--)}function ne(u,f){B++,ie[B]=u.current,u.current=f}var he=J(null),de=J(null),Ie=J(null),Te=J(null);function Ae(u,f){switch(ne(Ie,f),ne(de,u),ne(he,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?Uj(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=Uj(f),u=Vj(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}Q(he),ne(he,u)}function Ee(){Q(he),Q(de),Q(Ie)}function Pe(u){u.memoizedState!==null&&ne(Te,u);var f=he.current,y=Vj(f,u.type);f!==y&&(ne(de,u),ne(he,y))}function Qe(u){de.current===u&&(Q(he),Q(de)),Te.current===u&&(Q(Te),yg._currentValue=X)}var Le=Object.prototype.hasOwnProperty,je=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Ne=e.unstable_requestPaint,fe=e.unstable_now,se=e.unstable_getCurrentPriorityLevel,te=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Fe=e.unstable_NormalPriority,Ce=e.unstable_LowPriority,We=e.unstable_IdlePriority,Nt=e.log,it=e.unstable_setDisableYieldValue,St=null,Ft=null;function Mt(u){if(typeof Nt=="function"&&it(u),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(St,u)}catch{}}var Zt=Math.clz32?Math.clz32:W,be=Math.log,D=Math.LN2;function W(u){return u>>>=0,u===0?32:31-(be(u)/D|0)|0}var pe=256,De=4194304;function ve(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function ke(u,f,y){var _=u.pendingLanes;if(_===0)return 0;var R=0,$=u.suspendedLanes,oe=u.pingedLanes;u=u.warmLanes;var _e=_&134217727;return _e!==0?(_=_e&~$,_!==0?R=ve(_):(oe&=_e,oe!==0?R=ve(oe):y||(y=_e&~u,y!==0&&(R=ve(y))))):(_e=_&~$,_e!==0?R=ve(_e):oe!==0?R=ve(oe):y||(y=_&~u,y!==0&&(R=ve(y)))),R===0?0:f!==0&&f!==R&&(f&$)===0&&($=R&-R,y=f&-f,$>=y||$===32&&(y&4194048)!==0)?f:R}function le(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function ft(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var u=pe;return pe<<=1,(pe&4194048)===0&&(pe=256),u}function F(){var u=De;return De<<=1,(De&62914560)===0&&(De=4194304),u}function Be(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function nt(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ye(u,f,y,_,R,$){var oe=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var _e=u.entanglements,ze=u.expirationTimes,dt=u.hiddenUpdates;for(y=oe&~y;0<y;){var At=31-Zt(y),Ot=1<<At;_e[At]=0,ze[At]=-1;var mt=dt[At];if(mt!==null)for(dt[At]=null,At=0;At<mt.length;At++){var yt=mt[At];yt!==null&&(yt.lane&=-536870913)}y&=~Ot}_!==0&&Me(u,_,0),$!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=$&~(oe&~f))}function Me(u,f,y){u.pendingLanes|=f,u.suspendedLanes&=~f;var _=31-Zt(f);u.entangledLanes|=f,u.entanglements[_]=u.entanglements[_]|1073741824|y&4194090}function Ke(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var _=31-Zt(y),R=1<<_;R&f|u[_]&f&&(u[_]|=f),y&=~R}}function Dt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function ge(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function G(){var u=ee.p;return u!==0?u:(u=window.event,u===void 0?32:l4(u.type))}function V(u,f){var y=ee.p;try{return ee.p=u,f()}finally{ee.p=y}}var K=Math.random().toString(36).slice(2),me="__reactFiber$"+K,Re="__reactProps$"+K,Ve="__reactContainer$"+K,pt="__reactEvents$"+K,Kt="__reactListeners$"+K,ut="__reactHandles$"+K,Rt="__reactResources$"+K,Lt="__reactMarker$"+K;function en(u){delete u[me],delete u[Re],delete u[pt],delete u[Kt],delete u[ut]}function Rn(u){var f=u[me];if(f)return f;for(var y=u.parentNode;y;){if(f=y[Ve]||y[me]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(u=Wj(u);u!==null;){if(y=u[me])return y;u=Wj(u)}return f}u=y,y=u.parentNode}return null}function Xn(u){if(u=u[me]||u[Ve]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function _r(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(r(33))}function Sr(u){var f=u[Rt];return f||(f=u[Rt]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function $n(u){u[Lt]=!0}var xi=new Set,jo={};function Do(u,f){Mo(u,f),Mo(u+"Capture",f)}function Mo(u,f){for(jo[u]=f,u=0;u<f.length;u++)xi.add(f[u])}var Kr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oo={},xs={};function bb(u){return Le.call(xs,u)?!0:Le.call(Oo,u)?!1:Kr.test(u)?xs[u]=!0:(Oo[u]=!0,!1)}function Xs(u,f,y){if(bb(f))if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var _=f.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+y)}}function Al(u,f,y){if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+y)}}function ns(u,f,y,_){if(_===null)u.removeAttribute(y);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(f,y,""+_)}}var gd,Po;function Nl(u){if(gd===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);gd=f&&f[1]||"",Po=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gd+u+Po}var Oc=!1;function qf(u,f){if(!u||Oc)return"";Oc=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(f){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(yt){var mt=yt}Reflect.construct(u,[],Ot)}else{try{Ot.call()}catch(yt){mt=yt}u.call(Ot.prototype)}}else{try{throw Error()}catch(yt){mt=yt}(Ot=u())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(yt){if(yt&&mt&&typeof yt.stack=="string")return[yt.stack,mt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=_.DetermineComponentFrameRoot(),oe=$[0],_e=$[1];if(oe&&_e){var ze=oe.split(`
`),dt=_e.split(`
`);for(R=_=0;_<ze.length&&!ze[_].includes("DetermineComponentFrameRoot");)_++;for(;R<dt.length&&!dt[R].includes("DetermineComponentFrameRoot");)R++;if(_===ze.length||R===dt.length)for(_=ze.length-1,R=dt.length-1;1<=_&&0<=R&&ze[_]!==dt[R];)R--;for(;1<=_&&0<=R;_--,R--)if(ze[_]!==dt[R]){if(_!==1||R!==1)do if(_--,R--,0>R||ze[_]!==dt[R]){var At=`
`+ze[_].replace(" at new "," at ");return u.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",u.displayName)),At}while(1<=_&&0<=R);break}}}finally{Oc=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?Nl(y):""}function Jn(u){switch(u.tag){case 26:case 27:case 5:return Nl(u.type);case 16:return Nl("Lazy");case 13:return Nl("Suspense");case 19:return Nl("SuspenseList");case 0:case 15:return qf(u.type,!1);case 11:return qf(u.type.render,!1);case 1:return qf(u.type,!0);case 31:return Nl("Activity");default:return""}}function vm(u){try{var f="";do f+=Jn(u),u=u.return;while(u);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function _i(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function wm(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function jr(u){var f=wm(u)?"checked":"value",y=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),_=""+u[f];if(!u.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var R=y.get,$=y.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return R.call(this)},set:function(oe){_=""+oe,$.call(this,oe)}}),Object.defineProperty(u,f,{enumerable:y.enumerable}),{getValue:function(){return _},setValue:function(oe){_=""+oe},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Fo(u){u._valueTracker||(u._valueTracker=jr(u))}function Pc(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var y=f.getValue(),_="";return u&&(_=wm(u)?u.checked?"true":"false":u.value),u=_,u!==y?(f.setValue(u),!0):!1}function Js(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var xm=/[\n"\\]/g;function ri(u){return u.replace(xm,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Fc(u,f,y,_,R,$,oe,_e){u.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?u.type=oe:u.removeAttribute("type"),f!=null?oe==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+_i(f)):u.value!==""+_i(f)&&(u.value=""+_i(f)):oe!=="submit"&&oe!=="reset"||u.removeAttribute("value"),f!=null?Lc(u,oe,_i(f)):y!=null?Lc(u,oe,_i(y)):_!=null&&u.removeAttribute("value"),R==null&&$!=null&&(u.defaultChecked=!!$),R!=null&&(u.checked=R&&typeof R!="function"&&typeof R!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?u.name=""+_i(_e):u.removeAttribute("name")}function _m(u,f,y,_,R,$,oe,_e){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(u.type=$),f!=null||y!=null){if(!($!=="submit"&&$!=="reset"||f!=null))return;y=y!=null?""+_i(y):"",f=f!=null?""+_i(f):y,_e||f===u.value||(u.value=f),u.defaultValue=f}_=_??R,_=typeof _!="function"&&typeof _!="symbol"&&!!_,u.checked=_e?u.checked:!!_,u.defaultChecked=!!_,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(u.name=oe)}function Lc(u,f,y){f==="number"&&Js(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function Rl(u,f,y,_){if(u=u.options,f){f={};for(var R=0;R<y.length;R++)f["$"+y[R]]=!0;for(y=0;y<u.length;y++)R=f.hasOwnProperty("$"+u[y].value),u[y].selected!==R&&(u[y].selected=R),R&&_&&(u[y].defaultSelected=!0)}else{for(y=""+_i(y),f=null,R=0;R<u.length;R++){if(u[R].value===y){u[R].selected=!0,_&&(u[R].defaultSelected=!0);return}f!==null||u[R].disabled||(f=u[R])}f!==null&&(f.selected=!0)}}function $c(u,f,y){if(f!=null&&(f=""+_i(f),f!==u.value&&(u.value=f),y==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=y!=null?""+_i(y):""}function Sm(u,f,y,_){if(f==null){if(_!=null){if(y!=null)throw Error(r(92));if(ue(_)){if(1<_.length)throw Error(r(93));_=_[0]}y=_}y==null&&(y=""),f=y}y=_i(f),u.defaultValue=y,_=u.textContent,_===y&&_!==""&&_!==null&&(u.value=_)}function Bc(u,f){if(f){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=f;return}}u.textContent=f}var nr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gf(u,f,y){var _=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?_?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":_?u.setProperty(f,y):typeof y!="number"||y===0||nr.has(f)?f==="float"?u.cssFloat=y:u[f]=(""+y).trim():u[f]=y+"px"}function vb(u,f,y){if(f!=null&&typeof f!="object")throw Error(r(62));if(u=u.style,y!=null){for(var _ in y)!y.hasOwnProperty(_)||f!=null&&f.hasOwnProperty(_)||(_.indexOf("--")===0?u.setProperty(_,""):_==="float"?u.cssFloat="":u[_]="");for(var R in f)_=f[R],f.hasOwnProperty(R)&&y[R]!==_&&Gf(u,R,_)}else for(var $ in f)f.hasOwnProperty($)&&Gf(u,$,f[$])}function Em(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Si=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Il(u){return zc.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var _s=null;function Wf(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var jl=null,Br=null;function rs(u){var f=Xn(u);if(f&&(u=f.stateNode)){var y=u[Re]||null;e:switch(u=f.stateNode,f.type){case"input":if(Fc(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ri(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var _=y[f];if(_!==u&&_.form===u.form){var R=_[Re]||null;if(!R)throw Error(r(90));Fc(_,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(f=0;f<y.length;f++)_=y[f],_.form===u.form&&Pc(_)}break e;case"textarea":$c(u,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&Rl(u,!!y.multiple,f,!1)}}}var Dl=!1;function Uc(u,f,y){if(Dl)return u(f,y);Dl=!0;try{var _=u(f);return _}finally{if(Dl=!1,(jl!==null||Br!==null)&&(ov(),jl&&(f=jl,u=Br,Br=jl=null,rs(f),u)))for(f=0;f<u.length;f++)rs(u[f])}}function Ml(u,f){var y=u.stateNode;if(y===null)return null;var _=y[Re]||null;if(_===null)return null;y=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(u=u.type,_=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!_;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(r(231,f,typeof y));return y}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cm=!1;if(Ia)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){Cm=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{Cm=!1}var Ss=null,Kf=null,Vc=null;function Hc(){if(Vc)return Vc;var u,f=Kf,y=f.length,_,R="value"in Ss?Ss.value:Ss.textContent,$=R.length;for(u=0;u<y&&f[u]===R[u];u++);var oe=y-u;for(_=1;_<=oe&&f[y-_]===R[$-_];_++);return Vc=R.slice(u,1<_?1-_:void 0)}function qc(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function yd(){return!0}function wb(){return!1}function pa(u){function f(y,_,R,$,oe){this._reactName=y,this._targetInst=R,this.type=_,this.nativeEvent=$,this.target=oe,this.currentTarget=null;for(var _e in u)u.hasOwnProperty(_e)&&(y=u[_e],this[_e]=y?y($):$[_e]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?yd:wb,this.isPropagationStopped=wb,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),f}var Ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=pa(Ol),Lo=d({},Ol,{view:0,detail:0}),Yf=pa(Lo),bd,Tm,vd,Xf=d({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pl,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==vd&&(vd&&u.type==="mousemove"?(bd=u.screenX-vd.screenX,Tm=u.screenY-vd.screenY):Tm=bd=0,vd=u),bd)},movementY:function(u){return"movementY"in u?u.movementY:Tm}}),Jf=pa(Xf),km=d({},Xf,{dataTransfer:0}),xb=pa(km),Qf=d({},Lo,{relatedTarget:0}),Gc=pa(Qf),eh=d({},Ol,{animationName:0,elapsedTime:0,pseudoElement:0}),_b=pa(eh),rS=d({},Ol,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),th=pa(rS),Am=d({},Ol,{data:0}),nh=pa(Am),Nm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wd(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=ja[u])?!!f[u]:!1}function Pl(){return wd}var Sb=d({},Lo,{key:function(u){if(u.key){var f=Nm[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=qc(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Rm[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pl,charCode:function(u){return u.type==="keypress"?qc(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?qc(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),rh=pa(Sb),Eb=d({},Xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Im=pa(Eb),ah=d({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pl}),jm=pa(ah),Fl=d({},Ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dm=pa(Fl),Mm=d({},Xf,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),ih=pa(Mm),Om=d({},Ol,{newState:0,oldState:0}),Cb=pa(Om),aS=[9,13,27,32],xd=Ia&&"CompositionEvent"in window,$o=null;Ia&&"documentMode"in document&&($o=document.documentMode);var iS=Ia&&"TextEvent"in window&&!$o,sh=Ia&&(!xd||$o&&8<$o&&11>=$o),oh=" ",Tb=!1;function Pm(u,f){switch(u){case"keyup":return aS.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kb(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ll=!1;function Ab(u,f){switch(u){case"compositionend":return kb(f);case"keypress":return f.which!==32?null:(Tb=!0,oh);case"textInput":return u=f.data,u===oh&&Tb?null:u;default:return null}}function sS(u,f){if(Ll)return u==="compositionend"||!xd&&Pm(u,f)?(u=Hc(),Vc=Kf=Ss=null,Ll=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return sh&&f.locale!=="ko"?null:f.data;default:return null}}var Nb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lh(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!Nb[u.type]:f==="textarea"}function Fm(u,f,y,_){jl?Br?Br.push(_):Br=[_]:jl=_,f=hv(f,"onChange"),0<f.length&&(y=new Zf("onChange","change",null,y,_),u.push({event:y,listeners:f}))}var Wc=null,_d=null;function oS(u){Fj(u,0)}function ch(u){var f=_r(u);if(Pc(f))return u}function Sd(u,f){if(u==="change")return f}var Es=!1;if(Ia){var zr;if(Ia){var Kc="oninput"in document;if(!Kc){var Ei=document.createElement("div");Ei.setAttribute("oninput","return;"),Kc=typeof Ei.oninput=="function"}zr=Kc}else zr=!1;Es=zr&&(!document.documentMode||9<document.documentMode)}function Rb(){Wc&&(Wc.detachEvent("onpropertychange",uh),_d=Wc=null)}function uh(u){if(u.propertyName==="value"&&ch(_d)){var f=[];Fm(f,_d,u,Wf(u)),Uc(oS,f)}}function Ib(u,f,y){u==="focusin"?(Rb(),Wc=f,_d=y,Wc.attachEvent("onpropertychange",uh)):u==="focusout"&&Rb()}function $l(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return ch(_d)}function Lm(u,f){if(u==="click")return ch(f)}function Zc(u,f){if(u==="input"||u==="change")return ch(f)}function Bo(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var ii=typeof Object.is=="function"?Object.is:Bo;function A(u,f){if(ii(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),_=Object.keys(f);if(y.length!==_.length)return!1;for(_=0;_<y.length;_++){var R=y[_];if(!Le.call(f,R)||!ii(u[R],f[R]))return!1}return!0}function O(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Y(u,f){var y=O(u);u=0;for(var _;y;){if(y.nodeType===3){if(_=u+y.textContent.length,u<=f&&_>=f)return{node:y,offset:f-u};u=_}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=O(y)}}function re(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?re(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function ce(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Js(u.document);f instanceof u.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)u=f.contentWindow;else break;f=Js(u.document)}return f}function we(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var Oe=Ia&&"documentMode"in document&&11>=document.documentMode,$e=null,Ze=null,Xe=null,rt=!1;function He(u,f,y){var _=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;rt||$e==null||$e!==Js(_)||(_=$e,"selectionStart"in _&&we(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Xe&&A(Xe,_)||(Xe=_,_=hv(Ze,"onSelect"),0<_.length&&(f=new Zf("onSelect","select",null,f,y),u.push({event:f,listeners:_}),f.target=$e)))}function st(u,f){var y={};return y[u.toLowerCase()]=f.toLowerCase(),y["Webkit"+u]="webkit"+f,y["Moz"+u]="moz"+f,y}var qe={animationend:st("Animation","AnimationEnd"),animationiteration:st("Animation","AnimationIteration"),animationstart:st("Animation","AnimationStart"),transitionrun:st("Transition","TransitionRun"),transitionstart:st("Transition","TransitionStart"),transitioncancel:st("Transition","TransitionCancel"),transitionend:st("Transition","TransitionEnd")},tt={},ot={};Ia&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);function Je(u){if(tt[u])return tt[u];if(!qe[u])return u;var f=qe[u],y;for(y in f)if(f.hasOwnProperty(y)&&y in ot)return tt[u]=f[y];return u}var ht=Je("animationend"),bt=Je("animationiteration"),wt=Je("animationstart"),kt=Je("transitionrun"),Vt=Je("transitionstart"),Yt=Je("transitioncancel"),Bt=Je("transitionend"),Wt=new Map,Xt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xt.push("scrollEnd");function zt(u,f){Wt.set(u,f),Do(f,[u])}var nn=new WeakMap;function pn(u,f){if(typeof u=="object"&&u!==null){var y=nn.get(u);return y!==void 0?y:(f={value:u,source:f,stack:vm(f)},nn.set(u,f),f)}return{value:u,source:f,stack:vm(f)}}var gn=[],In=0,Za=0;function _n(){for(var u=In,f=Za=In=0;f<u;){var y=gn[f];gn[f++]=null;var _=gn[f];gn[f++]=null;var R=gn[f];gn[f++]=null;var $=gn[f];if(gn[f++]=null,_!==null&&R!==null){var oe=_.pending;oe===null?R.next=R:(R.next=oe.next,oe.next=R),_.pending=R}$!==0&&Da(y,R,$)}}function oa(u,f,y,_){gn[In++]=u,gn[In++]=f,gn[In++]=y,gn[In++]=_,Za|=_,u.lanes|=_,u=u.alternate,u!==null&&(u.lanes|=_)}function ma(u,f,y,_){return oa(u,f,y,_),Cs(u)}function Qs(u,f){return oa(u,null,null,f),Cs(u)}function Da(u,f,y){u.lanes|=y;var _=u.alternate;_!==null&&(_.lanes|=y);for(var R=!1,$=u.return;$!==null;)$.childLanes|=y,_=$.alternate,_!==null&&(_.childLanes|=y),$.tag===22&&(u=$.stateNode,u===null||u._visibility&1||(R=!0)),u=$,$=$.return;return u.tag===3?($=u.stateNode,R&&f!==null&&(R=31-Zt(y),u=$.hiddenUpdates,_=u[R],_===null?u[R]=[f]:_.push(f),f.lane=y|536870912),$):null}function Cs(u){if(50<cg)throw cg=0,h2=null,Error(r(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var zo={};function QG(u,f,y,_){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(u,f,y,_){return new QG(u,f,y,_)}function lS(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Bl(u,f){var y=u.alternate;return y===null?(y=as(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function _I(u,f){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,f=y.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function jb(u,f,y,_,R,$){var oe=0;if(_=u,typeof u=="function")lS(u)&&(oe=1);else if(typeof u=="string")oe=tK(u,y,he.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case P:return u=as(31,y,f,R),u.elementType=P,u.lanes=$,u;case v:return Ed(y.children,R,$,f);case b:oe=8,R|=24;break;case x:return u=as(12,y,f,R|2),u.elementType=x,u.lanes=$,u;case k:return u=as(13,y,f,R),u.elementType=k,u.lanes=$,u;case j:return u=as(19,y,f,R),u.elementType=j,u.lanes=$,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:case E:oe=10;break e;case S:oe=9;break e;case C:oe=11;break e;case I:oe=14;break e;case N:oe=16,_=null;break e}oe=29,y=Error(r(130,u===null?"null":typeof u,"")),_=null}return f=as(oe,y,f,R),f.elementType=u,f.type=_,f.lanes=$,f}function Ed(u,f,y,_){return u=as(7,u,_,f),u.lanes=y,u}function cS(u,f,y){return u=as(6,u,null,f),u.lanes=y,u}function uS(u,f,y){return f=as(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var dh=[],fh=0,Db=null,Mb=0,Ts=[],ks=0,Cd=null,zl=1,Ul="";function Td(u,f){dh[fh++]=Mb,dh[fh++]=Db,Db=u,Mb=f}function SI(u,f,y){Ts[ks++]=zl,Ts[ks++]=Ul,Ts[ks++]=Cd,Cd=u;var _=zl;u=Ul;var R=32-Zt(_)-1;_&=~(1<<R),y+=1;var $=32-Zt(f)+R;if(30<$){var oe=R-R%5;$=(_&(1<<oe)-1).toString(32),_>>=oe,R-=oe,zl=1<<32-Zt(f)+R|y<<R|_,Ul=$+u}else zl=1<<$|y<<R|_,Ul=u}function dS(u){u.return!==null&&(Td(u,1),SI(u,1,0))}function fS(u){for(;u===Db;)Db=dh[--fh],dh[fh]=null,Mb=dh[--fh],dh[fh]=null;for(;u===Cd;)Cd=Ts[--ks],Ts[ks]=null,Ul=Ts[--ks],Ts[ks]=null,zl=Ts[--ks],Ts[ks]=null}var Ci=null,ta=null,ur=!1,kd=null,Uo=!1,hS=Error(r(519));function Ad(u){var f=Error(r(418,""));throw zm(pn(f,u)),hS}function EI(u){var f=u.stateNode,y=u.type,_=u.memoizedProps;switch(f[me]=u,f[Re]=_,y){case"dialog":er("cancel",f),er("close",f);break;case"iframe":case"object":case"embed":er("load",f);break;case"video":case"audio":for(y=0;y<dg.length;y++)er(dg[y],f);break;case"source":er("error",f);break;case"img":case"image":case"link":er("error",f),er("load",f);break;case"details":er("toggle",f);break;case"input":er("invalid",f),_m(f,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),Fo(f);break;case"select":er("invalid",f);break;case"textarea":er("invalid",f),Sm(f,_.value,_.defaultValue,_.children),Fo(f)}y=_.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||_.suppressHydrationWarning===!0||zj(f.textContent,y)?(_.popover!=null&&(er("beforetoggle",f),er("toggle",f)),_.onScroll!=null&&er("scroll",f),_.onScrollEnd!=null&&er("scrollend",f),_.onClick!=null&&(f.onclick=pv),f=!0):f=!1,f||Ad(u)}function CI(u){for(Ci=u.return;Ci;)switch(Ci.tag){case 5:case 13:Uo=!1;return;case 27:case 3:Uo=!0;return;default:Ci=Ci.return}}function $m(u){if(u!==Ci)return!1;if(!ur)return CI(u),ur=!0,!1;var f=u.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||N2(u.type,u.memoizedProps)),y=!y),y&&ta&&Ad(u),CI(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(y=u.data,y==="/$"){if(f===0){ta=to(u.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++;u=u.nextSibling}ta=null}}else f===27?(f=ta,du(u.type)?(u=D2,D2=null,ta=u):ta=f):ta=Ci?to(u.stateNode.nextSibling):null;return!0}function Bm(){ta=Ci=null,ur=!1}function TI(){var u=kd;return u!==null&&(Ui===null?Ui=u:Ui.push.apply(Ui,u),kd=null),u}function zm(u){kd===null?kd=[u]:kd.push(u)}var pS=J(null),Nd=null,Vl=null;function Yc(u,f,y){ne(pS,f._currentValue),f._currentValue=y}function Hl(u){u._currentValue=pS.current,Q(pS)}function mS(u,f,y){for(;u!==null;){var _=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),u===y)break;u=u.return}}function gS(u,f,y,_){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var $=R.dependencies;if($!==null){var oe=R.child;$=$.firstContext;e:for(;$!==null;){var _e=$;$=R;for(var ze=0;ze<f.length;ze++)if(_e.context===f[ze]){$.lanes|=y,_e=$.alternate,_e!==null&&(_e.lanes|=y),mS($.return,y,u),_||(oe=null);break e}$=_e.next}}else if(R.tag===18){if(oe=R.return,oe===null)throw Error(r(341));oe.lanes|=y,$=oe.alternate,$!==null&&($.lanes|=y),mS(oe,y,u),oe=null}else oe=R.child;if(oe!==null)oe.return=R;else for(oe=R;oe!==null;){if(oe===u){oe=null;break}if(R=oe.sibling,R!==null){R.return=oe.return,oe=R;break}oe=oe.return}R=oe}}function Um(u,f,y,_){u=null;for(var R=f,$=!1;R!==null;){if(!$){if((R.flags&524288)!==0)$=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var oe=R.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var _e=R.type;ii(R.pendingProps.value,oe.value)||(u!==null?u.push(_e):u=[_e])}}else if(R===Te.current){if(oe=R.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(yg):u=[yg])}R=R.return}u!==null&&gS(f,u,y,_),f.flags|=262144}function Ob(u){for(u=u.firstContext;u!==null;){if(!ii(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Rd(u){Nd=u,Vl=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function si(u){return kI(Nd,u)}function Pb(u,f){return Nd===null&&Rd(u),kI(u,f)}function kI(u,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},Vl===null){if(u===null)throw Error(r(308));Vl=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else Vl=Vl.next=f;return y}var eW=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(y,_){u.push(_)}};this.abort=function(){f.aborted=!0,u.forEach(function(y){return y()})}},tW=e.unstable_scheduleCallback,nW=e.unstable_NormalPriority,_a={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yS(){return{controller:new eW,data:new Map,refCount:0}}function Vm(u){u.refCount--,u.refCount===0&&tW(nW,function(){u.controller.abort()})}var Hm=null,bS=0,hh=0,ph=null;function rW(u,f){if(Hm===null){var y=Hm=[];bS=0,hh=w2(),ph={status:"pending",value:void 0,then:function(_){y.push(_)}}}return bS++,f.then(AI,AI),f}function AI(){if(--bS===0&&Hm!==null){ph!==null&&(ph.status="fulfilled");var u=Hm;Hm=null,hh=0,ph=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function aW(u,f){var y=[],_={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return u.then(function(){_.status="fulfilled",_.value=f;for(var R=0;R<y.length;R++)(0,y[R])(f)},function(R){for(_.status="rejected",_.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),_}var NI=ae.S;ae.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&rW(u,f),NI!==null&&NI(u,f)};var Id=J(null);function vS(){var u=Id.current;return u!==null?u:Fr.pooledCache}function Fb(u,f){f===null?ne(Id,Id.current):ne(Id,f.pool)}function RI(){var u=vS();return u===null?null:{parent:_a._currentValue,pool:u}}var qm=Error(r(460)),II=Error(r(474)),Lb=Error(r(542)),wS={then:function(){}};function jI(u){return u=u.status,u==="fulfilled"||u==="rejected"}function $b(){}function DI(u,f,y){switch(y=u[y],y===void 0?u.push(f):y!==f&&(f.then($b,$b),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,OI(u),u;default:if(typeof f.status=="string")f.then($b,$b);else{if(u=Fr,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=f,u.status="pending",u.then(function(_){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=_}},function(_){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=_}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,OI(u),u}throw Gm=f,qm}}var Gm=null;function MI(){if(Gm===null)throw Error(r(459));var u=Gm;return Gm=null,u}function OI(u){if(u===qm||u===Lb)throw Error(r(483))}var Xc=!1;function xS(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _S(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Jc(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Qc(u,f,y){var _=u.updateQueue;if(_===null)return null;if(_=_.shared,(yr&2)!==0){var R=_.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),_.pending=f,f=Cs(u),Da(u,null,y),f}return oa(u,_,f,y),Cs(u)}function Wm(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var _=f.lanes;_&=u.pendingLanes,y|=_,f.lanes=y,Ke(u,y)}}function SS(u,f){var y=u.updateQueue,_=u.alternate;if(_!==null&&(_=_.updateQueue,y===_)){var R=null,$=null;if(y=y.firstBaseUpdate,y!==null){do{var oe={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};$===null?R=$=oe:$=$.next=oe,y=y.next}while(y!==null);$===null?R=$=f:$=$.next=f}else R=$=f;y={baseState:_.baseState,firstBaseUpdate:R,lastBaseUpdate:$,shared:_.shared,callbacks:_.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}var ES=!1;function Km(){if(ES){var u=ph;if(u!==null)throw u}}function Zm(u,f,y,_){ES=!1;var R=u.updateQueue;Xc=!1;var $=R.firstBaseUpdate,oe=R.lastBaseUpdate,_e=R.shared.pending;if(_e!==null){R.shared.pending=null;var ze=_e,dt=ze.next;ze.next=null,oe===null?$=dt:oe.next=dt,oe=ze;var At=u.alternate;At!==null&&(At=At.updateQueue,_e=At.lastBaseUpdate,_e!==oe&&(_e===null?At.firstBaseUpdate=dt:_e.next=dt,At.lastBaseUpdate=ze))}if($!==null){var Ot=R.baseState;oe=0,At=dt=ze=null,_e=$;do{var mt=_e.lane&-536870913,yt=mt!==_e.lane;if(yt?(rr&mt)===mt:(_&mt)===mt){mt!==0&&mt===hh&&(ES=!0),At!==null&&(At=At.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Sn=u,yn=_e;mt=f;var Tr=y;switch(yn.tag){case 1:if(Sn=yn.payload,typeof Sn=="function"){Ot=Sn.call(Tr,Ot,mt);break e}Ot=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=yn.payload,mt=typeof Sn=="function"?Sn.call(Tr,Ot,mt):Sn,mt==null)break e;Ot=d({},Ot,mt);break e;case 2:Xc=!0}}mt=_e.callback,mt!==null&&(u.flags|=64,yt&&(u.flags|=8192),yt=R.callbacks,yt===null?R.callbacks=[mt]:yt.push(mt))}else yt={lane:mt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},At===null?(dt=At=yt,ze=Ot):At=At.next=yt,oe|=mt;if(_e=_e.next,_e===null){if(_e=R.shared.pending,_e===null)break;yt=_e,_e=yt.next,yt.next=null,R.lastBaseUpdate=yt,R.shared.pending=null}}while(!0);At===null&&(ze=Ot),R.baseState=ze,R.firstBaseUpdate=dt,R.lastBaseUpdate=At,$===null&&(R.shared.lanes=0),ou|=oe,u.lanes=oe,u.memoizedState=Ot}}function PI(u,f){if(typeof u!="function")throw Error(r(191,u));u.call(f)}function FI(u,f){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)PI(y[u],f)}var mh=J(null),Bb=J(0);function LI(u,f){u=Xl,ne(Bb,u),ne(mh,f),Xl=u|f.baseLanes}function CS(){ne(Bb,Xl),ne(mh,mh.current)}function TS(){Xl=Bb.current,Q(mh),Q(Bb)}var eu=0,Vn=null,Er=null,ga=null,zb=!1,gh=!1,jd=!1,Ub=0,Ym=0,yh=null,iW=0;function la(){throw Error(r(321))}function kS(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!ii(u[y],f[y]))return!1;return!0}function AS(u,f,y,_,R,$){return eu=$,Vn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ae.H=u===null||u.memoizedState===null?x3:_3,jd=!1,$=y(_,R),jd=!1,gh&&($=BI(f,y,_,R)),$I(u),$}function $I(u){ae.H=Kb;var f=Er!==null&&Er.next!==null;if(eu=0,ga=Er=Vn=null,zb=!1,Ym=0,yh=null,f)throw Error(r(300));u===null||Ma||(u=u.dependencies,u!==null&&Ob(u)&&(Ma=!0))}function BI(u,f,y,_){Vn=u;var R=0;do{if(gh&&(yh=null),Ym=0,gh=!1,25<=R)throw Error(r(301));if(R+=1,ga=Er=null,u.updateQueue!=null){var $=u.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}ae.H=fW,$=f(y,_)}while(gh);return $}function sW(){var u=ae.H,f=u.useState()[0];return f=typeof f.then=="function"?Xm(f):f,u=u.useState()[0],(Er!==null?Er.memoizedState:null)!==u&&(Vn.flags|=1024),f}function NS(){var u=Ub!==0;return Ub=0,u}function RS(u,f,y){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~y}function IS(u){if(zb){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}zb=!1}eu=0,ga=Er=Vn=null,gh=!1,Ym=Ub=0,yh=null}function Bi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ga===null?Vn.memoizedState=ga=u:ga=ga.next=u,ga}function ya(){if(Er===null){var u=Vn.alternate;u=u!==null?u.memoizedState:null}else u=Er.next;var f=ga===null?Vn.memoizedState:ga.next;if(f!==null)ga=f,Er=u;else{if(u===null)throw Vn.alternate===null?Error(r(467)):Error(r(310));Er=u,u={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},ga===null?Vn.memoizedState=ga=u:ga=ga.next=u}return ga}function jS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xm(u){var f=Ym;return Ym+=1,yh===null&&(yh=[]),u=DI(yh,u,f),f=Vn,(ga===null?f.memoizedState:ga.next)===null&&(f=f.alternate,ae.H=f===null||f.memoizedState===null?x3:_3),u}function Vb(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Xm(u);if(u.$$typeof===E)return si(u)}throw Error(r(438,String(u)))}function DS(u){var f=null,y=Vn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var _=Vn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(f={data:_.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=jS(),Vn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(u),_=0;_<u;_++)y[_]=L;return f.index++,y}function ql(u,f){return typeof f=="function"?f(u):f}function Hb(u){var f=ya();return MS(f,Er,u)}function MS(u,f,y){var _=u.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=y;var R=u.baseQueue,$=_.pending;if($!==null){if(R!==null){var oe=R.next;R.next=$.next,$.next=oe}f.baseQueue=R=$,_.pending=null}if($=u.baseState,R===null)u.memoizedState=$;else{f=R.next;var _e=oe=null,ze=null,dt=f,At=!1;do{var Ot=dt.lane&-536870913;if(Ot!==dt.lane?(rr&Ot)===Ot:(eu&Ot)===Ot){var mt=dt.revertLane;if(mt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Ot===hh&&(At=!0);else if((eu&mt)===mt){dt=dt.next,mt===hh&&(At=!0);continue}else Ot={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=Ot,oe=$):ze=ze.next=Ot,Vn.lanes|=mt,ou|=mt;Ot=dt.action,jd&&y($,Ot),$=dt.hasEagerState?dt.eagerState:y($,Ot)}else mt={lane:Ot,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=mt,oe=$):ze=ze.next=mt,Vn.lanes|=Ot,ou|=Ot;dt=dt.next}while(dt!==null&&dt!==f);if(ze===null?oe=$:ze.next=_e,!ii($,u.memoizedState)&&(Ma=!0,At&&(y=ph,y!==null)))throw y;u.memoizedState=$,u.baseState=oe,u.baseQueue=ze,_.lastRenderedState=$}return R===null&&(_.lanes=0),[u.memoizedState,_.dispatch]}function OS(u){var f=ya(),y=f.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=u;var _=y.dispatch,R=y.pending,$=f.memoizedState;if(R!==null){y.pending=null;var oe=R=R.next;do $=u($,oe.action),oe=oe.next;while(oe!==R);ii($,f.memoizedState)||(Ma=!0),f.memoizedState=$,f.baseQueue===null&&(f.baseState=$),y.lastRenderedState=$}return[$,_]}function zI(u,f,y){var _=Vn,R=ya(),$=ur;if($){if(y===void 0)throw Error(r(407));y=y()}else y=f();var oe=!ii((Er||R).memoizedState,y);oe&&(R.memoizedState=y,Ma=!0),R=R.queue;var _e=HI.bind(null,_,R,u);if(Jm(2048,8,_e,[u]),R.getSnapshot!==f||oe||ga!==null&&ga.memoizedState.tag&1){if(_.flags|=2048,bh(9,qb(),VI.bind(null,_,R,y,f),null),Fr===null)throw Error(r(349));$||(eu&124)!==0||UI(_,f,y)}return y}function UI(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=Vn.updateQueue,f===null?(f=jS(),Vn.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function VI(u,f,y,_){f.value=y,f.getSnapshot=_,qI(f)&&GI(u)}function HI(u,f,y){return y(function(){qI(f)&&GI(u)})}function qI(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!ii(u,y)}catch{return!0}}function GI(u){var f=Qs(u,2);f!==null&&cs(f,u,2)}function PS(u){var f=Bi();if(typeof u=="function"){var y=u;if(u=y(),jd){Mt(!0);try{y()}finally{Mt(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:u},f}function WI(u,f,y,_){return u.baseState=y,MS(u,Er,typeof _=="function"?_:ql)}function oW(u,f,y,_,R){if(Wb(u))throw Error(r(485));if(u=f.action,u!==null){var $={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){$.listeners.push(oe)}};ae.T!==null?y(!0):$.isTransition=!1,_($),y=f.pending,y===null?($.next=f.pending=$,KI(f,$)):($.next=y.next,f.pending=y.next=$)}}function KI(u,f){var y=f.action,_=f.payload,R=u.state;if(f.isTransition){var $=ae.T,oe={};ae.T=oe;try{var _e=y(R,_),ze=ae.S;ze!==null&&ze(oe,_e),ZI(u,f,_e)}catch(dt){FS(u,f,dt)}finally{ae.T=$}}else try{$=y(R,_),ZI(u,f,$)}catch(dt){FS(u,f,dt)}}function ZI(u,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(_){YI(u,f,_)},function(_){return FS(u,f,_)}):YI(u,f,y)}function YI(u,f,y){f.status="fulfilled",f.value=y,XI(f),u.state=y,f=u.pending,f!==null&&(y=f.next,y===f?u.pending=null:(y=y.next,f.next=y,KI(u,y)))}function FS(u,f,y){var _=u.pending;if(u.pending=null,_!==null){_=_.next;do f.status="rejected",f.reason=y,XI(f),f=f.next;while(f!==_)}u.action=null}function XI(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function JI(u,f){return f}function QI(u,f){if(ur){var y=Fr.formState;if(y!==null){e:{var _=Vn;if(ur){if(ta){t:{for(var R=ta,$=Uo;R.nodeType!==8;){if(!$){R=null;break t}if(R=to(R.nextSibling),R===null){R=null;break t}}$=R.data,R=$==="F!"||$==="F"?R:null}if(R){ta=to(R.nextSibling),_=R.data==="F!";break e}}Ad(_)}_=!1}_&&(f=y[0])}}return y=Bi(),y.memoizedState=y.baseState=f,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JI,lastRenderedState:f},y.queue=_,y=b3.bind(null,Vn,_),_.dispatch=y,_=PS(!1),$=US.bind(null,Vn,!1,_.queue),_=Bi(),R={state:f,dispatch:null,action:u,pending:null},_.queue=R,y=oW.bind(null,Vn,R,$,y),R.dispatch=y,_.memoizedState=u,[f,y,!1]}function e3(u){var f=ya();return t3(f,Er,u)}function t3(u,f,y){if(f=MS(u,f,JI)[0],u=Hb(ql)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var _=Xm(f)}catch(oe){throw oe===qm?Lb:oe}else _=f;f=ya();var R=f.queue,$=R.dispatch;return y!==f.memoizedState&&(Vn.flags|=2048,bh(9,qb(),lW.bind(null,R,y),null)),[_,$,u]}function lW(u,f){u.action=f}function n3(u){var f=ya(),y=Er;if(y!==null)return t3(f,y,u);ya(),f=f.memoizedState,y=ya();var _=y.queue.dispatch;return y.memoizedState=u,[f,_,!1]}function bh(u,f,y,_){return u={tag:u,create:y,deps:_,inst:f,next:null},f=Vn.updateQueue,f===null&&(f=jS(),Vn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=u.next=u:(_=y.next,y.next=u,u.next=_,f.lastEffect=u),u}function qb(){return{destroy:void 0,resource:void 0}}function r3(){return ya().memoizedState}function Gb(u,f,y,_){var R=Bi();_=_===void 0?null:_,Vn.flags|=u,R.memoizedState=bh(1|f,qb(),y,_)}function Jm(u,f,y,_){var R=ya();_=_===void 0?null:_;var $=R.memoizedState.inst;Er!==null&&_!==null&&kS(_,Er.memoizedState.deps)?R.memoizedState=bh(f,$,y,_):(Vn.flags|=u,R.memoizedState=bh(1|f,$,y,_))}function a3(u,f){Gb(8390656,8,u,f)}function i3(u,f){Jm(2048,8,u,f)}function s3(u,f){return Jm(4,2,u,f)}function o3(u,f){return Jm(4,4,u,f)}function l3(u,f){if(typeof f=="function"){u=u();var y=f(u);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function c3(u,f,y){y=y!=null?y.concat([u]):null,Jm(4,4,l3.bind(null,f,u),y)}function LS(){}function u3(u,f){var y=ya();f=f===void 0?null:f;var _=y.memoizedState;return f!==null&&kS(f,_[1])?_[0]:(y.memoizedState=[u,f],u)}function d3(u,f){var y=ya();f=f===void 0?null:f;var _=y.memoizedState;if(f!==null&&kS(f,_[1]))return _[0];if(_=u(),jd){Mt(!0);try{u()}finally{Mt(!1)}}return y.memoizedState=[_,f],_}function $S(u,f,y){return y===void 0||(eu&1073741824)!==0?u.memoizedState=f:(u.memoizedState=y,u=pj(),Vn.lanes|=u,ou|=u,y)}function f3(u,f,y,_){return ii(y,f)?y:mh.current!==null?(u=$S(u,y,_),ii(u,f)||(Ma=!0),u):(eu&42)===0?(Ma=!0,u.memoizedState=y):(u=pj(),Vn.lanes|=u,ou|=u,f)}function h3(u,f,y,_,R){var $=ee.p;ee.p=$!==0&&8>$?$:8;var oe=ae.T,_e={};ae.T=_e,US(u,!1,f,y);try{var ze=R(),dt=ae.S;if(dt!==null&&dt(_e,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var At=aW(ze,_);Qm(u,f,At,ls(u))}else Qm(u,f,_,ls(u))}catch(Ot){Qm(u,f,{then:function(){},status:"rejected",reason:Ot},ls())}finally{ee.p=$,ae.T=oe}}function cW(){}function BS(u,f,y,_){if(u.tag!==5)throw Error(r(476));var R=p3(u).queue;h3(u,R,f,X,y===null?cW:function(){return m3(u),y(_)})}function p3(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:X},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:y},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function m3(u){var f=p3(u).next.queue;Qm(u,f,{},ls())}function zS(){return si(yg)}function g3(){return ya().memoizedState}function y3(){return ya().memoizedState}function uW(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var y=ls();u=Jc(y);var _=Qc(f,u,y);_!==null&&(cs(_,f,y),Wm(_,f,y)),f={cache:yS()},u.payload=f;return}f=f.return}}function dW(u,f,y){var _=ls();y={lane:_,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},Wb(u)?v3(f,y):(y=ma(u,f,y,_),y!==null&&(cs(y,u,_),w3(y,f,_)))}function b3(u,f,y){var _=ls();Qm(u,f,y,_)}function Qm(u,f,y,_){var R={lane:_,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(Wb(u))v3(f,R);else{var $=u.alternate;if(u.lanes===0&&($===null||$.lanes===0)&&($=f.lastRenderedReducer,$!==null))try{var oe=f.lastRenderedState,_e=$(oe,y);if(R.hasEagerState=!0,R.eagerState=_e,ii(_e,oe))return oa(u,f,R,0),Fr===null&&_n(),!1}catch{}finally{}if(y=ma(u,f,R,_),y!==null)return cs(y,u,_),w3(y,f,_),!0}return!1}function US(u,f,y,_){if(_={lane:2,revertLane:w2(),action:_,hasEagerState:!1,eagerState:null,next:null},Wb(u)){if(f)throw Error(r(479))}else f=ma(u,y,_,2),f!==null&&cs(f,u,2)}function Wb(u){var f=u.alternate;return u===Vn||f!==null&&f===Vn}function v3(u,f){gh=zb=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function w3(u,f,y){if((y&4194048)!==0){var _=f.lanes;_&=u.pendingLanes,y|=_,f.lanes=y,Ke(u,y)}}var Kb={readContext:si,use:Vb,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useLayoutEffect:la,useInsertionEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useDeferredValue:la,useTransition:la,useSyncExternalStore:la,useId:la,useHostTransitionStatus:la,useFormState:la,useActionState:la,useOptimistic:la,useMemoCache:la,useCacheRefresh:la},x3={readContext:si,use:Vb,useCallback:function(u,f){return Bi().memoizedState=[u,f===void 0?null:f],u},useContext:si,useEffect:a3,useImperativeHandle:function(u,f,y){y=y!=null?y.concat([u]):null,Gb(4194308,4,l3.bind(null,f,u),y)},useLayoutEffect:function(u,f){return Gb(4194308,4,u,f)},useInsertionEffect:function(u,f){Gb(4,2,u,f)},useMemo:function(u,f){var y=Bi();f=f===void 0?null:f;var _=u();if(jd){Mt(!0);try{u()}finally{Mt(!1)}}return y.memoizedState=[_,f],_},useReducer:function(u,f,y){var _=Bi();if(y!==void 0){var R=y(f);if(jd){Mt(!0);try{y(f)}finally{Mt(!1)}}}else R=f;return _.memoizedState=_.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},_.queue=u,u=u.dispatch=dW.bind(null,Vn,u),[_.memoizedState,u]},useRef:function(u){var f=Bi();return u={current:u},f.memoizedState=u},useState:function(u){u=PS(u);var f=u.queue,y=b3.bind(null,Vn,f);return f.dispatch=y,[u.memoizedState,y]},useDebugValue:LS,useDeferredValue:function(u,f){var y=Bi();return $S(y,u,f)},useTransition:function(){var u=PS(!1);return u=h3.bind(null,Vn,u.queue,!0,!1),Bi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,y){var _=Vn,R=Bi();if(ur){if(y===void 0)throw Error(r(407));y=y()}else{if(y=f(),Fr===null)throw Error(r(349));(rr&124)!==0||UI(_,f,y)}R.memoizedState=y;var $={value:y,getSnapshot:f};return R.queue=$,a3(HI.bind(null,_,$,u),[u]),_.flags|=2048,bh(9,qb(),VI.bind(null,_,$,y,f),null),y},useId:function(){var u=Bi(),f=Fr.identifierPrefix;if(ur){var y=Ul,_=zl;y=(_&~(1<<32-Zt(_)-1)).toString(32)+y,f=""+f+"R"+y,y=Ub++,0<y&&(f+="H"+y.toString(32)),f+=""}else y=iW++,f=""+f+"r"+y.toString(32)+"";return u.memoizedState=f},useHostTransitionStatus:zS,useFormState:QI,useActionState:QI,useOptimistic:function(u){var f=Bi();f.memoizedState=f.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=US.bind(null,Vn,!0,y),y.dispatch=f,[u,f]},useMemoCache:DS,useCacheRefresh:function(){return Bi().memoizedState=uW.bind(null,Vn)}},_3={readContext:si,use:Vb,useCallback:u3,useContext:si,useEffect:i3,useImperativeHandle:c3,useInsertionEffect:s3,useLayoutEffect:o3,useMemo:d3,useReducer:Hb,useRef:r3,useState:function(){return Hb(ql)},useDebugValue:LS,useDeferredValue:function(u,f){var y=ya();return f3(y,Er.memoizedState,u,f)},useTransition:function(){var u=Hb(ql)[0],f=ya().memoizedState;return[typeof u=="boolean"?u:Xm(u),f]},useSyncExternalStore:zI,useId:g3,useHostTransitionStatus:zS,useFormState:e3,useActionState:e3,useOptimistic:function(u,f){var y=ya();return WI(y,Er,u,f)},useMemoCache:DS,useCacheRefresh:y3},fW={readContext:si,use:Vb,useCallback:u3,useContext:si,useEffect:i3,useImperativeHandle:c3,useInsertionEffect:s3,useLayoutEffect:o3,useMemo:d3,useReducer:OS,useRef:r3,useState:function(){return OS(ql)},useDebugValue:LS,useDeferredValue:function(u,f){var y=ya();return Er===null?$S(y,u,f):f3(y,Er.memoizedState,u,f)},useTransition:function(){var u=OS(ql)[0],f=ya().memoizedState;return[typeof u=="boolean"?u:Xm(u),f]},useSyncExternalStore:zI,useId:g3,useHostTransitionStatus:zS,useFormState:n3,useActionState:n3,useOptimistic:function(u,f){var y=ya();return Er!==null?WI(y,Er,u,f):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:DS,useCacheRefresh:y3},vh=null,eg=0;function Zb(u){var f=eg;return eg+=1,vh===null&&(vh=[]),DI(vh,u,f)}function tg(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function Yb(u,f){throw f.$$typeof===h?Error(r(525)):(u=Object.prototype.toString.call(f),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function S3(u){var f=u._init;return f(u._payload)}function E3(u){function f(at,Ye){if(u){var ct=at.deletions;ct===null?(at.deletions=[Ye],at.flags|=16):ct.push(Ye)}}function y(at,Ye){if(!u)return null;for(;Ye!==null;)f(at,Ye),Ye=Ye.sibling;return null}function _(at){for(var Ye=new Map;at!==null;)at.key!==null?Ye.set(at.key,at):Ye.set(at.index,at),at=at.sibling;return Ye}function R(at,Ye){return at=Bl(at,Ye),at.index=0,at.sibling=null,at}function $(at,Ye,ct){return at.index=ct,u?(ct=at.alternate,ct!==null?(ct=ct.index,ct<Ye?(at.flags|=67108866,Ye):ct):(at.flags|=67108866,Ye)):(at.flags|=1048576,Ye)}function oe(at){return u&&at.alternate===null&&(at.flags|=67108866),at}function _e(at,Ye,ct,jt){return Ye===null||Ye.tag!==6?(Ye=cS(ct,at.mode,jt),Ye.return=at,Ye):(Ye=R(Ye,ct),Ye.return=at,Ye)}function ze(at,Ye,ct,jt){var sn=ct.type;return sn===v?At(at,Ye,ct.props.children,jt,ct.key):Ye!==null&&(Ye.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===N&&S3(sn)===Ye.type)?(Ye=R(Ye,ct.props),tg(Ye,ct),Ye.return=at,Ye):(Ye=jb(ct.type,ct.key,ct.props,null,at.mode,jt),tg(Ye,ct),Ye.return=at,Ye)}function dt(at,Ye,ct,jt){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==ct.containerInfo||Ye.stateNode.implementation!==ct.implementation?(Ye=uS(ct,at.mode,jt),Ye.return=at,Ye):(Ye=R(Ye,ct.children||[]),Ye.return=at,Ye)}function At(at,Ye,ct,jt,sn){return Ye===null||Ye.tag!==7?(Ye=Ed(ct,at.mode,jt,sn),Ye.return=at,Ye):(Ye=R(Ye,ct),Ye.return=at,Ye)}function Ot(at,Ye,ct){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=cS(""+Ye,at.mode,ct),Ye.return=at,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case p:return ct=jb(Ye.type,Ye.key,Ye.props,null,at.mode,ct),tg(ct,Ye),ct.return=at,ct;case g:return Ye=uS(Ye,at.mode,ct),Ye.return=at,Ye;case N:var jt=Ye._init;return Ye=jt(Ye._payload),Ot(at,Ye,ct)}if(ue(Ye)||M(Ye))return Ye=Ed(Ye,at.mode,ct,null),Ye.return=at,Ye;if(typeof Ye.then=="function")return Ot(at,Zb(Ye),ct);if(Ye.$$typeof===E)return Ot(at,Pb(at,Ye),ct);Yb(at,Ye)}return null}function mt(at,Ye,ct,jt){var sn=Ye!==null?Ye.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return sn!==null?null:_e(at,Ye,""+ct,jt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case p:return ct.key===sn?ze(at,Ye,ct,jt):null;case g:return ct.key===sn?dt(at,Ye,ct,jt):null;case N:return sn=ct._init,ct=sn(ct._payload),mt(at,Ye,ct,jt)}if(ue(ct)||M(ct))return sn!==null?null:At(at,Ye,ct,jt,null);if(typeof ct.then=="function")return mt(at,Ye,Zb(ct),jt);if(ct.$$typeof===E)return mt(at,Ye,Pb(at,ct),jt);Yb(at,ct)}return null}function yt(at,Ye,ct,jt,sn){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return at=at.get(ct)||null,_e(Ye,at,""+jt,sn);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case p:return at=at.get(jt.key===null?ct:jt.key)||null,ze(Ye,at,jt,sn);case g:return at=at.get(jt.key===null?ct:jt.key)||null,dt(Ye,at,jt,sn);case N:var Wn=jt._init;return jt=Wn(jt._payload),yt(at,Ye,ct,jt,sn)}if(ue(jt)||M(jt))return at=at.get(ct)||null,At(Ye,at,jt,sn,null);if(typeof jt.then=="function")return yt(at,Ye,ct,Zb(jt),sn);if(jt.$$typeof===E)return yt(at,Ye,ct,Pb(Ye,jt),sn);Yb(Ye,jt)}return null}function Sn(at,Ye,ct,jt){for(var sn=null,Wn=null,fn=Ye,wn=Ye=0,Pa=null;fn!==null&&wn<ct.length;wn++){fn.index>wn?(Pa=fn,fn=null):Pa=fn.sibling;var cr=mt(at,fn,ct[wn],jt);if(cr===null){fn===null&&(fn=Pa);break}u&&fn&&cr.alternate===null&&f(at,fn),Ye=$(cr,Ye,wn),Wn===null?sn=cr:Wn.sibling=cr,Wn=cr,fn=Pa}if(wn===ct.length)return y(at,fn),ur&&Td(at,wn),sn;if(fn===null){for(;wn<ct.length;wn++)fn=Ot(at,ct[wn],jt),fn!==null&&(Ye=$(fn,Ye,wn),Wn===null?sn=fn:Wn.sibling=fn,Wn=fn);return ur&&Td(at,wn),sn}for(fn=_(fn);wn<ct.length;wn++)Pa=yt(fn,at,wn,ct[wn],jt),Pa!==null&&(u&&Pa.alternate!==null&&fn.delete(Pa.key===null?wn:Pa.key),Ye=$(Pa,Ye,wn),Wn===null?sn=Pa:Wn.sibling=Pa,Wn=Pa);return u&&fn.forEach(function(gu){return f(at,gu)}),ur&&Td(at,wn),sn}function yn(at,Ye,ct,jt){if(ct==null)throw Error(r(151));for(var sn=null,Wn=null,fn=Ye,wn=Ye=0,Pa=null,cr=ct.next();fn!==null&&!cr.done;wn++,cr=ct.next()){fn.index>wn?(Pa=fn,fn=null):Pa=fn.sibling;var gu=mt(at,fn,cr.value,jt);if(gu===null){fn===null&&(fn=Pa);break}u&&fn&&gu.alternate===null&&f(at,fn),Ye=$(gu,Ye,wn),Wn===null?sn=gu:Wn.sibling=gu,Wn=gu,fn=Pa}if(cr.done)return y(at,fn),ur&&Td(at,wn),sn;if(fn===null){for(;!cr.done;wn++,cr=ct.next())cr=Ot(at,cr.value,jt),cr!==null&&(Ye=$(cr,Ye,wn),Wn===null?sn=cr:Wn.sibling=cr,Wn=cr);return ur&&Td(at,wn),sn}for(fn=_(fn);!cr.done;wn++,cr=ct.next())cr=yt(fn,at,wn,cr.value,jt),cr!==null&&(u&&cr.alternate!==null&&fn.delete(cr.key===null?wn:cr.key),Ye=$(cr,Ye,wn),Wn===null?sn=cr:Wn.sibling=cr,Wn=cr);return u&&fn.forEach(function(hK){return f(at,hK)}),ur&&Td(at,wn),sn}function Tr(at,Ye,ct,jt){if(typeof ct=="object"&&ct!==null&&ct.type===v&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case p:e:{for(var sn=ct.key;Ye!==null;){if(Ye.key===sn){if(sn=ct.type,sn===v){if(Ye.tag===7){y(at,Ye.sibling),jt=R(Ye,ct.props.children),jt.return=at,at=jt;break e}}else if(Ye.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===N&&S3(sn)===Ye.type){y(at,Ye.sibling),jt=R(Ye,ct.props),tg(jt,ct),jt.return=at,at=jt;break e}y(at,Ye);break}else f(at,Ye);Ye=Ye.sibling}ct.type===v?(jt=Ed(ct.props.children,at.mode,jt,ct.key),jt.return=at,at=jt):(jt=jb(ct.type,ct.key,ct.props,null,at.mode,jt),tg(jt,ct),jt.return=at,at=jt)}return oe(at);case g:e:{for(sn=ct.key;Ye!==null;){if(Ye.key===sn)if(Ye.tag===4&&Ye.stateNode.containerInfo===ct.containerInfo&&Ye.stateNode.implementation===ct.implementation){y(at,Ye.sibling),jt=R(Ye,ct.children||[]),jt.return=at,at=jt;break e}else{y(at,Ye);break}else f(at,Ye);Ye=Ye.sibling}jt=uS(ct,at.mode,jt),jt.return=at,at=jt}return oe(at);case N:return sn=ct._init,ct=sn(ct._payload),Tr(at,Ye,ct,jt)}if(ue(ct))return Sn(at,Ye,ct,jt);if(M(ct)){if(sn=M(ct),typeof sn!="function")throw Error(r(150));return ct=sn.call(ct),yn(at,Ye,ct,jt)}if(typeof ct.then=="function")return Tr(at,Ye,Zb(ct),jt);if(ct.$$typeof===E)return Tr(at,Ye,Pb(at,ct),jt);Yb(at,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ye!==null&&Ye.tag===6?(y(at,Ye.sibling),jt=R(Ye,ct),jt.return=at,at=jt):(y(at,Ye),jt=cS(ct,at.mode,jt),jt.return=at,at=jt),oe(at)):y(at,Ye)}return function(at,Ye,ct,jt){try{eg=0;var sn=Tr(at,Ye,ct,jt);return vh=null,sn}catch(fn){if(fn===qm||fn===Lb)throw fn;var Wn=as(29,fn,null,at.mode);return Wn.lanes=jt,Wn.return=at,Wn}finally{}}}var wh=E3(!0),C3=E3(!1),As=J(null),Vo=null;function tu(u){var f=u.alternate;ne(Sa,Sa.current&1),ne(As,u),Vo===null&&(f===null||mh.current!==null||f.memoizedState!==null)&&(Vo=u)}function T3(u){if(u.tag===22){if(ne(Sa,Sa.current),ne(As,u),Vo===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(Vo=u)}}else nu()}function nu(){ne(Sa,Sa.current),ne(As,As.current)}function Gl(u){Q(As),Vo===u&&(Vo=null),Q(Sa)}var Sa=J(0);function Xb(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||j2(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function VS(u,f,y,_){f=u.memoizedState,y=y(_,f),y=y==null?f:d({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var HS={enqueueSetState:function(u,f,y){u=u._reactInternals;var _=ls(),R=Jc(_);R.payload=f,y!=null&&(R.callback=y),f=Qc(u,R,_),f!==null&&(cs(f,u,_),Wm(f,u,_))},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var _=ls(),R=Jc(_);R.tag=1,R.payload=f,y!=null&&(R.callback=y),f=Qc(u,R,_),f!==null&&(cs(f,u,_),Wm(f,u,_))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=ls(),_=Jc(y);_.tag=2,f!=null&&(_.callback=f),f=Qc(u,_,y),f!==null&&(cs(f,u,y),Wm(f,u,y))}};function k3(u,f,y,_,R,$,oe){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(_,$,oe):f.prototype&&f.prototype.isPureReactComponent?!A(y,_)||!A(R,$):!0}function A3(u,f,y,_){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,_),f.state!==u&&HS.enqueueReplaceState(f,f.state,null)}function Dd(u,f){var y=f;if("ref"in f){y={};for(var _ in f)_!=="ref"&&(y[_]=f[_])}if(u=u.defaultProps){y===f&&(y=d({},y));for(var R in u)y[R]===void 0&&(y[R]=u[R])}return y}var Jb=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof aa=="object"&&typeof aa.emit=="function"){aa.emit("uncaughtException",u);return}console.error(u)};function N3(u){Jb(u)}function R3(u){console.error(u)}function I3(u){Jb(u)}function Qb(u,f){try{var y=u.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(_){setTimeout(function(){throw _})}}function j3(u,f,y){try{var _=u.onCaughtError;_(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function qS(u,f,y){return y=Jc(y),y.tag=3,y.payload={element:null},y.callback=function(){Qb(u,f)},y}function D3(u){return u=Jc(u),u.tag=3,u}function M3(u,f,y,_){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var $=_.value;u.payload=function(){return R($)},u.callback=function(){j3(f,y,_)}}var oe=y.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(u.callback=function(){j3(f,y,_),typeof R!="function"&&(lu===null?lu=new Set([this]):lu.add(this));var _e=_.stack;this.componentDidCatch(_.value,{componentStack:_e!==null?_e:""})})}function hW(u,f,y,_,R){if(y.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(f=y.alternate,f!==null&&Um(f,y,R,!0),y=As.current,y!==null){switch(y.tag){case 13:return Vo===null?m2():y.alternate===null&&na===0&&(na=3),y.flags&=-257,y.flags|=65536,y.lanes=R,_===wS?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([_]):f.add(_),y2(u,_,R)),!1;case 22:return y.flags|=65536,_===wS?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([_])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([_]):y.add(_)),y2(u,_,R)),!1}throw Error(r(435,y.tag))}return y2(u,_,R),m2(),!1}if(ur)return f=As.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,_!==hS&&(u=Error(r(422),{cause:_}),zm(pn(u,y)))):(_!==hS&&(f=Error(r(423),{cause:_}),zm(pn(f,y))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,_=pn(_,y),R=qS(u.stateNode,_,R),SS(u,R),na!==4&&(na=2)),!1;var $=Error(r(520),{cause:_});if($=pn($,y),lg===null?lg=[$]:lg.push($),na!==4&&(na=2),f===null)return!0;_=pn(_,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,u=R&-R,y.lanes|=u,u=qS(y.stateNode,_,u),SS(y,u),!1;case 1:if(f=y.type,$=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(lu===null||!lu.has($))))return y.flags|=65536,R&=-R,y.lanes|=R,R=D3(R),M3(R,u,y,_),SS(y,R),!1}y=y.return}while(y!==null);return!1}var O3=Error(r(461)),Ma=!1;function Ya(u,f,y,_){f.child=u===null?C3(f,null,y,_):wh(f,u.child,y,_)}function P3(u,f,y,_,R){y=y.render;var $=f.ref;if("ref"in _){var oe={};for(var _e in _)_e!=="ref"&&(oe[_e]=_[_e])}else oe=_;return Rd(f),_=AS(u,f,y,oe,$,R),_e=NS(),u!==null&&!Ma?(RS(u,f,R),Wl(u,f,R)):(ur&&_e&&dS(f),f.flags|=1,Ya(u,f,_,R),f.child)}function F3(u,f,y,_,R){if(u===null){var $=y.type;return typeof $=="function"&&!lS($)&&$.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=$,L3(u,f,$,_,R)):(u=jb(y.type,null,_,f,f.mode,R),u.ref=f.ref,u.return=f,f.child=u)}if($=u.child,!QS(u,R)){var oe=$.memoizedProps;if(y=y.compare,y=y!==null?y:A,y(oe,_)&&u.ref===f.ref)return Wl(u,f,R)}return f.flags|=1,u=Bl($,_),u.ref=f.ref,u.return=f,f.child=u}function L3(u,f,y,_,R){if(u!==null){var $=u.memoizedProps;if(A($,_)&&u.ref===f.ref)if(Ma=!1,f.pendingProps=_=$,QS(u,R))(u.flags&131072)!==0&&(Ma=!0);else return f.lanes=u.lanes,Wl(u,f,R)}return GS(u,f,y,_,R)}function $3(u,f,y){var _=f.pendingProps,R=_.children,$=u!==null?u.memoizedState:null;if(_.mode==="hidden"){if((f.flags&128)!==0){if(_=$!==null?$.baseLanes|y:y,u!==null){for(R=f.child=u.child,$=0;R!==null;)$=$|R.lanes|R.childLanes,R=R.sibling;f.childLanes=$&~_}else f.childLanes=0,f.child=null;return B3(u,f,_,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&Fb(f,$!==null?$.cachePool:null),$!==null?LI(f,$):CS(),T3(f);else return f.lanes=f.childLanes=536870912,B3(u,f,$!==null?$.baseLanes|y:y,y)}else $!==null?(Fb(f,$.cachePool),LI(f,$),nu(),f.memoizedState=null):(u!==null&&Fb(f,null),CS(),nu());return Ya(u,f,R,y),f.child}function B3(u,f,y,_){var R=vS();return R=R===null?null:{parent:_a._currentValue,pool:R},f.memoizedState={baseLanes:y,cachePool:R},u!==null&&Fb(f,null),CS(),T3(f),u!==null&&Um(u,f,_,!0),null}function ev(u,f){var y=f.ref;if(y===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(u===null||u.ref!==y)&&(f.flags|=4194816)}}function GS(u,f,y,_,R){return Rd(f),y=AS(u,f,y,_,void 0,R),_=NS(),u!==null&&!Ma?(RS(u,f,R),Wl(u,f,R)):(ur&&_&&dS(f),f.flags|=1,Ya(u,f,y,R),f.child)}function z3(u,f,y,_,R,$){return Rd(f),f.updateQueue=null,y=BI(f,_,y,R),$I(u),_=NS(),u!==null&&!Ma?(RS(u,f,$),Wl(u,f,$)):(ur&&_&&dS(f),f.flags|=1,Ya(u,f,y,$),f.child)}function U3(u,f,y,_,R){if(Rd(f),f.stateNode===null){var $=zo,oe=y.contextType;typeof oe=="object"&&oe!==null&&($=si(oe)),$=new y(_,$),f.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=HS,f.stateNode=$,$._reactInternals=f,$=f.stateNode,$.props=_,$.state=f.memoizedState,$.refs={},xS(f),oe=y.contextType,$.context=typeof oe=="object"&&oe!==null?si(oe):zo,$.state=f.memoizedState,oe=y.getDerivedStateFromProps,typeof oe=="function"&&(VS(f,y,oe,_),$.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(oe=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),oe!==$.state&&HS.enqueueReplaceState($,$.state,null),Zm(f,_,$,R),Km(),$.state=f.memoizedState),typeof $.componentDidMount=="function"&&(f.flags|=4194308),_=!0}else if(u===null){$=f.stateNode;var _e=f.memoizedProps,ze=Dd(y,_e);$.props=ze;var dt=$.context,At=y.contextType;oe=zo,typeof At=="object"&&At!==null&&(oe=si(At));var Ot=y.getDerivedStateFromProps;At=typeof Ot=="function"||typeof $.getSnapshotBeforeUpdate=="function",_e=f.pendingProps!==_e,At||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(_e||dt!==oe)&&A3(f,$,_,oe),Xc=!1;var mt=f.memoizedState;$.state=mt,Zm(f,_,$,R),Km(),dt=f.memoizedState,_e||mt!==dt||Xc?(typeof Ot=="function"&&(VS(f,y,Ot,_),dt=f.memoizedState),(ze=Xc||k3(f,y,ze,_,mt,dt,oe))?(At||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(f.flags|=4194308)):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=dt),$.props=_,$.state=dt,$.context=oe,_=ze):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{$=f.stateNode,_S(u,f),oe=f.memoizedProps,At=Dd(y,oe),$.props=At,Ot=f.pendingProps,mt=$.context,dt=y.contextType,ze=zo,typeof dt=="object"&&dt!==null&&(ze=si(dt)),_e=y.getDerivedStateFromProps,(dt=typeof _e=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(oe!==Ot||mt!==ze)&&A3(f,$,_,ze),Xc=!1,mt=f.memoizedState,$.state=mt,Zm(f,_,$,R),Km();var yt=f.memoizedState;oe!==Ot||mt!==yt||Xc||u!==null&&u.dependencies!==null&&Ob(u.dependencies)?(typeof _e=="function"&&(VS(f,y,_e,_),yt=f.memoizedState),(At=Xc||k3(f,y,At,_,mt,yt,ze)||u!==null&&u.dependencies!==null&&Ob(u.dependencies))?(dt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(_,yt,ze),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(_,yt,ze)),typeof $.componentDidUpdate=="function"&&(f.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof $.componentDidUpdate!="function"||oe===u.memoizedProps&&mt===u.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||oe===u.memoizedProps&&mt===u.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=yt),$.props=_,$.state=yt,$.context=ze,_=At):(typeof $.componentDidUpdate!="function"||oe===u.memoizedProps&&mt===u.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||oe===u.memoizedProps&&mt===u.memoizedState||(f.flags|=1024),_=!1)}return $=_,ev(u,f),_=(f.flags&128)!==0,$||_?($=f.stateNode,y=_&&typeof y.getDerivedStateFromError!="function"?null:$.render(),f.flags|=1,u!==null&&_?(f.child=wh(f,u.child,null,R),f.child=wh(f,null,y,R)):Ya(u,f,y,R),f.memoizedState=$.state,u=f.child):u=Wl(u,f,R),u}function V3(u,f,y,_){return Bm(),f.flags|=256,Ya(u,f,y,_),f.child}var WS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function KS(u){return{baseLanes:u,cachePool:RI()}}function ZS(u,f,y){return u=u!==null?u.childLanes&~y:0,f&&(u|=Ns),u}function H3(u,f,y){var _=f.pendingProps,R=!1,$=(f.flags&128)!==0,oe;if((oe=$)||(oe=u!==null&&u.memoizedState===null?!1:(Sa.current&2)!==0),oe&&(R=!0,f.flags&=-129),oe=(f.flags&32)!==0,f.flags&=-33,u===null){if(ur){if(R?tu(f):nu(),ur){var _e=ta,ze;if(ze=_e){e:{for(ze=_e,_e=Uo;ze.nodeType!==8;){if(!_e){_e=null;break e}if(ze=to(ze.nextSibling),ze===null){_e=null;break e}}_e=ze}_e!==null?(f.memoizedState={dehydrated:_e,treeContext:Cd!==null?{id:zl,overflow:Ul}:null,retryLane:536870912,hydrationErrors:null},ze=as(18,null,null,0),ze.stateNode=_e,ze.return=f,f.child=ze,Ci=f,ta=null,ze=!0):ze=!1}ze||Ad(f)}if(_e=f.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return j2(_e)?f.lanes=32:f.lanes=536870912,null;Gl(f)}return _e=_.children,_=_.fallback,R?(nu(),R=f.mode,_e=tv({mode:"hidden",children:_e},R),_=Ed(_,R,y,null),_e.return=f,_.return=f,_e.sibling=_,f.child=_e,R=f.child,R.memoizedState=KS(y),R.childLanes=ZS(u,oe,y),f.memoizedState=WS,_):(tu(f),YS(f,_e))}if(ze=u.memoizedState,ze!==null&&(_e=ze.dehydrated,_e!==null)){if($)f.flags&256?(tu(f),f.flags&=-257,f=XS(u,f,y)):f.memoizedState!==null?(nu(),f.child=u.child,f.flags|=128,f=null):(nu(),R=_.fallback,_e=f.mode,_=tv({mode:"visible",children:_.children},_e),R=Ed(R,_e,y,null),R.flags|=2,_.return=f,R.return=f,_.sibling=R,f.child=_,wh(f,u.child,null,y),_=f.child,_.memoizedState=KS(y),_.childLanes=ZS(u,oe,y),f.memoizedState=WS,f=R);else if(tu(f),j2(_e)){if(oe=_e.nextSibling&&_e.nextSibling.dataset,oe)var dt=oe.dgst;oe=dt,_=Error(r(419)),_.stack="",_.digest=oe,zm({value:_,source:null,stack:null}),f=XS(u,f,y)}else if(Ma||Um(u,f,y,!1),oe=(y&u.childLanes)!==0,Ma||oe){if(oe=Fr,oe!==null&&(_=y&-y,_=(_&42)!==0?1:Dt(_),_=(_&(oe.suspendedLanes|y))!==0?0:_,_!==0&&_!==ze.retryLane))throw ze.retryLane=_,Qs(u,_),cs(oe,u,_),O3;_e.data==="$?"||m2(),f=XS(u,f,y)}else _e.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=ze.treeContext,ta=to(_e.nextSibling),Ci=f,ur=!0,kd=null,Uo=!1,u!==null&&(Ts[ks++]=zl,Ts[ks++]=Ul,Ts[ks++]=Cd,zl=u.id,Ul=u.overflow,Cd=f),f=YS(f,_.children),f.flags|=4096);return f}return R?(nu(),R=_.fallback,_e=f.mode,ze=u.child,dt=ze.sibling,_=Bl(ze,{mode:"hidden",children:_.children}),_.subtreeFlags=ze.subtreeFlags&65011712,dt!==null?R=Bl(dt,R):(R=Ed(R,_e,y,null),R.flags|=2),R.return=f,_.return=f,_.sibling=R,f.child=_,_=R,R=f.child,_e=u.child.memoizedState,_e===null?_e=KS(y):(ze=_e.cachePool,ze!==null?(dt=_a._currentValue,ze=ze.parent!==dt?{parent:dt,pool:dt}:ze):ze=RI(),_e={baseLanes:_e.baseLanes|y,cachePool:ze}),R.memoizedState=_e,R.childLanes=ZS(u,oe,y),f.memoizedState=WS,_):(tu(f),y=u.child,u=y.sibling,y=Bl(y,{mode:"visible",children:_.children}),y.return=f,y.sibling=null,u!==null&&(oe=f.deletions,oe===null?(f.deletions=[u],f.flags|=16):oe.push(u)),f.child=y,f.memoizedState=null,y)}function YS(u,f){return f=tv({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function tv(u,f){return u=as(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function XS(u,f,y){return wh(f,u.child,null,y),u=YS(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function q3(u,f,y){u.lanes|=f;var _=u.alternate;_!==null&&(_.lanes|=f),mS(u.return,f,y)}function JS(u,f,y,_,R){var $=u.memoizedState;$===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:y,tailMode:R}:($.isBackwards=f,$.rendering=null,$.renderingStartTime=0,$.last=_,$.tail=y,$.tailMode=R)}function G3(u,f,y){var _=f.pendingProps,R=_.revealOrder,$=_.tail;if(Ya(u,f,_.children,y),_=Sa.current,(_&2)!==0)_=_&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&q3(u,y,f);else if(u.tag===19)q3(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}_&=1}switch(ne(Sa,_),R){case"forwards":for(y=f.child,R=null;y!==null;)u=y.alternate,u!==null&&Xb(u)===null&&(R=y),y=y.sibling;y=R,y===null?(R=f.child,f.child=null):(R=y.sibling,y.sibling=null),JS(f,!1,R,y,$);break;case"backwards":for(y=null,R=f.child,f.child=null;R!==null;){if(u=R.alternate,u!==null&&Xb(u)===null){f.child=R;break}u=R.sibling,R.sibling=y,y=R,R=u}JS(f,!0,y,null,$);break;case"together":JS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Wl(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),ou|=f.lanes,(y&f.childLanes)===0)if(u!==null){if(Um(u,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(r(153));if(f.child!==null){for(u=f.child,y=Bl(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=Bl(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function QS(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&Ob(u)))}function pW(u,f,y){switch(f.tag){case 3:Ae(f,f.stateNode.containerInfo),Yc(f,_a,u.memoizedState.cache),Bm();break;case 27:case 5:Pe(f);break;case 4:Ae(f,f.stateNode.containerInfo);break;case 10:Yc(f,f.type,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(tu(f),f.flags|=128,null):(y&f.child.childLanes)!==0?H3(u,f,y):(tu(f),u=Wl(u,f,y),u!==null?u.sibling:null);tu(f);break;case 19:var R=(u.flags&128)!==0;if(_=(y&f.childLanes)!==0,_||(Um(u,f,y,!1),_=(y&f.childLanes)!==0),R){if(_)return G3(u,f,y);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),ne(Sa,Sa.current),_)break;return null;case 22:case 23:return f.lanes=0,$3(u,f,y);case 24:Yc(f,_a,u.memoizedState.cache)}return Wl(u,f,y)}function W3(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps)Ma=!0;else{if(!QS(u,y)&&(f.flags&128)===0)return Ma=!1,pW(u,f,y);Ma=(u.flags&131072)!==0}else Ma=!1,ur&&(f.flags&1048576)!==0&&SI(f,Mb,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var _=f.elementType,R=_._init;if(_=R(_._payload),f.type=_,typeof _=="function")lS(_)?(u=Dd(_,u),f.tag=1,f=U3(null,f,_,u,y)):(f.tag=0,f=GS(null,f,_,u,y));else{if(_!=null){if(R=_.$$typeof,R===C){f.tag=11,f=P3(null,f,_,u,y);break e}else if(R===I){f.tag=14,f=F3(null,f,_,u,y);break e}}throw f=q(_)||_,Error(r(306,f,""))}}return f;case 0:return GS(u,f,f.type,f.pendingProps,y);case 1:return _=f.type,R=Dd(_,f.pendingProps),U3(u,f,_,R,y);case 3:e:{if(Ae(f,f.stateNode.containerInfo),u===null)throw Error(r(387));_=f.pendingProps;var $=f.memoizedState;R=$.element,_S(u,f),Zm(f,_,null,y);var oe=f.memoizedState;if(_=oe.cache,Yc(f,_a,_),_!==$.cache&&gS(f,[_a],y,!0),Km(),_=oe.element,$.isDehydrated)if($={element:_,isDehydrated:!1,cache:oe.cache},f.updateQueue.baseState=$,f.memoizedState=$,f.flags&256){f=V3(u,f,_,y);break e}else if(_!==R){R=pn(Error(r(424)),f),zm(R),f=V3(u,f,_,y);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(ta=to(u.firstChild),Ci=f,ur=!0,kd=null,Uo=!0,y=C3(f,null,_,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Bm(),_===R){f=Wl(u,f,y);break e}Ya(u,f,_,y)}f=f.child}return f;case 26:return ev(u,f),u===null?(y=Xj(f.type,null,f.pendingProps,null))?f.memoizedState=y:ur||(y=f.type,u=f.pendingProps,_=mv(Ie.current).createElement(y),_[me]=f,_[Re]=u,Ja(_,y,u),$n(_),f.stateNode=_):f.memoizedState=Xj(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Pe(f),u===null&&ur&&(_=f.stateNode=Kj(f.type,f.pendingProps,Ie.current),Ci=f,Uo=!0,R=ta,du(f.type)?(D2=R,ta=to(_.firstChild)):ta=R),Ya(u,f,f.pendingProps.children,y),ev(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&ur&&((R=_=ta)&&(_=UW(_,f.type,f.pendingProps,Uo),_!==null?(f.stateNode=_,Ci=f,ta=to(_.firstChild),Uo=!1,R=!0):R=!1),R||Ad(f)),Pe(f),R=f.type,$=f.pendingProps,oe=u!==null?u.memoizedProps:null,_=$.children,N2(R,$)?_=null:oe!==null&&N2(R,oe)&&(f.flags|=32),f.memoizedState!==null&&(R=AS(u,f,sW,null,null,y),yg._currentValue=R),ev(u,f),Ya(u,f,_,y),f.child;case 6:return u===null&&ur&&((u=y=ta)&&(y=VW(y,f.pendingProps,Uo),y!==null?(f.stateNode=y,Ci=f,ta=null,u=!0):u=!1),u||Ad(f)),null;case 13:return H3(u,f,y);case 4:return Ae(f,f.stateNode.containerInfo),_=f.pendingProps,u===null?f.child=wh(f,null,_,y):Ya(u,f,_,y),f.child;case 11:return P3(u,f,f.type,f.pendingProps,y);case 7:return Ya(u,f,f.pendingProps,y),f.child;case 8:return Ya(u,f,f.pendingProps.children,y),f.child;case 12:return Ya(u,f,f.pendingProps.children,y),f.child;case 10:return _=f.pendingProps,Yc(f,f.type,_.value),Ya(u,f,_.children,y),f.child;case 9:return R=f.type._context,_=f.pendingProps.children,Rd(f),R=si(R),_=_(R),f.flags|=1,Ya(u,f,_,y),f.child;case 14:return F3(u,f,f.type,f.pendingProps,y);case 15:return L3(u,f,f.type,f.pendingProps,y);case 19:return G3(u,f,y);case 31:return _=f.pendingProps,y=f.mode,_={mode:_.mode,children:_.children},u===null?(y=tv(_,y),y.ref=f.ref,f.child=y,y.return=f,f=y):(y=Bl(u.child,_),y.ref=f.ref,f.child=y,y.return=f,f=y),f;case 22:return $3(u,f,y);case 24:return Rd(f),_=si(_a),u===null?(R=vS(),R===null&&(R=Fr,$=yS(),R.pooledCache=$,$.refCount++,$!==null&&(R.pooledCacheLanes|=y),R=$),f.memoizedState={parent:_,cache:R},xS(f),Yc(f,_a,R)):((u.lanes&y)!==0&&(_S(u,f),Zm(f,null,null,y),Km()),R=u.memoizedState,$=f.memoizedState,R.parent!==_?(R={parent:_,cache:_},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),Yc(f,_a,_)):(_=$.cache,Yc(f,_a,_),_!==R.cache&&gS(f,[_a],y,!0))),Ya(u,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Kl(u){u.flags|=4}function K3(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!n4(f)){if(f=As.current,f!==null&&((rr&4194048)===rr?Vo!==null:(rr&62914560)!==rr&&(rr&536870912)===0||f!==Vo))throw Gm=wS,II;u.flags|=8192}}function nv(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?F():536870912,u.lanes|=f,Eh|=f)}function ng(u,f){if(!ur)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var _=null;y!==null;)y.alternate!==null&&(_=y),y=y.sibling;_===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:_.sibling=null}}function Zr(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,_=0;if(f)for(var R=u.child;R!==null;)y|=R.lanes|R.childLanes,_|=R.subtreeFlags&65011712,_|=R.flags&65011712,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)y|=R.lanes|R.childLanes,_|=R.subtreeFlags,_|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=_,u.childLanes=y,f}function mW(u,f,y){var _=f.pendingProps;switch(fS(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(f),null;case 1:return Zr(f),null;case 3:return y=f.stateNode,_=null,u!==null&&(_=u.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),Hl(_a),Ee(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&($m(f)?Kl(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,TI())),Zr(f),null;case 26:return y=f.memoizedState,u===null?(Kl(f),y!==null?(Zr(f),K3(f,y)):(Zr(f),f.flags&=-16777217)):y?y!==u.memoizedState?(Kl(f),Zr(f),K3(f,y)):(Zr(f),f.flags&=-16777217):(u.memoizedProps!==_&&Kl(f),Zr(f),f.flags&=-16777217),null;case 27:Qe(f),y=Ie.current;var R=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==_&&Kl(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return Zr(f),null}u=he.current,$m(f)?EI(f):(u=Kj(R,_,y),f.stateNode=u,Kl(f))}return Zr(f),null;case 5:if(Qe(f),y=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==_&&Kl(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return Zr(f),null}if(u=he.current,$m(f))EI(f);else{switch(R=mv(Ie.current),u){case 1:u=R.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:u=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":u=R.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":u=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":u=R.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof _.is=="string"?R.createElement("select",{is:_.is}):R.createElement("select"),_.multiple?u.multiple=!0:_.size&&(u.size=_.size);break;default:u=typeof _.is=="string"?R.createElement(y,{is:_.is}):R.createElement(y)}}u[me]=f,u[Re]=_;e:for(R=f.child;R!==null;){if(R.tag===5||R.tag===6)u.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===f)break e;for(;R.sibling===null;){if(R.return===null||R.return===f)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}f.stateNode=u;e:switch(Ja(u,y,_),y){case"button":case"input":case"select":case"textarea":u=!!_.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Kl(f)}}return Zr(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==_&&Kl(f);else{if(typeof _!="string"&&f.stateNode===null)throw Error(r(166));if(u=Ie.current,$m(f)){if(u=f.stateNode,y=f.memoizedProps,_=null,R=Ci,R!==null)switch(R.tag){case 27:case 5:_=R.memoizedProps}u[me]=f,u=!!(u.nodeValue===y||_!==null&&_.suppressHydrationWarning===!0||zj(u.nodeValue,y)),u||Ad(f)}else u=mv(u).createTextNode(_),u[me]=f,f.stateNode=u}return Zr(f),null;case 13:if(_=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=$m(f),_!==null&&_.dehydrated!==null){if(u===null){if(!R)throw Error(r(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[me]=f}else Bm(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Zr(f),R=!1}else R=TI(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=R),R=!0;if(!R)return f.flags&256?(Gl(f),f):(Gl(f),null)}if(Gl(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=_!==null,u=u!==null&&u.memoizedState!==null,y){_=f.child,R=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(R=_.alternate.memoizedState.cachePool.pool);var $=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&($=_.memoizedState.cachePool.pool),$!==R&&(_.flags|=2048)}return y!==u&&y&&(f.child.flags|=8192),nv(f,f.updateQueue),Zr(f),null;case 4:return Ee(),u===null&&E2(f.stateNode.containerInfo),Zr(f),null;case 10:return Hl(f.type),Zr(f),null;case 19:if(Q(Sa),R=f.memoizedState,R===null)return Zr(f),null;if(_=(f.flags&128)!==0,$=R.rendering,$===null)if(_)ng(R,!1);else{if(na!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if($=Xb(u),$!==null){for(f.flags|=128,ng(R,!1),u=$.updateQueue,f.updateQueue=u,nv(f,u),f.subtreeFlags=0,u=y,y=f.child;y!==null;)_I(y,u),y=y.sibling;return ne(Sa,Sa.current&1|2),f.child}u=u.sibling}R.tail!==null&&fe()>iv&&(f.flags|=128,_=!0,ng(R,!1),f.lanes=4194304)}else{if(!_)if(u=Xb($),u!==null){if(f.flags|=128,_=!0,u=u.updateQueue,f.updateQueue=u,nv(f,u),ng(R,!0),R.tail===null&&R.tailMode==="hidden"&&!$.alternate&&!ur)return Zr(f),null}else 2*fe()-R.renderingStartTime>iv&&y!==536870912&&(f.flags|=128,_=!0,ng(R,!1),f.lanes=4194304);R.isBackwards?($.sibling=f.child,f.child=$):(u=R.last,u!==null?u.sibling=$:f.child=$,R.last=$)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=fe(),f.sibling=null,u=Sa.current,ne(Sa,_?u&1|2:u&1),f):(Zr(f),null);case 22:case 23:return Gl(f),TS(),_=f.memoizedState!==null,u!==null?u.memoizedState!==null!==_&&(f.flags|=8192):_&&(f.flags|=8192),_?(y&536870912)!==0&&(f.flags&128)===0&&(Zr(f),f.subtreeFlags&6&&(f.flags|=8192)):Zr(f),y=f.updateQueue,y!==null&&nv(f,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==y&&(f.flags|=2048),u!==null&&Q(Id),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),Hl(_a),Zr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function gW(u,f){switch(fS(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Hl(_a),Ee(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return Qe(f),null;case 13:if(Gl(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Bm()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return Q(Sa),null;case 4:return Ee(),null;case 10:return Hl(f.type),null;case 22:case 23:return Gl(f),TS(),u!==null&&Q(Id),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return Hl(_a),null;case 25:return null;default:return null}}function Z3(u,f){switch(fS(f),f.tag){case 3:Hl(_a),Ee();break;case 26:case 27:case 5:Qe(f);break;case 4:Ee();break;case 13:Gl(f);break;case 19:Q(Sa);break;case 10:Hl(f.type);break;case 22:case 23:Gl(f),TS(),u!==null&&Q(Id);break;case 24:Hl(_a)}}function rg(u,f){try{var y=f.updateQueue,_=y!==null?y.lastEffect:null;if(_!==null){var R=_.next;y=R;do{if((y.tag&u)===u){_=void 0;var $=y.create,oe=y.inst;_=$(),oe.destroy=_}y=y.next}while(y!==R)}}catch(_e){Dr(f,f.return,_e)}}function ru(u,f,y){try{var _=f.updateQueue,R=_!==null?_.lastEffect:null;if(R!==null){var $=R.next;_=$;do{if((_.tag&u)===u){var oe=_.inst,_e=oe.destroy;if(_e!==void 0){oe.destroy=void 0,R=f;var ze=y,dt=_e;try{dt()}catch(At){Dr(R,ze,At)}}}_=_.next}while(_!==$)}}catch(At){Dr(f,f.return,At)}}function Y3(u){var f=u.updateQueue;if(f!==null){var y=u.stateNode;try{FI(f,y)}catch(_){Dr(u,u.return,_)}}}function X3(u,f,y){y.props=Dd(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(_){Dr(u,f,_)}}function ag(u,f){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var _=u.stateNode;break;case 30:_=u.stateNode;break;default:_=u.stateNode}typeof y=="function"?u.refCleanup=y(_):y.current=_}}catch(R){Dr(u,f,R)}}function Ho(u,f){var y=u.ref,_=u.refCleanup;if(y!==null)if(typeof _=="function")try{_()}catch(R){Dr(u,f,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){Dr(u,f,R)}else y.current=null}function J3(u){var f=u.type,y=u.memoizedProps,_=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&_.focus();break e;case"img":y.src?_.src=y.src:y.srcSet&&(_.srcset=y.srcSet)}}catch(R){Dr(u,u.return,R)}}function e2(u,f,y){try{var _=u.stateNode;FW(_,u.type,y,f),_[Re]=f}catch(R){Dr(u,u.return,R)}}function Q3(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&du(u.type)||u.tag===4}function t2(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Q3(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&du(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function n2(u,f,y){var _=u.tag;if(_===5||_===6)u=u.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(u),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=pv));else if(_!==4&&(_===27&&du(u.type)&&(y=u.stateNode,f=null),u=u.child,u!==null))for(n2(u,f,y),u=u.sibling;u!==null;)n2(u,f,y),u=u.sibling}function rv(u,f,y){var _=u.tag;if(_===5||_===6)u=u.stateNode,f?y.insertBefore(u,f):y.appendChild(u);else if(_!==4&&(_===27&&du(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(rv(u,f,y),u=u.sibling;u!==null;)rv(u,f,y),u=u.sibling}function ej(u){var f=u.stateNode,y=u.memoizedProps;try{for(var _=u.type,R=f.attributes;R.length;)f.removeAttributeNode(R[0]);Ja(f,_,y),f[me]=u,f[Re]=y}catch($){Dr(u,u.return,$)}}var Zl=!1,ca=!1,r2=!1,tj=typeof WeakSet=="function"?WeakSet:Set,Oa=null;function yW(u,f){if(u=u.containerInfo,k2=xv,u=ce(u),we(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var _=y.getSelection&&y.getSelection();if(_&&_.rangeCount!==0){y=_.anchorNode;var R=_.anchorOffset,$=_.focusNode;_=_.focusOffset;try{y.nodeType,$.nodeType}catch{y=null;break e}var oe=0,_e=-1,ze=-1,dt=0,At=0,Ot=u,mt=null;t:for(;;){for(var yt;Ot!==y||R!==0&&Ot.nodeType!==3||(_e=oe+R),Ot!==$||_!==0&&Ot.nodeType!==3||(ze=oe+_),Ot.nodeType===3&&(oe+=Ot.nodeValue.length),(yt=Ot.firstChild)!==null;)mt=Ot,Ot=yt;for(;;){if(Ot===u)break t;if(mt===y&&++dt===R&&(_e=oe),mt===$&&++At===_&&(ze=oe),(yt=Ot.nextSibling)!==null)break;Ot=mt,mt=Ot.parentNode}Ot=yt}y=_e===-1||ze===-1?null:{start:_e,end:ze}}else y=null}y=y||{start:0,end:0}}else y=null;for(A2={focusedElem:u,selectionRange:y},xv=!1,Oa=f;Oa!==null;)if(f=Oa,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Oa=u;else for(;Oa!==null;){switch(f=Oa,$=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&$!==null){u=void 0,y=f,R=$.memoizedProps,$=$.memoizedState,_=y.stateNode;try{var Sn=Dd(y.type,R,y.elementType===y.type);u=_.getSnapshotBeforeUpdate(Sn,$),_.__reactInternalSnapshotBeforeUpdate=u}catch(yn){Dr(y,y.return,yn)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,y=u.nodeType,y===9)I2(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":I2(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=f.sibling,u!==null){u.return=f.return,Oa=u;break}Oa=f.return}}function nj(u,f,y){var _=y.flags;switch(y.tag){case 0:case 11:case 15:au(u,y),_&4&&rg(5,y);break;case 1:if(au(u,y),_&4)if(u=y.stateNode,f===null)try{u.componentDidMount()}catch(oe){Dr(y,y.return,oe)}else{var R=Dd(y.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(R,f,u.__reactInternalSnapshotBeforeUpdate)}catch(oe){Dr(y,y.return,oe)}}_&64&&Y3(y),_&512&&ag(y,y.return);break;case 3:if(au(u,y),_&64&&(u=y.updateQueue,u!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{FI(u,f)}catch(oe){Dr(y,y.return,oe)}}break;case 27:f===null&&_&4&&ej(y);case 26:case 5:au(u,y),f===null&&_&4&&J3(y),_&512&&ag(y,y.return);break;case 12:au(u,y);break;case 13:au(u,y),_&4&&ij(u,y),_&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=TW.bind(null,y),HW(u,y))));break;case 22:if(_=y.memoizedState!==null||Zl,!_){f=f!==null&&f.memoizedState!==null||ca,R=Zl;var $=ca;Zl=_,(ca=f)&&!$?iu(u,y,(y.subtreeFlags&8772)!==0):au(u,y),Zl=R,ca=$}break;case 30:break;default:au(u,y)}}function rj(u){var f=u.alternate;f!==null&&(u.alternate=null,rj(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&en(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var qr=null,zi=!1;function Yl(u,f,y){for(y=y.child;y!==null;)aj(u,f,y),y=y.sibling}function aj(u,f,y){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(St,y)}catch{}switch(y.tag){case 26:ca||Ho(y,f),Yl(u,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:ca||Ho(y,f);var _=qr,R=zi;du(y.type)&&(qr=y.stateNode,zi=!1),Yl(u,f,y),hg(y.stateNode),qr=_,zi=R;break;case 5:ca||Ho(y,f);case 6:if(_=qr,R=zi,qr=null,Yl(u,f,y),qr=_,zi=R,qr!==null)if(zi)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(y.stateNode)}catch($){Dr(y,f,$)}else try{qr.removeChild(y.stateNode)}catch($){Dr(y,f,$)}break;case 18:qr!==null&&(zi?(u=qr,Gj(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),xg(u)):Gj(qr,y.stateNode));break;case 4:_=qr,R=zi,qr=y.stateNode.containerInfo,zi=!0,Yl(u,f,y),qr=_,zi=R;break;case 0:case 11:case 14:case 15:ca||ru(2,y,f),ca||ru(4,y,f),Yl(u,f,y);break;case 1:ca||(Ho(y,f),_=y.stateNode,typeof _.componentWillUnmount=="function"&&X3(y,f,_)),Yl(u,f,y);break;case 21:Yl(u,f,y);break;case 22:ca=(_=ca)||y.memoizedState!==null,Yl(u,f,y),ca=_;break;default:Yl(u,f,y)}}function ij(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{xg(u)}catch(y){Dr(f,f.return,y)}}function bW(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new tj),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new tj),f;default:throw Error(r(435,u.tag))}}function a2(u,f){var y=bW(u);f.forEach(function(_){var R=kW.bind(null,u,_);y.has(_)||(y.add(_),_.then(R,R))})}function is(u,f){var y=f.deletions;if(y!==null)for(var _=0;_<y.length;_++){var R=y[_],$=u,oe=f,_e=oe;e:for(;_e!==null;){switch(_e.tag){case 27:if(du(_e.type)){qr=_e.stateNode,zi=!1;break e}break;case 5:qr=_e.stateNode,zi=!1;break e;case 3:case 4:qr=_e.stateNode.containerInfo,zi=!0;break e}_e=_e.return}if(qr===null)throw Error(r(160));aj($,oe,R),qr=null,zi=!1,$=R.alternate,$!==null&&($.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)sj(f,u),f=f.sibling}var eo=null;function sj(u,f){var y=u.alternate,_=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:is(f,u),ss(u),_&4&&(ru(3,u,u.return),rg(3,u),ru(5,u,u.return));break;case 1:is(f,u),ss(u),_&512&&(ca||y===null||Ho(y,y.return)),_&64&&Zl&&(u=u.updateQueue,u!==null&&(_=u.callbacks,_!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?_:y.concat(_))));break;case 26:var R=eo;if(is(f,u),ss(u),_&512&&(ca||y===null||Ho(y,y.return)),_&4){var $=y!==null?y.memoizedState:null;if(_=u.memoizedState,y===null)if(_===null)if(u.stateNode===null){e:{_=u.type,y=u.memoizedProps,R=R.ownerDocument||R;t:switch(_){case"title":$=R.getElementsByTagName("title")[0],(!$||$[Lt]||$[me]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=R.createElement(_),R.head.insertBefore($,R.querySelector("head > title"))),Ja($,_,y),$[me]=u,$n($),_=$;break e;case"link":var oe=e4("link","href",R).get(_+(y.href||""));if(oe){for(var _e=0;_e<oe.length;_e++)if($=oe[_e],$.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&$.getAttribute("rel")===(y.rel==null?null:y.rel)&&$.getAttribute("title")===(y.title==null?null:y.title)&&$.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){oe.splice(_e,1);break t}}$=R.createElement(_),Ja($,_,y),R.head.appendChild($);break;case"meta":if(oe=e4("meta","content",R).get(_+(y.content||""))){for(_e=0;_e<oe.length;_e++)if($=oe[_e],$.getAttribute("content")===(y.content==null?null:""+y.content)&&$.getAttribute("name")===(y.name==null?null:y.name)&&$.getAttribute("property")===(y.property==null?null:y.property)&&$.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&$.getAttribute("charset")===(y.charSet==null?null:y.charSet)){oe.splice(_e,1);break t}}$=R.createElement(_),Ja($,_,y),R.head.appendChild($);break;default:throw Error(r(468,_))}$[me]=u,$n($),_=$}u.stateNode=_}else t4(R,u.type,u.stateNode);else u.stateNode=Qj(R,_,u.memoizedProps);else $!==_?($===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):$.count--,_===null?t4(R,u.type,u.stateNode):Qj(R,_,u.memoizedProps)):_===null&&u.stateNode!==null&&e2(u,u.memoizedProps,y.memoizedProps)}break;case 27:is(f,u),ss(u),_&512&&(ca||y===null||Ho(y,y.return)),y!==null&&_&4&&e2(u,u.memoizedProps,y.memoizedProps);break;case 5:if(is(f,u),ss(u),_&512&&(ca||y===null||Ho(y,y.return)),u.flags&32){R=u.stateNode;try{Bc(R,"")}catch(yt){Dr(u,u.return,yt)}}_&4&&u.stateNode!=null&&(R=u.memoizedProps,e2(u,R,y!==null?y.memoizedProps:R)),_&1024&&(r2=!0);break;case 6:if(is(f,u),ss(u),_&4){if(u.stateNode===null)throw Error(r(162));_=u.memoizedProps,y=u.stateNode;try{y.nodeValue=_}catch(yt){Dr(u,u.return,yt)}}break;case 3:if(bv=null,R=eo,eo=gv(f.containerInfo),is(f,u),eo=R,ss(u),_&4&&y!==null&&y.memoizedState.isDehydrated)try{xg(f.containerInfo)}catch(yt){Dr(u,u.return,yt)}r2&&(r2=!1,oj(u));break;case 4:_=eo,eo=gv(u.stateNode.containerInfo),is(f,u),ss(u),eo=_;break;case 12:is(f,u),ss(u);break;case 13:is(f,u),ss(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(u2=fe()),_&4&&(_=u.updateQueue,_!==null&&(u.updateQueue=null,a2(u,_)));break;case 22:R=u.memoizedState!==null;var ze=y!==null&&y.memoizedState!==null,dt=Zl,At=ca;if(Zl=dt||R,ca=At||ze,is(f,u),ca=At,Zl=dt,ss(u),_&8192)e:for(f=u.stateNode,f._visibility=R?f._visibility&-2:f._visibility|1,R&&(y===null||ze||Zl||ca||Md(u)),y=null,f=u;;){if(f.tag===5||f.tag===26){if(y===null){ze=y=f;try{if($=ze.stateNode,R)oe=$.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{_e=ze.stateNode;var Ot=ze.memoizedProps.style,mt=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;_e.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(yt){Dr(ze,ze.return,yt)}}}else if(f.tag===6){if(y===null){ze=f;try{ze.stateNode.nodeValue=R?"":ze.memoizedProps}catch(yt){Dr(ze,ze.return,yt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}_&4&&(_=u.updateQueue,_!==null&&(y=_.retryQueue,y!==null&&(_.retryQueue=null,a2(u,y))));break;case 19:is(f,u),ss(u),_&4&&(_=u.updateQueue,_!==null&&(u.updateQueue=null,a2(u,_)));break;case 30:break;case 21:break;default:is(f,u),ss(u)}}function ss(u){var f=u.flags;if(f&2){try{for(var y,_=u.return;_!==null;){if(Q3(_)){y=_;break}_=_.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var R=y.stateNode,$=t2(u);rv(u,$,R);break;case 5:var oe=y.stateNode;y.flags&32&&(Bc(oe,""),y.flags&=-33);var _e=t2(u);rv(u,_e,oe);break;case 3:case 4:var ze=y.stateNode.containerInfo,dt=t2(u);n2(u,dt,ze);break;default:throw Error(r(161))}}catch(At){Dr(u,u.return,At)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function oj(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;oj(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function au(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)nj(u,f.alternate,f),f=f.sibling}function Md(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return),Md(f);break;case 1:Ho(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&X3(f,f.return,y),Md(f);break;case 27:hg(f.stateNode);case 26:case 5:Ho(f,f.return),Md(f);break;case 22:f.memoizedState===null&&Md(f);break;case 30:Md(f);break;default:Md(f)}u=u.sibling}}function iu(u,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var _=f.alternate,R=u,$=f,oe=$.flags;switch($.tag){case 0:case 11:case 15:iu(R,$,y),rg(4,$);break;case 1:if(iu(R,$,y),_=$,R=_.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(dt){Dr(_,_.return,dt)}if(_=$,R=_.updateQueue,R!==null){var _e=_.stateNode;try{var ze=R.shared.hiddenCallbacks;if(ze!==null)for(R.shared.hiddenCallbacks=null,R=0;R<ze.length;R++)PI(ze[R],_e)}catch(dt){Dr(_,_.return,dt)}}y&&oe&64&&Y3($),ag($,$.return);break;case 27:ej($);case 26:case 5:iu(R,$,y),y&&_===null&&oe&4&&J3($),ag($,$.return);break;case 12:iu(R,$,y);break;case 13:iu(R,$,y),y&&oe&4&&ij(R,$);break;case 22:$.memoizedState===null&&iu(R,$,y),ag($,$.return);break;case 30:break;default:iu(R,$,y)}f=f.sibling}}function i2(u,f){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&Vm(y))}function s2(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Vm(u))}function qo(u,f,y,_){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)lj(u,f,y,_),f=f.sibling}function lj(u,f,y,_){var R=f.flags;switch(f.tag){case 0:case 11:case 15:qo(u,f,y,_),R&2048&&rg(9,f);break;case 1:qo(u,f,y,_);break;case 3:qo(u,f,y,_),R&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Vm(u)));break;case 12:if(R&2048){qo(u,f,y,_),u=f.stateNode;try{var $=f.memoizedProps,oe=$.id,_e=$.onPostCommit;typeof _e=="function"&&_e(oe,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ze){Dr(f,f.return,ze)}}else qo(u,f,y,_);break;case 13:qo(u,f,y,_);break;case 23:break;case 22:$=f.stateNode,oe=f.alternate,f.memoizedState!==null?$._visibility&2?qo(u,f,y,_):ig(u,f):$._visibility&2?qo(u,f,y,_):($._visibility|=2,xh(u,f,y,_,(f.subtreeFlags&10256)!==0)),R&2048&&i2(oe,f);break;case 24:qo(u,f,y,_),R&2048&&s2(f.alternate,f);break;default:qo(u,f,y,_)}}function xh(u,f,y,_,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var $=u,oe=f,_e=y,ze=_,dt=oe.flags;switch(oe.tag){case 0:case 11:case 15:xh($,oe,_e,ze,R),rg(8,oe);break;case 23:break;case 22:var At=oe.stateNode;oe.memoizedState!==null?At._visibility&2?xh($,oe,_e,ze,R):ig($,oe):(At._visibility|=2,xh($,oe,_e,ze,R)),R&&dt&2048&&i2(oe.alternate,oe);break;case 24:xh($,oe,_e,ze,R),R&&dt&2048&&s2(oe.alternate,oe);break;default:xh($,oe,_e,ze,R)}f=f.sibling}}function ig(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=u,_=f,R=_.flags;switch(_.tag){case 22:ig(y,_),R&2048&&i2(_.alternate,_);break;case 24:ig(y,_),R&2048&&s2(_.alternate,_);break;default:ig(y,_)}f=f.sibling}}var sg=8192;function _h(u){if(u.subtreeFlags&sg)for(u=u.child;u!==null;)cj(u),u=u.sibling}function cj(u){switch(u.tag){case 26:_h(u),u.flags&sg&&u.memoizedState!==null&&rK(eo,u.memoizedState,u.memoizedProps);break;case 5:_h(u);break;case 3:case 4:var f=eo;eo=gv(u.stateNode.containerInfo),_h(u),eo=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=sg,sg=16777216,_h(u),sg=f):_h(u));break;default:_h(u)}}function uj(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function og(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var _=f[y];Oa=_,fj(_,u)}uj(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)dj(u),u=u.sibling}function dj(u){switch(u.tag){case 0:case 11:case 15:og(u),u.flags&2048&&ru(9,u,u.return);break;case 3:og(u);break;case 12:og(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,av(u)):og(u);break;default:og(u)}}function av(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var _=f[y];Oa=_,fj(_,u)}uj(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:ru(8,f,f.return),av(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,av(f));break;default:av(f)}u=u.sibling}}function fj(u,f){for(;Oa!==null;){var y=Oa;switch(y.tag){case 0:case 11:case 15:ru(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var _=y.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Vm(y.memoizedState.cache)}if(_=y.child,_!==null)_.return=y,Oa=_;else e:for(y=u;Oa!==null;){_=Oa;var R=_.sibling,$=_.return;if(rj(_),_===y){Oa=null;break e}if(R!==null){R.return=$,Oa=R;break e}Oa=$}}}var vW={getCacheForType:function(u){var f=si(_a),y=f.data.get(u);return y===void 0&&(y=u(),f.data.set(u,y)),y}},wW=typeof WeakMap=="function"?WeakMap:Map,yr=0,Fr=null,Qn=null,rr=0,br=0,os=null,su=!1,Sh=!1,o2=!1,Xl=0,na=0,ou=0,Od=0,l2=0,Ns=0,Eh=0,lg=null,Ui=null,c2=!1,u2=0,iv=1/0,sv=null,lu=null,Xa=0,cu=null,Ch=null,Th=0,d2=0,f2=null,hj=null,cg=0,h2=null;function ls(){if((yr&2)!==0&&rr!==0)return rr&-rr;if(ae.T!==null){var u=hh;return u!==0?u:w2()}return G()}function pj(){Ns===0&&(Ns=(rr&536870912)===0||ur?vt():536870912);var u=As.current;return u!==null&&(u.flags|=32),Ns}function cs(u,f,y){(u===Fr&&(br===2||br===9)||u.cancelPendingCommit!==null)&&(kh(u,0),uu(u,rr,Ns,!1)),nt(u,y),((yr&2)===0||u!==Fr)&&(u===Fr&&((yr&2)===0&&(Od|=y),na===4&&uu(u,rr,Ns,!1)),Go(u))}function mj(u,f,y){if((yr&6)!==0)throw Error(r(327));var _=!y&&(f&124)===0&&(f&u.expiredLanes)===0||le(u,f),R=_?SW(u,f):g2(u,f,!0),$=_;do{if(R===0){Sh&&!_&&uu(u,f,0,!1);break}else{if(y=u.current.alternate,$&&!xW(y)){R=g2(u,f,!1),$=!1;continue}if(R===2){if($=f,u.errorRecoveryDisabledLanes&$)var oe=0;else oe=u.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){f=oe;e:{var _e=u;R=lg;var ze=_e.current.memoizedState.isDehydrated;if(ze&&(kh(_e,oe).flags|=256),oe=g2(_e,oe,!1),oe!==2){if(o2&&!ze){_e.errorRecoveryDisabledLanes|=$,Od|=$,R=4;break e}$=Ui,Ui=R,$!==null&&(Ui===null?Ui=$:Ui.push.apply(Ui,$))}R=oe}if($=!1,R!==2)continue}}if(R===1){kh(u,0),uu(u,f,0,!0);break}e:{switch(_=u,$=R,$){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:uu(_,f,Ns,!su);break e;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(R=u2+300-fe(),10<R)){if(uu(_,f,Ns,!su),ke(_,0,!0)!==0)break e;_.timeoutHandle=Hj(gj.bind(null,_,y,Ui,sv,c2,f,Ns,Od,Eh,su,$,2,-0,0),R);break e}gj(_,y,Ui,sv,c2,f,Ns,Od,Eh,su,$,0,-0,0)}}break}while(!0);Go(u)}function gj(u,f,y,_,R,$,oe,_e,ze,dt,At,Ot,mt,yt){if(u.timeoutHandle=-1,Ot=f.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(gg={stylesheets:null,count:0,unsuspend:nK},cj(f),Ot=aK(),Ot!==null)){u.cancelPendingCommit=Ot(Sj.bind(null,u,f,$,y,_,R,oe,_e,ze,At,1,mt,yt)),uu(u,$,oe,!dt);return}Sj(u,f,$,y,_,R,oe,_e,ze)}function xW(u){for(var f=u;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var _=0;_<y.length;_++){var R=y[_],$=R.getSnapshot;R=R.value;try{if(!ii($(),R))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function uu(u,f,y,_){f&=~l2,f&=~Od,u.suspendedLanes|=f,u.pingedLanes&=~f,_&&(u.warmLanes|=f),_=u.expirationTimes;for(var R=f;0<R;){var $=31-Zt(R),oe=1<<$;_[$]=-1,R&=~oe}y!==0&&Me(u,y,f)}function ov(){return(yr&6)===0?(ug(0),!1):!0}function p2(){if(Qn!==null){if(br===0)var u=Qn.return;else u=Qn,Vl=Nd=null,IS(u),vh=null,eg=0,u=Qn;for(;u!==null;)Z3(u.alternate,u),u=u.return;Qn=null}}function kh(u,f){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,$W(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),p2(),Fr=u,Qn=y=Bl(u.current,null),rr=f,br=0,os=null,su=!1,Sh=le(u,f),o2=!1,Eh=Ns=l2=Od=ou=na=0,Ui=lg=null,c2=!1,(f&8)!==0&&(f|=f&32);var _=u.entangledLanes;if(_!==0)for(u=u.entanglements,_&=f;0<_;){var R=31-Zt(_),$=1<<R;f|=u[R],_&=~$}return Xl=f,_n(),y}function yj(u,f){Vn=null,ae.H=Kb,f===qm||f===Lb?(f=MI(),br=3):f===II?(f=MI(),br=4):br=f===O3?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,os=f,Qn===null&&(na=1,Qb(u,pn(f,u.current)))}function bj(){var u=ae.H;return ae.H=Kb,u===null?Kb:u}function vj(){var u=ae.A;return ae.A=vW,u}function m2(){na=4,su||(rr&4194048)!==rr&&As.current!==null||(Sh=!0),(ou&134217727)===0&&(Od&134217727)===0||Fr===null||uu(Fr,rr,Ns,!1)}function g2(u,f,y){var _=yr;yr|=2;var R=bj(),$=vj();(Fr!==u||rr!==f)&&(sv=null,kh(u,f)),f=!1;var oe=na;e:do try{if(br!==0&&Qn!==null){var _e=Qn,ze=os;switch(br){case 8:p2(),oe=6;break e;case 3:case 2:case 9:case 6:As.current===null&&(f=!0);var dt=br;if(br=0,os=null,Ah(u,_e,ze,dt),y&&Sh){oe=0;break e}break;default:dt=br,br=0,os=null,Ah(u,_e,ze,dt)}}_W(),oe=na;break}catch(At){yj(u,At)}while(!0);return f&&u.shellSuspendCounter++,Vl=Nd=null,yr=_,ae.H=R,ae.A=$,Qn===null&&(Fr=null,rr=0,_n()),oe}function _W(){for(;Qn!==null;)wj(Qn)}function SW(u,f){var y=yr;yr|=2;var _=bj(),R=vj();Fr!==u||rr!==f?(sv=null,iv=fe()+500,kh(u,f)):Sh=le(u,f);e:do try{if(br!==0&&Qn!==null){f=Qn;var $=os;t:switch(br){case 1:br=0,os=null,Ah(u,f,$,1);break;case 2:case 9:if(jI($)){br=0,os=null,xj(f);break}f=function(){br!==2&&br!==9||Fr!==u||(br=7),Go(u)},$.then(f,f);break e;case 3:br=7;break e;case 4:br=5;break e;case 7:jI($)?(br=0,os=null,xj(f)):(br=0,os=null,Ah(u,f,$,7));break;case 5:var oe=null;switch(Qn.tag){case 26:oe=Qn.memoizedState;case 5:case 27:var _e=Qn;if(!oe||n4(oe)){br=0,os=null;var ze=_e.sibling;if(ze!==null)Qn=ze;else{var dt=_e.return;dt!==null?(Qn=dt,lv(dt)):Qn=null}break t}}br=0,os=null,Ah(u,f,$,5);break;case 6:br=0,os=null,Ah(u,f,$,6);break;case 8:p2(),na=6;break e;default:throw Error(r(462))}}EW();break}catch(At){yj(u,At)}while(!0);return Vl=Nd=null,ae.H=_,ae.A=R,yr=y,Qn!==null?0:(Fr=null,rr=0,_n(),na)}function EW(){for(;Qn!==null&&!Se();)wj(Qn)}function wj(u){var f=W3(u.alternate,u,Xl);u.memoizedProps=u.pendingProps,f===null?lv(u):Qn=f}function xj(u){var f=u,y=f.alternate;switch(f.tag){case 15:case 0:f=z3(y,f,f.pendingProps,f.type,void 0,rr);break;case 11:f=z3(y,f,f.pendingProps,f.type.render,f.ref,rr);break;case 5:IS(f);default:Z3(y,f),f=Qn=_I(f,Xl),f=W3(y,f,Xl)}u.memoizedProps=u.pendingProps,f===null?lv(u):Qn=f}function Ah(u,f,y,_){Vl=Nd=null,IS(f),vh=null,eg=0;var R=f.return;try{if(hW(u,R,f,y,rr)){na=1,Qb(u,pn(y,u.current)),Qn=null;return}}catch($){if(R!==null)throw Qn=R,$;na=1,Qb(u,pn(y,u.current)),Qn=null;return}f.flags&32768?(ur||_===1?u=!0:Sh||(rr&536870912)!==0?u=!1:(su=u=!0,(_===2||_===9||_===3||_===6)&&(_=As.current,_!==null&&_.tag===13&&(_.flags|=16384))),_j(f,u)):lv(f)}function lv(u){var f=u;do{if((f.flags&32768)!==0){_j(f,su);return}u=f.return;var y=mW(f.alternate,f,Xl);if(y!==null){Qn=y;return}if(f=f.sibling,f!==null){Qn=f;return}Qn=f=u}while(f!==null);na===0&&(na=5)}function _j(u,f){do{var y=gW(u.alternate,u);if(y!==null){y.flags&=32767,Qn=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(u=u.sibling,u!==null)){Qn=u;return}Qn=u=y}while(u!==null);na=6,Qn=null}function Sj(u,f,y,_,R,$,oe,_e,ze){u.cancelPendingCommit=null;do cv();while(Xa!==0);if((yr&6)!==0)throw Error(r(327));if(f!==null){if(f===u.current)throw Error(r(177));if($=f.lanes|f.childLanes,$|=Za,ye(u,y,$,oe,_e,ze),u===Fr&&(Qn=Fr=null,rr=0),Ch=f,cu=u,Th=y,d2=$,f2=R,hj=_,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,AW(Fe,function(){return Aj(),null})):(u.callbackNode=null,u.callbackPriority=0),_=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||_){_=ae.T,ae.T=null,R=ee.p,ee.p=2,oe=yr,yr|=4;try{yW(u,f,y)}finally{yr=oe,ee.p=R,ae.T=_}}Xa=1,Ej(),Cj(),Tj()}}function Ej(){if(Xa===1){Xa=0;var u=cu,f=Ch,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=ae.T,ae.T=null;var _=ee.p;ee.p=2;var R=yr;yr|=4;try{sj(f,u);var $=A2,oe=ce(u.containerInfo),_e=$.focusedElem,ze=$.selectionRange;if(oe!==_e&&_e&&_e.ownerDocument&&re(_e.ownerDocument.documentElement,_e)){if(ze!==null&&we(_e)){var dt=ze.start,At=ze.end;if(At===void 0&&(At=dt),"selectionStart"in _e)_e.selectionStart=dt,_e.selectionEnd=Math.min(At,_e.value.length);else{var Ot=_e.ownerDocument||document,mt=Ot&&Ot.defaultView||window;if(mt.getSelection){var yt=mt.getSelection(),Sn=_e.textContent.length,yn=Math.min(ze.start,Sn),Tr=ze.end===void 0?yn:Math.min(ze.end,Sn);!yt.extend&&yn>Tr&&(oe=Tr,Tr=yn,yn=oe);var at=Y(_e,yn),Ye=Y(_e,Tr);if(at&&Ye&&(yt.rangeCount!==1||yt.anchorNode!==at.node||yt.anchorOffset!==at.offset||yt.focusNode!==Ye.node||yt.focusOffset!==Ye.offset)){var ct=Ot.createRange();ct.setStart(at.node,at.offset),yt.removeAllRanges(),yn>Tr?(yt.addRange(ct),yt.extend(Ye.node,Ye.offset)):(ct.setEnd(Ye.node,Ye.offset),yt.addRange(ct))}}}}for(Ot=[],yt=_e;yt=yt.parentNode;)yt.nodeType===1&&Ot.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<Ot.length;_e++){var jt=Ot[_e];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}xv=!!k2,A2=k2=null}finally{yr=R,ee.p=_,ae.T=y}}u.current=f,Xa=2}}function Cj(){if(Xa===2){Xa=0;var u=cu,f=Ch,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=ae.T,ae.T=null;var _=ee.p;ee.p=2;var R=yr;yr|=4;try{nj(u,f.alternate,f)}finally{yr=R,ee.p=_,ae.T=y}}Xa=3}}function Tj(){if(Xa===4||Xa===3){Xa=0,Ne();var u=cu,f=Ch,y=Th,_=hj;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Xa=5:(Xa=0,Ch=cu=null,kj(u,u.pendingLanes));var R=u.pendingLanes;if(R===0&&(lu=null),ge(y),f=f.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(St,f,void 0,(f.current.flags&128)===128)}catch{}if(_!==null){f=ae.T,R=ee.p,ee.p=2,ae.T=null;try{for(var $=u.onRecoverableError,oe=0;oe<_.length;oe++){var _e=_[oe];$(_e.value,{componentStack:_e.stack})}}finally{ae.T=f,ee.p=R}}(Th&3)!==0&&cv(),Go(u),R=u.pendingLanes,(y&4194090)!==0&&(R&42)!==0?u===h2?cg++:(cg=0,h2=u):cg=0,ug(0)}}function kj(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Vm(f)))}function cv(u){return Ej(),Cj(),Tj(),Aj()}function Aj(){if(Xa!==5)return!1;var u=cu,f=d2;d2=0;var y=ge(Th),_=ae.T,R=ee.p;try{ee.p=32>y?32:y,ae.T=null,y=f2,f2=null;var $=cu,oe=Th;if(Xa=0,Ch=cu=null,Th=0,(yr&6)!==0)throw Error(r(331));var _e=yr;if(yr|=4,dj($.current),lj($,$.current,oe,y),yr=_e,ug(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(St,$)}catch{}return!0}finally{ee.p=R,ae.T=_,kj(u,f)}}function Nj(u,f,y){f=pn(y,f),f=qS(u.stateNode,f,2),u=Qc(u,f,2),u!==null&&(nt(u,2),Go(u))}function Dr(u,f,y){if(u.tag===3)Nj(u,u,y);else for(;f!==null;){if(f.tag===3){Nj(f,u,y);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(lu===null||!lu.has(_))){u=pn(y,u),y=D3(2),_=Qc(f,y,2),_!==null&&(M3(y,_,f,u),nt(_,2),Go(_));break}}f=f.return}}function y2(u,f,y){var _=u.pingCache;if(_===null){_=u.pingCache=new wW;var R=new Set;_.set(f,R)}else R=_.get(f),R===void 0&&(R=new Set,_.set(f,R));R.has(y)||(o2=!0,R.add(y),u=CW.bind(null,u,f,y),f.then(u,u))}function CW(u,f,y){var _=u.pingCache;_!==null&&_.delete(f),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,Fr===u&&(rr&y)===y&&(na===4||na===3&&(rr&62914560)===rr&&300>fe()-u2?(yr&2)===0&&kh(u,0):l2|=y,Eh===rr&&(Eh=0)),Go(u)}function Rj(u,f){f===0&&(f=F()),u=Qs(u,f),u!==null&&(nt(u,f),Go(u))}function TW(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),Rj(u,y)}function kW(u,f){var y=0;switch(u.tag){case 13:var _=u.stateNode,R=u.memoizedState;R!==null&&(y=R.retryLane);break;case 19:_=u.stateNode;break;case 22:_=u.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(f),Rj(u,y)}function AW(u,f){return je(u,f)}var uv=null,Nh=null,b2=!1,dv=!1,v2=!1,Pd=0;function Go(u){u!==Nh&&u.next===null&&(Nh===null?uv=Nh=u:Nh=Nh.next=u),dv=!0,b2||(b2=!0,RW())}function ug(u,f){if(!v2&&dv){v2=!0;do for(var y=!1,_=uv;_!==null;){if(u!==0){var R=_.pendingLanes;if(R===0)var $=0;else{var oe=_.suspendedLanes,_e=_.pingedLanes;$=(1<<31-Zt(42|u)+1)-1,$&=R&~(oe&~_e),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(y=!0,Mj(_,$))}else $=rr,$=ke(_,_===Fr?$:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),($&3)===0||le(_,$)||(y=!0,Mj(_,$));_=_.next}while(y);v2=!1}}function NW(){Ij()}function Ij(){dv=b2=!1;var u=0;Pd!==0&&(LW()&&(u=Pd),Pd=0);for(var f=fe(),y=null,_=uv;_!==null;){var R=_.next,$=jj(_,f);$===0?(_.next=null,y===null?uv=R:y.next=R,R===null&&(Nh=y)):(y=_,(u!==0||($&3)!==0)&&(dv=!0)),_=R}ug(u)}function jj(u,f){for(var y=u.suspendedLanes,_=u.pingedLanes,R=u.expirationTimes,$=u.pendingLanes&-62914561;0<$;){var oe=31-Zt($),_e=1<<oe,ze=R[oe];ze===-1?((_e&y)===0||(_e&_)!==0)&&(R[oe]=ft(_e,f)):ze<=f&&(u.expiredLanes|=_e),$&=~_e}if(f=Fr,y=rr,y=ke(u,u===f?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),_=u.callbackNode,y===0||u===f&&(br===2||br===9)||u.cancelPendingCommit!==null)return _!==null&&_!==null&&z(_),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||le(u,y)){if(f=y&-y,f===u.callbackPriority)return f;switch(_!==null&&z(_),ge(y)){case 2:case 8:y=xe;break;case 32:y=Fe;break;case 268435456:y=We;break;default:y=Fe}return _=Dj.bind(null,u),y=je(y,_),u.callbackPriority=f,u.callbackNode=y,f}return _!==null&&_!==null&&z(_),u.callbackPriority=2,u.callbackNode=null,2}function Dj(u,f){if(Xa!==0&&Xa!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(cv()&&u.callbackNode!==y)return null;var _=rr;return _=ke(u,u===Fr?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),_===0?null:(mj(u,_,f),jj(u,fe()),u.callbackNode!=null&&u.callbackNode===y?Dj.bind(null,u):null)}function Mj(u,f){if(cv())return null;mj(u,f,!0)}function RW(){BW(function(){(yr&6)!==0?je(te,NW):Ij()})}function w2(){return Pd===0&&(Pd=vt()),Pd}function Oj(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Il(""+u)}function Pj(u,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,u.id&&y.setAttribute("form",u.id),f.parentNode.insertBefore(y,f),u=new FormData(u),y.parentNode.removeChild(y),u}function IW(u,f,y,_,R){if(f==="submit"&&y&&y.stateNode===R){var $=Oj((R[Re]||null).action),oe=_.submitter;oe&&(f=(f=oe[Re]||null)?Oj(f.formAction):oe.getAttribute("formAction"),f!==null&&($=f,oe=null));var _e=new Zf("action","action",null,_,R);u.push({event:_e,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Pd!==0){var ze=oe?Pj(R,oe):new FormData(R);BS(y,{pending:!0,data:ze,method:R.method,action:$},null,ze)}}else typeof $=="function"&&(_e.preventDefault(),ze=oe?Pj(R,oe):new FormData(R),BS(y,{pending:!0,data:ze,method:R.method,action:$},$,ze))},currentTarget:R}]})}}for(var x2=0;x2<Xt.length;x2++){var _2=Xt[x2],jW=_2.toLowerCase(),DW=_2[0].toUpperCase()+_2.slice(1);zt(jW,"on"+DW)}zt(ht,"onAnimationEnd"),zt(bt,"onAnimationIteration"),zt(wt,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(kt,"onTransitionRun"),zt(Vt,"onTransitionStart"),zt(Yt,"onTransitionCancel"),zt(Bt,"onTransitionEnd"),Mo("onMouseEnter",["mouseout","mouseover"]),Mo("onMouseLeave",["mouseout","mouseover"]),Mo("onPointerEnter",["pointerout","pointerover"]),Mo("onPointerLeave",["pointerout","pointerover"]),Do("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Do("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Do("onBeforeInput",["compositionend","keypress","textInput","paste"]),Do("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Do("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Do("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MW=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dg));function Fj(u,f){f=(f&4)!==0;for(var y=0;y<u.length;y++){var _=u[y],R=_.event;_=_.listeners;e:{var $=void 0;if(f)for(var oe=_.length-1;0<=oe;oe--){var _e=_[oe],ze=_e.instance,dt=_e.currentTarget;if(_e=_e.listener,ze!==$&&R.isPropagationStopped())break e;$=_e,R.currentTarget=dt;try{$(R)}catch(At){Jb(At)}R.currentTarget=null,$=ze}else for(oe=0;oe<_.length;oe++){if(_e=_[oe],ze=_e.instance,dt=_e.currentTarget,_e=_e.listener,ze!==$&&R.isPropagationStopped())break e;$=_e,R.currentTarget=dt;try{$(R)}catch(At){Jb(At)}R.currentTarget=null,$=ze}}}}function er(u,f){var y=f[pt];y===void 0&&(y=f[pt]=new Set);var _=u+"__bubble";y.has(_)||(Lj(f,u,2,!1),y.add(_))}function S2(u,f,y){var _=0;f&&(_|=4),Lj(y,u,_,f)}var fv="_reactListening"+Math.random().toString(36).slice(2);function E2(u){if(!u[fv]){u[fv]=!0,xi.forEach(function(y){y!=="selectionchange"&&(MW.has(y)||S2(y,!1,u),S2(y,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[fv]||(f[fv]=!0,S2("selectionchange",!1,f))}}function Lj(u,f,y,_){switch(l4(f)){case 2:var R=oK;break;case 8:R=lK;break;default:R=L2}y=R.bind(null,f,y,u),R=void 0,!Cm||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(R=!0),_?R!==void 0?u.addEventListener(f,y,{capture:!0,passive:R}):u.addEventListener(f,y,!0):R!==void 0?u.addEventListener(f,y,{passive:R}):u.addEventListener(f,y,!1)}function C2(u,f,y,_,R){var $=_;if((f&1)===0&&(f&2)===0&&_!==null)e:for(;;){if(_===null)return;var oe=_.tag;if(oe===3||oe===4){var _e=_.stateNode.containerInfo;if(_e===R)break;if(oe===4)for(oe=_.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===R)return;oe=oe.return}for(;_e!==null;){if(oe=Rn(_e),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){_=$=oe;continue e}_e=_e.parentNode}}_=_.return}Uc(function(){var dt=$,At=Wf(y),Ot=[];e:{var mt=Wt.get(u);if(mt!==void 0){var yt=Zf,Sn=u;switch(u){case"keypress":if(qc(y)===0)break e;case"keydown":case"keyup":yt=rh;break;case"focusin":Sn="focus",yt=Gc;break;case"focusout":Sn="blur",yt=Gc;break;case"beforeblur":case"afterblur":yt=Gc;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=jm;break;case ht:case bt:case wt:yt=_b;break;case Bt:yt=Dm;break;case"scroll":case"scrollend":yt=Yf;break;case"wheel":yt=ih;break;case"copy":case"cut":case"paste":yt=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Im;break;case"toggle":case"beforetoggle":yt=Cb}var yn=(f&4)!==0,Tr=!yn&&(u==="scroll"||u==="scrollend"),at=yn?mt!==null?mt+"Capture":null:mt;yn=[];for(var Ye=dt,ct;Ye!==null;){var jt=Ye;if(ct=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||ct===null||at===null||(jt=Ml(Ye,at),jt!=null&&yn.push(fg(Ye,jt,ct))),Tr)break;Ye=Ye.return}0<yn.length&&(mt=new yt(mt,Sn,null,y,At),Ot.push({event:mt,listeners:yn}))}}if((f&7)===0){e:{if(mt=u==="mouseover"||u==="pointerover",yt=u==="mouseout"||u==="pointerout",mt&&y!==_s&&(Sn=y.relatedTarget||y.fromElement)&&(Rn(Sn)||Sn[Ve]))break e;if((yt||mt)&&(mt=At.window===At?At:(mt=At.ownerDocument)?mt.defaultView||mt.parentWindow:window,yt?(Sn=y.relatedTarget||y.toElement,yt=dt,Sn=Sn?Rn(Sn):null,Sn!==null&&(Tr=i(Sn),yn=Sn.tag,Sn!==Tr||yn!==5&&yn!==27&&yn!==6)&&(Sn=null)):(yt=null,Sn=dt),yt!==Sn)){if(yn=Jf,jt="onMouseLeave",at="onMouseEnter",Ye="mouse",(u==="pointerout"||u==="pointerover")&&(yn=Im,jt="onPointerLeave",at="onPointerEnter",Ye="pointer"),Tr=yt==null?mt:_r(yt),ct=Sn==null?mt:_r(Sn),mt=new yn(jt,Ye+"leave",yt,y,At),mt.target=Tr,mt.relatedTarget=ct,jt=null,Rn(At)===dt&&(yn=new yn(at,Ye+"enter",Sn,y,At),yn.target=ct,yn.relatedTarget=Tr,jt=yn),Tr=jt,yt&&Sn)t:{for(yn=yt,at=Sn,Ye=0,ct=yn;ct;ct=Rh(ct))Ye++;for(ct=0,jt=at;jt;jt=Rh(jt))ct++;for(;0<Ye-ct;)yn=Rh(yn),Ye--;for(;0<ct-Ye;)at=Rh(at),ct--;for(;Ye--;){if(yn===at||at!==null&&yn===at.alternate)break t;yn=Rh(yn),at=Rh(at)}yn=null}else yn=null;yt!==null&&$j(Ot,mt,yt,yn,!1),Sn!==null&&Tr!==null&&$j(Ot,Tr,Sn,yn,!0)}}e:{if(mt=dt?_r(dt):window,yt=mt.nodeName&&mt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&mt.type==="file")var sn=Sd;else if(lh(mt))if(Es)sn=Zc;else{sn=$l;var Wn=Ib}else yt=mt.nodeName,!yt||yt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&Em(dt.elementType)&&(sn=Sd):sn=Lm;if(sn&&(sn=sn(u,dt))){Fm(Ot,sn,y,At);break e}Wn&&Wn(u,mt,dt),u==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&Lc(mt,"number",mt.value)}switch(Wn=dt?_r(dt):window,u){case"focusin":(lh(Wn)||Wn.contentEditable==="true")&&($e=Wn,Ze=dt,Xe=null);break;case"focusout":Xe=Ze=$e=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,He(Ot,y,At);break;case"selectionchange":if(Oe)break;case"keydown":case"keyup":He(Ot,y,At)}var fn;if(xd)e:{switch(u){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else Ll?Pm(u,y)&&(wn="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&(wn="onCompositionStart");wn&&(sh&&y.locale!=="ko"&&(Ll||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&Ll&&(fn=Hc()):(Ss=At,Kf="value"in Ss?Ss.value:Ss.textContent,Ll=!0)),Wn=hv(dt,wn),0<Wn.length&&(wn=new nh(wn,u,null,y,At),Ot.push({event:wn,listeners:Wn}),fn?wn.data=fn:(fn=kb(y),fn!==null&&(wn.data=fn)))),(fn=iS?Ab(u,y):sS(u,y))&&(wn=hv(dt,"onBeforeInput"),0<wn.length&&(Wn=new nh("onBeforeInput","beforeinput",null,y,At),Ot.push({event:Wn,listeners:wn}),Wn.data=fn)),IW(Ot,u,dt,y,At)}Fj(Ot,f)})}function fg(u,f,y){return{instance:u,listener:f,currentTarget:y}}function hv(u,f){for(var y=f+"Capture",_=[];u!==null;){var R=u,$=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||$===null||(R=Ml(u,y),R!=null&&_.unshift(fg(u,R,$)),R=Ml(u,f),R!=null&&_.push(fg(u,R,$))),u.tag===3)return _;u=u.return}return[]}function Rh(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function $j(u,f,y,_,R){for(var $=f._reactName,oe=[];y!==null&&y!==_;){var _e=y,ze=_e.alternate,dt=_e.stateNode;if(_e=_e.tag,ze!==null&&ze===_)break;_e!==5&&_e!==26&&_e!==27||dt===null||(ze=dt,R?(dt=Ml(y,$),dt!=null&&oe.unshift(fg(y,dt,ze))):R||(dt=Ml(y,$),dt!=null&&oe.push(fg(y,dt,ze)))),y=y.return}oe.length!==0&&u.push({event:f,listeners:oe})}var OW=/\r\n?/g,PW=/\u0000|\uFFFD/g;function Bj(u){return(typeof u=="string"?u:""+u).replace(OW,`
`).replace(PW,"")}function zj(u,f){return f=Bj(f),Bj(u)===f}function pv(){}function Cr(u,f,y,_,R,$){switch(y){case"children":typeof _=="string"?f==="body"||f==="textarea"&&_===""||Bc(u,_):(typeof _=="number"||typeof _=="bigint")&&f!=="body"&&Bc(u,""+_);break;case"className":Al(u,"class",_);break;case"tabIndex":Al(u,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(u,y,_);break;case"style":vb(u,_,$);break;case"data":if(f!=="object"){Al(u,"data",_);break}case"src":case"href":if(_===""&&(f!=="a"||y!=="href")){u.removeAttribute(y);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){u.removeAttribute(y);break}_=Il(""+_),u.setAttribute(y,_);break;case"action":case"formAction":if(typeof _=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(y==="formAction"?(f!=="input"&&Cr(u,f,"name",R.name,R,null),Cr(u,f,"formEncType",R.formEncType,R,null),Cr(u,f,"formMethod",R.formMethod,R,null),Cr(u,f,"formTarget",R.formTarget,R,null)):(Cr(u,f,"encType",R.encType,R,null),Cr(u,f,"method",R.method,R,null),Cr(u,f,"target",R.target,R,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){u.removeAttribute(y);break}_=Il(""+_),u.setAttribute(y,_);break;case"onClick":_!=null&&(u.onclick=pv);break;case"onScroll":_!=null&&er("scroll",u);break;case"onScrollEnd":_!=null&&er("scrollend",u);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(y=_.__html,y!=null){if(R.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"multiple":u.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":u.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){u.removeAttribute("xlink:href");break}y=Il(""+_),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?u.setAttribute(y,""+_):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":_===!0?u.setAttribute(y,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?u.setAttribute(y,_):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?u.setAttribute(y,_):u.removeAttribute(y);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?u.removeAttribute(y):u.setAttribute(y,_);break;case"popover":er("beforetoggle",u),er("toggle",u),Xs(u,"popover",_);break;case"xlinkActuate":ns(u,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":ns(u,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":ns(u,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":ns(u,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":ns(u,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":ns(u,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":ns(u,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":ns(u,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":ns(u,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Xs(u,"is",_);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Si.get(y)||y,Xs(u,y,_))}}function T2(u,f,y,_,R,$){switch(y){case"style":vb(u,_,$);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(y=_.__html,y!=null){if(R.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"children":typeof _=="string"?Bc(u,_):(typeof _=="number"||typeof _=="bigint")&&Bc(u,""+_);break;case"onScroll":_!=null&&er("scroll",u);break;case"onScrollEnd":_!=null&&er("scrollend",u);break;case"onClick":_!=null&&(u.onclick=pv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(R=y.endsWith("Capture"),f=y.slice(2,R?y.length-7:void 0),$=u[Re]||null,$=$!=null?$[y]:null,typeof $=="function"&&u.removeEventListener(f,$,R),typeof _=="function")){typeof $!="function"&&$!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(f,_,R);break e}y in u?u[y]=_:_===!0?u.setAttribute(y,""):Xs(u,y,_)}}}function Ja(u,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":er("error",u),er("load",u);var _=!1,R=!1,$;for($ in y)if(y.hasOwnProperty($)){var oe=y[$];if(oe!=null)switch($){case"src":_=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Cr(u,f,$,oe,y,null)}}R&&Cr(u,f,"srcSet",y.srcSet,y,null),_&&Cr(u,f,"src",y.src,y,null);return;case"input":er("invalid",u);var _e=$=oe=R=null,ze=null,dt=null;for(_ in y)if(y.hasOwnProperty(_)){var At=y[_];if(At!=null)switch(_){case"name":R=At;break;case"type":oe=At;break;case"checked":ze=At;break;case"defaultChecked":dt=At;break;case"value":$=At;break;case"defaultValue":_e=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,f));break;default:Cr(u,f,_,At,y,null)}}_m(u,$,_e,ze,dt,oe,R,!1),Fo(u);return;case"select":er("invalid",u),_=oe=$=null;for(R in y)if(y.hasOwnProperty(R)&&(_e=y[R],_e!=null))switch(R){case"value":$=_e;break;case"defaultValue":oe=_e;break;case"multiple":_=_e;default:Cr(u,f,R,_e,y,null)}f=$,y=oe,u.multiple=!!_,f!=null?Rl(u,!!_,f,!1):y!=null&&Rl(u,!!_,y,!0);return;case"textarea":er("invalid",u),$=R=_=null;for(oe in y)if(y.hasOwnProperty(oe)&&(_e=y[oe],_e!=null))switch(oe){case"value":_=_e;break;case"defaultValue":R=_e;break;case"children":$=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(91));break;default:Cr(u,f,oe,_e,y,null)}Sm(u,_,R,$),Fo(u);return;case"option":for(ze in y)if(y.hasOwnProperty(ze)&&(_=y[ze],_!=null))switch(ze){case"selected":u.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Cr(u,f,ze,_,y,null)}return;case"dialog":er("beforetoggle",u),er("toggle",u),er("cancel",u),er("close",u);break;case"iframe":case"object":er("load",u);break;case"video":case"audio":for(_=0;_<dg.length;_++)er(dg[_],u);break;case"image":er("error",u),er("load",u);break;case"details":er("toggle",u);break;case"embed":case"source":case"link":er("error",u),er("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in y)if(y.hasOwnProperty(dt)&&(_=y[dt],_!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Cr(u,f,dt,_,y,null)}return;default:if(Em(f)){for(At in y)y.hasOwnProperty(At)&&(_=y[At],_!==void 0&&T2(u,f,At,_,y,void 0));return}}for(_e in y)y.hasOwnProperty(_e)&&(_=y[_e],_!=null&&Cr(u,f,_e,_,y,null))}function FW(u,f,y,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,$=null,oe=null,_e=null,ze=null,dt=null,At=null;for(yt in y){var Ot=y[yt];if(y.hasOwnProperty(yt)&&Ot!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":ze=Ot;default:_.hasOwnProperty(yt)||Cr(u,f,yt,null,_,Ot)}}for(var mt in _){var yt=_[mt];if(Ot=y[mt],_.hasOwnProperty(mt)&&(yt!=null||Ot!=null))switch(mt){case"type":$=yt;break;case"name":R=yt;break;case"checked":dt=yt;break;case"defaultChecked":At=yt;break;case"value":oe=yt;break;case"defaultValue":_e=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,f));break;default:yt!==Ot&&Cr(u,f,mt,yt,_,Ot)}}Fc(u,oe,_e,ze,dt,At,$,R);return;case"select":yt=oe=_e=mt=null;for($ in y)if(ze=y[$],y.hasOwnProperty($)&&ze!=null)switch($){case"value":break;case"multiple":yt=ze;default:_.hasOwnProperty($)||Cr(u,f,$,null,_,ze)}for(R in _)if($=_[R],ze=y[R],_.hasOwnProperty(R)&&($!=null||ze!=null))switch(R){case"value":mt=$;break;case"defaultValue":_e=$;break;case"multiple":oe=$;default:$!==ze&&Cr(u,f,R,$,_,ze)}f=_e,y=oe,_=yt,mt!=null?Rl(u,!!y,mt,!1):!!_!=!!y&&(f!=null?Rl(u,!!y,f,!0):Rl(u,!!y,y?[]:"",!1));return;case"textarea":yt=mt=null;for(_e in y)if(R=y[_e],y.hasOwnProperty(_e)&&R!=null&&!_.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Cr(u,f,_e,null,_,R)}for(oe in _)if(R=_[oe],$=y[oe],_.hasOwnProperty(oe)&&(R!=null||$!=null))switch(oe){case"value":mt=R;break;case"defaultValue":yt=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==$&&Cr(u,f,oe,R,_,$)}$c(u,mt,yt);return;case"option":for(var Sn in y)if(mt=y[Sn],y.hasOwnProperty(Sn)&&mt!=null&&!_.hasOwnProperty(Sn))switch(Sn){case"selected":u.selected=!1;break;default:Cr(u,f,Sn,null,_,mt)}for(ze in _)if(mt=_[ze],yt=y[ze],_.hasOwnProperty(ze)&&mt!==yt&&(mt!=null||yt!=null))switch(ze){case"selected":u.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:Cr(u,f,ze,mt,_,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in y)mt=y[yn],y.hasOwnProperty(yn)&&mt!=null&&!_.hasOwnProperty(yn)&&Cr(u,f,yn,null,_,mt);for(dt in _)if(mt=_[dt],yt=y[dt],_.hasOwnProperty(dt)&&mt!==yt&&(mt!=null||yt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:Cr(u,f,dt,mt,_,yt)}return;default:if(Em(f)){for(var Tr in y)mt=y[Tr],y.hasOwnProperty(Tr)&&mt!==void 0&&!_.hasOwnProperty(Tr)&&T2(u,f,Tr,void 0,_,mt);for(At in _)mt=_[At],yt=y[At],!_.hasOwnProperty(At)||mt===yt||mt===void 0&&yt===void 0||T2(u,f,At,mt,_,yt);return}}for(var at in y)mt=y[at],y.hasOwnProperty(at)&&mt!=null&&!_.hasOwnProperty(at)&&Cr(u,f,at,null,_,mt);for(Ot in _)mt=_[Ot],yt=y[Ot],!_.hasOwnProperty(Ot)||mt===yt||mt==null&&yt==null||Cr(u,f,Ot,mt,_,yt)}var k2=null,A2=null;function mv(u){return u.nodeType===9?u:u.ownerDocument}function Uj(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vj(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function N2(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var R2=null;function LW(){var u=window.event;return u&&u.type==="popstate"?u===R2?!1:(R2=u,!0):(R2=null,!1)}var Hj=typeof setTimeout=="function"?setTimeout:void 0,$W=typeof clearTimeout=="function"?clearTimeout:void 0,qj=typeof Promise=="function"?Promise:void 0,BW=typeof queueMicrotask=="function"?queueMicrotask:typeof qj<"u"?function(u){return qj.resolve(null).then(u).catch(zW)}:Hj;function zW(u){setTimeout(function(){throw u})}function du(u){return u==="head"}function Gj(u,f){var y=f,_=0,R=0;do{var $=y.nextSibling;if(u.removeChild(y),$&&$.nodeType===8)if(y=$.data,y==="/$"){if(0<_&&8>_){y=_;var oe=u.ownerDocument;if(y&1&&hg(oe.documentElement),y&2&&hg(oe.body),y&4)for(y=oe.head,hg(y),oe=y.firstChild;oe;){var _e=oe.nextSibling,ze=oe.nodeName;oe[Lt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||y.removeChild(oe),oe=_e}}if(R===0){u.removeChild($),xg(f);return}R--}else y==="$"||y==="$?"||y==="$!"?R++:_=y.charCodeAt(0)-48;else _=0;y=$}while(y);xg(f)}function I2(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":I2(y),en(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function UW(u,f,y,_){for(;u.nodeType===1;){var R=y;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!_&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(_){if(!u[Lt])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if($=u.getAttribute("rel"),$==="stylesheet"&&u.hasAttribute("data-precedence"))break;if($!==R.rel||u.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||u.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||u.getAttribute("title")!==(R.title==null?null:R.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if($=u.getAttribute("src"),($!==(R.src==null?null:R.src)||u.getAttribute("type")!==(R.type==null?null:R.type)||u.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&$&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var $=R.name==null?null:""+R.name;if(R.type==="hidden"&&u.getAttribute("name")===$)return u}else return u;if(u=to(u.nextSibling),u===null)break}return null}function VW(u,f,y){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=to(u.nextSibling),u===null))return null;return u}function j2(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function HW(u,f){var y=u.ownerDocument;if(u.data!=="$?"||y.readyState==="complete")f();else{var _=function(){f(),y.removeEventListener("DOMContentLoaded",_)};y.addEventListener("DOMContentLoaded",_),u._reactRetry=_}}function to(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var D2=null;function Wj(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return u;f--}else y==="/$"&&f++}u=u.previousSibling}return null}function Kj(u,f,y){switch(f=mv(y),u){case"html":if(u=f.documentElement,!u)throw Error(r(452));return u;case"head":if(u=f.head,!u)throw Error(r(453));return u;case"body":if(u=f.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function hg(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);en(u)}var Rs=new Map,Zj=new Set;function gv(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Jl=ee.d;ee.d={f:qW,r:GW,D:WW,C:KW,L:ZW,m:YW,X:JW,S:XW,M:QW};function qW(){var u=Jl.f(),f=ov();return u||f}function GW(u){var f=Xn(u);f!==null&&f.tag===5&&f.type==="form"?m3(f):Jl.r(u)}var Ih=typeof document>"u"?null:document;function Yj(u,f,y){var _=Ih;if(_&&typeof f=="string"&&f){var R=ri(f);R='link[rel="'+u+'"][href="'+R+'"]',typeof y=="string"&&(R+='[crossorigin="'+y+'"]'),Zj.has(R)||(Zj.add(R),u={rel:u,crossOrigin:y,href:f},_.querySelector(R)===null&&(f=_.createElement("link"),Ja(f,"link",u),$n(f),_.head.appendChild(f)))}}function WW(u){Jl.D(u),Yj("dns-prefetch",u,null)}function KW(u,f){Jl.C(u,f),Yj("preconnect",u,f)}function ZW(u,f,y){Jl.L(u,f,y);var _=Ih;if(_&&u&&f){var R='link[rel="preload"][as="'+ri(f)+'"]';f==="image"&&y&&y.imageSrcSet?(R+='[imagesrcset="'+ri(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(R+='[imagesizes="'+ri(y.imageSizes)+'"]')):R+='[href="'+ri(u)+'"]';var $=R;switch(f){case"style":$=jh(u);break;case"script":$=Dh(u)}Rs.has($)||(u=d({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:u,as:f},y),Rs.set($,u),_.querySelector(R)!==null||f==="style"&&_.querySelector(pg($))||f==="script"&&_.querySelector(mg($))||(f=_.createElement("link"),Ja(f,"link",u),$n(f),_.head.appendChild(f)))}}function YW(u,f){Jl.m(u,f);var y=Ih;if(y&&u){var _=f&&typeof f.as=="string"?f.as:"script",R='link[rel="modulepreload"][as="'+ri(_)+'"][href="'+ri(u)+'"]',$=R;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=Dh(u)}if(!Rs.has($)&&(u=d({rel:"modulepreload",href:u},f),Rs.set($,u),y.querySelector(R)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(mg($)))return}_=y.createElement("link"),Ja(_,"link",u),$n(_),y.head.appendChild(_)}}}function XW(u,f,y){Jl.S(u,f,y);var _=Ih;if(_&&u){var R=Sr(_).hoistableStyles,$=jh(u);f=f||"default";var oe=R.get($);if(!oe){var _e={loading:0,preload:null};if(oe=_.querySelector(pg($)))_e.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},y),(y=Rs.get($))&&M2(u,y);var ze=oe=_.createElement("link");$n(ze),Ja(ze,"link",u),ze._p=new Promise(function(dt,At){ze.onload=dt,ze.onerror=At}),ze.addEventListener("load",function(){_e.loading|=1}),ze.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,yv(oe,f,_)}oe={type:"stylesheet",instance:oe,count:1,state:_e},R.set($,oe)}}}function JW(u,f){Jl.X(u,f);var y=Ih;if(y&&u){var _=Sr(y).hoistableScripts,R=Dh(u),$=_.get(R);$||($=y.querySelector(mg(R)),$||(u=d({src:u,async:!0},f),(f=Rs.get(R))&&O2(u,f),$=y.createElement("script"),$n($),Ja($,"link",u),y.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},_.set(R,$))}}function QW(u,f){Jl.M(u,f);var y=Ih;if(y&&u){var _=Sr(y).hoistableScripts,R=Dh(u),$=_.get(R);$||($=y.querySelector(mg(R)),$||(u=d({src:u,async:!0,type:"module"},f),(f=Rs.get(R))&&O2(u,f),$=y.createElement("script"),$n($),Ja($,"link",u),y.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},_.set(R,$))}}function Xj(u,f,y,_){var R=(R=Ie.current)?gv(R):null;if(!R)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=jh(y.href),y=Sr(R).hoistableStyles,_=y.get(f),_||(_={type:"style",instance:null,count:0,state:null},y.set(f,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=jh(y.href);var $=Sr(R).hoistableStyles,oe=$.get(u);if(oe||(R=R.ownerDocument||R,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(u,oe),($=R.querySelector(pg(u)))&&!$._p&&(oe.instance=$,oe.state.loading=5),Rs.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Rs.set(u,y),$||eK(R,u,y,oe.state))),f&&_===null)throw Error(r(528,""));return oe}if(f&&_!==null)throw Error(r(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Dh(y),y=Sr(R).hoistableScripts,_=y.get(f),_||(_={type:"script",instance:null,count:0,state:null},y.set(f,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function jh(u){return'href="'+ri(u)+'"'}function pg(u){return'link[rel="stylesheet"]['+u+"]"}function Jj(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function eK(u,f,y,_){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?_.loading=1:(f=u.createElement("link"),_.preload=f,f.addEventListener("load",function(){return _.loading|=1}),f.addEventListener("error",function(){return _.loading|=2}),Ja(f,"link",y),$n(f),u.head.appendChild(f))}function Dh(u){return'[src="'+ri(u)+'"]'}function mg(u){return"script[async]"+u}function Qj(u,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var _=u.querySelector('style[data-href~="'+ri(y.href)+'"]');if(_)return f.instance=_,$n(_),_;var R=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return _=(u.ownerDocument||u).createElement("style"),$n(_),Ja(_,"style",R),yv(_,y.precedence,u),f.instance=_;case"stylesheet":R=jh(y.href);var $=u.querySelector(pg(R));if($)return f.state.loading|=4,f.instance=$,$n($),$;_=Jj(y),(R=Rs.get(R))&&M2(_,R),$=(u.ownerDocument||u).createElement("link"),$n($);var oe=$;return oe._p=new Promise(function(_e,ze){oe.onload=_e,oe.onerror=ze}),Ja($,"link",_),f.state.loading|=4,yv($,y.precedence,u),f.instance=$;case"script":return $=Dh(y.src),(R=u.querySelector(mg($)))?(f.instance=R,$n(R),R):(_=y,(R=Rs.get($))&&(_=d({},y),O2(_,R)),u=u.ownerDocument||u,R=u.createElement("script"),$n(R),Ja(R,"link",_),u.head.appendChild(R),f.instance=R);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(_=f.instance,f.state.loading|=4,yv(_,y.precedence,u));return f.instance}function yv(u,f,y){for(var _=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=_.length?_[_.length-1]:null,$=R,oe=0;oe<_.length;oe++){var _e=_[oe];if(_e.dataset.precedence===f)$=_e;else if($!==R)break}$?$.parentNode.insertBefore(u,$.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(u,f.firstChild))}function M2(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function O2(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var bv=null;function e4(u,f,y){if(bv===null){var _=new Map,R=bv=new Map;R.set(y,_)}else R=bv,_=R.get(y),_||(_=new Map,R.set(y,_));if(_.has(u))return _;for(_.set(u,null),y=y.getElementsByTagName(u),R=0;R<y.length;R++){var $=y[R];if(!($[Lt]||$[me]||u==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=$.getAttribute(f)||"";oe=u+oe;var _e=_.get(oe);_e?_e.push($):_.set(oe,[$])}}return _}function t4(u,f,y){u=u.ownerDocument||u,u.head.insertBefore(y,f==="title"?u.querySelector("head > title"):null)}function tK(u,f,y){if(y===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function n4(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var gg=null;function nK(){}function rK(u,f,y){if(gg===null)throw Error(r(475));var _=gg;if(f.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var R=jh(y.href),$=u.querySelector(pg(R));if($){u=$._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(_.count++,_=vv.bind(_),u.then(_,_)),f.state.loading|=4,f.instance=$,$n($);return}$=u.ownerDocument||u,y=Jj(y),(R=Rs.get(R))&&M2(y,R),$=$.createElement("link"),$n($);var oe=$;oe._p=new Promise(function(_e,ze){oe.onload=_e,oe.onerror=ze}),Ja($,"link",y),f.instance=$}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(_.count++,f=vv.bind(_),u.addEventListener("load",f),u.addEventListener("error",f))}}function aK(){if(gg===null)throw Error(r(475));var u=gg;return u.stylesheets&&u.count===0&&P2(u,u.stylesheets),0<u.count?function(f){var y=setTimeout(function(){if(u.stylesheets&&P2(u,u.stylesheets),u.unsuspend){var _=u.unsuspend;u.unsuspend=null,_()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(y)}}:null}function vv(){if(this.count--,this.count===0){if(this.stylesheets)P2(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var wv=null;function P2(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,wv=new Map,f.forEach(iK,u),wv=null,vv.call(u))}function iK(u,f){if(!(f.state.loading&4)){var y=wv.get(u);if(y)var _=y.get(null);else{y=new Map,wv.set(u,y);for(var R=u.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<R.length;$++){var oe=R[$];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(y.set(oe.dataset.precedence,oe),_=oe)}_&&y.set(null,_)}R=f.instance,oe=R.getAttribute("data-precedence"),$=y.get(oe)||_,$===_&&y.set(null,R),y.set(oe,R),this.count++,_=vv.bind(this),R.addEventListener("load",_),R.addEventListener("error",_),$?$.parentNode.insertBefore(R,$.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(R,u.firstChild)),f.state.loading|=4}}var yg={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function sK(u,f,y,_,R,$,oe,_e){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=_,this.onUncaughtError=R,this.onCaughtError=$,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function r4(u,f,y,_,R,$,oe,_e,ze,dt,At,Ot){return u=new sK(u,f,y,oe,_e,ze,dt,Ot),f=1,$===!0&&(f|=24),$=as(3,null,null,f),u.current=$,$.stateNode=u,f=yS(),f.refCount++,u.pooledCache=f,f.refCount++,$.memoizedState={element:_,isDehydrated:y,cache:f},xS($),u}function a4(u){return u?(u=zo,u):zo}function i4(u,f,y,_,R,$){R=a4(R),_.context===null?_.context=R:_.pendingContext=R,_=Jc(f),_.payload={element:y},$=$===void 0?null:$,$!==null&&(_.callback=$),y=Qc(u,_,f),y!==null&&(cs(y,u,f),Wm(y,u,f))}function s4(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function F2(u,f){s4(u,f),(u=u.alternate)&&s4(u,f)}function o4(u){if(u.tag===13){var f=Qs(u,67108864);f!==null&&cs(f,u,67108864),F2(u,67108864)}}var xv=!0;function oK(u,f,y,_){var R=ae.T;ae.T=null;var $=ee.p;try{ee.p=2,L2(u,f,y,_)}finally{ee.p=$,ae.T=R}}function lK(u,f,y,_){var R=ae.T;ae.T=null;var $=ee.p;try{ee.p=8,L2(u,f,y,_)}finally{ee.p=$,ae.T=R}}function L2(u,f,y,_){if(xv){var R=$2(_);if(R===null)C2(u,f,_,_v,y),c4(u,_);else if(uK(R,u,f,y,_))_.stopPropagation();else if(c4(u,_),f&4&&-1<cK.indexOf(u)){for(;R!==null;){var $=Xn(R);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var oe=ve($.pendingLanes);if(oe!==0){var _e=$;for(_e.pendingLanes|=2,_e.entangledLanes|=2;oe;){var ze=1<<31-Zt(oe);_e.entanglements[1]|=ze,oe&=~ze}Go($),(yr&6)===0&&(iv=fe()+500,ug(0))}}break;case 13:_e=Qs($,2),_e!==null&&cs(_e,$,2),ov(),F2($,2)}if($=$2(_),$===null&&C2(u,f,_,_v,y),$===R)break;R=$}R!==null&&_.stopPropagation()}else C2(u,f,_,null,y)}}function $2(u){return u=Wf(u),B2(u)}var _v=null;function B2(u){if(_v=null,u=Rn(u),u!==null){var f=i(u);if(f===null)u=null;else{var y=f.tag;if(y===13){if(u=s(f),u!==null)return u;u=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return _v=u,null}function l4(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case te:return 2;case xe:return 8;case Fe:case Ce:return 32;case We:return 268435456;default:return 32}default:return 32}}var z2=!1,fu=null,hu=null,pu=null,bg=new Map,vg=new Map,mu=[],cK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c4(u,f){switch(u){case"focusin":case"focusout":fu=null;break;case"dragenter":case"dragleave":hu=null;break;case"mouseover":case"mouseout":pu=null;break;case"pointerover":case"pointerout":bg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":vg.delete(f.pointerId)}}function wg(u,f,y,_,R,$){return u===null||u.nativeEvent!==$?(u={blockedOn:f,domEventName:y,eventSystemFlags:_,nativeEvent:$,targetContainers:[R]},f!==null&&(f=Xn(f),f!==null&&o4(f)),u):(u.eventSystemFlags|=_,f=u.targetContainers,R!==null&&f.indexOf(R)===-1&&f.push(R),u)}function uK(u,f,y,_,R){switch(f){case"focusin":return fu=wg(fu,u,f,y,_,R),!0;case"dragenter":return hu=wg(hu,u,f,y,_,R),!0;case"mouseover":return pu=wg(pu,u,f,y,_,R),!0;case"pointerover":var $=R.pointerId;return bg.set($,wg(bg.get($)||null,u,f,y,_,R)),!0;case"gotpointercapture":return $=R.pointerId,vg.set($,wg(vg.get($)||null,u,f,y,_,R)),!0}return!1}function u4(u){var f=Rn(u.target);if(f!==null){var y=i(f);if(y!==null){if(f=y.tag,f===13){if(f=s(y),f!==null){u.blockedOn=f,V(u.priority,function(){if(y.tag===13){var _=ls();_=Dt(_);var R=Qs(y,_);R!==null&&cs(R,y,_),F2(y,_)}});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Sv(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var y=$2(u.nativeEvent);if(y===null){y=u.nativeEvent;var _=new y.constructor(y.type,y);_s=_,y.target.dispatchEvent(_),_s=null}else return f=Xn(y),f!==null&&o4(f),u.blockedOn=y,!1;f.shift()}return!0}function d4(u,f,y){Sv(u)&&y.delete(f)}function dK(){z2=!1,fu!==null&&Sv(fu)&&(fu=null),hu!==null&&Sv(hu)&&(hu=null),pu!==null&&Sv(pu)&&(pu=null),bg.forEach(d4),vg.forEach(d4)}function Ev(u,f){u.blockedOn===f&&(u.blockedOn=null,z2||(z2=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dK)))}var Cv=null;function f4(u){Cv!==u&&(Cv=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Cv===u&&(Cv=null);for(var f=0;f<u.length;f+=3){var y=u[f],_=u[f+1],R=u[f+2];if(typeof _!="function"){if(B2(_||y)===null)continue;break}var $=Xn(y);$!==null&&(u.splice(f,3),f-=3,BS($,{pending:!0,data:R,method:y.method,action:_},_,R))}}))}function xg(u){function f(ze){return Ev(ze,u)}fu!==null&&Ev(fu,u),hu!==null&&Ev(hu,u),pu!==null&&Ev(pu,u),bg.forEach(f),vg.forEach(f);for(var y=0;y<mu.length;y++){var _=mu[y];_.blockedOn===u&&(_.blockedOn=null)}for(;0<mu.length&&(y=mu[0],y.blockedOn===null);)u4(y),y.blockedOn===null&&mu.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(_=0;_<y.length;_+=3){var R=y[_],$=y[_+1],oe=R[Re]||null;if(typeof $=="function")oe||f4(y);else if(oe){var _e=null;if($&&$.hasAttribute("formAction")){if(R=$,oe=$[Re]||null)_e=oe.formAction;else if(B2(R)!==null)continue}else _e=oe.action;typeof _e=="function"?y[_+1]=_e:(y.splice(_,3),_-=3),f4(y)}}}function U2(u){this._internalRoot=u}Tv.prototype.render=U2.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(r(409));var y=f.current,_=ls();i4(y,_,u,f,null,null)},Tv.prototype.unmount=U2.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;i4(u.current,2,null,u,null,null),ov(),f[Ve]=null}};function Tv(u){this._internalRoot=u}Tv.prototype.unstable_scheduleHydration=function(u){if(u){var f=G();u={blockedOn:null,target:u,priority:f};for(var y=0;y<mu.length&&f!==0&&f<mu[y].priority;y++);mu.splice(y,0,u),y===0&&u4(u)}};var h4=t.version;if(h4!=="19.1.0")throw Error(r(527,h4,"19.1.0"));ee.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var fK={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kv.isDisabled&&kv.supportsFiber)try{St=kv.inject(fK),Ft=kv}catch{}}return Sg.createRoot=function(u,f){if(!a(u))throw Error(r(299));var y=!1,_="",R=N3,$=R3,oe=I3,_e=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(R=f.onUncaughtError),f.onCaughtError!==void 0&&($=f.onCaughtError),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(_e=f.unstable_transitionCallbacks)),f=r4(u,1,!1,null,null,y,_,R,$,oe,_e,null),u[Ve]=f.current,E2(u),new U2(f)},Sg.hydrateRoot=function(u,f,y){if(!a(u))throw Error(r(299));var _=!1,R="",$=N3,oe=R3,_e=I3,ze=null,dt=null;return y!=null&&(y.unstable_strictMode===!0&&(_=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&($=y.onUncaughtError),y.onCaughtError!==void 0&&(oe=y.onCaughtError),y.onRecoverableError!==void 0&&(_e=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(ze=y.unstable_transitionCallbacks),y.formState!==void 0&&(dt=y.formState)),f=r4(u,1,!0,f,y??null,_,R,$,oe,_e,ze,dt),f.context=a4(null),y=f.current,_=ls(),_=Dt(_),R=Jc(_),R.callback=null,Qc(y,R,_),y=_,f.current.lanes=y,nt(f,y),Go(f),u[Ve]=f.current,E2(u),new Tv(f)},Sg.version="19.1.0",Sg}var S4;function AK(){if(S4)return q2.exports;S4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),q2.exports=kK(),q2.exports}var NK=AK();const RK=bi(NK);function E4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function hc(...e){return t=>{let n=!1;const r=e.map(a=>{const i=E4(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():E4(e[a],null)}}}}function An(...e){return T.useCallback(hc(...e),e)}function ju(e){const t=IK(e),n=T.forwardRef((r,a)=>{const{children:i,...s}=r,o=T.Children.toArray(i),l=o.find(DK);if(l){const c=l.props.children,d=o.map(h=>h===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:h);return m.jsx(t,{...s,ref:a,children:T.isValidElement(c)?T.cloneElement(c,void 0,d):null})}return m.jsx(t,{...s,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var j8=ju("Slot");function IK(e){const t=T.forwardRef((n,r)=>{const{children:a,...i}=n;if(T.isValidElement(a)){const s=OK(a),o=MK(i,a.props);return a.type!==T.Fragment&&(o.ref=r?hc(r,s):s),T.cloneElement(a,o)}return T.Children.count(a)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var D8=Symbol("radix.slottable");function jK(e){const t=({children:n})=>m.jsx(m.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=D8,t}function DK(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===D8}function MK(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{i(...o),a(...o)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function OK(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function M8(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=M8(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function O8(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=M8(e))&&(r&&(r+=" "),r+=t);return r}const C4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,T4=O8,mA=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return T4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=C4(d)||C4(h);return a[c][p]}),o=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...g}=d;return Object.entries(g).every(v=>{let[b,x]=v;return Array.isArray(x)?x.includes({...i,...o}[b]):{...i,...o}[b]===x})?[...c,h,p]:c},[]);return T4(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},gA="-",PK=e=>{const t=LK(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const o=s.split(gA);return o[0]===""&&o.length!==1&&o.shift(),P8(o,t)||FK(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},P8=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?P8(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(gA);return(s=t.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},k4=/^\[(.+)\]$/,FK=e=>{if(k4.test(e)){const t=k4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},LK=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)_T(n[a],r,a,t);return r},_T=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:A4(t,a);i.classGroupId=n;return}if(typeof a=="function"){if($K(a)){_T(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,s])=>{_T(s,A4(t,i),n,r)})})},A4=(e,t)=>{let n=e;return t.split(gA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$K=e=>e.isThemeGetter,BK=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return a(i,s),s},set(i,s){n.has(i)?n.set(i,s):a(i,s)}}},ST="!",ET=":",zK=ET.length,UK=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let s=0,o=0,l=0,c;for(let v=0;v<a.length;v++){let b=a[v];if(s===0&&o===0){if(b===ET){i.push(a.slice(l,v)),l=v+zK;continue}if(b==="/"){c=v;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const d=i.length===0?a:a.substring(l),h=VK(d),p=h!==d,g=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+ET,i=r;r=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},VK=e=>e.endsWith(ST)?e.substring(0,e.length-1):e.startsWith(ST)?e.substring(1):e,HK=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},qK=e=>({cache:BK(e.cacheSize),parseClassName:UK(e),sortModifiers:HK(e),...PK(e)}),GK=/\s+/,WK=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,s=[],o=e.trim().split(GK);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let x=!!b,w=r(x?v.substring(0,b):v);if(!w){if(!x){l=d+(l.length>0?" "+l:l);continue}if(w=r(v),!w){l=d+(l.length>0?" "+l:l);continue}x=!1}const S=i(p).join(":"),E=g?S+ST:S,C=E+w;if(s.includes(C))continue;s.push(C);const k=a(w,x);for(let j=0;j<k.length;++j){const I=k[j];s.push(E+I)}l=d+(l.length>0?" "+l:l)}return l};function KK(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=F8(t))&&(r&&(r+=" "),r+=n);return r}const F8=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=F8(e[r]))&&(n&&(n+=" "),n+=t);return n};function ZK(e,...t){let n,r,a,i=s;function s(l){const c=t.reduce((d,h)=>h(d),e());return n=qK(c),r=n.cache.get,a=n.cache.set,i=o,o(l)}function o(l){const c=r(l);if(c)return c;const d=WK(l,n);return a(l,d),d}return function(){return i(KK.apply(null,arguments))}}const Ca=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},L8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,YK=/^\d+\/\d+$/,XK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mh=e=>YK.test(e),Hn=e=>!!e&&!Number.isNaN(Number(e)),yu=e=>!!e&&Number.isInteger(Number(e)),Z2=e=>e.endsWith("%")&&Hn(e.slice(0,-1)),Ql=e=>XK.test(e),nZ=()=>!0,rZ=e=>JK.test(e)&&!QK.test(e),B8=()=>!1,aZ=e=>eZ.test(e),iZ=e=>tZ.test(e),sZ=e=>!on(e)&&!ln(e),oZ=e=>$p(e,V8,B8),on=e=>L8.test(e),Fd=e=>$p(e,H8,rZ),Y2=e=>$p(e,fZ,Hn),N4=e=>$p(e,z8,B8),lZ=e=>$p(e,U8,iZ),Av=e=>$p(e,q8,aZ),ln=e=>$8.test(e),Eg=e=>Bp(e,H8),cZ=e=>Bp(e,hZ),R4=e=>Bp(e,z8),uZ=e=>Bp(e,V8),dZ=e=>Bp(e,U8),Nv=e=>Bp(e,q8,!0),$p=(e,t,n)=>{const r=L8.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Bp=(e,t,n=!1)=>{const r=$8.exec(e);return r?r[1]?t(r[1]):n:!1},z8=e=>e==="position"||e==="percentage",U8=e=>e==="image"||e==="url",V8=e=>e==="length"||e==="size"||e==="bg-size",H8=e=>e==="length",fZ=e=>e==="number",hZ=e=>e==="family-name",q8=e=>e==="shadow",pZ=()=>{const e=Ca("color"),t=Ca("font"),n=Ca("text"),r=Ca("font-weight"),a=Ca("tracking"),i=Ca("leading"),s=Ca("breakpoint"),o=Ca("container"),l=Ca("spacing"),c=Ca("radius"),d=Ca("shadow"),h=Ca("inset-shadow"),p=Ca("text-shadow"),g=Ca("drop-shadow"),v=Ca("blur"),b=Ca("perspective"),x=Ca("aspect"),w=Ca("ease"),S=Ca("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),ln,on],j=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],N=()=>[ln,on,l],P=()=>[Mh,"full","auto",...N()],L=()=>[yu,"none","subgrid",ln,on],H=()=>["auto",{span:["full",yu,ln,on]},yu,ln,on],M=()=>[yu,"auto",ln,on],Z=()=>["auto","min","max","fr",ln,on],q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...N()],ee=()=>[Mh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],X=()=>[e,ln,on],ie=()=>[...C(),R4,N4,{position:[ln,on]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",uZ,oZ,{size:[ln,on]}],Q=()=>[Z2,Eg,Fd],ne=()=>["","none","full",c,ln,on],he=()=>["",Hn,Eg,Fd],de=()=>["solid","dashed","dotted","double"],Ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[Hn,Z2,R4,N4],Ae=()=>["","none",v,ln,on],Ee=()=>["none",Hn,ln,on],Pe=()=>["none",Hn,ln,on],Qe=()=>[Hn,ln,on],Le=()=>[Mh,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ql],breakpoint:[Ql],color:[nZ],container:[Ql],"drop-shadow":[Ql],ease:["in","out","in-out"],font:[sZ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ql],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ql],shadow:[Ql],spacing:["px",Hn],text:[Ql],"text-shadow":[Ql],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Mh,on,ln,x]}],container:["container"],columns:[{columns:[Hn,on,ln,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[yu,"auto",ln,on]}],basis:[{basis:[Mh,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Hn,Mh,"auto","initial","none",on]}],grow:[{grow:["",Hn,ln,on]}],shrink:[{shrink:["",Hn,ln,on]}],order:[{order:[yu,"first","last","none",ln,on]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...q(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...q()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":q()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:ee()}],w:[{w:[o,"screen",...ee()]}],"min-w":[{"min-w":[o,"screen","none",...ee()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...ee()]}],h:[{h:["screen",...ee()]}],"min-h":[{"min-h":["screen","none",...ee()]}],"max-h":[{"max-h":["screen",...ee()]}],"font-size":[{text:["base",n,Eg,Fd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ln,Y2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Z2,on]}],"font-family":[{font:[cZ,on,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ln,on]}],"line-clamp":[{"line-clamp":[Hn,"none",ln,Y2]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",ln,on]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ln,on]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:[Hn,"from-font","auto",ln,Fd]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[Hn,"auto",ln,on]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ln,on]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ln,on]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},yu,ln,on],radial:["",ln,on],conic:[yu,ln,on]},dZ,lZ]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...de(),"hidden","none"]}],"divide-style":[{divide:[...de(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...de(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Hn,ln,on]}],"outline-w":[{outline:["",Hn,Eg,Fd]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",d,Nv,Av]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,Nv,Av]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[Hn,Fd]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",p,Nv,Av]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[Hn,ln,on]}],"mix-blend":[{"mix-blend":[...Ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Hn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[ln,on]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Hn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ln,on]}],filter:[{filter:["","none",ln,on]}],blur:[{blur:Ae()}],brightness:[{brightness:[Hn,ln,on]}],contrast:[{contrast:[Hn,ln,on]}],"drop-shadow":[{"drop-shadow":["","none",g,Nv,Av]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",Hn,ln,on]}],"hue-rotate":[{"hue-rotate":[Hn,ln,on]}],invert:[{invert:["",Hn,ln,on]}],saturate:[{saturate:[Hn,ln,on]}],sepia:[{sepia:["",Hn,ln,on]}],"backdrop-filter":[{"backdrop-filter":["","none",ln,on]}],"backdrop-blur":[{"backdrop-blur":Ae()}],"backdrop-brightness":[{"backdrop-brightness":[Hn,ln,on]}],"backdrop-contrast":[{"backdrop-contrast":[Hn,ln,on]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Hn,ln,on]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Hn,ln,on]}],"backdrop-invert":[{"backdrop-invert":["",Hn,ln,on]}],"backdrop-opacity":[{"backdrop-opacity":[Hn,ln,on]}],"backdrop-saturate":[{"backdrop-saturate":[Hn,ln,on]}],"backdrop-sepia":[{"backdrop-sepia":["",Hn,ln,on]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ln,on]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Hn,"initial",ln,on]}],ease:[{ease:["linear","initial",w,ln,on]}],delay:[{delay:[Hn,ln,on]}],animate:[{animate:["none",S,ln,on]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,ln,on]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ee()}],"rotate-x":[{"rotate-x":Ee()}],"rotate-y":[{"rotate-y":Ee()}],"rotate-z":[{"rotate-z":Ee()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[ln,on,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ln,on]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ln,on]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[Hn,Eg,Fd,Y2]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},mZ=ZK(pZ);function xt(...e){return mZ(O8(e))}const gZ=mA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function It({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?j8:"button";return m.jsx(i,{"data-slot":"button",className:xt(gZ({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bZ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),I4=e=>{const t=bZ(e);return t.charAt(0).toUpperCase()+t.slice(1)},G8=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>T.createElement("svg",{ref:l,...vZ,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:G8("lucide",a),...o},[...s.map(([c,d])=>T.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=(e,t)=>{const n=T.forwardRef(({className:r,...a},i)=>T.createElement(wZ,{ref:i,iconNode:t,className:G8(`lucide-${yZ(I4(e))}`,`lucide-${e}`,r),...a}));return n.displayName=I4(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],_Z=Jt("archive",xZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],EZ=Jt("arrow-down",SZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],TZ=Jt("ban",CZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],AZ=Jt("bot",kZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],by=Jt("brain-circuit",NZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ri=Jt("check",RZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IZ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kc=Jt("chevron-down",IZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],W8=Jt("chevron-right",jZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Cf=Jt("chevron-up",DZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],y1=Jt("chevrons-up-down",MZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],df=Jt("circle-alert",OZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yA=Jt("circle-check",PZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],LZ=Jt("circle",FZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Z=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],bA=Jt("clipboard",$Z);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],zZ=Jt("clock",BZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],K8=Jt("cloud-upload",UZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Z8=Jt("code",VZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],qZ=Jt("cog",HZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],WZ=Jt("coins",GZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ZZ=Jt("copy",KZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],XZ=Jt("dollar-sign",YZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],of=Jt("download",JZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],eY=Jt("ellipsis-vertical",QZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],nY=Jt("file-archive",tY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],aY=Jt("file-down",rY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],sY=Jt("file-json",iY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],lY=Jt("file-question",oY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],uY=Jt("file-text",cY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],fY=Jt("file-up",dY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Y8=Jt("file",hY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],X8=Jt("folder-git",pY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],vA=Jt("folder-plus",mY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],j4=Jt("folder-tree",gY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],bY=Jt("folder-up",yY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ff=Jt("folder",vY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],xY=Jt("funnel",wY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Du=Jt("git-branch",_Y);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],J8=Jt("git-commit-horizontal",SY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],Q8=Jt("git-merge",EY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],wA=Jt("git-pull-request",CY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],kY=Jt("grip-vertical",TY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],e5=Jt("hard-drive",AY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],RY=Jt("house",NY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],xA=Jt("image",IY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],t5=Jt("info",jY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Yw=Jt("key",DY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Mn=Jt("loader-circle",MY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],PY=Jt("menu",OY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],n5=Jt("message-square-plus",FY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],CT=Jt("message-square",LY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],BY=Jt("music",$Y);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],UY=Jt("panel-left-close",zY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],HY=Jt("panel-right-close",VY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],_A=Jt("paperclip",qY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],vy=Jt("pen",GY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tf=Jt("plus",WY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],D4=Jt("puzzle",KY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],b1=Jt("refresh-cw",ZY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],XY=Jt("rocket",YY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],SA=Jt("rotate-ccw",JY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],kf=Jt("save",QY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],yo=Jt("search",eX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],nX=Jt("send-horizontal",tX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],TT=Jt("server",rX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kT=Jt("settings",aX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],sX=Jt("sliders-horizontal",iX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],r5=Jt("sparkles",oX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],qg=Jt("square-pen",lX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],uX=Jt("square",cX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fX=Jt("star",dX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],AT=Jt("tags",hX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],mX=Jt("text",pX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Zi=Jt("trash-2",gX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],v1=Jt("triangle-alert",yX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],vX=Jt("upload",bX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xX=Jt("user",wX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],M4=Jt("users",_X);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],EX=Jt("video",SX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],EA=Jt("wrench",CX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ii=Jt("x",TX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],AX=Jt("zap",kX),O4=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:m.jsx("div",{className:xt(n),children:r.map(a=>{var s,o;const i=t==="trigger"?(s=a.triggerRenderer)==null?void 0:s.call(a):(o=a.renderer)==null?void 0:o.call(a);return i?m.jsx(gt.Fragment,{children:i},a.id):null})})},P4=e=>{let t;const n=new Set,r=(c,d)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,p))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,a,o);return o},NX=e=>e?P4(e):P4,RX=e=>e;function IX(e,t=RX){const n=gt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return gt.useDebugValue(n),n}const F4=e=>{const t=NX(e),n=r=>IX(t,r);return Object.assign(n,t),n},qs=e=>e?F4(e):F4;var a5=Symbol.for("immer-nothing"),L4=Symbol.for("immer-draftable"),pr=Symbol.for("immer-state");function Bs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dp=Object.getPrototypeOf;function fp(e){return!!e&&!!e[pr]}function pc(e){var t;return e?i5(e)||Array.isArray(e)||!!e[L4]||!!((t=e.constructor)!=null&&t[L4])||x1(e)||_1(e):!1}var jX=Object.prototype.constructor.toString();function i5(e){if(!e||typeof e!="object")return!1;const t=dp(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===jX}function r0(e,t){w1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function w1(e){const t=e[pr];return t?t.type_:Array.isArray(e)?1:x1(e)?2:_1(e)?3:0}function NT(e,t){return w1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function s5(e,t,n){const r=w1(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function DX(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function x1(e){return e instanceof Map}function _1(e){return e instanceof Set}function $a(e){return e.copy_||e.base_}function RT(e,t){if(x1(e))return new Map(e);if(_1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=i5(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[pr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(dp(e),r)}else{const r=dp(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function CA(e,t=!1){return S1(e)||fp(e)||!pc(e)||(w1(e)>1&&(e.set=e.add=e.clear=e.delete=MX),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>CA(r,!0))),e}function MX(){Bs(2)}function S1(e){return Object.isFrozen(e)}var IT={};function hf(e){const t=IT[e];return t||Bs(0,e),t}function OX(e,t){IT[e]||(IT[e]=t)}var a0;function Xw(){return a0}function PX(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $4(e,t){t&&(hf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jT(e){DT(e),e.drafts_.forEach(FX),e.drafts_=null}function DT(e){e===a0&&(a0=e.parent_)}function B4(e){return a0=PX(a0,e)}function FX(e){const t=e[pr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function z4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[pr].modified_&&(jT(t),Bs(4)),pc(e)&&(e=Jw(t,e),t.parent_||Qw(t,e)),t.patches_&&hf("Patches").generateReplacementPatches_(n[pr].base_,e,t.patches_,t.inversePatches_)):e=Jw(t,n,[]),jT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==a5?e:void 0}function Jw(e,t,n){if(S1(t))return t;const r=t[pr];if(!r)return r0(t,(a,i)=>U4(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Qw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,s=!1;r.type_===3&&(i=new Set(a),a.clear(),s=!0),r0(i,(o,l)=>U4(e,r,a,o,l,n,s)),Qw(e,a,!1),n&&e.patches_&&hf("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function U4(e,t,n,r,a,i,s){if(fp(a)){const o=i&&t&&t.type_!==3&&!NT(t.assigned_,r)?i.concat(r):void 0,l=Jw(e,a,o);if(s5(n,r,l),fp(l))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(pc(a)&&!S1(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jw(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Qw(e,a)}}function Qw(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&CA(t,n)}function LX(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Xw(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=TA;n&&(a=[r],i=i0);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}var TA={get(e,t){if(t===pr)return e;const n=$a(e);if(!NT(n,t))return $X(e,n,t);const r=n[t];return e.finalized_||!pc(r)?r:r===X2(e.base_,t)?(J2(e),e.copy_[t]=s0(r,e)):r},has(e,t){return t in $a(e)},ownKeys(e){return Reflect.ownKeys($a(e))},set(e,t,n){const r=o5($a(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=X2($a(e),t),i=a==null?void 0:a[pr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(DX(n,a)&&(n!==void 0||NT(e.base_,t)))return!0;J2(e),nc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return X2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,J2(e),nc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$a(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Bs(11)},getPrototypeOf(e){return dp(e.base_)},setPrototypeOf(){Bs(12)}},i0={};r0(TA,(e,t)=>{i0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});i0.deleteProperty=function(e,t){return i0.set.call(this,e,t,void 0)};i0.set=function(e,t,n){return TA.set.call(this,e[0],t,n,e[0])};function X2(e,t){const n=e[pr];return(n?$a(n):e)[t]}function $X(e,t,n){var a;const r=o5(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function o5(e,t){if(!(t in e))return;let n=dp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=dp(n)}}function nc(e){e.modified_||(e.modified_=!0,e.parent_&&nc(e.parent_))}function J2(e){e.copy_||(e.copy_=RT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var BX=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...c){return s.produce(l,d=>n.call(this,d,...c))}}typeof n!="function"&&Bs(6),r!==void 0&&typeof r!="function"&&Bs(7);let a;if(pc(t)){const i=B4(this),s=s0(t,void 0);let o=!0;try{a=n(s),o=!1}finally{o?jT(i):DT(i)}return $4(i,r),z4(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===a5&&(a=void 0),this.autoFreeze_&&CA(a,!0),r){const i=[],s=[];hf("Patches").generateReplacementPatches_(t,a,i,s),r(i,s)}return a}else Bs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let r,a;return[this.produce(t,n,(s,o)=>{r=s,a=o}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){pc(e)||Bs(8),fp(e)&&(e=zX(e));const t=B4(this),n=s0(e,void 0);return n[pr].isManual_=!0,DT(t),n}finishDraft(e,t){const n=e&&e[pr];(!n||!n.isManual_)&&Bs(9);const{scope_:r}=n;return $4(r,t),z4(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=hf("Patches").applyPatches_;return fp(e)?r(e,t):this.produce(e,a=>r(a,t))}};function s0(e,t){const n=x1(e)?hf("MapSet").proxyMap_(e,t):_1(e)?hf("MapSet").proxySet_(e,t):LX(e,t);return(t?t.scope_:Xw()).drafts_.push(n),n}function zX(e){return fp(e)||Bs(10,e),l5(e)}function l5(e){if(!pc(e)||S1(e))return e;const t=e[pr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=RT(e,t.scope_.immer_.useStrictShallowCopy_)}else n=RT(e,!0);return r0(n,(r,a)=>{s5(n,r,l5(a))}),t&&(t.finalized_=!1),n}function UX(){class e extends Map{constructor(l,c){super(),this[pr]={type_:2,parent_:c,scope_:c?c.scope_:Xw(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return $a(this[pr]).size}has(l){return $a(this[pr]).has(l)}set(l,c){const d=this[pr];return s(d),(!$a(d).has(l)||$a(d).get(l)!==c)&&(n(d),nc(d),d.assigned_.set(l,!0),d.copy_.set(l,c),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const c=this[pr];return s(c),n(c),nc(c),c.base_.has(l)?c.assigned_.set(l,!1):c.assigned_.delete(l),c.copy_.delete(l),!0}clear(){const l=this[pr];s(l),$a(l).size&&(n(l),nc(l),l.assigned_=new Map,r0(l.base_,c=>{l.assigned_.set(c,!1)}),l.copy_.clear())}forEach(l,c){const d=this[pr];$a(d).forEach((h,p,g)=>{l.call(c,this.get(p),p,this)})}get(l){const c=this[pr];s(c);const d=$a(c).get(l);if(c.finalized_||!pc(d)||d!==c.base_.get(l))return d;const h=s0(d,c);return n(c),c.copy_.set(l,h),h}keys(){return $a(this[pr]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=l.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=l.next();if(c.done)return c;const d=this.get(c.value);return{done:!1,value:[c.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,c){super(),this[pr]={type_:3,parent_:c,scope_:c?c.scope_:Xw(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return $a(this[pr]).size}has(l){const c=this[pr];return s(c),c.copy_?!!(c.copy_.has(l)||c.drafts_.has(l)&&c.copy_.has(c.drafts_.get(l))):c.base_.has(l)}add(l){const c=this[pr];return s(c),this.has(l)||(i(c),nc(c),c.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const c=this[pr];return s(c),i(c),nc(c),c.copy_.delete(l)||(c.drafts_.has(l)?c.copy_.delete(c.drafts_.get(l)):!1)}clear(){const l=this[pr];s(l),$a(l).size&&(i(l),nc(l),l.copy_.clear())}values(){const l=this[pr];return s(l),i(l),l.copy_.values()}entries(){const l=this[pr];return s(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,c){const d=this.values();let h=d.next();for(;!h.done;)l.call(c,h.value,h.value,this),h=d.next()}}function a(o,l){return new r(o,l)}function i(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(pc(l)){const c=s0(l,o);o.drafts_.set(l,c),o.copy_.add(c)}else o.copy_.add(l)}))}function s(o){o.revoked_&&Bs(3,JSON.stringify($a(o)))}OX("MapSet",{proxyMap_:t,proxySet_:a})}var vs=new BX,VX=vs.produce;vs.produceWithPatches.bind(vs);vs.setAutoFreeze.bind(vs);vs.setUseStrictShallowCopy.bind(vs);vs.applyPatches.bind(vs);vs.createDraft.bind(vs);vs.finishDraft.bind(vs);const HX=e=>(t,n,r)=>(r.setState=(a,i,...s)=>{const o=typeof a=="function"?VX(a):a;return t(o,i,...s)},e(r.setState,n,r)),Gs=HX,Ir=qs(Gs((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const s={modId:r,callback:a,order:i};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(s),o.middlewareRegistry[n].sort((l,c)=>(l.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var s;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===a)),((s=i.middlewareRegistry[n])==null?void 0:s.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(s=>{s.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${s.tools[r].modId}". Overwriting with registration from mod "${n}".`),s.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Ow={exports:{}},qX=Ow.exports,V4;function GX(){return V4||(V4=1,function(e,t){(function(n,r){e.exports=r()})(qX,function(){var n=function(A,O){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,re){Y.__proto__=re}||function(Y,re){for(var ce in re)Object.prototype.hasOwnProperty.call(re,ce)&&(Y[ce]=re[ce])})(A,O)},r=function(){return(r=Object.assign||function(A){for(var O,Y=1,re=arguments.length;Y<re;Y++)for(var ce in O=arguments[Y])Object.prototype.hasOwnProperty.call(O,ce)&&(A[ce]=O[ce]);return A}).apply(this,arguments)};function a(A,O,Y){for(var re,ce=0,we=O.length;ce<we;ce++)!re&&ce in O||((re=re||Array.prototype.slice.call(O,0,ce))[ce]=O[ce]);return A.concat(re||Array.prototype.slice.call(O))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Jd,s=Object.keys,o=Array.isArray;function l(A,O){return typeof O!="object"||s(O).forEach(function(Y){A[Y]=O[Y]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,O){return d.call(A,O)}function p(A,O){typeof O=="function"&&(O=O(c(A))),(typeof Reflect>"u"?s:Reflect.ownKeys)(O).forEach(function(Y){v(A,Y,O[Y])})}var g=Object.defineProperty;function v(A,O,Y,re){g(A,O,l(Y&&h(Y,"get")&&typeof Y.get=="function"?{get:Y.get,set:Y.set,configurable:!0}:{value:Y,configurable:!0,writable:!0},re))}function b(A){return{from:function(O){return A.prototype=Object.create(O.prototype),v(A.prototype,"constructor",A),{extend:p.bind(null,A.prototype)}}}}var x=Object.getOwnPropertyDescriptor,w=[].slice;function S(A,O,Y){return w.call(A,O,Y)}function E(A,O){return O(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function j(A,O){if(typeof O=="string"&&h(A,O))return A[O];if(!O)return A;if(typeof O!="string"){for(var Y=[],re=0,ce=O.length;re<ce;++re){var we=j(A,O[re]);Y.push(we)}return Y}var Oe=O.indexOf(".");if(Oe!==-1){var $e=A[O.substr(0,Oe)];return $e==null?void 0:j($e,O.substr(Oe+1))}}function I(A,O,Y){if(A&&O!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof O!="string"&&"length"in O){C(typeof Y!="string"&&"length"in Y);for(var re=0,ce=O.length;re<ce;++re)I(A,O[re],Y[re])}else{var we,Oe,$e=O.indexOf(".");$e!==-1?(we=O.substr(0,$e),(Oe=O.substr($e+1))===""?Y===void 0?o(A)&&!isNaN(parseInt(we))?A.splice(we,1):delete A[we]:A[we]=Y:I($e=!($e=A[we])||!h(A,we)?A[we]={}:$e,Oe,Y)):Y===void 0?o(A)&&!isNaN(parseInt(O))?A.splice(O,1):delete A[O]:A[O]=Y}}function N(A){var O,Y={};for(O in A)h(A,O)&&(Y[O]=A[O]);return Y}var P=[].concat;function L(A){return P.apply([],A)}var St="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(O){return O+A+"Array"})}))).filter(function(A){return i[A]}),H=new Set(St.map(function(A){return i[A]})),M=null;function Z(A){return M=new WeakMap,A=function O(Y){if(!Y||typeof Y!="object")return Y;var re=M.get(Y);if(re)return re;if(o(Y)){re=[],M.set(Y,re);for(var ce=0,we=Y.length;ce<we;++ce)re.push(O(Y[ce]))}else if(H.has(Y.constructor))re=Y;else{var Oe,$e=c(Y);for(Oe in re=$e===Object.prototype?{}:Object.create($e),M.set(Y,re),Y)h(Y,Oe)&&(re[Oe]=O(Y[Oe]))}return re}(A),M=null,A}var q={}.toString;function ue(A){return q.call(A).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ee=typeof ae=="symbol"?function(A){var O;return A!=null&&(O=A[ae])&&O.apply(A)}:function(){return null};function X(A,O){return O=A.indexOf(O),0<=O&&A.splice(O,1),0<=O}var ie={};function B(A){var O,Y,re,ce;if(arguments.length===1){if(o(A))return A.slice();if(this===ie&&typeof A=="string")return[A];if(ce=ee(A)){for(Y=[];!(re=ce.next()).done;)Y.push(re.value);return Y}if(A==null)return[A];if(typeof(O=A.length)!="number")return[A];for(Y=new Array(O);O--;)Y[O]=A[O];return Y}for(O=arguments.length,Y=new Array(O);O--;)Y[O]=arguments[O];return Y}var J=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},it=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ei=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(it),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ne(A,O){this.name=A,this.message=O}function he(A,O){return A+". Errors: "+Object.keys(O).map(function(Y){return O[Y].toString()}).filter(function(Y,re,ce){return ce.indexOf(Y)===re}).join(`
`)}function de(A,O,Y,re){this.failures=O,this.failedKeys=re,this.successCount=Y,this.message=he(A,O)}function Ie(A,O){this.name="BulkError",this.failures=Object.keys(O).map(function(Y){return O[Y]}),this.failuresByPos=O,this.message=he(A,this.failures)}b(ne).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(de).from(ne),b(Ie).from(ne);var Te=Ei.reduce(function(A,O){return A[O]=O+"Error",A},{}),Ae=ne,Ee=Ei.reduce(function(A,O){var Y=O+"Error";function re(ce,we){this.name=Y,ce?typeof ce=="string"?(this.message="".concat(ce).concat(we?`
 `+we:""),this.inner=we||null):typeof ce=="object"&&(this.message="".concat(ce.name," ").concat(ce.message),this.inner=ce):(this.message=Q[O]||Y,this.inner=null)}return b(re).from(Ae),A[O]=re,A},{});Ee.Syntax=SyntaxError,Ee.Type=TypeError,Ee.Range=RangeError;var Pe=it.reduce(function(A,O){return A[O+"Error"]=Ee[O],A},{}),Qe=Ei.reduce(function(A,O){return["Syntax","Type","Range"].indexOf(O)===-1&&(A[O+"Error"]=Ee[O]),A},{});function Le(){}function je(A){return A}function z(A,O){return A==null||A===je?O:function(Y){return O(A(Y))}}function Se(A,O){return function(){A.apply(this,arguments),O.apply(this,arguments)}}function Ne(A,O){return A===Le?O:function(){var Y=A.apply(this,arguments);Y!==void 0&&(arguments[0]=Y);var re=this.onsuccess,ce=this.onerror;this.onsuccess=null,this.onerror=null;var we=O.apply(this,arguments);return re&&(this.onsuccess=this.onsuccess?Se(re,this.onsuccess):re),ce&&(this.onerror=this.onerror?Se(ce,this.onerror):ce),we!==void 0?we:Y}}function fe(A,O){return A===Le?O:function(){A.apply(this,arguments);var Y=this.onsuccess,re=this.onerror;this.onsuccess=this.onerror=null,O.apply(this,arguments),Y&&(this.onsuccess=this.onsuccess?Se(Y,this.onsuccess):Y),re&&(this.onerror=this.onerror?Se(re,this.onerror):re)}}function se(A,O){return A===Le?O:function(Y){var re=A.apply(this,arguments);l(Y,re);var ce=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,Y=O.apply(this,arguments),ce&&(this.onsuccess=this.onsuccess?Se(ce,this.onsuccess):ce),we&&(this.onerror=this.onerror?Se(we,this.onerror):we),re===void 0?Y===void 0?void 0:Y:l(re,Y)}}function te(A,O){return A===Le?O:function(){return O.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function xe(A,O){return A===Le?O:function(){var Y=A.apply(this,arguments);if(Y&&typeof Y.then=="function"){for(var re=this,ce=arguments.length,we=new Array(ce);ce--;)we[ce]=arguments[ce];return Y.then(function(){return O.apply(re,we)})}return O.apply(this,arguments)}}Qe.ModifyError=de,Qe.DexieError=ne,Qe.BulkError=Ie;var Fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ce(A){Fe=A}var We={},Nt=100,St=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,c(A),A];var O=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[O,c(O),A]}(),it=St[0],Ei=St[1],St=St[2],Ei=Ei&&Ei.then,Ft=it&&it.constructor,Mt=!!St,Zt=function(A,O){le.push([A,O]),D&&(queueMicrotask(ge),D=!1)},be=!0,D=!0,W=[],pe=[],De=je,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},ke=ve,le=[],ft=0,vt=[];function F(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var O=this._PSD=ke;if(typeof A!="function"){if(A!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ye(this,this._value))}this._state=null,this._value=null,++O.ref,function Y(re,ce){try{ce(function(we){if(re._state===null){if(we===re)throw new TypeError("A promise cannot be resolved with itself.");var Oe=re._lib&&G();we&&typeof we.then=="function"?Y(re,function($e,Ze){we instanceof F?we._then($e,Ze):we.then($e,Ze)}):(re._state=!0,re._value=we,Me(re)),Oe&&V()}},ye.bind(null,re))}catch(we){ye(re,we)}}(this,A)}var Be={get:function(){var A=ke,O=Rt;function Y(re,ce){var we=this,Oe=!A.global&&(A!==ke||O!==Rt),$e=Oe&&!Xn(),Ze=new F(function(Xe,rt){Ke(we,new nt(Do(re,A,Oe,$e),Do(ce,A,Oe,$e),Xe,rt,A))});return this._consoleTask&&(Ze._consoleTask=this._consoleTask),Ze}return Y.prototype=We,Y},set:function(A){v(this,"then",A&&A.prototype===We?Be:{get:function(){return A},set:Be.set})}};function nt(A,O,Y,re,ce){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof O=="function"?O:null,this.resolve=Y,this.reject=re,this.psd=ce}function ye(A,O){var Y,re;pe.push(O),A._state===null&&(Y=A._lib&&G(),O=De(O),A._state=!1,A._value=O,re=A,W.some(function(ce){return ce._value===re._value})||W.push(re),Me(A),Y&&V())}function Me(A){var O=A._listeners;A._listeners=[];for(var Y=0,re=O.length;Y<re;++Y)Ke(A,O[Y]);var ce=A._PSD;--ce.ref||ce.finalize(),ft===0&&(++ft,Zt(function(){--ft==0&&K()},[]))}function Ke(A,O){if(A._state!==null){var Y=A._state?O.onFulfilled:O.onRejected;if(Y===null)return(A._state?O.resolve:O.reject)(A._value);++O.psd.ref,++ft,Zt(Dt,[Y,A,O])}else A._listeners.push(O)}function Dt(A,O,Y){try{var re,ce=O._value;!O._state&&pe.length&&(pe=[]),re=Fe&&O._consoleTask?O._consoleTask.run(function(){return A(ce)}):A(ce),O._state||pe.indexOf(ce)!==-1||function(we){for(var Oe=W.length;Oe;)if(W[--Oe]._value===we._value)return W.splice(Oe,1)}(O),Y.resolve(re)}catch(we){Y.reject(we)}finally{--ft==0&&K(),--Y.psd.ref||Y.psd.finalize()}}function ge(){jo(ve,function(){G()&&V()})}function G(){var A=be;return D=be=!1,A}function V(){var A,O,Y;do for(;0<le.length;)for(A=le,le=[],Y=A.length,O=0;O<Y;++O){var re=A[O];re[0].apply(null,re[1])}while(0<le.length);D=be=!0}function K(){var A=W;W=[],A.forEach(function(re){re._PSD.onunhandled.call(null,re._value,re)});for(var O=vt.slice(0),Y=O.length;Y;)O[--Y]()}function me(A){return new F(We,!1,A)}function Re(A,O){var Y=ke;return function(){var re=G(),ce=ke;try{return $n(Y,!0),A.apply(this,arguments)}catch(we){O&&O(we)}finally{$n(ce,!1),re&&V()}}}p(F.prototype,{then:Be,_then:function(A,O){Ke(this,new nt(null,null,A,O,ke))},catch:function(A){if(arguments.length===1)return this.then(null,A);var O=A,Y=arguments[1];return typeof O=="function"?this.then(null,function(re){return(re instanceof O?Y:me)(re)}):this.then(null,function(re){return(re&&re.name===O?Y:me)(re)})},finally:function(A){return this.then(function(O){return F.resolve(A()).then(function(){return O})},function(O){return F.resolve(A()).then(function(){return me(O)})})},timeout:function(A,O){var Y=this;return A<1/0?new F(function(re,ce){var we=setTimeout(function(){return ce(new Ee.Timeout(O))},A);Y.then(re,ce).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(F.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=xi(),p(F,{all:function(){var A=B.apply(null,arguments).map(_r);return new F(function(O,Y){A.length===0&&O([]);var re=A.length;A.forEach(function(ce,we){return F.resolve(ce).then(function(Oe){A[we]=Oe,--re||O(A)},Y)})})},resolve:function(A){return A instanceof F?A:A&&typeof A.then=="function"?new F(function(O,Y){A.then(O,Y)}):new F(We,!0,A)},reject:me,race:function(){var A=B.apply(null,arguments).map(_r);return new F(function(O,Y){A.map(function(re){return F.resolve(re).then(O,Y)})})},PSD:{get:function(){return ke},set:function(A){return ke=A}},totalEchoes:{get:function(){return Rt}},newPSD:en,usePSD:jo,scheduler:{get:function(){return Zt},set:function(A){Zt=A}},rejectionMapper:{get:function(){return De},set:function(A){De=A}},follow:function(A,O){return new F(function(Y,re){return en(function(ce,we){var Oe=ke;Oe.unhandleds=[],Oe.onunhandled=we,Oe.finalize=Se(function(){var $e,Ze=this;$e=function(){Ze.unhandleds.length===0?ce():we(Ze.unhandleds[0])},vt.push(function Xe(){$e(),vt.splice(vt.indexOf(Xe),1)}),++ft,Zt(function(){--ft==0&&K()},[])},Oe.finalize),A()},O,Y,re)})}}),Ft&&(Ft.allSettled&&v(F,"allSettled",function(){var A=B.apply(null,arguments).map(_r);return new F(function(O){A.length===0&&O([]);var Y=A.length,re=new Array(Y);A.forEach(function(ce,we){return F.resolve(ce).then(function(Oe){return re[we]={status:"fulfilled",value:Oe}},function(Oe){return re[we]={status:"rejected",reason:Oe}}).then(function(){return--Y||O(re)})})})}),Ft.any&&typeof AggregateError<"u"&&v(F,"any",function(){var A=B.apply(null,arguments).map(_r);return new F(function(O,Y){A.length===0&&Y(new AggregateError([]));var re=A.length,ce=new Array(re);A.forEach(function(we,Oe){return F.resolve(we).then(function($e){return O($e)},function($e){ce[Oe]=$e,--re||Y(new AggregateError(ce))})})})}),Ft.withResolvers&&(F.withResolvers=Ft.withResolvers));var Ve={awaits:0,echoes:0,id:0},pt=0,Kt=[],ut=0,Rt=0,Lt=0;function en(A,O,Y,re){var ce=ke,we=Object.create(ce);return we.parent=ce,we.ref=0,we.global=!1,we.id=++Lt,ve.env,we.env=Mt?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject}:{},O&&l(we,O),++ce.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},re=jo(we,A,Y,re),we.ref===0&&we.finalize(),re}function Rn(){return Ve.id||(Ve.id=++pt),++Ve.awaits,Ve.echoes+=Nt,Ve.id}function Xn(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=Ve.awaits*Nt,!0)}function _r(A){return Ve.echoes&&A&&A.constructor===Ft?(Rn(),A.then(function(O){return Xn(),O},function(O){return Xn(),Kr(O)})):A}function Sr(){var A=Kt[Kt.length-1];Kt.pop(),$n(A,!1)}function $n(A,O){var Y,re=ke;(O?!Ve.echoes||ut++&&A===ke:!ut||--ut&&A===ke)||queueMicrotask(O?(function(ce){++Rt,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.awaits=Ve.id=0),Kt.push(ke),$n(ce,!0)}).bind(null,A):Sr),A!==ke&&(ke=A,re===ve&&(ve.env=xi()),Mt&&(Y=ve.env.Promise,O=A.env,(re.global||A.global)&&(Object.defineProperty(i,"Promise",O.PromiseProp),Y.all=O.all,Y.race=O.race,Y.resolve=O.resolve,Y.reject=O.reject,O.allSettled&&(Y.allSettled=O.allSettled),O.any&&(Y.any=O.any))))}function xi(){var A=i.Promise;return Mt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function jo(A,O,Y,re,ce){var we=ke;try{return $n(A,!0),O(Y,re,ce)}finally{$n(we,!1)}}function Do(A,O,Y,re){return typeof A!="function"?A:function(){var ce=ke;Y&&Rn(),$n(O,!0);try{return A.apply(this,arguments)}finally{$n(ce,!1),re&&queueMicrotask(Xn)}}}function Mo(A){Promise===Ft&&Ve.echoes===0?ut===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+Ei).indexOf("[native code]")===-1&&(Rn=Xn=Le);var Kr=F.reject,Oo="",xs="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bb="String expected.",Xs=[],Al="__dbnames",ns="readonly",gd="readwrite";function Po(A,O){return A?O?function(){return A.apply(this,arguments)&&O.apply(this,arguments)}:A:O}var Nl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Oc(A){return typeof A!="string"||/\./.test(A)?function(O){return O}:function(O){return O[A]===void 0&&A in O&&delete(O=Z(O))[A],O}}function qf(){throw Ee.Type()}function Jn(A,O){try{var Y=vm(A),re=vm(O);if(Y!==re)return Y==="Array"?1:re==="Array"?-1:Y==="binary"?1:re==="binary"?-1:Y==="string"?1:re==="string"?-1:Y==="Date"?1:re!=="Date"?NaN:-1;switch(Y){case"number":case"Date":case"string":return O<A?1:A<O?-1:0;case"binary":return function(ce,we){for(var Oe=ce.length,$e=we.length,Ze=Oe<$e?Oe:$e,Xe=0;Xe<Ze;++Xe)if(ce[Xe]!==we[Xe])return ce[Xe]<we[Xe]?-1:1;return Oe===$e?0:Oe<$e?-1:1}(_i(A),_i(O));case"Array":return function(ce,we){for(var Oe=ce.length,$e=we.length,Ze=Oe<$e?Oe:$e,Xe=0;Xe<Ze;++Xe){var rt=Jn(ce[Xe],we[Xe]);if(rt!==0)return rt}return Oe===$e?0:Oe<$e?-1:1}(A,O)}}catch{}return NaN}function vm(A){var O=typeof A;return O!="object"?O:ArrayBuffer.isView(A)?"binary":(A=ue(A),A==="ArrayBuffer"?"binary":A)}function _i(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var wm=(jr.prototype._trans=function(A,O,Y){var re=this._tx||ke.trans,ce=this.name,we=Fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function Oe(Xe,rt,He){if(!He.schema[ce])throw new Ee.NotFound("Table "+ce+" not part of transaction");return O(He.idbtrans,He)}var $e=G();try{var Ze=re&&re.db._novip===this.db._novip?re===ke.trans?re._promise(A,Oe,Y):en(function(){return re._promise(A,Oe,Y)},{trans:re,transless:ke.transless||ke}):function Xe(rt,He,st,qe){if(rt.idbdb&&(rt._state.openComplete||ke.letThrough||rt._vip)){var tt=rt._createTransaction(He,st,rt._dbSchema);try{tt.create(),rt._state.PR1398_maxLoop=3}catch(ot){return ot.name===Te.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,He,st,qe)})):Kr(ot)}return tt._promise(He,function(ot,Je){return en(function(){return ke.trans=tt,qe(ot,Je,tt)})}).then(function(ot){if(He==="readwrite")try{tt.idbtrans.commit()}catch{}return He==="readonly"?ot:tt._completion.then(function(){return ot})})}if(rt._state.openComplete)return Kr(new Ee.DatabaseClosed(rt._state.dbOpenError));if(!rt._state.isBeingOpened){if(!rt._state.autoOpen)return Kr(new Ee.DatabaseClosed);rt.open().catch(Le)}return rt._state.dbReadyPromise.then(function(){return Xe(rt,He,st,qe)})}(this.db,A,[this.name],Oe);return we&&(Ze._consoleTask=we,Ze=Ze.catch(function(Xe){return console.trace(Xe),Kr(Xe)})),Ze}finally{$e&&V()}},jr.prototype.get=function(A,O){var Y=this;return A&&A.constructor===Object?this.where(A).first(O):A==null?Kr(new Ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(re){return Y.core.get({trans:re,key:A}).then(function(ce){return Y.hook.reading.fire(ce)})}).then(O)},jr.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(o(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var O=s(A);if(O.length===1)return this.where(O[0]).equals(A[O[0]]);var Y=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&O.every(function(Xe){return 0<=$e.keyPath.indexOf(Xe)})){for(var Ze=0;Ze<O.length;++Ze)if(O.indexOf($e.keyPath[Ze])===-1)return!1;return!0}return!1}).sort(function($e,Ze){return $e.keyPath.length-Ze.keyPath.length})[0];if(Y&&this.db._maxKey!==Oo){var we=Y.keyPath.slice(0,O.length);return this.where(we).equals(we.map(function(Ze){return A[Ze]}))}!Y&&Fe&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(O.join("+"),"]"));var re=this.schema.idxByName;function ce($e,Ze){return Jn($e,Ze)===0}var Oe=O.reduce(function(He,Ze){var Xe=He[0],rt=He[1],He=re[Ze],st=A[Ze];return[Xe||He,Xe||!He?Po(rt,He&&He.multi?function(qe){return qe=j(qe,Ze),o(qe)&&qe.some(function(tt){return ce(st,tt)})}:function(qe){return ce(st,j(qe,Ze))}):rt]},[null,null]),we=Oe[0],Oe=Oe[1];return we?this.where(we.name).equals(A[we.keyPath]).filter(Oe):Y?this.filter(Oe):this.where(O).equals("")},jr.prototype.filter=function(A){return this.toCollection().and(A)},jr.prototype.count=function(A){return this.toCollection().count(A)},jr.prototype.offset=function(A){return this.toCollection().offset(A)},jr.prototype.limit=function(A){return this.toCollection().limit(A)},jr.prototype.each=function(A){return this.toCollection().each(A)},jr.prototype.toArray=function(A){return this.toCollection().toArray(A)},jr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},jr.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,o(A)?"[".concat(A.join("+"),"]"):A))},jr.prototype.reverse=function(){return this.toCollection().reverse()},jr.prototype.mapToClass=function(A){var O,Y=this.db,re=this.name;function ce(){return O!==null&&O.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof qf&&(function(Ze,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function rt(){this.constructor=Ze}n(Ze,Xe),Ze.prototype=Xe===null?Object.create(Xe):(rt.prototype=Xe.prototype,new rt)}(ce,O=A),Object.defineProperty(ce.prototype,"db",{get:function(){return Y},enumerable:!1,configurable:!0}),ce.prototype.table=function(){return re},A=ce);for(var we=new Set,Oe=A.prototype;Oe;Oe=c(Oe))Object.getOwnPropertyNames(Oe).forEach(function(Ze){return we.add(Ze)});function $e(Ze){if(!Ze)return Ze;var Xe,rt=Object.create(A.prototype);for(Xe in Ze)if(!we.has(Xe))try{rt[Xe]=Ze[Xe]}catch{}return rt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),A},jr.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},jr.prototype.add=function(A,O){var Y=this,re=this.schema.primKey,ce=re.auto,we=re.keyPath,Oe=A;return we&&ce&&(Oe=Oc(we)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"add",keys:O!=null?[O]:null,values:[Oe]})}).then(function($e){return $e.numFailures?F.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{I(A,we,$e)}catch{}return $e})},jr.prototype.update=function(A,O){return typeof A!="object"||o(A)?this.where(":id").equals(A).modify(O):(A=j(A,this.schema.primKey.keyPath),A===void 0?Kr(new Ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(O))},jr.prototype.put=function(A,O){var Y=this,re=this.schema.primKey,ce=re.auto,we=re.keyPath,Oe=A;return we&&ce&&(Oe=Oc(we)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"put",values:[Oe],keys:O!=null?[O]:null})}).then(function($e){return $e.numFailures?F.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{I(A,we,$e)}catch{}return $e})},jr.prototype.delete=function(A){var O=this;return this._trans("readwrite",function(Y){return O.core.mutate({trans:Y,type:"delete",keys:[A]})}).then(function(Y){return Y.numFailures?F.reject(Y.failures[0]):void 0})},jr.prototype.clear=function(){var A=this;return this._trans("readwrite",function(O){return A.core.mutate({trans:O,type:"deleteRange",range:Nl})}).then(function(O){return O.numFailures?F.reject(O.failures[0]):void 0})},jr.prototype.bulkGet=function(A){var O=this;return this._trans("readonly",function(Y){return O.core.getMany({keys:A,trans:Y}).then(function(re){return re.map(function(ce){return O.hook.reading.fire(ce)})})})},jr.prototype.bulkAdd=function(A,O,Y){var re=this,ce=Array.isArray(O)?O:void 0,we=(Y=Y||(ce?void 0:O))?Y.allKeys:void 0;return this._trans("readwrite",function(Oe){var Xe=re.schema.primKey,$e=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new Ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var Ze=A.length,Xe=Xe&&$e?A.map(Oc(Xe)):A;return re.core.mutate({trans:Oe,type:"add",keys:ce,values:Xe,wantResults:we}).then(function(tt){var He=tt.numFailures,st=tt.results,qe=tt.lastResult,tt=tt.failures;if(He===0)return we?st:qe;throw new Ie("".concat(re.name,".bulkAdd(): ").concat(He," of ").concat(Ze," operations failed"),tt)})})},jr.prototype.bulkPut=function(A,O,Y){var re=this,ce=Array.isArray(O)?O:void 0,we=(Y=Y||(ce?void 0:O))?Y.allKeys:void 0;return this._trans("readwrite",function(Oe){var Xe=re.schema.primKey,$e=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new Ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var Ze=A.length,Xe=Xe&&$e?A.map(Oc(Xe)):A;return re.core.mutate({trans:Oe,type:"put",keys:ce,values:Xe,wantResults:we}).then(function(tt){var He=tt.numFailures,st=tt.results,qe=tt.lastResult,tt=tt.failures;if(He===0)return we?st:qe;throw new Ie("".concat(re.name,".bulkPut(): ").concat(He," of ").concat(Ze," operations failed"),tt)})})},jr.prototype.bulkUpdate=function(A){var O=this,Y=this.core,re=A.map(function(Oe){return Oe.key}),ce=A.map(function(Oe){return Oe.changes}),we=[];return this._trans("readwrite",function(Oe){return Y.getMany({trans:Oe,keys:re,cache:"clone"}).then(function($e){var Ze=[],Xe=[];A.forEach(function(He,st){var qe=He.key,tt=He.changes,ot=$e[st];if(ot){for(var Je=0,ht=Object.keys(tt);Je<ht.length;Je++){var bt=ht[Je],wt=tt[bt];if(bt===O.schema.primKey.keyPath){if(Jn(wt,qe)!==0)throw new Ee.Constraint("Cannot update primary key in bulkUpdate()")}else I(ot,bt,wt)}we.push(st),Ze.push(qe),Xe.push(ot)}});var rt=Ze.length;return Y.mutate({trans:Oe,type:"put",keys:Ze,values:Xe,updates:{keys:re,changeSpecs:ce}}).then(function(He){var st=He.numFailures,qe=He.failures;if(st===0)return rt;for(var tt=0,ot=Object.keys(qe);tt<ot.length;tt++){var Je,ht=ot[tt],bt=we[Number(ht)];bt!=null&&(Je=qe[ht],delete qe[ht],qe[bt]=Je)}throw new Ie("".concat(O.name,".bulkUpdate(): ").concat(st," of ").concat(rt," operations failed"),qe)})})})},jr.prototype.bulkDelete=function(A){var O=this,Y=A.length;return this._trans("readwrite",function(re){return O.core.mutate({trans:re,type:"delete",keys:A})}).then(function(Oe){var ce=Oe.numFailures,we=Oe.lastResult,Oe=Oe.failures;if(ce===0)return we;throw new Ie("".concat(O.name,".bulkDelete(): ").concat(ce," of ").concat(Y," operations failed"),Oe)})},jr);function jr(){}function Fo(A){function O(Oe,$e){if($e){for(var Ze=arguments.length,Xe=new Array(Ze-1);--Ze;)Xe[Ze-1]=arguments[Ze];return Y[Oe].subscribe.apply(null,Xe),A}if(typeof Oe=="string")return Y[Oe]}var Y={};O.addEventType=we;for(var re=1,ce=arguments.length;re<ce;++re)we(arguments[re]);return O;function we(Oe,$e,Ze){if(typeof Oe!="object"){var Xe;$e=$e||te;var rt={subscribers:[],fire:Ze=Ze||Le,subscribe:function(He){rt.subscribers.indexOf(He)===-1&&(rt.subscribers.push(He),rt.fire=$e(rt.fire,He))},unsubscribe:function(He){rt.subscribers=rt.subscribers.filter(function(st){return st!==He}),rt.fire=rt.subscribers.reduce($e,Ze)}};return Y[Oe]=O[Oe]=rt}s(Xe=Oe).forEach(function(He){var st=Xe[He];if(o(st))we(He,Xe[He][0],Xe[He][1]);else{if(st!=="asap")throw new Ee.InvalidArgument("Invalid event config");var qe=we(He,je,function(){for(var tt=arguments.length,ot=new Array(tt);tt--;)ot[tt]=arguments[tt];qe.subscribers.forEach(function(Je){k(function(){Je.apply(null,ot)})})})}})}}function Pc(A,O){return b(O).from({prototype:A}),O}function Js(A,O){return!(A.filter||A.algorithm||A.or)&&(O?A.justLimit:!A.replayFilter)}function xm(A,O){A.filter=Po(A.filter,O)}function ri(A,O,Y){var re=A.replayFilter;A.replayFilter=re?function(){return Po(re(),O())}:O,A.justLimit=Y&&!re}function Fc(A,O){if(A.isPrimKey)return O.primaryKey;var Y=O.getIndexByKeyPath(A.index);if(!Y)throw new Ee.Schema("KeyPath "+A.index+" on object store "+O.name+" is not indexed");return Y}function _m(A,O,Y){var re=Fc(A,O.schema);return O.openCursor({trans:Y,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:re,range:A.range}})}function Lc(A,O,Y,re){var ce=A.replayFilter?Po(A.filter,A.replayFilter()):A.filter;if(A.or){var we={},Oe=function($e,Ze,Xe){var rt,He;ce&&!ce(Ze,Xe,function(st){return Ze.stop(st)},function(st){return Ze.fail(st)})||((He=""+(rt=Ze.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(rt)),h(we,He)||(we[He]=!0,O($e,Ze,Xe)))};return Promise.all([A.or._iterate(Oe,Y),Rl(_m(A,re,Y),A.algorithm,Oe,!A.keysOnly&&A.valueMapper)])}return Rl(_m(A,re,Y),Po(A.algorithm,ce),O,!A.keysOnly&&A.valueMapper)}function Rl(A,O,Y,re){var ce=Re(re?function(we,Oe,$e){return Y(re(we),Oe,$e)}:Y);return A.then(function(we){if(we)return we.start(function(){var Oe=function(){return we.continue()};O&&!O(we,function($e){return Oe=$e},function($e){we.stop($e),Oe=Le},function($e){we.fail($e),Oe=Le})||ce(we.value,we,function($e){return Oe=$e}),Oe()})})}var $c=(Sm.prototype.execute=function(A){var O=this["@@propmod"];if(O.add!==void 0){var Y=O.add;if(o(Y))return a(a([],o(A)?A:[],!0),Y).sort();if(typeof Y=="number")return(Number(A)||0)+Y;if(typeof Y=="bigint")try{return BigInt(A)+Y}catch{return BigInt(0)+Y}throw new TypeError("Invalid term ".concat(Y))}if(O.remove!==void 0){var re=O.remove;if(o(re))return o(A)?A.filter(function(ce){return!re.includes(ce)}).sort():[];if(typeof re=="number")return Number(A)-re;if(typeof re=="bigint")try{return BigInt(A)-re}catch{return BigInt(0)-re}throw new TypeError("Invalid subtrahend ".concat(re))}return Y=(Y=O.replacePrefix)===null||Y===void 0?void 0:Y[0],Y&&typeof A=="string"&&A.startsWith(Y)?O.replacePrefix[1]+A.substring(Y.length):A},Sm);function Sm(A){this["@@propmod"]=A}var Bc=(nr.prototype._read=function(A,O){var Y=this._ctx;return Y.error?Y.table._trans(null,Kr.bind(null,Y.error)):Y.table._trans("readonly",A).then(O)},nr.prototype._write=function(A){var O=this._ctx;return O.error?O.table._trans(null,Kr.bind(null,O.error)):O.table._trans("readwrite",A,"locked")},nr.prototype._addAlgorithm=function(A){var O=this._ctx;O.algorithm=Po(O.algorithm,A)},nr.prototype._iterate=function(A,O){return Lc(this._ctx,A,O,this._ctx.table.core)},nr.prototype.clone=function(A){var O=Object.create(this.constructor.prototype),Y=Object.create(this._ctx);return A&&l(Y,A),O._ctx=Y,O},nr.prototype.raw=function(){return this._ctx.valueMapper=null,this},nr.prototype.each=function(A){var O=this._ctx;return this._read(function(Y){return Lc(O,A,Y,O.table.core)})},nr.prototype.count=function(A){var O=this;return this._read(function(Y){var re=O._ctx,ce=re.table.core;if(Js(re,!0))return ce.count({trans:Y,query:{index:Fc(re,ce.schema),range:re.range}}).then(function(Oe){return Math.min(Oe,re.limit)});var we=0;return Lc(re,function(){return++we,!1},Y,ce).then(function(){return we})}).then(A)},nr.prototype.sortBy=function(A,O){var Y=A.split(".").reverse(),re=Y[0],ce=Y.length-1;function we(Ze,Xe){return Xe?we(Ze[Y[Xe]],Xe-1):Ze[re]}var Oe=this._ctx.dir==="next"?1:-1;function $e(Ze,Xe){return Jn(we(Ze,ce),we(Xe,ce))*Oe}return this.toArray(function(Ze){return Ze.sort($e)}).then(O)},nr.prototype.toArray=function(A){var O=this;return this._read(function(Y){var re=O._ctx;if(re.dir==="next"&&Js(re,!0)&&0<re.limit){var ce=re.valueMapper,we=Fc(re,re.table.core.schema);return re.table.core.query({trans:Y,limit:re.limit,values:!0,query:{index:we,range:re.range}}).then(function($e){return $e=$e.result,ce?$e.map(ce):$e})}var Oe=[];return Lc(re,function($e){return Oe.push($e)},Y,re.table.core).then(function(){return Oe})},A)},nr.prototype.offset=function(A){var O=this._ctx;return A<=0||(O.offset+=A,Js(O)?ri(O,function(){var Y=A;return function(re,ce){return Y===0||(Y===1?--Y:ce(function(){re.advance(Y),Y=0}),!1)}}):ri(O,function(){var Y=A;return function(){return--Y<0}})),this},nr.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),ri(this._ctx,function(){var O=A;return function(Y,re,ce){return--O<=0&&re(ce),0<=O}},!0),this},nr.prototype.until=function(A,O){return xm(this._ctx,function(Y,re,ce){return!A(Y.value)||(re(ce),O)}),this},nr.prototype.first=function(A){return this.limit(1).toArray(function(O){return O[0]}).then(A)},nr.prototype.last=function(A){return this.reverse().first(A)},nr.prototype.filter=function(A){var O;return xm(this._ctx,function(Y){return A(Y.value)}),(O=this._ctx).isMatch=Po(O.isMatch,A),this},nr.prototype.and=function(A){return this.filter(A)},nr.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},nr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},nr.prototype.desc=function(){return this.reverse()},nr.prototype.eachKey=function(A){var O=this._ctx;return O.keysOnly=!O.isMatch,this.each(function(Y,re){A(re.key,re)})},nr.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},nr.prototype.eachPrimaryKey=function(A){var O=this._ctx;return O.keysOnly=!O.isMatch,this.each(function(Y,re){A(re.primaryKey,re)})},nr.prototype.keys=function(A){var O=this._ctx;O.keysOnly=!O.isMatch;var Y=[];return this.each(function(re,ce){Y.push(ce.key)}).then(function(){return Y}).then(A)},nr.prototype.primaryKeys=function(A){var O=this._ctx;if(O.dir==="next"&&Js(O,!0)&&0<O.limit)return this._read(function(re){var ce=Fc(O,O.table.core.schema);return O.table.core.query({trans:re,values:!1,limit:O.limit,query:{index:ce,range:O.range}})}).then(function(re){return re.result}).then(A);O.keysOnly=!O.isMatch;var Y=[];return this.each(function(re,ce){Y.push(ce.primaryKey)}).then(function(){return Y}).then(A)},nr.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},nr.prototype.firstKey=function(A){return this.limit(1).keys(function(O){return O[0]}).then(A)},nr.prototype.lastKey=function(A){return this.reverse().firstKey(A)},nr.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var O={};return xm(this._ctx,function(ce){var re=ce.primaryKey.toString(),ce=h(O,re);return O[re]=!0,!ce}),this},nr.prototype.modify=function(A){var O=this,Y=this._ctx;return this._write(function(re){var ce,we,Oe;Oe=typeof A=="function"?A:(ce=s(A),we=ce.length,function(Je){for(var ht=!1,bt=0;bt<we;++bt){var wt=ce[bt],kt=A[wt],Vt=j(Je,wt);kt instanceof $c?(I(Je,wt,kt.execute(Vt)),ht=!0):Vt!==kt&&(I(Je,wt,kt),ht=!0)}return ht});var $e=Y.table.core,He=$e.schema.primaryKey,Ze=He.outbound,Xe=He.extractKey,rt=200,He=O.db._options.modifyChunkSize;He&&(rt=typeof He=="object"?He[$e.name]||He["*"]||200:He);function st(Je,wt){var bt=wt.failures,wt=wt.numFailures;tt+=Je-wt;for(var kt=0,Vt=s(bt);kt<Vt.length;kt++){var Yt=Vt[kt];qe.push(bt[Yt])}}var qe=[],tt=0,ot=[];return O.clone().primaryKeys().then(function(Je){function ht(wt){var kt=Math.min(rt,Je.length-wt);return $e.getMany({trans:re,keys:Je.slice(wt,wt+kt),cache:"immutable"}).then(function(Vt){for(var Yt=[],Bt=[],Wt=Ze?[]:null,Xt=[],zt=0;zt<kt;++zt){var nn=Vt[zt],pn={value:Z(nn),primKey:Je[wt+zt]};Oe.call(pn,pn.value,pn)!==!1&&(pn.value==null?Xt.push(Je[wt+zt]):Ze||Jn(Xe(nn),Xe(pn.value))===0?(Bt.push(pn.value),Ze&&Wt.push(Je[wt+zt])):(Xt.push(Je[wt+zt]),Yt.push(pn.value)))}return Promise.resolve(0<Yt.length&&$e.mutate({trans:re,type:"add",values:Yt}).then(function(gn){for(var In in gn.failures)Xt.splice(parseInt(In),1);st(Yt.length,gn)})).then(function(){return(0<Bt.length||bt&&typeof A=="object")&&$e.mutate({trans:re,type:"put",keys:Wt,values:Bt,criteria:bt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<wt}).then(function(gn){return st(Bt.length,gn)})}).then(function(){return(0<Xt.length||bt&&A===Gf)&&$e.mutate({trans:re,type:"delete",keys:Xt,criteria:bt,isAdditionalChunk:0<wt}).then(function(gn){return st(Xt.length,gn)})}).then(function(){return Je.length>wt+kt&&ht(wt+rt)})})}var bt=Js(Y)&&Y.limit===1/0&&(typeof A!="function"||A===Gf)&&{index:Y.index,range:Y.range};return ht(0).then(function(){if(0<qe.length)throw new de("Error modifying one or more objects",qe,tt,ot);return Je.length})})})},nr.prototype.delete=function(){var A=this._ctx,O=A.range;return Js(A)&&(A.isPrimKey||O.type===3)?this._write(function(Y){var re=A.table.core.schema.primaryKey,ce=O;return A.table.core.count({trans:Y,query:{index:re,range:ce}}).then(function(we){return A.table.core.mutate({trans:Y,type:"deleteRange",range:ce}).then(function(Oe){var $e=Oe.failures;if(Oe.lastResult,Oe.results,Oe=Oe.numFailures,Oe)throw new de("Could not delete some values",Object.keys($e).map(function(Ze){return $e[Ze]}),we-Oe);return we-Oe})})}):this.modify(Gf)},nr);function nr(){}var Gf=function(A,O){return O.value=null};function vb(A,O){return A<O?-1:A===O?0:1}function Em(A,O){return O<A?-1:A===O?0:1}function Si(A,O,Y){return A=A instanceof jl?new A.Collection(A):A,A._ctx.error=new(Y||TypeError)(O),A}function zc(A){return new A.Collection(A,function(){return Wf("")}).limit(0)}function Il(A,O,Y,re){var ce,we,Oe,$e,Ze,Xe,rt,He=Y.length;if(!Y.every(function(tt){return typeof tt=="string"}))return Si(A,bb);function st(tt){ce=tt==="next"?function(Je){return Je.toUpperCase()}:function(Je){return Je.toLowerCase()},we=tt==="next"?function(Je){return Je.toLowerCase()}:function(Je){return Je.toUpperCase()},Oe=tt==="next"?vb:Em;var ot=Y.map(function(Je){return{lower:we(Je),upper:ce(Je)}}).sort(function(Je,ht){return Oe(Je.lower,ht.lower)});$e=ot.map(function(Je){return Je.upper}),Ze=ot.map(function(Je){return Je.lower}),rt=(Xe=tt)==="next"?"":re}st("next"),A=new A.Collection(A,function(){return _s($e[0],Ze[He-1]+re)}),A._ondirectionchange=function(tt){st(tt)};var qe=0;return A._addAlgorithm(function(tt,ot,Je){var ht=tt.key;if(typeof ht!="string")return!1;var bt=we(ht);if(O(bt,Ze,qe))return!0;for(var wt=null,kt=qe;kt<He;++kt){var Vt=function(Yt,Bt,Wt,Xt,zt,nn){for(var pn=Math.min(Yt.length,Xt.length),gn=-1,In=0;In<pn;++In){var Za=Bt[In];if(Za!==Xt[In])return zt(Yt[In],Wt[In])<0?Yt.substr(0,In)+Wt[In]+Wt.substr(In+1):zt(Yt[In],Xt[In])<0?Yt.substr(0,In)+Xt[In]+Wt.substr(In+1):0<=gn?Yt.substr(0,gn)+Bt[gn]+Wt.substr(gn+1):null;zt(Yt[In],Za)<0&&(gn=In)}return pn<Xt.length&&nn==="next"?Yt+Wt.substr(Yt.length):pn<Yt.length&&nn==="prev"?Yt.substr(0,Wt.length):gn<0?null:Yt.substr(0,gn)+Xt[gn]+Wt.substr(gn+1)}(ht,bt,$e[kt],Ze[kt],Oe,Xe);Vt===null&&wt===null?qe=kt+1:(wt===null||0<Oe(wt,Vt))&&(wt=Vt)}return ot(wt!==null?function(){tt.continue(wt+rt)}:Je),!1}),A}function _s(A,O,Y,re){return{type:2,lower:A,upper:O,lowerOpen:Y,upperOpen:re}}function Wf(A){return{type:1,lower:A,upper:A}}var jl=(Object.defineProperty(Br.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Br.prototype.between=function(A,O,Y,re){Y=Y!==!1,re=re===!0;try{return 0<this._cmp(A,O)||this._cmp(A,O)===0&&(Y||re)&&(!Y||!re)?zc(this):new this.Collection(this,function(){return _s(A,O,!Y,!re)})}catch{return Si(this,xs)}},Br.prototype.equals=function(A){return A==null?Si(this,xs):new this.Collection(this,function(){return Wf(A)})},Br.prototype.above=function(A){return A==null?Si(this,xs):new this.Collection(this,function(){return _s(A,void 0,!0)})},Br.prototype.aboveOrEqual=function(A){return A==null?Si(this,xs):new this.Collection(this,function(){return _s(A,void 0,!1)})},Br.prototype.below=function(A){return A==null?Si(this,xs):new this.Collection(this,function(){return _s(void 0,A,!1,!0)})},Br.prototype.belowOrEqual=function(A){return A==null?Si(this,xs):new this.Collection(this,function(){return _s(void 0,A)})},Br.prototype.startsWith=function(A){return typeof A!="string"?Si(this,bb):this.between(A,A+Oo,!0,!0)},Br.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):Il(this,function(O,Y){return O.indexOf(Y[0])===0},[A],Oo)},Br.prototype.equalsIgnoreCase=function(A){return Il(this,function(O,Y){return O===Y[0]},[A],"")},Br.prototype.anyOfIgnoreCase=function(){var A=B.apply(ie,arguments);return A.length===0?zc(this):Il(this,function(O,Y){return Y.indexOf(O)!==-1},A,"")},Br.prototype.startsWithAnyOfIgnoreCase=function(){var A=B.apply(ie,arguments);return A.length===0?zc(this):Il(this,function(O,Y){return Y.some(function(re){return O.indexOf(re)===0})},A,Oo)},Br.prototype.anyOf=function(){var A=this,O=B.apply(ie,arguments),Y=this._cmp;try{O.sort(Y)}catch{return Si(this,xs)}if(O.length===0)return zc(this);var re=new this.Collection(this,function(){return _s(O[0],O[O.length-1])});re._ondirectionchange=function(we){Y=we==="next"?A._ascending:A._descending,O.sort(Y)};var ce=0;return re._addAlgorithm(function(we,Oe,$e){for(var Ze=we.key;0<Y(Ze,O[ce]);)if(++ce===O.length)return Oe($e),!1;return Y(Ze,O[ce])===0||(Oe(function(){we.continue(O[ce])}),!1)}),re},Br.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Br.prototype.noneOf=function(){var A=B.apply(ie,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return Si(this,xs)}var O=A.reduce(function(Y,re){return Y?Y.concat([[Y[Y.length-1][1],re]]):[[-1/0,re]]},null);return O.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(O,{includeLowers:!1,includeUppers:!1})},Br.prototype.inAnyRange=function(ht,O){var Y=this,re=this._cmp,ce=this._ascending,we=this._descending,Oe=this._min,$e=this._max;if(ht.length===0)return zc(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&ce(bt[0],bt[1])<=0}))return Si(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ee.InvalidArgument);var Ze=!O||O.includeLowers!==!1,Xe=O&&O.includeUppers===!0,rt,He=ce;function st(bt,wt){return He(bt[0],wt[0])}try{(rt=ht.reduce(function(bt,wt){for(var kt=0,Vt=bt.length;kt<Vt;++kt){var Yt=bt[kt];if(re(wt[0],Yt[1])<0&&0<re(wt[1],Yt[0])){Yt[0]=Oe(Yt[0],wt[0]),Yt[1]=$e(Yt[1],wt[1]);break}}return kt===Vt&&bt.push(wt),bt},[])).sort(st)}catch{return Si(this,xs)}var qe=0,tt=Xe?function(bt){return 0<ce(bt,rt[qe][1])}:function(bt){return 0<=ce(bt,rt[qe][1])},ot=Ze?function(bt){return 0<we(bt,rt[qe][0])}:function(bt){return 0<=we(bt,rt[qe][0])},Je=tt,ht=new this.Collection(this,function(){return _s(rt[0][0],rt[rt.length-1][1],!Ze,!Xe)});return ht._ondirectionchange=function(bt){He=bt==="next"?(Je=tt,ce):(Je=ot,we),rt.sort(st)},ht._addAlgorithm(function(bt,wt,kt){for(var Vt,Yt=bt.key;Je(Yt);)if(++qe===rt.length)return wt(kt),!1;return!tt(Vt=Yt)&&!ot(Vt)||(Y._cmp(Yt,rt[qe][1])===0||Y._cmp(Yt,rt[qe][0])===0||wt(function(){He===ce?bt.continue(rt[qe][0]):bt.continue(rt[qe][1])}),!1)}),ht},Br.prototype.startsWithAnyOf=function(){var A=B.apply(ie,arguments);return A.every(function(O){return typeof O=="string"})?A.length===0?zc(this):this.inAnyRange(A.map(function(O){return[O,O+Oo]})):Si(this,"startsWithAnyOf() only works with strings")},Br);function Br(){}function rs(A){return Re(function(O){return Dl(O),A(O.target.error),!1})}function Dl(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var Uc="storagemutated",Ml="x-storagemutated-1",Ia=Fo(null,Uc),Cm=(ai.prototype._lock=function(){return C(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},ai.prototype._unlock=function(){if(C(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{jo(A[1],A[0])}catch{}}return this},ai.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},ai.prototype.create=function(A){var O=this;if(!this.mode)return this;var Y=this.db.idbdb,re=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!Y)switch(re&&re.name){case"DatabaseClosedError":throw new Ee.DatabaseClosed(re);case"MissingAPIError":throw new Ee.MissingAPI(re.message,re);default:throw new Ee.OpenFailed(re)}if(!this.active)throw new Ee.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||Y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(ce){Dl(ce),O._reject(A.error)}),A.onabort=Re(function(ce){Dl(ce),O.active&&O._reject(new Ee.Abort(A.error)),O.active=!1,O.on("abort").fire(ce)}),A.oncomplete=Re(function(){O.active=!1,O._resolve(),"mutatedParts"in A&&Ia.storagemutated.fire(A.mutatedParts)}),this},ai.prototype._promise=function(A,O,Y){var re=this;if(A==="readwrite"&&this.mode!=="readwrite")return Kr(new Ee.ReadOnly("Transaction is readonly"));if(!this.active)return Kr(new Ee.TransactionInactive);if(this._locked())return new F(function(we,Oe){re._blockedFuncs.push([function(){re._promise(A,O,Y).then(we,Oe)},ke])});if(Y)return en(function(){var we=new F(function(Oe,$e){re._lock();var Ze=O(Oe,$e,re);Ze&&Ze.then&&Ze.then(Oe,$e)});return we.finally(function(){return re._unlock()}),we._lib=!0,we});var ce=new F(function(we,Oe){var $e=O(we,Oe,re);$e&&$e.then&&$e.then(we,Oe)});return ce._lib=!0,ce},ai.prototype._root=function(){return this.parent?this.parent._root():this},ai.prototype.waitFor=function(A){var O,Y=this._root(),re=F.resolve(A);Y._waitingFor?Y._waitingFor=Y._waitingFor.then(function(){return re}):(Y._waitingFor=re,Y._waitingQueue=[],O=Y.idbtrans.objectStore(Y.storeNames[0]),function we(){for(++Y._spinCount;Y._waitingQueue.length;)Y._waitingQueue.shift()();Y._waitingFor&&(O.get(-1/0).onsuccess=we)}());var ce=Y._waitingFor;return new F(function(we,Oe){re.then(function($e){return Y._waitingQueue.push(Re(we.bind(null,$e)))},function($e){return Y._waitingQueue.push(Re(Oe.bind(null,$e)))}).finally(function(){Y._waitingFor===ce&&(Y._waitingFor=null)})})},ai.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ee.Abort))},ai.prototype.table=function(A){var O=this._memoizedTables||(this._memoizedTables={});if(h(O,A))return O[A];var Y=this.schema[A];if(!Y)throw new Ee.NotFound("Table "+A+" not part of transaction");return Y=new this.db.Table(A,Y,this),Y.core=this.db.core.table(A),O[A]=Y},ai);function ai(){}function Ss(A,O,Y,re,ce,we,Oe){return{name:A,keyPath:O,unique:Y,multi:re,auto:ce,compound:we,src:(Y&&!Oe?"&":"")+(re?"*":"")+(ce?"++":"")+Kf(O)}}function Kf(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function Vc(A,O,Y){return{name:A,primKey:O,indexes:Y,mappedClass:null,idxByName:(re=function(ce){return[ce.name,ce]},Y.reduce(function(ce,we,Oe){return Oe=re(we,Oe),Oe&&(ce[Oe[0]]=Oe[1]),ce},{}))};var re}var Hc=function(A){try{return A.only([[]]),Hc=function(){return[[]]},[[]]}catch{return Hc=function(){return Oo},Oo}};function qc(A){return A==null?function(){}:typeof A=="string"?(O=A).split(".").length===1?function(Y){return Y[O]}:function(Y){return j(Y,O)}:function(Y){return j(Y,A)};var O}function yd(A){return[].slice.call(A)}var wb=0;function pa(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function Ol(A,O,Ze){function re(Je){if(Je.type===3)return null;if(Je.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var qe=Je.lower,tt=Je.upper,ot=Je.lowerOpen,Je=Je.upperOpen;return qe===void 0?tt===void 0?null:O.upperBound(tt,!!Je):tt===void 0?O.lowerBound(qe,!!ot):O.bound(qe,tt,!!ot,!!Je)}function ce(st){var qe,tt=st.name;return{name:tt,schema:st,mutate:function(ot){var Je=ot.trans,ht=ot.type,bt=ot.keys,wt=ot.values,kt=ot.range;return new Promise(function(Vt,Yt){Vt=Re(Vt);var Bt=Je.objectStore(tt),Wt=Bt.keyPath==null,Xt=ht==="put"||ht==="add";if(!Xt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var zt,nn=(bt||wt||{length:1}).length;if(bt&&wt&&bt.length!==wt.length)throw new Error("Given keys array must have same length as given values array.");if(nn===0)return Vt({numFailures:0,failures:{},results:[],lastResult:void 0});function pn(Da){++Za,Dl(Da)}var gn=[],In=[],Za=0;if(ht==="deleteRange"){if(kt.type===4)return Vt({numFailures:Za,failures:In,results:[],lastResult:void 0});kt.type===3?gn.push(zt=Bt.clear()):gn.push(zt=Bt.delete(re(kt)))}else{var Wt=Xt?Wt?[wt,bt]:[wt,null]:[bt,null],_n=Wt[0],oa=Wt[1];if(Xt)for(var ma=0;ma<nn;++ma)gn.push(zt=oa&&oa[ma]!==void 0?Bt[ht](_n[ma],oa[ma]):Bt[ht](_n[ma])),zt.onerror=pn;else for(ma=0;ma<nn;++ma)gn.push(zt=Bt[ht](_n[ma])),zt.onerror=pn}function Qs(Da){Da=Da.target.result,gn.forEach(function(Cs,zo){return Cs.error!=null&&(In[zo]=Cs.error)}),Vt({numFailures:Za,failures:In,results:ht==="delete"?bt:gn.map(function(Cs){return Cs.result}),lastResult:Da})}zt.onerror=function(Da){pn(Da),Qs(Da)},zt.onsuccess=Qs})},getMany:function(ot){var Je=ot.trans,ht=ot.keys;return new Promise(function(bt,wt){bt=Re(bt);for(var kt,Vt=Je.objectStore(tt),Yt=ht.length,Bt=new Array(Yt),Wt=0,Xt=0,zt=function(gn){gn=gn.target,Bt[gn._pos]=gn.result,++Xt===Wt&&bt(Bt)},nn=rs(wt),pn=0;pn<Yt;++pn)ht[pn]!=null&&((kt=Vt.get(ht[pn]))._pos=pn,kt.onsuccess=zt,kt.onerror=nn,++Wt);Wt===0&&bt(Bt)})},get:function(ot){var Je=ot.trans,ht=ot.key;return new Promise(function(bt,wt){bt=Re(bt);var kt=Je.objectStore(tt).get(ht);kt.onsuccess=function(Vt){return bt(Vt.target.result)},kt.onerror=rs(wt)})},query:(qe=Xe,function(ot){return new Promise(function(Je,ht){Je=Re(Je);var bt,wt,kt,Wt=ot.trans,Vt=ot.values,Yt=ot.limit,zt=ot.query,Bt=Yt===1/0?void 0:Yt,Xt=zt.index,zt=zt.range,Wt=Wt.objectStore(tt),Xt=Xt.isPrimaryKey?Wt:Wt.index(Xt.name),zt=re(zt);if(Yt===0)return Je({result:[]});qe?((Bt=Vt?Xt.getAll(zt,Bt):Xt.getAllKeys(zt,Bt)).onsuccess=function(nn){return Je({result:nn.target.result})},Bt.onerror=rs(ht)):(bt=0,wt=!Vt&&"openKeyCursor"in Xt?Xt.openKeyCursor(zt):Xt.openCursor(zt),kt=[],wt.onsuccess=function(nn){var pn=wt.result;return pn?(kt.push(Vt?pn.value:pn.primaryKey),++bt===Yt?Je({result:kt}):void pn.continue()):Je({result:kt})},wt.onerror=rs(ht))})}),openCursor:function(ot){var Je=ot.trans,ht=ot.values,bt=ot.query,wt=ot.reverse,kt=ot.unique;return new Promise(function(Vt,Yt){Vt=Re(Vt);var Xt=bt.index,Bt=bt.range,Wt=Je.objectStore(tt),Wt=Xt.isPrimaryKey?Wt:Wt.index(Xt.name),Xt=wt?kt?"prevunique":"prev":kt?"nextunique":"next",zt=!ht&&"openKeyCursor"in Wt?Wt.openKeyCursor(re(Bt),Xt):Wt.openCursor(re(Bt),Xt);zt.onerror=rs(Yt),zt.onsuccess=Re(function(nn){var pn,gn,In,Za,_n=zt.result;_n?(_n.___id=++wb,_n.done=!1,pn=_n.continue.bind(_n),gn=(gn=_n.continuePrimaryKey)&&gn.bind(_n),In=_n.advance.bind(_n),Za=function(){throw new Error("Cursor not stopped")},_n.trans=Je,_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=function(){throw new Error("Cursor not started")},_n.fail=Re(Yt),_n.next=function(){var oa=this,ma=1;return this.start(function(){return ma--?oa.continue():oa.stop()}).then(function(){return oa})},_n.start=function(oa){function ma(){if(zt.result)try{oa()}catch(Da){_n.fail(Da)}else _n.done=!0,_n.start=function(){throw new Error("Cursor behind last entry")},_n.stop()}var Qs=new Promise(function(Da,Cs){Da=Re(Da),zt.onerror=rs(Cs),_n.fail=Cs,_n.stop=function(zo){_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=Za,Da(zo)}});return zt.onsuccess=Re(function(Da){zt.onsuccess=ma,ma()}),_n.continue=pn,_n.continuePrimaryKey=gn,_n.advance=In,ma(),Qs},Vt(_n)):Vt(null)},Yt)})},count:function(ot){var Je=ot.query,ht=ot.trans,bt=Je.index,wt=Je.range;return new Promise(function(kt,Vt){var Yt=ht.objectStore(tt),Bt=bt.isPrimaryKey?Yt:Yt.index(bt.name),Yt=re(wt),Bt=Yt?Bt.count(Yt):Bt.count();Bt.onsuccess=Re(function(Wt){return kt(Wt.target.result)}),Bt.onerror=rs(Vt)})}}}var we,Oe,$e,rt=(Oe=Ze,$e=yd((we=A).objectStoreNames),{schema:{name:we.name,tables:$e.map(function(st){return Oe.objectStore(st)}).map(function(st){var qe=st.keyPath,Je=st.autoIncrement,tt=o(qe),ot={},Je={name:st.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:qe==null,compound:tt,keyPath:qe,autoIncrement:Je,unique:!0,extractKey:qc(qe)},indexes:yd(st.indexNames).map(function(ht){return st.index(ht)}).map(function(kt){var bt=kt.name,wt=kt.unique,Vt=kt.multiEntry,kt=kt.keyPath,Vt={name:bt,compound:o(kt),keyPath:kt,unique:wt,multiEntry:Vt,extractKey:qc(kt)};return ot[pa(kt)]=Vt}),getIndexByKeyPath:function(ht){return ot[pa(ht)]}};return ot[":id"]=Je.primaryKey,qe!=null&&(ot[pa(qe)]=Je.primaryKey),Je})},hasGetAll:0<$e.length&&"getAll"in Oe.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ze=rt.schema,Xe=rt.hasGetAll,rt=Ze.tables.map(ce),He={};return rt.forEach(function(st){return He[st.name]=st}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(st){if(!He[st])throw new Error("Table '".concat(st,"' not found"));return He[st]},MIN_KEY:-1/0,MAX_KEY:Hc(O),schema:Ze}}function Zf(A,O,Y,re){var ce=Y.IDBKeyRange;return Y.indexedDB,{dbcore:(re=Ol(O,ce,re),A.dbcore.reduce(function(we,Oe){return Oe=Oe.create,r(r({},we),Oe(we))},re))}}function Lo(A,re){var Y=re.db,re=Zf(A._middlewares,Y,A._deps,re);A.core=re.dbcore,A.tables.forEach(function(ce){var we=ce.name;A.core.schema.tables.some(function(Oe){return Oe.name===we})&&(ce.core=A.core.table(we),A[we]instanceof A.Table&&(A[we].core=ce.core))})}function Yf(A,O,Y,re){Y.forEach(function(ce){var we=re[ce];O.forEach(function(Oe){var $e=function Ze(Xe,rt){return x(Xe,rt)||(Xe=c(Xe))&&Ze(Xe,rt)}(Oe,ce);(!$e||"value"in $e&&$e.value===void 0)&&(Oe===A.Transaction.prototype||Oe instanceof A.Transaction?v(Oe,ce,{get:function(){return this.table(ce)},set:function(Ze){g(this,ce,{value:Ze,writable:!0,configurable:!0,enumerable:!0})}}):Oe[ce]=new A.Table(ce,we))})})}function bd(A,O){O.forEach(function(Y){for(var re in Y)Y[re]instanceof A.Table&&delete Y[re]})}function Tm(A,O){return A._cfg.version-O._cfg.version}function vd(A,O,Y,re){var ce=A._dbSchema;Y.objectStoreNames.contains("$meta")&&!ce.$meta&&(ce.$meta=Vc("$meta",_b("")[0],[]),A._storeNames.push("$meta"));var we=A._createTransaction("readwrite",A._storeNames,ce);we.create(Y),we._completion.catch(re);var Oe=we._reject.bind(we),$e=ke.transless||ke;en(function(){return ke.trans=we,ke.transless=$e,O!==0?(Lo(A,Y),Xe=O,((Ze=we).storeNames.includes("$meta")?Ze.table("$meta").get("version").then(function(rt){return rt??Xe}):F.resolve(Xe)).then(function(rt){return st=rt,qe=we,tt=Y,ot=[],rt=(He=A)._versions,Je=He._dbSchema=Gc(0,He.idbdb,tt),(rt=rt.filter(function(ht){return ht._cfg.version>=st})).length!==0?(rt.forEach(function(ht){ot.push(function(){var bt=Je,wt=ht._cfg.dbschema;eh(He,bt,tt),eh(He,wt,tt),Je=He._dbSchema=wt;var kt=Jf(bt,wt);kt.add.forEach(function(Xt){km(tt,Xt[0],Xt[1].primKey,Xt[1].indexes)}),kt.change.forEach(function(Xt){if(Xt.recreate)throw new Ee.Upgrade("Not yet support for changing primary key");var zt=tt.objectStore(Xt.name);Xt.add.forEach(function(nn){return Qf(zt,nn)}),Xt.change.forEach(function(nn){zt.deleteIndex(nn.name),Qf(zt,nn)}),Xt.del.forEach(function(nn){return zt.deleteIndex(nn)})});var Vt=ht._cfg.contentUpgrade;if(Vt&&ht._cfg.version>st){Lo(He,tt),qe._memoizedTables={};var Yt=N(wt);kt.del.forEach(function(Xt){Yt[Xt]=bt[Xt]}),bd(He,[He.Transaction.prototype]),Yf(He,[He.Transaction.prototype],s(Yt),Yt),qe.schema=Yt;var Bt,Wt=J(Vt);return Wt&&Rn(),kt=F.follow(function(){var Xt;(Bt=Vt(qe))&&Wt&&(Xt=Xn.bind(null,null),Bt.then(Xt,Xt))}),Bt&&typeof Bt.then=="function"?F.resolve(Bt):kt.then(function(){return Bt})}}),ot.push(function(bt){var wt,kt,Vt=ht._cfg.dbschema;wt=Vt,kt=bt,[].slice.call(kt.db.objectStoreNames).forEach(function(Yt){return wt[Yt]==null&&kt.db.deleteObjectStore(Yt)}),bd(He,[He.Transaction.prototype]),Yf(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),qe.schema=He._dbSchema}),ot.push(function(bt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===ht._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(wt){return wt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?F.resolve(ot.shift()(qe.idbtrans)).then(ht):F.resolve()}().then(function(){xb(Je,tt)})):F.resolve();var He,st,qe,tt,ot,Je}).catch(Oe)):(s(ce).forEach(function(rt){km(Y,rt,ce[rt].primKey,ce[rt].indexes)}),Lo(A,Y),void F.follow(function(){return A.on.populate.fire(we)}).catch(Oe));var Ze,Xe})}function Xf(A,O){xb(A._dbSchema,O),O.db.version%10!=0||O.objectStoreNames.contains("$meta")||O.db.createObjectStore("$meta").add(Math.ceil(O.db.version/10-1),"version");var Y=Gc(0,A.idbdb,O);eh(A,A._dbSchema,O);for(var re=0,ce=Jf(Y,A._dbSchema).change;re<ce.length;re++){var we=function(Oe){if(Oe.change.length||Oe.recreate)return console.warn("Unable to patch indexes of table ".concat(Oe.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=O.objectStore(Oe.name);Oe.add.forEach(function(Ze){Fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Oe.name,".").concat(Ze.src)),Qf($e,Ze)})}(ce[re]);if(typeof we=="object")return we.value}}function Jf(A,O){var Y,re={del:[],add:[],change:[]};for(Y in A)O[Y]||re.del.push(Y);for(Y in O){var ce=A[Y],we=O[Y];if(ce){var Oe={name:Y,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ce.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ce.primKey.auto!==we.primKey.auto)Oe.recreate=!0,re.change.push(Oe);else{var $e=ce.idxByName,Ze=we.idxByName,Xe=void 0;for(Xe in $e)Ze[Xe]||Oe.del.push(Xe);for(Xe in Ze){var rt=$e[Xe],He=Ze[Xe];rt?rt.src!==He.src&&Oe.change.push(He):Oe.add.push(He)}(0<Oe.del.length||0<Oe.add.length||0<Oe.change.length)&&re.change.push(Oe)}}else re.add.push([Y,we])}return re}function km(A,O,Y,re){var ce=A.db.createObjectStore(O,Y.keyPath?{keyPath:Y.keyPath,autoIncrement:Y.auto}:{autoIncrement:Y.auto});return re.forEach(function(we){return Qf(ce,we)}),ce}function xb(A,O){s(A).forEach(function(Y){O.db.objectStoreNames.contains(Y)||(Fe&&console.debug("Dexie: Creating missing table",Y),km(O,Y,A[Y].primKey,A[Y].indexes))})}function Qf(A,O){A.createIndex(O.name,O.keyPath,{unique:O.unique,multiEntry:O.multi})}function Gc(A,O,Y){var re={};return S(O.objectStoreNames,0).forEach(function(ce){for(var we=Y.objectStore(ce),Oe=Ss(Kf(Xe=we.keyPath),Xe||"",!0,!1,!!we.autoIncrement,Xe&&typeof Xe!="string",!0),$e=[],Ze=0;Ze<we.indexNames.length;++Ze){var rt=we.index(we.indexNames[Ze]),Xe=rt.keyPath,rt=Ss(rt.name,Xe,!!rt.unique,!!rt.multiEntry,!1,Xe&&typeof Xe!="string",!1);$e.push(rt)}re[ce]=Vc(ce,Oe,$e)}),re}function eh(A,O,Y){for(var re=Y.db.objectStoreNames,ce=0;ce<re.length;++ce){var we=re[ce],Oe=Y.objectStore(we);A._hasGetAll="getAll"in Oe;for(var $e=0;$e<Oe.indexNames.length;++$e){var Ze=Oe.indexNames[$e],Xe=Oe.index(Ze).keyPath,rt=typeof Xe=="string"?Xe:"["+S(Xe).join("+")+"]";!O[we]||(Xe=O[we].idxByName[rt])&&(Xe.name=Ze,delete O[we].idxByName[rt],O[we].idxByName[Ze]=Xe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function _b(A){return A.split(",").map(function(O,Y){var re=(O=O.trim()).replace(/([&*]|\+\+)/g,""),ce=/^\[/.test(re)?re.match(/^\[(.*)\]$/)[1].split("+"):re;return Ss(re,ce||null,/\&/.test(O),/\*/.test(O),/\+\+/.test(O),o(ce),Y===0)})}var rS=(th.prototype._parseStoresSpec=function(A,O){s(A).forEach(function(Y){if(A[Y]!==null){var re=_b(A[Y]),ce=re.shift();if(ce.unique=!0,ce.multi)throw new Ee.Schema("Primary key cannot be multi-valued");re.forEach(function(we){if(we.auto)throw new Ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new Ee.Schema("Index must have a name and cannot be an empty string")}),O[Y]=Vc(Y,ce,re)}})},th.prototype.stores=function(Y){var O=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Y):Y;var Y=O._versions,re={},ce={};return Y.forEach(function(we){l(re,we._cfg.storesSource),ce=we._cfg.dbschema={},we._parseStoresSpec(re,ce)}),O._dbSchema=ce,bd(O,[O._allTables,O,O.Transaction.prototype]),Yf(O,[O._allTables,O,O.Transaction.prototype,this._cfg.tables],s(ce),ce),O._storeNames=s(ce),this},th.prototype.upgrade=function(A){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Le,A),this},th);function th(){}function Am(A,O){var Y=A._dbNamesDB;return Y||(Y=A._dbNamesDB=new Es(Al,{addons:[],indexedDB:A,IDBKeyRange:O})).version(1).stores({dbnames:"name"}),Y.table("dbnames")}function nh(A){return A&&typeof A.databases=="function"}function Nm(A){return en(function(){return ke.letThrough=!0,A()})}function Rm(A){return!("from"in A)}var ja=function(A,O){if(!this){var Y=new ja;return A&&"d"in A&&l(Y,A),Y}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?O:A}:{d:0})};function wd(A,O,Y){var re=Jn(O,Y);if(!isNaN(re)){if(0<re)throw RangeError();if(Rm(A))return l(A,{from:O,to:Y,d:1});var ce=A.l,re=A.r;if(Jn(Y,A.from)<0)return ce?wd(ce,O,Y):A.l={from:O,to:Y,d:1,l:null,r:null},Eb(A);if(0<Jn(O,A.to))return re?wd(re,O,Y):A.r={from:O,to:Y,d:1,l:null,r:null},Eb(A);Jn(O,A.from)<0&&(A.from=O,A.l=null,A.d=re?re.d+1:1),0<Jn(Y,A.to)&&(A.to=Y,A.r=null,A.d=A.l?A.l.d+1:1),Y=!A.r,ce&&!A.l&&Pl(A,ce),re&&Y&&Pl(A,re)}}function Pl(A,O){Rm(O)||function Y(re,Ze){var we=Ze.from,Oe=Ze.to,$e=Ze.l,Ze=Ze.r;wd(re,we,Oe),$e&&Y(re,$e),Ze&&Y(re,Ze)}(A,O)}function Sb(A,O){var Y=rh(O),re=Y.next();if(re.done)return!1;for(var ce=re.value,we=rh(A),Oe=we.next(ce.from),$e=Oe.value;!re.done&&!Oe.done;){if(Jn($e.from,ce.to)<=0&&0<=Jn($e.to,ce.from))return!0;Jn(ce.from,$e.from)<0?ce=(re=Y.next($e.from)).value:$e=(Oe=we.next(ce.from)).value}return!1}function rh(A){var O=Rm(A)?null:{s:0,n:A};return{next:function(Y){for(var re=0<arguments.length;O;)switch(O.s){case 0:if(O.s=1,re)for(;O.n.l&&Jn(Y,O.n.from)<0;)O={up:O,n:O.n.l,s:1};else for(;O.n.l;)O={up:O,n:O.n.l,s:1};case 1:if(O.s=2,!re||Jn(Y,O.n.to)<=0)return{value:O.n,done:!1};case 2:if(O.n.r){O.s=3,O={up:O,n:O.n.r,s:0};continue}case 3:O=O.up}return{done:!0}}}}function Eb(A){var O,Y,re=(((O=A.r)===null||O===void 0?void 0:O.d)||0)-(((Y=A.l)===null||Y===void 0?void 0:Y.d)||0),ce=1<re?"r":re<-1?"l":"";ce&&(O=ce=="r"?"l":"r",Y=r({},A),re=A[ce],A.from=re.from,A.to=re.to,A[ce]=re[ce],Y[ce]=re[O],(A[O]=Y).d=Im(Y)),A.d=Im(A)}function Im(Y){var O=Y.r,Y=Y.l;return(O?Y?Math.max(O.d,Y.d):O.d:Y?Y.d:0)+1}function ah(A,O){return s(O).forEach(function(Y){A[Y]?Pl(A[Y],O[Y]):A[Y]=function re(ce){var we,Oe,$e={};for(we in ce)h(ce,we)&&(Oe=ce[we],$e[we]=!Oe||typeof Oe!="object"||H.has(Oe.constructor)?Oe:re(Oe));return $e}(O[Y])}),A}function jm(A,O){return A.all||O.all||Object.keys(A).some(function(Y){return O[Y]&&Sb(O[Y],A[Y])})}p(ja.prototype,((Ei={add:function(A){return Pl(this,A),this},addKey:function(A){return wd(this,A,A),this},addKeys:function(A){var O=this;return A.forEach(function(Y){return wd(O,Y,Y)}),this},hasKey:function(A){var O=rh(this).next(A).value;return O&&Jn(O.from,A)<=0&&0<=Jn(O.to,A)}})[ae]=function(){return rh(this)},Ei));var Fl={},Dm={},Mm=!1;function ih(A){ah(Dm,A),Mm||(Mm=!0,setTimeout(function(){Mm=!1,Om(Dm,!(Dm={}))},0))}function Om(A,O){O===void 0&&(O=!1);var Y=new Set;if(A.all)for(var re=0,ce=Object.values(Fl);re<ce.length;re++)Cb(Oe=ce[re],A,Y,O);else for(var we in A){var Oe,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(we);$e&&(we=$e[1],$e=$e[2],(Oe=Fl["idb://".concat(we,"/").concat($e)])&&Cb(Oe,A,Y,O))}Y.forEach(function(Ze){return Ze()})}function Cb(A,O,Y,re){for(var ce=[],we=0,Oe=Object.entries(A.queries.query);we<Oe.length;we++){for(var $e=Oe[we],Ze=$e[0],Xe=[],rt=0,He=$e[1];rt<He.length;rt++){var st=He[rt];jm(O,st.obsSet)?st.subscribers.forEach(function(Je){return Y.add(Je)}):re&&Xe.push(st)}re&&ce.push([Ze,Xe])}if(re)for(var qe=0,tt=ce;qe<tt.length;qe++){var ot=tt[qe],Ze=ot[0],Xe=ot[1];A.queries.query[Ze]=Xe}}function aS(A){var O=A._state,Y=A._deps.indexedDB;if(O.isBeingOpened||A.idbdb)return O.dbReadyPromise.then(function(){return O.dbOpenError?Kr(O.dbOpenError):A});O.isBeingOpened=!0,O.dbOpenError=null,O.openComplete=!1;var re=O.openCanceller,ce=Math.round(10*A.verno),we=!1;function Oe(){if(O.openCanceller!==re)throw new Ee.DatabaseClosed("db.open() was cancelled")}function $e(){return new F(function(st,qe){if(Oe(),!Y)throw new Ee.MissingAPI;var tt=A.name,ot=O.autoSchema||!ce?Y.open(tt):Y.open(tt,ce);if(!ot)throw new Ee.MissingAPI;ot.onerror=rs(qe),ot.onblocked=Re(A._fireOnBlocked),ot.onupgradeneeded=Re(function(Je){var ht;rt=ot.transaction,O.autoSchema&&!A._options.allowEmptyDB?(ot.onerror=Dl,rt.abort(),ot.result.close(),(ht=Y.deleteDatabase(tt)).onsuccess=ht.onerror=Re(function(){qe(new Ee.NoSuchDatabase("Database ".concat(tt," doesnt exist")))})):(rt.onerror=rs(qe),Je=Je.oldVersion>Math.pow(2,62)?0:Je.oldVersion,He=Je<1,A.idbdb=ot.result,we&&Xf(A,rt),vd(A,Je/10,rt,qe))},qe),ot.onsuccess=Re(function(){rt=null;var Je,ht,bt,wt,kt,Vt=A.idbdb=ot.result,Yt=S(Vt.objectStoreNames);if(0<Yt.length)try{var Bt=Vt.transaction((wt=Yt).length===1?wt[0]:wt,"readonly");if(O.autoSchema)ht=Vt,bt=Bt,(Je=A).verno=ht.version/10,bt=Je._dbSchema=Gc(0,ht,bt),Je._storeNames=S(ht.objectStoreNames,0),Yf(Je,[Je._allTables],s(bt),bt);else if(eh(A,A._dbSchema,Bt),((kt=Jf(Gc(0,(kt=A).idbdb,Bt),kt._dbSchema)).add.length||kt.change.some(function(Wt){return Wt.add.length||Wt.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Vt.close(),ce=Vt.version+1,we=!0,st($e());Lo(A,Bt)}catch{}Xs.push(A),Vt.onversionchange=Re(function(Wt){O.vcFired=!0,A.on("versionchange").fire(Wt)}),Vt.onclose=Re(function(Wt){A.on("close").fire(Wt)}),He&&(kt=A._deps,Bt=tt,Vt=kt.indexedDB,kt=kt.IDBKeyRange,nh(Vt)||Bt===Al||Am(Vt,kt).put({name:Bt}).catch(Le)),st()},qe)}).catch(function(st){switch(st==null?void 0:st.name){case"UnknownError":if(0<O.PR1398_maxLoop)return O.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ce)return ce=0,$e()}return F.reject(st)})}var Ze,Xe=O.dbReadyResolve,rt=null,He=!1;return F.race([re,(typeof navigator>"u"?F.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(st){function qe(){return indexedDB.databases().finally(st)}Ze=setInterval(qe,100),qe()}).finally(function(){return clearInterval(Ze)}):Promise.resolve()).then($e)]).then(function(){return Oe(),O.onReadyBeingFired=[],F.resolve(Nm(function(){return A.on.ready.fire(A.vip)})).then(function st(){if(0<O.onReadyBeingFired.length){var qe=O.onReadyBeingFired.reduce(xe,Le);return O.onReadyBeingFired=[],F.resolve(Nm(function(){return qe(A.vip)})).then(st)}})}).finally(function(){O.openCanceller===re&&(O.onReadyBeingFired=null,O.isBeingOpened=!1)}).catch(function(st){O.dbOpenError=st;try{rt&&rt.abort()}catch{}return re===O.openCanceller&&A._close(),Kr(st)}).finally(function(){O.openComplete=!0,Xe()}).then(function(){var st;return He&&(st={},A.tables.forEach(function(qe){qe.schema.indexes.forEach(function(tt){tt.name&&(st["idb://".concat(A.name,"/").concat(qe.name,"/").concat(tt.name)]=new ja(-1/0,[[[]]]))}),st["idb://".concat(A.name,"/").concat(qe.name,"/")]=st["idb://".concat(A.name,"/").concat(qe.name,"/:dels")]=new ja(-1/0,[[[]]])}),Ia(Uc).fire(st),Om(st,!0)),A})}function xd(A){function O(we){return A.next(we)}var Y=ce(O),re=ce(function(we){return A.throw(we)});function ce(we){return function(Ze){var $e=we(Ze),Ze=$e.value;return $e.done?Ze:Ze&&typeof Ze.then=="function"?Ze.then(Y,re):o(Ze)?Promise.all(Ze).then(Y,re):Y(Ze)}}return ce(O)()}function $o(A,O,Y){for(var re=o(A)?A.slice():[A],ce=0;ce<Y;++ce)re.push(O);return re}var iS={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(O){var Y=A.table(O),re=Y.schema,ce={},we=[];function Oe(He,st,qe){var tt=pa(He),ot=ce[tt]=ce[tt]||[],Je=He==null?0:typeof He=="string"?1:He.length,ht=0<st,ht=r(r({},qe),{name:ht?"".concat(tt,"(virtual-from:").concat(qe.name,")"):qe.name,lowLevelIndex:qe,isVirtual:ht,keyTail:st,keyLength:Je,extractKey:qc(He),unique:!ht&&qe.unique});return ot.push(ht),ht.isPrimaryKey||we.push(ht),1<Je&&Oe(Je===2?He[0]:He.slice(0,Je-1),st+1,qe),ot.sort(function(bt,wt){return bt.keyTail-wt.keyTail}),ht}O=Oe(re.primaryKey.keyPath,0,re.primaryKey),ce[":id"]=[O];for(var $e=0,Ze=re.indexes;$e<Ze.length;$e++){var Xe=Ze[$e];Oe(Xe.keyPath,0,Xe)}function rt(He){var st,qe=He.query.index;return qe.isVirtual?r(r({},He),{query:{index:qe.lowLevelIndex,range:(st=He.query.range,qe=qe.keyTail,{type:st.type===1?2:st.type,lower:$o(st.lower,st.lowerOpen?A.MAX_KEY:A.MIN_KEY,qe),lowerOpen:!0,upper:$o(st.upper,st.upperOpen?A.MIN_KEY:A.MAX_KEY,qe),upperOpen:!0})}}):He}return r(r({},Y),{schema:r(r({},re),{primaryKey:O,indexes:we,getIndexByKeyPath:function(He){return(He=ce[pa(He)])&&He[0]}}),count:function(He){return Y.count(rt(He))},query:function(He){return Y.query(rt(He))},openCursor:function(He){var st=He.query.index,qe=st.keyTail,tt=st.isVirtual,ot=st.keyLength;return tt?Y.openCursor(rt(He)).then(function(ht){return ht&&Je(ht)}):Y.openCursor(He);function Je(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue($o(bt,He.reverse?A.MAX_KEY:A.MIN_KEY,qe)):He.unique?ht.continue(ht.key.slice(0,ot).concat(He.reverse?A.MIN_KEY:A.MAX_KEY,qe)):ht.continue()}},continuePrimaryKey:{value:function(bt,wt){ht.continuePrimaryKey($o(bt,A.MAX_KEY,qe),wt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function sh(A,O,Y,re){return Y=Y||{},re=re||"",s(A).forEach(function(ce){var we,Oe,$e;h(O,ce)?(we=A[ce],Oe=O[ce],typeof we=="object"&&typeof Oe=="object"&&we&&Oe?($e=ue(we))!==ue(Oe)?Y[re+ce]=O[ce]:$e==="Object"?sh(we,Oe,Y,re+ce+"."):we!==Oe&&(Y[re+ce]=O[ce]):we!==Oe&&(Y[re+ce]=O[ce])):Y[re+ce]=void 0}),s(O).forEach(function(ce){h(A,ce)||(Y[re+ce]=O[ce])}),Y}function oh(A,O){return O.type==="delete"?O.keys:O.keys||O.values.map(A.extractKey)}var Tb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(O){var Y=A.table(O),re=Y.schema.primaryKey;return r(r({},Y),{mutate:function(ce){var we=ke.trans,Oe=we.table(O).hook,$e=Oe.deleting,Ze=Oe.creating,Xe=Oe.updating;switch(ce.type){case"add":if(Ze.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"put":if(Ze.fire===Le&&Xe.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"delete":if($e.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"deleteRange":if($e.fire===Le)break;return we._promise("readwrite",function(){return function He(st,qe,tt){return Y.query({trans:st,values:!1,query:{index:re,range:qe},limit:tt}).then(function(ot){var Je=ot.result;return rt({type:"delete",keys:Je,trans:st}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Je.length<tt?{failures:[],numFailures:0,lastResult:void 0}:He(st,r(r({},qe),{lower:Je[Je.length-1],lowerOpen:!0}),tt)})})}(ce.trans,ce.range,1e4)},!0)}return Y.mutate(ce);function rt(He){var st,qe,tt,ot=ke.trans,Je=He.keys||oh(re,He);if(!Je)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Je}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),st=Y,tt=Je,((qe=He).type==="add"?Promise.resolve([]):st.getMany({trans:qe.trans,keys:tt,cache:"immutable"})).then(function(ht){var bt=Je.map(function(wt,kt){var Vt,Yt,Bt,Wt=ht[kt],Xt={onerror:null,onsuccess:null};return He.type==="delete"?$e.fire.call(Xt,wt,Wt,ot):He.type==="add"||Wt===void 0?(Vt=Ze.fire.call(Xt,wt,He.values[kt],ot),wt==null&&Vt!=null&&(He.keys[kt]=wt=Vt,re.outbound||I(He.values[kt],re.keyPath,wt))):(Vt=sh(Wt,He.values[kt]),(Yt=Xe.fire.call(Xt,Vt,wt,Wt,ot))&&(Bt=He.values[kt],Object.keys(Yt).forEach(function(zt){h(Bt,zt)?Bt[zt]=Yt[zt]:I(Bt,zt,Yt[zt])}))),Xt});return Y.mutate(He).then(function(wt){for(var kt=wt.failures,Vt=wt.results,Yt=wt.numFailures,wt=wt.lastResult,Bt=0;Bt<Je.length;++Bt){var Wt=(Vt||Je)[Bt],Xt=bt[Bt];Wt==null?Xt.onerror&&Xt.onerror(kt[Bt]):Xt.onsuccess&&Xt.onsuccess(He.type==="put"&&ht[Bt]?He.values[Bt]:Wt)}return{failures:kt,results:Vt,numFailures:Yt,lastResult:wt}}).catch(function(wt){return bt.forEach(function(kt){return kt.onerror&&kt.onerror(wt)}),Promise.reject(wt)})})}}})}})}};function Pm(A,O,Y){try{if(!O||O.keys.length<A.length)return null;for(var re=[],ce=0,we=0;ce<O.keys.length&&we<A.length;++ce)Jn(O.keys[ce],A[we])===0&&(re.push(Y?Z(O.values[ce]):O.values[ce]),++we);return re.length===A.length?re:null}catch{return null}}var kb={stack:"dbcore",level:-1,create:function(A){return{table:function(O){var Y=A.table(O);return r(r({},Y),{getMany:function(re){if(!re.cache)return Y.getMany(re);var ce=Pm(re.keys,re.trans._cache,re.cache==="clone");return ce?F.resolve(ce):Y.getMany(re).then(function(we){return re.trans._cache={keys:re.keys,values:re.cache==="clone"?Z(we):we},we})},mutate:function(re){return re.type!=="add"&&(re.trans._cache=null),Y.mutate(re)}})}}}};function Ll(A,O){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!O.schema.primaryKey.outbound}function Ab(A,O){switch(A){case"query":return O.values&&!O.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var sS={stack:"dbcore",level:0,name:"Observability",create:function(A){var O=A.schema.name,Y=new ja(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(re,ce,we){if(ke.subscr&&ce!=="readonly")throw new Ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return A.transaction(re,ce,we)},table:function(re){var ce=A.table(re),we=ce.schema,Oe=we.primaryKey,He=we.indexes,$e=Oe.extractKey,Ze=Oe.outbound,Xe=Oe.autoIncrement&&He.filter(function(qe){return qe.compound&&qe.keyPath.includes(Oe.keyPath)}),rt=r(r({},ce),{mutate:function(qe){function tt(zt){return zt="idb://".concat(O,"/").concat(re,"/").concat(zt),wt[zt]||(wt[zt]=new ja)}var ot,Je,ht,bt=qe.trans,wt=qe.mutatedParts||(qe.mutatedParts={}),kt=tt(""),Vt=tt(":dels"),Yt=qe.type,Xt=qe.type==="deleteRange"?[qe.range]:qe.type==="delete"?[qe.keys]:qe.values.length<50?[oh(Oe,qe).filter(function(zt){return zt}),qe.values]:[],Bt=Xt[0],Wt=Xt[1],Xt=qe.trans._cache;return o(Bt)?(kt.addKeys(Bt),(Xt=Yt==="delete"||Bt.length===Wt.length?Pm(Bt,Xt):null)||Vt.addKeys(Bt),(Xt||Wt)&&(ot=tt,Je=Xt,ht=Wt,we.indexes.forEach(function(zt){var nn=ot(zt.name||"");function pn(In){return In!=null?zt.extractKey(In):null}function gn(In){return zt.multiEntry&&o(In)?In.forEach(function(Za){return nn.addKey(Za)}):nn.addKey(In)}(Je||ht).forEach(function(In,oa){var _n=Je&&pn(Je[oa]),oa=ht&&pn(ht[oa]);Jn(_n,oa)!==0&&(_n!=null&&gn(_n),oa!=null&&gn(oa))})}))):Bt?(Wt={from:(Wt=Bt.lower)!==null&&Wt!==void 0?Wt:A.MIN_KEY,to:(Wt=Bt.upper)!==null&&Wt!==void 0?Wt:A.MAX_KEY},Vt.add(Wt),kt.add(Wt)):(kt.add(Y),Vt.add(Y),we.indexes.forEach(function(zt){return tt(zt.name).add(Y)})),ce.mutate(qe).then(function(zt){return!Bt||qe.type!=="add"&&qe.type!=="put"||(kt.addKeys(zt.results),Xe&&Xe.forEach(function(nn){for(var pn=qe.values.map(function(_n){return nn.extractKey(_n)}),gn=nn.keyPath.findIndex(function(_n){return _n===Oe.keyPath}),In=0,Za=zt.results.length;In<Za;++In)pn[In][gn]=zt.results[In];tt(nn.name).addKeys(pn)})),bt.mutatedParts=ah(bt.mutatedParts||{},wt),zt})}}),He=function(tt){var ot=tt.query,tt=ot.index,ot=ot.range;return[tt,new ja((tt=ot.lower)!==null&&tt!==void 0?tt:A.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:A.MAX_KEY)]},st={get:function(qe){return[Oe,new ja(qe.key)]},getMany:function(qe){return[Oe,new ja().addKeys(qe.keys)]},count:He,query:He,openCursor:He};return s(st).forEach(function(qe){rt[qe]=function(tt){var ot=ke.subscr,Je=!!ot,ht=Ll(ke,ce)&&Ab(qe,tt)?tt.obsSet={}:ot;if(Je){var bt=function(Wt){return Wt="idb://".concat(O,"/").concat(re,"/").concat(Wt),ht[Wt]||(ht[Wt]=new ja)},wt=bt(""),kt=bt(":dels"),ot=st[qe](tt),Je=ot[0],ot=ot[1];if((qe==="query"&&Je.isPrimaryKey&&!tt.values?kt:bt(Je.name||"")).add(ot),!Je.isPrimaryKey){if(qe!=="count"){var Vt=qe==="query"&&Ze&&tt.values&&ce.query(r(r({},tt),{values:!1}));return ce[qe].apply(this,arguments).then(function(Wt){if(qe==="query"){if(Ze&&tt.values)return Vt.then(function(pn){return pn=pn.result,wt.addKeys(pn),Wt});var Xt=tt.values?Wt.result.map($e):Wt.result;(tt.values?wt:kt).addKeys(Xt)}else if(qe==="openCursor"){var zt=Wt,nn=tt.values;return zt&&Object.create(zt,{key:{get:function(){return kt.addKey(zt.primaryKey),zt.key}},primaryKey:{get:function(){var pn=zt.primaryKey;return kt.addKey(pn),pn}},value:{get:function(){return nn&&wt.addKey(zt.primaryKey),zt.value}}})}return Wt})}kt.add(Y)}}return ce[qe].apply(this,arguments)}}),rt}})}};function Nb(A,O,Y){if(Y.numFailures===0)return O;if(O.type==="deleteRange")return null;var re=O.keys?O.keys.length:"values"in O&&O.values?O.values.length:1;return Y.numFailures===re?null:(O=r({},O),o(O.keys)&&(O.keys=O.keys.filter(function(ce,we){return!(we in Y.failures)})),"values"in O&&o(O.values)&&(O.values=O.values.filter(function(ce,we){return!(we in Y.failures)})),O)}function lh(A,O){return Y=A,((re=O).lower===void 0||(re.lowerOpen?0<Jn(Y,re.lower):0<=Jn(Y,re.lower)))&&(A=A,(O=O).upper===void 0||(O.upperOpen?Jn(A,O.upper)<0:Jn(A,O.upper)<=0));var Y,re}function Fm(A,O,st,re,ce,we){if(!st||st.length===0)return A;var Oe=O.query.index,$e=Oe.multiEntry,Ze=O.query.range,Xe=re.schema.primaryKey.extractKey,rt=Oe.extractKey,He=(Oe.lowLevelIndex||Oe).extractKey,st=st.reduce(function(qe,tt){var ot=qe,Je=[];if(tt.type==="add"||tt.type==="put")for(var ht=new ja,bt=tt.values.length-1;0<=bt;--bt){var wt,kt=tt.values[bt],Vt=Xe(kt);ht.hasKey(Vt)||(wt=rt(kt),($e&&o(wt)?wt.some(function(zt){return lh(zt,Ze)}):lh(wt,Ze))&&(ht.addKey(Vt),Je.push(kt)))}switch(tt.type){case"add":var Yt=new ja().addKeys(O.values?qe.map(function(nn){return Xe(nn)}):qe),ot=qe.concat(O.values?Je.filter(function(nn){return nn=Xe(nn),!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}):Je.map(function(nn){return Xe(nn)}).filter(function(nn){return!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}));break;case"put":var Bt=new ja().addKeys(tt.values.map(function(nn){return Xe(nn)}));ot=qe.filter(function(nn){return!Bt.hasKey(O.values?Xe(nn):nn)}).concat(O.values?Je:Je.map(function(nn){return Xe(nn)}));break;case"delete":var Wt=new ja().addKeys(tt.keys);ot=qe.filter(function(nn){return!Wt.hasKey(O.values?Xe(nn):nn)});break;case"deleteRange":var Xt=tt.range;ot=qe.filter(function(nn){return!lh(Xe(nn),Xt)})}return ot},A);return st===A?A:(st.sort(function(qe,tt){return Jn(He(qe),He(tt))||Jn(Xe(qe),Xe(tt))}),O.limit&&O.limit<1/0&&(st.length>O.limit?st.length=O.limit:A.length===O.limit&&st.length<O.limit&&(ce.dirty=!0)),we?Object.freeze(st):st)}function Wc(A,O){return Jn(A.lower,O.lower)===0&&Jn(A.upper,O.upper)===0&&!!A.lowerOpen==!!O.lowerOpen&&!!A.upperOpen==!!O.upperOpen}function _d(A,O){return function(Y,re,ce,we){if(Y===void 0)return re!==void 0?-1:0;if(re===void 0)return 1;if((re=Jn(Y,re))===0){if(ce&&we)return 0;if(ce)return 1;if(we)return-1}return re}(A.lower,O.lower,A.lowerOpen,O.lowerOpen)<=0&&0<=function(Y,re,ce,we){if(Y===void 0)return re!==void 0?1:0;if(re===void 0)return-1;if((re=Jn(Y,re))===0){if(ce&&we)return 0;if(ce)return-1;if(we)return 1}return re}(A.upper,O.upper,A.upperOpen,O.upperOpen)}function oS(A,O,Y,re){A.subscribers.add(Y),re.addEventListener("abort",function(){var ce,we;A.subscribers.delete(Y),A.subscribers.size===0&&(ce=A,we=O,setTimeout(function(){ce.subscribers.size===0&&X(we,ce)},3e3))})}var ch={stack:"dbcore",level:0,name:"Cache",create:function(A){var O=A.schema.name;return r(r({},A),{transaction:function(Y,re,ce){var we,Oe,$e=A.transaction(Y,re,ce);return re==="readwrite"&&(Oe=(we=new AbortController).signal,ce=function(Ze){return function(){if(we.abort(),re==="readwrite"){for(var Xe=new Set,rt=0,He=Y;rt<He.length;rt++){var st=He[rt],qe=Fl["idb://".concat(O,"/").concat(st)];if(qe){var tt=A.table(st),ot=qe.optimisticOps.filter(function(nn){return nn.trans===$e});if($e._explicit&&Ze&&$e.mutatedParts)for(var Je=0,ht=Object.values(qe.queries.query);Je<ht.length;Je++)for(var bt=0,wt=(Yt=ht[Je]).slice();bt<wt.length;bt++)jm((Bt=wt[bt]).obsSet,$e.mutatedParts)&&(X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)}));else if(0<ot.length){qe.optimisticOps=qe.optimisticOps.filter(function(nn){return nn.trans!==$e});for(var kt=0,Vt=Object.values(qe.queries.query);kt<Vt.length;kt++)for(var Yt,Bt,Wt,Xt=0,zt=(Yt=Vt[kt]).slice();Xt<zt.length;Xt++)(Bt=zt[Xt]).res!=null&&$e.mutatedParts&&(Ze&&!Bt.dirty?(Wt=Object.isFrozen(Bt.res),Wt=Fm(Bt.res,Bt.req,ot,tt,Bt,Wt),Bt.dirty?(X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)})):Wt!==Bt.res&&(Bt.res=Wt,Bt.promise=F.resolve({result:Wt}))):(Bt.dirty&&X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)})))}}}Xe.forEach(function(nn){return nn()})}}},$e.addEventListener("abort",ce(!1),{signal:Oe}),$e.addEventListener("error",ce(!1),{signal:Oe}),$e.addEventListener("complete",ce(!0),{signal:Oe})),$e},table:function(Y){var re=A.table(Y),ce=re.schema.primaryKey;return r(r({},re),{mutate:function(we){var Oe=ke.trans;if(ce.outbound||Oe.db._options.cache==="disabled"||Oe.explicit||Oe.idbtrans.mode!=="readwrite")return re.mutate(we);var $e=Fl["idb://".concat(O,"/").concat(Y)];return $e?(Oe=re.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||oh(ce,we).some(function(Ze){return Ze==null}))?($e.optimisticOps.push(we),we.mutatedParts&&ih(we.mutatedParts),Oe.then(function(Ze){0<Ze.numFailures&&(X($e.optimisticOps,we),(Ze=Nb(0,we,Ze))&&$e.optimisticOps.push(Ze),we.mutatedParts&&ih(we.mutatedParts))}),Oe.catch(function(){X($e.optimisticOps,we),we.mutatedParts&&ih(we.mutatedParts)})):Oe.then(function(Ze){var Xe=Nb(0,r(r({},we),{values:we.values.map(function(rt,He){var st;return Ze.failures[He]?rt:(rt=(st=ce.keyPath)!==null&&st!==void 0&&st.includes(".")?Z(rt):r({},rt),I(rt,ce.keyPath,Ze.results[He]),rt)})}),Ze);$e.optimisticOps.push(Xe),queueMicrotask(function(){return we.mutatedParts&&ih(we.mutatedParts)})}),Oe):re.mutate(we)},query:function(we){if(!Ll(ke,re)||!Ab("query",we))return re.query(we);var Oe=((Xe=ke.trans)===null||Xe===void 0?void 0:Xe.db._options.cache)==="immutable",He=ke,$e=He.requery,Ze=He.signal,Xe=function(tt,ot,Je,ht){var bt=Fl["idb://".concat(tt,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Je]))return[null,!1,bt,null];var wt=ot[(ht.query?ht.query.index.name:null)||""];if(!wt)return[null,!1,bt,null];switch(Je){case"query":var kt=wt.find(function(Vt){return Vt.req.limit===ht.limit&&Vt.req.values===ht.values&&Wc(Vt.req.query.range,ht.query.range)});return kt?[kt,!0,bt,wt]:[wt.find(function(Vt){return("limit"in Vt.req?Vt.req.limit:1/0)>=ht.limit&&(!ht.values||Vt.req.values)&&_d(Vt.req.query.range,ht.query.range)}),!1,bt,wt];case"count":return kt=wt.find(function(Vt){return Wc(Vt.req.query.range,ht.query.range)}),[kt,!!kt,bt,wt]}}(O,Y,"query",we),rt=Xe[0],He=Xe[1],st=Xe[2],qe=Xe[3];return rt&&He?rt.obsSet=we.obsSet:(He=re.query(we).then(function(tt){var ot=tt.result;if(rt&&(rt.res=ot),Oe){for(var Je=0,ht=ot.length;Je<ht;++Je)Object.freeze(ot[Je]);Object.freeze(ot)}else tt.result=Z(ot);return tt}).catch(function(tt){return qe&&rt&&X(qe,rt),Promise.reject(tt)}),rt={obsSet:we.obsSet,promise:He,subscribers:new Set,type:"query",req:we,dirty:!1},qe?qe.push(rt):(qe=[rt],(st=st||(Fl["idb://".concat(O,"/").concat(Y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=qe)),oS(rt,qe,$e,Ze),rt.promise.then(function(tt){return{result:Fm(tt.result,we,st==null?void 0:st.optimisticOps,re,rt,Oe)}})}})}})}};function Sd(A,O){return new Proxy(A,{get:function(Y,re,ce){return re==="db"?O:Reflect.get(Y,re,ce)}})}var Es=(zr.prototype.version=function(A){if(isNaN(A)||A<.1)throw new Ee.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new Ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var O=this._versions,Y=O.filter(function(re){return re._cfg.version===A})[0];return Y||(Y=new this.Version(A),O.push(Y),O.sort(Tm),Y.stores({}),this._state.autoSchema=!1,Y)},zr.prototype._whenReady=function(A){var O=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?A():new F(function(Y,re){if(O._state.openComplete)return re(new Ee.DatabaseClosed(O._state.dbOpenError));if(!O._state.isBeingOpened){if(!O._state.autoOpen)return void re(new Ee.DatabaseClosed);O.open().catch(Le)}O._state.dbReadyPromise.then(Y,re)}).then(A)},zr.prototype.use=function(A){var O=A.stack,Y=A.create,re=A.level,ce=A.name;return ce&&this.unuse({stack:O,name:ce}),A=this._middlewares[O]||(this._middlewares[O]=[]),A.push({stack:O,create:Y,level:re??10,name:ce}),A.sort(function(we,Oe){return we.level-Oe.level}),this},zr.prototype.unuse=function(A){var O=A.stack,Y=A.name,re=A.create;return O&&this._middlewares[O]&&(this._middlewares[O]=this._middlewares[O].filter(function(ce){return re?ce.create!==re:!!Y&&ce.name!==Y})),this},zr.prototype.open=function(){var A=this;return jo(ve,function(){return aS(A)})},zr.prototype._close=function(){var A=this._state,O=Xs.indexOf(this);if(0<=O&&Xs.splice(O,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new F(function(Y){A.dbReadyResolve=Y}),A.openCanceller=new F(function(Y,re){A.cancelOpen=re}))},zr.prototype.close=function(Y){var O=(Y===void 0?{disableAutoOpen:!0}:Y).disableAutoOpen,Y=this._state;O?(Y.isBeingOpened&&Y.cancelOpen(new Ee.DatabaseClosed),this._close(),Y.autoOpen=!1,Y.dbOpenError=new Ee.DatabaseClosed):(this._close(),Y.autoOpen=this._options.autoOpen||Y.isBeingOpened,Y.openComplete=!1,Y.dbOpenError=null)},zr.prototype.delete=function(A){var O=this;A===void 0&&(A={disableAutoOpen:!0});var Y=0<arguments.length&&typeof arguments[0]!="object",re=this._state;return new F(function(ce,we){function Oe(){O.close(A);var $e=O._deps.indexedDB.deleteDatabase(O.name);$e.onsuccess=Re(function(){var Ze,Xe,rt;Ze=O._deps,Xe=O.name,rt=Ze.indexedDB,Ze=Ze.IDBKeyRange,nh(rt)||Xe===Al||Am(rt,Ze).delete(Xe).catch(Le),ce()}),$e.onerror=rs(we),$e.onblocked=O._fireOnBlocked}if(Y)throw new Ee.InvalidArgument("Invalid closeOptions argument to db.delete()");re.isBeingOpened?re.dbReadyPromise.then(Oe):Oe()})},zr.prototype.backendDB=function(){return this.idbdb},zr.prototype.isOpen=function(){return this.idbdb!==null},zr.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},zr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},zr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(zr.prototype,"tables",{get:function(){var A=this;return s(this._allTables).map(function(O){return A._allTables[O]})},enumerable:!1,configurable:!0}),zr.prototype.transaction=function(){var A=(function(O,Y,re){var ce=arguments.length;if(ce<2)throw new Ee.InvalidArgument("Too few arguments");for(var we=new Array(ce-1);--ce;)we[ce-1]=arguments[ce];return re=we.pop(),[O,L(we),re]}).apply(this,arguments);return this._transaction.apply(this,A)},zr.prototype._transaction=function(A,O,Y){var re=this,ce=ke.trans;ce&&ce.db===this&&A.indexOf("!")===-1||(ce=null);var we,Oe,$e=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(Oe=O.map(function(Xe){if(Xe=Xe instanceof re.Table?Xe.name:Xe,typeof Xe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Xe}),A=="r"||A===ns)we=ns;else{if(A!="rw"&&A!=gd)throw new Ee.InvalidArgument("Invalid transaction mode: "+A);we=gd}if(ce){if(ce.mode===ns&&we===gd){if(!$e)throw new Ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ce=null}ce&&Oe.forEach(function(Xe){if(ce&&ce.storeNames.indexOf(Xe)===-1){if(!$e)throw new Ee.SubTransaction("Table "+Xe+" not included in parent transaction.");ce=null}}),$e&&ce&&!ce.active&&(ce=null)}}catch(Xe){return ce?ce._promise(null,function(rt,He){He(Xe)}):Kr(Xe)}var Ze=(function Xe(rt,He,st,qe,tt){return F.resolve().then(function(){var ot=ke.transless||ke,Je=rt._createTransaction(He,st,rt._dbSchema,qe);if(Je.explicit=!0,ot={trans:Je,transless:ot},qe)Je.idbtrans=qe.idbtrans;else try{Je.create(),Je.idbtrans._explicit=!0,rt._state.PR1398_maxLoop=3}catch(wt){return wt.name===Te.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,He,st,null,tt)})):Kr(wt)}var ht,bt=J(tt);return bt&&Rn(),ot=F.follow(function(){var wt;(ht=tt.call(Je,Je))&&(bt?(wt=Xn.bind(null,null),ht.then(wt,wt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=xd(ht)))},ot),(ht&&typeof ht.then=="function"?F.resolve(ht).then(function(wt){return Je.active?wt:Kr(new Ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(wt){return qe&&Je._resolve(),Je._completion.then(function(){return wt})}).catch(function(wt){return Je._reject(wt),Kr(wt)})})}).bind(null,this,we,Oe,ce,Y);return ce?ce._promise(we,Ze,"lock"):ke.trans?jo(ke.transless,function(){return re._whenReady(Ze)}):this._whenReady(Ze)},zr.prototype.table=function(A){if(!h(this._allTables,A))throw new Ee.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},zr);function zr(A,O){var Y=this;this._middlewares={},this.verno=0;var re=zr.dependencies;this._options=O=r({addons:zr.addons,autoOpen:!0,indexedDB:re.indexedDB,IDBKeyRange:re.IDBKeyRange,cache:"cloned"},O),this._deps={indexedDB:O.indexedDB,IDBKeyRange:O.IDBKeyRange},re=O.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ce,we,Oe,$e,Ze,Xe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:O.autoOpen};Xe.dbReadyPromise=new F(function(He){Xe.dbReadyResolve=He}),Xe.openCanceller=new F(function(He,st){Xe.cancelOpen=st}),this._state=Xe,this.name=A,this.on=Fo(this,"populate","blocked","versionchange","close",{ready:[xe,Le]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(st,qe){zr.vip(function(){var tt,ot=Y._state;ot.openComplete?(ot.dbOpenError||F.resolve().then(st),qe&&He(st)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(st),qe&&He(st)):(He(st),tt=Y,qe||He(function Je(){tt.on.ready.unsubscribe(st),tt.on.ready.unsubscribe(Je)}))})}}),this.Collection=(ce=this,Pc(Bc.prototype,function(ht,Je){this.db=ce;var qe=Nl,tt=null;if(Je)try{qe=Je()}catch(bt){tt=bt}var ot=ht._ctx,Je=ot.table,ht=Je.hook.reading.fire;this._ctx={table:Je,index:ot.index,isPrimKey:!ot.index||Je.schema.primKey.keyPath&&ot.index===Je.schema.primKey.name,range:qe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:tt,or:ot.or,valueMapper:ht!==je?ht:null}})),this.Table=(we=this,Pc(wm.prototype,function(He,st,qe){this.db=we,this._tx=qe,this.name=He,this.schema=st,this.hook=we._allTables[He]?we._allTables[He].hook:Fo(null,{creating:[Ne,Le],reading:[z,je],updating:[se,Le],deleting:[fe,Le]})})),this.Transaction=(Oe=this,Pc(Cm.prototype,function(He,st,qe,tt,ot){var Je=this;this.db=Oe,this.mode=He,this.storeNames=st,this.schema=qe,this.chromeTransactionDurability=tt,this.idbtrans=null,this.on=Fo(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(ht,bt){Je._resolve=ht,Je._reject=bt}),this._completion.then(function(){Je.active=!1,Je.on.complete.fire()},function(ht){var bt=Je.active;return Je.active=!1,Je.on.error.fire(ht),Je.parent?Je.parent._reject(ht):bt&&Je.idbtrans&&Je.idbtrans.abort(),Kr(ht)})})),this.Version=($e=this,Pc(rS.prototype,function(He){this.db=$e,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ze=this,Pc(jl.prototype,function(He,st,qe){if(this.db=Ze,this._ctx={table:He,index:st===":id"?null:st,or:qe},this._cmp=this._ascending=Jn,this._descending=function(tt,ot){return Jn(ot,tt)},this._max=function(tt,ot){return 0<Jn(tt,ot)?tt:ot},this._min=function(tt,ot){return Jn(tt,ot)<0?tt:ot},this._IDBKeyRange=Ze._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ee.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(Y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Y.name,"'. Closing db now to resume the delete request.")),Y.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(Y.name,"') was blocked")):console.warn("Upgrade '".concat(Y.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=Hc(O.IDBKeyRange),this._createTransaction=function(He,st,qe,tt){return new Y.Transaction(He,st,qe,Y._options.chromeTransactionDurability,tt)},this._fireOnBlocked=function(He){Y.on("blocked").fire(He),Xs.filter(function(st){return st.name===Y.name&&st!==Y&&!st._state.vcFired}).map(function(st){return st.on("versionchange").fire(He)})},this.use(kb),this.use(ch),this.use(sS),this.use(iS),this.use(Tb);var rt=new Proxy(this,{get:function(He,st,qe){if(st==="_vip")return!0;if(st==="table")return function(ot){return Sd(Y.table(ot),rt)};var tt=Reflect.get(He,st,qe);return tt instanceof wm?Sd(tt,rt):st==="tables"?tt.map(function(ot){return Sd(ot,rt)}):st==="_createTransaction"?function(){return Sd(tt.apply(this,arguments),rt)}:tt}});this.vip=rt,re.forEach(function(He){return He(Y)})}var Kc,Ei=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Rb=(uh.prototype.subscribe=function(A,O,Y){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:O,complete:Y})},uh.prototype[Ei]=function(){return this},uh);function uh(A){this._subscribe=A}try{Kc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Kc={indexedDB:null,IDBKeyRange:null}}function Ib(A){var O,Y=!1,re=new Rb(function(ce){var we=J(A),Oe,$e=!1,Ze={},Xe={},rt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,Oe&&Oe.abort(),He&&Ia.storagemutated.unsubscribe(qe))}};ce.start&&ce.start(rt);var He=!1,st=function(){return Mo(tt)},qe=function(ot){ah(Ze,ot),jm(Xe,Ze)&&st()},tt=function(){var ot,Je,ht;!$e&&Kc.indexedDB&&(Ze={},ot={},Oe&&Oe.abort(),Oe=new AbortController,ht=function(bt){var wt=G();try{we&&Rn();var kt=en(A,bt);return kt=we?kt.finally(Xn):kt}finally{wt&&V()}}(Je={subscr:ot,signal:Oe.signal,requery:st,querier:A,trans:null}),Promise.resolve(ht).then(function(bt){Y=!0,O=bt,$e||Je.signal.aborted||(Ze={},function(wt){for(var kt in wt)if(h(wt,kt))return;return 1}(Xe=ot)||He||(Ia(Uc,qe),He=!0),Mo(function(){return!$e&&ce.next&&ce.next(bt)}))},function(bt){Y=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||$e||Mo(function(){$e||ce.error&&ce.error(bt)})}))};return setTimeout(st,0),rt});return re.hasValue=function(){return Y},re.getValue=function(){return O},re}var $l=Es;function Lm(A){var O=Bo;try{Bo=!0,Ia.storagemutated.fire(A),Om(A,!0)}finally{Bo=O}}p($l,r(r({},Qe),{delete:function(A){return new $l(A,{addons:[]}).delete()},exists:function(A){return new $l(A,{addons:[]}).open().then(function(O){return O.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return O=$l.dependencies,Y=O.indexedDB,O=O.IDBKeyRange,(nh(Y)?Promise.resolve(Y.databases()).then(function(re){return re.map(function(ce){return ce.name}).filter(function(ce){return ce!==Al})}):Am(Y,O).toCollection().primaryKeys()).then(A)}catch{return Kr(new Ee.MissingAPI)}var O,Y},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return ke.trans?jo(ke.transless,A):A()},vip:Nm,async:function(A){return function(){try{var O=xd(A.apply(this,arguments));return O&&typeof O.then=="function"?O:F.resolve(O)}catch(Y){return Kr(Y)}}},spawn:function(A,O,Y){try{var re=xd(A.apply(Y,O||[]));return re&&typeof re.then=="function"?re:F.resolve(re)}catch(ce){return Kr(ce)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(A,O){return O=F.resolve(typeof A=="function"?$l.ignoreTransaction(A):A).timeout(O||6e4),ke.trans?ke.trans.waitFor(O):O},Promise:F,debug:{get:function(){return Fe},set:function(A){Ce(A)}},derive:b,extend:l,props:p,override:E,Events:Fo,on:Ia,liveQuery:Ib,extendObservabilitySet:ah,getByKeyPath:j,setByKeyPath:I,delByKeyPath:function(A,O){typeof O=="string"?I(A,O,void 0):"length"in O&&[].map.call(O,function(Y){I(A,Y,void 0)})},shallowClone:N,deepClone:Z,getObjectDiff:sh,cmp:Jn,asap:k,minKey:-1/0,addons:[],connections:Xs,errnames:Te,dependencies:Kc,cache:Fl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,O,Y){return A+O/Math.pow(10,2*Y)})})),$l.maxKey=Hc($l.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ia(Uc,function(A){Bo||(A=new CustomEvent(Ml,{detail:A}),Bo=!0,dispatchEvent(A),Bo=!1)}),addEventListener(Ml,function(A){A=A.detail,Bo||Lm(A)}));var Zc,Bo=!1,ii=function(){};return typeof BroadcastChannel<"u"&&((ii=function(){(Zc=new BroadcastChannel(Ml)).onmessage=function(A){return A.data&&Lm(A.data)}})(),typeof Zc.unref=="function"&&Zc.unref(),Ia(Uc,function(A){Bo||Zc.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!Es.disableBfCache&&A.persisted){Fe&&console.debug("Dexie: handling persisted pagehide"),Zc!=null&&Zc.close();for(var O=0,Y=Xs;O<Y.length;O++)Y[O].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!Es.disableBfCache&&A.persisted&&(Fe&&console.debug("Dexie: handling persisted pageshow"),ii(),Lm({all:new ja(-1/0,[[]])}))})),F.rejectionMapper=function(A,O){return!A||A instanceof ne||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Pe[A.name]?A:(O=new Pe[A.name](O||A.message,A),"stack"in A&&v(O,"stack",{get:function(){return this.inner.stack}}),O)},Ce(Fe),r(Es,Object.freeze({__proto__:null,Dexie:Es,liveQuery:Ib,Entity:qf,cmp:Jn,PropModification:$c,replacePrefix:function(A,O){return new $c({replacePrefix:[A,O]})},add:function(A){return new $c({add:A})},remove:function(A){return new $c({remove:A})},default:Es,RangeSet:ja,mergeRanges:Pl,rangesOverlap:Sb}),{default:Es}),Es})}(Ow)),Ow.exports}var WX=GX();const MT=bi(WX),H4=Symbol.for("Dexie"),ex=globalThis[H4]||(globalThis[H4]=MT);if(MT.semVer!==ex.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${MT.semVer} and ${ex.semVer}`);const{liveQuery:D3e,mergeRanges:M3e,rangesOverlap:O3e,RangeSet:P3e,cmp:F3e,Entity:L3e,PropModification:$3e,replacePrefix:B3e,add:z3e,remove:U3e}=ex;class KX extends ex{constructor(){super("LiteChatDatabase_Rewrite_v1");Ea(this,"conversations");Ea(this,"interactions");Ea(this,"mods");Ea(this,"appState");Ea(this,"providerConfigs");Ea(this,"apiKeys");Ea(this,"syncRepos");Ea(this,"projects");Ea(this,"rules");Ea(this,"tags");Ea(this,"tagRuleLinks");this.version(8).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Ct=new KX,Fa=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class _t{static async loadConversations(){try{return(await Ct.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Fa(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Ct.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Ct.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Ct.interactions.where({conversationId:t}).sortBy("index")).map(r=>Fa(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Ct.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Ct.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Ct.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Ct.mods.orderBy("loadOrder").toArray()).map(n=>Fa(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Ct.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Ct.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Ct.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Ct.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Ct.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Fa(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Ct.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Ct.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Ct.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Fa(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Ct.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Ct.transaction("rw",[Ct.apiKeys,Ct.providerConfigs],async()=>{const n=await Ct.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Ct.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Ct.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Ct.syncRepos.toArray()).map(n=>Fa(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Ct.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Ct.transaction("rw",[Ct.syncRepos,Ct.conversations],async()=>{const n=await Ct.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Ct.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Ct.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Ct.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Fa(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,metadata:t.metadata?{...t.metadata}:{}};return await Ct.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await Ct.projects.where("parentId").equals(r).toArray();for(const s of a)await n(s.id);const i=await Ct.conversations.where("projectId").equals(r).toArray();if(i.length>0){const s=i.map(o=>Ct.conversations.update(o.id,{projectId:null}));await Promise.all(s),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await Ct.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Ct.transaction("rw",[Ct.projects,Ct.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Ct.rules.orderBy("name").toArray()).map(n=>Fa(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Ct.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Ct.transaction("rw",[Ct.rules,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("ruleId").equals(t).delete(),await Ct.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Ct.tags.orderBy("name").toArray()).map(n=>Fa(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Ct.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Ct.transaction("rw",[Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("tagId").equals(t).delete(),await Ct.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Ct.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Ct.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Ct.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Ct.appState.toArray();n.settings={},r.forEach(a=>{a.key.startsWith("settings:")&&(n.settings[a.key.substring(9)]=a.value)})}return t.importApiKeys&&(n.apiKeys=await Ct.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Ct.providerConfigs.toArray()),t.importProjects&&(n.projects=await Ct.projects.toArray()),t.importConversations&&(n.conversations=await Ct.conversations.toArray(),n.interactions=await Ct.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Ct.rules.toArray(),n.tags=await Ct.tags.toArray(),n.tagRuleLinks=await Ct.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Ct.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Ct.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Ct.transaction("rw",[Ct.appState,Ct.apiKeys,Ct.providerConfigs,Ct.projects,Ct.conversations,Ct.interactions,Ct.rules,Ct.tags,Ct.tagRuleLinks,Ct.mods,Ct.syncRepos],async()=>{if(n.importSettings&&await Ct.appState.clear(),n.importApiKeys&&await Ct.apiKeys.clear(),n.importProviderConfigs&&await Ct.providerConfigs.clear(),n.importProjects&&await Ct.projects.clear(),n.importConversations&&(await Ct.conversations.clear(),await Ct.interactions.clear()),n.importRulesAndTags&&(await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()),n.importMods&&await Ct.mods.clear(),n.importSyncRepos&&await Ct.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([a,i])=>({key:`settings:${a}`,value:i}));await Ct.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Ct.apiKeys.bulkPut(t.apiKeys.map(r=>Fa(r))),n.importProviderConfigs&&t.providerConfigs&&await Ct.providerConfigs.bulkPut(t.providerConfigs.map(r=>Fa(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Ct.projects.bulkPut(t.projects.map(r=>Fa(r))),n.importConversations&&t.conversations&&(await Ct.conversations.bulkPut(t.conversations.map(r=>Fa(r,["lastSyncedAt"]))),t.interactions&&await Ct.interactions.bulkPut(t.interactions.map(r=>Fa(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Ct.rules.bulkPut(t.rules.map(r=>Fa(r))),t.tags&&await Ct.tags.bulkPut(t.tags.map(r=>Fa(r))),t.tagRuleLinks&&await Ct.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Ct.mods.bulkPut(t.mods.map(r=>Fa(r))),n.importSyncRepos&&t.syncRepos&&await Ct.syncRepos.bulkPut(t.syncRepos.map(r=>Fa(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Ct.transaction("rw",[Ct.conversations,Ct.interactions,Ct.mods,Ct.appState,Ct.providerConfigs,Ct.apiKeys,Ct.syncRepos,Ct.projects,Ct.rules,Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.interactions.clear(),await Ct.conversations.clear(),await Ct.projects.clear(),await Ct.mods.clear(),await Ct.appState.clear(),await Ct.providerConfigs.clear(),await Ct.apiKeys.clear(),await Ct.syncRepos.clear(),await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function ZX(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Tt=ZX();var Et=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(Et||{}),tx=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))(tx||{}),il=I8();const c5=bi(il);function YX(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const XX=e=>{switch(e){case"success":return eJ;case"info":return nJ;case"warning":return tJ;case"error":return rJ;default:return null}},JX=Array(12).fill(0),QX=({visible:e,className:t})=>gt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},gt.createElement("div",{className:"sonner-spinner"},JX.map((n,r)=>gt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),eJ=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tJ=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nJ=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rJ=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),aJ=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},gt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),gt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),iJ=()=>{const[e,t]=gt.useState(document.hidden);return gt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let OT=1;class sJ{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:OT++,s=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...a,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,s;const o=a.then(async c=>{if(s=["resolve",c],gt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(lJ(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,p=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,p=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...v})}}).catch(async c=>{if(s=["reject",c],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof d=="object"&&!gt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,d)=>o.then(()=>s[0]==="reject"?d(s[1]):c(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||OT++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Hi=new sJ,oJ=(e,t)=>{const n=(t==null?void 0:t.id)||OT++;return Hi.addToast({title:e,...t,id:n}),n},lJ=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",cJ=oJ,uJ=()=>Hi.toasts,dJ=()=>Hi.getActiveToasts(),Ge=Object.assign(cJ,{success:Hi.success,info:Hi.info,warning:Hi.warning,error:Hi.error,custom:Hi.custom,message:Hi.message,promise:Hi.promise,dismiss:Hi.dismiss,loading:Hi.loading},{getHistory:uJ,getToasts:dJ});YX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Rv(e){return e.label!==void 0}const fJ=3,hJ="24px",pJ="16px",q4=4e3,mJ=356,gJ=14,yJ=45,bJ=200;function Wo(...e){return e.filter(Boolean).join(" ")}function vJ(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const wJ=e=>{var t,n,r,a,i,s,o,l,c;const{invert:d,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:b,heights:x,index:w,toasts:S,expanded:E,removeToast:C,defaultRichColors:k,closeButton:j,style:I,cancelButtonStyle:N,actionButtonStyle:P,className:L="",descriptionClassName:H="",duration:M,position:Z,gap:q,expandByDefault:ue,classNames:ae,icons:ee,closeButtonAriaLabel:X="Close toast"}=e,[ie,B]=gt.useState(null),[J,Q]=gt.useState(null),[ne,he]=gt.useState(!1),[de,Ie]=gt.useState(!1),[Te,Ae]=gt.useState(!1),[Ee,Pe]=gt.useState(!1),[Qe,Le]=gt.useState(!1),[je,z]=gt.useState(0),[Se,Ne]=gt.useState(0),fe=gt.useRef(h.duration||M||q4),se=gt.useRef(null),te=gt.useRef(null),xe=w===0,Fe=w+1<=b,Ce=h.type,We=h.dismissible!==!1,Nt=h.className||"",it=h.descriptionClassName||"",St=gt.useMemo(()=>x.findIndex(Me=>Me.toastId===h.id)||0,[x,h.id]),Ft=gt.useMemo(()=>{var Me;return(Me=h.closeButton)!=null?Me:j},[h.closeButton,j]),Mt=gt.useMemo(()=>h.duration||M||q4,[h.duration,M]),Zt=gt.useRef(0),be=gt.useRef(0),D=gt.useRef(0),W=gt.useRef(null),[pe,De]=Z.split("-"),ve=gt.useMemo(()=>x.reduce((Me,Ke,Dt)=>Dt>=St?Me:Me+Ke.height,0),[x,St]),ke=iJ(),le=h.invert||d,ft=Ce==="loading";be.current=gt.useMemo(()=>St*q+ve,[St,ve]),gt.useEffect(()=>{fe.current=Mt},[Mt]),gt.useEffect(()=>{he(!0)},[]),gt.useEffect(()=>{const Me=te.current;if(Me){const Ke=Me.getBoundingClientRect().height;return Ne(Ke),v(Dt=>[{toastId:h.id,height:Ke,position:h.position},...Dt]),()=>v(Dt=>Dt.filter(ge=>ge.toastId!==h.id))}},[v,h.id]),gt.useLayoutEffect(()=>{if(!ne)return;const Me=te.current,Ke=Me.style.height;Me.style.height="auto";const Dt=Me.getBoundingClientRect().height;Me.style.height=Ke,Ne(Dt),v(ge=>ge.find(V=>V.toastId===h.id)?ge.map(V=>V.toastId===h.id?{...V,height:Dt}:V):[{toastId:h.id,height:Dt,position:h.position},...ge])},[ne,h.title,h.description,v,h.id]);const vt=gt.useCallback(()=>{Ie(!0),z(be.current),v(Me=>Me.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},bJ)},[h,C,v,be]);gt.useEffect(()=>{if(h.promise&&Ce==="loading"||h.duration===1/0||h.type==="loading")return;let Me;return E||g||ke?(()=>{if(D.current<Zt.current){const ge=new Date().getTime()-Zt.current;fe.current=fe.current-ge}D.current=new Date().getTime()})():(()=>{fe.current!==1/0&&(Zt.current=new Date().getTime(),Me=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},fe.current))})(),()=>clearTimeout(Me)},[E,g,h,Ce,ke,vt]),gt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function F(){var Me;if(ee!=null&&ee.loading){var Ke;return gt.createElement("div",{className:Wo(ae==null?void 0:ae.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Ce==="loading"},ee.loading)}return gt.createElement(QX,{className:Wo(ae==null?void 0:ae.loader,h==null||(Me=h.classNames)==null?void 0:Me.loader),visible:Ce==="loading"})}const Be=h.icon||(ee==null?void 0:ee[Ce])||XX(Ce);var nt,ye;return gt.createElement("li",{tabIndex:0,ref:te,className:Wo(L,Nt,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[Ce],h==null||(n=h.classNames)==null?void 0:n[Ce]),"data-sonner-toast":"","data-rich-colors":(nt=h.richColors)!=null?nt:k,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":ne,"data-promise":!!h.promise,"data-swiped":Qe,"data-removed":de,"data-visible":Fe,"data-y-position":pe,"data-x-position":De,"data-index":w,"data-front":xe,"data-swiping":Te,"data-dismissible":We,"data-type":Ce,"data-invert":le,"data-swipe-out":Ee,"data-swipe-direction":J,"data-expanded":!!(E||ue&&ne),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${de?je:be.current}px`,"--initial-height":ue?"auto":`${Se}px`,...I,...h.style},onDragEnd:()=>{Ae(!1),B(null),W.current=null},onPointerDown:Me=>{ft||!We||(se.current=new Date,z(be.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(Ae(!0),W.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,Ke,Dt;if(Ee||!We)return;W.current=null;const ge=Number(((Me=te.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),G=Number(((Ke=te.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),V=new Date().getTime()-((Dt=se.current)==null?void 0:Dt.getTime()),K=ie==="x"?ge:G,me=Math.abs(K)/V;if(Math.abs(K)>=yJ||me>.11){z(be.current),h.onDismiss==null||h.onDismiss.call(h,h),Q(ie==="x"?ge>0?"right":"left":G>0?"down":"up"),vt(),Pe(!0);return}else{var Re,Ve;(Re=te.current)==null||Re.style.setProperty("--swipe-amount-x","0px"),(Ve=te.current)==null||Ve.style.setProperty("--swipe-amount-y","0px")}Le(!1),Ae(!1),B(null)},onPointerMove:Me=>{var Ke,Dt,ge;if(!W.current||!We||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const V=Me.clientY-W.current.y,K=Me.clientX-W.current.x;var me;const Re=(me=e.swipeDirections)!=null?me:vJ(Z);!ie&&(Math.abs(K)>1||Math.abs(V)>1)&&B(Math.abs(K)>Math.abs(V)?"x":"y");let Ve={x:0,y:0};const pt=Kt=>1/(1.5+Math.abs(Kt)/20);if(ie==="y"){if(Re.includes("top")||Re.includes("bottom"))if(Re.includes("top")&&V<0||Re.includes("bottom")&&V>0)Ve.y=V;else{const Kt=V*pt(V);Ve.y=Math.abs(Kt)<Math.abs(V)?Kt:V}}else if(ie==="x"&&(Re.includes("left")||Re.includes("right")))if(Re.includes("left")&&K<0||Re.includes("right")&&K>0)Ve.x=K;else{const Kt=K*pt(K);Ve.x=Math.abs(Kt)<Math.abs(K)?Kt:K}(Math.abs(Ve.x)>0||Math.abs(Ve.y)>0)&&Le(!0),(Dt=te.current)==null||Dt.style.setProperty("--swipe-amount-x",`${Ve.x}px`),(ge=te.current)==null||ge.style.setProperty("--swipe-amount-y",`${Ve.y}px`)}},Ft&&!h.jsx&&Ce!=="loading"?gt.createElement("button",{"aria-label":X,"data-disabled":ft,"data-close-button":!0,onClick:ft||!We?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Wo(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ye=ee==null?void 0:ee.close)!=null?ye:aJ):null,(Ce||h.icon||h.promise)&&h.icon!==null&&((ee==null?void 0:ee[Ce])!==null||h.icon)?gt.createElement("div",{"data-icon":"",className:Wo(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||F():null,h.type!=="loading"?Be:null):null,gt.createElement("div",{"data-content":"",className:Wo(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},gt.createElement("div",{"data-title":"",className:Wo(ae==null?void 0:ae.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?gt.createElement("div",{"data-description":"",className:Wo(H,it,ae==null?void 0:ae.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),gt.isValidElement(h.cancel)?h.cancel:h.cancel&&Rv(h.cancel)?gt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||N,onClick:Me=>{Rv(h.cancel)&&We&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Me),vt())},className:Wo(ae==null?void 0:ae.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,gt.isValidElement(h.action)?h.action:h.action&&Rv(h.action)?gt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:Me=>{Rv(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Me),!Me.defaultPrevented&&vt())},className:Wo(ae==null?void 0:ae.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function G4(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function xJ(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,s=i?"--mobile-offset":"--offset",o=i?pJ:hJ;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${s}-${c}`]=o:n[`${s}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(o)}),n}const _J=gt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:p,duration:g,style:v,visibleToasts:b=fJ,toastOptions:x,dir:w=G4(),gap:S=gJ,icons:E,containerAriaLabel:C="Notifications"}=t,[k,j]=gt.useState([]),I=gt.useMemo(()=>Array.from(new Set([a].concat(k.filter(J=>J.position).map(J=>J.position)))),[k,a]),[N,P]=gt.useState([]),[L,H]=gt.useState(!1),[M,Z]=gt.useState(!1),[q,ue]=gt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=gt.useRef(null),ee=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=gt.useRef(null),ie=gt.useRef(!1),B=gt.useCallback(J=>{j(Q=>{var ne;return(ne=Q.find(he=>he.id===J.id))!=null&&ne.delete||Hi.dismiss(J.id),Q.filter(({id:he})=>he!==J.id)})},[]);return gt.useEffect(()=>Hi.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{j(Q=>Q.map(ne=>ne.id===J.id?{...ne,delete:!0}:ne))});return}setTimeout(()=>{c5.flushSync(()=>{j(Q=>{const ne=Q.findIndex(he=>he.id===J.id);return ne!==-1?[...Q.slice(0,ne),{...Q[ne],...J},...Q.slice(ne+1)]:[J,...Q]})})})}),[k]),gt.useEffect(()=>{if(h!=="system"){ue(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:Q})=>{ue(Q?"dark":"light")})}catch{J.addListener(({matches:ne})=>{try{ue(ne?"dark":"light")}catch(he){console.error(he)}})}},[h]),gt.useEffect(()=>{k.length<=1&&H(!1)},[k]),gt.useEffect(()=>{const J=Q=>{var ne;if(i.every(Ie=>Q[Ie]||Q.code===Ie)){var de;H(!0),(de=ae.current)==null||de.focus()}Q.code==="Escape"&&(document.activeElement===ae.current||(ne=ae.current)!=null&&ne.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),gt.useEffect(()=>{if(ae.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,ie.current=!1)}},[ae.current]),gt.createElement("section",{ref:n,"aria-label":`${C} ${ee}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((J,Q)=>{var ne;const[he,de]=J.split("-");return k.length?gt.createElement("ol",{key:J,dir:w==="auto"?G4():w,tabIndex:-1,ref:ae,className:l,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":he,"data-lifted":L&&k.length>1&&!s,"data-x-position":de,style:{"--front-toast-height":`${((ne=N[0])==null?void 0:ne.height)||0}px`,"--width":`${mJ}px`,"--gap":`${S}px`,...v,...xJ(c,d)},onBlur:Ie=>{ie.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(ie.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,X.current=Ie.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{M||H(!1)},onDragEnd:()=>H(!1),onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},k.filter(Ie=>!Ie.position&&Q===0||Ie.position===J).map((Ie,Te)=>{var Ae,Ee;return gt.createElement(wJ,{key:Ie.id,icons:E,index:Te,toast:Ie,defaultRichColors:p,duration:(Ae=x==null?void 0:x.duration)!=null?Ae:g,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Ee=x==null?void 0:x.closeButton)!=null?Ee:o,interacting:M,position:J,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,closeButtonAriaLabel:x==null?void 0:x.closeButtonAriaLabel,removeToast:B,toasts:k.filter(Pe=>Pe.position==Ie.position),heights:N.filter(Pe=>Pe.position==Ie.position),setHeights:P,expandByDefault:s,gap:S,expanded:L,swipeDirections:t.swipeDirections})})):null}))}),qn=qs(Gs((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n}),r!=="loading"&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await _t.loadInteractionsForConversation(n);a.sort((i,s)=>i.index-s.index),e({interactions:a,status:"idle"}),Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(s=>s.id===n);if(i!==-1){const s=a.interactions[i];let o={...s.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]));const l={...s,...r,metadata:o};"response"in r&&(l.response=r.response),"rating"in r&&(l.rating=r.rating),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},rateInteraction:async(n,r)=>{const a=t().interactions.find(i=>i.id===n);if(!a){console.error(`InteractionStore: Interaction ${n} not found for rating.`);return}t()._updateInteractionInState(n,{rating:r});try{await _t.saveInteraction({...a,rating:r})}catch(i){console.error(`InteractionStore: Failed to persist rating for ${n}`,i),t()._updateInteractionInState(n,{rating:a.rating}),Ge.error("Failed to save rating.")}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),SJ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ji=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=SJ[n[e]&63];return t};const mc=qs(Gs((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(s=>s.source==="direct"&&n.source==="direct"?s.name===n.name&&s.size===n.size:s.source==="vfs"&&n.source==="vfs"?s.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const s={id:ji(),...n};a.attachedFilesMetadata.push(s),r=!0}}),r&&Tt.emit(Et.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(s=>s.id!==n),r=a.attachedFilesMetadata.length<i}),r&&Tt.emit(Et.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Tt.emit(Et.ATTACHED_FILES_CHANGED,{files:[]})}}))),u5=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(u5);const kA=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return u5.has(r)};var d5="vercel.ai.error",EJ=Symbol.for(d5),f5,CJ=class h5 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[f5]=!0,this.name=t,this.cause=r}static isInstance(t){return h5.hasMarker(t,d5)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};f5=EJ;var Nn=CJ,p5="AI_APICallError",m5=`vercel.ai.error.${p5}`,TJ=Symbol.for(m5),g5,ka=class extends Nn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:p5,message:t,cause:o}),this[g5]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=c}static isInstance(t){return Nn.hasMarker(t,m5)}};g5=TJ;var y5="AI_EmptyResponseBodyError",b5=`vercel.ai.error.${y5}`,kJ=Symbol.for(b5),v5,AA=class extends Nn{constructor({message:t="Empty response body"}={}){super({name:y5,message:t}),this[v5]=!0}static isInstance(t){return Nn.hasMarker(t,b5)}};v5=kJ;function wy(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var w5="AI_InvalidArgumentError",x5=`vercel.ai.error.${w5}`,AJ=Symbol.for(x5),_5,NA=class extends Nn{constructor({message:t,cause:n,argument:r}){super({name:w5,message:t,cause:n}),this[_5]=!0,this.argument=r}static isInstance(t){return Nn.hasMarker(t,x5)}};_5=AJ;var S5="AI_InvalidPromptError",E5=`vercel.ai.error.${S5}`,NJ=Symbol.for(E5),C5,tc=class extends Nn{constructor({prompt:t,message:n,cause:r}){super({name:S5,message:`Invalid prompt: ${n}`,cause:r}),this[C5]=!0,this.prompt=t}static isInstance(t){return Nn.hasMarker(t,E5)}};C5=NJ;var T5="AI_InvalidResponseDataError",k5=`vercel.ai.error.${T5}`,RJ=Symbol.for(k5),A5,ap=class extends Nn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:T5,message:n}),this[A5]=!0,this.data=t}static isInstance(t){return Nn.hasMarker(t,k5)}};A5=RJ;var N5="AI_JSONParseError",R5=`vercel.ai.error.${N5}`,IJ=Symbol.for(R5),I5,Mu=class extends Nn{constructor({text:t,cause:n}){super({name:N5,message:`JSON parsing failed: Text: ${t}.
Error message: ${wy(n)}`,cause:n}),this[I5]=!0,this.text=t}static isInstance(t){return Nn.hasMarker(t,R5)}};I5=IJ;var j5="AI_LoadAPIKeyError",D5=`vercel.ai.error.${j5}`,jJ=Symbol.for(D5),M5,Iv=class extends Nn{constructor({message:t}){super({name:j5,message:t}),this[M5]=!0}static isInstance(t){return Nn.hasMarker(t,D5)}};M5=jJ;var O5="AI_TooManyEmbeddingValuesForCallError",P5=`vercel.ai.error.${O5}`,DJ=Symbol.for(P5),F5,RA=class extends Nn{constructor(t){super({name:O5,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[F5]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Nn.hasMarker(t,P5)}};F5=DJ;var L5="AI_TypeValidationError",$5=`vercel.ai.error.${L5}`,MJ=Symbol.for($5),B5,OJ=class PT extends Nn{constructor({value:t,cause:n}){super({name:L5,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${wy(n)}`,cause:n}),this[B5]=!0,this.value=t}static isInstance(t){return Nn.hasMarker(t,$5)}static wrap({value:t,cause:n}){return PT.isInstance(n)&&n.value===t?n:new PT({value:t,cause:n})}};B5=MJ;var Ou=OJ,z5="AI_UnsupportedFunctionalityError",U5=`vercel.ai.error.${z5}`,PJ=Symbol.for(U5),V5,Nr=class extends Nn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:z5,message:n}),this[V5]=!0,this.functionality=t}static isInstance(t){return Nn.hasMarker(t,U5)}};V5=PJ;let FJ=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var IA={},E1={};E1.byteLength=BJ;E1.toByteArray=UJ;E1.fromByteArray=qJ;var tl=[],Ps=[],LJ=typeof Uint8Array<"u"?Uint8Array:Array,Q2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Oh=0,$J=Q2.length;Oh<$J;++Oh)tl[Oh]=Q2[Oh],Ps[Q2.charCodeAt(Oh)]=Oh;Ps[45]=62;Ps[95]=63;function H5(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function BJ(e){var t=H5(e),n=t[0],r=t[1];return(n+r)*3/4-r}function zJ(e,t,n){return(t+n)*3/4-n}function UJ(e){var t,n=H5(e),r=n[0],a=n[1],i=new LJ(zJ(e,r,a)),s=0,o=a>0?r-4:r,l;for(l=0;l<o;l+=4)t=Ps[e.charCodeAt(l)]<<18|Ps[e.charCodeAt(l+1)]<<12|Ps[e.charCodeAt(l+2)]<<6|Ps[e.charCodeAt(l+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return a===2&&(t=Ps[e.charCodeAt(l)]<<2|Ps[e.charCodeAt(l+1)]>>4,i[s++]=t&255),a===1&&(t=Ps[e.charCodeAt(l)]<<10|Ps[e.charCodeAt(l+1)]<<4|Ps[e.charCodeAt(l+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function VJ(e){return tl[e>>18&63]+tl[e>>12&63]+tl[e>>6&63]+tl[e&63]}function HJ(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(VJ(r));return a.join("")}function qJ(e){for(var t,n=e.length,r=n%3,a=[],i=16383,s=0,o=n-r;s<o;s+=i)a.push(HJ(e,s,s+i>o?o:s+i));return r===1?(t=e[n-1],a.push(tl[t>>2]+tl[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(tl[t>>10]+tl[t>>4&63]+tl[t<<2&63]+"=")),a.join("")}var jA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */jA.read=function(e,t,n,r,a){var i,s,o=a*8-r-1,l=(1<<o)-1,c=l>>1,d=-7,h=n?a-1:0,p=n?-1:1,g=e[t+h];for(h+=p,i=g&(1<<-d)-1,g>>=-d,d+=o;d>0;i=i*256+e[t+h],h+=p,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=r;d>0;s=s*256+e[t+h],h+=p,d-=8);if(i===0)i=1-c;else{if(i===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-c}return(g?-1:1)*s*Math.pow(2,i-r)};jA.write=function(e,t,n,r,a,i){var s,o,l,c=i*8-a-1,d=(1<<c)-1,h=d>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=p/l:t+=p*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*l-1)*Math.pow(2,a),s=s+h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),s=0));a>=8;e[n+g]=o&255,g+=v,o/=256,a-=8);for(s=s<<a|o,c+=a;c>0;e[n+g]=s&255,g+=v,s/=256,c-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=E1,n=jA,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:s,SharedArrayBuffer:o}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const be=new i(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,i.prototype),Object.setPrototypeOf(be,D),be.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function c(be){if(be>a)throw new RangeError('The value "'+be+'" is invalid for option "size"');const D=new i(be);return Object.setPrototypeOf(D,d.prototype),D}function d(be,D,W){if(typeof be=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(be)}return h(be,D,W)}d.poolSize=8192;function h(be,D,W){if(typeof be=="string")return b(be,D);if(s.isView(be))return w(be);if(be==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(it(be,s)||be&&it(be.buffer,s)||typeof o<"u"&&(it(be,o)||be&&it(be.buffer,o)))return S(be,D,W);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=be.valueOf&&be.valueOf();if(pe!=null&&pe!==be)return d.from(pe,D,W);const De=E(be);if(De)return De;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return d.from(be[Symbol.toPrimitive]("string"),D,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}d.from=function(be,D,W){return h(be,D,W)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function p(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function g(be,D,W){return p(be),be<=0?c(be):D!==void 0?typeof W=="string"?c(be).fill(D,W):c(be).fill(D):c(be)}d.alloc=function(be,D,W){return g(be,D,W)};function v(be){return p(be),c(be<0?0:C(be)|0)}d.allocUnsafe=function(be){return v(be)},d.allocUnsafeSlow=function(be){return v(be)};function b(be,D){if((typeof D!="string"||D==="")&&(D="utf8"),!d.isEncoding(D))throw new TypeError("Unknown encoding: "+D);const W=j(be,D)|0;let pe=c(W);const De=pe.write(be,D);return De!==W&&(pe=pe.slice(0,De)),pe}function x(be){const D=be.length<0?0:C(be.length)|0,W=c(D);for(let pe=0;pe<D;pe+=1)W[pe]=be[pe]&255;return W}function w(be){if(it(be,i)){const D=new i(be);return S(D.buffer,D.byteOffset,D.byteLength)}return x(be)}function S(be,D,W){if(D<0||be.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<D+(W||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return D===void 0&&W===void 0?pe=new i(be):W===void 0?pe=new i(be,D):pe=new i(be,D,W),Object.setPrototypeOf(pe,d.prototype),pe}function E(be){if(d.isBuffer(be)){const D=C(be.length)|0,W=c(D);return W.length===0||be.copy(W,0,0,D),W}if(be.length!==void 0)return typeof be.length!="number"||St(be.length)?c(0):x(be);if(be.type==="Buffer"&&Array.isArray(be.data))return x(be.data)}function C(be){if(be>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return be|0}function k(be){return+be!=be&&(be=0),d.alloc(+be)}d.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==d.prototype},d.compare=function(D,W){if(it(D,i)&&(D=d.from(D,D.offset,D.byteLength)),it(W,i)&&(W=d.from(W,W.offset,W.byteLength)),!d.isBuffer(D)||!d.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===W)return 0;let pe=D.length,De=W.length;for(let ve=0,ke=Math.min(pe,De);ve<ke;++ve)if(D[ve]!==W[ve]){pe=D[ve],De=W[ve];break}return pe<De?-1:De<pe?1:0},d.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(D,W){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return d.alloc(0);let pe;if(W===void 0)for(W=0,pe=0;pe<D.length;++pe)W+=D[pe].length;const De=d.allocUnsafe(W);let ve=0;for(pe=0;pe<D.length;++pe){let ke=D[pe];if(it(ke,i))ve+ke.length>De.length?(d.isBuffer(ke)||(ke=d.from(ke)),ke.copy(De,ve)):i.prototype.set.call(De,ke,ve);else if(d.isBuffer(ke))ke.copy(De,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=ke.length}return De};function j(be,D){if(d.isBuffer(be))return be.length;if(s.isView(be)||it(be,s))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);const W=be.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&W===0)return 0;let De=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return xe(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return We(be).length;default:if(De)return pe?-1:xe(be).length;D=(""+D).toLowerCase(),De=!0}}d.byteLength=j;function I(be,D,W){let pe=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,D>>>=0,W<=D))return"";for(be||(be="utf8");;)switch(be){case"hex":return Q(this,D,W);case"utf8":case"utf-8":return ee(this,D,W);case"ascii":return B(this,D,W);case"latin1":case"binary":return J(this,D,W);case"base64":return ae(this,D,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,D,W);default:if(pe)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),pe=!0}}d.prototype._isBuffer=!0;function N(be,D,W){const pe=be[D];be[D]=be[W],be[W]=pe}d.prototype.swap16=function(){const D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<D;W+=2)N(this,W,W+1);return this},d.prototype.swap32=function(){const D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<D;W+=4)N(this,W,W+3),N(this,W+1,W+2);return this},d.prototype.swap64=function(){const D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<D;W+=8)N(this,W,W+7),N(this,W+1,W+6),N(this,W+2,W+5),N(this,W+3,W+4);return this},d.prototype.toString=function(){const D=this.length;return D===0?"":arguments.length===0?ee(this,0,D):I.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(D){if(!d.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:d.compare(this,D)===0},d.prototype.inspect=function(){let D="";const W=e.INSPECT_MAX_BYTES;return D=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(D+=" ... "),"<Buffer "+D+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(D,W,pe,De,ve){if(it(D,i)&&(D=d.from(D,D.offset,D.byteLength)),!d.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(W===void 0&&(W=0),pe===void 0&&(pe=D?D.length:0),De===void 0&&(De=0),ve===void 0&&(ve=this.length),W<0||pe>D.length||De<0||ve>this.length)throw new RangeError("out of range index");if(De>=ve&&W>=pe)return 0;if(De>=ve)return-1;if(W>=pe)return 1;if(W>>>=0,pe>>>=0,De>>>=0,ve>>>=0,this===D)return 0;let ke=ve-De,le=pe-W;const ft=Math.min(ke,le),vt=this.slice(De,ve),F=D.slice(W,pe);for(let Be=0;Be<ft;++Be)if(vt[Be]!==F[Be]){ke=vt[Be],le=F[Be];break}return ke<le?-1:le<ke?1:0};function P(be,D,W,pe,De){if(be.length===0)return-1;if(typeof W=="string"?(pe=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,St(W)&&(W=De?0:be.length-1),W<0&&(W=be.length+W),W>=be.length){if(De)return-1;W=be.length-1}else if(W<0)if(De)W=0;else return-1;if(typeof D=="string"&&(D=d.from(D,pe)),d.isBuffer(D))return D.length===0?-1:L(be,D,W,pe,De);if(typeof D=="number")return D=D&255,typeof i.prototype.indexOf=="function"?De?i.prototype.indexOf.call(be,D,W):i.prototype.lastIndexOf.call(be,D,W):L(be,[D],W,pe,De);throw new TypeError("val must be string, number or Buffer")}function L(be,D,W,pe,De){let ve=1,ke=be.length,le=D.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(be.length<2||D.length<2)return-1;ve=2,ke/=2,le/=2,W/=2}function ft(F,Be){return ve===1?F[Be]:F.readUInt16BE(Be*ve)}let vt;if(De){let F=-1;for(vt=W;vt<ke;vt++)if(ft(be,vt)===ft(D,F===-1?0:vt-F)){if(F===-1&&(F=vt),vt-F+1===le)return F*ve}else F!==-1&&(vt-=vt-F),F=-1}else for(W+le>ke&&(W=ke-le),vt=W;vt>=0;vt--){let F=!0;for(let Be=0;Be<le;Be++)if(ft(be,vt+Be)!==ft(D,Be)){F=!1;break}if(F)return vt}return-1}d.prototype.includes=function(D,W,pe){return this.indexOf(D,W,pe)!==-1},d.prototype.indexOf=function(D,W,pe){return P(this,D,W,pe,!0)},d.prototype.lastIndexOf=function(D,W,pe){return P(this,D,W,pe,!1)};function H(be,D,W,pe){W=Number(W)||0;const De=be.length-W;pe?(pe=Number(pe),pe>De&&(pe=De)):pe=De;const ve=D.length;pe>ve/2&&(pe=ve/2);let ke;for(ke=0;ke<pe;++ke){const le=parseInt(D.substr(ke*2,2),16);if(St(le))return ke;be[W+ke]=le}return ke}function M(be,D,W,pe){return Nt(xe(D,be.length-W),be,W,pe)}function Z(be,D,W,pe){return Nt(Fe(D),be,W,pe)}function q(be,D,W,pe){return Nt(We(D),be,W,pe)}function ue(be,D,W,pe){return Nt(Ce(D,be.length-W),be,W,pe)}d.prototype.write=function(D,W,pe,De){if(W===void 0)De="utf8",pe=this.length,W=0;else if(pe===void 0&&typeof W=="string")De=W,pe=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(pe)?(pe=pe>>>0,De===void 0&&(De="utf8")):(De=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-W;if((pe===void 0||pe>ve)&&(pe=ve),D.length>0&&(pe<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");let ke=!1;for(;;)switch(De){case"hex":return H(this,D,W,pe);case"utf8":case"utf-8":return M(this,D,W,pe);case"ascii":case"latin1":case"binary":return Z(this,D,W,pe);case"base64":return q(this,D,W,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,D,W,pe);default:if(ke)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),ke=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(be,D,W){return D===0&&W===be.length?t.fromByteArray(be):t.fromByteArray(be.slice(D,W))}function ee(be,D,W){W=Math.min(be.length,W);const pe=[];let De=D;for(;De<W;){const ve=be[De];let ke=null,le=ve>239?4:ve>223?3:ve>191?2:1;if(De+le<=W){let ft,vt,F,Be;switch(le){case 1:ve<128&&(ke=ve);break;case 2:ft=be[De+1],(ft&192)===128&&(Be=(ve&31)<<6|ft&63,Be>127&&(ke=Be));break;case 3:ft=be[De+1],vt=be[De+2],(ft&192)===128&&(vt&192)===128&&(Be=(ve&15)<<12|(ft&63)<<6|vt&63,Be>2047&&(Be<55296||Be>57343)&&(ke=Be));break;case 4:ft=be[De+1],vt=be[De+2],F=be[De+3],(ft&192)===128&&(vt&192)===128&&(F&192)===128&&(Be=(ve&15)<<18|(ft&63)<<12|(vt&63)<<6|F&63,Be>65535&&Be<1114112&&(ke=Be))}}ke===null?(ke=65533,le=1):ke>65535&&(ke-=65536,pe.push(ke>>>10&1023|55296),ke=56320|ke&1023),pe.push(ke),De+=le}return ie(pe)}const X=4096;function ie(be){const D=be.length;if(D<=X)return String.fromCharCode.apply(String,be);let W="",pe=0;for(;pe<D;)W+=String.fromCharCode.apply(String,be.slice(pe,pe+=X));return W}function B(be,D,W){let pe="";W=Math.min(be.length,W);for(let De=D;De<W;++De)pe+=String.fromCharCode(be[De]&127);return pe}function J(be,D,W){let pe="";W=Math.min(be.length,W);for(let De=D;De<W;++De)pe+=String.fromCharCode(be[De]);return pe}function Q(be,D,W){const pe=be.length;(!D||D<0)&&(D=0),(!W||W<0||W>pe)&&(W=pe);let De="";for(let ve=D;ve<W;++ve)De+=Ft[be[ve]];return De}function ne(be,D,W){const pe=be.slice(D,W);let De="";for(let ve=0;ve<pe.length-1;ve+=2)De+=String.fromCharCode(pe[ve]+pe[ve+1]*256);return De}d.prototype.slice=function(D,W){const pe=this.length;D=~~D,W=W===void 0?pe:~~W,D<0?(D+=pe,D<0&&(D=0)):D>pe&&(D=pe),W<0?(W+=pe,W<0&&(W=0)):W>pe&&(W=pe),W<D&&(W=D);const De=this.subarray(D,W);return Object.setPrototypeOf(De,d.prototype),De};function he(be,D,W){if(be%1!==0||be<0)throw new RangeError("offset is not uint");if(be+D>W)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(D,W,pe){D=D>>>0,W=W>>>0,pe||he(D,W,this.length);let De=this[D],ve=1,ke=0;for(;++ke<W&&(ve*=256);)De+=this[D+ke]*ve;return De},d.prototype.readUintBE=d.prototype.readUIntBE=function(D,W,pe){D=D>>>0,W=W>>>0,pe||he(D,W,this.length);let De=this[D+--W],ve=1;for(;W>0&&(ve*=256);)De+=this[D+--W]*ve;return De},d.prototype.readUint8=d.prototype.readUInt8=function(D,W){return D=D>>>0,W||he(D,1,this.length),this[D]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(D,W){return D=D>>>0,W||he(D,2,this.length),this[D]|this[D+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(D,W){return D=D>>>0,W||he(D,2,this.length),this[D]<<8|this[D+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(D,W){return D=D>>>0,W||he(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(D,W){return D=D>>>0,W||he(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},d.prototype.readBigUInt64LE=Mt(function(D){D=D>>>0,Ne(D,"offset");const W=this[D],pe=this[D+7];(W===void 0||pe===void 0)&&fe(D,this.length-8);const De=W+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24,ve=this[++D]+this[++D]*2**8+this[++D]*2**16+pe*2**24;return BigInt(De)+(BigInt(ve)<<BigInt(32))}),d.prototype.readBigUInt64BE=Mt(function(D){D=D>>>0,Ne(D,"offset");const W=this[D],pe=this[D+7];(W===void 0||pe===void 0)&&fe(D,this.length-8);const De=W*2**24+this[++D]*2**16+this[++D]*2**8+this[++D],ve=this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+pe;return(BigInt(De)<<BigInt(32))+BigInt(ve)}),d.prototype.readIntLE=function(D,W,pe){D=D>>>0,W=W>>>0,pe||he(D,W,this.length);let De=this[D],ve=1,ke=0;for(;++ke<W&&(ve*=256);)De+=this[D+ke]*ve;return ve*=128,De>=ve&&(De-=Math.pow(2,8*W)),De},d.prototype.readIntBE=function(D,W,pe){D=D>>>0,W=W>>>0,pe||he(D,W,this.length);let De=W,ve=1,ke=this[D+--De];for(;De>0&&(ve*=256);)ke+=this[D+--De]*ve;return ve*=128,ke>=ve&&(ke-=Math.pow(2,8*W)),ke},d.prototype.readInt8=function(D,W){return D=D>>>0,W||he(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},d.prototype.readInt16LE=function(D,W){D=D>>>0,W||he(D,2,this.length);const pe=this[D]|this[D+1]<<8;return pe&32768?pe|4294901760:pe},d.prototype.readInt16BE=function(D,W){D=D>>>0,W||he(D,2,this.length);const pe=this[D+1]|this[D]<<8;return pe&32768?pe|4294901760:pe},d.prototype.readInt32LE=function(D,W){return D=D>>>0,W||he(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},d.prototype.readInt32BE=function(D,W){return D=D>>>0,W||he(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},d.prototype.readBigInt64LE=Mt(function(D){D=D>>>0,Ne(D,"offset");const W=this[D],pe=this[D+7];(W===void 0||pe===void 0)&&fe(D,this.length-8);const De=this[D+4]+this[D+5]*2**8+this[D+6]*2**16+(pe<<24);return(BigInt(De)<<BigInt(32))+BigInt(W+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24)}),d.prototype.readBigInt64BE=Mt(function(D){D=D>>>0,Ne(D,"offset");const W=this[D],pe=this[D+7];(W===void 0||pe===void 0)&&fe(D,this.length-8);const De=(W<<24)+this[++D]*2**16+this[++D]*2**8+this[++D];return(BigInt(De)<<BigInt(32))+BigInt(this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+pe)}),d.prototype.readFloatLE=function(D,W){return D=D>>>0,W||he(D,4,this.length),n.read(this,D,!0,23,4)},d.prototype.readFloatBE=function(D,W){return D=D>>>0,W||he(D,4,this.length),n.read(this,D,!1,23,4)},d.prototype.readDoubleLE=function(D,W){return D=D>>>0,W||he(D,8,this.length),n.read(this,D,!0,52,8)},d.prototype.readDoubleBE=function(D,W){return D=D>>>0,W||he(D,8,this.length),n.read(this,D,!1,52,8)};function de(be,D,W,pe,De,ve){if(!d.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>De||D<ve)throw new RangeError('"value" argument is out of bounds');if(W+pe>be.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(D,W,pe,De){if(D=+D,W=W>>>0,pe=pe>>>0,!De){const le=Math.pow(2,8*pe)-1;de(this,D,W,pe,le,0)}let ve=1,ke=0;for(this[W]=D&255;++ke<pe&&(ve*=256);)this[W+ke]=D/ve&255;return W+pe},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(D,W,pe,De){if(D=+D,W=W>>>0,pe=pe>>>0,!De){const le=Math.pow(2,8*pe)-1;de(this,D,W,pe,le,0)}let ve=pe-1,ke=1;for(this[W+ve]=D&255;--ve>=0&&(ke*=256);)this[W+ve]=D/ke&255;return W+pe},d.prototype.writeUint8=d.prototype.writeUInt8=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,1,255,0),this[W]=D&255,W+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,2,65535,0),this[W]=D&255,this[W+1]=D>>>8,W+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,2,65535,0),this[W]=D>>>8,this[W+1]=D&255,W+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,4,4294967295,0),this[W+3]=D>>>24,this[W+2]=D>>>16,this[W+1]=D>>>8,this[W]=D&255,W+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,4,4294967295,0),this[W]=D>>>24,this[W+1]=D>>>16,this[W+2]=D>>>8,this[W+3]=D&255,W+4};function Ie(be,D,W,pe,De){Se(D,pe,De,be,W,7);let ve=Number(D&BigInt(4294967295));be[W++]=ve,ve=ve>>8,be[W++]=ve,ve=ve>>8,be[W++]=ve,ve=ve>>8,be[W++]=ve;let ke=Number(D>>BigInt(32)&BigInt(4294967295));return be[W++]=ke,ke=ke>>8,be[W++]=ke,ke=ke>>8,be[W++]=ke,ke=ke>>8,be[W++]=ke,W}function Te(be,D,W,pe,De){Se(D,pe,De,be,W,7);let ve=Number(D&BigInt(4294967295));be[W+7]=ve,ve=ve>>8,be[W+6]=ve,ve=ve>>8,be[W+5]=ve,ve=ve>>8,be[W+4]=ve;let ke=Number(D>>BigInt(32)&BigInt(4294967295));return be[W+3]=ke,ke=ke>>8,be[W+2]=ke,ke=ke>>8,be[W+1]=ke,ke=ke>>8,be[W]=ke,W+8}d.prototype.writeBigUInt64LE=Mt(function(D,W=0){return Ie(this,D,W,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Mt(function(D,W=0){return Te(this,D,W,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(D,W,pe,De){if(D=+D,W=W>>>0,!De){const ft=Math.pow(2,8*pe-1);de(this,D,W,pe,ft-1,-ft)}let ve=0,ke=1,le=0;for(this[W]=D&255;++ve<pe&&(ke*=256);)D<0&&le===0&&this[W+ve-1]!==0&&(le=1),this[W+ve]=(D/ke>>0)-le&255;return W+pe},d.prototype.writeIntBE=function(D,W,pe,De){if(D=+D,W=W>>>0,!De){const ft=Math.pow(2,8*pe-1);de(this,D,W,pe,ft-1,-ft)}let ve=pe-1,ke=1,le=0;for(this[W+ve]=D&255;--ve>=0&&(ke*=256);)D<0&&le===0&&this[W+ve+1]!==0&&(le=1),this[W+ve]=(D/ke>>0)-le&255;return W+pe},d.prototype.writeInt8=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,1,127,-128),D<0&&(D=255+D+1),this[W]=D&255,W+1},d.prototype.writeInt16LE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,2,32767,-32768),this[W]=D&255,this[W+1]=D>>>8,W+2},d.prototype.writeInt16BE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,2,32767,-32768),this[W]=D>>>8,this[W+1]=D&255,W+2},d.prototype.writeInt32LE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,4,2147483647,-2147483648),this[W]=D&255,this[W+1]=D>>>8,this[W+2]=D>>>16,this[W+3]=D>>>24,W+4},d.prototype.writeInt32BE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[W]=D>>>24,this[W+1]=D>>>16,this[W+2]=D>>>8,this[W+3]=D&255,W+4},d.prototype.writeBigInt64LE=Mt(function(D,W=0){return Ie(this,D,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Mt(function(D,W=0){return Te(this,D,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(be,D,W,pe,De,ve){if(W+pe>be.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Ee(be,D,W,pe,De){return D=+D,W=W>>>0,De||Ae(be,D,W,4),n.write(be,D,W,pe,23,4),W+4}d.prototype.writeFloatLE=function(D,W,pe){return Ee(this,D,W,!0,pe)},d.prototype.writeFloatBE=function(D,W,pe){return Ee(this,D,W,!1,pe)};function Pe(be,D,W,pe,De){return D=+D,W=W>>>0,De||Ae(be,D,W,8),n.write(be,D,W,pe,52,8),W+8}d.prototype.writeDoubleLE=function(D,W,pe){return Pe(this,D,W,!0,pe)},d.prototype.writeDoubleBE=function(D,W,pe){return Pe(this,D,W,!1,pe)},d.prototype.copy=function(D,W,pe,De){if(!d.isBuffer(D))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!De&&De!==0&&(De=this.length),W>=D.length&&(W=D.length),W||(W=0),De>0&&De<pe&&(De=pe),De===pe||D.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),D.length-W<De-pe&&(De=D.length-W+pe);const ve=De-pe;return this===D&&typeof i.prototype.copyWithin=="function"?this.copyWithin(W,pe,De):i.prototype.set.call(D,this.subarray(pe,De),W),ve},d.prototype.fill=function(D,W,pe,De){if(typeof D=="string"){if(typeof W=="string"?(De=W,W=0,pe=this.length):typeof pe=="string"&&(De=pe,pe=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!d.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(D.length===1){const ke=D.charCodeAt(0);(De==="utf8"&&ke<128||De==="latin1")&&(D=ke)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(W<0||this.length<W||this.length<pe)throw new RangeError("Out of range index");if(pe<=W)return this;W=W>>>0,pe=pe===void 0?this.length:pe>>>0,D||(D=0);let ve;if(typeof D=="number")for(ve=W;ve<pe;++ve)this[ve]=D;else{const ke=d.isBuffer(D)?D:d.from(D,De),le=ke.length;if(le===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(ve=0;ve<pe-W;++ve)this[ve+W]=ke[ve%le]}return this};const Qe={};function Le(be,D,W){Qe[be]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${be}]`,this.stack,delete this.name}get code(){return be}set code(De){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:De,writable:!0})}toString(){return`${this.name} [${be}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(be){return be?`${be} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(be,D){return`The "${be}" argument must be of type number. Received type ${typeof D}`},TypeError),Le("ERR_OUT_OF_RANGE",function(be,D,W){let pe=`The value of "${be}" is out of range.`,De=W;return Number.isInteger(W)&&Math.abs(W)>2**32?De=je(String(W)):typeof W=="bigint"&&(De=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(De=je(De)),De+="n"),pe+=` It must be ${D}. Received ${De}`,pe},RangeError);function je(be){let D="",W=be.length;const pe=be[0]==="-"?1:0;for(;W>=pe+4;W-=3)D=`_${be.slice(W-3,W)}${D}`;return`${be.slice(0,W)}${D}`}function z(be,D,W){Ne(D,"offset"),(be[D]===void 0||be[D+W]===void 0)&&fe(D,be.length-(W+1))}function Se(be,D,W,pe,De,ve){if(be>W||be<D){const ke=typeof D=="bigint"?"n":"";let le;throw D===0||D===BigInt(0)?le=`>= 0${ke} and < 2${ke} ** ${(ve+1)*8}${ke}`:le=`>= -(2${ke} ** ${(ve+1)*8-1}${ke}) and < 2 ** ${(ve+1)*8-1}${ke}`,new Qe.ERR_OUT_OF_RANGE("value",le,be)}z(pe,De,ve)}function Ne(be,D){if(typeof be!="number")throw new Qe.ERR_INVALID_ARG_TYPE(D,"number",be)}function fe(be,D,W){throw Math.floor(be)!==be?(Ne(be,W),new Qe.ERR_OUT_OF_RANGE("offset","an integer",be)):D<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,be)}const se=/[^+/0-9A-Za-z-_]/g;function te(be){if(be=be.split("=")[0],be=be.trim().replace(se,""),be.length<2)return"";for(;be.length%4!==0;)be=be+"=";return be}function xe(be,D){D=D||1/0;let W;const pe=be.length;let De=null;const ve=[];for(let ke=0;ke<pe;++ke){if(W=be.charCodeAt(ke),W>55295&&W<57344){if(!De){if(W>56319){(D-=3)>-1&&ve.push(239,191,189);continue}else if(ke+1===pe){(D-=3)>-1&&ve.push(239,191,189);continue}De=W;continue}if(W<56320){(D-=3)>-1&&ve.push(239,191,189),De=W;continue}W=(De-55296<<10|W-56320)+65536}else De&&(D-=3)>-1&&ve.push(239,191,189);if(De=null,W<128){if((D-=1)<0)break;ve.push(W)}else if(W<2048){if((D-=2)<0)break;ve.push(W>>6|192,W&63|128)}else if(W<65536){if((D-=3)<0)break;ve.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((D-=4)<0)break;ve.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return ve}function Fe(be){const D=[];for(let W=0;W<be.length;++W)D.push(be.charCodeAt(W)&255);return D}function Ce(be,D){let W,pe,De;const ve=[];for(let ke=0;ke<be.length&&!((D-=2)<0);++ke)W=be.charCodeAt(ke),pe=W>>8,De=W%256,ve.push(De),ve.push(pe);return ve}function We(be){return t.toByteArray(te(be))}function Nt(be,D,W,pe){let De;for(De=0;De<pe&&!(De+W>=D.length||De>=be.length);++De)D[De+W]=be[De];return De}function it(be,D){return be instanceof D||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===D.name}function St(be){return be!==be}const Ft=function(){const be="0123456789abcdef",D=new Array(256);for(let W=0;W<16;++W){const pe=W*16;for(let De=0;De<16;++De)D[pe+De]=be[W]+be[De]}return D}();function Mt(be){return typeof BigInt>"u"?Zt:be}function Zt(){throw new Error("BigInt not supported")}})(IA);const Qt=IA.Buffer,Lr=IA.Buffer;var Ld={exports:{}},W4;function GJ(){if(W4)return Ld.exports;W4=1;const e=typeof Qt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,c){c==null&&l!==null&&typeof l=="object"&&(c=l,l=void 0),e&&Qt.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const h=c&&c.protoAction||"error",p=c&&c.constructorAction||"error";if(h==="ignore"&&p==="ignore")return d;if(h!=="ignore"&&p!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return d}else if(h!=="ignore"&&p==="ignore"){if(t.test(o)===!1)return d}else if(n.test(o)===!1)return d;return a(d,{protoAction:h,constructorAction:p,safe:c&&c.safe})}function a(o,{protoAction:l="error",constructorAction:c="error",safe:d}={}){let h=[o];for(;h.length;){const p=h;h=[];for(const g of p){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(d===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return o}function i(o,l,c){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,c)}finally{Error.stackTraceLimit=d}}function s(o,l){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Ld.exports=i,Ld.exports.default=i,Ld.exports.parse=i,Ld.exports.safeParse=s,Ld.exports.scan=a,Ld.exports}var WJ=GJ();const ko=bi(WJ);var KJ={};function bl(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function ZJ(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function YJ(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function XJ(){let e="",t,n=[],r,a;function i(l,c){if(l===""){s(c);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);o(h,g)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,c){switch(l){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const d=parseInt(c,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,c){const{lines:d,incompleteLine:h}=JJ(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],c)},flush(l){i(e,l),s(l)}})}function JJ(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function xy(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Af=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=FJ(n,t);if(e==null)return a;if(n.includes(r))throw new NA({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},nl=Af();function QJ(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function eQ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Pw(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function tQ({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Iv({message:`${r} API key must be a string.`});if(typeof aa>"u")throw new Iv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=KJ[t],e==null)throw new Iv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Iv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var nx=Symbol.for("vercel.ai.validator");function nQ(e){return{[nx]:!0,validate:e}}function rQ(e){return typeof e=="object"&&e!==null&&nx in e&&e[nx]===!0&&"validate"in e}function aQ(e){return rQ(e)?e:iQ(e)}function iQ(e){return nQ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function sQ({value:e,schema:t}){const n=zp({value:e,schema:t});if(!n.success)throw Ou.wrap({value:e,cause:n.error});return n.value}function zp({value:e,schema:t}){const n=aQ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Ou.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Ou.wrap({value:e,cause:r})}}}function oQ({text:e,schema:t}){try{const n=ko.parse(e);return t==null?n:sQ({value:n,schema:t})}catch(n){throw Mu.isInstance(n)||Ou.isInstance(n)?n:new Mu({text:e,cause:n})}}function pf({text:e,schema:t}){try{const n=ko.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=zp({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Mu.isInstance(n)?n:new Mu({text:e,cause:n})}}}function K4(e){try{return ko.parse(e),!0}catch{return!1}}function lQ({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=zp({value:t[e],schema:n});if(!r.success)throw new NA({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var cQ=()=>globalThis.fetch,bo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>uQ({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),uQ=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=cQ()})=>{try{const o=await s(e,{method:"POST",headers:eQ(t),body:n.content,signal:i}),l=xy(o);if(!o.ok){let c;try{c=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw Pw(d)||ka.isInstance(d)?d:new ka({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Pw(c)||ka.isInstance(c))?c:new ka({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(Pw(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new ka({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},q5=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=xy(r);if(s.trim()==="")return{responseHeaders:o,value:new ka({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=oQ({text:s,schema:e});return{responseHeaders:o,value:new ka({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new ka({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},DA=e=>async({response:t})=>{const n=xy(t);if(t.body==null)throw new AA({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(XJ()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(pf({text:r,schema:e}))}}))}},Nf=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=pf({text:a,schema:e}),s=xy(t);if(!i.success)throw new ka({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:dQ,atob:fQ}=globalThis;function G5(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=fQ(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function hp(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return dQ(t)}function W5(e){return e==null?void 0:e.replace(/\/$/,"")}var ir;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},e.find=(a,i)=>{for(const s of a)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ir||(ir={}));var FT;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(FT||(FT={}));const rn=ir.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),rc=e=>{switch(typeof e){case"undefined":return rn.undefined;case"string":return rn.string;case"number":return isNaN(e)?rn.nan:rn.number;case"boolean":return rn.boolean;case"function":return rn.function;case"bigint":return rn.bigint;case"symbol":return rn.symbol;case"object":return Array.isArray(e)?rn.array:e===null?rn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?rn.promise:typeof Map<"u"&&e instanceof Map?rn.map:typeof Set<"u"&&e instanceof Set?rn.set:typeof Date<"u"&&e instanceof Date?rn.date:rn.object;default:return rn.unknown}},$t=ir.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),hQ=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class gs extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(s))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return a(this),r}static assert(t){if(!(t instanceof gs))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ir.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}gs.create=e=>new gs(e);const pp=(e,t)=>{let n;switch(e.code){case $t.invalid_type:e.received===rn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case $t.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ir.jsonStringifyReplacer)}`;break;case $t.unrecognized_keys:n=`Unrecognized key(s) in object: ${ir.joinValues(e.keys,", ")}`;break;case $t.invalid_union:n="Invalid input";break;case $t.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ir.joinValues(e.options)}`;break;case $t.invalid_enum_value:n=`Invalid enum value. Expected ${ir.joinValues(e.options)}, received '${e.received}'`;break;case $t.invalid_arguments:n="Invalid function arguments";break;case $t.invalid_return_type:n="Invalid function return type";break;case $t.invalid_date:n="Invalid date";break;case $t.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ir.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case $t.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case $t.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case $t.custom:n="Invalid input";break;case $t.invalid_intersection_types:n="Intersection results could not be merged";break;case $t.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case $t.not_finite:n="Number must be finite";break;default:n=t.defaultError,ir.assertNever(e)}return{message:n}};let K5=pp;function pQ(e){K5=e}function rx(){return K5}const ax=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},mQ=[];function tn(e,t){const n=rx(),r=ax({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===pp?void 0:pp].filter(a=>!!a)});e.common.issues.push(r)}class pi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return Cn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,s=await a.value;r.push({key:i,value:s})}return pi.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return Cn;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:t.value,value:r}}}const Cn=Object.freeze({status:"aborted"}),Wh=e=>({status:"dirty",value:e}),Di=e=>({status:"valid",value:e}),LT=e=>e.status==="aborted",$T=e=>e.status==="dirty",mf=e=>e.status==="valid",o0=e=>typeof Promise<"u"&&e instanceof Promise;function ix(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Z5(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var un;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(un||(un={}));var Pg,Fg;class vl{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Z4=(e,t)=>{if(mf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new gs(e.common.issues);return this._error=n,this._error}}};function Fn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,o)=>{var l,c;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(c=d??n)!==null&&c!==void 0?c:o.defaultError}},description:a}}class Bn{get description(){return this._def.description}_getType(t){return rc(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:rc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new pi,ctx:{common:t.parent.common,data:t.data,parsedType:rc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(o0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rc(t)},i=this._parseSync({data:t,path:a.path,parent:a});return Z4(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rc(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return mf(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>mf(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rc(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(o0(a)?a:Promise.resolve(a));return Z4(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const s=t(a),o=()=>i.addIssue({code:$t.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new vo({schema:this,typeName:Ht.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return po.create(this,this._def)}nullable(){return $u.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ho.create(this)}promise(){return gp.create(this,this._def)}or(t){return d0.create([this,t],this._def)}and(t){return f0.create(this,t,this._def)}transform(t){return new vo({...Fn(this._def),schema:this,typeName:Ht.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new y0({...Fn(this._def),innerType:this,defaultValue:n,typeName:Ht.ZodDefault})}brand(){return new MA({typeName:Ht.ZodBranded,type:this,...Fn(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new b0({...Fn(this._def),innerType:this,catchValue:n,typeName:Ht.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return _y.create(this,t)}readonly(){return v0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const gQ=/^c[^\s-]{8,}$/i,yQ=/^[0-9a-z]+$/,bQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wQ=/^[a-z0-9_-]{21}$/i,xQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_Q=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,SQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,EQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let eE;const CQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,kQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,AQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,RQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Y5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",IQ=new RegExp(`^${Y5}$`);function X5(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function jQ(e){return new RegExp(`^${X5(e)}$`)}function J5(e){let t=`${Y5}T${X5(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function DQ(e,t){return!!((t==="v4"||!t)&&CQ.test(e)||(t==="v6"||!t)&&kQ.test(e))}function MQ(e,t){if(!xQ.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function OQ(e,t){return!!((t==="v4"||!t)&&TQ.test(e)||(t==="v6"||!t)&&AQ.test(e))}class co extends Bn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==rn.string){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:rn.string,received:i.parsedType}),Cn}const r=new pi;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=t.data.length>i.value,o=t.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(t,a),s?tn(a,{code:$t.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&tn(a,{code:$t.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")SQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"email",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")eE||(eE=new RegExp(EQ,"u")),eE.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"emoji",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")vQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"uuid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")wQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"nanoid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")gQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")yQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid2",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")bQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ulid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),tn(a,{validation:"url",code:$t.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"regex",code:$t.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?J5(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?IQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?jQ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?_Q.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"duration",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?DQ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ip",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?MQ(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"jwt",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?OQ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cidr",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?NQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?RQ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64url",code:$t.invalid_string,message:i.message}),r.dirty()):ir.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:$t.invalid_string,...un.errToObj(r)})}_addCheck(t){return new co({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...un.errToObj(t)})}url(t){return this._addCheck({kind:"url",...un.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...un.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...un.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...un.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...un.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...un.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...un.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...un.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...un.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...un.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...un.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...un.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...un.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...un.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...un.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...un.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...un.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...un.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...un.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...un.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...un.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...un.errToObj(n)})}nonempty(t){return this.min(1,un.errToObj(t))}trim(){return new co({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new co({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new co({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}co.create=e=>{var t;return new co({checks:[],typeName:Ht.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Fn(e)})};function PQ(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class Pu extends Bn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==rn.number){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:rn.number,received:i.parsedType}),Cn}let r;const a=new pi;for(const i of this._def.checks)i.kind==="int"?ir.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?PQ(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_finite,message:i.message}),a.dirty()):ir.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new Pu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new Pu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:un.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:un.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:un.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:un.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ir.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Pu.create=e=>new Pu({checks:[],typeName:Ht.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Fn(e)});class Fu extends Bn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==rn.bigint)return this._getInvalidInput(t);let r;const a=new pi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ir.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return tn(n,{code:$t.invalid_type,expected:rn.bigint,received:n.parsedType}),Cn}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new Fu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new Fu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Fu.create=e=>{var t;return new Fu({checks:[],typeName:Ht.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Fn(e)})};class l0 extends Bn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==rn.boolean){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:rn.boolean,received:r.parsedType}),Cn}return Di(t.data)}}l0.create=e=>new l0({typeName:Ht.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Fn(e)});class gf extends Bn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==rn.date){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:rn.date,received:i.parsedType}),Cn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_date}),Cn}const r=new pi;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ir.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new gf({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:un.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:un.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}gf.create=e=>new gf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ht.ZodDate,...Fn(e)});class sx extends Bn{_parse(t){if(this._getType(t)!==rn.symbol){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:rn.symbol,received:r.parsedType}),Cn}return Di(t.data)}}sx.create=e=>new sx({typeName:Ht.ZodSymbol,...Fn(e)});class c0 extends Bn{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:rn.undefined,received:r.parsedType}),Cn}return Di(t.data)}}c0.create=e=>new c0({typeName:Ht.ZodUndefined,...Fn(e)});class u0 extends Bn{_parse(t){if(this._getType(t)!==rn.null){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:rn.null,received:r.parsedType}),Cn}return Di(t.data)}}u0.create=e=>new u0({typeName:Ht.ZodNull,...Fn(e)});class mp extends Bn{constructor(){super(...arguments),this._any=!0}_parse(t){return Di(t.data)}}mp.create=e=>new mp({typeName:Ht.ZodAny,...Fn(e)});class lf extends Bn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Di(t.data)}}lf.create=e=>new lf({typeName:Ht.ZodUnknown,...Fn(e)});class gc extends Bn{_parse(t){const n=this._getOrReturnCtx(t);return tn(n,{code:$t.invalid_type,expected:rn.never,received:n.parsedType}),Cn}}gc.create=e=>new gc({typeName:Ht.ZodNever,...Fn(e)});class ox extends Bn{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:rn.void,received:r.parsedType}),Cn}return Di(t.data)}}ox.create=e=>new ox({typeName:Ht.ZodVoid,...Fn(e)});class ho extends Bn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==rn.array)return tn(n,{code:$t.invalid_type,expected:rn.array,received:n.parsedType}),Cn;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(s||o)&&(tn(n,{code:s?$t.too_big:$t.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(tn(n,{code:$t.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(tn(n,{code:$t.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>a.type._parseAsync(new vl(n,s,n.path,o)))).then(s=>pi.mergeArray(r,s));const i=[...n.data].map((s,o)=>a.type._parseSync(new vl(n,s,n.path,o)));return pi.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new ho({...this._def,minLength:{value:t,message:un.toString(n)}})}max(t,n){return new ho({...this._def,maxLength:{value:t,message:un.toString(n)}})}length(t,n){return new ho({...this._def,exactLength:{value:t,message:un.toString(n)}})}nonempty(t){return this.min(1,t)}}ho.create=(e,t)=>new ho({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ht.ZodArray,...Fn(t)});function Hh(e){if(e instanceof Yr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=po.create(Hh(r))}return new Yr({...e._def,shape:()=>t})}else return e instanceof ho?new ho({...e._def,type:Hh(e.element)}):e instanceof po?po.create(Hh(e.unwrap())):e instanceof $u?$u.create(Hh(e.unwrap())):e instanceof wl?wl.create(e.items.map(t=>Hh(t))):e}class Yr extends Bn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ir.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==rn.object){const c=this._getOrReturnCtx(t);return tn(c,{code:$t.invalid_type,expected:rn.object,received:c.parsedType}),Cn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof gc&&this._def.unknownKeys==="strip"))for(const c in a.data)s.includes(c)||o.push(c);const l=[];for(const c of s){const d=i[c],h=a.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new vl(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof gc){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(c==="strict")o.length>0&&(tn(a,{code:$t.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of o){const h=a.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new vl(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const h=await d.key,p=await d.value;c.push({key:h,value:p,alwaysSet:d.alwaysSet})}return c}).then(c=>pi.mergeObjectSync(r,c)):pi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return un.errToObj,new Yr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,s,o;const l=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=un.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Yr({...this._def,unknownKeys:"strip"})}passthrough(){return new Yr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Yr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Yr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ht.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Yr({...this._def,catchall:t})}pick(t){const n={};return ir.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Yr({...this._def,shape:()=>n})}omit(t){const n={};return ir.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Yr({...this._def,shape:()=>n})}deepPartial(){return Hh(this)}partial(t){const n={};return ir.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Yr({...this._def,shape:()=>n})}required(t){const n={};return ir.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof po;)i=i._def.innerType;n[r]=i}}),new Yr({...this._def,shape:()=>n})}keyof(){return Q5(ir.objectKeys(this.shape))}}Yr.create=(e,t)=>new Yr({shape:()=>e,unknownKeys:"strip",catchall:gc.create(),typeName:Ht.ZodObject,...Fn(t)});Yr.strictCreate=(e,t)=>new Yr({shape:()=>e,unknownKeys:"strict",catchall:gc.create(),typeName:Ht.ZodObject,...Fn(t)});Yr.lazycreate=(e,t)=>new Yr({shape:e,unknownKeys:"strip",catchall:gc.create(),typeName:Ht.ZodObject,...Fn(t)});class d0 extends Bn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new gs(o.ctx.common.issues));return tn(n,{code:$t.invalid_union,unionErrors:s}),Cn}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(l=>new gs(l));return tn(n,{code:$t.invalid_union,unionErrors:o}),Cn}}get options(){return this._def.options}}d0.create=(e,t)=>new d0({options:e,typeName:Ht.ZodUnion,...Fn(t)});const ec=e=>e instanceof p0?ec(e.schema):e instanceof vo?ec(e.innerType()):e instanceof m0?[e.value]:e instanceof Lu?e.options:e instanceof g0?ir.objectValues(e.enum):e instanceof y0?ec(e._def.innerType):e instanceof c0?[void 0]:e instanceof u0?[null]:e instanceof po?[void 0,...ec(e.unwrap())]:e instanceof $u?[null,...ec(e.unwrap())]:e instanceof MA||e instanceof v0?ec(e.unwrap()):e instanceof b0?ec(e._def.innerType):[];class C1 extends Bn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.object)return tn(n,{code:$t.invalid_type,expected:rn.object,received:n.parsedType}),Cn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:$t.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Cn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const s=ec(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new C1({typeName:Ht.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Fn(r)})}}function BT(e,t){const n=rc(e),r=rc(t);if(e===t)return{valid:!0,data:e};if(n===rn.object&&r===rn.object){const a=ir.objectKeys(t),i=ir.objectKeys(e).filter(o=>a.indexOf(o)!==-1),s={...e,...t};for(const o of i){const l=BT(e[o],t[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===rn.array&&r===rn.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const s=e[i],o=t[i],l=BT(s,o);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===rn.date&&r===rn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class f0 extends Bn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,s)=>{if(LT(i)||LT(s))return Cn;const o=BT(i.value,s.value);return o.valid?(($T(i)||$T(s))&&n.dirty(),{status:n.value,value:o.data}):(tn(r,{code:$t.invalid_intersection_types}),Cn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}f0.create=(e,t,n)=>new f0({left:e,right:t,typeName:Ht.ZodIntersection,...Fn(n)});class wl extends Bn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.array)return tn(r,{code:$t.invalid_type,expected:rn.array,received:r.parsedType}),Cn;if(r.data.length<this._def.items.length)return tn(r,{code:$t.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Cn;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:$t.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new vl(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>pi.mergeArray(n,s)):pi.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new wl({...this._def,rest:t})}}wl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wl({items:e,typeName:Ht.ZodTuple,rest:null,...Fn(t)})};class h0 extends Bn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.object)return tn(r,{code:$t.invalid_type,expected:rn.object,received:r.parsedType}),Cn;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new vl(r,o,r.path,o)),value:s._parse(new vl(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?pi.mergeObjectAsync(n,a):pi.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Bn?new h0({keyType:t,valueType:n,typeName:Ht.ZodRecord,...Fn(r)}):new h0({keyType:co.create(),valueType:t,typeName:Ht.ZodRecord,...Fn(n)})}}class lx extends Bn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.map)return tn(r,{code:$t.invalid_type,expected:rn.map,received:r.parsedType}),Cn;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,l],c)=>({key:a._parse(new vl(r,o,r.path,[c,"key"])),value:i._parse(new vl(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return Cn;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(c.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return Cn;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(c.value,d.value)}return{status:n.value,value:o}}}}lx.create=(e,t,n)=>new lx({valueType:t,keyType:e,typeName:Ht.ZodMap,...Fn(n)});class yf extends Bn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.set)return tn(r,{code:$t.invalid_type,expected:rn.set,received:r.parsedType}),Cn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(tn(r,{code:$t.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(tn(r,{code:$t.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function s(l){const c=new Set;for(const d of l){if(d.status==="aborted")return Cn;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>i._parse(new vl(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(t,n){return new yf({...this._def,minSize:{value:t,message:un.toString(n)}})}max(t,n){return new yf({...this._def,maxSize:{value:t,message:un.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}yf.create=(e,t)=>new yf({valueType:e,minSize:null,maxSize:null,typeName:Ht.ZodSet,...Fn(t)});class ip extends Bn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.function)return tn(n,{code:$t.invalid_type,expected:rn.function,received:n.parsedType}),Cn;function r(o,l){return ax({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rx(),pp].filter(c=>!!c),issueData:{code:$t.invalid_arguments,argumentsError:l}})}function a(o,l){return ax({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rx(),pp].filter(c=>!!c),issueData:{code:$t.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof gp){const o=this;return Di(async function(...l){const c=new gs([]),d=await o._def.args.parseAsync(l,i).catch(g=>{throw c.addIssue(r(l,g)),c}),h=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const o=this;return Di(function(...l){const c=o._def.args.safeParse(l,i);if(!c.success)throw new gs([r(l,c.error)]);const d=Reflect.apply(s,this,c.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new gs([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ip({...this._def,args:wl.create(t).rest(lf.create())})}returns(t){return new ip({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new ip({args:t||wl.create([]).rest(lf.create()),returns:n||lf.create(),typeName:Ht.ZodFunction,...Fn(r)})}}class p0 extends Bn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}p0.create=(e,t)=>new p0({getter:e,typeName:Ht.ZodLazy,...Fn(t)});class m0 extends Bn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return tn(n,{received:n.data,code:$t.invalid_literal,expected:this._def.value}),Cn}return{status:"valid",value:t.data}}get value(){return this._def.value}}m0.create=(e,t)=>new m0({value:e,typeName:Ht.ZodLiteral,...Fn(t)});function Q5(e,t){return new Lu({values:e,typeName:Ht.ZodEnum,...Fn(t)})}class Lu extends Bn{constructor(){super(...arguments),Pg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{expected:ir.joinValues(r),received:n.parsedType,code:$t.invalid_type}),Cn}if(ix(this,Pg)||Z5(this,Pg,new Set(this._def.values)),!ix(this,Pg).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{received:n.data,code:$t.invalid_enum_value,options:r}),Cn}return Di(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Lu.create(t,{...this._def,...n})}exclude(t,n=this._def){return Lu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Pg=new WeakMap;Lu.create=Q5;class g0 extends Bn{constructor(){super(...arguments),Fg.set(this,void 0)}_parse(t){const n=ir.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==rn.string&&r.parsedType!==rn.number){const a=ir.objectValues(n);return tn(r,{expected:ir.joinValues(a),received:r.parsedType,code:$t.invalid_type}),Cn}if(ix(this,Fg)||Z5(this,Fg,new Set(ir.getValidEnumValues(this._def.values))),!ix(this,Fg).has(t.data)){const a=ir.objectValues(n);return tn(r,{received:r.data,code:$t.invalid_enum_value,options:a}),Cn}return Di(t.data)}get enum(){return this._def.values}}Fg=new WeakMap;g0.create=(e,t)=>new g0({values:e,typeName:Ht.ZodNativeEnum,...Fn(t)});class gp extends Bn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.promise&&n.common.async===!1)return tn(n,{code:$t.invalid_type,expected:rn.promise,received:n.parsedType}),Cn;const r=n.parsedType===rn.promise?n.data:Promise.resolve(n.data);return Di(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}gp.create=(e,t)=>new gp({type:e,typeName:Ht.ZodPromise,...Fn(t)});class vo extends Bn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ht.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:s=>{tn(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return Cn;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?Cn:l.status==="dirty"||n.value==="dirty"?Wh(l.value):l});{if(n.value==="aborted")return Cn;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?Cn:o.status==="dirty"||n.value==="dirty"?Wh(o.value):o}}if(a.type==="refinement"){const s=o=>{const l=a.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Cn:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Cn:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!mf(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>mf(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:n.value,value:o})):s);ir.assertNever(a)}}vo.create=(e,t,n)=>new vo({schema:e,typeName:Ht.ZodEffects,effect:t,...Fn(n)});vo.createWithPreprocess=(e,t,n)=>new vo({schema:t,effect:{type:"preprocess",transform:e},typeName:Ht.ZodEffects,...Fn(n)});class po extends Bn{_parse(t){return this._getType(t)===rn.undefined?Di(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}po.create=(e,t)=>new po({innerType:e,typeName:Ht.ZodOptional,...Fn(t)});class $u extends Bn{_parse(t){return this._getType(t)===rn.null?Di(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}$u.create=(e,t)=>new $u({innerType:e,typeName:Ht.ZodNullable,...Fn(t)});class y0 extends Bn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===rn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}y0.create=(e,t)=>new y0({innerType:e,typeName:Ht.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Fn(t)});class b0 extends Bn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return o0(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new gs(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new gs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}b0.create=(e,t)=>new b0({innerType:e,typeName:Ht.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Fn(t)});class cx extends Bn{_parse(t){if(this._getType(t)!==rn.nan){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:rn.nan,received:r.parsedType}),Cn}return{status:"valid",value:t.data}}}cx.create=e=>new cx({typeName:Ht.ZodNaN,...Fn(e)});const FQ=Symbol("zod_brand");class MA extends Bn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class _y extends Bn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Cn:i.status==="dirty"?(n.dirty(),Wh(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Cn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new _y({in:t,out:n,typeName:Ht.ZodPipeline})}}class v0 extends Bn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(mf(a)&&(a.value=Object.freeze(a.value)),a);return o0(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}v0.create=(e,t)=>new v0({innerType:e,typeName:Ht.ZodReadonly,...Fn(t)});function Y4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function eF(e,t={},n){return e?mp.create().superRefine((r,a)=>{var i,s;const o=e(r);if(o instanceof Promise)return o.then(l=>{var c,d;if(!l){const h=Y4(t,r),p=(d=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:p})}});if(!o){const l=Y4(t,r),c=(s=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...l,fatal:c})}}):mp.create()}const LQ={object:Yr.lazycreate};var Ht;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ht||(Ht={}));const $Q=(e,t={message:`Input not instance of ${e.name}`})=>eF(n=>n instanceof e,t),tF=co.create,nF=Pu.create,BQ=cx.create,zQ=Fu.create,rF=l0.create,UQ=gf.create,VQ=sx.create,HQ=c0.create,qQ=u0.create,GQ=mp.create,WQ=lf.create,KQ=gc.create,ZQ=ox.create,YQ=ho.create,XQ=Yr.create,JQ=Yr.strictCreate,QQ=d0.create,eee=C1.create,tee=f0.create,nee=wl.create,ree=h0.create,aee=lx.create,iee=yf.create,see=ip.create,oee=p0.create,lee=m0.create,cee=Lu.create,uee=g0.create,dee=gp.create,X4=vo.create,fee=po.create,hee=$u.create,pee=vo.createWithPreprocess,mee=_y.create,gee=()=>tF().optional(),yee=()=>nF().optional(),bee=()=>rF().optional(),vee={string:e=>co.create({...e,coerce:!0}),number:e=>Pu.create({...e,coerce:!0}),boolean:e=>l0.create({...e,coerce:!0}),bigint:e=>Fu.create({...e,coerce:!0}),date:e=>gf.create({...e,coerce:!0})},wee=Cn;var U=Object.freeze({__proto__:null,defaultErrorMap:pp,setErrorMap:pQ,getErrorMap:rx,makeIssue:ax,EMPTY_PATH:mQ,addIssueToContext:tn,ParseStatus:pi,INVALID:Cn,DIRTY:Wh,OK:Di,isAborted:LT,isDirty:$T,isValid:mf,isAsync:o0,get util(){return ir},get objectUtil(){return FT},ZodParsedType:rn,getParsedType:rc,ZodType:Bn,datetimeRegex:J5,ZodString:co,ZodNumber:Pu,ZodBigInt:Fu,ZodBoolean:l0,ZodDate:gf,ZodSymbol:sx,ZodUndefined:c0,ZodNull:u0,ZodAny:mp,ZodUnknown:lf,ZodNever:gc,ZodVoid:ox,ZodArray:ho,ZodObject:Yr,ZodUnion:d0,ZodDiscriminatedUnion:C1,ZodIntersection:f0,ZodTuple:wl,ZodRecord:h0,ZodMap:lx,ZodSet:yf,ZodFunction:ip,ZodLazy:p0,ZodLiteral:m0,ZodEnum:Lu,ZodNativeEnum:g0,ZodPromise:gp,ZodEffects:vo,ZodTransformer:vo,ZodOptional:po,ZodNullable:$u,ZodDefault:y0,ZodCatch:b0,ZodNaN:cx,BRAND:FQ,ZodBranded:MA,ZodPipeline:_y,ZodReadonly:v0,custom:eF,Schema:Bn,ZodSchema:Bn,late:LQ,get ZodFirstPartyTypeKind(){return Ht},coerce:vee,any:GQ,array:YQ,bigint:zQ,boolean:rF,date:UQ,discriminatedUnion:eee,effect:X4,enum:cee,function:see,instanceof:$Q,intersection:tee,lazy:oee,literal:lee,map:aee,nan:BQ,nativeEnum:uee,never:KQ,null:qQ,nullable:hee,number:nF,object:XQ,oboolean:bee,onumber:yee,optional:fee,ostring:gee,pipeline:mee,preprocess:pee,promise:dee,record:ree,set:iee,strictObject:JQ,string:tF,symbol:VQ,transformer:X4,tuple:nee,undefined:HQ,union:QQ,unknown:WQ,void:ZQ,NEVER:wee,ZodIssueCode:$t,quotelessJson:hQ,ZodError:gs});function xee({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:s});break}case"developer":{r.push({role:"developer",content:s});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){r.push({role:"user",content:s[0].text});break}r.push({role:"user",content:s.map((o,l)=>{var c,d,h,p;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(c=o.mimeType)!=null?c:"image/jpeg"};base64,${hp(o.image)}`,detail:(h=(d=o.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(o.data instanceof URL)throw new Nr({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(p=o.filename)!=null?p:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new Nr({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const c of s)switch(c.type){case"text":{o+=c.text;break}case"tool-call":{l.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(l.length>1)throw new Nr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of s)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:a}}function J4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function ux(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var OA=U.object({error:U.object({message:U.string(),type:U.string().nullish(),param:U.any().nullish(),code:U.union([U.string(),U.number()]).nullish()})}),Bu=q5({errorSchema:OA,errorToMessage:e=>e.error.message});function dx({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function _ee({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(s==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(s.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new Nr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:s.toolName},toolWarnings:i}}}const o=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):o.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(s==null)return{tools:o,tool_choice:void 0,toolWarnings:i};const l=s.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:i};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const c=l;throw new Nr({functionality:`Unsupported tool choice type: ${c}`})}}}var See=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:zT(this.modelId)}get defaultObjectGenerationMode(){return Tee(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:c,seed:d,providerMetadata:h}){var p,g,v,b,x,w,S,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const j=this.settings.useLegacyFunctionCalling;if(j&&this.settings.parallelToolCalls===!0)throw new Nr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(j&&this.supportsStructuredOutputs)throw new Nr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:I,warnings:N}=xee({prompt:t,useLegacyFunctionCalling:j,systemMessageMode:kee(this.modelId)});k.push(...N);const P={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(p=c.name)!=null?p:"response",description:c.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(x=h==null?void 0:h.openai)==null?void 0:x.prediction,reasoning_effort:(S=(w=h==null?void 0:h.openai)==null?void 0:w.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:I};switch(zT(this.modelId)&&(P.temperature!=null&&(P.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),P.top_p!=null&&(P.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),P.frequency_penalty!=null&&(P.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),P.presence_penalty!=null&&(P.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),P.logit_bias!=null&&(P.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),P.logprobs!=null&&(P.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),P.top_logprobs!=null&&(P.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),P.max_tokens!=null&&(P.max_completion_tokens==null&&(P.max_completion_tokens=P.max_tokens),P.max_tokens=void 0)),C){case"regular":{const{tools:L,tool_choice:H,functions:M,function_call:Z,toolWarnings:q}=_ee({mode:e,useLegacyFunctionCalling:j,structuredOutputs:this.supportsStructuredOutputs});return{args:{...P,tools:L,tool_choice:H,functions:M,function_call:Z},warnings:[...k,...q]}}case"object-json":return{args:{...P,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:j?{...P,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...P,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const L=C;throw new Error(`Unsupported type: ${L}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l;const{args:c,warnings:d}=this.getArgs(e),{responseHeaders:h,value:p,rawValue:g}=await bo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:bl(this.config.headers(),e.headers),body:c,failedResponseHandler:Bu,successfulResponseHandler:Nf(Eee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=c,x=p.choices[0],w=(t=p.usage)==null?void 0:t.completion_tokens_details,S=(n=p.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(w==null?void 0:w.reasoning_tokens)!=null&&(E.openai.reasoningTokens=w==null?void 0:w.reasoning_tokens),(w==null?void 0:w.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=w==null?void 0:w.accepted_prediction_tokens),(w==null?void 0:w.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=w==null?void 0:w.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=x.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&x.message.function_call?[{toolCallType:"function",toolCallId:nl(),toolName:x.message.function_call.name,args:x.message.function_call.arguments}]:(a=x.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:nl(),toolName:C.function.name,args:C.function.arguments}}),finishReason:ux(x.finish_reason),usage:{promptTokens:(s=(i=p.usage)==null?void 0:i.prompt_tokens)!=null?s:NaN,completionTokens:(l=(o=p.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:dx(p),warnings:d,logprobs:J4(x.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...b.response}),b.text&&w.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const S of b.toolCalls)w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),w.enqueue({type:"tool-call",...S});w.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),w.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await bo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:bl(this.config.headers(),e.headers),body:r,failedResponseHandler:Bu,successfulResponseHandler:DA(Cee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=t,l=[];let c="unknown",d={promptTokens:void 0,completionTokens:void 0},h,p=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,x){var w,S,E,C,k,j,I,N,P,L,H,M;if(!b.success){c="error",x.enqueue({type:"error",error:b.error});return}const Z=b.value;if("error"in Z){c="error",x.enqueue({type:"error",error:Z.error});return}if(p&&(p=!1,x.enqueue({type:"response-metadata",...dx(Z)})),Z.usage!=null){const{prompt_tokens:X,completion_tokens:ie,prompt_tokens_details:B,completion_tokens_details:J}=Z.usage;d={promptTokens:X??void 0,completionTokens:ie??void 0},(J==null?void 0:J.reasoning_tokens)!=null&&(v.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(B==null?void 0:B.cached_tokens)!=null&&(v.openai.cachedPromptTokens=B==null?void 0:B.cached_tokens)}const q=Z.choices[0];if((q==null?void 0:q.finish_reason)!=null&&(c=ux(q.finish_reason)),(q==null?void 0:q.delta)==null)return;const ue=q.delta;ue.content!=null&&x.enqueue({type:"text-delta",textDelta:ue.content});const ae=J4(q==null?void 0:q.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const ee=g&&ue.function_call!=null?[{type:"function",id:nl(),function:ue.function_call,index:0}]:ue.tool_calls;if(ee!=null)for(const X of ee){const ie=X.index;if(l[ie]==null){if(X.type!=="function")throw new ap({data:X,message:"Expected 'function' type."});if(X.id==null)throw new ap({data:X,message:"Expected 'id' to be a string."});if(((w=X.function)==null?void 0:w.name)==null)throw new ap({data:X,message:"Expected 'function.name' to be a string."});l[ie]={id:X.id,type:"function",function:{name:X.function.name,arguments:(S=X.function.arguments)!=null?S:""},hasFinished:!1};const J=l[ie];((E=J.function)==null?void 0:E.name)!=null&&((C=J.function)==null?void 0:C.arguments)!=null&&(J.function.arguments.length>0&&x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),K4(J.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=J.id)!=null?k:nl(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const B=l[ie];B.hasFinished||(((j=X.function)==null?void 0:j.arguments)!=null&&(B.function.arguments+=(N=(I=X.function)==null?void 0:I.arguments)!=null?N:""),x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:B.id,toolName:B.function.name,argsTextDelta:(P=X.function.arguments)!=null?P:""}),((L=B.function)==null?void 0:L.name)!=null&&((H=B.function)==null?void 0:H.arguments)!=null&&K4(B.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(M=B.id)!=null?M:nl(),toolName:B.function.name,args:B.function.arguments}),B.hasFinished=!0))}},flush(b){var x,w;b.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(x=d.promptTokens)!=null?x:NaN,completionTokens:(w=d.completionTokens)!=null?w:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},aF=U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish(),prompt_tokens_details:U.object({cached_tokens:U.number().nullish()}).nullish(),completion_tokens_details:U.object({reasoning_tokens:U.number().nullish(),accepted_prediction_tokens:U.number().nullish(),rejected_prediction_tokens:U.number().nullish()}).nullish()}).nullish(),Eee=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({message:U.object({role:U.literal("assistant").nullish(),content:U.string().nullish(),function_call:U.object({arguments:U.string(),name:U.string()}).nullish(),tool_calls:U.array(U.object({id:U.string().nullish(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).nullish()}),index:U.number(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullish()})),usage:aF}),Cee=U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).nullish(),content:U.string().nullish(),function_call:U.object({name:U.string().optional(),arguments:U.string().optional()}).nullish(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullable().optional(),index:U.number()})),usage:aF}),OA]);function zT(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function Tee(e){return e.startsWith("gpt-4o-audio-preview")}function kee(e){var t,n;return zT(e)?(n=(t=Aee[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var Aee={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function Nee({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new tc({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Nr({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Nr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Nr({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function Q4(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var Ree=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:c,responseFormat:d,seed:h}){var p;const g=e.type,v=[];s!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:x}=Nee({prompt:n,inputFormat:t}),w=[...x??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,prompt:b,stop:w.length>0?w:void 0};switch(g){case"regular":{if((p=e.tools)!=null&&p.length)throw new Nr({functionality:"tools"});if(e.toolChoice)throw new Nr({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new Nr({functionality:"object-json mode"});case"object-tool":throw new Nr({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await bo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:bl(this.config.headers(),e.headers),body:t,failedResponseHandler:Bu,successfulResponseHandler:Nf(Iee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:ux(l.finish_reason),logprobs:Q4(l.logprobs),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r,body:i},response:dx(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await bo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:bl(this.config.headers(),e.headers),body:r,failedResponseHandler:Bu,successfulResponseHandler:DA(jee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(p,g){if(!p.success){l="error",g.enqueue({type:"error",error:p.error});return}const v=p.value;if("error"in v){l="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...dx(v)})),v.usage!=null&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=ux(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const x=Q4(b==null?void 0:b.logprobs);x!=null&&x.length&&(d===void 0&&(d=[]),d.push(...x))},flush(p){p.enqueue({type:"finish",finishReason:l,logprobs:d,usage:c})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Iee=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullish()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()})}),jee=U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string().nullish(),index:U.number(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullish()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),OA]),Dee=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new RA({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await bo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:bl(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Bu,successfulResponseHandler:Nf(Mee),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Mee=U.object({data:U.array(U.object({embedding:U.array(U.number())})),usage:U.object({prompt_tokens:U.number()}).nullish()}),Oee={"dall-e-3":1,"dall-e-2":10},Pee=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:Oee[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,c,d,h;const p=[];r!=null&&p.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&p.push({type:"unsupported-setting",setting:"seed"});const g=(d=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await bo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:bl(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:Bu,successfulResponseHandler:Nf(Fee),abortSignal:o,fetch:this.config.fetch});return{images:v.data.map(x=>x.b64_json),warnings:p,response:{timestamp:g,modelId:this.modelId,headers:b}}}},Fee=U.object({data:U.array(U.object({b64_json:U.string()}))});function Lee({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=t;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{n.push({role:"user",content:i.map((s,o)=>{var l,c,d,h;switch(s.type){case"text":return{type:"input_text",text:s.text};case"image":return{type:"input_image",image_url:s.image instanceof URL?s.image.toString():`data:${(l=s.mimeType)!=null?l:"image/jpeg"};base64,${hp(s.image)}`,detail:(d=(c=s.providerMetadata)==null?void 0:c.openai)==null?void 0:d.imageDetail};case"file":{if(s.data instanceof URL)throw new Nr({functionality:"File URLs in user messages"});switch(s.mimeType){case"application/pdf":return{type:"input_file",filename:(h=s.filename)!=null?h:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${s.data}`};default:throw new Nr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const s of i)switch(s.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:s.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:s.toolCallId,name:s.toolName,arguments:JSON.stringify(s.args)});break}}break}case"tool":{for(const s of i)n.push({type:"function_call_output",call_id:s.toolCallId,output:JSON.stringify(s.result)});break}default:{const s=a;throw new Error(`Unsupported role: ${s}`)}}return{messages:n,warnings:r}}function eD({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function $ee({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)switch(l.type){case"function":s.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":s.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:s,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:s,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=o;throw new Nr({functionality:`Unsupported tool choice type: ${l}`})}}}var Bee=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:s,frequencyPenalty:o,seed:l,prompt:c,providerMetadata:d,responseFormat:h}){var p,g,v;const b=[],x=nte(this.modelId),w=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),s!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=Lee({prompt:c,systemMessageMode:x.systemMessageMode});b.push(...E);const C=lQ({provider:"openai",providerOptions:d,schema:rte}),k=(p=C==null?void 0:C.strictSchemas)!=null?p:!0,j={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,...x.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},...x.requiredAutoTruncation&&{truncation:"auto"}};switch(x.isReasoningModel&&(j.temperature!=null&&(j.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),j.top_p!=null&&(j.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),w){case"regular":{const{tools:I,tool_choice:N,toolWarnings:P}=$ee({mode:e,strict:k});return{args:{...j,tools:I,tool_choice:N},warnings:[...b,...P]}}case"object-json":return{args:{...j,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...j,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const I=w;throw new Error(`Unsupported type: ${I}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=this.getArgs(e),{responseHeaders:l,value:c,rawValue:d}=await bo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:bl(this.config.headers(),e.headers),body:s,failedResponseHandler:Bu,successfulResponseHandler:Nf(U.object({id:U.string(),created_at:U.number(),model:U.string(),output:U.array(U.discriminatedUnion("type",[U.object({type:U.literal("message"),role:U.literal("assistant"),content:U.array(U.object({type:U.literal("output_text"),text:U.string(),annotations:U.array(U.object({type:U.literal("url_citation"),start_index:U.number(),end_index:U.number(),url:U.string(),title:U.string()}))}))}),U.object({type:U.literal("function_call"),call_id:U.string(),name:U.string(),arguments:U.string()}),U.object({type:U.literal("web_search_call")}),U.object({type:U.literal("computer_call")}),U.object({type:U.literal("reasoning")})])),incomplete_details:U.object({reason:U.string()}).nullable(),usage:iF})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),p=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var b,x,w;return{sourceType:"url",id:(w=(x=(b=this.config).generateId)==null?void 0:x.call(b))!=null?w:nl(),url:v.url,title:v.title}})),finishReason:eD({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:p.length>0}),toolCalls:p.length>0?p:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:l,body:d},request:{body:JSON.stringify(s)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:o}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await bo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:bl(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Bu,successfulResponseHandler:DA(Kee),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let s="unknown",o=NaN,l=NaN,c=null,d=null,h=null;const p={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,k,j,I;if(!v.success){s="error",b.enqueue({type:"error",error:v.error});return}const N=v.value;if(ete(N))N.item.type==="function_call"&&(p[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(Qee(N)){const P=p[N.output_index];P!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:P.toolCallId,toolName:P.toolName,argsTextDelta:N.delta})}else Jee(N)?(h=N.response.id,b.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):Zee(N)?b.enqueue({type:"text-delta",textDelta:N.delta}):Yee(N)&&N.item.type==="function_call"?(p[N.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):Xee(N)?(s=eD({finishReason:(x=N.response.incomplete_details)==null?void 0:x.reason,hasToolCalls:g}),o=N.response.usage.input_tokens,l=N.response.usage.output_tokens,c=(S=(w=N.response.usage.input_tokens_details)==null?void 0:w.cached_tokens)!=null?S:c,d=(C=(E=N.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:d):tte(N)&&b.enqueue({type:"source",source:{sourceType:"url",id:(I=(j=(k=i.config).generateId)==null?void 0:j.call(k))!=null?I:nl(),url:N.annotation.url,title:N.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:s,usage:{promptTokens:o,completionTokens:l},...(c!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},iF=U.object({input_tokens:U.number(),input_tokens_details:U.object({cached_tokens:U.number().nullish()}).nullish(),output_tokens:U.number(),output_tokens_details:U.object({reasoning_tokens:U.number().nullish()}).nullish()}),zee=U.object({type:U.literal("response.output_text.delta"),delta:U.string()}),Uee=U.object({type:U.enum(["response.completed","response.incomplete"]),response:U.object({incomplete_details:U.object({reason:U.string()}).nullish(),usage:iF})}),Vee=U.object({type:U.literal("response.created"),response:U.object({id:U.string(),created_at:U.number(),model:U.string()})}),Hee=U.object({type:U.literal("response.output_item.done"),output_index:U.number(),item:U.discriminatedUnion("type",[U.object({type:U.literal("message")}),U.object({type:U.literal("function_call"),id:U.string(),call_id:U.string(),name:U.string(),arguments:U.string(),status:U.literal("completed")})])}),qee=U.object({type:U.literal("response.function_call_arguments.delta"),item_id:U.string(),output_index:U.number(),delta:U.string()}),Gee=U.object({type:U.literal("response.output_item.added"),output_index:U.number(),item:U.discriminatedUnion("type",[U.object({type:U.literal("message")}),U.object({type:U.literal("function_call"),id:U.string(),call_id:U.string(),name:U.string(),arguments:U.string()})])}),Wee=U.object({type:U.literal("response.output_text.annotation.added"),annotation:U.object({type:U.literal("url_citation"),url:U.string(),title:U.string()})}),Kee=U.union([zee,Uee,Vee,Hee,qee,Gee,Wee,U.object({type:U.string()}).passthrough()]);function Zee(e){return e.type==="response.output_text.delta"}function Yee(e){return e.type==="response.output_item.done"}function Xee(e){return e.type==="response.completed"||e.type==="response.incomplete"}function Jee(e){return e.type==="response.created"}function Qee(e){return e.type==="response.function_call_arguments.delta"}function ete(e){return e.type==="response.output_item.added"}function tte(e){return e.type==="response.output_text.annotation.added"}function nte(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var rte=U.object({metadata:U.any().nullish(),parallelToolCalls:U.boolean().nullish(),previousResponseId:U.string().nullish(),store:U.boolean().nullish(),user:U.string().nullish(),reasoningEffort:U.string().nullish(),strictSchemas:U.boolean().nullish(),instructions:U.string().nullish()}),ate=U.object({});function ite({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:ate}}var ste={webSearchPreview:ite};function sF(e={}){var t,n,r;const a=(t=W5(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",s=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${tQ({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(b,x={})=>new See(b,x,{provider:`${s}.chat`,url:({path:w})=>`${a}${w}`,headers:o,compatibility:i,fetch:e.fetch}),c=(b,x={})=>new Ree(b,x,{provider:`${s}.completion`,url:({path:w})=>`${a}${w}`,headers:o,compatibility:i,fetch:e.fetch}),d=(b,x={})=>new Dee(b,x,{provider:`${s}.embedding`,url:({path:w})=>`${a}${w}`,headers:o,fetch:e.fetch}),h=(b,x={})=>new Pee(b,x,{provider:`${s}.image`,url:({path:w})=>`${a}${w}`,headers:o,fetch:e.fetch}),p=(b,x)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?c(b,x):l(b,x)},g=b=>new Bee(b,{provider:`${s}.responses`,url:({path:x})=>`${a}${x}`,headers:o,fetch:e.fetch}),v=function(b,x){return p(b,x)};return v.languageModel=p,v.chat=l,v.completion=c,v.responses=g,v.embedding=d,v.textEmbedding=d,v.textEmbeddingModel=d,v.image=h,v.imageModel=h,v.tools=ste,v}sF({compatibility:"strict"});var oF="vercel.ai.error",ote=Symbol.for(oF),lF,lte=class cF extends Error{constructor({name:t,message:n,cause:r}){super(n),this[lF]=!0,this.name=t,this.cause=r}static isInstance(t){return cF.hasMarker(t,oF)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};lF=ote;var mi=lte,uF="AI_APICallError",dF=`vercel.ai.error.${uF}`,cte=Symbol.for(dF),fF,ic=class extends mi{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:uF,message:t,cause:o}),this[fF]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=c}static isInstance(t){return mi.hasMarker(t,dF)}};fF=cte;var hF="AI_EmptyResponseBodyError",pF=`vercel.ai.error.${hF}`,ute=Symbol.for(pF),mF,dte=class extends mi{constructor({message:t="Empty response body"}={}){super({name:hF,message:t}),this[mF]=!0}static isInstance(t){return mi.hasMarker(t,pF)}};mF=ute;function gF(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var yF="AI_InvalidArgumentError",bF=`vercel.ai.error.${yF}`,fte=Symbol.for(bF),vF,wF=class extends mi{constructor({message:t,cause:n,argument:r}){super({name:yF,message:t,cause:n}),this[vF]=!0,this.argument=r}static isInstance(t){return mi.hasMarker(t,bF)}};vF=fte;var xF="AI_JSONParseError",_F=`vercel.ai.error.${xF}`,hte=Symbol.for(_F),SF,fx=class extends mi{constructor({text:t,cause:n}){super({name:xF,message:`JSON parsing failed: Text: ${t}.
Error message: ${gF(n)}`,cause:n}),this[SF]=!0,this.text=t}static isInstance(t){return mi.hasMarker(t,_F)}};SF=hte;var EF="AI_LoadAPIKeyError",CF=`vercel.ai.error.${EF}`,pte=Symbol.for(CF),TF,jv=class extends mi{constructor({message:t}){super({name:EF,message:t}),this[TF]=!0}static isInstance(t){return mi.hasMarker(t,CF)}};TF=pte;var kF="AI_TooManyEmbeddingValuesForCallError",AF=`vercel.ai.error.${kF}`,mte=Symbol.for(AF),NF,gte=class extends mi{constructor(e){super({name:kF,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[NF]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return mi.hasMarker(e,AF)}};NF=mte;var RF="AI_TypeValidationError",IF=`vercel.ai.error.${RF}`,yte=Symbol.for(IF),jF,bte=class UT extends mi{constructor({value:t,cause:n}){super({name:RF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${gF(n)}`,cause:n}),this[jF]=!0,this.value=t}static isInstance(t){return mi.hasMarker(t,IF)}static wrap({value:t,cause:n}){return UT.isInstance(n)&&n.value===t?n:new UT({value:t,cause:n})}};jF=yte;var hx=bte,DF="AI_UnsupportedFunctionalityError",MF=`vercel.ai.error.${DF}`,vte=Symbol.for(MF),OF,Fw=class extends mi{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:DF,message:n}),this[OF]=!0,this.functionality=t}static isInstance(t){return mi.hasMarker(t,MF)}};OF=vte;let wte=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var xte={};function VT(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function _te(){let e="",t,n=[],r,a;function i(l,c){if(l===""){s(c);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);o(h,g)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,c){switch(l){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const d=parseInt(c,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,c){const{lines:d,incompleteLine:h}=Ste(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],c)},flush(l){i(e,l),s(l)}})}function Ste(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function T1(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Ete=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=wte(n,t);if(e==null)return a;if(n.includes(r))throw new wF({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Cte=Ete();function Tte(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function tE(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function kte({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new jv({message:`${r} API key must be a string.`});if(typeof aa>"u")throw new jv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=xte[t],e==null)throw new jv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new jv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var HT=Symbol.for("vercel.ai.validator");function Ate(e){return{[HT]:!0,validate:e}}function Nte(e){return typeof e=="object"&&e!==null&&HT in e&&e[HT]===!0&&"validate"in e}function Rte(e){return Nte(e)?e:Ite(e)}function Ite(e){return Ate(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function jte({value:e,schema:t}){const n=PA({value:e,schema:t});if(!n.success)throw hx.wrap({value:e,cause:n.error});return n.value}function PA({value:e,schema:t}){const n=Rte(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:hx.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:hx.wrap({value:e,cause:r})}}}function Dte({text:e,schema:t}){try{const n=ko.parse(e);return t==null?n:jte({value:n,schema:t})}catch(n){throw fx.isInstance(n)||hx.isInstance(n)?n:new fx({text:e,cause:n})}}function PF({text:e,schema:t}){try{const n=ko.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=PA({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:fx.isInstance(n)?n:new fx({text:e,cause:n})}}}function Mte({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=PA({value:t[e],schema:n});if(!r.success)throw new wF({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Ote=()=>globalThis.fetch,qT=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>Pte({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),Pte=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=Ote()})=>{try{const o=await s(e,{method:"POST",headers:Tte(t),body:n.content,signal:i}),l=T1(o);if(!o.ok){let c;try{c=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw tE(d)||ic.isInstance(d)?d:new ic({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(tE(c)||ic.isInstance(c))?c:new ic({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(tE(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new ic({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function GT(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Fte=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=T1(r);if(s.trim()==="")return{responseHeaders:o,value:new ic({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=Dte({text:s,schema:e});return{responseHeaders:o,value:new ic({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new ic({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},Lte=e=>async({response:t})=>{const n=T1(t);if(t.body==null)throw new dte({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(_te()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(PF({text:r,schema:e}))}}))}},FF=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=PF({text:a,schema:e}),s=T1(t);if(!i.success)throw new ic({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:$te}=globalThis;function Bte(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return $te(t)}function zte(e){return e==null?void 0:e.replace(/\/$/,"")}function Fs(e){if(Ute(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:s,anyOf:o,oneOf:l,format:c,const:d,minLength:h,enum:p}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),d!==void 0&&(g.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),p!==void 0&&(g.enum=p),a!=null&&(g.properties=Object.entries(a).reduce((v,[b,x])=>(v[b]=Fs(x),v),{})),i&&(g.items=Array.isArray(i)?i.map(Fs):Fs(i)),s&&(g.allOf=s.map(Fs)),o)if(o.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=Fs(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(Fs),g.nullable=!0}else g.anyOf=o.map(Fs);return l&&(g.oneOf=l.map(Fs)),h!==void 0&&(g.minLength=h),g}function Ute(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function Vte(e){var t,n;const r=[],a=[];let i=!0;for(const{role:s,content:o}of e)switch(s){case"system":{if(!i)throw new Fw({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{i=!1;const l=[];for(const c of o)switch(c.type){case"text":{l.push({text:c.text});break}case"image":{l.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:Bte(c.image)}});break}case"file":{l.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new Fw({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new Fw({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function tD(e){return e.includes("/")?e:`models/${e}`}var Hte=U.object({error:U.object({code:U.number().nullable(),message:U.string(),status:U.string()})}),WT=Fte({errorSchema:Hte,errorToMessage:e=>e.error.message});function qte(e,t,n,r){var a,i;const s=(a=e.tools)!=null&&a.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(s==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const d=[];for(const g of s)g.type==="provider-defined"?o.push({type:"unsupported-tool",tool:g}):d.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:Fs(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:o};const p=h.type;switch(p){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:o};default:{const g=p;throw new Fw({functionality:`Unsupported tool choice type: ${g}`})}}}function nD({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var Gte=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:c,seed:d,providerMetadata:h}){var p,g;const v=e.type,b=[],x=Mte({provider:"google",providerOptions:h,schema:Yte}),w={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:s,presencePenalty:o,stopSequences:l,seed:d,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?Fs(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:x==null?void 0:x.responseModalities},{contents:S,systemInstruction:E}=Vte(t);switch(v){case"regular":{const{tools:C,toolConfig:k,toolWarnings:j}=qte(e,(p=this.settings.useSearchGrounding)!=null?p:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:w,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...j]}}case"object-json":return{args:{generationConfig:{...w,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?Fs(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:w,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:Fs(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=await this.getArgs(e),l=JSON.stringify(s),c=VT(await GT(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:p}=await qT({url:`${this.config.baseURL}/${tD(this.modelId)}:generateContent`,headers:c,body:s,failedResponseHandler:WT,successfulResponseHandler:FF(Kte),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=s,b=h.candidates[0],x=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,w=rD({parts:x,generateId:this.config.generateId}),S=h.usageMetadata;return{text:aD(x),files:(t=iD(x))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:w,finishReason:nD({finishReason:b.finishReason,hasToolCalls:w!=null&&w.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:d,body:p},warnings:o,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:sD({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=VT(await GT(this.config.headers),e.headers),{responseHeaders:i,value:s}=await qT({url:`${this.config.baseURL}/${tD(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:WT,successfulResponseHandler:Lte(Zte),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let c="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const p=this.config.generateId;let g=!1;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const j=v.value,I=j.usageMetadata;I!=null&&(d={promptTokens:(x=I.promptTokenCount)!=null?x:NaN,completionTokens:(w=I.candidatesTokenCount)!=null?w:NaN});const N=(S=j.candidates)==null?void 0:S[0];if(N==null)return;const P=N.content;if(P!=null){const L=aD(P.parts);L!=null&&b.enqueue({type:"text-delta",textDelta:L});const H=iD(P.parts);if(H!=null)for(const Z of H)b.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const M=rD({parts:P.parts,generateId:p});if(M!=null)for(const Z of M)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),g=!0}if(N.finishReason!=null){c=nD({finishReason:N.finishReason,hasToolCalls:g});const L=(E=sD({groundingMetadata:N.groundingMetadata,generateId:p}))!=null?E:[];for(const H of L)b.enqueue({type:"source",source:H});h={google:{groundingMetadata:(C=N.groundingMetadata)!=null?C:null,safetyRatings:(k=N.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:c,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function rD({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function aD(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function iD(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function sD({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var LF=U.object({role:U.string(),parts:U.array(U.union([U.object({text:U.string()}),U.object({functionCall:U.object({name:U.string(),args:U.unknown()})}),U.object({inlineData:U.object({mimeType:U.string(),data:U.string()})})])).nullish()}),Wte=U.object({web:U.object({uri:U.string(),title:U.string()}).nullish(),retrievedContext:U.object({uri:U.string(),title:U.string()}).nullish()}),$F=U.object({webSearchQueries:U.array(U.string()).nullish(),retrievalQueries:U.array(U.string()).nullish(),searchEntryPoint:U.object({renderedContent:U.string()}).nullish(),groundingChunks:U.array(Wte).nullish(),groundingSupports:U.array(U.object({segment:U.object({startIndex:U.number().nullish(),endIndex:U.number().nullish(),text:U.string().nullish()}),segment_text:U.string().nullish(),groundingChunkIndices:U.array(U.number()).nullish(),supportChunkIndices:U.array(U.number()).nullish(),confidenceScores:U.array(U.number()).nullish(),confidenceScore:U.array(U.number()).nullish()})).nullish(),retrievalMetadata:U.union([U.object({webDynamicRetrievalScore:U.number()}),U.object({})]).nullish()}),BF=U.object({category:U.string(),probability:U.string(),probabilityScore:U.number().nullish(),severity:U.string().nullish(),severityScore:U.number().nullish(),blocked:U.boolean().nullish()}),Kte=U.object({candidates:U.array(U.object({content:LF.nullish().or(U.object({}).strict()),finishReason:U.string().nullish(),safetyRatings:U.array(BF).nullish(),groundingMetadata:$F.nullish()})),usageMetadata:U.object({promptTokenCount:U.number().nullish(),candidatesTokenCount:U.number().nullish(),totalTokenCount:U.number().nullish()}).nullish()}),Zte=U.object({candidates:U.array(U.object({content:LF.nullish(),finishReason:U.string().nullish(),safetyRatings:U.array(BF).nullish(),groundingMetadata:$F.nullish()})).nullish(),usageMetadata:U.object({promptTokenCount:U.number().nullish(),candidatesTokenCount:U.number().nullish(),totalTokenCount:U.number().nullish()}).nullish()}),Yte=U.object({responseModalities:U.array(U.enum(["TEXT","IMAGE"])).nullish()}),Xte=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new gte({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=VT(await GT(this.config.headers),t),{responseHeaders:a,value:i}=await qT({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(s=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:s}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:WT,successfulResponseHandler:FF(Jte),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(s=>s.values),usage:void 0,rawResponse:{headers:a}}}},Jte=U.object({embeddings:U.array(U.object({values:U.array(U.number())}))});function Qte(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function zF(e={}){var t;const n=(t=zte(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":kte({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(o,l={})=>{var c;return new Gte(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:Cte,isSupportedUrl:Qte,fetch:e.fetch})},i=(o,l={})=>new Xte(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(o,l)};return s.languageModel=a,s.chat=a,s.generativeAI=a,s.embedding=i,s.textEmbedding=i,s.textEmbeddingModel=i,s}zF();var UF="vercel.ai.error",ene=Symbol.for(UF),VF,tne=class HF extends Error{constructor({name:t,message:n,cause:r}){super(n),this[VF]=!0,this.name=t,this.cause=r}static isInstance(t){return HF.hasMarker(t,UF)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};VF=ene;var qa=tne,qF="AI_APICallError",GF=`vercel.ai.error.${qF}`,nne=Symbol.for(GF),WF,sc=class extends qa{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:s,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:qF,message:e,cause:s}),this[WF]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=o,this.data=l}static isInstance(e){return qa.hasMarker(e,GF)}};WF=nne;var KF="AI_EmptyResponseBodyError",ZF=`vercel.ai.error.${KF}`,rne=Symbol.for(ZF),YF,ane=class extends qa{constructor({message:e="Empty response body"}={}){super({name:KF,message:e}),this[YF]=!0}static isInstance(e){return qa.hasMarker(e,ZF)}};YF=rne;function XF(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var JF="AI_InvalidArgumentError",QF=`vercel.ai.error.${JF}`,ine=Symbol.for(QF),eL,sne=class extends qa{constructor({message:t,cause:n,argument:r}){super({name:JF,message:t,cause:n}),this[eL]=!0,this.argument=r}static isInstance(t){return qa.hasMarker(t,QF)}};eL=ine;var tL="AI_InvalidPromptError",nL=`vercel.ai.error.${tL}`,one=Symbol.for(nL),rL,lne=class extends qa{constructor({prompt:e,message:t,cause:n}){super({name:tL,message:`Invalid prompt: ${t}`,cause:n}),this[rL]=!0,this.prompt=e}static isInstance(e){return qa.hasMarker(e,nL)}};rL=one;var aL="AI_InvalidResponseDataError",iL=`vercel.ai.error.${aL}`,cne=Symbol.for(iL),sL,nE=class extends qa{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:aL,message:t}),this[sL]=!0,this.data=e}static isInstance(e){return qa.hasMarker(e,iL)}};sL=cne;var oL="AI_JSONParseError",lL=`vercel.ai.error.${oL}`,une=Symbol.for(lL),cL,px=class extends qa{constructor({text:e,cause:t}){super({name:oL,message:`JSON parsing failed: Text: ${e}.
Error message: ${XF(t)}`,cause:t}),this[cL]=!0,this.text=e}static isInstance(e){return qa.hasMarker(e,lL)}};cL=une;var uL="AI_LoadAPIKeyError",dL=`vercel.ai.error.${uL}`,dne=Symbol.for(dL),fL,Dv=class extends qa{constructor({message:e}){super({name:uL,message:e}),this[fL]=!0}static isInstance(e){return qa.hasMarker(e,dL)}};fL=dne;var hL="AI_TypeValidationError",pL=`vercel.ai.error.${hL}`,fne=Symbol.for(pL),mL,hne=class KT extends qa{constructor({value:t,cause:n}){super({name:hL,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${XF(n)}`,cause:n}),this[mL]=!0,this.value=t}static isInstance(t){return qa.hasMarker(t,pL)}static wrap({value:t,cause:n}){return KT.isInstance(n)&&n.value===t?n:new KT({value:t,cause:n})}};mL=fne;var mx=hne,gL="AI_UnsupportedFunctionalityError",yL=`vercel.ai.error.${gL}`,pne=Symbol.for(yL),bL,$s=class extends qa{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:gL,message:t}),this[bL]=!0,this.functionality=e}static isInstance(e){return qa.hasMarker(e,yL)}};bL=pne;let mne=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},oD=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function rE(e){}function gne(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=rE,onError:n=rE,onRetry:r=rE,onComment:a}=e;let i="",s=!0,o,l="",c="";function d(b){const x=s?b.replace(/^\xEF\xBB\xBF/,""):b,[w,S]=yne(`${i}${x}`);for(const E of w)h(E);i=S,s=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const x=b.indexOf(":");if(x!==-1){const w=b.slice(0,x),S=b[x+1]===" "?2:1,E=b.slice(x+S);p(w,E,b);return}p(b,"",b)}function p(b,x,w){switch(b){case"event":c=x;break;case"data":l=`${l}${x}
`;break;case"id":o=x.includes("\0")?void 0:x;break;case"retry":/^\d+$/.test(x)?r(parseInt(x,10)):n(new oD(`Invalid \`retry\` value: "${x}"`,{type:"invalid-retry",value:x,line:w}));break;default:n(new oD(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:x,line:w}));break}}function g(){l.length>0&&t({id:o,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",c=""}function v(b={}){i&&b.consume&&h(i),s=!0,o=void 0,l="",c="",i=""}return{feed:d,reset:v}}function yne(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(a!==-1&&i!==-1?s=Math.min(a,i):a!==-1?s=a:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const o=e.slice(r,s);t.push(o),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class bne extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=gne({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var vne={};function gx(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function k1(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var wne=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=mne(n,t);if(e==null)return a;if(n.includes(r))throw new sne({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Mv=wne();function xne(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function aE(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function _ne({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Dv({message:`${r} API key must be a string.`});if(typeof aa>"u")throw new Dv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=vne[t],e==null)throw new Dv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Dv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var ZT=Symbol.for("vercel.ai.validator");function Sne(e){return{[ZT]:!0,validate:e}}function Ene(e){return typeof e=="object"&&e!==null&&ZT in e&&e[ZT]===!0&&"validate"in e}function Cne(e){return Ene(e)?e:Tne(e)}function Tne(e){return Sne(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function kne({value:e,schema:t}){const n=vL({value:e,schema:t});if(!n.success)throw mx.wrap({value:e,cause:n.error});return n.value}function vL({value:e,schema:t}){const n=Cne(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:mx.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:mx.wrap({value:e,cause:r})}}}function Ane({text:e,schema:t}){try{const n=ko.parse(e);return t==null?n:kne({value:n,schema:t})}catch(n){throw px.isInstance(n)||mx.isInstance(n)?n:new px({text:e,cause:n})}}function wL({text:e,schema:t}){try{const n=ko.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=vL({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:px.isInstance(n)?n:new px({text:e,cause:n})}}}function iE(e){try{return ko.parse(e),!0}catch{return!1}}var Nne=()=>globalThis.fetch,yx=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>Rne({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),Rne=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=Nne()})=>{try{const o=await s(e,{method:"POST",headers:xne(t),body:n.content,signal:i}),l=k1(o);if(!o.ok){let c;try{c=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw aE(d)||sc.isInstance(d)?d:new sc({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(aE(c)||sc.isInstance(c))?c:new sc({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(aE(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new sc({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},Ine=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=k1(r);if(s.trim()==="")return{responseHeaders:o,value:new sc({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=Ane({text:s,schema:e});return{responseHeaders:o,value:new sc({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new sc({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},xL=e=>async({response:t})=>{const n=k1(t);if(t.body==null)throw new ane({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new bne).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(wL({text:r,schema:e}))}}))}},_L=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=wL({text:a,schema:e}),s=k1(t);if(!i.success)throw new sc({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:jne}=globalThis;function Dne(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return jne(t)}function Mne(e){return e==null?void 0:e.replace(/\/$/,"")}var One=Object.defineProperty,Pne=Object.defineProperties,Fne=Object.getOwnPropertyDescriptors,bx=Object.getOwnPropertySymbols,SL=Object.prototype.hasOwnProperty,EL=Object.prototype.propertyIsEnumerable,lD=(e,t,n)=>t in e?One(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ps=(e,t)=>{for(var n in t||(t={}))SL.call(t,n)&&lD(e,n,t[n]);if(bx)for(var n of bx(t))EL.call(t,n)&&lD(e,n,t[n]);return e},Lw=(e,t)=>Pne(e,Fne(t)),vx=(e,t)=>{var n={};for(var r in e)SL.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bx)for(var r of bx(e))t.indexOf(r)<0&&EL.call(e,r)&&(n[r]=e[r]);return n};function Ko(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function Lne(e){var t,n,r;const a=[];for(const{role:i,content:s,providerMetadata:o}of e)switch(i){case"system":{a.push({role:"system",content:s,cache_control:Ko(o)});break}case"user":{if(s.length===1&&((t=s[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:s[0].text,cache_control:(n=Ko(o))!=null?n:Ko(s[0].providerMetadata)});break}const l=Ko(o),c=s.map(d=>{var h,p,g,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=Ko(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(p=d.mimeType)!=null?p:"image/jpeg"};base64,${Dne(d.image)}`},cache_control:(g=Ko(d.providerMetadata))!=null?g:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=Ko(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:c});break}case"assistant":{let l="";const c=[];for(const d of s)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{c.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:c.length>0?c:void 0,cache_control:Ko(o)});break}case"tool":{for(const l of s)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Ko(o))!=null?r:Ko(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function cD(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function wx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var FA=U.object({error:U.object({message:U.string(),type:U.string(),param:U.any().nullable(),code:U.string().nullable()})}),xx=Ine({errorSchema:FA,errorToMessage:e=>e.error.message});function $ne(e){return"parameters"in e}var Bne=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:s,seed:o,stopSequences:l,responseFormat:c,topK:d,providerMetadata:h}){var p;const g=e.type,v=(p=h==null?void 0:h.openrouter)!=null?p:{},b=ps(ps(ps({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:s,seed:o,stop:l,response_format:c,top_k:d,messages:Lne(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return ps(ps({},b),Vne(e));case"object-json":return Lw(ps({},b),{response_format:{type:"json_object"}});case"object-tool":return Lw(ps({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const x=g;throw new $s({functionality:`${x} mode`})}}}async doGenerate(e){var t,n,r,a,i,s,o;const l=this.getArgs(e),{responseHeaders:c,value:d}=await yx({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:gx(this.config.headers(),e.headers),body:l,failedResponseHandler:xx,successfulResponseHandler:_L(zne),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:p}=h,g=vx(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var x;return{toolCallType:"function",toolCallId:(x=b.id)!=null?x:Mv(),toolName:b.function.name,args:b.function.arguments}}),finishReason:wx(v.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(o=(s=d.usage)==null?void 0:s.completion_tokens)!=null?o:0},rawCall:{rawPrompt:p,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:cD(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await yx({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:gx(this.config.headers(),e.headers),body:Lw(ps({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:xx,successfulResponseHandler:xL(Une),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,s=vx(a,["messages"]),o=[];let l="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,p){var g,v,b,x,w,S,E,C,k,j,I,N;if(!h.success){l="error",p.enqueue({type:"error",error:h.error});return}const P=h.value;if("error"in P){l="error",p.enqueue({type:"error",error:P.error});return}P.id&&p.enqueue({type:"response-metadata",id:P.id}),P.model&&p.enqueue({type:"response-metadata",modelId:P.model}),P.usage!=null&&(c={promptTokens:P.usage.prompt_tokens,completionTokens:P.usage.completion_tokens});const L=P.choices[0];if((L==null?void 0:L.finish_reason)!=null&&(l=wx(L.finish_reason)),(L==null?void 0:L.delta)==null)return;const H=L.delta;H.content!=null&&p.enqueue({type:"text-delta",textDelta:H.content}),H.reasoning!=null&&p.enqueue({type:"reasoning",textDelta:H.reasoning});const M=cD(L==null?void 0:L.logprobs);if(M!=null&&M.length&&(d===void 0&&(d=[]),d.push(...M)),H.tool_calls!=null)for(const Z of H.tool_calls){const q=Z.index;if(o[q]==null){if(Z.type!=="function")throw new nE({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new nE({data:Z,message:"Expected 'id' to be a string."});if(((g=Z.function)==null?void 0:g.name)==null)throw new nE({data:Z,message:"Expected 'function.name' to be a string."});o[q]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ae=o[q];if(ae==null)throw new Error("Tool call is missing");((b=ae.function)==null?void 0:b.name)!=null&&((x=ae.function)==null?void 0:x.arguments)!=null&&iE(ae.function.arguments)&&(p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(w=ae.id)!=null?w:Mv(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const ue=o[q];if(ue==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(ue.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ue.id,toolName:ue.function.name,argsTextDelta:(k=Z.function.arguments)!=null?k:""}),((j=ue.function)==null?void 0:j.name)!=null&&((I=ue.function)==null?void 0:I.arguments)!=null&&iE(ue.function.arguments)&&(p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=ue.id)!=null?N:Mv(),toolName:ue.function.name,args:ue.function.arguments}),ue.sent=!0)}},flush(h){var p;if(l==="tool-calls")for(const g of o)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(p=g.id)!=null?p:Mv(),toolName:g.function.name,args:iE(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},CL=U.object({id:U.string().optional(),model:U.string().optional(),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number(),total_tokens:U.number()}).nullish()}),zne=CL.extend({choices:U.array(U.object({message:U.object({role:U.literal("assistant"),content:U.string().nullable().optional(),reasoning:U.string().nullable().optional(),tool_calls:U.array(U.object({id:U.string().optional().nullable(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).optional()}),index:U.number(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullable().optional(),finish_reason:U.string().optional().nullable()}))}),Une=U.union([CL.extend({choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).optional(),content:U.string().nullish(),reasoning:U.string().nullish().optional(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullable().optional(),index:U.number()}))}),FA]);function Vne(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(s=>$ne(s)?{type:"function",function:{name:s.name,description:s.description,parameters:s.parameters}}:{type:"function",function:{name:s.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const s=i;throw new Error(`Unsupported tool choice type: ${s}`)}}}function Hne({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new lne({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new $s({functionality:"images"});case"file":throw new $s({functionality:"file attachments"});default:{const c=l;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new $s({functionality:"tool-call messages"});case"reasoning":throw new $s({functionality:"reasoning messages"});case"redacted-reasoning":throw new $s({functionality:"redacted reasoning messages"});default:{const c=l;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new $s({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a}}function uD(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,s])=>({token:i,logprob:s})):[]}})}var qne=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:s,presencePenalty:o,seed:l,responseFormat:c,topK:d,stopSequences:h,providerMetadata:p}){var g,v;const b=e.type,x=(g=p==null?void 0:p.openrouter)!=null?g:{},{prompt:w}=Hne({prompt:n,inputFormat:t}),S=ps(ps(ps({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:o,seed:l,stop:h,response_format:c,top_k:d,prompt:w,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),x);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new $s({functionality:"tools"});if(e.toolChoice)throw new $s({functionality:"toolChoice"});return S}case"object-json":throw new $s({functionality:"object-json mode"});case"object-tool":throw new $s({functionality:"object-tool mode"});default:{const E=b;throw new $s({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const s=this.getArgs(e),{responseHeaders:o,value:l}=await yx({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:gx(this.config.headers(),e.headers),body:s,failedResponseHandler:xx,successfulResponseHandler:_L(dD),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=s,{prompt:d}=c,h=vx(c,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const p=l.choices[0];if(!p)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=p.text)!=null?t:"",reasoning:p.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:wx(p.finish_reason),logprobs:uD(p.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await yx({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:gx(this.config.headers(),e.headers),body:Lw(ps({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:xx,successfulResponseHandler:xL(dD),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,s=vx(a,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){o="error",h.enqueue({type:"error",error:d.error});return}const p=d.value;if("error"in p){o="error",h.enqueue({type:"error",error:p.error});return}p.usage!=null&&(l={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens});const g=p.choices[0];(g==null?void 0:g.finish_reason)!=null&&(o=wx(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=uD(g==null?void 0:g.logprobs);v!=null&&v.length&&(c===void 0&&(c=[]),c.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:o,logprobs:c,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},dD=U.union([U.object({id:U.string().optional(),model:U.string().optional(),choices:U.array(U.object({text:U.string(),reasoning:U.string().nullish().optional(),finish_reason:U.string().nullish(),index:U.number(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullable().optional()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).optional().nullable()}),FA]);function TL(e={}){var t,n,r;const a=(n=Mne((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",s=()=>ps({Authorization:`Bearer ${_ne({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(h,p={})=>new Bne(h,p,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,p={})=>new qne(h,p,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,p)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,p):o(h,p)},d=function(h,p){return c(h,p)};return d.languageModel=c,d.chat=o,d.completion=l,d}TL({compatibility:"strict"});var $d={},sE={},fD;function hD(){return fD||(fD=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(sE)),sE}var pD;function Gne(){return pD||(pD=1,function(e){var t=$d&&$d.__createBinding||(Object.create?function(c,d,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(c,p,g)}:function(c,d,h,p){p===void 0&&(p=h),c[p]=d[h]}),n=$d&&$d.__exportStar||function(c,d){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=hD();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(hD(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function s(c,d=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return o(c.trim(),d)}e.parseJSON=s;const o=(c,d)=>{const h=c.length;let p=0;const g=k=>{throw new a(`${k} at position ${p}`)},v=k=>{throw new i(`${k} at position ${p}`)},b=()=>(C(),p>=h&&g("Unexpected end of input"),c[p]==='"'?x():c[p]==="{"?w():c[p]==="["?S():c.substring(p,p+4)==="null"||r.Allow.NULL&d&&h-p<4&&"null".startsWith(c.substring(p))?(p+=4,null):c.substring(p,p+4)==="true"||r.Allow.BOOL&d&&h-p<4&&"true".startsWith(c.substring(p))?(p+=4,!0):c.substring(p,p+5)==="false"||r.Allow.BOOL&d&&h-p<5&&"false".startsWith(c.substring(p))?(p+=5,!1):c.substring(p,p+8)==="Infinity"||r.Allow.INFINITY&d&&h-p<8&&"Infinity".startsWith(c.substring(p))?(p+=8,1/0):c.substring(p,p+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-p&&h-p<9&&"-Infinity".startsWith(c.substring(p))?(p+=9,-1/0):c.substring(p,p+3)==="NaN"||r.Allow.NAN&d&&h-p<3&&"NaN".startsWith(c.substring(p))?(p+=3,NaN):E()),x=()=>{const k=p;let j=!1;for(p++;p<h&&(c[p]!=='"'||j&&c[p-1]==="\\");)j=c[p]==="\\"?!j:!1,p++;if(c.charAt(p)=='"')try{return JSON.parse(c.substring(k,++p-Number(j)))}catch(I){v(String(I))}else if(r.Allow.STR&d)try{return JSON.parse(c.substring(k,p-Number(j))+'"')}catch{return JSON.parse(c.substring(k,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},w=()=>{p++,C();const k={};try{for(;c[p]!=="}";){if(C(),p>=h&&r.Allow.OBJ&d)return k;const j=x();C(),p++;try{const I=b();k[j]=I}catch(I){if(r.Allow.OBJ&d)return k;throw I}C(),c[p]===","&&p++}}catch{if(r.Allow.OBJ&d)return k;g("Expected '}' at end of object")}return p++,k},S=()=>{p++;const k=[];try{for(;c[p]!=="]";)k.push(b()),C(),c[p]===","&&p++}catch{if(r.Allow.ARR&d)return k;g("Expected ']' at end of array")}return p++,k},E=()=>{if(p===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(j){if(r.Allow.NUM&d)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(j))}}const k=p;for(c[p]==="-"&&p++;c[p]&&",]}".indexOf(c[p])===-1;)p++;p==h&&!(r.Allow.NUM&d)&&g("Unterminated number literal");try{return JSON.parse(c.substring(k,p))}catch{c.substring(k,p)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(k,c.lastIndexOf("e")))}catch(I){v(String(I))}}},C=()=>{for(;p<h&&` 
\r	`.includes(c[p]);)p++};return b()},l=s;e.parse=l}($d)),$d}var Wne=Gne();function oE(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new Nr({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(hp(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const s of n)switch(s.type){case"text":{a.push(s.text);break}case"tool-call":{i.push({function:{arguments:s.args,name:s.toolName},id:s.toolCallId,type:"function"});break}default:{const o=s;throw new Error(`Unsupported part: ${o}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var Kne=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=Wne.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const s=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(s==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:nl(),type:"function"});const o=this._toolCalls[a];o.function.arguments=s,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function Zne({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var Yne=U.object({error:U.object({code:U.string().nullable(),message:U.string(),param:U.any().nullable(),type:U.string()})}),YT=q5({errorSchema:Yne,errorToMessage:e=>e.error.message});function Xne({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):i.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const s=a.type;switch(s){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=s;throw new Nr({functionality:`Unsupported tool choice type: ${o}`})}}}function Jne(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var Qne=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},ere=e=>async({response:t})=>{const n=xy(t);if(t.body===null)throw new AA({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Qne).pipeThrough(new TransformStream({transform(r,a){a.enqueue(pf({schema:e,text:r}))}}))}},tre=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:s,stopSequences:o,temperature:l,topK:c,topP:d}){const h=n.type,p=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&p.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:Jne({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:s,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:c,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=Xne({mode:n});return{args:{...g,messages:oE(a),tools:v},type:h,warnings:[...p,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:oE(a)},type:h,warnings:p};case"object-tool":return{args:{...g,messages:oE(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:p};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:s,value:o}=await bo({abortSignal:e.abortSignal,body:i,failedResponseHandler:YT,fetch:this.config.fetch,headers:bl(this.config.headers(),e.headers),successfulResponseHandler:Nf(nre),url:`${this.config.baseURL}/chat`}),{messages:l,...c}=i,d=(t=o.message.tool_calls)==null?void 0:t.map(h=>{var p;return{args:JSON.stringify(h.function.arguments),toolCallId:(p=h.id)!=null?p:nl(),toolCallType:"function",toolName:h.function.name}});return{finishReason:Zne({finishReason:o.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:s},request:{body:JSON.stringify(i)},text:(n=o.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const x of g.toolCalls)b.enqueue({argsTextDelta:x.args,toolCallId:x.toolCallId,toolCallType:"function",toolName:x.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...x});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await bo({abortSignal:e.abortSignal,body:t,failedResponseHandler:YT,fetch:this.config.fetch,headers:bl(this.config.headers(),e.headers),successfulResponseHandler:ere(rre),url:`${this.config.baseURL}/chat`}),{messages:s,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new Kne({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:p=!0}=this.settings;return{rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:d,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){d=c.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}p&&c.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},nre=U.object({created_at:U.string(),done:U.literal(!0),done_reason:U.string().optional().nullable(),eval_count:U.number(),eval_duration:U.number(),load_duration:U.number().optional(),message:U.object({content:U.string(),role:U.string(),tool_calls:U.array(U.object({function:U.object({arguments:U.record(U.any()),name:U.string()}),id:U.string().optional()})).optional().nullable()}),model:U.string(),prompt_eval_count:U.number().optional(),prompt_eval_duration:U.number().optional(),total_duration:U.number()}),rre=U.discriminatedUnion("done",[U.object({created_at:U.string(),done:U.literal(!1),message:U.object({content:U.string(),role:U.string()}),model:U.string()}),U.object({created_at:U.string(),done:U.literal(!0),eval_count:U.number(),eval_duration:U.number(),load_duration:U.number().optional(),model:U.string(),prompt_eval_count:U.number().optional(),prompt_eval_duration:U.number().optional(),total_duration:U.number()})]),are=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new RA({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await bo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:YT,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Nf(ire),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},ire=U.object({embeddings:U.array(U.array(U.number())),prompt_eval_count:U.number().nullable()});function kL(e={}){var t;const n=(t=W5(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(o,l={})=>new tre(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(o,l={})=>new are(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),s=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(o,l)};return s.chat=a,s.embedding=i,s.languageModel=a,s.textEmbedding=i,s.textEmbeddingModel=i,s}kL();let sre=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function yp(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function ore(){let e="",t,n=[],r,a;function i(l,c){if(l===""){s(c);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);o(h,g)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,c){switch(l){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const d=parseInt(c,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,c){const{lines:d,incompleteLine:h}=lre(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],c)},flush(l){i(e,l),s(l)}})}function lre(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function A1(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var cre=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=sre(n,t);if(e==null)return a;if(n.includes(r))throw new NA({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},lE=cre();function ure(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function cE(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var XT=Symbol.for("vercel.ai.validator");function dre(e){return{[XT]:!0,validate:e}}function fre(e){return typeof e=="object"&&e!==null&&XT in e&&e[XT]===!0&&"validate"in e}function hre(e){return fre(e)?e:pre(e)}function pre(e){return dre(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function mre({value:e,schema:t}){const n=AL({value:e,schema:t});if(!n.success)throw Ou.wrap({value:e,cause:n.error});return n.value}function AL({value:e,schema:t}){const n=hre(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Ou.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Ou.wrap({value:e,cause:r})}}}function gre({text:e,schema:t}){try{const n=ko.parse(e);return t==null?n:mre({value:n,schema:t})}catch(n){throw Mu.isInstance(n)||Ou.isInstance(n)?n:new Mu({text:e,cause:n})}}function NL({text:e,schema:t}){try{const n=ko.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=AL({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Mu.isInstance(n)?n:new Mu({text:e,cause:n})}}}function mD(e){try{return ko.parse(e),!0}catch{return!1}}var yre=()=>globalThis.fetch,bp=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>bre({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),bre=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=yre()})=>{try{const o=await s(e,{method:"POST",headers:ure(t),body:n.content,signal:i}),l=A1(o);if(!o.ok){let c;try{c=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw cE(d)||ka.isInstance(d)?d:new ka({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(cE(c)||ka.isInstance(c))?c:new ka({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(cE(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new ka({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},N1=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=A1(r);if(s.trim()==="")return{responseHeaders:o,value:new ka({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=gre({text:s,schema:e});return{responseHeaders:o,value:new ka({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new ka({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},RL=e=>async({response:t})=>{const n=A1(t);if(t.body==null)throw new AA({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(ore()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(NL({text:r,schema:e}))}}))}},R1=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=NL({text:a,schema:e}),s=A1(t);if(!i.success)throw new ka({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:vre}=globalThis;function wre(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return vre(t)}function xre(e){return e==null?void 0:e.replace(/\/$/,"")}function Cg(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function _re(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Cg({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Cg(r[0])});break}t.push({role:"user",content:r.map(s=>{var o;const l=Cg(s);switch(s.type){case"text":return{type:"text",text:s.text,...l};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(o=s.mimeType)!=null?o:"image/jpeg"};base64,${wre(s.image)}`},...l};case"file":throw new Nr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let s="";const o=[];for(const l of r){const c=Cg(l);switch(l.type){case"text":{s+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...c});break}}}t.push({role:"assistant",content:s,tool_calls:o.length>0?o:void 0,...i});break}case"tool":{for(const s of r){const o=Cg(s);t.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result),...o})}break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}}return t}function _x({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Sx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Sre=U.object({error:U.object({message:U.string(),type:U.string().nullish(),param:U.any().nullish(),code:U.union([U.string(),U.number()]).nullish()})}),I1={errorSchema:Sre,errorToMessage:e=>e.error.message};function Ere({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):s.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=o;throw new Nr({functionality:`Unsupported tool choice type: ${l}`})}}}var Cre=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:I1;this.chunkSchema=kre(i.errorSchema),this.failedResponseHandler=N1(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,providerMetadata:l,stopSequences:c,responseFormat:d,seed:h}){var p,g;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const x={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(p=d.name)!=null?p:"response",description:d.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...l==null?void 0:l[this.providerOptionsName],messages:_re(t)};switch(v){case"regular":{const{tools:w,tool_choice:S,toolWarnings:E}=Ere({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...x,tools:w,tool_choice:S},warnings:[...b,...E]}}case"object-json":return{args:{...x,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{...x,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const w=v;throw new Error(`Unsupported type: ${w}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l,c;const{args:d,warnings:h}=this.getArgs({...e}),p=JSON.stringify(d),{responseHeaders:g,value:v,rawValue:b}=await bp({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:yp(this.config.headers(),e.headers),body:d,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:R1(Tre),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:x,...w}=d,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:lE(),toolName:C.function.name,args:C.function.arguments}}),finishReason:Sx(S.finish_reason),usage:{promptTokens:(o=(s=v.usage)==null?void 0:s.prompt_tokens)!=null?o:NaN,completionTokens:(c=(l=v.usage)==null?void 0:l.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:x,rawSettings:w},rawResponse:{headers:g,body:b},response:_x(v),warnings:h,request:{body:p}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const w of v.reasoning)w.type==="text"&&x.enqueue({type:"reasoning",textDelta:w.text});else x.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&x.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const w of v.toolCalls)x.enqueue({type:"tool-call",...w});x.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),x.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:o}=await bp({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:yp(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:RL(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...c}=n,d=[];let h="unknown",p={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,k,j,I,N,P,L,H,M,Z;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const q=v.value;if(i==null||i.processChunk(v.rawValue),"error"in q){h="error",b.enqueue({type:"error",error:q.error.message});return}g&&(g=!1,b.enqueue({type:"response-metadata",..._x(q)})),q.usage!=null&&(p={promptTokens:(x=q.usage.prompt_tokens)!=null?x:void 0,completionTokens:(w=q.usage.completion_tokens)!=null?w:void 0});const ue=q.choices[0];if((ue==null?void 0:ue.finish_reason)!=null&&(h=Sx(ue.finish_reason)),(ue==null?void 0:ue.delta)==null)return;const ae=ue.delta;if(ae.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:ae.reasoning_content}),ae.content!=null&&b.enqueue({type:"text-delta",textDelta:ae.content}),ae.tool_calls!=null)for(const ee of ae.tool_calls){const X=ee.index;if(d[X]==null){if(ee.type!=="function")throw new ap({data:ee,message:"Expected 'function' type."});if(ee.id==null)throw new ap({data:ee,message:"Expected 'id' to be a string."});if(((S=ee.function)==null?void 0:S.name)==null)throw new ap({data:ee,message:"Expected 'function.name' to be a string."});d[X]={id:ee.id,type:"function",function:{name:ee.function.name,arguments:(E=ee.function.arguments)!=null?E:""},hasFinished:!1};const B=d[X];((C=B.function)==null?void 0:C.name)!=null&&((k=B.function)==null?void 0:k.arguments)!=null&&(B.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:B.id,toolName:B.function.name,argsTextDelta:B.function.arguments}),mD(B.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(j=B.id)!=null?j:lE(),toolName:B.function.name,args:B.function.arguments}),B.hasFinished=!0));continue}const ie=d[X];ie.hasFinished||(((I=ee.function)==null?void 0:I.arguments)!=null&&(ie.function.arguments+=(P=(N=ee.function)==null?void 0:N.arguments)!=null?P:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:(L=ee.function.arguments)!=null?L:""}),((H=ie.function)==null?void 0:H.name)!=null&&((M=ie.function)==null?void 0:M.arguments)!=null&&mD(ie.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=ie.id)!=null?Z:lE(),toolName:ie.function.name,args:ie.function.arguments}),ie.hasFinished=!0))}},flush(v){var b,x;const w=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=p.promptTokens)!=null?b:NaN,completionTokens:(x=p.completionTokens)!=null?x:NaN},...w&&{providerMetadata:w}})}})),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:s},warnings:r,request:{body:a}}}},Tre=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({message:U.object({role:U.literal("assistant").nullish(),content:U.string().nullish(),reasoning_content:U.string().nullish(),tool_calls:U.array(U.object({id:U.string().nullish(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).nullish()}),finish_reason:U.string().nullish()})),usage:U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish()}).nullish()}),kre=e=>U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).nullish(),content:U.string().nullish(),reasoning_content:U.string().nullish(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),finish_reason:U.string().nullish()})),usage:U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish()}).nullish()}),e]);function Are({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new tc({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Nr({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Nr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Nr({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var Nre=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:I1;this.chunkSchema=Ire(a.errorSchema),this.failedResponseHandler=N1(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:c,responseFormat:d,seed:h,providerMetadata:p}){var g;const v=e.type,b=[];s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:x,stopSequences:w}=Are({prompt:n,inputFormat:t}),S=[...w??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,...p==null?void 0:p[this.providerOptionsName],prompt:x,stop:S.length>0?S:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new Nr({functionality:"tools"});if(e.toolChoice)throw new Nr({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new Nr({functionality:"object-json mode"});case"object-tool":throw new Nr({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:s}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:c}=await bp({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:yp(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:R1(Rre),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,p=l.choices[0];return{text:p.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:Sx(p.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o,body:c},response:_x(l),warnings:s,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await bp({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:yp(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:RL(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,p){if(!h.success){l="error",p.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){l="error",p.enqueue({type:"error",error:g.error});return}d&&(d=!1,p.enqueue({type:"response-metadata",..._x(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=Sx(v.finish_reason)),(v==null?void 0:v.text)!=null&&p.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:c})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Rre=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),Ire=e=>U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string().nullish(),index:U.number()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),e]),jre=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new RA({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await bp({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:yp(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:N1((r=this.config.errorStructure)!=null?r:I1),successfulResponseHandler:R1(Dre),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},Dre=U.object({data:U.array(U.object({embedding:U.array(U.number())})),usage:U.object({prompt_tokens:U.number()}).nullish()}),Mre=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,c,d,h,p;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(d=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?d:new Date,{value:b,responseHeaders:x}=await bp({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:yp(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:N1((p=this.config.errorStructure)!=null?p:I1),successfulResponseHandler:R1(Ore),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(w=>w.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:x}}}},Ore=U.object({data:U.array(U.object({b64_json:U.string()}))});function Pre(e){const t=xre(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:p})=>{const g=new URL(`${t}${p}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,p={})=>s(h,p),s=(h,p={})=>new Cre(h,p,{...a("chat"),defaultObjectGenerationMode:"tool"}),o=(h,p={})=>new Nre(h,p,a("completion")),l=(h,p={})=>new jre(h,p,a("embedding")),c=(h,p={})=>new Mre(h,p,a("image")),d=(h,p)=>i(h,p);return d.languageModel=i,d.chatModel=s,d.completionModel=o,d.textEmbeddingModel=l,d.imageModel=c,d}const Cu=(e,t)=>`${e}:${t}`,Ac=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},vp=e=>e==="openai"||e==="openrouter"||e==="google",LA=e=>e==="ollama"||e==="openai-compatible",Zd=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",Ru=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],Fre={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},IL=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function jL(e,t,n){try{switch(e.type){case"openai":return sF({apiKey:n})(t);case"google":return zF({apiKey:n})(t);case"openrouter":return TL({apiKey:n})(t);case"ollama":return kL({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return Pre({baseURL:IL(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function $A(e,t,n){const a=zn.getState().getAllAvailableModelDefsForProvider(e.id).find(s=>s.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=jL(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:Cu(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const DL={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]},Tg=new Map,Lre=5*60*1e3,$re=(e,t)=>{var i,s,o,l,c,d,h,p,g,v,b,x,w,S;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((s=e.architecture)==null?void 0:s.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((c=e.architecture)==null?void 0:c.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((p=e.pricing)==null?void 0:p.request)??"0",image:((g=e.pricing)==null?void 0:g.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((x=e.top_provider)==null?void 0:x.context_length)??e.context_length??null,max_completion_tokens:((w=e.top_provider)==null?void 0:w.max_completion_tokens)??null,is_moderated:((S=e.top_provider)==null?void 0:S.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??DL[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function Bre(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Tg.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var o,l,c;let i;const s={Accept:"application/json"};t&&(s.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",s["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",s["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete s.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=IL(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),Ge.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:s});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const x=JSON.parse(b);v=((c=x==null?void 0:x.error)==null?void 0:c.message)||(x==null?void 0:x.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let p=[];if(e.type==="ollama"?p=h.models||[]:p=h.data||h||[],!Array.isArray(p))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const g=p.map(v=>$re(v,e.type));return g.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${g.length} models for ${e.name}`),g}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),Ge.error(`Failed to fetch models for ${e.name}: ${h}`),Tg.delete(n),[]}})();return Tg.set(n,a),setTimeout(()=>{Tg.get(n)===a&&(Tg.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},Lre),a}const uE="provider:lastModelSelection",gD="provider:globalModelSortOrder",zn=qs(Gs((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),_t.saveSetting("enableApiKeyManagement",n),Tt.emit(Et.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadSetting("enableApiKeyManagement",!0),[r,a,i,s]=await Promise.all([_t.loadProviderConfigs(),_t.loadApiKeys(),_t.loadSetting(gD,[]),_t.loadSetting(uE,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const o=r.reduce((p,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{p.push(Cu(g.id,v))}),p),[]),l=new Set(o),c=i.filter(p=>l.has(p));let d=s;d&&l.has(d)||(d=c[0]??null,d||(d=o[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${d}`)),e({globalModelSortOrder:c,selectedModelId:d,isLoading:!1}),await _t.saveSetting(uE,d),console.log(`[ProviderStore] Emitting initial ${Et.MODEL_SELECTION_CHANGED} with payload:`,{modelId:d}),Tt.emit(Et.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),Ge.error("Failed to load provider data")}},selectModel:n=>{const r=t().selectedModelId;console.log(`[ProviderStore] selectModel called. Current: ${r}, New: ${n}`),r!==n?(e({selectedModelId:n}),_t.saveSetting(uE,n),console.log(`[ProviderStore] Emitting ${Et.MODEL_SELECTION_CHANGED} with payload:`,{modelId:n}),Tt.emit(Et.MODEL_SELECTION_CHANGED,{modelId:n})):console.log(`[ProviderStore] selectModel skipped: ID ${n} already selected.`)},addApiKey:async(n,r,a)=>{const i=ji(),s=new Date,o={id:i,name:n,value:a,providerId:r,createdAt:s,updatedAt:s};try{return await _t.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),Ge.success(`API Key "${n}" added.`),Tt.emit(Et.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),Ge.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await _t.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(s=>s.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(s=>s.apiKeyId===n?{...s,apiKeyId:null}:s)}),Ge.success(`API Key "${r}" deleted.`),Tt.emit(Et.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),Ge.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await _t.saveProviderConfig(i),e(s=>{s.dbProviderConfigs.push(i)}),Ge.success(`Provider "${n.name}" added.`),Tt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),t().fetchModels(r).catch(s=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,s)}),r}catch(s){throw console.error("ProviderStore: Error adding provider config",s),Ge.error(`Failed to add Provider: ${s instanceof Error?s.message:String(s)}`),s}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(s=>s.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await _t.saveProviderConfig(i),e(h=>{const p=h.dbProviderConfigs.findIndex(g=>g.id===n);p!==-1&&(h.dbProviderConfigs[p]=i)}),Tt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const s=t().globalModelSortOrder,o=t().dbProviderConfigs;let l=[...s];const c=o.reduce((h,p)=>(p.isEnabled&&p.enabledModels&&p.enabledModels.forEach(g=>{h.push(Cu(p.id,g))}),h),[]),d=new Set(c);l=s.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(s){throw console.error("ProviderStore: Error updating provider config",s),Ge.error(`Failed to update Provider: ${s instanceof Error?s.message:String(s)}`),s}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await _t.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),Tt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const s=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(p=>{d.push(Cu(h.id,p))}),d),[]),o=new Set(s),c=t().globalModelSortOrder.filter(d=>o.has(d));await t().setGlobalModelSortOrder(c),Ge.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),Ge.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){Ge.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,s=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,o=await Bre(r,s);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),Ge.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await _t.saveSetting(gD,r);const a=t().selectedModelId,s=t().dbProviderConfigs.reduce((l,c)=>(c.isEnabled&&c.enabledModels&&c.enabledModels.forEach(d=>{l.push(Cu(c.id,d))}),l),[]),o=new Set(s);if(!a||!o.has(a)){const l=r.find(h=>o.has(h)),c=s[0]??null,d=l??c;d!==a&&(console.log(`[ProviderStore] Selection ${a} invalidated or missing. Selecting ${d}`),t().selectModel(d))}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:s}=Ac(n);if(!i||!s)return;const o=r.find(c=>c.id===i);if(!o)return;const l=a.find(c=>c.id===o.apiKeyId);return $A(o,s,l==null?void 0:l.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(Fre[a]||[]).map(s=>({id:s.id,name:s.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:DL[r.type]??[]}))}}))),Ov="system",Pv="You are a helpful AI assistant.",Fv=.7,Lv=null,$v=null,Bv=null,zv=0,Uv=0,yD=!0,Vv=!0,Hv=!1,qv=!1,Gv=!1,Wv=15,bD=null,vD=null,Kv=5,Zv=null,Yv=!0,Xv=null,Jv=768,Qv=!1,ew=!1,tw=null,nw=16,rw="max-w-7xl",aw=null,hr=qs(Gs((e,t)=>({theme:Ov,globalSystemPrompt:Pv,temperature:Fv,maxTokens:Lv,topP:$v,topK:Bv,presencePenalty:zv,frequencyPenalty:Uv,enableAdvancedSettings:yD,enableStreamingMarkdown:Vv,enableStreamingCodeBlockParsing:Hv,foldStreamingCodeBlocks:qv,foldUserMessagesOnCompletion:Gv,streamingRenderFPS:Wv,gitUserName:bD,gitUserEmail:vD,toolMaxSteps:Kv,prismThemeUrl:Zv,autoTitleEnabled:Yv,autoTitleModelId:Xv,autoTitlePromptMaxLength:Jv,autoTitleIncludeFiles:Qv,autoTitleIncludeRules:ew,customFontFamily:tw,customFontSize:nw,chatMaxWidth:rw,customThemeColors:aw,setTheme:n=>{e({theme:n}),_t.saveSetting("theme",n)},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),_t.saveSetting("globalSystemPrompt",n)},setTemperature:n=>{e({temperature:n}),_t.saveSetting("temperature",n)},setMaxTokens:n=>{e({maxTokens:n}),_t.saveSetting("maxTokens",n)},setTopP:n=>{e({topP:n}),_t.saveSetting("topP",n)},setTopK:n=>{e({topK:n}),_t.saveSetting("topK",n)},setPresencePenalty:n=>{e({presencePenalty:n}),_t.saveSetting("presencePenalty",n)},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),_t.saveSetting("frequencyPenalty",n)},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),_t.saveSetting("enableAdvancedSettings",n)},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),_t.saveSetting("enableStreamingMarkdown",n)},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),_t.saveSetting("enableStreamingCodeBlockParsing",n)},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),_t.saveSetting("foldStreamingCodeBlocks",n)},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),_t.saveSetting("foldUserMessagesOnCompletion",n)},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),_t.saveSetting("streamingRenderFPS",r)},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),_t.saveSetting("gitUserName",r)},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),_t.saveSetting("gitUserEmail",r)},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),_t.saveSetting("toolMaxSteps",r)},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),_t.saveSetting("prismThemeUrl",r)},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),_t.saveSetting("autoTitleEnabled",n)},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),_t.saveSetting("autoTitleModelId",n)},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),_t.saveSetting("autoTitlePromptMaxLength",r)},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),_t.saveSetting("autoTitleIncludeFiles",n)},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),_t.saveSetting("autoTitleIncludeRules",n)},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),_t.saveSetting("customFontFamily",r)},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),_t.saveSetting("customFontSize",r)},setChatMaxWidth:n=>{e({chatMaxWidth:n}),_t.saveSetting("chatMaxWidth",n)},setCustomThemeColors:n=>{e({customThemeColors:n}),_t.saveSetting("customThemeColors",n)},setCustomThemeColor:(n,r)=>{e(a=>{const s={...a.customThemeColors??{}};r===null||r.trim()===""?delete s[n]:s[n]=r.trim(),a.customThemeColors=Object.keys(s).length>0?s:null}),_t.saveSetting("customThemeColors",t().customThemeColors)},loadSettings:async()=>{try{const[n,r,a,i,s,o,l,c,d,h,p,g,v,b,x,w,S,E,C,k,j,I,N,P,L,H,M]=await Promise.all([_t.loadSetting("theme",Ov),_t.loadSetting("temperature",Fv),_t.loadSetting("maxTokens",Lv),_t.loadSetting("topP",$v),_t.loadSetting("topK",Bv),_t.loadSetting("presencePenalty",zv),_t.loadSetting("frequencyPenalty",Uv),_t.loadSetting("globalSystemPrompt",Pv),_t.loadSetting("enableAdvancedSettings",yD),_t.loadSetting("enableStreamingMarkdown",Vv),_t.loadSetting("enableStreamingCodeBlockParsing",Hv),_t.loadSetting("foldStreamingCodeBlocks",qv),_t.loadSetting("foldUserMessagesOnCompletion",Gv),_t.loadSetting("streamingRenderFPS",Wv),_t.loadSetting("gitUserName",bD),_t.loadSetting("gitUserEmail",vD),_t.loadSetting("toolMaxSteps",Kv),_t.loadSetting("prismThemeUrl",Zv),_t.loadSetting("autoTitleEnabled",Yv),_t.loadSetting("autoTitleModelId",Xv),_t.loadSetting("autoTitlePromptMaxLength",Jv),_t.loadSetting("autoTitleIncludeFiles",Qv),_t.loadSetting("autoTitleIncludeRules",ew),_t.loadSetting("customFontFamily",tw),_t.loadSetting("customFontSize",nw),_t.loadSetting("chatMaxWidth",rw),_t.loadSetting("customThemeColors",aw)]);e({theme:n,temperature:r,maxTokens:a,topP:i,topK:s,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:c,enableAdvancedSettings:d,enableStreamingMarkdown:h,enableStreamingCodeBlockParsing:p,foldStreamingCodeBlocks:g,foldUserMessagesOnCompletion:v,streamingRenderFPS:b,gitUserName:x,gitUserEmail:w,toolMaxSteps:S,prismThemeUrl:E,autoTitleEnabled:C,autoTitleModelId:k,autoTitlePromptMaxLength:j,autoTitleIncludeFiles:I,autoTitleIncludeRules:N,customFontFamily:P,customFontSize:L,chatMaxWidth:H,customThemeColors:M})}catch(n){console.error("SettingsStore: Error loading settings",n)}},resetGeneralSettings:async()=>{try{e({enableStreamingMarkdown:Vv,enableStreamingCodeBlockParsing:Hv,foldStreamingCodeBlocks:qv,foldUserMessagesOnCompletion:Gv,streamingRenderFPS:Wv}),await Promise.all([_t.saveSetting("enableStreamingMarkdown",Vv),_t.saveSetting("enableStreamingCodeBlockParsing",Hv),_t.saveSetting("foldStreamingCodeBlocks",qv),_t.saveSetting("foldUserMessagesOnCompletion",Gv),_t.saveSetting("streamingRenderFPS",Wv)]),Ge.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),Ge.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{e({globalSystemPrompt:Pv,temperature:Fv,maxTokens:Lv,topP:$v,topK:Bv,presencePenalty:zv,frequencyPenalty:Uv,toolMaxSteps:Kv,autoTitleEnabled:Yv,autoTitleModelId:Xv,autoTitlePromptMaxLength:Jv,autoTitleIncludeFiles:Qv,autoTitleIncludeRules:ew}),await Promise.all([_t.saveSetting("globalSystemPrompt",Pv),_t.saveSetting("temperature",Fv),_t.saveSetting("maxTokens",Lv),_t.saveSetting("topP",$v),_t.saveSetting("topK",Bv),_t.saveSetting("presencePenalty",zv),_t.saveSetting("frequencyPenalty",Uv),_t.saveSetting("toolMaxSteps",Kv),_t.saveSetting("autoTitleEnabled",Yv),_t.saveSetting("autoTitleModelId",Xv),_t.saveSetting("autoTitlePromptMaxLength",Jv),_t.saveSetting("autoTitleIncludeFiles",Qv),_t.saveSetting("autoTitleIncludeRules",ew)]),Ge.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),Ge.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{e({theme:Ov,prismThemeUrl:Zv,customFontFamily:tw,customFontSize:nw,chatMaxWidth:rw,customThemeColors:aw}),await Promise.all([_t.saveSetting("theme",Ov),_t.saveSetting("prismThemeUrl",Zv),_t.saveSetting("customFontFamily",tw),_t.saveSetting("customFontSize",nw),_t.saveSetting("chatMaxWidth",rw),_t.saveSetting("customThemeColors",aw)]),Ge.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),Ge.error("Failed to reset theme settings.")}}})));async function JT(e,t){const n=Ir.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const s=await i.callback(a);if(s===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;s&&typeof s=="object"&&(a=s)}catch(s){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,s),!1}return a}function zre(){const e=qn.getState(),t=zn.getState(),n=hr.getState(),{providerId:r}=Ac(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function Ure(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function wD(e){try{const t=e.type||"application/octet-stream",n=kA(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:Ure(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),Ge.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function xD(e){return e.flatMap(t=>{var a,i,s;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const c=JSON.parse(l);c&&c.type==="tool-call"&&c.toolCallId&&c.toolName&&c.args!==void 0?o.push(c):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(c){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,c)}}),o.length>0&&n.push({role:"assistant",content:o})}if((s=t.metadata)!=null&&s.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const c=JSON.parse(l);c&&c.type==="tool-result"&&c.toolCallId&&c.toolName&&c.result!==void 0?o.push(c):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(c){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,c)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const _D=e=>Symbol.iterator in e,SD=e=>"entries"in e,ED=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},Vre=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function Hre(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!_D(e)||!_D(t)?ED({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):SD(e)&&SD(t)?ED(e,t):Vre(e,t)}function dn(e){const t=gt.useRef(void 0);return n=>{const r=e(n);return Hre(t.current,r)?t.current:t.current=r}}function qt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function qre(e,t){const n=T.createContext(t),r=i=>{const{children:s,...o}=i,l=T.useMemo(()=>o,Object.values(o));return m.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function a(i){const s=T.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function vi(e,t=[]){let n=[];function r(i,s){const o=T.createContext(s),l=n.length;n=[...n,s];const c=h=>{var w;const{scope:p,children:g,...v}=h,b=((w=p==null?void 0:p[e])==null?void 0:w[l])||o,x=T.useMemo(()=>v,Object.values(v));return m.jsx(b.Provider,{value:x,children:g})};c.displayName=i+"Provider";function d(h,p){var b;const g=((b=p==null?void 0:p[e])==null?void 0:b[l])||o,v=T.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const a=()=>{const i=n.map(s=>T.createContext(s));return function(o){const l=(o==null?void 0:o[e])||i;return T.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return a.scopeName=e,[r,Gre(a,...t)]}function Gre(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=r.reduce((o,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...o,...h}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var Wre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],an=Wre.reduce((e,t)=>{const n=ju(`Primitive.${t}`),r=T.forwardRef((a,i)=>{const{asChild:s,...o}=a,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function ML(e,t){e&&il.flushSync(()=>e.dispatchEvent(t))}function za(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Kre(e,t=globalThis==null?void 0:globalThis.document){const n=za(e);T.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Zre="DismissableLayer",QT="dismissableLayer.update",Yre="dismissableLayer.pointerDownOutside",Xre="dismissableLayer.focusOutside",CD,OL=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Up=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...l}=e,c=T.useContext(OL),[d,h]=T.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=T.useState({}),v=An(t,I=>h(I)),b=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(x),S=d?b.indexOf(d):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=w,k=eae(I=>{const N=I.target,P=[...c.branches].some(L=>L.contains(N));!C||P||(a==null||a(I),s==null||s(I),I.defaultPrevented||o==null||o())},p),j=tae(I=>{const N=I.target;[...c.branches].some(L=>L.contains(N))||(i==null||i(I),s==null||s(I),I.defaultPrevented||o==null||o())},p);return Kre(I=>{S===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&o&&(I.preventDefault(),o()))},p),T.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(CD=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),TD(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=CD)}},[d,p,n,c]),T.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),TD())},[d,c]),T.useEffect(()=>{const I=()=>g({});return document.addEventListener(QT,I),()=>document.removeEventListener(QT,I)},[]),m.jsx(an.div,{...l,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:qt(e.onFocusCapture,j.onFocusCapture),onBlurCapture:qt(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:qt(e.onPointerDownCapture,k.onPointerDownCapture)})});Up.displayName=Zre;var Jre="DismissableLayerBranch",Qre=T.forwardRef((e,t)=>{const n=T.useContext(OL),r=T.useRef(null),a=An(t,r);return T.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(an.div,{...e,ref:a})});Qre.displayName=Jre;function eae(e,t=globalThis==null?void 0:globalThis.document){const n=za(e),r=T.useRef(!1),a=T.useRef(()=>{});return T.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){PL(Yre,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function tae(e,t=globalThis==null?void 0:globalThis.document){const n=za(e),r=T.useRef(!1);return T.useEffect(()=>{const a=i=>{i.target&&!r.current&&PL(Xre,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function TD(){const e=new CustomEvent(QT);document.dispatchEvent(e)}function PL(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?ML(a,i):a.dispatchEvent(i)}var ni=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},nae=R8[" useId ".trim().toString()]||(()=>{}),rae=0;function Va(e){const[t,n]=T.useState(nae());return ni(()=>{n(r=>r??String(rae++))},[e]),t?`radix-${t}`:""}const aae=["top","right","bottom","left"],zu=Math.min,ms=Math.max,Ex=Math.round,iw=Math.floor,ul=e=>({x:e,y:e}),iae={left:"right",right:"left",bottom:"top",top:"bottom"},sae={start:"end",end:"start"};function ek(e,t,n){return ms(e,zu(t,n))}function yc(e,t){return typeof e=="function"?e(t):e}function bc(e){return e.split("-")[0]}function Vp(e){return e.split("-")[1]}function BA(e){return e==="x"?"y":"x"}function zA(e){return e==="y"?"height":"width"}function Uu(e){return["top","bottom"].includes(bc(e))?"y":"x"}function UA(e){return BA(Uu(e))}function oae(e,t,n){n===void 0&&(n=!1);const r=Vp(e),a=UA(e),i=zA(a);let s=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Cx(s)),[s,Cx(s)]}function lae(e){const t=Cx(e);return[tk(e),t,tk(t)]}function tk(e){return e.replace(/start|end/g,t=>sae[t])}function cae(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:s;default:return[]}}function uae(e,t,n,r){const a=Vp(e);let i=cae(bc(e),n==="start",r);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(tk)))),i}function Cx(e){return e.replace(/left|right|bottom|top/g,t=>iae[t])}function dae(e){return{top:0,right:0,bottom:0,left:0,...e}}function FL(e){return typeof e!="number"?dae(e):{top:e,right:e,bottom:e,left:e}}function Tx(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function kD(e,t,n){let{reference:r,floating:a}=e;const i=Uu(t),s=UA(t),o=zA(s),l=bc(t),c=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,p=r[o]/2-a[o]/2;let g;switch(l){case"top":g={x:d,y:r.y-a.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Vp(t)){case"start":g[s]-=p*(n&&c?-1:1);break;case"end":g[s]+=p*(n&&c?-1:1);break}return g}const fae=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,o=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=kD(c,r,l),p=r,g={},v=0;for(let b=0;b<o.length;b++){const{name:x,fn:w}=o[b],{x:S,y:E,data:C,reset:k}=await w({x:d,y:h,initialPlacement:r,placement:p,strategy:a,middlewareData:g,rects:c,platform:s,elements:{reference:e,floating:t}});d=S??d,h=E??h,g={...g,[x]:{...g[x],...C}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(c=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=kD(c,p,l)),b=-1)}return{x:d,y:h,placement:p,strategy:a,middlewareData:g}};async function w0(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=yc(t,e),v=FL(g),x=o[p?h==="floating"?"reference":"floating":h],w=Tx(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),S=h==="floating"?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Tx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:E,strategy:l}):S);return{top:(w.top-k.top+v.top)/C.y,bottom:(k.bottom-w.bottom+v.bottom)/C.y,left:(w.left-k.left+v.left)/C.x,right:(k.right-w.right+v.right)/C.x}}const hae=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=yc(e,t)||{};if(c==null)return{};const h=FL(d),p={x:n,y:r},g=UA(a),v=zA(g),b=await s.getDimensions(c),x=g==="y",w=x?"top":"left",S=x?"bottom":"right",E=x?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-p[g]-i.floating[v],k=p[g]-i.reference[g],j=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let I=j?j[E]:0;(!I||!await(s.isElement==null?void 0:s.isElement(j)))&&(I=o.floating[E]||i.floating[v]);const N=C/2-k/2,P=I/2-b[v]/2-1,L=zu(h[w],P),H=zu(h[S],P),M=L,Z=I-b[v]-H,q=I/2-b[v]/2+N,ue=ek(M,q,Z),ae=!l.arrow&&Vp(a)!=null&&q!==ue&&i.reference[v]/2-(q<M?L:H)-b[v]/2<0,ee=ae?q<M?q-M:q-Z:0;return{[g]:p[g]+ee,data:{[g]:ue,centerOffset:q-ue-ee,...ae&&{alignmentOffset:ee}},reset:ae}}}),pae=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...x}=yc(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=bc(a),S=Uu(o),E=bc(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=p||(E||!b?[Cx(o)]:lae(o)),j=v!=="none";!p&&j&&k.push(...uae(o,b,v,C));const I=[o,...k],N=await w0(t,x),P=[];let L=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(N[w]),h){const q=oae(a,s,C);P.push(N[q[0]],N[q[1]])}if(L=[...L,{placement:a,overflows:P}],!P.every(q=>q<=0)){var H,M;const q=(((H=i.flip)==null?void 0:H.index)||0)+1,ue=I[q];if(ue)return{data:{index:q,overflows:L},reset:{placement:ue}};let ae=(M=L.filter(ee=>ee.overflows[0]<=0).sort((ee,X)=>ee.overflows[1]-X.overflows[1])[0])==null?void 0:M.placement;if(!ae)switch(g){case"bestFit":{var Z;const ee=(Z=L.filter(X=>{if(j){const ie=Uu(X.placement);return ie===S||ie==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ie=>ie>0).reduce((ie,B)=>ie+B,0)]).sort((X,ie)=>X[1]-ie[1])[0])==null?void 0:Z[0];ee&&(ae=ee);break}case"initialPlacement":ae=o;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function AD(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ND(e){return aae.some(t=>e[t]>=0)}const mae=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=yc(e,t);switch(r){case"referenceHidden":{const i=await w0(t,{...a,elementContext:"reference"}),s=AD(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:ND(s)}}}case"escaped":{const i=await w0(t,{...a,altBoundary:!0}),s=AD(i,n.floating);return{data:{escapedOffsets:s,escaped:ND(s)}}}default:return{}}}}};async function gae(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),s=bc(n),o=Vp(n),l=Uu(n)==="y",c=["left","top"].includes(s)?-1:1,d=i&&l?-1:1,h=yc(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof v=="number"&&(g=o==="end"?v*-1:v),l?{x:g*d,y:p*c}:{x:p*c,y:g*d}}const yae=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await gae(t,e);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},bae=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:x=>{let{x:w,y:S}=x;return{x:w,y:S}}},...l}=yc(e,t),c={x:n,y:r},d=await w0(t,l),h=Uu(bc(a)),p=BA(h);let g=c[p],v=c[h];if(i){const x=p==="y"?"top":"left",w=p==="y"?"bottom":"right",S=g+d[x],E=g-d[w];g=ek(S,g,E)}if(s){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",S=v+d[x],E=v-d[w];v=ek(S,v,E)}const b=o.fn({...t,[p]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[h]:s}}}}}},vae=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=yc(e,t),d={x:n,y:r},h=Uu(a),p=BA(h);let g=d[p],v=d[h];const b=yc(o,t),x=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=p==="y"?"height":"width",C=i.reference[p]-i.floating[E]+x.mainAxis,k=i.reference[p]+i.reference[E]-x.mainAxis;g<C?g=C:g>k&&(g=k)}if(c){var w,S;const E=p==="y"?"width":"height",C=["top","left"].includes(bc(a)),k=i.reference[h]-i.floating[E]+(C&&((w=s.offset)==null?void 0:w[h])||0)+(C?0:x.crossAxis),j=i.reference[h]+i.reference[E]+(C?0:((S=s.offset)==null?void 0:S[h])||0)-(C?x.crossAxis:0);v<k?v=k:v>j&&(v=j)}return{[p]:g,[h]:v}}}},wae=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...c}=yc(e,t),d=await w0(t,c),h=bc(a),p=Vp(a),g=Uu(a)==="y",{width:v,height:b}=i.floating;let x,w;h==="top"||h==="bottom"?(x=h,w=p===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(w=h,x=p==="end"?"top":"bottom");const S=b-d.top-d.bottom,E=v-d.left-d.right,C=zu(b-d[x],S),k=zu(v-d[w],E),j=!t.middlewareData.shift;let I=C,N=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=S),j&&!p){const L=ms(d.left,0),H=ms(d.right,0),M=ms(d.top,0),Z=ms(d.bottom,0);g?N=v-2*(L!==0||H!==0?L+H:ms(d.left,d.right)):I=b-2*(M!==0||Z!==0?M+Z:ms(d.top,d.bottom))}await l({...t,availableWidth:N,availableHeight:I});const P=await s.getDimensions(o.floating);return v!==P.width||b!==P.height?{reset:{rects:!0}}:{}}}};function j1(){return typeof window<"u"}function Hp(e){return LL(e)?(e.nodeName||"").toLowerCase():"#document"}function ys(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function El(e){var t;return(t=(LL(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function LL(e){return j1()?e instanceof Node||e instanceof ys(e).Node:!1}function wo(e){return j1()?e instanceof Element||e instanceof ys(e).Element:!1}function xl(e){return j1()?e instanceof HTMLElement||e instanceof ys(e).HTMLElement:!1}function RD(e){return!j1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ys(e).ShadowRoot}function Sy(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=xo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function xae(e){return["table","td","th"].includes(Hp(e))}function D1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function VA(e){const t=HA(),n=wo(e)?xo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function _ae(e){let t=Vu(e);for(;xl(t)&&!wp(t);){if(VA(t))return t;if(D1(t))return null;t=Vu(t)}return null}function HA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wp(e){return["html","body","#document"].includes(Hp(e))}function xo(e){return ys(e).getComputedStyle(e)}function M1(e){return wo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vu(e){if(Hp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||RD(e)&&e.host||El(e);return RD(t)?t.host:t}function $L(e){const t=Vu(e);return wp(t)?e.ownerDocument?e.ownerDocument.body:e.body:xl(t)&&Sy(t)?t:$L(t)}function x0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=$L(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),s=ys(a);if(i){const o=nk(s);return t.concat(s,s.visualViewport||[],Sy(a)?a:[],o&&n?x0(o):[])}return t.concat(a,x0(a,[],n))}function nk(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function BL(e){const t=xo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=xl(e),i=a?e.offsetWidth:n,s=a?e.offsetHeight:r,o=Ex(n)!==i||Ex(r)!==s;return o&&(n=i,r=s),{width:n,height:r,$:o}}function qA(e){return wo(e)?e:e.contextElement}function sp(e){const t=qA(e);if(!xl(t))return ul(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=BL(t);let s=(i?Ex(n.width):n.width)/r,o=(i?Ex(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Sae=ul(0);function zL(e){const t=ys(e);return!HA()||!t.visualViewport?Sae:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Eae(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ys(e)?!1:t}function bf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=qA(e);let s=ul(1);t&&(r?wo(r)&&(s=sp(r)):s=sp(e));const o=Eae(i,n,r)?zL(i):ul(0);let l=(a.left+o.x)/s.x,c=(a.top+o.y)/s.y,d=a.width/s.x,h=a.height/s.y;if(i){const p=ys(i),g=r&&wo(r)?ys(r):r;let v=p,b=nk(v);for(;b&&r&&g!==v;){const x=sp(b),w=b.getBoundingClientRect(),S=xo(b),E=w.left+(b.clientLeft+parseFloat(S.paddingLeft))*x.x,C=w.top+(b.clientTop+parseFloat(S.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=E,c+=C,v=ys(b),b=nk(v)}}return Tx({width:d,height:h,x:l,y:c})}function GA(e,t){const n=M1(e).scrollLeft;return t?t.left+n:bf(El(e)).left+n}function UL(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:GA(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function Cae(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",s=El(r),o=t?D1(t.floating):!1;if(r===s||o&&i)return n;let l={scrollLeft:0,scrollTop:0},c=ul(1);const d=ul(0),h=xl(r);if((h||!h&&!i)&&((Hp(r)!=="body"||Sy(s))&&(l=M1(r)),xl(r))){const g=bf(r);c=sp(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const p=s&&!h&&!i?UL(s,l,!0):ul(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function Tae(e){return Array.from(e.getClientRects())}function kae(e){const t=El(e),n=M1(e),r=e.ownerDocument.body,a=ms(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ms(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+GA(e);const o=-n.scrollTop;return xo(r).direction==="rtl"&&(s+=ms(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:s,y:o}}function Aae(e,t){const n=ys(e),r=El(e),a=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const c=HA();(!c||c&&t==="fixed")&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}function Nae(e,t){const n=bf(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=xl(e)?sp(e):ul(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y,l=a*i.x,c=r*i.y;return{width:s,height:o,x:l,y:c}}function ID(e,t,n){let r;if(t==="viewport")r=Aae(e,n);else if(t==="document")r=kae(El(e));else if(wo(t))r=Nae(t,n);else{const a=zL(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Tx(r)}function VL(e,t){const n=Vu(e);return n===t||!wo(n)||wp(n)?!1:xo(n).position==="fixed"||VL(n,t)}function Rae(e,t){const n=t.get(e);if(n)return n;let r=x0(e,[],!1).filter(o=>wo(o)&&Hp(o)!=="body"),a=null;const i=xo(e).position==="fixed";let s=i?Vu(e):e;for(;wo(s)&&!wp(s);){const o=xo(s),l=VA(s);!l&&o.position==="fixed"&&(a=null),(i?!l&&!a:!l&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Sy(s)&&!l&&VL(e,s))?r=r.filter(d=>d!==s):a=o,s=Vu(s)}return t.set(e,r),r}function Iae(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const s=[...n==="clippingAncestors"?D1(t)?[]:Rae(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((c,d)=>{const h=ID(t,d,a);return c.top=ms(h.top,c.top),c.right=zu(h.right,c.right),c.bottom=zu(h.bottom,c.bottom),c.left=ms(h.left,c.left),c},ID(t,o,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function jae(e){const{width:t,height:n}=BL(e);return{width:t,height:n}}function Dae(e,t,n){const r=xl(t),a=El(t),i=n==="fixed",s=bf(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=ul(0);if(r||!r&&!i)if((Hp(t)!=="body"||Sy(a))&&(o=M1(t)),r){const p=bf(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else a&&(l.x=GA(a));const c=a&&!r&&!i?UL(a,o):ul(0),d=s.left+o.scrollLeft-l.x-c.x,h=s.top+o.scrollTop-l.y-c.y;return{x:d,y:h,width:s.width,height:s.height}}function dE(e){return xo(e).position==="static"}function jD(e,t){if(!xl(e)||xo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return El(e)===n&&(n=n.ownerDocument.body),n}function HL(e,t){const n=ys(e);if(D1(e))return n;if(!xl(e)){let a=Vu(e);for(;a&&!wp(a);){if(wo(a)&&!dE(a))return a;a=Vu(a)}return n}let r=jD(e,t);for(;r&&xae(r)&&dE(r);)r=jD(r,t);return r&&wp(r)&&dE(r)&&!VA(r)?n:r||_ae(e)||n}const Mae=async function(e){const t=this.getOffsetParent||HL,n=this.getDimensions,r=await n(e.floating);return{reference:Dae(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Oae(e){return xo(e).direction==="rtl"}const Pae={convertOffsetParentRelativeRectToViewportRelativeRect:Cae,getDocumentElement:El,getClippingRect:Iae,getOffsetParent:HL,getElementRects:Mae,getClientRects:Tae,getDimensions:jae,getScale:sp,isElement:wo,isRTL:Oae};function qL(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Fae(e,t){let n=null,r;const a=El(e);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:d,top:h,width:p,height:g}=c;if(o||t(),!p||!g)return;const v=iw(h),b=iw(a.clientWidth-(d+p)),x=iw(a.clientHeight-(h+g)),w=iw(d),E={rootMargin:-v+"px "+-b+"px "+-x+"px "+-w+"px",threshold:ms(0,zu(1,l))||1};let C=!0;function k(j){const I=j[0].intersectionRatio;if(I!==l){if(!C)return s();I?s(!1,I):r=setTimeout(()=>{s(!1,1e-7)},1e3)}I===1&&!qL(c,e.getBoundingClientRect())&&s(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return s(!0),i}function Lae(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=qA(e),d=a||i?[...c?x0(c):[],...x0(t)]:[];d.forEach(w=>{a&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&o?Fae(c,n):null;let p=-1,g=null;s&&(g=new ResizeObserver(w=>{let[S]=w;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!l&&g.observe(c),g.observe(t));let v,b=l?bf(e):null;l&&x();function x(){const w=bf(e);b&&!qL(b,w)&&n(),b=w,v=requestAnimationFrame(x)}return n(),()=>{var w;d.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const $ae=yae,Bae=bae,zae=pae,Uae=wae,Vae=mae,DD=hae,Hae=vae,qae=(e,t,n)=>{const r=new Map,a={platform:Pae,...n},i={...a.platform,_c:r};return fae(e,t,{...a,platform:i})};var $w=typeof document<"u"?T.useLayoutEffect:T.useEffect;function kx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!kx(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!kx(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function GL(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function MD(e,t){const n=GL(e);return Math.round(t*n)/n}function fE(e){const t=T.useRef(e);return $w(()=>{t.current=e}),t}function Gae(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,h]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=T.useState(r);kx(p,r)||g(r);const[v,b]=T.useState(null),[x,w]=T.useState(null),S=T.useCallback(X=>{X!==j.current&&(j.current=X,b(X))},[]),E=T.useCallback(X=>{X!==I.current&&(I.current=X,w(X))},[]),C=i||v,k=s||x,j=T.useRef(null),I=T.useRef(null),N=T.useRef(d),P=l!=null,L=fE(l),H=fE(a),M=fE(c),Z=T.useCallback(()=>{if(!j.current||!I.current)return;const X={placement:t,strategy:n,middleware:p};H.current&&(X.platform=H.current),qae(j.current,I.current,X).then(ie=>{const B={...ie,isPositioned:M.current!==!1};q.current&&!kx(N.current,B)&&(N.current=B,il.flushSync(()=>{h(B)}))})},[p,t,n,H,M]);$w(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[c]);const q=T.useRef(!1);$w(()=>(q.current=!0,()=>{q.current=!1}),[]),$w(()=>{if(C&&(j.current=C),k&&(I.current=k),C&&k){if(L.current)return L.current(C,k,Z);Z()}},[C,k,Z,L,P]);const ue=T.useMemo(()=>({reference:j,floating:I,setReference:S,setFloating:E}),[S,E]),ae=T.useMemo(()=>({reference:C,floating:k}),[C,k]),ee=T.useMemo(()=>{const X={position:n,left:0,top:0};if(!ae.floating)return X;const ie=MD(ae.floating,d.x),B=MD(ae.floating,d.y);return o?{...X,transform:"translate("+ie+"px, "+B+"px)",...GL(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:B}},[n,o,ae.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:Z,refs:ue,elements:ae,floatingStyles:ee}),[d,Z,ue,ae,ee])}const Wae=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?DD({element:r.current,padding:a}).fn(n):{}:r?DD({element:r,padding:a}).fn(n):{}}}},Kae=(e,t)=>({...$ae(e),options:[e,t]}),Zae=(e,t)=>({...Bae(e),options:[e,t]}),Yae=(e,t)=>({...Hae(e),options:[e,t]}),Xae=(e,t)=>({...zae(e),options:[e,t]}),Jae=(e,t)=>({...Uae(e),options:[e,t]}),Qae=(e,t)=>({...Vae(e),options:[e,t]}),eie=(e,t)=>({...Wae(e),options:[e,t]});var tie="Arrow",WL=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return m.jsx(an.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});WL.displayName=tie;var nie=WL;function O1(e){const[t,n]=T.useState(void 0);return ni(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,o;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,o=c.blockSize}else s=e.offsetWidth,o=e.offsetHeight;n({width:s,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var WA="Popper",[KL,td]=vi(WA),[rie,ZL]=KL(WA),YL=e=>{const{__scopePopper:t,children:n}=e,[r,a]=T.useState(null);return m.jsx(rie,{scope:t,anchor:r,onAnchorChange:a,children:n})};YL.displayName=WA;var XL="PopperAnchor",JL=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=ZL(XL,n),s=T.useRef(null),o=An(t,s);return T.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:m.jsx(an.div,{...a,ref:o})});JL.displayName=XL;var KA="PopperContent",[aie,iie]=KL(KA),QL=T.forwardRef((e,t)=>{var Te,Ae,Ee,Pe,Qe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,x=ZL(KA,n),[w,S]=T.useState(null),E=An(t,je=>S(je)),[C,k]=T.useState(null),j=O1(C),I=(j==null?void 0:j.width)??0,N=(j==null?void 0:j.height)??0,P=r+(i!=="center"?"-"+i:""),L=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},H=Array.isArray(c)?c:[c],M=H.length>0,Z={padding:L,boundary:H.filter(oie),altBoundary:M},{refs:q,floatingStyles:ue,placement:ae,isPositioned:ee,middlewareData:X}=Gae({strategy:"fixed",placement:P,whileElementsMounted:(...je)=>Lae(...je,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[Kae({mainAxis:a+N,alignmentAxis:s}),l&&Zae({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Yae():void 0,...Z}),l&&Xae({...Z}),Jae({...Z,apply:({elements:je,rects:z,availableWidth:Se,availableHeight:Ne})=>{const{width:fe,height:se}=z.reference,te=je.floating.style;te.setProperty("--radix-popper-available-width",`${Se}px`),te.setProperty("--radix-popper-available-height",`${Ne}px`),te.setProperty("--radix-popper-anchor-width",`${fe}px`),te.setProperty("--radix-popper-anchor-height",`${se}px`)}}),C&&eie({element:C,padding:o}),lie({arrowWidth:I,arrowHeight:N}),p&&Qae({strategy:"referenceHidden",...Z})]}),[ie,B]=n$(ae),J=za(v);ni(()=>{ee&&(J==null||J())},[ee,J]);const Q=(Te=X.arrow)==null?void 0:Te.x,ne=(Ae=X.arrow)==null?void 0:Ae.y,he=((Ee=X.arrow)==null?void 0:Ee.centerOffset)!==0,[de,Ie]=T.useState();return ni(()=>{w&&Ie(window.getComputedStyle(w).zIndex)},[w]),m.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ee?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(Pe=X.transformOrigin)==null?void 0:Pe.x,(Qe=X.transformOrigin)==null?void 0:Qe.y].join(" "),...((Le=X.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:m.jsx(aie,{scope:n,placedSide:ie,onArrowChange:k,arrowX:Q,arrowY:ne,shouldHideArrow:he,children:m.jsx(an.div,{"data-side":ie,"data-align":B,...b,ref:E,style:{...b.style,animation:ee?void 0:"none"}})})})});QL.displayName=KA;var e$="PopperArrow",sie={top:"bottom",right:"left",bottom:"top",left:"right"},t$=T.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=iie(e$,r),s=sie[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(nie,{...a,ref:n,style:{...a.style,display:"block"}})})});t$.displayName=e$;function oie(e){return e!==null}var lie=e=>({name:"transformOrigin",options:e,fn(t){var x,w,S;const{placement:n,rects:r,middlewareData:a}=t,s=((x=a.arrow)==null?void 0:x.centerOffset)!==0,o=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[c,d]=n$(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((w=a.arrow)==null?void 0:w.x)??0)+o/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+l/2;let v="",b="";return c==="bottom"?(v=s?h:`${p}px`,b=`${-l}px`):c==="top"?(v=s?h:`${p}px`,b=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,b=s?h:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,b=s?h:`${g}px`),{data:{x:v,y:b}}}});function n$(e){const[t,n="center"]=e.split("-");return[t,n]}var P1=YL,Ey=JL,F1=QL,L1=t$,cie="Portal",qp=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[a,i]=T.useState(!1);ni(()=>i(!0),[]);const s=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?c5.createPortal(m.jsx(an.div,{...r,ref:t}),s):null});qp.displayName=cie;function uie(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var Wa=e=>{const{present:t,children:n}=e,r=die(t),a=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),i=An(r.ref,fie(a));return typeof n=="function"||r.isPresent?T.cloneElement(a,{ref:i}):null};Wa.displayName="Presence";function die(e){const[t,n]=T.useState(),r=T.useRef(null),a=T.useRef(e),i=T.useRef("none"),s=e?"mounted":"unmounted",[o,l]=uie(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=sw(r.current);i.current=o==="mounted"?c:"none"},[o]),ni(()=>{const c=r.current,d=a.current;if(d!==e){const p=i.current,g=sw(c);e?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),ni(()=>{if(t){let c;const d=t.ownerDocument.defaultView??window,h=g=>{const b=sw(r.current).includes(g.animationName);if(g.target===t&&b&&(l("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",c=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},p=g=>{g.target===t&&(i.current=sw(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(c),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:T.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function sw(e){return(e==null?void 0:e.animationName)||"none"}function fie(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var hie=R8[" useInsertionEffect ".trim().toString()]||ni;function _o({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,s]=pie({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:a;{const d=T.useRef(e!==void 0);T.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const c=T.useCallback(d=>{var h;if(o){const p=mie(d)?d(e):d;p!==e&&((h=s.current)==null||h.call(s,p))}else i(d)},[o,e,i,s]);return[l,c]}function pie({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),a=T.useRef(n),i=T.useRef(t);return hie(()=>{i.current=t},[t]),T.useEffect(()=>{var s;a.current!==n&&((s=i.current)==null||s.call(i,n),a.current=n)},[n,a]),[n,r,i]}function mie(e){return typeof e=="function"}var r$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),gie="VisuallyHidden",a$=T.forwardRef((e,t)=>m.jsx(an.span,{...e,ref:t,style:{...r$,...e.style}}));a$.displayName=gie;var yie=a$,[$1,oje]=vi("Tooltip",[td]),B1=td(),i$="TooltipProvider",bie=700,rk="tooltip.open",[vie,ZA]=$1(i$),s$=e=>{const{__scopeTooltip:t,delayDuration:n=bie,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,s=T.useRef(!0),o=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(vie,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:T.useCallback(c=>{o.current=c},[]),disableHoverableContent:a,children:i})};s$.displayName=i$;var _0="Tooltip",[wie,Cy]=$1(_0),o$=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,l=ZA(_0,e.__scopeTooltip),c=B1(t),[d,h]=T.useState(null),p=Va(),g=T.useRef(0),v=s??l.disableHoverableContent,b=o??l.delayDuration,x=T.useRef(!1),[w,S]=_o({prop:r,defaultProp:a??!1,onChange:I=>{I?(l.onOpen(),document.dispatchEvent(new CustomEvent(rk))):l.onClose(),i==null||i(I)},caller:_0}),E=T.useMemo(()=>w?x.current?"delayed-open":"instant-open":"closed",[w]),C=T.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x.current=!1,S(!0)},[S]),k=T.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),j=T.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{x.current=!0,S(!0),g.current=0},b)},[b,S]);return T.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),m.jsx(P1,{...c,children:m.jsx(wie,{scope:t,contentId:p,open:w,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayedRef.current?j():C()},[l.isOpenDelayedRef,j,C]),onTriggerLeave:T.useCallback(()=>{v?k():(window.clearTimeout(g.current),g.current=0)},[k,v]),onOpen:C,onClose:k,disableHoverableContent:v,children:n})})};o$.displayName=_0;var ak="TooltipTrigger",l$=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Cy(ak,n),i=ZA(ak,n),s=B1(n),o=T.useRef(null),l=An(t,o,a.onTriggerChange),c=T.useRef(!1),d=T.useRef(!1),h=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),m.jsx(Ey,{asChild:!0,...s,children:m.jsx(an.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:qt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:qt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:qt(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:qt(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:qt(e.onBlur,a.onClose),onClick:qt(e.onClick,a.onClose)})})});l$.displayName=ak;var YA="TooltipPortal",[xie,_ie]=$1(YA,{forceMount:void 0}),c$=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=Cy(YA,t);return m.jsx(xie,{scope:t,forceMount:n,children:m.jsx(Wa,{present:n||i.open,children:m.jsx(qp,{asChild:!0,container:a,children:r})})})};c$.displayName=YA;var xp="TooltipContent",u$=T.forwardRef((e,t)=>{const n=_ie(xp,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,s=Cy(xp,e.__scopeTooltip);return m.jsx(Wa,{present:r||s.open,children:s.disableHoverableContent?m.jsx(d$,{side:a,...i,ref:t}):m.jsx(Sie,{side:a,...i,ref:t})})}),Sie=T.forwardRef((e,t)=>{const n=Cy(xp,e.__scopeTooltip),r=ZA(xp,e.__scopeTooltip),a=T.useRef(null),i=An(t,a),[s,o]=T.useState(null),{trigger:l,onClose:c}=n,d=a.current,{onPointerInTransitChange:h}=r,p=T.useCallback(()=>{o(null),h(!1)},[h]),g=T.useCallback((v,b)=>{const x=v.currentTarget,w={x:v.clientX,y:v.clientY},S=kie(w,x.getBoundingClientRect()),E=Aie(w,S),C=Nie(b.getBoundingClientRect()),k=Iie([...E,...C]);o(k),h(!0)},[h]);return T.useEffect(()=>()=>p(),[p]),T.useEffect(()=>{if(l&&d){const v=x=>g(x,d),b=x=>g(x,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,g,p]),T.useEffect(()=>{if(s){const v=b=>{const x=b.target,w={x:b.clientX,y:b.clientY},S=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),E=!Rie(w,s);S?p():E&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,s,c,p]),m.jsx(d$,{...e,ref:i})}),[Eie,Cie]=$1(_0,{isInside:!1}),Tie=jK("TooltipContent"),d$=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,l=Cy(xp,n),c=B1(n),{onClose:d}=l;return T.useEffect(()=>(document.addEventListener(rk,d),()=>document.removeEventListener(rk,d)),[d]),T.useEffect(()=>{if(l.trigger){const h=p=>{const g=p.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),m.jsx(Up,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:m.jsxs(F1,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(Tie,{children:r}),m.jsx(Eie,{scope:n,isInside:!0,children:m.jsx(yie,{id:l.contentId,role:"tooltip",children:a||r})})]})})});u$.displayName=xp;var f$="TooltipArrow",h$=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=B1(n);return Cie(f$,n).isInside?null:m.jsx(L1,{...a,...r,ref:t})});h$.displayName=f$;function kie(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Aie(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Nie(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function Rie(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],c=o.x,d=o.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-c)*(r-d)/(p-d)+c&&(a=!a)}return a}function Iie(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),jie(t)}function jie(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Die=s$,Mie=o$,Oie=l$,Pie=c$,Fie=u$,Lie=h$;function Gn({delayDuration:e=0,...t}){return m.jsx(Die,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Kn({...e}){return m.jsx(Gn,{children:m.jsx(Mie,{"data-slot":"tooltip",...e})})}function Zn({...e}){return m.jsx(Oie,{"data-slot":"tooltip-trigger",...e})}function Yn({className:e,sideOffset:t=0,children:n,...r}){return m.jsx(Pie,{children:m.jsxs(Fie,{"data-slot":"tooltip-content",sideOffset:t,className:xt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,m.jsx(Lie,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var hE={exports:{}},OD;function $ie(){return OD||(OD=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof l?new l(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var k,j;switch(o.util.type(E)){case"Object":if(j=o.util.objId(E),C[j])return C[j];k={},C[j]=k;for(var I in E)E.hasOwnProperty(I)&&(k[I]=S(E[I],C));return k;case"Array":return j=o.util.objId(E),C[j]?C[j]:(k=[],C[j]=k,E.forEach(function(N,P){k[P]=S(N,C)}),k);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var k="no-"+E;S;){var j=S.classList;if(j.contains(E))return!0;if(j.contains(k))return!1;S=S.parentElement}return!!C}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(S,E){var C=o.util.clone(o.languages[S]);for(var k in E)C[k]=E[k];return C},insertBefore:function(S,E,C,k){k=k||o.languages;var j=k[S],I={};for(var N in j)if(j.hasOwnProperty(N)){if(N==E)for(var P in C)C.hasOwnProperty(P)&&(I[P]=C[P]);C.hasOwnProperty(N)||(I[N]=j[N])}var L=k[S];return k[S]=I,o.languages.DFS(o.languages,function(H,M){M===L&&H!=S&&(this[H]=I)}),I},DFS:function S(E,C,k,j){j=j||{};var I=o.util.objId;for(var N in E)if(E.hasOwnProperty(N)){C.call(E,N,E[N],k||N);var P=E[N],L=o.util.type(P);L==="Object"&&!j[I(P)]?(j[I(P)]=!0,S(P,C,null,j)):L==="Array"&&!j[I(P)]&&(j[I(P)]=!0,S(P,C,N,j))}}},plugins:{},highlightAll:function(S,E){o.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var k={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var j=0,I;I=k.elements[j++];)o.highlightElement(I,E===!0,k.callback)},highlightElement:function(S,E,C){var k=o.util.getLanguage(S),j=o.languages[k];o.util.setLanguage(S,k);var I=S.parentElement;I&&I.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(I,k);var N=S.textContent,P={element:S,language:k,grammar:j,code:N};function L(M){P.highlightedCode=M,o.hooks.run("before-insert",P),P.element.innerHTML=P.highlightedCode,o.hooks.run("after-highlight",P),o.hooks.run("complete",P),C&&C.call(P.element)}if(o.hooks.run("before-sanity-check",P),I=P.element.parentElement,I&&I.nodeName.toLowerCase()==="pre"&&!I.hasAttribute("tabindex")&&I.setAttribute("tabindex","0"),!P.code){o.hooks.run("complete",P),C&&C.call(P.element);return}if(o.hooks.run("before-highlight",P),!P.grammar){L(o.util.encode(P.code));return}if(E&&r.Worker){var H=new Worker(o.filename);H.onmessage=function(M){L(M.data)},H.postMessage(JSON.stringify({language:P.language,code:P.code,immediateClose:!0}))}else L(o.highlight(P.code,P.grammar,P.language))},highlight:function(S,E,C){var k={code:S,grammar:E,language:C};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),l.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var j=new h;return p(j,j.head,S),d(S,j,E,j.head,0),v(j)},hooks:{all:{},add:function(S,E){var C=o.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=o.hooks.all[S];if(!(!C||!C.length))for(var k=0,j;j=C[k++];)j(E)}},Token:l};r.Prism=o;function l(S,E,C,k){this.type=S,this.content=E,this.alias=C,this.length=(k||"").length|0}l.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(L){k+=S(L,C)}),k}var j={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},I=E.alias;I&&(Array.isArray(I)?Array.prototype.push.apply(j.classes,I):j.classes.push(I)),o.hooks.run("wrap",j);var N="";for(var P in j.attributes)N+=" "+P+'="'+(j.attributes[P]||"").replace(/"/g,"&quot;")+'"';return"<"+j.tag+' class="'+j.classes.join(" ")+'"'+N+">"+j.content+"</"+j.tag+">"};function c(S,E,C,k){S.lastIndex=E;var j=S.exec(C);if(j&&k&&j[1]){var I=j[1].length;j.index+=I,j[0]=j[0].slice(I)}return j}function d(S,E,C,k,j,I){for(var N in C)if(!(!C.hasOwnProperty(N)||!C[N])){var P=C[N];P=Array.isArray(P)?P:[P];for(var L=0;L<P.length;++L){if(I&&I.cause==N+","+L)return;var H=P[L],M=H.inside,Z=!!H.lookbehind,q=!!H.greedy,ue=H.alias;if(q&&!H.pattern.global){var ae=H.pattern.toString().match(/[imsuy]*$/)[0];H.pattern=RegExp(H.pattern.source,ae+"g")}for(var ee=H.pattern||H,X=k.next,ie=j;X!==E.tail&&!(I&&ie>=I.reach);ie+=X.value.length,X=X.next){var B=X.value;if(E.length>S.length)return;if(!(B instanceof l)){var J=1,Q;if(q){if(Q=c(ee,ie,S,Z),!Q||Q.index>=S.length)break;var Ie=Q.index,ne=Q.index+Q[0].length,he=ie;for(he+=X.value.length;Ie>=he;)X=X.next,he+=X.value.length;if(he-=X.value.length,ie=he,X.value instanceof l)continue;for(var de=X;de!==E.tail&&(he<ne||typeof de.value=="string");de=de.next)J++,he+=de.value.length;J--,B=S.slice(ie,he),Q.index-=ie}else if(Q=c(ee,0,B,Z),!Q)continue;var Ie=Q.index,Te=Q[0],Ae=B.slice(0,Ie),Ee=B.slice(Ie+Te.length),Pe=ie+B.length;I&&Pe>I.reach&&(I.reach=Pe);var Qe=X.prev;Ae&&(Qe=p(E,Qe,Ae),ie+=Ae.length),g(E,Qe,J);var Le=new l(N,M?o.tokenize(Te,M):Te,ue,Te);if(X=p(E,Qe,Le),Ee&&p(E,X,Ee),J>1){var je={cause:N+","+L,reach:Pe};d(S,E,C,X.prev,ie,je),I&&je.reach>I.reach&&(I.reach=je.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function p(S,E,C){var k=E.next,j={value:C,prev:E,next:k};return E.next=j,k.prev=j,S.length++,j}function g(S,E,C){for(var k=E.next,j=0;j<C&&k!==S.tail;j++)k=k.next;E.next=k,k.prev=E,S.length-=j}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,k=E.code,j=E.immediateClose;r.postMessage(o.highlight(k,o.languages[C],C)),j&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function x(){o.manual||o.highlightAll()}if(!o.manual){var w=document.readyState;w==="loading"||w==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",x):window.requestAnimationFrame?window.requestAnimationFrame(x):window.setTimeout(x,16)}return o}(t);e.exports&&(e.exports=n),typeof Jd<"u"&&(Jd.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,x){return" Error "+b+" while fetching file: "+x},i=" Error: File does not exist or is empty",s={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",c="loaded",d="failed",h="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+l+'"])';function p(b,x,w){var S=new XMLHttpRequest;S.open("GET",b,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?x(S.responseText):S.status>=400?w(a(S.status,S.statusText)):w(i))},S.send(null)}function g(b){var x=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(x){var w=Number(x[1]),S=x[2],E=x[3];return S?E?[w,Number(E)]:[w,void 0]:[w,w]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var x=b.element;if(x.matches(h)){b.code="",x.setAttribute(o,l);var w=x.appendChild(document.createElement("CODE"));w.textContent=r;var S=x.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=s[C]||C}n.util.setLanguage(w,E),n.util.setLanguage(x,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),p(S,function(j){x.setAttribute(o,c);var I=g(x.getAttribute("data-range"));if(I){var N=j.split(/\r\n?|\n/g),P=I[0],L=I[1]==null?N.length:I[1];P<0&&(P+=N.length),P=Math.max(0,Math.min(P-1,N.length)),L<0&&(L+=N.length),L=Math.max(0,Math.min(L,N.length)),j=N.slice(P,L).join(`
`),x.hasAttribute("data-start")||x.setAttribute("data-start",String(P+1))}w.textContent=j,n.highlightElement(w)},function(j){x.setAttribute(o,d),w.textContent=j})}}),n.plugins.fileHighlight={highlight:function(x){for(var w=(x||document).querySelectorAll(h),S=0,E;E=w[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(hE)),hE.exports}var Bie=$ie();const zie=bi(Bie);var PD={},FD;function Uie(){return FD||(FD=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),PD}Uie();var LD={},$D;function Vie(){return $D||($D=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),LD}Vie();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,s=0;s<a.length;s++)i[a[s]]=e.languages.bash[a[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(p){if(!(!p||typeof p=="string"))for(var g=0,v=p.length;g<v;g++){var b=p[g];if(b.type!=="code"){h(b.content);continue}var x=b.content[1],w=b.content[3];if(x&&w&&x.type==="code-language"&&w.type==="code-block"&&typeof x.content=="string"){var S=x.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;w.alias?typeof w.alias=="string"?w.alias=[w.alias,E]:w.alias.push(E):w.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",p=0,g=d.classes.length;p<g;p++){var v=d.classes[p],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var x=e.languages[h];if(x)d.content=e.highlight(c(d.content),x,h);else if(h&&h!=="none"&&e.plugins.autoloader){var w="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=w,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(w);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function c(d){var h=d.replace(s,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),l(v)}else{var b=o[g];return b||p}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(o,l){l=(l||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(c,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(i),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var BD={},zD;function Hie(){return zD||(zD=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),BD}Hie();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const qie=({lang:e,code:t,isStreaming:n=!1})=>{const{foldStreamingCodeBlocks:r}=hr(dn(v=>({prismThemeUrl:v.prismThemeUrl,theme:v.theme,foldStreamingCodeBlocks:v.foldStreamingCodeBlocks}))),[a,i]=T.useState(!1),[s,o]=T.useState(n?r:!1),l=T.useRef(null),c=T.useCallback(()=>{if(l.current&&t)try{l.current.style.whiteSpace!=="pre-wrap"&&(l.current.style.whiteSpace="pre-wrap"),l.current.textContent=t,zie.highlightElement(l.current)}catch(v){console.error("Prism highlight error:",v),l.current.textContent=t}else l.current&&(l.current.textContent="")},[t]);T.useEffect(()=>{s||c()},[t,e,s,c]);const d=async()=>{try{await navigator.clipboard.writeText(t),i(!0),Ge.success("Code copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(v){Ge.error("Failed to copy code."),console.error("Clipboard copy failed:",v)}},h=()=>{const v=s;o(b=>!b),v&&setTimeout(c,0)},p=e?`language-${e}`:"language-plaintext",g=T.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return m.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[m.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),m.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":s?"Unfold code":"Fold code",children:m.jsx(y1,{className:"h-3.5 w-3.5"})})}),m.jsx(Yn,{side:"top",children:s?"Unfold":"Fold"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:d,"aria-label":"Copy code",children:a?m.jsx(Ri,{className:"h-3.5 w-3.5 text-green-500"}):m.jsx(bA,{className:"h-3.5 w-3.5"})})}),m.jsx(Yn,{side:"top",children:"Copy"})]})})]})]}),m.jsx("div",{})]}),!s&&m.jsx("div",{className:"overflow-hidden w-full",children:m.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:m.jsx("code",{ref:l,className:p+" block"})})}),s&&m.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:h,children:m.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:g})})]})},Ty=T.memo(qie);var lt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(lt||(lt={}));const UD={[lt.EPERM]:"Operation not permitted",[lt.ENOENT]:"No such file or directory",[lt.EINTR]:"Interrupted system call",[lt.EIO]:"Input/output error",[lt.ENXIO]:"No such device or address",[lt.EBADF]:"Bad file descriptor",[lt.EAGAIN]:"Resource temporarily unavailable",[lt.ENOMEM]:"Cannot allocate memory",[lt.EACCES]:"Permission denied",[lt.EFAULT]:"Bad address",[lt.ENOTBLK]:"Block device required",[lt.EBUSY]:"Resource busy or locked",[lt.EEXIST]:"File exists",[lt.EXDEV]:"Invalid cross-device link",[lt.ENODEV]:"No such device",[lt.ENOTDIR]:"File is not a directory",[lt.EISDIR]:"File is a directory",[lt.EINVAL]:"Invalid argument",[lt.ENFILE]:"Too many open files in system",[lt.EMFILE]:"Too many open files",[lt.ETXTBSY]:"Text file busy",[lt.EFBIG]:"File is too big",[lt.ENOSPC]:"No space left on disk",[lt.ESPIPE]:"Illegal seek",[lt.EROFS]:"Cannot modify a read-only file system",[lt.EMLINK]:"Too many links",[lt.EPIPE]:"Broken pipe",[lt.EDOM]:"Numerical argument out of domain",[lt.ERANGE]:"Numerical result out of range",[lt.EDEADLK]:"Resource deadlock would occur",[lt.ENAMETOOLONG]:"File name too long",[lt.ENOLCK]:"No locks available",[lt.ENOSYS]:"Function not implemented",[lt.ENOTEMPTY]:"Directory is not empty",[lt.ELOOP]:"Too many levels of symbolic links",[lt.ENOMSG]:"No message of desired type",[lt.EBADE]:"Invalid exchange",[lt.EBADR]:"Invalid request descriptor",[lt.EXFULL]:"Exchange full",[lt.ENOANO]:"No anode",[lt.EBADRQC]:"Invalid request code",[lt.ENOSTR]:"Device not a stream",[lt.ENODATA]:"No data available",[lt.ETIME]:"Timer expired",[lt.ENOSR]:"Out of streams resources",[lt.ENONET]:"Machine is not on the network",[lt.EREMOTE]:"Object is remote",[lt.ENOLINK]:"Link has been severed",[lt.ECOMM]:"Communication error on send",[lt.EPROTO]:"Protocol error",[lt.EBADMSG]:"Bad message",[lt.EOVERFLOW]:"Value too large for defined data type",[lt.EBADFD]:"File descriptor in bad state",[lt.ESTRPIPE]:"Streams pipe error",[lt.ENOTSOCK]:"Socket operation on non-socket",[lt.EDESTADDRREQ]:"Destination address required",[lt.EMSGSIZE]:"Message too long",[lt.EPROTOTYPE]:"Protocol wrong type for socket",[lt.ENOPROTOOPT]:"Protocol not available",[lt.EPROTONOSUPPORT]:"Protocol not supported",[lt.ESOCKTNOSUPPORT]:"Socket type not supported",[lt.ENOTSUP]:"Operation is not supported",[lt.ENETDOWN]:"Network is down",[lt.ENETUNREACH]:"Network is unreachable",[lt.ENETRESET]:"Network dropped connection on reset",[lt.ETIMEDOUT]:"Connection timed out",[lt.ECONNREFUSED]:"Connection refused",[lt.EHOSTDOWN]:"Host is down",[lt.EHOSTUNREACH]:"No route to host",[lt.EALREADY]:"Operation already in progress",[lt.EINPROGRESS]:"Operation now in progress",[lt.ESTALE]:"Stale file handle",[lt.EREMOTEIO]:"Remote I/O error",[lt.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(lt[t],UD[lt[t]],n,r)}constructor(t,n=UD[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=lt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var pE={exports:{}},VD;function Gie(){return VD||(VD=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function i(l,c,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,h||l,p),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)t.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,v=new Array(g);p<g;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,d,h,p,g,v){var b=n?n+c:c;if(!this._events[b])return!1;var x=this._events[b],w=arguments.length,S,E;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,p),!0;case 5:return x.fn.call(x.context,d,h,p,g),!0;case 6:return x.fn.call(x.context,d,h,p,g,v),!0}for(E=1,S=new Array(w-1);E<w;E++)S[E-1]=arguments[E];x.fn.apply(x.context,S)}else{var C=x.length,k;for(E=0;E<C;E++)switch(x[E].once&&this.removeListener(c,x[E].fn,void 0,!0),w){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,d);break;case 3:x[E].fn.call(x[E].context,d,h);break;case 4:x[E].fn.call(x[E].context,d,h,p);break;default:if(!S)for(k=1,S=new Array(w-1);k<w;k++)S[k-1]=arguments[k];x[E].fn.apply(x[E].context,S)}}return!0},o.prototype.on=function(c,d,h){return i(this,c,d,h,!1)},o.prototype.once=function(c,d,h){return i(this,c,d,h,!0)},o.prototype.removeListener=function(c,d,h,p){var g=n?n+c:c;if(!this._events[g])return this;if(!d)return s(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&s(this,g);else{for(var b=0,x=[],w=v.length;b<w;b++)(v[b].fn!==d||p&&!v[b].once||h&&v[b].context!==h)&&x.push(v[b]);x.length?this._events[g]=x.length===1?x[0]:x:s(this,g)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(pE)),pE.exports}var Wie=Gie();const XA=bi(Wie);var C8;let Kie=class extends XA{constructor(n){super();Ea(this,C8,"List");Ea(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),s=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),s}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(C8=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function HD(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function vr(e){throw e}const qD=Intl.NumberFormat("en",{notation:"compact"});qD.format.bind(qD);function Rf(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function Zie(e){try{return JSON.parse(e),!0}catch{return!1}}function ik(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function JA(e){return e.at(0).toUpperCase()+e.slice(1)}const Yie=new TextEncoder;function Yd(e){return Yie.encode(e)}const GD=new TextDecoder;function QA(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return GD.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),GD.decode(t)}function S0(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=S0(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function Xie(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Jie={};let Qie="process"in globalThis&&"env"in globalThis.process&&Jie.U_DEBUG=="true";function E0(...e){Qie&&console.debug("[U]",...e)}const WD=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],ese=[...WD,...WD.map(e=>JA(e)),"char"],eN=/^(u?int|float)(8|16|32|64|128)$/i;function p$(e){return e=="char"?"uint8":e.toLowerCase()}function tN(e){return eN.test(e.toString())}function sk(e){return e=="char"||eN.test(e.toString().toLowerCase())}function tse(e){if(!sk(e))throw new TypeError("Not a valid primitive type: "+e)}const KD=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function m$(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function nse(e){return e!=null&&typeof e=="object"&&"struct"in e}function z1(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function mo(e){return typeof e=="function"&&Symbol.metadata in e&&nse(e[Symbol.metadata])}function ky(e){return e!=null&&typeof e=="object"&&mo(e.constructor)}function g$(e){if(!ky(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function nN(e){return ky(e)||mo(e)}function y$(e){if(!nN(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function rN(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Hr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Hr(e[i]);return a}if(typeof e=="string")return tse(e),+p$(e).match(eN)[2]/8;if(rN(e))return e[Symbol.size];y$(e);const t=mo(e)?e:e.constructor;z1(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(mo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(ky(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Hr(i)):r+=Hr(i);continue}if(typeof a.length!="string")continue;let s=0;for(let o=0;o<e[a.length];o++)s+=Hr(nN(i[o])?i[o]:a.type);n.isUnion?r=Math.max(r,s):r+=s}return r}function rse(e,t){var i;y$(e);const n=mo(e)?e:e.constructor;z1(n);const{struct:r}=n[Symbol.metadata];if(mo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??vr(new Error("Struct does not have member: "+t));let a=0;for(const s of r.members.values()){if(s.name==t)return a;const o=e[s.name];a+=Hr(nN(o)?o:s.type)}throw new Error("Struct does not have member: "+t)}function ase(e,t){return Math.ceil(e/t)*t}function If(e={}){return function(n,r){const a=new Map;let i=0,s=!1;for(const{name:o,type:l,length:c}of m$(r)){if(!sk(l)&&!mo(l))throw new TypeError("Not a valid type: "+l);if(typeof c=="string"){const p=a.get(c);if(!p)throw new Error(`"${c}" is undefined or declared after "${o}"`);if(!tN(p.type))throw new Error(`"${c}" is not a number and cannot be used to count "${o}"`)}let d=`${typeof l=="string"?l:l.name} ${o}`;c!==void 0&&(d+=`[${c}]`),a.set(o,{name:o,staticOffset:e.isUnion?0:i,type:sk(l)?p$(l):l,length:c,decl:d});const h=typeof c=="string"||mo(l)&&l[Symbol.metadata].struct.isDynamic?0:Hr(l)*(c||1);s||(s=mo(l)?l[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=ase(i,e.align||1),E0("define",n.name+"."+o)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:s,isUnion:e.isUnion??!1},n}}function C0(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return m$(r).push({name:a,type:e,length:t}),n}}function b$(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:vr(new Error("Array lengths must be natural numbers"))}function Qa(e){if(rN(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();g$(e),z1(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Hr(e),a=new Uint8Array(r),i=new DataView(a.buffer);E0("serialize",e.constructor.name);let s=0,o=0;for(const l of n.values()){const c=b$(e,l);E0("	",l.decl);for(let d=0;d<Math.abs(c);d++){let h=c!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),s=o,o+=ky(h)?Hr(h):Hr(l.type),!tN(l.type)){a.set(h?Qa(h):new Uint8Array(Hr(l.type)),s);continue}const p=`set${JA(l.type)}`;if(p=="setInt64"){i.setBigInt64(s,BigInt(h),!t.bigEndian);continue}if(p=="setUint64"){i.setBigUint64(s,BigInt(h),!t.bigEndian);continue}if(p=="setInt128"){i.setBigUint64(s+(t.bigEndian?8:0),h&KD,!t.bigEndian),i.setBigInt64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setUint128"){i.setBigUint64(s+(t.bigEndian?8:0),h&KD,!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setFloat128"){i.setFloat64(s+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[p](s,Number(h),!t.bigEndian)}}return a}function U1(e,t){const n=Xie(t);if(rN(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);g$(e),z1(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);E0("deserialize",e.constructor.name);let s=0,o=0;for(const l of a.values()){const c=b$(e,l);E0("	",l.decl);for(let d=0;d<Math.abs(c);d++){let h=c!=-1?e[l.name]:e;const p=c!=-1?d:l.name,g=h[p]===null||h[p]===void 0,v=g&&mo(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(s=o,!ky(h[p])&&!v&&(o+=Hr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(s))+e[l.name].slice(d+1);continue}if(!tN(l.type)){if(v&&mo(l.type))h[p]??(h[p]=new l.type);else if(g)continue;U1(h[p],new Uint8Array(n.subarray(s))),o+=Hr(h[p]);continue}c&&c!=-1&&(h||(h=[]));const b=`get${JA(l.type)}`;if(b=="getInt64"){h[p]=i.getBigInt64(s,!r.bigEndian);continue}if(b=="getUint64"){h[p]=i.getBigUint64(s,!r.bigEndian);continue}if(b=="getInt128"){h[p]=i.getBigInt64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[p]=i.getBigUint64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[p]=i.getFloat64(s+(r.bigEndian?8:0),!r.bigEndian);continue}h[p]=i[b](s,!r.bigEndian)}}}function ise(e){function t(n,r){return typeof n=="number"||typeof n=="string"?C0(e,n):C0(e)(n,r)}return t}const xn=Object.fromEntries(ese.map(e=>[e,ise(e)]));function sse(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Ao={root:"/",pwd:"/",credentials:sse({uid:0,gid:0}),descriptors:new Map};function v$(e,t){let n="",r=0,a=-1,i=0,s="\0";for(let o=0;o<=e.length;++o){if(o<e.length)s=e[o];else{if(s=="/")break;s="/"}if(s=="/"){if(!(a===o-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}else if(n.length!==0){n="",r=0,a=o,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else s==="."&&i!==-1?++i:i=-1}return n}function vc(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Ao.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=v$(n,!r),r?`/${n}`:n.length?n:"/"}function ose(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=v$(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function dr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?ose(t):"."}function w$(e,t){if(e===t||(e=vc.call(this,e),t=vc.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,s=t.length-i,o=a<s?a:s;let l=-1,c=0;for(;c<o;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(l=c)}if(c===o)if(s>o){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>o&&(e[n+c]==="/"?l=c:c===0&&(l=0));let d="";for(c=n+l+1;c<=r;++c)(c===r||e[c]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function sr(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function _p(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Jo(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,s=-1,o=!0,l=e.length-1,c=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){i=l+1;break}continue}s===-1&&(o=!1,s=l+1),e[l]==="."?a===-1?a=l:c!==1&&(c=1):a!==-1&&(c=-1)}if(s!==-1){const d=i===0&&t?1:i;a===-1||c===0||c===1&&a===s-1&&a===i+1?n.base=n.name=e.slice(d,s):(n.name=e.slice(d,a),n.base=e.slice(d,s),n.ext=e.slice(a,s))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(vn||(vn={}));vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";const lse=new Kie;function cse(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};lse.add(n),yse(n)}function use(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+dr(i,e.path)}function nd(e){return function(t,n={}){return cse(e,use(t,n)),t}}nd(vn.EMERG);const dse=nd(vn.ALERT),V1=nd(vn.CRIT),qi=nd(vn.ERR),fi=nd(vn.WARN),aN=nd(vn.NOTICE),x$=nd(vn.INFO),Gg=nd(vn.DEBUG);function fse(e,t){return`\x1B[${t}m${e}\x1B[0m`}function hse(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[fse(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";let pse=e=>[...hse(e),e.message];function mse(e){const t=pse(e);return typeof t=="string"?[t]:Array.from(t)}let gse=console.error;function yse(e){e.level>bse||gse(...mse(e))}let bse=vn.ALERT;function iN(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function vse(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function wse(e,t){if(typeof t!="object"||t===null)throw qi(new Ue(lt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){Gg("Using default for option: "+n);continue}throw qi(new Ue(lt.EINVAL,"Missing required option: "+n))}const i=(c,d=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const s=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,o=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw qi(new Ue(lt.EINVAL,`Incorrect type for "${n}": ${s} (expected ${l})`))}}function _$(e){return e!=null&&typeof e=="object"&&"backend"in e&&iN(e.backend)}const sN=0,Na=4,ia=2,Bw=1,oN=1,xse=2,_se=4,S$=0,ui=1,cc=2,H1=64,q1=128,Sse=256,G1=512,vf=1024,Ese=65536,Cse=262144,Tse=131072,W1=1052672,kse=4096,Ase=32768,Nse=16384,Rse=2048,kr=61440,jf=49152,Nc=40960,go=32768,Df=24576,va=16384,Mf=8192,Of=4096,Ay=2048,Ny=1024,Ise=512,jse=448,E$=256,C$=128,T$=64,Dse=56,k$=32,A$=16,N$=8,Mse=7,R$=4,I$=2,j$=1,Ose=0,Mi=4294967295,D$=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:oN,COPYFILE_FICLONE:xse,COPYFILE_FICLONE_FORCE:_se,F_OK:sN,O_APPEND:vf,O_CREAT:H1,O_DIRECT:Nse,O_DIRECTORY:Ese,O_DSYNC:kse,O_EXCL:q1,O_NOATIME:Cse,O_NOCTTY:Sse,O_NOFOLLOW:Tse,O_NONBLOCK:Rse,O_RDONLY:S$,O_RDWR:cc,O_SYMLINK:Ase,O_SYNC:W1,O_TRUNC:G1,O_WRONLY:ui,R_OK:Na,S_IFBLK:Df,S_IFCHR:Mf,S_IFDIR:va,S_IFIFO:Of,S_IFLNK:Nc,S_IFMT:kr,S_IFREG:go,S_IFSOCK:jf,S_IRGRP:k$,S_IROTH:R$,S_IRUSR:E$,S_IRWXG:Dse,S_IRWXO:Mse,S_IRWXU:jse,S_ISGID:Ny,S_ISUID:Ay,S_ISVTX:Ise,S_IWGRP:A$,S_IWOTH:I$,S_IWUSR:C$,S_IXGRP:N$,S_IXOTH:j$,S_IXUSR:T$,UV_FS_O_FILEMAP:Ose,W_OK:ia,X_OK:Bw,size_max:Mi},Symbol.toStringTag,{value:"Module"})),ow=BigInt(1e3);class M${_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:s,size:o,mode:l,ino:c,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(s??0),this.size=this._convert(o??0),this.ino=this._convert(c??0),this.mode=this._convert(l??420&go),(this.mode&kr)==0&&(this.mode=this.mode|this._convert(go)),Object.assign(this,d)}isFile(){return(this.mode&kr)===go}isDirectory(){return(this.mode&kr)===va}isSymbolicLink(){return(this.mode&kr)===Nc}isSocket(){return(this.mode&kr)===jf}isBlockDevice(){return(this.mode&kr)===Df}isCharacterDevice(){return(this.mode&kr)===Mf}isFIFO(){return(this.mode&kr)===Of}toJSON(){return Rf(this,ok)}hasAccess(t,n){return mr(n,this._isBigint?new Rc(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*ow}get mtimeNs(){return BigInt(this.mtimeMs)*ow}get ctimeNs(){return BigInt(this.ctimeMs)*ow}get birthtimeNs(){return BigInt(this.birthtimeMs)*ow}}function O$(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<Mi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<Mi?e.gid=n:r=!1,r}class Rc extends M${constructor(){super(...arguments),this._isBigint=!1}}class Pf extends M${constructor(){super(...arguments),this._isBigint=!0}}function Pse(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class Fse{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Mi,this.ffree=Mi}}class Lse{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(Mi),this.ffree=BigInt(Mi)}}var Pr=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}c&&Object.defineProperty(c,r.name,d),p=!0},bn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},lN=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const us=0,$se=1024;let ZD=(()=>{var e,t;let n=[If()],r,a=[],i,s,o=[],l=[],c,d=[],h=[],p,g=[],v=[],b,x=[],w=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=bn(this,o,0),this.valueSize=(bn(this,l),bn(this,d,0)),this._key=(bn(this,h),bn(this,g,"")),this._value=(bn(this,v),bn(this,x,new Uint8Array($se))),bn(this,w),S&&(this.key=S),E&&(this.value=E)}},lN(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=xn).uint32.bind(e)],c=[(t=xn).uint32.bind(t)],p=[xn.char("keySize")],b=[xn.uint8("valueSize")],Pr(null,null,s,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},o,l),Pr(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},d,h),Pr(null,null,p,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,v),Pr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},x,w),Pr(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),bn(i,a)})(),i})(),Hu=(()=>{var e;let t=[If()],n,r=[],a,i,s=[],o=[],l,c=[],d=[];return a=class{has(h){return this.data.some(p=>p.key==h)}get(h){return this.data.find(p=>p.key==h)}set(h,p){const g=this.get(h);if(g){g.value=p;return}this.data.push(new ZD(h,p)),this.size++}remove(h){const p=this.data.findIndex(g=>g.key==h);return p===-1?!1:(this.data.splice(p,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=bn(this,s,0),this.data=(bn(this,o),bn(this,c,[])),bn(this,d)}},lN(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=xn).uint32.bind(e)],l=[C0(ZD,"size")],Pr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:p=>"size"in p,get:p=>p.size,set:(p,g)=>{p.size=g}},metadata:h},s,o),Pr(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:p=>"data"in p,get:p=>p.data,set:(p,g)=>{p.data=g}},metadata:h},c,d),Pr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),bn(a,r)})(),a})();const ok=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],Bse=4;var Gi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Gi||(Gi={}));let ba=(()=>{var e,t,n,r,a,i,s,o,l,c,d,h,p,g,v,b;let x=[If()],w,S=[],E,C,k=[],j=[],I,N=[],P=[],L,H=[],M=[],Z,q=[],ue=[],ae,ee=[],X=[],ie,B=[],J=[],Q,ne=[],he=[],de,Ie=[],Te=[],Ae,Ee=[],Pe=[],Qe,Le=[],je=[],z,Se=[],Ne=[],fe,se=[],te=[],xe,Fe=[],Ce=[],We,Nt=[],it=[],St,Ft=[],Mt=[],Zt,be=[],D=[],W,pe=[],De=[],ve,ke=[],le=[];var ft=E=class{constructor(vt){if(this.data=bn(this,k,ik(0,Mi)),this.__data_old=(bn(this,j),bn(this,N,0)),this.size=(bn(this,P),bn(this,H,0)),this.mode=(bn(this,M),bn(this,q,0)),this.nlink=(bn(this,ue),bn(this,ee,1)),this.uid=(bn(this,X),bn(this,B,0)),this.gid=(bn(this,J),bn(this,ne,0)),this.atimeMs=(bn(this,he),bn(this,Ie,Date.now())),this.birthtimeMs=(bn(this,Te),bn(this,Ee,Date.now())),this.mtimeMs=(bn(this,Pe),bn(this,Le,Date.now())),this.ctimeMs=(bn(this,je),bn(this,Se,Date.now())),this.ino=(bn(this,Ne),bn(this,se,ik(0,Mi))),this.__ino_old=(bn(this,te),bn(this,Fe,0)),this.flags=(bn(this,Ce),bn(this,Nt,0)),this.__after_flags=(bn(this,it),bn(this,Ft,0)),this.version=(bn(this,Mt),bn(this,be,0)),this.__padding=(bn(this,D),bn(this,pe,[])),this.attributes=(bn(this,De),bn(this,ke,new Hu)),bn(this,le),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<Hr(ft))throw V1(new Ue(lt.EIO,"Buffer is too small to create an inode"));U1(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Rf(this,ok),attributes:this.attributes}}toStats(){return new Rc(this)}update(vt){if(!vt)return!1;let F=!1;for(const Be of ok)vt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==vt[Be]&&(Be=="atimeMs"&&this.flags&Gi.NoAtime||(this[Be]=vt[Be],F=!0)));return vt.attributes&&(this.attributes=vt.attributes,F=!0),F&&(this.ctimeMs=Date.now()),F}};return lN(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=xn).uint32.bind(e)],I=[(t=xn).uint32.bind(t)],L=[(n=xn).uint32.bind(n)],Z=[(r=xn).uint16.bind(r)],ae=[(a=xn).uint32.bind(a)],ie=[(i=xn).uint32.bind(i)],Q=[(s=xn).uint32.bind(s)],de=[(o=xn).float64.bind(o)],Ae=[(l=xn).float64.bind(l)],Qe=[(c=xn).float64.bind(c)],z=[(d=xn).float64.bind(d)],fe=[(h=xn).uint32.bind(h)],xe=[(p=xn).uint32.bind(p)],We=[(g=xn).uint32.bind(g)],St=[(v=xn).uint16.bind(v)],Zt=[(b=xn).uint32.bind(b)],W=[xn.uint8(48)],ve=[C0(Hu)],Pr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:F=>"data"in F,get:F=>F.data,set:(F,Be)=>{F.data=Be}},metadata:vt},k,j),Pr(null,null,I,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:F=>"__data_old"in F,get:F=>F.__data_old,set:(F,Be)=>{F.__data_old=Be}},metadata:vt},N,P),Pr(null,null,L,{kind:"field",name:"size",static:!1,private:!1,access:{has:F=>"size"in F,get:F=>F.size,set:(F,Be)=>{F.size=Be}},metadata:vt},H,M),Pr(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:F=>"mode"in F,get:F=>F.mode,set:(F,Be)=>{F.mode=Be}},metadata:vt},q,ue),Pr(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:F=>"nlink"in F,get:F=>F.nlink,set:(F,Be)=>{F.nlink=Be}},metadata:vt},ee,X),Pr(null,null,ie,{kind:"field",name:"uid",static:!1,private:!1,access:{has:F=>"uid"in F,get:F=>F.uid,set:(F,Be)=>{F.uid=Be}},metadata:vt},B,J),Pr(null,null,Q,{kind:"field",name:"gid",static:!1,private:!1,access:{has:F=>"gid"in F,get:F=>F.gid,set:(F,Be)=>{F.gid=Be}},metadata:vt},ne,he),Pr(null,null,de,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:F=>"atimeMs"in F,get:F=>F.atimeMs,set:(F,Be)=>{F.atimeMs=Be}},metadata:vt},Ie,Te),Pr(null,null,Ae,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:F=>"birthtimeMs"in F,get:F=>F.birthtimeMs,set:(F,Be)=>{F.birthtimeMs=Be}},metadata:vt},Ee,Pe),Pr(null,null,Qe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:F=>"mtimeMs"in F,get:F=>F.mtimeMs,set:(F,Be)=>{F.mtimeMs=Be}},metadata:vt},Le,je),Pr(null,null,z,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:F=>"ctimeMs"in F,get:F=>F.ctimeMs,set:(F,Be)=>{F.ctimeMs=Be}},metadata:vt},Se,Ne),Pr(null,null,fe,{kind:"field",name:"ino",static:!1,private:!1,access:{has:F=>"ino"in F,get:F=>F.ino,set:(F,Be)=>{F.ino=Be}},metadata:vt},se,te),Pr(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:F=>"__ino_old"in F,get:F=>F.__ino_old,set:(F,Be)=>{F.__ino_old=Be}},metadata:vt},Fe,Ce),Pr(null,null,We,{kind:"field",name:"flags",static:!1,private:!1,access:{has:F=>"flags"in F,get:F=>F.flags,set:(F,Be)=>{F.flags=Be}},metadata:vt},Nt,it),Pr(null,null,St,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:F=>"__after_flags"in F,get:F=>F.__after_flags,set:(F,Be)=>{F.__after_flags=Be}},metadata:vt},Ft,Mt),Pr(null,null,Zt,{kind:"field",name:"version",static:!1,private:!1,access:{has:F=>"version"in F,get:F=>F.version,set:(F,Be)=>{F.version=Be}},metadata:vt},be,D),Pr(null,null,W,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:F=>"__padding"in F,get:F=>F.__padding,set:(F,Be)=>{F.__padding=Be}},metadata:vt},pe,De),Pr(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:F=>"attributes"in F,get:F=>F.attributes,set:(F,Be)=>{F.attributes=Be}},metadata:vt},ke,le),Pr(null,w={value:E},x,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=w.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),bn(E,S)})(),ft=E})();function zse(e){return(e.mode&kr)===go}function So(e){return(e.mode&kr)===va}function Sp(e){return(e.mode&kr)===Nc}function Use(e){return(e.mode&kr)===jf}function T0(e){return(e.mode&kr)===Df}function k0(e){return(e.mode&kr)===Mf}function Vse(e){return(e.mode&kr)===Of}function mr(e,t,n){const r=(e==null?void 0:e.credentials)||Ao.credentials;if(Sp(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&E$&&(a|=Na),t.mode&C$&&(a|=ia),t.mode&T$&&(a|=Bw)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&k$&&(a|=Na),t.mode&A$&&(a|=ia),t.mode&N$&&(a|=Bw)),t.mode&R$&&(a|=Na),t.mode&I$&&(a|=ia),t.mode&j$&&(a|=Bw),(a&n)===n}const YD=1;class Ax extends Map{constructor(){super(...arguments),this.maxSize=Mi}toJSON(){return{version:YD,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Hr(ba);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&kr)!=va)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())sr(a)==t&&a!=t&&(r[_p(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&kr)!=va)continue;const a={};for(const i of this.keys())sr(i)==n&&i!=n&&(a[_p(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=YD)throw new Ue(lt.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=ik(1,Mi)),r=="/"&&(a.ino=0),this.set(r,new ba(a));return this}static parse(t){if(!Zie(t))throw new Ue(lt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Ax;return r.fromJSON(n),r}}const mE=4096;let cN=class lk{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===lk.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===lk.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:s=a}=n;for(let o=i;o<s;o+=mE){const l=o+mE>s?s-o:mE,c=new Uint8Array(l);await this.read(t,c,o,o+l).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,s)=>{let o=!1;const l=d=>{o=!0,s.error(d)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(l),!o&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(l))}})}};function Ti(e){return JSON.parse(QA(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function Is(e){return Yd(JSON.stringify(e))}function rd(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(lt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Nx(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(lt.EINVAL,"Invalid time.")}}function hn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(lt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(lt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(lt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:vc(e)}function uc(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:rd("mode"in e?e==null?void 0:e.mode:null,r)}}class Hse{constructor(t,n,r,a){Ea(this,"id");Ea(this,"_size");Ea(this,"options");Ea(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,s)=>i.start-s.start),r.ranges=r.ranges.reduce((i,s)=>(!i.length||i.at(-1).end<s.start?i.push(s):i.at(-1).end=Math.max(i.at(-1).end,s.end),i),[]),r.data=S0(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)){if(s.start>=n)break;r.push({start:Math.max(t,s.start),end:Math.min(n,s.end)})}}r.sort((i,s)=>i.start-s.start);const a=[];for(const i of r){const s=a.at(-1);s&&i.start<=s.end?s.end=Math.max(s.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=S0(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},s=this.regions.findIndex(o=>o.offset>n);return s==-1?this.regions.push(i):this.regions.splice(s,0,i),this.collect(),this}}var gE,yE,bE;(gE=Promise.withResolvers)!==null&&gE!==void 0||(Promise.withResolvers=(fi("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(yE=Symbol.dispose)!==null&&yE!==void 0||(Symbol.dispose=(fi("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(bE=Symbol.asyncDispose)!==null&&bE!==void 0||(Symbol.asyncDispose=(fi("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class P${constructor(t){this.store=t}}class qse extends P${async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class ck extends P${constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new Hse(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const s=i.missing(n,r);for(const{start:l,end:c}of s)this.async(this.get(t,l,c));if(s.length)throw qi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const o=i.regionAt(n);if(!o){fi("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class Gse{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof ck))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof ck))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Mr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Or=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class F$ extends cN{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const s=w$(t,a);if(s.startsWith(".."))continue;let o=dr(n,s);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:a,newKey:o,ino:i})}for(const{oldKey:a,newKey:i,ino:s}of r){this._ids.delete(a),this._ids.set(i,s);const o=this._paths.get(s);if(!o){fi("Missing paths in table for ino "+s);continue}o.delete(a),o.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,Gg(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!0),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),await r.set(s.ino,Qa(s)),a.has(i)&&await r.set(s.data,Is(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!1),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),r.setSync(s.ino,Qa(s)),a.has(i)&&r.setSync(s.data,Is(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Ax,a=Mr(n,this.transaction(),!0),i=[["/",0]],s=HD(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),c=new ba(await a.get(l));if(r.set(o,c),c.mode&va){const d=Ti((t=await a.get(c.data))!==null&&t!==void 0?t:vr(Ue.With("ENODATA",o)));for(const[h,p]of Object.entries(d))i.push([dr(o,h),p])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Ax,a=Mr(n,this.transaction(),!1),i=[["/",0]],s=HD(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),c=new ba(a.getSync(l));if(r.set(o,c),c.mode&va){const d=Ti((t=a.getSync(c.data))!==null&&t!==void 0?t:vr(Ue.With("ENODATA",o)));for(const[h,p]of Object.entries(d))i.push([dr(o,h),p])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async rename(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!0),l=Jo(t),c=Jo(n),d=await this.findInode(o,l.dir,"rename"),h=Ti((r=await o.get(d.data))!==null&&r!==void 0?r:vr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const p=h[l.base];if(p!=this._ids.get(t)&&qi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const g=c.dir==l.dir,v=g?d:await this.findInode(o,c.dir,"rename"),b=g?h:Ti((a=await o.get(v.data))!==null&&a!==void 0?a:vr(Ue.With("ENODATA",c.dir,"rename")));if(b[c.base]){const x=new ba((i=await o.get(b[c.base]))!==null&&i!==void 0?i:vr(Ue.With("ENOENT",n,"rename")));if(!x.toStats().isFile())throw Ue.With("EPERM",n,"rename");await o.remove(x.data),await o.remove(b[c.base])}b[c.base]=p,await o.set(d.data,Is(h)),await o.set(v.data,Is(b)),await o.commit(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}renameSync(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!1),l=Jo(t),c=Jo(n),d=this.findInodeSync(o,l.dir,"rename"),h=Ti((r=o.getSync(d.data))!==null&&r!==void 0?r:vr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const p=h[l.base];if(p!=this._ids.get(t)&&qi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const g=c.dir===l.dir,v=g?d:this.findInodeSync(o,c.dir,"rename"),b=g?h:Ti((a=o.getSync(v.data))!==null&&a!==void 0?a:vr(Ue.With("ENODATA",c.dir,"rename")));if(b[c.base]){const x=new ba((i=o.getSync(b[c.base]))!==null&&i!==void 0?i:vr(Ue.With("ENOENT",n,"rename")));if(!x.toStats().isFile())throw Ue.With("EPERM",n,"rename");o.removeSync(x.data),o.removeSync(b[c.base])}b[c.base]=p,o.setSync(d.data,Is(h)),o.setSync(v.data,Is(b)),o.commitSync(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Qa(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Or(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Qa(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Or(r)}}async createFile(t,n){return n.mode|=go,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=go,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=va,await this.commitNew(t,n,Yd("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=va,this.commitNewSync(t,n,Yd("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(Ti((n=await a.get(i.data))!==null&&n!==void 0?n:vr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Or(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(Ti((n=a.getSync(i.data))!==null&&n!==void 0?n:vr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Or(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!0),s=await this.findInode(i,t,"sync");n&&await i.set(s.data,n),s.update(r)&&(this._add(s.ino,t),await i.set(s.ino,Qa(s))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Or(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!1),s=this.findInodeSync(i,t,"sync");n&&i.setSync(s.data,n),s.update(r)&&(this._add(s.ino,t),i.setSync(s.ino,Qa(s))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Or(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!0),s=sr(n),o=await this.findInode(i,s,"link"),l=Ti((r=await i.get(o.data))!==null&&r!==void 0?r:vr(Ue.With("ENOENT",s,"link"))),c=await this.findInode(i,t,"link");c.nlink++,l[_p(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,Qa(c)),await i.set(o.data,Is(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Or(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!1),s=sr(n),o=this.findInodeSync(i,s,"link"),l=Ti((r=i.getSync(o.data))!==null&&r!==void 0?r:vr(Ue.With("ENOENT",s,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,l[_p(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,Qa(c)),i.setSync(o.data,Is(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Or(a)}}async read(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const c=(i=await o.get(l.data,r,a))!==null&&i!==void 0?i:vr(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?c:c.subarray(r,a);d.byteLength>n.byteLength&&qi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}readSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const c=(i=o.getSync(l.data,r,a))!==null&&i!==void 0?i:vr(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?c:c.subarray(r,a);d.byteLength>n.byteLength&&qi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Mr(i,this.transaction(),!0),o=await this.findInode(s,t,"write");let l=n;s.flag("partial")||(l=S0((a=await s.get(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await s.set(o.data,l,r),this._add(o.ino,t),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Or(i);s&&await s}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Mr(i,this.transaction(),!1),o=this.findInodeSync(s,t,"write");let l=n;s.flag("partial")||(l=S0((a=s.getSync(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),s.setSync(o.data,l,r),this._add(o.ino,t),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Or(i)}}transaction(){return new Gse(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Mr(t,this.transaction(),!0);if(await n.get(us))return;const r=new ba({ino:us,data:1,mode:511|va});await n.set(r.data,Yd("{}")),this._add(us,"/"),await n.set(us,Qa(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Or(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Mr(t,this.transaction(),!1);if(n.getSync(us))return;const r=new ba({ino:us,data:1,mode:511|va});n.setSync(r.data,Yd("{}")),this._add(us,"/"),n.setSync(us,Qa(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Or(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){fi("Attempted to populate tables after initialization");return}Gg("Populating tables with existing store metadata");const n=Mr(t,this.transaction(),!0),r=await n.get(us);if(!r){aN("Store does not have a root inode");const o=new ba({ino:us,data:1,mode:511|va});await n.set(o.data,Yd("{}")),this._add(us,"/"),await n.set(us,Qa(o)),await n.commit();return}if(r.length<Hr(ba)){V1("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const s=[["/",us]];for(;s.length>0;){i++;const[o,l]=s.shift();this._add(l,o);const c=await n.get(l);if(!c){fi("Store is missing data for inode: "+l);continue}if(c.length<Hr(ba)){fi(`Invalid inode size for ino ${l}: ${c.length}`);continue}const d=new ba(c);if((d.mode&va)!=va||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){fi("Store is missing directory data: "+d.data);continue}const p=Ti(h);for(const[g,v]of Object.entries(p))s.push([dr(o,g),v])}Gg(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Or(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ba((a=await t.get(i))!==null&&a!==void 0?a:vr(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ba((a=t.getSync(i))!==null&&a!==void 0?a:vr(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>Mi)throw qi(new Ue(lt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Mr(s,this.transaction(),!0),{dir:l,base:c}=Jo(t),d=await this.findInode(o,l,a),h=Ti((i=await o.get(d.data))!==null&&i!==void 0?i:vr(Ue.With("ENOENT",l,a)));if(h[c])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new ba({...n,ino:p,data:p+1,size:r.byteLength});return await o.set(g.ino,Qa(g)),await o.set(g.data,r),h[c]=g.ino,await o.set(d.data,Is(h)),await o.commit(),g}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}commitNewSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Mr(s,this.transaction(),!1),{dir:l,base:c}=Jo(t),d=this.findInodeSync(o,l,a),h=Ti((i=o.getSync(d.data))!==null&&i!==void 0?i:vr(Ue.With("ENOENT",l,a)));if(h[c])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new ba({...n,ino:p,data:p+1,size:r.byteLength});return o.setSync(g.ino,Qa(g)),o.setSync(g.data,r),h[c]=g.ino,o.setSync(d.data,Is(h)),o.commitSync(),g}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Mr(i,this.transaction(),!0),{dir:l,base:c}=Jo(t),d=await this.findInode(o,l,s),h=Ti((r=await o.get(d.data))!==null&&r!==void 0?r:vr(Ue.With("ENOENT",l,s)));if(!h[c])throw Ue.With("ENOENT",t,s);const p=h[c],g=new ba((a=await o.get(p))!==null&&a!==void 0?a:vr(Ue.With("ENOENT",t,s)));if(delete h[c],!n&&So(g))throw Ue.With("EISDIR",t,s);await o.set(d.data,Is(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await o.set(g.ino,Qa(g))):(await o.remove(g.data),await o.remove(p),this._remove(p)),await o.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Or(i);s&&await s}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Mr(i,this.transaction(),!1),{dir:l,base:c}=Jo(t),d=this.findInodeSync(o,l,s),h=Ti((r=o.getSync(d.data))!==null&&r!==void 0?r:vr(Ue.With("ENOENT",l,s))),p=h[c];if(!p)throw Ue.With("ENOENT",t,s);const g=new ba((a=o.getSync(p))!==null&&a!==void 0?a:vr(Ue.With("ENOENT",t,s)));if(delete h[c],!n&&So(g))throw Ue.With("EISDIR",t,s);o.setSync(d.data,Is(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),o.setSync(g.ino,Qa(g))):(o.removeSync(g.data),o.removeSync(p),this._remove(p)),o.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Or(i)}}}class Wse extends qse{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class Kse extends Map{constructor(t=Mi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new Wse(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const Zse={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new F$(new Kse(e,t));return n.checkRootSync(),n}},Yse=Zse;let Ra=!0;class XD extends XA{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let s=this._buffer.indexOf(`
`);s>=0;s=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,s);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(s+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;js(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;js(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);lw(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);lw(this.output,0),js(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,js(this.output,-a.length,0),js(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;js(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(js(this.output,-this._cursor,0),js(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);lw(this.output,0),js(this.output,0,0),this.output.write(this._prompt+r),this.line=r,js(this.output,-r.length,0),js(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(lw(this.output,0),js(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return fi("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return fi("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function Xse(e,t,n,r){return"input"in e?new XD(e.input,e.output,e.completer,e.terminal):new XD(e,t,n,r)}function lw(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function js(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Rx{get position(){return this.flag&vf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,s){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=s,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&W1||this.inode.flags&Gi.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&ui||this.flag&cc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&ui||this.flag&cc))throw new Ue(lt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Gi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!k0(this.inode)&&!T0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,this.fs.writeSync(this.internalPath,s,a),this._isSync&&this.sync(),s.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ui)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Gi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!k0(this.inode)&&!T0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>kr?-61441:kr)|t,(this._isSync||t>kr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,O$(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Gi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Ix(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Ao.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function wi(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Ao.descriptors).get(t);if(!a)throw new Ue(lt.EBADF);return a}function L$(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Ao.descriptors).delete(t)}const Jse=/[rwasx]{1,2}\+?/;function dc(e){if(typeof e=="number")return e;if(!Jse.test(e))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);return Qse(e)}function Qse(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?S$:H1;return e.includes("w")&&(t|=G1),e.includes("a")&&(t|=vf),e.includes("+")?t|=cc:e.includes("r")||(t|=ui),e.includes("s")&&(t|=W1),e.includes("x")&&(t|=q1),t}function $$(e){let t=0;return e&ui||(t|=Na),(e&ui||e&cc)&&(t|=ia),t}const A0=new Map;uN("/",Yse.create({label:"root"}));function uN(e,t){if(e[0]!="/"&&(e="/"+e),e=vc.call(this,e),A0.has(e))throw qi(new Ue(lt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,A0.set(e,t),x$(`Mounted ${t.name} on ${e}`),Gg(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function B$(e){if(e[0]!="/"&&(e="/"+e),e=vc.call(this,e),!A0.has(e)){fi(e+" is already unmounted");return}A0.delete(e),aN("Unmounted "+e)}function Un(e,t){const n=(t==null?void 0:t.root)||Ao.root;e=hn(dr(n,e));const r=[...A0].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(toe(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw dse(new Ue(lt.EIO,"No file system",e))}function vE(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function gr(e,t){typeof e.stack=="string"&&(e.stack=vE(e.stack,t));try{e.message=vE(e.message,t)}catch{}return e.path&&(e.path=vE(e.path,t)),e}function z$(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Mi),files:(t?BigInt:Number)(n.totalNodes||Mi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function eoe(e){var t,n,r,a,i,s,o;const l=this!==null&&this!==void 0?this:Ao;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(lt.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const c=dr(l.root,e);for(const d of(o=(s=l.descriptors)===null||s===void 0?void 0:s.values())!==null&&o!==void 0?o:[]){if(!d.path.startsWith(l.root))throw Ue.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(c.length>l.root.length)throw new Ue(lt.EPERM,"Can not chroot() outside of current root");l.root=c}function toe(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class U$ extends XA{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class V$ extends U${constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?dr(t.root,n):n,roe(this.realpath,this)}close(){super.emit("close"),aoe(this.realpath,this)}[Symbol.dispose](){this.close()}}class noe extends U${constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=qu(this.path);Pse(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=qu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Tu=new Map;function roe(e,t){const n=hn(e);Tu.has(n)||Tu.set(n,new Set),Tu.get(n).add(t)}function aoe(e,t){const n=hn(e);Tu.has(n)&&(Tu.get(n).delete(t),Tu.get(n).size===0&&Tu.delete(n))}function ti(e,t,n){var r;e&&(n=dr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=hn(n);for(let a=n;a!="/";a=sr(a)){const i=Tu.get(a);if(i)for(const s of i)s.emit("change",t,w$.call(s._context,a,n)||_p(n))}}var Ry=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Iy=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function ioe(e,t){e=hn(e),t=hn(t);const n=Un(e,this),r=Un(t,this);if(!qu.call(this,sr(e)).hasAccess(ia,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),ti(this,"rename",e.toString()),ti(this,"change",t.toString());return}mN.call(this,t,pN(e)),hN.call(this,e),ti(this,"rename",e.toString())}catch(a){throw gr(a,{[n.path]:e,[r.path]:t})}}function dN(e){e=hn(e);try{const{fs:t,path:n}=Un(ad.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==lt.ENOENT)return!1;throw t}}function qu(e,t){e=hn(e);const{fs:n,path:r}=Un(ad.call(this,e),this);try{const a=n.statSync(r);if(Ra&&!mr(this,a,Na))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Pf(a):new Rc(a)}catch(a){throw gr(a,{[r]:e})}}function fN(e,t){e=hn(e);const{fs:n,path:r}=Un(e,this);try{const a=n.statSync(r);if(Ra&&!mr(this,a,Na))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Pf(a):new Rc(a)}catch(a){throw gr(a,{[r]:e})}}function soe(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=Ry(n,Ff.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(lt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{Iy(n)}}function hN(e){e=hn(e);const{fs:t,path:n}=Un(e,this);try{if(Ra&&!mr(this,t.statSync(n),ia))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),ti(this,"rename",e.toString())}catch(r){throw gr(r,{[n]:e})}}function Ff(e,t){var n;e=hn(e);const r=rd(t.mode,420),a=dc(t.flag);e=t.preserveSymlinks?e:ad.call(this,e);const{fs:i,path:s}=Un(e,this);let o;try{o=i.statSync(s)}catch{}if(!o){if(!(a&H1))throw Ue.With("ENOENT",e,"_open");const c=i.statSync(sr(s));if(!mr(this,c,ia))throw Ue.With("EACCES",sr(e),"_open");if(!So(c))throw Ue.With("ENOTDIR",sr(e),"_open");if(!t.allowDirectory&&r&va)throw Ue.With("EISDIR",e,"_open");if(!mr(this,c,ia))throw Ue.With("EACCES",sr(s),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ao.credentials,p=i.createFileSync(s,{mode:r,uid:c.mode&Ay?c.uid:d,gid:c.mode&Ny?c.gid:h});return new Rx(this,e,i,s,a,p)}if(!mr(this,o,r)||!mr(this,o,$$(a)))throw Ue.With("EACCES",e,"_open");if(a&q1)throw Ue.With("EEXIST",e,"_open");const l=new Rx(this,e,i,s,a,o);if(a&G1&&l.truncate(0),!t.allowDirectory&&o.mode&va)throw Ue.With("EISDIR",e,"_open");return l}function K1(e,t,n=sN){return Ix(Ff.call(this,e,{flag:t,mode:n}))}function Z1(e,t,n){return Ix(Ff.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function H$(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Ry(r,typeof e=="number"?wi(this,e):Ff.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),s=new Uint8Array(i);return a.read(s,0,i,0),s}catch(a){r.error=a,r.hasError=!0}finally{Iy(r)}}function pN(e,t={}){const n=uc(t,null,"r",420);if(dc(n.flag)&ui)throw new Ue(lt.EINVAL,"Flag passed to readFile must allow for reading");const a=Lr.from(H$.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function mN(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=uc(n,"utf8","w+",420),i=dc(a.flag);if(!(i&ui||i&cc))throw new Ue(lt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!s)throw new Ue(lt.EINVAL,"Data not specified");Ry(r,typeof e=="number"?wi(this,e):Ff.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength,0),ti(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{Iy(r)}}function ooe(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=uc(n,"utf8","a+",420),i=dc(a.flag);if(!(i&vf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Ry(r,Ff.call(this,typeof e=="number"?wi(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{Iy(r)}}function loe(e,t){const n=wi(this,e).stat();return t!=null&&t.bigint?new Pf(n):new Rc(n)}function Lf(e){wi(this,e).close(),L$(this,e)}function coe(e,t=0){if(t||(t=0),t<0)throw new Ue(lt.EINVAL);wi(this,e).truncate(t)}function uoe(e){wi(this,e).sync()}function doe(e){wi(this,e).datasync()}function foe(e,t,n,r,a){let i,s,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";s=0,i=Lr.from(t,h),o=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n,o=r,l=typeof a=="number"?a:null;const c=wi(this,e);l??(l=c.position);const d=c.write(i,s,o,l);return ti(this,"change",c.path),d}function hoe(e,t,n,r,a){const i=wi(this,e),s=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,s,r,a)}function gN(e,t,n){wi(this,e).chown(t,n)}function yN(e,t){const n=rd(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode.");wi(this,e).chmod(n)}function bN(e,t,n){wi(this,e).utimes(Nx(t),Nx(n))}function q$(e){e=hn(e);const{fs:t,path:n}=Un(ad.call(this,e),this);try{const r=t.statSync(n);if(!So(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Ra&&!mr(this,r,ia))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),ti(this,"rename",e.toString())}catch(r){throw gr(r,{[n]:e})}}function vN(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ao.credentials;t=typeof t=="object"?t:{mode:t};const s=rd(t==null?void 0:t.mode,511);e=ad.call(this,e);const{fs:o,path:l,root:c}=Un(e,this),d={[l]:e},h=(p,g)=>{if(!mr(this,g,ia))throw Ue.With("EACCES",sr(p),"mkdir");const v=o.mkdirSync(p,{mode:s,uid:g.mode&Ay?g.uid:a,gid:g.mode&Ny?g.gid:i});return ti(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){h(l,o.statSync(sr(l)));return}const p=[];for(let v=l,b=e;!o.existsSync(v);v=sr(v),b=sr(b))p.unshift(v),d[v]=b;if(!p.length)return;const g=[o.statSync(sr(p[0]))];for(const[v,b]of p.entries())g.push(h(b,g[v]));return c.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(c.length)}catch(p){throw gr(p,d)}}function Gp(e,t){t=typeof t=="object"?t:{encoding:t},e=hn(e);const{fs:n,path:r}=Un(ad.call(this,e),this);let a;try{const s=n.statSync(r);if(Ra&&!mr(this,s,Na))throw Ue.With("EACCES",r,"readdir");if(!So(s))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(s){throw gr(s,{[r]:e})}const i=[];for(const s of a){let o;try{o=n.statSync(dr(r,s))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new N0(s,o)):(t==null?void 0:t.encoding)=="buffer"?i.push(Lr.from(s)):i.push(s),!(!So(o)||!(t!=null&&t.recursive)))for(const l of Gp.call(this,dr(e,s),t))l instanceof N0?(l.path=dr(s,l.path),i.push(l)):Lr.isBuffer(l)?i.push(Lr.from(dr(s,QA(l)))):i.push(dr(s,l))}return i}function poe(e,t){if(e=hn(e),!qu(sr(e)).hasAccess(Na,this))throw Ue.With("EACCES",sr(e),"link");if(t=hn(t),!qu(sr(t)).hasAccess(ia,this))throw Ue.With("EACCES",sr(t),"link");const{fs:n,path:r}=Un(e,this),a=Un(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Ra&&!mr(this,n.statSync(r),Na))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw gr(i,{[r]:e,[a.path]:t})}}function moe(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid type: "+n);t=hn(t);const a=Ry(r,Ff.call(this,t,{flag:"wx",mode:420}),!1);a.write(Yd(hn(e,!0))),a.chmod(Nc)}catch(a){r.error=a,r.hasError=!0}finally{Iy(r)}}function uk(e,t){const n=Lr.from(H$.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function goe(e,t,n){const r=K1.call(this,e,"r+");gN.call(this,r,t,n),Lf.call(this,r)}function yoe(e,t,n){const r=Z1.call(this,e,"r+");gN.call(this,r,t,n),Lf.call(this,r)}function boe(e,t){const n=K1.call(this,e,"r+");yN.call(this,n,t),Lf.call(this,n)}function voe(e,t){const n=Z1.call(this,e,"r+");yN.call(this,n,t),Lf.call(this,n)}function G$(e,t,n){const r=K1.call(this,e,"r+");bN.call(this,r,t,n),Lf.call(this,r)}function woe(e,t,n){const r=Z1.call(this,e,"r+");bN.call(this,r,t,n),Lf.call(this,r)}function dk(e,t,n){try{const l=Un(t,e),c=l.fs.statSync(l.path);if(!Sp(c))return{...l,fullPath:t,stats:c};const d=vc.call(e,sr(t),uk.call(e,t).toString());return dk(e,d)}catch{}const{base:r,dir:a}=Jo(t),i=a=="/"?"/":ad.call(e,a),s=dr(i,r),o=Un(s,e);try{const l=o.fs.statSync(o.path);if(!Sp(l))return{...o,fullPath:s,stats:l};const c=vc.call(e,i,uk.call(e,s).toString());return dk(e,c)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw gr(l,{[o.path]:s})}}function ad(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=dk(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Lr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function xoe(e,t=384){if(!mr(this,qu.call(this,e),t))throw new Ue(lt.EACCES)}function W$(e,t){e=hn(e);let n;try{n=fN.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&kr){case va:if(t!=null&&t.recursive)for(const r of Gp.call(this,e))W$.call(this,dr(e,r),t);q$.call(this,e);break;case go:case Nc:case Df:case Mf:hN.call(this,e);break;case Of:case jf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}function _oe(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return vN.call(this,a),n=="buffer"?Lr.from(a):a}function K$(e,t,n){if(e=hn(e),t=hn(t),n&&n&oN&&dN(t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");mN.call(this,t,pN(e)),ti(this,"rename",t.toString())}function Soe(e,t,n){const r=wi(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function Eoe(e,t,n){const r=wi(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function Coe(e,t){return e=hn(e),new wN(e,this)}function Z$(e,t,n){e=hn(e),t=hn(t);const r=fN.call(this,e);if(n!=null&&n.errorOnExist&&dN.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&kr){case va:if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");vN.call(this,t,{recursive:!0});for(const a of Gp.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(dr(e,a.name),dr(t,a.name))||Z$.call(this,dr(e,a.name),dr(t,a.name),n);break;case go:case Nc:K$.call(this,e,t);break;case Df:case Mf:case Of:case jf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&G$.call(this,t,r.atime,r.mtime)}function Toe(e,t){e=hn(e);const{fs:n}=Un(e,this);return z$(n,t==null?void 0:t.bigint)}function koe(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),s=[];function o(l){const c=Gp(l,{withFileTypes:r,encoding:"utf8"});for(const d of c){const h=r?d.path:l+"/"+d;a(r?d:h)||(qu(h).isDirectory()&&i.some(p=>p.source.includes(".*"))&&o(h),i.some(p=>p.test(h.replace(/^\/+/g,"")))&&s.push(r?d.path:h.replace(/^\/+/g,"")))}}return o(n),s}class N0{get name(){return _p(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return zse(this.stats)}isDirectory(){return So(this.stats)}isBlockDevice(){return T0(this.stats)}isCharacterDevice(){return k0(this.stats)}isSymbolicLink(){return Sp(this.stats)}isFIFO(){return Vse(this.stats)}isSocket(){return Use(this.stats)}}class wN{checkClosed(){if(this.closed)throw new Ue(lt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await Bf.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Gp.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var wE={exports:{}},xE={exports:{}},_E={},JD;function id(){return JD||(JD=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=p,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;a[45]=62,a[95]=63;function c(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function d(S){var E=c(S),C=E[0],k=E[1];return(C+k)*3/4-k}function h(S,E,C){return(E+C)*3/4-C}function p(S){var E,C=c(S),k=C[0],j=C[1],I=new i(h(S,k,j)),N=0,P=j>0?k-4:k,L;for(L=0;L<P;L+=4)E=a[S.charCodeAt(L)]<<18|a[S.charCodeAt(L+1)]<<12|a[S.charCodeAt(L+2)]<<6|a[S.charCodeAt(L+3)],I[N++]=E>>16&255,I[N++]=E>>8&255,I[N++]=E&255;return j===2&&(E=a[S.charCodeAt(L)]<<2|a[S.charCodeAt(L+1)]>>4,I[N++]=E&255),j===1&&(E=a[S.charCodeAt(L)]<<10|a[S.charCodeAt(L+1)]<<4|a[S.charCodeAt(L+2)]>>2,I[N++]=E>>8&255,I[N++]=E&255),I}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var k,j=[],I=E;I<C;I+=3)k=(S[I]<<16&16711680)+(S[I+1]<<8&65280)+(S[I+2]&255),j.push(g(k));return j.join("")}function b(S){for(var E,C=S.length,k=C%3,j=[],I=16383,N=0,P=C-k;N<P;N+=I)j.push(v(S,N,N+I>P?P:N+I));return k===1?(E=S[C-1],j.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(S[C-2]<<8)+S[C-1],j.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),j.join("")}var x={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */x.read=function(S,E,C,k,j){var I,N,P=j*8-k-1,L=(1<<P)-1,H=L>>1,M=-7,Z=C?j-1:0,q=C?-1:1,ue=S[E+Z];for(Z+=q,I=ue&(1<<-M)-1,ue>>=-M,M+=P;M>0;I=I*256+S[E+Z],Z+=q,M-=8);for(N=I&(1<<-M)-1,I>>=-M,M+=k;M>0;N=N*256+S[E+Z],Z+=q,M-=8);if(I===0)I=1-H;else{if(I===L)return N?NaN:(ue?-1:1)*(1/0);N=N+Math.pow(2,k),I=I-H}return(ue?-1:1)*N*Math.pow(2,I-k)},x.write=function(S,E,C,k,j,I){var N,P,L,H=I*8-j-1,M=(1<<H)-1,Z=M>>1,q=j===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=k?0:I-1,ae=k?1:-1,ee=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(P=isNaN(E)?1:0,N=M):(N=Math.floor(Math.log(E)/Math.LN2),E*(L=Math.pow(2,-N))<1&&(N--,L*=2),N+Z>=1?E+=q/L:E+=q*Math.pow(2,1-Z),E*L>=2&&(N++,L/=2),N+Z>=M?(P=0,N=M):N+Z>=1?(P=(E*L-1)*Math.pow(2,j),N=N+Z):(P=E*Math.pow(2,Z-1)*Math.pow(2,j),N=0));j>=8;S[C+ue]=P&255,ue+=ae,P/=256,j-=8);for(N=N<<j|P,H+=j;H>0;S[C+ue]=N&255,ue+=ae,N/=256,H-=8);S[C+ue-ae]|=ee*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=x,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=M,S.SlowBuffer=ne,S.INSPECT_MAX_BYTES=50;const j=2147483647;S.kMaxLength=j;const{Uint8Array:I,ArrayBuffer:N,SharedArrayBuffer:P}=globalThis;M.TYPED_ARRAY_SUPPORT=L(),!M.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function L(){try{const G=new I(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,I.prototype),Object.setPrototypeOf(G,V),G.foo()===42}catch{return!1}}Object.defineProperty(M.prototype,"parent",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.buffer}}),Object.defineProperty(M.prototype,"offset",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.byteOffset}});function H(G){if(G>j)throw new RangeError('The value "'+G+'" is invalid for option "size"');const V=new I(G);return Object.setPrototypeOf(V,M.prototype),V}function M(G,V,K){if(typeof G=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(G)}return Z(G,V,K)}M.poolSize=8192;function Z(G,V,K){if(typeof G=="string")return ee(G,V);if(N.isView(G))return ie(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(ye(G,N)||G&&ye(G.buffer,N)||typeof P<"u"&&(ye(G,P)||G&&ye(G.buffer,P)))return B(G,V,K);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const me=G.valueOf&&G.valueOf();if(me!=null&&me!==G)return M.from(me,V,K);const Re=J(G);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return M.from(G[Symbol.toPrimitive]("string"),V,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}M.from=function(G,V,K){return Z(G,V,K)},Object.setPrototypeOf(M.prototype,I.prototype),Object.setPrototypeOf(M,I);function q(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function ue(G,V,K){return q(G),G<=0?H(G):V!==void 0?typeof K=="string"?H(G).fill(V,K):H(G).fill(V):H(G)}M.alloc=function(G,V,K){return ue(G,V,K)};function ae(G){return q(G),H(G<0?0:Q(G)|0)}M.allocUnsafe=function(G){return ae(G)},M.allocUnsafeSlow=function(G){return ae(G)};function ee(G,V){if((typeof V!="string"||V==="")&&(V="utf8"),!M.isEncoding(V))throw new TypeError("Unknown encoding: "+V);const K=he(G,V)|0;let me=H(K);const Re=me.write(G,V);return Re!==K&&(me=me.slice(0,Re)),me}function X(G){const V=G.length<0?0:Q(G.length)|0,K=H(V);for(let me=0;me<V;me+=1)K[me]=G[me]&255;return K}function ie(G){if(ye(G,I)){const V=new I(G);return B(V.buffer,V.byteOffset,V.byteLength)}return X(G)}function B(G,V,K){if(V<0||G.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<V+(K||0))throw new RangeError('"length" is outside of buffer bounds');let me;return V===void 0&&K===void 0?me=new I(G):K===void 0?me=new I(G,V):me=new I(G,V,K),Object.setPrototypeOf(me,M.prototype),me}function J(G){if(M.isBuffer(G)){const V=Q(G.length)|0,K=H(V);return K.length===0||G.copy(K,0,0,V),K}if(G.length!==void 0)return typeof G.length!="number"||Me(G.length)?H(0):X(G);if(G.type==="Buffer"&&Array.isArray(G.data))return X(G.data)}function Q(G){if(G>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return G|0}function ne(G){return+G!=G&&(G=0),M.alloc(+G)}M.isBuffer=function(V){return V!=null&&V._isBuffer===!0&&V!==M.prototype},M.compare=function(V,K){if(ye(V,I)&&(V=M.from(V,V.offset,V.byteLength)),ye(K,I)&&(K=M.from(K,K.offset,K.byteLength)),!M.isBuffer(V)||!M.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===K)return 0;let me=V.length,Re=K.length;for(let Ve=0,pt=Math.min(me,Re);Ve<pt;++Ve)if(V[Ve]!==K[Ve]){me=V[Ve],Re=K[Ve];break}return me<Re?-1:Re<me?1:0},M.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(V,K){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return M.alloc(0);let me;if(K===void 0)for(K=0,me=0;me<V.length;++me)K+=V[me].length;const Re=M.allocUnsafe(K);let Ve=0;for(me=0;me<V.length;++me){let pt=V[me];if(ye(pt,I))Ve+pt.length>Re.length?(M.isBuffer(pt)||(pt=M.from(pt)),pt.copy(Re,Ve)):I.prototype.set.call(Re,pt,Ve);else if(M.isBuffer(pt))pt.copy(Re,Ve);else throw new TypeError('"list" argument must be an Array of Buffers');Ve+=pt.length}return Re};function he(G,V){if(M.isBuffer(G))return G.length;if(N.isView(G)||ye(G,N))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const K=G.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&K===0)return 0;let Re=!1;for(;;)switch(V){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return ft(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return Be(G).length;default:if(Re)return me?-1:ft(G).length;V=(""+V).toLowerCase(),Re=!0}}M.byteLength=he;function de(G,V,K){let me=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,V>>>=0,K<=V))return"";for(G||(G="utf8");;)switch(G){case"hex":return xe(this,V,K);case"utf8":case"utf-8":return Se(this,V,K);case"ascii":return se(this,V,K);case"latin1":case"binary":return te(this,V,K);case"base64":return z(this,V,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,V,K);default:if(me)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),me=!0}}M.prototype._isBuffer=!0;function Ie(G,V,K){const me=G[V];G[V]=G[K],G[K]=me}M.prototype.swap16=function(){const V=this.length;if(V%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let K=0;K<V;K+=2)Ie(this,K,K+1);return this},M.prototype.swap32=function(){const V=this.length;if(V%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let K=0;K<V;K+=4)Ie(this,K,K+3),Ie(this,K+1,K+2);return this},M.prototype.swap64=function(){const V=this.length;if(V%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let K=0;K<V;K+=8)Ie(this,K,K+7),Ie(this,K+1,K+6),Ie(this,K+2,K+5),Ie(this,K+3,K+4);return this},M.prototype.toString=function(){const V=this.length;return V===0?"":arguments.length===0?Se(this,0,V):de.apply(this,arguments)},M.prototype.toLocaleString=M.prototype.toString,M.prototype.equals=function(V){if(!M.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V?!0:M.compare(this,V)===0},M.prototype.inspect=function(){let V="";const K=S.INSPECT_MAX_BYTES;return V=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(V+=" ... "),"<Buffer "+V+">"},k&&(M.prototype[k]=M.prototype.inspect),M.prototype.compare=function(V,K,me,Re,Ve){if(ye(V,I)&&(V=M.from(V,V.offset,V.byteLength)),!M.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(K===void 0&&(K=0),me===void 0&&(me=V?V.length:0),Re===void 0&&(Re=0),Ve===void 0&&(Ve=this.length),K<0||me>V.length||Re<0||Ve>this.length)throw new RangeError("out of range index");if(Re>=Ve&&K>=me)return 0;if(Re>=Ve)return-1;if(K>=me)return 1;if(K>>>=0,me>>>=0,Re>>>=0,Ve>>>=0,this===V)return 0;let pt=Ve-Re,Kt=me-K;const ut=Math.min(pt,Kt),Rt=this.slice(Re,Ve),Lt=V.slice(K,me);for(let en=0;en<ut;++en)if(Rt[en]!==Lt[en]){pt=Rt[en],Kt=Lt[en];break}return pt<Kt?-1:Kt<pt?1:0};function Te(G,V,K,me,Re){if(G.length===0)return-1;if(typeof K=="string"?(me=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,Me(K)&&(K=Re?0:G.length-1),K<0&&(K=G.length+K),K>=G.length){if(Re)return-1;K=G.length-1}else if(K<0)if(Re)K=0;else return-1;if(typeof V=="string"&&(V=M.from(V,me)),M.isBuffer(V))return V.length===0?-1:Ae(G,V,K,me,Re);if(typeof V=="number")return V=V&255,typeof I.prototype.indexOf=="function"?Re?I.prototype.indexOf.call(G,V,K):I.prototype.lastIndexOf.call(G,V,K):Ae(G,[V],K,me,Re);throw new TypeError("val must be string, number or Buffer")}function Ae(G,V,K,me,Re){let Ve=1,pt=G.length,Kt=V.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(G.length<2||V.length<2)return-1;Ve=2,pt/=2,Kt/=2,K/=2}function ut(Lt,en){return Ve===1?Lt[en]:Lt.readUInt16BE(en*Ve)}let Rt;if(Re){let Lt=-1;for(Rt=K;Rt<pt;Rt++)if(ut(G,Rt)===ut(V,Lt===-1?0:Rt-Lt)){if(Lt===-1&&(Lt=Rt),Rt-Lt+1===Kt)return Lt*Ve}else Lt!==-1&&(Rt-=Rt-Lt),Lt=-1}else for(K+Kt>pt&&(K=pt-Kt),Rt=K;Rt>=0;Rt--){let Lt=!0;for(let en=0;en<Kt;en++)if(ut(G,Rt+en)!==ut(V,en)){Lt=!1;break}if(Lt)return Rt}return-1}M.prototype.includes=function(V,K,me){return this.indexOf(V,K,me)!==-1},M.prototype.indexOf=function(V,K,me){return Te(this,V,K,me,!0)},M.prototype.lastIndexOf=function(V,K,me){return Te(this,V,K,me,!1)};function Ee(G,V,K,me){K=Number(K)||0;const Re=G.length-K;me?(me=Number(me),me>Re&&(me=Re)):me=Re;const Ve=V.length;me>Ve/2&&(me=Ve/2);let pt;for(pt=0;pt<me;++pt){const Kt=parseInt(V.substr(pt*2,2),16);if(Me(Kt))return pt;G[K+pt]=Kt}return pt}function Pe(G,V,K,me){return nt(ft(V,G.length-K),G,K,me)}function Qe(G,V,K,me){return nt(vt(V),G,K,me)}function Le(G,V,K,me){return nt(Be(V),G,K,me)}function je(G,V,K,me){return nt(F(V,G.length-K),G,K,me)}M.prototype.write=function(V,K,me,Re){if(K===void 0)Re="utf8",me=this.length,K=0;else if(me===void 0&&typeof K=="string")Re=K,me=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(me)?(me=me>>>0,Re===void 0&&(Re="utf8")):(Re=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ve=this.length-K;if((me===void 0||me>Ve)&&(me=Ve),V.length>0&&(me<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let pt=!1;for(;;)switch(Re){case"hex":return Ee(this,V,K,me);case"utf8":case"utf-8":return Pe(this,V,K,me);case"ascii":case"latin1":case"binary":return Qe(this,V,K,me);case"base64":return Le(this,V,K,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return je(this,V,K,me);default:if(pt)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),pt=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(G,V,K){return V===0&&K===G.length?E.fromByteArray(G):E.fromByteArray(G.slice(V,K))}function Se(G,V,K){K=Math.min(G.length,K);const me=[];let Re=V;for(;Re<K;){const Ve=G[Re];let pt=null,Kt=Ve>239?4:Ve>223?3:Ve>191?2:1;if(Re+Kt<=K){let ut,Rt,Lt,en;switch(Kt){case 1:Ve<128&&(pt=Ve);break;case 2:ut=G[Re+1],(ut&192)===128&&(en=(Ve&31)<<6|ut&63,en>127&&(pt=en));break;case 3:ut=G[Re+1],Rt=G[Re+2],(ut&192)===128&&(Rt&192)===128&&(en=(Ve&15)<<12|(ut&63)<<6|Rt&63,en>2047&&(en<55296||en>57343)&&(pt=en));break;case 4:ut=G[Re+1],Rt=G[Re+2],Lt=G[Re+3],(ut&192)===128&&(Rt&192)===128&&(Lt&192)===128&&(en=(Ve&15)<<18|(ut&63)<<12|(Rt&63)<<6|Lt&63,en>65535&&en<1114112&&(pt=en))}}pt===null?(pt=65533,Kt=1):pt>65535&&(pt-=65536,me.push(pt>>>10&1023|55296),pt=56320|pt&1023),me.push(pt),Re+=Kt}return fe(me)}const Ne=4096;function fe(G){const V=G.length;if(V<=Ne)return String.fromCharCode.apply(String,G);let K="",me=0;for(;me<V;)K+=String.fromCharCode.apply(String,G.slice(me,me+=Ne));return K}function se(G,V,K){let me="";K=Math.min(G.length,K);for(let Re=V;Re<K;++Re)me+=String.fromCharCode(G[Re]&127);return me}function te(G,V,K){let me="";K=Math.min(G.length,K);for(let Re=V;Re<K;++Re)me+=String.fromCharCode(G[Re]);return me}function xe(G,V,K){const me=G.length;(!V||V<0)&&(V=0),(!K||K<0||K>me)&&(K=me);let Re="";for(let Ve=V;Ve<K;++Ve)Re+=Ke[G[Ve]];return Re}function Fe(G,V,K){const me=G.slice(V,K);let Re="";for(let Ve=0;Ve<me.length-1;Ve+=2)Re+=String.fromCharCode(me[Ve]+me[Ve+1]*256);return Re}M.prototype.slice=function(V,K){const me=this.length;V=~~V,K=K===void 0?me:~~K,V<0?(V+=me,V<0&&(V=0)):V>me&&(V=me),K<0?(K+=me,K<0&&(K=0)):K>me&&(K=me),K<V&&(K=V);const Re=this.subarray(V,K);return Object.setPrototypeOf(Re,M.prototype),Re};function Ce(G,V,K){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+V>K)throw new RangeError("Trying to access beyond buffer length")}M.prototype.readUintLE=M.prototype.readUIntLE=function(V,K,me){V=V>>>0,K=K>>>0,me||Ce(V,K,this.length);let Re=this[V],Ve=1,pt=0;for(;++pt<K&&(Ve*=256);)Re+=this[V+pt]*Ve;return Re},M.prototype.readUintBE=M.prototype.readUIntBE=function(V,K,me){V=V>>>0,K=K>>>0,me||Ce(V,K,this.length);let Re=this[V+--K],Ve=1;for(;K>0&&(Ve*=256);)Re+=this[V+--K]*Ve;return Re},M.prototype.readUint8=M.prototype.readUInt8=function(V,K){return V=V>>>0,K||Ce(V,1,this.length),this[V]},M.prototype.readUint16LE=M.prototype.readUInt16LE=function(V,K){return V=V>>>0,K||Ce(V,2,this.length),this[V]|this[V+1]<<8},M.prototype.readUint16BE=M.prototype.readUInt16BE=function(V,K){return V=V>>>0,K||Ce(V,2,this.length),this[V]<<8|this[V+1]},M.prototype.readUint32LE=M.prototype.readUInt32LE=function(V,K){return V=V>>>0,K||Ce(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+this[V+3]*16777216},M.prototype.readUint32BE=M.prototype.readUInt32BE=function(V,K){return V=V>>>0,K||Ce(V,4,this.length),this[V]*16777216+(this[V+1]<<16|this[V+2]<<8|this[V+3])},M.prototype.readBigUInt64LE=Dt(function(V){V=V>>>0,De(V,"offset");const K=this[V],me=this[V+7];(K===void 0||me===void 0)&&ve(V,this.length-8);const Re=K+this[++V]*2**8+this[++V]*2**16+this[++V]*2**24,Ve=this[++V]+this[++V]*2**8+this[++V]*2**16+me*2**24;return BigInt(Re)+(BigInt(Ve)<<BigInt(32))}),M.prototype.readBigUInt64BE=Dt(function(V){V=V>>>0,De(V,"offset");const K=this[V],me=this[V+7];(K===void 0||me===void 0)&&ve(V,this.length-8);const Re=K*2**24+this[++V]*2**16+this[++V]*2**8+this[++V],Ve=this[++V]*2**24+this[++V]*2**16+this[++V]*2**8+me;return(BigInt(Re)<<BigInt(32))+BigInt(Ve)}),M.prototype.readIntLE=function(V,K,me){V=V>>>0,K=K>>>0,me||Ce(V,K,this.length);let Re=this[V],Ve=1,pt=0;for(;++pt<K&&(Ve*=256);)Re+=this[V+pt]*Ve;return Ve*=128,Re>=Ve&&(Re-=Math.pow(2,8*K)),Re},M.prototype.readIntBE=function(V,K,me){V=V>>>0,K=K>>>0,me||Ce(V,K,this.length);let Re=K,Ve=1,pt=this[V+--Re];for(;Re>0&&(Ve*=256);)pt+=this[V+--Re]*Ve;return Ve*=128,pt>=Ve&&(pt-=Math.pow(2,8*K)),pt},M.prototype.readInt8=function(V,K){return V=V>>>0,K||Ce(V,1,this.length),this[V]&128?(255-this[V]+1)*-1:this[V]},M.prototype.readInt16LE=function(V,K){V=V>>>0,K||Ce(V,2,this.length);const me=this[V]|this[V+1]<<8;return me&32768?me|4294901760:me},M.prototype.readInt16BE=function(V,K){V=V>>>0,K||Ce(V,2,this.length);const me=this[V+1]|this[V]<<8;return me&32768?me|4294901760:me},M.prototype.readInt32LE=function(V,K){return V=V>>>0,K||Ce(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},M.prototype.readInt32BE=function(V,K){return V=V>>>0,K||Ce(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},M.prototype.readBigInt64LE=Dt(function(V){V=V>>>0,De(V,"offset");const K=this[V],me=this[V+7];(K===void 0||me===void 0)&&ve(V,this.length-8);const Re=this[V+4]+this[V+5]*2**8+this[V+6]*2**16+(me<<24);return(BigInt(Re)<<BigInt(32))+BigInt(K+this[++V]*2**8+this[++V]*2**16+this[++V]*2**24)}),M.prototype.readBigInt64BE=Dt(function(V){V=V>>>0,De(V,"offset");const K=this[V],me=this[V+7];(K===void 0||me===void 0)&&ve(V,this.length-8);const Re=(K<<24)+this[++V]*2**16+this[++V]*2**8+this[++V];return(BigInt(Re)<<BigInt(32))+BigInt(this[++V]*2**24+this[++V]*2**16+this[++V]*2**8+me)}),M.prototype.readFloatLE=function(V,K){return V=V>>>0,K||Ce(V,4,this.length),C.read(this,V,!0,23,4)},M.prototype.readFloatBE=function(V,K){return V=V>>>0,K||Ce(V,4,this.length),C.read(this,V,!1,23,4)},M.prototype.readDoubleLE=function(V,K){return V=V>>>0,K||Ce(V,8,this.length),C.read(this,V,!0,52,8)},M.prototype.readDoubleBE=function(V,K){return V=V>>>0,K||Ce(V,8,this.length),C.read(this,V,!1,52,8)};function We(G,V,K,me,Re,Ve){if(!M.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>Re||V<Ve)throw new RangeError('"value" argument is out of bounds');if(K+me>G.length)throw new RangeError("Index out of range")}M.prototype.writeUintLE=M.prototype.writeUIntLE=function(V,K,me,Re){if(V=+V,K=K>>>0,me=me>>>0,!Re){const Kt=Math.pow(2,8*me)-1;We(this,V,K,me,Kt,0)}let Ve=1,pt=0;for(this[K]=V&255;++pt<me&&(Ve*=256);)this[K+pt]=V/Ve&255;return K+me},M.prototype.writeUintBE=M.prototype.writeUIntBE=function(V,K,me,Re){if(V=+V,K=K>>>0,me=me>>>0,!Re){const Kt=Math.pow(2,8*me)-1;We(this,V,K,me,Kt,0)}let Ve=me-1,pt=1;for(this[K+Ve]=V&255;--Ve>=0&&(pt*=256);)this[K+Ve]=V/pt&255;return K+me},M.prototype.writeUint8=M.prototype.writeUInt8=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,1,255,0),this[K]=V&255,K+1},M.prototype.writeUint16LE=M.prototype.writeUInt16LE=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,2,65535,0),this[K]=V&255,this[K+1]=V>>>8,K+2},M.prototype.writeUint16BE=M.prototype.writeUInt16BE=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,2,65535,0),this[K]=V>>>8,this[K+1]=V&255,K+2},M.prototype.writeUint32LE=M.prototype.writeUInt32LE=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,4,4294967295,0),this[K+3]=V>>>24,this[K+2]=V>>>16,this[K+1]=V>>>8,this[K]=V&255,K+4},M.prototype.writeUint32BE=M.prototype.writeUInt32BE=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,4,4294967295,0),this[K]=V>>>24,this[K+1]=V>>>16,this[K+2]=V>>>8,this[K+3]=V&255,K+4};function Nt(G,V,K,me,Re){pe(V,me,Re,G,K,7);let Ve=Number(V&BigInt(4294967295));G[K++]=Ve,Ve=Ve>>8,G[K++]=Ve,Ve=Ve>>8,G[K++]=Ve,Ve=Ve>>8,G[K++]=Ve;let pt=Number(V>>BigInt(32)&BigInt(4294967295));return G[K++]=pt,pt=pt>>8,G[K++]=pt,pt=pt>>8,G[K++]=pt,pt=pt>>8,G[K++]=pt,K}function it(G,V,K,me,Re){pe(V,me,Re,G,K,7);let Ve=Number(V&BigInt(4294967295));G[K+7]=Ve,Ve=Ve>>8,G[K+6]=Ve,Ve=Ve>>8,G[K+5]=Ve,Ve=Ve>>8,G[K+4]=Ve;let pt=Number(V>>BigInt(32)&BigInt(4294967295));return G[K+3]=pt,pt=pt>>8,G[K+2]=pt,pt=pt>>8,G[K+1]=pt,pt=pt>>8,G[K]=pt,K+8}M.prototype.writeBigUInt64LE=Dt(function(V,K=0){return Nt(this,V,K,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeBigUInt64BE=Dt(function(V,K=0){return it(this,V,K,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeIntLE=function(V,K,me,Re){if(V=+V,K=K>>>0,!Re){const ut=Math.pow(2,8*me-1);We(this,V,K,me,ut-1,-ut)}let Ve=0,pt=1,Kt=0;for(this[K]=V&255;++Ve<me&&(pt*=256);)V<0&&Kt===0&&this[K+Ve-1]!==0&&(Kt=1),this[K+Ve]=(V/pt>>0)-Kt&255;return K+me},M.prototype.writeIntBE=function(V,K,me,Re){if(V=+V,K=K>>>0,!Re){const ut=Math.pow(2,8*me-1);We(this,V,K,me,ut-1,-ut)}let Ve=me-1,pt=1,Kt=0;for(this[K+Ve]=V&255;--Ve>=0&&(pt*=256);)V<0&&Kt===0&&this[K+Ve+1]!==0&&(Kt=1),this[K+Ve]=(V/pt>>0)-Kt&255;return K+me},M.prototype.writeInt8=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,1,127,-128),V<0&&(V=255+V+1),this[K]=V&255,K+1},M.prototype.writeInt16LE=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,2,32767,-32768),this[K]=V&255,this[K+1]=V>>>8,K+2},M.prototype.writeInt16BE=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,2,32767,-32768),this[K]=V>>>8,this[K+1]=V&255,K+2},M.prototype.writeInt32LE=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,4,2147483647,-2147483648),this[K]=V&255,this[K+1]=V>>>8,this[K+2]=V>>>16,this[K+3]=V>>>24,K+4},M.prototype.writeInt32BE=function(V,K,me){return V=+V,K=K>>>0,me||We(this,V,K,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[K]=V>>>24,this[K+1]=V>>>16,this[K+2]=V>>>8,this[K+3]=V&255,K+4},M.prototype.writeBigInt64LE=Dt(function(V,K=0){return Nt(this,V,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),M.prototype.writeBigInt64BE=Dt(function(V,K=0){return it(this,V,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function St(G,V,K,me,Re,Ve){if(K+me>G.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Ft(G,V,K,me,Re){return V=+V,K=K>>>0,Re||St(G,V,K,4),C.write(G,V,K,me,23,4),K+4}M.prototype.writeFloatLE=function(V,K,me){return Ft(this,V,K,!0,me)},M.prototype.writeFloatBE=function(V,K,me){return Ft(this,V,K,!1,me)};function Mt(G,V,K,me,Re){return V=+V,K=K>>>0,Re||St(G,V,K,8),C.write(G,V,K,me,52,8),K+8}M.prototype.writeDoubleLE=function(V,K,me){return Mt(this,V,K,!0,me)},M.prototype.writeDoubleBE=function(V,K,me){return Mt(this,V,K,!1,me)},M.prototype.copy=function(V,K,me,Re){if(!M.isBuffer(V))throw new TypeError("argument should be a Buffer");if(me||(me=0),!Re&&Re!==0&&(Re=this.length),K>=V.length&&(K=V.length),K||(K=0),Re>0&&Re<me&&(Re=me),Re===me||V.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),V.length-K<Re-me&&(Re=V.length-K+me);const Ve=Re-me;return this===V&&typeof I.prototype.copyWithin=="function"?this.copyWithin(K,me,Re):I.prototype.set.call(V,this.subarray(me,Re),K),Ve},M.prototype.fill=function(V,K,me,Re){if(typeof V=="string"){if(typeof K=="string"?(Re=K,K=0,me=this.length):typeof me=="string"&&(Re=me,me=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!M.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(V.length===1){const pt=V.charCodeAt(0);(Re==="utf8"&&pt<128||Re==="latin1")&&(V=pt)}}else typeof V=="number"?V=V&255:typeof V=="boolean"&&(V=Number(V));if(K<0||this.length<K||this.length<me)throw new RangeError("Out of range index");if(me<=K)return this;K=K>>>0,me=me===void 0?this.length:me>>>0,V||(V=0);let Ve;if(typeof V=="number")for(Ve=K;Ve<me;++Ve)this[Ve]=V;else{const pt=M.isBuffer(V)?V:M.from(V,Re),Kt=pt.length;if(Kt===0)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(Ve=0;Ve<me-K;++Ve)this[Ve+K]=pt[Ve%Kt]}return this};const Zt={};function be(G,V,K){Zt[G]=class extends K{constructor(){super(),Object.defineProperty(this,"message",{value:V.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(G,V){return`The "${G}" argument must be of type number. Received type ${typeof V}`},TypeError),be("ERR_OUT_OF_RANGE",function(G,V,K){let me=`The value of "${G}" is out of range.`,Re=K;return Number.isInteger(K)&&Math.abs(K)>2**32?Re=D(String(K)):typeof K=="bigint"&&(Re=String(K),(K>BigInt(2)**BigInt(32)||K<-(BigInt(2)**BigInt(32)))&&(Re=D(Re)),Re+="n"),me+=` It must be ${V}. Received ${Re}`,me},RangeError);function D(G){let V="",K=G.length;const me=G[0]==="-"?1:0;for(;K>=me+4;K-=3)V=`_${G.slice(K-3,K)}${V}`;return`${G.slice(0,K)}${V}`}function W(G,V,K){De(V,"offset"),(G[V]===void 0||G[V+K]===void 0)&&ve(V,G.length-(K+1))}function pe(G,V,K,me,Re,Ve){if(G>K||G<V){const pt=typeof V=="bigint"?"n":"";let Kt;throw V===0||V===BigInt(0)?Kt=`>= 0${pt} and < 2${pt} ** ${(Ve+1)*8}${pt}`:Kt=`>= -(2${pt} ** ${(Ve+1)*8-1}${pt}) and < 2 ** ${(Ve+1)*8-1}${pt}`,new Zt.ERR_OUT_OF_RANGE("value",Kt,G)}W(me,Re,Ve)}function De(G,V){if(typeof G!="number")throw new Zt.ERR_INVALID_ARG_TYPE(V,"number",G)}function ve(G,V,K){throw Math.floor(G)!==G?(De(G,K),new Zt.ERR_OUT_OF_RANGE("offset","an integer",G)):V<0?new Zt.ERR_BUFFER_OUT_OF_BOUNDS:new Zt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${V}`,G)}const ke=/[^+/0-9A-Za-z-_]/g;function le(G){if(G=G.split("=")[0],G=G.trim().replace(ke,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function ft(G,V){V=V||1/0;let K;const me=G.length;let Re=null;const Ve=[];for(let pt=0;pt<me;++pt){if(K=G.charCodeAt(pt),K>55295&&K<57344){if(!Re){if(K>56319){(V-=3)>-1&&Ve.push(239,191,189);continue}else if(pt+1===me){(V-=3)>-1&&Ve.push(239,191,189);continue}Re=K;continue}if(K<56320){(V-=3)>-1&&Ve.push(239,191,189),Re=K;continue}K=(Re-55296<<10|K-56320)+65536}else Re&&(V-=3)>-1&&Ve.push(239,191,189);if(Re=null,K<128){if((V-=1)<0)break;Ve.push(K)}else if(K<2048){if((V-=2)<0)break;Ve.push(K>>6|192,K&63|128)}else if(K<65536){if((V-=3)<0)break;Ve.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if((V-=4)<0)break;Ve.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return Ve}function vt(G){const V=[];for(let K=0;K<G.length;++K)V.push(G.charCodeAt(K)&255);return V}function F(G,V){let K,me,Re;const Ve=[];for(let pt=0;pt<G.length&&!((V-=2)<0);++pt)K=G.charCodeAt(pt),me=K>>8,Re=K%256,Ve.push(Re),Ve.push(me);return Ve}function Be(G){return E.toByteArray(le(G))}function nt(G,V,K,me){let Re;for(Re=0;Re<me&&!(Re+K>=V.length||Re>=G.length);++Re)V[Re+K]=G[Re];return Re}function ye(G,V){return G instanceof V||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===V.name}function Me(G){return G!==G}const Ke=function(){const G="0123456789abcdef",V=new Array(256);for(let K=0;K<16;++K){const me=K*16;for(let Re=0;Re<16;++Re)V[me+Re]=G[K]+G[Re]}return V}();function Dt(G){return typeof BigInt>"u"?ge:G}function ge(){throw new Error("BigInt not supported")}})(t);const w=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=w,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(_E)),_E}var SE,QD;function Qr(){if(QD)return SE;QD=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return SE={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},SE}var EE={exports:{}},CE,eM;function Y$(){return eM||(eM=1,CE={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),CE}var TE,tM;function Pi(){if(tM)return TE;tM=1;const{format:e,inspect:t}=Y$(),{AggregateError:n}=Qr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function c(x,w){if(!x)throw new l.ERR_INTERNAL_ASSERTION(w)}function d(x){let w="",S=x.length;const E=x[0]==="-"?1:0;for(;S>=E+4;S-=3)w=`_${x.slice(S-3,S)}${w}`;return`${x.slice(0,S)}${w}`}function h(x,w,S){if(typeof w=="function")return c(w.length<=S.length,`Code: ${x}; The provided arguments length (${S.length}) does not match the required ones (${w.length}).`),w(...S);const E=(w.match(/%[dfijoOs]/g)||[]).length;return c(E===S.length,`Code: ${x}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?w:e(w,...S)}function p(x,w,S){S||(S=Error);class E extends S{constructor(...k){super(h(x,w,k))}toString(){return`${this.name} [${x}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${x}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=x,E.prototype[a]=!0,l[x]=E}function g(x){const w=o+x.name;return Object.defineProperty(x,"name",{value:w}),x}function v(x,w){if(x&&w&&x!==w){if(Array.isArray(w.errors))return w.errors.push(x),w;const S=new r([w,x],w.message);return S.code=w.code,S}return x||w}class b extends Error{constructor(w="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",S);super(w,S),this.code="ABORT_ERR",this.name="AbortError"}}return p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(x,w,S)=>{c(typeof x=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let E="The ";x.endsWith(" argument")?E+=`${x} `:E+=`"${x}" ${x.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],j=[];for(const N of w)c(typeof N=="string","All expected entries have to be of type string"),i.includes(N)?C.push(N.toLowerCase()):s.test(N)?k.push(N):(c(N!=="object",'The value "object" should be written as "Object"'),j.push(N));if(k.length>0){const N=C.indexOf("object");N!==-1&&(C.splice(C,N,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const N=C.pop();E+=`one of type ${C.join(", ")}, or ${N}`}}(k.length>0||j.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const N=k.pop();E+=`an instance of ${k.join(", ")}, or ${N}`}}j.length>0&&(E+=" or ")}switch(j.length){case 0:break;case 1:j[0].toLowerCase()!==j[0]&&(E+="an "),E+=`${j[0]}`;break;case 2:E+=`one of ${j[0]} or ${j[1]}`;break;default:{const N=j.pop();E+=`one of ${j.join(", ")}, or ${N}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var I;if((I=S.constructor)!==null&&I!==void 0&&I.name)E+=`. Received an instance of ${S.constructor.name}`;else{const N=t(S,{depth:-1});E+=`. Received ${N}`}}else{let N=t(S,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),E+=`. Received type ${typeof S} (${N})`}return E},TypeError),p("ERR_INVALID_ARG_VALUE",(x,w,S="is invalid")=>{let E=t(w);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${x.includes(".")?"property":"argument"} '${x}' ${S}. Received ${E}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(x,w,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${x} to be returned from the "${w}" function but got ${C}.`},TypeError),p("ERR_MISSING_ARGS",(...x)=>{c(x.length>0,"At least one arg needs to be specified");let w;const S=x.length;switch(x=(Array.isArray(x)?x:[x]).map(E=>`"${E}"`).join(" or "),S){case 1:w+=`The ${x[0]} argument`;break;case 2:w+=`The ${x[0]} and ${x[1]} arguments`;break;default:{const E=x.pop();w+=`The ${x.join(", ")}, and ${E} arguments`}break}return`${w} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(x,w,S)=>{c(w,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=d(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=d(E)),E+="n"}else E=t(S);return`The value of "${x}" is out of range. It must be ${w}. Received ${E}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),TE={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:l},TE}var kg={exports:{}},nM;function R0(){if(nM)return kg.exports;nM=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return kg.exports=e,kg.exports.AbortSignal=t,kg.exports.default=e,kg.exports}var cw={exports:{}},rM;function Y1(){if(rM)return cw.exports;rM=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,j,I){return Function.prototype.apply.call(k,j,I)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}cw.exports=i,cw.exports.once=w,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");s=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var j=[],I=1;I<arguments.length;I++)j.push(arguments[I]);var N=k==="error",P=this._events;if(P!==void 0)N=N&&P.error===void 0;else if(!N)return!1;if(N){var L;if(j.length>0&&(L=j[0]),L instanceof Error)throw L;var H=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw H.context=L,H}var M=P[k];if(M===void 0)return!1;if(typeof M=="function")t(M,this,j);else for(var Z=M.length,q=v(M,Z),I=0;I<Z;++I)t(q[I],this,j);return!0};function c(C,k,j,I){var N,P,L;if(o(j),P=C._events,P===void 0?(P=C._events=Object.create(null),C._eventsCount=0):(P.newListener!==void 0&&(C.emit("newListener",k,j.listener?j.listener:j),P=C._events),L=P[k]),L===void 0)L=P[k]=j,++C._eventsCount;else if(typeof L=="function"?L=P[k]=I?[j,L]:[L,j]:I?L.unshift(j):L.push(j),N=l(C),N>0&&L.length>N&&!L.warned){L.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=C,H.type=k,H.count=L.length,r(H)}return C}i.prototype.addListener=function(k,j){return c(this,k,j,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,j){return c(this,k,j,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,j){var I={fired:!1,wrapFn:void 0,target:C,type:k,listener:j},N=d.bind(I);return N.listener=j,I.wrapFn=N,N}i.prototype.once=function(k,j){return o(j),this.on(k,h(this,k,j)),this},i.prototype.prependOnceListener=function(k,j){return o(j),this.prependListener(k,h(this,k,j)),this},i.prototype.removeListener=function(k,j){var I,N,P,L,H;if(o(j),N=this._events,N===void 0)return this;if(I=N[k],I===void 0)return this;if(I===j||I.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete N[k],N.removeListener&&this.emit("removeListener",k,I.listener||j));else if(typeof I!="function"){for(P=-1,L=I.length-1;L>=0;L--)if(I[L]===j||I[L].listener===j){H=I[L].listener,P=L;break}if(P<0)return this;P===0?I.shift():b(I,P),I.length===1&&(N[k]=I[0]),N.removeListener!==void 0&&this.emit("removeListener",k,H||j)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var j,I,N;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[k]),this;if(arguments.length===0){var P=Object.keys(I),L;for(N=0;N<P.length;++N)L=P[N],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=I[k],typeof j=="function")this.removeListener(k,j);else if(j!==void 0)for(N=j.length-1;N>=0;N--)this.removeListener(k,j[N]);return this};function p(C,k,j){var I=C._events;if(I===void 0)return[];var N=I[k];return N===void 0?[]:typeof N=="function"?j?[N.listener||N]:[N]:j?x(N):v(N,N.length)}i.prototype.listeners=function(k){return p(this,k,!0)},i.prototype.rawListeners=function(k){return p(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):g.call(C,k)},i.prototype.listenerCount=g;function g(C){var k=this._events;if(k!==void 0){var j=k[C];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,k){for(var j=new Array(k),I=0;I<k;++I)j[I]=C[I];return j}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function x(C){for(var k=new Array(C.length),j=0;j<k.length;++j)k[j]=C[j].listener||C[j];return k}function w(C,k){return new Promise(function(j,I){function N(L){C.removeListener(k,P),I(L)}function P(){typeof C.removeListener=="function"&&C.removeListener("error",N),j([].slice.call(arguments))}E(C,k,P,{once:!0}),k!=="error"&&S(C,N,{once:!0})})}function S(C,k,j){typeof C.on=="function"&&E(C,"error",k,j)}function E(C,k,j,I){if(typeof C.on=="function")I.once?C.once(k,j):C.on(k,j);else if(typeof C.addEventListener=="function")C.addEventListener(k,function N(P){I.once&&C.removeEventListener(k,N),j(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return cw.exports}var aM;function Yi(){return aM||(aM=1,function(e){const t=id(),{format:n,inspect:r}=Y$(),{codes:{ERR_INVALID_ARG_TYPE:a}}=Pi(),{kResistStopPropagation:i,AggregateError:s,SymbolDispose:o}=Qr(),l=globalThis.AbortSignal||R0().AbortSignal,c=globalThis.AbortController||R0().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,p=typeof h<"u"?function(x){return x instanceof h}:function(x){return!1},g=(b,x)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(x,"AbortSignal",b)},v=(b,x)=>{if(typeof b!="function")throw new a(x,"Function",b)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(b){let x=!1;return function(...w){x||(x=!0,b.apply(this,w))}},createDeferredPromise:function(){let b,x;return{promise:new Promise((S,E)=>{b=S,x=E}),resolve:b,reject:x}},promisify(b){return new Promise((x,w)=>{b((S,...E)=>S?w(S):x(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:p,deprecate(b,x){return b},addAbortListener:Y1().addAbortListener||function(x,w){if(x===void 0)throw new a("signal","AbortSignal",x);g(x,"signal"),v(w,"listener");let S;return x.aborted?queueMicrotask(()=>w()):(x.addEventListener("abort",w,{__proto__:null,once:!0,[i]:!0}),S=()=>{x.removeEventListener("abort",w)}),{__proto__:null,[o](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(x){if(x.length===1)return x[0];const w=new c,S=()=>w.abort();return x.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),w.signal.addEventListener("abort",()=>{x.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),w.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(EE)),EE.exports}var uw={},kE,iM;function jy(){if(iM)return kE;iM=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=Qr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=Pi(),{normalizeEncoding:C}=Yi(),{isAsyncFunction:k,isArrayBufferView:j}=Yi().types,I={};function N(te){return te===(te|0)}function P(te){return te===te>>>0}const L=/^[0-7]+$/,H="must be a 32-bit unsigned integer or an octal string";function M(te,xe,Fe){if(typeof te>"u"&&(te=Fe),typeof te=="string"){if(d(L,te)===null)throw new w(xe,te,H);te=l(te,8)}return ue(te,xe),te}const Z=v((te,xe,Fe=o,Ce=s)=>{if(typeof te!="number")throw new x(xe,"number",te);if(!a(te))throw new S(xe,"an integer",te);if(te<Fe||te>Ce)throw new S(xe,`>= ${Fe} && <= ${Ce}`,te)}),q=v((te,xe,Fe=-2147483648,Ce=2147483647)=>{if(typeof te!="number")throw new x(xe,"number",te);if(!a(te))throw new S(xe,"an integer",te);if(te<Fe||te>Ce)throw new S(xe,`>= ${Fe} && <= ${Ce}`,te)}),ue=v((te,xe,Fe=!1)=>{if(typeof te!="number")throw new x(xe,"number",te);if(!a(te))throw new S(xe,"an integer",te);const Ce=Fe?1:0,We=4294967295;if(te<Ce||te>We)throw new S(xe,`>= ${Ce} && <= ${We}`,te)});function ae(te,xe){if(typeof te!="string")throw new x(xe,"string",te)}function ee(te,xe,Fe=void 0,Ce){if(typeof te!="number")throw new x(xe,"number",te);if(Fe!=null&&te<Fe||Ce!=null&&te>Ce||(Fe!=null||Ce!=null)&&i(te))throw new S(xe,`${Fe!=null?`>= ${Fe}`:""}${Fe!=null&&Ce!=null?" && ":""}${Ce!=null?`<= ${Ce}`:""}`,te)}const X=v((te,xe,Fe)=>{if(!t(Fe,te)){const We="must be one of: "+n(r(Fe,Nt=>typeof Nt=="string"?`'${Nt}'`:h(Nt)),", ");throw new w(xe,te,We)}});function ie(te,xe){if(typeof te!="boolean")throw new x(xe,"boolean",te)}function B(te,xe,Fe){return te==null||!c(te,xe)?Fe:te[xe]}const J=v((te,xe,Fe=null)=>{const Ce=B(Fe,"allowArray",!1),We=B(Fe,"allowFunction",!1);if(!B(Fe,"nullable",!1)&&te===null||!Ce&&e(te)||typeof te!="object"&&(!We||typeof te!="function"))throw new x(xe,"Object",te)}),Q=v((te,xe)=>{if(te!=null&&typeof te!="object"&&typeof te!="function")throw new x(xe,"a dictionary",te)}),ne=v((te,xe,Fe=0)=>{if(!e(te))throw new x(xe,"Array",te);if(te.length<Fe){const Ce=`must be longer than ${Fe}`;throw new w(xe,te,Ce)}});function he(te,xe){ne(te,xe);for(let Fe=0;Fe<te.length;Fe++)ae(te[Fe],`${xe}[${Fe}]`)}function de(te,xe){ne(te,xe);for(let Fe=0;Fe<te.length;Fe++)ie(te[Fe],`${xe}[${Fe}]`)}function Ie(te,xe){ne(te,xe);for(let Fe=0;Fe<te.length;Fe++){const Ce=te[Fe],We=`${xe}[${Fe}]`;if(Ce==null)throw new x(We,"AbortSignal",Ce);Qe(Ce,We)}}function Te(te,xe="signal"){if(ae(te,xe),I[te]===void 0)throw I[p(te)]!==void 0?new E(te+" (signals must use all capital letters)"):new E(te)}const Ae=v((te,xe="buffer")=>{if(!j(te))throw new x(xe,["Buffer","TypedArray","DataView"],te)});function Ee(te,xe){const Fe=C(xe),Ce=te.length;if(Fe==="hex"&&Ce%2!==0)throw new w("encoding",xe,`is invalid for data of length ${Ce}`)}function Pe(te,xe="Port",Fe=!0){if(typeof te!="number"&&typeof te!="string"||typeof te=="string"&&g(te).length===0||+te!==+te>>>0||te>65535||te===0&&!Fe)throw new b(xe,te,Fe);return te|0}const Qe=v((te,xe)=>{if(te!==void 0&&(te===null||typeof te!="object"||!("aborted"in te)))throw new x(xe,"AbortSignal",te)}),Le=v((te,xe)=>{if(typeof te!="function")throw new x(xe,"Function",te)}),je=v((te,xe)=>{if(typeof te!="function"||k(te))throw new x(xe,"Function",te)}),z=v((te,xe)=>{if(te!==void 0)throw new x(xe,"undefined",te)});function Se(te,xe,Fe){if(!t(Fe,te))throw new x(xe,`('${n(Fe,"|")}')`,te)}const Ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function fe(te,xe){if(typeof te>"u"||!d(Ne,te))throw new w(xe,te,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function se(te){if(typeof te=="string")return fe(te,"hints"),te;if(e(te)){const xe=te.length;let Fe="";if(xe===0)return Fe;for(let Ce=0;Ce<xe;Ce++){const We=te[Ce];fe(We,"hints"),Fe+=We,Ce!==xe-1&&(Fe+=", ")}return Fe}throw new w("hints",te,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return kE={isInt32:N,isUint32:P,parseFileMode:M,validateArray:ne,validateStringArray:he,validateBooleanArray:de,validateAbortSignalArray:Ie,validateBoolean:ie,validateBuffer:Ae,validateDictionary:Q,validateEncoding:Ee,validateFunction:Le,validateInt32:q,validateInteger:Z,validateNumber:ee,validateObject:J,validateOneOf:X,validatePlainFunction:je,validatePort:Pe,validateSignalName:Te,validateString:ae,validateUint32:ue,validateUndefined:z,validateUnion:Se,validateAbortSignal:Qe,validateLinkHeaderValue:se},kE}var dw={exports:{}},AE={},sM;function $f(){return sM||(sM=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=s}catch{a=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function l(C){if(a===setTimeout)return setTimeout(C,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(i===clearTimeout)return clearTimeout(C);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var d=[],h=!1,p,g=-1;function v(){!h||!p||(h=!1,p.length?d=p.concat(d):g=-1,d.length&&b())}function b(){if(!h){var C=l(v);h=!0;for(var k=d.length;k;){for(p=d,d=[];++g<k;)p&&p[g].run();g=-1,k=d.length}p=null,h=!1,c(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)k[j-1]=arguments[j];d.push(new x(C,k)),d.length===1&&!h&&l(b)};function x(C,k){this.fun=C,this.array=k}x.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function w(){}r.on=w,r.addListener=w,r.once=w,r.off=w,r.removeListener=w,r.removeAllListeners=w,r.emit=w,r.prependListener=w,r.prependOnceListener=w,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(AE)),AE}var NE,oM;function Ic(){if(oM)return NE;oM=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Qr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function d(B,J=!1){var Q;return!!(B&&typeof B.pipe=="function"&&typeof B.on=="function"&&(!J||typeof B.pause=="function"&&typeof B.resume=="function")&&(!B._writableState||((Q=B._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!B._writableState||B._readableState))}function h(B){var J;return!!(B&&typeof B.write=="function"&&typeof B.on=="function"&&(!B._readableState||((J=B._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function p(B){return!!(B&&typeof B.pipe=="function"&&B._readableState&&typeof B.on=="function"&&typeof B.write=="function")}function g(B){return B&&(B._readableState||B._writableState||typeof B.write=="function"&&typeof B.on=="function"||typeof B.pipe=="function"&&typeof B.on=="function")}function v(B){return!!(B&&!g(B)&&typeof B.pipeThrough=="function"&&typeof B.getReader=="function"&&typeof B.cancel=="function")}function b(B){return!!(B&&!g(B)&&typeof B.getWriter=="function"&&typeof B.abort=="function")}function x(B){return!!(B&&!g(B)&&typeof B.readable=="object"&&typeof B.writable=="object")}function w(B){return v(B)||b(B)||x(B)}function S(B,J){return B==null?!1:J===!0?typeof B[e]=="function":J===!1?typeof B[t]=="function":typeof B[e]=="function"||typeof B[t]=="function"}function E(B){if(!g(B))return null;const J=B._writableState,Q=B._readableState,ne=J||Q;return!!(B.destroyed||B[r]||ne!=null&&ne.destroyed)}function C(B){if(!h(B))return null;if(B.writableEnded===!0)return!0;const J=B._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function k(B,J){if(!h(B))return null;if(B.writableFinished===!0)return!0;const Q=B._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||J===!1&&Q.ended===!0&&Q.length===0)}function j(B){if(!d(B))return null;if(B.readableEnded===!0)return!0;const J=B._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function I(B,J){if(!d(B))return null;const Q=B._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||J===!1&&Q.ended===!0&&Q.length===0)}function N(B){return B&&B[i]!=null?B[i]:typeof(B==null?void 0:B.readable)!="boolean"?null:E(B)?!1:d(B)&&B.readable&&!I(B)}function P(B){return B&&B[s]!=null?B[s]:typeof(B==null?void 0:B.writable)!="boolean"?null:E(B)?!1:h(B)&&B.writable&&!C(B)}function L(B,J){return g(B)?E(B)?!0:!((J==null?void 0:J.readable)!==!1&&N(B)||(J==null?void 0:J.writable)!==!1&&P(B)):null}function H(B){var J,Q;return g(B)?B.writableErrored?B.writableErrored:(J=(Q=B._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function M(B){var J,Q;return g(B)?B.readableErrored?B.readableErrored:(J=(Q=B._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function Z(B){if(!g(B))return null;if(typeof B.closed=="boolean")return B.closed;const J=B._writableState,Q=B._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(J==null?void 0:J.closed)||(Q==null?void 0:Q.closed):typeof B._closed=="boolean"&&q(B)?B._closed:null}function q(B){return typeof B._closed=="boolean"&&typeof B._defaultKeepAlive=="boolean"&&typeof B._removedConnection=="boolean"&&typeof B._removedContLen=="boolean"}function ue(B){return typeof B._sent100=="boolean"&&q(B)}function ae(B){var J;return typeof B._consuming=="boolean"&&typeof B._dumped=="boolean"&&((J=B.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function ee(B){if(!g(B))return null;const J=B._writableState,Q=B._readableState,ne=J||Q;return!ne&&ue(B)||!!(ne&&ne.autoDestroy&&ne.emitClose&&ne.closed===!1)}function X(B){var J;return!!(B&&((J=B[o])!==null&&J!==void 0?J:B.readableDidRead||B.readableAborted))}function ie(B){var J,Q,ne,he,de,Ie,Te,Ae,Ee,Pe;return!!(B&&((J=(Q=(ne=(he=(de=(Ie=B[a])!==null&&Ie!==void 0?Ie:B.readableErrored)!==null&&de!==void 0?de:B.writableErrored)!==null&&he!==void 0?he:(Te=B._readableState)===null||Te===void 0?void 0:Te.errorEmitted)!==null&&ne!==void 0?ne:(Ae=B._writableState)===null||Ae===void 0?void 0:Ae.errorEmitted)!==null&&Q!==void 0?Q:(Ee=B._readableState)===null||Ee===void 0?void 0:Ee.errored)!==null&&J!==void 0?J:!((Pe=B._writableState)===null||Pe===void 0)&&Pe.errored))}return NE={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:o,isErrored:ie,kIsErrored:a,isReadable:N,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:c,kIsWritable:s,isClosed:Z,isDuplexNodeStream:p,isFinished:L,isIterable:S,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:j,isReadableFinished:I,isReadableErrored:M,isNodeStream:g,isWebStream:w,isWritable:P,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:H,isServerRequest:ae,isServerResponse:ue,willEmitClose:ee,isTransformStream:x},NE}var lM;function sd(){if(lM)return dw.exports;lM=1;const e=$f(),{AbortError:t,codes:n}=Pi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:s}=Yi(),{validateAbortSignal:o,validateFunction:l,validateObject:c,validateBoolean:d}=jy(),{Promise:h,PromisePrototypeThen:p,SymbolDispose:g}=Qr(),{isClosed:v,isReadable:b,isReadableNodeStream:x,isReadableStream:w,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:j,isWritableFinished:I,isWritableErrored:N,isNodeStream:P,willEmitClose:L,kIsClosedPromise:H}=Ic();let M;function Z(X){return X.setHeader&&typeof X.abort=="function"}const q=()=>{};function ue(X,ie,B){var J,Q;if(arguments.length===2?(B=ie,ie=i):ie==null?ie=i:c(ie,"options"),l(B,"callback"),o(ie.signal,"options.signal"),B=s(B),w(X)||j(X))return ae(X,ie,B);if(!P(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const ne=(J=ie.readable)!==null&&J!==void 0?J:x(X),he=(Q=ie.writable)!==null&&Q!==void 0?Q:k(X),de=X._writableState,Ie=X._readableState,Te=()=>{X.writable||Pe()};let Ae=L(X)&&x(X)===ne&&k(X)===he,Ee=I(X,!1);const Pe=()=>{Ee=!0,X.destroyed&&(Ae=!1),!(Ae&&(!X.readable||ne))&&(!ne||Qe)&&B.call(X)};let Qe=S(X,!1);const Le=()=>{Qe=!0,X.destroyed&&(Ae=!1),!(Ae&&(!X.writable||he))&&(!he||Ee)&&B.call(X)},je=te=>{B.call(X,te)};let z=v(X);const Se=()=>{z=!0;const te=N(X)||E(X);if(te&&typeof te!="boolean")return B.call(X,te);if(ne&&!Qe&&x(X,!0)&&!S(X,!1))return B.call(X,new a);if(he&&!Ee&&!I(X,!1))return B.call(X,new a);B.call(X)},Ne=()=>{z=!0;const te=N(X)||E(X);if(te&&typeof te!="boolean")return B.call(X,te);B.call(X)},fe=()=>{X.req.on("finish",Pe)};Z(X)?(X.on("complete",Pe),Ae||X.on("abort",Se),X.req?fe():X.on("request",fe)):he&&!de&&(X.on("end",Te),X.on("close",Te)),!Ae&&typeof X.aborted=="boolean"&&X.on("aborted",Se),X.on("end",Le),X.on("finish",Pe),ie.error!==!1&&X.on("error",je),X.on("close",Se),z?e.nextTick(Se):de!=null&&de.errorEmitted||Ie!=null&&Ie.errorEmitted?Ae||e.nextTick(Ne):(!ne&&(!Ae||b(X))&&(Ee||C(X)===!1)||!he&&(!Ae||C(X))&&(Qe||b(X)===!1)||Ie&&X.req&&X.aborted)&&e.nextTick(Ne);const se=()=>{B=q,X.removeListener("aborted",Se),X.removeListener("complete",Pe),X.removeListener("abort",Se),X.removeListener("request",fe),X.req&&X.req.removeListener("finish",Pe),X.removeListener("end",Te),X.removeListener("close",Te),X.removeListener("finish",Pe),X.removeListener("end",Le),X.removeListener("error",je),X.removeListener("close",Se)};if(ie.signal&&!z){const te=()=>{const xe=B;se(),xe.call(X,new t(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)e.nextTick(te);else{M=M||Yi().addAbortListener;const xe=M(ie.signal,te),Fe=B;B=s((...Ce)=>{xe[g](),Fe.apply(X,Ce)})}}return se}function ae(X,ie,B){let J=!1,Q=q;if(ie.signal)if(Q=()=>{J=!0,B.call(X,new t(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)e.nextTick(Q);else{M=M||Yi().addAbortListener;const he=M(ie.signal,Q),de=B;B=s((...Ie)=>{he[g](),de.apply(X,Ie)})}const ne=(...he)=>{J||e.nextTick(()=>B.apply(X,he))};return p(X[H].promise,ne,ne),q}function ee(X,ie){var B;let J=!1;return ie===null&&(ie=i),(B=ie)!==null&&B!==void 0&&B.cleanup&&(d(ie.cleanup,"cleanup"),J=ie.cleanup),new h((Q,ne)=>{const he=ue(X,ie,de=>{J&&he(),de?ne(de):Q()})})}return dw.exports=ue,dw.exports.finished=ee,dw.exports}var RE,cM;function Wp(){if(cM)return RE;cM=1;const e=$f(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=Pi(),{Symbol:a}=Qr(),{kIsDestroyed:i,isDestroyed:s,isFinished:o,isServerRequest:l}=Ic(),c=a("kDestroy"),d=a("kConstruct");function h(L,H,M){L&&(L.stack,H&&!H.errored&&(H.errored=L),M&&!M.errored&&(M.errored=L))}function p(L,H){const M=this._readableState,Z=this._writableState,q=Z||M;return Z!=null&&Z.destroyed||M!=null&&M.destroyed?(typeof H=="function"&&H(),this):(h(L,Z,M),Z&&(Z.destroyed=!0),M&&(M.destroyed=!0),q.constructed?g(this,L,H):this.once(c,function(ue){g(this,t(ue,L),H)}),this)}function g(L,H,M){let Z=!1;function q(ue){if(Z)return;Z=!0;const ae=L._readableState,ee=L._writableState;h(ue,ee,ae),ee&&(ee.closed=!0),ae&&(ae.closed=!0),typeof M=="function"&&M(ue),ue?e.nextTick(v,L,ue):e.nextTick(b,L)}try{L._destroy(H||null,q)}catch(ue){q(ue)}}function v(L,H){x(L,H),b(L)}function b(L){const H=L._readableState,M=L._writableState;M&&(M.closeEmitted=!0),H&&(H.closeEmitted=!0),(M!=null&&M.emitClose||H!=null&&H.emitClose)&&L.emit("close")}function x(L,H){const M=L._readableState,Z=L._writableState;Z!=null&&Z.errorEmitted||M!=null&&M.errorEmitted||(Z&&(Z.errorEmitted=!0),M&&(M.errorEmitted=!0),L.emit("error",H))}function w(){const L=this._readableState,H=this._writableState;L&&(L.constructed=!0,L.closed=!1,L.closeEmitted=!1,L.destroyed=!1,L.errored=null,L.errorEmitted=!1,L.reading=!1,L.ended=L.readable===!1,L.endEmitted=L.readable===!1),H&&(H.constructed=!0,H.destroyed=!1,H.closed=!1,H.closeEmitted=!1,H.errored=null,H.errorEmitted=!1,H.finalCalled=!1,H.prefinished=!1,H.ended=H.writable===!1,H.ending=H.writable===!1,H.finished=H.writable===!1)}function S(L,H,M){const Z=L._readableState,q=L._writableState;if(q!=null&&q.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||q!=null&&q.autoDestroy?L.destroy(H):H&&(H.stack,q&&!q.errored&&(q.errored=H),Z&&!Z.errored&&(Z.errored=H),M?e.nextTick(x,L,H):x(L,H))}function E(L,H){if(typeof L._construct!="function")return;const M=L._readableState,Z=L._writableState;M&&(M.constructed=!1),Z&&(Z.constructed=!1),L.once(d,H),!(L.listenerCount(d)>1)&&e.nextTick(C,L)}function C(L){let H=!1;function M(Z){if(H){S(L,Z??new n);return}H=!0;const q=L._readableState,ue=L._writableState,ae=ue||q;q&&(q.constructed=!0),ue&&(ue.constructed=!0),ae.destroyed?L.emit(c,Z):Z?S(L,Z,!0):e.nextTick(k,L)}try{L._construct(Z=>{e.nextTick(M,Z)})}catch(Z){e.nextTick(M,Z)}}function k(L){L.emit(d)}function j(L){return(L==null?void 0:L.setHeader)&&typeof L.abort=="function"}function I(L){L.emit("close")}function N(L,H){L.emit("error",H),e.nextTick(I,L)}function P(L,H){!L||s(L)||(!H&&!o(L)&&(H=new r),l(L)?(L.socket=null,L.destroy(H)):j(L)?L.abort():j(L.req)?L.req.abort():typeof L.destroy=="function"?L.destroy(H):typeof L.close=="function"?L.close():H?e.nextTick(N,L,H):e.nextTick(I,L),L.destroyed||(L[i]=!0))}return RE={construct:E,destroyer:P,destroy:p,undestroy:w,errorOrDestroy:S},RE}var IE,uM;function xN(){if(uM)return IE;uM=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Qr(),{EventEmitter:n}=Y1();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,s){const o=this;function l(b){i.writable&&i.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function c(){o.readable&&o.resume&&o.resume()}i.on("drain",c),!i._isStdio&&(!s||s.end!==!1)&&(o.on("end",h),o.on("close",p));let d=!1;function h(){d||(d=!0,i.end())}function p(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(o,"error",g),a(i,"error",g);function v(){o.removeListener("data",l),i.removeListener("drain",c),o.removeListener("end",h),o.removeListener("close",p),o.removeListener("error",g),i.removeListener("error",g),o.removeListener("end",v),o.removeListener("close",v),i.removeListener("close",v)}return o.on("end",v),o.on("close",v),i.on("close",v),i.emit("pipe",o),i};function a(i,s,o){if(typeof i.prependListener=="function")return i.prependListener(s,o);!i._events||!i._events[s]?i.on(s,o):e(i._events[s])?i._events[s].unshift(o):i._events[s]=[o,i._events[s]]}return IE={Stream:r,prependListener:a},IE}var jE={exports:{}},dM;function X1(){return dM||(dM=1,function(e){const{SymbolDispose:t}=Qr(),{AbortError:n,codes:r}=Pi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:s}=Ic(),o=sd(),{ERR_INVALID_ARG_TYPE:l}=r;let c;const d=(h,p)=>{if(typeof h!="object"||!("aborted"in h))throw new l(p,"AbortSignal",h)};e.exports.addAbortSignal=function(p,g){if(d(p,"signal"),!a(g)&&!i(g))throw new l("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(h,p){if(typeof h!="object"||!("aborted"in h))return p;const g=a(p)?()=>{p.destroy(new n(void 0,{cause:h.reason}))}:()=>{p[s](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||Yi().addAbortListener;const v=c(h,g);o(p,v[t])}return p}}(jE)),jE.exports}var DE,fM;function Aoe(){if(fM)return DE;fM=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Qr(),{Buffer:a}=id(),{inspect:i}=Yi();return DE=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,c=""+l.data;for(;(l=l.next)!==null;)c+=o+l.data;return c}concat(o){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(o>>>0);let c=this.head,d=0;for(;c;)n(l,c.data,d),d+=c.data.length,c=c.next;return l}consume(o,l){const c=this.head.data;if(o<c.length){const d=c.slice(0,o);return this.head.data=c.slice(o),d}return o===c.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",c=this.head,d=0;do{const h=c.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,c.next?this.head=c.next:this.head=this.tail=null):(l+=e(h,0,o),this.head=c,c.data=e(h,o));break}++d}while((c=c.next)!==null);return this.length-=d,l}_getBuffer(o){const l=a.allocUnsafe(o),c=o;let d=this.head,h=0;do{const p=d.data;if(o>p.length)n(l,p,c-o),o-=p.length;else{o===p.length?(n(l,p,c-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(p.buffer,p.byteOffset,o),c-o),this.head=d,d.data=p.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return i(this,{...l,depth:0,customInspect:!1})}},DE}var ME,hM;function J1(){if(hM)return ME;hM=1;const{MathFloor:e,NumberIsInteger:t}=Qr(),{validateInteger:n}=jy(),{ERR_INVALID_ARG_VALUE:r}=Pi().codes;let a=16*1024,i=16;function s(d,h,p){return d.highWaterMark!=null?d.highWaterMark:h?d[p]:null}function o(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function c(d,h,p,g){const v=s(h,g,p);if(v!=null){if(!t(v)||v<0){const b=g?`options.${p}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return o(d.objectMode)}return ME={getHighWaterMark:c,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},ME}var OE={},fw={exports:{}},pM;function _N(){return pM||(pM=1,function(e,t){var n=id(),r=n.Buffer;function a(s,o){for(var l in s)o[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(s,o,l){return r(s,o,l)}a(r,i),i.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,o,l)},i.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=r(s);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(fw,fw.exports)),fw.exports}var mM;function Noe(){if(mM)return OE;mM=1;var e=_N().Buffer,t=e.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(w){if(!w)return"utf8";for(var S;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(S)return;w=(""+w).toLowerCase(),S=!0}}function r(w){var S=n(w);if(typeof S!="string"&&(e.isEncoding===t||!t(w)))throw new Error("Unknown encoding: "+w);return S||w}OE.StringDecoder=a;function a(w){this.encoding=r(w);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=p,S=4;break;case"utf8":this.fillLast=l,S=4;break;case"base64":this.text=g,this.end=v,S=3;break;default:this.write=b,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(w){if(w.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(w),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<w.length?S?S+this.text(w,E):this.text(w,E):S||""},a.prototype.end=d,a.prototype.text=c,a.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function i(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function s(w,S,E){var C=S.length-1;if(C<E)return 0;var k=i(S[C]);return k>=0?(k>0&&(w.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(w.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(k===2?k=0:w.lastNeed=k-3),k):0))}function o(w,S,E){if((S[0]&192)!==128)return w.lastNeed=0,"";if(w.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return w.lastNeed=1,"";if(w.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return w.lastNeed=2,""}}function l(w){var S=this.lastTotal-this.lastNeed,E=o(this,w);if(E!==void 0)return E;if(this.lastNeed<=w.length)return w.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,S,0,w.length),this.lastNeed-=w.length}function c(w,S){var E=s(this,w,S);if(!this.lastNeed)return w.toString("utf8",S);this.lastTotal=E;var C=w.length-(E-this.lastNeed);return w.copy(this.lastChar,0,C),w.toString("utf8",S,C)}function d(w){var S=w&&w.length?this.write(w):"";return this.lastNeed?S+"":S}function h(w,S){if((w.length-S)%2===0){var E=w.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",S,w.length-1)}function p(w){var S=w&&w.length?this.write(w):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(w,S){var E=(w.length-S)%3;return E===0?w.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",S,w.length-E))}function v(w){var S=w&&w.length?this.write(w):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(w){return w.toString(this.encoding)}function x(w){return w&&w.length?this.write(w):""}return OE}var PE,gM;function X$(){if(gM)return PE;gM=1;const e=$f(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Qr(),{Buffer:a}=id(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:s}=Pi().codes;function o(l,c,d){let h;if(typeof c=="string"||c instanceof a)return new l({objectMode:!0,...d,read(){this.push(c),this.push(null)}});let p;if(c&&c[n])p=!0,h=c[n]();else if(c&&c[r])p=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;g._read=function(){v||(v=!0,x())},g._destroy=function(w,S){t(b(w),()=>e.nextTick(S,w),E=>e.nextTick(S,E||w))};async function b(w){const S=w!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:k}=await h.throw(w);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function x(){for(;;){try{const{value:w,done:S}=p?await h.next():h.next();if(S)g.push(null);else{const E=w&&typeof w.then=="function"?await w:w;if(E===null)throw v=!1,new s;if(g.push(E))continue;v=!1}}catch(w){g.destroy(w)}break}}return g}return PE=o,PE}var FE,yM;function Q1(){if(yM)return FE;yM=1;const e=$f(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:l,SafeSet:c,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:p}=Qr();FE=Ce,Ce.ReadableState=Fe;const{EventEmitter:g}=Y1(),{Stream:v,prependListener:b}=xN(),{Buffer:x}=id(),{addAbortSignal:w}=X1(),S=sd();let E=Yi().debuglog("stream",ge=>{E=ge});const C=Aoe(),k=Wp(),{getHighWaterMark:j,getDefaultHighWaterMark:I}=J1(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:P,ERR_METHOD_NOT_IMPLEMENTED:L,ERR_OUT_OF_RANGE:H,ERR_STREAM_PUSH_AFTER_EOF:M,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:q}=Pi(),{validateObject:ue}=jy(),ae=p("kPaused"),{StringDecoder:ee}=Noe(),X=X$();o(Ce.prototype,v.prototype),o(Ce,v);const ie=()=>{},{errorOrDestroy:B}=k,J=1,Q=2,ne=4,he=8,de=16,Ie=32,Te=64,Ae=128,Ee=256,Pe=512,Qe=1024,Le=2048,je=4096,z=8192,Se=16384,Ne=32768,fe=65536,se=1<<17,te=1<<18;function xe(ge){return{enumerable:!1,get(){return(this.state&ge)!==0},set(G){G?this.state|=ge:this.state&=~ge}}}i(Fe.prototype,{objectMode:xe(J),ended:xe(Q),endEmitted:xe(ne),reading:xe(he),constructed:xe(de),sync:xe(Ie),needReadable:xe(Te),emittedReadable:xe(Ae),readableListening:xe(Ee),resumeScheduled:xe(Pe),errorEmitted:xe(Qe),emitClose:xe(Le),autoDestroy:xe(je),destroyed:xe(z),closed:xe(Se),closeEmitted:xe(Ne),multiAwaitDrain:xe(fe),readingMore:xe(se),dataEmitted:xe(te)});function Fe(ge,G,V){typeof V!="boolean"&&(V=G instanceof wc()),this.state=Le|je|de|Ie,ge&&ge.objectMode&&(this.state|=J),V&&ge&&ge.readableObjectMode&&(this.state|=J),this.highWaterMark=ge?j(this,ge,"readableHighWaterMark",V):I(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,ge&&ge.emitClose===!1&&(this.state&=-2049),ge&&ge.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ge&&ge.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ge&&ge.encoding&&(this.decoder=new ee(ge.encoding),this.encoding=ge.encoding)}function Ce(ge){if(!(this instanceof Ce))return new Ce(ge);const G=this instanceof wc();this._readableState=new Fe(ge,this,G),ge&&(typeof ge.read=="function"&&(this._read=ge.read),typeof ge.destroy=="function"&&(this._destroy=ge.destroy),typeof ge.construct=="function"&&(this._construct=ge.construct),ge.signal&&!G&&w(ge.signal,this)),v.call(this,ge),k.construct(this,()=>{this._readableState.needReadable&&D(this,this._readableState)})}Ce.prototype.destroy=k.destroy,Ce.prototype._undestroy=k.undestroy,Ce.prototype._destroy=function(ge,G){G(ge)},Ce.prototype[g.captureRejectionSymbol]=function(ge){this.destroy(ge)},Ce.prototype[d]=function(){let ge;return this.destroyed||(ge=this.readableEnded?null:new q,this.destroy(ge)),new l((G,V)=>S(this,K=>K&&K!==ge?V(K):G(null)))},Ce.prototype.push=function(ge,G){return We(this,ge,G,!1)},Ce.prototype.unshift=function(ge,G){return We(this,ge,G,!0)};function We(ge,G,V,K){E("readableAddChunk",G);const me=ge._readableState;let Re;if((me.state&J)===0&&(typeof G=="string"?(V=V||me.defaultEncoding,me.encoding!==V&&(K&&me.encoding?G=x.from(G,V).toString(me.encoding):(G=x.from(G,V),V=""))):G instanceof x?V="":v._isUint8Array(G)?(G=v._uint8ArrayToBuffer(G),V=""):G!=null&&(Re=new P("chunk",["string","Buffer","Uint8Array"],G))),Re)B(ge,Re);else if(G===null)me.state&=-9,Mt(ge,me);else if((me.state&J)!==0||G&&G.length>0)if(K)if((me.state&ne)!==0)B(ge,new Z);else{if(me.destroyed||me.errored)return!1;Nt(ge,me,G,!0)}else if(me.ended)B(ge,new M);else{if(me.destroyed||me.errored)return!1;me.state&=-9,me.decoder&&!V?(G=me.decoder.write(G),me.objectMode||G.length!==0?Nt(ge,me,G,!1):D(ge,me)):Nt(ge,me,G,!1)}else K||(me.state&=-9,D(ge,me));return!me.ended&&(me.length<me.highWaterMark||me.length===0)}function Nt(ge,G,V,K){G.flowing&&G.length===0&&!G.sync&&ge.listenerCount("data")>0?((G.state&fe)!==0?G.awaitDrainWriters.clear():G.awaitDrainWriters=null,G.dataEmitted=!0,ge.emit("data",V)):(G.length+=G.objectMode?1:V.length,K?G.buffer.unshift(V):G.buffer.push(V),(G.state&Te)!==0&&Zt(ge)),D(ge,G)}Ce.prototype.isPaused=function(){const ge=this._readableState;return ge[ae]===!0||ge.flowing===!1},Ce.prototype.setEncoding=function(ge){const G=new ee(ge);this._readableState.decoder=G,this._readableState.encoding=this._readableState.decoder.encoding;const V=this._readableState.buffer;let K="";for(const me of V)K+=G.write(me);return V.clear(),K!==""&&V.push(K),this._readableState.length=K.length,this};const it=1073741824;function St(ge){if(ge>it)throw new H("size","<= 1GiB",ge);return ge--,ge|=ge>>>1,ge|=ge>>>2,ge|=ge>>>4,ge|=ge>>>8,ge|=ge>>>16,ge++,ge}function Ft(ge,G){return ge<=0||G.length===0&&G.ended?0:(G.state&J)!==0?1:r(ge)?G.flowing&&G.length?G.buffer.first().length:G.length:ge<=G.length?ge:G.ended?G.length:0}Ce.prototype.read=function(ge){E("read",ge),ge===void 0?ge=NaN:n(ge)||(ge=a(ge,10));const G=this._readableState,V=ge;if(ge>G.highWaterMark&&(G.highWaterMark=St(ge)),ge!==0&&(G.state&=-129),ge===0&&G.needReadable&&((G.highWaterMark!==0?G.length>=G.highWaterMark:G.length>0)||G.ended))return E("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?nt(this):Zt(this),null;if(ge=Ft(ge,G),ge===0&&G.ended)return G.length===0&&nt(this),null;let K=(G.state&Te)!==0;if(E("need readable",K),(G.length===0||G.length-ge<G.highWaterMark)&&(K=!0,E("length less than watermark",K)),G.ended||G.reading||G.destroyed||G.errored||!G.constructed)K=!1,E("reading, ended or constructing",K);else if(K){E("do read"),G.state|=he|Ie,G.length===0&&(G.state|=Te);try{this._read(G.highWaterMark)}catch(Re){B(this,Re)}G.state&=-33,G.reading||(ge=Ft(V,G))}let me;return ge>0?me=Be(ge,G):me=null,me===null?(G.needReadable=G.length<=G.highWaterMark,ge=0):(G.length-=ge,G.multiAwaitDrain?G.awaitDrainWriters.clear():G.awaitDrainWriters=null),G.length===0&&(G.ended||(G.needReadable=!0),V!==ge&&G.ended&&nt(this)),me!==null&&!G.errorEmitted&&!G.closeEmitted&&(G.dataEmitted=!0,this.emit("data",me)),me};function Mt(ge,G){if(E("onEofChunk"),!G.ended){if(G.decoder){const V=G.decoder.end();V&&V.length&&(G.buffer.push(V),G.length+=G.objectMode?1:V.length)}G.ended=!0,G.sync?Zt(ge):(G.needReadable=!1,G.emittedReadable=!0,be(ge))}}function Zt(ge){const G=ge._readableState;E("emitReadable",G.needReadable,G.emittedReadable),G.needReadable=!1,G.emittedReadable||(E("emitReadable",G.flowing),G.emittedReadable=!0,e.nextTick(be,ge))}function be(ge){const G=ge._readableState;E("emitReadable_",G.destroyed,G.length,G.ended),!G.destroyed&&!G.errored&&(G.length||G.ended)&&(ge.emit("readable"),G.emittedReadable=!1),G.needReadable=!G.flowing&&!G.ended&&G.length<=G.highWaterMark,ft(ge)}function D(ge,G){!G.readingMore&&G.constructed&&(G.readingMore=!0,e.nextTick(W,ge,G))}function W(ge,G){for(;!G.reading&&!G.ended&&(G.length<G.highWaterMark||G.flowing&&G.length===0);){const V=G.length;if(E("maybeReadMore read 0"),ge.read(0),V===G.length)break}G.readingMore=!1}Ce.prototype._read=function(ge){throw new L("_read()")},Ce.prototype.pipe=function(ge,G){const V=this,K=this._readableState;K.pipes.length===1&&(K.multiAwaitDrain||(K.multiAwaitDrain=!0,K.awaitDrainWriters=new c(K.awaitDrainWriters?[K.awaitDrainWriters]:[]))),K.pipes.push(ge),E("pipe count=%d opts=%j",K.pipes.length,G);const Re=(!G||G.end!==!1)&&ge!==e.stdout&&ge!==e.stderr?pt:Sr;K.endEmitted?e.nextTick(Re):V.once("end",Re),ge.on("unpipe",Ve);function Ve($n,xi){E("onunpipe"),$n===V&&xi&&xi.hasUnpiped===!1&&(xi.hasUnpiped=!0,Rt())}function pt(){E("onend"),ge.end()}let Kt,ut=!1;function Rt(){E("cleanup"),ge.removeListener("close",Xn),ge.removeListener("finish",_r),Kt&&ge.removeListener("drain",Kt),ge.removeListener("error",Rn),ge.removeListener("unpipe",Ve),V.removeListener("end",pt),V.removeListener("end",Sr),V.removeListener("data",en),ut=!0,Kt&&K.awaitDrainWriters&&(!ge._writableState||ge._writableState.needDrain)&&Kt()}function Lt(){ut||(K.pipes.length===1&&K.pipes[0]===ge?(E("false write response, pause",0),K.awaitDrainWriters=ge,K.multiAwaitDrain=!1):K.pipes.length>1&&K.pipes.includes(ge)&&(E("false write response, pause",K.awaitDrainWriters.size),K.awaitDrainWriters.add(ge)),V.pause()),Kt||(Kt=pe(V,ge),ge.on("drain",Kt))}V.on("data",en);function en($n){E("ondata");const xi=ge.write($n);E("dest.write",xi),xi===!1&&Lt()}function Rn($n){if(E("onerror",$n),Sr(),ge.removeListener("error",Rn),ge.listenerCount("error")===0){const xi=ge._writableState||ge._readableState;xi&&!xi.errorEmitted?B(ge,$n):ge.emit("error",$n)}}b(ge,"error",Rn);function Xn(){ge.removeListener("finish",_r),Sr()}ge.once("close",Xn);function _r(){E("onfinish"),ge.removeListener("close",Xn),Sr()}ge.once("finish",_r);function Sr(){E("unpipe"),V.unpipe(ge)}return ge.emit("pipe",V),ge.writableNeedDrain===!0?Lt():K.flowing||(E("pipe resume"),V.resume()),ge};function pe(ge,G){return function(){const K=ge._readableState;K.awaitDrainWriters===G?(E("pipeOnDrain",1),K.awaitDrainWriters=null):K.multiAwaitDrain&&(E("pipeOnDrain",K.awaitDrainWriters.size),K.awaitDrainWriters.delete(G)),(!K.awaitDrainWriters||K.awaitDrainWriters.size===0)&&ge.listenerCount("data")&&ge.resume()}}Ce.prototype.unpipe=function(ge){const G=this._readableState,V={hasUnpiped:!1};if(G.pipes.length===0)return this;if(!ge){const me=G.pipes;G.pipes=[],this.pause();for(let Re=0;Re<me.length;Re++)me[Re].emit("unpipe",this,{hasUnpiped:!1});return this}const K=t(G.pipes,ge);return K===-1?this:(G.pipes.splice(K,1),G.pipes.length===0&&this.pause(),ge.emit("unpipe",this,V),this)},Ce.prototype.on=function(ge,G){const V=v.prototype.on.call(this,ge,G),K=this._readableState;return ge==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):ge==="readable"&&!K.endEmitted&&!K.readableListening&&(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,E("on readable",K.length,K.reading),K.length?Zt(this):K.reading||e.nextTick(ve,this)),V},Ce.prototype.addListener=Ce.prototype.on,Ce.prototype.removeListener=function(ge,G){const V=v.prototype.removeListener.call(this,ge,G);return ge==="readable"&&e.nextTick(De,this),V},Ce.prototype.off=Ce.prototype.removeListener,Ce.prototype.removeAllListeners=function(ge){const G=v.prototype.removeAllListeners.apply(this,arguments);return(ge==="readable"||ge===void 0)&&e.nextTick(De,this),G};function De(ge){const G=ge._readableState;G.readableListening=ge.listenerCount("readable")>0,G.resumeScheduled&&G[ae]===!1?G.flowing=!0:ge.listenerCount("data")>0?ge.resume():G.readableListening||(G.flowing=null)}function ve(ge){E("readable nexttick read 0"),ge.read(0)}Ce.prototype.resume=function(){const ge=this._readableState;return ge.flowing||(E("resume"),ge.flowing=!ge.readableListening,ke(this,ge)),ge[ae]=!1,this};function ke(ge,G){G.resumeScheduled||(G.resumeScheduled=!0,e.nextTick(le,ge,G))}function le(ge,G){E("resume",G.reading),G.reading||ge.read(0),G.resumeScheduled=!1,ge.emit("resume"),ft(ge),G.flowing&&!G.reading&&ge.read(0)}Ce.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function ft(ge){const G=ge._readableState;for(E("flow",G.flowing);G.flowing&&ge.read()!==null;);}Ce.prototype.wrap=function(ge){let G=!1;ge.on("data",K=>{!this.push(K)&&ge.pause&&(G=!0,ge.pause())}),ge.on("end",()=>{this.push(null)}),ge.on("error",K=>{B(this,K)}),ge.on("close",()=>{this.destroy()}),ge.on("destroy",()=>{this.destroy()}),this._read=()=>{G&&ge.resume&&(G=!1,ge.resume())};const V=s(ge);for(let K=1;K<V.length;K++){const me=V[K];this[me]===void 0&&typeof ge[me]=="function"&&(this[me]=ge[me].bind(ge))}return this},Ce.prototype[h]=function(){return vt(this)},Ce.prototype.iterator=function(ge){return ge!==void 0&&ue(ge,"options"),vt(this,ge)};function vt(ge,G){typeof ge.read!="function"&&(ge=Ce.wrap(ge,{objectMode:!0}));const V=F(ge,G);return V.stream=ge,V}async function*F(ge,G){let V=ie;function K(Ve){this===ge?(V(),V=ie):V=Ve}ge.on("readable",K);let me;const Re=S(ge,{writable:!1},Ve=>{me=Ve?N(me,Ve):null,V(),V=ie});try{for(;;){const Ve=ge.destroyed?null:ge.read();if(Ve!==null)yield Ve;else{if(me)throw me;if(me===null)return;await new l(K)}}}catch(Ve){throw me=N(me,Ve),me}finally{(me||(G==null?void 0:G.destroyOnReturn)!==!1)&&(me===void 0||ge._readableState.autoDestroy)?k.destroyer(ge,null):(ge.off("readable",K),Re())}}i(Ce.prototype,{readable:{__proto__:null,get(){const ge=this._readableState;return!!ge&&ge.readable!==!1&&!ge.destroyed&&!ge.errorEmitted&&!ge.endEmitted},set(ge){this._readableState&&(this._readableState.readable=!!ge)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ge){this._readableState&&(this._readableState.flowing=ge)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ge){this._readableState&&(this._readableState.destroyed=ge)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Fe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(ge){this[ae]=!!ge}}}),Ce._fromList=Be;function Be(ge,G){if(G.length===0)return null;let V;return G.objectMode?V=G.buffer.shift():!ge||ge>=G.length?(G.decoder?V=G.buffer.join(""):G.buffer.length===1?V=G.buffer.first():V=G.buffer.concat(G.length),G.buffer.clear()):V=G.buffer.consume(ge,G.decoder),V}function nt(ge){const G=ge._readableState;E("endReadable",G.endEmitted),G.endEmitted||(G.ended=!0,e.nextTick(ye,G,ge))}function ye(ge,G){if(E("endReadableNT",ge.endEmitted,ge.length),!ge.errored&&!ge.closeEmitted&&!ge.endEmitted&&ge.length===0){if(ge.endEmitted=!0,G.emit("end"),G.writable&&G.allowHalfOpen===!1)e.nextTick(Me,G);else if(ge.autoDestroy){const V=G._writableState;(!V||V.autoDestroy&&(V.finished||V.writable===!1))&&G.destroy()}}}function Me(ge){ge.writable&&!ge.writableEnded&&!ge.destroyed&&ge.end()}Ce.from=function(ge,G){return X(Ce,ge,G)};let Ke;function Dt(){return Ke===void 0&&(Ke={}),Ke}return Ce.fromWeb=function(ge,G){return Dt().newStreamReadableFromReadableStream(ge,G)},Ce.toWeb=function(ge,G){return Dt().newReadableStreamFromStreamReadable(ge,G)},Ce.wrap=function(ge,G){var V,K;return new Ce({objectMode:(V=(K=ge.readableObjectMode)!==null&&K!==void 0?K:ge.objectMode)!==null&&V!==void 0?V:!0,...G,destroy(me,Re){k.destroyer(ge,me),Re(me)}}).wrap(ge)},FE}var LE,bM;function SN(){if(bM)return LE;bM=1;const e=$f(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:c}=Qr();LE=ue,ue.WritableState=Z;const{EventEmitter:d}=Y1(),h=xN().Stream,{Buffer:p}=id(),g=Wp(),{addAbortSignal:v}=X1(),{getHighWaterMark:b,getDefaultHighWaterMark:x}=J1(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:j,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:P}=Pi().codes,{errorOrDestroy:L}=g;s(ue.prototype,h.prototype),s(ue,h);function H(){}const M=l("kOnFinished");function Z(je,z,Se){typeof Se!="boolean"&&(Se=z instanceof wc()),this.objectMode=!!(je&&je.objectMode),Se&&(this.objectMode=this.objectMode||!!(je&&je.writableObjectMode)),this.highWaterMark=je?b(this,je,"writableHighWaterMark",Se):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ne=!!(je&&je.decodeStrings===!1);this.decodeStrings=!Ne,this.defaultEncoding=je&&je.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=B.bind(void 0,z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,q(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!je||je.emitClose!==!1,this.autoDestroy=!je||je.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[M]=[]}function q(je){je.buffered=[],je.bufferedIndex=0,je.allBuffers=!0,je.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ue(je){const z=this instanceof wc();if(!z&&!r(ue,this))return new ue(je);this._writableState=new Z(je,this,z),je&&(typeof je.write=="function"&&(this._write=je.write),typeof je.writev=="function"&&(this._writev=je.writev),typeof je.destroy=="function"&&(this._destroy=je.destroy),typeof je.final=="function"&&(this._final=je.final),typeof je.construct=="function"&&(this._construct=je.construct),je.signal&&v(je.signal,this)),h.call(this,je),g.construct(this,()=>{const Se=this._writableState;Se.writing||he(this,Se),Ae(this,Se)})}a(ue,c,{__proto__:null,value:function(je){return r(this,je)?!0:this!==ue?!1:je&&je._writableState instanceof Z}}),ue.prototype.pipe=function(){L(this,new C)};function ae(je,z,Se,Ne){const fe=je._writableState;if(typeof Se=="function")Ne=Se,Se=fe.defaultEncoding;else{if(!Se)Se=fe.defaultEncoding;else if(Se!=="buffer"&&!p.isEncoding(Se))throw new P(Se);typeof Ne!="function"&&(Ne=H)}if(z===null)throw new I;if(!fe.objectMode)if(typeof z=="string")fe.decodeStrings!==!1&&(z=p.from(z,Se),Se="buffer");else if(z instanceof p)Se="buffer";else if(h._isUint8Array(z))z=h._uint8ArrayToBuffer(z),Se="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],z);let se;return fe.ending?se=new N:fe.destroyed&&(se=new k("write")),se?(e.nextTick(Ne,se),L(je,se,!0),se):(fe.pendingcb++,ee(je,fe,z,Se,Ne))}ue.prototype.write=function(je,z,Se){return ae(this,je,z,Se)===!0},ue.prototype.cork=function(){this._writableState.corked++},ue.prototype.uncork=function(){const je=this._writableState;je.corked&&(je.corked--,je.writing||he(this,je))},ue.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=o(z)),!p.isEncoding(z))throw new P(z);return this._writableState.defaultEncoding=z,this};function ee(je,z,Se,Ne,fe){const se=z.objectMode?1:Se.length;z.length+=se;const te=z.length<z.highWaterMark;return te||(z.needDrain=!0),z.writing||z.corked||z.errored||!z.constructed?(z.buffered.push({chunk:Se,encoding:Ne,callback:fe}),z.allBuffers&&Ne!=="buffer"&&(z.allBuffers=!1),z.allNoop&&fe!==H&&(z.allNoop=!1)):(z.writelen=se,z.writecb=fe,z.writing=!0,z.sync=!0,je._write(Se,Ne,z.onwrite),z.sync=!1),te&&!z.errored&&!z.destroyed}function X(je,z,Se,Ne,fe,se,te){z.writelen=Ne,z.writecb=te,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new k("write")):Se?je._writev(fe,z.onwrite):je._write(fe,se,z.onwrite),z.sync=!1}function ie(je,z,Se,Ne){--z.pendingcb,Ne(Se),ne(z),L(je,Se)}function B(je,z){const Se=je._writableState,Ne=Se.sync,fe=Se.writecb;if(typeof fe!="function"){L(je,new E);return}Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0,z?(z.stack,Se.errored||(Se.errored=z),je._readableState&&!je._readableState.errored&&(je._readableState.errored=z),Ne?e.nextTick(ie,je,Se,z,fe):ie(je,Se,z,fe)):(Se.buffered.length>Se.bufferedIndex&&he(je,Se),Ne?Se.afterWriteTickInfo!==null&&Se.afterWriteTickInfo.cb===fe?Se.afterWriteTickInfo.count++:(Se.afterWriteTickInfo={count:1,cb:fe,stream:je,state:Se},e.nextTick(J,Se.afterWriteTickInfo)):Q(je,Se,1,fe))}function J({stream:je,state:z,count:Se,cb:Ne}){return z.afterWriteTickInfo=null,Q(je,z,Se,Ne)}function Q(je,z,Se,Ne){for(!z.ending&&!je.destroyed&&z.length===0&&z.needDrain&&(z.needDrain=!1,je.emit("drain"));Se-- >0;)z.pendingcb--,Ne();z.destroyed&&ne(z),Ae(je,z)}function ne(je){if(je.writing)return;for(let fe=je.bufferedIndex;fe<je.buffered.length;++fe){var z;const{chunk:se,callback:te}=je.buffered[fe],xe=je.objectMode?1:se.length;je.length-=xe,te((z=je.errored)!==null&&z!==void 0?z:new k("write"))}const Se=je[M].splice(0);for(let fe=0;fe<Se.length;fe++){var Ne;Se[fe]((Ne=je.errored)!==null&&Ne!==void 0?Ne:new k("end"))}q(je)}function he(je,z){if(z.corked||z.bufferProcessing||z.destroyed||!z.constructed)return;const{buffered:Se,bufferedIndex:Ne,objectMode:fe}=z,se=Se.length-Ne;if(!se)return;let te=Ne;if(z.bufferProcessing=!0,se>1&&je._writev){z.pendingcb-=se-1;const xe=z.allNoop?H:Ce=>{for(let We=te;We<Se.length;++We)Se[We].callback(Ce)},Fe=z.allNoop&&te===0?Se:t(Se,te);Fe.allBuffers=z.allBuffers,X(je,z,!0,z.length,Fe,"",xe),q(z)}else{do{const{chunk:xe,encoding:Fe,callback:Ce}=Se[te];Se[te++]=null;const We=fe?1:xe.length;X(je,z,!1,We,xe,Fe,Ce)}while(te<Se.length&&!z.writing);te===Se.length?q(z):te>256?(Se.splice(0,te),z.bufferedIndex=0):z.bufferedIndex=te}z.bufferProcessing=!1}ue.prototype._write=function(je,z,Se){if(this._writev)this._writev([{chunk:je,encoding:z}],Se);else throw new S("_write()")},ue.prototype._writev=null,ue.prototype.end=function(je,z,Se){const Ne=this._writableState;typeof je=="function"?(Se=je,je=null,z=null):typeof z=="function"&&(Se=z,z=null);let fe;if(je!=null){const se=ae(this,je,z);se instanceof n&&(fe=se)}return Ne.corked&&(Ne.corked=1,this.uncork()),fe||(!Ne.errored&&!Ne.ending?(Ne.ending=!0,Ae(this,Ne,!0),Ne.ended=!0):Ne.finished?fe=new j("end"):Ne.destroyed&&(fe=new k("end"))),typeof Se=="function"&&(fe||Ne.finished?e.nextTick(Se,fe):Ne[M].push(Se)),this};function de(je){return je.ending&&!je.destroyed&&je.constructed&&je.length===0&&!je.errored&&je.buffered.length===0&&!je.finished&&!je.writing&&!je.errorEmitted&&!je.closeEmitted}function Ie(je,z){let Se=!1;function Ne(fe){if(Se){L(je,fe??E());return}if(Se=!0,z.pendingcb--,fe){const se=z[M].splice(0);for(let te=0;te<se.length;te++)se[te](fe);L(je,fe,z.sync)}else de(z)&&(z.prefinished=!0,je.emit("prefinish"),z.pendingcb++,e.nextTick(Ee,je,z))}z.sync=!0,z.pendingcb++;try{je._final(Ne)}catch(fe){Ne(fe)}z.sync=!1}function Te(je,z){!z.prefinished&&!z.finalCalled&&(typeof je._final=="function"&&!z.destroyed?(z.finalCalled=!0,Ie(je,z)):(z.prefinished=!0,je.emit("prefinish")))}function Ae(je,z,Se){de(z)&&(Te(je,z),z.pendingcb===0&&(Se?(z.pendingcb++,e.nextTick((Ne,fe)=>{de(fe)?Ee(Ne,fe):fe.pendingcb--},je,z)):de(z)&&(z.pendingcb++,Ee(je,z))))}function Ee(je,z){z.pendingcb--,z.finished=!0;const Se=z[M].splice(0);for(let Ne=0;Ne<Se.length;Ne++)Se[Ne]();if(je.emit("finish"),z.autoDestroy){const Ne=je._readableState;(!Ne||Ne.autoDestroy&&(Ne.endEmitted||Ne.readable===!1))&&je.destroy()}}i(ue.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(je){this._writableState&&(this._writableState.destroyed=je)}},writable:{__proto__:null,get(){const je=this._writableState;return!!je&&je.writable!==!1&&!je.destroyed&&!je.errored&&!je.ending&&!je.ended},set(je){this._writableState&&(this._writableState.writable=!!je)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const je=this._writableState;return je?!je.destroyed&&!je.ending&&je.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Pe=g.destroy;ue.prototype.destroy=function(je,z){const Se=this._writableState;return!Se.destroyed&&(Se.bufferedIndex<Se.buffered.length||Se[M].length)&&e.nextTick(ne,Se),Pe.call(this,je,z),this},ue.prototype._undestroy=g.undestroy,ue.prototype._destroy=function(je,z){z(je)},ue.prototype[d.captureRejectionSymbol]=function(je){this.destroy(je)};let Qe;function Le(){return Qe===void 0&&(Qe={}),Qe}return ue.fromWeb=function(je,z){return Le().newStreamWritableFromWritableStream(je,z)},ue.toWeb=function(je){return Le().newWritableStreamFromStreamWritable(je)},LE}var $E,vM;function Roe(){if(vM)return $E;vM=1;const e=$f(),t=id(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:d}=Ic(),h=sd(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=Pi(),{destroyer:b}=Wp(),x=wc(),w=Q1(),S=SN(),{createDeferredPromise:E}=Yi(),C=X$(),k=globalThis.Blob||t.Blob,j=typeof k<"u"?function(Z){return Z instanceof k}:function(Z){return!1},I=globalThis.AbortController||R0().AbortController,{FunctionPrototypeCall:N}=Qr();class P extends x{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}$E=function M(Z,q){if(l(Z))return Z;if(s(Z))return H({readable:Z});if(o(Z))return H({writable:Z});if(i(Z))return H({writable:!1,readable:!1});if(c(Z))return H({readable:w.fromWeb(Z)});if(d(Z))return H({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:ae,write:ee,final:X,destroy:ie}=L(Z);if(a(ae))return C(P,ae,{objectMode:!0,write:ee,final:X,destroy:ie});const B=ae==null?void 0:ae.then;if(typeof B=="function"){let J;const Q=N(B,ae,ne=>{if(ne!=null)throw new v("nully","body",ne)},ne=>{b(J,ne)});return J=new P({objectMode:!0,readable:!1,write:ee,final(ne){X(async()=>{try{await Q,e.nextTick(ne,null)}catch(he){e.nextTick(ne,he)}})},destroy:ie})}throw new v("Iterable, AsyncIterable or AsyncFunction",q,ae)}if(j(Z))return M(Z.arrayBuffer());if(a(Z))return C(P,Z,{objectMode:!0,writable:!1});if(c(Z==null?void 0:Z.readable)&&d(Z==null?void 0:Z.writable))return P.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ae=Z!=null&&Z.readable?s(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:M(Z.readable):void 0,ee=Z!=null&&Z.writable?o(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:M(Z.writable):void 0;return H({readable:ae,writable:ee})}const ue=Z==null?void 0:Z.then;if(typeof ue=="function"){let ae;return N(ue,Z,ee=>{ee!=null&&ae.push(ee),ae.push(null)},ee=>{b(ae,ee)}),ae=new P({objectMode:!0,writable:!1,read(){}})}throw new g(q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function L(M){let{promise:Z,resolve:q}=E();const ue=new I,ae=ue.signal;return{value:M(async function*(){for(;;){const X=Z;Z=null;const{chunk:ie,done:B,cb:J}=await X;if(e.nextTick(J),B)return;if(ae.aborted)throw new p(void 0,{cause:ae.reason});({promise:Z,resolve:q}=E()),yield ie}}(),{signal:ae}),write(X,ie,B){const J=q;q=null,J({chunk:X,done:!1,cb:B})},final(X){const ie=q;q=null,ie({done:!0,cb:X})},destroy(X,ie){ue.abort(),ie(X)}}}function H(M){const Z=M.readable&&typeof M.readable.read!="function"?w.wrap(M.readable):M.readable,q=M.writable;let ue=!!n(Z),ae=!!r(q),ee,X,ie,B,J;function Q(ne){const he=B;B=null,he?he(ne):ne&&J.destroy(ne)}return J=new P({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(q!=null&&q.writableObjectMode),readable:ue,writable:ae}),ae&&(h(q,ne=>{ae=!1,ne&&b(Z,ne),Q(ne)}),J._write=function(ne,he,de){q.write(ne,he)?de():ee=de},J._final=function(ne){q.end(),X=ne},q.on("drain",function(){if(ee){const ne=ee;ee=null,ne()}}),q.on("finish",function(){if(X){const ne=X;X=null,ne()}})),ue&&(h(Z,ne=>{ue=!1,ne&&b(Z,ne),Q(ne)}),Z.on("readable",function(){if(ie){const ne=ie;ie=null,ne()}}),Z.on("end",function(){J.push(null)}),J._read=function(){for(;;){const ne=Z.read();if(ne===null){ie=J._read;return}if(!J.push(ne))return}}),J._destroy=function(ne,he){!ne&&B!==null&&(ne=new p),ie=null,ee=null,X=null,B===null?he(ne):(B=he,b(q,ne),b(Z,ne))},J}return $E}var BE,wM;function wc(){if(wM)return BE;wM=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Qr();BE=s;const a=Q1(),i=SN();r(s.prototype,a.prototype),r(s,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const p=d[h];s.prototype[p]||(s.prototype[p]=i.prototype[p])}}function s(d){if(!(this instanceof s))return new s(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}s.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},s.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let c;return s.from=function(d){return c||(c=Roe()),c(d,"body")},BE}var zE,xM;function J$(){if(xM)return zE;xM=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Qr();zE=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=Pi().codes,r=wc(),{getHighWaterMark:a}=J1();e(s.prototype,r.prototype),e(s,r);const i=t("kCallback");function s(c){if(!(this instanceof s))return new s(c);const d=c?a(this,c,"readableHighWaterMark",!0):null;d===0&&(c={...c,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function o(c){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){c?c(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function l(){this._final!==o&&o.call(this)}return s.prototype._final=o,s.prototype._transform=function(c,d,h){throw new n("_transform()")},s.prototype._write=function(c,d,h){const p=this._readableState,g=this._writableState,v=p.length;this._transform(c,d,(b,x)=>{if(b){h(b);return}x!=null&&this.push(x),g.ended||v===p.length||p.length<p.highWaterMark?h():this[i]=h})},s.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},zE}var UE,_M;function Q$(){if(_M)return UE;_M=1;const{ObjectSetPrototypeOf:e}=Qr();UE=n;const t=J$();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},UE}var VE,SM;function EN(){if(SM)return VE;SM=1;const e=$f(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Qr(),i=sd(),{once:s}=Yi(),o=Wp(),l=wc(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=Pi(),{validateFunction:x,validateAbortSignal:w}=jy(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:j,isWebStream:I,isReadableStream:N,isReadableFinished:P}=Ic(),L=globalThis.AbortController||R0().AbortController;let H,M,Z;function q(ne,he,de){let Ie=!1;ne.on("close",()=>{Ie=!0});const Te=i(ne,{readable:he,writable:de},Ae=>{Ie=!Ae});return{destroy:Ae=>{Ie||(Ie=!0,o.destroyer(ne,Ae||new g("pipe")))},cleanup:Te}}function ue(ne){return x(ne[ne.length-1],"streams[stream.length - 1]"),ne.pop()}function ae(ne){if(S(ne))return ne;if(C(ne))return ee(ne);throw new d("val",["Readable","Iterable","AsyncIterable"],ne)}async function*ee(ne){M||(M=Q1()),yield*M.prototype[r].call(ne)}async function X(ne,he,de,{end:Ie}){let Te,Ae=null;const Ee=Le=>{if(Le&&(Te=Le),Ae){const je=Ae;Ae=null,je()}},Pe=()=>new n((Le,je)=>{Te?je(Te):Ae=()=>{Te?je(Te):Le()}});he.on("drain",Ee);const Qe=i(he,{readable:!1},Ee);try{he.writableNeedDrain&&await Pe();for await(const Le of ne)he.write(Le)||await Pe();Ie&&(he.end(),await Pe()),de()}catch(Le){de(Te!==Le?c(Te,Le):Le)}finally{Qe(),he.off("drain",Ee)}}async function ie(ne,he,de,{end:Ie}){j(he)&&(he=he.writable);const Te=he.getWriter();try{for await(const Ae of ne)await Te.ready,Te.write(Ae).catch(()=>{});await Te.ready,Ie&&await Te.close(),de()}catch(Ae){try{await Te.abort(Ae),de(Ae)}catch(Ee){de(Ee)}}}function B(...ne){return J(ne,s(ue(ne)))}function J(ne,he,de){if(ne.length===1&&t(ne[0])&&(ne=ne[0]),ne.length<2)throw new p("streams");const Ie=new L,Te=Ie.signal,Ae=de==null?void 0:de.signal,Ee=[];w(Ae,"options.signal");function Pe(){fe(new b)}Z=Z||Yi().addAbortListener;let Qe;Ae&&(Qe=Z(Ae,Pe));let Le,je;const z=[];let Se=0;function Ne(Ce){fe(Ce,--Se===0)}function fe(Ce,We){var Nt;if(Ce&&(!Le||Le.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Le=Ce),!(!Le&&!We)){for(;z.length;)z.shift()(Le);(Nt=Qe)===null||Nt===void 0||Nt[a](),Ie.abort(),We&&(Le||Ee.forEach(it=>it()),e.nextTick(he,Le,je))}}let se;for(let Ce=0;Ce<ne.length;Ce++){const We=ne[Ce],Nt=Ce<ne.length-1,it=Ce>0,St=Nt||(de==null?void 0:de.end)!==!1,Ft=Ce===ne.length-1;if(k(We)){let Mt=function(Zt){Zt&&Zt.name!=="AbortError"&&Zt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ne(Zt)};var Fe=Mt;if(St){const{destroy:Zt,cleanup:be}=q(We,Nt,it);z.push(Zt),E(We)&&Ft&&Ee.push(be)}We.on("error",Mt),E(We)&&Ft&&Ee.push(()=>{We.removeListener("error",Mt)})}if(Ce===0)if(typeof We=="function"){if(se=We({signal:Te}),!S(se))throw new h("Iterable, AsyncIterable or Stream","source",se)}else S(We)||C(We)||j(We)?se=We:se=l.from(We);else if(typeof We=="function"){if(j(se)){var te;se=ae((te=se)===null||te===void 0?void 0:te.readable)}else se=ae(se);if(se=We(se,{signal:Te}),Nt){if(!S(se,!0))throw new h("AsyncIterable",`transform[${Ce-1}]`,se)}else{var xe;H||(H=Q$());const Mt=new H({objectMode:!0}),Zt=(xe=se)===null||xe===void 0?void 0:xe.then;if(typeof Zt=="function")Se++,Zt.call(se,W=>{je=W,W!=null&&Mt.write(W),St&&Mt.end(),e.nextTick(Ne)},W=>{Mt.destroy(W),e.nextTick(Ne,W)});else if(S(se,!0))Se++,X(se,Mt,Ne,{end:St});else if(N(se)||j(se)){const W=se.readable||se;Se++,X(W,Mt,Ne,{end:St})}else throw new h("AsyncIterable or Promise","destination",se);se=Mt;const{destroy:be,cleanup:D}=q(se,!1,!0);z.push(be),Ft&&Ee.push(D)}}else if(k(We)){if(C(se)){Se+=2;const Mt=Q(se,We,Ne,{end:St});E(We)&&Ft&&Ee.push(Mt)}else if(j(se)||N(se)){const Mt=se.readable||se;Se++,X(Mt,We,Ne,{end:St})}else if(S(se))Se++,X(se,We,Ne,{end:St});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=We}else if(I(We)){if(C(se))Se++,ie(ae(se),We,Ne,{end:St});else if(N(se)||S(se))Se++,ie(se,We,Ne,{end:St});else if(j(se))Se++,ie(se.readable,We,Ne,{end:St});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=We}else se=l.from(We)}return(Te!=null&&Te.aborted||Ae!=null&&Ae.aborted)&&e.nextTick(Pe),se}function Q(ne,he,de,{end:Ie}){let Te=!1;if(he.on("close",()=>{Te||de(new v)}),ne.pipe(he,{end:!1}),Ie){let Ee=function(){Te=!0,he.end()};var Ae=Ee;P(ne)?e.nextTick(Ee):ne.once("end",Ee)}else de();return i(ne,{readable:!0,writable:!1},Ee=>{const Pe=ne._readableState;Ee&&Ee.code==="ERR_STREAM_PREMATURE_CLOSE"&&Pe&&Pe.ended&&!Pe.errored&&!Pe.errorEmitted?ne.once("end",de).once("error",de):de(Ee)}),i(he,{readable:!1,writable:!0},de)}return VE={pipelineImpl:J,pipeline:B},VE}var HE,EM;function e9(){if(EM)return HE;EM=1;const{pipeline:e}=EN(),t=wc(),{destroyer:n}=Wp(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:s,isTransformStream:o,isWritableStream:l,isReadableStream:c}=Ic(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:p}}=Pi(),g=sd();return HE=function(...b){if(b.length===0)throw new p("streams");if(b.length===1)return t.from(b[0]);const x=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const H=b.length-1;b[H]=t.from(b[H])}for(let H=0;H<b.length;++H)if(!(!r(b[H])&&!s(b[H]))){if(H<b.length-1&&!(a(b[H])||c(b[H])||o(b[H])))throw new h(`streams[${H}]`,x[H],"must be readable");if(H>0&&!(i(b[H])||l(b[H])||o(b[H])))throw new h(`streams[${H}]`,x[H],"must be writable")}let w,S,E,C,k;function j(H){const M=C;C=null,M?M(H):H?k.destroy(H):!L&&!P&&k.destroy()}const I=b[0],N=e(b,j),P=!!(i(I)||l(I)||o(I)),L=!!(a(N)||c(N)||o(N));if(k=new t({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:P,readable:L}),P){if(r(I))k._write=function(M,Z,q){I.write(M,Z)?q():w=q},k._final=function(M){I.end(),S=M},I.on("drain",function(){if(w){const M=w;w=null,M()}});else if(s(I)){const Z=(o(I)?I.writable:I).getWriter();k._write=async function(q,ue,ae){try{await Z.ready,Z.write(q).catch(()=>{}),ae()}catch(ee){ae(ee)}},k._final=async function(q){try{await Z.ready,Z.close().catch(()=>{}),S=q}catch(ue){q(ue)}}}const H=o(N)?N.readable:N;g(H,()=>{if(S){const M=S;S=null,M()}})}if(L){if(r(N))N.on("readable",function(){if(E){const H=E;E=null,H()}}),N.on("end",function(){k.push(null)}),k._read=function(){for(;;){const H=N.read();if(H===null){E=k._read;return}if(!k.push(H))return}};else if(s(N)){const M=(o(N)?N.readable:N).getReader();k._read=async function(){for(;;)try{const{value:Z,done:q}=await M.read();if(!k.push(Z))return;if(q){k.push(null);return}}catch{return}}}}return k._destroy=function(H,M){!H&&C!==null&&(H=new d),E=null,w=null,S=null,C===null?M(H):(C=M,r(N)&&n(N,H))},k},HE}var CM;function Ioe(){if(CM)return uw;CM=1;const e=globalThis.AbortController||R0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=Pi(),{validateAbortSignal:s,validateInteger:o,validateObject:l}=jy(),c=Qr().Symbol("kWeak"),d=Qr().Symbol("kResistStopPropagation"),{finished:h}=sd(),p=e9(),{addAbortSignalNoValidate:g}=X1(),{isWritable:v,isNodeStream:b}=Ic(),{deprecate:x}=Yi(),{ArrayPrototypePush:w,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:k,Promise:j,PromiseReject:I,PromiseResolve:N,PromisePrototypeThen:P,Symbol:L}=Qr(),H=L("kEmpty"),M=L("kEof");function Z(Ae,Ee){if(Ee!=null&&l(Ee,"options"),(Ee==null?void 0:Ee.signal)!=null&&s(Ee.signal,"options.signal"),b(Ae)&&!v(Ae))throw new t("stream",Ae,"must be writable");const Pe=p(this,Ae);return Ee!=null&&Ee.signal&&g(Ee.signal,Pe),Pe}function q(Ae,Ee){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);Ee!=null&&l(Ee,"options"),(Ee==null?void 0:Ee.signal)!=null&&s(Ee.signal,"options.signal");let Pe=1;(Ee==null?void 0:Ee.concurrency)!=null&&(Pe=E(Ee.concurrency));let Qe=Pe-1;return(Ee==null?void 0:Ee.highWaterMark)!=null&&(Qe=E(Ee.highWaterMark)),o(Pe,"options.concurrency",1),o(Qe,"options.highWaterMark",0),Qe+=Pe,(async function*(){const je=Yi().AbortSignalAny([Ee==null?void 0:Ee.signal].filter(S)),z=this,Se=[],Ne={signal:je};let fe,se,te=!1,xe=0;function Fe(){te=!0,Ce()}function Ce(){xe-=1,We()}function We(){se&&!te&&xe<Pe&&Se.length<Qe&&(se(),se=null)}async function Nt(){try{for await(let it of z){if(te)return;if(je.aborted)throw new i;try{if(it=Ae(it,Ne),it===H)continue;it=N(it)}catch(St){it=I(St)}xe+=1,P(it,Ce,Fe),Se.push(it),fe&&(fe(),fe=null),!te&&(Se.length>=Qe||xe>=Pe)&&await new j(St=>{se=St})}Se.push(M)}catch(it){const St=I(it);P(St,Ce,Fe),Se.push(St)}finally{te=!0,fe&&(fe(),fe=null)}}Nt();try{for(;;){for(;Se.length>0;){const it=await Se[0];if(it===M)return;if(je.aborted)throw new i;it!==H&&(yield it),Se.shift(),We()}await new j(it=>{fe=it})}}finally{te=!0,se&&(se(),se=null)}}).call(this)}function ue(Ae=void 0){return Ae!=null&&l(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&s(Ae.signal,"options.signal"),(async function*(){let Pe=0;for await(const Le of this){var Qe;if(Ae!=null&&(Qe=Ae.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i({cause:Ae.signal.reason});yield[Pe++,Le]}}).call(this)}async function ae(Ae,Ee=void 0){for await(const Pe of B.call(this,Ae,Ee))return!0;return!1}async function ee(Ae,Ee=void 0){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);return!await ae.call(this,async(...Pe)=>!await Ae(...Pe),Ee)}async function X(Ae,Ee){for await(const Pe of B.call(this,Ae,Ee))return Pe}async function ie(Ae,Ee){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);async function Pe(Qe,Le){return await Ae(Qe,Le),H}for await(const Qe of q.call(this,Pe,Ee));}function B(Ae,Ee){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);async function Pe(Qe,Le){return await Ae(Qe,Le)?Qe:H}return q.call(this,Pe,Ee)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(Ae,Ee,Pe){var Qe;if(typeof Ae!="function")throw new n("reducer",["Function","AsyncFunction"],Ae);Pe!=null&&l(Pe,"options"),(Pe==null?void 0:Pe.signal)!=null&&s(Pe.signal,"options.signal");let Le=arguments.length>1;if(Pe!=null&&(Qe=Pe.signal)!==null&&Qe!==void 0&&Qe.aborted){const fe=new i(void 0,{cause:Pe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(fe)),fe}const je=new e,z=je.signal;if(Pe!=null&&Pe.signal){const fe={once:!0,[c]:this,[d]:!0};Pe.signal.addEventListener("abort",()=>je.abort(),fe)}let Se=!1;try{for await(const fe of this){var Ne;if(Se=!0,Pe!=null&&(Ne=Pe.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new i;Le?Ee=await Ae(Ee,fe,{signal:z}):(Ee=fe,Le=!0)}if(!Se&&!Le)throw new J}finally{je.abort()}return Ee}async function ne(Ae){Ae!=null&&l(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&s(Ae.signal,"options.signal");const Ee=[];for await(const Qe of this){var Pe;if(Ae!=null&&(Pe=Ae.signal)!==null&&Pe!==void 0&&Pe.aborted)throw new i(void 0,{cause:Ae.signal.reason});w(Ee,Qe)}return Ee}function he(Ae,Ee){const Pe=q.call(this,Ae,Ee);return(async function*(){for await(const Le of Pe)yield*Le}).call(this)}function de(Ae){if(Ae=C(Ae),k(Ae))return 0;if(Ae<0)throw new a("number",">= 0",Ae);return Ae}function Ie(Ae,Ee=void 0){return Ee!=null&&l(Ee,"options"),(Ee==null?void 0:Ee.signal)!=null&&s(Ee.signal,"options.signal"),Ae=de(Ae),(async function*(){var Qe;if(Ee!=null&&(Qe=Ee.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const je of this){var Le;if(Ee!=null&&(Le=Ee.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;Ae--<=0&&(yield je)}}).call(this)}function Te(Ae,Ee=void 0){return Ee!=null&&l(Ee,"options"),(Ee==null?void 0:Ee.signal)!=null&&s(Ee.signal,"options.signal"),Ae=de(Ae),(async function*(){var Qe;if(Ee!=null&&(Qe=Ee.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const je of this){var Le;if(Ee!=null&&(Le=Ee.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;if(Ae-- >0&&(yield je),Ae<=0)return}}).call(this)}return uw.streamReturningOperators={asIndexedPairs:x(ue,"readable.asIndexedPairs will be removed in a future version."),drop:Ie,filter:B,flatMap:he,map:q,take:Te,compose:Z},uw.promiseReturningOperators={every:ee,forEach:ie,reduce:Q,toArray:ne,some:ae,find:X},uw}var qE,TM;function t9(){if(TM)return qE;TM=1;const{ArrayPrototypePop:e,Promise:t}=Qr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Ic(),{pipelineImpl:i}=EN(),{finished:s}=sd();n9();function o(...l){return new t((c,d)=>{let h,p;const g=l[l.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(l);h=v.signal,p=v.end}i(l,(v,b)=>{v?d(v):c(b)},{signal:h,end:p})})}return qE={finished:s,pipeline:o},qE}var kM;function n9(){if(kM)return xE.exports;kM=1;const{Buffer:e}=id(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Qr(),{promisify:{custom:a}}=Yi(),{streamReturningOperators:i,promiseReturningOperators:s}=Ioe(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Pi(),l=e9(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:d}=J1(),{pipeline:h}=EN(),{destroyer:p}=Wp(),g=sd(),v=t9(),b=Ic(),x=xE.exports=xN().Stream;x.isDestroyed=b.isDestroyed,x.isDisturbed=b.isDisturbed,x.isErrored=b.isErrored,x.isReadable=b.isReadable,x.isWritable=b.isWritable,x.Readable=Q1();for(const E of n(i)){let k=function(...j){if(new.target)throw o();return x.Readable.from(r(C,this,j))};var S=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(x.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(s)){let k=function(...I){if(new.target)throw o();return r(C,this,I)};var S=k;const C=s[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(x.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}x.Writable=SN(),x.Duplex=wc(),x.Transform=J$(),x.PassThrough=Q$(),x.pipeline=h;const{addAbortSignal:w}=X1();return x.addAbortSignal=w,x.finished=g,x.destroy=p,x.compose=l,x.setDefaultHighWaterMark=c,x.getDefaultHighWaterMark=d,t(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),x.Stream=x,x._isUint8Array=function(C){return C instanceof Uint8Array},x._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},xE.exports}var AM;function joe(){return AM||(AM=1,function(e){const t=n9(),n=t9(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(wE)),wE.exports}var r9=joe();class CN extends r9.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(lt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class TN extends r9.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(fi(new Ue(lt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(fi(new Ue(lt.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(lt.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(lt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Ws=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ks=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class gi{get position(){return this.flag&vf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=wi(t,n);Object.assign(this,Rf(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&W1||this.inode.flags&Gi.Sync)}_emitChange(){ti(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,O$(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=rd(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>kr?-61441:kr)|n,(this._isSync||n>kr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(lt.EINVAL);if(this.dirty=!0,!(this.flag&ui||this.flag&cc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Nx(t),this.inode.mtimeMs=Nx(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=uc(n,"utf8","a",420);if(!(dc(r.flag)&vf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Lr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ui)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Gi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!k0(this.inode)&&!T0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=uc(t,null,"r",292);if(dc(n.flag)&ui)throw new Ue(lt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),s=Lr.from(i);return n.encoding?s.toString(n.encoding):s}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Gi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&ui)throw Ue.With("EBADF",this.path,"readLines");return Xse({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!mr(this.context,this.inode,Na))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Pf(this.inode):new Rc(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Gi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&ui||this.flag&cc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!k0(this.inode)&&!T0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,await this.fs.write(this.internalPath,s,a),this._isSync&&await this.sync(),s.byteLength}async write(t,n,r,a){let i,s,o;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,s=0,i=Lr.from(t,typeof r=="string"?r:"utf8"),o=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n??0,o=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,s,o,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=uc(n,"utf8","w",420),a=dc(r.flag);if(!(a&ui||a&cc))throw new Ue(lt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Lr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),L$(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&ui)throw Ue.With("EBADF",this.path,"createReadStream");return new CN(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Gi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"createWriteStream");return new TN(t,this)}}async function a9(e,t){e=hn(e),t=hn(t);const n=Un(e,this),r=Un(t,this);if(!(await Kp.call(this,sr(e))).hasAccess(ia,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),ti(this,"rename",e.toString()),ti(this,"change",t.toString());return}await r_.call(this,t,await n_(e)),await t_.call(this,e),ti(this,"rename",e.toString())}catch(a){throw gr(a,{[n.path]:e,[r.path]:t})}}async function Dy(e){try{const{fs:t,path:n}=Un(await od.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function Kp(e,t){e=hn(e);const{fs:n,path:r}=Un(await od.call(this,e),this);try{const a=await n.stat(r);if(Ra&&!mr(this,a,Na))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Pf(a):new Rc(a)}catch(a){throw gr(a,{[r]:e})}}async function e_(e,t){e=hn(e);const{fs:n,path:r}=Un(e,this);try{const a=await n.stat(r);if(Ra&&!mr(this,a,Na))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Pf(a):new Rc(a)}catch(a){throw gr(a,{[r]:e})}}async function i9(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Ws(n,await Zs.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ks(n);r&&await r}}async function t_(e){e=hn(e);const{fs:t,path:n}=Un(e,this);try{if(Ra&&!mr(this,await t.stat(n),ia))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),ti(this,"rename",e.toString())}catch(r){throw gr(r,{[n]:e})}}async function Zp(e,t,n){var r;t=hn(t);const a=rd(n.mode,420),i=dc(n.flag),{fullPath:s,fs:o,path:l,stats:c}=await Dx(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&H1))throw Ue.With("ENOENT",s,"_open");const h=await o.stat(sr(l));if(!mr(e,h,ia))throw Ue.With("EACCES",sr(s),"_open");if(!So(h))throw Ue.With("ENOTDIR",sr(s),"_open");const{euid:p,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Ao.credentials,v=await o.createFile(l,{mode:a,uid:h.mode&Ay?h.uid:p,gid:h.mode&Ny?h.gid:g});return new gi(e,Ix(new Rx(e,t,o,l,i,v)))}if(!mr(e,c,$$(i)))throw Ue.With("EACCES",s,"_open");if(i&q1)throw Ue.With("EEXIST",s,"_open");const d=new gi(e,Ix(new Rx(e,t,o,l,i,c)));return i&G1&&await d.truncate(0),d}async function Zs(e,t="r",n=420){return await Zp(this,e,{flag:t,mode:n})}async function n_(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=uc(t,null,"r",292);return await Ws(n,typeof e=="object"&&"fd"in e?e:await Zs.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ks(n);r&&await r}}async function r_(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=uc(n,"utf8","w+",420),i=Ws(r,e instanceof gi?e:await Zs.call(this,e.toString(),a.flag,a.mode),!0),s=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof s!="string"&&!(s instanceof Uint8Array))throw new Ue(lt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ks(r);a&&await a}}async function s9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=uc(n,"utf8","a",420);if(!(dc(a.flag)&vf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Ws(r,typeof e=="object"&&"fd"in e?e:await Zs.call(this,e,a.flag,a.mode),!0).appendFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ks(r);a&&await a}}async function kN(e){e=await od.call(this,e);const{fs:t,path:n}=Un(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!So(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Ra&&!mr(this,r,ia))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),ti(this,"rename",e.toString())}catch(r){throw gr(r,{[n]:e})}}async function a_(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ao.credentials;t=typeof t=="object"?t:{mode:t};const s=rd(t==null?void 0:t.mode,511);e=await od.call(this,e);const{fs:o,path:l,root:c}=Un(e,this),d={[l]:e},h=async(p,g)=>{if(!mr(this,g,ia))throw Ue.With("EACCES",sr(p),"mkdir");const v=await o.mkdir(p,{mode:s,uid:g.mode&Ay?g.uid:a,gid:g.mode&Ny?g.gid:i});return ti(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){await h(l,await o.stat(sr(l)));return}const p=[];for(let v=l,b=e;!await o.exists(v);v=sr(v),b=sr(b))p.unshift(v),d[v]=b;if(!p.length)return;const g=[await o.stat(sr(p[0]))];for(const[v,b]of p.entries())g.push(await h(b,g[v]));return c.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(c.length)}catch(p){throw gr(p,d)}}async function Bf(e,t){t=typeof t=="object"?t:{encoding:t},e=await od.call(this,e);const{fs:n,path:r}=Un(e,this),a=await n.stat(r).catch(l=>vr(gr(l,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!mr(this,a,Na))throw Ue.With("EACCES",e,"readdir");if(!So(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>vr(gr(l,{[r]:e}))),s=[],o=async l=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(dr(r,l)).catch(d=>{if(d.code!="ENOENT")throw gr(d,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?s.push(new N0(l,c)):(t==null?void 0:t.encoding)=="buffer"?s.push(Lr.from(l)):s.push(l),!(!(t!=null&&t.recursive)||!So(c))))for(const d of await Bf.call(this,dr(e,l),t))d instanceof N0?(d.path=dr(l,d.path),s.push(d)):Lr.isBuffer(d)?s.push(Lr.from(dr(l,QA(d)))):s.push(dr(l,d))};return await Promise.all(i.map(o)),s}async function o9(e,t){e=hn(e),t=hn(t);const{fs:n,path:r}=Un(e,this),a=Un(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Ra&&!mr(this,await n.stat(sr(r)),Na))throw Ue.With("EACCES",sr(r),"link");if(Ra&&!(await Kp.call(this,sr(t))).hasAccess(ia,this))throw Ue.With("EACCES",sr(t),"link");if(Ra&&!mr(this,await n.stat(r),Na))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw gr(i,{[a.path]:t,[r]:e})}}async function l9(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid symlink type: "+n);if(t=hn(t),await Dy.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=Ws(r,await Zp(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(hn(e,!0)),await a.chmod(Nc)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ks(r);a&&await a}}async function jx(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Ws(n,await Zp(this,hn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Ks(n);r&&await r}}async function c9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ws(r,await Zs.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ks(r);a&&await a}}async function u9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ws(r,await Zp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ks(r);a&&await a}}async function d9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ws(n,await Zs.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ks(n);r&&await r}}async function f9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ws(n,await Zp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ks(n);r&&await r}}async function AN(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ws(r,await Zs.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ks(r);a&&await a}}async function h9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ws(r,await Zp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Ks(r);a&&await a}}async function Dx(e,t,n){if(n){const l=Un(t,e),c=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:c}}try{const l=Un(t,e),c=await l.fs.stat(l.path);if(!Sp(c))return{...l,fullPath:t,stats:c};const d=vc.call(e,sr(t),(await jx.call(e,t)).toString());return await Dx(e,d)}catch{}const{base:r,dir:a}=Jo(t),i=a=="/"?"/":await od.call(e,a),s=dr(i,r),o=Un(s,e);try{const l=await o.fs.stat(o.path);if(!Sp(l))return{...o,fullPath:s,stats:l};const c=vc.call(e,i,(await jx.call(e,s)).toString());return await Dx(e,c)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw gr(l,{[o.path]:s})}}async function od(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=await Dx(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Lr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function Doe(e,t={}){const n=new V$(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(s,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:s,filename:o},done:!1})});function i(){a=!0,n.close();for(const s of r)s({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:s,resolve:o}=Promise.withResolvers();return r.push(o),s},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function p9(e,t=sN){if(!(await Kp.call(this,e)).hasAccess(t,this))throw new Ue(lt.EACCES)}async function NN(e,t){e=hn(e);const n=await e_.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&kr){case va:if(t!=null&&t.recursive)for(const r of await Bf.call(this,e))await NN.call(this,dr(e,r),t);await kN.call(this,e);break;case go:case Nc:case Df:case Mf:await t_.call(this,e);break;case Of:case jf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}async function m9(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await a_.call(this,a),n=="buffer"?Lr.from(a):a}async function RN(e,t,n){if(e=hn(e),t=hn(t),n&&n&oN&&await Dy.call(this,t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");await r_.call(this,t,await n_.call(this,e)),ti(this,"rename",t.toString())}function g9(e,t){return e=hn(e),Promise.resolve(new wN(e,this))}async function IN(e,t,n){e=hn(e),t=hn(t);const r=await e_.call(this,e);if(n!=null&&n.errorOnExist&&await Dy.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&kr){case va:{if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([Bf.call(this,e,{withFileTypes:!0}),a_.call(this,t,{recursive:!0})]),i=async s=>{n.filter&&!n.filter(dr(e,s.name),dr(t,s.name))||await IN.call(this,dr(e,s.name),dr(t,s.name),n)};await Promise.all(a.map(i));break}case go:case Nc:await RN.call(this,e,t);break;case Df:case Mf:case Of:case jf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await AN.call(this,t,r.atime,r.mtime)}async function y9(e,t){e=hn(e);const{fs:n}=Un(e,this);return Promise.resolve(z$(n,t==null?void 0:t.bigint))}function b9(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*s(o){const l=await Bf(o,{withFileTypes:r,encoding:"utf8"});for(const c of l){const d=r?c.path:o+"/"+c;a(r?c:d)||((await Kp(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*s(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?c:d.replace(/^\/+/g,"")))}}return s(n)}const Moe=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:gi,access:p9,appendFile:s9,chmod:d9,chown:c9,constants:D$,copyFile:RN,cp:IN,exists:Dy,glob:b9,lchmod:f9,lchown:u9,link:o9,lstat:e_,lutimes:h9,mkdir:a_,mkdtemp:m9,open:Zs,opendir:g9,readFile:n_,readdir:Bf,readlink:jx,realpath:od,rename:a9,rm:NN,rmdir:kN,stat:Kp,statfs:y9,symlink:l9,truncate:i9,unlink:t_,utimes:AN,watch:Doe,writeFile:r_},Symbol.toStringTag,{value:"Module"})),jn=()=>{};async function Ooe(e){const t=[];for await(const n of e)t.push(n);return t}function Poe(e,t,n=jn){a9.call(this,e,t).then(()=>n()).catch(n)}function Foe(e,t=jn){Dy.call(this,e).then(t).catch(()=>t(!1))}function Loe(e,t,n=jn){n=typeof t=="function"?t:n,Kp.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function $oe(e,t,n=jn){n=typeof t=="function"?t:n,e_.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function Boe(e,t=0,n=jn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;i9.call(this,e,r).then(()=>n()).catch(n)}function zoe(e,t=jn){t_.call(this,e).then(()=>t()).catch(t)}function Uoe(e,t,n,r=jn){const a=rd(n,420);r=typeof n=="function"?n:r,Zs.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function Voe(e,t,n=jn){n=typeof t=="function"?t:n,n_.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Hoe(e,t,n,r=jn){r=typeof n=="function"?n:r,r_.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function qoe(e,t,n,r=jn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,s9.call(this,e,t,a).then(()=>r()).catch(r)}function Goe(e,t,n=jn){n=typeof t=="function"?t:n,new gi(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Pf(r):r)).catch(n)}function Woe(e,t=jn){new gi(this,e).close().then(()=>t()).catch(t)}function Koe(e,t,n=jn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new gi(this,e);if(r<0)throw new Ue(lt.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function Zoe(e,t=jn){new gi(this,e).sync().then(()=>t()).catch(t)}function Yoe(e,t=jn){new gi(this,e).datasync().then(()=>t()).catch(t)}function Xoe(e,t,n,r,a,i=jn){let s,o,l,c,d;const h=new gi(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":c=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(lt.EINVAL,"Invalid arguments"));return}s=Lr.from(t),o=0,l=s.length;const p=i;h.write(s,o,l,c).then(({bytesWritten:g})=>p(void 0,g,s.toString(d))).catch(p)}else{s=Lr.from(t.buffer),o=n,l=r,c=typeof a=="number"?a:null;const p=typeof a=="function"?a:i;h.write(s,o,l,c).then(({bytesWritten:g})=>p(void 0,g,s)).catch(p)}}function Joe(e,t,n,r,a,i=jn){new gi(this,e).read(t,n,r,a).then(({bytesRead:s,buffer:o})=>i(void 0,s,o)).catch(i)}function Qoe(e,t,n,r=jn){new gi(this,e).chown(t,n).then(()=>r()).catch(r)}function ele(e,t,n){new gi(this,e).chmod(t).then(()=>n()).catch(n)}function tle(e,t,n,r=jn){new gi(this,e).utimes(t,n).then(()=>r()).catch(r)}function nle(e,t=jn){kN.call(this,e).then(()=>t()).catch(t)}function rle(e,t,n=jn){a_.call(this,e,t).then(()=>n()).catch(n)}function ale(e,t,n=jn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};Bf.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function ile(e,t,n=jn){o9.call(this,e,t).then(()=>n()).catch(n)}function sle(e,t,n,r=jn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,l9.call(this,e,t,a).then(()=>r()).catch(r)}function ole(e,t,n=jn){n=typeof t=="function"?t:n,jx.call(this,e).then(r=>n(void 0,r)).catch(n)}function lle(e,t,n,r=jn){c9.call(this,e,t,n).then(()=>r()).catch(r)}function cle(e,t,n,r=jn){u9.call(this,e,t,n).then(()=>r()).catch(r)}function ule(e,t,n=jn){d9.call(this,e,t).then(()=>n()).catch(n)}function dle(e,t,n=jn){f9.call(this,e,t).then(()=>n()).catch(n)}function fle(e,t,n,r=jn){AN.call(this,e,t,n).then(()=>r()).catch(r)}function hle(e,t,n,r=jn){h9.call(this,e,t,n).then(()=>r()).catch(r)}function ple(e,t,n=jn){n=typeof t=="function"?t:n,od.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function mle(e,t,n=jn){const r=typeof t=="number"?t:Na;n=typeof t=="function"?t:n,p9.call(this,e,r).then(()=>n()).catch(n)}const Kh=new Map;function gle(e,t,n){const r=hn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(lt.EINVAL,"No listener specified",e.toString(),"watchFile");if(Kh.has(r)){const s=Kh.get(r);s&&s.listeners.add(n);return}const i=new noe(this,r,a);i.on("change",(s,o)=>{const l=Kh.get(r);if(l)for(const c of l.listeners)c(s,o)}),Kh.set(r,{watcher:i,listeners:new Set})}function yle(e,t=jn){const n=hn(e),r=Kh.get(n);r&&(t&&t!==jn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Kh.delete(n)))}function ble(e,t,n){const r=new V$(this,hn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||jn),r}function vle(e,t){t=typeof t=="object"?t:{encoding:t};const n=Zs.call(this,e,"r",t==null?void 0:t.mode);return new CN({...t,autoClose:!0},n)}function wle(e,t){t=typeof t=="object"?t:{encoding:t};const n=Zs.call(this,e,"w",t==null?void 0:t.mode);return new TN(t,n)}function xle(e,t,n=jn){n=typeof t=="function"?t:n,NN.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function _le(e,t,n=jn){n=typeof t=="function"?t:n,m9.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function Sle(e,t,n,r=jn){r=typeof n=="function"?n:r,RN.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function Ele(e,t,n,r=jn){r=typeof n=="function"?n:r,new gi(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function Cle(e,t,n,r=jn){r=typeof n=="function"?n:r,new gi(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function Tle(e,t,n=jn){n=typeof t=="function"?t:n,g9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function kle(e,t,n,r=jn){r=typeof n=="function"?n:r,IN.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function Ale(e,t,n=jn){n=typeof t=="function"?t:n,y9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function Nle(e,t){const n=await Zs.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function Rle(e,t,n=jn){n=typeof t=="function"?t:n;const r=b9.call(this,e,typeof t=="function"?void 0:t);Ooe(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Bd=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}c&&Object.defineProperty(c,r.name,d),p=!0},ds=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},Ile=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Mx;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Mx||(Mx={}));let v9=(()=>{var e,t,n,r,a;let i=[If()],s,o=[],l,c,d=[],h=[],p,g=[],v=[],b,x=[],w=[],S,E=[],C=[],k,j=[],I=[],N,P=[],L=[];return l=class{constructor(H=vr(new Ue(lt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=ds(this,d,0),this.extsize=(ds(this,h),ds(this,g,0)),this.nextents=(ds(this,v),ds(this,x,0)),this.projid=(ds(this,w),ds(this,E,0)),this.cowextsize=(ds(this,C),ds(this,j,0)),this.pad=(ds(this,I),ds(this,P,[])),ds(this,L),this.extsize=H.size,this.nextents=1,this.projid=H.uid,this.cowextsize=H.size;for(const M of Object.keys(Gi))H.flags&Gi[M]&&M in Mx&&(this.xflags|=Mx[M])}},Ile(l,"fsxattr"),(()=>{const H=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=xn).uint32.bind(e)],p=[(t=xn).uint32.bind(t)],b=[(n=xn).uint32.bind(n)],S=[(r=xn).uint32.bind(r)],k=[(a=xn).uint32.bind(a)],N=[xn.char(8)],Bd(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:M=>"xflags"in M,get:M=>M.xflags,set:(M,Z)=>{M.xflags=Z}},metadata:H},d,h),Bd(null,null,p,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:M=>"extsize"in M,get:M=>M.extsize,set:(M,Z)=>{M.extsize=Z}},metadata:H},g,v),Bd(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:M=>"nextents"in M,get:M=>M.nextents,set:(M,Z)=>{M.nextents=Z}},metadata:H},x,w),Bd(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:M=>"projid"in M,get:M=>M.projid,set:(M,Z)=>{M.projid=Z}},metadata:H},E,C),Bd(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:M=>"cowextsize"in M,get:M=>M.cowextsize,set:(M,Z)=>{M.cowextsize=Z}},metadata:H},j,I),Bd(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:M=>"pad"in M,get:M=>M.pad,set:(M,Z)=>{M.pad=Z}},metadata:H},P,L),Bd(null,s={value:l},i,{kind:"class",name:l.name,metadata:H},null,o),l=s.value,H&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H}),ds(l,o)})(),l})();var Vr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Vr||(Vr={}));var uo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(uo||(uo={}));async function jle(e,t,...n){e=hn(e);const{fs:r,path:a}=Un(e,this);try{const i=new ba(await r.stat(a));switch(t){case Vr.GetFlags:case uo.GetFlags:return i.flags;case Vr.SetFlags:case uo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Vr.GetVersion:case uo.GetVersion:return i.version;case Vr.SetVersion:case uo.SetVersion:i.version=n[0],await r.touch(a,i);return;case Vr.Fiemap:break;case Vr.GetXattr:return new v9(i);case Vr.SetXattr:break;case Vr.GetLabel:return r.label;case Vr.SetLabel:r.label=n[0];return;case Vr.GetUUID:return r.uuid;case Vr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw gr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function Dle(e,t,...n){e=hn(e);const{fs:r,path:a}=Un(e,this);try{const i=new ba(r.statSync(a));switch(t){case Vr.GetFlags:case uo.GetFlags:return i.flags;case Vr.SetFlags:case uo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Vr.GetVersion:case uo.GetVersion:return i.version;case Vr.SetVersion:case uo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Vr.Fiemap:break;case Vr.GetXattr:return new v9(i);case Vr.SetXattr:break;case Vr.GetLabel:return r.label;case Vr.SetLabel:r.label=n[0];return;case Vr.GetUUID:return r.uuid;case Vr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw gr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const Mle=[];function Yp(e,t,n,r){if(!t.startsWith("user.")&&!Mle.includes(t))throw new Ue(lt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function Ole(e,t,n={}){var r;e=hn(e);const{fs:a,path:i}=Un(e,this);Yp(this,t,e,"xattr.get");try{const s=await a.stat(i);if(Ra&&!mr(this,s,Na))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new Hu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Lr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw gr(s,{[i]:e})}}function Ple(e,t,n={}){var r;e=hn(e),Yp(this,t,e,"xattr.get");const{fs:a,path:i}=Un(e,this);try{const s=a.statSync(i);if(Ra&&!mr(this,s,Na))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new Hu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Lr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw gr(s,{[i]:e})}}async function Fle(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Un(e,this);Yp(this,t,e,"xattr.set");try{const o=await i.stat(s);if(Ra&&!mr(this,o,ia))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new Hu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Lr.from(n)),await i.touch(s,Rf(o,"attributes"))}catch(o){throw gr(o,{[s]:e})}}function Lle(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Un(e,this);Yp(this,t,e,"xattr.set");try{const o=i.statSync(s);if(Ra&&!mr(this,o,ia))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new Hu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Lr.from(n)),i.touchSync(s,Rf(o,"attributes"))}catch(o){throw gr(o,{[s]:e})}}async function $le(e,t){var n;e=hn(e);const{fs:r,path:a}=Un(e,this);Yp(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(Ra&&!mr(this,i,ia))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Hu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,Rf(i,"attributes"))}catch(i){throw gr(i,{[a]:e})}}function Ble(e,t){var n;e=hn(e);const{fs:r,path:a}=Un(e,this);Yp(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(Ra&&!mr(this,i,ia))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Hu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,Rf(i,"attributes"))}catch(i){throw gr(i,{[a]:e})}}async function zle(e){e=hn(e);const{fs:t,path:n}=Un(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw gr(r,{[n]:e})}}function Ule(e){e=hn(e);const{fs:t,path:n}=Un(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw gr(r,{[n]:e})}}const Vle=Object.freeze(Object.defineProperty({__proto__:null,get:Ole,getSync:Ple,list:zle,listSync:Ule,remove:$le,removeSync:Ble,set:Fle,setSync:Lle},Symbol.toStringTag,{value:"Module"})),Ka=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:Lse,Dir:wN,Dirent:N0,get IOC(){return Vr},get IOC32(){return uo},ReadStream:CN,Stats:Rc,StatsFs:Fse,WriteStream:TN,access:mle,accessSync:xoe,appendFile:qoe,appendFileSync:ooe,chmod:ule,chmodSync:boe,chown:lle,chownSync:goe,chroot:eoe,close:Woe,closeSync:Lf,constants:D$,copyFile:Sle,copyFileSync:K$,cp:kle,cpSync:Z$,createReadStream:vle,createWriteStream:wle,exists:Foe,existsSync:dN,fchmod:ele,fchmodSync:yN,fchown:Qoe,fchownSync:gN,fdatasync:Yoe,fdatasyncSync:doe,fstat:Goe,fstatSync:loe,fsync:Zoe,fsyncSync:uoe,ftruncate:Koe,ftruncateSync:coe,futimes:tle,futimesSync:bN,glob:Rle,globSync:koe,ioctl:jle,ioctlSync:Dle,lchmod:dle,lchmodSync:voe,lchown:cle,lchownSync:yoe,link:ile,linkSync:poe,lopenSync:Z1,lstat:$oe,lstatSync:fN,lutimes:hle,lutimesSync:woe,mkdir:rle,mkdirSync:vN,mkdtemp:_le,mkdtempSync:_oe,mount:uN,open:Uoe,openAsBlob:Nle,openSync:K1,opendir:Tle,opendirSync:Coe,promises:Moe,read:Joe,readFile:Voe,readFileSync:pN,readSync:hoe,readdir:ale,readdirSync:Gp,readlink:ole,readlinkSync:uk,readv:Ele,readvSync:Soe,realpath:ple,realpathSync:ad,rename:Poe,renameSync:ioe,rm:xle,rmSync:W$,rmdir:nle,rmdirSync:q$,stat:Loe,statSync:qu,statfs:Ale,statfsSync:Toe,symlink:sle,symlinkSync:moe,truncate:Boe,truncateSync:soe,umount:B$,unlink:zoe,unlinkSync:hN,unwatchFile:yle,utimes:fle,utimesSync:G$,watch:ble,watchFile:gle,write:Xoe,writeFile:Hoe,writeFileSync:mN,writeSync:foe,writev:Cle,writevSync:Eoe,xattr:Vle},Symbol.toStringTag,{value:"Module"}));function NM(e){return _$(e)||iN(e)||e instanceof cN}async function w9(e,t=0){if(typeof e!="object"||e==null)throw qi(new Ue(lt.EINVAL,"Invalid options on mount configuration"));if(!NM(e))throw qi(new Ue(lt.EINVAL,"Invalid mount configuration"));if(e instanceof cN)return await e.ready(),e;iN(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&NM(i)){if(x$("Resolving nested mount configuration: "+a),t>10)throw qi(new Ue(lt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await w9(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw qi(new Ue(lt.EPERM,"Backend not available: "+n.name));wse(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function Hle(e){if(!_$(e))throw new TypeError("Invalid single mount point configuration");const t=await w9(e);B$("/"),uN("/",t)}const qle=["delete"];Math.max(...qle.map(e=>e.length));vse("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const x9=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;x9[e]=t}function Gle(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^x9[(t^e[n])&255];return(t^4294967295)>>>0}var Ur=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}c&&Object.defineProperty(c,r.name,d),p=!0},kn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},jN=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let RM=(()=>{var e,t,n,r;let a=[If()],i,s=[],o,l,c=[],d=[],h,p=[],g=[],v,b=[],x=[],w,S=[],E=[];return o=class{constructor(){this.id=kn(this,c,0),this.offset_=(kn(this,d),kn(this,p,0)),this.offset=(kn(this,g),kn(this,b,0)),this.size=(kn(this,x),kn(this,S,0)),kn(this,E)}},jN(o,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],w=[(r=xn).uint32.bind(r)],Ur(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,j)=>{k.id=j}},metadata:C},c,d),Ur(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,j)=>{k.offset_=j}},metadata:C},p,g),Ur(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,j)=>{k.offset=j}},metadata:C},b,x),Ur(null,null,w,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,j)=>{k.size=j}},metadata:C},S,E),Ur(null,i={value:o},a,{kind:"class",name:o.name,metadata:C},null,s),o=i.value,C&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),kn(o,s)})(),o})();const IM=255;let zd=(()=>{var e,t,n,r;let a=[If()],i,s=[],o,l,c=[],d=[],h,p=[],g=[],v,b=[],x=[],w,S=[],E=[],C,k=[],j=[];var I=o=class{constructor(N=vr(new Ue(lt.EINVAL,"Metadata block must be initialized with a superblock")),P=0){if(this.superblock=N,this.offset=P,this.checksum=kn(this,c,0),this.timestamp=(kn(this,d),kn(this,p,Date.now())),this.previous_offset_=(kn(this,g),kn(this,b,0)),this.previous_offset=(kn(this,x),kn(this,S,0)),this._previous=kn(this,E),this.entries=kn(this,k,Array.from({length:IM},()=>new RM)),kn(this,j),this.superblock=N,this.offset=P,!!P&&(U1(this,N.store._buffer.subarray(P,P+Hr(I))),!_9(this)))throw V1(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+P.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new I(this.superblock,this.previous_offset)),this._previous}};return jN(o,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],w=[(r=xn).uint32.bind(r)],C=[C0(RM,IM)],Ur(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:P=>"checksum"in P,get:P=>P.checksum,set:(P,L)=>{P.checksum=L}},metadata:N},c,d),Ur(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:P=>"timestamp"in P,get:P=>P.timestamp,set:(P,L)=>{P.timestamp=L}},metadata:N},p,g),Ur(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:P=>"previous_offset_"in P,get:P=>P.previous_offset_,set:(P,L)=>{P.previous_offset_=L}},metadata:N},b,x),Ur(null,null,w,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:P=>"previous_offset"in P,get:P=>P.previous_offset,set:(P,L)=>{P.previous_offset=L}},metadata:N},S,E),Ur(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:P=>"entries"in P,get:P=>P.entries,set:(P,L)=>{P.entries=L}},metadata:N},k,j),Ur(null,i={value:o},a,{kind:"class",name:o.name,metadata:N},null,s),I=o=i.value,N&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),kn(o,s)})(),I=o})();const jM=2049864546;(()=>{var e,t,n,r,a,i,s,o,l,c,d;let h=[If()],p,g=[],v,b,x=[],w=[],S,E=[],C=[],k,j=[],I=[],N,P=[],L=[],H,M=[],Z=[],q,ue=[],ae=[],ee,X=[],ie=[],B,J=[],Q=[],ne,he=[],de=[],Ie,Te=[],Ae=[],Ee,Pe=[],Qe=[],Le,je=[],z=[],Se,Ne=[],fe=[];var se=v=class{constructor(te=vr(new Ue(lt.EINVAL,"Super block must be initialized with a store"))){if(this.store=te,this.checksum=kn(this,x,0),this.magic=(kn(this,w),kn(this,E,jM)),this.version=(kn(this,C),kn(this,j,1)),this.inode_format=(kn(this,I),kn(this,P,Bse)),this.flags=(kn(this,L),kn(this,M,0)),this.used_bytes=(kn(this,Z),kn(this,ue,BigInt(0))),this.total_bytes=(kn(this,ae),kn(this,X,BigInt(0))),this.uuid=(kn(this,ie),kn(this,J,BigInt(0))),this.metadata_block_size=(kn(this,Q),kn(this,he,Hr(zd))),this.metadata_offset_=(kn(this,de),kn(this,Te,0)),this.metadata_offset=(kn(this,Ae),kn(this,Pe,0)),this.metadata=kn(this,Qe),this.label=kn(this,je,""),this._padding=(kn(this,z),kn(this,Ne,new Array(132).fill(0))),kn(this,fe),this.store=te,te._view.getUint32(rse(se,"magic"),!0)!=jM){fi("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new zd(this),this.metadata.offset=Hr(se),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Hr(se)+Hr(zd)),this.total_bytes=BigInt(te._buffer.byteLength),te._write(this),te._write(this.metadata);return}if(U1(this,te._buffer.subarray(0,Hr(se))),!_9(this))throw V1(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new zd(this,this.metadata_offset)}rotateMetadata(){const te=new zd(this);return te.offset=Number(this.used_bytes),te.previous_offset=this.metadata_offset,this.metadata=te,this.metadata_offset=te.offset,this.store._write(te),this.used_bytes+=BigInt(Hr(zd)),this.store._write(this),te}isUnused(te,xe){if(!xe)return!0;if(te+xe>this.total_bytes||te<Hr(se))return!1;for(let Fe=this.metadata;Fe;Fe=Fe.previous){if(te<Fe.offset+Hr(zd)&&te+xe>Fe.offset)return!1;for(const Ce of Fe.entries)if(Ce.offset&&(te>=Ce.offset&&te<Ce.offset+Ce.size||te+xe>Ce.offset&&te+xe<=Ce.offset+Ce.size||te<=Ce.offset&&te+xe>=Ce.offset+Ce.size))return!1}return!0}};return jN(v,"SuperBlock"),(()=>{const te=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=xn).uint32.bind(e)],S=[(t=xn).uint32.bind(t)],k=[(n=xn).uint16.bind(n)],N=[(r=xn).uint16.bind(r)],H=[(a=xn).uint32.bind(a)],q=[(i=xn).uint64.bind(i)],ee=[(s=xn).uint64.bind(s)],B=[(o=xn).uint128.bind(o)],ne=[(l=xn).uint32.bind(l)],Ie=[(c=xn).uint32.bind(c)],Ee=[(d=xn).uint32.bind(d)],Le=[xn.char(64)],Se=[xn.char(132)],Ur(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Fe)=>{xe.checksum=Fe}},metadata:te},x,w),Ur(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Fe)=>{xe.magic=Fe}},metadata:te},E,C),Ur(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Fe)=>{xe.version=Fe}},metadata:te},j,I),Ur(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Fe)=>{xe.inode_format=Fe}},metadata:te},P,L),Ur(null,null,H,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Fe)=>{xe.flags=Fe}},metadata:te},M,Z),Ur(null,null,q,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Fe)=>{xe.used_bytes=Fe}},metadata:te},ue,ae),Ur(null,null,ee,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Fe)=>{xe.total_bytes=Fe}},metadata:te},X,ie),Ur(null,null,B,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Fe)=>{xe.uuid=Fe}},metadata:te},J,Q),Ur(null,null,ne,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Fe)=>{xe.metadata_block_size=Fe}},metadata:te},he,de),Ur(null,null,Ie,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Fe)=>{xe.metadata_offset_=Fe}},metadata:te},Te,Ae),Ur(null,null,Ee,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Fe)=>{xe.metadata_offset=Fe}},metadata:te},Pe,Qe),Ur(null,null,Le,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Fe)=>{xe.label=Fe}},metadata:te},je,z),Ur(null,null,Se,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Fe)=>{xe._padding=Fe}},metadata:te},Ne,fe),Ur(null,p={value:v},h,{kind:"class",name:v.name,metadata:te},null,g),se=v=p.value,te&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:te}),kn(v,g)})(),se=v})();function _9(e){const t=Qa(e),n=Gle(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Ka;function Wle(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function fk(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?lt[Wle(e)]:lt.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Zh(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(fk(e.error))}})}class Kle extends ck{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Zh(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Zh(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Zh(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Zh(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(fk(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(fk(this.tx.error)),this.tx.abort(),t}}async function Zle(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(fi("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Zh(n)}class Yle{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new Kle(t,this)}}const Xle={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Zh(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await Zle(e.storeName||"zenfs",e.idbFactory),n=new Yle(t),r=new F$(n);if(e!=null&&e.disableAsyncCache)return aN("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},Jle=Xle;function hw(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var GE={exports:{}},DM;function Qle(){return DM||(DM=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function s(c,d){if(!a[c]){if(!r[c]){var h=typeof hw=="function"&&hw;if(!d&&h)return h(c,!0);if(o)return o(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(v){var b=r[c][1][v];return s(b||v)},g,g.exports,n,r,a,i)}return a[c].exports}for(var o=typeof hw=="function"&&hw,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,r,a){var i=n("./utils"),s=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var c,d,h,p,g,v,b,x=[],w=0,S=l.length,E=S,C=i.getTypeOf(l)!=="string";w<l.length;)E=S-w,h=C?(c=l[w++],d=w<S?l[w++]:0,w<S?l[w++]:0):(c=l.charCodeAt(w++),d=w<S?l.charCodeAt(w++):0,w<S?l.charCodeAt(w++):0),p=c>>2,g=(3&c)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,x.push(o.charAt(p)+o.charAt(g)+o.charAt(v)+o.charAt(b));return x.join("")},a.decode=function(l){var c,d,h,p,g,v,b=0,x=0,w="data:";if(l.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=s.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)c=o.indexOf(l.charAt(b++))<<2|(p=o.indexOf(l.charAt(b++)))>>4,d=(15&p)<<4|(g=o.indexOf(l.charAt(b++)))>>2,h=(3&g)<<6|(v=o.indexOf(l.charAt(b++))),S[x++]=c,g!==64&&(S[x++]=d),v!==64&&(S[x++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),s=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(d,h,p,g,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=g,this.compressedContent=v}c.prototype={getContentWorker:function(){var d=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,h,p){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),s=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(c,d,h,p){var g=s,v=p+h;c^=-1;for(var b=p;b<v;b++)c=c>>>8^g[255&(c^d[b])];return-1^c}(0|l,o,o.length,0):function(c,d,h,p){var g=s,v=p+h;c^=-1;for(var b=p;b<v;b++)c=c>>>8^g[255&(c^d.charCodeAt(b))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),c=i?"uint8array":"array";function d(h,p){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var b,x="";for(b=0;b<v;b++)x+=String.fromCharCode(255&g),g>>>=8;return x}function s(g,v,b,x,w,S){var E,C,k=g.file,j=g.compression,I=S!==c.utf8encode,N=o.transformTo("string",S(k.name)),P=o.transformTo("string",c.utf8encode(k.name)),L=k.comment,H=o.transformTo("string",S(L)),M=o.transformTo("string",c.utf8encode(L)),Z=P.length!==k.name.length,q=M.length!==L.length,ue="",ae="",ee="",X=k.dir,ie=k.date,B={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(B.crc32=g.crc32,B.compressedSize=g.compressedSize,B.uncompressedSize=g.uncompressedSize);var J=0;v&&(J|=8),I||!Z&&!q||(J|=2048);var Q=0,ne=0;X&&(Q|=16),w==="UNIX"?(ne=798,Q|=function(de,Ie){var Te=de;return de||(Te=Ie?16893:33204),(65535&Te)<<16}(k.unixPermissions,X)):(ne=20,Q|=function(de){return 63&(de||0)}(k.dosPermissions)),E=ie.getUTCHours(),E<<=6,E|=ie.getUTCMinutes(),E<<=5,E|=ie.getUTCSeconds()/2,C=ie.getUTCFullYear()-1980,C<<=4,C|=ie.getUTCMonth()+1,C<<=5,C|=ie.getUTCDate(),Z&&(ae=i(1,1)+i(d(N),4)+P,ue+="up"+i(ae.length,2)+ae),q&&(ee=i(1,1)+i(d(H),4)+M,ue+="uc"+i(ee.length,2)+ee);var he="";return he+=`
\0`,he+=i(J,2),he+=j.magic,he+=i(E,2),he+=i(C,2),he+=i(B.crc32,4),he+=i(B.compressedSize,4),he+=i(B.uncompressedSize,4),he+=i(N.length,2),he+=i(ue.length,2),{fileRecord:h.LOCAL_FILE_HEADER+he+N+ue,dirRecord:h.CENTRAL_FILE_HEADER+i(ne,2)+he+i(H.length,2)+"\0\0\0\0"+i(Q,4)+i(x,4)+N+ue+H}}var o=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),d=n("../crc32"),h=n("../signature");function p(g,v,b,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=x,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(p,l),p.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-x-1))/b:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=s(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=s(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(x){return h.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,x=function(w,S,E,C,k){var j=o.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(w,2)+i(w,2)+i(S,4)+i(E,4)+i(j.length,2)+j}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var v=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),s=n("./ZipFileWorker");a.generateWorker=function(o,l,c){var d=new s(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{o.forEach(function(p,g){h++;var v=function(S,E){var C=S||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(g.options.compression,l.compression),b=g.options.compressionOptions||l.compressionOptions||{},x=g.dir,w=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:p,dir:x,date:w,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),s=n("./external"),o=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(p){return new s.Promise(function(g,v){var b=p.decompressed.getContentWorker().pipe(new c);b.on("error",function(x){v(x)}).on("end",function(){b.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(p,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(p)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(b){var x=new l(g);return x.load(b),x}).then(function(b){var x=[s.Promise.resolve(b)],w=b.files;if(g.checkCRC32)for(var S=0;S<w.length;S++)x.push(h(w[S]));return s.Promise.all(x)}).then(function(b){for(var x=b.shift(),w=x.files,S=0;S<w.length;S++){var E=w[S],C=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(k).unsafeOriginalName=C)}return x.zipComment.length&&(v.comment=x.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),s=n("../stream/GenericWorker");function o(l,c){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(o,s),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function s(o,l,c){i.call(this,l),this._helper=o;var d=this;o.on("data",function(h,p){d.push(h)||d._helper.pause(),c&&c(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Qt<"u",newBufferFrom:function(i,s){if(Qt.from&&Qt.from!==Uint8Array.from)return Qt.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Qt(i,s)},allocBuffer:function(i){if(Qt.alloc)return Qt.alloc(i);var s=new Qt(i);return s.fill(0),s},isBuffer:function(i){return Qt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,j,I){var N,P=o.getTypeOf(j),L=o.extend(I||{},d);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(k=w(k)),L.createFolders&&(N=x(k))&&S.call(this,N,!0);var H=P==="string"&&L.binary===!1&&L.base64===!1;I&&I.binary!==void 0||(L.binary=!H),(j instanceof h&&j.uncompressedSize===0||L.dir||!j||j.length===0)&&(L.base64=!1,L.binary=!0,j="",L.compression="STORE",P="string");var M=null;M=j instanceof h||j instanceof l?j:v.isNode&&v.isStream(j)?new b(k,j):o.prepareContent(k,j,L.binary,L.optimizedBinaryString,L.base64);var Z=new p(k,M,L);this.files[k]=Z}var s=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),x=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var j=k.lastIndexOf("/");return 0<j?k.substring(0,j):""},w=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},S=function(k,j){return j=j!==void 0?j:d.createFolders,k=w(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:j}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var j,I,N;for(j in this.files)N=this.files[j],(I=j.slice(this.root.length,j.length))&&j.slice(0,this.root.length)===this.root&&k(I,N)},filter:function(k){var j=[];return this.forEach(function(I,N){k(I,N)&&j.push(N)}),j},file:function(k,j,I){if(arguments.length!==1)return k=this.root+k,i.call(this,k,j,I),this;if(E(k)){var N=k;return this.filter(function(L,H){return!H.dir&&N.test(L)})}var P=this.files[this.root+k];return P&&!P.dir?P:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(P,L){return L.dir&&k.test(P)});var j=this.root+k,I=S.call(this,j),N=this.clone();return N.root=I.name,N},remove:function(k){k=this.root+k;var j=this.files[k];if(j||(k.slice(-1)!=="/"&&(k+="/"),j=this.files[k]),j&&!j.dir)delete this.files[k];else for(var I=this.filter(function(P,L){return L.name.slice(0,k.length)===k}),N=0;N<I.length;N++)delete this.files[I[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var j,I={};try{if((I=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");o.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var N=I.comment||this.comment||"";j=g.generateWorker(this,I,N)}catch(P){(j=new l("error")).error(P)}return new c(j,I.type||"string",I.mimeType)},generateAsync:function(k,j){return this.generateInternalStream(k).accumulate(j)},generateNodeStream:function(k,j){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(j)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===c&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),p=this.readData(4);return l===p[0]&&c===p[1]&&d===p[2]&&h===p[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),s=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||s.uint8array?p==="nodebuffer"?new c(h):s.uint8array?new d(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),s=n("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),s=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,s),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}s.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=i.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),s=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),c=n("../support"),d=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,b){return new d.Promise(function(x,w){var S=[],E=v._internalType,C=v._outputType,k=v._mimeType;v.on("data",function(j,I){S.push(j),b&&b(I)}).on("error",function(j){S=[],w(j)}).on("end",function(){try{var j=function(I,N,P){switch(I){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),P);case"base64":return l.encode(N);default:return i.transformTo(I,N)}}(C,function(I,N){var P,L=0,H=null,M=0;for(P=0;P<N.length;P++)M+=N[P].length;switch(I){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(H=new Uint8Array(M),P=0;P<N.length;P++)H.set(N[P],L),L+=N[P].length;return H;case"nodebuffer":return Qt.concat(N);default:throw new Error("concat : unsupported type '"+I+"'")}}(E,S),k);x(j)}catch(I){w(I)}S=[]}).resume()})}function g(v,b,x){var w=b;switch(b){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=b,this._mimeType=x,i.checkSupport(w),this._worker=v.pipe(new s(w)),v.lock()}catch(S){this._worker=new o("error"),this._worker.error(S)}}g.prototype={accumulate:function(v){return p(this,v)},on:function(v,b){var x=this;return v==="data"?this._worker.on(v,function(w){b.call(x,w.data,w.meta)}):this._worker.on(v,function(){i.delay(b,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Qt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),s=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}a.utf8encode=function(g){return s.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var b,x,w,S,E,C=v.length,k=0;for(S=0;S<C;S++)(64512&(x=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(w=v.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),S++),k+=x<128?1:x<2048?2:x<65536?3:4;for(b=s.uint8array?new Uint8Array(k):new Array(k),S=E=0;E<k;S++)(64512&(x=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(w=v.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),S++),x<128?b[E++]=x:(x<2048?b[E++]=192|x>>>6:(x<65536?b[E++]=224|x>>>12:(b[E++]=240|x>>>18,b[E++]=128|x>>>12&63),b[E++]=128|x>>>6&63),b[E++]=128|63&x);return b}(g)},a.utf8decode=function(g){return s.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,x,w,S,E=v.length,C=new Array(2*E);for(b=x=0;b<E;)if((w=v[b++])<128)C[x++]=w;else if(4<(S=c[w]))C[x++]=65533,b+=S-1;else{for(w&=S===2?31:S===3?15:7;1<S&&b<E;)w=w<<6|63&v[b++],S--;1<S?C[x++]=65533:w<65536?C[x++]=w:(w-=65536,C[x++]=55296|w>>10&1023,C[x++]=56320|1023&w)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)}(g=i.transformTo(s.uint8array?"uint8array":"array",g))},i.inherits(h,l),h.prototype.processChunk=function(g){var v=i.transformTo(s.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var x=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+c[S[C]]>E?C:E}(v),w=v;x!==v.length&&(s.uint8array?(w=v.subarray(0,x),this.leftOver=v.subarray(x,v.length)):(w=v.slice(0,x),this.leftOver=v.slice(x,v.length))),this.push({data:a.utf8decode(w),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,l),p.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),s=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function c(b){return b}function d(b,x){for(var w=0;w<b.length;++w)x[w]=255&b.charCodeAt(w);return x}n("setimmediate"),a.newBlob=function(b,x){a.checkSupport("blob");try{return new Blob([b],{type:x})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(b),w.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,x,w){var S=[],E=0,C=b.length;if(C<=w)return String.fromCharCode.apply(null,b);for(;E<C;)x==="array"||x==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+w,C)))):S.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+w,C)))),E+=w;return S.join("")},stringifyByChar:function(b){for(var x="",w=0;w<b.length;w++)x+=String.fromCharCode(b[w]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function p(b){var x=65536,w=a.getTypeOf(b),S=!0;if(w==="uint8array"?S=h.applyCanBeUsed.uint8array:w==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<x;)try{return h.stringifyByChunk(b,w,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(b)}function g(b,x){for(var w=0;w<b.length;w++)x[w]=b[w];return x}a.applyFromCharCode=p;var v={};v.string={string:c,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,o.allocBuffer(b.length))}},v.array={string:p,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return p(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:c},a.transformTo=function(b,x){if(x=x||"",!b)return x;a.checkSupport(b);var w=a.getTypeOf(x);return v[w][b](x)},a.resolve=function(b){for(var x=b.split("/"),w=[],S=0;S<x.length;S++){var E=x[S];E==="."||E===""&&S!==0&&S!==x.length-1||(E===".."?w.pop():w.push(E))}return w.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var x,w,S="";for(w=0;w<(b||"").length;w++)S+="\\x"+((x=b.charCodeAt(w))<16?"0":"")+x.toString(16).toUpperCase();return S},a.delay=function(b,x,w){setImmediate(function(){b.apply(w||null,x||[])})},a.inherits=function(b,x){function w(){}w.prototype=x.prototype,b.prototype=new w},a.extend=function(){var b,x,w={};for(b=0;b<arguments.length;b++)for(x in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],x)&&w[x]===void 0&&(w[x]=arguments[b][x]);return w},a.prepareContent=function(b,x,w,S,E){return l.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,j){var I=new FileReader;I.onload=function(N){k(N.target.result)},I.onerror=function(N){j(N.target.error)},I.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=s.decode(C):w&&S!==!0&&(C=function(j){return d(j,i.uint8array?new Uint8Array(j.length):new Array(j.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./signature"),l=n("./zipEntry"),c=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(p)+", expected "+s.pretty(h)+")")}},isSignature:function(h,p){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===p;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=c.uint8array?"uint8array":"array",g=s.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=p-g;if(0<v)this.isSignature(p,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),d=n("./compressions"),h=n("./support");function p(g,v){this.options=g,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(x){for(var w in d)if(Object.prototype.hasOwnProperty.call(d,w)&&d[w].magic===x)return d[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,x,w=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<w;)v=g.readInt(2),b=g.readInt(2),x=g.readData(b),this.extraFields[v]={id:v,length:b,value:x};g.setIndex(w)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=s.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var w=s.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,x){this.name=v,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=b,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,x="string";try{if(!v)throw new Error("No output type specified.");var w=(x=v.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!w&&(b=b.pipe(new l.Utf8EncodeWorker)),!S&&w&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new s(b,x,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(x,v,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var s,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var p=new i.MessageChannel;p.port1.onmessage=v,s=function(){p.port2.postMessage(0)}}var g=[];function v(){var b,x;o=!0;for(var w=g.length;w;){for(x=g,g=[],b=-1;++b<w;)x[b]();w=g.length}o=!1}r.exports=function(b){g.push(b)!==1||o||s()}}).call(this,typeof Jd<"u"?Jd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function s(){}var o={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function h(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,w!==s&&b(this,w)}function p(w,S,E){this.promise=w,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(w,S,E){i(function(){var C;try{C=S(E)}catch(k){return o.reject(w,k)}C===w?o.reject(w,new TypeError("Cannot resolve promise with itself")):o.resolve(w,C)})}function v(w){var S=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof S=="function")return function(){S.apply(w,arguments)}}function b(w,S){var E=!1;function C(I){E||(E=!0,o.reject(w,I))}function k(I){E||(E=!0,o.resolve(w,I))}var j=x(function(){S(k,C)});j.status==="error"&&C(j.value)}function x(w,S){var E={};try{E.value=w(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(w){if(typeof w!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(w()).then(function(){return E})},function(E){return S.resolve(w()).then(function(){throw E})})},h.prototype.catch=function(w){return this.then(null,w)},h.prototype.then=function(w,S){if(typeof w!="function"&&this.state===c||typeof S!="function"&&this.state===l)return this;var E=new this.constructor(s);return this.state!==d?g(E,this.state===c?w:S,this.outcome):this.queue.push(new p(E,w,S)),E},p.prototype.callFulfilled=function(w){o.resolve(this.promise,w)},p.prototype.otherCallFulfilled=function(w){g(this.promise,this.onFulfilled,w)},p.prototype.callRejected=function(w){o.reject(this.promise,w)},p.prototype.otherCallRejected=function(w){g(this.promise,this.onRejected,w)},o.resolve=function(w,S){var E=x(v,S);if(E.status==="error")return o.reject(w,E.value);var C=E.value;if(C)b(w,C);else{w.state=c,w.outcome=S;for(var k=-1,j=w.queue.length;++k<j;)w.queue[k].callFulfilled(S)}return w},o.reject=function(w,S){w.state=l,w.outcome=S;for(var E=-1,C=w.queue.length;++E<C;)w.queue[E].callRejected(S);return w},h.resolve=function(w){return w instanceof this?w:o.resolve(new this(s),w)},h.reject=function(w){var S=new this(s);return o.reject(S,w)},h.all=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),j=0,I=-1,N=new this(s);++I<E;)P(w[I],I);return N;function P(L,H){S.resolve(L).then(function(M){k[H]=M,++j!==E||C||(C=!0,o.resolve(N,k))},function(M){C||(C=!0,o.reject(N,M))})}},h.race=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,j=new this(s);++k<E;)I=w[k],S.resolve(I).then(function(N){C||(C=!0,o.resolve(j,N))},function(N){C||(C=!0,o.reject(j,N))});var I;return j}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,g=0,v=8;function b(w){if(!(this instanceof b))return new b(w);this.options=s.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},w||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(l[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?o.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[E]);this._dict_set=!0}}function x(w,S){var E=new b(S);if(E.push(w,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(w,S){var E,C,k=this.strm,j=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof w=="string"?k.input=o.string2buf(w):d.call(w)==="[object ArrayBuffer]"?k.input=new Uint8Array(w):k.input=w,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(j),k.next_out=0,k.avail_out=j),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(k.output,k.next_out))):this.onData(s.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(w){this.chunks.push(w)},b.prototype.onEnd=function(w){w===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Deflate=b,a.deflate=x,a.deflateRaw=function(w,S){return(S=S||{}).raw=!0,x(w,S)},a.gzip=function(w,S){return(S=S||{}).gzip=!0,x(w,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||b&&b.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var w=i.inflateInit2(this.strm,x.windowBits);if(w!==l.Z_OK)throw new Error(c[w]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,x){var w=new g(x);if(w.push(b,!0),w.err)throw w.msg||c[w.err];return w.result}g.prototype.push=function(b,x){var w,S,E,C,k,j,I=this.strm,N=this.options.chunkSize,P=this.options.dictionary,L=!1;if(this.ended)return!1;S=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?I.input=o.binstring2buf(b):p.call(b)==="[object ArrayBuffer]"?I.input=new Uint8Array(b):I.input=b,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(N),I.next_out=0,I.avail_out=N),(w=i.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&P&&(j=typeof P=="string"?o.string2buf(P):p.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,w=i.inflateSetDictionary(this.strm,j)),w===l.Z_BUF_ERROR&&L===!0&&(w=l.Z_OK,L=!1),w!==l.Z_STREAM_END&&w!==l.Z_OK)return this.onEnd(w),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&w!==l.Z_STREAM_END&&(I.avail_in!==0||S!==l.Z_FINISH&&S!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(I.output,I.next_out),C=I.next_out-E,k=o.buf2string(I.output,E),I.next_out=C,I.avail_out=N-C,C&&s.arraySet(I.output,I.output,E,C,0),this.onData(k)):this.onData(s.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(L=!0)}while((0<I.avail_in||I.avail_out===0)&&w!==l.Z_STREAM_END);return w===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(w=i.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l.Z_OK):S!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(b,x){return(x=x||{}).raw=!0,v(b,x)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var s={arraySet:function(l,c,d,h,p){if(c.subarray&&l.subarray)l.set(c.subarray(d,d+h),p);else for(var g=0;g<h;g++)l[p+g]=c[d+g]},flattenChunks:function(l){var c,d,h,p,g,v;for(c=h=0,d=l.length;c<d;c++)h+=l[c].length;for(v=new Uint8Array(h),c=p=0,d=l.length;c<d;c++)g=l[c],v.set(g,p),p+=g.length;return v}},o={arraySet:function(l,c,d,h,p){for(var g=0;g<h;g++)l[p+g]=c[d+g]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(h,p){if(p<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var g="",v=0;v<p;v++)g+=String.fromCharCode(h[v]);return g}l[254]=l[254]=1,a.string2buf=function(h){var p,g,v,b,x,w=h.length,S=0;for(b=0;b<w;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<w&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),S+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(S),b=x=0;x<S;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<w&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?p[x++]=g:(g<2048?p[x++]=192|g>>>6:(g<65536?p[x++]=224|g>>>12:(p[x++]=240|g>>>18,p[x++]=128|g>>>12&63),p[x++]=128|g>>>6&63),p[x++]=128|63&g);return p},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),g=0,v=p.length;g<v;g++)p[g]=h.charCodeAt(g);return p},a.buf2string=function(h,p){var g,v,b,x,w=p||h.length,S=new Array(2*w);for(g=v=0;g<w;)if((b=h[g++])<128)S[v++]=b;else if(4<(x=l[b]))S[v++]=65533,g+=x-1;else{for(b&=x===2?31:x===3?15:7;1<x&&g<w;)b=b<<6|63&h[g++],x--;1<x?S[v++]=65533:b<65536?S[v++]=b:(b-=65536,S[v++]=55296|b>>10&1023,S[v++]=56320|1023&b)}return d(S,v)},a.utf8border=function(h,p){var g;for((p=p||h.length)>h.length&&(p=h.length),g=p-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?p:g+l[h[g]]>p?g:p}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,s,o,l){for(var c=65535&i|0,d=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(c=c+s[l++]|0)|0,--h;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var c=0;c<8;c++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();r.exports=function(s,o,l,c){var d=i,h=c+l;s^=-1;for(var p=c;p<h;p++)s=s>>>8^d[255&(s^o[p])];return-1^s}},{}],46:[function(n,r,a){var i,s=n("../utils/common"),o=n("./trees"),l=n("./adler32"),c=n("./crc32"),d=n("./messages"),h=0,p=4,g=0,v=-2,b=-1,x=4,w=2,S=8,E=9,C=286,k=30,j=19,I=2*C+1,N=15,P=3,L=258,H=L+P+1,M=42,Z=113,q=1,ue=2,ae=3,ee=4;function X(z,Se){return z.msg=d[Se],Se}function ie(z){return(z<<1)-(4<z?9:0)}function B(z){for(var Se=z.length;0<=--Se;)z[Se]=0}function J(z){var Se=z.state,Ne=Se.pending;Ne>z.avail_out&&(Ne=z.avail_out),Ne!==0&&(s.arraySet(z.output,Se.pending_buf,Se.pending_out,Ne,z.next_out),z.next_out+=Ne,Se.pending_out+=Ne,z.total_out+=Ne,z.avail_out-=Ne,Se.pending-=Ne,Se.pending===0&&(Se.pending_out=0))}function Q(z,Se){o._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,Se),z.block_start=z.strstart,J(z.strm)}function ne(z,Se){z.pending_buf[z.pending++]=Se}function he(z,Se){z.pending_buf[z.pending++]=Se>>>8&255,z.pending_buf[z.pending++]=255&Se}function de(z,Se){var Ne,fe,se=z.max_chain_length,te=z.strstart,xe=z.prev_length,Fe=z.nice_match,Ce=z.strstart>z.w_size-H?z.strstart-(z.w_size-H):0,We=z.window,Nt=z.w_mask,it=z.prev,St=z.strstart+L,Ft=We[te+xe-1],Mt=We[te+xe];z.prev_length>=z.good_match&&(se>>=2),Fe>z.lookahead&&(Fe=z.lookahead);do if(We[(Ne=Se)+xe]===Mt&&We[Ne+xe-1]===Ft&&We[Ne]===We[te]&&We[++Ne]===We[te+1]){te+=2,Ne++;do;while(We[++te]===We[++Ne]&&We[++te]===We[++Ne]&&We[++te]===We[++Ne]&&We[++te]===We[++Ne]&&We[++te]===We[++Ne]&&We[++te]===We[++Ne]&&We[++te]===We[++Ne]&&We[++te]===We[++Ne]&&te<St);if(fe=L-(St-te),te=St-L,xe<fe){if(z.match_start=Se,Fe<=(xe=fe))break;Ft=We[te+xe-1],Mt=We[te+xe]}}while((Se=it[Se&Nt])>Ce&&--se!=0);return xe<=z.lookahead?xe:z.lookahead}function Ie(z){var Se,Ne,fe,se,te,xe,Fe,Ce,We,Nt,it=z.w_size;do{if(se=z.window_size-z.lookahead-z.strstart,z.strstart>=it+(it-H)){for(s.arraySet(z.window,z.window,it,it,0),z.match_start-=it,z.strstart-=it,z.block_start-=it,Se=Ne=z.hash_size;fe=z.head[--Se],z.head[Se]=it<=fe?fe-it:0,--Ne;);for(Se=Ne=it;fe=z.prev[--Se],z.prev[Se]=it<=fe?fe-it:0,--Ne;);se+=it}if(z.strm.avail_in===0)break;if(xe=z.strm,Fe=z.window,Ce=z.strstart+z.lookahead,We=se,Nt=void 0,Nt=xe.avail_in,We<Nt&&(Nt=We),Ne=Nt===0?0:(xe.avail_in-=Nt,s.arraySet(Fe,xe.input,xe.next_in,Nt,Ce),xe.state.wrap===1?xe.adler=l(xe.adler,Fe,Nt,Ce):xe.state.wrap===2&&(xe.adler=c(xe.adler,Fe,Nt,Ce)),xe.next_in+=Nt,xe.total_in+=Nt,Nt),z.lookahead+=Ne,z.lookahead+z.insert>=P)for(te=z.strstart-z.insert,z.ins_h=z.window[te],z.ins_h=(z.ins_h<<z.hash_shift^z.window[te+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[te+P-1])&z.hash_mask,z.prev[te&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=te,te++,z.insert--,!(z.lookahead+z.insert<P)););}while(z.lookahead<H&&z.strm.avail_in!==0)}function Te(z,Se){for(var Ne,fe;;){if(z.lookahead<H){if(Ie(z),z.lookahead<H&&Se===h)return q;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=P&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+P-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Ne!==0&&z.strstart-Ne<=z.w_size-H&&(z.match_length=de(z,Ne)),z.match_length>=P)if(fe=o._tr_tally(z,z.strstart-z.match_start,z.match_length-P),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=P){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+P-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else fe=o._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(fe&&(Q(z,!1),z.strm.avail_out===0))return q}return z.insert=z.strstart<P-1?z.strstart:P-1,Se===p?(Q(z,!0),z.strm.avail_out===0?ae:ee):z.last_lit&&(Q(z,!1),z.strm.avail_out===0)?q:ue}function Ae(z,Se){for(var Ne,fe,se;;){if(z.lookahead<H){if(Ie(z),z.lookahead<H&&Se===h)return q;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=P&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+P-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=P-1,Ne!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Ne<=z.w_size-H&&(z.match_length=de(z,Ne),z.match_length<=5&&(z.strategy===1||z.match_length===P&&4096<z.strstart-z.match_start)&&(z.match_length=P-1)),z.prev_length>=P&&z.match_length<=z.prev_length){for(se=z.strstart+z.lookahead-P,fe=o._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-P),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=se&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+P-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=P-1,z.strstart++,fe&&(Q(z,!1),z.strm.avail_out===0))return q}else if(z.match_available){if((fe=o._tr_tally(z,0,z.window[z.strstart-1]))&&Q(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return q}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(fe=o._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<P-1?z.strstart:P-1,Se===p?(Q(z,!0),z.strm.avail_out===0?ae:ee):z.last_lit&&(Q(z,!1),z.strm.avail_out===0)?q:ue}function Ee(z,Se,Ne,fe,se){this.good_length=z,this.max_lazy=Se,this.nice_length=Ne,this.max_chain=fe,this.func=se}function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*I),this.dyn_dtree=new s.Buf16(2*(2*k+1)),this.bl_tree=new s.Buf16(2*(2*j+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(N+1),this.heap=new s.Buf16(2*C+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(z){var Se;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=w,(Se=z.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?M:Z,z.adler=Se.wrap===2?0:1,Se.last_flush=h,o._tr_init(Se),g):X(z,v)}function Le(z){var Se=Qe(z);return Se===g&&function(Ne){Ne.window_size=2*Ne.w_size,B(Ne.head),Ne.max_lazy_match=i[Ne.level].max_lazy,Ne.good_match=i[Ne.level].good_length,Ne.nice_match=i[Ne.level].nice_length,Ne.max_chain_length=i[Ne.level].max_chain,Ne.strstart=0,Ne.block_start=0,Ne.lookahead=0,Ne.insert=0,Ne.match_length=Ne.prev_length=P-1,Ne.match_available=0,Ne.ins_h=0}(z.state),Se}function je(z,Se,Ne,fe,se,te){if(!z)return v;var xe=1;if(Se===b&&(Se=6),fe<0?(xe=0,fe=-fe):15<fe&&(xe=2,fe-=16),se<1||E<se||Ne!==S||fe<8||15<fe||Se<0||9<Se||te<0||x<te)return X(z,v);fe===8&&(fe=9);var Fe=new Pe;return(z.state=Fe).strm=z,Fe.wrap=xe,Fe.gzhead=null,Fe.w_bits=fe,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=se+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+P-1)/P),Fe.window=new s.Buf8(2*Fe.w_size),Fe.head=new s.Buf16(Fe.hash_size),Fe.prev=new s.Buf16(Fe.w_size),Fe.lit_bufsize=1<<se+6,Fe.pending_buf_size=4*Fe.lit_bufsize,Fe.pending_buf=new s.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=Se,Fe.strategy=te,Fe.method=Ne,Le(z)}i=[new Ee(0,0,0,0,function(z,Se){var Ne=65535;for(Ne>z.pending_buf_size-5&&(Ne=z.pending_buf_size-5);;){if(z.lookahead<=1){if(Ie(z),z.lookahead===0&&Se===h)return q;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var fe=z.block_start+Ne;if((z.strstart===0||z.strstart>=fe)&&(z.lookahead=z.strstart-fe,z.strstart=fe,Q(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-H&&(Q(z,!1),z.strm.avail_out===0))return q}return z.insert=0,Se===p?(Q(z,!0),z.strm.avail_out===0?ae:ee):(z.strstart>z.block_start&&(Q(z,!1),z.strm.avail_out),q)}),new Ee(4,4,8,4,Te),new Ee(4,5,16,8,Te),new Ee(4,6,32,32,Te),new Ee(4,4,16,16,Ae),new Ee(8,16,32,32,Ae),new Ee(8,16,128,128,Ae),new Ee(8,32,128,256,Ae),new Ee(32,128,258,1024,Ae),new Ee(32,258,258,4096,Ae)],a.deflateInit=function(z,Se){return je(z,Se,S,15,8,0)},a.deflateInit2=je,a.deflateReset=Le,a.deflateResetKeep=Qe,a.deflateSetHeader=function(z,Se){return z&&z.state?z.state.wrap!==2?v:(z.state.gzhead=Se,g):v},a.deflate=function(z,Se){var Ne,fe,se,te;if(!z||!z.state||5<Se||Se<0)return z?X(z,v):v;if(fe=z.state,!z.output||!z.input&&z.avail_in!==0||fe.status===666&&Se!==p)return X(z,z.avail_out===0?-5:v);if(fe.strm=z,Ne=fe.last_flush,fe.last_flush=Se,fe.status===M)if(fe.wrap===2)z.adler=0,ne(fe,31),ne(fe,139),ne(fe,8),fe.gzhead?(ne(fe,(fe.gzhead.text?1:0)+(fe.gzhead.hcrc?2:0)+(fe.gzhead.extra?4:0)+(fe.gzhead.name?8:0)+(fe.gzhead.comment?16:0)),ne(fe,255&fe.gzhead.time),ne(fe,fe.gzhead.time>>8&255),ne(fe,fe.gzhead.time>>16&255),ne(fe,fe.gzhead.time>>24&255),ne(fe,fe.level===9?2:2<=fe.strategy||fe.level<2?4:0),ne(fe,255&fe.gzhead.os),fe.gzhead.extra&&fe.gzhead.extra.length&&(ne(fe,255&fe.gzhead.extra.length),ne(fe,fe.gzhead.extra.length>>8&255)),fe.gzhead.hcrc&&(z.adler=c(z.adler,fe.pending_buf,fe.pending,0)),fe.gzindex=0,fe.status=69):(ne(fe,0),ne(fe,0),ne(fe,0),ne(fe,0),ne(fe,0),ne(fe,fe.level===9?2:2<=fe.strategy||fe.level<2?4:0),ne(fe,3),fe.status=Z);else{var xe=S+(fe.w_bits-8<<4)<<8;xe|=(2<=fe.strategy||fe.level<2?0:fe.level<6?1:fe.level===6?2:3)<<6,fe.strstart!==0&&(xe|=32),xe+=31-xe%31,fe.status=Z,he(fe,xe),fe.strstart!==0&&(he(fe,z.adler>>>16),he(fe,65535&z.adler)),z.adler=1}if(fe.status===69)if(fe.gzhead.extra){for(se=fe.pending;fe.gzindex<(65535&fe.gzhead.extra.length)&&(fe.pending!==fe.pending_buf_size||(fe.gzhead.hcrc&&fe.pending>se&&(z.adler=c(z.adler,fe.pending_buf,fe.pending-se,se)),J(z),se=fe.pending,fe.pending!==fe.pending_buf_size));)ne(fe,255&fe.gzhead.extra[fe.gzindex]),fe.gzindex++;fe.gzhead.hcrc&&fe.pending>se&&(z.adler=c(z.adler,fe.pending_buf,fe.pending-se,se)),fe.gzindex===fe.gzhead.extra.length&&(fe.gzindex=0,fe.status=73)}else fe.status=73;if(fe.status===73)if(fe.gzhead.name){se=fe.pending;do{if(fe.pending===fe.pending_buf_size&&(fe.gzhead.hcrc&&fe.pending>se&&(z.adler=c(z.adler,fe.pending_buf,fe.pending-se,se)),J(z),se=fe.pending,fe.pending===fe.pending_buf_size)){te=1;break}te=fe.gzindex<fe.gzhead.name.length?255&fe.gzhead.name.charCodeAt(fe.gzindex++):0,ne(fe,te)}while(te!==0);fe.gzhead.hcrc&&fe.pending>se&&(z.adler=c(z.adler,fe.pending_buf,fe.pending-se,se)),te===0&&(fe.gzindex=0,fe.status=91)}else fe.status=91;if(fe.status===91)if(fe.gzhead.comment){se=fe.pending;do{if(fe.pending===fe.pending_buf_size&&(fe.gzhead.hcrc&&fe.pending>se&&(z.adler=c(z.adler,fe.pending_buf,fe.pending-se,se)),J(z),se=fe.pending,fe.pending===fe.pending_buf_size)){te=1;break}te=fe.gzindex<fe.gzhead.comment.length?255&fe.gzhead.comment.charCodeAt(fe.gzindex++):0,ne(fe,te)}while(te!==0);fe.gzhead.hcrc&&fe.pending>se&&(z.adler=c(z.adler,fe.pending_buf,fe.pending-se,se)),te===0&&(fe.status=103)}else fe.status=103;if(fe.status===103&&(fe.gzhead.hcrc?(fe.pending+2>fe.pending_buf_size&&J(z),fe.pending+2<=fe.pending_buf_size&&(ne(fe,255&z.adler),ne(fe,z.adler>>8&255),z.adler=0,fe.status=Z)):fe.status=Z),fe.pending!==0){if(J(z),z.avail_out===0)return fe.last_flush=-1,g}else if(z.avail_in===0&&ie(Se)<=ie(Ne)&&Se!==p)return X(z,-5);if(fe.status===666&&z.avail_in!==0)return X(z,-5);if(z.avail_in!==0||fe.lookahead!==0||Se!==h&&fe.status!==666){var Fe=fe.strategy===2?function(Ce,We){for(var Nt;;){if(Ce.lookahead===0&&(Ie(Ce),Ce.lookahead===0)){if(We===h)return q;break}if(Ce.match_length=0,Nt=o._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++,Nt&&(Q(Ce,!1),Ce.strm.avail_out===0))return q}return Ce.insert=0,We===p?(Q(Ce,!0),Ce.strm.avail_out===0?ae:ee):Ce.last_lit&&(Q(Ce,!1),Ce.strm.avail_out===0)?q:ue}(fe,Se):fe.strategy===3?function(Ce,We){for(var Nt,it,St,Ft,Mt=Ce.window;;){if(Ce.lookahead<=L){if(Ie(Ce),Ce.lookahead<=L&&We===h)return q;if(Ce.lookahead===0)break}if(Ce.match_length=0,Ce.lookahead>=P&&0<Ce.strstart&&(it=Mt[St=Ce.strstart-1])===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]){Ft=Ce.strstart+L;do;while(it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&St<Ft);Ce.match_length=L-(Ft-St),Ce.match_length>Ce.lookahead&&(Ce.match_length=Ce.lookahead)}if(Ce.match_length>=P?(Nt=o._tr_tally(Ce,1,Ce.match_length-P),Ce.lookahead-=Ce.match_length,Ce.strstart+=Ce.match_length,Ce.match_length=0):(Nt=o._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++),Nt&&(Q(Ce,!1),Ce.strm.avail_out===0))return q}return Ce.insert=0,We===p?(Q(Ce,!0),Ce.strm.avail_out===0?ae:ee):Ce.last_lit&&(Q(Ce,!1),Ce.strm.avail_out===0)?q:ue}(fe,Se):i[fe.level].func(fe,Se);if(Fe!==ae&&Fe!==ee||(fe.status=666),Fe===q||Fe===ae)return z.avail_out===0&&(fe.last_flush=-1),g;if(Fe===ue&&(Se===1?o._tr_align(fe):Se!==5&&(o._tr_stored_block(fe,0,0,!1),Se===3&&(B(fe.head),fe.lookahead===0&&(fe.strstart=0,fe.block_start=0,fe.insert=0))),J(z),z.avail_out===0))return fe.last_flush=-1,g}return Se!==p?g:fe.wrap<=0?1:(fe.wrap===2?(ne(fe,255&z.adler),ne(fe,z.adler>>8&255),ne(fe,z.adler>>16&255),ne(fe,z.adler>>24&255),ne(fe,255&z.total_in),ne(fe,z.total_in>>8&255),ne(fe,z.total_in>>16&255),ne(fe,z.total_in>>24&255)):(he(fe,z.adler>>>16),he(fe,65535&z.adler)),J(z),0<fe.wrap&&(fe.wrap=-fe.wrap),fe.pending!==0?g:1)},a.deflateEnd=function(z){var Se;return z&&z.state?(Se=z.state.status)!==M&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==Z&&Se!==666?X(z,v):(z.state=null,Se===Z?X(z,-3):g):v},a.deflateSetDictionary=function(z,Se){var Ne,fe,se,te,xe,Fe,Ce,We,Nt=Se.length;if(!z||!z.state||(te=(Ne=z.state).wrap)===2||te===1&&Ne.status!==M||Ne.lookahead)return v;for(te===1&&(z.adler=l(z.adler,Se,Nt,0)),Ne.wrap=0,Nt>=Ne.w_size&&(te===0&&(B(Ne.head),Ne.strstart=0,Ne.block_start=0,Ne.insert=0),We=new s.Buf8(Ne.w_size),s.arraySet(We,Se,Nt-Ne.w_size,Ne.w_size,0),Se=We,Nt=Ne.w_size),xe=z.avail_in,Fe=z.next_in,Ce=z.input,z.avail_in=Nt,z.next_in=0,z.input=Se,Ie(Ne);Ne.lookahead>=P;){for(fe=Ne.strstart,se=Ne.lookahead-(P-1);Ne.ins_h=(Ne.ins_h<<Ne.hash_shift^Ne.window[fe+P-1])&Ne.hash_mask,Ne.prev[fe&Ne.w_mask]=Ne.head[Ne.ins_h],Ne.head[Ne.ins_h]=fe,fe++,--se;);Ne.strstart=fe,Ne.lookahead=P-1,Ie(Ne)}return Ne.strstart+=Ne.lookahead,Ne.block_start=Ne.strstart,Ne.insert=Ne.lookahead,Ne.lookahead=0,Ne.match_length=Ne.prev_length=P-1,Ne.match_available=0,z.next_in=Fe,z.input=Ce,z.avail_in=xe,Ne.wrap=te,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,s){var o,l,c,d,h,p,g,v,b,x,w,S,E,C,k,j,I,N,P,L,H,M,Z,q,ue;o=i.state,l=i.next_in,q=i.input,c=l+(i.avail_in-5),d=i.next_out,ue=i.output,h=d-(s-i.avail_out),p=d+(i.avail_out-257),g=o.dmax,v=o.wsize,b=o.whave,x=o.wnext,w=o.window,S=o.hold,E=o.bits,C=o.lencode,k=o.distcode,j=(1<<o.lenbits)-1,I=(1<<o.distbits)-1;e:do{E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),N=C[S&j];t:for(;;){if(S>>>=P=N>>>24,E-=P,(P=N>>>16&255)===0)ue[d++]=65535&N;else{if(!(16&P)){if((64&P)==0){N=C[(65535&N)+(S&(1<<P)-1)];continue t}if(32&P){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}L=65535&N,(P&=15)&&(E<P&&(S+=q[l++]<<E,E+=8),L+=S&(1<<P)-1,S>>>=P,E-=P),E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),N=k[S&I];n:for(;;){if(S>>>=P=N>>>24,E-=P,!(16&(P=N>>>16&255))){if((64&P)==0){N=k[(65535&N)+(S&(1<<P)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(H=65535&N,E<(P&=15)&&(S+=q[l++]<<E,(E+=8)<P&&(S+=q[l++]<<E,E+=8)),g<(H+=S&(1<<P)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(S>>>=P,E-=P,(P=d-h)<H){if(b<(P=H-P)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(Z=w,(M=0)===x){if(M+=v-P,P<L){for(L-=P;ue[d++]=w[M++],--P;);M=d-H,Z=ue}}else if(x<P){if(M+=v+x-P,(P-=x)<L){for(L-=P;ue[d++]=w[M++],--P;);if(M=0,x<L){for(L-=P=x;ue[d++]=w[M++],--P;);M=d-H,Z=ue}}}else if(M+=x-P,P<L){for(L-=P;ue[d++]=w[M++],--P;);M=d-H,Z=ue}for(;2<L;)ue[d++]=Z[M++],ue[d++]=Z[M++],ue[d++]=Z[M++],L-=3;L&&(ue[d++]=Z[M++],1<L&&(ue[d++]=Z[M++]))}else{for(M=d-H;ue[d++]=ue[M++],ue[d++]=ue[M++],ue[d++]=ue[M++],2<(L-=3););L&&(ue[d++]=ue[M++],1<L&&(ue[d++]=ue[M++]))}break}}break}}while(l<c&&d<p);l-=L=E>>3,S&=(1<<(E-=L<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=d<p?p-d+257:257-(d-p),o.hold=S,o.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),s=n("./adler32"),o=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),d=1,h=2,p=0,g=-2,v=1,b=852,x=592;function w(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(M){var Z;return M&&M.state?(Z=M.state,M.total_in=M.total_out=Z.total=0,M.msg="",Z.wrap&&(M.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(b),Z.distcode=Z.distdyn=new i.Buf32(x),Z.sane=1,Z.back=-1,p):g}function C(M){var Z;return M&&M.state?((Z=M.state).wsize=0,Z.whave=0,Z.wnext=0,E(M)):g}function k(M,Z){var q,ue;return M&&M.state?(ue=M.state,Z<0?(q=0,Z=-Z):(q=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(ue.window!==null&&ue.wbits!==Z&&(ue.window=null),ue.wrap=q,ue.wbits=Z,C(M))):g}function j(M,Z){var q,ue;return M?(ue=new S,(M.state=ue).window=null,(q=k(M,Z))!==p&&(M.state=null),q):g}var I,N,P=!0;function L(M){if(P){var Z;for(I=new i.Buf32(512),N=new i.Buf32(32),Z=0;Z<144;)M.lens[Z++]=8;for(;Z<256;)M.lens[Z++]=9;for(;Z<280;)M.lens[Z++]=7;for(;Z<288;)M.lens[Z++]=8;for(c(d,M.lens,0,288,I,0,M.work,{bits:9}),Z=0;Z<32;)M.lens[Z++]=5;c(h,M.lens,0,32,N,0,M.work,{bits:5}),P=!1}M.lencode=I,M.lenbits=9,M.distcode=N,M.distbits=5}function H(M,Z,q,ue){var ae,ee=M.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new i.Buf8(ee.wsize)),ue>=ee.wsize?(i.arraySet(ee.window,Z,q-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(ue<(ae=ee.wsize-ee.wnext)&&(ae=ue),i.arraySet(ee.window,Z,q-ue,ae,ee.wnext),(ue-=ae)?(i.arraySet(ee.window,Z,q-ue,ue,0),ee.wnext=ue,ee.whave=ee.wsize):(ee.wnext+=ae,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=ae))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(M){return j(M,15)},a.inflateInit2=j,a.inflate=function(M,Z){var q,ue,ae,ee,X,ie,B,J,Q,ne,he,de,Ie,Te,Ae,Ee,Pe,Qe,Le,je,z,Se,Ne,fe,se=0,te=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return g;(q=M.state).mode===12&&(q.mode=13),X=M.next_out,ae=M.output,B=M.avail_out,ee=M.next_in,ue=M.input,ie=M.avail_in,J=q.hold,Q=q.bits,ne=ie,he=B,Se=p;e:for(;;)switch(q.mode){case v:if(q.wrap===0){q.mode=13;break}for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if(2&q.wrap&&J===35615){te[q.check=0]=255&J,te[1]=J>>>8&255,q.check=o(q.check,te,2,0),Q=J=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&J)<<8)+(J>>8))%31){M.msg="incorrect header check",q.mode=30;break}if((15&J)!=8){M.msg="unknown compression method",q.mode=30;break}if(Q-=4,z=8+(15&(J>>>=4)),q.wbits===0)q.wbits=z;else if(z>q.wbits){M.msg="invalid window size",q.mode=30;break}q.dmax=1<<z,M.adler=q.check=1,q.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if(q.flags=J,(255&q.flags)!=8){M.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){M.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=J>>8&1),512&q.flags&&(te[0]=255&J,te[1]=J>>>8&255,q.check=o(q.check,te,2,0)),Q=J=0,q.mode=3;case 3:for(;Q<32;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}q.head&&(q.head.time=J),512&q.flags&&(te[0]=255&J,te[1]=J>>>8&255,te[2]=J>>>16&255,te[3]=J>>>24&255,q.check=o(q.check,te,4,0)),Q=J=0,q.mode=4;case 4:for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}q.head&&(q.head.xflags=255&J,q.head.os=J>>8),512&q.flags&&(te[0]=255&J,te[1]=J>>>8&255,q.check=o(q.check,te,2,0)),Q=J=0,q.mode=5;case 5:if(1024&q.flags){for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}q.length=J,q.head&&(q.head.extra_len=J),512&q.flags&&(te[0]=255&J,te[1]=J>>>8&255,q.check=o(q.check,te,2,0)),Q=J=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(ie<(de=q.length)&&(de=ie),de&&(q.head&&(z=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),i.arraySet(q.head.extra,ue,ee,de,z)),512&q.flags&&(q.check=o(q.check,ue,de,ee)),ie-=de,ee+=de,q.length-=de),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(ie===0)break e;for(de=0;z=ue[ee+de++],q.head&&z&&q.length<65536&&(q.head.name+=String.fromCharCode(z)),z&&de<ie;);if(512&q.flags&&(q.check=o(q.check,ue,de,ee)),ie-=de,ee+=de,z)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(ie===0)break e;for(de=0;z=ue[ee+de++],q.head&&z&&q.length<65536&&(q.head.comment+=String.fromCharCode(z)),z&&de<ie;);if(512&q.flags&&(q.check=o(q.check,ue,de,ee)),ie-=de,ee+=de,z)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;Q<16;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if(J!==(65535&q.check)){M.msg="header crc mismatch",q.mode=30;break}Q=J=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),M.adler=q.check=0,q.mode=12;break;case 10:for(;Q<32;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}M.adler=q.check=w(J),Q=J=0,q.mode=11;case 11:if(q.havedict===0)return M.next_out=X,M.avail_out=B,M.next_in=ee,M.avail_in=ie,q.hold=J,q.bits=Q,2;M.adler=q.check=1,q.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(q.last){J>>>=7&Q,Q-=7&Q,q.mode=27;break}for(;Q<3;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}switch(q.last=1&J,Q-=1,3&(J>>>=1)){case 0:q.mode=14;break;case 1:if(L(q),q.mode=20,Z!==6)break;J>>>=2,Q-=2;break e;case 2:q.mode=17;break;case 3:M.msg="invalid block type",q.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){M.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&J,Q=J=0,q.mode=15,Z===6)break e;case 15:q.mode=16;case 16:if(de=q.length){if(ie<de&&(de=ie),B<de&&(de=B),de===0)break e;i.arraySet(ae,ue,ee,de,X),ie-=de,ee+=de,B-=de,X+=de,q.length-=de;break}q.mode=12;break;case 17:for(;Q<14;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if(q.nlen=257+(31&J),J>>>=5,Q-=5,q.ndist=1+(31&J),J>>>=5,Q-=5,q.ncode=4+(15&J),J>>>=4,Q-=4,286<q.nlen||30<q.ndist){M.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;Q<3;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}q.lens[xe[q.have++]]=7&J,J>>>=3,Q-=3}for(;q.have<19;)q.lens[xe[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Ne={bits:q.lenbits},Se=c(0,q.lens,0,19,q.lencode,0,q.work,Ne),q.lenbits=Ne.bits,Se){M.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Ee=(se=q.lencode[J&(1<<q.lenbits)-1])>>>16&255,Pe=65535&se,!((Ae=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if(Pe<16)J>>>=Ae,Q-=Ae,q.lens[q.have++]=Pe;else{if(Pe===16){for(fe=Ae+2;Q<fe;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if(J>>>=Ae,Q-=Ae,q.have===0){M.msg="invalid bit length repeat",q.mode=30;break}z=q.lens[q.have-1],de=3+(3&J),J>>>=2,Q-=2}else if(Pe===17){for(fe=Ae+3;Q<fe;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}Q-=Ae,z=0,de=3+(7&(J>>>=Ae)),J>>>=3,Q-=3}else{for(fe=Ae+7;Q<fe;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}Q-=Ae,z=0,de=11+(127&(J>>>=Ae)),J>>>=7,Q-=7}if(q.have+de>q.nlen+q.ndist){M.msg="invalid bit length repeat",q.mode=30;break}for(;de--;)q.lens[q.have++]=z}}if(q.mode===30)break;if(q.lens[256]===0){M.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Ne={bits:q.lenbits},Se=c(d,q.lens,0,q.nlen,q.lencode,0,q.work,Ne),q.lenbits=Ne.bits,Se){M.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Ne={bits:q.distbits},Se=c(h,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Ne),q.distbits=Ne.bits,Se){M.msg="invalid distances set",q.mode=30;break}if(q.mode=20,Z===6)break e;case 20:q.mode=21;case 21:if(6<=ie&&258<=B){M.next_out=X,M.avail_out=B,M.next_in=ee,M.avail_in=ie,q.hold=J,q.bits=Q,l(M,he),X=M.next_out,ae=M.output,B=M.avail_out,ee=M.next_in,ue=M.input,ie=M.avail_in,J=q.hold,Q=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Ee=(se=q.lencode[J&(1<<q.lenbits)-1])>>>16&255,Pe=65535&se,!((Ae=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if(Ee&&(240&Ee)==0){for(Qe=Ae,Le=Ee,je=Pe;Ee=(se=q.lencode[je+((J&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Pe=65535&se,!(Qe+(Ae=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}J>>>=Qe,Q-=Qe,q.back+=Qe}if(J>>>=Ae,Q-=Ae,q.back+=Ae,q.length=Pe,Ee===0){q.mode=26;break}if(32&Ee){q.back=-1,q.mode=12;break}if(64&Ee){M.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Ee,q.mode=22;case 22:if(q.extra){for(fe=q.extra;Q<fe;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}q.length+=J&(1<<q.extra)-1,J>>>=q.extra,Q-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Ee=(se=q.distcode[J&(1<<q.distbits)-1])>>>16&255,Pe=65535&se,!((Ae=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if((240&Ee)==0){for(Qe=Ae,Le=Ee,je=Pe;Ee=(se=q.distcode[je+((J&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Pe=65535&se,!(Qe+(Ae=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}J>>>=Qe,Q-=Qe,q.back+=Qe}if(J>>>=Ae,Q-=Ae,q.back+=Ae,64&Ee){M.msg="invalid distance code",q.mode=30;break}q.offset=Pe,q.extra=15&Ee,q.mode=24;case 24:if(q.extra){for(fe=q.extra;Q<fe;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}q.offset+=J&(1<<q.extra)-1,J>>>=q.extra,Q-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){M.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(B===0)break e;if(de=he-B,q.offset>de){if((de=q.offset-de)>q.whave&&q.sane){M.msg="invalid distance too far back",q.mode=30;break}Ie=de>q.wnext?(de-=q.wnext,q.wsize-de):q.wnext-de,de>q.length&&(de=q.length),Te=q.window}else Te=ae,Ie=X-q.offset,de=q.length;for(B<de&&(de=B),B-=de,q.length-=de;ae[X++]=Te[Ie++],--de;);q.length===0&&(q.mode=21);break;case 26:if(B===0)break e;ae[X++]=q.length,B--,q.mode=21;break;case 27:if(q.wrap){for(;Q<32;){if(ie===0)break e;ie--,J|=ue[ee++]<<Q,Q+=8}if(he-=B,M.total_out+=he,q.total+=he,he&&(M.adler=q.check=q.flags?o(q.check,ae,he,X-he):s(q.check,ae,he,X-he)),he=B,(q.flags?J:w(J))!==q.check){M.msg="incorrect data check",q.mode=30;break}Q=J=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;Q<32;){if(ie===0)break e;ie--,J+=ue[ee++]<<Q,Q+=8}if(J!==(4294967295&q.total)){M.msg="incorrect length check",q.mode=30;break}Q=J=0}q.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return g}return M.next_out=X,M.avail_out=B,M.next_in=ee,M.avail_in=ie,q.hold=J,q.bits=Q,(q.wsize||he!==M.avail_out&&q.mode<30&&(q.mode<27||Z!==4))&&H(M,M.output,M.next_out,he-M.avail_out)?(q.mode=31,-4):(ne-=M.avail_in,he-=M.avail_out,M.total_in+=ne,M.total_out+=he,q.total+=he,q.wrap&&he&&(M.adler=q.check=q.flags?o(q.check,ae,he,M.next_out-he):s(q.check,ae,he,M.next_out-he)),M.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(ne==0&&he===0||Z===4)&&Se===p&&(Se=-5),Se)},a.inflateEnd=function(M){if(!M||!M.state)return g;var Z=M.state;return Z.window&&(Z.window=null),M.state=null,p},a.inflateGetHeader=function(M,Z){var q;return M&&M.state?(2&(q=M.state).wrap)==0?g:((q.head=Z).done=!1,p):g},a.inflateSetDictionary=function(M,Z){var q,ue=Z.length;return M&&M.state?(q=M.state).wrap!==0&&q.mode!==11?g:q.mode===11&&s(1,Z,ue,0)!==q.check?-3:H(M,Z,ue,ue)?(q.mode=31,-4):(q.havedict=1,p):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,p,g,v,b,x,w){var S,E,C,k,j,I,N,P,L,H=w.bits,M=0,Z=0,q=0,ue=0,ae=0,ee=0,X=0,ie=0,B=0,J=0,Q=null,ne=0,he=new i.Buf16(16),de=new i.Buf16(16),Ie=null,Te=0;for(M=0;M<=15;M++)he[M]=0;for(Z=0;Z<g;Z++)he[h[p+Z]]++;for(ae=H,ue=15;1<=ue&&he[ue]===0;ue--);if(ue<ae&&(ae=ue),ue===0)return v[b++]=20971520,v[b++]=20971520,w.bits=1,0;for(q=1;q<ue&&he[q]===0;q++);for(ae<q&&(ae=q),M=ie=1;M<=15;M++)if(ie<<=1,(ie-=he[M])<0)return-1;if(0<ie&&(d===0||ue!==1))return-1;for(de[1]=0,M=1;M<15;M++)de[M+1]=de[M]+he[M];for(Z=0;Z<g;Z++)h[p+Z]!==0&&(x[de[h[p+Z]]++]=Z);if(I=d===0?(Q=Ie=x,19):d===1?(Q=s,ne-=257,Ie=o,Te-=257,256):(Q=l,Ie=c,-1),M=q,j=b,X=Z=J=0,C=-1,k=(B=1<<(ee=ae))-1,d===1&&852<B||d===2&&592<B)return 1;for(;;){for(N=M-X,L=x[Z]<I?(P=0,x[Z]):x[Z]>I?(P=Ie[Te+x[Z]],Q[ne+x[Z]]):(P=96,0),S=1<<M-X,q=E=1<<ee;v[j+(J>>X)+(E-=S)]=N<<24|P<<16|L|0,E!==0;);for(S=1<<M-1;J&S;)S>>=1;if(S!==0?(J&=S-1,J+=S):J=0,Z++,--he[M]==0){if(M===ue)break;M=h[p+x[Z]]}if(ae<M&&(J&k)!==C){for(X===0&&(X=ae),j+=q,ie=1<<(ee=M-X);ee+X<ue&&!((ie-=he[ee+X])<=0);)ee++,ie<<=1;if(B+=1<<ee,d===1&&852<B||d===2&&592<B)return 1;v[C=J&k]=ae<<24|ee<<16|j-b|0}}return J!==0&&(v[j+J]=M-X<<24|64<<16|0),w.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),s=0,o=1;function l(se){for(var te=se.length;0<=--te;)se[te]=0}var c=0,d=29,h=256,p=h+1+d,g=30,v=19,b=2*p+1,x=15,w=16,S=7,E=256,C=16,k=17,j=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(p+2));l(H);var M=new Array(2*g);l(M);var Z=new Array(512);l(Z);var q=new Array(256);l(q);var ue=new Array(d);l(ue);var ae,ee,X,ie=new Array(g);function B(se,te,xe,Fe,Ce){this.static_tree=se,this.extra_bits=te,this.extra_base=xe,this.elems=Fe,this.max_length=Ce,this.has_stree=se&&se.length}function J(se,te){this.dyn_tree=se,this.max_code=0,this.stat_desc=te}function Q(se){return se<256?Z[se]:Z[256+(se>>>7)]}function ne(se,te){se.pending_buf[se.pending++]=255&te,se.pending_buf[se.pending++]=te>>>8&255}function he(se,te,xe){se.bi_valid>w-xe?(se.bi_buf|=te<<se.bi_valid&65535,ne(se,se.bi_buf),se.bi_buf=te>>w-se.bi_valid,se.bi_valid+=xe-w):(se.bi_buf|=te<<se.bi_valid&65535,se.bi_valid+=xe)}function de(se,te,xe){he(se,xe[2*te],xe[2*te+1])}function Ie(se,te){for(var xe=0;xe|=1&se,se>>>=1,xe<<=1,0<--te;);return xe>>>1}function Te(se,te,xe){var Fe,Ce,We=new Array(x+1),Nt=0;for(Fe=1;Fe<=x;Fe++)We[Fe]=Nt=Nt+xe[Fe-1]<<1;for(Ce=0;Ce<=te;Ce++){var it=se[2*Ce+1];it!==0&&(se[2*Ce]=Ie(We[it]++,it))}}function Ae(se){var te;for(te=0;te<p;te++)se.dyn_ltree[2*te]=0;for(te=0;te<g;te++)se.dyn_dtree[2*te]=0;for(te=0;te<v;te++)se.bl_tree[2*te]=0;se.dyn_ltree[2*E]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function Ee(se){8<se.bi_valid?ne(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function Pe(se,te,xe,Fe){var Ce=2*te,We=2*xe;return se[Ce]<se[We]||se[Ce]===se[We]&&Fe[te]<=Fe[xe]}function Qe(se,te,xe){for(var Fe=se.heap[xe],Ce=xe<<1;Ce<=se.heap_len&&(Ce<se.heap_len&&Pe(te,se.heap[Ce+1],se.heap[Ce],se.depth)&&Ce++,!Pe(te,Fe,se.heap[Ce],se.depth));)se.heap[xe]=se.heap[Ce],xe=Ce,Ce<<=1;se.heap[xe]=Fe}function Le(se,te,xe){var Fe,Ce,We,Nt,it=0;if(se.last_lit!==0)for(;Fe=se.pending_buf[se.d_buf+2*it]<<8|se.pending_buf[se.d_buf+2*it+1],Ce=se.pending_buf[se.l_buf+it],it++,Fe===0?de(se,Ce,te):(de(se,(We=q[Ce])+h+1,te),(Nt=I[We])!==0&&he(se,Ce-=ue[We],Nt),de(se,We=Q(--Fe),xe),(Nt=N[We])!==0&&he(se,Fe-=ie[We],Nt)),it<se.last_lit;);de(se,E,te)}function je(se,te){var xe,Fe,Ce,We=te.dyn_tree,Nt=te.stat_desc.static_tree,it=te.stat_desc.has_stree,St=te.stat_desc.elems,Ft=-1;for(se.heap_len=0,se.heap_max=b,xe=0;xe<St;xe++)We[2*xe]!==0?(se.heap[++se.heap_len]=Ft=xe,se.depth[xe]=0):We[2*xe+1]=0;for(;se.heap_len<2;)We[2*(Ce=se.heap[++se.heap_len]=Ft<2?++Ft:0)]=1,se.depth[Ce]=0,se.opt_len--,it&&(se.static_len-=Nt[2*Ce+1]);for(te.max_code=Ft,xe=se.heap_len>>1;1<=xe;xe--)Qe(se,We,xe);for(Ce=St;xe=se.heap[1],se.heap[1]=se.heap[se.heap_len--],Qe(se,We,1),Fe=se.heap[1],se.heap[--se.heap_max]=xe,se.heap[--se.heap_max]=Fe,We[2*Ce]=We[2*xe]+We[2*Fe],se.depth[Ce]=(se.depth[xe]>=se.depth[Fe]?se.depth[xe]:se.depth[Fe])+1,We[2*xe+1]=We[2*Fe+1]=Ce,se.heap[1]=Ce++,Qe(se,We,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(Mt,Zt){var be,D,W,pe,De,ve,ke=Zt.dyn_tree,le=Zt.max_code,ft=Zt.stat_desc.static_tree,vt=Zt.stat_desc.has_stree,F=Zt.stat_desc.extra_bits,Be=Zt.stat_desc.extra_base,nt=Zt.stat_desc.max_length,ye=0;for(pe=0;pe<=x;pe++)Mt.bl_count[pe]=0;for(ke[2*Mt.heap[Mt.heap_max]+1]=0,be=Mt.heap_max+1;be<b;be++)nt<(pe=ke[2*ke[2*(D=Mt.heap[be])+1]+1]+1)&&(pe=nt,ye++),ke[2*D+1]=pe,le<D||(Mt.bl_count[pe]++,De=0,Be<=D&&(De=F[D-Be]),ve=ke[2*D],Mt.opt_len+=ve*(pe+De),vt&&(Mt.static_len+=ve*(ft[2*D+1]+De)));if(ye!==0){do{for(pe=nt-1;Mt.bl_count[pe]===0;)pe--;Mt.bl_count[pe]--,Mt.bl_count[pe+1]+=2,Mt.bl_count[nt]--,ye-=2}while(0<ye);for(pe=nt;pe!==0;pe--)for(D=Mt.bl_count[pe];D!==0;)le<(W=Mt.heap[--be])||(ke[2*W+1]!==pe&&(Mt.opt_len+=(pe-ke[2*W+1])*ke[2*W],ke[2*W+1]=pe),D--)}}(se,te),Te(We,Ft,se.bl_count)}function z(se,te,xe){var Fe,Ce,We=-1,Nt=te[1],it=0,St=7,Ft=4;for(Nt===0&&(St=138,Ft=3),te[2*(xe+1)+1]=65535,Fe=0;Fe<=xe;Fe++)Ce=Nt,Nt=te[2*(Fe+1)+1],++it<St&&Ce===Nt||(it<Ft?se.bl_tree[2*Ce]+=it:Ce!==0?(Ce!==We&&se.bl_tree[2*Ce]++,se.bl_tree[2*C]++):it<=10?se.bl_tree[2*k]++:se.bl_tree[2*j]++,We=Ce,Ft=(it=0)===Nt?(St=138,3):Ce===Nt?(St=6,3):(St=7,4))}function Se(se,te,xe){var Fe,Ce,We=-1,Nt=te[1],it=0,St=7,Ft=4;for(Nt===0&&(St=138,Ft=3),Fe=0;Fe<=xe;Fe++)if(Ce=Nt,Nt=te[2*(Fe+1)+1],!(++it<St&&Ce===Nt)){if(it<Ft)for(;de(se,Ce,se.bl_tree),--it!=0;);else Ce!==0?(Ce!==We&&(de(se,Ce,se.bl_tree),it--),de(se,C,se.bl_tree),he(se,it-3,2)):it<=10?(de(se,k,se.bl_tree),he(se,it-3,3)):(de(se,j,se.bl_tree),he(se,it-11,7));We=Ce,Ft=(it=0)===Nt?(St=138,3):Ce===Nt?(St=6,3):(St=7,4)}}l(ie);var Ne=!1;function fe(se,te,xe,Fe){he(se,(c<<1)+(Fe?1:0),3),function(Ce,We,Nt,it){Ee(Ce),ne(Ce,Nt),ne(Ce,~Nt),i.arraySet(Ce.pending_buf,Ce.window,We,Nt,Ce.pending),Ce.pending+=Nt}(se,te,xe)}a._tr_init=function(se){Ne||(function(){var te,xe,Fe,Ce,We,Nt=new Array(x+1);for(Ce=Fe=0;Ce<d-1;Ce++)for(ue[Ce]=Fe,te=0;te<1<<I[Ce];te++)q[Fe++]=Ce;for(q[Fe-1]=Ce,Ce=We=0;Ce<16;Ce++)for(ie[Ce]=We,te=0;te<1<<N[Ce];te++)Z[We++]=Ce;for(We>>=7;Ce<g;Ce++)for(ie[Ce]=We<<7,te=0;te<1<<N[Ce]-7;te++)Z[256+We++]=Ce;for(xe=0;xe<=x;xe++)Nt[xe]=0;for(te=0;te<=143;)H[2*te+1]=8,te++,Nt[8]++;for(;te<=255;)H[2*te+1]=9,te++,Nt[9]++;for(;te<=279;)H[2*te+1]=7,te++,Nt[7]++;for(;te<=287;)H[2*te+1]=8,te++,Nt[8]++;for(Te(H,p+1,Nt),te=0;te<g;te++)M[2*te+1]=5,M[2*te]=Ie(te,5);ae=new B(H,I,h+1,p,x),ee=new B(M,N,0,g,x),X=new B(new Array(0),P,0,v,S)}(),Ne=!0),se.l_desc=new J(se.dyn_ltree,ae),se.d_desc=new J(se.dyn_dtree,ee),se.bl_desc=new J(se.bl_tree,X),se.bi_buf=0,se.bi_valid=0,Ae(se)},a._tr_stored_block=fe,a._tr_flush_block=function(se,te,xe,Fe){var Ce,We,Nt=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(it){var St,Ft=4093624447;for(St=0;St<=31;St++,Ft>>>=1)if(1&Ft&&it.dyn_ltree[2*St]!==0)return s;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return o;for(St=32;St<h;St++)if(it.dyn_ltree[2*St]!==0)return o;return s}(se)),je(se,se.l_desc),je(se,se.d_desc),Nt=function(it){var St;for(z(it,it.dyn_ltree,it.l_desc.max_code),z(it,it.dyn_dtree,it.d_desc.max_code),je(it,it.bl_desc),St=v-1;3<=St&&it.bl_tree[2*L[St]+1]===0;St--);return it.opt_len+=3*(St+1)+5+5+4,St}(se),Ce=se.opt_len+3+7>>>3,(We=se.static_len+3+7>>>3)<=Ce&&(Ce=We)):Ce=We=xe+5,xe+4<=Ce&&te!==-1?fe(se,te,xe,Fe):se.strategy===4||We===Ce?(he(se,2+(Fe?1:0),3),Le(se,H,M)):(he(se,4+(Fe?1:0),3),function(it,St,Ft,Mt){var Zt;for(he(it,St-257,5),he(it,Ft-1,5),he(it,Mt-4,4),Zt=0;Zt<Mt;Zt++)he(it,it.bl_tree[2*L[Zt]+1],3);Se(it,it.dyn_ltree,St-1),Se(it,it.dyn_dtree,Ft-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,Nt+1),Le(se,se.dyn_ltree,se.dyn_dtree)),Ae(se),Fe&&Ee(se)},a._tr_tally=function(se,te,xe){return se.pending_buf[se.d_buf+2*se.last_lit]=te>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&te,se.pending_buf[se.l_buf+se.last_lit]=255&xe,se.last_lit++,te===0?se.dyn_ltree[2*xe]++:(se.matches++,te--,se.dyn_ltree[2*(q[xe]+h+1)]++,se.dyn_dtree[2*Q(te)]++),se.last_lit===se.lit_bufsize-1},a._tr_align=function(se){he(se,2,3),de(se,E,H),function(te){te.bi_valid===16?(ne(te,te.bi_buf),te.bi_buf=0,te.bi_valid=0):8<=te.bi_valid&&(te.pending_buf[te.pending++]=255&te.bi_buf,te.bi_buf>>=8,te.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(s,o){if(!s.setImmediate){var l,c,d,h,p=1,g={},v=!1,b=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,l={}.toString.call(s.process)==="[object process]"?function(C){aa.nextTick(function(){S(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,k=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(C){s.postMessage(h+C,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){d.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){S(C),k.onreadystatechange=null,c.removeChild(k),k=null},c.appendChild(k)}):function(C){setTimeout(S,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),j=0;j<k.length;j++)k[j]=arguments[j+1];var I={callback:C,args:k};return g[p]=I,l(p),p++},x.clearImmediate=w}function w(C){delete g[C]}function S(C){if(v)setTimeout(S,0,C);else{var k=g[C];if(k){v=!0;try{(function(j){var I=j.callback,N=j.args;switch(N.length){case 0:I();break;case 1:I(N[0]);break;case 2:I(N[0],N[1]);break;case 3:I(N[0],N[1],N[2]);break;default:I.apply(o,N)}})(k)}finally{w(C),v=!1}}}}function E(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Jd<"u"?Jd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(GE)),GE.exports}var ece=Qle();const S9=bi(ece),I0=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},ar=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},_l=(...e)=>ar(e.map(t=>t.trim()).filter(Boolean).join("/")),My=e=>{const t=ar(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},wa=e=>{const t=ar(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},j0=(e,t)=>ar(e==="/"?`/${t}`:`${e}/${t}`);var WE,MM;function tce(){if(MM)return WE;MM=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof aa>"u"||typeof aa.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof r!="function"&&(a=r,r=null,o=new this.Promise(function(E,C){i=E,s=C})),a=a||{};var l=!1,c=null,d=null,h=null,p=this,g=function(E,C,k){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(p.queues[t]&&p.queues[t].length===0&&delete p.queues[t],p.domainReentrant&&delete p.domains[t]),l||(o?C?s(C):i(k):typeof r=="function"&&r(C,k),l=!0),E&&p.queues[t]&&p.queues[t].length>0&&p.queues[t].shift()()},v=function(E){if(l)return g(E);c&&(clearTimeout(c),c=null),p.domainReentrant&&E&&(p.domains[t]=aa.domain);var C=a.maxExecutionTime||p.maxExecutionTime;if(C&&(h=setTimeout(function(){p.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(j,I){k||(k=!0,g(E,j,I))})}catch(j){k||(k=!0,g(E,j))}}else p._promiseTry(function(){return n()}).then(function(j){g(E,void 0,j)},function(j){g(E,j)})};p.domainReentrant&&aa.domain&&(v=aa.domain.bind(v));var b=a.maxPending||p.maxPending;if(!p.queues[t])p.queues[t]=[],v(!0);else if(p.domainReentrant&&aa.domain&&aa.domain===p.domains[t])v(!1);else if(p.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var x=function(){v(!0)};a.skipQueue?p.queues[t].unshift(x):p.queues[t].push(x);var w=a.timeout||p.timeout;w&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},w))}var S=a.maxOccupationTime||p.maxOccupationTime;if(S&&(d=setTimeout(function(){p.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),o)return o},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,s=function(l,c){return function(d){i.acquire(l,c,d,a)}},o=t.reduceRight(function(l,c){return s(c,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,c){o.length===1?o(function(d,h){d?c(d):l(h)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},WE=e,WE}var KE,OM;function nce(){return OM||(OM=1,KE=tce()),KE}var rce=nce();const D0=bi(rce);var pw={exports:{}},PM;function ace(){return PM||(PM=1,typeof Object.create=="function"?pw.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:pw.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),pw.exports}var ZE,FM;function ice(){if(FM)return ZE;FM=1;var e=_N().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,s=n.length,o=this._len,l=0;l<s;){for(var c=o%i,d=Math.min(s-l,i-c),h=0;h<d;h++)a[c+h]=n[l+h];o+=d,l+=d,o%i===0&&this._update(a)}return this._len+=s,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,s=(a-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},ZE=t,ZE}var YE,LM;function sce(){if(LM)return YE;LM=1;var e=ace(),t=ice(),n=_N().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(d){return d<<1|d>>>31}function o(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function c(d,h,p,g){return d===0?h&p|~h&g:d===2?h&p|h&g|p&g:h^p^g}return i.prototype._update=function(d){for(var h=this._w,p=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,x=this._e|0,w=0;w<16;++w)h[w]=d.readInt32BE(w*4);for(;w<80;++w)h[w]=s(h[w-3]^h[w-8]^h[w-14]^h[w-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=o(p)+c(E,g,v,b)+x+h[S]+r[E]|0;x=b,b=v,v=l(g),g=p,p=C}this._a=p+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},YE=i,YE}var oce=sce();const E9=bi(oce);var XE,$M;function lce(){if($M)return XE;$M=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var s="",o=0,l=-1,c=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||c===1))if(l!==h-1&&c===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var p=s.lastIndexOf("/");if(p!==s.length-1){p===-1?(s="",o=0):(s=s.slice(0,p),o=s.length-1-s.lastIndexOf("/")),l=h,c=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=h,c=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+a.slice(l+1,h):s=a.slice(l+1,h),o=h-l-1;l=h,c=0}else d===46&&c!==-1?++c:c=-1}return s}function n(a,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+a+o:o}var r={resolve:function(){for(var i="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var c;l>=0?c=arguments[l]:(o===void 0&&(o=aa.cwd()),c=o),e(c),c.length!==0&&(i=c+"/"+i,s=c.charCodeAt(0)===47)}return i=t(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var s=i.charCodeAt(0)===47,o=i.charCodeAt(i.length-1)===47;return i=t(i,!s),i.length===0&&!s&&(i="."),i.length>0&&o&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":r.normalize(i)},relative:function(i,s){if(e(i),e(s),i===s||(i=r.resolve(i),s=r.resolve(s),i===s))return"";for(var o=1;o<i.length&&i.charCodeAt(o)===47;++o);for(var l=i.length,c=l-o,d=1;d<s.length&&s.charCodeAt(d)===47;++d);for(var h=s.length,p=h-d,g=c<p?c:p,v=-1,b=0;b<=g;++b){if(b===g){if(p>g){if(s.charCodeAt(d+b)===47)return s.slice(d+b+1);if(b===0)return s.slice(d+b)}else c>g&&(i.charCodeAt(o+b)===47?v=b:b===0&&(v=0));break}var x=i.charCodeAt(o+b),w=s.charCodeAt(d+b);if(x!==w)break;x===47&&(v=b)}var S="";for(b=o+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+s.slice(d+v):(d+=v,s.charCodeAt(d)===47&&++d,s.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var s=i.charCodeAt(0),o=s===47,l=-1,c=!0,d=i.length-1;d>=1;--d)if(s=i.charCodeAt(d),s===47){if(!c){l=d;break}}else c=!1;return l===-1?o?"/":".":o&&l===1?"//":i.slice(0,l)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(i);var o=0,l=-1,c=!0,d;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var h=s.length-1,p=-1;for(d=i.length-1;d>=0;--d){var g=i.charCodeAt(d);if(g===47){if(!c){o=d+1;break}}else p===-1&&(c=!1,p=d+1),h>=0&&(g===s.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=p))}return o===l?l=p:l===-1&&(l=i.length),i.slice(o,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!c){o=d+1;break}}else l===-1&&(c=!1,l=d+1);return l===-1?"":i.slice(o,l)}},extname:function(i){e(i);for(var s=-1,o=0,l=-1,c=!0,d=0,h=i.length-1;h>=0;--h){var p=i.charCodeAt(h);if(p===47){if(!c){o=h+1;break}continue}l===-1&&(c=!1,l=h+1),p===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===o+1?"":i.slice(s,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var o=i.charCodeAt(0),l=o===47,c;l?(s.root="/",c=1):c=0;for(var d=-1,h=0,p=-1,g=!0,v=i.length-1,b=0;v>=c;--v){if(o=i.charCodeAt(v),o===47){if(!g){h=v+1;break}continue}p===-1&&(g=!1,p=v+1),o===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||p===-1||b===0||b===1&&d===p-1&&d===h+1?p!==-1&&(h===0&&l?s.base=s.name=i.slice(1,p):s.base=s.name=i.slice(h,p)):(h===0&&l?(s.name=i.slice(1,d),s.base=i.slice(1,p)):(s.name=i.slice(h,d),s.base=i.slice(h,p)),s.ext=i.slice(d,p)),h>0?s.dir=i.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,XE=r,XE}var Pt=lce(),JE={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var BM;function cce(){return BM||(BM=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,P=new Array(256),L=0;L!=256;++L)N=L,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,P[L]=N;return typeof Int32Array<"u"?new Int32Array(P):P}var r=n();function a(N){var P=0,L=0,H=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(H=0;H!=256;++H)M[H]=N[H];for(H=0;H!=256;++H)for(L=N[H],P=256+H;P<4096;P+=256)L=M[P]=L>>>8^N[L&255];var Z=[];for(H=1;H!=16;++H)Z[H-1]=typeof Int32Array<"u"?M.subarray(H*256,H*256+256):M.slice(H*256,H*256+256);return Z}var i=a(r),s=i[0],o=i[1],l=i[2],c=i[3],d=i[4],h=i[5],p=i[6],g=i[7],v=i[8],b=i[9],x=i[10],w=i[11],S=i[12],E=i[13],C=i[14];function k(N,P){for(var L=P^-1,H=0,M=N.length;H<M;)L=L>>>8^r[(L^N.charCodeAt(H++))&255];return~L}function j(N,P){for(var L=P^-1,H=N.length-15,M=0;M<H;)L=C[N[M++]^L&255]^E[N[M++]^L>>8&255]^S[N[M++]^L>>16&255]^w[N[M++]^L>>>24]^x[N[M++]]^b[N[M++]]^v[N[M++]]^g[N[M++]]^p[N[M++]]^h[N[M++]]^d[N[M++]]^c[N[M++]]^l[N[M++]]^o[N[M++]]^s[N[M++]]^r[N[M++]];for(H+=15;M<H;)L=L>>>8^r[(L^N[M++])&255];return~L}function I(N,P){for(var L=P^-1,H=0,M=N.length,Z=0,q=0;H<M;)Z=N.charCodeAt(H++),Z<128?L=L>>>8^r[(L^Z)&255]:Z<2048?(L=L>>>8^r[(L^(192|Z>>6&31))&255],L=L>>>8^r[(L^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,q=N.charCodeAt(H++)&1023,L=L>>>8^r[(L^(240|Z>>8&7))&255],L=L>>>8^r[(L^(128|Z>>2&63))&255],L=L>>>8^r[(L^(128|q>>6&15|(Z&3)<<4))&255],L=L>>>8^r[(L^(128|q&63))&255]):(L=L>>>8^r[(L^(224|Z>>12&15))&255],L=L>>>8^r[(L^(128|Z>>6&63))&255],L=L>>>8^r[(L^(128|Z&63))&255]);return~L}t.table=r,t.bstr=k,t.buf=j,t.str=I})}(JE)),JE}var uce=cce();const dce=bi(uce);var QE={},zM;function ld(){return zM||(zM=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,s){return Object.prototype.hasOwnProperty.call(i,s)}e.assign=function(i){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var o=s.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(i[l]=o[l])}}return i},e.shrinkBuf=function(i,s){return i.length===s?i:i.subarray?i.subarray(0,s):(i.length=s,i)};var r={arraySet:function(i,s,o,l,c){if(s.subarray&&i.subarray){i.set(s.subarray(o,o+l),c);return}for(var d=0;d<l;d++)i[c+d]=s[o+d]},flattenChunks:function(i){var s,o,l,c,d,h;for(l=0,s=0,o=i.length;s<o;s++)l+=i[s].length;for(h=new Uint8Array(l),c=0,s=0,o=i.length;s<o;s++)d=i[s],h.set(d,c),c+=d.length;return h}},a={arraySet:function(i,s,o,l,c){for(var d=0;d<l;d++)i[c+d]=s[o+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(QE)),QE}var Ph={},no={},Ud={},UM;function fce(){if(UM)return Ud;UM=1;var e=ld(),t=4,n=0,r=1,a=2;function i(D){for(var W=D.length;--W>=0;)D[W]=0}var s=0,o=1,l=2,c=3,d=258,h=29,p=256,g=p+1+h,v=30,b=19,x=2*g+1,w=15,S=16,E=7,C=256,k=16,j=17,I=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=512,Z=new Array((g+2)*2);i(Z);var q=new Array(v*2);i(q);var ue=new Array(M);i(ue);var ae=new Array(d-c+1);i(ae);var ee=new Array(h);i(ee);var X=new Array(v);i(X);function ie(D,W,pe,De,ve){this.static_tree=D,this.extra_bits=W,this.extra_base=pe,this.elems=De,this.max_length=ve,this.has_stree=D&&D.length}var B,J,Q;function ne(D,W){this.dyn_tree=D,this.max_code=0,this.stat_desc=W}function he(D){return D<256?ue[D]:ue[256+(D>>>7)]}function de(D,W){D.pending_buf[D.pending++]=W&255,D.pending_buf[D.pending++]=W>>>8&255}function Ie(D,W,pe){D.bi_valid>S-pe?(D.bi_buf|=W<<D.bi_valid&65535,de(D,D.bi_buf),D.bi_buf=W>>S-D.bi_valid,D.bi_valid+=pe-S):(D.bi_buf|=W<<D.bi_valid&65535,D.bi_valid+=pe)}function Te(D,W,pe){Ie(D,pe[W*2],pe[W*2+1])}function Ae(D,W){var pe=0;do pe|=D&1,D>>>=1,pe<<=1;while(--W>0);return pe>>>1}function Ee(D){D.bi_valid===16?(de(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function Pe(D,W){var pe=W.dyn_tree,De=W.max_code,ve=W.stat_desc.static_tree,ke=W.stat_desc.has_stree,le=W.stat_desc.extra_bits,ft=W.stat_desc.extra_base,vt=W.stat_desc.max_length,F,Be,nt,ye,Me,Ke,Dt=0;for(ye=0;ye<=w;ye++)D.bl_count[ye]=0;for(pe[D.heap[D.heap_max]*2+1]=0,F=D.heap_max+1;F<x;F++)Be=D.heap[F],ye=pe[pe[Be*2+1]*2+1]+1,ye>vt&&(ye=vt,Dt++),pe[Be*2+1]=ye,!(Be>De)&&(D.bl_count[ye]++,Me=0,Be>=ft&&(Me=le[Be-ft]),Ke=pe[Be*2],D.opt_len+=Ke*(ye+Me),ke&&(D.static_len+=Ke*(ve[Be*2+1]+Me)));if(Dt!==0){do{for(ye=vt-1;D.bl_count[ye]===0;)ye--;D.bl_count[ye]--,D.bl_count[ye+1]+=2,D.bl_count[vt]--,Dt-=2}while(Dt>0);for(ye=vt;ye!==0;ye--)for(Be=D.bl_count[ye];Be!==0;)nt=D.heap[--F],!(nt>De)&&(pe[nt*2+1]!==ye&&(D.opt_len+=(ye-pe[nt*2+1])*pe[nt*2],pe[nt*2+1]=ye),Be--)}}function Qe(D,W,pe){var De=new Array(w+1),ve=0,ke,le;for(ke=1;ke<=w;ke++)De[ke]=ve=ve+pe[ke-1]<<1;for(le=0;le<=W;le++){var ft=D[le*2+1];ft!==0&&(D[le*2]=Ae(De[ft]++,ft))}}function Le(){var D,W,pe,De,ve,ke=new Array(w+1);for(pe=0,De=0;De<h-1;De++)for(ee[De]=pe,D=0;D<1<<N[De];D++)ae[pe++]=De;for(ae[pe-1]=De,ve=0,De=0;De<16;De++)for(X[De]=ve,D=0;D<1<<P[De];D++)ue[ve++]=De;for(ve>>=7;De<v;De++)for(X[De]=ve<<7,D=0;D<1<<P[De]-7;D++)ue[256+ve++]=De;for(W=0;W<=w;W++)ke[W]=0;for(D=0;D<=143;)Z[D*2+1]=8,D++,ke[8]++;for(;D<=255;)Z[D*2+1]=9,D++,ke[9]++;for(;D<=279;)Z[D*2+1]=7,D++,ke[7]++;for(;D<=287;)Z[D*2+1]=8,D++,ke[8]++;for(Qe(Z,g+1,ke),D=0;D<v;D++)q[D*2+1]=5,q[D*2]=Ae(D,5);B=new ie(Z,N,p+1,g,w),J=new ie(q,P,0,v,w),Q=new ie(new Array(0),L,0,b,E)}function je(D){var W;for(W=0;W<g;W++)D.dyn_ltree[W*2]=0;for(W=0;W<v;W++)D.dyn_dtree[W*2]=0;for(W=0;W<b;W++)D.bl_tree[W*2]=0;D.dyn_ltree[C*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function z(D){D.bi_valid>8?de(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function Se(D,W,pe,De){z(D),de(D,pe),de(D,~pe),e.arraySet(D.pending_buf,D.window,W,pe,D.pending),D.pending+=pe}function Ne(D,W,pe,De){var ve=W*2,ke=pe*2;return D[ve]<D[ke]||D[ve]===D[ke]&&De[W]<=De[pe]}function fe(D,W,pe){for(var De=D.heap[pe],ve=pe<<1;ve<=D.heap_len&&(ve<D.heap_len&&Ne(W,D.heap[ve+1],D.heap[ve],D.depth)&&ve++,!Ne(W,De,D.heap[ve],D.depth));)D.heap[pe]=D.heap[ve],pe=ve,ve<<=1;D.heap[pe]=De}function se(D,W,pe){var De,ve,ke=0,le,ft;if(D.last_lit!==0)do De=D.pending_buf[D.d_buf+ke*2]<<8|D.pending_buf[D.d_buf+ke*2+1],ve=D.pending_buf[D.l_buf+ke],ke++,De===0?Te(D,ve,W):(le=ae[ve],Te(D,le+p+1,W),ft=N[le],ft!==0&&(ve-=ee[le],Ie(D,ve,ft)),De--,le=he(De),Te(D,le,pe),ft=P[le],ft!==0&&(De-=X[le],Ie(D,De,ft)));while(ke<D.last_lit);Te(D,C,W)}function te(D,W){var pe=W.dyn_tree,De=W.stat_desc.static_tree,ve=W.stat_desc.has_stree,ke=W.stat_desc.elems,le,ft,vt=-1,F;for(D.heap_len=0,D.heap_max=x,le=0;le<ke;le++)pe[le*2]!==0?(D.heap[++D.heap_len]=vt=le,D.depth[le]=0):pe[le*2+1]=0;for(;D.heap_len<2;)F=D.heap[++D.heap_len]=vt<2?++vt:0,pe[F*2]=1,D.depth[F]=0,D.opt_len--,ve&&(D.static_len-=De[F*2+1]);for(W.max_code=vt,le=D.heap_len>>1;le>=1;le--)fe(D,pe,le);F=ke;do le=D.heap[1],D.heap[1]=D.heap[D.heap_len--],fe(D,pe,1),ft=D.heap[1],D.heap[--D.heap_max]=le,D.heap[--D.heap_max]=ft,pe[F*2]=pe[le*2]+pe[ft*2],D.depth[F]=(D.depth[le]>=D.depth[ft]?D.depth[le]:D.depth[ft])+1,pe[le*2+1]=pe[ft*2+1]=F,D.heap[1]=F++,fe(D,pe,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],Pe(D,W),Qe(pe,vt,D.bl_count)}function xe(D,W,pe){var De,ve=-1,ke,le=W[0*2+1],ft=0,vt=7,F=4;for(le===0&&(vt=138,F=3),W[(pe+1)*2+1]=65535,De=0;De<=pe;De++)ke=le,le=W[(De+1)*2+1],!(++ft<vt&&ke===le)&&(ft<F?D.bl_tree[ke*2]+=ft:ke!==0?(ke!==ve&&D.bl_tree[ke*2]++,D.bl_tree[k*2]++):ft<=10?D.bl_tree[j*2]++:D.bl_tree[I*2]++,ft=0,ve=ke,le===0?(vt=138,F=3):ke===le?(vt=6,F=3):(vt=7,F=4))}function Fe(D,W,pe){var De,ve=-1,ke,le=W[0*2+1],ft=0,vt=7,F=4;for(le===0&&(vt=138,F=3),De=0;De<=pe;De++)if(ke=le,le=W[(De+1)*2+1],!(++ft<vt&&ke===le)){if(ft<F)do Te(D,ke,D.bl_tree);while(--ft!==0);else ke!==0?(ke!==ve&&(Te(D,ke,D.bl_tree),ft--),Te(D,k,D.bl_tree),Ie(D,ft-3,2)):ft<=10?(Te(D,j,D.bl_tree),Ie(D,ft-3,3)):(Te(D,I,D.bl_tree),Ie(D,ft-11,7));ft=0,ve=ke,le===0?(vt=138,F=3):ke===le?(vt=6,F=3):(vt=7,F=4)}}function Ce(D){var W;for(xe(D,D.dyn_ltree,D.l_desc.max_code),xe(D,D.dyn_dtree,D.d_desc.max_code),te(D,D.bl_desc),W=b-1;W>=3&&D.bl_tree[H[W]*2+1]===0;W--);return D.opt_len+=3*(W+1)+5+5+4,W}function We(D,W,pe,De){var ve;for(Ie(D,W-257,5),Ie(D,pe-1,5),Ie(D,De-4,4),ve=0;ve<De;ve++)Ie(D,D.bl_tree[H[ve]*2+1],3);Fe(D,D.dyn_ltree,W-1),Fe(D,D.dyn_dtree,pe-1)}function Nt(D){var W=4093624447,pe;for(pe=0;pe<=31;pe++,W>>>=1)if(W&1&&D.dyn_ltree[pe*2]!==0)return n;if(D.dyn_ltree[9*2]!==0||D.dyn_ltree[10*2]!==0||D.dyn_ltree[13*2]!==0)return r;for(pe=32;pe<p;pe++)if(D.dyn_ltree[pe*2]!==0)return r;return n}var it=!1;function St(D){it||(Le(),it=!0),D.l_desc=new ne(D.dyn_ltree,B),D.d_desc=new ne(D.dyn_dtree,J),D.bl_desc=new ne(D.bl_tree,Q),D.bi_buf=0,D.bi_valid=0,je(D)}function Ft(D,W,pe,De){Ie(D,(s<<1)+(De?1:0),3),Se(D,W,pe)}function Mt(D){Ie(D,o<<1,3),Te(D,C,Z),Ee(D)}function Zt(D,W,pe,De){var ve,ke,le=0;D.level>0?(D.strm.data_type===a&&(D.strm.data_type=Nt(D)),te(D,D.l_desc),te(D,D.d_desc),le=Ce(D),ve=D.opt_len+3+7>>>3,ke=D.static_len+3+7>>>3,ke<=ve&&(ve=ke)):ve=ke=pe+5,pe+4<=ve&&W!==-1?Ft(D,W,pe,De):D.strategy===t||ke===ve?(Ie(D,(o<<1)+(De?1:0),3),se(D,Z,q)):(Ie(D,(l<<1)+(De?1:0),3),We(D,D.l_desc.max_code+1,D.d_desc.max_code+1,le+1),se(D,D.dyn_ltree,D.dyn_dtree)),je(D),De&&z(D)}function be(D,W,pe){return D.pending_buf[D.d_buf+D.last_lit*2]=W>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=W&255,D.pending_buf[D.l_buf+D.last_lit]=pe&255,D.last_lit++,W===0?D.dyn_ltree[pe*2]++:(D.matches++,W--,D.dyn_ltree[(ae[pe]+p+1)*2]++,D.dyn_dtree[he(W)*2]++),D.last_lit===D.lit_bufsize-1}return Ud._tr_init=St,Ud._tr_stored_block=Ft,Ud._tr_flush_block=Zt,Ud._tr_tally=be,Ud._tr_align=Mt,Ud}var eC,VM;function C9(){if(VM)return eC;VM=1;function e(t,n,r,a){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+n[a++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}return eC=e,eC}var tC,HM;function T9(){if(HM)return tC;HM=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,s){var o=t,l=s+i;r^=-1;for(var c=s;c<l;c++)r=r>>>8^o[(r^a[c])&255];return r^-1}return tC=n,tC}var nC,qM;function DN(){return qM||(qM=1,nC={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),nC}var GM;function hce(){if(GM)return no;GM=1;var e=ld(),t=fce(),n=C9(),r=T9(),a=DN(),i=0,s=1,o=3,l=4,c=5,d=0,h=1,p=-2,g=-3,v=-5,b=-1,x=1,w=2,S=3,E=4,C=0,k=2,j=8,I=9,N=15,P=8,L=29,H=256,M=H+1+L,Z=30,q=19,ue=2*M+1,ae=15,ee=3,X=258,ie=X+ee+1,B=32,J=42,Q=69,ne=73,he=91,de=103,Ie=113,Te=666,Ae=1,Ee=2,Pe=3,Qe=4,Le=3;function je(F,Be){return F.msg=a[Be],Be}function z(F){return(F<<1)-(F>4?9:0)}function Se(F){for(var Be=F.length;--Be>=0;)F[Be]=0}function Ne(F){var Be=F.state,nt=Be.pending;nt>F.avail_out&&(nt=F.avail_out),nt!==0&&(e.arraySet(F.output,Be.pending_buf,Be.pending_out,nt,F.next_out),F.next_out+=nt,Be.pending_out+=nt,F.total_out+=nt,F.avail_out-=nt,Be.pending-=nt,Be.pending===0&&(Be.pending_out=0))}function fe(F,Be){t._tr_flush_block(F,F.block_start>=0?F.block_start:-1,F.strstart-F.block_start,Be),F.block_start=F.strstart,Ne(F.strm)}function se(F,Be){F.pending_buf[F.pending++]=Be}function te(F,Be){F.pending_buf[F.pending++]=Be>>>8&255,F.pending_buf[F.pending++]=Be&255}function xe(F,Be,nt,ye){var Me=F.avail_in;return Me>ye&&(Me=ye),Me===0?0:(F.avail_in-=Me,e.arraySet(Be,F.input,F.next_in,Me,nt),F.state.wrap===1?F.adler=n(F.adler,Be,Me,nt):F.state.wrap===2&&(F.adler=r(F.adler,Be,Me,nt)),F.next_in+=Me,F.total_in+=Me,Me)}function Fe(F,Be){var nt=F.max_chain_length,ye=F.strstart,Me,Ke,Dt=F.prev_length,ge=F.nice_match,G=F.strstart>F.w_size-ie?F.strstart-(F.w_size-ie):0,V=F.window,K=F.w_mask,me=F.prev,Re=F.strstart+X,Ve=V[ye+Dt-1],pt=V[ye+Dt];F.prev_length>=F.good_match&&(nt>>=2),ge>F.lookahead&&(ge=F.lookahead);do if(Me=Be,!(V[Me+Dt]!==pt||V[Me+Dt-1]!==Ve||V[Me]!==V[ye]||V[++Me]!==V[ye+1])){ye+=2,Me++;do;while(V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&ye<Re);if(Ke=X-(Re-ye),ye=Re-X,Ke>Dt){if(F.match_start=Be,Dt=Ke,Ke>=ge)break;Ve=V[ye+Dt-1],pt=V[ye+Dt]}}while((Be=me[Be&K])>G&&--nt!==0);return Dt<=F.lookahead?Dt:F.lookahead}function Ce(F){var Be=F.w_size,nt,ye,Me,Ke,Dt;do{if(Ke=F.window_size-F.lookahead-F.strstart,F.strstart>=Be+(Be-ie)){e.arraySet(F.window,F.window,Be,Be,0),F.match_start-=Be,F.strstart-=Be,F.block_start-=Be,ye=F.hash_size,nt=ye;do Me=F.head[--nt],F.head[nt]=Me>=Be?Me-Be:0;while(--ye);ye=Be,nt=ye;do Me=F.prev[--nt],F.prev[nt]=Me>=Be?Me-Be:0;while(--ye);Ke+=Be}if(F.strm.avail_in===0)break;if(ye=xe(F.strm,F.window,F.strstart+F.lookahead,Ke),F.lookahead+=ye,F.lookahead+F.insert>=ee)for(Dt=F.strstart-F.insert,F.ins_h=F.window[Dt],F.ins_h=(F.ins_h<<F.hash_shift^F.window[Dt+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[Dt+ee-1])&F.hash_mask,F.prev[Dt&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=Dt,Dt++,F.insert--,!(F.lookahead+F.insert<ee)););}while(F.lookahead<ie&&F.strm.avail_in!==0)}function We(F,Be){var nt=65535;for(nt>F.pending_buf_size-5&&(nt=F.pending_buf_size-5);;){if(F.lookahead<=1){if(Ce(F),F.lookahead===0&&Be===i)return Ae;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var ye=F.block_start+nt;if((F.strstart===0||F.strstart>=ye)&&(F.lookahead=F.strstart-ye,F.strstart=ye,fe(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-ie&&(fe(F,!1),F.strm.avail_out===0))return Ae}return F.insert=0,Be===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):(F.strstart>F.block_start&&(fe(F,!1),F.strm.avail_out===0),Ae)}function Nt(F,Be){for(var nt,ye;;){if(F.lookahead<ie){if(Ce(F),F.lookahead<ie&&Be===i)return Ae;if(F.lookahead===0)break}if(nt=0,F.lookahead>=ee&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+ee-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),nt!==0&&F.strstart-nt<=F.w_size-ie&&(F.match_length=Fe(F,nt)),F.match_length>=ee)if(ye=t._tr_tally(F,F.strstart-F.match_start,F.match_length-ee),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=ee){F.match_length--;do F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+ee-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart;while(--F.match_length!==0);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else ye=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(ye&&(fe(F,!1),F.strm.avail_out===0))return Ae}return F.insert=F.strstart<ee-1?F.strstart:ee-1,Be===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?Ae:Ee}function it(F,Be){for(var nt,ye,Me;;){if(F.lookahead<ie){if(Ce(F),F.lookahead<ie&&Be===i)return Ae;if(F.lookahead===0)break}if(nt=0,F.lookahead>=ee&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+ee-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=ee-1,nt!==0&&F.prev_length<F.max_lazy_match&&F.strstart-nt<=F.w_size-ie&&(F.match_length=Fe(F,nt),F.match_length<=5&&(F.strategy===x||F.match_length===ee&&F.strstart-F.match_start>4096)&&(F.match_length=ee-1)),F.prev_length>=ee&&F.match_length<=F.prev_length){Me=F.strstart+F.lookahead-ee,ye=t._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-ee),F.lookahead-=F.prev_length-1,F.prev_length-=2;do++F.strstart<=Me&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+ee-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart);while(--F.prev_length!==0);if(F.match_available=0,F.match_length=ee-1,F.strstart++,ye&&(fe(F,!1),F.strm.avail_out===0))return Ae}else if(F.match_available){if(ye=t._tr_tally(F,0,F.window[F.strstart-1]),ye&&fe(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return Ae}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(ye=t._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<ee-1?F.strstart:ee-1,Be===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?Ae:Ee}function St(F,Be){for(var nt,ye,Me,Ke,Dt=F.window;;){if(F.lookahead<=X){if(Ce(F),F.lookahead<=X&&Be===i)return Ae;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=ee&&F.strstart>0&&(Me=F.strstart-1,ye=Dt[Me],ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me])){Ke=F.strstart+X;do;while(ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&Me<Ke);F.match_length=X-(Ke-Me),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=ee?(nt=t._tr_tally(F,1,F.match_length-ee),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(nt=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),nt&&(fe(F,!1),F.strm.avail_out===0))return Ae}return F.insert=0,Be===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?Ae:Ee}function Ft(F,Be){for(var nt;;){if(F.lookahead===0&&(Ce(F),F.lookahead===0)){if(Be===i)return Ae;break}if(F.match_length=0,nt=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,nt&&(fe(F,!1),F.strm.avail_out===0))return Ae}return F.insert=0,Be===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?Ae:Ee}function Mt(F,Be,nt,ye,Me){this.good_length=F,this.max_lazy=Be,this.nice_length=nt,this.max_chain=ye,this.func=Me}var Zt;Zt=[new Mt(0,0,0,0,We),new Mt(4,4,8,4,Nt),new Mt(4,5,16,8,Nt),new Mt(4,6,32,32,Nt),new Mt(4,4,16,16,it),new Mt(8,16,32,32,it),new Mt(8,16,128,128,it),new Mt(8,32,128,256,it),new Mt(32,128,258,1024,it),new Mt(32,258,258,4096,it)];function be(F){F.window_size=2*F.w_size,Se(F.head),F.max_lazy_match=Zt[F.level].max_lazy,F.good_match=Zt[F.level].good_length,F.nice_match=Zt[F.level].nice_length,F.max_chain_length=Zt[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=ee-1,F.match_available=0,F.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=j,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(ue*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*q+1)*2),Se(this.dyn_ltree),Se(this.dyn_dtree),Se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*M+1),Se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*M+1),Se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(F){var Be;return!F||!F.state?je(F,p):(F.total_in=F.total_out=0,F.data_type=k,Be=F.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?J:Ie,F.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),d)}function pe(F){var Be=W(F);return Be===d&&be(F.state),Be}function De(F,Be){return!F||!F.state||F.state.wrap!==2?p:(F.state.gzhead=Be,d)}function ve(F,Be,nt,ye,Me,Ke){if(!F)return p;var Dt=1;if(Be===b&&(Be=6),ye<0?(Dt=0,ye=-ye):ye>15&&(Dt=2,ye-=16),Me<1||Me>I||nt!==j||ye<8||ye>15||Be<0||Be>9||Ke<0||Ke>E)return je(F,p);ye===8&&(ye=9);var ge=new D;return F.state=ge,ge.strm=F,ge.wrap=Dt,ge.gzhead=null,ge.w_bits=ye,ge.w_size=1<<ge.w_bits,ge.w_mask=ge.w_size-1,ge.hash_bits=Me+7,ge.hash_size=1<<ge.hash_bits,ge.hash_mask=ge.hash_size-1,ge.hash_shift=~~((ge.hash_bits+ee-1)/ee),ge.window=new e.Buf8(ge.w_size*2),ge.head=new e.Buf16(ge.hash_size),ge.prev=new e.Buf16(ge.w_size),ge.lit_bufsize=1<<Me+6,ge.pending_buf_size=ge.lit_bufsize*4,ge.pending_buf=new e.Buf8(ge.pending_buf_size),ge.d_buf=1*ge.lit_bufsize,ge.l_buf=3*ge.lit_bufsize,ge.level=Be,ge.strategy=Ke,ge.method=nt,pe(F)}function ke(F,Be){return ve(F,Be,j,N,P,C)}function le(F,Be){var nt,ye,Me,Ke;if(!F||!F.state||Be>c||Be<0)return F?je(F,p):p;if(ye=F.state,!F.output||!F.input&&F.avail_in!==0||ye.status===Te&&Be!==l)return je(F,F.avail_out===0?v:p);if(ye.strm=F,nt=ye.last_flush,ye.last_flush=Be,ye.status===J)if(ye.wrap===2)F.adler=0,se(ye,31),se(ye,139),se(ye,8),ye.gzhead?(se(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),se(ye,ye.gzhead.time&255),se(ye,ye.gzhead.time>>8&255),se(ye,ye.gzhead.time>>16&255),se(ye,ye.gzhead.time>>24&255),se(ye,ye.level===9?2:ye.strategy>=w||ye.level<2?4:0),se(ye,ye.gzhead.os&255),ye.gzhead.extra&&ye.gzhead.extra.length&&(se(ye,ye.gzhead.extra.length&255),se(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&(F.adler=r(F.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=Q):(se(ye,0),se(ye,0),se(ye,0),se(ye,0),se(ye,0),se(ye,ye.level===9?2:ye.strategy>=w||ye.level<2?4:0),se(ye,Le),ye.status=Ie);else{var Dt=j+(ye.w_bits-8<<4)<<8,ge=-1;ye.strategy>=w||ye.level<2?ge=0:ye.level<6?ge=1:ye.level===6?ge=2:ge=3,Dt|=ge<<6,ye.strstart!==0&&(Dt|=B),Dt+=31-Dt%31,ye.status=Ie,te(ye,Dt),ye.strstart!==0&&(te(ye,F.adler>>>16),te(ye,F.adler&65535)),F.adler=1}if(ye.status===Q)if(ye.gzhead.extra){for(Me=ye.pending;ye.gzindex<(ye.gzhead.extra.length&65535)&&!(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ne(F),Me=ye.pending,ye.pending===ye.pending_buf_size));)se(ye,ye.gzhead.extra[ye.gzindex]&255),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=ne)}else ye.status=ne;if(ye.status===ne)if(ye.gzhead.name){Me=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ne(F),Me=ye.pending,ye.pending===ye.pending_buf_size)){Ke=1;break}ye.gzindex<ye.gzhead.name.length?Ke=ye.gzhead.name.charCodeAt(ye.gzindex++)&255:Ke=0,se(ye,Ke)}while(Ke!==0);ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ke===0&&(ye.gzindex=0,ye.status=he)}else ye.status=he;if(ye.status===he)if(ye.gzhead.comment){Me=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ne(F),Me=ye.pending,ye.pending===ye.pending_buf_size)){Ke=1;break}ye.gzindex<ye.gzhead.comment.length?Ke=ye.gzhead.comment.charCodeAt(ye.gzindex++)&255:Ke=0,se(ye,Ke)}while(Ke!==0);ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ke===0&&(ye.status=de)}else ye.status=de;if(ye.status===de&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&Ne(F),ye.pending+2<=ye.pending_buf_size&&(se(ye,F.adler&255),se(ye,F.adler>>8&255),F.adler=0,ye.status=Ie)):ye.status=Ie),ye.pending!==0){if(Ne(F),F.avail_out===0)return ye.last_flush=-1,d}else if(F.avail_in===0&&z(Be)<=z(nt)&&Be!==l)return je(F,v);if(ye.status===Te&&F.avail_in!==0)return je(F,v);if(F.avail_in!==0||ye.lookahead!==0||Be!==i&&ye.status!==Te){var G=ye.strategy===w?Ft(ye,Be):ye.strategy===S?St(ye,Be):Zt[ye.level].func(ye,Be);if((G===Pe||G===Qe)&&(ye.status=Te),G===Ae||G===Pe)return F.avail_out===0&&(ye.last_flush=-1),d;if(G===Ee&&(Be===s?t._tr_align(ye):Be!==c&&(t._tr_stored_block(ye,0,0,!1),Be===o&&(Se(ye.head),ye.lookahead===0&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),Ne(F),F.avail_out===0))return ye.last_flush=-1,d}return Be!==l?d:ye.wrap<=0?h:(ye.wrap===2?(se(ye,F.adler&255),se(ye,F.adler>>8&255),se(ye,F.adler>>16&255),se(ye,F.adler>>24&255),se(ye,F.total_in&255),se(ye,F.total_in>>8&255),se(ye,F.total_in>>16&255),se(ye,F.total_in>>24&255)):(te(ye,F.adler>>>16),te(ye,F.adler&65535)),Ne(F),ye.wrap>0&&(ye.wrap=-ye.wrap),ye.pending!==0?d:h)}function ft(F){var Be;return!F||!F.state?p:(Be=F.state.status,Be!==J&&Be!==Q&&Be!==ne&&Be!==he&&Be!==de&&Be!==Ie&&Be!==Te?je(F,p):(F.state=null,Be===Ie?je(F,g):d))}function vt(F,Be){var nt=Be.length,ye,Me,Ke,Dt,ge,G,V,K;if(!F||!F.state||(ye=F.state,Dt=ye.wrap,Dt===2||Dt===1&&ye.status!==J||ye.lookahead))return p;for(Dt===1&&(F.adler=n(F.adler,Be,nt,0)),ye.wrap=0,nt>=ye.w_size&&(Dt===0&&(Se(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),K=new e.Buf8(ye.w_size),e.arraySet(K,Be,nt-ye.w_size,ye.w_size,0),Be=K,nt=ye.w_size),ge=F.avail_in,G=F.next_in,V=F.input,F.avail_in=nt,F.next_in=0,F.input=Be,Ce(ye);ye.lookahead>=ee;){Me=ye.strstart,Ke=ye.lookahead-(ee-1);do ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[Me+ee-1])&ye.hash_mask,ye.prev[Me&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=Me,Me++;while(--Ke);ye.strstart=Me,ye.lookahead=ee-1,Ce(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=ee-1,ye.match_available=0,F.next_in=G,F.input=V,F.avail_in=ge,ye.wrap=Dt,d}return no.deflateInit=ke,no.deflateInit2=ve,no.deflateReset=pe,no.deflateResetKeep=W,no.deflateSetHeader=De,no.deflate=le,no.deflateEnd=ft,no.deflateSetDictionary=vt,no.deflateInfo="pako deflate (from Nodeca project)",no}var Vd={},WM;function k9(){if(WM)return Vd;WM=1;var e=ld(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Vd.string2buf=function(s){var o,l,c,d,h,p=s.length,g=0;for(d=0;d<p;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<p&&(c=s.charCodeAt(d+1),(c&64512)===56320&&(l=65536+(l-55296<<10)+(c-56320),d++)),g+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(g),h=0,d=0;h<g;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<p&&(c=s.charCodeAt(d+1),(c&64512)===56320&&(l=65536+(l-55296<<10)+(c-56320),d++)),l<128?o[h++]=l:l<2048?(o[h++]=192|l>>>6,o[h++]=128|l&63):l<65536?(o[h++]=224|l>>>12,o[h++]=128|l>>>6&63,o[h++]=128|l&63):(o[h++]=240|l>>>18,o[h++]=128|l>>>12&63,o[h++]=128|l>>>6&63,o[h++]=128|l&63);return o};function i(s,o){if(o<65534&&(s.subarray&&n||!s.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(s,o));for(var l="",c=0;c<o;c++)l+=String.fromCharCode(s[c]);return l}return Vd.buf2binstring=function(s){return i(s,s.length)},Vd.binstring2buf=function(s){for(var o=new e.Buf8(s.length),l=0,c=o.length;l<c;l++)o[l]=s.charCodeAt(l);return o},Vd.buf2string=function(s,o){var l,c,d,h,p=o||s.length,g=new Array(p*2);for(c=0,l=0;l<p;){if(d=s[l++],d<128){g[c++]=d;continue}if(h=r[d],h>4){g[c++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<p;)d=d<<6|s[l++]&63,h--;if(h>1){g[c++]=65533;continue}d<65536?g[c++]=d:(d-=65536,g[c++]=55296|d>>10&1023,g[c++]=56320|d&1023)}return i(g,c)},Vd.utf8border=function(s,o){var l;for(o=o||s.length,o>s.length&&(o=s.length),l=o-1;l>=0&&(s[l]&192)===128;)l--;return l<0||l===0?o:l+r[s[l]]>o?l:o},Vd}var rC,KM;function A9(){if(KM)return rC;KM=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return rC=e,rC}var ZM;function pce(){if(ZM)return Ph;ZM=1;var e=hce(),t=ld(),n=k9(),r=DN(),a=A9(),i=Object.prototype.toString,s=0,o=4,l=0,c=1,d=2,h=-1,p=0,g=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==l)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==l)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,k=this.options.chunkSize,j,I;if(this.ended)return!1;I=E===~~E?E:E===!0?o:s,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),j=e.deflate(C,I),j!==c&&j!==l)return this.onEnd(j),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(I===o||I===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&j!==c);return I===o?(j=e.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===l):(I===d&&(this.onEnd(l),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function b(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function x(S,E){return E=E||{},E.raw=!0,b(S,E)}function w(S,E){return E=E||{},E.gzip=!0,b(S,E)}return Ph.Deflate=v,Ph.deflate=b,Ph.deflateRaw=x,Ph.gzip=w,Ph}var Fh={},Ds={},aC,YM;function mce(){if(YM)return aC;YM=1;var e=30,t=12;return aC=function(r,a){var i,s,o,l,c,d,h,p,g,v,b,x,w,S,E,C,k,j,I,N,P,L,H,M,Z;i=r.state,s=r.next_in,M=r.input,o=s+(r.avail_in-5),l=r.next_out,Z=r.output,c=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,p=i.wsize,g=i.whave,v=i.wnext,b=i.window,x=i.hold,w=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{w<15&&(x+=M[s++]<<w,w+=8,x+=M[s++]<<w,w+=8),j=S[x&C];t:for(;;){if(I=j>>>24,x>>>=I,w-=I,I=j>>>16&255,I===0)Z[l++]=j&65535;else if(I&16){N=j&65535,I&=15,I&&(w<I&&(x+=M[s++]<<w,w+=8),N+=x&(1<<I)-1,x>>>=I,w-=I),w<15&&(x+=M[s++]<<w,w+=8,x+=M[s++]<<w,w+=8),j=E[x&k];n:for(;;){if(I=j>>>24,x>>>=I,w-=I,I=j>>>16&255,I&16){if(P=j&65535,I&=15,w<I&&(x+=M[s++]<<w,w+=8,w<I&&(x+=M[s++]<<w,w+=8)),P+=x&(1<<I)-1,P>h){r.msg="invalid distance too far back",i.mode=e;break e}if(x>>>=I,w-=I,I=l-c,P>I){if(I=P-I,I>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(L=0,H=b,v===0){if(L+=p-I,I<N){N-=I;do Z[l++]=b[L++];while(--I);L=l-P,H=Z}}else if(v<I){if(L+=p+v-I,I-=v,I<N){N-=I;do Z[l++]=b[L++];while(--I);if(L=0,v<N){I=v,N-=I;do Z[l++]=b[L++];while(--I);L=l-P,H=Z}}}else if(L+=v-I,I<N){N-=I;do Z[l++]=b[L++];while(--I);L=l-P,H=Z}for(;N>2;)Z[l++]=H[L++],Z[l++]=H[L++],Z[l++]=H[L++],N-=3;N&&(Z[l++]=H[L++],N>1&&(Z[l++]=H[L++]))}else{L=l-P;do Z[l++]=Z[L++],Z[l++]=Z[L++],Z[l++]=Z[L++],N-=3;while(N>2);N&&(Z[l++]=Z[L++],N>1&&(Z[l++]=Z[L++]))}}else if((I&64)===0){j=E[(j&65535)+(x&(1<<I)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((I&64)===0){j=S[(j&65535)+(x&(1<<I)-1)];continue t}else if(I&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(s<o&&l<d);N=w>>3,s-=N,w-=N<<3,x&=(1<<w)-1,r.next_in=s,r.next_out=l,r.avail_in=s<o?5+(o-s):5-(s-o),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=x,i.bits=w},aC}var iC,XM;function gce(){if(XM)return iC;XM=1;var e=ld(),t=15,n=852,r=592,a=0,i=1,s=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return iC=function(p,g,v,b,x,w,S,E){var C=E.bits,k=0,j=0,I=0,N=0,P=0,L=0,H=0,M=0,Z=0,q=0,ue,ae,ee,X,ie,B=null,J=0,Q,ne=new e.Buf16(t+1),he=new e.Buf16(t+1),de=null,Ie=0,Te,Ae,Ee;for(k=0;k<=t;k++)ne[k]=0;for(j=0;j<b;j++)ne[g[v+j]]++;for(P=C,N=t;N>=1&&ne[N]===0;N--);if(P>N&&(P=N),N===0)return x[w++]=1<<24|64<<16|0,x[w++]=1<<24|64<<16|0,E.bits=1,0;for(I=1;I<N&&ne[I]===0;I++);for(P<I&&(P=I),M=1,k=1;k<=t;k++)if(M<<=1,M-=ne[k],M<0)return-1;if(M>0&&(p===a||N!==1))return-1;for(he[1]=0,k=1;k<t;k++)he[k+1]=he[k]+ne[k];for(j=0;j<b;j++)g[v+j]!==0&&(S[he[g[v+j]]++]=j);if(p===a?(B=de=S,Q=19):p===i?(B=o,J-=257,de=l,Ie-=257,Q=256):(B=c,de=d,Q=-1),q=0,j=0,k=I,ie=w,L=P,H=0,ee=-1,Z=1<<P,X=Z-1,p===i&&Z>n||p===s&&Z>r)return 1;for(;;){Te=k-H,S[j]<Q?(Ae=0,Ee=S[j]):S[j]>Q?(Ae=de[Ie+S[j]],Ee=B[J+S[j]]):(Ae=96,Ee=0),ue=1<<k-H,ae=1<<L,I=ae;do ae-=ue,x[ie+(q>>H)+ae]=Te<<24|Ae<<16|Ee|0;while(ae!==0);for(ue=1<<k-1;q&ue;)ue>>=1;if(ue!==0?(q&=ue-1,q+=ue):q=0,j++,--ne[k]===0){if(k===N)break;k=g[v+S[j]]}if(k>P&&(q&X)!==ee){for(H===0&&(H=P),ie+=I,L=k-H,M=1<<L;L+H<N&&(M-=ne[L+H],!(M<=0));)L++,M<<=1;if(Z+=1<<L,p===i&&Z>n||p===s&&Z>r)return 1;ee=q&X,x[ee]=P<<24|L<<16|ie-w|0}}return q!==0&&(x[ie+q]=k-H<<24|64<<16|0),E.bits=P,0},iC}var JM;function yce(){if(JM)return Ds;JM=1;var e=ld(),t=C9(),n=T9(),r=mce(),a=gce(),i=0,s=1,o=2,l=4,c=5,d=6,h=0,p=1,g=2,v=-2,b=-3,x=-4,w=-5,S=8,E=1,C=2,k=3,j=4,I=5,N=6,P=7,L=8,H=9,M=10,Z=11,q=12,ue=13,ae=14,ee=15,X=16,ie=17,B=18,J=19,Q=20,ne=21,he=22,de=23,Ie=24,Te=25,Ae=26,Ee=27,Pe=28,Qe=29,Le=30,je=31,z=32,Se=852,Ne=592,fe=15,se=fe;function te(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Fe(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ve.total_in=ve.total_out=ke.total=0,ve.msg="",ke.wrap&&(ve.adler=ke.wrap&1),ke.mode=E,ke.last=0,ke.havedict=0,ke.dmax=32768,ke.head=null,ke.hold=0,ke.bits=0,ke.lencode=ke.lendyn=new e.Buf32(Se),ke.distcode=ke.distdyn=new e.Buf32(Ne),ke.sane=1,ke.back=-1,h)}function Ce(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ke.wsize=0,ke.whave=0,ke.wnext=0,Fe(ve))}function We(ve,ke){var le,ft;return!ve||!ve.state||(ft=ve.state,ke<0?(le=0,ke=-ke):(le=(ke>>4)+1,ke<48&&(ke&=15)),ke&&(ke<8||ke>15))?v:(ft.window!==null&&ft.wbits!==ke&&(ft.window=null),ft.wrap=le,ft.wbits=ke,Ce(ve))}function Nt(ve,ke){var le,ft;return ve?(ft=new xe,ve.state=ft,ft.window=null,le=We(ve,ke),le!==h&&(ve.state=null),le):v}function it(ve){return Nt(ve,se)}var St=!0,Ft,Mt;function Zt(ve){if(St){var ke;for(Ft=new e.Buf32(512),Mt=new e.Buf32(32),ke=0;ke<144;)ve.lens[ke++]=8;for(;ke<256;)ve.lens[ke++]=9;for(;ke<280;)ve.lens[ke++]=7;for(;ke<288;)ve.lens[ke++]=8;for(a(s,ve.lens,0,288,Ft,0,ve.work,{bits:9}),ke=0;ke<32;)ve.lens[ke++]=5;a(o,ve.lens,0,32,Mt,0,ve.work,{bits:5}),St=!1}ve.lencode=Ft,ve.lenbits=9,ve.distcode=Mt,ve.distbits=5}function be(ve,ke,le,ft){var vt,F=ve.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new e.Buf8(F.wsize)),ft>=F.wsize?(e.arraySet(F.window,ke,le-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(vt=F.wsize-F.wnext,vt>ft&&(vt=ft),e.arraySet(F.window,ke,le-ft,vt,F.wnext),ft-=vt,ft?(e.arraySet(F.window,ke,le-ft,ft,0),F.wnext=ft,F.whave=F.wsize):(F.wnext+=vt,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=vt))),0}function D(ve,ke){var le,ft,vt,F,Be,nt,ye,Me,Ke,Dt,ge,G,V,K,me=0,Re,Ve,pt,Kt,ut,Rt,Lt,en,Rn=new e.Buf8(4),Xn,_r,Sr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return v;le=ve.state,le.mode===q&&(le.mode=ue),Be=ve.next_out,vt=ve.output,ye=ve.avail_out,F=ve.next_in,ft=ve.input,nt=ve.avail_in,Me=le.hold,Ke=le.bits,Dt=nt,ge=ye,en=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=ue;break}for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(le.wrap&2&&Me===35615){le.check=0,Rn[0]=Me&255,Rn[1]=Me>>>8&255,le.check=n(le.check,Rn,2,0),Me=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((Me&255)<<8)+(Me>>8))%31){ve.msg="incorrect header check",le.mode=Le;break}if((Me&15)!==S){ve.msg="unknown compression method",le.mode=Le;break}if(Me>>>=4,Ke-=4,Lt=(Me&15)+8,le.wbits===0)le.wbits=Lt;else if(Lt>le.wbits){ve.msg="invalid window size",le.mode=Le;break}le.dmax=1<<Lt,ve.adler=le.check=1,le.mode=Me&512?M:q,Me=0,Ke=0;break;case C:for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(le.flags=Me,(le.flags&255)!==S){ve.msg="unknown compression method",le.mode=Le;break}if(le.flags&57344){ve.msg="unknown header flags set",le.mode=Le;break}le.head&&(le.head.text=Me>>8&1),le.flags&512&&(Rn[0]=Me&255,Rn[1]=Me>>>8&255,le.check=n(le.check,Rn,2,0)),Me=0,Ke=0,le.mode=k;case k:for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.head&&(le.head.time=Me),le.flags&512&&(Rn[0]=Me&255,Rn[1]=Me>>>8&255,Rn[2]=Me>>>16&255,Rn[3]=Me>>>24&255,le.check=n(le.check,Rn,4,0)),Me=0,Ke=0,le.mode=j;case j:for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.head&&(le.head.xflags=Me&255,le.head.os=Me>>8),le.flags&512&&(Rn[0]=Me&255,Rn[1]=Me>>>8&255,le.check=n(le.check,Rn,2,0)),Me=0,Ke=0,le.mode=I;case I:if(le.flags&1024){for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.length=Me,le.head&&(le.head.extra_len=Me),le.flags&512&&(Rn[0]=Me&255,Rn[1]=Me>>>8&255,le.check=n(le.check,Rn,2,0)),Me=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=N;case N:if(le.flags&1024&&(G=le.length,G>nt&&(G=nt),G&&(le.head&&(Lt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ft,F,G,Lt)),le.flags&512&&(le.check=n(le.check,ft,G,F)),nt-=G,F+=G,le.length-=G),le.length))break e;le.length=0,le.mode=P;case P:if(le.flags&2048){if(nt===0)break e;G=0;do Lt=ft[F+G++],le.head&&Lt&&le.length<65536&&(le.head.name+=String.fromCharCode(Lt));while(Lt&&G<nt);if(le.flags&512&&(le.check=n(le.check,ft,G,F)),nt-=G,F+=G,Lt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=L;case L:if(le.flags&4096){if(nt===0)break e;G=0;do Lt=ft[F+G++],le.head&&Lt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Lt));while(Lt&&G<nt);if(le.flags&512&&(le.check=n(le.check,ft,G,F)),nt-=G,F+=G,Lt)break e}else le.head&&(le.head.comment=null);le.mode=H;case H:if(le.flags&512){for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me!==(le.check&65535)){ve.msg="header crc mismatch",le.mode=Le;break}Me=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),ve.adler=le.check=0,le.mode=q;break;case M:for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}ve.adler=le.check=te(Me),Me=0,Ke=0,le.mode=Z;case Z:if(le.havedict===0)return ve.next_out=Be,ve.avail_out=ye,ve.next_in=F,ve.avail_in=nt,le.hold=Me,le.bits=Ke,g;ve.adler=le.check=1,le.mode=q;case q:if(ke===c||ke===d)break e;case ue:if(le.last){Me>>>=Ke&7,Ke-=Ke&7,le.mode=Ee;break}for(;Ke<3;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}switch(le.last=Me&1,Me>>>=1,Ke-=1,Me&3){case 0:le.mode=ae;break;case 1:if(Zt(le),le.mode=Q,ke===d){Me>>>=2,Ke-=2;break e}break;case 2:le.mode=ie;break;case 3:ve.msg="invalid block type",le.mode=Le}Me>>>=2,Ke-=2;break;case ae:for(Me>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if((Me&65535)!==(Me>>>16^65535)){ve.msg="invalid stored block lengths",le.mode=Le;break}if(le.length=Me&65535,Me=0,Ke=0,le.mode=ee,ke===d)break e;case ee:le.mode=X;case X:if(G=le.length,G){if(G>nt&&(G=nt),G>ye&&(G=ye),G===0)break e;e.arraySet(vt,ft,F,G,Be),nt-=G,F+=G,ye-=G,Be+=G,le.length-=G;break}le.mode=q;break;case ie:for(;Ke<14;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(le.nlen=(Me&31)+257,Me>>>=5,Ke-=5,le.ndist=(Me&31)+1,Me>>>=5,Ke-=5,le.ncode=(Me&15)+4,Me>>>=4,Ke-=4,le.nlen>286||le.ndist>30){ve.msg="too many length or distance symbols",le.mode=Le;break}le.have=0,le.mode=B;case B:for(;le.have<le.ncode;){for(;Ke<3;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.lens[Sr[le.have++]]=Me&7,Me>>>=3,Ke-=3}for(;le.have<19;)le.lens[Sr[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,Xn={bits:le.lenbits},en=a(i,le.lens,0,19,le.lencode,0,le.work,Xn),le.lenbits=Xn.bits,en){ve.msg="invalid code lengths set",le.mode=Le;break}le.have=0,le.mode=J;case J:for(;le.have<le.nlen+le.ndist;){for(;me=le.lencode[Me&(1<<le.lenbits)-1],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(pt<16)Me>>>=Re,Ke-=Re,le.lens[le.have++]=pt;else{if(pt===16){for(_r=Re+2;Ke<_r;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me>>>=Re,Ke-=Re,le.have===0){ve.msg="invalid bit length repeat",le.mode=Le;break}Lt=le.lens[le.have-1],G=3+(Me&3),Me>>>=2,Ke-=2}else if(pt===17){for(_r=Re+3;Ke<_r;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Re,Ke-=Re,Lt=0,G=3+(Me&7),Me>>>=3,Ke-=3}else{for(_r=Re+7;Ke<_r;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Re,Ke-=Re,Lt=0,G=11+(Me&127),Me>>>=7,Ke-=7}if(le.have+G>le.nlen+le.ndist){ve.msg="invalid bit length repeat",le.mode=Le;break}for(;G--;)le.lens[le.have++]=Lt}}if(le.mode===Le)break;if(le.lens[256]===0){ve.msg="invalid code -- missing end-of-block",le.mode=Le;break}if(le.lenbits=9,Xn={bits:le.lenbits},en=a(s,le.lens,0,le.nlen,le.lencode,0,le.work,Xn),le.lenbits=Xn.bits,en){ve.msg="invalid literal/lengths set",le.mode=Le;break}if(le.distbits=6,le.distcode=le.distdyn,Xn={bits:le.distbits},en=a(o,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,Xn),le.distbits=Xn.bits,en){ve.msg="invalid distances set",le.mode=Le;break}if(le.mode=Q,ke===d)break e;case Q:le.mode=ne;case ne:if(nt>=6&&ye>=258){ve.next_out=Be,ve.avail_out=ye,ve.next_in=F,ve.avail_in=nt,le.hold=Me,le.bits=Ke,r(ve,ge),Be=ve.next_out,vt=ve.output,ye=ve.avail_out,F=ve.next_in,ft=ve.input,nt=ve.avail_in,Me=le.hold,Ke=le.bits,le.mode===q&&(le.back=-1);break}for(le.back=0;me=le.lencode[Me&(1<<le.lenbits)-1],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(Ve&&(Ve&240)===0){for(Kt=Re,ut=Ve,Rt=pt;me=le.lencode[Rt+((Me&(1<<Kt+ut)-1)>>Kt)],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Kt+Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Kt,Ke-=Kt,le.back+=Kt}if(Me>>>=Re,Ke-=Re,le.back+=Re,le.length=pt,Ve===0){le.mode=Ae;break}if(Ve&32){le.back=-1,le.mode=q;break}if(Ve&64){ve.msg="invalid literal/length code",le.mode=Le;break}le.extra=Ve&15,le.mode=he;case he:if(le.extra){for(_r=le.extra;Ke<_r;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.length+=Me&(1<<le.extra)-1,Me>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=de;case de:for(;me=le.distcode[Me&(1<<le.distbits)-1],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if((Ve&240)===0){for(Kt=Re,ut=Ve,Rt=pt;me=le.distcode[Rt+((Me&(1<<Kt+ut)-1)>>Kt)],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Kt+Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Kt,Ke-=Kt,le.back+=Kt}if(Me>>>=Re,Ke-=Re,le.back+=Re,Ve&64){ve.msg="invalid distance code",le.mode=Le;break}le.offset=pt,le.extra=Ve&15,le.mode=Ie;case Ie:if(le.extra){for(_r=le.extra;Ke<_r;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.offset+=Me&(1<<le.extra)-1,Me>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){ve.msg="invalid distance too far back",le.mode=Le;break}le.mode=Te;case Te:if(ye===0)break e;if(G=ge-ye,le.offset>G){if(G=le.offset-G,G>le.whave&&le.sane){ve.msg="invalid distance too far back",le.mode=Le;break}G>le.wnext?(G-=le.wnext,V=le.wsize-G):V=le.wnext-G,G>le.length&&(G=le.length),K=le.window}else K=vt,V=Be-le.offset,G=le.length;G>ye&&(G=ye),ye-=G,le.length-=G;do vt[Be++]=K[V++];while(--G);le.length===0&&(le.mode=ne);break;case Ae:if(ye===0)break e;vt[Be++]=le.length,ye--,le.mode=ne;break;case Ee:if(le.wrap){for(;Ke<32;){if(nt===0)break e;nt--,Me|=ft[F++]<<Ke,Ke+=8}if(ge-=ye,ve.total_out+=ge,le.total+=ge,ge&&(ve.adler=le.check=le.flags?n(le.check,vt,ge,Be-ge):t(le.check,vt,ge,Be-ge)),ge=ye,(le.flags?Me:te(Me))!==le.check){ve.msg="incorrect data check",le.mode=Le;break}Me=0,Ke=0}le.mode=Pe;case Pe:if(le.wrap&&le.flags){for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me!==(le.total&4294967295)){ve.msg="incorrect length check",le.mode=Le;break}Me=0,Ke=0}le.mode=Qe;case Qe:en=p;break e;case Le:en=b;break e;case je:return x;case z:default:return v}return ve.next_out=Be,ve.avail_out=ye,ve.next_in=F,ve.avail_in=nt,le.hold=Me,le.bits=Ke,(le.wsize||ge!==ve.avail_out&&le.mode<Le&&(le.mode<Ee||ke!==l))&&be(ve,ve.output,ve.next_out,ge-ve.avail_out),Dt-=ve.avail_in,ge-=ve.avail_out,ve.total_in+=Dt,ve.total_out+=ge,le.total+=ge,le.wrap&&ge&&(ve.adler=le.check=le.flags?n(le.check,vt,ge,ve.next_out-ge):t(le.check,vt,ge,ve.next_out-ge)),ve.data_type=le.bits+(le.last?64:0)+(le.mode===q?128:0)+(le.mode===Q||le.mode===ee?256:0),(Dt===0&&ge===0||ke===l)&&en===h&&(en=w),en}function W(ve){if(!ve||!ve.state)return v;var ke=ve.state;return ke.window&&(ke.window=null),ve.state=null,h}function pe(ve,ke){var le;return!ve||!ve.state||(le=ve.state,(le.wrap&2)===0)?v:(le.head=ke,ke.done=!1,h)}function De(ve,ke){var le=ke.length,ft,vt,F;return!ve||!ve.state||(ft=ve.state,ft.wrap!==0&&ft.mode!==Z)?v:ft.mode===Z&&(vt=1,vt=t(vt,ke,le,0),vt!==ft.check)?b:(F=be(ve,ke,le,le),F?(ft.mode=je,x):(ft.havedict=1,h))}return Ds.inflateReset=Ce,Ds.inflateReset2=We,Ds.inflateResetKeep=Fe,Ds.inflateInit=it,Ds.inflateInit2=Nt,Ds.inflate=D,Ds.inflateEnd=W,Ds.inflateGetHeader=pe,Ds.inflateSetDictionary=De,Ds.inflateInfo="pako inflate (from Nodeca project)",Ds}var sC,QM;function N9(){return QM||(QM=1,sC={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),sC}var oC,eO;function bce(){if(eO)return oC;eO=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return oC=e,oC}var tO;function vce(){if(tO)return Fh;tO=1;var e=yce(),t=ld(),n=k9(),r=N9(),a=DN(),i=A9(),s=bce(),o=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(h&&h.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15)===0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,p.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new s,e.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=n.string2buf(p.dictionary):o.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(g=e.inflateSetDictionary(this.strm,p.dictionary),g!==r.Z_OK)))throw new Error(a[g])}l.prototype.push=function(h,p){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,x,w,S,E,C,k=!1;if(this.ended)return!1;w=p===~~p?p:p===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),x=e.inflate(g,r.Z_NO_FLUSH),x===r.Z_NEED_DICT&&b&&(x=e.inflateSetDictionary(this.strm,b)),x===r.Z_BUF_ERROR&&k===!0&&(x=r.Z_OK,k=!1),x!==r.Z_STREAM_END&&x!==r.Z_OK)return this.onEnd(x),this.ended=!0,!1;g.next_out&&(g.avail_out===0||x===r.Z_STREAM_END||g.avail_in===0&&(w===r.Z_FINISH||w===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&x!==r.Z_STREAM_END);return x===r.Z_STREAM_END&&(w=r.Z_FINISH),w===r.Z_FINISH?(x=e.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===r.Z_OK):(w===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,p){var g=new l(p);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function d(h,p){return p=p||{},p.raw=!0,c(h,p)}return Fh.Inflate=l,Fh.inflate=c,Fh.inflateRaw=d,Fh.ungzip=c,Fh}var lC,nO;function wce(){if(nO)return lC;nO=1;var e=ld().assign,t=pce(),n=vce(),r=N9(),a={};return e(a,t,n,r),lC=a,lC}var xce=wce();const MN=bi(xce);var cC,rO;function _ce(){if(rO)return cC;rO=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,s)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):n.errorFirst?r.push((o,l)=>{o?s(o):i(l)}):r.push(i),t.apply(this,r)})};return cC=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=s=>{const o=l=>typeof l=="string"?s===l:l.test(s);return n.include?n.include.some(o):!n.exclude.some(o)};let i;r==="function"?i=function(...s){return n.excludeMain?t(...s):e(t,n).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&a(s)?e(o,n):o}return i},cC}var Sce=_ce();const uC=bi(Sce);var dC,aO;function Ece(){if(aO)return dC;aO=1;var e={};function t(ee){return Array.isArray(ee)?ee:[ee]}const n="",r=" ",a="\\",i=/^\s+$/,s=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,c=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let p="node-ignore";typeof Symbol<"u"&&(p=Symbol.for("node-ignore"));const g=p,v=(ee,X,ie)=>Object.defineProperty(ee,X,{value:ie}),b=/([0-z])-([0-z])/g,x=()=>!1,w=ee=>ee.replace(b,(X,ie,B)=>ie.charCodeAt(0)<=B.charCodeAt(0)?X:n),S=ee=>{const{length:X}=ee;return ee.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ee,X,ie)=>X+(ie.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(ee,X)=>{const{length:ie}=X;return X.slice(0,ie-ie%2)+r}],[/[\\$.|*+(){^]/g,ee=>`\\${ee}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ee,X,ie)=>X+6<ie.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ee,X,ie)=>{const B=ie.replace(/\\\*/g,"[^\\/]*");return X+B}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ee,X,ie,B,J)=>X===a?`\\[${ie}${S(B)}${J}`:J==="]"&&B.length%2===0?`[${w(ie)}${B}]`:"[]"],[/(?:[^*])$/,ee=>/\/$/.test(ee)?`${ee}$`:`${ee}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ee,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(ee,X)=>{let ie=C[ee];return ie||(ie=E.reduce((B,[J,Q])=>B.replace(J,Q.bind(ee)),ee),C[ee]=ie),X?new RegExp(ie,"i"):new RegExp(ie)},j=ee=>typeof ee=="string",I=ee=>ee&&j(ee)&&!i.test(ee)&&!s.test(ee)&&ee.indexOf("#")!==0,N=ee=>ee.split(c);class P{constructor(X,ie,B,J){this.origin=X,this.pattern=ie,this.negative=B,this.regex=J}}const L=(ee,X)=>{const ie=ee;let B=!1;ee.indexOf("!")===0&&(B=!0,ee=ee.substr(1)),ee=ee.replace(o,"!").replace(l,"#");const J=k(ee,X);return new P(ie,ee,B,J)},H=(ee,X)=>{throw new X(ee)},M=(ee,X,ie)=>j(ee)?ee?M.isNotRelative(ee)?ie(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:ie("path must not be empty",TypeError):ie(`path must be a string, but got \`${X}\``,TypeError),Z=ee=>d.test(ee);M.isNotRelative=Z,M.convert=ee=>ee;class q{constructor({ignorecase:X=!0,ignoreCase:ie=X,allowRelativePaths:B=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=ie,this._allowRelativePaths=B,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[g]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(I(X)){const ie=L(X,this._ignoreCase);this._added=!0,this._rules.push(ie)}}add(X){return this._added=!1,t(j(X)?N(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,ie){let B=!1,J=!1;return this._rules.forEach(Q=>{const{negative:ne}=Q;if(J===ne&&B!==J||ne&&!B&&!J&&!ie)return;Q.regex.test(X)&&(B=!ne,J=ne)}),{ignored:B,unignored:J}}_test(X,ie,B,J){const Q=X&&M.convert(X);return M(Q,X,this._allowRelativePaths?x:H),this._t(Q,ie,B,J)}_t(X,ie,B,J){if(X in ie)return ie[X];if(J||(J=X.split(h)),J.pop(),!J.length)return ie[X]=this._testOne(X,B);const Q=this._t(J.join(h)+h,ie,B,J);return ie[X]=Q.ignored?Q:this._testOne(X,B)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const ue=ee=>new q(ee),ae=ee=>M(ee&&M.convert(ee),ee,x);if(ue.isPathValid=ae,ue.default=ue,dC=ue,typeof aa<"u"&&(e&&e.IGNORE_TEST_WIN32||aa.platform==="win32")){const ee=ie=>/^\\\\\?\\/.test(ie)||/["<>|\u0000-\u001F]+/u.test(ie)?ie:ie.replace(/\\/g,"/");M.convert=ee;const X=/^[a-z]:\//i;M.isNotRelative=ie=>X.test(ie)||Z(ie)}return dC}var Cce=Ece();const Tce=bi(Cce);var fC,iO;function kce(){if(iO)return fC;iO=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return fC=n,fC}var Ace=kce();const sl=bi(Ace);var hC,sO;function Nce(){return sO||(sO=1,hC=function(e,t){var n=e,r=t,a=n.length,i=r.length,s=!1,o=null,l=a+1,c=[],d=[],h=[],p="",g=-1,v=0,b=1,x,w,S=function(){a>=i&&(x=n,w=a,n=r,r=x,a=i,i=w,s=!0,l=a+1)},E=function(I,N,P){return{x:I,y:N,k:P}},C=function(I,N){return{elem:I,t:N}},k=function(I,N,P){var L,H,M;for(N>P?L=c[I-1+l]:L=c[I+1+l],M=Math.max(N,P),H=M-I;H<a&&M<i&&n[H]===r[M];)++H,++M;return c[I+l]=d.length,d[d.length]=new E(H,M,L),M},j=function(I){var N,P,L;for(N=P=0,L=I.length-1;L>=0;--L)for(;N<I[L].x||P<I[L].y;)I[L].y-I[L].x>P-N?(s?h[h.length]=new C(r[P],g):h[h.length]=new C(r[P],b),++P):I[L].y-I[L].x<P-N?(s?h[h.length]=new C(n[N],b):h[h.length]=new C(n[N],g),++N):(h[h.length]=new C(n[N],v),p+=n[N],++N,++P)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return p},getses:function(){return h},compose:function(){var I,N,P,L,H,M,Z,q;for(I=i-a,N=a+i+3,P={},Z=0;Z<N;++Z)P[Z]=-1,c[Z]=-1;L=-1;do{for(++L,q=-L;q<=I-1;++q)P[q+l]=k(q,P[q-1+l]+1,P[q+1+l]);for(q=I+L;q>=I+1;--q)P[q+l]=k(q,P[q-1+l]+1,P[q+1+l]);P[I+l]=k(I,P[I-1+l]+1,P[I+1+l])}while(P[I+l]!==i);for(o=I+2*L,H=c[I+l],M=[];H!==-1;)M[M.length]=new E(d[H].x,d[H].y,null),H=d[H].k;j(M)}}}),hC}var pC,oO;function Rce(){if(oO)return pC;oO=1;var e=Nce();function t(i,s){var o=new e(i,s);o.compose();for(var l=o.getses(),c,d,h=i.length-1,p=s.length-1,g=l.length-1;g>=0;--g)l[g].t===o.SES_COMMON?(d?(d.chain={file1index:h,file2index:p,chain:null},d=d.chain):(c={file1index:h,file2index:p,chain:null},d=c),h--,p--):l[g].t===o.SES_DELETE?h--:l[g].t===o.SES_ADD&&p--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,c):v}function n(i,s){for(var o=[],l=i.length,c=s.length,d=t(i,s);d!==null;d=d.chain){var h=l-d.file1index-1,p=c-d.file2index-1;l=d.file1index,c=d.file2index,(h||p)&&o.push({file1:[l+1,h],file2:[c+1,p]})}return o.reverse(),o}function r(i,s,o){var l,c=n(s,i),d=n(s,o),h=[];function p(X,ie){h.push([X.file1[0],ie,X.file1[1],X.file2[0],X.file2[1]])}for(l=0;l<c.length;l++)p(c[l],0);for(l=0;l<d.length;l++)p(d[l],2);h.sort(function(X,ie){return X[0]-ie[0]});var g=[],v=0;function b(X){X>v&&(g.push([1,v,X-v]),v=X)}for(var x=0;x<h.length;x++){for(var w=x,S=h[x],E=S[0],C=E+S[2];x<h.length-1;){var k=h[x+1],j=k[0];if(j>C)break;C=Math.max(C,j+k[2]),x++}if(b(E),w==x)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var I={0:[i.length,-1,s.length,-1],2:[o.length,-1,s.length,-1]};for(l=w;l<=x;l++){S=h[l];var N=S[1],P=I[N],L=S[0],H=L+S[2],M=S[3],Z=M+S[4];P[0]=Math.min(M,P[0]),P[1]=Math.max(Z,P[1]),P[2]=Math.min(L,P[2]),P[3]=Math.max(H,P[3])}var q=I[0][0]+(E-I[0][2]),ue=I[0][1]+(C-I[0][3]),ae=I[2][0]+(E-I[2][2]),ee=I[2][1]+(C-I[2][3]);g.push([-1,q,ue-q,E,C-E,ae,ee-ae])}v=C}return b(s.length),g}function a(i,s,o){var l=[],c=[i,s,o],d=r(i,s,o),h=[];function p(){h.length&&l.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],k=0;k<S[2];k++)if(i[k+E]!=o[k+C])return!0;return!1}for(var b=0;b<d.length;b++){var x=d[b],w=x[0];w==-1?v(x)?(p(),l.push({conflict:{a:i.slice(x[1],x[1]+x[2]),aIndex:x[1],o:s.slice(x[3],x[3]+x[4]),oIndex:x[3],b:o.slice(x[5],x[5]+x[6]),bIndex:x[5]}})):g(c[0].slice(x[1],x[1]+x[2])):g(c[w].slice(x[1],x[1]+x[2]))}return p(),l}return pC=a,pC}var Ice=Rce();const jce=bi(Ice);class or extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new or(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class Oy extends or{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=Oy.code,this.data={filepaths:t}}}Oy.code="UnmergedPathsError";class Dn extends or{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Dn.code,this.data={message:t}}}Dn.code="InternalError";class Xp extends or{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Xp.code,this.data={filepath:t}}}Xp.code="UnsafeFilepathError";class rl{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function i_(e,t){return-(e<t)||+(e>t)}function R9(e,t){return i_(e.path,t.path)}function I9(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const Zo=2**32;function lO(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Ep(e){const[t,n]=lO(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=lO(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Zo,ctimeNanoseconds:n%Zo,mtimeSeconds:r%Zo,mtimeNanoseconds:a%Zo,dev:e.dev%Zo,ino:e.ino%Zo,mode:I9(e.mode%Zo),uid:e.uid%Zo,gid:e.gid%Zo,size:e.size>-1?e.size%Zo:0}}function Dce(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let mC=null;async function xc(e){return mC===null&&(mC=await Oce()),mC?j9(e):Mce(e)}function Mce(e){return new E9().update(e).digest("hex")}async function j9(e){const t=await crypto.subtle.digest("SHA-1",e);return Dce(t)}async function Oce(){try{if(await j9(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function Pce(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function Fce(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Qt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Xd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Qt.isBuffer(t))return Xd.fromBuffer(t);if(t===null)return new Xd(null);throw new Dn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Dn("Index file is empty (.git/index)");const n=new Xd,r=new rl(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new Dn(`Invalid dircache magic file number: ${a}`);const i=await xc(t.slice(0,-20)),s=t.slice(-20).toString("hex");if(s!==i)throw new Dn(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${i}`);const o=r.readUInt32BE();if(o!==2)throw new Dn(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let c=0;for(;!r.eof()&&c<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=Pce(h);const p=t.indexOf(0,r.tell()+1)-r.tell();if(p<1)throw new Dn(`Got a path length of: ${p}`);if(d.path=r.toString("utf8",p),d.path.includes("..\\")||d.path.includes("../"))throw new Xp(d.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new Dn(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new Dn("Unexpected end of file")}d.stages=[],n._addEntry(d),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(R9)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Ep(n);const i=Qt.from(t),s={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Qt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Qt.alloc(r),i=new rl(a),s=Ep(t);return i.writeUInt32BE(s.ctimeSeconds),i.writeUInt32BE(s.ctimeNanoseconds),i.writeUInt32BE(s.mtimeSeconds),i.writeUInt32BE(s.mtimeNanoseconds),i.writeUInt32BE(s.dev),i.writeUInt32BE(s.ino),i.writeUInt32BE(s.mode),i.writeUInt32BE(s.uid),i.writeUInt32BE(s.gid),i.writeUInt32BE(s.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(Fce(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Qt.alloc(12),n=new rl(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(Xd._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(Xd._entryToBuffer(l));r=await Promise.all(r);const a=Qt.concat(r),i=Qt.concat([t,a]),s=await xc(i);return Qt.concat([i,Qt.from(s,"hex")])}}function Ox(e,t,n=!0,r=!0){const a=Ep(e),i=Ep(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let gC=null;const yC=Symbol("IndexCache");function Lce(){return{map:new Map,stats:new Map}}async function $ce(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Xd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function Bce(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Ox(r,a)}class Ha{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[yC]||(r[yC]=Lce());const s=`${n}/index`;gC===null&&(gC=new D0({maxPending:1/0}));let o,l=[];return await gC.acquire(s,async()=>{const c=r[yC];await Bce(t,s,c)&&await $ce(t,s,c);const d=c.map.get(s);if(l=d.unmergedPaths,l.length&&!a)throw new Oy(l);if(o=await i(d),d._dirty){const h=await d.toObject();await t.write(s,h),c.stats.set(s,await t.lstat(s)),d._dirty=!1}}),o}}function Px(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Cp(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function D9(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Px(a),metadata:{},children:[]};t.set(a,i),i.parent=n(Cp(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const s={type:"blob",fullpath:a,basename:Px(a),metadata:i,parent:n(Cp(a)),children:[]};s.parent&&s.parent.children.push(s),t.set(a,s)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function zce(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Dn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class Uce{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ha.acquire({fs:t,gitdir:n,cache:r},async function(i){return D9(i.entries)});const a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(s=>s.fullpath);return i.sort(i_),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Ep(r.metadata);t._type=r.type==="tree"?"tree":zce(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const s_=Symbol("GitWalkSymbol");function Jp(){const e=Object.create(null);return Object.defineProperty(e,s_,{value:function({fs:t,gitdir:n,cache:r}){return new Uce({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class Rr extends or{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Rr.code,this.data={what:t}}}Rr.code="NotFoundError";class Fi extends or{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Fi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}Fi.code="ObjectTypeError";class Gu extends or{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Gu.code,this.data={value:t}}}Gu.code="InvalidOidError";class Py extends or{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=Py.code,this.data={remote:t}}}Py.code="NoRefspecError";class Fx{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Fx(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Lx{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,s]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=a==="*";if(l!==(s==="*"))throw new Dn("Invalid refspec");return new Lx({remotePath:r,localPath:i,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class ON{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Lx.from(r));return new ON(n)}add(t){const n=Lx.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function Vce(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const Hce=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Ag=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},cO={core:{filemode:Ag,bare:Ag,logallrefupdates:Ag,symlinks:Ag,ignorecase:Ag,bigFileThreshold:Hce}},qce=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,Gce=/^[A-Za-z0-9-.]+$/,Wce=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Kce=/^[A-Za-z][A-Za-z-]*$/,Zce=/^(.*?)( *[#;].*)$/,Yce=e=>{const t=qce.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},Xce=e=>{const t=Wce.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=Jce(r),i=Qce(a);return[n,i]}return null},Jce=e=>{const t=Zce.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return uO(n)&&uO(r)?`${n}${r}`:n},uO=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Qce=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",s=n==="\\"&&a[r+1]==='"';return i||s?t:t+n},""),dO=e=>e!=null?e.toLowerCase():null,hk=(e,t,n)=>[dO(e),t,dO(n)].filter(r=>r!=null).join("."),fO=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:hk(n,a,r),sectionPath:hk(n,a,null),isSection:!!n}},eue=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class PN{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,s=null;const o=a.trim(),l=Yce(o),c=l!=null;if(c)[n,r]=l;else{const h=Xce(o);h!=null&&([i,s]=h)}const d=hk(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:s,path:d}}):[]}static from(t){return new PN(t)}async get(t,n=!1){const r=fO(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:s,value:o})=>{const l=cO[i]&&cO[i][s];return l?l(o):o});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:s,path:o,sectionPath:l,isSection:c}=fO(t),d=eue(this.parsedConfig,h=>h.path===o);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],p=Object.assign({},h,{name:s,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,p):this.parsedConfig[d]=p}else{const h=this.parsedConfig.findIndex(g=>g.path===l),p={section:a,subsection:i,name:s,value:n,modified:!0,path:o};if(Gce.test(a)&&Kce.test(s))if(h>=0)this.parsedConfig.splice(h+1,0,p);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(g,p)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:s=!1})=>s?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class xa{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return PN.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const mw=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],tue=["config","description","index","shallow","commondir"];let bC;async function bu(e,t){return bC===void 0&&(bC=new D0),bC.acquire(e,t)}class Ut{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:c=!1}){for(const x of a.values())if(!x.match(/[0-9a-f]{40}/))throw new Gu(x);const d=await xa.get({fs:t,gitdir:n});if(!o){if(o=await d.getall(`remote.${r}.fetch`),o.length===0)throw new Py(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=ON.from(o),p=new Map;if(c){const x=await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ut.deleteRefs({fs:t,gitdir:n,refs:x.map(w=>`refs/tags/${w}`)})}if(s){for(const x of a.keys())if(x.startsWith("refs/tags")&&!x.endsWith("^{}")&&!await Ut.exists({fs:t,gitdir:n,ref:x})){const w=a.get(x);p.set(x,w)}}const g=h.translate([...a.keys()]);for(const[x,w]of g){const S=a.get(x);p.set(w,S)}const v=h.translate([...i.keys()]);for(const[x,w]of v){const S=i.get(x),E=h.translateOne(S);E&&p.set(w,`ref: ${E}`)}const b=[];if(l){for(const x of h.localNamespaces()){const w=(await Ut.listRefs({fs:t,gitdir:n,filepath:x})).map(S=>`${x}/${S}`);for(const S of w)p.has(S)||b.push(S)}b.length>0&&await Ut.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[x,w]of p)await bu(x,async()=>t.write(Pt.join(n,x),`${w.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Gu(a);await bu(r,async()=>t.write(Pt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await bu(r,async()=>t.write(Pt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ut.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Pt.join(n,o))));let a=await bu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Fx.from(a),s=i.refs.size;for(const o of r)i.refs.has(o)&&i.delete(o);i.refs.size<s&&(a=i.toString(),await bu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ut.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ut.packedRefs({fs:t,gitdir:n}),s=mw(r).filter(o=>!tue.includes(o));for(const o of s){const l=await bu(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||i.get(o));if(l)return Ut.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new Rr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ut.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ut.packedRefs({fs:t,gitdir:n}),i=mw(r);for(const s of i)if(await bu(s,async()=>t.exists(`${n}/${s}`))||a.has(s))return s;throw new Rr(r)}static async expandAgainstMap({ref:t,map:n}){const r=mw(t);for(const a of r)if(await n.has(a))return a;throw new Rr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ut.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=mw(t);for(const s of i){const o=a.get(s);if(o)return Ut.resolveAgainstMap({ref:o.trim(),fullref:s,depth:r,map:a})}throw new Rr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await bu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Fx.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ut.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(s=>s.replace(`${n}/${r}/`,""))}catch{i=[]}for(let s of(await a).keys())s.startsWith(r)&&(s=s.replace(r+"/",""),i.includes(s)||i.push(s));return i.sort(Vce),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ut.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ut.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function nue(e,t){return i_(hO(e),hO(t))}function hO(e){return e.mode==="040000"?e.path+"/":e.path}function M9(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Dn(`Unexpected GitTree entry mode: ${e}`)}function rue(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Dn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new Dn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const s=M9(i),o=e.slice(r+1,a).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new Xp(o);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:o,oid:l,type:s})}return t}function aue(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Dn(`Could not understand file mode: ${e}`)}function iue(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=aue(e.mode),e.type||(e.type=M9(e.mode)),e}class Ji{constructor(t){if(Qt.isBuffer(t))this._entries=rue(t);else if(Array.isArray(t))this._entries=t.map(iue);else throw new Dn("invalid type passed to GitTree constructor");this._entries.sort(R9)}static from(t){return new Ji(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(nue),Qt.concat(t.map(n=>{const r=Qt.from(n.mode.replace(/^0/,"")),a=Qt.from(" "),i=Qt.from(n.path,"utf8"),s=Qt.from([0]),o=Qt.from(n.oid,"hex");return Qt.concat([r,a,i,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Qp{static wrap({type:t,object:n}){return Qt.concat([Qt.from(`${t} ${n.byteLength.toString()}\0`),Qt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),s=t.length-(r+1);if(parseInt(i)!==s)throw new Dn(`Length mismatch: expected ${i} bytes but got ${s} instead.`);return{type:a,object:Qt.from(t.slice(r+1))}}}async function O9({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function sue(e,t){const n=new rl(e),r=pO(n);if(r!==t.byteLength)throw new Dn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=pO(n);let i;const s=gO(n,t);if(s.byteLength===a)i=s;else{i=Qt.alloc(a);const o=new rl(i);for(o.copy(s);!n.eof();)o.copy(gO(n,t));const l=o.tell();if(a!==l)throw new Dn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function pO(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function mO(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function gO(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const s=mO(e,n&a,4);let o=mO(e,(n&i)>>4,3);return o===0&&(o=65536),t.slice(s,s+o)}else return e.slice(n)}function oue(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function P9(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:oue(e)}class F9{constructor(t){if(typeof Qt>"u")throw new Error("Missing Buffer dependency");this.stream=P9(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Qt.alloc(0):(n&&(n=Qt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>lue(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Qt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function lue(e){return e.reduce((t,n)=>t+n.length,0)}async function cue(e,t){const n=new F9(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Dn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new Dn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const s=n.tell(),{type:o,length:l,ofs:c,reference:d}=await uue(n),h=new MN.Inflate;for(;!h.result;){const p=await n.chunk();if(!p)break;if(h.push(p,!1),h.err)throw new Dn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new Dn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(p.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:o,num:i,offset:s,end:g,reference:d,ofs:c})}}}}async function uue(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let s=4;do t=await e.byte(),r|=(t&127)<<s,s+=7;while(t&128)}let a,i;if(n===6){let s=0;a=0;const o=[];do t=await e.byte(),a|=(t&127)<<s,s+=7,o.push(t);while(t&128);i=Qt.from(o)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function L9(e){return MN.inflate(e)}function due(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function fue(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Tp{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new rl(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Dn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Dn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const s=r.readUInt32BE(),o=[];for(let d=0;d<s;d++){const h=r.slice(20).toString("hex");o[d]=h}r.seek(r.tell()+4*s);const l=new Map;for(let d=0;d<s;d++)l.set(o[d],r.readUInt32BE());const c=r.slice(20).toString("hex");return new Tp({hashes:o,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},s=t.slice(-20).toString("hex"),o=[],l={},c=new Map;let d=null,h=null;await cue([t],async({data:x,type:w,reference:S,offset:E,num:C})=>{d===null&&(d=C);const k=Math.floor((d-C)*100/d);k!==h&&r&&await r({phase:"Receiving objects",loaded:d-C,total:d}),h=k,w=a[w],["commit","tree","blob","tag"].includes(w)?i[E]={type:w,offset:E}:w==="ofs-delta"?i[E]={type:w,offset:E}:w==="ref-delta"&&(i[E]={type:w,offset:E})});const p=Object.keys(i).map(Number);for(const[x,w]of p.entries()){const S=x+1===p.length?t.byteLength-20:p[x+1],E=i[w],C=dce.buf(t.slice(w,S))>>>0;E.end=S,E.crc=C}const g=new Tp({pack:Promise.resolve(t),packfileSha:s,crcs:l,hashes:o,offsets:c,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let x in i){x=Number(x);const w=Math.floor(v*100/d);w!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=w;const S=i[x];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:x});b[g.readDepth]+=1;const k=await xc(Qp.wrap({type:E,object:C}));S.oid=k,o.push(k),c.set(k,x),l[k]=S.crc}catch{continue}}return o.sort(),g}async toBuffer(){const t=[],n=(c,d)=>{t.push(Qt.from(c,d))};n("ff744f63","hex"),n("00000002","hex");const r=new rl(Qt.alloc(256*4));for(let c=0;c<256;c++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new rl(Qt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new rl(Qt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const s=Qt.concat(t),o=await xc(s),l=Qt.alloc(20);return l.write(o,"hex"),Qt.concat([s,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Dn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Dn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new rl(r),i=a.readUInt8(),s=i&112;let o=n[s];if(o===void 0)throw new Dn("Unrecognized type: 0b"+s.toString(2));const l=i&15;let c=l;i&128&&(c=fue(a,l));let h=null,p=null;if(o==="ofs_delta"){const v=due(a),b=t-v;({object:h,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:v}))}const g=r.slice(a.tell());if(p=Qt.from(await L9(g)),p.byteLength!==c)throw new Dn(`Packfile told us object would have length ${c} but it had length ${p.byteLength}`);return h&&(p=Qt.from(sue(p,h))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:p}),{type:o,format:"content",object:p}}}const gw=Symbol("PackfileCache");async function hue({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Tp.fromIdx({idx:i,getExternalRefDelta:n})}function FN({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[gw]||(t[gw]=new Map);let s=t[gw].get(n);return s||(s=hue({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[gw].set(n,s)),s}async function pue({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,c=await FN({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(c.error)throw new Dn(c.error);if(c.offsets.has(r)){if(!c.pack){const h=l.replace(/idx$/,"pack");c.pack=e.read(h)}const d=await c.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${o.replace(/idx$/,"pack")}`,d}}return null}async function Wr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>Wr({fs:e,cache:t,gitdir:n,oid:d});let s;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Qt.from("tree 0\0")}),s||(s=await O9({fs:e,gitdir:n,oid:r})),!s){if(s=await pue({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!s)throw new Rr(r);return s}if(a==="deflated"||(s.format==="deflated"&&(s.object=Qt.from(await L9(s.object)),s.format="wrapped"),a==="wrapped"))return s;const o=await xc(s.object);if(o!==r)throw new Dn(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:c}=Qp.unwrap(s.object);if(s.type=c,s.object=l,s.format="content",a==="content")return s;throw new Dn(`invalid requested format "${a}"`)}class No extends or{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=No.code,this.data={noun:t,where:n,canForce:r}}}No.code="AlreadyExistsError";class Fy extends or{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Fy.code,this.data={nouns:t,short:n,matches:r}}}Fy.code="AmbiguousError";class Ly extends or{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=Ly.code,this.data={filepaths:t}}}Ly.code="CheckoutConflictError";class $y extends or{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=$y.code,this.data={ref:t,oid:n}}}$y.code="CommitNotFetchedError";class By extends or{constructor(){super("Empty response from git server."),this.code=this.name=By.code,this.data={}}}By.code="EmptyServerResponseError";class zy extends or{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=zy.code,this.data={}}}zy.code="FastForwardError";class Uy extends or{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=Uy.code,this.data={prettyDetails:t,result:n}}}Uy.code="GitPushError";class kp extends or{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=kp.code,this.data={statusCode:t,statusMessage:n,response:r}}}kp.code="HttpError";class Wu extends or{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Wu.code,this.data={reason:t}}}Wu.code="InvalidFilepathError";class Eo extends or{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Eo.code,this.data={ref:t,suggestion:n}}}Eo.code="InvalidRefNameError";class Vy extends or{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=Vy.code,this.data={depth:t}}}Vy.code="MaxDepthError";class em extends or{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=em.code,this.data={}}}em.code="MergeNotSupportedError";class tm extends or{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=tm.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}tm.code="MergeConflictError";class yi extends or{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=yi.code,this.data={role:t}}}yi.code="MissingNameError";class Xi extends or{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Xi.code,this.data={parameter:t}}}Xi.code="MissingParameterError";class Hy extends or{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Hy.code,this.data={errors:t},this.errors=t}}Hy.code="MultipleGitError";class zf extends or{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=zf.code,this.data={expected:t,actual:n}}}zf.code="ParseError";class Ap extends or{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Ap.code,this.data={reason:t}}}Ap.code="PushRejectedError";class ku extends or{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=ku.code,this.data={capability:t,parameter:n}}}ku.code="RemoteCapabilityError";class qy extends or{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=qy.code,this.data={preview:t,response:n}}}qy.code="SmartHttpError";class Gy extends or{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Gy.code,this.data={url:t,transport:n,suggestion:r}}}Gy.code="UnknownTransportError";class Wy extends or{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=Wy.code,this.data={url:t}}}Wy.code="UrlParseError";class nm extends or{constructor(){super("The operation was canceled."),this.code=this.name=nm.code,this.data={}}}nm.code="UserCanceledError";class Ky extends or{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Ky.code,this.data={filepath:t}}}Ky.code="IndexResetError";class Zy extends or{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Zy.code,this.data={ref:t}}}Zy.code="NoCommitError";var mue=Object.freeze({__proto__:null,AlreadyExistsError:No,AmbiguousError:Fy,CheckoutConflictError:Ly,CommitNotFetchedError:$y,EmptyServerResponseError:By,FastForwardError:zy,GitPushError:Uy,HttpError:kp,InternalError:Dn,InvalidFilepathError:Wu,InvalidOidError:Gu,InvalidRefNameError:Eo,MaxDepthError:Vy,MergeNotSupportedError:em,MergeConflictError:tm,MissingNameError:yi,MissingParameterError:Xi,MultipleGitError:Hy,NoRefspecError:Py,NotFoundError:Rr,ObjectTypeError:Fi,ParseError:zf,PushRejectedError:Ap,RemoteCapabilityError:ku,SmartHttpError:qy,UnknownTransportError:Gy,UnsafeFilepathError:Xp,UrlParseError:Wy,UserCanceledError:nm,UnmergedPathsError:Oy,IndexResetError:Ky,NoCommitError:Zy});function pk({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=gue(r),`${e} <${t}> ${n} ${r}`}function gue(e){const t=yue(bue(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function yue(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function bue(e){return e===0?e:-e}function ac(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function $x(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:vue(a)}}function vue(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),wue(r)}function wue(e){return e===0?e:-e}class Ni{constructor(t){if(typeof t=="string")this._tag=t;else if(Qt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=Ni.render(t);else throw new Dn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new Ni(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${pk(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.tagger&&(r.tagger=$x(r.tagger)),r.committer&&(r.committer=$x(r.committer)),r}withoutSignature(){const t=ac(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return ac(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Qt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=ac(i);const s=a+i;return Ni.from(s)}}function vC(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function xue(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Gr{constructor(t){if(typeof t=="string")this._commit=t;else if(Qt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Gr.render(t);else throw new Dn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Gr.justHeaders(t),a=Gr.justMessage(t),i=ac(r+`
gpgsig`+vC(n)+`
`+a);return new Gr(i)}static from(t){return new Gr(t)}toObject(){return Qt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Gr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return ac(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Gr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.author&&(r.author=$x(r.author)),r.committer&&(r.committer=$x(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Dn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${pk(r)}
`;const a=t.committer||t.author;return n+=`committer ${pk(a)}
`,t.gpgsig&&(n+="gpgsig"+vC(t.gpgsig)),n}static render(t){return Gr.renderHeaders(t)+`
`+ac(t.message)}render(){return this._commit}withoutSignature(){const t=ac(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return ac(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return xue(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Gr.justMessage(t._commit);let{signature:s}=await n({payload:a,secretKey:r});s=ac(s);const l=Gr.justHeaders(t._commit)+`
gpgsig`+vC(s)+`
`+i;return Gr.from(l)}}async function Np({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ji.from([]),oid:r};const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ni.from(i).parse().object,Np({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Gr.from(i).parse().tree,Np({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new Fi(r,a,"tree");return{tree:Ji.from(i),oid:r}}class _ue{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const s=new Map;let o;try{o=await Ut.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof Rr&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Np({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,s=await this.mapPromise,o=s.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:c,object:d}=await Wr({fs:r,cache:a,gitdir:i,oid:l});if(c!==o.type)throw new Fi(l,c,o.type);const h=Ji.from(d);for(const p of h)s.set(Pt.join(n,p.path),p);return h.entries().map(p=>Pt.join(n,p.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=I9(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,o=n.get(t._fullpath).oid,{type:l,object:c}=await Wr({fs:r,cache:a,gitdir:i,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function zs({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,s_,{value:function({fs:n,gitdir:r,cache:a}){return new _ue({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class Sue{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Pt.join(a,n));return i===null?null:i.map(s=>Pt.join(n,s))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Ep(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const s=await(await this._getGitConfig(n,a)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:s});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let s;await Ha.acquire({fs:r,gitdir:a,cache:i},async function(o){const l=o.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),p=typeof aa<"u"?aa.platform!=="win32":!0;if(!l||Ox(c,l,h,p)){const g=await t.content();g===void 0?s=void 0:(s=await xc(Qp.wrap({type:"blob",object:g})),l&&s===l.oid&&(!h||c.mode===l.mode)&&Ox(c,l,h,p)&&o.insert({filepath:t._fullpath,stats:c,oid:s}))}else s=l.oid}),t._oid=s}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await xa.get({fs:t,gitdir:n}),this.config)}}function Yy(){const e=Object.create(null);return Object.defineProperty(e,s_,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new Sue({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function Eue(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const $9=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class Cue{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*Tue(e){const t=new Cue;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let s=0;s<a;s++)r[s]!==void 0&&r[s]===n?(i[s]=r[s],r[s]=e[s].next().value):i[s]=null,r[s]!==void 0&&t.consider(r[s]);if(yield i,t.value===null)return}}async function Ku({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,c)=>c,reduce:s=async(l,c)=>{const d=$9(c);return l!==void 0&&d.unshift(l),d},iterate:o=(l,c)=>Promise.all([...c].map(l))}){const l=a.map(g=>g[s_]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(l.length).fill("."),d=Eue(0,l.length),h=async g=>{d.map(x=>{const w=g[x];g[x]=w&&new l[x].ConstructEntry(w)});const b=(await Promise.all(d.map(x=>{const w=g[x];return w?l[x].readdir(w):[]}))).map(x=>(x===null?[]:x)[Symbol.iterator]());return{entries:g,children:Tue(b)}},p=async g=>{const{entries:v,children:b}=await h(g),x=v.find(S=>S&&S._fullpath)._fullpath,w=await i(x,v);if(w!==null){let S=await o(p,b);return S=S.filter(E=>E!==void 0),s(w,S)}};return p(c)}async function mk(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Pt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?mk(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function kue(e){return Aue(e)&&yO(e.then)&&yO(e.catch)}function Aue(e){return e&&typeof e=="object"}function yO(e){return typeof e=="function"}function bO(e){return kue((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const vO=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function wO(e,t){if(bO(t))for(const n of vO)e[`_${n}`]=t[n].bind(t);else for(const n of vO)e[`_${n}`]=uC(t[n].bind(t));bO(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=mk.bind(null,e):t.rm?e._rm=uC(t.rm.bind(t)):t.rmdir.length>2?e._rm=uC(t.rmdir.bind(t)):e._rm=mk.bind(null,e)}class cn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?wO(this,t.promises):wO(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Qt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Cp(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=Cp(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(i_),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Qt.isBuffer(r)?r:Qt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function et(e,t){if(t===void 0)throw new Xi(e)}async function Bx(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function Nue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{et("fs",e),et("dir",t),et("gitdir",n);const i=new cn(e),s=[zs({ref:r}),Yy(),Jp()];let o=[];await Ha.acquire({fs:i,gitdir:n,cache:a},async function(c){o=c.unmergedPaths});const l=await Ku({fs:i,cache:a,dir:t,gitdir:n,trees:s,map:async function(c,[d,h,p]){const g=!await Bx(h,p),v=o.includes(c),b=!await Bx(p,d);if(g||v)return d?{path:c,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new Ky(c)}});await Ha.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),c.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),c.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class rm{static async isIgnored({fs:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a}){if(Px(a)===".git")return!0;if(a===".")return!1;let i="";const s=Pt.join(r,"info","exclude");await t.exists(s)&&(i=await t.read(s,"utf8"));const o=[{gitignore:Pt.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),p=l.slice(d).join("/");o.push({gitignore:Pt.join(n,h,".gitignore"),filepath:p})}let c=!1;for(const d of o){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const p=Tce().add(i);p.add(h);const g=Cp(d.filepath);if(g!=="."&&p.ignores(g))return!0;c?c=!p.test(d.filepath).unignored:c=p.test(d.filepath).ignored}return c}}async function Rue({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,s=`${t}/${i}`;await e.exists(s)||await e.write(s,n)}let wC=null;async function B9(e){return wC===null&&(wC=jue()),wC?Iue(e):MN.deflate(e)}async function Iue(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function jue(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function es({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:s=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Qp.wrap({type:n,object:r})),i=await xc(r),r=Qt.from(await B9(r))),s||await Rue({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function z9(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function Due({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:s=!0}){try{et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r);const o=new cn(e);await Ha.acquire({fs:o,gitdir:n,cache:a},async l=>{const d=await(await xa.get({fs:o,gitdir:n})).get("core.autocrlf");return gk({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:i,parallel:s,autocrlf:d})})}catch(o){throw o.caller="git.add",o}}async function gk({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:s,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async p=>{if(!i&&await rm.isIgnored({fs:n,dir:e,gitdir:t,filepath:p}))return;const g=await n.lstat(Pt.join(e,p));if(!g)throw new Rr(p);if(g.isDirectory()){const v=await n.readdir(Pt.join(e,p));if(s){const b=v.map(x=>gk({dir:e,gitdir:t,fs:n,filepath:[Pt.join(p,x)],index:a,force:i,parallel:s,autocrlf:o}));await Promise.all(b)}else for(const b of v)await gk({dir:e,gitdir:t,fs:n,filepath:[Pt.join(p,b)],index:a,force:i,parallel:s,autocrlf:o})}else{const v=g.isSymbolicLink()?await n.readlink(Pt.join(e,p)).then(z9):await n.read(Pt.join(e,p),{autocrlf:o});if(v===null)throw new Rr(p);const b=await es({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:p,stats:g,oid:b})}}),c=await Promise.allSettled(l),d=c.filter(p=>p.status==="rejected").map(p=>p.reason);if(d.length>1)throw new Hy(d);if(d.length===1)throw d[0];return c.filter(p=>p.status==="fulfilled"&&p.value).map(p=>p.value)}async function M0({fs:e,gitdir:t,path:n}){return(await xa.get({fs:e,gitdir:t})).get(n)}function U9(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Zu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await M0({fs:e,gitdir:t,path:"user.name"}),email:await M0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},s=U9({},i,r?r.author:void 0,n);if(s.name!==void 0)return s}async function Rp({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),s={name:await M0({fs:e,gitdir:t,path:"user.name"}),email:await M0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=U9({},s,a?a.committer:void 0,n,r);if(o.name!==void 0)return o}async function V9({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ni.from(i).parse().object,V9({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new Fi(r,a,"commit");return{commit:Gr.from(i),oid:r}}async function Ip({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await V9({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function o_({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:d=!1,ref:h,parent:p,tree:g}){let v=!1;h||(h=await Ut.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,x;try{b=await Ut.resolve({fs:e,gitdir:r,ref:h}),x=await Ip({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new Zy(h);const w=l?await Zu({fs:e,gitdir:r,author:i,commit:x.commit}):await Zu({fs:e,gitdir:r,author:i});if(!w)throw new yi("author");const S=l?await Rp({fs:e,gitdir:r,author:w,committer:s,commit:x.commit}):await Rp({fs:e,gitdir:r,author:w,committer:s});if(!S)throw new yi("committer");return Ha.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=D9(E.entries).get(".");if(g||(g=await H9({fs:e,gitdir:r,inode:k,dryRun:c})),p?p=await Promise.all(p.map(N=>Ut.resolve({fs:e,gitdir:r,ref:N}))):l?p=x.commit.parent:p=b?[b]:[],!a)if(l)a=x.commit.message;else throw new Xi("message");let j=Gr.from({tree:g,parent:p,author:w,committer:S,message:a});o&&(j=await Gr.sign(j,n,o));const I=await es({fs:e,gitdir:r,type:"commit",object:j.toObject(),dryRun:c});return!d&&!c&&await Ut.writeRef({fs:e,gitdir:r,ref:h,value:I}),I})}async function H9({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await H9({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=Ji.from(i);return await es({fs:e,gitdir:t,type:"tree",object:s.toObject(),dryRun:r})}async function Xy({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Wu("leading-slash");if(a.endsWith("/"))throw new Wu("trailing-slash");const i=r,s=await Np({fs:e,cache:t,gitdir:n,oid:r}),o=s.tree;if(a==="")r=s.oid;else{const l=a.split("/");r=await q9({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:i,filepath:a})}return r}async function q9({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s}){const o=a.shift();for(const l of r)if(l.path===o){if(a.length===0)return l.oid;{const{type:c,object:d}=await Wr({fs:e,cache:t,gitdir:n,oid:l.oid});if(c!=="tree")throw new Fi(i,c,"tree",s);return r=Ji.from(d),q9({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s})}}throw new Rr(`file or directory found at "${i}:${s}"`)}async function am({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await Xy({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:s}=await Np({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,tree:i.entries()}}async function Jy({fs:e,gitdir:t,tree:n}){const r=Ji.from(n).toObject();return await es({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function Mue({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:s,force:o,author:l,committer:c,signingKey:d}){let h;try{h=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(w){if(!(w instanceof Rr))throw w}let g=(await am({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)g=g.filter(w=>w.path!==i);else for(const w of g)if(w.path===i)throw new No("note",i);typeof s=="string"&&(s=Qt.from(s,"utf8"));const v=await es({fs:e,gitdir:r,type:"blob",object:s,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await Jy({fs:e,gitdir:r,tree:g});return await o_({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:d})}async function Oue({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:s,force:o,author:l,committer:c,signingKey:d,cache:h={}}){try{et("fs",e),et("gitdir",r),et("oid",i),et("note",s),d&&et("onSign",t);const p=new cn(e),g=await Zu({fs:p,gitdir:r,author:l});if(!g)throw new yi("author");const v=await Rp({fs:p,gitdir:r,author:g,committer:c});if(!v)throw new yi("committer");return await Mue({fs:new cn(p),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:s,force:o,author:g,committer:v,signingKey:d})}catch(p){throw p.caller="git.addNote",p}}async function G9({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==sl.clean(n))throw new Eo(n,sl.clean(n));const i=await xa.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new No("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await xa.save({fs:e,gitdir:t,config:i})}async function Pue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return et("fs",e),et("gitdir",n),et("remote",r),et("url",a),await G9({fs:new cn(e),gitdir:n,remote:r,url:a,force:i})}catch(s){throw s.caller="git.addRemote",s}}async function Fue({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:c,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await Ut.exists({fs:e,gitdir:r,ref:a}))throw new No("tag",a);const h=await Ut.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:p}=await Wr({fs:e,cache:t,gitdir:r,oid:h});let g=Ni.from({object:h,type:p,tag:a.replace("refs/tags/",""),tagger:i,message:s,gpgsig:o});c&&(g=await Ni.sign(g,n,c));const v=await es({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Ut.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function Lue({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:c,force:d=!1,cache:h={}}){try{et("fs",e),et("gitdir",r),et("ref",a),c&&et("onSign",t);const p=new cn(e),g=await Zu({fs:p,gitdir:r,author:i});if(!g)throw new yi("tagger");return await Fue({fs:p,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:s,gpgsig:o,object:l,signingKey:c,force:d})}catch(p){throw p.caller="git.annotatedTag",p}}async function $ue({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==sl.clean(n))throw new Eo(n,sl.clean(n));const s=`refs/heads/${n}`;if(!i&&await Ut.exists({fs:e,gitdir:t,ref:s}))throw new No("branch",n,!1);let o;try{o=await Ut.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Ut.writeRef({fs:e,gitdir:t,ref:s,value:o}),a&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function Bue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:s=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),await $ue({fs:new cn(e),gitdir:n,ref:r,object:a,checkout:i,force:s})}catch(o){throw o.caller="git.branch",o}}const W9=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function LN({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:s,ref:o,filepaths:l,noCheckout:c,noUpdateHead:d,dryRun:h,force:p,track:g=!0}){let v;if(r)try{v=await Ut.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Ut.resolve({fs:e,gitdir:i,ref:o})}catch(x){if(o==="HEAD")throw x;const w=`${s}/${o}`;if(b=await Ut.resolve({fs:e,gitdir:i,ref:w}),g){const S=await xa.get({fs:e,gitdir:i});await S.set(`branch.${o}.remote`,s),await S.set(`branch.${o}.merge`,`refs/heads/${o}`),await xa.save({fs:e,gitdir:i,config:S})}await Ut.writeRef({fs:e,gitdir:i,ref:`refs/heads/${o}`,value:b})}if(!c){let x;try{x=await zue({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:o,force:p,filepaths:l})}catch(k){throw k instanceof Rr&&k.data.what===b?new $y(o,b):k}const w=x.filter(([k])=>k==="conflict").map(([k,j])=>j);if(w.length>0)throw new Ly(w);const S=x.filter(([k])=>k==="error").map(([k,j])=>j);if(S.length>0)throw new Dn(S.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const C=x.length;await Ha.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(x.filter(([j])=>j==="delete"||j==="delete-index").map(async function([j,I]){const N=`${a}/${I}`;j==="delete"&&await e.rm(N),k.delete({filepath:I}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ha.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[j,I]of x)if(j==="rmdir"||j==="rmdir-index"){const N=`${a}/${I}`;try{j==="rmdir-index"&&k.delete({filepath:I}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(P){if(P.code==="ENOTEMPTY")console.log(`Did not delete ${I} because directory is not empty`);else throw P}}}),await Promise.all(x.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,j]){const I=`${a}/${j}`;await e.mkdir(I),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ha.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(x.filter(([j])=>j==="create"||j==="create-index"||j==="update"||j==="mkdir-index").map(async function([j,I,N,P,L]){const H=`${a}/${I}`;try{if(j!=="create-index"&&j!=="mkdir-index"){const{object:Z}=await Wr({fs:e,cache:t,gitdir:i,oid:N});if(L&&await e.rm(H),P===33188)await e.write(H,Z);else if(P===33261)await e.write(H,Z,{mode:511});else if(P===40960)await e.writelink(H,Z);else throw new Dn(`Invalid mode 0o${P.toString(8)} detected in blob ${N}`)}const M=await e.lstat(H);P===33261&&(M.mode=493),j==="mkdir-index"&&(M.mode=57344),k.insert({filepath:I,stats:M,oid:N}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(M){console.log(M)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const x=await Ut.expand({fs:e,gitdir:i,ref:o});x.startsWith("refs/heads")?await Ut.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:x}):await Ut.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function zue({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:s,filepaths:o}){let l=0;return Ku({fs:e,cache:t,dir:r,gitdir:a,trees:[zs({ref:i}),Yy(),Jp()],map:async function(c,[d,h,p]){if(c===".")return;if(o&&!o.some(v=>W9(c,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!p,!!d,!!h].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(c)?["delete",c]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await d.oid(),await d.mode()];case"commit":return["mkdir-index",c,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await d.oid()!==await h.oid()?s?["update",c,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",c]:await d.mode()!==await h.mode()?s?["update",c,await d.oid(),await d.mode(),!0]:["conflict",c]:["create-index",c,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",c];case"101":switch(await p.type()){case"tree":return["rmdir",c];case"blob":return await p.oid()!==await h.oid()?s?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await p.type()}`]}case"110":case"111":switch(`${await p.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await p.oid()===await d.oid()&&await p.mode()===await d.mode()&&!s)return;if(h){if(await h.oid()!==await p.oid()&&await h.oid()!==await d.oid())return s?["update",c,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",c]}else if(s)return["update",c,await d.oid(),await d.mode(),await d.mode()!==await p.mode()];return await d.mode()!==await p.mode()?["update",c,await d.oid(),await d.mode(),!0]:await d.oid()!==await p.oid()?["update",c,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await d.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await p.type()}-${await d.type()}`]}}},reduce:async function(c,d){return d=$9(d),c?c&&c[0]==="rmdir"?(d.push(c),d):(d.unshift(c),d):d}})}async function K9({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Pt.join(r,".git"),remote:i="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:c=s===void 0,dryRun:d=!1,force:h=!1,track:p=!0,cache:g={}}){try{et("fs",e),et("dir",r),et("gitdir",a);const v=s||"HEAD";return await LN({fs:new cn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:o,noCheckout:l,noUpdateHead:c,dryRun:d,force:h,track:p})}catch(v){throw v.caller="git.checkout",v}}const Uue=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function ef(e){const t=Uue.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function cd({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ut.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ut.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:ef(a)}function Vue(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function Z9({username:e="",password:t=""}){return`Basic ${Qt.from(`${e}:${t}`).toString("base64")}`}async function Qy(e,t){const n=P9(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function zx(e){let t=0;const n=[];await Qy(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function xO(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function yk(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class fa{static flush(){return Qt.from("0000","utf8")}static delim(){return Qt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Qt.from(t));const n=t.length+4,r=yk(4,n);return Qt.concat([Qt.from(r,"utf8"),t])}static streamReader(t){const n=new F9(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function _O(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function SO(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=fa.streamReader(e);let s=await i();for(;s===null;)s=await i();if(s===!0)throw new By;if(s.includes("version 2"))return _O(i);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new zf(`# service=${t}\\n`,s.toString("utf8"));let o=await i();for(;o===null;)o=await i();if(o===!0)return{capabilities:n,refs:r,symrefs:a};if(o=o.toString("utf8"),o.includes("version 2"))return _O(i);const[l,c]=xC(o,"\0","\\x00");if(c.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=xC(l," "," ");for(r.set(h,d);;){const p=await i();if(p===!0)break;if(p!==null){const[g,v]=xC(p.toString("utf8")," "," ");r.set(v,g)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function xC(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new zf(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const EO=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,CO=(e,t)=>{(t.username||t.password)&&(e.Authorization=Z9(t)),t.headers&&Object.assign(e,t.headers)},_C=async e=>{try{const t=Qt.from(await zx(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Ux{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:o,url:l,headers:c,protocolVersion:d}){let{url:h,auth:p}=xO(l);const g=s?EO(s,h):h;(p.username||p.password)&&(c.Authorization=Z9(p)),d===2&&(c["Git-Protocol"]="version=2");let v,b,x=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${o}`,headers:c}),b=!1,v.statusCode===401||v.statusCode===203){const w=x?i:r;if(w){if(p=await w(h,{...p,headers:{...c}}),p&&p.cancel)throw new nm;p&&(CO(c,p),x=!0,b=!0)}}else v.statusCode===200&&x&&a&&await a(h,p);while(b);if(v.statusCode!==200){const{response:w}=await _C(v);throw new kp(v.statusCode,v.statusMessage,w)}if(v.headers["content-type"]===`application/x-${o}-advertisement`){const w=await SO(v.body,{service:o});return w.auth=p,w}else{const{preview:w,response:S,data:E}=await _C(v);try{const C=await SO([E],{service:o});return C.auth=p,C}catch{throw new qy(w,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:s,body:o,headers:l}){const c=xO(i);c&&(i=c.url),r&&(i=EO(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,CO(l,s);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:o,headers:l});if(d.statusCode!==200){const{response:h}=_C(d);throw new kp(d.statusCode,d.statusMessage,h)}return d}}function Hue({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class l_{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Ux),n.set("https",Ux);const r=Hue({url:t});if(!r)throw new Wy(t);if(n.has(r.transport))return n.get(r.transport);throw new Gy(t,r.transport,r.transport==="ssh"?Vue(t):void 0)}}let Hd=null;class O0{static async read({fs:t,gitdir:n}){Hd===null&&(Hd=new D0);const r=Pt.join(n,"shallow"),a=new Set;return await Hd.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(s=>a.add(s))}),a}static async write({fs:t,gitdir:n,oids:r}){Hd===null&&(Hd=new D0);const a=Pt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Hd.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Hd.acquire(a,async function(){await t.rm(a)})}}async function que({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Gue({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Pt.join(n,"objects/pack"));i=i.filter(s=>s.endsWith(".idx"));for(const s of i){const o=`${n}/objects/pack/${s}`,l=await FN({fs:e,cache:t,filename:o,getExternalRefDelta:a});if(l.error)throw new Dn(l.error);if(l.offsets.has(r))return!0}return!1}async function TO({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=o=>Wr({fs:e,cache:t,gitdir:n,oid:o});let s=await que({fs:e,gitdir:n,oid:r});return s||(s=await Gue({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),s}function Wue(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function Y9(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const c_={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class zw{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Kue(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function X9(e){const t=new zw;let n="";return(async()=>(await Qy(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Kue(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class J9{static demux(t){const n=fa.streamReader(t),r=new zw,a=new zw,i=new zw,s=async function(){const o=await n();if(o===null)return s();if(o===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(o[0]){case 1:{a.write(o.slice(1));break}case 2:{i.write(o.slice(1));break}case 3:{const l=o.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}s()};return s(),{packetlines:r,packfile:a,progress:i}}}async function Zue(e){const{packetlines:t,packfile:n,progress:r}=J9.demux(e),a=[],i=[],s=[];let o=!1,l=!1;return new Promise((c,d)=>{Qy(t,h=>{const p=h.toString("utf8").trim();if(p.startsWith("shallow")){const g=p.slice(-41).trim();g.length!==40&&d(new Gu(g)),a.push(g)}else if(p.startsWith("unshallow")){const g=p.slice(-41).trim();g.length!==40&&d(new Gu(g)),i.push(g)}else if(p.startsWith("ACK")){const[,g,v]=p.split(" ");s.push({oid:g,status:v}),v||(l=!0)}else p.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?d(e.error):c({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):c({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))})})}function Yue({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:s=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const c of t)o.push(fa.encode(`want ${c}${l}
`)),l="";for(const c of r)o.push(fa.encode(`shallow ${c}
`));a!==null&&o.push(fa.encode(`deepen ${a}
`)),i!==null&&o.push(fa.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of s)o.push(fa.encode(`deepen-not ${c}
`));o.push(fa.flush());for(const c of n)o.push(fa.encode(`have ${c}
`));return o.push(fa.encode(`done
`)),o}async function $N({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:c,remoteRef:d,remote:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:x=[],relative:w=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:j=!1}){const I=c||await cd({fs:e,gitdir:l,test:!0}),N=await xa.get({fs:e,gitdir:l}),P=h||I&&await N.get(`branch.${I}.remote`)||"origin",L=p||await N.get(`remote.${P}.url`);if(typeof L>"u")throw new Xi("remote OR url");const H=d||I&&await N.get(`branch.${I}.merge`)||c||"HEAD";g===void 0&&(g=await N.get("http.corsProxy"));const M=l_.getRemoteHelperFor({url:L}),Z=await M.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:g,service:"git-upload-pack",url:L,headers:C,protocolVersion:1}),q=Z.auth,ue=Z.refs;if(ue.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new ku("shallow","depth");if(b!==null&&!Z.capabilities.has("deepen-since"))throw new ku("deepen-since","since");if(x.length>0&&!Z.capabilities.has("deepen-not"))throw new ku("deepen-not","exclude");if(w===!0&&!Z.capabilities.has("deepen-relative"))throw new ku("deepen-relative","relative");const{oid:ae,fullref:ee}=Ut.resolveAgainstMap({ref:H,map:ue});for(const Le of ue.keys())Le===ee||Le==="HEAD"||Le.startsWith("refs/heads/")||S&&Le.startsWith("refs/tags/")||ue.delete(Le);const X=Y9([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${c_.agent}`]);w&&X.push("deepen-relative");const ie=E?[ae]:ue.values(),B=E?[I]:await Ut.listRefs({fs:e,gitdir:l,filepath:"refs"});let J=[];for(let Le of B)try{Le=await Ut.expand({fs:e,gitdir:l,ref:Le});const je=await Ut.resolve({fs:e,gitdir:l,ref:Le});await TO({fs:e,cache:t,gitdir:l,oid:je})&&J.push(je)}catch{}J=[...new Set(J)];const Q=await O0.read({fs:e,gitdir:l}),ne=Z.capabilities.has("shallow")?[...Q]:[],he=Yue({capabilities:X,wants:ie,haves:J,shallows:ne,depth:v,since:b,exclude:x}),de=Qt.from(await zx(he)),Ie=await M.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:L,auth:q,body:[de],headers:C}),Te=await Zue(Ie.body);Ie.headers&&(Te.headers=Ie.headers);for(const Le of Te.shallows)if(!Q.has(Le))try{const{object:je}=await Wr({fs:e,cache:t,gitdir:l,oid:Le}),z=new Gr(je),Se=await Promise.all(z.headers().parent.map(fe=>TO({fs:e,cache:t,gitdir:l,oid:fe})));Se.length===0||Se.every(fe=>fe)||Q.add(Le)}catch{Q.add(Le)}for(const Le of Te.unshallows)Q.delete(Le);if(await O0.write({fs:e,gitdir:l,oids:Q}),E){const Le=new Map([[ee,ae]]),je=new Map;let z=10,Se=ee;for(;z--;){const se=Z.symrefs.get(Se);if(se===void 0)break;je.set(Se,se),Se=se}const Ne=ue.get(Se);Ne&&Le.set(Se,Ne);const{pruned:fe}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:P,refs:Le,symrefs:je,tags:S,prune:k});k&&(Te.pruned=fe)}else{const{pruned:Le}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:P,refs:ue,symrefs:Z.symrefs,tags:S,prune:k,pruneTags:j});k&&(Te.pruned=Le)}if(Te.HEAD=Z.symrefs.get("HEAD"),Te.HEAD===void 0){const{oid:Le}=Ut.resolveAgainstMap({ref:"HEAD",map:ue});for(const[je,z]of ue.entries())if(je!=="HEAD"&&z===Le){Te.HEAD=je;break}}const Ae=ee.startsWith("refs/tags")?"tag":"branch";if(Te.FETCH_HEAD={oid:ae,description:`${Ae} '${ef(ee)}' of ${L}`},r||a){const Le=X9(Te.progress);Qy(Le,async je=>{if(a&&await a(je),r){const z=je.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);z&&await r({phase:z[1].trim(),loaded:parseInt(z[2],10),total:parseInt(z[3],10)})}})}const Ee=Qt.from(await zx(Te.packfile));if(Ie.body.error)throw Ie.body.error;const Pe=Ee.slice(-20).toString("hex"),Qe={defaultBranch:Te.HEAD,fetchHead:Te.FETCH_HEAD.oid,fetchHeadDescription:Te.FETCH_HEAD.description};if(Te.headers&&(Qe.headers=Te.headers),k&&(Qe.pruned=Te.pruned),Pe!==""&&!Wue(Ee)){Qe.packfile=`objects/pack/pack-${Pe}.pack`;const Le=Pt.join(l,Qe.packfile);await e.write(Le,Ee);const je=Se=>Wr({fs:e,cache:t,gitdir:l,oid:Se}),z=await Tp.fromPack({pack:Ee,getExternalRefDelta:je,onProgress:r});await e.write(Le.replace(/\.pack$/,".idx"),await z.toBuffer())}return Qe}async function Q9({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(s=>r+"/"+s);for(const s of i)await e.mkdir(s);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function Xue({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:c,gitdir:d,url:h,corsProxy:p,ref:g,remote:v,depth:b,since:x,exclude:w,relative:S,singleBranch:E,noCheckout:C,noTags:k,headers:j}){try{if(await Q9({fs:e,gitdir:d}),await G9({fs:e,gitdir:d,remote:v,url:h,force:!1}),p){const P=await xa.get({fs:e,gitdir:d});await P.set("http.corsProxy",p),await xa.save({fs:e,gitdir:d,config:P})}const{defaultBranch:I,fetchHead:N}=await $N({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:d,ref:g,remote:v,corsProxy:p,depth:b,since:x,exclude:w,relative:S,singleBranch:E,headers:j,tags:!k});if(N===null)return;g=g||I,g=g.replace("refs/heads/",""),await LN({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:c,gitdir:d,ref:g,remote:v,noCheckout:C})}catch(I){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),I}}async function Jue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:c=Pt.join(l,".git"),url:d,corsProxy:h=void 0,ref:p=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:x=[],relative:w=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:j={}}){try{return et("fs",e),et("http",t),et("gitdir",c),E||et("dir",l),et("url",d),await Xue({fs:new cn(e),cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:c,url:d,corsProxy:h,ref:p,remote:g,depth:v,since:b,exclude:x,relative:w,singleBranch:S,noCheckout:E,noTags:C,headers:k})}catch(I){throw I.caller="git.clone",I}}async function Que({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:d=!1,ref:h,parent:p,tree:g,cache:v={}}){try{et("fs",e),l||et("message",a),o&&et("onSign",t);const b=new cn(e);return await o_({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l,dryRun:c,noUpdateBranch:d,ref:h,parent:p,tree:g})}catch(b){throw b.caller="git.commit",b}}async function ede({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return et("fs",e),et("gitdir",n),await cd({fs:new cn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function tde({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ut.exists({fs:e,gitdir:t,ref:n}))throw new Rr(n);const a=await Ut.expand({fs:e,gitdir:t,ref:n}),i=await cd({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await Ut.resolve({fs:e,gitdir:t,ref:a});await Ut.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Ut.deleteRef({fs:e,gitdir:t,ref:a});const s=ef(n),o=await xa.get({fs:e,gitdir:t});await o.deleteSection("branch",s),await xa.save({fs:e,gitdir:t,config:o})}async function nde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await tde({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function rde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{et("fs",e),et("ref",r),await Ut.deleteRef({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function ade({fs:e,gitdir:t,remote:n}){const r=await xa.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await xa.save({fs:e,gitdir:t,config:r})}async function ide({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("remote",r),await ade({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function sde({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ut.deleteRef({fs:e,gitdir:t,ref:n})}async function ode({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await sde({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function lde({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function cde({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,c=await FN({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(c.error)throw new Dn(c.error);for(const d of c.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function ude({fs:e,cache:t,gitdir:n,oid:r}){const a=o=>Wr({fs:e,cache:t,gitdir:n,oid:o}),i=await lde({fs:e,gitdir:n,oid:r}),s=await cde({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const o of s)i.indexOf(o)===-1&&i.push(o);if(i.length===1)return i[0];throw i.length>1?new Fy("oids",r,i):new Rr(`an object matching "${r}"`)}async function dde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await ude({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function fde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ut.expand({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function BN({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let s=r.map((o,l)=>({index:l,oid:o}));for(;s.length;){const o=new Set;for(const{oid:c,index:d}of s)a[c]||(a[c]=new Set),a[c].add(d),a[c].size===i&&o.add(c);if(o.size>0)return[...o];const l=new Map;for(const{oid:c,index:d}of s)try{const{object:h}=await Wr({fs:e,cache:t,gitdir:n,oid:c}),p=Gr.from(h),{parent:g}=p.parseHeaders();for(const v of g)(!a[v]||!a[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}s=Array.from(l.values())}return[]}const SC=/^.*(\r?\n|$)/gm;function hde({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],s=t[2],o=i.match(SC),l=a.match(SC),c=s.match(SC),d=jce(o,l,c),h=7;let p="",g=!0;for(const v of d)v.ok&&(p+=v.ok.join("")),v.conflict&&(g=!1,p+=`${"<".repeat(h)} ${n}
`,p+=v.conflict.a.join(""),p+=`${"=".repeat(h)}
`,p+=v.conflict.b.join(""),p+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:p}}async function pde({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),index:a,ourOid:i,baseOid:s,theirOid:o,ourName:l="ours",baseName:c="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:p=!0,mergeDriver:g}){const v=zs({ref:i}),b=zs({ref:s}),x=zs({ref:o}),w=[],S=[],E=[],C=[],k=await Ku({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,x],map:async function(j,[I,N,P]){const L=Px(j),H=await Bx(I,N),M=await Bx(P,N);switch(`${H}-${M}`){case"false-false":return{mode:await N.mode(),path:L,oid:await N.oid(),type:await N.type()};case"false-true":return P?{mode:await P.mode(),path:L,oid:await P.oid(),type:await P.type()}:void 0;case"true-false":return I?{mode:await I.mode(),path:L,oid:await I.oid(),type:await I.type()}:void 0;case"true-true":{if(I&&N&&P&&await I.type()==="blob"&&await N.type()==="blob"&&await P.type()==="blob")return mde({fs:e,gitdir:r,path:L,ours:I,base:N,theirs:P,ourName:l,baseName:c,theirName:d,mergeDriver:g}).then(async Z=>{if(Z.cleanMerge)p||a.insert({filepath:j,oid:Z.mergeResult.oid,stage:0});else if(w.push(j),S.push(j),!p){const q=await N.oid(),ue=await I.oid(),ae=await P.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:q,stage:1}),a.insert({filepath:j,oid:ue,stage:2}),a.insert({filepath:j,oid:ae,stage:3})}return Z.mergeResult});if(N&&!I&&P&&await N.type()==="blob"&&await P.type()==="blob"){if(w.push(j),E.push(j),!p){const Z=await N.oid(),q=await P.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:Z,stage:1}),a.insert({filepath:j,oid:q,stage:3})}return{mode:await P.mode(),oid:await P.oid(),type:"blob",path:L}}if(N&&I&&!P&&await N.type()==="blob"&&await I.type()==="blob"){if(w.push(j),C.push(j),!p){const Z=await N.oid(),q=await I.oid();a.delete({filepath:j}),a.insert({filepath:j,oid:Z,stage:1}),a.insert({filepath:j,oid:q,stage:2})}return{mode:await I.mode(),oid:await I.oid(),type:"blob",path:L}}if(N&&!I&&!P&&await N.type()==="blob")return;throw new em}}},reduce:w.length!==0&&(!n||p)?void 0:async(j,I)=>{const N=I.filter(Boolean);if(j&&!(j&&j.type==="tree"&&N.length===0)){if(N.length>0){const L=new Ji(N).toObject(),H=await es({fs:e,gitdir:r,type:"tree",object:L,dryRun:h});j.oid=H}return j}}});return w.length!==0?(n&&!p&&await Ku({fs:e,cache:t,dir:n,gitdir:r,trees:[zs({ref:k.oid})],map:async function(j,[I]){const N=`${n}/${j}`;if(await I.type()==="blob"){const P=await I.mode(),L=new TextDecoder().decode(await I.content());await e.write(N,L,{mode:P})}return!0}}),new tm(w,S,E,C)):k.oid}async function mde({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:s,theirName:o,baseName:l,dryRun:c,mergeDriver:d=hde}){const h="blob",p=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};const g=Qt.from(await r.content()).toString("utf8"),v=Qt.from(await a.content()).toString("utf8"),b=Qt.from(await i.content()).toString("utf8"),{mergedText:x,cleanMerge:w}=await d({branches:[l,s,o],contents:[v,g,b],path:n}),S=await es({fs:e,gitdir:t,type:"blob",object:Qt.from(x,"utf8"),dryRun:c});return{cleanMerge:w,mergeResult:{mode:p,path:n,oid:S,type:h}}}async function eB({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:d=!0,message:h,author:p,committer:g,signingKey:v,onSign:b,mergeDriver:x}){a===void 0&&(a=await cd({fs:e,gitdir:r,fullname:!0})),a=await Ut.expand({fs:e,gitdir:r,ref:a}),i=await Ut.expand({fs:e,gitdir:r,ref:i});const w=await Ut.resolve({fs:e,gitdir:r,ref:a}),S=await Ut.resolve({fs:e,gitdir:r,ref:i}),E=await BN({fs:e,cache:t,gitdir:r,oids:[w,S]});if(E.length!==1)throw new em;const C=E[0];if(C===S)return{oid:w,alreadyMerged:!0};if(s&&C===w)return!l&&!c&&await Ut.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(o)throw new zy;const k=await Ha.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async I=>pde({fs:e,cache:t,dir:n,gitdir:r,index:I,ourOid:w,theirOid:S,baseOid:C,ourName:ef(a),baseName:"base",theirName:ef(i),dryRun:l,abortOnConflict:d,mergeDriver:x}));if(k instanceof tm)throw k;return h||(h=`Merge branch '${ef(i)}' into ${ef(a)}`),{oid:await o_({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[w,S],author:p,committer:g,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:c}),tree:k,mergeCommit:!0}}}async function tB({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:c,ref:d,url:h,remote:p,remoteRef:g,prune:v,pruneTags:b,fastForward:x,fastForwardOnly:w,corsProxy:S,singleBranch:E,headers:C,author:k,committer:j,signingKey:I}){try{if(!d){const L=await cd({fs:e,gitdir:c});if(!L)throw new Xi("ref");d=L}const{fetchHead:N,fetchHeadDescription:P}=await $N({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:c,corsProxy:S,ref:d,url:h,remote:p,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:b});await eB({fs:e,cache:t,gitdir:c,ours:d,theirs:N,fastForward:x,fastForwardOnly:w,message:`Merge ${P}`,author:k,committer:j,signingKey:I,dryRun:!1,noUpdateBranch:!1}),await LN({fs:e,cache:t,onProgress:r,dir:l,gitdir:c,ref:d,remote:p,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function gde({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:c,url:d,remote:h,remoteRef:p,corsProxy:g,singleBranch:v,headers:b={},cache:x={}}){try{et("fs",e),et("http",t),et("gitdir",l);const w={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await tB({fs:new cn(e),cache:x,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:c,url:d,remote:h,remoteRef:p,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:w,committer:w})}catch(w){throw w.caller="git.fastForward",w}}async function yde({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:c,remote:d,remoteRef:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:x=[],relative:w=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:j=!1,cache:I={}}){try{return et("fs",e),et("http",t),et("gitdir",l),await $N({fs:new cn(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,gitdir:l,ref:c,remote:d,remoteRef:h,url:p,corsProxy:g,depth:v,since:b,exclude:x,relative:w,tags:S,singleBranch:E,headers:C,prune:k,pruneTags:j})}catch(N){throw N.caller="git.fetch",N}}async function bde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await BN({fs:new cn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function nB({fs:e,filepath:t}){if(await e.exists(Pt.join(t,".git")))return t;{const n=Cp(t);if(n===t)throw new Rr(`git root for ${t}`);return nB({fs:e,filepath:n})}}async function vde({fs:e,filepath:t}){try{return et("fs",e),et("filepath",t),await nB({fs:new cn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function wde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await M0({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function xde({fs:e,gitdir:t,path:n}){return(await xa.get({fs:e,gitdir:t})).getall(n)}async function _de({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await xde({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function Sde({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1}){try{et("http",e),et("url",i);const c=await l_.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:1}),d={capabilities:[...c.capabilities]};for(const[h,p]of c.refs){const g=h.split("/"),v=g.pop();let b=d;for(const x of g)b[x]=b[x]||{},b=b[x];b[v]=p}for(const[h,p]of c.symrefs){const g=h.split("/"),v=g.pop();let b=d;for(const x of g)b[x]=b[x]||{},b=b[x];b[v]=p}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function rB(e,t,n,r){const a=[];for(const[i,s]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),c=a[a.length-1],d=c.ref===l?c:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=s}continue}const o={ref:i,oid:s};n&&e.symrefs.has(i)&&(o.target=e.symrefs.get(i)),a.push(o)}return a}async function Ede({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{et("http",e),et("url",i);const d=await l_.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const p of d.capabilities){const[g,v]=p.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:rB(d,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function Cde({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Qp.wrap({type:e,object:t})),r=await xc(t)),{oid:r,object:t}}async function Tde({object:e}){try{et("object",e),typeof e=="string"?e=Qt.from(e,"utf8"):e=Qt.from(e);const t="blob",{oid:n,object:r}=await Cde({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function kde({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Pt.join(r,i);const s=await e.read(i),o=c=>Wr({fs:e,cache:t,gitdir:a,oid:c}),l=await Tp.fromPack({pack:s,getExternalRefDelta:o,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function Ade({fs:e,onProgress:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a,cache:i={}}){try{return et("fs",e),et("dir",n),et("gitdir",n),et("filepath",a),await kde({fs:new cn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(s){throw s.caller="git.indexPack",s}}async function Nde({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){try{return et("fs",e),et("gitdir",r),t||et("dir",n),await Q9({fs:new cn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function aB({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const s=await O0.read({fs:e,gitdir:n});if(!r)throw new Xi("oid");if(!a)throw new Xi("ancestor");if(r===a)return!1;const o=[r],l=new Set;let c=0;for(;o.length;){if(c++===i)throw new Vy(i);const d=o.shift(),{type:h,object:p}=await Wr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Fi(d,h,"commit");const g=Gr.from(p).parse();for(const v of g.parent)if(v===a)return!0;if(!s.has(d))for(const v of g.parent)l.has(v)||(o.push(v),l.add(v))}return!1}async function Rde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:s={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),et("ancestor",a),await aB({fs:new cn(e),cache:s,gitdir:n,oid:r,ancestor:a,depth:i})}catch(o){throw o.caller="git.isDescendent",o}}async function Ide({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r),rm.isIgnored({fs:new cn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function jde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("gitdir",n),Ut.listBranches({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function Dde({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ut.resolve({gitdir:t,fs:e,ref:n}),i=[];return await iB({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ha.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function iB({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:s}=await am({fs:e,cache:t,gitdir:n,oid:r});for(const o of s)o.type==="tree"?await iB({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:a,prefix:Pt.join(i,o.path)}):a.push(Pt.join(i,o.path))}async function Mde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),await Dde({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function Ode({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ut.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof Rr)return[]}return(await am({fs:e,cache:t,gitdir:n,oid:a})).tree.map(o=>({target:o.path,note:o.oid}))}async function Pde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ode({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Fde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("gitdir",n),Ut.listRefs({fs:new cn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function Lde({fs:e,gitdir:t}){const n=await xa.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const s=await n.get(`remote.${i}.url`);return{remote:i,url:s}}))}async function $de({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),await Lde({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Bde(e){const t=fa.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...s]=r.split(" "),o={ref:i,oid:a};for(const l of s){const[c,d]=l.split(":");c==="symref-target"?o.target=d:c==="peeled"&&(o.peeled=d)}n.push(o)}return n}async function zde({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(fa.encode(`command=ls-refs
`)),r.push(fa.encode(`agent=${c_.agent}
`)),(n||t||e)&&r.push(fa.delim()),n&&r.push(fa.encode("peel")),t&&r.push(fa.encode("symrefs")),e&&r.push(fa.encode(`ref-prefix ${e}`)),r.push(fa.flush()),r}async function Ude({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:c,symrefs:d,peelTags:h}){try{et("http",e),et("url",i);const p=await Ux.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(p.protocolVersion===1)return rB(p,c,d,h);const g=await zde({prefix:c,symrefs:d,peelTags:h}),v=await Ux.connect({http:e,auth:p.auth,headers:s,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,body:g});return Bde(v.body)}catch(p){throw p.caller="git.listServerRefs",p}}async function Vde({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),Ut.listTags({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Hde(e,t){return e.committer.timestamp-t.committer.timestamp}const qde="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function kO({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===qde)return;const i=r;let s;const o=await Np({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return a===o.oid?s=o.path:(s=await sB({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function sB({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:s=[],parentPath:o=""}){const l=r.entries().map(function(c){let d;return c.oid===a?(d=Pt.join(o,c.path),s.push(d)):c.type==="tree"&&(d=Wr({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return sB({fs:e,cache:t,gitdir:n,tree:Ji.from(h),fileId:a,oid:i,filepaths:s,parentPath:Pt.join(o,c.path)})})),d});return await Promise.all(l),s}async function Gde({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l}){const c=typeof s>"u"?void 0:Math.floor(s.valueOf()/1e3),d=[],h=await O0.read({fs:e,gitdir:n}),p=await Ut.resolve({fs:e,gitdir:n,ref:a}),g=[await Ip({fs:e,cache:t,gitdir:n,oid:p})];let v,b,x;function w(S){x&&r&&d.push(S)}for(;g.length>0;){const S=g.pop();if(c!==void 0&&S.commit.committer.timestamp<=c)break;if(r){let E;try{E=await Xy({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=S,x=!0}catch(C){if(C instanceof Rr){let k=l&&v;if(k&&(k=await kO({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const j=await kO({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(j))if(k=k.filter(I=>j.indexOf(I)===-1),k.length===1)k=k[0],r=k,b&&d.push(b);else{k=!1,b&&d.push(b);break}}}else r=k,b&&d.push(b);if(!k){if(x&&v&&(d.push(b),!o))break;if(!o&&!l)throw C}b=S,x=!1}else throw C}}else d.push(S);if(i!==void 0&&d.length===i){w(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await Ip({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(C.oid)||g.push(C)}g.length===0&&w(S),g.sort((E,C)=>Hde(E.commit,C.commit))}return d}async function Wde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:s,force:o,follow:l,cache:c={}}){try{return et("fs",e),et("gitdir",n),et("ref",a),await Gde({fs:new cn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l})}catch(d){throw d.caller="git.log",d}}async function Kde({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:d=!0,message:h,author:p,committer:g,signingKey:v,cache:b={},mergeDriver:x}){try{et("fs",e),v&&et("onSign",t);const w=new cn(e),S=await Zu({fs:w,gitdir:r,author:p});if(!S&&(!o||!s))throw new yi("author");const E=await Rp({fs:w,gitdir:r,author:S,committer:g});if(!E&&(!o||!s))throw new yi("committer");return await eB({fs:w,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:c,abortOnConflict:d,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:x})}catch(w){throw w.caller="git.merge",w}}const Zde={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function oB({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new E9,s=[];function o(d,h){const p=Qt.from(d,h);s.push(p),i.update(p)}async function l({stype:d,object:h}){const p=Zde[d];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let x=(v|p|b).toString(16);for(o(x,"hex");v;)v=g>127?128:0,x=v|g&127,o(yk(2,x),"hex"),g=g>>>7;o(Qt.from(await B9(h)))}o("PACK"),o("00000002","hex"),o(yk(8,a.length),"hex");for(const d of a){const{type:h,object:p}=await Wr({fs:e,cache:t,gitdir:r,oid:d});await l({object:p,stype:h})}const c=i.digest();return s.push(c),s}async function Yde({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await oB({fs:e,cache:t,gitdir:n,oids:r}),s=Qt.from(await zx(i)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return a?(await e.write(Pt.join(n,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function Xde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await Yde({fs:new cn(e),cache:i,gitdir:n,oids:r,write:a})}catch(s){throw s.caller="git.packObjects",s}}async function Jde({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:c,url:d,remote:h,remoteRef:p,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:x=!1,corsProxy:w,singleBranch:S,headers:E={},author:C,committer:k,signingKey:j,cache:I={}}){try{et("fs",e),et("gitdir",l);const N=new cn(e),P=await Zu({fs:N,gitdir:l,author:C});if(!P)throw new yi("author");const L=await Rp({fs:N,gitdir:l,author:P,committer:k});if(!L)throw new yi("committer");return await tB({fs:N,cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:c,url:d,remote:h,remoteRef:p,fastForward:b,fastForwardOnly:x,corsProxy:w,singleBranch:S,headers:E,author:P,committer:L,signingKey:j,prune:g,pruneTags:v})}catch(N){throw N.caller="git.pull",N}}async function Qde({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),start:a,finish:i}){const s=await O0.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const h of a)o.add(await Ut.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const p=await Ut.resolve({fs:e,gitdir:r,ref:h});l.add(p)}catch{}const c=new Set;async function d(h){c.add(h);const{type:p,object:g}=await Wr({fs:e,cache:t,gitdir:r,oid:h});if(p==="tag"){const b=Ni.from(g).headers().object;return d(b)}if(p!=="commit")throw new Fi(h,p,"commit");if(!s.has(h)){const b=Gr.from(g).headers().parent;for(h of b)!l.has(h)&&!c.has(h)&&await d(h)}}for(const h of o)await d(h);return c}async function EC({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new Set;async function s(o){if(i.has(o))return;i.add(o);const{type:l,object:c}=await Wr({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const h=Ni.from(c).headers().object;await s(h)}else if(l==="commit"){const h=Gr.from(c).headers().tree;await s(h)}else if(l==="tree"){const d=Ji.from(c);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await s(h.oid)}}for(const o of a)await s(o);return i}async function efe(e){const t={};let n="";const r=fa.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new zf('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const s of i){if(s.trim()==="")continue;const o=s.slice(0,2),l=s.slice(3);let c=l.indexOf(" ");c===-1&&(c=l.length);const d=l.slice(0,c),h=l.slice(c+1);t.refs[d]={ok:o==="ok",error:h}}return t}async function tfe({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(fa.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(fa.flush()),n}async function nfe({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:c,ref:d,remoteRef:h,remote:p,url:g,force:v=!1,delete:b=!1,corsProxy:x,headers:w={}}){const S=d||await cd({fs:e,gitdir:c});if(typeof S>"u")throw new Xi("ref");const E=await xa.get({fs:e,gitdir:c});p=p||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${p}.pushurl`)||await E.get(`remote.${p}.url`);if(typeof C>"u")throw new Xi("remote OR url");const k=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Xi("remoteRef");x===void 0&&(x=await E.get("http.corsProxy"));const j=await Ut.expand({fs:e,gitdir:c,ref:S}),I=b?"0000000000000000000000000000000000000000":await Ut.resolve({fs:e,gitdir:c,ref:j}),N=l_.getRemoteHelperFor({url:C}),P=await N.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:x,service:"git-receive-pack",url:C,headers:w,protocolVersion:1}),L=P.auth;let H;if(!k)H=j;else try{H=await Ut.expandAgainstMap({ref:k,map:P.refs})}catch(Q){if(Q instanceof Rr)H=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw Q}const M=P.refs.get(H)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:p,url:C,localRef:{ref:b?"(delete)":j,oid:I},remoteRef:{ref:H,oid:M}}))throw new nm;const Z=!P.capabilities.has("no-thin");let q=new Set;if(!b){const Q=[...P.refs.values()];let ne=new Set;if(M!=="0000000000000000000000000000000000000000"){const he=await BN({fs:e,cache:t,gitdir:c,oids:[I,M]});for(const de of he)Q.push(de);Z&&(ne=await EC({fs:e,cache:t,gitdir:c,oids:he}))}if(!Q.includes(I)){const he=await Qde({fs:e,cache:t,gitdir:c,start:[I],finish:Q});q=await EC({fs:e,cache:t,gitdir:c,oids:he})}if(Z){try{const he=await Ut.resolve({fs:e,gitdir:c,ref:`refs/remotes/${p}/HEAD`,depth:2}),{oid:de}=await Ut.resolveAgainstMap({ref:he.replace(`refs/remotes/${p}/`,""),fullref:he,map:P.refs}),Ie=[de];for(const Te of await EC({fs:e,cache:t,gitdir:c,oids:Ie}))ne.add(Te)}catch{}for(const he of ne)q.delete(he)}if(I===M&&(v=!0),!v){if(j.startsWith("refs/tags")&&M!=="0000000000000000000000000000000000000000")throw new Ap("tag-exists");if(I!=="0000000000000000000000000000000000000000"&&M!=="0000000000000000000000000000000000000000"&&!await aB({fs:e,cache:t,gitdir:c,oid:I,ancestor:M,depth:-1}))throw new Ap("not-fast-forward")}}const ue=Y9([...P.capabilities],["report-status","side-band-64k",`agent=${c_.agent}`]),ae=await tfe({capabilities:ue,triplets:[{oldoid:M,oid:I,fullRef:H}]}),ee=b?[]:await oB({fs:e,cache:t,gitdir:c,oids:[...q]}),X=await N.connect({http:n,onProgress:r,corsProxy:x,service:"git-receive-pack",url:C,auth:L,headers:w,body:[...ae,...ee]}),{packfile:ie,progress:B}=await J9.demux(X.body);if(a){const Q=X9(B);Qy(Q,async ne=>{await a(ne)})}const J=await efe(ie);if(X.headers&&(J.headers=X.headers),p&&J.ok&&J.refs[H].ok&&!j.startsWith("refs/tags")){const Q=`refs/remotes/${p}/${H.replace("refs/heads","")}`;b?await Ut.deleteRef({fs:e,gitdir:c,ref:Q}):await Ut.writeRef({fs:e,gitdir:c,ref:Q,value:I})}if(J.ok&&Object.values(J.refs).every(Q=>Q.ok))return J;{const Q=Object.entries(J.refs).filter(([ne,he])=>!he.ok).map(([ne,he])=>`
  - ${ne}: ${he.error}`).join("");throw new Uy(Q,J)}}async function rfe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,dir:l,gitdir:c=Pt.join(l,".git"),ref:d,remoteRef:h,remote:p="origin",url:g,force:v=!1,delete:b=!1,corsProxy:x,headers:w={},cache:S={}}){try{return et("fs",e),et("http",t),et("gitdir",c),await nfe({fs:new cn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,gitdir:c,ref:d,remoteRef:h,remote:p,url:g,force:v,delete:b,corsProxy:x,headers:w})}catch(E){throw E.caller="git.push",E}}async function lB({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ni.from(i).parse().object,lB({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new Fi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function cB({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await Xy({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await lB({fs:e,cache:t,gitdir:n,oid:r})}async function afe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await cB({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readBlob",s}}async function uB({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Ip({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function ife({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ut.resolve({gitdir:n,fs:e,ref:r}),{blob:s}=await cB({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return s}async function sfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oid",a),await ife({fs:new cn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(s){throw s.caller="git.readNote",s}}async function ofe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:s=void 0,cache:o={}}){try{et("fs",e),et("gitdir",n),et("oid",r);const l=new cn(e);i!==void 0&&(r=await Xy({fs:l,cache:o,gitdir:n,oid:r,filepath:i}));const d=await Wr({fs:l,cache:o,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Gr.from(d.object).parse();break;case"tree":d.object=Ji.from(d.object).entries();break;case"blob":s?d.object=d.object.toString(s):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=Ni.from(d.object).parse();break;default:throw new Fi(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function lfe({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new Fi(r,a,"tag");const s=Ni.from(i);return{oid:r,tag:s.parse(),payload:s.payload()}}async function cfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await lfe({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function ufe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await am({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readTree",s}}async function dfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r),await Ha.acquire({fs:new cn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function ffe({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l}){let c;try{c=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof Rr))throw v}let h=(await am({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const p=await Jy({fs:e,gitdir:r,tree:h});return await o_({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:p,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function hfe({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l,cache:c={}}){try{et("fs",e),et("gitdir",r),et("oid",i);const d=new cn(e),h=await Zu({fs:d,gitdir:r,author:s});if(!h)throw new yi("author");const p=await Rp({fs:d,gitdir:r,author:h,committer:o});if(!p)throw new yi("committer");return await ffe({fs:d,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:p,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function pfe({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==sl.clean(r))throw new Eo(r,sl.clean(r));if(n!==sl.clean(n))throw new Eo(n,sl.clean(n));const i=`refs/heads/${n}`,s=`refs/heads/${r}`;if(await Ut.exists({fs:e,gitdir:t,ref:s}))throw new No("branch",r,!1);const l=await Ut.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ut.writeRef({fs:e,gitdir:t,ref:s,value:l}),await Ut.deleteRef({fs:e,gitdir:t,ref:i});const d=await cd({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function mfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oldref",a),await pfe({fs:new cn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(s){throw s.caller="git.renameBranch",s}}async function dB({gitdir:e,type:t,object:n}){return xc(Qp.wrap({type:t,object:n}))}async function gfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const s=new cn(e);let o,l;try{o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(o)try{o=await Xy({fs:s,cache:i,gitdir:n,oid:o,filepath:r})}catch{o=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await s.read(Pt.join(t,r));d&&(l=await dB({gitdir:n,type:"blob",object:d}),o===l&&(c=await s.lstat(Pt.join(t,r)))),await Ha.acquire({fs:s,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),o&&h.insert({filepath:r,stats:c,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function yfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,depth:a}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ut.resolve({fs:new cn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function bfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r,value:a,append:i=!1}){try{et("fs",e),et("gitdir",n),et("path",r);const s=new cn(e),o=await xa.get({fs:s,gitdir:n});i?await o.append(r,a):await o.set(r,a),await xa.save({fs:s,gitdir:n,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function fB({fs:e,gitdir:t,commit:n}){const r=Gr.from(n).toObject();return await es({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Vx{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=Vx.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${s} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,s)=>n?`stash@{${s}}: ${i.split("	")[1]}`:i)}}const vfe={stage:Jp,workdir:Yy};let CC;async function jp(e,t){return CC===void 0&&(CC=new D0),CC.acquire(e,t)}async function wfe(e,t,n,r,a=null){const i=Pt.join(n,r),s=await e.lstat(i);if(!s)throw new Rr(i);if(s.isDirectory())throw new Dn(`${i}: file expected, but found directory`);const o=a?await O9({fs:e,gitdir:t,oid:a}):void 0;let l=o?a:void 0;return o||await jp({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=s.isSymbolicLink()?await e.readlink(i).then(z9):await e.read(i);if(c===null)throw new Rr(i);l=await es({fs:e,gitdir:t,type:"blob",object:c})}),l}async function xfe({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const s=await Promise.all(i.children.map(a));i.oid=await Jy({fs:e,gitdir:n,tree:s}),i.mode=16384}}else i.type==="blob"&&(i.oid=await wfe(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function AO({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?vfe[g]():g),s=[],d=await Ku({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await rm.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&s.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const x of v){const[w,S]=x;a?S&&(await e.exists(`${t}/${S.toString()}`)?b.push(x):s.push([null,S])):w&&(S?b.push(x):s.push([w,null]))}return b.length?Promise.all(b.map(g)):[]}});if(s.length===0||d.length===0)return null;const p=(await xfe({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return Jy({fs:e,gitdir:n,tree:p})}async function _fe({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const s=[],o=[],l=await Ku({fs:e,cache:{},dir:t,gitdir:n,trees:[zs({ref:a}),zs({ref:r})],map:async(c,[d,h])=>{if(c==="."||await rm.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const p=h?await h.type():await d.type();if(p!=="tree"&&p!=="blob")return;if(!h&&d){const v=p==="tree"?"rmdir":"rm";return p==="tree"&&s.push(c),p==="blob"&&i&&o.push({filepath:c,oid:await d.oid()}),{method:v,filepath:c}}const g=await h.oid();if(!d||await d.oid()!==g)return p==="tree"?{method:"mkdir",filepath:c}:(i&&o.push({filepath:c,oid:g,stats:await e.lstat(Pt.join(t,c))}),{method:"write",filepath:c,oid:g})}});await jp({fs:e,gitdir:n,dirRemoved:s,ops:l},async()=>{for(const c of l){const d=Pt.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!s.some(h=>d.startsWith(h))){const{object:h}=await Wr({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await Ha.acquire({fs:e,gitdir:n,cache:{}},async c=>{o.forEach(({filepath:d,stats:h,oid:p})=>{c.insert({filepath:d,stats:h,oid:p})})})}class fc{constructor({fs:t,dir:n,gitdir:r=Pt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Pt.join(this.gitdir,fc.refStash)}get refLogsStashPath(){return Pt.join(this.gitdir,fc.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Zu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new yi("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return fB({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Eo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Ip({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ut.writeRef({fs:this.fs,gitdir:this.gitdir,ref:fc.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Vx.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await jp({filepath:i,entry:a},async()=>{const s=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,s+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Vx.getStashReflogEntry(r,t)}}async function Sfe({fs:e,dir:t,gitdir:n,message:r=""}){const a=new fc({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await cd({fs:e,gitdir:n,fullname:!1}),s=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await uB({fs:e,dir:t,gitdir:n,oid:s})).commit.message,c=[s];let d=null,h=zs({ref:"HEAD"});const p=await AO({fs:e,dir:t,gitdir:n,treePair:[zs({ref:"HEAD"}),"stage"]});if(p){const x=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:p,parent:c});c.push(x),d=p,h=Jp()}const g=await AO({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const x=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(x),d=g}if(!d||!p&&!g)throw new Rr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${s.substring(0,7)} ${l}`,b=await a.writeStashCommit({message:v,tree:d,parent:c});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await K9({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function hB({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new fc({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:s=null}=i.commit?i.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){const c=(await Ip({fs:e,cache:{},gitdir:n,oid:s[o+1]})).commit.message.startsWith("stash-Index");await _fe({fs:e,dir:t,gitdir:n,stashCommit:s[o+1],parentCommit:s[o],wasStaged:c})}}async function pB({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new fc({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const s=a.refStashPath;await jp(s,async()=>{await e.exists(s)&&await e.rm(s)});const o=await a.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=a.refLogsStashPath;await jp({reflogEntries:o,stashReflogPath:l,stashMgr:a},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const c=o[o.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(l)})}async function Efe({fs:e,dir:t,gitdir:n}){return new fc({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function Cfe({fs:e,dir:t,gitdir:n}){const r=new fc({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await jp(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function Tfe({fs:e,dir:t,gitdir:n,refIdx:r=0}){await hB({fs:e,dir:t,gitdir:n,refIdx:r}),await pB({fs:e,dir:t,gitdir:n,refIdx:r})}async function kfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){et("fs",e),et("dir",t),et("gitdir",n),et("op",r);const s={push:Sfe,apply:hB,drop:pB,list:Efe,clear:Cfe,pop:Tfe},o=["apply","drop","pop"];try{const l=new cn(e);["refs","logs","logs/refs"].map(h=>Pt.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=s[r];if(d){if(o.includes(r)&&i<0)throw new Eo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function Afe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const i=new cn(e);if(await rm.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await Nfe({fs:i,cache:a,gitdir:n}),l=await mB({fs:i,cache:a,gitdir:n,tree:o,path:r}),c=await Ha.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const x of b)if(x.path===r)return x;return null}),d=await i.lstat(Pt.join(t,r)),h=l!==null,p=c!==null,g=d!==null,v=async()=>{if(p&&!Ox(c,d))return c.oid;{const b=await i.read(Pt.join(t,r)),x=await dB({gitdir:n,type:"blob",object:b});return p&&c.oid===x&&d.size!==-1&&Ha.acquire({fs:i,gitdir:n,cache:a},async function(w){w.insert({filepath:r,stats:d,oid:x})}),x}};if(!h&&!g&&!p)return"absent";if(!h&&!g&&p)return"*absent";if(!h&&g&&!p)return"*added";if(!h&&g&&p)return await v()===c.oid?"added":"*added";if(h&&!g&&!p)return"deleted";if(h&&!g&&p)return l===c.oid,"*deleted";if(h&&g&&!p)return await v()===l?"*undeleted":"*undeletemodified";if(h&&g&&p){const b=await v();return b===l?b===c.oid?"unmodified":"*unmodified":b===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function mB({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const s of r)if(s.path===i){if(a.length===0)return s.oid;const{type:o,object:l}=await Wr({fs:e,cache:t,gitdir:n,oid:s.oid});if(o==="tree"){const c=Ji.from(l);return mB({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(o==="blob")throw new Fi(s.oid,o,"blob",a.join("/"))}return null}async function Nfe({fs:e,cache:t,gitdir:n}){let r;try{r=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof Rr)return[]}const{tree:a}=await am({fs:e,cache:t,gitdir:n,oid:r});return a}async function Rfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:s={},ignored:o=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const l=new cn(e);return await Ku({fs:l,cache:s,dir:t,gitdir:n,trees:[zs({ref:r}),Yy(),Jp()],map:async function(c,[d,h,p]){if(!d&&!p&&h&&!o&&await rm.isIgnored({fs:l,dir:t,filepath:c})||!a.some(j=>W9(c,j)))return null;if(i&&!i(c))return;const[g,v,b]=await Promise.all([d&&d.type(),h&&h.type(),p&&p.type()]),x=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!x)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!x)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!x)return;const w=g==="blob"?await d.oid():void 0,S=b==="blob"?await p.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,w,E,S],k=C.map(j=>C.indexOf(j));return k.shift(),[c,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Ife({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,force:i=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const s=new cn(e);if(r===void 0)throw new Xi("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"});if(!i&&await Ut.exists({fs:s,gitdir:n,ref:r}))throw new No("tag",r);await Ut.writeRef({fs:s,gitdir:n,ref:r,value:o})}catch(s){throw s.caller="git.tag",s}}async function jfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:s,add:o,remove:l,force:c}){try{et("fs",e),et("gitdir",n),et("filepath",a);const d=new cn(e);if(l)return await Ha.acquire({fs:d,gitdir:n,cache:r},async function(p){if(!c){const g=await d.lstat(Pt.join(t,a));if(g){if(g.isDirectory())throw new Wu("directory");return}}p.has({filepath:a})&&p.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Pt.join(t,a)),!h)throw new Rr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Wu("directory")}return await Ha.acquire({fs:d,gitdir:n,cache:r},async function(p){if(!o&&!p.has({filepath:a}))throw new Rr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await d.readlink(Pt.join(t,a)):await d.read(Pt.join(t,a));i=await es({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return p.insert({filepath:a,oid:i,stats:g}),i})}catch(d){throw d.caller="git.updateIndex",d}}function Dfe(){try{return c_.version}catch(e){throw e.caller="git.version",e}}async function Mfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),trees:r,map:a,reduce:i,iterate:s,cache:o={}}){try{return et("fs",e),et("gitdir",n),et("trees",r),await Ku({fs:new cn(e),cache:o,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function Ofe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),blob:r}){try{return et("fs",e),et("gitdir",n),et("blob",r),await es({fs:new cn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function Pfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r}){try{return et("fs",e),et("gitdir",n),et("commit",r),await fB({fs:new cn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Ffe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),type:r,object:a,format:i="parsed",oid:s,encoding:o=void 0}){try{const l=new cn(e);if(i==="parsed"){switch(r){case"commit":a=Gr.from(a).toObject();break;case"tree":a=Ji.from(a).toObject();break;case"blob":a=Qt.from(a,o);break;case"tag":a=Ni.from(a).toObject();break;default:throw new Fi(s||"",r,"blob|commit|tag|tree")}i="content"}return s=await es({fs:l,gitdir:n,type:r,object:a,oid:s,format:i}),s}catch(l){throw l.caller="git.writeObject",l}}async function Lfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:s=!1}){try{et("fs",e),et("gitdir",n),et("ref",r),et("value",a);const o=new cn(e);if(r!==sl.clean(r))throw new Eo(r,sl.clean(r));if(!i&&await Ut.exists({fs:o,gitdir:n,ref:r}))throw new No("ref",r);s?await Ut.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:a}):(a=await Ut.resolve({fs:o,gitdir:n,ref:a}),await Ut.writeRef({fs:o,gitdir:n,ref:r,value:a}))}catch(o){throw o.caller="git.writeRef",o}}async function $fe({fs:e,gitdir:t,tag:n}){const r=Ni.from(n).toObject();return await es({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Bfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tag:r}){try{return et("fs",e),et("gitdir",n),et("tag",r),await $fe({fs:new cn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function zfe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tree:r}){try{return et("fs",e),et("gitdir",n),et("tree",r),await Jy({fs:new cn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Aa={Errors:mue,STAGE:Jp,TREE:zs,WORKDIR:Yy,add:Due,abortMerge:Nue,addNote:Oue,addRemote:Pue,annotatedTag:Lue,branch:Bue,checkout:K9,clone:Jue,commit:Que,getConfig:wde,getConfigAll:_de,setConfig:bfe,currentBranch:ede,deleteBranch:nde,deleteRef:rde,deleteRemote:ide,deleteTag:ode,expandOid:dde,expandRef:fde,fastForward:gde,fetch:yde,findMergeBase:bde,findRoot:vde,getRemoteInfo:Sde,getRemoteInfo2:Ede,hashBlob:Tde,indexPack:Ade,init:Nde,isDescendent:Rde,isIgnored:Ide,listBranches:jde,listFiles:Mde,listNotes:Pde,listRefs:Fde,listRemotes:$de,listServerRefs:Ude,listTags:Vde,log:Wde,merge:Kde,packObjects:Xde,pull:Jde,push:rfe,readBlob:afe,readCommit:uB,readNote:sfe,readObject:ofe,readTag:cfe,readTree:ufe,remove:dfe,removeNote:hfe,renameBranch:mfe,resetIndex:gfe,updateIndex:jfe,resolveRef:yfe,status:Afe,statusMatrix:Rfe,tag:Ife,version:Dfe,walk:Mfe,writeBlob:Ofe,writeCommit:Pfe,writeObject:Ffe,writeRef:Lfe,writeTag:Bfe,writeTree:zfe,stash:kfe};function Ufe(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Vfe(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Ufe(e)}async function Hfe(e,t){const n=Vfe(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function qfe(e){let t=0;const n=[];await Hfe(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Gfe(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Wfe({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await qfe(a));const i=await fetch(t,{method:n,headers:r,body:a}),s=i.body&&i.body.getReader?Gfe(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[o,l]of i.headers.entries())r[o]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:s,headers:r}}var P0={request:Wfe};const F0="https://cors.isomorphic-git.org",Dp=new Map,gB=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=hr.getState();if(!n||!r)return Ge.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await Aa.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await Aa.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await Aa.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await Aa.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),Ge.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},L0=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=Dp.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return Ge.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(Dp.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(Ge.error("Authentication cancelled: Password/token not provided."),null)},$0=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),Dp.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),Dp.delete(n)),null},B0=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!Dp.has(n)&&t.username&&t.password&&(Dp.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},op=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},Kfe=async(e,t)=>{const n=Ka,r=ar(e),a=_l(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},yB=async(e,t,n,r,a)=>{var o;const i=(a==null?void 0:a.fsInstance)??Ka,s=ar(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${s}`);try{let l=!1;try{await i.promises.stat(_l(s,".git")),l=!0}catch(p){if(p.code!=="ENOENT")throw p}if(l)throw console.warn(`[VFS Git Op] Clone target ${s} already contains a .git directory.`),new Error(`Repository already cloned at ${s}.`);const c=My(s);if(c!=="/")try{await i.promises.mkdir(c,{recursive:!0})}catch(p){if(p.code!=="EEXIST")throw p}let d=n;if(!d)try{if(d=(o=(await Aa.getRemoteInfo({http:P0,url:t,corsProxy:F0,onAuth:g=>L0(g,r),onAuthFailure:$0,onAuthSuccess:B0})).HEAD)==null?void 0:o.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(p){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",p),new Error(`Failed to determine default branch: ${op(p)}`)}await Aa.clone({fs:i,http:P0,dir:s,corsProxy:F0,url:t,ref:d,singleBranch:!0,depth:10,onAuth:p=>L0(p,r),onAuthFailure:$0,onAuthSuccess:B0,onProgress:p=>{p.phase==="counting objects"&&p.total?console.log(`Clone progress: ${p.phase} ${p.loaded}/${p.total}`):p.phase==="receiving objects"&&p.total?console.log(`Clone progress: ${p.phase} ${p.loaded}/${p.total}`):console.log(`Clone progress: ${p.phase}`)}}),await i.promises.stat(_l(s,".git"));const h=await Aa.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await Aa.checkout({fs:i,dir:s,ref:d})),Ge.success(`Repository cloned successfully into ${s} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const c=op(l);if(l instanceof Error&&l.message.includes("already cloned")||Ge.error(`Git clone failed: ${c}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${s}`),await i.promises.rm(s,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},bB=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ka,r=ar(e);try{await Aa.init({fs:n,dir:r}),Ge.success(`Initialized empty Git repository in "${wa(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),Ge.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},zN=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ka,a=ar(e);try{if(!await gB(a,r))throw new Error("Git user configuration is missing or invalid.");if(await Aa.add({fs:r,dir:a,filepath:"."}),!(await Aa.statusMatrix({fs:r,dir:a})).some(([,,c])=>c!==0)){Ge.info("No changes detected to commit.");return}const l=await Aa.commit({fs:r,dir:a,message:t,author:{name:hr.getState().gitUserName,email:hr.getState().gitUserEmail}});Ge.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),Ge.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},u_=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??Ka,i=ar(e);try{if(!await gB(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const o=await Aa.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Aa.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Aa.fetch({fs:a,http:P0,dir:i,corsProxy:F0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:c=>L0(c,n),onAuthFailure:$0,onAuthSuccess:B0}),await Aa.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(c){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,c),new Error(`Failed to switch to or create local branch "${t}": ${op(c)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${op(l)}`)}}await Aa.pull({fs:a,http:P0,dir:i,ref:t,singleBranch:!0,author:{name:hr.getState().gitUserName,email:hr.getState().gitUserEmail},corsProxy:F0,onAuth:l=>L0(l,n),onAuthFailure:$0,onAuthSuccess:B0}),Ge.success(`Pulled changes successfully for "${wa(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(s){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,s),s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")?Ge.info(`Branch "${t}" is already up-to-date.`):Ge.error(`Git pull failed: ${op(s)}`),!(s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")))throw s}},UN=async(e,t,n,r)=>{var s,o;const a=(r==null?void 0:r.fsInstance)??Ka,i=ar(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await Aa.push({fs:a,http:P0,dir:i,corsProxy:F0,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:c=>L0(c,n),onAuthFailure:$0,onAuthSuccess:B0});if(l!=null&&l.ok)Ge.success(`Pushed changes successfully for "${wa(i)}"`);else if((s=l==null?void 0:l.error)!=null&&s.includes("up-to-date"))Ge.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(Ge.error(`Push rejected for "${wa(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||Ge.error(`Git push failed: ${op(l)}`),l}},vB=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ka,r=ar(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await Aa.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([s,o,l,c])=>{let d="";return c===2&&(d+="INDEX_Modified "),c===3&&(d+="INDEX_Added "),o===0&&l===2?d+="WT_New":o===1&&l===2?d+="WT_Modified":o===1&&l===0?d+="WT_Deleted":o===1&&l===1&&c===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${o} w:${l} s:${c}`),`${s}: ${d.trim()}`}).filter(s=>!s.endsWith("Unmodified")).join(`
`);Ge.info(`Git Status for "${wa(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),Ge.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},wf=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ka,r=ar(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),Ge.error(`Error creating directory "${wa(r)}": ${a instanceof Error?a.message:String(a)}`),a}},Zfe=async e=>{try{const t={backend:Jle,name:`litechat_vfs_${e}`};return await Hle(t),Ka}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),Ge.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},VN=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ka,r=ar(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await wf(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const c=_l(r,l);try{const d=await n.promises.stat(c);return{name:l,path:c,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${c}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),Ge.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},Uf=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ka,r=ar(e);try{const a=await n.promises.readFile(r);return Tt.emit(Et.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),Ge.error(`Error reading file "${wa(r)}": ${a instanceof Error?a.message:String(a)}`),a}},d_=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ka,a=ar(e),i=My(a);try{i!=="/"&&await wf(i,{fsInstance:r}),await r.promises.writeFile(a,t),Tt.emit(Et.VFS_FILE_WRITTEN,{path:a})}catch(s){throw s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,s),Ge.error(`Error writing file "${wa(a)}": ${s instanceof Error?s.message:String(s)}`)),s}},HN=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??Ka,a=ar(e);if(a==="/")throw Ge.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),Tt.emit(Et.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),Tt.emit(Et.VFS_FILE_DELETED,{path:a})),Ge.success(`"${wa(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),Ge.error(`Error deleting "${wa(a)}": ${i instanceof Error?i.message:String(i)}`),i}},wB=async(e,t)=>{await wf(e,t)},Yfe=async(e,t,n)=>{try{const r=await Uf(e,n),a=new Blob([r]),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i;const o=ar(e);s.download=t||wa(o),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||Ge.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},xB=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ka,a=ar(t);let i=0,s=0;const o=Array.from(e);try{await wf(a,{fsInstance:r});for(const l of o){const c=_l(a,l.name);try{const d=await l.arrayBuffer();await d_(c,new Uint8Array(d),{fsInstance:r}),i++}catch(d){s++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){s=o.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{s>0&&i>0?Ge.warning(`Upload complete with issues. ${i} succeeded, ${s} failed.`):s===0&&i>0&&Ge.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":wa(a)}.`)}},Xfe=async(e,t,n)=>{const r=Ka;if(!e.name.toLowerCase().endsWith(".zip")){Ge.error("Please select a valid ZIP file.");return}const a=ar(t);let i;try{await wf(a,{fsInstance:r}),i=await S9.loadAsync(e);const s=Object.values(i.files),o=await Promise.allSettled(s.map(async h=>{const p=_l(a,h.name);if(h.dir)await wf(p,{fsInstance:r});else{const g=await h.async("uint8array");await d_(p,g,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,c=0,d=0;o.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?c++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?Ge.warning(`Finished extracting "${e.name}". ${l+c} items succeeded, ${d} failed.`):Ge.success(`Successfully extracted ${l} files and ${c} folders from "${e.name}" to ${a==="/"?"root":wa(a)}.`)}catch(s){s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,s),Ge.error(`ZIP extraction failed: ${s instanceof Error?s.message:String(s)}`))}},NO=async(e,t="/",n)=>{const r=Ka,a=new S9,i=ar(t),s=wa(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){Ge.error(`Cannot export: "${s}" is not a directory.`);return}}catch(p){p instanceof Error&&p.code==="ENOENT"?Ge.error(`Cannot export: Path "${s}" not found.`):Ge.error(`Cannot export: Error accessing path "${s}". ${p instanceof Error?p.message:String(p)}`);return}const o=async(p,g)=>{const v=await VN(p,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const x=g.folder(b.name);if(x)await o(b.path,x);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const x=await Uf(b.path,{fsInstance:r});g.file(b.name,x)}};await o(i,a);const l=await a.generateAsync({type:"blob"}),c=URL.createObjectURL(l),d=document.createElement("a");d.href=c;const h=`vfs_${s}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),Ge.success(`"${s}" exported as ${d.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||Ge.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},_B=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ka,a=ar(e),i=ar(t);if(a==="/"||i==="/")throw Ge.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const s=My(i);s!=="/"&&await wf(s,{fsInstance:r}),await r.promises.rename(a,i),Ge.success(`Renamed "${wa(a)}" to "${wa(i)}"`)}catch(s){throw s instanceof Error&&s.code==="ENOENT"?s.message.includes("Error creating directory")||Ge.error(`Rename failed: Original item "${wa(a)}" not found.`):s instanceof Error&&s.code==="EEXIST"?Ge.error(`Rename failed: An item named "${wa(i)}" already exists.`):s instanceof Error&&s.message.includes("Error creating directory")||Ge.error(`Rename failed: ${s instanceof Error?s.message:String(s)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,s),s}},Jfe=1024*5,Qfe=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},RO=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},qN=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(!1),[c,d]=T.useState(!1),[h,p]=T.useState(!0),g=e.type||"application/octet-stream",v=kA(e.name,g),b=g.startsWith("image/"),x=g.startsWith("audio/"),w=g.startsWith("video/"),S=e.source==="vfs";T.useEffect(()=>{let P=null;return s(null),e.source==="direct"&&!v&&e.contentBase64?(P=Qfe(e.contentBase64,g),P||s("Failed to decode file content for preview."),a(P)):a(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>Jfe?s(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&s("Text content missing from metadata."),()=>{P&&(URL.revokeObjectURL(P),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,g,v]);const E=async()=>{if(e.source==="vfs"){Ge.info("File is already in VFS.");return}const P=RO(e);if(!P){Ge.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await xB([P],"/"),Ge.success(`"${e.name}" added to VFS root.`)}catch(L){console.error("Failed to add file to VFS:",L),Ge.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{d(!0);try{let P;if(e.source==="vfs"&&e.path){const M=await Uf(e.path);P=new Blob([M],{type:g})}else{const M=RO(e);if(!M)throw new Error("Could not reconstruct file data.");P=M}const L=URL.createObjectURL(P),H=document.createElement("a");H.href=L,H.download=e.name,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(L)}catch(P){console.error("Failed to download file:",P),Ge.error(`Download failed: ${P instanceof Error?P.message:String(P)}`)}finally{d(!1)}},k=()=>p(P=>!P),j=()=>S?m.jsx(e5,{className:"h-5 w-5 text-cyan-500"}):v?m.jsx(uY,{className:"h-5 w-5 text-blue-500"}):b?m.jsx(xA,{className:"h-5 w-5 text-purple-500"}):x?m.jsx(BY,{className:"h-5 w-5 text-green-500"}):w?m.jsx(EX,{className:"h-5 w-5 text-orange-500"}):m.jsx(lY,{className:"h-5 w-5 text-muted-foreground"}),I=()=>S?m.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?m.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[m.jsx(df,{className:"h-4 w-4"}),m.jsx("span",{children:i})]}):v&&e.contentText!==void 0?m.jsx(Ty,{lang:g==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?m.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):x&&r?m.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):w&&r?m.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):m.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),N=T.useMemo(()=>{let P="File";return S?P="VFS File":v?P="Text":b?P="Image":x?P="Audio":w&&(P="Video"),`${P} (${I0(e.size)})`},[S,v,b,x,w,e.size]);return m.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[m.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[j(),m.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),m.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",I0(e.size),")"]}),S&&e.path&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),m.jsx(Yn,{children:m.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:c,"aria-label":"Download file",children:c?m.jsx(Mn,{className:"h-3.5 w-3.5 animate-spin"}):m.jsx(of,{className:"h-3.5 w-3.5"})})}),m.jsx(Yn,{children:"Download File"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":h?"Unfold preview":"Fold preview",children:m.jsx(y1,{className:"h-3.5 w-3.5"})})}),m.jsx(Yn,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&m.jsxs(m.Fragment,{children:[e.source==="direct"&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:o,"aria-label":"Add to VFS",children:o?m.jsx(Mn,{className:"h-3.5 w-3.5 animate-spin"}):m.jsx(K8,{className:"h-3.5 w-3.5"})})}),m.jsx(Yn,{children:"Add to VFS"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:m.jsx(Ii,{className:"h-3.5 w-3.5"})})}),m.jsx(Yn,{children:"Remove from Prompt"})]})})]})]})]}),h?m.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:N}):m.jsx("div",{className:xt("p-2 max-h-80 overflow-y-auto"),children:I()})]})},ehe=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:a})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(!1),c=Ir(dn(E=>E.promptControls)),d=qn(dn(E=>E.status==="streaming")),{attachedFilesMetadata:h,clearAttachedFiles:p,removeAttachedFile:g}=mc(dn(E=>({attachedFilesMetadata:E.attachedFilesMetadata,clearAttachedFiles:E.clearAttachedFiles,removeAttachedFile:E.removeAttachedFile}))),v=T.useMemo(()=>Object.values(c).filter(E=>E.show?E.show():!0),[c]),b=T.useMemo(()=>v.filter(E=>E.renderer),[v]),x=T.useMemo(()=>v.filter(E=>E.triggerRenderer),[v]),w=T.useCallback(async()=>{var j,I;const C=(((j=a==null?void 0:a.current)==null?void 0:j.getValue())??"").trim(),k=mc.getState().attachedFilesMetadata;if(!(!C&&k.length===0)&&!(d||i)){s(!0);try{let N={},P={};for(const Z of v){if(Z.getParameters){const q=await Z.getParameters();q&&(N={...N,...q})}if(Z.getMetadata){const q=await Z.getMetadata();q&&(P={...P,...q})}}k.length>0&&(P.attachedFiles=[...k]);let L={id:ji(),content:C,parameters:N,metadata:P};Tt.emit(Et.PROMPT_SUBMITTED,{turnData:L});const H=await JT(tx.PROMPT_TURN_FINALIZE,{turnData:L});if(H===!1){console.log("Prompt submission cancelled by middleware."),s(!1);return}const M=H&&typeof H=="object"?H.turnData:L;await t(M),p(),v.forEach(Z=>{Z.clearOnSubmit&&Z.clearOnSubmit()}),(I=a.current)==null||I.clearValue(),l(!1)}catch(N){console.error("Error during prompt submission:",N),Ge.error(`Failed to send message: ${N instanceof Error?N.message:String(N)}`)}finally{s(!1)}}},[a,d,i,v,t,p]),S=T.useCallback(E=>{l(E.trim().length>0)},[]);return m.jsxs("div",{className:xt("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[b.length>0&&m.jsx(O4,{controls:b,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),h.length>0&&m.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 border rounded-md p-2 bg-muted/20 mb-2",children:h.map(E=>m.jsx(qN,{fileMeta:E,onRemove:g,isReadOnly:!1},E.id))}),m.jsxs("div",{className:"flex items-end gap-2",children:[m.jsx(e,{ref:a,onSubmit:w,disabled:d||i,placeholder:r,onValueChange:S,className:"flex-grow"}),m.jsx(It,{type:"button",size:"icon",onClick:w,disabled:d||i||!o&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(nX,{className:"h-4 w-4"})})]}),m.jsx(O4,{controls:x,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})},SB=6048e5,the=864e5,yw=43200,IO=1440,jO=Symbol.for("constructDateFrom");function _c(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&jO in e?e[jO](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ga(e,t){return _c(t||e,e)}let nhe={};function eb(){return nhe}function z0(e,t){var o,l,c,d;const n=eb(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,a=Ga(e,t==null?void 0:t.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function Hx(e,t){return z0(e,{...t,weekStartsOn:1})}function EB(e,t){const n=Ga(e,t==null?void 0:t.in),r=n.getFullYear(),a=_c(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Hx(a),s=_c(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Hx(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function qx(e){const t=Ga(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function f_(e,...t){const n=_c.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function DO(e,t){const n=Ga(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function rhe(e,t,n){const[r,a]=f_(n==null?void 0:n.in,e,t),i=DO(r),s=DO(a),o=+i-qx(i),l=+s-qx(s);return Math.round((o-l)/the)}function ahe(e,t){const n=EB(e,t),r=_c(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Hx(r)}function Uw(e,t){const n=+Ga(e)-+Ga(t);return n<0?-1:n>0?1:n}function ihe(e){return _c(e,Date.now())}function she(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ohe(e){return!(!she(e)&&typeof e!="number"||isNaN(+Ga(e)))}function lhe(e,t,n){const[r,a]=f_(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function che(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function uhe(e,t){return+Ga(e)-+Ga(t)}function dhe(e,t){const n=Ga(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function fhe(e,t){const n=Ga(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function hhe(e,t){const n=Ga(e,t==null?void 0:t.in);return+dhe(n,t)==+fhe(n,t)}function phe(e,t,n){const[r,a,i]=f_(n==null?void 0:n.in,e,e,t),s=Uw(a,i),o=Math.abs(lhe(a,i));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*o);let l=Uw(a,i)===-s;hhe(r)&&o===1&&Uw(r,i)===1&&(l=!1);const c=s*(o-+l);return c===0?0:c}function mhe(e,t,n){const r=uhe(e,t)/1e3;return che(n==null?void 0:n.roundingMethod)(r)}function ghe(e,t){const n=Ga(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const yhe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},bhe=(e,t,n)=>{let r;const a=yhe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function TC(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const vhe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},whe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xhe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_he={date:TC({formats:vhe,defaultWidth:"full"}),time:TC({formats:whe,defaultWidth:"full"}),dateTime:TC({formats:xhe,defaultWidth:"full"})},She={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ehe=(e,t,n,r)=>She[e];function Ng(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Che={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},The={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},khe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ahe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Nhe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rhe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ihe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},jhe={ordinalNumber:Ihe,era:Ng({values:Che,defaultWidth:"wide"}),quarter:Ng({values:The,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ng({values:khe,defaultWidth:"wide"}),day:Ng({values:Ahe,defaultWidth:"wide"}),dayPeriod:Ng({values:Nhe,defaultWidth:"wide",formattingValues:Rhe,defaultFormattingWidth:"wide"})};function Rg(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?Mhe(o,h=>h.test(s)):Dhe(o,h=>h.test(s));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=t.slice(s.length);return{value:c,rest:d}}}function Dhe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Mhe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Ohe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const Phe=/^(\d+)(th|st|nd|rd)?/i,Fhe=/\d+/i,Lhe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$he={any:[/^b/i,/^(a|c)/i]},Bhe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zhe={any:[/1/i,/2/i,/3/i,/4/i]},Uhe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Vhe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Hhe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qhe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ghe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Whe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Khe={ordinalNumber:Ohe({matchPattern:Phe,parsePattern:Fhe,valueCallback:e=>parseInt(e,10)}),era:Rg({matchPatterns:Lhe,defaultMatchWidth:"wide",parsePatterns:$he,defaultParseWidth:"any"}),quarter:Rg({matchPatterns:Bhe,defaultMatchWidth:"wide",parsePatterns:zhe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Rg({matchPatterns:Uhe,defaultMatchWidth:"wide",parsePatterns:Vhe,defaultParseWidth:"any"}),day:Rg({matchPatterns:Hhe,defaultMatchWidth:"wide",parsePatterns:qhe,defaultParseWidth:"any"}),dayPeriod:Rg({matchPatterns:Ghe,defaultMatchWidth:"any",parsePatterns:Whe,defaultParseWidth:"any"})},CB={code:"en-US",formatDistance:bhe,formatLong:_he,formatRelative:Ehe,localize:jhe,match:Khe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Zhe(e,t){const n=Ga(e,t==null?void 0:t.in);return rhe(n,ghe(n))+1}function Yhe(e,t){const n=Ga(e,t==null?void 0:t.in),r=+Hx(n)-+ahe(n);return Math.round(r/SB)+1}function TB(e,t){var d,h,p,g;const n=Ga(e,t==null?void 0:t.in),r=n.getFullYear(),a=eb(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(p=a.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,s=_c((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const o=z0(s,t),l=_c((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=z0(l,t);return+n>=+o?r+1:+n>=+c?r:r-1}function Xhe(e,t){var o,l,c,d;const n=eb(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,a=TB(e,t),i=_c((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),z0(i,t)}function Jhe(e,t){const n=Ga(e,t==null?void 0:t.in),r=+z0(n,t)-+Xhe(n,t);return Math.round(r/SB)+1}function wr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const vu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return wr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):wr(n+1,2)},d(e,t){return wr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return wr(e.getHours()%12||12,t.length)},H(e,t){return wr(e.getHours(),t.length)},m(e,t){return wr(e.getMinutes(),t.length)},s(e,t){return wr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return wr(a,t.length)}},Lh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},MO={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return vu.y(e,t)},Y:function(e,t,n,r){const a=TB(e,r),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return wr(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):wr(i,t.length)},R:function(e,t){const n=EB(e);return wr(n,t.length)},u:function(e,t){const n=e.getFullYear();return wr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return wr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return wr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return vu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return wr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Jhe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):wr(a,t.length)},I:function(e,t,n){const r=Yhe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):wr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):vu.d(e,t)},D:function(e,t,n){const r=Zhe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):wr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return wr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return wr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return wr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Lh.noon:r===0?a=Lh.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Lh.evening:r>=12?a=Lh.afternoon:r>=4?a=Lh.morning:a=Lh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return vu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):vu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):wr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):wr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):vu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):vu.s(e,t)},S:function(e,t){return vu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return PO(r);case"XXXX":case"XX":return Gd(r);case"XXXXX":case"XXX":default:return Gd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return PO(r);case"xxxx":case"xx":return Gd(r);case"xxxxx":case"xxx":default:return Gd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+OO(r,":");case"OOOO":default:return"GMT"+Gd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+OO(r,":");case"zzzz":default:return"GMT"+Gd(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return wr(r,t.length)},T:function(e,t,n){return wr(+e,t.length)}};function OO(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+wr(i,2)}function PO(e,t){return e%60===0?(e>0?"-":"+")+wr(Math.abs(e)/60,2):Gd(e,t)}function Gd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=wr(Math.trunc(r/60),2),i=wr(r%60,2);return n+a+t+i}const FO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},kB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Qhe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return FO(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",FO(r,t)).replace("{{time}}",kB(a,t))},epe={p:kB,P:Qhe},tpe=/^D+$/,npe=/^Y+$/,rpe=["D","DD","YY","YYYY"];function ape(e){return tpe.test(e)}function ipe(e){return npe.test(e)}function spe(e,t,n){const r=ope(e,t,n);if(console.warn(r),rpe.includes(e))throw new RangeError(r)}function ope(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lpe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cpe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,upe=/^'([^]*?)'?$/,dpe=/''/g,fpe=/[a-zA-Z]/;function bk(e,t,n){var d,h,p,g;const r=eb(),a=r.locale??CB,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,o=Ga(e,n==null?void 0:n.in);if(!ohe(o))throw new RangeError("Invalid time value");let l=t.match(cpe).map(v=>{const b=v[0];if(b==="p"||b==="P"){const x=epe[b];return x(v,a.formatLong)}return v}).join("").match(lpe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:hpe(v)};if(MO[b])return{isToken:!0,value:v};if(b.match(fpe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(ipe(b)||ape(b))&&spe(b,t,String(e));const x=MO[b[0]];return x(o,b,a.localize,c)}).join("")}function hpe(e){const t=e.match(upe);return t?t[1].replace(dpe,"'"):e}function ppe(e,t,n){const r=eb(),a=(n==null?void 0:n.locale)??r.locale??CB,i=2520,s=Uw(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,c]=f_(n==null?void 0:n.in,...s>0?[t,e]:[e,t]),d=mhe(c,l),h=(qx(c)-qx(l))/1e3,p=Math.round((d-h)/60);let g;if(p<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):p===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",p,o);if(p<45)return a.formatDistance("xMinutes",p,o);if(p<90)return a.formatDistance("aboutXHours",1,o);if(p<IO){const v=Math.round(p/60);return a.formatDistance("aboutXHours",v,o)}else{if(p<i)return a.formatDistance("xDays",1,o);if(p<yw){const v=Math.round(p/IO);return a.formatDistance("xDays",v,o)}else if(p<yw*2)return g=Math.round(p/yw),a.formatDistance("aboutXMonths",g,o)}if(g=phe(c,l),g<12){const v=Math.round(p/yw);return a.formatDistance("xMonths",v,o)}else{const v=g%12,b=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",b,o):v<9?a.formatDistance("overXYears",b,o):a.formatDistance("almostXYears",b+1,o)}}function AB(e,t){return ppe(e,ihe(e),t)}const On=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:s="ghost",size:o="icon",className:l,"aria-label":c,...d})=>{const h=typeof t=="function";return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:s,size:o,onClick:a,disabled:i,className:xt("h-6 w-6",l),"aria-label":c,...d,children:h?m.jsx(t,{className:xt("h-3.5 w-3.5",n)}):t})}),m.jsx(Yn,{side:r,children:m.jsx("p",{children:e})})]})})},GN=gt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var v,b,x;const a=hr(w=>w.foldUserMessagesOnCompletion),[i,s]=T.useState(r&&a),[o,l]=T.useState(!1);T.useEffect(()=>{r&&a&&s(!0)},[r,a]);const c=t?AB(new Date(t),{addSuffix:!0}):"Sending...",d=((v=e.metadata)==null?void 0:v.attachedFiles)&&e.metadata.attachedFiles.length>0,h=e.content&&e.content.trim().length>0,p=T.useCallback(()=>s(w=>!w),[]),g=T.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),Ge.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(w){Ge.error("Failed to copy prompt."),console.error("Clipboard copy failed:",w)}},[e.content]);return m.jsxs("div",{className:xt("user-prompt relative group/user overflow-wrap-anywhere",n),children:[m.jsxs("div",{className:xt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[m.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[m.jsx(xX,{className:"h-4 w-4 text-primary flex-shrink-0"}),m.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),m.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[h&&m.jsx(On,{tooltipText:"Copy Prompt",onClick:g,"aria-label":"Copy user prompt",icon:o?m.jsx(Ri,{className:"text-green-500"}):m.jsx(bA,{}),className:"h-5 w-5"}),(h||d)&&m.jsx(On,{tooltipText:i?"Unfold":"Fold",onClick:p,"aria-label":i?"Unfold prompt":"Fold prompt",icon:i?m.jsx(kc,{}):m.jsx(Cf,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),m.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:m.jsx("span",{className:"text-xs text-muted-foreground",children:c})})]}),!i&&m.jsxs(m.Fragment,{children:[d&&m.jsx("div",{className:"mb-2 space-y-1",children:(b=e.metadata.attachedFiles)==null?void 0:b.map(w=>m.jsx(qN,{fileMeta:w,isReadOnly:!0},w.id))}),h&&m.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]}),i&&m.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:p,children:[h?`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`:"",h&&d?" + ":"",d?`${(x=e.metadata.attachedFiles)==null?void 0:x.length} file(s)`:""]})]})});GN.displayName="UserPromptDisplay";const LO=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,mpe=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i,promptTokens:s,completionTokens:o,timeToFirstToken:l,generationTime:c})=>{const[d,h]=T.useState(!1),p=T.useCallback(async()=>{if(!n||typeof n!="string"){Ge.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),h(!0),Ge.success("Assistant response copied!"),setTimeout(()=>h(!1),1500)}catch(v){Ge.error("Failed to copy response."),console.error("Clipboard copy failed:",v)}},[n]),g=s!==void 0&&o!==void 0?s+o:void 0;return m.jsxs("div",{className:xt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[m.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[m.jsx(AZ,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),m.jsxs("div",{className:"flex flex-col min-w-0",children:[m.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),m.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[g!==void 0&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[m.jsx(WZ,{className:"h-3 w-3"}),m.jsx("span",{children:g.toLocaleString()})]}),m.jsxs(Yn,{side:"bottom",children:["Tokens: ",s??"?"," (Prompt) +"," ",o??"?"," (Completion) = ",g]})]})}),l!==void 0&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[m.jsx(AX,{className:"h-3 w-3"}),m.jsx("span",{children:LO(l)})]}),m.jsx(Yn,{side:"bottom",children:"Time to First Token"})]})}),c!==void 0&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[m.jsx(zZ,{className:"h-3 w-3"}),m.jsx("span",{children:LO(c)})]}),m.jsx(Yn,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),m.jsxs("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:[m.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t}),m.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[n&&typeof n=="string"&&m.jsx(On,{tooltipText:"Copy Response",onClick:p,"aria-label":"Copy assistant response",icon:d?m.jsx(Ri,{className:"text-green-500"}):m.jsx(bA,{}),className:"h-5 w-5"}),i&&m.jsx(On,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?m.jsx(kc,{}):m.jsx(Cf,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]})]})},gpe=({interactionId:e,currentRating:t})=>{const n=qn(i=>i.rateInteraction),r=i=>{n(e,i===t?null:i)},a=Array.from({length:11},(i,s)=>s-5);return m.jsx("div",{className:"flex items-center gap-1",children:a.map(i=>{let s="";i===-5?s="Terrible":i===-4?s="Very Bad":i===-3?s="Bad":i===-2?s="Poor":i===-1?s="Below Average":i===0?s="Neutral":i===1?s="Above Average":i===2?s="Good":i===3?s="Very Good":i===4?s="Excellent":i===5&&(s="Perfect");let o="text-muted-foreground",l="hover:text-foreground",c="";i<0?(l="hover:text-red-500",t===i&&(o="text-red-500",c="fill-red-500")):i===0?(l="hover:text-gray-500",t===i&&(o="text-gray-500",c="fill-gray-500")):(l="hover:text-green-500",t===i&&(o="text-green-500",c="fill-green-500"));const d=t===i?"bg-muted":"";return m.jsx(On,{tooltipText:s,onClick:()=>r(i),"aria-label":`Rate response as ${s}`,icon:m.jsx(fX,{className:xt(c,t===i?"fill-current":"fill-none")}),variant:"ghost",className:xt("h-4 w-4 md:h-5 md:w-5 p-0",o,l,d)},i)})})},ype=({interaction:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},i=()=>{t&&t(e.id)},s=()=>{r&&r(e.id)};return m.jsxs("div",{className:xt("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[m.jsx(gpe,{interactionId:e.id,currentRating:e.rating}),r&&m.jsx(On,{tooltipText:"Edit",onClick:s,"aria-label":"Edit User Prompt",icon:m.jsx(qg,{}),className:"h-5 w-5 md:h-6 md:w-6"}),t&&m.jsx(On,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:m.jsx(b1,{}),className:"h-5 w-5 md:h-6 md:w-6"}),n&&m.jsx(On,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:m.jsx(Zi,{}),className:"h-5 w-5 md:h-6 md:w-6 text-destructive hover:text-destructive/80"})]})},$O={};function bpe(e){let t=$O[e];if(t)return t;t=$O[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Mp(e,t){typeof t!="string"&&(t=Mp.defaultChars);const n=bpe(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,s=r.length;i<s;i+=3){const o=parseInt(r.slice(i+1,i+3),16);if(o<128){a+=n[o];continue}if((o&224)===192&&i+3<s){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const c=o<<6&1984|l&63;c<128?a+="":a+=String.fromCharCode(c),i+=3;continue}}if((o&240)===224&&i+6<s){const l=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(c&192)===128){const d=o<<12&61440|l<<6&4032|c&63;d<2048||d>=55296&&d<=57343?a+="":a+=String.fromCharCode(d),i+=6;continue}}if((o&248)===240&&i+9<s){const l=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(c&192)===128&&(d&192)===128){let h=o<<18&1835008|l<<12&258048|c<<6&4032|d&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Mp.defaultChars=";/?:@&=+$,#";Mp.componentChars="";const BO={};function vpe(e){let t=BO[e];if(t)return t;t=BO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function tb(e,t,n){typeof t!="string"&&(n=t,t=tb.defaultChars),typeof n>"u"&&(n=!0);const r=vpe(t);let a="";for(let i=0,s=e.length;i<s;i++){const o=e.charCodeAt(i);if(n&&o===37&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(o<128){a+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<s){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}tb.defaultChars=";/?:@&=+$,-_.!~*'()#";tb.componentChars="-_.!~*'()";function WN(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Gx(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const wpe=/^([a-z0-9.+-]+:)/i,xpe=/:[0-9]*$/,_pe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Spe=["<",">",'"',"`"," ","\r",`
`,"	"],Epe=["{","}","|","\\","^","`"].concat(Spe),Cpe=["'"].concat(Epe),zO=["%","/","?",";","#"].concat(Cpe),UO=["/","?","#"],Tpe=255,VO=/^[+a-z0-9A-Z_-]{0,63}$/,kpe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,HO={javascript:!0,"javascript:":!0},qO={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function KN(e,t){if(e&&e instanceof Gx)return e;const n=new Gx;return n.parse(e,t),n}Gx.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=_pe.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let s=wpe.exec(i);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,i=i.substr(s.length)),(t||s||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(s&&HO[s])&&(i=i.substr(2),this.slashes=!0)),!HO[s]&&(a||s&&!qO[s])){let c=-1;for(let v=0;v<UO.length;v++)r=i.indexOf(UO[v]),r!==-1&&(c===-1||r<c)&&(c=r);let d,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),c=-1;for(let v=0;v<zO.length;v++)r=i.indexOf(zO[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const p=i.slice(0,c);i=i.slice(c),this.parseHost(p),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,x=v.length;b<x;b++){const w=v[b];if(w&&!w.match(VO)){let S="";for(let E=0,C=w.length;E<C;E++)w.charCodeAt(E)>127?S+="x":S+=w[E];if(!S.match(VO)){const E=v.slice(0,b),C=v.slice(b+1),k=w.match(kpe);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>Tpe&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),qO[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Gx.prototype.parseHost=function(e){let t=xpe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Ape=Object.freeze(Object.defineProperty({__proto__:null,decode:Mp,encode:tb,format:WN,parse:KN},Symbol.toStringTag,{value:"Module"})),NB=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,RB=/[\0-\x1F\x7F-\x9F]/,Npe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,ZN=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,IB=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,jB=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Rpe=Object.freeze(Object.defineProperty({__proto__:null,Any:NB,Cc:RB,Cf:Npe,P:ZN,S:IB,Z:jB},Symbol.toStringTag,{value:"Module"})),Ipe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),jpe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var kC;const Dpe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Mpe=(kC=String.fromCodePoint)!==null&&kC!==void 0?kC:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Ope(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Dpe.get(e))!==null&&t!==void 0?t:e}var Ua;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ua||(Ua={}));const Ppe=32;var Au;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Au||(Au={}));function vk(e){return e>=Ua.ZERO&&e<=Ua.NINE}function Fpe(e){return e>=Ua.UPPER_A&&e<=Ua.UPPER_F||e>=Ua.LOWER_A&&e<=Ua.LOWER_F}function Lpe(e){return e>=Ua.UPPER_A&&e<=Ua.UPPER_Z||e>=Ua.LOWER_A&&e<=Ua.LOWER_Z||vk(e)}function $pe(e){return e===Ua.EQUALS||Lpe(e)}var La;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(La||(La={}));var Eu;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Eu||(Eu={}));class Bpe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=La.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Eu.Strict}startEntity(t){this.decodeMode=t,this.state=La.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case La.EntityStart:return t.charCodeAt(n)===Ua.NUM?(this.state=La.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=La.NamedEntity,this.stateNamedEntity(t,n));case La.NumericStart:return this.stateNumericStart(t,n);case La.NumericDecimal:return this.stateNumericDecimal(t,n);case La.NumericHex:return this.stateNumericHex(t,n);case La.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Ppe)===Ua.LOWER_X?(this.state=La.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=La.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(vk(a)||Fpe(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(vk(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ua.SEMI)this.consumed+=1;else if(this.decodeMode===Eu.Strict)return 0;return this.emitCodePoint(Ope(this.result),this.consumed),this.errors&&(t!==Ua.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Au.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=zpe(r,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===Eu.Attribute&&(i===0||$pe(s))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Au.VALUE_LENGTH)>>14,i!==0){if(s===Ua.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Eu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Au.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Au.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case La.NamedEntity:return this.result!==0&&(this.decodeMode!==Eu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case La.NumericDecimal:return this.emitNumericEntity(0,2);case La.NumericHex:return this.emitNumericEntity(0,3);case La.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case La.EntityStart:return 0}}}function DB(e){let t="";const n=new Bpe(e,r=>t+=Mpe(r));return function(a,i){let s=0,o=0;for(;(o=a.indexOf("&",o))>=0;){t+=a.slice(s,o),n.startEntity(i);const c=n.write(a,o+1);if(c<0){s=o+n.end();break}s=o+c,o=c===0?s+1:s}const l=t+a.slice(s);return t="",l}}function zpe(e,t,n,r){const a=(t&Au.BRANCH_LENGTH)>>7,i=t&Au.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let s=n,o=s+a-1;for(;s<=o;){const l=s+o>>>1,c=e[l];if(c<r)s=l+1;else if(c>r)o=l-1;else return e[l+a]}return-1}const Upe=DB(Ipe);DB(jpe);function MB(e,t=Eu.Legacy){return Upe(e,t)}function Vpe(e){return Object.prototype.toString.call(e)}function YN(e){return Vpe(e)==="[object String]"}const Hpe=Object.prototype.hasOwnProperty;function qpe(e,t){return Hpe.call(e,t)}function h_(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function OB(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function XN(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Wx(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const PB=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Gpe=/&([a-z#][a-z0-9]{1,31});/gi,Wpe=new RegExp(PB.source+"|"+Gpe.source,"gi"),Kpe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Zpe(e,t){if(t.charCodeAt(0)===35&&Kpe.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return XN(r)?Wx(r):e}const n=MB(e);return n!==e?n:e}function Ype(e){return e.indexOf("\\")<0?e:e.replace(PB,"$1")}function Op(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Wpe,function(t,n,r){return n||Zpe(t,r)})}const Xpe=/[&<>"]/,Jpe=/[&<>"]/g,Qpe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function eme(e){return Qpe[e]}function Yu(e){return Xpe.test(e)?e.replace(Jpe,eme):e}const tme=/[.?*+^$[\]\\(){}|-]/g;function nme(e){return e.replace(tme,"\\$&")}function $r(e){switch(e){case 9:case 32:return!0}return!1}function U0(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function V0(e){return ZN.test(e)||IB.test(e)}function H0(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function p_(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const rme={mdurl:Ape,ucmicro:Rpe},ame=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:OB,assign:h_,escapeHtml:Yu,escapeRE:nme,fromCodePoint:Wx,has:qpe,isMdAsciiPunct:H0,isPunctChar:V0,isSpace:$r,isString:YN,isValidEntityCode:XN,isWhiteSpace:U0,lib:rme,normalizeReference:p_,unescapeAll:Op,unescapeMd:Ype},Symbol.toStringTag,{value:"Module"}));function ime(e,t,n){let r,a,i,s;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(s=e.pos,e.md.inline.skipToken(e),i===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return a&&(c=e.pos),e.pos=l,c}function sme(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Op(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let s=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(s++,s>32))return i;if(r===41){if(s===0)break;s--}a++}return t===a||s!==0||(i.str=Op(e.slice(t,a)),i.pos=a,i.ok=!0),i}function ome(e,t,n,r){let a,i=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(i>=n)return s;let o=e.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return s;t++,i++,o===40&&(o=41),s.marker=o}for(;i<n;){if(a=e.charCodeAt(i),a===s.marker)return s.pos=i+1,s.str+=Op(e.slice(t,i)),s.ok=!0,s;if(a===40&&s.marker===41)return s;a===92&&i+1<n&&i++,i++}return s.can_continue=!0,s.str+=Op(e.slice(t,i)),s}const lme=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:sme,parseLinkLabel:ime,parseLinkTitle:ome},Symbol.toStringTag,{value:"Module"})),Cl={};Cl.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Yu(i.content)+"</code>"};Cl.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Yu(e[t].content)+`</code></pre>
`};Cl.fence=function(e,t,n,r,a){const i=e[t],s=i.info?Op(i.info).trim():"";let o="",l="";if(s){const d=s.split(/(\s+)/g);o=d[0],l=d.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,o,l)||Yu(i.content):c=Yu(i.content),c.indexOf("<pre")===0)return c+`
`;if(s){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+o]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+o);const p={attrs:h};return`<pre><code${a.renderAttrs(p)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};Cl.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Cl.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Cl.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Cl.text=function(e,t){return Yu(e[t].content)};Cl.html_block=function(e,t){return e[t].content};Cl.html_inline=function(e,t){return e[t].content};function im(){this.rules=h_({},Cl)}im.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Yu(t.attrs[n][0])+'="'+Yu(t.attrs[n][1])+'"';return a};im.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let s=!1;if(a.block&&(s=!0,a.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1)}return i+=s?`>
`:">",i};im.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};im.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};im.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;o==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Qi(){this.__rules__=[],this.__cache__=null}Qi.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Qi.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Qi.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Qi.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Qi.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Qi.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Qi.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Qi.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Qi.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Qi.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Ro(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Ro.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};Ro.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Ro.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};Ro.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Ro.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function FB(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}FB.prototype.Token=Ro;const cme=/\r\n?|\n/g,ume=/\0/g;function dme(e){let t;t=e.src.replace(cme,`
`),t=t.replace(ume,""),e.src=t}function fme(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function hme(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function pme(e){return/^<a[>\s]/i.test(e)}function mme(e){return/^<\/a\s*>/i.test(e)}function gme(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let s=a.length-1;s>=0;s--){const o=a[s];if(o.type==="link_close"){for(s--;a[s].level!==o.level&&a[s].type!=="link_open";)s--;continue}if(o.type==="html_inline"&&(pme(o.content)&&i>0&&i--,mme(o.content)&&i++),!(i>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let c=e.md.linkify.match(l);const d=[];let h=o.level,p=0;c.length>0&&c[0].index===0&&s>0&&a[s-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let x=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(x)?x=e.md.normalizeLinkText("mailto:"+x).replace(/^mailto:/,""):x=e.md.normalizeLinkText(x):x=e.md.normalizeLinkText("http://"+x).replace(/^http:\/\//,"");const w=c[g].index;if(w>p){const k=new e.Token("text","",0);k.content=l.slice(p,w),k.level=h,d.push(k)}const S=new e.Token("link_open","a",1);S.attrs=[["href",b]],S.level=h++,S.markup="linkify",S.info="auto",d.push(S);const E=new e.Token("text","",0);E.content=x,E.level=h,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",d.push(C),p=c[g].lastIndex}if(p<l.length){const g=new e.Token("text","",0);g.content=l.slice(p),g.level=h,d.push(g)}t[n].children=a=OB(a,s,d)}}}}const LB=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,yme=/\((c|tm|r)\)/i,bme=/\((c|tm|r)\)/ig,vme={c:"",r:"",tm:""};function wme(e,t){return vme[t.toLowerCase()]}function xme(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(bme,wme)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function _me(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&LB.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Sme(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(yme.test(e.tokens[t].content)&&xme(e.tokens[t].children),LB.test(e.tokens[t].content)&&_me(e.tokens[t].children))}const Eme=/['"]/,GO=/['"]/g,WO="";function bw(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Cme(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],s=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,i.type!=="text")continue;let o=i.content,l=0,c=o.length;e:for(;l<c;){GO.lastIndex=l;const d=GO.exec(o);if(!d)break;let h=!0,p=!0;l=d.index+1;const g=d[0]==="'";let v=32;if(d.index-1>=0)v=o.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<c)b=o.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const x=H0(v)||V0(String.fromCharCode(v)),w=H0(b)||V0(String.fromCharCode(b)),S=U0(v),E=U0(b);if(E?h=!1:w&&(S||x||(h=!1)),S?p=!1:x&&(E||w||(p=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(p=h=!1),h&&p&&(h=x,p=w),!h&&!p){g&&(i.content=bw(i.content,d.index,WO));continue}if(p)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<s)break;if(C.single===g&&r[n].level===s){C=r[n];let k,j;g?(k=t.md.options.quotes[2],j=t.md.options.quotes[3]):(k=t.md.options.quotes[0],j=t.md.options.quotes[1]),i.content=bw(i.content,d.index,j),e[C.token].content=bw(e[C.token].content,C.pos,k),l+=j.length-1,C.token===a&&(l+=k.length-1),o=i.content,c=o.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:g,level:s}):p&&g&&(i.content=bw(i.content,d.index,WO))}}}function Tme(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Eme.test(e.tokens[t].content)||Cme(e.tokens[t].children,e)}function kme(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const s=r[i].children,o=s.length;for(t=0;t<o;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<o;t++)s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const AC=[["normalize",dme],["block",fme],["inline",hme],["linkify",gme],["replacements",Sme],["smartquotes",Tme],["text_join",kme]];function JN(){this.ruler=new Qi;for(let e=0;e<AC.length;e++)this.ruler.push(AC[e][0],AC[e][1])}JN.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};JN.prototype.State=FB;function Tl(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,s=0,o=0,l=0,c=a.length,d=!1;s<c;s++){const h=a.charCodeAt(s);if(!d)if($r(h)){o++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||s===c-1)&&(h!==10&&s++,this.bMarks.push(i),this.eMarks.push(s),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),d=!1,o=0,l=0,i=s+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Tl.prototype.push=function(e,t,n){const r=new Ro(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Tl.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Tl.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Tl.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!$r(r))break}return t};Tl.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!$r(this.src.charCodeAt(--t)))return t+1;return t};Tl.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Tl.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Tl.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let s=0,o=t;o<n;o++,s++){let l=0;const c=this.bMarks[o];let d=c,h;for(o+1<n||a?h=this.eMarks[o]+1:h=this.eMarks[o];d<h&&l<r;){const p=this.src.charCodeAt(d);if($r(p))p===9?l+=4-(l+this.bsCount[o])%4:l++;else if(d-c<this.tShift[o])l++;else break;d++}l>r?i[s]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[s]=this.src.slice(d,h)}return i.join("")};Tl.prototype.Token=Ro;const Ame=65536;function NC(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function KO(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,s=0,o="";for(;r<n;)a===124&&(i?(o+=e.substring(s,r-1),s=r):(t.push(o+e.substring(s,r)),o="",s=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(o+e.substring(s)),t}function Nme(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58||i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!$r(o)||s===45&&$r(o))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!$r(C))return!1;i++}let l=NC(e,t+1),c=l.split("|");const d=[];for(let C=0;C<c.length;C++){const k=c[C].trim();if(!k){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=NC(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=KO(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==d.length)return!1;if(r)return!0;const p=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const x=e.push("thead_open","thead",1);x.map=[t,t+1];const w=e.push("tr_open","tr",1);w.map=[t,t+1];for(let C=0;C<c.length;C++){const k=e.push("th_open","th",1);d[C]&&(k.attrs=[["style","text-align:"+d[C]]]);const j=e.push("inline","",0);j.content=c[C].trim(),j.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let j=0,I=g.length;j<I;j++)if(g[j](e,a,n,!0)){C=!0;break}if(C||(l=NC(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(c=KO(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>Ame))break;if(a===t+2){const j=e.push("tbody_open","tbody",1);j.map=S=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let j=0;j<h;j++){const I=e.push("td_open","td",1);d[j]&&(I.attrs=[["style","text-align:"+d[j]]]);const N=e.push("inline","",0);N.content=c[j]?c[j].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=p,e.line=a,!0}function Rme(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function Ime(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const s=e.src.charCodeAt(a);if(s!==126&&s!==96)return!1;let o=a;a=e.skipChars(a,s);let l=a-o;if(l<3)return!1;const c=e.src.slice(o,a),d=e.src.slice(a,i);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=t,p=!1;for(;h++,!(h>=n||(a=o=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===s&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,s),!(a-o<l)&&(a=e.skipSpaces(a),!(a<i)))){p=!0;break}l=e.sCount[t],e.line=h+(p?1:0);const g=e.push("fence","code",0);return g.info=d,g.content=e.getLines(t+1,h,l,!0),g.markup=c,g.map=[t,e.line],!0}function jme(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const o=[],l=[],c=[],d=[],h=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,j,I;e.src.charCodeAt(a)===32?(a++,k++,I=!1,j=!0):e.src.charCodeAt(a)===9?(j=!0,(e.bsCount[v]+k)%4===3?(a++,k++,I=!1):I=!0):j=!1;let N=k;for(o.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const P=e.src.charCodeAt(a);if($r(P))P===9?N+=4-(N+e.bsCount[v]+(I?1:0))%4:N++;else break;a++}g=a>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(j?1:0),c.push(e.sCount[v]),e.sCount[v]=N-k,d.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let k=0,j=h.length;k<j;k++)if(h[k](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const x=e.push("blockquote_open","blockquote",1);x.markup=">";const w=[t,0];x.map=w,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=s,e.parentType=p,w[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=d[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function Dme(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(i++);if(s!==42&&s!==45&&s!==95)return!1;let o=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==s&&!$r(c))return!1;c===s&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(s)),!0}function ZO(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!$r(i))return-1}return r}function YO(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!$r(i))?-1:a}function Mme(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function Ome(e,t,n,r){let a,i,s,o,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,p,g;if((g=YO(e,l))>=0){if(h=!0,s=e.bMarks[l]+e.tShift[l],p=Number(e.src.slice(s,g-1)),d&&p!==1)return!1}else if((g=ZO(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(g)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(o=e.push("ordered_list_open","ol",1),p!==1&&(o.attrs=[["start",p]])):o=e.push("bullet_list_open","ul",1);const x=[l,0];o.map=x,o.markup=String.fromCharCode(v);let w=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=g,a=e.eMarks[l];const C=e.sCount[l]+g-(e.bMarks[l]+e.tShift[l]);let k=C;for(;i<a;){const ue=e.src.charCodeAt(i);if(ue===9)k+=4-(k+e.bsCount[l])%4;else if(ue===32)k++;else break;i++}const j=i;let I;j>=a?I=1:I=k-C,I>4&&(I=1);const N=C+I;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(v);const P=[l,0];o.map=P,h&&(o.info=e.src.slice(s,g-1));const L=e.tight,H=e.tShift[l],M=e.sCount[l],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[l]=j-e.bMarks[l],e.sCount[l]=k,j>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||w)&&(c=!1),w=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[l]=H,e.sCount[l]=M,e.tight=L,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(v),l=e.line,P[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let q=!1;for(let ue=0,ae=S.length;ue<ae;ue++)if(S[ue](e,l,n,!0)){q=!0;break}if(q)break;if(h){if(g=YO(e,l),g<0)break;s=e.bMarks[l]+e.tShift[l]}else if(g=ZO(e,l),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(v),x[1]=l,e.line=l,e.parentType=E,c&&Mme(e,b),!0}function Pme(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function o(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const I=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let P=!1;for(let L=0,H=I.length;L<H;L++)if(I[L](e,S,E,!0)){P=!0;break}if(e.parentType=N,P)return null}const k=e.bMarks[S]+e.tShift[S],j=e.eMarks[S];return e.src.slice(k,j+1)}let l=e.src.slice(a,i+1);i=l.length;let c=-1;for(a=1;a<i;a++){const S=l.charCodeAt(a);if(S===91)return!1;if(S===93){c=a;break}else if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(S===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}}if(c<0||l.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!$r(S))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const p=a,g=s,v=a;for(;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!$r(S))break}let b=e.md.helpers.parseLinkTitle(l,a,i);for(;b.can_continue;){const S=o(s);if(S===null)break;l+=S,a=i,i=l.length,s++,b=e.md.helpers.parseLinkTitle(l,a,i,b)}let x;for(a<i&&v!==a&&b.ok?(x=b.str,a=b.pos):(x="",a=p,s=g);a<i;){const S=l.charCodeAt(a);if(!$r(S))break;a++}if(a<i&&l.charCodeAt(a)!==10&&x)for(x="",a=p,s=g;a<i;){const S=l.charCodeAt(a);if(!$r(S))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const w=p_(l.slice(1,c));return w?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[w]>"u"&&(e.env.references[w]={title:x,href:h}),e.line=s),!0):!1}const Fme=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Lme="[a-zA-Z_:][a-zA-Z0-9:._-]*",$me="[^\"'=<>`\\x00-\\x20]+",Bme="'[^']*'",zme='"[^"]*"',Ume="(?:"+$me+"|"+Bme+"|"+zme+")",Vme="(?:\\s+"+Lme+"(?:\\s*=\\s*"+Ume+")?)",$B="<[A-Za-z][A-Za-z0-9\\-]*"+Vme+"*\\s*\\/?>",BB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Hme="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",qme="<[?][\\s\\S]*?[?]>",Gme="<![A-Za-z][^>]*>",Wme="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Kme=new RegExp("^(?:"+$B+"|"+BB+"|"+Hme+"|"+qme+"|"+Gme+"|"+Wme+")"),Zme=new RegExp("^(?:"+$B+"|"+BB+")"),$h=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Fme.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Zme.source+"\\s*$"),/^$/,!1]];function Yme(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let s=e.src.slice(a,i),o=0;for(;o<$h.length&&!$h[o][0].test(s);o++);if(o===$h.length)return!1;if(r)return $h[o][2];let l=t+1;if(!$h[o][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],s=e.src.slice(a,i),$h[o][1].test(s)){s.length!==0&&l++;break}}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function Xme(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(a);if(s!==35||a>=i)return!1;let o=1;for(s=e.src.charCodeAt(++a);s===35&&a<i&&o<=6;)o++,s=e.src.charCodeAt(++a);if(o>6||a<i&&!$r(s))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&$r(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const c=e.push("heading_open","h"+String(o),1);c.markup="########".slice(0,o),c.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function Jme(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,s,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let g=e.bMarks[o]+e.tShift[o];const v=e.eMarks[o];if(g<v&&(s=e.src.charCodeAt(g),(s===45||s===61)&&(g=e.skipChars(g,s),g=e.skipSpaces(g),g>=v))){i=s===61?1:2;break}}if(e.sCount[o]<0)continue;let p=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,o,n,!0)){p=!0;break}if(p)break}if(!i)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(s),c.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(s),e.parentType=a,!0}function Qme(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){c=!0;break}if(c)break}const s=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const vw=[["table",Nme,["paragraph","reference"]],["code",Rme],["fence",Ime,["paragraph","reference","blockquote","list"]],["blockquote",jme,["paragraph","reference","blockquote","list"]],["hr",Dme,["paragraph","reference","blockquote","list"]],["list",Ome,["paragraph","reference","blockquote"]],["reference",Pme],["html_block",Yme,["paragraph","reference","blockquote"]],["heading",Xme,["paragraph","reference","blockquote"]],["lheading",Jme],["paragraph",Qme]];function m_(){this.ruler=new Qi;for(let e=0;e<vw.length;e++)this.ruler.push(vw[e][0],vw[e][1],{alt:(vw[e][2]||[]).slice()})}m_.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let s=t,o=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let c=!1;for(let d=0;d<a;d++)if(c=r[d](e,s,n,!1),c){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),s=e.line,s<n&&e.isEmpty(s)&&(o=!0,s++,e.line=s)}};m_.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};m_.prototype.State=Tl;function nb(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}nb.prototype.pushPending=function(){const e=new Ro("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};nb.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Ro(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};nb.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const s=i-e,o=i<n?this.src.charCodeAt(i):32,l=H0(a)||V0(String.fromCharCode(a)),c=H0(o)||V0(String.fromCharCode(o)),d=U0(a),h=U0(o),p=!h&&(!c||d||l),g=!d&&(!l||h||c);return{can_open:p&&(t||!g||l),can_close:g&&(t||!p||c),length:s}};nb.prototype.Token=Ro;function ege(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function tge(e,t){let n=e.pos;for(;n<e.posMax&&!ege(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const nge=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function rge(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(nge);if(!a)return!1;const i=a[1],s=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!s)return!1;let o=s.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(o);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=o.length-i.length,!0}function age(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&$r(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const QN=[];for(let e=0;e<256;e++)QN.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){QN[e.charCodeAt(0)]=1});function ige(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!$r(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=e.src[n+1],n++)}const s="\\"+i;if(!t){const o=e.push("text_special","",0);a<256&&QN[a]!==0?o.content=i:o.content=s,o.markup=s,o.info="escape"}return e.pos=n+1,!0}function sge(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(a,n),o=s.length;if(e.backticksScanned&&(e.backticks[o]||0)<=a)return t||(e.pending+=s),e.pos+=o,!0;let l=n,c;for(;(c=e.src.indexOf("`",l))!==-1;){for(l=c+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-c;if(d===o){if(!t){const h=e.push("code_inline","code",0);h.markup=s,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=c}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=o,!0}function oge(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const s=String.fromCharCode(r);if(i<2)return!1;let o;i%2&&(o=e.push("text","",0),o.content=s,i--);for(let l=0;l<i;l+=2)o=e.push("text","",0),o.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function XO(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const s=t[i];if(s.marker!==126||s.end===-1)continue;const o=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const i=r.pop();let s=i+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,i!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[i],e.tokens[i]=n)}}function lge(e){const t=e.tokens_meta,n=e.tokens_meta.length;XO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&XO(e,t[r].delimiters)}const zB={tokenize:oge,postProcess:lge};function cge(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function JO(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],s=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,o=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?o+o:o,l.content="";const c=e.tokens[i.token];c.type=s?"strong_close":"em_close",c.tag=s?"strong":"em",c.nesting=-1,c.markup=s?o+o:o,c.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function uge(e){const t=e.tokens_meta,n=e.tokens_meta.length;JO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&JO(e,t[r].delimiters)}const UB={tokenize:cge,postProcess:uge};function dge(e,t){let n,r,a,i,s="",o="",l=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,p=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!$r(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(s=e.md.normalizeLink(a.str),e.md.validateLink(s)?v=a.pos:s="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!$r(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&a.ok)for(o=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!$r(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=g+1):v=g+1,r||(r=e.src.slice(p,g)),i=e.env.references[p_(r)],!i)return e.pos=d,!1;s=i.href,o=i.title}if(!t){e.pos=p,e.posMax=g;const b=e.push("link_open","a",1),x=[["href",s]];b.attrs=x,o&&x.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function fge(e,t){let n,r,a,i,s,o,l,c,d="";const h=e.pos,p=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<p&&e.src.charCodeAt(i)===40){for(i++;i<p&&(n=e.src.charCodeAt(i),!(!$r(n)&&n!==10));i++);if(i>=p)return!1;for(c=i,o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),o.ok&&(d=e.md.normalizeLink(o.str),e.md.validateLink(d)?i=o.pos:d=""),c=i;i<p&&(n=e.src.charCodeAt(i),!(!$r(n)&&n!==10));i++);if(o=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<p&&c!==i&&o.ok)for(l=o.str,i=o.pos;i<p&&(n=e.src.charCodeAt(i),!(!$r(n)&&n!==10));i++);else l="";if(i>=p||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<p&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),s=e.env.references[p_(a)],!s)return e.pos=h,!1;d=s.href,l=s.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const x=e.push("image","img",0),w=[["src",d],["alt",""]];x.attrs=w,x.children=b,x.content=r,l&&w.push(["title",l])}return e.pos=i,e.posMax=p,!0}const hge=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,pge=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function mge(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const i=e.src.slice(r+1,n);if(pge.test(i)){const s=e.md.normalizeLink(i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(hge.test(i)){const s=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function gge(e){return/^<a[>\s]/i.test(e)}function yge(e){return/^<\/a\s*>/i.test(e)}function bge(e){const t=e|32;return t>=97&&t<=122}function vge(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!bge(a))return!1;const i=e.src.slice(r).match(Kme);if(!i)return!1;if(!t){const s=e.push("html_inline","",0);s.content=i[0],gge(s.content)&&e.linkLevel++,yge(s.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const wge=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,xge=/^&([a-z][a-z0-9]{1,31});/i;function _ge(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(wge);if(i){if(!t){const s=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=e.push("text_special","",0);o.content=XN(s)?Wx(s):Wx(65533),o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(xge);if(i){const s=MB(i[0]);if(s!==i[0]){if(!t){const o=e.push("text_special","",0);o.content=s,o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function QO(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let s=0;s<n;s++){const o=e[s];if(i.push(0),(e[r].marker!==o.marker||a!==o.token-1)&&(r=s),a=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let c=r-i[r]-1,d=c;for(;c>l;c-=i[c]+1){const h=e[c];if(h.marker===o.marker&&h.open&&h.end<0){let p=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(p=!0),!p){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[s]=s-c+g,i[c]=g,o.open=!1,h.end=s,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=d)}}function Sge(e){const t=e.tokens_meta,n=e.tokens_meta.length;QO(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&QO(t[r].delimiters)}function Ege(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const RC=[["text",tge],["linkify",rge],["newline",age],["escape",ige],["backticks",sge],["strikethrough",zB.tokenize],["emphasis",UB.tokenize],["link",dge],["image",fge],["autolink",mge],["html_inline",vge],["entity",_ge]],IC=[["balance_pairs",Sge],["strikethrough",zB.postProcess],["emphasis",UB.postProcess],["fragments_join",Ege]];function rb(){this.ruler=new Qi;for(let e=0;e<RC.length;e++)this.ruler.push(RC[e][0],RC[e][1]);this.ruler2=new Qi;for(let e=0;e<IC.length;e++)this.ruler2.push(IC[e][0],IC[e][1])}rb.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let s=!1;if(e.level<a){for(let o=0;o<r;o++)if(e.level++,s=n[o](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,i[t]=e.pos};rb.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let s=!1;if(e.level<a){for(let o=0;o<n;o++)if(s=t[o](e,!1),s){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};rb.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),s=i.length;for(let o=0;o<s;o++)i[o](a)};rb.prototype.State=nb;function Cge(e){const t={};e=e||{},t.src_Any=NB.source,t.src_Cc=RB.source,t.src_Z=jB.source,t.src_P=ZN.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function wk(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function g_(e){return Object.prototype.toString.call(e)}function Tge(e){return g_(e)==="[object String]"}function kge(e){return g_(e)==="[object Object]"}function Age(e){return g_(e)==="[object RegExp]"}function e6(e){return g_(e)==="[object Function]"}function Nge(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const VB={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Rge(e){return Object.keys(e||{}).reduce(function(t,n){return t||VB.hasOwnProperty(n)},!1)}const Ige={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},jge="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Dge="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Mge(e){e.__index__=-1,e.__text_cache__=""}function Oge(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function t6(){return function(e,t){t.normalize(e)}}function Kx(e){const t=e.re=Cge(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(jge),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const c={validate:null,link:null};if(e.__compiled__[o]=c,kge(l)){Age(l.validate)?c.validate=Oge(l.validate):e6(l.validate)?c.validate=l.validate:i(o,l),e6(l.normalize)?c.normalize=l.normalize:l.normalize?i(o,l):c.normalize=t6();return}if(Tge(l)){a.push(o);return}i(o,l)}),a.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:t6()};const s=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(Nge).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Mge(e)}function Pge(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function xk(e,t){const n=new Pge(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function ws(e,t){if(!(this instanceof ws))return new ws(e,t);t||Rge(e)&&(t=e,e={}),this.__opts__=wk({},VB,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=wk({},Ige,e),this.__compiled__={},this.__tlds__=Dge,this.__tlds_replaced__=!1,this.re={},Kx(this)}ws.prototype.add=function(t,n){return this.__schemas__[t]=n,Kx(this),this};ws.prototype.set=function(t){return this.__opts__=wk(this.__opts__,t),this};ws.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,s,o,l,c,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(s=a.index+a[1].length,o=a.index+a[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o))),this.__index__>=0};ws.prototype.pretest=function(t){return this.re.pretest.test(t)};ws.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};ws.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(xk(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(xk(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};ws.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,xk(this,0)):null};ws.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Kx(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Kx(this),this)};ws.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};ws.prototype.onCompile=function(){};const lp=2147483647,ol=36,eR=1,q0=26,Fge=38,Lge=700,HB=72,qB=128,GB="-",$ge=/^xn--/,Bge=/[^\0-\x7F]/,zge=/[\x2E\u3002\uFF0E\uFF61]/g,Uge={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},jC=ol-eR,ll=Math.floor,DC=String.fromCharCode;function _u(e){throw new RangeError(Uge[e])}function Vge(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function WB(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(zge,".");const a=e.split("."),i=Vge(a,t).join(".");return r+i}function KB(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const Hge=e=>String.fromCodePoint(...e),qge=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:ol},n6=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},ZB=function(e,t,n){let r=0;for(e=n?ll(e/Lge):e>>1,e+=ll(e/t);e>jC*q0>>1;r+=ol)e=ll(e/jC);return ll(r+(jC+1)*e/(e+Fge))},YB=function(e){const t=[],n=e.length;let r=0,a=qB,i=HB,s=e.lastIndexOf(GB);s<0&&(s=0);for(let o=0;o<s;++o)e.charCodeAt(o)>=128&&_u("not-basic"),t.push(e.charCodeAt(o));for(let o=s>0?s+1:0;o<n;){const l=r;for(let d=1,h=ol;;h+=ol){o>=n&&_u("invalid-input");const p=qge(e.charCodeAt(o++));p>=ol&&_u("invalid-input"),p>ll((lp-r)/d)&&_u("overflow"),r+=p*d;const g=h<=i?eR:h>=i+q0?q0:h-i;if(p<g)break;const v=ol-g;d>ll(lp/v)&&_u("overflow"),d*=v}const c=t.length+1;i=ZB(r-l,c,l==0),ll(r/c)>lp-a&&_u("overflow"),a+=ll(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},XB=function(e){const t=[];e=KB(e);const n=e.length;let r=qB,a=0,i=HB;for(const l of e)l<128&&t.push(DC(l));const s=t.length;let o=s;for(s&&t.push(GB);o<n;){let l=lp;for(const d of e)d>=r&&d<l&&(l=d);const c=o+1;l-r>ll((lp-a)/c)&&_u("overflow"),a+=(l-r)*c,r=l;for(const d of e)if(d<r&&++a>lp&&_u("overflow"),d===r){let h=a;for(let p=ol;;p+=ol){const g=p<=i?eR:p>=i+q0?q0:p-i;if(h<g)break;const v=h-g,b=ol-g;t.push(DC(n6(g+v%b,0))),h=ll(v/b)}t.push(DC(n6(h,0))),i=ZB(a,c,o===s),a=0,++o}++a,++r}return t.join("")},Gge=function(e){return WB(e,function(t){return $ge.test(t)?YB(t.slice(4).toLowerCase()):t})},Wge=function(e){return WB(e,function(t){return Bge.test(t)?"xn--"+XB(t):t})},JB={version:"2.3.1",ucs2:{decode:KB,encode:Hge},decode:YB,encode:XB,toASCII:Wge,toUnicode:Gge},Kge={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Zge={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Yge={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Xge={default:Kge,zero:Zge,commonmark:Yge},Jge=/^(vbscript|javascript|file|data):/,Qge=/^data:image\/(gif|png|jpeg|webp);/;function e0e(e){const t=e.trim().toLowerCase();return Jge.test(t)?Qge.test(t):!0}const QB=["http:","https:","mailto:"];function t0e(e){const t=KN(e,!0);if(t.hostname&&(!t.protocol||QB.indexOf(t.protocol)>=0))try{t.hostname=JB.toASCII(t.hostname)}catch{}return tb(WN(t))}function n0e(e){const t=KN(e,!0);if(t.hostname&&(!t.protocol||QB.indexOf(t.protocol)>=0))try{t.hostname=JB.toUnicode(t.hostname)}catch{}return Mp(WN(t),Mp.defaultChars+"%")}function Hs(e,t){if(!(this instanceof Hs))return new Hs(e,t);t||YN(e)||(t=e||{},e="default"),this.inline=new rb,this.block=new m_,this.core=new JN,this.renderer=new im,this.linkify=new ws,this.validateLink=e0e,this.normalizeLink=t0e,this.normalizeLinkText=n0e,this.utils=ame,this.helpers=h_({},lme),this.options={},this.configure(e),t&&this.set(t)}Hs.prototype.set=function(e){return h_(this.options,e),this};Hs.prototype.configure=function(e){const t=this;if(YN(e)){const n=e;if(e=Xge[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Hs.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Hs.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Hs.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Hs.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Hs.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Hs.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Hs.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const MC=new Hs({html:!1,linkify:!0,breaks:!0});function e7(e){return T.useMemo(()=>{var n;if(!e)return[];try{const r=MC.parse(e,{}),a=[];let i="",s=0;for(;s<r.length;){const o=r[s];if(o.type==="fence"){i&&(a.push(i),i="");const l=((n=o.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:o.content}),s++}else{const l=[];for(;s<r.length&&r[s].type!=="fence";)l.push(r[s]),s++;l.length>0&&(i+=MC.renderer.render(l,MC.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const r0e=({toolCall:e})=>{const[t,n]=T.useState(!0),r=()=>n(i=>!i),a=T.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return m.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",m.jsx("code",{className:"font-mono",children:e.toolName})]}),m.jsx(On,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?m.jsx(kc,{}):m.jsx(Cf,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&m.jsx(Ty,{lang:"json",code:a})]})},a0e=({toolResult:e})=>{const[t,n]=T.useState(!0),r=()=>n(s=>!s),a=T.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return m.jsxs("div",{className:xt("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsxs("span",{className:xt("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",m.jsx("code",{className:"font-mono",children:e.toolName})]}),m.jsx(On,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?m.jsx(kc,{}):m.jsx(Cf,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&m.jsx(Ty,{lang:i?"text":"json",code:a})]})},i0e=({markdownContent:e})=>{const t=e7(e);return e!=null&&e.trim()?m.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return m.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return m.jsx(Ty,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},s0e=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:s,toggleFold:o})=>{const[l,c]=T.useState(!0),d=T.useCallback(()=>c(b=>!b),[]),h=!!r,p=e&&(typeof e!="string"||e.trim().length>0),g=t&&t.length>0,v=n&&n.length>0;return s?m.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:o,children:[h?"[Reasoning] ":"",g?`[${t==null?void 0:t.length} Tool Call(s)] `:"",p&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:g||v||h?"":"[No text response]"]}):m.jsxs(m.Fragment,{children:[a&&i&&m.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[m.jsx("p",{className:"font-semibold",children:"Error:"}),m.jsx("p",{children:i})]}),h&&m.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[m.jsx(by,{className:"h-3.5 w-3.5"})," Reasoning"]}),m.jsx(On,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:d,"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?m.jsx(kc,{}):m.jsx(Cf,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!l&&m.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:r})]}),t==null?void 0:t.map((b,x)=>{try{const w=JSON.parse(b);return m.jsx(r0e,{toolCall:w},`call-${x}`)}catch(w){return console.error("Failed to parse tool call string:",w),m.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${x}`)}}),n==null?void 0:n.map((b,x)=>{try{const w=JSON.parse(b);return m.jsx(a0e,{toolResult:w},`res-${x}`)}catch(w){return console.error("Failed to parse tool result string:",w),m.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${x}`)}}),m.jsx(i0e,{markdownContent:e}),!p&&!g&&!v&&!h&&m.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},t7=gt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var C,k,j,I,N,P,L,H,M,Z,q,ue;const[i,s]=T.useState(!1),{dbProviderConfigs:o,getAllAvailableModelDefsForProvider:l}=zn(dn(ae=>({dbProviderConfigs:ae.dbProviderConfigs,getAllAvailableModelDefsForProvider:ae.getAllAvailableModelDefsForProvider}))),c=T.useCallback(()=>s(ae=>!ae),[]),d=e.endedAt?AB(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=T.useMemo(()=>{var ne;const ae=(ne=e.metadata)==null?void 0:ne.modelId;if(!ae)return"Unknown Model";const{providerId:ee,modelId:X}=Ac(ae);if(!ee||!X)return ae;const ie=o.find(he=>he.id===ee),B=(ie==null?void 0:ie.name)??ee,Q=l(ee).find(he=>he.id===X);return`${(Q==null?void 0:Q.name)??X} (${B})`},[(C=e.metadata)==null?void 0:C.modelId,o,l]),p=e.status==="COMPLETED",g=p||e.status==="ERROR",v=e.status==="ERROR",b=e.response&&(typeof e.response!="string"||e.response.trim().length>0),x=((k=e.metadata)==null?void 0:k.toolCalls)&&e.metadata.toolCalls.length>0,w=((j=e.metadata)==null?void 0:j.toolResults)&&e.metadata.toolResults.length>0,S=!!((I=e.metadata)!=null&&I.reasoning),E=b||x||w||S;return m.jsxs("div",{className:xt("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",v?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&m.jsx(GN,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:p}),m.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[m.jsx(mpe,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:c,canFold:E,promptTokens:(N=e.metadata)==null?void 0:N.promptTokens,completionTokens:(P=e.metadata)==null?void 0:P.completionTokens,timeToFirstToken:(L=e.metadata)==null?void 0:L.timeToFirstToken,generationTime:(H=e.metadata)==null?void 0:H.generationTime}),m.jsx(s0e,{response:e.response,toolCalls:(M=e.metadata)==null?void 0:M.toolCalls,toolResults:(Z=e.metadata)==null?void 0:Z.toolResults,reasoning:(q=e.metadata)==null?void 0:q.reasoning,isError:v,errorMessage:(ue=e.metadata)==null?void 0:ue.error,isFolded:i,toggleFold:c})]}),g&&m.jsx(ype,{interaction:e,onEdit:r,onRegenerate:t,onDelete:n})]})});t7.displayName="InteractionCard";const r6=(e,t,n,r)=>{if(typeof e=="string")return e.trim()?m.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const a=e,i=a.lang?`language-${a.lang}`:"language-plaintext";return n?m.jsx(Ty,{lang:a.lang,code:a.code,isStreaming:r},`code-${t}`):m.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[m.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:m.jsx("div",{className:"text-sm font-medium",children:a.lang?a.lang.toUpperCase():"CODE"})}),m.jsx("code",{className:xt(i,"block p-4 font-mono text-sm leading-relaxed"),children:a.code})]},`pre-${t}`)}return null},o0e=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=hr(dn(p=>({enableStreamingMarkdown:p.enableStreamingMarkdown,enableStreamingCodeBlockParsing:p.enableStreamingCodeBlockParsing}))),i=e7(r?e:null),[s,o]=T.useState([]),[l,c]=T.useState(null),d=T.useRef(0);T.useEffect(()=>{if(!r){o([]),c(e??null),d.current=0;return}const p=d.current,g=i.slice(p,i.length-1);if(g.length>0){const b=g.map((x,w)=>r6(x,p+w,a,!1)).filter(x=>x!==null);o(x=>[...x,...b]),d.current+=g.length}const v=i.length>0?i[i.length-1]:null;JSON.stringify(v)!==JSON.stringify(l)&&c(v),e||(o([]),c(null),d.current=0)},[i,r,a,l,e]);const h=T.useMemo(()=>!l||!r?null:r6(l,d.current,a,!0),[l,a,r]);return!(e!=null&&e.trim())&&s.length===0?m.jsx("div",{className:xt("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."}):r?m.jsxs("div",{className:xt(n),children:[s,h]}):m.jsx("pre",{className:xt("whitespace-pre-wrap text-sm",n),children:e})},l0e=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>m.jsx(On,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:m.jsx(uX,{}),variant:r,size:n,className:t}),_k=gt.memo(({interactionId:e,onStop:t,className:n})=>{var v;const{interaction:r,interactionStatus:a}=qn(dn(b=>{const x=b.interactions.find(w=>w.id===e);return{interaction:x,interactionStatus:x==null?void 0:x.status}})),i=hr(b=>b.streamingRenderFPS),[s,o]=T.useState(""),l=T.useRef(null),c=T.useRef(0);T.useEffect(()=>{const b=1e3/i;let x=!0;const w=S=>{if(!x)return;if(qn.getState().streamingInteractionIds.includes(e)){if(S-c.current>=b){const C=qn.getState().activeStreamBuffers[e]??"";o(C),c.current=S}l.current=requestAnimationFrame(w)}else{const C=qn.getState().activeStreamBuffers[e]??"";o(C),l.current=null}};return l.current=requestAnimationFrame(w),()=>{x=!1,l.current&&(cancelAnimationFrame(l.current),l.current=null)}},[e,i]),T.useEffect(()=>{if(a&&a!=="STREAMING"){const b=qn.getState().activeStreamBuffers[e]??"";o(b),l.current&&(cancelAnimationFrame(l.current),l.current=null)}},[a,e]);const{dbProviderConfigs:d,getAllAvailableModelDefsForProvider:h}=zn(dn(b=>({dbProviderConfigs:b.dbProviderConfigs,getAllAvailableModelDefsForProvider:b.getAllAvailableModelDefsForProvider}))),p=T.useMemo(()=>{var j;const b=(j=r==null?void 0:r.metadata)==null?void 0:j.modelId;if(!b)return"Loading Model...";const{providerId:x,modelId:w}=Ac(b);if(!x||!w)return b;const S=d.find(I=>I.id===x),E=(S==null?void 0:S.name)??x,k=h(x).find(I=>I.id===w);return`${(k==null?void 0:k.name)??w} (${E})`},[(v=r==null?void 0:r.metadata)==null?void 0:v.modelId,d,h]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),m.jsxs("div",{className:xt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[m.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",m.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),m.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const g=()=>{t&&t(e)};return m.jsxs("div",{className:xt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&m.jsx(GN,{turnData:r.prompt,timestamp:r.startedAt,isAssistantComplete:!1}),m.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",p,")"]}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),m.jsx(o0e,{markdownContent:s,isStreaming:!0})]}),t&&m.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200",children:m.jsx(l0e,{onStop:g,"aria-label":"Stop Generation"})})]})});_k.displayName="StreamingInteractionCard";var c0e=T.createContext(void 0);function sm(e){const t=T.useContext(c0e);return e||t||"ltr"}function G0(e,[t,n]){return Math.min(n,Math.max(t,e))}function u0e(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var tR="ScrollArea",[n7,pje]=vi(tR),[d0e,Ys]=n7(tR),r7=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,l]=T.useState(null),[c,d]=T.useState(null),[h,p]=T.useState(null),[g,v]=T.useState(null),[b,x]=T.useState(null),[w,S]=T.useState(0),[E,C]=T.useState(0),[k,j]=T.useState(!1),[I,N]=T.useState(!1),P=An(t,H=>l(H)),L=sm(a);return m.jsx(d0e,{scope:n,type:r,dir:L,scrollHideDelay:i,scrollArea:o,viewport:c,onViewportChange:d,content:h,onContentChange:p,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:j,scrollbarY:b,onScrollbarYChange:x,scrollbarYEnabled:I,onScrollbarYEnabledChange:N,onCornerWidthChange:S,onCornerHeightChange:C,children:m.jsx(an.div,{dir:L,...s,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});r7.displayName=tR;var a7="ScrollAreaViewport",i7=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,s=Ys(a7,n),o=T.useRef(null),l=An(t,o,s.onViewportChange);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),m.jsx(an.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:m.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});i7.displayName=a7;var kl="ScrollAreaScrollbar",s7=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ys(kl,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o=e.orientation==="horizontal";return T.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),a.type==="hover"?m.jsx(f0e,{...r,ref:t,forceMount:n}):a.type==="scroll"?m.jsx(h0e,{...r,ref:t,forceMount:n}):a.type==="auto"?m.jsx(o7,{...r,ref:t,forceMount:n}):a.type==="always"?m.jsx(nR,{...r,ref:t}):null});s7.displayName=kl;var f0e=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ys(kl,e.__scopeScrollArea),[i,s]=T.useState(!1);return T.useEffect(()=>{const o=a.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),m.jsx(Wa,{present:n||i,children:m.jsx(o7,{"data-state":i?"visible":"hidden",...r,ref:t})})}),h0e=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ys(kl,e.__scopeScrollArea),i=e.orientation==="horizontal",s=b_(()=>l("SCROLL_END"),100),[o,l]=u0e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,a.scrollHideDelay,l]),T.useEffect(()=>{const c=a.viewport,d=i?"scrollLeft":"scrollTop";if(c){let h=c[d];const p=()=>{const g=c[d];h!==g&&(l("SCROLL"),s()),h=g};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[a.viewport,i,l,s]),m.jsx(Wa,{present:n||o!=="hidden",children:m.jsx(nR,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:qt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:qt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),o7=T.forwardRef((e,t)=>{const n=Ys(kl,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,s]=T.useState(!1),o=e.orientation==="horizontal",l=b_(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?c:d)}},10);return Pp(n.viewport,l),Pp(n.content,l),m.jsx(Wa,{present:r||i,children:m.jsx(nR,{"data-state":i?"visible":"hidden",...a,ref:t})})}),nR=T.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Ys(kl,e.__scopeScrollArea),i=T.useRef(null),s=T.useRef(0),[o,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=f7(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:p=>s.current=p};function h(p,g){return v0e(p,s.current,o,g)}return n==="horizontal"?m.jsx(p0e,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollLeft,g=a6(p,o,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=h(p,a.dir))}}):n==="vertical"?m.jsx(m0e,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollTop,g=a6(p,o);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=h(p))}}):null}),p0e=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ys(kl,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),c=An(t,l,i.onScrollbarXChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),m.jsx(c7,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":y_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),p7(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Yx(s.paddingLeft),paddingEnd:Yx(s.paddingRight)}})}})}),m0e=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ys(kl,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),c=An(t,l,i.onScrollbarYChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),m.jsx(c7,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":y_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),p7(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Yx(s.paddingTop),paddingEnd:Yx(s.paddingBottom)}})}})}),[g0e,l7]=n7(kl),c7=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:h,...p}=e,g=Ys(kl,n),[v,b]=T.useState(null),x=An(t,P=>b(P)),w=T.useRef(null),S=T.useRef(""),E=g.viewport,C=r.content-r.viewport,k=za(d),j=za(l),I=b_(h,10);function N(P){if(w.current){const L=P.clientX-w.current.left,H=P.clientY-w.current.top;c({x:L,y:H})}}return T.useEffect(()=>{const P=L=>{const H=L.target;(v==null?void 0:v.contains(H))&&k(L,C)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[E,v,C,k]),T.useEffect(j,[r,j]),Pp(v,I),Pp(g.content,I),m.jsx(g0e,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:za(i),onThumbPointerUp:za(s),onThumbPositionChange:j,onThumbPointerDown:za(o),children:m.jsx(an.div,{...p,ref:x,style:{position:"absolute",...p.style},onPointerDown:qt(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),w.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),N(P))}),onPointerMove:qt(e.onPointerMove,N),onPointerUp:qt(e.onPointerUp,P=>{const L=P.target;L.hasPointerCapture(P.pointerId)&&L.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})})})}),Zx="ScrollAreaThumb",u7=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=l7(Zx,e.__scopeScrollArea);return m.jsx(Wa,{present:n||a.hasThumb,children:m.jsx(y0e,{ref:t,...r})})}),y0e=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Ys(Zx,n),s=l7(Zx,n),{onThumbPositionChange:o}=s,l=An(t,h=>s.onThumbChange(h)),c=T.useRef(void 0),d=b_(()=>{c.current&&(c.current(),c.current=void 0)},100);return T.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(d(),!c.current){const g=w0e(h,o);c.current=g,o()}};return o(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,d,o]),m.jsx(an.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:qt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;s.onThumbPointerDown({x:v,y:b})}),onPointerUp:qt(e.onPointerUp,s.onThumbPointerUp)})});u7.displayName=Zx;var rR="ScrollAreaCorner",d7=T.forwardRef((e,t)=>{const n=Ys(rR,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?m.jsx(b0e,{...e,ref:t}):null});d7.displayName=rR;var b0e=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Ys(rR,n),[i,s]=T.useState(0),[o,l]=T.useState(0),c=!!(i&&o);return Pp(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),Pp(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),s(d)}),c?m.jsx(an.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Yx(e){return e?parseInt(e,10):0}function f7(e,t){const n=e/t;return isNaN(n)?0:n}function y_(e){const t=f7(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function v0e(e,t,n,r="ltr"){const a=y_(n),i=a/2,s=t||i,o=a-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return h7([l,c],h)(e)}function a6(e,t,n="ltr"){const r=y_(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-r,l=n==="ltr"?[0,s]:[s*-1,0],c=G0(e,l);return h7([0,s],[0,o])(c)}function h7(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function p7(e,t){return e>0&&e<t}var w0e=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,o=n.top!==i.top;(s||o)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function b_(e,t){const n=za(e),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Pp(e,t){const n=za(t);ni(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var x0e=r7,_0e=i7,S0e=d7;function Xu({className:e,children:t,...n}){return m.jsxs(x0e,{"data-slot":"scroll-area",className:xt("relative",e),...n,children:[m.jsx(_0e,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),m.jsx(E0e,{}),m.jsx(S0e,{})]})}function E0e({className:e,orientation:t="vertical",...n}){return m.jsx(s7,{"data-slot":"scroll-area-scrollbar",orientation:t,className:xt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:m.jsx(u7,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function lr({className:e,...t}){return m.jsx("div",{"data-slot":"skeleton",className:xt("bg-accent animate-pulse rounded-md",e),...t})}const i6=()=>m.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[m.jsx(n5,{className:"h-16 w-16 text-muted-foreground mb-4"}),m.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),m.jsx("p",{className:"text-muted-foreground max-w-md",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat."})]}),aR=T.createContext({});function iR(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const sR=typeof window<"u",m7=sR?T.useLayoutEffect:T.useEffect,v_=T.createContext(null),oR=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class C0e extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function T0e({children:e,isPresent:t,anchorX:n}){const r=T.useId(),a=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=T.useContext(oR);return T.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d,right:h}=i.current;if(t||!a.current||!o||!l)return;const p=n==="left"?`left: ${d}`:`right: ${h}`;a.current.dataset.motionPopId=r;const g=document.createElement("style");return s&&(g.nonce=s),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(g)&&document.head.removeChild(g)}},[t]),m.jsx(C0e,{isPresent:t,childRef:a,sizeRef:i,children:T.cloneElement(e,{ref:a})})}const k0e=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:s,anchorX:o})=>{const l=iR(A0e),c=T.useId();let d=!0,h=T.useMemo(()=>(d=!1,{id:c,initial:t,isPresent:n,custom:a,onExitComplete:p=>{l.set(p,!0);for(const g of l.values())if(!g)return;r&&r()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[n,l,r]);return i&&d&&(h={...h}),T.useMemo(()=>{l.forEach((p,g)=>l.set(g,!1))},[n]),T.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),s==="popLayout"&&(e=m.jsx(T0e,{isPresent:n,anchorX:o,children:e})),m.jsx(v_.Provider,{value:h,children:e})};function A0e(){return new Map}function g7(e=!0){const t=T.useContext(v_);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=T.useId();T.useEffect(()=>{if(e)return a(i)},[e]);const s=T.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const ww=e=>e.key||"";function s6(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const N0e=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:s=!1,anchorX:o="left"})=>{const[l,c]=g7(s),d=T.useMemo(()=>s6(e),[e]),h=s&&!l?[]:d.map(ww),p=T.useRef(!0),g=T.useRef(d),v=iR(()=>new Map),[b,x]=T.useState(d),[w,S]=T.useState(d);m7(()=>{p.current=!1,g.current=d;for(let k=0;k<w.length;k++){const j=ww(w[k]);h.includes(j)?v.delete(j):v.get(j)!==!0&&v.set(j,!1)}},[w,h.length,h.join("-")]);const E=[];if(d!==b){let k=[...d];for(let j=0;j<w.length;j++){const I=w[j],N=ww(I);h.includes(N)||(k.splice(j,0,I),E.push(I))}return i==="wait"&&E.length&&(k=E),S(s6(k)),x(d),null}const{forceRender:C}=T.useContext(aR);return m.jsx(m.Fragment,{children:w.map(k=>{const j=ww(k),I=s&&!l?!1:d===w||h.includes(j),N=()=>{if(v.has(j))v.set(j,!0);else return;let P=!0;v.forEach(L=>{L||(P=!1)}),P&&(C==null||C(),S(g.current),s&&(c==null||c()),r&&r())};return m.jsx(k0e,{isPresent:I,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,onExitComplete:I?void 0:N,anchorX:o,children:k},j)})})},xw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],o6={value:null};function R0e(e,t){let n=new Set,r=new Set,a=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){s.has(h)&&(d.schedule(h),e()),l++,h(o)}const d={schedule:(h,p=!1,g=!1)=>{const b=g&&a?n:r;return p&&s.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(o=h,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(c),t&&o6.value&&o6.value.frameloop[t].push(l),l=0,n.clear(),a=!1,i&&(i=!1,d.process(h))}};return d}const Sc={},I0e=40;function y7(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=xw.reduce((E,C)=>(E[C]=R0e(i,t?C:void 0),E),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:p,render:g,postRender:v}=s,b=()=>{const E=Sc.useManualTiming?a.timestamp:performance.now();n=!1,Sc.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(E-a.timestamp,I0e),1)),a.timestamp=E,a.isProcessing=!0,o.process(a),l.process(a),c.process(a),d.process(a),h.process(a),p.process(a),g.process(a),v.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(b))},x=()=>{n=!0,r=!0,a.isProcessing||e(b)};return{schedule:xw.reduce((E,C)=>{const k=s[C];return E[C]=(j,I=!1,N=!1)=>(n||x(),k.schedule(j,I,N)),E},{}),cancel:E=>{for(let C=0;C<xw.length;C++)s[xw[C]].cancel(E)},state:a,steps:s}}const Us=e=>e,{schedule:ea,cancel:Ju,state:ei,steps:OC}=y7(typeof requestAnimationFrame<"u"?requestAnimationFrame:Us,!0),b7=T.createContext({strict:!1}),l6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fp={};for(const e in l6)Fp[e]={isEnabled:t=>l6[e].some(n=>!!t[n])};function j0e(e){for(const t in e)Fp[t]={...Fp[t],...e[t]}}const D0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xx(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||D0e.has(e)}let v7=e=>!Xx(e);function M0e(e){e&&(v7=t=>t.startsWith("on")?!Xx(t):e(t))}try{M0e(require("@emotion/is-prop-valid").default)}catch{}function O0e(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(v7(a)||n===!0&&Xx(a)||!t&&!Xx(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}function P0e(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const w_=T.createContext({});function x_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function W0(e){return typeof e=="string"||Array.isArray(e)}const lR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cR=["initial",...lR];function __(e){return x_(e.animate)||cR.some(t=>W0(e[t]))}function w7(e){return!!(__(e)||e.variants)}function F0e(e,t){if(__(e)){const{initial:n,animate:r}=e;return{initial:n===!1||W0(n)?n:void 0,animate:W0(r)?r:void 0}}return e.inherit!==!1?t:{}}function L0e(e){const{initial:t,animate:n}=F0e(e,T.useContext(w_));return T.useMemo(()=>({initial:t,animate:n}),[c6(t),c6(n)])}function c6(e){return Array.isArray(e)?e.join(" "):e}const $0e=Symbol.for("motionComponentSymbol");function Yh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function B0e(e,t,n){return T.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Yh(n)&&(n.current=r))},[t])}const uR=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),z0e="framerAppearId",x7="data-"+uR(z0e),_7=T.createContext({}),{schedule:dR}=y7(queueMicrotask,!1);function U0e(e,t,n,r,a){var b,x;const{visualElement:i}=T.useContext(w_),s=T.useContext(b7),o=T.useContext(v_),l=T.useContext(oR).reducedMotion,c=T.useRef(null);r=r||s.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,h=T.useContext(_7);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&V0e(c.current,n,a,h);const p=T.useRef(!1);T.useInsertionEffect(()=>{d&&p.current&&d.update(n,o)});const g=n[x7],v=T.useRef(!!g&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,g))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,g)));return m7(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),dR.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),T.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),v.current=!1))}),d}function V0e(e,t,n,r){const{layoutId:a,layout:i,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:S7(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!s||o&&Yh(o),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function S7(e){if(e)return e.options.allowProjection!==!1?e.projection:S7(e.parent)}let fR=()=>{};function H0e({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:a}){e&&j0e(e);function i(o,l){let c;const d={...T.useContext(oR),...o,layoutId:q0e(o)},{isStatic:h}=d,p=L0e(o),g=r(o,h);if(!h&&sR){G0e();const v=W0e(d);c=v.MeasureLayout,p.visualElement=U0e(a,g,d,t,v.ProjectionNode)}return m.jsxs(w_.Provider,{value:p,children:[c&&p.visualElement?m.jsx(c,{visualElement:p.visualElement,...d}):null,n(a,o,B0e(g,p.visualElement,l),g,h,p.visualElement)]})}i.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const s=T.forwardRef(i);return s[$0e]=a,s}function q0e({layoutId:e}){const t=T.useContext(aR).id;return t&&e!==void 0?t+"-"+e:e}function G0e(e,t){T.useContext(b7).strict}function W0e(e){const{drag:t,layout:n}=Fp;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const E7=e=>t=>typeof t=="string"&&t.startsWith(e),hR=E7("--"),K0e=E7("var(--"),pR=e=>K0e(e)?Z0e.test(e.split("/*")[0].trim()):!1,Z0e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,K0={};function Y0e(e){for(const t in e)K0[t]=e[t],hR(t)&&(K0[t].isCSSVariable=!0)}const om=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lm=new Set(om);function C7(e,{layout:t,layoutId:n}){return lm.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!K0[e]||e==="opacity")}const hi=e=>!!(e&&e.getVelocity),T7=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ec=(e,t,n)=>n>t?t:n<e?e:n,cm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Z0={...cm,transform:e=>Ec(0,1,e)},_w={...cm,default:1},u6={...cm,transform:Math.round},ab=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wu=ab("deg"),dl=ab("%"),En=ab("px"),X0e=ab("vh"),J0e=ab("vw"),d6={...dl,parse:e=>dl.parse(e)/100,transform:e=>dl.transform(e*100)},Q0e={rotate:wu,rotateX:wu,rotateY:wu,rotateZ:wu,scale:_w,scaleX:_w,scaleY:_w,scaleZ:_w,skew:wu,skewX:wu,skewY:wu,distance:En,translateX:En,translateY:En,translateZ:En,x:En,y:En,z:En,perspective:En,transformPerspective:En,opacity:Z0,originX:d6,originY:d6,originZ:En},mR={borderWidth:En,borderTopWidth:En,borderRightWidth:En,borderBottomWidth:En,borderLeftWidth:En,borderRadius:En,radius:En,borderTopLeftRadius:En,borderTopRightRadius:En,borderBottomRightRadius:En,borderBottomLeftRadius:En,width:En,maxWidth:En,height:En,maxHeight:En,top:En,right:En,bottom:En,left:En,padding:En,paddingTop:En,paddingRight:En,paddingBottom:En,paddingLeft:En,margin:En,marginTop:En,marginRight:En,marginBottom:En,marginLeft:En,backgroundPositionX:En,backgroundPositionY:En,...Q0e,zIndex:u6,fillOpacity:Z0,strokeOpacity:Z0,numOctaves:u6},eye={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tye=om.length;function nye(e,t,n){let r="",a=!0;for(let i=0;i<tye;i++){const s=om[i],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=T7(o,mR[s]);if(!l){a=!1;const d=eye[s]||s;r+=`${d}(${c}) `}n&&(t[s]=c)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function gR(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let s=!1,o=!1;for(const l in t){const c=t[l];if(lm.has(l)){s=!0;continue}else if(hR(l)){a[l]=c;continue}else{const d=T7(c,mR[l]);l.startsWith("origin")?(o=!0,i[l]=d):r[l]=d}}if(t.transform||(s||n?r.transform=nye(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}const yR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function k7(e,t,n){for(const r in t)!hi(t[r])&&!C7(r,n)&&(e[r]=t[r])}function rye({transformTemplate:e},t){return T.useMemo(()=>{const n=yR();return gR(n,t,e),Object.assign({},n.vars,n.style)},[t])}function aye(e,t){const n=e.style||{},r={};return k7(r,n,e),Object.assign(r,rye(e,t)),r}function iye(e,t){const n={},r=aye(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const sye=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bR(e){return typeof e!="string"||e.includes("-")?!1:!!(sye.indexOf(e)>-1||/[A-Z]/u.test(e))}const oye={offset:"stroke-dashoffset",array:"stroke-dasharray"},lye={offset:"strokeDashoffset",array:"strokeDasharray"};function cye(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?oye:lye;e[i.offset]=En.transform(-r);const s=En.transform(t),o=En.transform(n);e[i.array]=`${s} ${o}`}function A7(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:s=0,...o},l,c,d){if(gR(e,o,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p}=e;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&cye(h,a,i,s,!1)}const N7=()=>({...yR(),attrs:{}}),R7=e=>typeof e=="string"&&e.toLowerCase()==="svg";function uye(e,t,n,r){const a=T.useMemo(()=>{const i=N7();return A7(i,t,R7(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};k7(i,e.style,e),a.style={...i,...a.style}}return a}function dye(e=!1){return(n,r,a,{latestValues:i},s)=>{const l=(bR(n)?uye:iye)(r,i,s,n),c=O0e(r,typeof n=="string",e),d=n!==T.Fragment?{...c,...l,ref:a}:{},{children:h}=r,p=T.useMemo(()=>hi(h)?h.get():h,[h]);return T.createElement(n,{...d,children:p})}}function f6(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function vR(e,t,n,r){if(typeof t=="function"){const[a,i]=f6(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=f6(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function Vw(e){return hi(e)?e.get():e}function fye({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:hye(n,r,a,e),renderState:t()}}const I7=e=>(t,n)=>{const r=T.useContext(w_),a=T.useContext(v_),i=()=>fye(e,t,r,a);return n?i():iR(i)};function hye(e,t,n,r){const a={},i=r(e,{});for(const p in i)a[p]=Vw(i[p]);let{initial:s,animate:o}=e;const l=__(e),c=w7(e);t&&c&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?o:s;if(h&&typeof h!="boolean"&&!x_(h)){const p=Array.isArray(h)?h:[h];for(let g=0;g<p.length;g++){const v=vR(e,p[g]);if(v){const{transitionEnd:b,transition:x,...w}=v;for(const S in w){let E=w[S];if(Array.isArray(E)){const C=d?E.length-1:0;E=E[C]}E!==null&&(a[S]=E)}for(const S in b)a[S]=b[S]}}}return a}function wR(e,t,n){var i;const{style:r}=e,a={};for(const s in r)(hi(r[s])||t.style&&hi(t.style[s])||C7(s,e)||((i=n==null?void 0:n.getValue(s))==null?void 0:i.liveStyle)!==void 0)&&(a[s]=r[s]);return a}const pye={useVisualState:I7({scrapeMotionValuesFromProps:wR,createRenderState:yR})};function j7(e,t,n){const r=wR(e,t,n);for(const a in e)if(hi(e[a])||hi(t[a])){const i=om.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const mye={useVisualState:I7({scrapeMotionValuesFromProps:j7,createRenderState:N7})};function gye(e,t){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const s={...bR(r)?mye:pye,preloadedFeatures:e,useRender:dye(a),createVisualElement:t,Component:r};return H0e(s)}}function Y0(e,t,n){const r=e.getProps();return vR(r,t,n!==void 0?n:r.custom,e)}const Sk=e=>Array.isArray(e);let Hw;function yye(){Hw=void 0}const Wi={now:()=>(Hw===void 0&&Wi.set(ei.isProcessing||Sc.useManualTiming?ei.timestamp:performance.now()),Hw),set:e=>{Hw=e,queueMicrotask(yye)}};function xR(e,t){e.indexOf(t)===-1&&e.push(t)}function _R(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class SR{constructor(){this.subscriptions=[]}add(t){return xR(this.subscriptions,t),()=>_R(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const s=this.subscriptions[i];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function D7(e,t){return t?e*(1e3/t):0}const h6=30,bye=e=>!isNaN(parseFloat(e));class vye{constructor(t,n={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{var s,o;const i=Wi.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current)),a&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Wi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=bye(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new SR);const r=this.events[t].add(n);return t==="change"?()=>{r(),ea.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Wi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>h6)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,h6);return D7(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t;(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function X0(e,t){return new vye(e,t)}function wye(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,X0(n))}function xye(e){return Sk(e)?e[e.length-1]||0:e}function _ye(e,t){const n=Y0(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const s in i){const o=xye(i[s]);wye(e,s,o)}}function Sye(e){return!!(hi(e)&&e.add)}function Ek(e,t){const n=e.getValue("willChange");if(Sye(n))return n.add(t);if(!n&&Sc.WillChange){const r=new Sc.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function M7(e){return e.props[x7]}const Eye=e=>e!==null;function Cye(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(Eye),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return a[i]}const Tye={type:"spring",stiffness:500,damping:25,restSpeed:10},kye=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Aye={type:"keyframes",duration:.8},Nye={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rye=(e,{keyframes:t})=>t.length>2?Aye:lm.has(e)?e.startsWith("scale")?kye(t[1]):Tye:Nye;function Iye({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function ER(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const fl=e=>e*1e3,hl=e=>e/1e3,Wg=e=>Math.round(e*1e5)/1e5,CR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jye(e){return e==null}const Dye=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,TR=(e,t)=>n=>!!(typeof n=="string"&&Dye.test(n)&&n.startsWith(e)||t&&!jye(n)&&Object.prototype.hasOwnProperty.call(n,t)),O7=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,s,o]=r.match(CR);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},Mye=e=>Ec(0,255,e),PC={...cm,transform:e=>Math.round(Mye(e))},tf={test:TR("rgb","red"),parse:O7("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+PC.transform(e)+", "+PC.transform(t)+", "+PC.transform(n)+", "+Wg(Z0.transform(r))+")"};function Oye(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Ck={test:TR("#"),parse:Oye,transform:tf.transform},Xh={test:TR("hsl","hue"),parse:O7("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+dl.transform(Wg(t))+", "+dl.transform(Wg(n))+", "+Wg(Z0.transform(r))+")"},ci={test:e=>tf.test(e)||Ck.test(e)||Xh.test(e),parse:e=>tf.test(e)?tf.parse(e):Xh.test(e)?Xh.parse(e):Ck.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?tf.transform(e):Xh.transform(e)},Pye=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fye(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(CR))==null?void 0:t.length)||0)+(((n=e.match(Pye))==null?void 0:n.length)||0)>0}const P7="number",F7="color",Lye="var",$ye="var(",p6="${}",Bye=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function J0(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const o=t.replace(Bye,l=>(ci.test(l)?(r.color.push(i),a.push(F7),n.push(ci.parse(l))):l.startsWith($ye)?(r.var.push(i),a.push(Lye),n.push(l)):(r.number.push(i),a.push(P7),n.push(parseFloat(l))),++i,p6)).split(p6);return{values:n,split:o,indexes:r,types:a}}function L7(e){return J0(e).values}function $7(e){const{split:t,types:n}=J0(e),r=t.length;return a=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],a[s]!==void 0){const o=n[s];o===P7?i+=Wg(a[s]):o===F7?i+=ci.transform(a[s]):i+=a[s]}return i}}const zye=e=>typeof e=="number"?0:e;function Uye(e){const t=L7(e);return $7(e)(t.map(zye))}const Qu={test:Fye,parse:L7,createTransformer:$7,getAnimatableNone:Uye};function FC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Vye({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,s=0;if(!t)a=i=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;a=FC(l,o,e+1/3),i=FC(l,o,e),s=FC(l,o,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:r}}function Jx(e,t){return n=>n>0?t:e}const Xr=(e,t,n)=>e+(t-e)*n,LC=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},Hye=[Ck,tf,Xh],qye=e=>Hye.find(t=>t.test(e));function m6(e){const t=qye(e);if(!t)return!1;let n=t.parse(e);return t===Xh&&(n=Vye(n)),n}const g6=(e,t)=>{const n=m6(e),r=m6(t);if(!n||!r)return Jx(e,t);const a={...n};return i=>(a.red=LC(n.red,r.red,i),a.green=LC(n.green,r.green,i),a.blue=LC(n.blue,r.blue,i),a.alpha=Xr(n.alpha,r.alpha,i),tf.transform(a))},Tk=new Set(["none","hidden"]);function Gye(e,t){return Tk.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}const Wye=(e,t)=>n=>t(e(n)),ib=(...e)=>e.reduce(Wye);function Kye(e,t){return n=>Xr(e,t,n)}function kR(e){return typeof e=="number"?Kye:typeof e=="string"?pR(e)?Jx:ci.test(e)?g6:Xye:Array.isArray(e)?B7:typeof e=="object"?ci.test(e)?g6:Zye:Jx}function B7(e,t){const n=[...e],r=n.length,a=e.map((i,s)=>kR(i)(i,t[s]));return i=>{for(let s=0;s<r;s++)n[s]=a[s](i);return n}}function Zye(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=kR(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function Yye(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],s=e.indexes[i][r[i]],o=e.values[s]??0;n[a]=o,r[i]++}return n}const Xye=(e,t)=>{const n=Qu.createTransformer(t),r=J0(e),a=J0(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Tk.has(e)&&!a.values.length||Tk.has(t)&&!r.values.length?Gye(e,t):ib(B7(Yye(r,a),a.values),n):Jx(e,t)};function z7(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Xr(e,t,n):kR(e)(e,t)}const Jye=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ea.update(t,!0),stop:()=>Ju(t),now:()=>ei.isProcessing?ei.timestamp:Wi.now()}},U7=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=e(i/(a-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Qx=2e4;function AR(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Qx;)t+=n,r=e.next(t);return t>=Qx?1/0:t}function Qye(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(AR(r),Qx);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:hl(a)}}const ebe=5;function V7(e,t,n){const r=Math.max(t-ebe,0);return D7(n-e(r),t-r)}const ra={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},y6=.001;function tbe({duration:e=ra.duration,bounce:t=ra.bounce,velocity:n=ra.velocity,mass:r=ra.mass}){let a,i,s=1-t;s=Ec(ra.minDamping,ra.maxDamping,s),e=Ec(ra.minDuration,ra.maxDuration,hl(e)),s<1?(a=c=>{const d=c*s,h=d*e,p=d-n,g=kk(c,s),v=Math.exp(-h);return y6-p/g*v},i=c=>{const h=c*s*e,p=h*n+n,g=Math.pow(s,2)*Math.pow(c,2)*e,v=Math.exp(-h),b=kk(Math.pow(c,2),s);return(-a(c)+y6>0?-1:1)*((p-g)*v)/b}):(a=c=>{const d=Math.exp(-c*e),h=(c-n)*e+1;return-.001+d*h},i=c=>{const d=Math.exp(-c*e),h=(n-c)*(e*e);return d*h});const o=5/e,l=rbe(a,i,o);if(e=fl(e),isNaN(l))return{stiffness:ra.stiffness,damping:ra.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:e}}}const nbe=12;function rbe(e,t,n){let r=n;for(let a=1;a<nbe;a++)r=r-e(r)/t(r);return r}function kk(e,t){return e*Math.sqrt(1-t*t)}const abe=["duration","bounce"],ibe=["stiffness","damping","mass"];function b6(e,t){return t.some(n=>e[n]!==void 0)}function sbe(e){let t={velocity:ra.velocity,stiffness:ra.stiffness,damping:ra.damping,mass:ra.mass,isResolvedFromDuration:!1,...e};if(!b6(e,ibe)&&b6(e,abe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*Ec(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:ra.mass,stiffness:a,damping:i}}else{const n=tbe(e);t={...t,...n,mass:ra.mass},t.isResolvedFromDuration=!0}return t}function e1(e=ra.visualDuration,t=ra.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:p,isResolvedFromDuration:g}=sbe({...n,velocity:-hl(n.velocity||0)}),v=p||0,b=c/(2*Math.sqrt(l*d)),x=s-i,w=hl(Math.sqrt(l/d)),S=Math.abs(x)<5;r||(r=S?ra.restSpeed.granular:ra.restSpeed.default),a||(a=S?ra.restDelta.granular:ra.restDelta.default);let E;if(b<1){const k=kk(w,b);E=j=>{const I=Math.exp(-b*w*j);return s-I*((v+b*w*x)/k*Math.sin(k*j)+x*Math.cos(k*j))}}else if(b===1)E=k=>s-Math.exp(-w*k)*(x+(v+w*x)*k);else{const k=w*Math.sqrt(b*b-1);E=j=>{const I=Math.exp(-b*w*j),N=Math.min(k*j,300);return s-I*((v+b*w*x)*Math.sinh(N)+k*x*Math.cosh(N))/k}}const C={calculatedDuration:g&&h||null,next:k=>{const j=E(k);if(g)o.done=k>=h;else{let I=k===0?v:0;b<1&&(I=k===0?fl(v):V7(E,k,j));const N=Math.abs(I)<=r,P=Math.abs(s-j)<=a;o.done=N&&P}return o.value=o.done?s:j,o},toString:()=>{const k=Math.min(AR(C),Qx),j=U7(I=>C.next(k*I).value,k,30);return k+"ms "+j},toTransition:()=>{}};return C}e1.applyToOptions=e=>{const t=Qye(e,100,e1);return e.ease=t.ease,e.duration=fl(t.duration),e.type="keyframes",e};function Ak({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:o,max:l,restDelta:c=.5,restSpeed:d}){const h=e[0],p={done:!1,value:h},g=N=>o!==void 0&&N<o||l!==void 0&&N>l,v=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let b=n*t;const x=h+b,w=s===void 0?x:s(x);w!==x&&(b=w-h);const S=N=>-b*Math.exp(-N/r),E=N=>w+S(N),C=N=>{const P=S(N),L=E(N);p.done=Math.abs(P)<=c,p.value=p.done?w:L};let k,j;const I=N=>{g(p.value)&&(k=N,j=e1({keyframes:[p.value,v(p.value)],velocity:V7(E,N,p.value),damping:a,stiffness:i,restDelta:c,restSpeed:d}))};return I(0),{calculatedDuration:null,next:N=>{let P=!1;return!j&&k===void 0&&(P=!0,C(N),I(N)),k!==void 0&&N>=k?j.next(N-k):(!P&&C(N),p)}}}const Q0=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};function obe(e,t,n){const r=[],a=n||Sc.mix||z7,i=e.length-1;for(let s=0;s<i;s++){let o=a(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||Us:t;o=ib(l,o)}r.push(o)}return r}function lbe(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(fR(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=obe(t,r,a),l=o.length,c=d=>{if(s&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const p=Q0(e[h],e[h+1],d);return o[h](p)};return n?d=>c(Ec(e[0],e[i-1],d)):c}function cbe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Q0(0,t,r);e.push(Xr(n,1,a))}}function ube(e){const t=[0];return cbe(t,e.length-1),t}function dbe(e,t){return e.map(n=>n*t)}const H7=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,fbe=1e-7,hbe=12;function pbe(e,t,n,r,a){let i,s,o=0;do s=t+(n-t)/2,i=H7(s,r,a)-e,i>0?n=s:t=s;while(Math.abs(i)>fbe&&++o<hbe);return s}function sb(e,t,n,r){if(e===t&&n===r)return Us;const a=i=>pbe(i,0,1,e,n);return i=>i===0||i===1?i:H7(a(i),t,r)}const mbe=sb(.42,0,1,1),gbe=sb(0,0,.58,1),q7=sb(.42,0,.58,1),ybe=e=>Array.isArray(e)&&typeof e[0]!="number",G7=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,W7=e=>t=>1-e(1-t),K7=sb(.33,1.53,.69,.99),NR=W7(K7),Z7=G7(NR),Y7=e=>(e*=2)<1?.5*NR(e):.5*(2-Math.pow(2,-10*(e-1))),RR=e=>1-Math.sin(Math.acos(e)),X7=W7(RR),J7=G7(RR),Q7=e=>Array.isArray(e)&&typeof e[0]=="number",bbe={linear:Us,easeIn:mbe,easeInOut:q7,easeOut:gbe,circIn:RR,circInOut:J7,circOut:X7,backIn:NR,backInOut:Z7,backOut:K7,anticipate:Y7},vbe=e=>typeof e=="string",v6=e=>{if(Q7(e)){fR(e.length===4);const[t,n,r,a]=e;return sb(t,n,r,a)}else if(vbe(e))return bbe[e];return e};function wbe(e,t){return e.map(()=>t||q7).splice(0,e.length-1)}function Kg({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=ybe(r)?r.map(v6):v6(r),i={done:!1,value:t[0]},s=dbe(n&&n.length===t.length?n:ube(t),e),o=lbe(s,t,{ease:Array.isArray(a)?a:wbe(t,a)});return{calculatedDuration:e,next:l=>(i.value=o(l),i.done=l>=e,i)}}const xbe=e=>e!==null;function IR(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(xbe),o=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const _be={decay:Ak,inertia:Ak,tween:Kg,keyframes:Kg,spring:e1};function ez(e){typeof e.type=="string"&&(e.type=_be[e.type])}class jR{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Sbe=e=>e/100;class tz extends jR{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;if(n&&n.updatedAt!==Wi.now()&&this.tick(Wi.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:r}=this.options;r&&r()},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ez(t);const{type:n=Kg,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:s=0}=t;let{keyframes:o}=t;const l=n||Kg;l!==Kg&&typeof o[0]!="number"&&(this.mixKeyframes=ib(Sbe,z7(o[0],o[1])),o=[0,100]);const c=l({...t,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=AR(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:g,type:v,onUpdate:b,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?w<0:w>a;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let E=this.currentTime,C=r;if(h){const N=Math.min(this.currentTime,a)/o;let P=Math.floor(N),L=N%1;!L&&N>=1&&(L=1),L===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(p==="reverse"?(L=1-L,g&&(L-=g/o)):p==="mirror"&&(C=s)),E=Ec(0,1,L)*o}const k=S?{done:!1,value:d[0]}:C.next(E);i&&(k.value=i(k.value));let{done:j}=k;!S&&l!==null&&(j=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return I&&v!==Ak&&(k.value=IR(d,this.options,x,this.speed)),b&&b(k.value),I&&this.finish(),k}then(t,n){return this.finished.then(t,n)}get duration(){return hl(this.calculatedDuration)}get time(){return hl(this.currentTime)}set time(t){t=fl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Wi.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hl(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Jye,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),t.observe(this)}}function Ebe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const nf=e=>e*180/Math.PI,Nk=e=>{const t=nf(Math.atan2(e[1],e[0]));return Rk(t)},Cbe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Nk,rotateZ:Nk,skewX:e=>nf(Math.atan(e[1])),skewY:e=>nf(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Rk=e=>(e=e%360,e<0&&(e+=360),e),w6=Nk,x6=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),_6=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Tbe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:x6,scaleY:_6,scale:e=>(x6(e)+_6(e))/2,rotateX:e=>Rk(nf(Math.atan2(e[6],e[5]))),rotateY:e=>Rk(nf(Math.atan2(-e[2],e[0]))),rotateZ:w6,rotate:w6,skewX:e=>nf(Math.atan(e[4])),skewY:e=>nf(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function S6(e){return e.includes("scale")?1:0}function Ik(e,t){if(!e||e==="none")return S6(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=Tbe,a=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Cbe,a=o}if(!a)return S6(t);const i=r[t],s=a[1].split(",").map(Abe);return typeof i=="function"?i(s):s[i]}const kbe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Ik(n,t)};function Abe(e){return parseFloat(e.trim())}const E6=e=>e===cm||e===En,Nbe=new Set(["x","y","z"]),Rbe=om.filter(e=>!Nbe.has(e));function Ibe(e){const t=[];return Rbe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const cf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ik(t,"x"),y:(e,{transform:t})=>Ik(t,"y")};cf.translateX=cf.x;cf.translateY=cf.y;const uf=new Set;let jk=!1,Dk=!1,Mk=!1;function nz(){if(Dk){const e=Array.from(uf).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=Ibe(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,s])=>{var o;(o=r.getValue(i))==null||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Dk=!1,jk=!1,uf.forEach(e=>e.complete(Mk)),uf.clear()}function rz(){uf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Dk=!0)})}function jbe(){Mk=!0,rz(),nz(),Mk=!1}class DR{constructor(t,n,r,a,i,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(uf.add(this),jk||(jk=!0,ea.read(rz),ea.resolveKeyframes(nz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),s=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const o=r.readValue(n,s);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=s),a&&i===void 0&&a.set(t[0])}Ebe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),uf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,uf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Dbe=e=>e.startsWith("--");function Mbe(e,t,n){Dbe(t)?e.style.setProperty(t,n):e.style[t]=n}function MR(e){let t;return()=>(t===void 0&&(t=e()),t)}const Obe=MR(()=>window.ScrollTimeline!==void 0),Pbe={};function Fbe(e,t){const n=MR(e);return()=>Pbe[t]??n()}const az=Fbe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Lg=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,C6={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lg([0,.65,.55,1]),circOut:Lg([.55,0,1,.45]),backIn:Lg([.31,.01,.66,-.59]),backOut:Lg([.33,1.53,.69,.99])};function iz(e,t){if(e)return typeof e=="function"?az()?U7(e,t):"ease-out":Q7(e)?Lg(e):Array.isArray(e)?e.map(n=>iz(n,t)||C6.easeOut):C6[e]}function Lbe(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:s="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const h=iz(o,a);Array.isArray(h)&&(d.easing=h);const p={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),e.animate(d,p)}function sz(e){return typeof e=="function"&&"applyToOptions"in e}function $be({type:e,...t}){return sz(e)&&az()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Bbe extends jR{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=t,fR(typeof t.type!="string");const c=$be(t);this.animation=Lbe(n,r,a,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=IR(a,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):Mbe(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return hl(Number(t))}get time(){return hl(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=fl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Obe()?(this.animation.timeline=t,Us):n(this)}}const oz={anticipate:Y7,backInOut:Z7,circInOut:J7};function zbe(e){return e in oz}function Ube(e){typeof e.ease=="string"&&zbe(e.ease)&&(e.ease=oz[e.ease])}const T6=10;class Vbe extends Bbe{constructor(t){Ube(t),ez(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new tz({...s,autoplay:!1}),l=fl(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-T6).value,o.sample(l).value,T6),o.stop()}}const k6=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Qu.test(e)||e==="0")&&!e.startsWith("url("));function Hbe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function qbe(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],s=k6(a,t),o=k6(i,t);return!s||!o?!1:Hbe(e)||(n==="spring"||sz(n))&&r}const Gbe=new Set(["opacity","clipPath","filter","transform"]),Wbe=MR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Kbe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Wbe()&&n&&Gbe.has(n)&&(n!=="transform"||!l)&&!o&&!r&&a!=="mirror"&&i!==0&&s!=="inertia"}const Zbe=40;class Ybe extends jR{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:s="loop",keyframes:o,name:l,motionValue:c,element:d,...h}){var v;super(),this.stop=()=>{var b,x;this._animation?(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)):(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Wi.now();const p={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:s,name:l,motionValue:c,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||DR;this.keyframeResolver=new g(o,(b,x,w)=>this.onKeyframesResolved(b,x,p,!w),l,c,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:s,velocity:o,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=Wi.now(),qbe(t,i,s,o)||((Sc.instantAnimations||!l)&&(d==null||d(IR(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const p={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>Zbe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},g=!c&&Kbe(p)?new Vbe({...p,element:p.motionValue.owner.current}):new tz(p);g.finished.then(()=>this.notifyFinished()).catch(Us),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||jbe(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const OR=(e,t,n,r={},a,i)=>s=>{const o=ER(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-fl(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:p=>{t.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:a};Iye(o)||Object.assign(d,Rye(e,d)),d.duration&&(d.duration=fl(d.duration)),d.repeatDelay&&(d.repeatDelay=fl(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(Sc.instantAnimations||Sc.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&t.get()!==void 0){const p=Cye(d.keyframes,o);if(p!==void 0){ea.update(()=>{d.onUpdate(p),d.onComplete()});return}}return new Ybe(d)},lz=new Set(["width","height","top","left","right","bottom",...om]);function Xbe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function cz(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...o}=t;r&&(i=r);const l=[],c=a&&e.animationState&&e.animationState.getState()[a];for(const d in o){const h=e.getValue(d,e.latestValues[d]??null),p=o[d];if(p===void 0||c&&Xbe(c,d))continue;const g={delay:n,...ER(i||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===v&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const w=M7(e);if(w){const S=window.MotionHandoffAnimation(w,d,ea);S!==null&&(g.startTime=S,b=!0)}}Ek(e,d),h.start(OR(d,h,p,e.shouldReduceMotion&&lz.has(d)?{type:!1}:g,e,b));const x=h.animation;x&&l.push(x)}return s&&Promise.all(l).then(()=>{ea.update(()=>{s&&_ye(e,s)})}),l}function Ok(e,t,n={}){var l;const r=Y0(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(cz(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=a;return Jbe(e,t,d+c,h,p,n)}:()=>Promise.resolve(),{when:o}=a;if(o){const[c,d]=o==="beforeChildren"?[i,s]:[s,i];return c().then(()=>d())}else return Promise.all([i(),s(n.delay)])}function Jbe(e,t,n=0,r=0,a=1,i){const s=[],o=(e.variantChildren.size-1)*r,l=a===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(e.variantChildren).sort(Qbe).forEach((c,d)=>{c.notify("AnimationStart",t),s.push(Ok(c,t,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(s)}function Qbe(e,t){return e.sortNodePosition(t)}function eve(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>Ok(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=Ok(e,t,n);else{const a=typeof t=="function"?Y0(e,t,n.custom):t;r=Promise.all(cz(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function uz(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const tve=cR.length;function dz(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?dz(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<tve;n++){const r=cR[n],a=e.props[r];(W0(a)||a===!1)&&(t[r]=a)}return t}const nve=[...lR].reverse(),rve=lR.length;function ave(e){return t=>Promise.all(t.map(({animation:n,options:r})=>eve(e,n,r)))}function ive(e){let t=ave(e),n=A6(),r=!0;const a=l=>(c,d)=>{var p;const h=Y0(e,d,l==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;c={...c,...b,...v}}return c};function i(l){t=l(e)}function s(l){const{props:c}=e,d=dz(e.parent)||{},h=[],p=new Set;let g={},v=1/0;for(let x=0;x<rve;x++){const w=nve[x],S=n[w],E=c[w]!==void 0?c[w]:d[w],C=W0(E),k=w===l?S.isActive:null;k===!1&&(v=x);let j=E===d[w]&&E!==c[w]&&C;if(j&&r&&e.manuallyAnimateOnMount&&(j=!1),S.protectedKeys={...g},!S.isActive&&k===null||!E&&!S.prevProp||x_(E)||typeof E=="boolean")continue;const I=sve(S.prevProp,E);let N=I||w===l&&S.isActive&&!j&&C||x>v&&C,P=!1;const L=Array.isArray(E)?E:[E];let H=L.reduce(a(w),{});k===!1&&(H={});const{prevResolvedValues:M={}}=S,Z={...M,...H},q=ee=>{N=!0,p.has(ee)&&(P=!0,p.delete(ee)),S.needsAnimating[ee]=!0;const X=e.getValue(ee);X&&(X.liveStyle=!1)};for(const ee in Z){const X=H[ee],ie=M[ee];if(g.hasOwnProperty(ee))continue;let B=!1;Sk(X)&&Sk(ie)?B=!uz(X,ie):B=X!==ie,B?X!=null?q(ee):p.add(ee):X!==void 0&&p.has(ee)?q(ee):S.protectedKeys[ee]=!0}S.prevProp=E,S.prevResolvedValues=H,S.isActive&&(g={...g,...H}),r&&e.blockInitialAnimation&&(N=!1),N&&(!(j&&I)||P)&&h.push(...L.map(ee=>({animation:ee,options:{type:w}})))}if(p.size){const x={};if(typeof c.initial!="boolean"){const w=Y0(e,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(x.transition=w.transition)}p.forEach(w=>{const S=e.getBaseTarget(w),E=e.getValue(w);E&&(E.liveStyle=!0),x[w]=S??null}),h.push({animation:x})}let b=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(h):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const d=s(l);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=A6(),r=!0}}}function sve(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!uz(t,e):!1}function qd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function A6(){return{animate:qd(!0),whileInView:qd(),whileHover:qd(),whileTap:qd(),whileDrag:qd(),whileFocus:qd(),exit:qd()}}class ud{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ove extends ud{constructor(t){super(t),t.animationState||(t.animationState=ive(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();x_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let lve=0;class cve extends ud{constructor(){super(...arguments),this.id=lve++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const uve={animation:{Feature:ove},exit:{Feature:cve}};function ey(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const PR=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ob(e){return{point:{x:e.pageX,y:e.pageY}}}const dve=e=>t=>PR(t)&&e(t,ob(t));function Zg(e,t,n,r){return ey(e,t,dve(n),r)}function fz({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function fve({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function hve(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const hz=1e-4,pve=1-hz,mve=1+hz,pz=.01,gve=0-pz,yve=0+pz;function Ai(e){return e.max-e.min}function bve(e,t,n){return Math.abs(e-t)<=n}function N6(e,t,n,r=.5){e.origin=r,e.originPoint=Xr(t.min,t.max,e.origin),e.scale=Ai(n)/Ai(t),e.translate=Xr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=pve&&e.scale<=mve||isNaN(e.scale))&&(e.scale=1),(e.translate>=gve&&e.translate<=yve||isNaN(e.translate))&&(e.translate=0)}function Yg(e,t,n,r){N6(e.x,t.x,n.x,r?r.originX:void 0),N6(e.y,t.y,n.y,r?r.originY:void 0)}function R6(e,t,n){e.min=n.min+t.min,e.max=e.min+Ai(t)}function vve(e,t,n){R6(e.x,t.x,n.x),R6(e.y,t.y,n.y)}function I6(e,t,n){e.min=t.min-n.min,e.max=e.min+Ai(t)}function Xg(e,t,n){I6(e.x,t.x,n.x),I6(e.y,t.y,n.y)}const j6=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jh=()=>({x:j6(),y:j6()}),D6=()=>({min:0,max:0}),ua=()=>({x:D6(),y:D6()});function Os(e){return[e("x"),e("y")]}function $C(e){return e===void 0||e===1}function Pk({scale:e,scaleX:t,scaleY:n}){return!$C(e)||!$C(t)||!$C(n)}function Wd(e){return Pk(e)||mz(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function mz(e){return M6(e.x)||M6(e.y)}function M6(e){return e&&e!=="0%"}function t1(e,t,n){const r=e-n,a=t*r;return n+a}function O6(e,t,n,r,a){return a!==void 0&&(e=t1(e,a,r)),t1(e,n,r)+t}function Fk(e,t=0,n=1,r,a){e.min=O6(e.min,t,n,r,a),e.max=O6(e.max,t,n,r,a)}function gz(e,{x:t,y:n}){Fk(e.x,t.translate,t.scale,t.originPoint),Fk(e.y,n.translate,n.scale,n.originPoint)}const P6=.999999999999,F6=1.0000000000001;function wve(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,s;for(let o=0;o<a;o++){i=n[o],s=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ep(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,gz(e,s)),r&&Wd(i.latestValues)&&ep(e,i.latestValues))}t.x<F6&&t.x>P6&&(t.x=1),t.y<F6&&t.y>P6&&(t.y=1)}function Qh(e,t){e.min=e.min+t,e.max=e.max+t}function L6(e,t,n,r,a=.5){const i=Xr(e.min,e.max,a);Fk(e,t,n,i,r)}function ep(e,t){L6(e.x,t.x,t.scaleX,t.scale,t.originX),L6(e.y,t.y,t.scaleY,t.scale,t.originY)}function yz(e,t){return fz(hve(e.getBoundingClientRect(),t))}function xve(e,t,n){const r=yz(e,n),{scroll:a}=t;return a&&(Qh(r.x,a.offset.x),Qh(r.y,a.offset.y)),r}const bz=({current:e})=>e?e.ownerDocument.defaultView:null,$6=(e,t)=>Math.abs(e-t);function _ve(e,t){const n=$6(e.x,t.x),r=$6(e.y,t.y);return Math.sqrt(n**2+r**2)}class vz{constructor(t,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=zC(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=_ve(h.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:v}=h,{timestamp:b}=ei;this.history.push({...v,timestamp:b});const{onStart:x,onMove:w}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=BC(p,this.transformPagePoint),ea.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=zC(h.type==="pointercancel"?this.lastMoveEventInfo:BC(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,x),v&&v(h,x)},!PR(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const s=ob(t),o=BC(s,this.transformPagePoint),{point:l}=o,{timestamp:c}=ei;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,zC(o,this.history)),this.removeListeners=ib(Zg(this.contextWindow,"pointermove",this.handlePointerMove),Zg(this.contextWindow,"pointerup",this.handlePointerUp),Zg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ju(this.updatePoint)}}function BC(e,t){return t?{point:t(e.point)}:e}function B6(e,t){return{x:e.x-t.x,y:e.y-t.y}}function zC({point:e},t){return{point:e,delta:B6(e,wz(t)),offset:B6(e,Sve(t)),velocity:Eve(t,.1)}}function Sve(e){return e[0]}function wz(e){return e[e.length-1]}function Eve(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=wz(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>fl(t)));)n--;if(!r)return{x:0,y:0};const i=hl(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const s={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Cve(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Xr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Xr(n,e,r.max):Math.min(e,n)),e}function z6(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Tve(e,{top:t,left:n,bottom:r,right:a}){return{x:z6(e.x,n,a),y:z6(e.y,t,r)}}function U6(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function kve(e,t){return{x:U6(e.x,t.x),y:U6(e.y,t.y)}}function Ave(e,t){let n=.5;const r=Ai(e),a=Ai(t);return a>r?n=Q0(t.min,t.max-r,e.min):r>a&&(n=Q0(e.min,e.max-a,t.min)),Ec(0,1,n)}function Nve(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Lk=.35;function Rve(e=Lk){return e===!1?e=0:e===!0&&(e=Lk),{x:V6(e,"left","right"),y:V6(e,"top","bottom")}}function V6(e,t,n){return{min:H6(e,t),max:H6(e,n)}}function H6(e,t){return typeof e=="number"?e:e[t]||0}const io={x:!1,y:!1};function xz(){return io.x||io.y}function Ive(e){return e==="x"||e==="y"?io[e]?null:(io[e]=!0,()=>{io[e]=!1}):io.x||io.y?null:(io.x=io.y=!0,()=>{io.x=io.y=!1})}const jve=new WeakMap;class Dve{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ua(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ob(d).point)},i=(d,h)=>{const{drag:p,dragPropagation:g,onDragStart:v}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ive(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Os(x=>{let w=this.getAxisMotionValue(x).get()||0;if(dl.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const E=S.layout.layoutBox[x];E&&(w=Ai(E)*(parseFloat(w)/100))}}this.originPoint[x]=w}),v&&ea.postRender(()=>v(d,h)),Ek(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:v,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=h;if(g&&this.currentDirection===null){this.currentDirection=Mve(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),b&&b(d,h)},o=(d,h)=>this.stop(d,h),l=()=>Os(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new vz(t,{onSessionStart:a,onStart:i,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:bz(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ea.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!Sw(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=Cve(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&Yh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Tve(r.layoutBox,t):this.constraints=!1,this.elastic=Rve(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Os(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Nve(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Yh(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=xve(r,a.root,this.visualElement.getTransformPagePoint());let s=kve(a.layout.layoutBox,i);if(n){const o=n(fve(s));this.hasMutatedConstraints=!!o,o&&(s=fz(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Os(d=>{if(!Sw(d,n,this.currentDirection))return;let h=l&&l[d]||{};s&&(h={min:0,max:0});const p=a?200:1e6,g=a?40:1e7,v={type:"inertia",velocity:r?t[d]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(c).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Ek(this.visualElement,t),r.start(OR(t,r,0,n,this.visualElement,!1))}stopAnimation(){Os(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Os(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Os(n=>{const{drag:r}=this.getProps();if(!Sw(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:s,max:o}=a.layout.layoutBox[n];i.set(t[n]-Xr(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yh(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Os(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();a[s]=Ave({min:l,max:l},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Os(s=>{if(!Sw(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:c}=this.constraints[s];o.set(Xr(l,c,a[s]))})}addListeners(){if(!this.visualElement.current)return;jve.set(this.visualElement,this);const t=this.visualElement.current,n=Zg(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Yh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ea.read(r);const s=ey(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Os(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{s(),n(),i(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:s=Lk,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function Sw(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Mve(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Ove extends ud{constructor(t){super(t),this.removeGroupControls=Us,this.removeListeners=Us,this.controls=new Dve(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Us}unmount(){this.removeGroupControls(),this.removeListeners()}}const q6=e=>(t,n)=>{e&&ea.postRender(()=>e(t,n))};class Pve extends ud{constructor(){super(...arguments),this.removePointerDownListener=Us}onPointerDown(t){this.session=new vz(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bz(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:q6(t),onStart:q6(n),onMove:r,onEnd:(i,s)=>{delete this.session,a&&ea.postRender(()=>a(i,s))}}}mount(){this.removePointerDownListener=Zg(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function G6(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ig={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(En.test(e))e=parseFloat(e);else return e;const n=G6(e,t.target.x),r=G6(e,t.target.y);return`${n}% ${r}%`}},Fve={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=Qu.parse(e);if(a.length>5)return r;const i=Qu.createTransformer(e),s=typeof a[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;a[0+s]/=o,a[1+s]/=l;const c=Xr(o,l,.5);return typeof a[2+s]=="number"&&(a[2+s]/=c),typeof a[3+s]=="number"&&(a[3+s]/=c),i(a)}};class Lve extends T.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;Y0e($ve),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),qw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||ea.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),dR.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function _z(e){const[t,n]=g7(),r=T.useContext(aR);return m.jsx(Lve,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(_7),isPresent:t,safeToRemove:n})}const $ve={borderRadius:{...Ig,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ig,borderTopRightRadius:Ig,borderBottomLeftRadius:Ig,borderBottomRightRadius:Ig,boxShadow:Fve};function Bve(e,t,n){const r=hi(e)?e:X0(e);return r.start(OR("",r,t,n)),r.animation}function zve(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Uve=(e,t)=>e.depth-t.depth;class Vve{constructor(){this.children=[],this.isDirty=!1}add(t){xR(this.children,t),this.isDirty=!0}remove(t){_R(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Uve),this.isDirty=!1,this.children.forEach(t)}}function Hve(e,t){const n=Wi.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(Ju(r),e(i-t))};return ea.setup(r,!0),()=>Ju(r)}const Sz=["TopLeft","TopRight","BottomLeft","BottomRight"],qve=Sz.length,W6=e=>typeof e=="string"?parseFloat(e):e,K6=e=>typeof e=="number"||En.test(e);function Gve(e,t,n,r,a,i){a?(e.opacity=Xr(0,n.opacity??1,Wve(r)),e.opacityExit=Xr(t.opacity??1,0,Kve(r))):i&&(e.opacity=Xr(t.opacity??1,n.opacity??1,r));for(let s=0;s<qve;s++){const o=`border${Sz[s]}Radius`;let l=Z6(t,o),c=Z6(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||K6(l)===K6(c)?(e[o]=Math.max(Xr(W6(l),W6(c),r),0),(dl.test(c)||dl.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||n.rotate)&&(e.rotate=Xr(t.rotate||0,n.rotate||0,r))}function Z6(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Wve=Ez(0,.5,X7),Kve=Ez(.5,.95,Us);function Ez(e,t,n){return r=>r<e?0:r>t?1:n(Q0(e,t,r))}function Y6(e,t){e.min=t.min,e.max=t.max}function Ms(e,t){Y6(e.x,t.x),Y6(e.y,t.y)}function X6(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function J6(e,t,n,r,a){return e-=t,e=t1(e,1/n,r),a!==void 0&&(e=t1(e,1/a,r)),e}function Zve(e,t=0,n=1,r=.5,a,i=e,s=e){if(dl.test(t)&&(t=parseFloat(t),t=Xr(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Xr(i.min,i.max,r);e===i&&(o-=t),e.min=J6(e.min,t,n,o,a),e.max=J6(e.max,t,n,o,a)}function Q6(e,t,[n,r,a],i,s){Zve(e,t[n],t[r],t[a],t.scale,i,s)}const Yve=["x","scaleX","originX"],Xve=["y","scaleY","originY"];function eP(e,t,n,r){Q6(e.x,t,Yve,n?n.x:void 0,r?r.x:void 0),Q6(e.y,t,Xve,n?n.y:void 0,r?r.y:void 0)}function tP(e){return e.translate===0&&e.scale===1}function Cz(e){return tP(e.x)&&tP(e.y)}function nP(e,t){return e.min===t.min&&e.max===t.max}function Jve(e,t){return nP(e.x,t.x)&&nP(e.y,t.y)}function rP(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Tz(e,t){return rP(e.x,t.x)&&rP(e.y,t.y)}function aP(e){return Ai(e.x)/Ai(e.y)}function iP(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Qve{constructor(){this.members=[]}add(t){xR(this.members,t),t.scheduleRender()}remove(t){if(_R(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ewe(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((a||i||s)&&(r=`translate3d(${a}px, ${i}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:p,skewX:g,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const UC=["","X","Y","Z"],twe={visibility:"hidden"},sP=1e3;let nwe=0;function VC(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function kz(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=M7(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ea,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&kz(r)}function Az({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(s={},o=t==null?void 0:t()){this.id=nwe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(iwe),this.nodes.forEach(uwe),this.nodes.forEach(dwe),this.nodes.forEach(swe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Vve)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new SR),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=zve(s),this.instance=s;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Hve(h,250),qw.hasAnimatedSinceResize&&(qw.hasAnimatedSinceResize=!1,this.nodes.forEach(lP))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||gwe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=c.getProps(),w=!this.targetLayout||!Tz(this.targetLayout,g),S=!h&&p;if(this.options.layoutRoot||this.resumeFrom||S||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const E={...ER(v,"layout"),onPlay:b,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||lP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ju(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fwe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kz(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(oP);return}this.isUpdating||this.nodes.forEach(lwe),this.isUpdating=!1,this.nodes.forEach(cwe),this.nodes.forEach(rwe),this.nodes.forEach(awe),this.clearAllSnapshots();const o=Wi.now();ei.delta=Ec(0,1e3/60,o-ei.timestamp),ei.timestamp=o,ei.isProcessing=!0,OC.update.process(ei),OC.preRender.process(ei),OC.render.process(ei),ei.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(owe),this.sharedNodes.forEach(hwe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ea.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ea.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ai(this.snapshot.measuredBox.x)&&!Ai(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ua(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!a)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Cz(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;s&&this.instance&&(o||Wd(this.latestValues)||d)&&(a(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),ywe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:s}=this.options;if(!s)return ua();const o=s.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(bwe))){const{scroll:d}=this.root;d&&(Qh(o.x,d.offset.x),Qh(o.y,d.offset.y))}return o}removeElementScroll(s){var l;const o=ua();if(Ms(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Ms(o,s),Qh(o.x,h.offset.x),Qh(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const l=ua();Ms(l,s);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ep(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Wd(d.latestValues)&&ep(l,d.latestValues)}return Wd(this.latestValues)&&ep(l,this.latestValues),l}removeTransform(s){const o=ua();Ms(o,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Wd(c.latestValues))continue;Pk(c.latestValues)&&c.updateSnapshot();const d=ua(),h=c.measurePageBox();Ms(d,h),eP(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Wd(this.latestValues)&&eP(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ei.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=ei.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ua(),this.relativeTargetOrigin=ua(),Xg(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ua(),this.targetWithTransforms=ua()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vve(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ms(this.target,this.layout.layoutBox),gz(this.target,this.targetDelta)):Ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ua(),this.relativeTargetOrigin=ua(),Xg(this.relativeTargetOrigin,this.target,g.target),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Pk(this.parent.latestValues)||mz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ei.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Ms(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;wve(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=ua());const{target:g}=s;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(X6(this.prevProjectionDelta.x,this.projectionDelta.x),X6(this.prevProjectionDelta.y,this.projectionDelta.y)),Yg(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!iP(this.projectionDelta.x,this.prevProjectionDelta.x)||!iP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jh(),this.projectionDelta=Jh(),this.projectionDeltaWithTransform=Jh()}setAnimationOrigin(s,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=Jh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=ua(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,b=g!==v,x=this.getStack(),w=!x||x.members.length<=1,S=!!(b&&!w&&this.options.crossfade===!0&&!this.path.some(mwe));this.animationProgress=0;let E;this.mixTargetDelta=C=>{const k=C/1e3;cP(h.x,s.x,k),cP(h.y,s.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xg(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),pwe(this.relativeTarget,this.relativeTargetOrigin,p,k),E&&Jve(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ua()),Ms(E,this.relativeTarget)),b&&(this.animationValues=d,Gve(d,c,this.latestValues,k,S,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ju(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ea.update(()=>{qw.hasAnimatedSinceResize=!0,this.currentAnimation=Bve(0,sP,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=s;if(!(!o||!l||!c)){if(this!==s&&this.layout&&c&&Nz(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ua();const h=Ai(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+h;const p=Ai(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+p}Ms(o,l),ep(o,d),Yg(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Qve),this.sharedNodes.get(s).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&VC("z",s,c,this.animationValues);for(let d=0;d<UC.length;d++)VC(`rotate${UC[d]}`,s,c,this.animationValues),VC(`skew${UC[d]}`,s,c,this.animationValues);s.render();for(const d in c)s.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);s.scheduleRender()}getProjectionStyles(s){if(!this.instance||this.isSVG)return;if(!this.isVisible)return twe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=Vw(s==null?void 0:s.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Vw(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Wd(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),o.transform=ewe(this.projectionDeltaWithTransform,this.treeScale,d),l&&(o.transform=l(d,o.transform));const{x:h,y:p}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in K0){if(d[g]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:x}=K0[g],w=o.transform==="none"?d[g]:v(d[g],c);if(b){const S=b.length;for(let E=0;E<S;E++)o[b[E]]=w}else x?this.options.visualElement.renderState.vars[g]=w:o[g]=w}return this.options.layoutId&&(o.pointerEvents=c===this?Vw(s==null?void 0:s.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(oP),this.root.sharedNodes.clear()}}}function rwe(e){e.updateLayout()}function awe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?Os(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=Ai(p);p.min=r[h].min,p.max=p.min+g}):Nz(i,t.layoutBox,r)&&Os(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=Ai(r[h]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=Jh();Yg(o,r,t.layoutBox);const l=Jh();s?Yg(l,e.applyTransform(a,!0),t.measuredBox):Yg(l,r,t.layoutBox);const c=!Cz(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const v=ua();Xg(v,t.layoutBox,p.layoutBox);const b=ua();Xg(b,r,g.layoutBox),Tz(v,b)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function iwe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function swe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function owe(e){e.clearSnapshot()}function oP(e){e.clearMeasurements()}function lwe(e){e.isLayoutDirty=!1}function cwe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function lP(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function uwe(e){e.resolveTargetDelta()}function dwe(e){e.calcProjection()}function fwe(e){e.resetSkewAndRotation()}function hwe(e){e.removeLeadSnapshot()}function cP(e,t,n){e.translate=Xr(t.translate,0,n),e.scale=Xr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function uP(e,t,n,r){e.min=Xr(t.min,n.min,r),e.max=Xr(t.max,n.max,r)}function pwe(e,t,n,r){uP(e.x,t.x,n.x,r),uP(e.y,t.y,n.y,r)}function mwe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const gwe={duration:.45,ease:[.4,0,.1,1]},dP=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),fP=dP("applewebkit/")&&!dP("chrome/")?Math.round:Us;function hP(e){e.min=fP(e.min),e.max=fP(e.max)}function ywe(e){hP(e.x),hP(e.y)}function Nz(e,t,n){return e==="position"||e==="preserve-aspect"&&!bve(aP(t),aP(n),.2)}function bwe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const vwe=Az({attachResizeListener:(e,t)=>ey(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),HC={current:void 0},Rz=Az({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!HC.current){const e=new vwe({});e.mount(window),e.setOptions({layoutScroll:!0}),HC.current=e}return HC.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),wwe={pan:{Feature:Pve},drag:{Feature:Ove,ProjectionNode:Rz,MeasureLayout:_z}};function xwe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const a=(n==null?void 0:n[e])??r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function Iz(e,t){const n=xwe(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function pP(e){return!(e.pointerType==="touch"||xz())}function _we(e,t,n={}){const[r,a,i]=Iz(e,n),s=o=>{if(!pP(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const d=h=>{pP(h)&&(c(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,a)};return r.forEach(o=>{o.addEventListener("pointerenter",s,a)}),i}function mP(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&ea.postRender(()=>i(t,ob(t)))}class Swe extends ud{mount(){const{current:t}=this.node;t&&(this.unmount=_we(t,(n,r)=>(mP(this.node,r,"Start"),a=>mP(this.node,a,"End"))))}unmount(){}}class Ewe extends ud{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ib(ey(this.node.current,"focus",()=>this.onFocus()),ey(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const jz=(e,t)=>t?e===t?!0:jz(e,t.parentElement):!1,Cwe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Twe(e){return Cwe.has(e.tagName)||e.tabIndex!==-1}const $g=new WeakSet;function gP(e){return t=>{t.key==="Enter"&&e(t)}}function qC(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const kwe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=gP(()=>{if($g.has(n))return;qC(n,"down");const a=gP(()=>{qC(n,"up")}),i=()=>qC(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function yP(e){return PR(e)&&!xz()}function Awe(e,t,n={}){const[r,a,i]=Iz(e,n),s=o=>{const l=o.currentTarget;if(!yP(o)||$g.has(l))return;$g.add(l);const c=t(l,o),d=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!yP(g)||!$g.has(l))&&($g.delete(l),typeof c=="function"&&c(g,{success:v}))},h=g=>{d(g,l===window||l===document||n.useGlobalTarget||jz(l,g.target))},p=g=>{d(g,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",p,a)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,a),o instanceof HTMLElement&&(o.addEventListener("focus",c=>kwe(c,a)),!Twe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function bP(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&ea.postRender(()=>i(t,ob(t)))}class Nwe extends ud{mount(){const{current:t}=this.node;t&&(this.unmount=Awe(t,(n,r)=>(bP(this.node,r,"Start"),(a,{success:i})=>bP(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $k=new WeakMap,GC=new WeakMap,Rwe=e=>{const t=$k.get(e.target);t&&t(e)},Iwe=e=>{e.forEach(Rwe)};function jwe({root:e,...t}){const n=e||document;GC.has(n)||GC.set(n,{});const r=GC.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(Iwe,{root:e,...t})),r[a]}function Dwe(e,t,n){const r=jwe(t);return $k.set(e,n),r.observe(e),()=>{$k.delete(e),r.unobserve(e)}}const Mwe={some:0,all:1};class Owe extends ud{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:Mwe[a]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=c?d:h;p&&p(l)};return Dwe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Pwe(t,n))&&this.startObserver()}unmount(){}}function Pwe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Fwe={inView:{Feature:Owe},tap:{Feature:Nwe},focus:{Feature:Ewe},hover:{Feature:Swe}},Lwe={layout:{ProjectionNode:Rz,MeasureLayout:_z}},Bk={current:null},Dz={current:!1};function $we(){if(Dz.current=!0,!!sR)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Bk.current=e.matches;e.addListener(t),t()}else Bk.current=!1}const Bwe=new WeakMap;function zwe(e,t,n){for(const r in t){const a=t[r],i=n[r];if(hi(a))e.addValue(r,a);else if(hi(i))e.addValue(r,X0(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(a):s.hasAnimated||s.set(a)}else{const s=e.getStaticValue(r);e.addValue(r,X0(s!==void 0?s:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Mz=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Oz=e=>/^0[^.\s]+$/u.test(e),Uwe={test:e=>e==="auto",parse:e=>e},Pz=e=>t=>t.test(e),Fz=[cm,En,dl,wu,J0e,X0e,Uwe],vP=e=>Fz.find(Pz(e)),Vwe=[...Fz,ci,Qu],Hwe=e=>Vwe.find(Pz(e)),qwe=new Set(["brightness","contrast","saturate","opacity"]);function Gwe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(CR)||[];if(!r)return e;const a=n.replace(r,"");let i=qwe.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const Wwe=/\b([a-z-]*)\(.*?\)/gu,zk={...Qu,getAnimatableNone:e=>{const t=e.match(Wwe);return t?t.map(Gwe).join(" "):e}},Kwe={...mR,color:ci,backgroundColor:ci,outlineColor:ci,fill:ci,stroke:ci,borderColor:ci,borderTopColor:ci,borderRightColor:ci,borderBottomColor:ci,borderLeftColor:ci,filter:zk,WebkitFilter:zk},Lz=e=>Kwe[e];function $z(e,t){let n=Lz(e);return n!==zk&&(n=Qu),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const wP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Zwe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=DR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Wi.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,ea.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=__(n),this.isVariantNode=w7(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const g=h[p];l[p]!==void 0&&hi(g)&&g.set(l[p],!1)}}mount(t){this.current=t,Bwe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Dz.current||$we(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bk.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ju(this.notifyUpdate),Ju(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=lm.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ea.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Fp){const n=Fp[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ua()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<wP.length;r++){const a=wP[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,s=t[i];s&&(this.propEventSubscriptions[a]=this.on(a,s))}this.prevMotionValues=zwe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=X0(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Mz(r)||Oz(r))?r=parseFloat(r):!Hwe(r)&&Qu.test(n)&&(r=$z(t,n)),this.setBaseTarget(t,hi(r)?r.get():r)),hi(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=vR(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!hi(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new SR),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}const Ywe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Xwe(e){const t=Ywe.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function Bz(e,t,n=1){const[r,a]=Xwe(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const s=i.trim();return Mz(s)?parseFloat(s):s}return pR(a)?Bz(a,t,n+1):a}function Jwe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Oz(e):!0}const Qwe=new Set(["auto","none","0"]);function exe(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!Qwe.has(i)&&J0(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=$z(n,a)}class txe extends DR{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),pR(c))){const d=Bz(c,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!lz.has(r)||t.length!==2)return;const[a,i]=t,s=vP(a),o=vP(i);if(s!==o)if(E6(s)&&E6(o))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else cf[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||Jwe(t[a]))&&r.push(a);r.length&&exe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=cf[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=cf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class zz extends Zwe{constructor(){super(...arguments),this.KeyframeResolver=txe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;hi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Uz(e,{style:t,vars:n},r,a){Object.assign(e.style,t,a&&a.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}function nxe(e){return window.getComputedStyle(e)}class rxe extends zz{constructor(){super(...arguments),this.type="html",this.renderInstance=Uz}readValueFromInstance(t,n){if(lm.has(n))return kbe(t,n);{const r=nxe(t),a=(hR(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return yz(t,n)}build(t,n,r){gR(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return wR(t,n,r)}}const Vz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function axe(e,t,n,r){Uz(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(Vz.has(a)?a:uR(a),t.attrs[a])}class ixe extends zz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ua}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(lm.has(n)){const r=Lz(n);return r&&r.default||0}return n=Vz.has(n)?n:uR(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return j7(t,n,r)}build(t,n,r){A7(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){axe(t,n,r,a)}mount(t){this.isSVGTag=R7(t.tagName),super.mount(t)}}const sxe=(e,t)=>bR(e)?new ixe(t):new rxe(t,{allowProjection:e!==T.Fragment}),oxe=gye({...uve,...Fwe,...wwe,...Lwe},sxe),lo=P0e(oxe),bs=qs(Gs(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:t=>{e(n=>{n.isVfsModalOpen=t??!n.isVfsModalOpen})}}))),lxe=".litechat/conversations",Hz="/synced_repos";async function cxe(e,t,n){n(t.id,"syncing");const r=ar(`${Hz}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let s=!1;try{await e.promises.stat(_l(r,".git")),s=!0}catch(o){if(o.code==="ENOENT")s=!1;else throw o}s?(Ge.info(`Pulling latest changes for "${t.name}"...`),await u_(r,i,a,{fsInstance:e}),Ge.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(Ge.info(`Cloning repository "${t.name}"...`),await yB(r,t.remoteUrl,i,a,{fsInstance:e}),Ge.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(s){console.error(`Failed to initialize/sync repository ${t.name}:`,s),n(t.id,"error")}}async function uxe(e,t,n,r,a,i,s){var h,p;r(t.id,"syncing");const o=ar(`${Hz}/${n.id}`),l=_l(o,lxe,`${t.id}.json`),c={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(_l(o,".git"))}catch(w){if(w.code==="ENOENT"){Ge.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw w}Ge.info(`Pulling latest changes for "${n.name}"...`),await u_(o,d,c,{fsInstance:e});let g=null,v=null;try{const w=await Uf(l,{fsInstance:e}),S=new TextDecoder().decode(w);g=JSON.parse(S),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(w){w.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${w.message}`),Ge.warning(`Could not read remote version of conversation: ${w.message}`))}const b=t.updatedAt.getTime(),x=((p=t.lastSyncedAt)==null?void 0:p.getTime())??0;if(!g||b>(v??0)||b>x&&b>=(v??0)){Ge.info("Local changes detected. Pushing to remote...");const w=await _t.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:w},null,2);await d_(l,C,{fsInstance:e}),await zN(o,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await UN(o,d,c,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),Ge.success("Conversation synced successfully (pushed).")}else if(v&&v>b){Ge.info("Remote changes detected. Updating local conversation...");const w={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await _t.saveConversation(w),await _t.deleteInteractionsForConversation(t.id);const S=g.interactions.map(E=>_t.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&s()==="conversation"&&await qn.getState().loadInteractions(t.id),r(t.id,"idle"),Ge.success("Conversation synced successfully (pulled).")}else Ge.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const Co=qs(Gs((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&Ge.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const s=i.parentId??r.rootId??"";a[s]||(a[s]=r.childrenMap[s]?[...r.childrenMap[s]]:[]),a[s].includes(i.id)||a[s].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const s=i.parentId??r.rootId??"";if(r.childrenMap[s]&&(r.childrenMap[s]=r.childrenMap[s].filter(o=>o!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Tt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Tt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Tt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:s,_addNodes:o,_setFsInstance:l,_setConfiguredVfsKey:c}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),s(null));try{const d=await Zfe(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const g=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${g}`),e({initializingKey:null,loading:!1}),new Error(g)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),c(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let p=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(g){if(g.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw g}if(!p||p.path!=="/"){const g=Date.now();p={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:g,lastModified:g},o([p]),console.log("[VfsStore] Root node added/updated in state.")}return e(g=>{g.rootId=p.id,g.currentParentId=p.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${p.id}`),await t().fetchNodes(p.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(s(h),a||(l(null),c(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:s,nodes:o,rootId:l,configuredVfsKey:c,vfsKey:d,initializingKey:h}=t();if(!s||c!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!s}, Match: ${c===d}, Init: ${h}`);return}r(!0);try{const p=n?o[n]:o[l||""],g=p?p.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${c})`);const v=await VN(g,{fsInstance:s});console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const b=n??l??"",x=new Set(v.map(k=>k.path)),E=(t().childrenMap[b]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!x.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(k=>{const j=Object.values(t().nodes).find(N=>N.path===k.path),I=Date.now();return{id:(j==null?void 0:j.id)||ji(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(j==null?void 0:j.createdAt)??I,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(k=>{const j=C.map(I=>I.id);(!k.childrenMap[b]||JSON.stringify(k.childrenMap[b].sort())!==JSON.stringify(j.sort()))&&(k.childrenMap[b]=j,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(p){console.error("Failed to fetch VFS nodes:",p),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=ar(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:s}=t();if(!s||t().vfsKey!==t().configuredVfsKey)return;const o=ar(n),l=r(o);l&&l.type==="folder"?(e(c=>{c.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):o==="/"&&i?(e(c=>{c.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,_addNodes:c,configuredVfsKey:d,vfsKey:h}=t();if(!s||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const p=n?o[n]:o[l||""],g=p?p.path:"/",v=j0(g,r.trim());try{throw await s.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await wB(v,{fsInstance:s});const b=Date.now(),w={id:ji(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};c([w])}catch(p){console.error("Failed to create directory:",p),i(p.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,configuredVfsKey:c,vfsKey:d}=t();if(!s||c!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?o[n]:o[l||""],p=h?h.path:"/";await xB(Array.from(r),p,{fsInstance:s}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:s,configuredVfsKey:o,vfsKey:l}=t();if(!s||o!==l){a("Filesystem not ready.");return}r(!0);try{const c=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of c)await HN(d.path,d.type==="folder",{fsInstance:s});i(n)}catch(c){console.error("Failed to delete nodes:",c),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:s,nodes:o,fs:l,rootId:c,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const p=o[n];if(!p){i("Item not found.");return}if(p.name!==r.trim()){a(!0);try{const g=p.parentId?o[p.parentId]:o[c||""],v=g?g.path:"/",b=j0(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(w){if(w.code!=="ENOENT")throw w}await _B(p.path,b,{fsInstance:l});const x={name:r.trim(),path:b,lastModified:Date.now()};s(n,x)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:s,vfsKey:o}=t();if(!a||s!==o)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const c=await Uf(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([c],{type:d});return{name:l.name,blob:h}}catch(c){return console.error("Failed to download file:",c),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),di=qs(Gs((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{const r=ji(),a=new Date,i=n.parentId??null,s=i?t().getProjectById(i):null,o=s?s.path:"/",l=j0(o,n.name),c={id:r,createdAt:a,updatedAt:a,name:n.name,parentId:i,path:l,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(d=>{d.projects.push(c),d.projects.sort((h,p)=>p.updatedAt.getTime()-h.updatedAt.getTime())});try{const d=t().getProjectById(r);if(d)await _t.saveProject(d),await Co.getState().initializeVFS(r);else throw new Error("Failed to retrieve newly added project state");return r}catch(d){throw console.error("ProjectStore: Error adding project",d),e(h=>({error:"Failed to save new project",projects:h.projects.filter(p=>p.id!==r)})),d}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}let i=a.path;if(r.name&&r.name!==a.name){const o=My(a.path);i=j0(o,r.name)}const s={...a,...r,path:i,updatedAt:new Date};e(o=>{const l=o.projects.findIndex(c=>c.id===n);l!==-1&&(o.projects[l]=s,o.projects.sort((c,d)=>d.updatedAt.getTime()-c.updatedAt.getTime()))});try{await _t.saveProject(s)}catch(o){throw console.error("ProjectStore: Error updating project",o),e(l=>{const c=l.projects.findIndex(d=>d.id===n);c!==-1&&(l.projects[c]=a,l.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())),l.error="Failed to save project update"}),o}},deleteProject:async n=>{const r=t().getProjectById(n);if(!r)return;const a=t().projects.filter(s=>s.parentId===n).map(s=>s.id),i=[n,...a];e(s=>({projects:s.projects.filter(o=>!i.includes(o.id))})),mn.getState()._unlinkConversationsFromProjects(i);try{await _t.deleteProject(n),Ge.success(`Project "${r.name}" deleted.`)}catch(s){throw console.error("ProjectStore: Error deleting project",s),e(o=>{const l=t().projects.filter(c=>i.includes(c.id)).concat(r);o.projects.push(...l),o.projects.sort((c,d)=>d.updatedAt.getTime()-c.updatedAt.getTime()),o.error="Failed to delete project"}),s}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getProjectHierarchy:n=>{const r=[];let a=n;for(;a;){const i=t().getProjectById(a);if(i)r.unshift({id:i.id,name:i.name}),a=i.parentId;else break}return r},getEffectiveProjectSettings:n=>{const r=hr.getState(),a=zn.getState().selectedModelId;let i=n,s={systemPrompt:null,modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null};for(;i;){const o=t().getProjectById(i);if(o)s.systemPrompt===null&&o.systemPrompt!==null&&o.systemPrompt!==void 0&&(s.systemPrompt=o.systemPrompt),s.modelId===null&&o.modelId!==null&&o.modelId!==void 0&&(s.modelId=o.modelId),s.temperature===null&&o.temperature!==null&&o.temperature!==void 0&&(s.temperature=o.temperature),s.maxTokens===null&&o.maxTokens!==null&&o.maxTokens!==void 0&&(s.maxTokens=o.maxTokens),s.topP===null&&o.topP!==null&&o.topP!==void 0&&(s.topP=o.topP),s.topK===null&&o.topK!==null&&o.topK!==void 0&&(s.topK=o.topK),s.presencePenalty===null&&o.presencePenalty!==null&&o.presencePenalty!==void 0&&(s.presencePenalty=o.presencePenalty),s.frequencyPenalty===null&&o.frequencyPenalty!==null&&o.frequencyPenalty!==void 0&&(s.frequencyPenalty=o.frequencyPenalty),i=o.parentId;else break}return s.systemPrompt===null&&(s.systemPrompt=r.globalSystemPrompt),s.modelId===null&&(s.modelId=a),s.temperature===null&&(s.temperature=r.temperature),s.maxTokens===null&&(s.maxTokens=r.maxTokens),s.topP===null&&(s.topP=r.topP),s.topK===null&&(s.topK=r.topK),s.presencePenalty===null&&(s.presencePenalty=r.presencePenalty),s.frequencyPenalty===null&&(s.frequencyPenalty=r.frequencyPenalty),s}}))),Ew=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},dxe=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${bk(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${bk(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,s,o,l,c,d,h;((a=r.prompt)!=null&&a.content||(o=(s=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(p=>{n+=`- ${p.name} (${p.type}, ${I0(p.size)}) ${p.source==="vfs"?`(VFS: ${p.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class tp{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const s=i.conversation,o=i.interactions;if(!s.id||!s.title||!s.createdAt||!s.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:s.title||"Imported Chat",metadata:s.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),c=o.map(d=>_t.saveInteraction({...d,conversationId:l,id:ji()}));await Promise.all(c),await r(l,"conversation"),Ge.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),Ge.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=mn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await _t.loadInteractionsForConversation(t);let i,s;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const c=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([c],{type:"application/json"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=dxe(r,a);i=new Blob([l],{type:"text/markdown"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");Ew(i,s),Ge.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),Ge.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=di.getState(),{conversations:a}=mn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const s=async p=>{const g=n.find(w=>w.id===p);if(!g)throw new Error(`Project ${p} not found in state.`);const v=n.filter(w=>w.parentId===p),b=a.filter(w=>w.projectId===p),x=[];for(const w of v)x.push(await s(w.id));for(const w of b){const S=await _t.loadInteractionsForConversation(w.id);x.push({conversation:w,interactions:S})}return{project:g,children:x}},o=await s(t),l=JSON.stringify(o,null,2),c=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;Ew(c,h),Ge.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),Ge.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=mn.getState().conversations,n=[];for(const s of t){const o=await _t.loadInteractionsForConversation(s.id);n.push({conversation:s,interactions:o})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;Ew(a,i),Ge.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),Ge.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await _t.getAllDataForExport(t),r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;Ew(a,i),Ge.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),Ge.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.version)throw new Error("Invalid import file format. Missing version or basic structure.");await _t.importAllData(a,n),Ge.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),Ge.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const xP="sync_repos",fxe="/synced_repos",mn=qs(Gs((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await Co.getState().initializeVFS(xP,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${xP}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),Ge.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await di.getState().loadProjects();const[n,r]=await Promise.all([_t.loadConversations(),_t.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const s=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,o=i.updatedAt instanceof Date?i.updatedAt.getTime():null;s?o&&o>s?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(s=>{s.conversations.some(o=>o.id===i.id)||(s.conversations.unshift(i),s.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const s=t().getConversationById(r);if(s)await _t.saveConversation(s),Tt.emit(Et.CONVERSATION_ADDED,{conversation:s});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(s){throw console.error("ConversationStore: Error adding conversation",s),e(o=>({error:"Failed to save new conversation",conversations:o.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([l])=>l!==r))})),s}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=s.conversations[o].metadata??{},c=r.metadata??{},d={...l,...c};Object.assign(s.conversations[o],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),p=s.conversations[o].lastSyncedAt instanceof Date?s.conversations[o].lastSyncedAt.getTime():null,g=s.conversations[o].updatedAt.getTime();"syncRepoId"in r?s.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&s.conversations[o].syncRepoId&&s.conversationSyncStatus[n]==="idle"&&(!p||g>p)&&(s.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const s=JSON.parse(JSON.stringify(i));await _t.saveConversation(s),Tt.emit(Et.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(s){throw console.error("ConversationStore: Error updating conversation",s),e(o=>{const l=o.conversations.findIndex(c=>c.id===n);if(l!==-1){o.conversations[l]=a;const c=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&c&&d<=c?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),s}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){s.conversations[o]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,c=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&l&&c<=l?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(s=>s.id===n);if(i){e(s=>({conversations:s.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([o])=>o!==n))}));try{await _t.deleteConversation(n),await _t.deleteInteractionsForConversation(n),Tt.emit(Et.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await qn.getState().setCurrentConversationId(null),Tt.emit(Et.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(s){throw console.error("ConversationStore: Error deleting conversation",s),e(o=>{if(i){o.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,c=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&l&&c<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),s}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await qn.getState().setCurrentConversationId(r==="conversation"?n:null),Tt.emit(Et.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?Tt.emit(Et.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?Tt.emit(Et.PROJECT_SELECTED,{projectId:n}):(Tt.emit(Et.CONVERSATION_SELECTED,{conversationId:null}),Tt.emit(Et.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await tp.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await tp.exportConversation(n,r)},exportProject:async n=>{await tp.exportProject(n)},exportAllConversations:async()=>{await tp.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await _t.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(s=>{s.syncRepos.push(i)});try{const s=t().syncRepos.find(o=>o.id===r);if(s){const o=JSON.parse(JSON.stringify(s));await _t.saveSyncRepo(o),Tt.emit(Et.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return Ge.success(`Sync repository "${i.name}" added.`),r}catch(s){throw console.error("ConversationStore: Error adding sync repo",s),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),s}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(s=>s.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(s.syncRepos[o],{...r,branch:r.branch||s.syncRepos[o].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(s=>s.id===n);if(i)try{const s=JSON.parse(JSON.stringify(i));await _t.saveSyncRepo(s),Tt.emit(Et.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),Ge.success(`Sync repository "${i.name}" updated.`)}catch(s){throw console.error("ConversationStore: Error updating sync repo",s),e(o=>{const l=o.syncRepos.findIndex(c=>c.id===n);l!==-1&&(o.syncRepos[l]=a),o.error="Failed to save sync repository update"}),s}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&(s.syncRepos[o]=a),s.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(s=>s.id===n);if(!r)return;const a=ar(`${fxe}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(s=>({syncRepos:s.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(s.repoInitializationStatus).filter(([o])=>o!==n))}));try{await _t.deleteSyncRepo(n),Tt.emit(Et.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),Ge.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await HN(a,!0,{fsInstance:i}),Ge.info(`Removed local sync folder for "${r.name}".`)}catch(s){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,s),s.code!=="ENOENT"&&Ge.warning(`Failed to remove local sync folder: ${s.message}`)}}catch(s){throw console.error("ConversationStore: Error deleting sync repo",s),e(o=>{r&&o.syncRepos.push(r),o.error="Failed to delete sync repository"}),s}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),Ge.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),Tt.emit(Et.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),Tt.emit(Et.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){Ge.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await cxe(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){Ge.error("Conversation not found for syncing.");return}if(!r.syncRepoId){Ge.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(o=>o.id===r.syncRepoId);if(!a){Ge.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await uxe(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const s=t().getConversationById(n);s&&e(o=>{const l=o.conversations.findIndex(c=>c.id===n);l!==-1&&(o.conversations[l]=s)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const s=t().getConversationById(r);if(!s){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=s.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!s.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}})));function Tn({className:e,type:t,...n}){return m.jsx("input",{type:t,"data-slot":"input",className:xt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function S_(e){const t=e+"CollectionProvider",[n,r]=vi(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:x,children:w}=b,S=gt.useRef(null),E=gt.useRef(new Map).current;return m.jsx(a,{scope:x,itemMap:E,collectionRef:S,children:w})};s.displayName=t;const o=e+"CollectionSlot",l=ju(o),c=gt.forwardRef((b,x)=>{const{scope:w,children:S}=b,E=i(o,w),C=An(x,E.collectionRef);return m.jsx(l,{ref:C,children:S})});c.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",p=ju(d),g=gt.forwardRef((b,x)=>{const{scope:w,children:S,...E}=b,C=gt.useRef(null),k=An(x,C),j=i(d,w);return gt.useEffect(()=>(j.itemMap.set(C,{ref:C,...E}),()=>void j.itemMap.delete(C))),m.jsx(p,{[h]:"",ref:k,children:S})});g.displayName=d;function v(b){const x=i(e+"CollectionConsumer",b);return gt.useCallback(()=>{const S=x.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((j,I)=>E.indexOf(j.ref.current)-E.indexOf(I.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:s,Slot:c,ItemSlot:g},v,r]}var WC=0;function E_(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??_P()),document.body.insertAdjacentElement("beforeend",e[1]??_P()),WC++,()=>{WC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),WC--}},[])}function _P(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var KC="focusScope.autoFocusOnMount",ZC="focusScope.autoFocusOnUnmount",SP={bubbles:!1,cancelable:!0},hxe="FocusScope",lb=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,l]=T.useState(null),c=za(a),d=za(i),h=T.useRef(null),p=An(t,b=>l(b)),g=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(E){if(g.paused||!o)return;const C=E.target;o.contains(C)?h.current=C:xu(h.current,{select:!0})},x=function(E){if(g.paused||!o)return;const C=E.relatedTarget;C!==null&&(o.contains(C)||xu(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&xu(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",x);const S=new MutationObserver(w);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",x),S.disconnect()}}},[r,o,g.paused]),T.useEffect(()=>{if(o){CP.add(g);const b=document.activeElement;if(!o.contains(b)){const w=new CustomEvent(KC,SP);o.addEventListener(KC,c),o.dispatchEvent(w),w.defaultPrevented||(pxe(vxe(qz(o)),{select:!0}),document.activeElement===b&&xu(o))}return()=>{o.removeEventListener(KC,c),setTimeout(()=>{const w=new CustomEvent(ZC,SP);o.addEventListener(ZC,d),o.dispatchEvent(w),w.defaultPrevented||xu(b??document.body,{select:!0}),o.removeEventListener(ZC,d),CP.remove(g)},0)}}},[o,c,d,g]);const v=T.useCallback(b=>{if(!n&&!r||g.paused)return;const x=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,w=document.activeElement;if(x&&w){const S=b.currentTarget,[E,C]=mxe(S);E&&C?!b.shiftKey&&w===C?(b.preventDefault(),n&&xu(E,{select:!0})):b.shiftKey&&w===E&&(b.preventDefault(),n&&xu(C,{select:!0})):w===S&&b.preventDefault()}},[n,r,g.paused]);return m.jsx(an.div,{tabIndex:-1,...s,ref:p,onKeyDown:v})});lb.displayName=hxe;function pxe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(xu(r,{select:t}),document.activeElement!==n)return}function mxe(e){const t=qz(e),n=EP(t,e),r=EP(t.reverse(),e);return[n,r]}function qz(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function EP(e,t){for(const n of e)if(!gxe(n,{upTo:t}))return n}function gxe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function yxe(e){return e instanceof HTMLInputElement&&"select"in e}function xu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&yxe(e)&&t&&e.select()}}var CP=bxe();function bxe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=TP(e,t),e.unshift(t)},remove(t){var n;e=TP(e,t),(n=e[0])==null||n.resume()}}}function TP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function vxe(e){return e.filter(t=>t.tagName!=="A")}function C_(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var wxe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Bh=new WeakMap,Cw=new WeakMap,Tw={},YC=0,Gz=function(e){return e&&(e.host||Gz(e.parentNode))},xxe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Gz(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},_xe=function(e,t,n,r){var a=xxe(t,Array.isArray(e)?e:[e]);Tw[n]||(Tw[n]=new WeakMap);var i=Tw[n],s=[],o=new Set,l=new Set(a),c=function(h){!h||o.has(h)||(o.add(h),c(h.parentNode))};a.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(o.has(p))d(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",b=(Bh.get(p)||0)+1,x=(i.get(p)||0)+1;Bh.set(p,b),i.set(p,x),s.push(p),b===1&&v&&Cw.set(p,!0),x===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return d(t),o.clear(),YC++,function(){s.forEach(function(h){var p=Bh.get(h)-1,g=i.get(h)-1;Bh.set(h,p),i.set(h,g),p||(Cw.has(h)||h.removeAttribute(r),Cw.delete(h)),g||h.removeAttribute(n)}),YC--,YC||(Bh=new WeakMap,Bh=new WeakMap,Cw=new WeakMap,Tw={})}},T_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=wxe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),_xe(r,a,n,"aria-hidden")):function(){return null}},al=function(){return al=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},al.apply(this,arguments)};function Wz(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Sxe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Gw="right-scroll-bar-position",Ww="width-before-scroll-bar",Exe="with-scroll-bars-hidden",Cxe="--removed-body-scroll-bar-size";function XC(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Txe(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var kxe=typeof window<"u"?T.useLayoutEffect:T.useEffect,kP=new WeakMap;function Axe(e,t){var n=Txe(null,function(r){return e.forEach(function(a){return XC(a,r)})});return kxe(function(){var r=kP.get(n);if(r){var a=new Set(r),i=new Set(e),s=n.current;a.forEach(function(o){i.has(o)||XC(o,null)}),i.forEach(function(o){a.has(o)||XC(o,s)})}kP.set(n,e)},[e]),n}function Nxe(e){return e}function Rxe(e,t){t===void 0&&(t=Nxe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(i),s=n}var l=function(){var d=s;s=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){s.push(d),c()},filter:function(d){return s=s.filter(d),n}}}};return a}function Ixe(e){e===void 0&&(e={});var t=Rxe(null);return t.options=al({async:!0,ssr:!1},e),t}var Kz=function(e){var t=e.sideCar,n=Wz(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,al({},n))};Kz.isSideCarExport=!0;function jxe(e,t){return e.useMedium(t),Kz}var Zz=Ixe(),JC=function(){},k_=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:JC,onWheelCapture:JC,onTouchMoveCapture:JC}),a=r[0],i=r[1],s=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,S=e.gapMode,E=Wz(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,k=Axe([n,t]),j=al(al({},E),a);return T.createElement(T.Fragment,null,d&&T.createElement(C,{sideCar:Zz,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),s?T.cloneElement(T.Children.only(o),al(al({},j),{ref:k})):T.createElement(w,al({},j,{className:l,ref:k}),o))});k_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};k_.classNames={fullWidth:Ww,zeroRight:Gw};var Dxe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Mxe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Dxe();return t&&e.setAttribute("nonce",t),e}function Oxe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Pxe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Fxe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Mxe())&&(Oxe(t,n),Pxe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Lxe=function(){var e=Fxe();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Yz=function(){var e=Lxe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},$xe={left:0,top:0,right:0,gap:0},QC=function(e){return parseInt(e||"",10)||0},Bxe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[QC(n),QC(r),QC(a)]},zxe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return $xe;var t=Bxe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Uxe=Yz(),cp="data-scroll-locked",Vxe=function(e,t,n,r){var a=e.left,i=e.top,s=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Exe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(cp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gw,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Ww,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Gw," .").concat(Gw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ww," .").concat(Ww,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(cp,`] {
    `).concat(Cxe,": ").concat(o,`px;
  }
`)},AP=function(){var e=parseInt(document.body.getAttribute(cp)||"0",10);return isFinite(e)?e:0},Hxe=function(){T.useEffect(function(){return document.body.setAttribute(cp,(AP()+1).toString()),function(){var e=AP()-1;e<=0?document.body.removeAttribute(cp):document.body.setAttribute(cp,e.toString())}},[])},qxe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Hxe();var i=T.useMemo(function(){return zxe(a)},[a]);return T.createElement(Uxe,{styles:Vxe(i,!t,a,n?"":"!important")})},Uk=!1;if(typeof window<"u")try{var kw=Object.defineProperty({},"passive",{get:function(){return Uk=!0,!0}});window.addEventListener("test",kw,kw),window.removeEventListener("test",kw,kw)}catch{Uk=!1}var zh=Uk?{passive:!1}:!1,Gxe=function(e){return e.tagName==="TEXTAREA"},Xz=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Gxe(e)&&n[t]==="visible")},Wxe=function(e){return Xz(e,"overflowY")},Kxe=function(e){return Xz(e,"overflowX")},NP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=Jz(e,r);if(a){var i=Qz(e,r),s=i[1],o=i[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Zxe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Yxe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Jz=function(e,t){return e==="v"?Wxe(t):Kxe(t)},Qz=function(e,t){return e==="v"?Zxe(t):Yxe(t)},Xxe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Jxe=function(e,t,n,r,a){var i=Xxe(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,l=t.contains(o),c=!1,d=s>0,h=0,p=0;do{var g=Qz(e,o),v=g[0],b=g[1],x=g[2],w=b-x-i*v;(v||w)&&Jz(e,o)&&(h+=w,p+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(c=!0),c},Aw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},RP=function(e){return[e.deltaX,e.deltaY]},IP=function(e){return e&&"current"in e?e.current:e},Qxe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e1e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},t1e=0,Uh=[];function n1e(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),a=T.useState(t1e++)[0],i=T.useState(Yz)[0],s=T.useRef(e);T.useEffect(function(){s.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=Sxe([e.lockRef.current],(e.shards||[]).map(IP),!0).filter(Boolean);return b.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=T.useCallback(function(b,x){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var w=Aw(b),S=n.current,E="deltaX"in b?b.deltaX:S[0]-w[0],C="deltaY"in b?b.deltaY:S[1]-w[1],k,j=b.target,I=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&I==="h"&&j.type==="range")return!1;var N=NP(I,j);if(!N)return!0;if(N?k=I:(k=I==="v"?"h":"v",N=NP(I,j)),!N)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=k),!k)return!0;var P=r.current||k;return Jxe(P,x,b,P==="h"?E:C)},[]),l=T.useCallback(function(b){var x=b;if(!(!Uh.length||Uh[Uh.length-1]!==i)){var w="deltaY"in x?RP(x):Aw(x),S=t.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&Qxe(k.delta,w)})[0];if(S&&S.should){x.cancelable&&x.preventDefault();return}if(!S){var E=(s.current.shards||[]).map(IP).filter(Boolean).filter(function(k){return k.contains(x.target)}),C=E.length>0?o(x,E[0]):!s.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),c=T.useCallback(function(b,x,w,S){var E={name:b,delta:x,target:w,should:S,shadowParent:r1e(w)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),d=T.useCallback(function(b){n.current=Aw(b),r.current=void 0},[]),h=T.useCallback(function(b){c(b.type,RP(b),b.target,o(b,e.lockRef.current))},[]),p=T.useCallback(function(b){c(b.type,Aw(b),b.target,o(b,e.lockRef.current))},[]);T.useEffect(function(){return Uh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,zh),document.addEventListener("touchmove",l,zh),document.addEventListener("touchstart",d,zh),function(){Uh=Uh.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,zh),document.removeEventListener("touchmove",l,zh),document.removeEventListener("touchstart",d,zh)}},[]);var g=e.removeScrollBar,v=e.inert;return T.createElement(T.Fragment,null,v?T.createElement(i,{styles:e1e(a)}):null,g?T.createElement(qxe,{gapMode:e.gapMode}):null)}function r1e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const a1e=jxe(Zz,n1e);var cb=T.forwardRef(function(e,t){return T.createElement(k_,al({},e,{ref:t,sideCar:a1e}))});cb.classNames=k_.classNames;var i1e=[" ","Enter","ArrowUp","ArrowDown"],s1e=[" ","Enter"],xf="Select",[A_,N_,o1e]=S_(xf),[um,gje]=vi(xf,[o1e,td]),R_=td(),[l1e,dd]=um(xf),[c1e,u1e]=um(xf),eU=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:p,required:g,form:v}=e,b=R_(t),[x,w]=T.useState(null),[S,E]=T.useState(null),[C,k]=T.useState(!1),j=sm(c),[I,N]=_o({prop:r,defaultProp:a??!1,onChange:i,caller:xf}),[P,L]=_o({prop:s,defaultProp:o,onChange:l,caller:xf}),H=T.useRef(null),M=x?v||!!x.closest("form"):!0,[Z,q]=T.useState(new Set),ue=Array.from(Z).map(ae=>ae.props.value).join(";");return m.jsx(P1,{...b,children:m.jsxs(l1e,{required:g,scope:t,trigger:x,onTriggerChange:w,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:Va(),value:P,onValueChange:L,open:I,onOpenChange:N,dir:j,triggerPointerDownPosRef:H,disabled:p,children:[m.jsx(A_.Provider,{scope:t,children:m.jsx(c1e,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(ae=>{q(ee=>new Set(ee).add(ae))},[]),onNativeOptionRemove:T.useCallback(ae=>{q(ee=>{const X=new Set(ee);return X.delete(ae),X})},[]),children:n})}),M?m.jsxs(_U,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:P,onChange:ae=>L(ae.target.value),disabled:p,form:v,children:[P===void 0?m.jsx("option",{value:""}):null,Array.from(Z)]},ue):null]})})};eU.displayName=xf;var tU="SelectTrigger",nU=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=R_(n),s=dd(tU,n),o=s.disabled||r,l=An(t,s.onTriggerChange),c=N_(n),d=T.useRef("touch"),[h,p,g]=EU(b=>{const x=c().filter(E=>!E.disabled),w=x.find(E=>E.value===s.value),S=CU(x,b,w);S!==void 0&&s.onValueChange(S.value)}),v=b=>{o||(s.onOpenChange(!0),g()),b&&(s.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return m.jsx(Ey,{asChild:!0,...i,children:m.jsx(an.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":SU(s.value)?"":void 0,...a,ref:l,onClick:qt(a.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:qt(a.onPointerDown,b=>{d.current=b.pointerType;const x=b.target;x.hasPointerCapture(b.pointerId)&&x.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:qt(a.onKeyDown,b=>{const x=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(x&&b.key===" ")&&i1e.includes(b.key)&&(v(),b.preventDefault())})})})});nU.displayName=tU;var rU="SelectValue",aU=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...o}=e,l=dd(rU,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,h=An(t,l.onValueNodeChange);return ni(()=>{c(d)},[c,d]),m.jsx(an.span,{...o,ref:h,style:{pointerEvents:"none"},children:SU(l.value)?m.jsx(m.Fragment,{children:s}):i})});aU.displayName=rU;var d1e="SelectIcon",iU=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return m.jsx(an.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});iU.displayName=d1e;var f1e="SelectPortal",sU=e=>m.jsx(qp,{asChild:!0,...e});sU.displayName=f1e;var _f="SelectContent",oU=T.forwardRef((e,t)=>{const n=dd(_f,e.__scopeSelect),[r,a]=T.useState();if(ni(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?il.createPortal(m.jsx(lU,{scope:e.__scopeSelect,children:m.jsx(A_.Slot,{scope:e.__scopeSelect,children:m.jsx("div",{children:e.children})})}),i):null}return m.jsx(cU,{...e,ref:t})});oU.displayName=_f;var so=10,[lU,fd]=um(_f),h1e="SelectContentImpl",p1e=ju("SelectContent.RemoveScroll"),cU=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:x,...w}=e,S=dd(_f,n),[E,C]=T.useState(null),[k,j]=T.useState(null),I=An(t,Te=>C(Te)),[N,P]=T.useState(null),[L,H]=T.useState(null),M=N_(n),[Z,q]=T.useState(!1),ue=T.useRef(!1);T.useEffect(()=>{if(E)return T_(E)},[E]),E_();const ae=T.useCallback(Te=>{const[Ae,...Ee]=M().map(Le=>Le.ref.current),[Pe]=Ee.slice(-1),Qe=document.activeElement;for(const Le of Te)if(Le===Qe||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Ae&&k&&(k.scrollTop=0),Le===Pe&&k&&(k.scrollTop=k.scrollHeight),Le==null||Le.focus(),document.activeElement!==Qe))return},[M,k]),ee=T.useCallback(()=>ae([N,E]),[ae,N,E]);T.useEffect(()=>{Z&&ee()},[Z,ee]);const{onOpenChange:X,triggerPointerDownPosRef:ie}=S;T.useEffect(()=>{if(E){let Te={x:0,y:0};const Ae=Pe=>{var Qe,Le;Te={x:Math.abs(Math.round(Pe.pageX)-(((Qe=ie.current)==null?void 0:Qe.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((Le=ie.current)==null?void 0:Le.y)??0))}},Ee=Pe=>{Te.x<=10&&Te.y<=10?Pe.preventDefault():E.contains(Pe.target)||X(!1),document.removeEventListener("pointermove",Ae),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Ae),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[E,X,ie]),T.useEffect(()=>{const Te=()=>X(!1);return window.addEventListener("blur",Te),window.addEventListener("resize",Te),()=>{window.removeEventListener("blur",Te),window.removeEventListener("resize",Te)}},[X]);const[B,J]=EU(Te=>{const Ae=M().filter(Qe=>!Qe.disabled),Ee=Ae.find(Qe=>Qe.ref.current===document.activeElement),Pe=CU(Ae,Te,Ee);Pe&&setTimeout(()=>Pe.ref.current.focus())}),Q=T.useCallback((Te,Ae,Ee)=>{const Pe=!ue.current&&!Ee;(S.value!==void 0&&S.value===Ae||Pe)&&(P(Te),Pe&&(ue.current=!0))},[S.value]),ne=T.useCallback(()=>E==null?void 0:E.focus(),[E]),he=T.useCallback((Te,Ae,Ee)=>{const Pe=!ue.current&&!Ee;(S.value!==void 0&&S.value===Ae||Pe)&&H(Te)},[S.value]),de=r==="popper"?Vk:uU,Ie=de===Vk?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:x}:{};return m.jsx(lU,{scope:n,content:E,viewport:k,onViewportChange:j,itemRefCallback:Q,selectedItem:N,onItemLeave:ne,itemTextRefCallback:he,focusSelectedItem:ee,selectedItemText:L,position:r,isPositioned:Z,searchRef:B,children:m.jsx(cb,{as:p1e,allowPinchZoom:!0,children:m.jsx(lb,{asChild:!0,trapped:S.open,onMountAutoFocus:Te=>{Te.preventDefault()},onUnmountAutoFocus:qt(a,Te=>{var Ae;(Ae=S.trigger)==null||Ae.focus({preventScroll:!0}),Te.preventDefault()}),children:m.jsx(Up,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:Te=>Te.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:m.jsx(de,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Te=>Te.preventDefault(),...w,...Ie,onPlaced:()=>q(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:qt(w.onKeyDown,Te=>{const Ae=Te.ctrlKey||Te.altKey||Te.metaKey;if(Te.key==="Tab"&&Te.preventDefault(),!Ae&&Te.key.length===1&&J(Te.key),["ArrowUp","ArrowDown","Home","End"].includes(Te.key)){let Pe=M().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(Te.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Te.key)){const Qe=Te.target,Le=Pe.indexOf(Qe);Pe=Pe.slice(Le+1)}setTimeout(()=>ae(Pe)),Te.preventDefault()}})})})})})})});cU.displayName=h1e;var m1e="SelectItemAlignedPosition",uU=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=dd(_f,n),s=fd(_f,n),[o,l]=T.useState(null),[c,d]=T.useState(null),h=An(t,I=>d(I)),p=N_(n),g=T.useRef(!1),v=T.useRef(!0),{viewport:b,selectedItem:x,selectedItemText:w,focusSelectedItem:S}=s,E=T.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&c&&b&&x&&w){const I=i.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),L=w.getBoundingClientRect();if(i.dir!=="rtl"){const Qe=L.left-N.left,Le=P.left-Qe,je=I.left-Le,z=I.width+je,Se=Math.max(z,N.width),Ne=window.innerWidth-so,fe=G0(Le,[so,Math.max(so,Ne-Se)]);o.style.minWidth=z+"px",o.style.left=fe+"px"}else{const Qe=N.right-L.right,Le=window.innerWidth-P.right-Qe,je=window.innerWidth-I.right-Le,z=I.width+je,Se=Math.max(z,N.width),Ne=window.innerWidth-so,fe=G0(Le,[so,Math.max(so,Ne-Se)]);o.style.minWidth=z+"px",o.style.right=fe+"px"}const H=p(),M=window.innerHeight-so*2,Z=b.scrollHeight,q=window.getComputedStyle(c),ue=parseInt(q.borderTopWidth,10),ae=parseInt(q.paddingTop,10),ee=parseInt(q.borderBottomWidth,10),X=parseInt(q.paddingBottom,10),ie=ue+ae+Z+X+ee,B=Math.min(x.offsetHeight*5,ie),J=window.getComputedStyle(b),Q=parseInt(J.paddingTop,10),ne=parseInt(J.paddingBottom,10),he=I.top+I.height/2-so,de=M-he,Ie=x.offsetHeight/2,Te=x.offsetTop+Ie,Ae=ue+ae+Te,Ee=ie-Ae;if(Ae<=he){const Qe=H.length>0&&x===H[H.length-1].ref.current;o.style.bottom="0px";const Le=c.clientHeight-b.offsetTop-b.offsetHeight,je=Math.max(de,Ie+(Qe?ne:0)+Le+ee),z=Ae+je;o.style.height=z+"px"}else{const Qe=H.length>0&&x===H[0].ref.current;o.style.top="0px";const je=Math.max(he,ue+b.offsetTop+(Qe?Q:0)+Ie)+Ee;o.style.height=je+"px",b.scrollTop=Ae-he+b.offsetTop}o.style.margin=`${so}px 0`,o.style.minHeight=B+"px",o.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,o,c,b,x,w,i.dir,r]);ni(()=>E(),[E]);const[C,k]=T.useState();ni(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const j=T.useCallback(I=>{I&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return m.jsx(y1e,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:j,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:m.jsx(an.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});uU.displayName=m1e;var g1e="SelectPopperPosition",Vk=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=so,...i}=e,s=R_(n);return m.jsx(F1,{...s,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vk.displayName=g1e;var[y1e,FR]=um(_f,{}),Hk="SelectViewport",dU=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=fd(Hk,n),s=FR(Hk,n),o=An(t,i.onViewportChange),l=T.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(A_.Slot,{scope:n,children:m.jsx(an.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:qt(a.onScroll,c=>{const d=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=s;if(p!=null&&p.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const v=window.innerHeight-so*2,b=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),w=Math.max(b,x);if(w<v){const S=w+g,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});dU.displayName=Hk;var fU="SelectGroup",[b1e,v1e]=um(fU),w1e=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Va();return m.jsx(b1e,{scope:n,id:a,children:m.jsx(an.div,{role:"group","aria-labelledby":a,...r,ref:t})})});w1e.displayName=fU;var hU="SelectLabel",x1e=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=v1e(hU,n);return m.jsx(an.div,{id:a.id,...r,ref:t})});x1e.displayName=hU;var n1="SelectItem",[_1e,pU]=um(n1),mU=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,o=dd(n1,n),l=fd(n1,n),c=o.value===r,[d,h]=T.useState(i??""),[p,g]=T.useState(!1),v=An(t,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,a)}),b=Va(),x=T.useRef("touch"),w=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(_1e,{scope:n,value:r,disabled:a,textId:b,isSelected:c,onItemTextChange:T.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:m.jsx(A_.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:m.jsx(an.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:v,onFocus:qt(s.onFocus,()=>g(!0)),onBlur:qt(s.onBlur,()=>g(!1)),onClick:qt(s.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:qt(s.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:qt(s.onPointerDown,S=>{x.current=S.pointerType}),onPointerMove:qt(s.onPointerMove,S=>{var E;x.current=S.pointerType,a?(E=l.onItemLeave)==null||E.call(l):x.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qt(s.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:qt(s.onKeyDown,S=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(s1e.includes(S.key)&&w(),S.key===" "&&S.preventDefault())})})})})});mU.displayName=n1;var Bg="SelectItemText",gU=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=dd(Bg,n),o=fd(Bg,n),l=pU(Bg,n),c=u1e(Bg,n),[d,h]=T.useState(null),p=An(t,w=>h(w),l.onItemTextChange,w=>{var S;return(S=o.itemTextRefCallback)==null?void 0:S.call(o,w,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=T.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:x}=c;return ni(()=>(b(v),()=>x(v)),[b,x,v]),m.jsxs(m.Fragment,{children:[m.jsx(an.span,{id:l.textId,...i,ref:p}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?il.createPortal(i.children,s.valueNode):null]})});gU.displayName=Bg;var yU="SelectItemIndicator",bU=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return pU(yU,n).isSelected?m.jsx(an.span,{"aria-hidden":!0,...r,ref:t}):null});bU.displayName=yU;var qk="SelectScrollUpButton",vU=T.forwardRef((e,t)=>{const n=fd(qk,e.__scopeSelect),r=FR(qk,e.__scopeSelect),[a,i]=T.useState(!1),s=An(t,r.onScrollButtonChange);return ni(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?m.jsx(xU,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});vU.displayName=qk;var Gk="SelectScrollDownButton",wU=T.forwardRef((e,t)=>{const n=fd(Gk,e.__scopeSelect),r=FR(Gk,e.__scopeSelect),[a,i]=T.useState(!1),s=An(t,r.onScrollButtonChange);return ni(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?m.jsx(xU,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});wU.displayName=Gk;var xU=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=fd("SelectScrollButton",n),s=T.useRef(null),o=N_(n),l=T.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),ni(()=>{var d;const c=o().find(h=>h.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),m.jsx(an.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:qt(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:qt(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:qt(a.onPointerLeave,()=>{l()})})}),S1e="SelectSeparator",E1e=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return m.jsx(an.div,{"aria-hidden":!0,...r,ref:t})});E1e.displayName=S1e;var Wk="SelectArrow",C1e=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=R_(n),i=dd(Wk,n),s=fd(Wk,n);return i.open&&s.position==="popper"?m.jsx(L1,{...a,...r,ref:t}):null});C1e.displayName=Wk;var T1e="SelectBubbleInput",_U=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=T.useRef(null),i=An(r,a),s=C_(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),m.jsx(an.select,{...n,style:{...r$,...n.style},ref:i,defaultValue:t})});_U.displayName=T1e;function SU(e){return e===""||e===void 0}function EU(e){const t=za(e),n=T.useRef(""),r=T.useRef(0),a=T.useCallback(s=>{const o=n.current+s;t(o),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),i=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function CU(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=k1e(e,Math.max(i,0));a.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function k1e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var A1e=eU,N1e=nU,R1e=aU,I1e=iU,j1e=sU,D1e=oU,M1e=dU,O1e=mU,P1e=gU,F1e=bU,L1e=vU,$1e=wU;function pl({...e}){return m.jsx(A1e,{"data-slot":"select",...e})}function ml({...e}){return m.jsx(R1e,{"data-slot":"select-value",...e})}function gl({className:e,size:t="default",children:n,...r}){return m.jsxs(N1e,{"data-slot":"select-trigger","data-size":t,className:xt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,m.jsx(I1e,{asChild:!0,children:m.jsx(kc,{className:"size-4 opacity-50"})})]})}function yl({className:e,children:t,position:n="popper",...r}){return m.jsx(j1e,{children:m.jsxs(D1e,{"data-slot":"select-content",className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[m.jsx(B1e,{}),m.jsx(M1e,{className:xt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),m.jsx(z1e,{})]})})}function da({className:e,children:t,...n}){return m.jsxs(O1e,{"data-slot":"select-item",className:xt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[m.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:m.jsx(F1e,{children:m.jsx(Ri,{className:"size-4"})})}),m.jsx(P1e,{children:t})]})}function B1e({className:e,...t}){return m.jsx(L1e,{"data-slot":"select-scroll-up-button",className:xt("flex cursor-default items-center justify-center py-1",e),...t,children:m.jsx(Cf,{className:"size-4"})})}function z1e({className:e,...t}){return m.jsx($1e,{"data-slot":"select-scroll-down-button",className:xt("flex cursor-default items-center justify-center py-1",e),...t,children:m.jsx(kc,{className:"size-4"})})}var U1e="Label",TU=T.forwardRef((e,t)=>m.jsx(an.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));TU.displayName=U1e;var V1e=TU;function Gt({className:e,...t}){return m.jsx(V1e,{"data-slot":"label",className:xt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const kU=({initialProviderType:e=null,initialName:t="",initialValue:n="",initialApiKeyId:r=null,onSave:a,onCancel:i,isSaving:s,className:o})=>{const[l,c]=T.useState(t),[d,h]=T.useState(n),[p,g]=T.useState(e),v=T.useRef(null);T.useEffect(()=>{c(t),h(n),g(e)},[t,n,e,r]);const b=T.useCallback(w=>{var k,j;const S=w;g(S);const E=(k=Ru.find(I=>I.value===S))==null?void 0:k.label,C=(j=Ru.find(I=>I.value===p))==null?void 0:j.label;E&&(!l.trim()||l===`${C}`)&&c(`${E}`),requestAnimationFrame(()=>{var I;(I=v.current)==null||I.focus()})},[l,p]),x=T.useCallback(async()=>{if(!l.trim()||!d.trim()||!p){Ge.error("Key Name, Provider Type, and API Key Value are required.");return}await a(l.trim(),p,d.trim())},[l,d,p,a]);return m.jsxs("div",{className:xt("space-y-4",o),children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"api-key-provider",children:"Provider Type"}),m.jsxs(pl,{value:p??"",onValueChange:b,disabled:s,children:[m.jsx(gl,{id:"api-key-provider",children:m.jsx(ml,{placeholder:"Select Provider Type"})}),m.jsx(yl,{children:Ru.map(w=>m.jsx(da,{value:w.value,children:w.label},w.value))})]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"api-key-name",children:"Key Name"}),m.jsx(Tn,{id:"api-key-name",value:l,onChange:w=>c(w.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:s})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"api-key-value",children:"API Key Value"}),m.jsx(Tn,{ref:v,id:"api-key-value",type:"password",value:d,onChange:w=>h(w.target.value),placeholder:"Enter your API key",required:!0,disabled:s,autoComplete:"new-password"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(It,{variant:"ghost",size:"sm",onClick:i,disabled:s,type:"button",children:[m.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(It,{variant:"secondary",size:"sm",onClick:x,disabled:s||!l.trim()||!d.trim()||!p,type:"button",children:[s&&m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(kf,{className:"h-4 w-4 mr-1"})," ",s?"Saving...":"Save API Key"]})]})]})};var I_="Switch",[H1e,yje]=vi(I_),[q1e,G1e]=H1e(I_),AU=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:c,form:d,...h}=e,[p,g]=T.useState(null),v=An(t,E=>g(E)),b=T.useRef(!1),x=p?d||!!p.closest("form"):!0,[w,S]=_o({prop:a,defaultProp:i??!1,onChange:c,caller:I_});return m.jsxs(q1e,{scope:n,checked:w,disabled:o,children:[m.jsx(an.button,{type:"button",role:"switch","aria-checked":w,"aria-required":s,"data-state":jU(w),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onClick:qt(e.onClick,E=>{S(C=>!C),x&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),x&&m.jsx(IU,{control:p,bubbles:!b.current,name:r,value:l,checked:w,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});AU.displayName=I_;var NU="SwitchThumb",RU=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=G1e(NU,n);return m.jsx(an.span,{"data-state":jU(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});RU.displayName=NU;var W1e="SwitchBubbleInput",IU=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const s=T.useRef(null),o=An(s,i),l=C_(n),c=O1(t);return T.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&g){const v=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(v)}},[l,n,r]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});IU.displayName=W1e;function jU(e){return e?"checked":"unchecked"}var K1e=AU,Z1e=RU;function Ki({className:e,...t}){return m.jsx(K1e,{"data-slot":"switch",className:xt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:m.jsx(Z1e,{"data-slot":"switch-thumb",className:xt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const DU=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const s=d=>{r(d==="none"?null:d)},o=(c=a.find(d=>d.id===n))==null?void 0:c.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return m.jsxs(pl,{value:n??"none",onValueChange:s,disabled:i||a.length===0,children:[m.jsx(gl,{className:xt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:m.jsx(ml,{asChild:!0,children:m.jsxs("div",{className:"flex items-center overflow-hidden",children:[m.jsx(Yw,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),m.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&m.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?m.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),m.jsxs(yl,{className:"bg-popover border-border text-popover-foreground",children:[m.jsx(da,{value:"none",children:m.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>m.jsx(da,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},MU=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:a="",initialApiKeyId:i=null})=>{var x;const[s,o]=T.useState(!1),[l,c]=T.useState({name:a,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,enabledModels:null,autoFetchModels:Zd(r),fetchedModels:null,modelsLastFetchedAt:null});T.useEffect(()=>{c(w=>({...w,name:a||w.name||"",type:r||w.type||null,apiKeyId:i||w.apiKeyId||null,autoFetchModels:r?Zd(r):w.autoFetchModels}))},[a,r,i]);const d=T.useCallback((w,S)=>{c(E=>{var j,I;const C={...E,[w]:S},k=E.name||"";if(w==="type"){const N=S,P=(j=Ru.find(H=>H.value===E.type))==null?void 0:j.label;C.apiKeyId=null,C.baseURL=null,C.autoFetchModels=N?Zd(N):!1,C.enabledModels=null;const L=(I=Ru.find(H=>H.value===N))==null?void 0:I.label;if(L&&(!k.trim()||k===P)&&(C.name=L),N&&vp(N)){const H=(e||[]).filter(M=>M.providerId===N);H.length>0&&(C.apiKeyId=H[0].id)}}return(w==="isEnabled"||w==="autoFetchModels")&&(C[w]=!!S),C})},[e]),h=T.useCallback(async()=>{var w,S;if(!((w=l.name)!=null&&w.trim())||!l.type){Ge.error("Provider Name and Type are required.");return}o(!0);try{const E=l.type,C=l.autoFetchModels??Zd(E),k={name:l.name.trim(),type:E,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((S=l.baseURL)==null?void 0:S.trim())||null,enabledModels:null,autoFetchModels:C,fetchedModels:null,modelsLastFetchedAt:null};await t(k),n()}catch(E){console.error("Failed to add provider (from form component):",E)}finally{o(!1)}},[l,t,n]),p=vp(l.type??null),g=LA(l.type??null),v=Zd(l.type??null),b=(e||[]).filter(w=>!l.type||w.providerId===l.type);return m.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"new-provider-type",children:"Provider Type"}),m.jsxs(pl,{value:l.type??"",onValueChange:w=>d("type",w),disabled:s,children:[m.jsx(gl,{id:"new-provider-type",children:m.jsx(ml,{placeholder:"Select Type"})}),m.jsx(yl,{children:Ru.map(w=>m.jsx(da,{value:w.value,children:w.label},w.value))})]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"new-provider-name",children:"Provider Name"}),m.jsx(Tn,{id:"new-provider-name",value:l.name||"",onChange:w=>d("name",w.target.value),placeholder:"e.g., My Ollama",disabled:s,"aria-label":"Provider Name"})]}),p&&m.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[m.jsx(Gt,{children:"API Key"}),m.jsx(DU,{label:"API Key",selectedKeyId:l.apiKeyId??null,onKeySelected:w=>d("apiKeyId",w),apiKeys:b,disabled:s||!l.type})]}),g&&m.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[m.jsx(Gt,{htmlFor:"new-provider-baseurl",children:"Base URL"}),m.jsx(Tn,{id:"new-provider-baseurl",value:l.baseURL||"",onChange:w=>d("baseURL",w.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:s,"aria-label":"Base URL"})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Ki,{id:"new-enabled",checked:l.isEnabled??!0,onCheckedChange:w=>d("isEnabled",w),disabled:s,"aria-labelledby":"new-enabled-label"}),m.jsx(Gt,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Ki,{id:"new-autofetch",checked:l.autoFetchModels??!1,onCheckedChange:w=>d("autoFetchModels",w),disabled:!v||s,"aria-labelledby":"new-autofetch-label"}),m.jsxs(Gt,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:xt("text-sm",v?"":"text-muted-foreground"),children:["Auto-fetch models ",v?"":"(Not Supported)"]})]})]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(It,{variant:"ghost",size:"sm",onClick:n,disabled:s,type:"button",children:[m.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(It,{variant:"secondary",size:"sm",onClick:h,disabled:s||!((x=l.name)!=null&&x.trim())||!l.type,type:"button",children:[s&&m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(kf,{className:"h-4 w-4 mr-1"})," ",s?"Adding...":"Add Provider"]})]})]})};var j_="Popover",[OU,bje]=vi(j_,[td]),ub=td(),[Y1e,hd]=OU(j_),PU=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=ub(t),l=T.useRef(null),[c,d]=T.useState(!1),[h,p]=_o({prop:r,defaultProp:a??!1,onChange:i,caller:j_});return m.jsx(P1,{...o,children:m.jsx(Y1e,{scope:t,contentId:Va(),triggerRef:l,open:h,onOpenChange:p,onOpenToggle:T.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:c,onCustomAnchorAdd:T.useCallback(()=>d(!0),[]),onCustomAnchorRemove:T.useCallback(()=>d(!1),[]),modal:s,children:n})})};PU.displayName=j_;var FU="PopoverAnchor",X1e=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=hd(FU,n),i=ub(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return T.useEffect(()=>(s(),()=>o()),[s,o]),m.jsx(Ey,{...i,...r,ref:t})});X1e.displayName=FU;var LU="PopoverTrigger",$U=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=hd(LU,n),i=ub(n),s=An(t,a.triggerRef),o=m.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":HU(a.open),...r,ref:s,onClick:qt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:m.jsx(Ey,{asChild:!0,...i,children:o})});$U.displayName=LU;var LR="PopoverPortal",[J1e,Q1e]=OU(LR,{forceMount:void 0}),BU=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=hd(LR,t);return m.jsx(J1e,{scope:t,forceMount:n,children:m.jsx(Wa,{present:n||i.open,children:m.jsx(qp,{asChild:!0,container:a,children:r})})})};BU.displayName=LR;var Lp="PopoverContent",zU=T.forwardRef((e,t)=>{const n=Q1e(Lp,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=hd(Lp,e.__scopePopover);return m.jsx(Wa,{present:r||i.open,children:i.modal?m.jsx(t_e,{...a,ref:t}):m.jsx(n_e,{...a,ref:t})})});zU.displayName=Lp;var e_e=ju("PopoverContent.RemoveScroll"),t_e=T.forwardRef((e,t)=>{const n=hd(Lp,e.__scopePopover),r=T.useRef(null),a=An(t,r),i=T.useRef(!1);return T.useEffect(()=>{const s=r.current;if(s)return T_(s)},[]),m.jsx(cb,{as:e_e,allowPinchZoom:!0,children:m.jsx(UU,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:qt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),n_e=T.forwardRef((e,t)=>{const n=hd(Lp,e.__scopePopover),r=T.useRef(!1),a=T.useRef(!1);return m.jsx(UU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),UU=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...h}=e,p=hd(Lp,n),g=ub(n);return E_(),m.jsx(lb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:m.jsx(Up,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:m.jsx(F1,{"data-state":HU(p.open),role:"dialog",id:p.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),VU="PopoverClose",r_e=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=hd(VU,n);return m.jsx(an.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});r_e.displayName=VU;var a_e="PopoverArrow",i_e=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=ub(n);return m.jsx(L1,{...a,...r,ref:t})});i_e.displayName=a_e;function HU(e){return e?"open":"closed"}var s_e=PU,o_e=$U,l_e=BU,c_e=zU;function jc({...e}){return m.jsx(s_e,{"data-slot":"popover",...e})}function Dc({...e}){return m.jsx(o_e,{"data-slot":"popover-trigger",...e})}function Mc({className:e,align:t="center",sideOffset:n=4,...r}){return m.jsx(l_e,{children:m.jsx(c_e,{"data-slot":"popover-content",align:t,sideOffset:n,className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const jP=e=>{if(!e)return null;const t=parseFloat(e);return isNaN(t)?null:t/1e6},$R=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:s="h-48",onModelClick:o})=>{const[l,c]=T.useState(""),[d,h]=T.useState(!1),[p,g]=T.useState("all"),[v,b]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[x,w]=T.useState(""),[S,E]=T.useState(""),[C,k]=T.useState(""),[j,I]=T.useState(""),N=T.useMemo(()=>{let H=t;if(p==="enabled"?H=H.filter(J=>n.has(J.id)):p==="disabled"&&(H=H.filter(J=>!n.has(J.id))),l.trim()){const J=l.toLowerCase();H=H.filter(Q=>Q.name.toLowerCase().includes(J)||Q.id.toLowerCase().includes(J))}const M=Object.entries(v).filter(([,J])=>J).map(([J])=>J);M.length>0&&(H=H.filter(J=>{var he;const Q=new Set(J.supported_parameters??[]),ne=new Set(((he=J.architecture)==null?void 0:he.input_modalities)??[]);return M.every(de=>{switch(de){case"reasoning":return Q.has("reasoning");case"webSearch":return Q.has("web_search")||Q.has("web_search_options");case"tools":return Q.has("tools");case"multimodal":return Array.from(ne).some(Ie=>Ie!=="text");default:return!0}})}));const Z=parseFloat(x),q=parseFloat(S),ue=parseFloat(C),ae=parseFloat(j),ee=!isNaN(Z),X=!isNaN(q),ie=!isNaN(ue),B=!isNaN(ae);return(ee||X||ie||B)&&(H=H.filter(J=>{var Qe,Le;const Q=jP((Qe=J.pricing)==null?void 0:Qe.prompt),ne=jP((Le=J.pricing)==null?void 0:Le.completion),he=ee?Z/1e6:-1/0,de=X?q/1e6:1/0,Ie=ie?ue/1e6:-1/0,Te=B?ae/1e6:1/0,Ae=Q!==null&&Q>=he&&Q<=de,Ee=ne!==null&&ne>=Ie&&ne<=Te;let Pe=!0;return(ee||X)&&Pe&&(Pe=Ae),(ie||B)&&Pe&&(Pe=Ee),Pe})),H},[t,l,p,n,v,x,S,C,j]),P=H=>{b(M=>({...M,[H]:!M[H]}))},L=(p!=="all"?1:0)+Object.values(v).filter(Boolean).length+(x||S||C||j?1:0);return a?m.jsxs("div",{className:`space-y-2 ${s}`,children:[m.jsx(lr,{className:"h-8 w-full"}),m.jsx(lr,{className:"h-8 w-full"}),m.jsx(lr,{className:"h-8 w-full"})]}):t.length===0?m.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"relative flex-grow",children:[m.jsx(yo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(Tn,{value:l,onChange:H=>c(H.target.value),placeholder:"Filter models by name...",className:"pl-8 h-9 w-full text-xs",type:"text",disabled:i})]}),m.jsxs(jc,{open:d,onOpenChange:h,children:[m.jsx(Dc,{asChild:!0,children:m.jsxs(It,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:i,children:[m.jsx(xY,{className:"h-4 w-4 mr-1"}),"Filters",L>0&&m.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:L})]})}),m.jsxs(Mc,{className:"w-72 p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Gt,{className:"text-xs font-semibold",children:"Status"}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx(It,{variant:p==="all"?"secondary":"outline",size:"sm",onClick:()=>g("all"),children:"All"}),m.jsxs(It,{variant:p==="enabled"?"secondary":"outline",size:"sm",onClick:()=>g("enabled"),children:[m.jsx(Ri,{className:"h-3 w-3 mr-1"})," Enabled"]}),m.jsxs(It,{variant:p==="disabled"?"secondary":"outline",size:"sm",onClick:()=>g("disabled"),children:[m.jsx(TZ,{className:"h-3 w-3 mr-1"})," Disabled"]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Gt,{className:"text-xs font-semibold",children:"Capabilities"}),m.jsxs("div",{className:"flex flex-wrap gap-1",children:[m.jsx(On,{tooltipText:"Reasoning","aria-label":"Reasoning",icon:m.jsx(by,{}),onClick:()=>P("reasoning"),variant:v.reasoning?"secondary":"outline",className:xt(v.reasoning&&"text-primary")}),m.jsx(On,{tooltipText:"Web Search","aria-label":"Web Search",icon:m.jsx(yo,{}),onClick:()=>P("webSearch"),variant:v.webSearch?"secondary":"outline",className:xt(v.webSearch&&"text-primary")}),m.jsx(On,{tooltipText:"Tools","aria-label":"Tools",icon:m.jsx(EA,{}),onClick:()=>P("tools"),variant:v.tools?"secondary":"outline",className:xt(v.tools&&"text-primary")}),m.jsx(On,{tooltipText:"Multimodal","aria-label":"Multimodal",icon:m.jsx(xA,{}),onClick:()=>P("multimodal"),variant:v.multimodal?"secondary":"outline",className:xt(v.multimodal&&"text-primary")})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Gt,{className:"text-xs font-semibold flex items-center gap-1",children:[m.jsx(XZ,{className:"h-3 w-3"})," Price Range ($ / 1M Tokens)"]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(Tn,{type:"number",min:"0",step:"0.01",placeholder:"Min Input",value:x,onChange:H=>w(H.target.value),className:"h-8 text-xs","aria-label":"Minimum input price per million tokens"}),m.jsx(Tn,{type:"number",min:"0",step:"0.01",placeholder:"Max Input",value:S,onChange:H=>E(H.target.value),className:"h-8 text-xs","aria-label":"Maximum input price per million tokens"}),m.jsx(Tn,{type:"number",min:"0",step:"0.01",placeholder:"Min Output",value:C,onChange:H=>k(H.target.value),className:"h-8 text-xs","aria-label":"Minimum output price per million tokens"}),m.jsx(Tn,{type:"number",min:"0",step:"0.01",placeholder:"Max Output",value:j,onChange:H=>I(H.target.value),className:"h-8 text-xs","aria-label":"Maximum output price per million tokens"})]})]})]})]})]}),m.jsx(Xu,{className:`${s} w-full rounded-md border border-border p-3 bg-background/50`,children:m.jsxs("div",{className:"space-y-2",children:[N.map(H=>m.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[m.jsx(Ki,{id:`enable-model-${e}-${H.id}`,checked:n.has(H.id),onCheckedChange:M=>r(H.id,M),disabled:i,"aria-label":`Enable model ${H.name||H.id}`,className:"flex-shrink-0",onClick:M=>M.stopPropagation()}),m.jsx(Gt,{htmlFor:`enable-model-${e}-${H.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate pl-2",title:H.name||H.id,onClick:o?()=>o(H.id):void 0,children:H.name||H.id})]},H.id)),N.length===0&&m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No models match the current filters."})]})})]})},Kd=gt.forwardRef(({className:e,href:t,children:n,...r},a)=>m.jsx("a",{ref:a,href:t,target:"_blank",rel:"noopener noreferrer",className:xt("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));Kd.displayName="Lnk";const u_e=e=>{const{size:t=24,color:n="currentColor",...r}=e;return m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[m.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:m.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),m.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[m.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),m.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),m.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[m.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),m.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),m.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:m.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})},d_e=mA("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Jg({className:e,variant:t,asChild:n=!1,...r}){const a=n?j8:"span";return m.jsx(a,{"data-slot":"badge",className:xt(d_e({variant:t}),e),...r})}const f_e=()=>{const[e,t]=T.useState(!1);T.useEffect(()=>{t(!0)},[]);const n={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},a=[{word:"LiteChat",color:"text-primary"},{word:"library",color:"text-emerald-500"},{word:"browser",color:"text-violet-500"},{word:"local",color:"text-amber-500"},{word:"remote providers",color:"text-sky-500"},{word:"AI",color:"text-rose-800"}],i=o=>{let l=[o];return a.forEach(({word:c,color:d})=>{l=l.reduce((h,p)=>typeof p!="string"?(h.push(p),h):(p.split(new RegExp(`(${c})`,"gi")).forEach((v,b)=>{v.toLowerCase()===c.toLowerCase()?h.push(m.jsx("span",{className:`${d} font-medium`,children:v},`${v}-${b}`)):h.push(v)}),h),[])}),l},s=["Oh, hey?! Hi there!! How are you doing!?","Nice of you to pop by to checkout LiteChat!","What'd you mean you don't know what LiteChat is? Oh Boy hey, you in for a treat!","To start with, it's an(other) AI chat app (yes...)!","But, it is also a library, so you can go on and create your own, AI chat app! (are AI chat apps the new JS frameworks?)","And cause I might be a wee bit on the reluctant side when it comes to parting with my coins, it doesn't require no servers! It all stays in your browser.","(that means I couldn't snoop on what you do here, even if I wanted to!)","While able to run LLM both local (did I tell you I ain't liking throwing coins out?) and from remote providers (but sometimes you have to :(..)"];return m.jsxs(lo.div,{className:"text-center max-w-2xl mx-auto space-y-3 my-6",initial:"hidden",animate:e?"show":"hidden",variants:n,children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsxs(Jg,{variant:"outline",className:"px-3 py-1 bg-black/5 dark:bg-white/10 backdrop-blur-sm border-none",children:[m.jsx(r5,{className:"w-4 h-4 mr-2 text-yellow-500"}),m.jsx("span",{className:"text-sm",children:"Welcome to your future AI chat"})]})}),s.map((o,l)=>m.jsx(lo.p,{className:`text-sm md:text-base ${l===0?"font-medium":""} leading-relaxed`,variants:r,children:i(o)},l)),m.jsxs(lo.div,{variants:r,className:"pt-2",children:[m.jsx(Jg,{className:"bg-gradient-to-r from-violet-600 to-primary border-none",children:"No server required!"}),m.jsx(Jg,{className:"ml-2 bg-gradient-to-r from-amber-500 to-emerald-500 border-none",children:"100% in-browser"})]})]})};function h_e({className:e,...t}){return m.jsx("div",{"data-slot":"card",className:xt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function p_e({className:e,...t}){return m.jsx("div",{"data-slot":"card-header",className:xt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function m_e({className:e,...t}){return m.jsx("div",{"data-slot":"card-title",className:xt("leading-none font-semibold",e),...t})}function g_e({className:e,...t}){return m.jsx("div",{"data-slot":"card-description",className:xt("text-muted-foreground text-sm",e),...t})}function y_e({className:e,...t}){return m.jsx("div",{"data-slot":"card-content",className:xt("px-6",e),...t})}var BR="Progress",zR=100,[b_e,vje]=vi(BR),[v_e,w_e]=b_e(BR),qU=T.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=x_e,...s}=e;(a||a===0)&&!DP(a)&&console.error(__e(`${a}`,"Progress"));const o=DP(a)?a:zR;r!==null&&!MP(r,o)&&console.error(S_e(`${r}`,"Progress"));const l=MP(r,o)?r:null,c=r1(l)?i(l,o):void 0;return m.jsx(v_e,{scope:n,value:l,max:o,children:m.jsx(an.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":r1(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":KU(l,o),"data-value":l??void 0,"data-max":o,...s,ref:t})})});qU.displayName=BR;var GU="ProgressIndicator",WU=T.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=w_e(GU,n);return m.jsx(an.div,{"data-state":KU(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});WU.displayName=GU;function x_e(e,t){return`${Math.round(e/t*100)}%`}function KU(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function r1(e){return typeof e=="number"}function DP(e){return r1(e)&&!isNaN(e)&&e>0}function MP(e,t){return r1(e)&&!isNaN(e)&&e<=t&&e>=0}function __e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${zR}\`.`}function S_e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${zR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ZU=qU,E_e=WU;const Kk=T.forwardRef(({className:e,value:t,...n},r)=>m.jsx(ZU,{ref:r,className:xt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:m.jsx(E_e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Kk.displayName=ZU.displayName;const C_e=({stepNumber:e,title:t,description:n,isComplete:r,isActive:a,openOnComplete:i=!1,contentClassName:s="",icon:o,children:l})=>{const[c,d]=T.useState(!1);return T.useEffect(()=>{d(a||r&&i)},[a,r,i]),m.jsxs(h_e,{className:`border border-border/40 bg-card/50 backdrop-blur-sm shadow-lg ${r?"border-l-4 border-l-green-500/70":a?"border-l-4 border-l-primary/70":""}`,children:[m.jsx(p_e,{className:"pb-2",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${r?"bg-green-500/20 text-green-500":a?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:r?m.jsx(yA,{className:"h-5 w-5"}):m.jsx("div",{className:"flex items-center justify-center",children:o})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs(m_e,{className:"text-base",children:[m.jsxs("span",{className:"opacity-60 mr-2",children:[e,"."]}),t]}),m.jsx("button",{onClick:()=>d(!c),className:`p-1 rounded-full transition-all ${c?"rotate-90":""} hover:bg-muted/60`,children:m.jsx(W8,{className:"h-4 w-4"})})]}),!c&&m.jsx(g_e,{className:"text-xs mt-1",children:typeof n=="string"?n.substring(0,60)+(n.length>60?"...":""):"Click to expand"})]})]})}),m.jsx(N0e,{children:c&&m.jsx(lo.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:m.jsxs(y_e,{className:"pt-2",children:[typeof n=="string"?m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}):m.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:n}),m.jsx("div",{className:s,children:l})]})})})]})},T_e=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:a,getAllAvailableModelDefsForProvider:i,isLoading:s,enableApiKeyManagement:o}=zn(dn(de=>({apiKeys:de.dbApiKeys,addApiKey:de.addApiKey,providers:de.dbProviderConfigs,addProviderConfig:de.addProviderConfig,updateProviderConfig:de.updateProviderConfig,getAllAvailableModelDefsForProvider:de.getAllAvailableModelDefsForProvider,isLoading:de.isLoading,enableApiKeyManagement:de.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:c}=bs(dn(de=>({toggleChatControlPanel:de.toggleChatControlPanel,setInitialSettingsTabs:de.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=mn(dn(de=>({addConversation:de.addConversation,selectItem:de.selectItem}))),[p,g]=T.useState(!1),[v,b]=T.useState(!1),[x,w]=T.useState(!1),[S,E]=T.useState(!1),[C,k]=T.useState(!1),j=T.useMemo(()=>!o||e.length>0,[o,e]),I=T.useMemo(()=>n.length>0,[n]),N=T.useMemo(()=>n.some(de=>de.isEnabled&&de.enabledModels&&de.enabledModels.length>0),[n]),P=T.useMemo(()=>{const de=[...n].sort((Ie,Te)=>Te.createdAt.getTime()-Ie.createdAt.getTime());return de.length>0?de[0]:null},[n]),L=T.useMemo(()=>P?i(P.id):[],[P,i]),H=T.useMemo(()=>new Set((P==null?void 0:P.enabledModels)??[]),[P]),{initialProviderTypeForForm:M,initialProviderNameForForm:Z,initialApiKeyIdForForm:q}=T.useMemo(()=>{var de;if(I)return{type:void 0,name:void 0,keyId:void 0};if(e.length>0){const Te=[...e].sort((Ae,Ee)=>Ee.createdAt.getTime()-Ae.createdAt.getTime()).find(Ae=>vp(Ae.providerId));if(Te){const Ae=Te.providerId,Ee=((de=Ru.find(Pe=>Pe.value===Ae))==null?void 0:de.label)||Ae;return{initialProviderTypeForForm:Ae,initialProviderNameForForm:Ee,initialApiKeyIdForForm:Te.id}}}return{initialProviderTypeForForm:void 0,initialProviderNameForForm:void 0,initialApiKeyIdForForm:void 0}},[e,I]),ue=T.useCallback(async(de,Ie,Te)=>{g(!0);try{await t(de,Ie,Te),Ge.success("API key added successfully!")}finally{g(!1)}},[t]),ae=T.useCallback(async de=>{b(!0);try{const Ie={...de,apiKeyId:de.apiKeyId??(vp(de.type)?q:null)},Te=await r(Ie);return Ge.success("Provider added successfully!"),Te}finally{b(!1)}},[r,q]),ee=T.useCallback(async(de,Ie)=>{if(!P)return;E(!0);const Te=new Set(P.enabledModels??[]);Ie?Te.add(de):Te.delete(de);const Ae=Array.from(Te);try{await a(P.id,{enabledModels:Ae}),Ge.success(Ie?"Model enabled successfully!":"Model disabled successfully!")}catch(Ee){Ge.error("Failed to update model status."),console.error("Failed to save model toggle:",Ee)}finally{E(!1)}},[P,a]),X=T.useCallback(async()=>{w(!0),k(!0);try{await new Promise(Ie=>setTimeout(Ie,800));const de=await d({title:"New Chat"});await h(de,"conversation"),Ge.success("Welcome to your first chat!")}catch(de){Ge.error("Failed to start your first chat."),console.error("Failed to start first chat:",de),w(!1),k(!1)}},[d,h]),ie=(de,Ie)=>{c(de,Ie),l("settingsModal",!0)},B=[j,I,N].filter(Boolean).length,J=o?3:2,Q=B/J*100,ne=[...o?[{id:"api-key",title:"Add API Key",description:m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{children:["To use providers like"," ",m.jsx(Kd,{href:"https://platform.openai.com/api-keys",className:"text-blue-500 hover:text-blue-700 transition-colors",children:"OpenAI"}),","," ",m.jsx(Kd,{href:"https://aistudio.google.com/app/apikey",className:"text-green-600 hover:text-green-700 transition-colors",children:"Google"}),","," ",m.jsx(Kd,{href:"https://console.anthropic.com/settings/keys",className:"text-purple-500 hover:text-purple-700 transition-colors",children:"Anthropic (Claude)"}),", or"," ",m.jsx(Kd,{href:"https://openrouter.ai/keys",className:"text-orange-500 hover:text-orange-700 transition-colors",children:"OpenRouter"})," ","or any OpenAI API compatible provider, add an API key. Keys are stored securely in your browser."]}),m.jsxs("p",{children:['If you want truly local AI, "no internet required", you can setup'," ",m.jsx(Kd,{href:"https://www.ollama.com/",className:"text-teal-500 hover:text-teal-700 transition-colors",children:"Ollama"})," ","or,"," ",m.jsx(Kd,{href:"https://lmstudio.ai/",className:"text-indigo-500 hover:text-indigo-700 transition-colors",children:"LMStudio"})," ","(or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys."]})]}),isComplete:j,content:m.jsx(kU,{onSave:ue,onCancel:()=>{},isSaving:p,className:"border-none shadow-none p-0",initialProviderType:M}),icon:m.jsx(Yw,{className:"h-4 w-4"})}]:[],{id:"add-provider",title:"Add AI Provider",description:m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{children:"Connect to an AI provider you configured the key for..."}),m.jsx("p",{children:"This might look redundant, but it allows you to have multiple keys for the same provider (personal, professional, etc.)"})]}),isComplete:I,content:m.jsx(MU,{apiKeys:e,onAddProvider:ae,onCancel:()=>{},initialType:M,initialName:Z,initialApiKeyId:q}),icon:m.jsx(TT,{className:"h-4 w-4"})},{id:"enable-models",title:"Enable Models",description:m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{children:["Enable models for the provider you just added (",m.jsx("span",{className:"font-medium text-primary",children:(P==null?void 0:P.name)||"..."}),")."]}),m.jsx("p",{children:"Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."}),m.jsx("p",{children:"And just like before, you can choose to activate a model for a certain combination of key/provider!"})]}),isComplete:N,content:P?m.jsx("div",{className:"bg-card/40 rounded-lg p-3 border border-border/30 shadow-inner",children:m.jsx($R,{providerId:P.id,allAvailableModels:L,enabledModelIds:H,onToggleModel:ee,isLoading:s||S,listHeightClass:"h-48"})}):m.jsxs("p",{className:"text-sm text-muted-foreground italic flex items-center",children:[m.jsx(df,{className:"h-4 w-4 mr-2 text-amber-500"}),"Add a provider in Step ",o?"2":"1"," first."]}),icon:m.jsx(by,{className:"h-4 w-4"})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:m.jsxs("div",{children:[C&&m.jsx(lo.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:m.jsx(Kk,{value:x?void 0:100,className:"h-2"})}),m.jsxs(It,{onClick:X,disabled:x||!N,className:"w-full bg-gradient-to-r from-indigo-500 to-primary hover:opacity-90 transition-all",children:[m.jsx(n5,{className:"mr-2 h-4 w-4"}),x?"Launching...":"Start First Chat"]})]}),contentClassName:"p-4",icon:m.jsx(XY,{className:"h-4 w-4"})}],he=ne.findIndex(de=>!de.isComplete);return s?m.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-2xl mx-auto w-full",children:m.jsxs(lo.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full",children:[m.jsx(lr,{className:"h-12 w-1/2 mx-auto mb-6"}),m.jsx(lr,{className:"h-8 w-3/4 mx-auto mb-2"}),m.jsx(lr,{className:"h-4 w-1/2 mx-auto mb-8"}),m.jsx(lr,{className:"h-20 w-full mb-6"}),m.jsx(lr,{className:"h-20 w-full mb-6"}),m.jsx(lr,{className:"h-20 w-full"})]})}):m.jsx(lo.div,{className:"flex h-full flex-col items-center justify-center p-4 bg-gradient-to-b from-background to-background/80",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:m.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx(lo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:m.jsxs("div",{className:"relative mx-auto w-16 h-16 mb-4",children:[m.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl"}),m.jsx("div",{className:"relative bg-gradient-to-br from-primary to-indigo-600 p-3 rounded-full",children:m.jsx(u_e,{className:"h-10 w-10 text-white"})})]})}),m.jsx("h2",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-primary to-indigo-500 bg-clip-text text-transparent",children:"Welcome to LiteChat"}),m.jsx("div",{className:"relative",children:m.jsx(f_e,{})}),m.jsx(Gn,{children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsxs("div",{className:"mt-6 bg-card/40 backdrop-blur-sm border border-border/30 rounded-xl p-3 w-3/4 mx-auto",children:[m.jsx(Kk,{value:Q,className:"h-1.5"}),m.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Setup Progress: ",Math.round(Q),"%"]})]})}),m.jsx(Yn,{children:m.jsxs("p",{children:["Steps completed: ",B," of ",J]})})]})})]}),m.jsx(lo.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:ne.map((de,Ie)=>{const Te=Ie===he;return m.jsx(lo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Ie*.1},children:m.jsx(C_e,{stepNumber:Ie+1,title:de.title,description:de.description,isComplete:de.id!=="start-chat"&&de.isComplete,isActive:Te,openOnComplete:de.id==="enable-models",contentClassName:de.id==="add-provider"||de.id==="api-key"?"p-0 border-none shadow-none bg-transparent":de.contentClassName,icon:de.icon,children:de.content})},de.id)})}),!s&&!I&&he===-1&&m.jsxs(lo.div,{className:"text-center mt-6 p-4 bg-red-500/10 rounded-lg border border-red-500/30",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[m.jsx(df,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),m.jsx("p",{className:"text-sm mb-3",children:"Configuration issue detected. Please review provider settings."}),m.jsx(It,{variant:"outline",size:"sm",onClick:()=>ie("providers"),className:"border-red-500/50 hover:bg-red-500/20 transition-colors",children:"Open Provider Settings"})]})]})})},k_e=["conversation.title_generation"],A_e=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:s})=>{const o=T.useRef(null),l=T.useRef(null),[c,d]=T.useState(!1),h=qn(I=>I.streamingInteractionIds),p=hr(I=>I.chatMaxWidth),{isLoading:g}=zn(dn(I=>({providers:I.dbProviderConfigs,apiKeys:I.dbApiKeys,isLoading:I.isLoading,enableApiKeyManagement:I.enableApiKeyManagement}))),{conversationCount:v,isConversationLoading:b}=mn(dn(I=>({conversationCount:I.conversations.length,isConversationLoading:I.isLoading}))),{projectCount:x,isProjectLoading:w}=di(dn(I=>({projectCount:I.projects.length,isProjectLoading:I.isLoading}))),S=T.useMemo(()=>g||b||w?!1:v===0&&x===0,[v,x,g,b,w]),E=T.useMemo(()=>{const I=[],N=new Set;return[...t].sort((L,H)=>L.index-H.index).forEach(L=>{if(!N.has(L.id)&&!k_e.includes(L.type)){const H=[L];N.add(L.id),I.push(H)}}),I},[t]),C=(I="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:I})};T.useEffect(()=>{if(l.current){const{scrollHeight:I,clientHeight:N,scrollTop:P}=l.current,L=I-N<=P+150,H=n==="streaming"&&h.length>0;(L||H)&&requestAnimationFrame(()=>{C(H?"smooth":"auto")})}},[E.length,n,h]),T.useEffect(()=>{const I=l.current;if(!I)return;const N=()=>{const{scrollHeight:P,clientHeight:L,scrollTop:H}=I,M=H<P-L-L*.5;d(M)};return I.addEventListener("scroll",N,{passive:!0}),N(),()=>{I.removeEventListener("scroll",N)}},[]),T.useEffect(()=>{o.current&&(l.current=o.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const k=()=>g||b||w?m.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[m.jsx(lr,{className:"h-24 w-full"}),m.jsx(lr,{className:"h-32 w-full"}),m.jsx(lr,{className:"h-20 w-full"})]}):S?m.jsx(T_e,{}):e?E.length===0&&n!=="streaming"?m.jsx(i6,{}):m.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[E.map(I=>{const N=I[0];return h.includes(N.id)?m.jsx(_k,{interactionId:N.id,onStop:s},`${N.id}-streaming`):m.jsx(t7,{interaction:N,onEdit:i,onRegenerate:a,onDelete:void 0},N.id)}),n==="streaming"&&h.filter(I=>!t.some(N=>N.id===I)).map(I=>m.jsx(_k,{interactionId:I,onStop:s},`${I}-streaming-new`))]}):m.jsx(i6,{}),j=p||"max-w-7xl";return m.jsxs("div",{className:xt("flex-grow relative",r),children:[m.jsx(Xu,{className:"h-full w-full",ref:o,children:m.jsx("div",{className:xt("chat-canvas-container mx-auto",j),children:k()})}),c&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>C(),"aria-label":"Scroll to bottom",children:m.jsx(EZ,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"left",children:"Scroll to Bottom"})]})})]})},Vh=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:m.jsx("div",{className:xt(r),children:a.map(i=>{const s=n==="icon"?i.iconRenderer:i.renderer;return m.jsx(gt.Fragment,{children:s?s():null},i.id)})})},N_e=Symbol("Let zodToJsonSchema decide on which parser to use"),OP={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},R_e=e=>typeof e=="string"?{...OP,name:e}:{...OP,...e},I_e=e=>{const t=R_e(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function YU(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function xr(e,t,n,r,a){e[t]=n,YU(e,t,r,a)}function j_e(){return{}}function D_e(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Ht.ZodAny&&(n.items=fr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&xr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&xr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(xr(n,"minItems",e.exactLength.value,e.exactLength.message,t),xr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function M_e(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?xr(n,"minimum",r.value,r.message,t):xr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),xr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?xr(n,"maximum",r.value,r.message,t):xr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),xr(n,"maximum",r.value,r.message,t));break;case"multipleOf":xr(n,"multipleOf",r.value,r.message,t);break}return n}function O_e(){return{type:"boolean"}}function XU(e,t){return fr(e.type._def,t)}const P_e=(e,t)=>fr(e.innerType._def,t);function JU(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>JU(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return F_e(e,t)}}const F_e=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":xr(n,"minimum",r.value,r.message,t);break;case"max":xr(n,"maximum",r.value,r.message,t);break}return n};function L_e(e,t){return{...fr(e.innerType._def,t),default:e.defaultValue()}}function $_e(e,t){return t.effectStrategy==="input"?fr(e.schema._def,t):{}}function B_e(e){return{type:"string",enum:Array.from(e.values)}}const z_e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function U_e(e,t){const n=[fr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),fr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(z_e(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;s=l}else r=void 0;a.push(s)}}),a.length?{allOf:a,...r}:void 0}function V_e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let eT;const ro={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(eT===void 0&&(eT=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),eT),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function QU(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":xr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":xr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":ao(n,"email",r.message,t);break;case"format:idn-email":ao(n,"idn-email",r.message,t);break;case"pattern:zod":ki(n,ro.email,r.message,t);break}break;case"url":ao(n,"uri",r.message,t);break;case"uuid":ao(n,"uuid",r.message,t);break;case"regex":ki(n,r.regex,r.message,t);break;case"cuid":ki(n,ro.cuid,r.message,t);break;case"cuid2":ki(n,ro.cuid2,r.message,t);break;case"startsWith":ki(n,RegExp(`^${tT(r.value,t)}`),r.message,t);break;case"endsWith":ki(n,RegExp(`${tT(r.value,t)}$`),r.message,t);break;case"datetime":ao(n,"date-time",r.message,t);break;case"date":ao(n,"date",r.message,t);break;case"time":ao(n,"time",r.message,t);break;case"duration":ao(n,"duration",r.message,t);break;case"length":xr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),xr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{ki(n,RegExp(tT(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&ao(n,"ipv4",r.message,t),r.version!=="v4"&&ao(n,"ipv6",r.message,t);break}case"base64url":ki(n,ro.base64url,r.message,t);break;case"jwt":ki(n,ro.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&ki(n,ro.ipv4Cidr,r.message,t),r.version!=="v4"&&ki(n,ro.ipv6Cidr,r.message,t);break}case"emoji":ki(n,ro.emoji(),r.message,t);break;case"ulid":{ki(n,ro.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{ao(n,"binary",r.message,t);break}case"contentEncoding:base64":{xr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{ki(n,ro.base64,r.message,t);break}}break}case"nanoid":ki(n,ro.nanoid,r.message,t)}return n}function tT(e,t){return t.patternStrategy==="escape"?q_e(e):e}const H_e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function q_e(e){let t="";for(let n=0;n<e.length;n++)H_e.has(e[n])||(t+="\\"),t+=e[n];return t}function ao(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):xr(e,"format",t,n,r)}function ki(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:PP(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):xr(e,"pattern",PP(t,r),n,r)}function PP(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,s=!1,o=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(s){if(r[c].match(/[a-z]/)){o?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),o=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(a+=r[c],o=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=s?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:s&&r[c]==="]"?s=!1:!s&&r[c]==="["&&(s=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function eV(e,t){var r,a,i,s,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Ht.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,d)=>({...c,[d]:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Ht.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...d}=QU(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===Ht.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===Ht.ZodBranded&&e.keyType._def.type._def.typeName===Ht.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...d}=XU(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function G_e(e,t){if(t.mapStrategy==="record")return eV(e,t);const n=fr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function W_e(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function K_e(){return{not:{}}}function Z_e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const a1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Y_e(e,t){if(t.target==="openApi3")return FP(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in a1&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const s=a1[i._def.typeName];return s&&!a.includes(s)?[...a,s]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...a,s];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,s,o)=>o.indexOf(i)===s);return{type:a.length>1?a:a[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return FP(e,t)}const FP=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>fr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function X_e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:a1[e.innerType._def.typeName],nullable:!0}:{type:[a1[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=fr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=fr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function J_e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",YU(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?xr(n,"minimum",r.value,r.message,t):xr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),xr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?xr(n,"maximum",r.value,r.message,t):xr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),xr(n,"maximum",r.value,r.message,t));break;case"multipleOf":xr(n,"multipleOf",r.value,r.message,t);break}return n}function Q_e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let c=tSe(l);c&&n&&(l instanceof po&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const d=fr(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,c||a.push(o))}a.length&&(r.required=a);const s=eSe(e,t);return s!==void 0&&(r.additionalProperties=s),r}function eSe(e,t){if(e.catchall._def.typeName!=="ZodNever")return fr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function tSe(e){try{return e.isOptional()}catch{return!0}}const nSe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return fr(e.innerType._def,t);const n=fr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},rSe=(e,t)=>{if(t.pipeStrategy==="input")return fr(e.in._def,t);if(t.pipeStrategy==="output")return fr(e.out._def,t);const n=fr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=fr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function aSe(e,t){return fr(e.type._def,t)}function iSe(e,t){const r={type:"array",uniqueItems:!0,items:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&xr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&xr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function sSe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>fr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:fr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>fr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function oSe(){return{not:{}}}function lSe(){return{}}const cSe=(e,t)=>fr(e.innerType._def,t),uSe=(e,t,n)=>{switch(t){case Ht.ZodString:return QU(e,n);case Ht.ZodNumber:return J_e(e,n);case Ht.ZodObject:return Q_e(e,n);case Ht.ZodBigInt:return M_e(e,n);case Ht.ZodBoolean:return O_e();case Ht.ZodDate:return JU(e,n);case Ht.ZodUndefined:return oSe();case Ht.ZodNull:return Z_e(n);case Ht.ZodArray:return D_e(e,n);case Ht.ZodUnion:case Ht.ZodDiscriminatedUnion:return Y_e(e,n);case Ht.ZodIntersection:return U_e(e,n);case Ht.ZodTuple:return sSe(e,n);case Ht.ZodRecord:return eV(e,n);case Ht.ZodLiteral:return V_e(e,n);case Ht.ZodEnum:return B_e(e);case Ht.ZodNativeEnum:return W_e(e);case Ht.ZodNullable:return X_e(e,n);case Ht.ZodOptional:return nSe(e,n);case Ht.ZodMap:return G_e(e,n);case Ht.ZodSet:return iSe(e,n);case Ht.ZodLazy:return()=>e.getter()._def;case Ht.ZodPromise:return aSe(e,n);case Ht.ZodNaN:case Ht.ZodNever:return K_e();case Ht.ZodEffects:return $_e(e,n);case Ht.ZodAny:return j_e();case Ht.ZodUnknown:return lSe();case Ht.ZodDefault:return L_e(e,n);case Ht.ZodBranded:return XU(e,n);case Ht.ZodReadonly:return cSe(e,n);case Ht.ZodCatch:return P_e(e,n);case Ht.ZodPipeline:return rSe(e,n);case Ht.ZodFunction:case Ht.ZodVoid:case Ht.ZodSymbol:return;default:return(r=>{})()}};function fr(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==N_e)return l}if(r&&!n){const l=dSe(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=uSe(e,e.typeName,t),s=typeof i=="function"?fr(i(),t):i;if(s&&hSe(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return a.jsonSchema=s,l}return a.jsonSchema=s,s}const dSe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:fSe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},fSe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},hSe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),pSe=(e,t)=>{const n=I_e(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[c,d])=>({...l,[c]:fr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=fr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const o=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var ty={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},ny={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ry={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ay={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},iy={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},mSe=[ty,ny,ry,ay,iy];ty.code+"",ny.code+"",ry.code+"",ay.code+"",iy.code+"";ty.name+"",ty.code,ny.name+"",ny.code,ry.name+"",ry.code,ay.name+"",ay.code,iy.name+"",iy.code;mSe.map(e=>e.code);function gSe(e){const t=["ROOT"];let n=-1,r=null;function a(l,c,d){switch(l){case'"':{n=c,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function s(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":a(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,a(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?o+="true".slice(d.length):"false".startsWith(d)?o+="false".slice(d.length):"null".startsWith(d)&&(o+="null".slice(d.length))}}return o}function ySe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=pf({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=pf({text:gSe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var bSe={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},vSe={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},wSe={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},xSe={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},_Se={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},SSe={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},ESe={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},CSe={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},TSe={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},kSe={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},ASe={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},NSe={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},RSe={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},ISe={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},jSe={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},DSe={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},D_=[bSe,vSe,wSe,xSe,_Se,SSe,ESe,CSe,TSe,kSe,ASe,NSe,RSe,ISe,jSe,DSe];Object.fromEntries(D_.map(e=>[e.code,e]));Object.fromEntries(D_.map(e=>[e.name,e.code]));D_.map(e=>e.code);function li(e,t){const n=D_.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function MSe(e,t){var n;const r=(n=void 0)!=null?n:!1;return OSe(pSe(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var Zk=Symbol.for("vercel.ai.schema");function OSe(e,{validate:t}={}){return{[Zk]:!0,_type:void 0,[nx]:!0,jsonSchema:e,validate:t}}function PSe(e){return typeof e=="object"&&e!==null&&Zk in e&&e[Zk]===!0&&"jsonSchema"in e&&"validate"in e}function M_(e){return PSe(e)?e:MSe(e)}const LP=globalThis||void 0||self;var FSe=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof LP=="object"?LP:{},rf="1.9.0",$P=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function LSe(e){var t=new Set([e]),n=new Set,r=e.match($P);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(o){return n.add(o),!1}function s(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match($P);if(!c)return i(l);var d={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?s(l):i(l):a.minor<=d.minor?s(l):i(l)}}var $Se=LSe(rf),BSe=rf.split(".")[0],sy=Symbol.for("opentelemetry.js.api."+BSe),oy=FSe;function UR(e,t,n,r){var a;r===void 0&&(r=!1);var i=oy[sy]=(a=oy[sy])!==null&&a!==void 0?a:{version:rf};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==rf){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+rf);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+rf+"."),!0}function ly(e){var t,n,r=(t=oy[sy])===null||t===void 0?void 0:t.version;if(!(!r||!$Se(r)))return(n=oy[sy])===null||n===void 0?void 0:n[e]}function VR(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+rf+".");var n=oy[sy];n&&delete n[e]}var zSe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},USe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},VSe=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jg("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jg("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jg("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jg("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jg("verbose",this._namespace,t)},e}();function jg(e,t,n){var r=ly("diag");if(r)return n.unshift(t),r[e].apply(r,USe([],zSe(n),!1))}var hs;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(hs||(hs={}));function HSe(e,t){e<hs.NONE?e=hs.NONE:e>hs.ALL&&(e=hs.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",hs.ERROR),warn:n("warn",hs.WARN),info:n("info",hs.INFO),debug:n("debug",hs.DEBUG),verbose:n("verbose",hs.VERBOSE)}}var qSe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},GSe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},WSe="diag",i1=function(){function e(){function t(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=ly("diag");if(o)return o[a].apply(o,GSe([],qSe(i),!1))}}var n=this,r=function(a,i){var s,o,l;if(i===void 0&&(i={logLevel:hs.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof i=="number"&&(i={logLevel:i});var d=ly("diag"),h=HSe((o=i.logLevel)!==null&&o!==void 0?o:hs.INFO,a);if(d&&!i.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),h.warn("Current logger will overwrite one already registered from "+p)}return UR("diag",h,n,!0)};n.setLogger=r,n.disable=function(){VR(WSe,n)},n.createComponentLogger=function(a){return new VSe(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function KSe(e){return Symbol.for(e)}var ZSe=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),YSe=new ZSe,XSe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},JSe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},QSe=function(){function e(){}return e.prototype.active=function(){return YSe},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,JSe([r],XSe(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),e2e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},t2e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},nT="context",n2e=new QSe,tV=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return UR(nT,t,i1.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,t2e([t,n,r],e2e(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return ly(nT)||n2e},e.prototype.disable=function(){this._getContextManager().disable(),VR(nT,i1.instance())},e}(),Yk;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Yk||(Yk={}));var nV="0000000000000000",rV="00000000000000000000000000000000",r2e={traceId:rV,spanId:nV,traceFlags:Yk.NONE},Qg=function(){function e(t){t===void 0&&(t=r2e),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),HR=KSe("OpenTelemetry Context Key SPAN");function qR(e){return e.getValue(HR)||void 0}function a2e(){return qR(tV.getInstance().active())}function GR(e,t){return e.setValue(HR,t)}function i2e(e){return e.deleteValue(HR)}function s2e(e,t){return GR(e,new Qg(t))}function aV(e){var t;return(t=qR(e))===null||t===void 0?void 0:t.spanContext()}var o2e=/^([0-9a-f]{32})$/i,l2e=/^[0-9a-f]{16}$/i;function c2e(e){return o2e.test(e)&&e!==rV}function u2e(e){return l2e.test(e)&&e!==nV}function iV(e){return c2e(e.traceId)&&u2e(e.spanId)}function d2e(e){return new Qg(e)}var rT=tV.getInstance(),sV=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=rT.active());var a=!!(n!=null&&n.root);if(a)return new Qg;var i=r&&aV(r);return f2e(i)&&iV(i)?new Qg(i):new Qg},e.prototype.startActiveSpan=function(t,n,r,a){var i,s,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(i=n,o=r):(i=n,s=r,o=a);var l=s??rT.active(),c=this.startSpan(t,i,l),d=GR(l,c);return rT.with(d,o,void 0,c)}},e}();function f2e(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var h2e=new sV,p2e=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):h2e},e}(),m2e=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new sV},e}(),g2e=new m2e,BP=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new p2e(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:g2e},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),s1;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(s1||(s1={}));var aT="trace",y2e=function(){function e(){this._proxyTracerProvider=new BP,this.wrapSpanContext=d2e,this.isSpanContextValid=iV,this.deleteSpan=i2e,this.getSpan=qR,this.getActiveSpan=a2e,this.getSpanContext=aV,this.setSpan=GR,this.setSpanContext=s2e}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=UR(aT,this._proxyTracerProvider,i1.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return ly(aT)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){VR(aT,i1.instance()),this._proxyTracerProvider=new BP},e}(),b2e=y2e.getInstance(),v2e=Object.defineProperty,WR=(e,t)=>{for(var n in t)v2e(e,n,{get:t[n],enumerable:!0})};function o1(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function zP(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function UP({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await i.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var oV="AI_InvalidArgumentError",lV=`vercel.ai.error.${oV}`,w2e=Symbol.for(lV),cV,oo=class extends Nn{constructor({parameter:e,value:t,message:n}){super({name:oV,message:`Invalid argument for parameter ${e}: ${n}`}),this[cV]=!0,this.parameter=e,this.value=t}static isInstance(e){return Nn.hasMarker(e,lV)}};cV=w2e;var uV="AI_RetryError",dV=`vercel.ai.error.${uV}`,x2e=Symbol.for(dV),fV,VP=class extends Nn{constructor({message:e,reason:t,errors:n}){super({name:uV,message:e}),this[fV]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Nn.hasMarker(e,dV)}};fV=x2e;var _2e=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>hV(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function hV(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Pw(i)||t===0)throw i;const s=QJ(i),o=[...a,i],l=o.length;if(l>t)throw new VP({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:o});if(i instanceof Error&&ka.isInstance(i)&&i.isRetryable===!0&&l<=t)return await YJ(n),hV(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?i:new VP({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:o})}}function S2e({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new oo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new oo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:_2e({maxRetries:t})}}function Xk({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function E2e({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,o])=>(i[`ai.settings.${s}`]=o,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[s,o])=>(i[`ai.telemetry.metadata.${s}`]=o,i),{}),...Object.entries(r??{}).reduce((i,[s,o])=>(o!==void 0&&(i[`ai.request.headers.${s}`]=o),i),{})}}var C2e={startSpan(){return Nw},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Nw);if(typeof n=="function")return n(Nw);if(typeof r=="function")return r(Nw)}},Nw={spanContext(){return T2e},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},T2e={traceId:"",spanId:"",traceFlags:0};function k2e({isEnabled:e=!1,tracer:t}={}){return e?t||b2e.getTracer("ai"):C2e}function Jk({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return a&&i.end(),s}catch(s){try{s instanceof Error?(i.recordException({name:s.name,message:s.message,stack:s.stack}),i.setStatus({code:s1.ERROR,message:s.message})):i.setStatus({code:s1.ERROR})}finally{i.end()}throw s}})}function np({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var A2e=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=hp(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=G5(this.base64Data)),this.uint8ArrayData}},N2e=class extends A2e{constructor(e){super(e),this.type="file"}},R2e=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function I2e(e){for(const t of R2e)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var pV="AI_NoObjectGeneratedError",mV=`vercel.ai.error.${pV}`,j2e=Symbol.for(mV),gV,HP=class extends Nn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:pV,message:e,cause:t}),this[gV]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return Nn.hasMarker(e,mV)}};gV=j2e;var yV="AI_DownloadError",bV=`vercel.ai.error.${yV}`,D2e=Symbol.for(bV),vV,iT=class extends Nn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:yV,message:a,cause:r}),this[vV]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Nn.hasMarker(e,bV)}};vV=D2e;async function M2e({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new iT({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw iT.isInstance(a)?a:new iT({url:r,cause:a})}}var wV="AI_InvalidDataContentError",xV=`vercel.ai.error.${wV}`,O2e=Symbol.for(xV),_V,qP=class extends Nn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:wV,message:n,cause:t}),this[_V]=!0,this.content=e}static isInstance(e){return Nn.hasMarker(e,xV)}};_V=O2e;var SV=U.union([U.string(),U.instanceof(Uint8Array),U.instanceof(ArrayBuffer),U.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function EV(e){return typeof e=="string"?e:e instanceof ArrayBuffer?hp(new Uint8Array(e)):hp(e)}function l1(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return G5(e)}catch(t){throw new qP({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new qP({content:e})}function P2e(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var CV="AI_InvalidMessageRoleError",TV=`vercel.ai.error.${CV}`,F2e=Symbol.for(TV),kV,L2e=class extends Nn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:CV,message:t}),this[kV]=!0,this.role=e}static isInstance(e){return Nn.hasMarker(e,TV)}};kV=F2e;function $2e(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function B2e({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=M2e}){const a=await U2e(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>z2e(i,a))]}function z2e(e,t){var n,r,a,i,s,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>V2e(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var d;const h=(d=c.providerOptions)!=null?d:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:EV(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var d;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(d=c.providerOptions)!=null?d:c.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const c=l;throw new L2e({role:c})}}}async function U2e(e,t,n,r){const a=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(a.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:o})=>[s.toString(),o]))}function V2e(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,o,l,c;const d=e.type;switch(d){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:p}=$2e(l.toString());if(h==null||p==null)throw new Error(`Invalid data URL format in part ${d}`);s=h,c=l1(p)}else{const h=t[l.toString()];h?(c=h.data,s??(s=h.mimeType)):c=l}else c=l1(l);switch(d){case"image":return c instanceof Uint8Array&&(s=(r=I2e(c))!=null?r:s),{type:"image",image:c,mimeType:s,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?EV(c):c,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function H2e({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new oo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new oo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new oo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new oo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new oo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new oo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new oo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new oo({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:o}}function GP(e){var t,n,r;const a=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let o,l,c;try{[o,l]=i.url.split(","),c=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:l1(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:P2e(l1(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return a}var AV="AI_MessageConversionError",NV=`vercel.ai.error.${AV}`,q2e=Symbol.for(NV),RV,sT=class extends Nn{constructor({originalMessage:e,message:t}){super({name:AV,message:t}),this[RV]=!0,this.originalMessage=e}static isInstance(e){return Nn.hasMarker(e,NV)}};RV=q2e;function G2e(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const o=e[s],l=s===e.length-1,{role:c,content:d,experimental_attachments:h}=o;switch(c){case"system":{i.push({role:"system",content:d});break}case"user":{if(o.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...GP(h)]:d});else{const p=o.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...p,...GP(h)]:p})}break}case"assistant":{if(o.parts!=null){let v=function(){const S=[];for(const C of w)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":S.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:S});const E=w.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new sT({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:j,result:I}=C,N=a[j];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:j,result:N.experimental_toToolResultContent(I),experimental_content:N.experimental_toToolResultContent(I)}:{type:"tool-result",toolCallId:k,toolName:j,result:I}})}),w=[],x=!1,b++},b=0,x=!1,w=[];for(const S of o.parts)switch(S.type){case"text":{x&&v(),w.push(S);break}case"file":case"reasoning":{w.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==b&&v(),w.push(S),x=!0;break}}v();break}const p=o.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:d});break}const g=p.reduce((v,b)=>{var x;return Math.max(v,(x=b.step)!=null?x:0)},0);for(let v=0;v<=g;v++){const b=p.filter(x=>{var w;return((w=x.step)!=null?w:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:x,toolName:w,args:S})=>({type:"tool-call",toolCallId:x,toolName:w,args:S}))]}),i.push({role:"tool",content:b.map(x=>{if(!("result"in x))throw new sT({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(x)});const{toolCallId:w,toolName:S,result:E}=x,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:w,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:w,toolName:S,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const p=c;throw new sT({originalMessage:o,message:`Unsupported role: ${p}`})}}}return i}function W2e(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(K2e);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function K2e(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var Qk=U.lazy(()=>U.union([U.null(),U.string(),U.number(),U.boolean(),U.record(U.string(),Qk),U.array(Qk)])),sa=U.record(U.string(),U.record(U.string(),Qk)),Z2e=U.array(U.union([U.object({type:U.literal("text"),text:U.string()}),U.object({type:U.literal("image"),data:U.string(),mimeType:U.string().optional()})])),IV=U.object({type:U.literal("text"),text:U.string(),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),Y2e=U.object({type:U.literal("image"),image:U.union([SV,U.instanceof(URL)]),mimeType:U.string().optional(),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),jV=U.object({type:U.literal("file"),data:U.union([SV,U.instanceof(URL)]),filename:U.string().optional(),mimeType:U.string(),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),X2e=U.object({type:U.literal("reasoning"),text:U.string(),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),J2e=U.object({type:U.literal("redacted-reasoning"),data:U.string(),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),Q2e=U.object({type:U.literal("tool-call"),toolCallId:U.string(),toolName:U.string(),args:U.unknown(),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),eEe=U.object({type:U.literal("tool-result"),toolCallId:U.string(),toolName:U.string(),result:U.unknown(),content:Z2e.optional(),isError:U.boolean().optional(),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),tEe=U.object({role:U.literal("system"),content:U.string(),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),nEe=U.object({role:U.literal("user"),content:U.union([U.string(),U.array(U.union([IV,Y2e,jV]))]),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),rEe=U.object({role:U.literal("assistant"),content:U.union([U.string(),U.array(U.union([IV,jV,X2e,J2e,Q2e]))]),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),aEe=U.object({role:U.literal("tool"),content:U.array(eEe),providerOptions:sa.optional(),experimental_providerMetadata:sa.optional()}),iEe=U.union([tEe,nEe,rEe,aEe]);function sEe({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new tc({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new tc({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new tc({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new tc({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=W2e(e.messages);if(n==="other")throw new tc({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?G2e(e.messages,{tools:t}):e.messages;if(r.length===0)throw new tc({prompt:e,message:"messages must not be empty"});const a=zp({value:r,schema:U.array(iEe)});if(!a.success)throw new tc({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function oEe({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function lEe(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var cEe="JSON schema:",uEe="You MUST answer with a JSON object that matches the JSON schema above.",dEe="You MUST answer with JSON.";function fEe({prompt:e,schema:t,schemaPrefix:n=t!=null?cEe:void 0,schemaSuffix:r=t!=null?uEe:dEe}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function oT(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Af({prefix:"aiobj",size:24});var Vi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function WP(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function hEe(){let e=[],t=null,n=!1,r=WP();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=WP(),await r.promise,a();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function pEe(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Af({prefix:"aiobj",size:24});var DV="AI_NoOutputSpecifiedError",MV=`vercel.ai.error.${DV}`,mEe=Symbol.for(MV),OV,gEe=class extends Nn{constructor({message:e="No output specified."}={}){super({name:DV,message:e}),this[OV]=!0}static isInstance(e){return Nn.hasMarker(e,MV)}};OV=mEe;var PV="AI_ToolExecutionError",FV=`vercel.ai.error.${PV}`,yEe=Symbol.for(FV),LV,bEe=class extends Nn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${wy(r)}`}){super({name:PV,message:a,cause:r}),this[LV]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Nn.hasMarker(e,FV)}};LV=yEe;function vEe(e){return e!=null&&Object.keys(e).length>0}function wEe({tools:e,toolChoice:t,activeTools:n}){return vEe(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const s=i.type;switch(s){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:M_(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const o=s;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var xEe=/^([\s\S]*?)(\s+)(\S*)$/;function _Ee(e){const t=e.match(xEe);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var $V="AI_InvalidToolArgumentsError",BV=`vercel.ai.error.${$V}`,SEe=Symbol.for(BV),zV,UV=class extends Nn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${wy(n)}`}){super({name:$V,message:r,cause:n}),this[zV]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Nn.hasMarker(e,BV)}};zV=SEe;var VV="AI_NoSuchToolError",HV=`vercel.ai.error.${VV}`,EEe=Symbol.for(HV),qV,eA=class extends Nn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:VV,message:n}),this[qV]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Nn.hasMarker(e,HV)}};qV=EEe;var GV="AI_ToolCallRepairError",WV=`vercel.ai.error.${GV}`,CEe=Symbol.for(WV),KV,TEe=class extends Nn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${wy(e)}`}){super({name:GV,message:n,cause:e}),this[KV]=!0,this.originalError=t}static isInstance(e){return Nn.hasMarker(e,WV)}};KV=CEe;async function kEe({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new eA({toolName:e.toolName});try{return await KP({toolCall:e,tools:t})}catch(i){if(n==null||!(eA.isInstance(i)||UV.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>M_(t[o].parameters).jsonSchema,system:r,messages:a,error:i})}catch(o){throw new TEe({cause:o,originalError:i})}if(s==null)throw i;return await KP({toolCall:s,tools:t})}}async function KP({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new eA({toolName:e.toolName,availableTools:Object.keys(t)});const a=M_(r.parameters),i=e.args.trim()===""?zp({value:{},schema:a}):pf({text:e.args,schema:a});if(i.success===!1)throw new UV({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function AEe(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function ZP({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:s,generateMessageId:o}){const l=[];return l.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:s}),i.length>0&&l.push({role:"tool",id:o(),content:i.map(c=>{const d=r[c.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:d.experimental_toToolResultContent(c.result),experimental_content:d.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),l}Af({prefix:"aitxt",size:24});Af({prefix:"msg",size:24});var NEe={};WR(NEe,{object:()=>DEe,text:()=>jEe});var ZV="AI_InvalidStreamPartError",YV=`vercel.ai.error.${ZV}`,REe=Symbol.for(YV),XV,IEe=class extends Nn{constructor({chunk:e,message:t}){super({name:ZV,message:t}),this[XV]=!0,this.chunk=e}static isInstance(e){return Nn.hasMarker(e,YV)}};XV=REe;var jEe=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),DEe=({schema:e})=>{const t=M_(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:fEe({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=ySe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=pf({text:n});if(!a.success)throw new HP({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=zp({value:a.value,schema:t});if(!i.success)throw new HP({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function JV(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function KR(e,t){const n=e.getReader(),r=t.getReader();let a,i,s=!1,o=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function c(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(s){await c(d);return}if(o){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:p}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||d.enqueue(h.value),p===n?(a=void 0,h.done&&(await c(d),s=!0)):(i=void 0,h.done&&(o=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function MEe({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:s,abortSignal:o,repairToolCall:l}){let c=null;const d=new ReadableStream({start(w){c=w}}),h={},p=new Set;let g=!1,v;function b(){g&&p.size===0&&(v!=null&&c.enqueue(v),c.close())}const x=new TransformStream({async transform(w,S){const E=w.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(w);break}case"file":{S.enqueue(new N2e({data:w.data,mimeType:w.mimeType}));break}case"tool-call-delta":{n&&(h[w.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:w.toolCallId,toolName:w.toolName}),h[w.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:w.toolCallId,toolName:w.toolName,argsTextDelta:w.argsTextDelta}));break}case"tool-call":{try{const C=await kEe({toolCall:w,tools:e,repairToolCall:l,system:i,messages:s});S.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const j=nl();p.add(j),Jk({name:"ai.toolCall",attributes:np({telemetry:a,attributes:{...Xk({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async I=>k.execute(C.args,{toolCallId:C.toolCallId,messages:s,abortSignal:o}).then(N=>{c.enqueue({...C,type:"tool-result",result:N}),p.delete(j),b();try{I.setAttributes(np({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{c.enqueue({type:"error",error:new bEe({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:N})}),p.delete(j),b()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:w.finishReason,logprobs:w.logprobs,usage:oEe(w.usage),experimental_providerMetadata:w.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(w){return Promise.all([t.pipeThrough(x).pipeTo(new WritableStream({write(S){w.enqueue(S)},close(){}})),d.pipeTo(new WritableStream({write(S){w.enqueue(S)},close(){w.close()}}))])}})}var OEe=Af({prefix:"aitxt",size:24}),PEe=Af({prefix:"msg",size:24});function FEe({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:s,abortSignal:o,headers:l,maxSteps:c=1,experimental_generateMessageId:d=PEe,experimental_output:h,experimental_continueSteps:p=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:x=!1,toolCallStreaming:w=x,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:j,onFinish:I,onStepFinish:N,_internal:{now:P=pEe,generateId:L=OEe,currentDate:H=()=>new Date}={},...M}){return new $Ee({model:e,telemetry:g,headers:l,settings:M,maxRetries:s,abortSignal:o,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:w,transforms:JV(C),activeTools:S,repairToolCall:E,maxSteps:c,output:h,continueSteps:p,providerOptions:b,onChunk:k,onError:j,onFinish:I,onStepFinish:N,now:P,currentDate:H,generateId:L,generateMessageId:d})}function LEe(e){if(!e)return new TransformStream({transform(i,s){s.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:s=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:s}),n=""}return new TransformStream({transform(i,s){if(i.type==="step-finish"&&a({controller:s}),i.type!=="text-delta"){s.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(a({controller:s,partialOutput:o.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var $Ee=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:s,prompt:o,messages:l,tools:c,toolChoice:d,toolCallStreaming:h,transforms:p,activeTools:g,repairToolCall:v,maxSteps:b,output:x,continueSteps:w,providerOptions:S,now:E,currentDate:C,generateId:k,generateMessageId:j,onChunk:I,onError:N,onFinish:P,onStepFinish:L}){this.warningsPromise=new Vi,this.usagePromise=new Vi,this.finishReasonPromise=new Vi,this.providerMetadataPromise=new Vi,this.textPromise=new Vi,this.reasoningPromise=new Vi,this.reasoningDetailsPromise=new Vi,this.sourcesPromise=new Vi,this.filesPromise=new Vi,this.toolCallsPromise=new Vi,this.toolResultsPromise=new Vi,this.requestPromise=new Vi,this.responsePromise=new Vi,this.stepsPromise=new Vi;var H;if(b<1)throw new oo({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=x;let M="",Z="",q="",ue=[],ae=[],ee,X=[];const ie=[],B={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let J=[],Q=[],ne,he,de="initial";const Ie=[];let Te;const Ae=new TransformStream({async transform(fe,se){se.enqueue(fe);const{part:te}=fe;if((te.type==="text-delta"||te.type==="reasoning"||te.type==="source"||te.type==="tool-call"||te.type==="tool-result"||te.type==="tool-call-streaming-start"||te.type==="tool-call-delta")&&await(I==null?void 0:I({chunk:te})),te.type==="error"&&await(N==null?void 0:N({error:te.error})),te.type==="text-delta"&&(M+=te.textDelta,Z+=te.textDelta,q+=te.textDelta),te.type==="reasoning"&&(ee==null?(ee={type:"text",text:te.textDelta},ue.push(ee)):ee.text+=te.textDelta),te.type==="reasoning-signature"){if(ee==null)throw new Nn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});ee.signature=te.signature,ee=void 0}if(te.type==="redacted-reasoning"&&ue.push({type:"redacted",data:te.data}),te.type==="file"&&ae.push(te),te.type==="source"&&(ie.push(te.source),X.push(te.source)),te.type==="tool-call"&&J.push(te),te.type==="tool-result"&&Q.push(te),te.type==="step-finish"){const xe=ZP({text:Z,files:ae,reasoning:ue,tools:c??{},toolCalls:J,toolResults:Q,messageId:te.messageId,generateMessageId:j}),Fe=Ie.length;let Ce="done";Fe+1<b&&(w&&te.finishReason==="length"&&J.length===0?Ce="continue":J.length>0&&Q.length===J.length&&(Ce="tool-result"));const We={stepType:de,text:M,reasoning:AEe(ue),reasoningDetails:ue,files:ae,sources:X,toolCalls:J,toolResults:Q,finishReason:te.finishReason,usage:te.usage,warnings:te.warnings,logprobs:te.logprobs,request:te.request,response:{...te.response,messages:[...B.messages,...xe]},providerMetadata:te.experimental_providerMetadata,experimental_providerMetadata:te.experimental_providerMetadata,isContinued:te.isContinued};await(L==null?void 0:L(We)),Ie.push(We),J=[],Q=[],M="",X=[],ue=[],ae=[],ee=void 0,Ce!=="done"&&(de=Ce),Ce!=="continue"&&(B.messages.push(...xe),Z="")}te.type==="finish"&&(B.id=te.response.id,B.timestamp=te.response.timestamp,B.modelId=te.response.modelId,B.headers=te.response.headers,he=te.usage,ne=te.finishReason)},async flush(fe){var se;try{if(Ie.length===0)return;const te=Ie[Ie.length-1];Ne.warningsPromise.resolve(te.warnings),Ne.requestPromise.resolve(te.request),Ne.responsePromise.resolve(te.response),Ne.toolCallsPromise.resolve(te.toolCalls),Ne.toolResultsPromise.resolve(te.toolResults),Ne.providerMetadataPromise.resolve(te.experimental_providerMetadata),Ne.reasoningPromise.resolve(te.reasoning),Ne.reasoningDetailsPromise.resolve(te.reasoningDetails);const xe=ne??"unknown",Fe=he??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ne.finishReasonPromise.resolve(xe),Ne.usagePromise.resolve(Fe),Ne.textPromise.resolve(q),Ne.sourcesPromise.resolve(ie),Ne.filesPromise.resolve(te.files),Ne.stepsPromise.resolve(Ie),await(P==null?void 0:P({finishReason:xe,logprobs:void 0,usage:Fe,text:q,reasoning:te.reasoning,reasoningDetails:te.reasoningDetails,files:te.files,sources:te.sources,toolCalls:te.toolCalls,toolResults:te.toolResults,request:(se=te.request)!=null?se:{},response:te.response,warnings:te.warnings,providerMetadata:te.providerMetadata,experimental_providerMetadata:te.experimental_providerMetadata,steps:Ie})),Te.setAttributes(np({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>{var Ce;return(Ce=te.toolCalls)!=null&&Ce.length?JSON.stringify(te.toolCalls):void 0}},"ai.usage.promptTokens":Fe.promptTokens,"ai.usage.completionTokens":Fe.completionTokens}}))}catch(te){fe.error(te)}finally{Te.end()}}}),Ee=hEe();this.addStream=Ee.addStream,this.closeStream=Ee.close;let Pe=Ee.stream;for(const fe of p)Pe=Pe.pipeThrough(fe({tools:c,stopStream(){Ee.terminate()}}));this.baseStream=Pe.pipeThrough(LEe(x)).pipeThrough(Ae);const{maxRetries:Qe,retry:Le}=S2e({maxRetries:a}),je=k2e(t),z=E2e({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Qe}}),Se=sEe({prompt:{system:(H=x==null?void 0:x.injectIntoSystemPrompt({system:s,model:e}))!=null?H:s,prompt:o,messages:l},tools:c}),Ne=this;Jk({name:"ai.streamText",attributes:np({telemetry:t,attributes:{...Xk({operationId:"ai.streamText",telemetry:t}),...z,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:je,endWhenDone:!1,fn:async fe=>{Te=fe;async function se({currentStep:te,responseMessages:xe,usage:Fe,stepType:Ce,previousStepText:We,hasLeadingWhitespace:Nt,messageId:it}){var St;const Ft=xe.length===0?Se.type:"messages",Mt=[...Se.messages,...xe],Zt=await B2e({prompt:{type:Ft,system:Se.system,messages:Mt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(St=e.supportsUrl)==null?void 0:St.bind(e)}),be={type:"regular",...wEe({tools:c,toolChoice:d,activeTools:g})},{result:{stream:D,warnings:W,rawResponse:pe,request:De},doStreamSpan:ve,startTimestampMs:ke}=await Le(()=>Jk({name:"ai.streamText.doStream",attributes:np({telemetry:t,attributes:{...Xk({operationId:"ai.streamText.doStream",telemetry:t}),...z,"ai.prompt.format":{input:()=>Ft},"ai.prompt.messages":{input:()=>JSON.stringify(Zt)},"ai.prompt.tools":{input:()=>{var Rt;return(Rt=be.tools)==null?void 0:Rt.map(Lt=>JSON.stringify(Lt))}},"ai.prompt.toolChoice":{input:()=>be.toolChoice!=null?JSON.stringify(be.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:je,endWhenDone:!1,fn:async Rt=>({startTimestampMs:E(),doStreamSpan:Rt,result:await e.doStream({mode:be,...H2e(r),inputFormat:Ft,responseFormat:x==null?void 0:x.responseFormat({model:e}),prompt:Zt,providerMetadata:S,abortSignal:i,headers:n})})})),le=MEe({tools:c,generatorStream:D,toolCallStreaming:h,tracer:je,telemetry:t,system:s,messages:Mt,repairToolCall:v,abortSignal:i}),ft=De??{},vt=[],F=[],Be=[],nt=[];let ye,Me="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Dt,ge=!0,G="",V=Ce==="continue"?We:"",K,me={id:k(),timestamp:C(),modelId:e.modelId},Re="",Ve=!1,pt=!0,Kt=!1;async function ut({controller:Rt,chunk:Lt}){Rt.enqueue(Lt),G+=Lt.textDelta,V+=Lt.textDelta,Ve=!0,Kt=Lt.textDelta.trimEnd()!==Lt.textDelta}Ne.addStream(le.pipeThrough(new TransformStream({async transform(Rt,Lt){var en,Rn,Xn;if(ge){const Sr=E()-ke;ge=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Sr}),ve.setAttributes({"ai.response.msToFirstChunk":Sr}),Lt.enqueue({type:"step-start",messageId:it,request:ft,warnings:W??[]})}if(Rt.type==="text-delta"&&Rt.textDelta.length===0)return;const _r=Rt.type;switch(_r){case"text-delta":{if(w){const Sr=pt&&Nt?Rt.textDelta.trimStart():Rt.textDelta;if(Sr.length===0)break;pt=!1,Re+=Sr;const $n=_Ee(Re);$n!=null&&(Re=$n.suffix,await ut({controller:Lt,chunk:{type:"text-delta",textDelta:$n.prefix+$n.whitespace}}))}else await ut({controller:Lt,chunk:Rt});break}case"reasoning":{Lt.enqueue(Rt),ye==null?(ye={type:"text",text:Rt.textDelta},Be.push(ye)):ye.text+=Rt.textDelta;break}case"reasoning-signature":{if(Lt.enqueue(Rt),ye==null)throw new IEe({chunk:Rt,message:"reasoning-signature without reasoning"});ye.signature=Rt.signature,ye=void 0;break}case"redacted-reasoning":{Lt.enqueue(Rt),Be.push({type:"redacted",data:Rt.data});break}case"tool-call":{Lt.enqueue(Rt),vt.push(Rt);break}case"tool-result":{Lt.enqueue(Rt),F.push(Rt);break}case"response-metadata":{me={id:(en=Rt.id)!=null?en:me.id,timestamp:(Rn=Rt.timestamp)!=null?Rn:me.timestamp,modelId:(Xn=Rt.modelId)!=null?Xn:me.modelId};break}case"finish":{Ke=Rt.usage,Me=Rt.finishReason,Dt=Rt.experimental_providerMetadata,K=Rt.logprobs;const Sr=E()-ke;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":Sr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/Sr});break}case"file":{nt.push(Rt),Lt.enqueue(Rt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Lt.enqueue(Rt);break}case"error":{Lt.enqueue(Rt),Me="error";break}default:{const Sr=_r;throw new Error(`Unknown chunk type: ${Sr}`)}}},async flush(Rt){const Lt=vt.length>0?JSON.stringify(vt):void 0;let en="done";te+1<b&&(w&&Me==="length"&&vt.length===0?en="continue":vt.length>0&&F.length===vt.length&&(en="tool-result")),w&&Re.length>0&&(en!=="continue"||Ce==="continue"&&!Ve)&&(await ut({controller:Rt,chunk:{type:"text-delta",textDelta:Re}}),Re="");try{ve.setAttributes(np({telemetry:t,attributes:{"ai.response.finishReason":Me,"ai.response.text":{output:()=>G},"ai.response.toolCalls":{output:()=>Lt},"ai.response.id":me.id,"ai.response.model":me.modelId,"ai.response.timestamp":me.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[Me],"gen_ai.response.id":me.id,"gen_ai.response.model":me.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{ve.end()}Rt.enqueue({type:"step-finish",finishReason:Me,usage:Ke,providerMetadata:Dt,experimental_providerMetadata:Dt,logprobs:K,request:ft,response:{...me,headers:pe==null?void 0:pe.headers},warnings:W,isContinued:en==="continue",messageId:it});const Rn=lEe(Fe,Ke);if(en==="done")Rt.enqueue({type:"finish",finishReason:Me,usage:Rn,providerMetadata:Dt,experimental_providerMetadata:Dt,logprobs:K,response:{...me,headers:pe==null?void 0:pe.headers}}),Ne.closeStream();else{if(Ce==="continue"){const Xn=xe[xe.length-1];typeof Xn.content=="string"?Xn.content+=G:Xn.content.push({text:G,type:"text"})}else xe.push(...ZP({text:G,files:nt,reasoning:Be,tools:c??{},toolCalls:vt,toolResults:F,messageId:it,generateMessageId:j}));await se({currentStep:te+1,responseMessages:xe,usage:Rn,stepType:en,previousStepText:V,hasLeadingWhitespace:Kt,messageId:en==="continue"?it:j()})}}})))}await se({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:j()})}}).catch(fe=>{Ne.addStream(new ReadableStream({start(se){se.enqueue({type:"error",error:fe}),se.close()}})),Ne.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return oT(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return oT(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new gEe;return oT(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,s)=>{const o=i.type;switch(o){case"text-delta":{s.enqueue(li("text",i.textDelta));break}case"reasoning":{n&&s.enqueue(li("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&s.enqueue(li("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&s.enqueue(li("reasoning_signature",{signature:i.signature}));break}case"file":{s.enqueue(li("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&s.enqueue(li("source",i.source));break}case"tool-call-streaming-start":{s.enqueue(li("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{s.enqueue(li("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{s.enqueue(li("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{s.enqueue(li("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{s.enqueue(li("error",e(i.error)));break}case"step-start":{s.enqueue(li("start_step",{messageId:i.messageId}));break}case"step-finish":{s.enqueue(li("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&s.enqueue(li("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:c}={}){UP({response:e,status:t,statusText:n,headers:zP(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){UP({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:zP(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?KR(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:o1(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:o1(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};function BEe(e,t){if(t.length===0)return null;const n=e.indexOf(t);if(n!==-1)return n;for(let r=e.length-1;r>=0;r--){const a=e.substring(r);if(t.startsWith(a))return r}return null}function zEe({tagName:e,separator:t=`
`,startWithReasoning:n=!1}){const r=`<${e}>`,a=`</${e}>`;return{middlewareVersion:"v1",wrapGenerate:async({doGenerate:i})=>{const{text:s,...o}=await i();if(s==null)return{text:s,...o};const l=n?r+s:s,c=new RegExp(`${r}(.*?)${a}`,"gs"),d=Array.from(l.matchAll(c));if(!d.length)return{text:l,...o};const h=d.map(g=>g[1]).join(t);let p=l;for(let g=d.length-1;g>=0;g--){const v=d[g],b=p.slice(0,v.index),x=p.slice(v.index+v[0].length);p=b+(b.length>0&&x.length>0?t:"")+x}return{...o,text:p,reasoning:h}},wrapStream:async({doStream:i})=>{const{stream:s,...o}=await i();let l=!0,c=!0,d=!1,h=n,p="";return{stream:s.pipeThrough(new TransformStream({transform:(g,v)=>{if(g.type!=="text-delta"){v.enqueue(g);return}p+=g.textDelta;function b(x){if(x.length>0){const w=d&&(h?!l:!c)?t:"";v.enqueue({type:h?"reasoning":"text-delta",textDelta:w+x}),d=!1,h?l=!1:c=!1}}do{const x=h?a:r,w=BEe(p,x);if(w==null){b(p),p="";break}if(b(p.slice(0,w)),w+x.length<=p.length)p=p.slice(w+x.length),h=!h,d=!0;else{p=p.slice(w);break}}while(!0)}})),...o}}}}var UEe=({model:e,middleware:t,modelId:n,providerId:r})=>JV(t).reverse().reduce((a,i)=>VEe({model:a,middleware:i,modelId:n,providerId:r}),e),VEe=({model:e,middleware:{transformParams:t,wrapGenerate:n,wrapStream:r},modelId:a,providerId:i})=>{var s;async function o({params:l,type:c}){return t?await t({params:l,type:c}):l}return{specificationVersion:"v1",provider:i??e.provider,modelId:a??e.modelId,defaultObjectGenerationMode:e.defaultObjectGenerationMode,supportsImageUrls:e.supportsImageUrls,supportsUrl:(s=e.supportsUrl)==null?void 0:s.bind(e),supportsStructuredOutputs:e.supportsStructuredOutputs,async doGenerate(l){const c=await o({params:l,type:"generate"}),d=async()=>e.doGenerate(c);return n?n({doGenerate:d,doStream:async()=>e.doStream(c),params:c,model:e}):d()},async doStream(l){const c=await o({params:l,type:"stream"}),d=async()=>e.doGenerate(c),h=async()=>e.doStream(c);return r?r({doGenerate:d,doStream:h,params:c,model:e}):h()}}},HEe=U.object({name:U.string(),version:U.string()}).passthrough(),ZR=U.object({_meta:U.optional(U.object({}).passthrough())}).passthrough(),cy=ZR,qEe=U.object({method:U.string(),params:U.optional(ZR)}),GEe=U.object({experimental:U.optional(U.object({}).passthrough()),logging:U.optional(U.object({}).passthrough()),prompts:U.optional(U.object({listChanged:U.optional(U.boolean())}).passthrough()),resources:U.optional(U.object({subscribe:U.optional(U.boolean()),listChanged:U.optional(U.boolean())}).passthrough()),tools:U.optional(U.object({listChanged:U.optional(U.boolean())}).passthrough())}).passthrough();cy.extend({protocolVersion:U.string(),capabilities:GEe,serverInfo:HEe,instructions:U.optional(U.string())});var WEe=cy.extend({nextCursor:U.optional(U.string())}),KEe=U.object({name:U.string(),description:U.optional(U.string()),inputSchema:U.object({type:U.literal("object"),properties:U.optional(U.object({}).passthrough())}).passthrough()}).passthrough();WEe.extend({tools:U.array(KEe)});var ZEe=U.object({type:U.literal("text"),text:U.string()}).passthrough(),YEe=U.object({type:U.literal("image"),data:U.string().base64(),mimeType:U.string()}).passthrough(),QV=U.object({uri:U.string(),mimeType:U.optional(U.string())}).passthrough(),XEe=QV.extend({text:U.string()}),JEe=QV.extend({blob:U.string().base64()}),QEe=U.object({type:U.literal("resource"),resource:U.union([XEe,JEe])}).passthrough();cy.extend({content:U.array(U.union([ZEe,YEe,QEe])),isError:U.boolean().default(!1).optional()}).or(cy.extend({toolResult:U.unknown()}));var O_="2.0",eCe=U.object({jsonrpc:U.literal(O_),id:U.union([U.string(),U.number().int()])}).merge(qEe).strict(),tCe=U.object({jsonrpc:U.literal(O_),id:U.union([U.string(),U.number().int()]),result:cy}).strict(),nCe=U.object({jsonrpc:U.literal(O_),id:U.union([U.string(),U.number().int()]),error:U.object({code:U.number().int(),message:U.string(),data:U.optional(U.unknown())})}).strict(),rCe=U.object({jsonrpc:U.literal(O_)}).merge(U.object({method:U.string(),params:U.optional(ZR)})).strict();U.union([eCe,rCe,tCe,nCe]);var aCe={};WR(aCe,{mergeIntoDataStream:()=>oCe,toDataStream:()=>iCe,toDataStreamResponse:()=>sCe});function eH(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function YR(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&YP((a=n.data)==null?void 0:a.chunk,r);return}YP(n,r)}})).pipeThrough(eH(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(li("text",n))}}))}function iCe(e,t){return YR(e,t).pipeThrough(new TextEncoderStream)}function sCe(e,t){var n;const r=YR(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,s=a?KR(a.stream,r):r;return new Response(s,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:o1(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function oCe(e,t){t.dataStream.merge(YR(e,t.callbacks))}function YP(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var lCe={};WR(lCe,{mergeIntoDataStream:()=>dCe,toDataStream:()=>cCe,toDataStreamResponse:()=>uCe});function XR(e,t){const n=fCe();return ZJ(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(eH(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(li("text",r))}}))}function cCe(e,t){return XR(e,t).pipeThrough(new TextEncoderStream)}function uCe(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,s=XR(e,i).pipeThrough(new TextEncoderStream),o=a?KR(a.stream,s):s;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:o1(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function dCe(e,t){t.dataStream.merge(XR(e,t.callbacks))}function fCe(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class hCe{static async executeInteraction(t,n,r){let a,i=!1;try{a=await FEe(n);for await(const s of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(s.type){case"text-delta":r.onChunk(s.textDelta);break;case"tool-call":r.onToolCall(s);break;case"tool-result":r.onToolResult(s);break;case"finish":i=!0,r.onFinish({finishReason:s.finishReason,usage:s.usage,providerMetadata:s.providerMetadata});break;case"error":r.onError(new Error(`AI Stream Error Part: ${s.error instanceof Error?s.error.message:s.error}`));return;default:break}}!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(s){console.error(`[AIService] Error during streamText call for ${t}:`,s),s instanceof Error&&s.name==="AbortError"||r.onError(s instanceof Error?s:new Error(String(s)))}finally{console.log(`[AIService] Stream processing loop finished for ${t}.`)}}}const Kw={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,async startInteraction(e,t,n,r="message.user_assistant"){var H,M,Z,q,ue,ae,ee,X,ie;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const a=await JT(tx.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(a===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const i=a&&typeof a=="object"?a.prompt:e,s=ji(),o=new AbortController;this._activeControllers.set(s,o),this._streamingToolData.set(s,{calls:[],results:[]}),this._firstChunkTimestamps.delete(s),this._interactionStartTimes.delete(s);const l=qn.getState(),d=l.interactions.filter(B=>B.conversationId===t),h=r==="conversation.title_generation"?-1:d.reduce((B,J)=>Math.max(B,J.index),-1)+1,p=r==="conversation.title_generation"?null:d.length>0?d[d.length-1].id:null,g=performance.now();this._interactionStartTimes.set(s,g);const v={id:s,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...i.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:h,parentId:p};r!=="conversation.title_generation"?(l._addInteractionToState(v),l._addStreamingId(s)):(l._addInteractionToState(v),l._addStreamingId(s),console.log(`[InteractionService] Added title generation interaction ${s} to state.`)),_t.saveInteraction({...v}).catch(B=>{console.error(`[InteractionService] Failed initial persistence for ${s}`,B)}),Tt.emit(Et.INTERACTION_STARTED,{interactionId:s,conversationId:t,type:v.type});const b=(H=i.metadata)==null?void 0:H.modelId;if(!b)return this._finalizeInteraction(s,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:x,modelId:w}=Ac(b);if(!x||!w)return this._finalizeInteraction(s,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const S=zn.getState().dbProviderConfigs.find(B=>B.id===x);if(!S)return this._finalizeInteraction(s,"ERROR",new Error(`Provider configuration not found for ID: ${x}`),r),null;const E=zn.getState().getApiKeyForProvider(x),C=jL(S,w,E);if(!C)return this._finalizeInteraction(s,"ERROR",new Error(`Failed to instantiate model instance for ${b} from provider ${S.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const k=r!=="conversation.title_generation"?(((M=i.metadata)==null?void 0:M.enabledTools)??[]).reduce((B,J)=>{const ne=Ir.getState().getRegisteredTools()[J];if(ne!=null&&ne.implementation){const he={...ne.definition};he.execute=async de=>{const Ie=qn.getState().currentConversationId,Te=Ie?mn.getState().getConversationById(Ie):null,Ae=(Te==null?void 0:Te.projectId)??"orphan";let Ee;try{Ee=await Co.getState().initializeVFS(Ae,{force:!0})}catch(Pe){return{_isError:!0,error:`Filesystem error: ${Pe.message}`}}try{const Pe=zre(),Qe=ne.definition.parameters.parse(de),Le=ne.implementation,je={...Pe,fsInstance:Ee};return await Le(Qe,je)}catch(Pe){const Qe=Pe instanceof Error?Pe.message:String(Pe);return Pe instanceof U.ZodError?{_isError:!0,error:`Invalid arguments: ${Pe.errors.map(Le=>`${Le.path.join(".")} (${Le.message})`).join(", ")}`}:{_isError:!0,error:Qe}}},B[J]=he}return B},{}):void 0,j=((Z=i.parameters)==null?void 0:Z.maxSteps)??hr.getState().toolMaxSteps,I=zEe({tagName:"reasoning"}),P={model:UEe({model:C,middleware:I}),messages:i.messages,abortSignal:o.signal,system:i.system,temperature:(q=i.parameters)==null?void 0:q.temperature,maxTokens:(ue=i.parameters)==null?void 0:ue.max_tokens,topP:(ae=i.parameters)==null?void 0:ae.top_p,topK:(ee=i.parameters)==null?void 0:ee.top_k,presencePenalty:(X=i.parameters)==null?void 0:X.presence_penalty,frequencyPenalty:(ie=i.parameters)==null?void 0:ie.frequency_penalty,maxSteps:j,...k&&Object.keys(k).length>0&&{tools:k},toolChoice:i.toolChoice??(k&&Object.keys(k).length>0?"auto":"none")},L={onChunk:B=>this._handleChunk(s,B),onToolCall:B=>this._handleToolCall(s,B),onToolResult:B=>this._handleToolResult(s,B),onFinish:B=>this._handleFinish(s,B,r),onError:B=>this._handleError(s,B,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${s}`),hCe.executeInteraction(s,P,L).catch(B=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${s}:`,B),this._handleError(s,B instanceof Error?B:new Error("Failed to start AI execution"),r)}),s},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),Ge.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=qn.getState(),r=n.interactions.find(a=>a.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await JT(tx.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;qn.getState().appendInteractionResponseChunk(e,a),Tt.emit(Et.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),qn.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),qn.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",a){var C;const i=qn.getState(),s=i.interactions.find(k=>k.id===e);if(!s||s.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=i.activeStreamBuffers[e]??"",l=this._streamingToolData.get(e)||{calls:[],results:[]},c=(s==null?void 0:s.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}`);const d=performance.now(),h=this._interactionStartTimes.get(e),p=this._firstChunkTimestamps.get(e),g=h?Math.round(d-h):void 0,v=h&&p?Math.round(p-h):void 0,b=a==null?void 0:a.reasoning,x={status:t,endedAt:new Date,response:o||null,metadata:{...c,...(a==null?void 0:a.usage)&&{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens,totalTokens:a.usage.totalTokens},...(a==null?void 0:a.providerMetadata)&&{providerMetadata:a.providerMetadata},toolCalls:l.calls,toolResults:l.results,reasoning:b,timeToFirstToken:v,generationTime:g,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&x.response&&typeof x.response=="string"){const k=x.response.trim().replace(/^"|"$/g,"");k&&s&&(console.log(`[InteractionService] Updating conversation ${s.conversationId} title to: "${k}"`),mn.getState().updateConversation(s.conversationId,{title:k}).catch(j=>console.error("Failed to update conversation title:",j)))}i._updateInteractionInState(e,x),i._removeStreamingId(e);const w=qn.getState().interactions.find(k=>k.id===e);w?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((C=w.response)==null?void 0:C.length)??0}`),_t.saveInteraction({...w}).catch(k=>{console.error(`[InteractionService] Failed final persistence for ${e}`,k)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let S=[],E=[];try{S=l.calls.map(k=>JSON.parse(k)),E=l.results.map(k=>JSON.parse(k))}catch(k){console.error("[InteractionService] Failed to parse tool strings for event emitter:",k)}Tt.emit(Et.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:S,toolResults:E}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Yo=(e,t)=>{Tt.emit(Et.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},Oi=qs(Gs((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Yo("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Yo("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Yo("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Yo("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Yo("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Yo("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Yo("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Yo("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Yo("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Yo("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),Tt.emit(Et.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),Tt.emit(Et.PROMPT_PARAMS_CHANGED,{params:r}))}}))),Cc=qs(Gs((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([_t.loadRules(),_t.loadTags(),_t.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:a,isLoading:!1})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),Ge.error("Failed to load rules and tags.")}},addRule:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.rules.push(i),s.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{return await _t.saveRule(i),Ge.success(`Rule "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding rule",s),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),Ge.error("Failed to save new rule."),s}},updateRule:async(n,r)=>{const a=t().rules.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.rules.findIndex(l=>l.id===n);o!==-1&&(s.rules[o]=i,s.rules.sort((l,c)=>l.name.localeCompare(c.name)))});try{await _t.saveRule(i),Ge.success(`Rule "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating rule",s),e(o=>{const l=o.rules.findIndex(c=>c.id===n);l!==-1&&(o.rules[l]=a,o.rules.sort((c,d)=>c.name.localeCompare(d.name))),o.error="Failed to save rule update"}),Ge.error("Failed to save rule update."),s}},deleteRule:async n=>{const r=t().rules.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.ruleId===n);e(i=>({rules:i.rules.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.ruleId!==n)}));try{await _t.deleteRule(n),Ge.success(`Rule "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting rule",i),e(s=>{s.rules.push(r),s.rules.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete rule"}),Ge.error("Failed to delete rule."),i}},addTag:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.tags.push(i),s.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{return await _t.saveTag(i),Ge.success(`Tag "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding tag",s),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),Ge.error("Failed to save new tag."),s}},updateTag:async(n,r)=>{const a=t().tags.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.tags.findIndex(l=>l.id===n);o!==-1&&(s.tags[o]=i,s.tags.sort((l,c)=>l.name.localeCompare(c.name)))});try{await _t.saveTag(i),Ge.success(`Tag "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating tag",s),e(o=>{const l=o.tags.findIndex(c=>c.id===n);l!==-1&&(o.tags[l]=a,o.tags.sort((c,d)=>c.name.localeCompare(d.name))),o.error="Failed to save tag update"}),Ge.error("Failed to save tag update."),s}},deleteTag:async n=>{const r=t().tags.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.tagId===n);e(i=>({tags:i.tags.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.tagId!==n)}));try{await _t.deleteTag(n),Ge.success(`Tag "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting tag",i),e(s=>{s.tags.push(r),s.tags.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete tag"}),Ge.error("Failed to delete tag."),i}},linkTagToRule:async(n,r)=>{const a=`${n}-${r}`;if(t().tagRuleLinks.find(o=>o.id===a))return;const s={id:a,tagId:n,ruleId:r};e(o=>{o.tagRuleLinks.push(s)});try{await _t.saveTagRuleLink(s)}catch(o){throw console.error("RulesStore: Error linking tag to rule",o),e(l=>({error:"Failed to link tag and rule",tagRuleLinks:l.tagRuleLinks.filter(c=>c.id!==a)})),Ge.error("Failed to link tag and rule."),o}},unlinkTagFromRule:async(n,r)=>{const a=`${n}-${r}`,i=t().tagRuleLinks.find(s=>s.id===a);if(i){e(s=>({tagRuleLinks:s.tagRuleLinks.filter(o=>o.id!==a)}));try{await _t.deleteTagRuleLink(a)}catch(s){throw console.error("RulesStore: Error unlinking tag from rule",s),e(o=>{o.tagRuleLinks.push(i),o.error="Failed to unlink tag and rule"}),Ge.error("Failed to unlink tag and rule."),s}}},getRulesForTag:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.tagId===n).map(i=>i.ruleId));return r.rules.filter(i=>a.has(i.id))},getTagsForRule:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.ruleId===n).map(i=>i.tagId));return r.tags.filter(i=>a.has(i.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(a=>r.has(a.id))}}))),XP={async submitPrompt(e){var q,ue,ae,ee,X,ie;console.log("[ConversationService] submitPrompt called",e);const t=qn.getState(),n=di.getState(),r=Oi.getState(),a=mn.getState(),i=Cc.getState(),s=hr.getState(),o=t.currentConversationId;if(!o){Ge.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const l=a.getConversationById(o),c=(l==null?void 0:l.projectId)??null,h=t.interactions.filter(B=>B.conversationId===o).length===0&&s.autoTitleEnabled&&((q=e.metadata)==null?void 0:q.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,g=t.interactions.filter(B=>B.status==="COMPLETED"&&B.type==="message.user_assistant"),v=xD(g);let b=e.content;const x=[],w=((ue=e.metadata)==null?void 0:ue.activeTagIds)??[],S=((ae=e.metadata)==null?void 0:ae.activeRuleIds)??[],E=new Set(S);w.forEach(B=>{i.getRulesForTag(B).forEach(J=>E.add(J.id))});const C=i.getRulesByIds(Array.from(E))||[],k=C.filter(B=>B.type==="system").map(B=>B.content),j=C.filter(B=>B.type==="before").map(B=>B.content),I=C.filter(B=>B.type==="after").map(B=>B.content);j.length>0&&(b=`${j.join(`
`)}

${b}`),I.length>0&&(b=`${b}

    ${I.join(`
`)}`),b&&x.push({type:"text",text:b});const N=((ee=e.metadata)==null?void 0:ee.attachedFiles)??[];if(N.length>0){const B=await this._processFilesForPrompt(N,o);x.unshift(...B)}x.length>0?v.push({role:"user",content:x}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");const P=(X=e.metadata)==null?void 0:X.turnSystemPrompt,L=n.getEffectiveProjectSettings(c);let H=P??L.systemPrompt??void 0;k.length>0&&(H=`${H?`${H}

        `:""}${k.join(`
`)}`);const M={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(M).forEach(B=>{(M[B]===null||M[B]===void 0)&&delete M[B]});const Z={system:H,messages:v,parameters:M,metadata:{...(({turnSystemPrompt:B,activeTagIds:J,activeRuleIds:Q,autoTitleEnabledForTurn:ne,...he})=>he)(e.metadata??{}),modelId:r.modelId??void 0,attachedFiles:(ie=e.metadata.attachedFiles)==null?void 0:ie.map(({contentBase64:B,contentText:J,...Q})=>Q)}};try{const B=Kw.startInteraction(Z,o,e);h&&(console.log("[ConversationService] Triggering asynchronous title generation."),this.generateConversationTitle(o,e,C).catch(J=>{console.error("[ConversationService] Background title generation failed:",J)})),await B}catch(B){throw console.error("[ConversationService] Error starting interaction:",B),Ge.error(`Failed to start interaction: ${B instanceof Error?B.message:String(B)}`),B}},async generateConversationTitle(e,t,n){var o,l;const r=hr.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let a=t.content;if(a.length>r.autoTitlePromptMaxLength&&(a=a.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const c=t.metadata.attachedFiles.map(d=>d.name).join(", ");a+=`

[Attached files: ${c}]`}if(r.autoTitleIncludeRules&&n.length>0){const c=n.map(d=>d.name).join(", ");a+=`

[Active rules: ${c}]`}const i={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:a}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},s={id:ji(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:i.parameters,metadata:{...i.metadata,originalTurnId:t.id}};try{await Kw.startInteraction(i,e,s,"conversation.title_generation")}catch(c){console.error("[ConversationService] Error starting title generation interaction:",c)}},async regenerateInteraction(e){var Z,q,ue,ae;console.log("[ConversationService] regenerateInteraction called",e);const t=qn.getState(),n=di.getState(),r=Oi.getState(),a=mn.getState(),i=Cc.getState(),s=t.interactions.find(ee=>ee.id===e);if(!s||!s.prompt){Ge.error("Cannot regenerate: Original interaction data missing.");return}const o=s.prompt,l=s.conversationId,c=a.getConversationById(l),d=(c==null?void 0:c.projectId)??null,h=s.index,p=t.interactions.filter(ee=>ee.conversationId===l&&ee.index<h&&ee.status==="COMPLETED"&&ee.type==="message.user_assistant").sort((ee,X)=>ee.index-X.index),g=xD(p);let v=o.content;const b=[],x=((Z=o.metadata)==null?void 0:Z.activeTagIds)??[],w=((q=o.metadata)==null?void 0:q.activeRuleIds)??[],S=new Set(w);x.forEach(ee=>{i.getRulesForTag(ee).forEach(X=>S.add(X.id))});const E=i.getRulesByIds(Array.from(S))||[],C=E.filter(ee=>ee.type==="before").map(ee=>ee.content),k=E.filter(ee=>ee.type==="after").map(ee=>ee.content);C.length>0&&(v=`${C.join(`
`)}

${v}`),k.length>0&&(v=`${v}

    ${k.join(`
`)}`),v&&b.push({type:"text",text:v});const j=((ue=o.metadata)==null?void 0:ue.attachedFiles)??[];if(j.length>0){const ee=await this._processFilesForPrompt(j,l);b.unshift(...ee)}b.length>0?g.push({role:"user",content:b}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");const I=(ae=o.metadata)==null?void 0:ae.turnSystemPrompt,N=n.getEffectiveProjectSettings(d);let P=I??N.systemPrompt??void 0;const L=E.filter(ee=>ee.type==="system").map(ee=>ee.content);L.length>0&&(P=`${P?`${P}

        `:""}${L.join(`
`)}`);const H={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(H).forEach(ee=>{(H[ee]===null||H[ee]===void 0)&&delete H[ee]});const M={system:P,messages:g,parameters:H,metadata:{...(({turnSystemPrompt:ee,activeTagIds:X,activeRuleIds:ie,autoTitleEnabledForTurn:B,...J})=>J)(o.metadata??{}),modelId:r.modelId??void 0,regeneratedFromId:e,attachedFiles:j.map(({contentBase64:ee,contentText:X,...ie})=>ie)}};try{await Kw.startInteraction(M,l,o,"message.assistant_regen")}catch(ee){throw console.error("[ConversationService] Error starting regeneration interaction:",ee),Ge.error(`Failed to start regeneration: ${ee instanceof Error?ee.message:String(ee)}`),ee}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=mn.getState().getConversationById(t),s=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(s)}catch{Ge.error(`Filesystem unavailable for key ${s}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let s=null;try{if(i.source==="direct")s=wD(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const o=await Uf(i.path,{fsInstance:a});s=wD({...i,contentBytes:o})}else if(i.source==="vfs"&&!a)continue;s&&n.push(s)}catch(o){console.error(`[ConversationService] Error processing file ${i.name}:`,o),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await Co.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}},uy=qs(Gs((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),Ge.error(r)}},addDbMod:async n=>{const r=ji(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((s,o)=>s.loadOrder-o.loadOrder)});try{return await _t.saveMod(a),Ge.success(`Mod "${a.name}" added.`),r}catch(i){const s="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=s}),Ge.error(s),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(o=>{i=o.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...o.dbMods[i]},o.dbMods[i]={...o.dbMods[i],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,c)=>l.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const s=i!==-1?t().dbMods[i]:void 0;if(s)try{await _t.saveMod(s),Ge.success(`Mod "${s.name}" updated.`)}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(c=>{const d=c.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(c.dbMods[d]=a,c.dbMods.sort((h,p)=>h.loadOrder-p.loadOrder)),c.error=l}),Ge.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(s=>s.id!==n)}));try{await _t.deleteMod(n),Ge.success(`Mod "${a}" deleted.`)}catch(i){const s="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,c)=>l.loadOrder-c.loadOrder),o.error=s}),Ge.error(s),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function JP(e){const t=e.id,n=e.name,r=Ir.getState(),a=uy.getState();return{modId:t,modName:n,registerPromptControl:s=>r.registerPromptControl(s),registerChatControl:s=>{const o={...s,status:s.status??(()=>"ready")};return r.registerChatControl(o)},registerTool:(s,o,l)=>(console.log(`[${n}] Registering tool: ${s}`),r.registerTool(t,s,o,l)),on:(s,o)=>(Tt.on(s,o),()=>Tt.off(s,o)),addMiddleware:(s,o)=>r.registerMiddleware(s,t,o),registerSettingsTab:s=>(a._addSettingsTab(s),()=>a._removeSettingsTab(s.id)),getContextSnapshot:()=>{const s=qn.getState(),o=mn.getState(),l=hr.getState(),c=zn.getState(),{providerId:d}=Ac(c.selectedModelId),h=o.selectedItemType==="conversation"?o.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(s.currentConversationId===h?s.interactions.map(p=>Object.freeze({...p})):[]),isStreaming:s.status==="streaming",selectedProviderId:d,selectedModelId:c.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(s,o)=>{Ge[s](`[${n}] ${o}`)},log:(s,...o)=>{console[s](`[Mod: ${n}]`,...o)}}}async function pCe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,s=null;try{if(i=JP(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){s=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),Ge.error(`Error loading mod "${r.name}": ${s instanceof Error?s.message:s}`)}i||(i=JP(r));const o={id:r.id,name:r.name,api:i,error:s??void 0};return Tt.emit(o.error?Et.MOD_ERROR:Et.MOD_LOADED,{id:r.id,name:r.name,error:o.error}),o}));return Tt.emit(Et.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var mCe=(e,t,n,r,a,i,s,o)=>{let l=document.documentElement,c=["light","dark"];function d(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",x=b&&i?a.map(w=>i[w]||w):a;b?(l.classList.remove(...x),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(v,g)}),h(g)}function h(g){o&&c.includes(g)&&(l.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(t)||n,v=s&&g==="system"?p():g;d(v)}catch{}},gCe=T.createContext(void 0),yCe={setTheme:e=>{},themes:[]},bCe=()=>{var e;return(e=T.useContext(gCe))!=null?e:yCe};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:s,themes:o,nonce:l,scriptProps:c})=>{let d=JSON.stringify([n,t,i,e,o,s,r,a]).slice(1,-1);return T.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${mCe.toString()})(${d})`}})});const vCe=({...e})=>{const{theme:t="system"}=bCe();return m.jsx(_J,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function pd({className:e,...t}){return m.jsx("textarea",{"data-slot":"textarea",className:xt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const tH=T.memo(T.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...s},o)=>{const l=T.useRef(null),[c,d]=T.useState(e);T.useImperativeHandle(o,()=>({getValue:()=>c,focus:()=>{var g;return(g=l.current)==null?void 0:g.focus()},clearValue:()=>{d(""),i&&i(""),requestAnimationFrame(()=>{const g=l.current;g&&(g.style.height="auto",g.style.height=`${g.scrollHeight}px`,g.style.overflowY="hidden")})}}));const h=g=>{var v;if(g.key==="Enter"&&!g.shiftKey&&!n){g.preventDefault();const b=mc.getState().attachedFilesMetadata.length>0;(c.trim().length>0||b)&&(t(),(v=o==null?void 0:o.current)==null||v.clearValue())}},p=g=>{const v=g.target.value;d(v),i&&i(v),Tt.emit(Et.PROMPT_INPUT_CHANGE,{value:v})};return T.useEffect(()=>{const g=l.current;if(g){g.style.height="auto";const v=g.scrollHeight,b=250;g.style.height=`${Math.min(v,b)}px`,g.style.overflowY=v>b?"auto":"hidden"}},[c]),T.useEffect(()=>{e!==c&&(d(e),i&&i(e))},[e]),m.jsx(pd,{ref:l,value:c,onChange:p,onKeyDown:h,disabled:n,placeholder:r,rows:1,className:xt("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...s})}));tH.displayName="InputArea";const wCe=({controls:e=[]})=>{const[t,n]=T.useState(!0),[r,a]=T.useState(!1),i=T.useRef(null),s=mn(ne=>ne.selectedItemId),o=mn(ne=>ne.selectedItemType),l=mn(ne=>ne.loadSidebarItems),c=mn(ne=>ne.getConversationById),{getEffectiveProjectSettings:d}=di(dn(ne=>({projects:ne.projects,getProjectById:ne.getProjectById,getEffectiveProjectSettings:ne.getEffectiveProjectSettings}))),{interactions:h,status:p}=qn(dn(ne=>({interactions:ne.interactions,status:ne.status}))),{globalError:g,isSidebarCollapsed:v,isChatControlPanelOpen:b,isProjectSettingsModalOpen:x,isVfsModalOpen:w}=bs(dn(ne=>({globalError:ne.globalError,isSidebarCollapsed:ne.isSidebarCollapsed,isChatControlPanelOpen:ne.isChatControlPanelOpen,isProjectSettingsModalOpen:ne.isProjectSettingsModalOpen,isVfsModalOpen:ne.isVfsModalOpen}))),S=Ir(dn(ne=>Object.values(ne.chatControls))),{loadDbMods:E,setLoadedMods:C}=uy(dn(ne=>({loadDbMods:ne.loadDbMods,setLoadedMods:ne.setLoadedMods}))),{loadInitialData:k}=zn(dn(ne=>({loadInitialData:ne.loadInitialData}))),{loadSettings:j}=hr(dn(ne=>({loadSettings:ne.loadSettings}))),{setVfsKey:I}=Co(dn(ne=>({setVfsKey:ne.setVfsKey}))),{initializePromptState:N}=Oi(dn(ne=>({initializePromptState:ne.initializePromptState}))),{loadRulesAndTags:P}=Cc(dn(ne=>({loadRulesAndTags:ne.loadRulesAndTags}))),L=T.useCallback(()=>{a(ne=>!ne)},[]);T.useEffect(()=>{r&&a(!1)},[s,o]);const H=T.useCallback(()=>{requestAnimationFrame(()=>{var ne;(ne=i.current)==null||ne.focus()})},[]);T.useEffect(()=>{let ne=!0;return(async()=>{var de;console.log("LiteChat: Starting initialization..."),n(!0);try{if(console.log("LiteChat: Loading core data..."),await j(),!ne||(console.log("LiteChat: Settings loaded."),await k(),!ne)||(console.log("LiteChat: Provider data loaded."),await P(),!ne)||(console.log("LiteChat: Rules and Tags loaded."),await l(),!ne)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),e.forEach(Pe=>{try{Pe()}catch(Qe){console.error("LiteChat: Error running registration function:",Qe)}}),console.log("LiteChat: Core controls and tools registered."),!ne)||(console.log("LiteChat: Loading mods..."),await E(),!ne))return;console.log("LiteChat: DB Mods loaded.");const Ie=uy.getState().dbMods;console.log(`LiteChat: Processing ${Ie.length} mods...`);const Te=await pCe(Ie);if(!ne)return;C(Te),console.log(`LiteChat: ${Te.length} mods processed.`);const Ae=o==="project"?s:o==="conversation"?((de=c(s))==null?void 0:de.projectId)??null:null,Ee=d(Ae);N(Ee),console.log("LiteChat: Initial prompt state initialized.",Ee)}catch(Ie){console.error("LiteChat: Initialization failed:",Ie),Ge.error(`Initialization failed: ${Ie instanceof Error?Ie.message:String(Ie)}`),bs.getState().setGlobalError("Initialization failed.")}finally{ne&&(console.log("LiteChat: Initialization complete."),n(!1))}})(),()=>{ne=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[e]);const M=T.useRef({itemId:null,itemType:null});T.useEffect(()=>{var he;if(t)return;const ne={itemId:s,itemType:o};if(ne.itemId!==M.current.itemId||ne.itemType!==M.current.itemType){const de=o==="project"?s:o==="conversation"?((he=c(s))==null?void 0:he.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${s}, Type: ${o}). Calculating effective settings for Project ID: ${de}`);const Ie=d(de);N(Ie),console.log("[LiteChat Effect] Prompt state updated based on context change.",Ie),M.current=ne,ne.itemType==="conversation"&&H()}},[s,o,c,d,N,t,H]),T.useEffect(()=>{let ne=null;if(w||o==="project"){if(o==="project")ne=s;else if(o==="conversation"){const he=mn.getState().getConversationById(s);ne=(he==null?void 0:he.projectId)??"orphan"}else ne="orphan";console.log(`[LiteChat Effect] VFS Context Required. Setting target key: ${ne}`)}else ne=null,console.log("[LiteChat Effect] VFS Context Not Required. Setting target key: null");Co.getState().vfsKey!==ne&&I(ne)},[w,s,o,I]);const Z=T.useCallback(async ne=>{var Te;const he=mn.getState();let de=he.selectedItemType==="conversation"?he.selectedItemId:null;const Ie=he.selectedItemType==="project"?he.selectedItemId:he.selectedItemType==="conversation"?((Te=he.getConversationById(he.selectedItemId))==null?void 0:Te.projectId)??null:null;if(!de){console.log("LiteChat: No conversation selected, creating new one...");try{const Ae=await he.addConversation({title:"New Chat",projectId:Ie});await he.selectItem(Ae,"conversation"),de=mn.getState().selectedItemId,de!==Ae&&console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),console.log(`LiteChat: New conversation created (${de}), selected.`)}catch(Ae){console.error("LiteChat: Failed to create new conversation",Ae),Ge.error("Failed to start new chat.");return}}console.log("LiteChat: Submitting turn data to ConversationService...");try{const Ae=Oi.getState(),Ee={...ne,metadata:{...ne.metadata,modelId:Ae.modelId}};await XP.submitPrompt(Ee),console.log("LiteChat: ConversationService processing initiated."),H()}catch(Ae){console.error("LiteChat: Error submitting prompt:",Ae),H()}},[H]),q=T.useCallback(async ne=>{console.log(`LiteChat: Regenerating interaction ${ne}`);try{await XP.regenerateInteraction(ne),console.log(`LiteChat: ConversationService regeneration initiated for ${ne}.`),H()}catch(he){console.error("LiteChat: Error regenerating interaction:",he),H()}},[H]),ue=T.useCallback(ne=>{console.log(`LiteChat: Stopping interaction ${ne}`),Kw.abortInteraction(ne),H()},[H]),ae=T.useMemo(()=>S.filter(ne=>(ne.panel??"main")==="sidebar"&&(ne.show?ne.show():!0)).map(ne=>ne),[S]),ee=T.useMemo(()=>S.filter(ne=>ne.panel==="sidebar-footer"&&(ne.show?ne.show():!0)).map(ne=>ne),[S]),X=T.useMemo(()=>S.filter(ne=>ne.panel==="header"&&(ne.show?ne.show():!0)).map(ne=>ne),[S]),ie=T.useMemo(()=>{var ne;return(ne=S.find(he=>he.id==="core-settings-trigger"))==null?void 0:ne.settingsRenderer},[S]),B=T.useMemo(()=>{var ne;return(ne=S.find(he=>he.id==="core-project-settings-trigger"))==null?void 0:ne.settingsRenderer},[S]),J=T.useMemo(()=>{var ne;return(ne=S.find(he=>he.id==="core-vfs-modal-panel"))==null?void 0:ne.renderer},[S]),Q=o==="conversation"?s:null;return t?m.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx(Mn,{className:"h-12 w-12 animate-spin text-primary"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[m.jsxs("div",{className:xt("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",v?"w-16":"w-64"),children:[m.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[m.jsx("div",{className:xt(v?"hidden":"block"),children:m.jsx(Vh,{controls:ae,panelId:"sidebar",renderMode:"full",className:"h-full"})}),m.jsx("div",{className:xt(v?"block":"hidden"),children:m.jsx(Vh,{controls:ae,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),m.jsx("div",{className:xt("flex-shrink-0 border-t border-border p-2",v?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:m.jsx(Vh,{controls:ee,panelId:"sidebar-footer",renderMode:v?"icon":"full",className:xt("flex",v?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&m.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex",children:[m.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm animate-fadeIn",onClick:L}),m.jsxs("div",{className:"relative w-4/5 max-w-xs bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[m.jsx("h2",{className:"font-semibold",children:"LiteChat Menu"}),m.jsx("button",{onClick:L,className:"p-1 rounded-md hover:bg-muted","aria-label":"Close menu",children:m.jsx(Ii,{className:"h-5 w-5"})})]}),m.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:m.jsx(Vh,{controls:ae,panelId:"sidebar",renderMode:"full",className:"h-full"})}),m.jsx("div",{className:"flex-shrink-0 border-t border-border p-4",children:m.jsx(Vh,{controls:ee,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"})})]})]}),m.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[m.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-muted",onClick:L,"aria-label":"Open menu",children:m.jsx(PY,{className:"h-5 w-5"})}),m.jsx(Vh,{controls:X,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),m.jsx(A_e,{conversationId:Q,interactions:h,onRegenerateInteraction:q,onStopInteraction:ue,status:p,className:"flex-grow overflow-y-hidden"}),g&&m.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",g]}),m.jsx(ehe,{InputAreaRenderer:tH,onSubmit:Z,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:i})]})]}),b.settingsModal&&ie&&ie(),x&&B&&B(),w&&J&&J(),m.jsx(vCe,{richColors:!0,position:"bottom-right",closeButton:!0})]})},xCe="prism-theme-link",_Ce="prism-default-light-theme-link",SCe="prism-default-dark-theme-link",ECe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",CCe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css",lT=e=>{let t=document.getElementById(e);return t||(t=document.createElement("link"),t.id=e,t.rel="stylesheet",document.head.appendChild(t)),t},TCe=()=>{const{prismThemeUrl:e,theme:t}=hr(dn(a=>({prismThemeUrl:a.prismThemeUrl,theme:a.theme}))),n=T.useMemo(()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=T.useMemo(()=>{const a=t==="system"?n:t;return a==="dark"||a==="TijuDark"?"dark":"light"},[t,n]);return T.useEffect(()=>{if(typeof window>"u")return;const a=lT(_Ce),i=lT(SCe),s=lT(xCe);return a.disabled=!0,i.disabled=!0,s.disabled=!0,a.href=ECe,i.href=CCe,e?(s.href=e,s.disabled=!1):(console.log(r),r==="dark"?i.disabled=!1:a.disabled=!1),()=>{}},[e,r]),null},cT=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),uT=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],kCe=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=hr(dn(a=>({theme:a.theme,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,customThemeColors:a.customThemeColors})));return T.useEffect(()=>{const a=document.body,i=document.documentElement;a.classList.remove("light","dark","TijuLight","TijuDark","custom"),uT.forEach(s=>{i.style.removeProperty(`--${cT(s)}`)}),i.style.removeProperty("--custom-font-family"),i.style.removeProperty("--custom-font-size"),e==="light"?a.classList.add("light"):e==="dark"?a.classList.add("dark"):e==="TijuLight"?a.classList.add("TijuLight"):e==="TijuDark"?a.classList.add("TijuDark"):e==="custom"?(a.classList.add("custom"),t?i.style.setProperty("--custom-font-family",t):i.style.removeProperty("--custom-font-family"),n?i.style.setProperty("--custom-font-size",`${n}px`):i.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([s,o])=>{if(o&&uT.includes(s)){const l=`--${cT(s)}`;i.style.setProperty(l,o)}else if(uT.includes(s)){const l=`--${cT(s)}`;i.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?a.classList.add("dark"):a.classList.add("light")},[e,t,n,r]),null},QP="0.1.0-dev",ACe="https://github.com/DimitriGilbert/LiteChat",e8=({textToCopy:e,label:t,className:n})=>{const[r,a]=T.useState(!1),i=async()=>{try{await navigator.clipboard.writeText(e),a(!0),Ge.success(`${t} copied to clipboard!`),setTimeout(()=>a(!1),2e3)}catch(s){Ge.error(`Failed to copy ${t.toLowerCase()}.`),console.error(`Clipboard copy failed for ${t}:`,s)}};return m.jsxs(It,{variant:"outline",onClick:i,className:n,children:[r?m.jsx(Ri,{className:"mr-2 h-4 w-4 text-green-500"}):m.jsx(ZZ,{className:"mr-2 h-4 w-4"}),r?"Copied!":`Copy ${t}`]})};class NCe extends T.Component{constructor(){super(...arguments);Ea(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueUrl(){var a;const n=`${ACe}/issues`,r=encodeURIComponent(`Crash Report: ${((a=this.state.error)==null?void 0:a.message.substring(0,50))??"Unknown Error"}`);return`${n}/new?title=${r}`}generateErrorReport(n=!1){const{error:r,errorInfo:a}=this.state,i=`
`,s=n?"```":"";let o=`## LiteChat Error Report${i}${i}`;return o+=`**Version:** ${QP}${i}`,o+=`**Timestamp:** ${new Date().toISOString()}${i}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${i}${i}`,r?o+=`**Error Message:**${i}${s}${i}${r.message}${i}${s}${i}${i}`:o+=`**Error Message:** Unknown Error${i}${i}`,a!=null&&a.componentStack&&(o+=`**Component Stack:**${i}${s}text${i}${a.componentStack.trim()}${i}${s}${i}${i}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${i}${s}text${i}${r.stack.trim()}${i}${s}${i}${i}`),o+=`**Steps to Reproduce (Please Describe):**${i}1. ...${i}2. ...${i}${i}`,o+=`**Expected Behavior:**${i}...${i}${i}`,o+=`**Actual Behavior:**${i}...${i}`,o}generateAIPrompt(){var i,s;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${QP}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((i=r==null?void 0:r.componentStack)==null?void 0:i.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((s=n==null?void 0:n.stack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:m.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[m.jsx(v1,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),m.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue. Copy the details and paste them into the GitHub issue."}),m.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),m.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[m.jsx(It,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),m.jsx(e8,{textToCopy:this.generateErrorReport(),label:"Details"}),m.jsx(e8,{textToCopy:this.generateAIPrompt(),label:"AI Debug Prompt"}),m.jsx(It,{variant:"outline",asChild:!0,children:m.jsxs("a",{href:this.getGitHubIssueUrl(),target:"_blank",rel:"noopener noreferrer",children:[m.jsx(Z8,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})})]})]})}):this.props.children}}const nH=(e,t)=>{if(!t)return null;let n=Du,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Mn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=df,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=v1,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=yA,r="text-green-500",a=`Synced with ${t}`;break;default:n=Du,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(n,{className:xt("h-3 w-3 ml-1 flex-shrink-0",r)})}),m.jsx(Yn,{side:"right",children:a})]})})},c1=T.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:c,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:j,editInputRef:I})=>{const N=e.id===n,P=e.itemType==="project",L=e.id===v&&e.itemType===b,H=P&&d.has(e.id),{projects:M,conversations:Z}=P?p(e.id,g):{projects:[],conversations:[]},q=M.length>0||Z.length>0,ue=!P&&e.syncRepoId?r[e.id]:void 0,ae=!P&&e.syncRepoId?a.get(e.syncRepoId):void 0,ee=!P&&ae?nH(ue,ae):null,X=bs(Te=>Te.openProjectSettingsModal),ie=()=>{L||(P&&q&&h(e.id),i(e.id,e.itemType))},B=Te=>{Te.stopPropagation(),P?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,Te):s(e.id,Te)},J=Te=>{Te.stopPropagation(),E(e)},Q=Te=>{Te.stopPropagation(),P&&X(e.id)},ne=Te=>{Te.key==="Enter"?(Te.preventDefault(),C()):Te.key==="Escape"&&k()},he=P?e.name:e.title,de=j?Mn:Ri,Ie=j?"h-3 w-3 animate-spin":"h-3 w-3";return m.jsxs(m.Fragment,{children:[m.jsxs("li",{className:xt("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!L&&"hover:bg-muted/50 hover:text-primary/80",N&&!L?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",L&&"bg-muted ring-1 ring-primary",!L&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ie,title:L?"":he,children:[m.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[P&&q&&m.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:Te=>{Te.stopPropagation(),h(e.id)},children:H?m.jsx(kc,{className:"h-3 w-3 text-muted-foreground"}):m.jsx(W8,{className:"h-3 w-3 text-muted-foreground"})}),P&&!q&&m.jsx("span",{className:"w-3 flex-shrink-0"}),P?m.jsx(ff,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):m.jsx(CT,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),L?m.jsx(Tn,{ref:I,value:w,onChange:Te=>S(Te.target.value),onKeyDown:ne,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:Te=>Te.stopPropagation(),disabled:j}):m.jsx("span",{className:"truncate flex-shrink min-w-0",children:he}),ee]}),m.jsx("div",{className:xt("flex items-center flex-shrink-0 ml-1","opacity-0 group-hover:opacity-100 transition-opacity duration-150",L?"opacity-100":""),onClick:Te=>Te.stopPropagation(),children:L?m.jsxs(m.Fragment,{children:[m.jsx(On,{tooltipText:"Save (Enter)",onClick:Te=>{Te.stopPropagation(),C()},disabled:j||!w.trim(),"aria-label":"Save changes",icon:m.jsx(de,{}),iconClassName:Ie,className:"h-5 w-5 text-green-500 hover:text-green-600"}),m.jsx(On,{tooltipText:"Cancel (Esc)",onClick:Te=>{Te.stopPropagation(),k()},disabled:j,"aria-label":"Cancel edit",icon:m.jsx(Ii,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):m.jsxs(m.Fragment,{children:[P&&m.jsx(On,{tooltipText:"Project Settings",onClick:Q,"aria-label":`Settings for ${he}`,icon:m.jsx(qZ,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),m.jsx(On,{tooltipText:"Edit",onClick:J,"aria-label":`Edit ${he}`,icon:m.jsx(vy,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),P?m.jsx(On,{tooltipText:"Export Project (JSON)",onClick:Te=>c(e.id,Te),"aria-label":`Export project ${he}`,icon:m.jsx(sY,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):m.jsxs("div",{className:"relative group/export",children:[m.jsx(On,{tooltipText:"Export Conversation","aria-label":`Export ${he}`,icon:m.jsx(of,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),m.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:Te=>Te.stopPropagation(),children:[m.jsx(It,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Te=>l(e.id,"json",Te),children:"JSON"}),m.jsx(It,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Te=>l(e.id,"md",Te),children:"MD"})]})]}),m.jsx(On,{tooltipText:"Delete",onClick:B,"aria-label":`Delete ${he}`,icon:m.jsx(Zi,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),P&&H&&m.jsxs(m.Fragment,{children:[M.sort((Te,Ae)=>Ae.updatedAt.getTime()-Te.updatedAt.getTime()).map(Te=>m.jsx(c1,{item:{...Te,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:c,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:j,editInputRef:I},Te.id)),Z.sort((Te,Ae)=>Ae.updatedAt.getTime()-Te.updatedAt.getTime()).map(Te=>m.jsx(c1,{item:{...Te,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:c,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:j,editInputRef:I},Te.id))]})]})});c1.displayName="ConversationItemRenderer";function RCe({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(""),[c,d]=T.useState(""),[h,p]=T.useState(!1),g=T.useRef(null),v=T.useCallback(w=>{a(w.id),s(w.itemType);const S=w.itemType==="project"?w.name:w.title;l(S),d(S),p(!1)},[]),b=T.useCallback(w=>{const S=r,E=w??(i==="project"&&o==="New Project");a(null),s(null),l(""),d(""),p(!1),E&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(C=>{console.error("Failed to delete new project on cancel:",C),Ge.error("Failed to clean up cancelled new project.")}))},[r,i,o,n]),x=T.useCallback(async()=>{var E;if(!r||!i||h)return;const w=c.trim(),S=i==="project"&&o==="New Project";if(!w){Ge.error("Name cannot be empty."),(E=g.current)==null||E.focus();return}if(w===o&&!S){b();return}p(!0);try{i==="project"?await e(r,{name:w}):await t(r,{title:w}),Ge.success("Item renamed successfully."),a(null),s(null),l(""),d("")}catch(C){console.error("Failed to save item name:",C),Ge.error(`Failed to rename item: ${C instanceof Error?C.message:String(C)}`)}finally{p(!1)}},[r,i,c,o,h,e,t,b]);return T.useEffect(()=>{r&&g.current&&(g.current.focus(),g.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:o,localEditingName:c,setLocalEditingName:d,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:x,handleCancelEdit:b}}const tA=(e,t,n,r,a,i,s,o,l)=>{if(!n)return!0;const c=`${t}-${e}`;if(l[c]!==void 0)return l[c];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const p=o.get(e)||[],g=s.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of p)if(tA(v.id,"project",n,r,a,i,s,o,l)){d=!0;break}}}}return l[c]=d,d},ICe=()=>{const e=mn(z=>z.selectedItemId),t=mn(z=>z.selectedItemType),n=mn(z=>z.isLoading),r=di(z=>z.isLoading),{conversations:a,syncRepos:i,conversationSyncStatus:s}=mn(dn(z=>({conversations:z.conversations,syncRepos:z.syncRepos,conversationSyncStatus:z.conversationSyncStatus}))),o=di(z=>z.projects),l=mn(z=>z.selectItem),c=mn(z=>z.addConversation),d=mn(z=>z.updateConversation),h=mn(z=>z.deleteConversation),p=mn(z=>z.exportConversation),g=mn(z=>z.exportProject),v=mn(z=>z.getConversationById),b=di(z=>z.addProject),x=di(z=>z.updateProject),w=di(z=>z.deleteProject),S=di(z=>z.getProjectById),[E,C]=gt.useState(new Set),[k,j]=T.useState(""),I=n||r,N=RCe({updateProject:x,updateConversation:d,deleteProject:w,getProjectById:S,getConversationById:v}),{editingItemId:P,editingItemType:L,originalName:H,localEditingName:M,setLocalEditingName:Z,isSavingEdit:q,editInputRef:ue,handleStartEditing:ae,handleSaveEdit:ee,handleCancelEdit:X}=N,ie=T.useCallback(z=>{C(Se=>{const Ne=new Set(Se);return Ne.has(z)?Ne.delete(z):Ne.add(z),Ne})},[]),B=T.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const z=v(e);return(z==null?void 0:z.projectId)??null}return null},[e,t,v]),J=T.useCallback(async()=>{if(!P)try{const z=B(),Se=await c({title:"New Chat",projectId:z});l(Se,"conversation")}catch(z){console.error("Failed to create new chat:",z),Ge.error("Failed to create new chat.")}},[P,B,c,l]),Q=T.useCallback(async()=>{if(!P)try{const z=B(),Se=await b({name:"New Project",parentId:z});l(Se,"project"),z&&C(Ne=>new Set(Ne).add(z)),setTimeout(()=>{const Ne=S(Se);Ne?ae({...Ne,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch(z){console.error("Failed to create new project:",z)}},[P,B,b,l,S,ae]),ne=T.useCallback((z,Se)=>{z!==P&&(P&&z!==P&&(M.trim()&&M.trim()!==H?ee():X()),(z!==e||Se!==t)&&l(z,Se))},[P,M,H,e,t,ee,X,l]),he=T.useCallback((z,Se)=>{Se.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&h(z).catch(Ne=>{console.error("Failed to delete conversation:",Ne),Ge.error("Failed to delete conversation.")})},[h]),de=T.useCallback((z,Se)=>{Se.stopPropagation(),w(z).catch(Ne=>{console.error("Failed to delete project:",Ne),Ge.error("Failed to delete project.")})},[w]),Ie=T.useCallback(async(z,Se,Ne)=>{Ne.stopPropagation();try{await p(z,Se)}catch(fe){console.error(`Failed to export conversation as ${Se}:`,fe)}},[p]),Te=T.useCallback(async(z,Se)=>{Se.stopPropagation();try{await g(z)}catch(Ne){console.error("Failed to export project:",Ne)}},[g]),Ae=T.useMemo(()=>new Map((i||[]).map(z=>[z.id,z.name])),[i]),{projectsById:Ee,conversationsByProjectId:Pe,projectsByParentId:Qe}=T.useMemo(()=>{const z=new Map(o.map(fe=>[fe.id,fe])),Se=new Map;a.forEach(fe=>{const se=fe.projectId??null;Se.has(se)||Se.set(se,[]),Se.get(se).push(fe)});const Ne=new Map;return o.forEach(fe=>{const se=fe.parentId??null;Ne.has(se)||Ne.set(se,[]),Ne.get(se).push(fe)}),{projectsById:z,conversationsByProjectId:Se,projectsByParentId:Ne}},[o,a]),Le=T.useCallback((z,Se)=>{const Ne=Se.toLowerCase(),fe={},se=(Qe.get(z)||[]).filter(xe=>tA(xe.id,"project",Ne,o,a,Ee,Pe,Qe,fe)),te=(Pe.get(z)||[]).filter(xe=>xe.title.toLowerCase().includes(Ne));return se.sort((xe,Fe)=>Fe.updatedAt.getTime()-xe.updatedAt.getTime()),te.sort((xe,Fe)=>Fe.updatedAt.getTime()-xe.updatedAt.getTime()),{projects:se,conversations:te}},[o,a,Ee,Pe,Qe]),je=T.useMemo(()=>{const z=k.toLowerCase(),Se={},Ne=(Qe.get(null)||[]).filter(te=>tA(te.id,"project",z,o,a,Ee,Pe,Qe,Se)),fe=(Pe.get(null)||[]).filter(te=>te.title.toLowerCase().includes(z)),se=[...Ne.map(te=>({...te,itemType:"project"})),...fe.map(te=>({...te,itemType:"conversation"}))];return se.sort((te,xe)=>xe.updatedAt.getTime()-te.updatedAt.getTime()),se},[o,a,k,Ee,Pe,Qe]);return m.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[m.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{size:"sm",variant:"ghost",onClick:Q,"aria-label":"New Project",disabled:I||!!P,className:"h-7 w-7 p-0",children:m.jsx(vA,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"bottom",children:"New Project"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{size:"sm",variant:"ghost",onClick:J,"aria-label":"New Chat",disabled:I||!!P,className:"h-7 w-7 p-0",children:m.jsx(Tf,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"bottom",children:"New Chat"})]})})]})]}),m.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[m.jsx(yo,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),m.jsx(Tn,{type:"search",placeholder:"Filter...",value:k,onChange:z=>j(z.target.value),className:"h-8 text-xs pl-8",disabled:I})]}),m.jsx("div",{className:"flex-grow",children:I?m.jsxs("div",{className:"space-y-1 p-1",children:[m.jsx(lr,{className:"h-8 w-full"}),m.jsx(lr,{className:"h-8 w-full"}),m.jsx(lr,{className:"h-8 w-full"})]}):je.length===0?m.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):m.jsx("ul",{className:"space-y-0.5 p-1",children:je.map(z=>m.jsx(c1,{item:z,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:Ae,onSelectItem:ne,onDeleteConversation:he,onDeleteProject:de,onExportConversation:Ie,onExportProject:Te,expandedProjects:E,toggleProjectExpansion:ie,getChildren:Le,filterText:k,editingItemId:P,editingItemType:L,originalName:H,localEditingName:M,setLocalEditingName:Z,handleStartEditing:ae,handleSaveEdit:ee,handleCancelEdit:X,isSavingEdit:q,editInputRef:ue},z.id))})})]})},jCe=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=mn(dn(l=>({addConversation:l.addConversation,selectItem:l.selectItem,selectedItemId:l.selectedItemId,selectedItemType:l.selectedItemType,getConversationById:l.getConversationById}))),{addProject:a}=di(dn(l=>({addProject:l.addProject,getProjectById:l.getProjectById}))),i=()=>{if(r==="project")return n;if(r==="conversation"&&n){const l=mn.getState().getConversationById(n);return(l==null?void 0:l.projectId)??null}return null},s=async()=>{try{const l=i(),c=await e({title:"New Chat",projectId:l});t(c,"conversation")}catch(l){console.error("Failed to create new chat:",l)}},o=async()=>{try{const l=i(),c=await a({name:"New Project",parentId:l});t(c,"project")}catch(l){console.error("Failed to create new project:",l)}};return m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8","aria-label":"New Project",children:m.jsx(vA,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"right",children:"New Project"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:m.jsx(Tf,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"right",children:"New Chat"})]})})]})};function DCe(){const e=Ir.getState().registerChatControl,t=mn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>gt.createElement(ICe),iconRenderer:()=>gt.createElement(jCe),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var P_="Dialog",[rH,wje]=vi(P_),[MCe,Io]=rH(P_),aH=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=T.useRef(null),l=T.useRef(null),[c,d]=_o({prop:r,defaultProp:a??!1,onChange:i,caller:P_});return m.jsx(MCe,{scope:t,triggerRef:o,contentRef:l,contentId:Va(),titleId:Va(),descriptionId:Va(),open:c,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:s,children:n})};aH.displayName=P_;var iH="DialogTrigger",OCe=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Io(iH,n),i=An(t,a.triggerRef);return m.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":eI(a.open),...r,ref:i,onClick:qt(e.onClick,a.onOpenToggle)})});OCe.displayName=iH;var JR="DialogPortal",[PCe,sH]=rH(JR,{forceMount:void 0}),oH=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Io(JR,t);return m.jsx(PCe,{scope:t,forceMount:n,children:T.Children.map(r,s=>m.jsx(Wa,{present:n||i.open,children:m.jsx(qp,{asChild:!0,container:a,children:s})}))})};oH.displayName=JR;var u1="DialogOverlay",lH=T.forwardRef((e,t)=>{const n=sH(u1,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Io(u1,e.__scopeDialog);return i.modal?m.jsx(Wa,{present:r||i.open,children:m.jsx(LCe,{...a,ref:t})}):null});lH.displayName=u1;var FCe=ju("DialogOverlay.RemoveScroll"),LCe=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Io(u1,n);return m.jsx(cb,{as:FCe,allowPinchZoom:!0,shards:[a.contentRef],children:m.jsx(an.div,{"data-state":eI(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Sf="DialogContent",cH=T.forwardRef((e,t)=>{const n=sH(Sf,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Io(Sf,e.__scopeDialog);return m.jsx(Wa,{present:r||i.open,children:i.modal?m.jsx($Ce,{...a,ref:t}):m.jsx(BCe,{...a,ref:t})})});cH.displayName=Sf;var $Ce=T.forwardRef((e,t)=>{const n=Io(Sf,e.__scopeDialog),r=T.useRef(null),a=An(t,n.contentRef,r);return T.useEffect(()=>{const i=r.current;if(i)return T_(i)},[]),m.jsx(uH,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&i.preventDefault()}),onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault())})}),BCe=T.forwardRef((e,t)=>{const n=Io(Sf,e.__scopeDialog),r=T.useRef(!1),a=T.useRef(!1);return m.jsx(uH,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),uH=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=Io(Sf,n),l=T.useRef(null),c=An(t,l);return E_(),m.jsxs(m.Fragment,{children:[m.jsx(lb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:m.jsx(Up,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":eI(o.open),...s,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(zCe,{titleId:o.titleId}),m.jsx(VCe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),QR="DialogTitle",dH=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Io(QR,n);return m.jsx(an.h2,{id:a.titleId,...r,ref:t})});dH.displayName=QR;var fH="DialogDescription",hH=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Io(fH,n);return m.jsx(an.p,{id:a.descriptionId,...r,ref:t})});hH.displayName=fH;var pH="DialogClose",mH=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Io(pH,n);return m.jsx(an.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});mH.displayName=pH;function eI(e){return e?"open":"closed"}var gH="DialogTitleWarning",[xje,yH]=qre(gH,{contentName:Sf,titleName:QR,docsSlug:"dialog"}),zCe=({titleId:e})=>{const t=yH(gH),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},UCe="DialogDescriptionWarning",VCe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yH(UCe).contentName}}.`;return T.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},bH=aH,vH=oH,wH=lH,xH=cH,HCe=dH,qCe=hH,_H=mH;function F_({...e}){return m.jsx(bH,{"data-slot":"dialog",...e})}function GCe({...e}){return m.jsx(vH,{"data-slot":"dialog-portal",...e})}function WCe({...e}){return m.jsx(_H,{"data-slot":"dialog-close",...e})}function KCe({className:e,...t}){return m.jsx(wH,{"data-slot":"dialog-overlay",className:xt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function L_({className:e,children:t,...n}){return m.jsxs(GCe,{"data-slot":"dialog-portal",children:[m.jsx(KCe,{}),m.jsxs(xH,{"data-slot":"dialog-content",className:xt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,m.jsxs(_H,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[m.jsx(Ii,{}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function $_({className:e,...t}){return m.jsx("div",{"data-slot":"dialog-header",className:xt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function B_({className:e,...t}){return m.jsx("div",{"data-slot":"dialog-footer",className:xt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function z_({className:e,...t}){return m.jsx(HCe,{"data-slot":"dialog-title",className:xt("text-lg leading-none font-semibold",e),...t})}function U_({className:e,...t}){return m.jsx(qCe,{"data-slot":"dialog-description",className:xt("text-muted-foreground text-sm",e),...t})}var SH=["PageUp","PageDown"],EH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],CH={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},dm="Slider",[nA,ZCe,YCe]=S_(dm),[TH,_je]=vi(dm,[YCe]),[XCe,V_]=TH(dm),kH=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:v,...b}=e,x=T.useRef(new Set),w=T.useRef(0),E=s==="horizontal"?JCe:QCe,[C=[],k]=_o({prop:d,defaultProp:c,onChange:H=>{var Z;(Z=[...x.current][w.current])==null||Z.focus(),h(H)}}),j=T.useRef(C);function I(H){const M=aTe(C,H);L(H,M)}function N(H){L(H,w.current)}function P(){const H=j.current[w.current];C[w.current]!==H&&p(C)}function L(H,M,{commit:Z}={commit:!1}){const q=lTe(i),ue=cTe(Math.round((H-r)/i)*i+r,q),ae=G0(ue,[r,a]);k((ee=[])=>{const X=nTe(ee,ae,M);if(oTe(X,l*i)){w.current=X.indexOf(ae);const ie=String(X)!==String(ee);return ie&&Z&&p(X),ie?X:ee}else return ee})}return m.jsx(XCe,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:a,valueIndexToChangeRef:w,thumbs:x.current,values:C,orientation:s,form:v,children:m.jsx(nA.Provider,{scope:e.__scopeSlider,children:m.jsx(nA.Slot,{scope:e.__scopeSlider,children:m.jsx(E,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:qt(b.onPointerDown,()=>{o||(j.current=C)}),min:r,max:a,inverted:g,onSlideStart:o?void 0:I,onSlideMove:o?void 0:N,onSlideEnd:o?void 0:P,onHomeKeyDown:()=>!o&&L(r,0,{commit:!0}),onEndKeyDown:()=>!o&&L(a,C.length-1,{commit:!0}),onStepKeyDown:({event:H,direction:M})=>{if(!o){const ue=SH.includes(H.key)||H.shiftKey&&EH.includes(H.key)?10:1,ae=w.current,ee=C[ae],X=i*ue*M;L(ee+X,ae,{commit:!0})}}})})})})});kH.displayName=dm;var[AH,NH]=TH(dm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),JCe=T.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,[h,p]=T.useState(null),g=An(t,E=>p(E)),v=T.useRef(void 0),b=sm(a),x=b==="ltr",w=x&&!i||!x&&i;function S(E){const C=v.current||h.getBoundingClientRect(),k=[0,C.width],I=tI(k,w?[n,r]:[r,n]);return v.current=C,I(E-C.left)}return m.jsx(AH,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:m.jsx(RH,{dir:b,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);s==null||s(C)},onSlideMove:E=>{const C=S(E.clientX);o==null||o(C)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const k=CH[w?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:k?-1:1})}})})}),QCe=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...c}=e,d=T.useRef(null),h=An(t,d),p=T.useRef(void 0),g=!a;function v(b){const x=p.current||d.current.getBoundingClientRect(),w=[0,x.height],E=tI(w,g?[r,n]:[n,r]);return p.current=x,E(b-x.top)}return m.jsx(AH,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:m.jsx(RH,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const x=v(b.clientY);i==null||i(x)},onSlideMove:b=>{const x=v(b.clientY);s==null||s(x)},onSlideEnd:()=>{p.current=void 0,o==null||o()},onStepKeyDown:b=>{const w=CH[g?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:w?-1:1})}})})}),RH=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...c}=e,d=V_(dm,n);return m.jsx(an.span,{...c,ref:t,onKeyDown:qt(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):SH.concat(EH).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:qt(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(p)?p.focus():r(h)}),onPointerMove:qt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:qt(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),IH="SliderTrack",jH=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=V_(IH,n);return m.jsx(an.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});jH.displayName=IH;var rA="SliderRange",DH=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=V_(rA,n),i=NH(rA,n),s=T.useRef(null),o=An(t,s),l=a.values.length,c=a.values.map(p=>PH(p,a.min,a.max)),d=l>1?Math.min(...c):0,h=100-Math.max(...c);return m.jsx(an.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});DH.displayName=rA;var aA="SliderThumb",MH=T.forwardRef((e,t)=>{const n=ZCe(e.__scopeSlider),[r,a]=T.useState(null),i=An(t,o=>a(o)),s=T.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return m.jsx(eTe,{...e,ref:i,index:s})}),eTe=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,s=V_(aA,n),o=NH(aA,n),[l,c]=T.useState(null),d=An(t,S=>c(S)),h=l?s.form||!!l.closest("form"):!0,p=O1(l),g=s.values[r],v=g===void 0?0:PH(g,s.min,s.max),b=rTe(r,s.values.length),x=p==null?void 0:p[o.size],w=x?iTe(x,v,o.direction):0;return T.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),m.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${w}px)`},children:[m.jsx(nA.ItemSlot,{scope:e.__scopeSlider,children:m.jsx(an.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":s.min,"aria-valuenow":g,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:e.style,onFocus:qt(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&m.jsx(OH,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:g},r)]})});MH.displayName=aA;var tTe="RadioBubbleInput",OH=T.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=T.useRef(null),i=An(a,r),s=C_(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),m.jsx(an.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});OH.displayName=tTe;function nTe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function PH(e,t,n){const i=100/(n-t)*(e-t);return G0(i,[0,100])}function rTe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function aTe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function iTe(e,t,n){const r=e/2,i=tI([0,50],[0,r]);return(r-i(t)*n)*n}function sTe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function oTe(e,t){if(t>0){const n=sTe(e);return Math.min(...n)>=t}return!0}function tI(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function lTe(e){return(String(e).split(".")[1]||"").length}function cTe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var uTe=kH,dTe=jH,fTe=DH,hTe=MH;function cl({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const s=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return m.jsxs(uTe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:xt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[m.jsx(dTe,{"data-slot":"slider-track",className:xt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:m.jsx(fTe,{"data-slot":"slider-range",className:xt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>m.jsx(hTe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var pTe="Separator",t8="horizontal",mTe=["horizontal","vertical"],FH=T.forwardRef((e,t)=>{const{decorative:n,orientation:r=t8,...a}=e,i=gTe(r)?r:t8,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return m.jsx(an.div,{"data-orientation":i,...o,...a,ref:t})});FH.displayName=pTe;function gTe(e){return mTe.includes(e)}var yTe=FH;function fo({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return m.jsx(yTe,{"data-slot":"separator-root",decorative:n,orientation:t,className:xt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const bTe=()=>{const{enableStreamingMarkdown:e,setEnableStreamingMarkdown:t,enableStreamingCodeBlockParsing:n,setEnableStreamingCodeBlockParsing:r,foldStreamingCodeBlocks:a,setFoldStreamingCodeBlocks:i,foldUserMessagesOnCompletion:s,setFoldUserMessagesOnCompletion:o,streamingRenderFPS:l,setStreamingRenderFPS:c,resetGeneralSettings:d}=hr(dn(w=>({theme:w.theme,setTheme:w.setTheme,enableStreamingMarkdown:w.enableStreamingMarkdown,setEnableStreamingMarkdown:w.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:w.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:w.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:w.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:w.setFoldStreamingCodeBlocks,foldUserMessagesOnCompletion:w.foldUserMessagesOnCompletion,setFoldUserMessagesOnCompletion:w.setFoldUserMessagesOnCompletion,streamingRenderFPS:w.streamingRenderFPS,setStreamingRenderFPS:w.setStreamingRenderFPS,prismThemeUrl:w.prismThemeUrl,setPrismThemeUrl:w.setPrismThemeUrl,resetGeneralSettings:w.resetGeneralSettings}))),[h,p]=T.useState(l),g=T.useCallback(w=>{p(w[0])},[]),v=T.useCallback(w=>{c(w[0])},[c]),b=T.useCallback(w=>{const S=w.target.value,E=S===""?15:parseInt(S.replace(/[^0-9]/g,""),10);if(!isNaN(E)){const C=Math.max(3,Math.min(60,E));c(C),p(C)}},[c]);T.useEffect(()=>{p(l)},[l]);const x=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&d()};return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),m.jsx(Ki,{id:"streaming-markdown-switch",checked:e??!0,onCheckedChange:t})]}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),m.jsx(Ki,{id:"streaming-codeblock-switch",checked:n??!1,onCheckedChange:r})]}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),m.jsx(Ki,{id:"fold-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"fold-user-message-switch",className:"font-medium",children:"Fold User Messages After Response"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse the user's prompt message once the assistant finishes responding."})]}),m.jsx(Ki,{id:"fold-user-message-switch",checked:s??!1,onCheckedChange:o})]}),m.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[m.jsxs("div",{children:[m.jsxs(Gt,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",h," FPS)"]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx(cl,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[h],onValueChange:g,onValueCommit:v,className:"flex-grow"}),m.jsx(Tn,{type:"number",min:3,max:60,step:1,value:h,onChange:b,className:"w-20 h-8 text-xs"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),m.jsx(fo,{}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsxs(It,{variant:"outline",size:"sm",onClick:x,children:[m.jsx(SA,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},vTe=gt.memo(bTe),LH=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:c,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:p=.7,defaultTopP:g=null,defaultMaxTokens:v=null,defaultTopK:b=null,defaultPresencePenalty:x=0,defaultFrequencyPenalty:w=0,className:S})=>{const{selectedModelId:E,dbProviderConfigs:C,dbApiKeys:k}=zn(dn(B=>({selectedModelId:B.selectedModelId,dbProviderConfigs:B.dbProviderConfigs,dbApiKeys:B.dbApiKeys}))),j=T.useMemo(()=>{if(!E)return;const{providerId:B,modelId:J}=Ac(E);if(!B||!J)return;const Q=C.find(he=>he.id===B);if(!Q)return;const ne=k.find(he=>he.id===Q.apiKeyId);return $A(Q,J,ne==null?void 0:ne.value)},[E,C,k]),I=T.useMemo(()=>{var B;return new Set(((B=j==null?void 0:j.metadata)==null?void 0:B.supported_parameters)??[])},[j]),[N,P]=T.useState(e??p),[L,H]=T.useState(n??g??1),[M,Z]=T.useState(l??x??0),[q,ue]=T.useState(d??w??0);T.useEffect(()=>{P(e??p)},[e,p]),T.useEffect(()=>{H(n??g??1)},[n,g]),T.useEffect(()=>{Z(l??x??0)},[l,x]),T.useEffect(()=>{ue(d??w??0)},[d,w]);const ae=T.useCallback((B,J)=>{const Q=J.target.value,ne=Q===""?null:parseInt(Q,10);(Q===""||!isNaN(ne)&&ne!==null)&&B(ne)},[]),ee=T.useCallback((B,J)=>{B(J[0])},[]),X=T.useCallback(B=>{B(null)},[]),ie=p!==void 0||g!==void 0||v!==void 0||b!==void 0||x!==void 0||w!==void 0;return m.jsxs("div",{className:xt("space-y-4 p-4",S),children:[I.has("temperature")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",N.toFixed(2),")"]}),m.jsx(cl,{id:"param-temperature",min:0,max:1,step:.01,value:[N],onValueChange:B=>P(B[0]),onValueCommit:B=>ee(t,B)}),ie&&m.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(t),disabled:e===null,children:["Use Default (",(p==null?void 0:p.toFixed(2))??"N/A",")"]})]}),I.has("top_p")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(L??0).toFixed(2),")"]}),m.jsx(cl,{id:"param-top-p",min:0,max:1,step:.01,value:[L??1],onValueChange:B=>H(B[0]),onValueCommit:B=>ee(r,B)}),ie&&m.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[I.has("max_tokens")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),m.jsx(Tn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:B=>ae(i,B),min:"1",className:"h-8 text-xs"}),ie&&m.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(i),disabled:a===null,children:"Use Default"})]}),I.has("top_k")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),m.jsx(Tn,{id:"param-top-k",type:"number",placeholder:`Default: ${b??"None"}`,value:s??"",onChange:B=>ae(o,B),min:"1",className:"h-8 text-xs"}),ie&&m.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(o),disabled:s===null,children:"Use Default"})]})]}),I.has("presence_penalty")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(M??0).toFixed(2),")"]}),m.jsx(cl,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[M??0],onValueChange:B=>Z(B[0]),onValueCommit:B=>ee(c,B)}),ie&&m.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(c),disabled:l===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]}),I.has("frequency_penalty")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(q??0).toFixed(2),")"]}),m.jsx(cl,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[q??0],onValueChange:B=>ue(B[0]),onValueCommit:B=>ee(h,B)}),ie&&m.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(h),disabled:d===null,children:["Use Default (",(w==null?void 0:w.toFixed(2))??"N/A",")"]})]})]})};var n8=1,wTe=.9,xTe=.8,_Te=.17,dT=.1,fT=.999,STe=.9999,ETe=.99,CTe=/[\\\/_+.#"@\[\(\{&]/,TTe=/[\\\/_+.#"@\[\(\{&]/g,kTe=/[\s-]/,$H=/[\s-]/g;function iA(e,t,n,r,a,i,s){if(i===t.length)return a===e.length?n8:ETe;var o=`${a},${i}`;if(s[o]!==void 0)return s[o];for(var l=r.charAt(i),c=n.indexOf(l,a),d=0,h,p,g,v;c>=0;)h=iA(e,t,n,r,c+1,i+1,s),h>d&&(c===a?h*=n8:CTe.test(e.charAt(c-1))?(h*=xTe,g=e.slice(a,c-1).match(TTe),g&&a>0&&(h*=Math.pow(fT,g.length))):kTe.test(e.charAt(c-1))?(h*=wTe,v=e.slice(a,c-1).match($H),v&&a>0&&(h*=Math.pow(fT,v.length))):(h*=_Te,a>0&&(h*=Math.pow(fT,c-a))),e.charAt(c)!==t.charAt(i)&&(h*=STe)),(h<dT&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(p=iA(e,t,n,r,c+1,i+2,s),p*dT>h&&(h=p*dT)),h>d&&(d=h),c=n.indexOf(l,c+1);return s[o]=d,d}function r8(e){return e.toLowerCase().replace($H," ")}function ATe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,iA(e,t,r8(e),r8(t),0,0,{})}var Dg='[cmdk-group=""]',hT='[cmdk-group-items=""]',NTe='[cmdk-group-heading=""]',BH='[cmdk-item=""]',a8=`${BH}:not([aria-disabled="true"])`,sA="cmdk-item-select",qh="data-value",RTe=(e,t,n)=>ATe(e,t,n),zH=T.createContext(void 0),db=()=>T.useContext(zH),UH=T.createContext(void 0),nI=()=>T.useContext(UH),VH=T.createContext(void 0),HH=T.forwardRef((e,t)=>{let n=Gh(()=>{var Q,ne;return{search:"",value:(ne=(Q=e.value)!=null?Q:e.defaultValue)!=null?ne:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Gh(()=>new Set),a=Gh(()=>new Map),i=Gh(()=>new Map),s=Gh(()=>new Set),o=qH(e),{label:l,children:c,value:d,onValueChange:h,filter:p,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:x=!0,...w}=e,S=Va(),E=Va(),C=Va(),k=T.useRef(null),j=zTe();Ef(()=>{if(d!==void 0){let Q=d.trim();n.current.value=Q,I.emit()}},[d]),Ef(()=>{j(6,Z)},[]);let I=T.useMemo(()=>({subscribe:Q=>(s.current.add(Q),()=>s.current.delete(Q)),snapshot:()=>n.current,setState:(Q,ne,he)=>{var de,Ie,Te,Ae;if(!Object.is(n.current[Q],ne)){if(n.current[Q]=ne,Q==="search")M(),L(),j(1,H);else if(Q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ee=document.getElementById(C);Ee?Ee.focus():(de=document.getElementById(S))==null||de.focus()}if(j(7,()=>{var Ee;n.current.selectedItemId=(Ee=q())==null?void 0:Ee.id,I.emit()}),he||j(5,Z),((Ie=o.current)==null?void 0:Ie.value)!==void 0){let Ee=ne??"";(Ae=(Te=o.current).onValueChange)==null||Ae.call(Te,Ee);return}}I.emit()}},emit:()=>{s.current.forEach(Q=>Q())}}),[]),N=T.useMemo(()=>({value:(Q,ne,he)=>{var de;ne!==((de=i.current.get(Q))==null?void 0:de.value)&&(i.current.set(Q,{value:ne,keywords:he}),n.current.filtered.items.set(Q,P(ne,he)),j(2,()=>{L(),I.emit()}))},item:(Q,ne)=>(r.current.add(Q),ne&&(a.current.has(ne)?a.current.get(ne).add(Q):a.current.set(ne,new Set([Q]))),j(3,()=>{M(),L(),n.current.value||H(),I.emit()}),()=>{i.current.delete(Q),r.current.delete(Q),n.current.filtered.items.delete(Q);let he=q();j(4,()=>{M(),(he==null?void 0:he.getAttribute("id"))===Q&&H(),I.emit()})}),group:Q=>(a.current.has(Q)||a.current.set(Q,new Set),()=>{i.current.delete(Q),a.current.delete(Q)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:k}),[]);function P(Q,ne){var he,de;let Ie=(de=(he=o.current)==null?void 0:he.filter)!=null?de:RTe;return Q?Ie(Q,n.current.search,ne):0}function L(){if(!n.current.search||o.current.shouldFilter===!1)return;let Q=n.current.filtered.items,ne=[];n.current.filtered.groups.forEach(de=>{let Ie=a.current.get(de),Te=0;Ie.forEach(Ae=>{let Ee=Q.get(Ae);Te=Math.max(Ee,Te)}),ne.push([de,Te])});let he=k.current;ue().sort((de,Ie)=>{var Te,Ae;let Ee=de.getAttribute("id"),Pe=Ie.getAttribute("id");return((Te=Q.get(Pe))!=null?Te:0)-((Ae=Q.get(Ee))!=null?Ae:0)}).forEach(de=>{let Ie=de.closest(hT);Ie?Ie.appendChild(de.parentElement===Ie?de:de.closest(`${hT} > *`)):he.appendChild(de.parentElement===he?de:de.closest(`${hT} > *`))}),ne.sort((de,Ie)=>Ie[1]-de[1]).forEach(de=>{var Ie;let Te=(Ie=k.current)==null?void 0:Ie.querySelector(`${Dg}[${qh}="${encodeURIComponent(de[0])}"]`);Te==null||Te.parentElement.appendChild(Te)})}function H(){let Q=ue().find(he=>he.getAttribute("aria-disabled")!=="true"),ne=Q==null?void 0:Q.getAttribute(qh);I.setState("value",ne||void 0)}function M(){var Q,ne,he,de;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Ie=0;for(let Te of r.current){let Ae=(ne=(Q=i.current.get(Te))==null?void 0:Q.value)!=null?ne:"",Ee=(de=(he=i.current.get(Te))==null?void 0:he.keywords)!=null?de:[],Pe=P(Ae,Ee);n.current.filtered.items.set(Te,Pe),Pe>0&&Ie++}for(let[Te,Ae]of a.current)for(let Ee of Ae)if(n.current.filtered.items.get(Ee)>0){n.current.filtered.groups.add(Te);break}n.current.filtered.count=Ie}function Z(){var Q,ne,he;let de=q();de&&(((Q=de.parentElement)==null?void 0:Q.firstChild)===de&&((he=(ne=de.closest(Dg))==null?void 0:ne.querySelector(NTe))==null||he.scrollIntoView({block:"nearest"})),de.scrollIntoView({block:"nearest"}))}function q(){var Q;return(Q=k.current)==null?void 0:Q.querySelector(`${BH}[aria-selected="true"]`)}function ue(){var Q;return Array.from(((Q=k.current)==null?void 0:Q.querySelectorAll(a8))||[])}function ae(Q){let ne=ue()[Q];ne&&I.setState("value",ne.getAttribute(qh))}function ee(Q){var ne;let he=q(),de=ue(),Ie=de.findIndex(Ae=>Ae===he),Te=de[Ie+Q];(ne=o.current)!=null&&ne.loop&&(Te=Ie+Q<0?de[de.length-1]:Ie+Q===de.length?de[0]:de[Ie+Q]),Te&&I.setState("value",Te.getAttribute(qh))}function X(Q){let ne=q(),he=ne==null?void 0:ne.closest(Dg),de;for(;he&&!de;)he=Q>0?$Te(he,Dg):BTe(he,Dg),de=he==null?void 0:he.querySelector(a8);de?I.setState("value",de.getAttribute(qh)):ee(Q)}let ie=()=>ae(ue().length-1),B=Q=>{Q.preventDefault(),Q.metaKey?ie():Q.altKey?X(1):ee(1)},J=Q=>{Q.preventDefault(),Q.metaKey?ae(0):Q.altKey?X(-1):ee(-1)};return T.createElement(an.div,{ref:t,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:Q=>{var ne;(ne=w.onKeyDown)==null||ne.call(w,Q);let he=Q.nativeEvent.isComposing||Q.keyCode===229;if(!(Q.defaultPrevented||he))switch(Q.key){case"n":case"j":{x&&Q.ctrlKey&&B(Q);break}case"ArrowDown":{B(Q);break}case"p":case"k":{x&&Q.ctrlKey&&J(Q);break}case"ArrowUp":{J(Q);break}case"Home":{Q.preventDefault(),ae(0);break}case"End":{Q.preventDefault(),ie();break}case"Enter":{Q.preventDefault();let de=q();if(de){let Ie=new Event(sA);de.dispatchEvent(Ie)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:VTe},l),H_(e,Q=>T.createElement(UH.Provider,{value:I},T.createElement(zH.Provider,{value:N},Q))))}),ITe=T.forwardRef((e,t)=>{var n,r;let a=Va(),i=T.useRef(null),s=T.useContext(VH),o=db(),l=qH(e),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;Ef(()=>{if(!c)return o.item(a,s==null?void 0:s.id)},[c]);let d=GH(a,i,[e.value,e.children,i],e.keywords),h=nI(),p=ed(j=>j.value&&j.value===d.current),g=ed(j=>c||o.filter()===!1?!0:j.search?j.filtered.items.get(a)>0:!0);T.useEffect(()=>{let j=i.current;if(!(!j||e.disabled))return j.addEventListener(sA,v),()=>j.removeEventListener(sA,v)},[g,e.onSelect,e.disabled]);function v(){var j,I;b(),(I=(j=l.current).onSelect)==null||I.call(j,d.current)}function b(){h.setState("value",d.current,!0)}if(!g)return null;let{disabled:x,value:w,onSelect:S,forceMount:E,keywords:C,...k}=e;return T.createElement(an.div,{ref:hc(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!p,"data-disabled":!!x,"data-selected":!!p,onPointerMove:x||o.getDisablePointerSelection()?void 0:b,onClick:x?void 0:v},e.children)}),jTe=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,s=Va(),o=T.useRef(null),l=T.useRef(null),c=Va(),d=db(),h=ed(g=>a||d.filter()===!1?!0:g.search?g.filtered.groups.has(s):!0);Ef(()=>d.group(s),[]),GH(s,o,[e.value,e.heading,l]);let p=T.useMemo(()=>({id:s,forceMount:a}),[a]);return T.createElement(an.div,{ref:hc(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),H_(e,g=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},T.createElement(VH.Provider,{value:p},g))))}),DTe=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=T.useRef(null),i=ed(s=>!s.search);return!n&&!i?null:T.createElement(an.div,{ref:hc(a,t),...r,"cmdk-separator":"",role:"separator"})}),MTe=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=nI(),s=ed(c=>c.search),o=ed(c=>c.selectedItemId),l=db();return T.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),T.createElement(an.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:a?e.value:s,onChange:c=>{a||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),OTe=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=T.useRef(null),s=T.useRef(null),o=ed(c=>c.selectedItemId),l=db();return T.useEffect(()=>{if(s.current&&i.current){let c=s.current,d=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;d.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(h),p.unobserve(c)}}},[]),T.createElement(an.div,{ref:hc(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},H_(e,c=>T.createElement("div",{ref:hc(s,l.listInnerRef),"cmdk-list-sizer":""},c)))}),PTe=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:s,...o}=e;return T.createElement(bH,{open:n,onOpenChange:r},T.createElement(vH,{container:s},T.createElement(wH,{"cmdk-overlay":"",className:a}),T.createElement(xH,{"aria-label":e.label,"cmdk-dialog":"",className:i},T.createElement(HH,{ref:t,...o}))))}),FTe=T.forwardRef((e,t)=>ed(n=>n.filtered.count===0)?T.createElement(an.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),LTe=T.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return T.createElement(an.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},H_(e,s=>T.createElement("div",{"aria-hidden":!0},s)))}),fm=Object.assign(HH,{List:OTe,Item:ITe,Input:MTe,Group:jTe,Separator:DTe,Dialog:PTe,Empty:FTe,Loading:LTe});function $Te(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function BTe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function qH(e){let t=T.useRef(e);return Ef(()=>{t.current=e}),t}var Ef=typeof window>"u"?T.useEffect:T.useLayoutEffect;function Gh(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function ed(e){let t=nI(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function GH(e,t,n,r=[]){let a=T.useRef(),i=db();return Ef(()=>{var s;let o=(()=>{var c;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(c=d.current.textContent)==null?void 0:c.trim():a.current}})(),l=r.map(c=>c.trim());i.value(e,o,l),(s=t.current)==null||s.setAttribute(qh,o),a.current=o}),a}var zTe=()=>{let[e,t]=T.useState(),n=Gh(()=>new Map);return Ef(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function UTe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function H_({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(UTe(t),{ref:t.ref},n(t.props.children)):n(t)}var VTe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function WH({className:e,...t}){return m.jsx(fm,{"data-slot":"command",className:xt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function KH({className:e,...t}){return m.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[m.jsx(yo,{className:"size-4 shrink-0 opacity-50"}),m.jsx(fm.Input,{"data-slot":"command-input",className:xt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function ZH({className:e,...t}){return m.jsx(fm.List,{"data-slot":"command-list",className:xt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function YH({...e}){return m.jsx(fm.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function XH({className:e,...t}){return m.jsx(fm.Group,{"data-slot":"command-group",className:xt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function JH({className:e,...t}){return m.jsx(fm.Item,{"data-slot":"command-item",className:xt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const q_=gt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=T.useState(!1),[s,o]=T.useState(""),[l,c]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),{dbProviderConfigs:d,globalModelSortOrder:h,isLoading:p}=zn(dn(E=>({dbProviderConfigs:E.dbProviderConfigs,globalModelSortOrder:E.globalModelSortOrder,isLoading:E.isLoading}))),g=T.useMemo(()=>{const E=new Map,C=new Set;d.forEach(I=>{if(!I.isEnabled||!I.enabledModels)return;const N=zn.getState().getAllAvailableModelDefsForProvider(I.id)??[],P=new Map(N.map(L=>[L.id,L]));I.enabledModels.forEach(L=>{const H=Cu(I.id,L),M=P.get(L);M&&(C.add(H),E.set(H,{name:M.name||L,providerName:I.name,metadata:M}))})});const k=[],j=new Set;return h.forEach(I=>{if(C.has(I)){const N=E.get(I);N&&!j.has(I)&&(k.push({id:I,...N}),j.add(I))}}),C.forEach(I=>{if(!j.has(I)){const N=E.get(I);N&&k.push({id:I,...N})}}),k},[d,h]),v=T.useMemo(()=>{let E=g;if(s.trim()){const k=s.toLowerCase();E=g.filter(j=>j.name.toLowerCase().includes(k)||j.providerName.toLowerCase().includes(k)||j.id.toLowerCase().includes(k))}const C=Object.entries(l).filter(([,k])=>k).map(([k])=>k);return C.length===0?E:E.filter(k=>{var N,P,L;const j=new Set(((N=k.metadata)==null?void 0:N.supported_parameters)??[]),I=new Set(((L=(P=k.metadata)==null?void 0:P.architecture)==null?void 0:L.input_modalities)??[]);return C.every(H=>{switch(H){case"reasoning":return j.has("reasoning");case"webSearch":return j.has("web_search")||j.has("web_search_options");case"tools":return j.has("tools");case"multimodal":return Array.from(I).some(M=>M!=="text");default:return!0}})})},[g,s,l]),b=T.useMemo(()=>g.find(E=>E.id===e),[g,e]),x=T.useCallback(E=>{t(E===e?null:E),i(!1),o("")},[t,e]),w=E=>{c(C=>({...C,[E]:!C[E]}))};if(p)return m.jsx(lr,{className:xt("h-9 w-[250px]",r)});const S=Object.values(l).filter(Boolean).length;return m.jsxs(jc,{open:a,onOpenChange:i,children:[m.jsx(Dc,{asChild:!0,children:m.jsxs(It,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||g.length===0,className:xt("w-auto justify-between h-9 text-sm font-normal",r),children:[m.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:b?`${b.name} (${b.providerName})`:"Select Model..."}),m.jsx(y1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),m.jsx(Mc,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:m.jsxs(WH,{shouldFilter:!1,children:[m.jsxs("div",{className:"flex items-center border-b px-3",children:[m.jsx(yo,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),m.jsx(KH,{placeholder:"Search model...",value:s,onValueChange:o,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),m.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[m.jsx(On,{tooltipText:"Filter: Reasoning",icon:m.jsx(by,{}),onClick:()=>w("reasoning"),variant:l.reasoning?"secondary":"ghost",className:xt("h-7 w-7",l.reasoning&&"text-primary"),"aria-label":"Filter by reasoning capability"}),m.jsx(On,{tooltipText:"Filter: Web Search",icon:m.jsx(yo,{}),onClick:()=>w("webSearch"),variant:l.webSearch?"secondary":"ghost",className:xt("h-7 w-7",l.webSearch&&"text-primary"),"aria-label":"Filter by web search capability"}),m.jsx(On,{tooltipText:"Filter: Tools",icon:m.jsx(EA,{}),onClick:()=>w("tools"),variant:l.tools?"secondary":"ghost",className:xt("h-7 w-7",l.tools&&"text-primary"),"aria-label":"Filter by tool usage capability"}),m.jsx(On,{tooltipText:"Filter: Multimodal",icon:m.jsx(xA,{}),onClick:()=>w("multimodal"),variant:l.multimodal?"secondary":"ghost",className:xt("h-7 w-7",l.multimodal&&"text-primary"),"aria-label":"Filter by multimodal capability"})]})]}),m.jsxs(ZH,{children:[m.jsx(YH,{children:S>0?"No models match all active filters.":"No model found."}),m.jsx(XH,{children:v.map(E=>m.jsxs(JH,{value:E.id,onSelect:x,children:[m.jsx(Ri,{className:xt("mr-2 h-4 w-4",e===E.id?"opacity-100":"opacity-0")}),m.jsxs("span",{className:"truncate",children:[E.name," (",E.providerName,")"]})]},E.id))})]})]})})]})});q_.displayName="GlobalModelSelector";const HTe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:s,setTopP:o,maxTokens:l,setMaxTokens:c,topK:d,setTopK:h,presencePenalty:p,setPresencePenalty:g,frequencyPenalty:v,setFrequencyPenalty:b,autoTitleEnabled:x,setAutoTitleEnabled:w,autoTitleModelId:S,setAutoTitleModelId:E,autoTitlePromptMaxLength:C,setAutoTitlePromptMaxLength:k,autoTitleIncludeFiles:j,setAutoTitleIncludeFiles:I,autoTitleIncludeRules:N,setAutoTitleIncludeRules:P,resetAssistantSettings:L}=hr(dn(X=>({globalSystemPrompt:X.globalSystemPrompt,setGlobalSystemPrompt:X.setGlobalSystemPrompt,toolMaxSteps:X.toolMaxSteps,setToolMaxSteps:X.setToolMaxSteps,temperature:X.temperature,setTemperature:X.setTemperature,topP:X.topP,setTopP:X.setTopP,maxTokens:X.maxTokens,setMaxTokens:X.setMaxTokens,topK:X.topK,setTopK:X.setTopK,presencePenalty:X.presencePenalty,setPresencePenalty:X.setPresencePenalty,frequencyPenalty:X.frequencyPenalty,setFrequencyPenalty:X.setFrequencyPenalty,autoTitleEnabled:X.autoTitleEnabled,setAutoTitleEnabled:X.setAutoTitleEnabled,autoTitleModelId:X.autoTitleModelId,setAutoTitleModelId:X.setAutoTitleModelId,autoTitlePromptMaxLength:X.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:X.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:X.autoTitleIncludeFiles,setAutoTitleIncludeFiles:X.setAutoTitleIncludeFiles,autoTitleIncludeRules:X.autoTitleIncludeRules,setAutoTitleIncludeRules:X.setAutoTitleIncludeRules,resetAssistantSettings:X.resetAssistantSettings}))),H=X=>{const ie=X.target.value,B=ie===""?5:parseInt(ie,10);isNaN(B)||r(B)},M=X=>{const ie=X.target.value,B=ie===""?768:parseInt(ie,10);isNaN(B)||k(B)},Z=X=>{X!==null&&i(X)},q=X=>{X!==null&&o(X)},ue=X=>{X!==null&&g(X)},ae=X=>{X!==null&&b(X)},ee=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&L()};return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),m.jsx(Gt,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),m.jsx(pd,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:X=>t(X.target.value),rows:4})]}),m.jsx(fo,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),m.jsx(LH,{temperature:a,setTemperature:Z,topP:s,setTopP:q,maxTokens:l,setMaxTokens:c,topK:d,setTopK:h,presencePenalty:p,setPresencePenalty:ue,frequencyPenalty:v,setFrequencyPenalty:ae,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]}),m.jsx(fo,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),m.jsx(Gt,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),m.jsx(Tn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:H,className:"w-24"})]}),m.jsx(fo,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Automatic Title Generation"}),m.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[m.jsx(Ki,{id:"auto-title-enabled",checked:x,onCheckedChange:w,"aria-labelledby":"auto-title-enabled-label"}),m.jsx(Gt,{id:"auto-title-enabled-label",htmlFor:"auto-title-enabled",children:"Enable Auto-Title for New Chats"})]}),x&&m.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted ml-2",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"auto-title-model",children:"Model for Title Generation"}),m.jsx(q_,{value:S,onChange:E,className:"w-full"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a fast and capable model for generating concise titles."})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"auto-title-max-length",children:"Max Prompt Length for Title Generation (Chars)"}),m.jsx(Tn,{id:"auto-title-max-length",type:"number",min:"100",max:"4000",step:"10",value:C,onChange:M,className:"w-24"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Limits the initial prompt length sent for title generation (100-4000)."})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Ki,{id:"auto-title-include-files",checked:j,onCheckedChange:I,"aria-labelledby":"auto-title-include-files-label"}),m.jsx(Gt,{id:"auto-title-include-files-label",htmlFor:"auto-title-include-files",children:"Include file names/types in title prompt"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Ki,{id:"auto-title-include-rules",checked:N,onCheckedChange:P,"aria-labelledby":"auto-title-include-rules-label"}),m.jsx(Gt,{id:"auto-title-include-rules-label",htmlFor:"auto-title-include-rules",children:"Include active rules in title prompt"})]})]})]}),m.jsx(fo,{}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsxs(It,{variant:"outline",size:"sm",onClick:ee,children:[m.jsx(SA,{className:"mr-2 h-4 w-4"}),"Reset Assistant Settings"]})})]})},qTe=gt.memo(HTe);var G_="Checkbox",[GTe,Sje]=vi(G_),[WTe,KTe]=GTe(G_),QH=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:c,form:d,...h}=e,[p,g]=T.useState(null),v=An(t,C=>g(C)),b=T.useRef(!1),x=p?d||!!p.closest("form"):!0,[w,S]=_o({prop:a,defaultProp:i??!1,onChange:c,caller:G_}),E=T.useRef(w);return T.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const k=()=>S(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[p,S]),m.jsxs(WTe,{scope:n,state:w,disabled:o,children:[m.jsx(an.button,{type:"button",role:"checkbox","aria-checked":Iu(w)?"mixed":w,"aria-required":s,"data-state":rq(w),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onKeyDown:qt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:qt(e.onClick,C=>{S(k=>Iu(k)?!0:!k),x&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),x&&m.jsx(nq,{control:p,bubbles:!b.current,name:r,value:l,checked:w,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Iu(i)?!1:i})]})});QH.displayName=G_;var eq="CheckboxIndicator",tq=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=KTe(eq,n);return m.jsx(Wa,{present:r||Iu(i.state)||i.state===!0,children:m.jsx(an.span,{"data-state":rq(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});tq.displayName=eq;var ZTe="CheckboxBubbleInput",nq=T.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},s)=>{const o=T.useRef(null),l=An(o,s),c=C_(n),d=O1(t);T.useEffect(()=>{const p=o.current;if(!p)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&b){const x=new Event("click",{bubbles:r});p.indeterminate=Iu(n),b.call(p,Iu(n)?!1:n),p.dispatchEvent(x)}},[c,n,r]);const h=T.useRef(Iu(n)?!1:n);return m.jsx(an.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nq.displayName=ZTe;function Iu(e){return e==="indeterminate"}function rq(e){return Iu(e)?"indeterminate":e?"checked":"unchecked"}var YTe=QH,XTe=tq;function dy({className:e,...t}){return m.jsx(YTe,{"data-slot":"checkbox",className:xt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:m.jsx(XTe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:m.jsx(Ri,{className:"size-3.5"})})})}const JTe=()=>{const{importConversation:e,exportAllConversations:t}=mn(dn(M=>({importConversation:M.importConversation,exportAllConversations:M.exportAllConversations}))),n=T.useRef(null),r=T.useRef(null),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,c]=T.useState(!1),[d,h]=T.useState(!1),[p,g]=T.useState(!1),[v,b]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),[x,w]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),S=()=>{var M;(M=n.current)==null||M.click()},E=()=>{var M;(M=r.current)==null||M.click()},C=T.useCallback(async M=>{var q;const Z=(q=M.target.files)==null?void 0:q[0];if(Z){i(!0);try{await e(Z)}catch(ue){console.error("Import failed (from component):",ue)}finally{n.current&&(n.current.value=""),i(!1)}}},[e]),k=T.useCallback(async M=>{var q;const Z=(q=M.target.files)==null?void 0:q[0];if(Z){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}g(!0);try{await tp.importFullConfiguration(Z,v)}catch(ue){console.error("Full import failed (from component):",ue)}finally{r.current&&(r.current.value=""),g(!1)}}},[v]),j=T.useCallback(async()=>{o(!0);try{await t()}catch(M){console.error("Export all failed (from component):",M)}finally{o(!1)}},[t]),I=T.useCallback(async()=>{h(!0);try{await tp.exportFullConfiguration(x)}catch(M){console.error("Full export failed (from component):",M)}finally{h(!1)}},[x]),N=T.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){c(!0);try{await _t.clearAllData(),Ge.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(M){const Z="Failed to clear all data";console.error(Z,M),Ge.error(`${Z}: ${M instanceof Error?M.message:String(M)}`),c(!1)}}},[]),P=(M,Z)=>{b(q=>({...q,[M]:Z}))},L=(M,Z)=>{w(q=>({...q,[M]:Z}))},H=(M,Z,q,ue)=>{const ae=M==="import"?v:x,ee=M==="import"?P:L,X=M==="import"?p:d;return m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(dy,{id:`${M}-${Z}`,checked:ae[Z],onCheckedChange:ie=>ee(Z,!!ie),disabled:X}),m.jsxs(Gt,{htmlFor:`${M}-${Z}`,className:"text-sm font-normal flex items-center gap-1.5",children:[m.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})," ",q]})]},`${M}-${Z}`)};return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[m.jsx(Gt,{className:"font-semibold",children:"Import Conversation"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),m.jsx("input",{type:"file",ref:n,onChange:C,accept:".json",className:"hidden",id:"import-file-input",disabled:a}),m.jsxs(It,{onClick:S,variant:"outline",size:"sm",disabled:a,children:[a?m.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(vX,{className:"mr-2 h-4 w-4"}),a?"Importing...":"Select File..."]})]}),m.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[m.jsx(Gt,{className:"font-semibold",children:"Export All Conversations"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),m.jsxs(It,{onClick:j,variant:"outline",size:"sm",disabled:s,children:[s?m.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(of,{className:"mr-2 h-4 w-4"}),s?"Exporting...":"Export All Chats"]})]})]})]}),m.jsx(fo,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[m.jsx(Gt,{className:"font-semibold",children:"Import Full Configuration"}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:["Import a full configuration backup (.json). Select which data types to import below."," ",m.jsx("strong",{className:"text-destructive",children:"This will overwrite existing data for selected types."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[H("import","importSettings","Settings",kT),H("import","importApiKeys","API Keys",Yw),H("import","importProviderConfigs","Providers",TT),H("import","importProjects","Projects",j4),H("import","importConversations","Conversations",CT),H("import","importRulesAndTags","Rules & Tags",AT),H("import","importMods","Mods",D4),H("import","importSyncRepos","Sync Repos",Du)]}),m.jsx("input",{type:"file",ref:r,onChange:k,accept:".json",className:"hidden",id:"full-import-file-input",disabled:p}),m.jsxs(It,{onClick:E,variant:"outline",size:"sm",disabled:p,className:"mt-2",children:[p?m.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(fY,{className:"mr-2 h-4 w-4"}),p?"Importing...":"Select Full Backup File..."]})]}),m.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[m.jsx(Gt,{className:"font-semibold",children:"Export Full Configuration"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[H("export","importSettings","Settings",kT),H("export","importApiKeys","API Keys",Yw),H("export","importProviderConfigs","Providers",TT),H("export","importProjects","Projects",j4),H("export","importConversations","Conversations",CT),H("export","importRulesAndTags","Rules & Tags",AT),H("export","importMods","Mods",D4),H("export","importSyncRepos","Sync Repos",Du)]}),m.jsxs(It,{onClick:I,variant:"outline",size:"sm",disabled:d,className:"mt-2",children:[d?m.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(aY,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export Full Backup"]})]})]})]}),m.jsx(fo,{}),m.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[m.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),m.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),m.jsxs(It,{onClick:N,variant:"destructive",disabled:l,children:[l?m.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(Zi,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},QTe=gt.memo(JTe),eke=mA("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function aq({className:e,variant:t,...n}){return m.jsx("div",{"data-slot":"alert",role:"alert",className:xt(eke({variant:t}),e),...n})}function iq({className:e,...t}){return m.jsx("div",{"data-slot":"alert-title",className:xt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function sq({className:e,...t}){return m.jsx("div",{"data-slot":"alert-description",className:xt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function hm({className:e,...t}){return m.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:m.jsx("table",{"data-slot":"table",className:xt("w-full caption-bottom text-sm",e),...t})})}function pm({className:e,...t}){return m.jsx("thead",{"data-slot":"table-header",className:xt("[&_tr]:border-b",e),...t})}function mm({className:e,...t}){return m.jsx("tbody",{"data-slot":"table-body",className:xt("[&_tr:last-child]:border-0",e),...t})}function Jr({className:e,...t}){return m.jsx("tr",{"data-slot":"table-row",className:xt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Ar({className:e,...t}){return m.jsx("th",{"data-slot":"table-head",className:xt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Pn({className:e,...t}){return m.jsx("td",{"data-slot":"table-cell",className:xt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const tke=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=uy(dn(j=>({loadedMods:j.loadedMods,addDbMod:j.addDbMod,updateDbMod:j.updateDbMod,deleteDbMod:j.deleteDbMod,dbMods:j.dbMods,isLoading:j.isLoading}))),[s,o]=T.useState(""),[l,c]=T.useState(""),[d,h]=T.useState(""),[p,g]=T.useState(!1),[v,b]=T.useState({}),[x,w]=T.useState({}),S=T.useCallback(async()=>{if(!s.trim()){Ge.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){Ge.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){Ge.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const j={name:s.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(j),o(""),c(""),h(""),Ge.info("Mod added. Reload required for changes to take effect.")}catch(j){console.error("Failed to add mod (from component):",j)}finally{g(!1)}},[s,l,d,t,a==null?void 0:a.length]),E=T.useCallback(async j=>{b(I=>({...I,[j.id]:!0}));try{await n(j.id,{enabled:!j.enabled}),Ge.info(`Mod "${j.name}" ${j.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(I){console.error("Failed to update mod (from component):",I)}finally{b(I=>({...I,[j.id]:!1}))}},[n]),C=T.useCallback(async j=>{if(window.confirm(`Are you sure you want to delete the mod "${j.name}"? This cannot be undone.`)){w(I=>({...I,[j.id]:!0}));try{await r(j.id),Ge.info("Mod deleted. Reload required for changes to take effect.")}catch(I){console.error("Failed to delete mod (from component):",I)}finally{w(I=>({...I,[j.id]:!1}))}}},[r]),k=T.useCallback(j=>{const I=e.find(P=>P.id===j);if(I)if(I.error){const P=I.error instanceof Error?I.error.message:String(I.error);return{status:"Error",error:I.error,tooltip:P}}else return{status:"Loaded"};const N=(a||[]).find(P=>P.id===j);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs(aq,{variant:"destructive",className:"border-destructive/50",children:[m.jsx(v1,{className:"h-4 w-4"}),m.jsx(iq,{children:"Security Warning"}),m.jsx(sq,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),m.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Gt,{htmlFor:"mod-name",children:"Mod Name"}),m.jsx(Tn,{id:"mod-name",value:s,onChange:j=>o(j.target.value),placeholder:"My Awesome Mod",disabled:p})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Gt,{htmlFor:"mod-url",children:"Source URL (Optional)"}),m.jsx(Tn,{id:"mod-url",type:"url",value:l,onChange:j=>c(j.target.value),placeholder:"https://example.com/my-mod.js",disabled:p||!!d.trim()})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Gt,{htmlFor:"mod-script",children:"Script Content (Optional)"}),m.jsx(pd,{id:"mod-script",value:d,onChange:j=>h(j.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:p||!!l.trim()})]}),m.jsxs(It,{onClick:S,disabled:p,children:[p&&m.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Mod"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),m.jsx("div",{className:"rounded-md border",children:m.jsx(Gn,{delayDuration:100,children:m.jsxs(hm,{children:[m.jsx(pm,{children:m.jsxs(Jr,{children:[m.jsx(Ar,{children:"Name"}),m.jsx(Ar,{children:"Source"}),m.jsx(Ar,{children:"Status"}),m.jsx(Ar,{className:"text-center",children:"Enabled"}),m.jsx(Ar,{className:"text-right",children:"Actions"})]})}),m.jsx(mm,{children:i?m.jsxs(m.Fragment,{children:[m.jsx(Jr,{children:m.jsx(Pn,{colSpan:5,children:m.jsx(lr,{className:"h-10 w-full"})})}),m.jsx(Jr,{children:m.jsx(Pn,{colSpan:5,children:m.jsx(lr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?m.jsx(Jr,{children:m.jsx(Pn,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(j=>{const{status:I,error:N,tooltip:P}=k(j.id),L=j.sourceUrl?new URL(j.sourceUrl).hostname:"Direct Script",H=v[j.id],M=x[j.id],Z=H||M,q=I==="Error";return m.jsxs(Jr,{children:[m.jsx(Pn,{className:"font-medium",children:j.name}),m.jsx(Pn,{className:"text-muted-foreground",children:L}),m.jsxs(Pn,{children:[m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx("span",{className:q?"text-destructive font-semibold cursor-help":"",children:I})}),P&&m.jsx(Yn,{className:"max-w-xs break-words",children:m.jsx("p",{children:P})})]}),q&&N&&m.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),m.jsxs(Pn,{className:"text-center",children:[m.jsx(Ki,{checked:j.enabled??!1,onCheckedChange:()=>E(j),disabled:Z,"aria-label":`Enable ${j.name}`}),H&&m.jsx(Mn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),m.jsx(Pn,{className:"text-right",children:m.jsx(It,{variant:"ghost",size:"icon",onClick:()=>C(j),disabled:Z,"aria-label":`Delete ${j.name}`,className:"text-destructive hover:text-destructive/80",children:M?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Zi,{className:"h-4 w-4"})})})]},j.id)})})]})})})]})]})},nke=gt.memo(tke),rke=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:s,isDeleting:o,onSelectModelForDetails:l})=>{var H,M;const[c,d]=T.useState(!0),h=vp(e.type),p=LA(e.type),g=Zd(e.type),v=s==="fetching"||o,b=o||s==="fetching",x=o||s==="fetching",S=zn(Z=>Z.getAllAvailableModelDefsForProvider)(e.id),E=T.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),C=e.apiKeyId?t.some(Z=>Z.id===e.apiKeyId):!1,k=h&&!C,j=T.useCallback(async(Z,q)=>{const ue=new Set(e.enabledModels??[]);q?ue.add(Z):ue.delete(Z);const ae=Array.from(ue);try{await i(e.id,{enabledModels:ae})}catch(ee){Ge.error("Failed to update model status."),console.error("Failed to save model toggle:",ee)}},[e.enabledModels,e.id,i]),I=()=>d(Z=>!Z),N=((H=e.enabledModels)==null?void 0:H.length)??0,P=S.length,L=Z=>{const q=Cu(e.id,Z);l(q)};return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{children:m.jsx("span",{className:xt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",s==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),m.jsx(Yn,{side:"top",children:s==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),m.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),m.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),k&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{children:m.jsx(df,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),m.jsx(Yn,{side:"top",children:m.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),m.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[m.jsx(On,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:m.jsx(vy,{}),className:"h-8 w-8"}),m.jsx(On,{tooltipText:"Delete",onClick:r,disabled:x,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Zi,{})})]})]}),m.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&m.jsxs("div",{children:["API Key:"," ",e.apiKeyId?C?m.jsx("span",{className:"text-green-400",children:((M=t.find(Z=>Z.id===e.apiKeyId))==null?void 0:M.name)||"Linked (Unnamed Key)"}):m.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):m.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),p&&m.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),m.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?m.jsx("span",{className:"text-green-400",children:"Enabled"}):m.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&m.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),g&&m.jsx("div",{className:"pt-1",children:m.jsxs(It,{variant:"outline",size:"sm",onClick:a,disabled:v,className:"text-xs h-7 px-2",children:[s==="fetching"&&m.jsx(Mn,{className:"h-3 w-3 mr-1 animate-spin"}),s==="success"&&m.jsx(Ri,{className:"h-3 w-3 mr-1 text-green-500"}),s==="error"&&m.jsx(df,{className:"h-3 w-3 mr-1 text-destructive"}),s==="idle"&&m.jsx(b1,{className:"h-3 w-3 mr-1"}),s==="fetching"?"Fetching...":s==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),m.jsxs("div",{className:"space-y-1 pt-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",N," / ",P," enabled)"]}),m.jsx(On,{tooltipText:c?"Show Models":"Hide Models",onClick:I,"aria-label":c?"Show model list":"Hide model list",icon:c?m.jsx(kc,{}):m.jsx(Cf,{}),className:"h-6 w-6"})]}),!c&&m.jsx($R,{providerId:e.id,allAvailableModels:S,enabledModelIds:E,onToggleModel:j,isLoading:s==="fetching",disabled:o,listHeightClass:"h-64",onModelClick:L})]})]})},ake=gt.memo(rke),ike=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:s,onChange:o})=>{const l=vp(t.type??null),c=LA(t.type??null),d=Zd(t.type??null),h=t.isEnabled??!1,p=t.autoFetchModels??!1,g=T.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=T.useCallback((b,x)=>{const w=new Set(t.enabledModels??[]);x?w.add(b):w.delete(b);const S=Array.from(w);o("enabledModels",S)},[t.enabledModels,o]);return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Gt,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),m.jsx(Tn,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>o("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Gt,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),m.jsxs(pl,{value:t.type??"",onValueChange:b=>o("type",b),disabled:a,children:[m.jsx(gl,{id:`edit-type-${e}`,children:m.jsx(ml,{placeholder:"Select Type"})}),m.jsx(yl,{children:Ru.map(b=>m.jsx(da,{value:b.value,children:b.label},b.value))})]})]}),l&&m.jsxs("div",{className:"space-y-1",children:[m.jsx(Gt,{children:"API Key"}),m.jsx(DU,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>o("apiKeyId",b),apiKeys:n,disabled:a})]}),c&&m.jsxs("div",{className:"space-y-1",children:[m.jsx(Gt,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),m.jsx(Tn,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>o("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),m.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[m.jsx(Ki,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>o("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),m.jsx(Gt,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Ki,{id:`edit-autofetch-${e}`,checked:p,onCheckedChange:b=>o("autoFetchModels",b),disabled:!d||a,"aria-labelledby":`edit-autofetch-label-${e}`}),m.jsxs(Gt,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:d?"":"text-muted-foreground",children:["Auto-fetch models ",d?"":"(Not Supported)"]})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),m.jsx($R,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),m.jsx(fo,{className:"my-4"}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(It,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[m.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),m.jsxs(It,{variant:"secondary",size:"sm",onClick:s,disabled:a,type:"button",children:[a&&m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(kf,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},ske=gt.memo(ike),oke=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:s})=>{const[o,l]=T.useState(!1),[c,d]=T.useState(!1),[h,p]=T.useState(!1),[g,v]=T.useState({}),b=zn(P=>P.getAllAvailableModelDefsForProvider),[x,w]=T.useState([]),S=T.useMemo(()=>[...x].sort((P,L)=>(P.name||P.id).localeCompare(L.name||L.id)),[x]);T.useEffect(()=>{if(o){const P=b(e.id);w(P.map(L=>({id:L.id,name:L.name}))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else w([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),C=()=>{l(!1),v({}),d(!1)},k=T.useCallback(async()=>{d(!0);try{const P=g.enabledModels&&g.enabledModels.length>0?g.enabledModels:null,L={name:g.name,type:g.type,isEnabled:g.isEnabled,apiKeyId:g.apiKeyId,baseURL:g.baseURL,autoFetchModels:g.autoFetchModels,enabledModels:P};Object.keys(L).forEach(H=>{L[H]===void 0&&delete L[H]}),await n(e.id,L),l(!1),v({}),Ge.success(`Provider "${L.name||e.name}" updated.`)}catch(P){console.error("Failed to save provider update:",P),Ge.error("Failed to save provider configuration.")}finally{d(!1)}},[g,n,e.id,e.name]),j=T.useCallback((P,L)=>{v(H=>({...H,[P]:L}))},[]),I=T.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){p(!0);try{await r(e.id)}catch(P){console.error("Failed to delete provider:",P),p(!1)}}},[r,e.id,e.name]),N=T.useCallback(async()=>{if(await a(e.id),o){const P=b(e.id);w(P.map(L=>({id:L.id,name:L.name})))}},[a,e.id,o,b]);return m.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?m.jsx(ske,{providerId:e.id,editData:g,apiKeys:t,allAvailableModels:S,isSaving:c,onCancel:C,onSave:k,onChange:j,onUpdate:n}):m.jsx(ake,{provider:e,apiKeys:t,onEdit:E,onDelete:I,onFetchModels:N,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:s})})},lke=gt.memo(oke);var pT="rovingFocusGroup.onEntryFocus",cke={bubbles:!1,cancelable:!0},fb="RovingFocusGroup",[oA,oq,uke]=S_(fb),[dke,W_]=vi(fb,[uke]),[fke,hke]=dke(fb),lq=T.forwardRef((e,t)=>m.jsx(oA.Provider,{scope:e.__scopeRovingFocusGroup,children:m.jsx(oA.Slot,{scope:e.__scopeRovingFocusGroup,children:m.jsx(pke,{...e,ref:t})})}));lq.displayName=fb;var pke=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=e,p=T.useRef(null),g=An(t,p),v=sm(i),[b,x]=_o({prop:s,defaultProp:o??null,onChange:l,caller:fb}),[w,S]=T.useState(!1),E=za(c),C=oq(n),k=T.useRef(!1),[j,I]=T.useState(0);return T.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(pT,E),()=>N.removeEventListener(pT,E)},[E]),m.jsx(fke,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:T.useCallback(N=>x(N),[x]),onItemShiftTab:T.useCallback(()=>S(!0),[]),onFocusableItemAdd:T.useCallback(()=>I(N=>N+1),[]),onFocusableItemRemove:T.useCallback(()=>I(N=>N-1),[]),children:m.jsx(an.div,{tabIndex:w||j===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:qt(e.onMouseDown,()=>{k.current=!0}),onFocus:qt(e.onFocus,N=>{const P=!k.current;if(N.target===N.currentTarget&&P&&!w){const L=new CustomEvent(pT,cke);if(N.currentTarget.dispatchEvent(L),!L.defaultPrevented){const H=C().filter(ae=>ae.focusable),M=H.find(ae=>ae.active),Z=H.find(ae=>ae.id===b),ue=[M,Z,...H].filter(Boolean).map(ae=>ae.ref.current);dq(ue,d)}}k.current=!1}),onBlur:qt(e.onBlur,()=>S(!1))})})}),cq="RovingFocusGroupItem",uq=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s,...o}=e,l=Va(),c=i||l,d=hke(cq,n),h=d.currentTabStopId===c,p=oq(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=d;return T.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),m.jsx(oA.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:m.jsx(an.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:qt(e.onMouseDown,x=>{r?d.onItemFocus(c):x.preventDefault()}),onFocus:qt(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:qt(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const w=yke(x,d.orientation,d.dir);if(w!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let E=p().filter(C=>C.focusable).map(C=>C.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const C=E.indexOf(x.currentTarget);E=d.loop?bke(E,C+1):E.slice(C+1)}setTimeout(()=>dq(E))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:b!=null}):s})})});uq.displayName=cq;var mke={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gke(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function yke(e,t,n){const r=gke(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return mke[r]}function dq(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function bke(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var fq=lq,hq=uq,K_="Tabs",[vke,Eje]=vi(K_,[W_]),pq=W_(),[wke,rI]=vke(K_),mq=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=sm(o),[h,p]=_o({prop:r,onChange:a,defaultProp:i??"",caller:K_});return m.jsx(wke,{scope:n,baseId:Va(),value:h,onValueChange:p,orientation:s,dir:d,activationMode:l,children:m.jsx(an.div,{dir:d,"data-orientation":s,...c,ref:t})})});mq.displayName=K_;var gq="TabsList",yq=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=rI(gq,n),s=pq(n);return m.jsx(fq,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:m.jsx(an.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});yq.displayName=gq;var bq="TabsTrigger",vq=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,s=rI(bq,n),o=pq(n),l=_q(s.baseId,r),c=Sq(s.baseId,r),d=r===s.value;return m.jsx(hq,{asChild:!0,...o,focusable:!a,active:d,children:m.jsx(an.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:qt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:qt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:qt(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!a&&h&&s.onValueChange(r)})})})});vq.displayName=bq;var wq="TabsContent",xq=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...s}=e,o=rI(wq,n),l=_q(o.baseId,r),c=Sq(o.baseId,r),d=r===o.value,h=T.useRef(d);return T.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),m.jsx(Wa,{present:a||d,children:({present:p})=>m.jsx(an.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});xq.displayName=wq;function _q(e,t){return`${e}-trigger-${t}`}function Sq(e,t){return`${e}-content-${t}`}var xke=mq,_ke=yq,Ske=vq,Eke=xq;function Cke({className:e,...t}){return m.jsx(xke,{"data-slot":"tabs",className:xt("flex flex-col gap-2",e),...t})}function Tke({className:e,...t}){return m.jsx(_ke,{"data-slot":"tabs-list",className:xt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function kke({className:e,...t}){return m.jsx(Ske,{"data-slot":"tabs-trigger",className:xt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Ake({className:e,...t}){return m.jsx(Eke,{"data-slot":"tabs-content",className:xt("flex-1 outline-none",e),...t})}const md=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:s,scrollable:o})=>{var g;const[l,c]=T.useState(n??t??((g=e[0])==null?void 0:g.value));T.useEffect(()=>{n!==void 0&&n!==l&&c(n)},[n,l]);const d=v=>{c(v),r&&r(v)},h=xt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),p=({children:v})=>{const b=xt("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",s);return o?m.jsx(Xu,{className:b,children:v}):m.jsx("div",{className:b,children:v})};return m.jsxs(Cke,{value:l,onValueChange:d,defaultValue:t,className:xt("flex flex-col h-full",a),children:[m.jsx(Tke,{className:xt("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>m.jsx(kke,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),m.jsx(p,{children:e.map(v=>m.jsx(Ake,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})};function Nke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const Z_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gm(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function aI(e){return"nodeType"in e}function ts(e){var t,n;return e?gm(e)?e:aI(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function iI(e){const{Document:t}=ts(e);return e instanceof t}function hb(e){return gm(e)?!1:e instanceof ts(e).HTMLElement}function Eq(e){return e instanceof ts(e).SVGElement}function ym(e){return e?gm(e)?e.document:aI(e)?iI(e)?e:hb(e)||Eq(e)?e.ownerDocument:document:document:document}const Sl=Z_?T.useLayoutEffect:T.useEffect;function sI(e){const t=T.useRef(e);return Sl(()=>{t.current=e}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function Rke(){const e=T.useRef(null),t=T.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=T.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function fy(e,t){t===void 0&&(t=[e]);const n=T.useRef(e);return Sl(()=>{n.current!==e&&(n.current=e)},t),n}function pb(e,t){const n=T.useRef();return T.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function d1(e){const t=sI(e),n=T.useRef(null),r=T.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function lA(e){const t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}let mT={};function mb(e,t){return T.useMemo(()=>{if(t)return t;const n=mT[e]==null?0:mT[e]+1;return mT[e]=n,e+"-"+n},[e,t])}function Cq(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>{const o=Object.entries(s);for(const[l,c]of o){const d=i[l];d!=null&&(i[l]=d+e*c)}return i},{...t})}}const up=Cq(1),hy=Cq(-1);function Ike(e){return"clientX"in e&&"clientY"in e}function oI(e){if(!e)return!1;const{KeyboardEvent:t}=ts(e.target);return t&&e instanceof t}function jke(e){if(!e)return!1;const{TouchEvent:t}=ts(e.target);return t&&e instanceof t}function cA(e){if(jke(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ike(e)?{x:e.clientX,y:e.clientY}:null}const py=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[py.Translate.toString(e),py.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),i8="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Dke(e){return e.matches(i8)?e:e.querySelector(i8)}const Mke={display:"none"};function Oke(e){let{id:t,value:n}=e;return gt.createElement("div",{id:t,style:Mke},n)}function Pke(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Fke(){const[e,t]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Tq=T.createContext(null);function Lke(e){const t=T.useContext(Tq);T.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function $ke(){const[e]=T.useState(()=>new Set),t=T.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[T.useCallback(r=>{let{type:a,event:i}=r;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const Bke={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},zke={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Uke(e){let{announcements:t=zke,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Bke}=e;const{announce:i,announcement:s}=Fke(),o=mb("DndLiveRegion"),[l,c]=T.useState(!1);if(T.useEffect(()=>{c(!0)},[]),Lke(T.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:g}=h;t.onDragMove&&i(t.onDragMove({active:p,over:g}))},onDragOver(h){let{active:p,over:g}=h;i(t.onDragOver({active:p,over:g}))},onDragEnd(h){let{active:p,over:g}=h;i(t.onDragEnd({active:p,over:g}))},onDragCancel(h){let{active:p,over:g}=h;i(t.onDragCancel({active:p,over:g}))}}),[i,t])),!l)return null;const d=gt.createElement(gt.Fragment,null,gt.createElement(Oke,{id:r,value:a.draggable}),gt.createElement(Pke,{id:o,announcement:s}));return n?il.createPortal(d,n):d}var Ta;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ta||(Ta={}));function f1(){}function s8(e,t){return T.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Vke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const To=Object.freeze({x:0,y:0});function kq(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Aq(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Hke(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function o8(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function Nq(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function l8(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const qke=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=l8(t,t.left,t.top),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const c=kq(l8(l),a);i.push({id:o,data:{droppableContainer:s,value:c}})}}return i.sort(Aq)},Gke=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=o8(t),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const c=o8(l),d=a.reduce((p,g,v)=>p+kq(c[v],g),0),h=Number((d/4).toFixed(4));i.push({id:o,data:{droppableContainer:s,value:h}})}}return i.sort(Aq)};function Wke(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const l=t.width*t.height,c=e.width*e.height,d=s*o,h=d/(l+c-d);return Number(h.toFixed(4))}return 0}const Kke=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:s}=i,o=n.get(s);if(o){const l=Wke(o,t);l>0&&a.push({id:s,data:{droppableContainer:i,value:l}})}}return a.sort(Hke)};function Zke(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Rq(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:To}function Yke(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...n})}}const Xke=Yke(1);function Jke(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Qke(e,t,n){const r=Jke(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,l=e.left-s-(1-a)*parseFloat(n),c=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:c,right:l+d,bottom:c+h,left:l}}const eAe={ignoreTransform:!1};function bm(e,t){t===void 0&&(t=eAe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:d}=ts(e).getComputedStyle(e);c&&(n=Qke(n,c,d))}const{top:r,left:a,width:i,height:s,bottom:o,right:l}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:l}}function c8(e){return bm(e,{ignoreTransform:!0})}function tAe(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function nAe(e,t){return t===void 0&&(t=ts(e).getComputedStyle(e)),t.position==="fixed"}function rAe(e,t){t===void 0&&(t=ts(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function Y_(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(iI(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!hb(a)||Eq(a)||n.includes(a))return n;const i=ts(e).getComputedStyle(a);return a!==e&&rAe(a,i)&&n.push(a),nAe(a,i)?n:r(a.parentNode)}return e?r(e):n}function Iq(e){const[t]=Y_(e,1);return t??null}function gT(e){return!Z_||!e?null:gm(e)?e:aI(e)?iI(e)||e===ym(e).scrollingElement?window:hb(e)?e:null:null}function jq(e){return gm(e)?e.scrollX:e.scrollLeft}function Dq(e){return gm(e)?e.scrollY:e.scrollTop}function uA(e){return{x:jq(e),y:Dq(e)}}var Ba;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ba||(Ba={}));function Mq(e){return!Z_||!e?!1:e===document.scrollingElement}function Oq(e){const t={x:0,y:0},n=Mq(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:r,minScroll:t}}const aAe={x:.2,y:.2};function iAe(e,t,n,r,a){let{top:i,left:s,right:o,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=aAe);const{isTop:c,isBottom:d,isLeft:h,isRight:p}=Oq(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+b.height?(g.y=Ba.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(g.y=Ba.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!p&&o>=t.right-b.width?(g.x=Ba.Forward,v.x=r*Math.abs((t.right-b.width-o)/b.width)):!h&&s<=t.left+b.width&&(g.x=Ba.Backward,v.x=r*Math.abs((t.left+b.width-s)/b.width)),{direction:g,speed:v}}function sAe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Pq(e){return e.reduce((t,n)=>up(t,uA(n)),To)}function oAe(e){return e.reduce((t,n)=>t+jq(n),0)}function lAe(e){return e.reduce((t,n)=>t+Dq(n),0)}function cAe(e,t){if(t===void 0&&(t=bm),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);Iq(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const uAe=[["x",["left","right"],oAe],["y",["top","bottom"],lAe]];class lI{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Y_(n),a=Pq(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of uAe)for(const l of s)Object.defineProperty(this,l,{get:()=>{const c=o(r),d=a[i]-c;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class e0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function dAe(e){const{EventTarget:t}=ts(e);return e instanceof t?e:ym(e)}function yT(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ls;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ls||(Ls={}));function u8(e){e.preventDefault()}function fAe(e){e.stopPropagation()}var tr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(tr||(tr={}));const Fq={start:[tr.Space,tr.Enter],cancel:[tr.Esc],end:[tr.Space,tr.Enter,tr.Tab]},hAe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case tr.Right:return{...n,x:n.x+25};case tr.Left:return{...n,x:n.x-25};case tr.Down:return{...n,y:n.y+25};case tr.Up:return{...n,y:n.y-25}}};class cI{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new e0(ym(n)),this.windowListeners=new e0(ts(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ls.Resize,this.handleCancel),this.windowListeners.add(Ls.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ls.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&cAe(r),n(To)}handleKeyDown(t){if(oI(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=Fq,coordinateGetter:s=hAe,scrollBehavior:o="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:To;this.referenceCoordinates||(this.referenceCoordinates=d);const h=s(t,{active:n,context:r.current,currentCoordinates:d});if(h){const p=hy(h,d),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const x=t.code,{isTop:w,isRight:S,isLeft:E,isBottom:C,maxScroll:k,minScroll:j}=Oq(b),I=sAe(b),N={x:Math.min(x===tr.Right?I.right-I.width/2:I.right,Math.max(x===tr.Right?I.left:I.left+I.width/2,h.x)),y:Math.min(x===tr.Down?I.bottom-I.height/2:I.bottom,Math.max(x===tr.Down?I.top:I.top+I.height/2,h.y))},P=x===tr.Right&&!S||x===tr.Left&&!E,L=x===tr.Down&&!C||x===tr.Up&&!w;if(P&&N.x!==h.x){const H=b.scrollLeft+p.x,M=x===tr.Right&&H<=k.x||x===tr.Left&&H>=j.x;if(M&&!p.y){b.scrollTo({left:H,behavior:o});return}M?g.x=b.scrollLeft-H:g.x=x===tr.Right?b.scrollLeft-k.x:b.scrollLeft-j.x,g.x&&b.scrollBy({left:-g.x,behavior:o});break}else if(L&&N.y!==h.y){const H=b.scrollTop+p.y,M=x===tr.Down&&H<=k.y||x===tr.Up&&H>=j.y;if(M&&!p.x){b.scrollTo({top:H,behavior:o});return}M?g.y=b.scrollTop-H:g.y=x===tr.Down?b.scrollTop-k.y:b.scrollTop-j.y,g.y&&b.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(t,up(hy(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}cI.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Fq,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function d8(e){return!!(e&&"distance"in e)}function f8(e){return!!(e&&"delay"in e)}class uI{constructor(t,n,r){var a;r===void 0&&(r=dAe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=ym(s),this.documentListeners=new e0(this.document),this.listeners=new e0(r),this.windowListeners=new e0(ts(s)),this.initialCoordinates=(a=cA(i))!=null?a:To,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ls.Resize,this.handleCancel),this.windowListeners.add(Ls.DragStart,u8),this.windowListeners.add(Ls.VisibilityChange,this.handleCancel),this.windowListeners.add(Ls.ContextMenu,u8),this.documentListeners.add(Ls.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(f8(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(d8(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ls.Click,fAe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ls.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const l=(n=cA(t))!=null?n:To,c=hy(a,l);if(!r&&o){if(d8(o)){if(o.tolerance!=null&&yT(c,o.tolerance))return this.handleCancel();if(yT(c,o.distance))return this.handleStart()}if(f8(o)&&yT(c,o.tolerance))return this.handleCancel();this.handlePending(o,c);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===tr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const pAe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class dI extends uI{constructor(t){const{event:n}=t,r=ym(n.target);super(t,pAe,r)}}dI.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const mAe={move:{name:"mousemove"},end:{name:"mouseup"}};var dA;(function(e){e[e.RightClick=2]="RightClick"})(dA||(dA={}));class gAe extends uI{constructor(t){super(t,mAe,ym(t.event.target))}}gAe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===dA.RightClick?!1:(r==null||r({event:n}),!0)}}];const bT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class yAe extends uI{constructor(t){super(t,bT)}static setup(){return window.addEventListener(bT.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(bT.move.name,t)};function t(){}}}yAe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var t0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(t0||(t0={}));var h1;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(h1||(h1={}));function bAe(e){let{acceleration:t,activator:n=t0.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:o=h1.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:h,threshold:p}=e;const g=wAe({delta:h,disabled:!i}),[v,b]=Rke(),x=T.useRef({x:0,y:0}),w=T.useRef({x:0,y:0}),S=T.useMemo(()=>{switch(n){case t0.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case t0.DraggableRect:return a}},[n,a,l]),E=T.useRef(null),C=T.useCallback(()=>{const j=E.current;if(!j)return;const I=x.current.x*w.current.x,N=x.current.y*w.current.y;j.scrollBy(I,N)},[]),k=T.useMemo(()=>o===h1.TreeOrder?[...c].reverse():c,[o,c]);T.useEffect(()=>{if(!i||!c.length||!S){b();return}for(const j of k){if((r==null?void 0:r(j))===!1)continue;const I=c.indexOf(j),N=d[I];if(!N)continue;const{direction:P,speed:L}=iAe(j,N,S,t,p);for(const H of["x","y"])g[H][P[H]]||(L[H]=0,P[H]=0);if(L.x>0||L.y>0){b(),E.current=j,v(C,s),x.current=L,w.current=P;return}}x.current={x:0,y:0},w.current={x:0,y:0},b()},[t,C,r,b,i,s,JSON.stringify(S),JSON.stringify(g),v,c,k,d,JSON.stringify(p)])}const vAe={x:{[Ba.Backward]:!1,[Ba.Forward]:!1},y:{[Ba.Backward]:!1,[Ba.Forward]:!1}};function wAe(e){let{delta:t,disabled:n}=e;const r=lA(t);return pb(a=>{if(n||!r||!a)return vAe;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ba.Backward]:a.x[Ba.Backward]||i.x===-1,[Ba.Forward]:a.x[Ba.Forward]||i.x===1},y:{[Ba.Backward]:a.y[Ba.Backward]||i.y===-1,[Ba.Forward]:a.y[Ba.Forward]||i.y===1}}},[n,t,r])}function xAe(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return pb(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function _Ae(e,t){return T.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var my;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(my||(my={}));var fA;(function(e){e.Optimized="optimized"})(fA||(fA={}));const h8=new Map;function SAe(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=T.useState(null),{frequency:o,measure:l,strategy:c}=a,d=T.useRef(e),h=x(),p=fy(h),g=T.useCallback(function(w){w===void 0&&(w=[]),!p.current&&s(S=>S===null?w:S.concat(w.filter(E=>!S.includes(E))))},[p]),v=T.useRef(null),b=pb(w=>{if(h&&!n)return h8;if(!w||w===h8||d.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new lI(l(C),C):null;E.rect.current=k,k&&S.set(E.id,k)}return S}return w},[e,i,n,h,l]);return T.useEffect(()=>{d.current=e},[e]),T.useEffect(()=>{h||g()},[n,h]),T.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),T.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},o))},[o,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function x(){switch(c){case my.Always:return!1;case my.BeforeDragging:return n;default:return!n}}}function Lq(e,t){return pb(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function EAe(e,t){return Lq(e,t)}function CAe(e){let{callback:t,disabled:n}=e;const r=sI(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function X_(e){let{callback:t,disabled:n}=e;const r=sI(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function TAe(e){return new lI(bm(e),e)}function p8(e,t,n){t===void 0&&(t=TAe);const[r,a]=T.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const s=CAe({callback(l){if(e)for(const c of l){const{type:d,target:h}=c;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=X_({callback:i});return Sl(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),r}function kAe(e){const t=Lq(e);return Rq(e,t)}const m8=[];function AAe(e){const t=T.useRef(e),n=pb(r=>e?r&&r!==m8&&e&&t.current&&e.parentNode===t.current.parentNode?r:Y_(e):m8,[e]);return T.useEffect(()=>{t.current=e},[e]),n}function NAe(e){const[t,n]=T.useState(null),r=T.useRef(e),a=T.useCallback(i=>{const s=gT(i.target);s&&n(o=>o?(o.set(s,uA(s)),new Map(o)):null)},[]);return T.useEffect(()=>{const i=r.current;if(e!==i){s(i);const o=e.map(l=>{const c=gT(l);return c?(c.addEventListener("scroll",a,{passive:!0}),[c,uA(c)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(l=>{const c=gT(l);c==null||c.removeEventListener("scroll",a)})}},[a,e]),T.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>up(i,s),To):Pq(e):To,[e,t])}function g8(e,t){t===void 0&&(t=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},t),T.useEffect(()=>{const r=e!==To;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?hy(e,n.current):To}function RAe(e){T.useEffect(()=>{if(!Z_)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function IAe(e,t){return T.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=s=>{i(s,t)},n},{}),[e,t])}function $q(e){return T.useMemo(()=>e?tAe(e):null,[e])}const y8=[];function jAe(e,t){t===void 0&&(t=bm);const[n]=e,r=$q(n?ts(n):null),[a,i]=T.useState(y8);function s(){i(()=>e.length?e.map(l=>Mq(l)?r:new lI(t(l),l)):y8)}const o=X_({callback:s});return Sl(()=>{o==null||o.disconnect(),s(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),a}function DAe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return hb(t)?t:e}function MAe(e){let{measure:t}=e;const[n,r]=T.useState(null),a=T.useCallback(c=>{for(const{target:d}of c)if(hb(d)){r(h=>{const p=t(d);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=X_({callback:a}),s=T.useCallback(c=>{const d=DAe(c);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[o,l]=d1(s);return T.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const OAe=[{sensor:dI,options:{}},{sensor:cI,options:{}}],PAe={current:{}},Zw={draggable:{measure:c8},droppable:{measure:c8,strategy:my.WhileDragging,frequency:fA.Optimized},dragOverlay:{measure:bm}};class n0 extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const FAe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new n0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:f1},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zw,measureDroppableContainers:f1,windowRect:null,measuringScheduled:!1},LAe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:f1,draggableNodes:new Map,over:null,measureDroppableContainers:f1},J_=T.createContext(LAe),Bq=T.createContext(FAe);function $Ae(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new n0}}}function BAe(e,t){switch(t.type){case Ta.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ta.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ta.DragEnd:case Ta.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ta.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new n0(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case Ta.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new n0(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case Ta.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new n0(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function zAe(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=T.useContext(J_),i=lA(r),s=lA(n==null?void 0:n.id);return T.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!oI(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:l,node:c}=o;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[l.current,c.current]){if(!d)continue;const h=Dke(d);if(h){h.focus();break}}})}},[r,t,a,s,i]),null}function UAe(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function VAe(e){return T.useMemo(()=>({draggable:{...Zw.draggable,...e==null?void 0:e.draggable},droppable:{...Zw.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Zw.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function HAe(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=T.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;Sl(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const d=n(c),h=Rq(d,r);if(s||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=Iq(c);p&&p.scrollBy({top:h.y,left:h.x})}},[t,s,o,r,n])}const zq=T.createContext({...To,scaleX:1,scaleY:1});var Su;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Su||(Su={}));const qAe=T.memo(function(t){var n,r,a,i;let{id:s,accessibility:o,autoScroll:l=!0,children:c,sensors:d=OAe,collisionDetection:h=Kke,measuring:p,modifiers:g,...v}=t;const b=T.useReducer(BAe,void 0,$Ae),[x,w]=b,[S,E]=$ke(),[C,k]=T.useState(Su.Uninitialized),j=C===Su.Initialized,{draggable:{active:I,nodes:N,translate:P},droppable:{containers:L}}=x,H=I!=null?N.get(I):null,M=T.useRef({initial:null,translated:null}),Z=T.useMemo(()=>{var nt;return I!=null?{id:I,data:(nt=H==null?void 0:H.data)!=null?nt:PAe,rect:M}:null},[I,H]),q=T.useRef(null),[ue,ae]=T.useState(null),[ee,X]=T.useState(null),ie=fy(v,Object.values(v)),B=mb("DndDescribedBy",s),J=T.useMemo(()=>L.getEnabled(),[L]),Q=VAe(p),{droppableRects:ne,measureDroppableContainers:he,measuringScheduled:de}=SAe(J,{dragging:j,dependencies:[P.x,P.y],config:Q.droppable}),Ie=xAe(N,I),Te=T.useMemo(()=>ee?cA(ee):null,[ee]),Ae=Be(),Ee=EAe(Ie,Q.draggable.measure);HAe({activeNode:I!=null?N.get(I):null,config:Ae.layoutShiftCompensation,initialRect:Ee,measure:Q.draggable.measure});const Pe=p8(Ie,Q.draggable.measure,Ee),Qe=p8(Ie?Ie.parentElement:null),Le=T.useRef({activatorEvent:null,active:null,activeNode:Ie,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),je=L.getNodeFor((n=Le.current.over)==null?void 0:n.id),z=MAe({measure:Q.dragOverlay.measure}),Se=(r=z.nodeRef.current)!=null?r:Ie,Ne=j?(a=z.rect)!=null?a:Pe:null,fe=!!(z.nodeRef.current&&z.rect),se=kAe(fe?null:Pe),te=$q(Se?ts(Se):null),xe=AAe(j?je??Ie:null),Fe=jAe(xe),Ce=UAe(g,{transform:{x:P.x-se.x,y:P.y-se.y,scaleX:1,scaleY:1},activatorEvent:ee,active:Z,activeNodeRect:Pe,containerNodeRect:Qe,draggingNodeRect:Ne,over:Le.current.over,overlayNodeRect:z.rect,scrollableAncestors:xe,scrollableAncestorRects:Fe,windowRect:te}),We=Te?up(Te,P):null,Nt=NAe(xe),it=g8(Nt),St=g8(Nt,[Pe]),Ft=up(Ce,it),Mt=Ne?Xke(Ne,Ce):null,Zt=Z&&Mt?h({active:Z,collisionRect:Mt,droppableRects:ne,droppableContainers:J,pointerCoordinates:We}):null,be=Nq(Zt,"id"),[D,W]=T.useState(null),pe=fe?Ce:up(Ce,St),De=Zke(pe,(i=D==null?void 0:D.rect)!=null?i:null,Pe),ve=T.useRef(null),ke=T.useCallback((nt,ye)=>{let{sensor:Me,options:Ke}=ye;if(q.current==null)return;const Dt=N.get(q.current);if(!Dt)return;const ge=nt.nativeEvent,G=new Me({active:q.current,activeNode:Dt,event:ge,options:Ke,context:Le,onAbort(K){if(!N.get(K))return;const{onDragAbort:Re}=ie.current,Ve={id:K};Re==null||Re(Ve),S({type:"onDragAbort",event:Ve})},onPending(K,me,Re,Ve){if(!N.get(K))return;const{onDragPending:Kt}=ie.current,ut={id:K,constraint:me,initialCoordinates:Re,offset:Ve};Kt==null||Kt(ut),S({type:"onDragPending",event:ut})},onStart(K){const me=q.current;if(me==null)return;const Re=N.get(me);if(!Re)return;const{onDragStart:Ve}=ie.current,pt={activatorEvent:ge,active:{id:me,data:Re.data,rect:M}};il.unstable_batchedUpdates(()=>{Ve==null||Ve(pt),k(Su.Initializing),w({type:Ta.DragStart,initialCoordinates:K,active:me}),S({type:"onDragStart",event:pt}),ae(ve.current),X(ge)})},onMove(K){w({type:Ta.DragMove,coordinates:K})},onEnd:V(Ta.DragEnd),onCancel:V(Ta.DragCancel)});ve.current=G;function V(K){return async function(){const{active:Re,collisions:Ve,over:pt,scrollAdjustedTranslate:Kt}=Le.current;let ut=null;if(Re&&Kt){const{cancelDrop:Rt}=ie.current;ut={activatorEvent:ge,active:Re,collisions:Ve,delta:Kt,over:pt},K===Ta.DragEnd&&typeof Rt=="function"&&await Promise.resolve(Rt(ut))&&(K=Ta.DragCancel)}q.current=null,il.unstable_batchedUpdates(()=>{w({type:K}),k(Su.Uninitialized),W(null),ae(null),X(null),ve.current=null;const Rt=K===Ta.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Lt=ie.current[Rt];Lt==null||Lt(ut),S({type:Rt,event:ut})}})}}},[N]),le=T.useCallback((nt,ye)=>(Me,Ke)=>{const Dt=Me.nativeEvent,ge=N.get(Ke);if(q.current!==null||!ge||Dt.dndKit||Dt.defaultPrevented)return;const G={active:ge};nt(Me,ye.options,G)===!0&&(Dt.dndKit={capturedBy:ye.sensor},q.current=Ke,ke(Me,ye))},[N,ke]),ft=_Ae(d,le);RAe(d),Sl(()=>{Pe&&C===Su.Initializing&&k(Su.Initialized)},[Pe,C]),T.useEffect(()=>{const{onDragMove:nt}=ie.current,{active:ye,activatorEvent:Me,collisions:Ke,over:Dt}=Le.current;if(!ye||!Me)return;const ge={active:ye,activatorEvent:Me,collisions:Ke,delta:{x:Ft.x,y:Ft.y},over:Dt};il.unstable_batchedUpdates(()=>{nt==null||nt(ge),S({type:"onDragMove",event:ge})})},[Ft.x,Ft.y]),T.useEffect(()=>{const{active:nt,activatorEvent:ye,collisions:Me,droppableContainers:Ke,scrollAdjustedTranslate:Dt}=Le.current;if(!nt||q.current==null||!ye||!Dt)return;const{onDragOver:ge}=ie.current,G=Ke.get(be),V=G&&G.rect.current?{id:G.id,rect:G.rect.current,data:G.data,disabled:G.disabled}:null,K={active:nt,activatorEvent:ye,collisions:Me,delta:{x:Dt.x,y:Dt.y},over:V};il.unstable_batchedUpdates(()=>{W(V),ge==null||ge(K),S({type:"onDragOver",event:K})})},[be]),Sl(()=>{Le.current={activatorEvent:ee,active:Z,activeNode:Ie,collisionRect:Mt,collisions:Zt,droppableRects:ne,draggableNodes:N,draggingNode:Se,draggingNodeRect:Ne,droppableContainers:L,over:D,scrollableAncestors:xe,scrollAdjustedTranslate:Ft},M.current={initial:Ne,translated:Mt}},[Z,Ie,Zt,Mt,N,Se,Ne,ne,L,D,xe,Ft]),bAe({...Ae,delta:P,draggingRect:Mt,pointerCoordinates:We,scrollableAncestors:xe,scrollableAncestorRects:Fe});const vt=T.useMemo(()=>({active:Z,activeNode:Ie,activeNodeRect:Pe,activatorEvent:ee,collisions:Zt,containerNodeRect:Qe,dragOverlay:z,draggableNodes:N,droppableContainers:L,droppableRects:ne,over:D,measureDroppableContainers:he,scrollableAncestors:xe,scrollableAncestorRects:Fe,measuringConfiguration:Q,measuringScheduled:de,windowRect:te}),[Z,Ie,Pe,ee,Zt,Qe,z,N,L,ne,D,he,xe,Fe,Q,de,te]),F=T.useMemo(()=>({activatorEvent:ee,activators:ft,active:Z,activeNodeRect:Pe,ariaDescribedById:{draggable:B},dispatch:w,draggableNodes:N,over:D,measureDroppableContainers:he}),[ee,ft,Z,Pe,w,B,N,D,he]);return gt.createElement(Tq.Provider,{value:E},gt.createElement(J_.Provider,{value:F},gt.createElement(Bq.Provider,{value:vt},gt.createElement(zq.Provider,{value:De},c)),gt.createElement(zAe,{disabled:(o==null?void 0:o.restoreFocus)===!1})),gt.createElement(Uke,{...o,hiddenTextDescribedById:B}));function Be(){const nt=(ue==null?void 0:ue.autoScrollEnabled)===!1,ye=typeof l=="object"?l.enabled===!1:l===!1,Me=j&&!nt&&!ye;return typeof l=="object"?{...l,enabled:Me}:{enabled:Me}}}),GAe=T.createContext(null),b8="button",WAe="Draggable";function KAe(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=mb(WAe),{activators:s,activatorEvent:o,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:h,over:p}=T.useContext(J_),{role:g=b8,roleDescription:v="draggable",tabIndex:b=0}=a??{},x=(l==null?void 0:l.id)===t,w=T.useContext(x?zq:GAe),[S,E]=d1(),[C,k]=d1(),j=IAe(s,t),I=fy(n);Sl(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:I}),()=>{const P=h.get(t);P&&P.key===i&&h.delete(t)}),[h,t]);const N=T.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":x&&g===b8?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,g,b,x,v,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:c,attributes:N,isDragging:x,listeners:r?void 0:j,node:S,over:p,setNodeRef:E,setActivatorNodeRef:k,transform:w}}function ZAe(){return T.useContext(Bq)}const YAe="Droppable",XAe={timeout:25};function JAe(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=mb(YAe),{active:s,dispatch:o,over:l,measureDroppableContainers:c}=T.useContext(J_),d=T.useRef({disabled:n}),h=T.useRef(!1),p=T.useRef(null),g=T.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:x}={...XAe,...a},w=fy(b??r),S=T.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(w.current)?w.current:[w.current]),g.current=null},x)},[x]),E=X_({callback:S,disabled:v||!s}),C=T.useCallback((N,P)=>{E&&(P&&(E.unobserve(P),h.current=!1),N&&E.observe(N))},[E]),[k,j]=d1(C),I=fy(t);return T.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),T.useEffect(()=>(o({type:Ta.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:p,data:I}}),()=>o({type:Ta.UnregisterDroppable,key:i,id:r})),[r]),T.useEffect(()=>{n!==d.current.disabled&&(o({type:Ta.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:s,rect:p,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:j}}function fI(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function QAe(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function Rw(e){return e!==null&&e>=0}function eNe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function tNe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Uq=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=fI(t,r,n),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},Iw={scaleX:1,scaleY:1},nNe=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=(t=i[n])!=null?t:r;if(!o)return null;if(a===n){const c=i[s];return c?{x:0,y:n<s?c.top+c.height-(o.top+o.height):c.top-o.top,...Iw}:null}const l=rNe(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-l,...Iw}:a<n&&a>=s?{x:0,y:o.height+l,...Iw}:{x:0,y:0,...Iw}};function rNe(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const Vq="Sortable",Hq=gt.createContext({activeIndex:-1,containerId:Vq,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Uq,disabled:{draggable:!1,droppable:!1}});function aNe(e){let{children:t,id:n,items:r,strategy:a=Uq,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:c,measureDroppableContainers:d}=ZAe(),h=mb(Vq,n),p=o.rect!==null,g=T.useMemo(()=>r.map(j=>typeof j=="object"&&"id"in j?j.id:j),[r]),v=s!=null,b=s?g.indexOf(s.id):-1,x=c?g.indexOf(c.id):-1,w=T.useRef(g),S=!eNe(g,w.current),E=x!==-1&&b===-1||S,C=tNe(i);Sl(()=>{S&&v&&d(g)},[S,g,v,d]),T.useEffect(()=>{w.current=g},[g]);const k=T.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:x,useDragOverlay:p,sortedRects:QAe(g,l),strategy:a}),[b,h,C.draggable,C.droppable,E,g,x,l,p,a]);return gt.createElement(Hq.Provider,{value:k},t)}const iNe=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return fI(n,r,a).indexOf(t)},sNe=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:l,transition:c}=e;return!c||!r||o!==i&&a===s?!1:n?!0:s!==a&&t===l},oNe={duration:200,easing:"ease"},qq="transform",lNe=py.Transition.toString({property:qq,duration:0,easing:"linear"}),cNe={roleDescription:"sortable"};function uNe(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=T.useState(null),o=T.useRef(n);return Sl(()=>{if(!t&&n!==o.current&&r.current){const l=a.current;if(l){const c=bm(r.current,{ignoreTransform:!0}),d={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(d.x||d.y)&&s(d)}}n!==o.current&&(o.current=n)},[t,n,r,a]),T.useEffect(()=>{i&&s(null)},[i]),i}function dNe(e){let{animateLayoutChanges:t=sNe,attributes:n,disabled:r,data:a,getNewIndex:i=iNe,id:s,strategy:o,resizeObserverConfig:l,transition:c=oNe}=e;const{items:d,containerId:h,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:b,overIndex:x,useDragOverlay:w,strategy:S}=T.useContext(Hq),E=fNe(r,g),C=d.indexOf(s),k=T.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...a}),[h,a,C,d]),j=T.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:I,node:N,isOver:P,setNodeRef:L}=JAe({id:s,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...l}}),{active:H,activatorEvent:M,activeNodeRect:Z,attributes:q,setNodeRef:ue,listeners:ae,isDragging:ee,over:X,setActivatorNodeRef:ie,transform:B}=KAe({id:s,data:k,attributes:{...cNe,...n},disabled:E.draggable}),J=Nke(L,ue),Q=!!H,ne=Q&&!v&&Rw(p)&&Rw(x),he=!w&&ee,de=he&&ne?B:null,Te=ne?de??(o??S)({rects:b,activeNodeRect:Z,activeIndex:p,overIndex:x,index:C}):null,Ae=Rw(p)&&Rw(x)?i({id:s,items:d,activeIndex:p,overIndex:x}):C,Ee=H==null?void 0:H.id,Pe=T.useRef({activeId:Ee,items:d,newIndex:Ae,containerId:h}),Qe=d!==Pe.current.items,Le=t({active:H,containerId:h,isDragging:ee,isSorting:Q,id:s,index:C,items:d,newIndex:Pe.current.newIndex,previousItems:Pe.current.items,previousContainerId:Pe.current.containerId,transition:c,wasDragging:Pe.current.activeId!=null}),je=uNe({disabled:!Le,index:C,node:N,rect:I});return T.useEffect(()=>{Q&&Pe.current.newIndex!==Ae&&(Pe.current.newIndex=Ae),h!==Pe.current.containerId&&(Pe.current.containerId=h),d!==Pe.current.items&&(Pe.current.items=d)},[Q,Ae,h,d]),T.useEffect(()=>{if(Ee===Pe.current.activeId)return;if(Ee!=null&&Pe.current.activeId==null){Pe.current.activeId=Ee;return}const Se=setTimeout(()=>{Pe.current.activeId=Ee},50);return()=>clearTimeout(Se)},[Ee]),{active:H,activeIndex:p,attributes:q,data:k,rect:I,index:C,newIndex:Ae,items:d,isOver:P,isSorting:Q,isDragging:ee,listeners:ae,node:N,overIndex:x,over:X,setNodeRef:J,setActivatorNodeRef:ie,setDroppableNodeRef:L,setDraggableNodeRef:ue,transform:je??Te,transition:z()};function z(){if(je||Qe&&Pe.current.newIndex===C)return lNe;if(!(he&&!oI(M)||!c)&&(Q||Le))return py.Transition.toString({...c,property:qq})}}function fNe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function p1(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const hNe=[tr.Down,tr.Right,tr.Up,tr.Left],pNe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(hNe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(e.code){case tr.Down:r.top<p.top&&l.push(h);break;case tr.Up:r.top>p.top&&l.push(h);break;case tr.Left:r.left>p.left&&l.push(h);break;case tr.Right:r.left<p.left&&l.push(h);break}});const c=Gke({collisionRect:r,droppableRects:a,droppableContainers:l});let d=Nq(c,"id");if(d===(s==null?void 0:s.id)&&c.length>1&&(d=c[1].id),d!=null){const h=i.get(n.id),p=i.get(d),g=p?a.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&g&&h&&p){const x=Y_(v).some((j,I)=>o[I]!==j),w=Gq(h,p),S=mNe(h,p),E=x||!w?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:hy(C,E)}}}};function Gq(e,t){return!p1(e)||!p1(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function mNe(e,t){return!p1(e)||!p1(t)||!Gq(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const gNe=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:l}=dNe({id:e,disabled:n}),c={transform:py.Transform.toString(s),transition:o,zIndex:l?10:void 0,opacity:n?.5:1};return m.jsxs("div",{ref:i,style:c,...r,...a,className:xt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[m.jsx(kY,{className:xt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),m.jsx(Gt,{className:xt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},yNe=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAllAvailableModelDefsForProvider:a}=zn(dn(p=>({setGlobalModelSortOrder:p.setGlobalModelSortOrder,dbProviderConfigs:p.dbProviderConfigs,globalModelSortOrder:p.globalModelSortOrder,isLoading:p.isLoading,getAllAvailableModelDefsForProvider:p.getAllAvailableModelDefsForProvider}))),[i,s]=T.useState(""),o=T.useMemo(()=>{const p=new Map,g=new Set;t.forEach(w=>{if(!w.isEnabled||!w.enabledModels)return;const S=a(w.id),E=new Map(S.map(C=>[C.id,C]));w.enabledModels.forEach(C=>{const k=Cu(w.id,C),j=E.get(C);j&&(g.add(k),p.set(k,{id:k,name:j.name||C,providerId:w.id,providerName:w.name,metadata:j}))})});const v=[],b=new Set;n.forEach(w=>{if(g.has(w)){const S=p.get(w);S&&!b.has(w)&&(v.push(S),b.add(w))}});const x=Array.from(g).filter(w=>!b.has(w)).map(w=>p.get(w)).filter(w=>!!w).sort((w,S)=>w.name.localeCompare(S.name));return[...v,...x]},[t,n,a]),l=T.useMemo(()=>{if(!i.trim())return o;const p=i.toLowerCase();return o.filter(g=>g.name.toLowerCase().includes(p)||g.providerName.toLowerCase().includes(p)||g.id.toLowerCase().includes(p))},[o,i]),c=T.useMemo(()=>l.map(p=>p.id),[l]),d=T.useCallback(p=>{const{active:g,over:v}=p;if(v&&g.id!==v.id){const b=o.map(C=>C.id),x=g.id,w=v.id,S=b.indexOf(x),E=b.indexOf(w);if(S!==-1&&E!==-1){const C=fI(b,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[o,e]),h=Vke(s8(dI),s8(cI,{coordinateGetter:pNe}));return r?m.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[m.jsx(lr,{className:"h-8 w-1/3"}),m.jsx(lr,{className:"h-6 w-1/2"}),m.jsx(lr,{className:"h-64 w-full"})]}):m.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[m.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),m.jsx(fo,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(Gt,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),m.jsxs("div",{className:"relative",children:[m.jsx(yo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(Tn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:p=>s(p.target.value),className:"pl-8 w-full",disabled:r})]}),m.jsx(Xu,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?m.jsx(qAe,{sensors:h,collisionDetection:qke,onDragEnd:d,children:m.jsx(aNe,{items:c,strategy:nNe,children:l.map(p=>m.jsx(gNe,{id:p.id,name:`${p.name} (${p.providerName})`},p.id))})}):m.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},bNe=({modelId:e})=>{var s,o,l,c,d,h,p,g,v,b,x,w,S;const{getProviderById:t,getAllAvailableModelDefsForProvider:n}=zn(E=>({getProviderById:C=>E.dbProviderConfigs.find(k=>k.id===C),getAllAvailableModelDefsForProvider:E.getAllAvailableModelDefsForProvider})),r=T.useMemo(()=>{if(!e)return null;const{providerId:E,modelId:C}=Ac(e);if(!E||!C)return null;const k=t(E);if(!k)return null;const I=n(E).find(N=>N.id===C);return I?{...I,providerName:k.name}:null},[e,t,n]);if(!r)return m.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select a model from a provider's list to view its details."});const a=E=>{if(!E)return"N/A";const C=parseFloat(E);return isNaN(C)||C===0?"Free":`$${C.toFixed(4)} / 1M tokens`},i=E=>E?`${E.toLocaleString()} tokens`:"Unknown";return m.jsx(Xu,{className:"h-full p-1",children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h3",{className:"text-xl font-semibold",children:[r.name," ",m.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.providerName,")"]})]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:r.id}),r.description&&m.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:m.jsx("p",{children:r.description})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[m.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[m.jsx("h4",{className:"font-medium mb-1",children:"Context & Limits"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Context Length:"})," ",i(((s=r.top_provider)==null?void 0:s.context_length)??r.context_length)]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Max Completion Tokens:"})," ",(o=r.top_provider)!=null&&o.max_completion_tokens?r.top_provider.max_completion_tokens.toLocaleString():"Default"]}),r.per_request_limits&&m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Request Limits:"})," ",m.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.per_request_limits,null,2)})]})]}),m.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[m.jsx("h4",{className:"font-medium mb-1",children:"Pricing (per 1M tokens)"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Prompt:"})," ",a((l=r.pricing)==null?void 0:l.prompt)]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Completion:"})," ",a((c=r.pricing)==null?void 0:c.completion)]}),((d=r.pricing)==null?void 0:d.request)&&parseFloat(r.pricing.request)>0&&m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Request:"})," $",parseFloat(r.pricing.request).toFixed(6)]}),((h=r.pricing)==null?void 0:h.image)&&parseFloat(r.pricing.image)>0&&m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Image:"})," $",parseFloat(r.pricing.image).toFixed(6)]})]}),m.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[m.jsx("h4",{className:"font-medium mb-1",children:"Architecture"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Modality:"})," ",((p=r.architecture)==null?void 0:p.modality)??"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Input Modalities:"})," ",((v=(g=r.architecture)==null?void 0:g.input_modalities)==null?void 0:v.join(", "))??"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Output Modalities:"})," ",((x=(b=r.architecture)==null?void 0:b.output_modalities)==null?void 0:x.join(", "))??"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Tokenizer:"})," ",((w=r.architecture)==null?void 0:w.tokenizer)??"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Instruct Type:"})," ",((S=r.architecture)==null?void 0:S.instruct_type)??"N/A"]})]}),m.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[m.jsx("h4",{className:"font-medium mb-1",children:"Supported Parameters"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:r.supported_parameters&&r.supported_parameters.length>0?r.supported_parameters.map(E=>m.jsx(Jg,{variant:"secondary",children:E},E)):m.jsx("span",{className:"text-muted-foreground italic",children:"None specified"})})]})]})]})})},vNe=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=zn(dn(p=>({apiKeys:p.dbApiKeys,addApiKey:p.addApiKey,deleteApiKey:p.deleteApiKey,isLoading:p.isLoading}))),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,c]=T.useState({}),d=T.useCallback(async(p,g,v)=>{o(!0);try{await t(p,g,v),i(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),h=T.useCallback(async(p,g)=>{if(window.confirm(`Are you sure you want to delete the API key "${g}"? This will unlink it from any providers using it.`)){c(v=>({...v,[p]:!0}));try{await n(p)}catch(v){console.error("Failed to delete API key (from component):",v)}finally{c(v=>({...v,[p]:!1}))}}},[n]);return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!a&&m.jsxs(It,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[m.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),a&&m.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),m.jsx(kU,{onSave:d,onCancel:()=>i(!1),isSaving:s})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!a?m.jsxs("div",{className:"space-y-2",children:[m.jsx(lr,{className:"h-10 w-full"}),m.jsx(lr,{className:"h-10 w-full"})]}):(e||[]).length===0&&!a?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs(hm,{children:[m.jsx(pm,{children:m.jsxs(Jr,{children:[m.jsx(Ar,{children:"Name"}),m.jsx(Ar,{children:"Provider Type"}),m.jsx(Ar,{children:"Created"}),m.jsx(Ar,{className:"text-right",children:"Actions"})]})}),m.jsx(mm,{children:(e||[]).map(p=>{const g=l[p.id];return m.jsxs(Jr,{className:g?"opacity-50":"",children:[m.jsx(Pn,{className:"font-medium",children:p.name||"Unnamed Key"}),m.jsx(Pn,{children:p.providerId||"Unknown"}),m.jsx(Pn,{className:"text-xs text-muted-foreground",children:bk(new Date(p.createdAt),"PPp")}),m.jsx(Pn,{className:"text-right",children:m.jsx(On,{tooltipText:"Delete Key",onClick:()=>h(p.id,p.name||"Unnamed Key"),disabled:g,"aria-label":`Delete key ${p.name||"Unnamed Key"}`,icon:g?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},p.id)})})]})})]})]})},wNe=gt.memo(vNe),xNe=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:s,apiKeys:o,isLoading:l}=zn(dn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[c,d]=T.useState(!1),h=()=>d(!0),p=T.useCallback(()=>d(!1),[]),g=T.useCallback(async b=>{await a(b)},[a]),v=T.useMemo(()=>s||[],[s]);return m.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),m.jsx("div",{className:"flex-shrink-0",children:c?m.jsx(MU,{apiKeys:o||[],onAddProvider:t,onCancel:p}):m.jsxs(It,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[m.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),m.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:m.jsxs("div",{className:"space-y-2",children:[l&&!c?m.jsx(m.Fragment,{children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[m.jsx(lr,{className:"h-24 w-full"}),m.jsx(lr,{className:"h-24 w-full"}),m.jsx(lr,{className:"h-24 w-full"})]})}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>m.jsx(lke,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:g,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!c&&m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},_Ne=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=zn(dn(s=>({selectedModelForDetails:s._selectedModelForDetails,setSelectedModelForDetails:s.setSelectedModelForDetails}))),[n,r]=T.useState("providers-config"),a=T.useCallback(s=>{t(s),s&&r("providers-details")},[t]),i=T.useMemo(()=>[{value:"providers-config",label:"Configuration",content:m.jsx(xNe,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:m.jsx(yNe,{})},{value:"api-keys",label:"API Keys",content:m.jsx(wNe,{})},{value:"providers-details",label:"Model Details",content:m.jsx(bNe,{modelId:e})}],[e,a]);return m.jsx(md,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},SNe=gt.memo(_Ne),zg=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:s})=>m.jsxs("div",{className:xt("space-y-3",r),children:[m.jsxs("div",{children:[m.jsx("h3",{className:xt("text-lg font-medium",a),children:e}),t&&m.jsx("p",{className:xt("text-sm text-muted-foreground",i),children:t})]}),m.jsx("div",{className:xt(s),children:n})]}),ENe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=hr(dn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return m.jsx("div",{className:"space-y-6 p-1",children:m.jsx(zg,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"git-user-name",children:"Git User Name"}),m.jsx(Tn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"git-user-email",children:"Git User Email"}),m.jsx(Tn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},CNe=gt.memo(ENe),TNe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:s}=mn(dn(N=>({syncRepos:N.syncRepos,addSyncRepo:N.addSyncRepo,updateSyncRepo:N.updateSyncRepo,deleteSyncRepo:N.deleteSyncRepo,initializeOrSyncRepo:N.initializeOrSyncRepo,repoInitializationStatus:N.repoInitializationStatus,isLoading:N.isLoading}))),[o,l]=T.useState(!1),[c,d]=T.useState(null),[h,p]=T.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=T.useState(!1),[b,x]=T.useState({}),w=T.useCallback(()=>{p({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),S=T.useCallback((N,P)=>{p(L=>({...L,[N]:P}))},[]),E=T.useCallback(async()=>{var N,P,L,H;if(!((N=h.name)!=null&&N.trim())||!((P=h.remoteUrl)!=null&&P.trim())){Ge.error("Repository Name and Remote URL are required.");return}v(!0);try{const M={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((L=h.branch)==null?void 0:L.trim())||"main",username:((H=h.username)==null?void 0:H.trim())||null,password:h.password||null};c?await n(c,M):await t(M),w()}catch(M){console.error("Failed to save sync repo:",M)}finally{v(!1)}},[h,c,t,n,w]),C=N=>{d(N.id),p({name:N.name,remoteUrl:N.remoteUrl,branch:N.branch||"main",username:N.username??"",password:N.password??""}),l(!1)},k=T.useCallback(async(N,P)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${P}"? This will unlink it from any conversations and remove the local copy.`)){x(L=>({...L,[N]:!0}));try{await r(N),c===N&&w()}catch(L){console.error("Failed to delete sync repo:",L)}finally{x(L=>({...L,[N]:!1}))}}},[r,c,w]),j=T.useCallback(async N=>{await a(N)},[a]),I=()=>{var N,P;return m.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:c?"Edit Sync Repository":"Add New Sync Repository"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"sm:col-span-1",children:[m.jsx(Gt,{htmlFor:"repo-name",children:"Name"}),m.jsx(Tn,{id:"repo-name",value:h.name||"",onChange:L=>S("name",L.target.value),placeholder:"e.g., My Backup",required:!0,className:"mt-1",disabled:g})]}),m.jsxs("div",{className:"sm:col-span-2",children:[m.jsx(Gt,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),m.jsx(Tn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:L=>S("remoteUrl",L.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),m.jsxs("div",{className:"sm:col-span-1",children:[m.jsx(Gt,{htmlFor:"repo-branch",children:"Branch"}),m.jsx(Tn,{id:"repo-branch",value:h.branch||"",onChange:L=>S("branch",L.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),m.jsxs("div",{className:"pt-2",children:[m.jsx(Gt,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),m.jsxs(aq,{variant:"destructive",className:"mt-2 mb-3",children:[m.jsx(v1,{className:"h-4 w-4"}),m.jsx(iq,{children:"Security Warning"}),m.jsx(sq,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"repo-username",children:"Username"}),m.jsx(Tn,{id:"repo-username",value:h.username||"",onChange:L=>S("username",L.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"repo-password",children:"Password / Token"}),m.jsx(Tn,{id:"repo-password",type:"password",value:h.password||"",onChange:L=>S("password",L.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(It,{variant:"ghost",size:"sm",onClick:w,disabled:g,type:"button",children:[m.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(It,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((N=h.name)!=null&&N.trim())||!((P=h.remoteUrl)!=null&&P.trim()),type:"button",children:[g&&m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(kf,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!o&&!c&&m.jsxs(It,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:s,children:[m.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||c)&&I(),m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),s&&!o&&!c?m.jsxs("div",{className:"space-y-2",children:[m.jsx(lr,{className:"h-10 w-full"}),m.jsx(lr,{className:"h-10 w-full"}),m.jsx(lr,{className:"h-10 w-full"})]}):e.length===0&&!o&&!c?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):m.jsxs("div",{className:"border rounded-md overflow-x-auto",children:[" ",m.jsxs(hm,{children:[m.jsx(pm,{children:m.jsxs(Jr,{children:[m.jsx(Ar,{children:"Name"}),m.jsx(Ar,{className:"hidden md:table-cell",children:"Remote URL"})," ",m.jsx(Ar,{className:"hidden lg:table-cell",children:"Branch"})," ",m.jsx(Ar,{className:"hidden lg:table-cell",children:"Auth"})," ",m.jsx(Ar,{className:"text-right",children:"Actions"})]})}),m.jsx(mm,{children:e.map(N=>{const P=b[N.id],L=c===N.id,H=!!N.username||!!N.password,M=i[N.id]||"idle",q=P||g||!!c||M==="syncing";let ue=null,ae="Initialize/Sync Repository";return M==="syncing"?(ue=m.jsx(Mn,{className:"h-4 w-4 animate-spin mr-1"}),ae="Initializing/Syncing..."):M==="idle"?(ue=m.jsx(yA,{className:"h-4 w-4 text-green-500 mr-1"}),ae="Sync Successful / Ready"):M==="error"?(ue=m.jsx(df,{className:"h-4 w-4 text-destructive mr-1"}),ae="Sync Failed"):ue=m.jsx(b1,{className:"h-4 w-4 mr-1"}),m.jsxs(Jr,{className:xt(L?"bg-muted/50":"",q&&!L?"opacity-70":""),children:[m.jsx(Pn,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:N.name}),m.jsx(Pn,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:N.remoteUrl}),m.jsx(Pn,{className:"hidden lg:table-cell",children:N.branch||"main"}),m.jsx(Pn,{className:"text-xs hidden lg:table-cell",children:H?"Configured":"None"}),m.jsxs(Pn,{className:"text-right space-x-1",children:[m.jsx(On,{tooltipText:ae,onClick:()=>j(N.id),"aria-label":`Initialize or Sync repo ${N.name}`,disabled:q,icon:ue,variant:"outline",className:"h-8 w-8"}),m.jsx(On,{tooltipText:"Edit",onClick:()=>C(N),"aria-label":`Edit repo ${N.name}`,disabled:q,icon:m.jsx(vy,{}),className:"h-8 w-8"}),m.jsx(On,{tooltipText:"Delete",onClick:()=>k(N.id,N.name),"aria-label":`Delete repo ${N.name}`,disabled:q,icon:P?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},N.id)})})]})]})]})]})},kNe=gt.memo(TNe),ANe=()=>{const e=T.useMemo(()=>[{value:"config",label:"User Config",content:m.jsx(CNe,{})},{value:"sync",label:"Sync Repositories",content:m.jsx(kNe,{})}],[]);return m.jsx(md,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},NNe=gt.memo(ANe),RNe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.content)||""),[l,c]=T.useState((e==null?void 0:e.type)||"before");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.content)||""),c((e==null?void 0:e.type)||"before")},[e]);const d=T.useCallback(async()=>{if(!a.trim()||!s.trim()){Ge.error("Rule Name and Content are required.");return}await n({name:a.trim(),content:s.trim(),type:l})},[a,s,l,n]);return m.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[m.jsx(Gt,{htmlFor:"rule-name",children:"Rule Name"}),m.jsx(Tn,{id:"rule-name",value:a,onChange:h=>i(h.target.value),placeholder:"e.g., Always respond in JSON",required:!0,disabled:t})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"rule-type",children:"Rule Type"}),m.jsxs(pl,{value:l,onValueChange:h=>c(h),disabled:t,children:[m.jsx(gl,{id:"rule-type",children:m.jsx(ml,{placeholder:"Select Type"})}),m.jsxs(yl,{children:[m.jsx(da,{value:"system",children:"System Prompt"}),m.jsx(da,{value:"before",children:"Before User Prompt"}),m.jsx(da,{value:"after",children:"After User Prompt"})]})]})]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"rule-content",children:"Rule Content"}),m.jsx(pd,{id:"rule-content",value:s,onChange:h=>o(h.target.value),placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(It,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[m.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(It,{variant:"secondary",size:"sm",onClick:d,disabled:t||!a.trim()||!s.trim(),type:"button",children:[t&&m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(kf,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Rule"]})]})]})},INe=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:a})=>{const i=s=>{window.confirm(`Are you sure you want to delete the rule "${s.name}"? This will also remove it from any tags.`)&&a(s.id,s.name)};return m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs(hm,{children:[m.jsx(pm,{children:m.jsxs(Jr,{children:[m.jsx(Ar,{children:"Name"}),m.jsx(Ar,{children:"Type"}),m.jsx(Ar,{children:"Content Preview"}),m.jsx(Ar,{className:"text-right",children:"Actions"})]})}),m.jsx(mm,{children:t?m.jsxs(m.Fragment,{children:[m.jsx(Jr,{children:m.jsx(Pn,{colSpan:4,children:m.jsx(lr,{className:"h-10 w-full"})})}),m.jsx(Jr,{children:m.jsx(Pn,{colSpan:4,children:m.jsx(lr,{className:"h-10 w-full"})})})]}):e.length===0?m.jsx(Jr,{children:m.jsx(Pn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(s=>{const o=n[s.id];return m.jsxs(Jr,{children:[m.jsx(Pn,{className:"font-medium",children:s.name}),m.jsx(Pn,{className:"capitalize",children:s.type}),m.jsx(Pn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.content}),m.jsxs(Pn,{className:"text-right space-x-1",children:[m.jsx(On,{tooltipText:"Edit Rule",onClick:()=>r(s),disabled:o,icon:m.jsx(vy,{}),className:"h-8 w-8","aria-label":`Edit rule ${s.name}`}),m.jsx(On,{tooltipText:"Delete Rule",onClick:()=>i(s),disabled:o,icon:o?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${s.name}`})]})]},s.id)})})]})})},jNe=()=>{const{rules:e,addRule:t,updateRule:n,deleteRule:r,isLoading:a}=Cc(dn(S=>({rules:S.rules,addRule:S.addRule,updateRule:S.updateRule,deleteRule:S.deleteRule,isLoading:S.isLoading}))),[i,s]=T.useState(!1),[o,l]=T.useState(null),[c,d]=T.useState(!1),[h,p]=T.useState({}),g=()=>{l(null),s(!0)},v=S=>{l(S),s(!0)},b=T.useCallback(()=>{s(!1),l(null),d(!1)},[]),x=T.useCallback(async S=>{d(!0);try{o?await n(o.id,S):await t(S),b()}catch{}finally{d(!1)}},[t,n,o,b]),w=T.useCallback(async S=>{p(E=>({...E,[S]:!0}));try{await r(S),(o==null?void 0:o.id)===S&&b()}catch{}finally{p(E=>({...E,[S]:!1}))}},[r,o,b]);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&m.jsxs(It,{onClick:g,variant:"outline",className:"w-full",disabled:a,children:[m.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&m.jsx(RNe,{initialData:o??void 0,isSaving:c,onSave:x,onCancel:b}),m.jsxs("div",{className:"pt-4",children:[m.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),m.jsx(INe,{rules:e,isLoading:a,isDeleting:h,onEdit:v,onDelete:w})]})]})},DNe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.description)||"");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.description)||"")},[e]);const l=T.useCallback(async()=>{if(!a.trim()){Ge.error("Tag Name is required.");return}await n({name:a.trim(),description:(s==null?void 0:s.trim())||null})},[a,s,n]);return m.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"tag-name",children:"Tag Name"}),m.jsx(Tn,{id:"tag-name",value:a,onChange:c=>i(c.target.value),placeholder:"e.g., Code Generation, Summarization",required:!0,disabled:t})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"tag-description",children:"Description (Optional)"}),m.jsx(pd,{id:"tag-description",value:s||"",onChange:c=>o(c.target.value),placeholder:"Describe when to use this tag...",rows:2,disabled:t})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(It,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[m.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(It,{variant:"secondary",size:"sm",onClick:l,disabled:t||!a.trim(),type:"button",children:[t&&m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(kf,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Tag"]})]})]})},MNe=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:a,onDelete:i})=>{const s=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&i(o.id,o.name)};return m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs(hm,{children:[m.jsx(pm,{children:m.jsxs(Jr,{children:[m.jsx(Ar,{children:"Name"}),m.jsx(Ar,{children:"Description"}),m.jsx(Ar,{children:"Linked Rules"}),m.jsx(Ar,{className:"text-right",children:"Actions"})]})}),m.jsx(mm,{children:n?m.jsxs(m.Fragment,{children:[m.jsx(Jr,{children:m.jsx(Pn,{colSpan:4,children:m.jsx(lr,{className:"h-10 w-full"})})}),m.jsx(Jr,{children:m.jsx(Pn,{colSpan:4,children:m.jsx(lr,{className:"h-10 w-full"})})})]}):e.length===0?m.jsx(Jr,{children:m.jsx(Pn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],c=t.get(o.id)||[];return m.jsxs(Jr,{children:[m.jsx(Pn,{className:"font-medium",children:o.name}),m.jsx(Pn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),m.jsx(Pn,{className:"text-xs",children:c.length>0?c.map(d=>d.name).join(", "):"None"}),m.jsxs(Pn,{className:"text-right space-x-1",children:[m.jsx(On,{tooltipText:"Edit Tag & Rules",onClick:()=>a(o),disabled:l,icon:m.jsx(vy,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),m.jsx(On,{tooltipText:"Delete Tag",onClick:()=>s(o),disabled:l,icon:l?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},ONe=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:a=!1})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(""),c=T.useMemo(()=>[...t].sort((v,b)=>v.name.localeCompare(b.name)),[t]),d=T.useMemo(()=>{const v=o.toLowerCase();return v?c.filter(b=>b.name.toLowerCase().includes(v)||b.content.toLowerCase().includes(v)||b.type.toLowerCase().includes(v)):c},[c,o]),h=T.useCallback(v=>{const b=n.has(v);r(e.id,v,!b),l("")},[n,r,e.id]),p=T.useCallback((v,b)=>{b.stopPropagation(),r(e.id,v,!1)},[r,e.id]),g=T.useMemo(()=>c.filter(v=>n.has(v.id)),[c,n]);return m.jsxs("div",{className:"space-y-3",children:[m.jsxs(Gt,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),m.jsxs(jc,{open:i,onOpenChange:s,children:[m.jsx(Dc,{asChild:!0,children:m.jsxs(It,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between h-9",disabled:a||t.length===0,children:[m.jsx("span",{className:"truncate",children:g.length>0?`${g.length} rule(s) selected`:"Select rules..."}),m.jsx(y1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),m.jsx(Mc,{className:"w-[--radix-popover-trigger-width] p-0",children:m.jsxs(WH,{shouldFilter:!1,children:[m.jsx(KH,{placeholder:"Search rules...",value:o,onValueChange:l}),m.jsxs(ZH,{children:[m.jsx(YH,{children:t.length===0?"No rules defined.":"No rules found."}),m.jsx(XH,{children:d.map(v=>{const b=n.has(v.id);return m.jsxs(JH,{value:v.id,onSelect:()=>h(v.id),className:"cursor-pointer",children:[m.jsx(Ri,{className:xt("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),m.jsx("span",{className:"truncate",children:v.name}),m.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",v.type,")"]})]},v.id)})})]})]})})]}),g.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:g.map(v=>m.jsxs(Jg,{variant:"secondary",className:"flex items-center gap-1",children:[m.jsx("span",{className:"truncate",children:v.name}),m.jsx(It,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>p(v.id,b),disabled:a,"aria-label":`Unlink rule ${v.name}`,children:m.jsx(Ii,{className:"h-3 w-3"})})]},v.id))})]})},PNe=()=>{const{tags:e,rules:t,tagRuleLinks:n,addTag:r,updateTag:a,deleteTag:i,linkTagToRule:s,unlinkTagFromRule:o,getRulesForTag:l,isLoading:c}=Cc(dn(L=>({tags:L.tags,rules:L.rules,tagRuleLinks:L.tagRuleLinks,addTag:L.addTag,updateTag:L.updateTag,deleteTag:L.deleteTag,linkTagToRule:L.linkTagToRule,unlinkTagFromRule:L.unlinkTagFromRule,getRulesForTag:L.getRulesForTag,isLoading:L.isLoading}))),[d,h]=T.useState(!1),[p,g]=T.useState(null),[v,b]=T.useState(!1),[x,w]=T.useState({}),S=()=>{g(null),h(!0)},E=L=>{g(L),h(!0)},C=T.useCallback(()=>{h(!1),g(null),b(!1)},[]),k=T.useCallback(async L=>{b(!0);try{p?await a(p.id,L):await r(L),p||C()}catch{}finally{b(!1)}},[r,a,p,C]),j=T.useCallback(async L=>{w(H=>({...H,[L]:!0}));try{await i(L),(p==null?void 0:p.id)===L&&C()}catch{}finally{w(H=>({...H,[L]:!1}))}},[i,p,C]),I=T.useCallback(async(L,H,M)=>{try{M?await s(L,H):await o(L,H)}catch{}},[s,o]),N=T.useMemo(()=>{const L=new Map;return e.forEach(H=>{L.set(H.id,l(H.id))}),L},[e,l]),P=T.useMemo(()=>p?new Set(n.filter(L=>L.tagId===p.id).map(L=>L.ruleId)):new Set,[p,n]);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!d&&m.jsxs(It,{onClick:S,variant:"outline",className:"w-full",disabled:c,children:[m.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),d&&m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsx(DNe,{initialData:p??void 0,isSaving:v,onSave:k,onCancel:C}),p&&m.jsx(ONe,{tag:p,allRules:t,linkedRuleIds:P,onLinkChange:I,disabled:v})]}),m.jsx(fo,{}),m.jsxs("div",{className:"pt-4",children:[m.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),m.jsx(MNe,{tags:e,rulesByTagId:N,isLoading:c,isDeleting:x,onEdit:E,onDelete:j})]})]})},FNe=()=>{const e=T.useMemo(()=>[{value:"rules",label:"Rules",content:m.jsx(jNe,{})},{value:"tags",label:"Tags",content:m.jsx(PNe,{})}],[]);return m.jsx(md,{tabs:e,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},LNe=({label:e,colorKey:t,value:n,onChange:r})=>{const[a,i]=T.useState(n??"");T.useEffect(()=>{i(n??"")},[n]);const s=()=>{r(t,a.trim()||null)},o=l=>{i(l.target.value)};return m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Gt,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),m.jsx(Tn,{id:`color-${t}`,type:"text",value:a,onChange:o,onBlur:s,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),m.jsx(Tn,{type:"color",value:a!=null&&a.startsWith("#")?a:"#000000",onChange:l=>{i(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},jw=[{name:"Default Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css"},{name:"A11y Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css"},{name:"Atom Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-atom-dark.min.css"},{name:"Atelier Sulphurpool Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-base16-ateliersulphurpool.light.min.css"},{name:"CB",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-cb.min.css"},{name:"Coldark Cold",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-cold.min.css"},{name:"Coldark Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css"},{name:"Coy (No Shadow)",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coy-without-shadows.min.css"},{name:"Darcula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-darcula.min.css"},{name:"Dracula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-dracula.min.css"},{name:"Duotone Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-dark.min.css"},{name:"Duotone Earth",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-earth.min.css"},{name:"Duotone Forest",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-forest.min.css"},{name:"Duotone Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-light.min.css"},{name:"Duotone Sea",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-sea.min.css"},{name:"Duotone Space",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-space.min.css"},{name:"GH Colors",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css"},{name:"Gruvbox Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-dark.min.css"},{name:"Gruvbox Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css"},{name:"Holi",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-holi-theme.min.css"},{name:"Hopscotch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-hopscotch.min.css"},{name:"Lucario",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-lucario.min.css"},{name:"Material Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-dark.min.css"},{name:"Material Oceanic",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-oceanic.min.css"},{name:"Night Owl",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-night-owl.min.css"},{name:"Nord",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-nord.min.css"},{name:"One Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css"},{name:"One Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-light.min.css"},{name:"Pojoaque",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-pojoaque.min.css"},{name:"Shades of Purple",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-shades-of-purple.min.css"},{name:"Solarized Dark Atom",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-solarized-dark-atom.min.css"},{name:"Synthwave '84",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css"},{name:"VS",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vs.min.css"},{name:"VSC Dark Plus",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css"},{name:"Xonokai",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-xonokai.min.css"},{name:"Z-Touch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-z-touch.min.css"}],$Ne=()=>{const{theme:e,setTheme:t,prismThemeUrl:n,setPrismThemeUrl:r,customFontFamily:a,setCustomFontFamily:i,customFontSize:s,setCustomFontSize:o,chatMaxWidth:l,setChatMaxWidth:c,customThemeColors:d,setCustomThemeColor:h,resetThemeSettings:p}=hr(dn(N=>({theme:N.theme,setTheme:N.setTheme,prismThemeUrl:N.prismThemeUrl,setPrismThemeUrl:N.setPrismThemeUrl,customFontFamily:N.customFontFamily,setCustomFontFamily:N.setCustomFontFamily,customFontSize:N.customFontSize,setCustomFontSize:N.setCustomFontSize,chatMaxWidth:N.chatMaxWidth,setChatMaxWidth:N.setChatMaxWidth,customThemeColors:N.customThemeColors,setCustomThemeColor:N.setCustomThemeColor,resetThemeSettings:N.resetThemeSettings}))),[g,v]=T.useState(s??16),[b,x]=T.useState(jw.some(N=>N.url===n)?"":n??"");T.useEffect(()=>{v(s??16)},[s]),T.useEffect(()=>{jw.some(N=>N.url===n)?x(""):x(n??"")},[n]);const w=T.useCallback(N=>{o(N[0])},[o]),S=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&p()},E=N=>{r(N==="default"?null:N),N==="default"||!jw.some(L=>L.url===N)?x(N==="default"?"":N):x("")},C=N=>{const P=N.target.value.trim();x(P),r(P||null)},k=[{value:"max-w-3xl",label:"Very Small (3xl)"},{value:"max-w-4xl",label:"Small (4xl)"},{value:"max-w-5xl",label:"Medium (5xl)"},{value:"max-w-6xl",label:"Large (6xl)"},{value:"max-w-7xl",label:"Very Large (7xl)"},{value:"max-w-full",label:"Full Width"}],j=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}],I=n===null?"default":n;return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsx(zg,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(Gt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),m.jsxs(pl,{value:e??"system",onValueChange:N=>t(N),children:[m.jsx(gl,{id:"theme-select",className:"w-[180px]",children:m.jsx(ml,{placeholder:"Select theme"})}),m.jsxs(yl,{children:[m.jsx(da,{value:"light",children:"Default Light"}),m.jsx(da,{value:"dark",children:"Default Dark"}),m.jsx(da,{value:"system",children:"System"}),m.jsx(da,{value:"TijuLight",children:"Tiju Light"}),m.jsx(da,{value:"TijuDark",children:"Tiju Dark"}),m.jsx(da,{value:"custom",children:"User Custom"})]})]})]})}),m.jsxs(zg,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"custom-font-family",children:"Custom Font Family"}),m.jsx(Tn,{id:"custom-font-family",value:a??"",onChange:N=>i(N.target.value||null),placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"custom-font-size",children:["Base Font Size (",g,"px)"]}),m.jsx(cl,{id:"custom-font-size",min:12,max:20,step:1,value:[g],onValueChange:N=>v(N[0]),onValueCommit:w}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"chat-max-width",children:"Chat Content Max Width"}),m.jsxs(pl,{value:l??"max-w-7xl",onValueChange:N=>c(N||null),children:[m.jsx(gl,{id:"chat-max-width",className:"w-full mt-1",children:m.jsx(ml,{placeholder:"Select max width"})}),m.jsx(yl,{children:k.map(N=>m.jsx(da,{value:N.value,children:N.label},N.value))})]}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),m.jsxs(zg,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-3",children:[m.jsx(Gt,{htmlFor:"prism-theme-select",children:"Select Theme or Enter URL"}),m.jsxs(pl,{value:I,onValueChange:E,children:[m.jsx(gl,{id:"prism-theme-select",className:"w-full",children:m.jsx(ml,{placeholder:"Select code theme..."})}),m.jsxs(yl,{children:[m.jsx(da,{value:"default",children:"Default (Matches Theme)"}),jw.map(N=>m.jsx(da,{value:N.url,children:N.name},N.url))]})]}),m.jsx(Tn,{id:"prism-theme-url-custom",type:"url",placeholder:"Or paste custom theme URL here...",value:b,onChange:C,className:"mt-1"}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a preset theme or paste a URL to a PrismJS CSS file. Leave blank or select 'Default' to use themes matching light/dark mode."})]}),m.jsx(zg,{title:"Custom Theme Colors",description:"Define custom colors. Applies only when 'User Custom' theme is selected. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:j.map(({key:N,label:P})=>m.jsx(LNe,{label:P,colorKey:N,value:d==null?void 0:d[N],onChange:h},N))})}),m.jsx(fo,{}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsxs(It,{variant:"outline",size:"sm",onClick:S,children:[m.jsx(SA,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]})})]})},BNe=gt.memo($Ne),Wq=T.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=hr(dn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=uy(dn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=bs(dn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[s,o]=T.useState(a||"general");T.useEffect(()=>{e&&o(a||"general")},[e,a]);const l=h=>{h||(t(),i())},c=h=>{o(h)},d=T.useMemo(()=>{const h=[{value:"general",label:"General",content:m.jsx(vTe,{})},{value:"theme",label:"Theme",content:m.jsx(BNe,{})},{value:"providers",label:"Providers & Models",content:m.jsx(SNe,{})},...n?[{value:"assistant",label:"Assistant",content:m.jsx(qTe,{})}]:[],{value:"rules-tags",label:"Rules & Tags",content:m.jsx(FNe,{})},{value:"git",label:"Git",content:m.jsx(NNe,{})},{value:"data",label:"Data",content:m.jsx(QTe,{})},{value:"mods",label:"Mods",content:m.jsx(nke,{})}],p=r.map(g=>({value:g.id,label:g.title,content:gt.isValidElement(g.component)?g.component:typeof g.component=="function"?m.jsx(g.component,{}):null}));return[...h,...p]},[n,r]);return m.jsx(F_,{open:e,onOpenChange:l,children:m.jsxs(L_,{className:xt("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[m.jsxs($_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[m.jsx(z_,{children:"Settings"}),m.jsx(U_,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),m.jsx(md,{tabs:d,initialValue:s,onValueChange:c,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),m.jsx(B_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:m.jsx(It,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});Wq.displayName="SettingsModalComponent";const zNe=Wq;function UNe(){const e=Ir.getState().registerChatControl,t=bs.getState().toggleChatControlPanel,n=bs.getState().setInitialSettingsTabs,r=()=>{const i=(s,o)=>{n(null,null),t("settingsModal",!0)};return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:m.jsx(kT,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"top",children:"Settings"})]})})},a=()=>{const i=bs.getState().isChatControlPanelOpen.settingsModal??!1,s=()=>t("settingsModal",!1);return m.jsx(zNe,{isOpen:i,onClose:s})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(r),iconRenderer:()=>gt.createElement(r),settingsRenderer:()=>gt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function VNe(){const e=Ir.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=bs.getState();return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?m.jsx(HY,{className:"h-4 w-4"}):m.jsx(UY,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(t),iconRenderer:()=>gt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}const HNe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=Oi(dn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),s=hr.getState(),[o,l]=T.useState(()=>Oi.getState());T.useEffect(()=>{const d=h=>{l(p=>({...p,...h.params}))};return Tt.on(Et.PROMPT_PARAMS_CHANGED,d),()=>{Tt.off(Et.PROMPT_PARAMS_CHANGED,d)}},[]);const c={temperature:o.temperature??null,setTemperature:e,topP:o.topP??null,setTopP:t,maxTokens:o.maxTokens??null,setMaxTokens:n,topK:o.topK??null,setTopK:r,presencePenalty:o.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:o.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:s.temperature,defaultTopP:s.topP,defaultMaxTokens:s.maxTokens,defaultTopK:s.topK,defaultPresencePenalty:s.presencePenalty,defaultFrequencyPenalty:s.frequencyPenalty};return m.jsx(LH,{...c})},qNe=()=>{const[e,t]=T.useState(()=>qn.getState().status==="streaming"),[n,r]=T.useState(!0);return T.useEffect(()=>{const a=o=>{t(o.status==="streaming")},i=o=>{var g;if(!o.modelId){r(!1);return}const{getSelectedModel:l}=zn.getState(),c=l(),d=((g=c==null?void 0:c.metadata)==null?void 0:g.supported_parameters)??[],h=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],p=hr.getState().enableAdvancedSettings;r(p&&d.some(v=>h.includes(v)))},s=o=>{o.key==="enableAdvancedSettings"&&i({modelId:zn.getState().selectedModelId})};return i({modelId:zn.getState().selectedModelId}),Tt.on(Et.INTERACTION_STATUS_CHANGED,a),Tt.on(Et.MODEL_SELECTION_CHANGED,i),Tt.on(Et.SETTINGS_CHANGED,s),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,a),Tt.off(Et.MODEL_SELECTION_CHANGED,i),Tt.off(Et.SETTINGS_CHANGED,s)}},[]),n?m.jsxs(jc,{children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(Dc,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:e,"aria-label":"Adjust Advanced Parameters",children:m.jsx(sX,{className:"h-4 w-4"})})})}),m.jsx(Yn,{side:"top",children:"Advanced Parameters"})]})}),m.jsx(Mc,{className:"w-auto p-0",align:"start",children:m.jsx(HNe,{})})]}):null};function GNe(){const e=Ir.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>gt.createElement(qNe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:s}=Oi.getState(),o=(c,d,h)=>{h!==null&&(c[d]=h)},l={};return o(l,"temperature",t),o(l,"top_p",n),o(l,"max_tokens",r),o(l,"top_k",a),o(l,"presence_penalty",i),o(l,"frequency_penalty",s),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const Kq=20,WNe=Kq*1024*1024,KNe=()=>{const e=T.useRef(null),t=mc.getState().addAttachedFile,[n,r]=T.useState(()=>qn.getState().status==="streaming"),[a,i]=T.useState(!0);T.useEffect(()=>{const c=h=>{r(h.status==="streaming")},d=h=>{var b,x;if(!h.modelId){i(!1);return}const{getSelectedModel:p}=zn.getState(),g=p(),v=(x=(b=g==null?void 0:g.metadata)==null?void 0:b.architecture)==null?void 0:x.input_modalities;i(!v||v.some(w=>w!=="text"))};return d({modelId:zn.getState().selectedModelId}),Tt.on(Et.INTERACTION_STATUS_CHANGED,c),Tt.on(Et.MODEL_SELECTION_CHANGED,d),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,c),Tt.off(Et.MODEL_SELECTION_CHANGED,d)}},[]);const s=T.useCallback(async c=>{const d=c.target.files;if(!d)return;const h=a;for(const p of Array.from(d)){if(p.size>WNe){Ge.error(`File "${p.name}" exceeds the ${Kq}MB limit.`);continue}const g=kA(p.name,p.type),v=p.type.startsWith("image/");if(!g&&!h){Ge.warning(`File "${p.name}" (${p.type}) cannot be uploaded. The current model only supports text input.`);continue}try{let b={};if(g)b.contentText=await p.text();else if(v){const x=new FileReader,w=new Promise((E,C)=>{x.onload=()=>E(x.result),x.onerror=k=>C(k)});x.readAsDataURL(p);const S=await w;S&&S.includes(",")?b.contentBase64=S.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${p.name}`)}else h&&console.log(`File type ${p.type} (Name: ${p.name}) not directly processed for content storage, but model supports non-text.`);t({source:"direct",name:p.name,type:p.type||"application/octet-stream",size:p.size,...b})}catch(b){console.error(`Error processing file ${p.name}:`,b),Ge.error(`Failed to process file "${p.name}": ${b instanceof Error?b.message:String(b)}`)}}c.target&&(c.target.value="")},[t,a]),o=()=>{var c;(c=e.current)==null||c.click()},l=a?"Attach Files (Text, Images, etc.)":"Attach Text Files";return m.jsxs(m.Fragment,{children:[m.jsx("input",{type:"file",ref:e,onChange:s,multiple:!0,className:"hidden",disabled:n}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{type:"button",variant:"ghost",size:"icon",onClick:o,disabled:n,className:"h-8 w-8","aria-label":l,children:m.jsx(_A,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"top",children:l})]})})]})},ZNe=()=>{const e=mc.getState().removeAttachedFile,[t,n]=T.useState(()=>mc.getState().attachedFilesMetadata),[r,a]=T.useState(()=>qn.getState().status==="streaming");return T.useEffect(()=>{const i=o=>{n(o.files)},s=o=>{a(o.status==="streaming")};return Tt.on(Et.ATTACHED_FILES_CHANGED,i),Tt.on(Et.INTERACTION_STATUS_CHANGED,s),()=>{Tt.off(Et.ATTACHED_FILES_CHANGED,i),Tt.off(Et.INTERACTION_STATUS_CHANGED,s)}},[]),t.length===0?null:m.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:t.map(i=>m.jsx(qN,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function YNe(){const e=Ir.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>gt.createElement(KNe),renderer:()=>gt.createElement(ZNe)}),console.log("[Function] Registered Core File Attachment Control")}const XNe=()=>{const{toggleVfsModal:e,isVfsModalOpen:t}=bs(dn(l=>({toggleVfsModal:l.toggleVfsModal,isVfsModalOpen:l.isVfsModalOpen}))),{enableVfs:n,selectedFileIds:r,nodes:a,clearSelection:i}=Co(dn(l=>({enableVfs:l.enableVfs,selectedFileIds:l.selectedFileIds,nodes:l.nodes,clearSelection:l.clearSelection}))),s=mc.getState().addAttachedFile,o=()=>{if(r.size===0){Ge.info("No files selected in VFS to attach.");return}let l=0;r.forEach(c=>{const d=a[c];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0&&(Ge.success(`Attached ${l} file(s) from VFS to the next prompt.`),i(),e(!1))};return n?m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:xt("h-8 w-8",t&&"bg-muted text-primary"),onClick:()=>e(),"aria-label":"Toggle Virtual File System",children:m.jsx(e5,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"top",children:"Virtual Filesystem"})]})}),r.size>0&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsxs(It,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:o,"aria-label":`Attach ${r.size} selected VFS file(s)`,children:[m.jsx(_A,{className:"h-4 w-4 mr-1"}),"Attach (",r.size,")"]})}),m.jsx(Yn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},Zq=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i,isMobile:s=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return s?m.jsxs("div",{className:"flex items-center gap-2 p-1",children:[m.jsx(ff,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),m.jsx(Tn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:i}),m.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[m.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Ri,{className:"h-4 w-4"})}),m.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:m.jsx(Ii,{className:"h-4 w-4"})})]})]}):m.jsxs(Jr,{className:"bg-muted/30",children:[m.jsx(Pn,{className:"px-2 py-1"}),m.jsx(Pn,{className:"px-2 py-1",children:m.jsx(ff,{className:"h-5 w-5 text-yellow-400"})}),m.jsx(Pn,{className:"py-1 px-2",colSpan:3,children:m.jsx(Tn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),m.jsx(Pn,{className:"text-right pr-4 py-1",children:m.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Ri,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"top",children:"Create (Enter)"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:m.jsx(Ii,{className:"h-4 w-4"})})}),m.jsx(Yn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var hA=["Enter"," "],JNe=["ArrowDown","PageUp","Home"],Yq=["ArrowUp","PageDown","End"],QNe=[...JNe,...Yq],eRe={ltr:[...hA,"ArrowRight"],rtl:[...hA,"ArrowLeft"]},tRe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gb="Menu",[gy,nRe,rRe]=S_(gb),[Vf,Q_]=vi(gb,[rRe,td,W_]),eS=td(),Xq=W_(),[aRe,Hf]=Vf(gb),[iRe,yb]=Vf(gb),Jq=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:s=!0}=e,o=eS(t),[l,c]=T.useState(null),d=T.useRef(!1),h=za(i),p=sm(a);return T.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),m.jsx(P1,{...o,children:m.jsx(aRe,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:c,children:m.jsx(iRe,{scope:t,onClose:T.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:s,children:r})})})};Jq.displayName=gb;var sRe="MenuAnchor",hI=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=eS(n);return m.jsx(Ey,{...a,...r,ref:t})});hI.displayName=sRe;var pI="MenuPortal",[oRe,Qq]=Vf(pI,{forceMount:void 0}),eG=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Hf(pI,t);return m.jsx(oRe,{scope:t,forceMount:n,children:m.jsx(Wa,{present:n||i.open,children:m.jsx(qp,{asChild:!0,container:a,children:r})})})};eG.displayName=pI;var Vs="MenuContent",[lRe,mI]=Vf(Vs),tG=T.forwardRef((e,t)=>{const n=Qq(Vs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Hf(Vs,e.__scopeMenu),s=yb(Vs,e.__scopeMenu);return m.jsx(gy.Provider,{scope:e.__scopeMenu,children:m.jsx(Wa,{present:r||i.open,children:m.jsx(gy.Slot,{scope:e.__scopeMenu,children:s.modal?m.jsx(cRe,{...a,ref:t}):m.jsx(uRe,{...a,ref:t})})})})}),cRe=T.forwardRef((e,t)=>{const n=Hf(Vs,e.__scopeMenu),r=T.useRef(null),a=An(t,r);return T.useEffect(()=>{const i=r.current;if(i)return T_(i)},[]),m.jsx(gI,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),uRe=T.forwardRef((e,t)=>{const n=Hf(Vs,e.__scopeMenu);return m.jsx(gI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),dRe=ju("MenuContent.ScrollLock"),gI=T.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...b}=e,x=Hf(Vs,n),w=yb(Vs,n),S=eS(n),E=Xq(n),C=nRe(n),[k,j]=T.useState(null),I=T.useRef(null),N=An(t,I,x.onContentChange),P=T.useRef(0),L=T.useRef(""),H=T.useRef(0),M=T.useRef(null),Z=T.useRef("right"),q=T.useRef(0),ue=v?cb:T.Fragment,ae=v?{as:dRe,allowPinchZoom:!0}:void 0,ee=ie=>{var Te,Ae;const B=L.current+ie,J=C().filter(Ee=>!Ee.disabled),Q=document.activeElement,ne=(Te=J.find(Ee=>Ee.ref.current===Q))==null?void 0:Te.textValue,he=J.map(Ee=>Ee.textValue),de=SRe(he,B,ne),Ie=(Ae=J.find(Ee=>Ee.textValue===de))==null?void 0:Ae.ref.current;(function Ee(Pe){L.current=Pe,window.clearTimeout(P.current),Pe!==""&&(P.current=window.setTimeout(()=>Ee(""),1e3))})(B),Ie&&setTimeout(()=>Ie.focus())};T.useEffect(()=>()=>window.clearTimeout(P.current),[]),E_();const X=T.useCallback(ie=>{var J,Q;return Z.current===((J=M.current)==null?void 0:J.side)&&CRe(ie,(Q=M.current)==null?void 0:Q.area)},[]);return m.jsx(lRe,{scope:n,searchRef:L,onItemEnter:T.useCallback(ie=>{X(ie)&&ie.preventDefault()},[X]),onItemLeave:T.useCallback(ie=>{var B;X(ie)||((B=I.current)==null||B.focus(),j(null))},[X]),onTriggerLeave:T.useCallback(ie=>{X(ie)&&ie.preventDefault()},[X]),pointerGraceTimerRef:H,onPointerGraceIntentChange:T.useCallback(ie=>{M.current=ie},[]),children:m.jsx(ue,{...ae,children:m.jsx(lb,{asChild:!0,trapped:a,onMountAutoFocus:qt(i,ie=>{var B;ie.preventDefault(),(B=I.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:m.jsx(Up,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:m.jsx(fq,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:j,onEntryFocus:qt(l,ie=>{w.isUsingKeyboardRef.current||ie.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(F1,{role:"menu","aria-orientation":"vertical","data-state":yG(x.open),"data-radix-menu-content":"",dir:w.dir,...S,...b,ref:N,style:{outline:"none",...b.style},onKeyDown:qt(b.onKeyDown,ie=>{const J=ie.target.closest("[data-radix-menu-content]")===ie.currentTarget,Q=ie.ctrlKey||ie.altKey||ie.metaKey,ne=ie.key.length===1;J&&(ie.key==="Tab"&&ie.preventDefault(),!Q&&ne&&ee(ie.key));const he=I.current;if(ie.target!==he||!QNe.includes(ie.key))return;ie.preventDefault();const Ie=C().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);Yq.includes(ie.key)&&Ie.reverse(),xRe(Ie)}),onBlur:qt(e.onBlur,ie=>{ie.currentTarget.contains(ie.target)||(window.clearTimeout(P.current),L.current="")}),onPointerMove:qt(e.onPointerMove,yy(ie=>{const B=ie.target,J=q.current!==ie.clientX;if(ie.currentTarget.contains(B)&&J){const Q=ie.clientX>q.current?"right":"left";Z.current=Q,q.current=ie.clientX}}))})})})})})})});tG.displayName=Vs;var fRe="MenuGroup",yI=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return m.jsx(an.div,{role:"group",...r,ref:t})});yI.displayName=fRe;var hRe="MenuLabel",nG=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return m.jsx(an.div,{...r,ref:t})});nG.displayName=hRe;var m1="MenuItem",v8="menu.itemSelect",tS=T.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=T.useRef(null),s=yb(m1,e.__scopeMenu),o=mI(m1,e.__scopeMenu),l=An(t,i),c=T.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(v8,{bubbles:!0,cancelable:!0});h.addEventListener(v8,g=>r==null?void 0:r(g),{once:!0}),ML(h,p),p.defaultPrevented?c.current=!1:s.onClose()}};return m.jsx(rG,{...a,ref:l,disabled:n,onClick:qt(e.onClick,d),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),c.current=!0},onPointerUp:qt(e.onPointerUp,h=>{var p;c.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:qt(e.onKeyDown,h=>{const p=o.searchRef.current!=="";n||p&&h.key===" "||hA.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});tS.displayName=m1;var rG=T.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,s=mI(m1,n),o=Xq(n),l=T.useRef(null),c=An(t,l),[d,h]=T.useState(!1),[p,g]=T.useState("");return T.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),m.jsx(gy.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:m.jsx(hq,{asChild:!0,...o,focusable:!r,children:m.jsx(an.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:qt(e.onPointerMove,yy(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:qt(e.onPointerLeave,yy(v=>s.onItemLeave(v))),onFocus:qt(e.onFocus,()=>h(!0)),onBlur:qt(e.onBlur,()=>h(!1))})})})}),pRe="MenuCheckboxItem",aG=T.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return m.jsx(cG,{scope:e.__scopeMenu,checked:n,children:m.jsx(tS,{role:"menuitemcheckbox","aria-checked":g1(n)?"mixed":n,...a,ref:t,"data-state":vI(n),onSelect:qt(a.onSelect,()=>r==null?void 0:r(g1(n)?!0:!n),{checkForDefaultPrevented:!1})})})});aG.displayName=pRe;var iG="MenuRadioGroup",[mRe,gRe]=Vf(iG,{value:void 0,onValueChange:()=>{}}),sG=T.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=za(r);return m.jsx(mRe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:m.jsx(yI,{...a,ref:t})})});sG.displayName=iG;var oG="MenuRadioItem",lG=T.forwardRef((e,t)=>{const{value:n,...r}=e,a=gRe(oG,e.__scopeMenu),i=n===a.value;return m.jsx(cG,{scope:e.__scopeMenu,checked:i,children:m.jsx(tS,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":vI(i),onSelect:qt(r.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,n)},{checkForDefaultPrevented:!1})})})});lG.displayName=oG;var bI="MenuItemIndicator",[cG,yRe]=Vf(bI,{checked:!1}),uG=T.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=yRe(bI,n);return m.jsx(Wa,{present:r||g1(i.checked)||i.checked===!0,children:m.jsx(an.span,{...a,ref:t,"data-state":vI(i.checked)})})});uG.displayName=bI;var bRe="MenuSeparator",dG=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return m.jsx(an.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});dG.displayName=bRe;var vRe="MenuArrow",fG=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=eS(n);return m.jsx(L1,{...a,...r,ref:t})});fG.displayName=vRe;var wRe="MenuSub",[Cje,hG]=Vf(wRe),Ug="MenuSubTrigger",pG=T.forwardRef((e,t)=>{const n=Hf(Ug,e.__scopeMenu),r=yb(Ug,e.__scopeMenu),a=hG(Ug,e.__scopeMenu),i=mI(Ug,e.__scopeMenu),s=T.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,c={__scopeMenu:e.__scopeMenu},d=T.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return T.useEffect(()=>d,[d]),T.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),m.jsx(hI,{asChild:!0,...c,children:m.jsx(rG,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":yG(n.open),...e,ref:hc(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:qt(e.onPointerMove,yy(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:qt(e.onPointerLeave,yy(h=>{var g,v;d();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const b=(v=n.content)==null?void 0:v.dataset.side,x=b==="right",w=x?-5:5,S=p[x?"left":"right"],E=p[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:S,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:S,y:p.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:qt(e.onKeyDown,h=>{var g;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||eRe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});pG.displayName=Ug;var mG="MenuSubContent",gG=T.forwardRef((e,t)=>{const n=Qq(Vs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Hf(Vs,e.__scopeMenu),s=yb(Vs,e.__scopeMenu),o=hG(mG,e.__scopeMenu),l=T.useRef(null),c=An(t,l);return m.jsx(gy.Provider,{scope:e.__scopeMenu,children:m.jsx(Wa,{present:r||i.open,children:m.jsx(gy.Slot,{scope:e.__scopeMenu,children:m.jsx(gI,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;s.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:qt(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:qt(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:qt(e.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),p=tRe[s.dir].includes(d.key);h&&p&&(i.onOpenChange(!1),(g=o.trigger)==null||g.focus(),d.preventDefault())})})})})})});gG.displayName=mG;function yG(e){return e?"open":"closed"}function g1(e){return e==="indeterminate"}function vI(e){return g1(e)?"indeterminate":e?"checked":"unchecked"}function xRe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function _Re(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function SRe(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=_Re(e,Math.max(i,0));a.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function ERe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],c=o.x,d=o.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-c)*(r-d)/(p-d)+c&&(a=!a)}return a}function CRe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ERe(n,t)}function yy(e){return t=>t.pointerType==="mouse"?e(t):void 0}var bG=Jq,vG=hI,wG=eG,xG=tG,_G=yI,SG=nG,EG=tS,CG=aG,TG=sG,kG=lG,AG=uG,NG=dG,RG=fG,IG=pG,jG=gG,wI="ContextMenu",[TRe,Tje]=vi(wI,[Q_]),Li=Q_(),[kRe,DG]=TRe(wI),MG=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[s,o]=T.useState(!1),l=Li(t),c=za(r),d=T.useCallback(h=>{o(h),c(h)},[c]);return m.jsx(kRe,{scope:t,open:s,onOpenChange:d,modal:i,children:m.jsx(bG,{...l,dir:a,open:s,onOpenChange:d,modal:i,children:n})})};MG.displayName=wI;var OG="ContextMenuTrigger",PG=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=DG(OG,n),s=Li(n),o=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),c=T.useRef(0),d=T.useCallback(()=>window.clearTimeout(c.current),[]),h=p=>{o.current={x:p.clientX,y:p.clientY},i.onOpenChange(!0)};return T.useEffect(()=>d,[d]),T.useEffect(()=>void(r&&d()),[r,d]),m.jsxs(m.Fragment,{children:[m.jsx(vG,{...s,virtualRef:l}),m.jsx(an.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:qt(e.onContextMenu,p=>{d(),h(p),p.preventDefault()}),onPointerDown:r?e.onPointerDown:qt(e.onPointerDown,Dw(p=>{d(),c.current=window.setTimeout(()=>h(p),700)})),onPointerMove:r?e.onPointerMove:qt(e.onPointerMove,Dw(d)),onPointerCancel:r?e.onPointerCancel:qt(e.onPointerCancel,Dw(d)),onPointerUp:r?e.onPointerUp:qt(e.onPointerUp,Dw(d))})]})});PG.displayName=OG;var ARe="ContextMenuPortal",FG=e=>{const{__scopeContextMenu:t,...n}=e,r=Li(t);return m.jsx(wG,{...r,...n})};FG.displayName=ARe;var LG="ContextMenuContent",$G=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=DG(LG,n),i=Li(n),s=T.useRef(!1);return m.jsx(xG,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&s.current&&o.preventDefault(),s.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!a.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$G.displayName=LG;var NRe="ContextMenuGroup",RRe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(_G,{...a,...r,ref:t})});RRe.displayName=NRe;var IRe="ContextMenuLabel",jRe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(SG,{...a,...r,ref:t})});jRe.displayName=IRe;var DRe="ContextMenuItem",BG=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(EG,{...a,...r,ref:t})});BG.displayName=DRe;var MRe="ContextMenuCheckboxItem",ORe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(CG,{...a,...r,ref:t})});ORe.displayName=MRe;var PRe="ContextMenuRadioGroup",FRe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(TG,{...a,...r,ref:t})});FRe.displayName=PRe;var LRe="ContextMenuRadioItem",$Re=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(kG,{...a,...r,ref:t})});$Re.displayName=LRe;var BRe="ContextMenuItemIndicator",zRe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(AG,{...a,...r,ref:t})});zRe.displayName=BRe;var URe="ContextMenuSeparator",zG=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(NG,{...a,...r,ref:t})});zG.displayName=URe;var VRe="ContextMenuArrow",HRe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(RG,{...a,...r,ref:t})});HRe.displayName=VRe;var qRe="ContextMenuSubTrigger",GRe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(IG,{...a,...r,ref:t})});GRe.displayName=qRe;var WRe="ContextMenuSubContent",KRe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return m.jsx(jG,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});KRe.displayName=WRe;function Dw(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var ZRe=MG,YRe=PG,XRe=FG,JRe=$G,QRe=BG,eIe=zG;function w8({...e}){return m.jsx(ZRe,{"data-slot":"context-menu",...e})}function x8({...e}){return m.jsx(YRe,{"data-slot":"context-menu-trigger",...e})}function _8({className:e,...t}){return m.jsx(XRe,{children:m.jsx(JRe,{"data-slot":"context-menu-content",className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function fs({className:e,inset:t,variant:n="default",...r}){return m.jsx(QRe,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:xt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function S8({className:e,...t}){return m.jsx(eIe,{"data-slot":"context-menu-separator",className:xt("bg-border -mx-1 my-1 h-px",e),...t})}const tIe=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:s,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:d,handleRename:h,handleDownload:p,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:x,handleGitPull:w,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const k=e.type==="folder",j=H=>{H.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(k?o(e):l(!n,e.id))},I=H=>{H.key==="Enter"?h():H.key==="Escape"&&d()},N=k?r?X8:ff:Y8,P=k?r?"text-green-400":"text-yellow-400":"text-blue-400",L=m.jsxs(Jr,{className:xt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!k&&"cursor-pointer"),onClick:j,onDoubleClick:()=>!i&&!t&&o(e),children:[m.jsx(Pn,{className:"px-2 py-1",children:m.jsx(dy,{checked:n,onCheckedChange:H=>l(!!H,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||k})}),m.jsx(Pn,{className:"px-2 py-1",children:m.jsx(N,{className:xt("h-5 w-5",P)})}),m.jsx(Pn,{className:"py-1 px-2",children:t?m.jsx(Tn,{ref:b,value:a,onChange:H=>v(H.target.value),onBlur:h,onKeyDown:I,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:H=>H.stopPropagation(),disabled:i}):m.jsx("span",{className:xt("truncate",k&&"cursor-pointer hover:underline"),title:e.name,onClick:H=>{k&&(H.stopPropagation(),o(e))},children:e.name})}),m.jsx(Pn,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?I0(e.size):""}),m.jsx(Pn,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),m.jsx(Pn,{className:"text-right pr-4 py-1",children:m.jsx("div",{className:xt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?m.jsxs(m.Fragment,{children:[m.jsx(On,{tooltipText:"Save (Enter)",onClick:H=>{H.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Ri,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),m.jsx(On,{tooltipText:"Cancel (Esc)",onClick:H=>{H.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:m.jsx(Ii,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):m.jsxs(m.Fragment,{children:[m.jsx(On,{tooltipText:"Rename",onClick:H=>{H.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||s,icon:m.jsx(qg,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),m.jsx(On,{tooltipText:k?"Download folder (.zip)":"Download file",onClick:H=>{H.stopPropagation(),p(e)},"aria-label":k?"Download folder as ZIP":"Download file",disabled:i,icon:m.jsx(of,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),m.jsx(On,{tooltipText:"Delete",onClick:H=>{H.stopPropagation(),g(e)},"aria-label":`Delete ${k?"folder":"file"}`,disabled:i,icon:m.jsx(Zi,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return k?m.jsxs(w8,{children:[m.jsx(x8,{disabled:t||i,asChild:!0,children:L}),m.jsxs(_8,{children:[m.jsx(fs,{onSelect:()=>o(e),disabled:t||i,children:"Open Folder"}),m.jsx(S8,{}),r?m.jsxs(m.Fragment,{children:[m.jsxs(fs,{onSelect:()=>w(e.path),disabled:i,children:[m.jsx(Q8,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),m.jsxs(fs,{onSelect:()=>S(e.path),disabled:i,children:[m.jsx(J8,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),m.jsxs(fs,{onSelect:()=>E(e.path),disabled:i,children:[m.jsx(wA,{className:"mr-2 h-4 w-4"}),"Git Push"]}),m.jsxs(fs,{onSelect:()=>C(e.path),disabled:i,children:[m.jsx(t5,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):m.jsxs(fs,{onSelect:()=>x(e.path),disabled:i,children:[m.jsx(Du,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),m.jsx(S8,{}),m.jsxs(fs,{onSelect:()=>c(e),disabled:i,children:[m.jsx(qg,{className:"mr-2 h-4 w-4"}),"Rename"]}),m.jsxs(fs,{onSelect:()=>p(e),disabled:i,children:[m.jsx(of,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),m.jsxs(fs,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[m.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):m.jsxs(w8,{children:[m.jsx(x8,{disabled:t||i,asChild:!0,children:L}),m.jsxs(_8,{children:[m.jsxs(fs,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),m.jsxs(fs,{onSelect:()=>c(e),disabled:i,children:[m.jsx(qg,{className:"mr-2 h-4 w-4"}),"Rename"]}),m.jsxs(fs,{onSelect:()=>p(e),disabled:i,children:[m.jsx(of,{className:"mr-2 h-4 w-4"}),"Download File"]}),m.jsxs(fs,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[m.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},nIe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:d,handleRename:h,cancelCreatingFolder:p,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:x,setNewFolderName:w,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:j,handleGitCommit:I,handleGitPush:N,handleGitStatus:P})=>{const L=T.useMemo(()=>e,[e]);return s&&e.length===0&&!r?m.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):m.jsx("div",{className:"relative h-full",children:m.jsxs(hm,{className:"w-full text-sm",children:[m.jsx(pm,{className:"sticky top-0 bg-card z-10",children:m.jsxs(Jr,{className:"hover:bg-card",children:[m.jsx(Ar,{className:"w-[40px] px-2"}),m.jsx(Ar,{className:"w-[40px] px-2"}),m.jsx(Ar,{children:"Name"}),m.jsx(Ar,{className:"w-[100px] text-right",children:"Size"}),m.jsx(Ar,{className:"w-[150px] text-right",children:"Modified"}),m.jsx(Ar,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),m.jsxs(mm,{children:[r&&m.jsx(Zq,{newFolderName:a,setNewFolderName:w,handleCreateFolder:g,cancelCreatingFolder:p,newFolderInputRef:E,isOperationLoading:s}),L.map(H=>{const M=t===H.path,Z=i.has(H.id),q=C[H.path]??!1;return m.jsx(tIe,{entry:H,isEditingThis:M,isChecked:Z,isGitRepo:q,newName:M?n:"",isOperationLoading:s,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:x,renameInputRef:S,handleGitInit:k,handleGitPull:j,handleGitCommit:I,handleGitPush:N,handleGitStatus:P},H.id)}),e.length===0&&!r&&!s&&m.jsx(Jr,{children:m.jsx(Pn,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},rIe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:s,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:c,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:p,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:x,archiveInputRef:w,handleFileChange:S,handleArchiveChange:E})=>m.jsxs(m.Fragment,{children:[m.jsx("input",{type:"file",ref:b,onChange:S,className:"hidden",multiple:!0,disabled:t}),m.jsx("input",{type:"file",ref:x,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),m.jsx("input",{type:"file",ref:w,onChange:E,className:"hidden",accept:".zip",disabled:t}),m.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[m.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:m.jsx(RY,{className:"h-4 w-4"})}),m.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:m.jsx(bY,{className:"h-4 w-4"})}),m.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),m.jsx("div",{className:"flex-grow"}),m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",m.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(b1,{className:"h-4 w-4"})}),m.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(vA,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),m.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(K8,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),m.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(ff,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),m.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),p()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(nY,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),m.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(Du,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),m.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(_Z,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),UG=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:s,isSubmitting:o,submitDisabled:l=!1,className:c,contentClassName:d})=>{const h=async p=>{p==null||p.preventDefault(),!(o||l)&&await s()};return m.jsx(F_,{open:e,onOpenChange:t,children:m.jsxs(L_,{className:xt(c),children:[m.jsxs($_,{children:[m.jsx(z_,{children:n}),r&&m.jsx(U_,{children:r})]}),m.jsx("div",{className:xt("py-4",d),children:a}),m.jsxs(B_,{children:[m.jsx(WCe,{asChild:!0,children:m.jsx(It,{variant:"outline",disabled:o,children:"Cancel"})}),m.jsxs(It,{onClick:h,disabled:o||l,children:[o&&m.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":i]})]})]})})},aIe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:s,onSubmitClone:o,currentPath:l})=>m.jsx(UG,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:m.jsxs(m.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",m.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:s,submitDisabled:!n.trim(),children:m.jsxs("div",{className:"grid gap-4",children:[m.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[m.jsx(Gt,{htmlFor:"clone-url",className:"text-right",children:"URL"}),m.jsx(Tn,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:s})]}),m.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[m.jsx(Gt,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),m.jsx(Tn,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:s})]})]})}),iIe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:s})=>m.jsx(UG,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:m.jsxs(m.Fragment,{children:["Enter a commit message for the changes in ",m.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:s,isSubmitting:i,submitDisabled:!r.trim(),children:m.jsx("div",{className:"grid gap-4",children:m.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[m.jsx(Gt,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),m.jsx(Tn,{id:"commit-msg",value:r,onChange:o=>a(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})});var nS="DropdownMenu",[sIe,kje]=vi(nS,[Q_]),$i=Q_(),[oIe,VG]=sIe(nS),HG=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=$i(t),c=T.useRef(null),[d,h]=_o({prop:a,defaultProp:i??!1,onChange:s,caller:nS});return m.jsx(oIe,{scope:t,triggerId:Va(),triggerRef:c,contentId:Va(),open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(p=>!p),[h]),modal:o,children:m.jsx(bG,{...l,open:d,onOpenChange:h,dir:r,modal:o,children:n})})};HG.displayName=nS;var qG="DropdownMenuTrigger",GG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=VG(qG,n),s=$i(n);return m.jsx(vG,{asChild:!0,...s,children:m.jsx(an.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:hc(t,i.triggerRef),onPointerDown:qt(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:qt(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});GG.displayName=qG;var lIe="DropdownMenuPortal",WG=e=>{const{__scopeDropdownMenu:t,...n}=e,r=$i(t);return m.jsx(wG,{...r,...n})};WG.displayName=lIe;var KG="DropdownMenuContent",ZG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=VG(KG,n),i=$i(n),s=T.useRef(!1);return m.jsx(xG,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:qt(e.onCloseAutoFocus,o=>{var l;s.current||(l=a.triggerRef.current)==null||l.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:qt(e.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!a.modal||d)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZG.displayName=KG;var cIe="DropdownMenuGroup",uIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(_G,{...a,...r,ref:t})});uIe.displayName=cIe;var dIe="DropdownMenuLabel",fIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(SG,{...a,...r,ref:t})});fIe.displayName=dIe;var hIe="DropdownMenuItem",YG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(EG,{...a,...r,ref:t})});YG.displayName=hIe;var pIe="DropdownMenuCheckboxItem",mIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(CG,{...a,...r,ref:t})});mIe.displayName=pIe;var gIe="DropdownMenuRadioGroup",yIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(TG,{...a,...r,ref:t})});yIe.displayName=gIe;var bIe="DropdownMenuRadioItem",vIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(kG,{...a,...r,ref:t})});vIe.displayName=bIe;var wIe="DropdownMenuItemIndicator",xIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(AG,{...a,...r,ref:t})});xIe.displayName=wIe;var _Ie="DropdownMenuSeparator",XG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(NG,{...a,...r,ref:t})});XG.displayName=_Ie;var SIe="DropdownMenuArrow",EIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(RG,{...a,...r,ref:t})});EIe.displayName=SIe;var CIe="DropdownMenuSubTrigger",TIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(IG,{...a,...r,ref:t})});TIe.displayName=CIe;var kIe="DropdownMenuSubContent",AIe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$i(n);return m.jsx(jG,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});AIe.displayName=kIe;var NIe=HG,RIe=GG,IIe=WG,jIe=ZG,DIe=YG,MIe=XG;function OIe({...e}){return m.jsx(NIe,{"data-slot":"dropdown-menu",...e})}function PIe({...e}){return m.jsx(RIe,{"data-slot":"dropdown-menu-trigger",...e})}function FIe({className:e,sideOffset:t=4,...n}){return m.jsx(IIe,{children:m.jsx(jIe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Xo({className:e,inset:t,variant:n="default",...r}){return m.jsx(DIe,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:xt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function E8({className:e,...t}){return m.jsx(MIe,{"data-slot":"dropdown-menu-separator",className:xt("bg-border -mx-1 my-1 h-px",e),...t})}const LIe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:d,handleRename:h,cancelCreatingFolder:p,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:x,setNewFolderName:w,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:j,handleGitCommit:I,handleGitPush:N,handleGitStatus:P})=>{const L=H=>{H.key==="Enter"?h():H.key==="Escape"&&d()};return s&&e.length===0&&!r?m.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):m.jsxs("div",{className:"p-2 space-y-1",children:[r&&m.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:m.jsx(Zq,{newFolderName:a,setNewFolderName:w,handleCreateFolder:g,cancelCreatingFolder:p,newFolderInputRef:E,isOperationLoading:s,isMobile:!0})}),e.map(H=>{const M=t===H.path,Z=i.has(H.id),q=C[H.path]??!1,ue=H.type==="folder",ae=ue?q?X8:ff:Y8,ee=ue?q?"text-green-400":"text-yellow-400":"text-blue-400";return m.jsxs("div",{className:xt("flex items-center justify-between p-2 border rounded-md",M&&"bg-muted ring-1 ring-primary",s&&"opacity-70 cursor-not-allowed",!M&&"hover:bg-muted/50",!M&&"cursor-pointer"),onClick:()=>{M||s||(ue?o(H):l(!Z,H.id))},children:[m.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!ue&&m.jsx(dy,{checked:Z,onCheckedChange:X=>l(!!X,H.id),"aria-label":`Select ${H.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:s,onClick:X=>X.stopPropagation()}),ue&&m.jsx("div",{className:"w-6 flex-shrink-0"}),m.jsx(ae,{className:xt("h-5 w-5 flex-shrink-0",ee)}),m.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[M?m.jsx(Tn,{ref:S,value:n,onChange:X=>x(X.target.value),onBlur:h,onKeyDown:L,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:X=>X.stopPropagation(),disabled:s}):m.jsx("span",{className:"text-sm font-medium truncate",title:H.name,children:H.name}),m.jsx("span",{className:"text-xs text-muted-foreground",children:H.type==="file"&&H.size!==void 0?I0(H.size):H.type==="folder"?q?"Git Repository":"Folder":""})]})]}),m.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:M?m.jsxs(m.Fragment,{children:[m.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:X=>{X.stopPropagation(),h()},disabled:s||!n.trim(),"aria-label":"Save name",children:s?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Ri,{className:"h-4 w-4"})}),m.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:X=>{X.stopPropagation(),d()},disabled:s,"aria-label":"Cancel edit",children:m.jsx(Ii,{className:"h-4 w-4"})})]}):m.jsxs(OIe,{children:[m.jsx(PIe,{asChild:!0,children:m.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:X=>X.stopPropagation(),disabled:s,"aria-label":"More actions",children:m.jsx(eY,{className:"h-4 w-4"})})}),m.jsxs(FIe,{align:"end",onClick:X=>X.stopPropagation(),children:[ue&&m.jsx(Xo,{onSelect:()=>o(H),children:"Open Folder"}),!ue&&m.jsxs(Xo,{onSelect:()=>l(!Z,H.id),children:[Z?"Deselect":"Select"," File"]}),m.jsxs(Xo,{onSelect:()=>c(H),children:[m.jsx(qg,{className:"mr-2 h-4 w-4"})," Rename"]}),m.jsxs(Xo,{onSelect:()=>v(H),children:[m.jsx(of,{className:"mr-2 h-4 w-4"})," Download"," ",ue?"as ZIP":""]}),ue&&m.jsx(E8,{}),ue&&q&&m.jsxs(m.Fragment,{children:[m.jsxs(Xo,{onSelect:()=>j(H.path),children:[m.jsx(Q8,{className:"mr-2 h-4 w-4"})," Git Pull"]}),m.jsxs(Xo,{onSelect:()=>I(H.path),children:[m.jsx(J8,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),m.jsxs(Xo,{onSelect:()=>N(H.path),children:[m.jsx(wA,{className:"mr-2 h-4 w-4"})," Git Push"]}),m.jsxs(Xo,{onSelect:()=>P(H.path),children:[m.jsx(t5,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),ue&&!q&&m.jsxs(Xo,{onSelect:()=>k(H.path),children:[m.jsx(Du,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),m.jsx(E8,{}),m.jsxs(Xo,{className:"text-red-600 focus:text-red-600",onSelect:()=>b(H),children:[m.jsx(Zi,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},H.id)}),e.length===0&&!r&&!s&&m.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},xI=T.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:s,createDirectory:o,uploadFiles:l,deleteNodes:c,renameNode:d,setCurrentPath:h,rootId:p,selectFile:g,deselectFile:v,selectedFileIds:b,vfsKey:x,configuredVfsKey:w,initializingKey:S,_setError:E,_setOperationLoading:C,findNodeByPath:k,initializeVFS:j}=Co(dn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[I,N]=T.useState(""),[P,L]=T.useState(null),[H,M]=T.useState(!1),[Z,q]=T.useState(""),[ue,ae]=T.useState({}),[ee,X]=T.useState(!1),[ie,B]=T.useState(""),[J,Q]=T.useState(""),[ne,he]=T.useState(!1),[de,Ie]=T.useState(!1),[Te,Ae]=T.useState(null),[Ee,Pe]=T.useState(""),[Qe,Le]=T.useState(!1),[je,z]=T.useState({}),Se=T.useRef(null),Ne=T.useRef(null),fe=T.useRef(null),se=T.useRef(null),te=T.useRef(null),xe=n?e[n]:null,Fe=xe?xe.path:"/",We=(t[n||p||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,Rt)=>ut.type==="folder"&&Rt.type==="file"?-1:ut.type==="file"&&Rt.type==="folder"?1:ut.name.localeCompare(Rt.name)),Nt=T.useMemo(()=>We.filter(ut=>ut.type==="folder").map(ut=>ut.path),[We]),it=r||S!==null||x!==w,St=a||ne||Qe||Object.values(je).some(Boolean);T.useEffect(()=>{n!==null&&!t[n]&&!it&&w===x?s(n):n===null&&p&&!t[p]&&!it&&w===x&&s(p)},[n,t,p,it,s,w,x]),T.useEffect(()=>{var ut,Rt;P&&((ut=se.current)==null||ut.focus(),(Rt=se.current)==null||Rt.select())},[P]),T.useEffect(()=>{var ut;H&&((ut=te.current)==null||ut.focus())},[H]),T.useEffect(()=>{(async()=>{if(it||Nt.length===0)return;const Rt={};let Lt=!1;for(const en of Nt)try{const Rn=await Kfe(en);ue[en]!==Rn&&(Rt[en]=Rn,Lt=!0)}catch(Rn){console.error(`Error checking git status for ${en}:`,Rn),ue[en]!==!1&&(Rt[en]=!1,Lt=!0)}Lt&&ae(en=>({...en,...Rt}))})()},[Nt,it,ue]);const Ft=T.useCallback(async(ut,Rt)=>{if(!(St||it)){Rt!==!1&&C(!0),E(null);try{await ut()}catch(Lt){console.error("[FileManager Operation Error]:",Lt)}finally{Rt!==!1&&C(!1)}}},[St,it,E,C]),Mt=T.useCallback(ut=>{St||it||P||ut.type==="folder"&&Ft(()=>h(ut.path),!1)},[St,it,P,h,Ft]),Zt=T.useCallback(()=>{if(St||it||Fe==="/")return;const ut=My(Fe);Ft(()=>h(ut),!1)},[St,it,Fe,h,Ft]),be=T.useCallback(()=>{St||it||Fe==="/"||Ft(()=>h("/"),!1)},[St,it,Fe,h,Ft]),D=T.useCallback(()=>{it||Ft(()=>s(n),!1)},[Ft,s,n,it]),W=T.useCallback((ut,Rt)=>{const Lt=e[Rt];Lt&&Lt.type==="file"?ut?g(Rt):v(Rt):Lt&&Lt.type==="folder"&&Ge.info("Folders cannot be attached to the prompt.")},[g,v,e]),pe=T.useCallback(ut=>{St||it||H||(L(ut.path),N(ut.name),M(!1))},[St,it,H]),De=T.useCallback(()=>{L(null),N("")},[]),ve=T.useCallback(async()=>{if(!P||!I.trim()){De();return}const ut=k(P);ut&&ut.name!==I.trim()&&await Ft(()=>d(ut.id,I.trim())),De()},[P,I,d,De,k,Ft]),ke=T.useCallback(()=>{St||it||P||(M(!0),q(""),L(null))},[St,it,P]),le=T.useCallback(()=>{M(!1),q("")},[]),ft=T.useCallback(async()=>{if(!Z.trim()){le();return}await Ft(()=>o(n,Z.trim())),le()},[Z,o,n,le,Ft]),vt=()=>{var ut;return(ut=Se.current)==null?void 0:ut.click()},F=()=>{var ut;return(ut=Ne.current)==null?void 0:ut.click()},Be=()=>{var ut;return(ut=fe.current)==null?void 0:ut.click()},nt=T.useCallback(async ut=>{const Rt=ut.target.files;Rt&&Rt.length>0&&(await Ft(()=>l(n,Rt)),ut.target&&(ut.target.value=""))},[l,n,Ft]),ye=T.useCallback(async ut=>{var Lt;const Rt=(Lt=ut.target.files)==null?void 0:Lt[0];Rt&&(await Ft(async()=>{await Xfe(Rt,Fe),await s(n)}),ut.target&&(ut.target.value=""))},[Fe,s,n,Ft]),Me=T.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ft(()=>c([ut.id]))},[c,Ft]),Ke=T.useCallback(async ut=>{await Ft(async()=>{ut.type==="file"?await Yfe(ut.path):await NO(`${ut.name}.zip`,ut.path)})},[Ft]),Dt=T.useCallback(async()=>{We.length!==0&&await Ft(async()=>{const ut=wa(Fe)||"root";await NO(`${ut}_export.zip`,Fe)})},[Fe,We.length,Ft]),ge=T.useCallback(async(ut,Rt)=>{if(!(je[ut]||it||a)){z(Lt=>({...Lt,[ut]:!0})),E(null);try{await Rt()}catch(Lt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Lt)}finally{z(Lt=>({...Lt,[ut]:!1}))}}},[E,je,it,a]),G=T.useCallback(ut=>{ge(ut,async()=>{await bB(ut),ae(Rt=>({...Rt,[ut]:!0}))})},[ge]),V=T.useCallback(ut=>{Ge.info("Pulling default branch (auth not implemented yet)..."),ge(ut,()=>u_(ut,"main"))},[ge]),K=T.useCallback(ut=>{Ae(ut),Pe(""),Ie(!0)},[]),me=T.useCallback(ut=>{Ge.info("Pushing default branch (auth not implemented yet)..."),ge(ut,()=>UN(ut,"main"))},[ge]),Re=T.useCallback(ut=>{ge(ut,()=>vB(ut))},[ge]),Ve=T.useCallback(()=>{B(""),Q(""),X(!0)},[]),pt=T.useCallback(async()=>{if(!ie.trim()){Ge.error("Repository URL cannot be empty.");return}he(!0),E(null);try{const ut=wa(ie.trim().replace(/\.git$/,""))||"cloned_repo",Rt=j0(Fe,ut);await yB(Rt,ie.trim(),J.trim()||void 0),X(!1),await D()}catch{}finally{he(!1)}},[ie,J,Fe,E,D]),Kt=T.useCallback(async()=>{if(!Te||!Ee.trim()){Ge.error("Commit message cannot be empty.");return}Le(!0),E(null);try{await zN(Te,Ee.trim()),Ie(!1)}catch{}finally{Le(!1)}},[Te,Ee,E]);return it?m.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[m.jsx(Mn,{className:"h-8 w-8 animate-spin mb-2"}),m.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&m.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!it?m.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[m.jsxs("p",{children:["Error loading filesystem: ",i]}),m.jsx(It,{variant:"outline",size:"sm",onClick:()=>j(x||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):m.jsxs("div",{className:xt("flex h-full flex-col bg-card text-card-foreground"),children:[m.jsx(rIe,{currentPath:Fe,isAnyLoading:St||it,isOperationLoading:a,entries:We,editingPath:P,creatingFolder:H,handleNavigateHome:be,handleNavigateUp:Zt,handleRefresh:D,startCreatingFolder:ke,handleUploadClick:vt,handleFolderUploadClick:F,handleArchiveUploadClick:Be,handleDownloadAll:Dt,handleCloneClick:Ve,fileInputRef:Se,folderInputRef:Ne,archiveInputRef:fe,handleFileChange:nt,handleArchiveChange:ye}),m.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:m.jsx(nIe,{entries:We,editingPath:P,newName:I,creatingFolder:H,newFolderName:Z,selectedFileIds:b,isOperationLoading:St,handleNavigate:Mt,handleCheckboxChange:W,startEditing:pe,cancelEditing:De,handleRename:ve,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Me,setNewName:N,setNewFolderName:q,renameInputRef:se,newFolderInputRef:te,gitRepoStatus:ue,handleGitInit:G,handleGitPull:V,handleGitCommit:K,handleGitPush:me,handleGitStatus:Re})}),m.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:m.jsx(LIe,{entries:We,editingPath:P,newName:I,creatingFolder:H,newFolderName:Z,selectedFileIds:b,isOperationLoading:St,handleNavigate:Mt,handleCheckboxChange:W,startEditing:pe,cancelEditing:De,handleRename:ve,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Me,setNewName:N,setNewFolderName:q,renameInputRef:se,newFolderInputRef:te,gitRepoStatus:ue,handleGitInit:G,handleGitPull:V,handleGitCommit:K,handleGitPush:me,handleGitStatus:Re})}),m.jsx(aIe,{isOpen:ee,onOpenChange:X,cloneRepoUrl:ie,setCloneRepoUrl:B,cloneBranch:J,setCloneBranch:Q,isCloning:ne,onSubmitClone:pt,currentPath:Fe}),m.jsx(iIe,{isOpen:de,onOpenChange:Ie,commitPath:Te,commitMessage:Ee,setCommitMessage:Pe,isCommitting:Qe,onSubmitCommit:Kt})]})});xI.displayName="FileManager";const $Ie=({vfsKey:e,selectedItemType:t})=>e==="orphan"?m.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[m.jsx(M4,{className:"h-4 w-4"}),m.jsxs("span",{children:[m.jsx("b",{children:"Shared VFS:"})," All chats ",m.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?m.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[m.jsx(M4,{className:"h-4 w-4"}),m.jsxs("span",{children:[m.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?m.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[m.jsx(ff,{className:"h-4 w-4"}),m.jsxs("span",{children:[m.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,BIe=()=>{const{isVfsModalOpen:e,toggleVfsModal:t}=bs(dn(d=>({isVfsModalOpen:d.isVfsModalOpen,toggleVfsModal:d.toggleVfsModal}))),{vfsKey:n,selectedFileIds:r,clearSelection:a,nodes:i}=Co(dn(d=>({vfsKey:d.vfsKey,selectedFileIds:d.selectedFileIds,clearSelection:d.clearSelection,nodes:d.nodes}))),s=mn(d=>d.selectedItemType),o=mc.getState().addAttachedFile,l=()=>{if(r.size===0){Ge.info("No files selected in VFS to attach.");return}let d=0;r.forEach(h=>{const p=i[h];p&&p.type==="file"&&(o({source:"vfs",name:p.name,type:p.mimeType||"application/octet-stream",size:p.size,path:p.path}),d++)}),d>0?(Ge.success(`Attached ${d} file(s) from VFS to the next prompt.`),a(),t(!1)):Ge.warning("No valid files were selected to attach.")},c=()=>{a(),t(!1)};return m.jsx(F_,{open:e,onOpenChange:c,children:m.jsxs(L_,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[m.jsxs($_,{className:"p-4 pb-2 border-b flex-shrink-0",children:[m.jsx(z_,{children:"Virtual Filesystem"}),m.jsx(U_,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),m.jsx($Ie,{vfsKey:n,selectedItemType:s})]}),m.jsx("div",{className:"flex-grow overflow-hidden",children:m.jsx(xI,{})}),m.jsxs(B_,{className:"p-4 pt-2 border-t flex-shrink-0",children:[m.jsx(It,{variant:"outline",onClick:c,children:"Close"}),m.jsxs(It,{onClick:l,disabled:r.size===0,children:[m.jsx(_A,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r.size,")"]})]})]})})};function zIe(){const e=Ir.getState().registerPromptControl,t=Ir.getState().registerChatControl;e({id:"core-vfs-prompt-trigger",show:()=>Co.getState().enableVfs,triggerRenderer:()=>gt.createElement(XNe)}),t({id:"core-vfs-modal-panel",panel:void 0,show:()=>bs.getState().isVfsModalOpen,renderer:()=>gt.createElement(BIe),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control (Prompt Trigger & Modal)")}const UIe=()=>{const{linkConversationToRepo:e,syncConversation:t}=mn(dn(L=>({linkConversationToRepo:L.linkConversationToRepo,syncConversation:L.syncConversation}))),[n,r]=T.useState(()=>mn.getState().selectedItemId),[a,i]=T.useState(()=>mn.getState().selectedItemType),[s,o]=T.useState(()=>mn.getState().syncRepos),[l,c]=T.useState(()=>mn.getState().conversationSyncStatus),[d,h]=T.useState(()=>qn.getState().status==="streaming"),[p,g]=T.useState(null),[v,b]=T.useState("idle"),[x,w]=T.useState(!1),[S,E]=T.useState(!1);T.useEffect(()=>{const L=ae=>{r(ae.selectedItemId),i(ae.selectedItemType)},H=()=>{o(mn.getState().syncRepos)},M=ae=>{c(ee=>({...ee,[ae.conversationId]:ae.status}))},Z=ae=>{h(ae.status==="streaming")},q=ae=>{ae.conversationId===n&&ae.updates.syncRepoId!==void 0&&g(ae.updates.syncRepoId)},ue=mn.getState();return r(ue.selectedItemId),i(ue.selectedItemType),o(ue.syncRepos),c(ue.conversationSyncStatus),Tt.on(Et.CONTEXT_CHANGED,L),Tt.on(Et.SYNC_REPO_CHANGED,H),Tt.on(Et.CONVERSATION_SYNC_STATUS_CHANGED,M),Tt.on(Et.INTERACTION_STATUS_CHANGED,Z),Tt.on(Et.CONVERSATION_UPDATED,q),()=>{Tt.off(Et.CONTEXT_CHANGED,L),Tt.off(Et.SYNC_REPO_CHANGED,H),Tt.off(Et.CONVERSATION_SYNC_STATUS_CHANGED,M),Tt.off(Et.INTERACTION_STATUS_CHANGED,Z),Tt.off(Et.CONVERSATION_UPDATED,q)}},[n]),T.useEffect(()=>{if(a==="conversation"&&n){const L=mn.getState().getConversationById(n);g((L==null?void 0:L.syncRepoId)??null),b(l[n]??"idle")}else g(null),b("idle")},[n,a,l]);const C=gt.useMemo(()=>new Map(s.map(L=>[L.id,L.name])),[s]),k=p?C.get(p):void 0,j=T.useCallback(async L=>{if(!n||a!=="conversation")return;w(!0),await e(n,L==="none"?null:L),w(!1)},[n,a,e]),I=T.useCallback(async()=>{!n||!p||(E(!0),await t(n),E(!1))},[n,p,t]),N=nH(v,k),P=!p||S||x||d||v==="syncing";return a!=="conversation"||s.length===0?null:m.jsxs(jc,{children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(Dc,{asChild:!0,children:m.jsx(It,{variant:p?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||x||S,"aria-label":"Configure Git Sync",children:v==="syncing"||S||x?m.jsx(Mn,{className:"h-4 w-4 animate-spin"}):m.jsx(Du,{className:"h-4 w-4"})})})}),m.jsx(Yn,{side:"top",children:p?`Sync Status: ${v}`:"Link to Sync Repo"})]})}),m.jsxs(Mc,{className:"w-64 p-4 space-y-3",align:"start",children:[m.jsx(Gt,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),m.jsxs(pl,{value:p??"none",onValueChange:j,disabled:x||S||d,children:[m.jsx(gl,{id:"sync-repo-select",className:"w-full h-9",children:m.jsx(ml,{placeholder:"Select repository..."})}),m.jsxs(yl,{children:[m.jsx(da,{value:"none",children:m.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map(L=>m.jsx(da,{value:L.id,children:L.name},L.id))]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",N||"Not Linked"]}),m.jsxs(It,{size:"sm",variant:"outline",onClick:I,disabled:P,className:"h-8",children:[S||v==="syncing"?m.jsx(Mn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(wA,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function VIe(){const e=Ir.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>gt.createElement(UIe)}),console.log("[Function] Registered Core Git Sync Control")}const HIe=U.object({path:U.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),qIe=U.object({path:U.string().describe("The path of the file to read within the VFS."),encoding:U.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),GIe=U.object({path:U.string().describe("The path where the file should be written."),content:U.string().describe("The content to write to the file."),encoding:U.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),WIe=U.object({path:U.string().describe("The path of the file or directory to delete."),recursive:U.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),KIe=U.object({path:U.string().describe("The path of the directory to create (including parents).")}),ZIe=U.object({oldPath:U.string().describe("The current path of the item to rename."),newName:U.string().describe("The new name for the item.")});function YIe(){const e=Ir.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:HIe},async({path:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};const d=ar(o||"/");try{const h=await VN(d,{fsInstance:c});return{success:!0,path:d,entries:h.map(p=>({name:p.name,type:p.isDirectory?"folder":"file",size:p.size,lastModified:p.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:qIe},async({path:o,encoding:l},c)=>{const d=c==null?void 0:c.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=ar(o);try{const p=await Uf(h,{fsInstance:d});let g;return l==="base64"?g=btoa(String.fromCharCode(...p)):g=new TextDecoder().decode(p),{success:!0,path:h,content:g,encoding:l}}catch(p){return{success:!1,path:h,error:p.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:GIe},async({path:o,content:l,encoding:c},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const p=ar(o);try{let g;if(c==="base64"){const v=atob(l),b=v.length,x=new Uint8Array(b);for(let w=0;w<b;w++)x[w]=v.charCodeAt(w);g=x}else g=l;return await d_(p,g,{fsInstance:h}),{success:!0,path:p}}catch(g){return{success:!1,path:p,error:g.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:WIe},async({path:o,recursive:l},c)=>{const d=c==null?void 0:c.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=ar(o);try{return await HN(h,l,{fsInstance:d}),{success:!0,path:h}}catch(p){return{success:!1,path:h,error:p.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:KIe},async({path:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};const d=ar(o);try{return await wB(d,{fsInstance:c}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:ZIe},async({oldPath:o,newName:l},c)=>{const d=c==null?void 0:c.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=ar(o),p=ar(h.substring(0,h.lastIndexOf("/"))||"/"),g=_l(p,l);try{return await _B(h,g,{fsInstance:d}),{success:!0,oldPath:h,newPath:g}}catch(v){return{success:!1,oldPath:h,newName:l,error:v.message}}}),console.log("[Function] Core VFS Tools Registered.")}const XIe=U.object({path:U.string().describe("The directory path within the VFS to initialize as a Git repository.")}),JIe=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to commit."),message:U.string().describe("The commit message.")}),QIe=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:U.string().optional().describe("The branch name to pull.")}),e3e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to push."),branch:U.string().optional().describe("The branch name to push.")}),t3e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to check status.")});function n3e(){const e=Ir.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:XIe},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await bB(s,{fsInstance:l}),{success:!0,message:`Repository initialized at ${s}`}}catch(c){return{success:!1,error:c.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:JIe},async({path:s,message:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};const d=hr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await zN(s,o,{fsInstance:c}),{success:!0,message:`Changes committed in ${s}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:QIe},async({path:s,branch:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};try{return await u_(s,o||"main",void 0,{fsInstance:c}),{success:!0,message:`Pulled changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:e3e},async({path:s,branch:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};try{return await UN(s,o||"main",void 0,{fsInstance:c}),{success:!0,message:`Pushed changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:t3e},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await vB(s,{fsInstance:l}),{success:!0,message:`Status checked for ${s}`}}catch(c){return{success:!1,error:c.message}}}),console.log("[Function] Core Git Tools Registered.")}const r3e=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:s})=>{const o=Ir(S=>S.tools),l=hr(S=>S.toolMaxSteps),[c,d]=T.useState(""),h=T.useMemo(()=>Object.entries(o).map(([S,{definition:E,modId:C}])=>({name:S,description:E.description??"No description provided.",modId:C})).sort((S,E)=>S.name.localeCompare(E.name)),[o]),p=T.useMemo(()=>{const S=c.trim().toLowerCase();return S?h.filter(E=>E.name.toLowerCase().includes(S)||E.description.toLowerCase().includes(S)||E.modId.toLowerCase().includes(S)):h},[h,c]),g=T.useCallback((S,E)=>{n(C=>{const k=new Set(C);return E?k.add(S):k.delete(S),k})},[n]),v=T.useCallback(S=>{n(()=>S?new Set(h.map(E=>E.name)):new Set)},[h,n]),b=S=>{const E=S.target.value;if(E===""){a(null);return}const C=parseInt(E,10);if(isNaN(C))a(null);else{const k=Math.max(1,Math.min(20,C));a(k)}},x=r===null?"":String(r),w=s!=="conversation"||!i;return m.jsxs("div",{className:xt("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[m.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),m.jsxs("div",{className:"relative",children:[m.jsx(yo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(Tn,{type:"search",placeholder:"Filter tools...",value:c,onChange:S=>d(S.target.value),className:"pl-8 h-9",disabled:w})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs(Gt,{className:"text-xs text-muted-foreground",children:[p.length," tools shown (",t.size," enabled)"]}),m.jsxs("div",{className:"space-x-2",children:[m.jsx(It,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:w||h.length===0,children:"Enable All"}),m.jsx(It,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:w||h.length===0||t.size===0,children:"Disable All"})]})]}),m.jsx(Xu,{className:"h-56 border rounded-md p-2 bg-background/50",children:w?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):p.length===0?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):m.jsx("div",{className:"space-y-1",children:p.map(S=>m.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[m.jsx(Ki,{id:`tool-switch-${S.name}`,checked:t.has(S.name),onCheckedChange:E=>g(S.name,E),className:"flex-shrink-0",disabled:w}),m.jsxs(Gt,{htmlFor:`tool-switch-${S.name}`,className:xt("text-sm font-normal flex-grow pl-2 space-y-0.5",w?"cursor-not-allowed":"cursor-pointer"),title:`${S.name} (from ${S.modId})`,children:[m.jsx("span",{className:"block font-medium",children:S.name}),m.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:S.description})]})]},S.name))})}),m.jsxs("div",{className:"pt-2",children:[m.jsx(Gt,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),m.jsx(Tn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:w}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let Nu=new Set,oc=null,Vg=()=>{};const a3e=()=>{const[e,t]=T.useState({enabledTools:Nu,maxStepsOverride:oc}),[n,r]=T.useState(e.maxStepsOverride),[a,i]=T.useState(!1),[s,o]=T.useState(()=>qn.getState().status==="streaming"),[l,c]=T.useState(!0),[d,h]=T.useState(()=>mn.getState().selectedItemType),[p,g]=T.useState(()=>mn.getState().selectedItemId),v=Object.keys(Ir.getState().tools).length;T.useEffect(()=>(Vg=E=>{const C=E({enabledTools:Nu,maxStepsOverride:oc});Nu=C.enabledTools,oc=C.maxStepsOverride,t(C)},t({enabledTools:Nu,maxStepsOverride:oc}),()=>{Vg=()=>{}}),[]),T.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),T.useEffect(()=>{const E=j=>{o(j.status==="streaming")},C=j=>{var L,H;if(!j.modelId){c(!1);return}const{getSelectedModel:I}=zn.getState(),N=I(),P=Object.keys(Ir.getState().tools).length>0;c(P&&(((H=(L=N==null?void 0:N.metadata)==null?void 0:L.supported_parameters)==null?void 0:H.includes("tools"))??!1))},k=j=>{h(j.selectedItemType),g(j.selectedItemId)};return C({modelId:zn.getState().selectedModelId}),k({selectedItemId:mn.getState().selectedItemId,selectedItemType:mn.getState().selectedItemType}),Tt.on(Et.INTERACTION_STATUS_CHANGED,E),Tt.on(Et.MODEL_SELECTION_CHANGED,C),Tt.on(Et.CONTEXT_CHANGED,k),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,E),Tt.off(Et.MODEL_SELECTION_CHANGED,C),Tt.off(Et.CONTEXT_CHANGED,k)}},[]);const b=E=>{i(E),!E&&n!==e.maxStepsOverride&&Vg(C=>({...C,maxStepsOverride:n}))},x=T.useCallback(E=>{Vg(C=>({...C,enabledTools:E(C.enabledTools)}))},[]),w=e.enabledTools.size>0||e.maxStepsOverride!==null,S=s||v===0||d!=="conversation";return l?m.jsxs(jc,{open:a,onOpenChange:b,children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(Dc,{asChild:!0,children:m.jsx(It,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:S,"aria-label":"Configure Tools",children:m.jsx(EA,{className:"h-4 w-4"})})})}),m.jsx(Yn,{side:"top",children:S?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),m.jsx(Mc,{className:"w-auto p-0",align:"start",children:m.jsx(r3e,{enabledTools:e.enabledTools,setEnabledTools:x,localMaxSteps:n,setLocalMaxSteps:r,conversationId:p,conversationType:d})})]}):null};function i3e(){const e=Ir.getState().registerPromptControl;Nu=new Set,oc=null,e({id:"core-tool-selector",triggerRenderer:()=>gt.createElement(a3e),getMetadata:()=>{if(Nu.size>0||oc!==null)return{enabledTools:Array.from(Nu),...oc!==null&&{maxSteps:oc}}},clearOnSubmit:()=>{Nu=new Set,oc=null,Vg(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}const s3e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:s})=>m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),m.jsx(pd,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:o=>t(o.target.value||null),rows:6,disabled:s,className:"mt-1"}),m.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:s||e===null,children:"Use Inherited/Default"})]}),m.jsxs("div",{children:[m.jsx(Gt,{children:"Default Model (Overrides Parent/Global)"}),m.jsx(q_,{value:n??i,onChange:r,disabled:s}),m.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:s||n===null,children:"Use Inherited/Default"})]})]}),o3e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:c,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:p,setLocalTemp:g,localTopP:v,setLocalTopP:b,localPresence:x,setLocalPresence:w,localFrequency:S,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:k,effectiveTopP:j,effectiveTopK:I,effectivePresencePenalty:N,effectiveFrequencyPenalty:P,isSaving:L})=>{const H=T.useCallback((Z,q)=>{const ue=q.target.value,ae=ue===""?null:parseInt(ue,10);(ue===""||!isNaN(ae)&&ae!==null)&&Z(ae)},[]),M=T.useCallback((Z,q)=>{Z(q[0])},[]);return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",p.toFixed(2),")"]}),m.jsx(cl,{id:"project-temperature",min:0,max:1,step:.01,value:[p],onValueChange:Z=>g(Z[0]),onValueCommit:Z=>M(t,Z),disabled:L}),m.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:L||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),m.jsx(cl,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:Z=>b(Z[0]),onValueCommit:Z=>M(i,Z),disabled:L}),m.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:L||a===null,children:["Use Inherited/Default (",(j==null?void 0:j.toFixed(2))??"N/A",")"]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),m.jsx(Tn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:Z=>H(r,Z),min:"1",className:"h-8 text-xs",disabled:L}),m.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:L||n===null,children:"Use Inherited/Default"})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),m.jsx(Tn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${I??"Default"}`,value:s??"",onChange:Z=>H(o,Z),min:"1",className:"h-8 text-xs",disabled:L}),m.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>o(null),disabled:L||s===null,children:"Use Inherited/Default"})]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",x.toFixed(2),")"]}),m.jsx(cl,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[x],onValueChange:Z=>w(Z[0]),onValueCommit:Z=>M(c,Z),disabled:L}),m.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c(null),disabled:L||l===null,children:["Use Inherited/Default (",(N==null?void 0:N.toFixed(2))??"N/A",")"]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),m.jsx(cl,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:Z=>E(Z[0]),onValueCommit:Z=>M(h,Z),disabled:L}),m.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:L||d===null,children:["Use Inherited/Default (",(P==null?void 0:P.toFixed(2))??"N/A",")"]})]})]})},l3e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var s;const i=((s=r.find(o=>o.id===n))==null?void 0:s.name)??"None";return m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),m.jsxs(pl,{value:e??"none",onValueChange:o=>t(o==="none"?null:o),disabled:a||r.length===0,children:[m.jsx(gl,{id:"project-sync-repo",children:m.jsx(ml,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),m.jsxs(yl,{children:[m.jsx(da,{value:"none",children:m.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(o=>m.jsx(da,{value:o.id,children:o.name},o.id))]})]}),m.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},c3e=({projectId:e})=>{const t=T.useMemo(()=>[{value:"manage",label:"Manage Files",content:m.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?m.jsx(xI,{}):m.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{children:"Project Filesystem Info"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),m.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",m.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),m.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[m.jsx(Gt,{className:"text-destructive",children:"Danger Zone"}),m.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return m.jsx(md,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:xt("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},u3e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=di(dn(Pe=>({getProjectById:Pe.getProjectById,updateProject:Pe.updateProject}))),i=di(Pe=>Pe.getEffectiveProjectSettings),s=mn(Pe=>Pe.syncRepos),o=hr(dn(Pe=>({globalSystemPrompt:Pe.globalSystemPrompt,temperature:Pe.temperature,maxTokens:Pe.maxTokens,topP:Pe.topP,topK:Pe.topK,presencePenalty:Pe.presencePenalty,frequencyPenalty:Pe.frequencyPenalty}))),l=zn(Pe=>Pe.selectedModelId),c=Co(Pe=>Pe.setVfsKey),[d,h]=T.useState(null),[p,g]=T.useState(null),[v,b]=T.useState(null),[x,w]=T.useState(null),[S,E]=T.useState(null),[C,k]=T.useState(null),[j,I]=T.useState(null),[N,P]=T.useState(null),[L,H]=T.useState(null),[M,Z]=T.useState(.7),[q,ue]=T.useState(1),[ae,ee]=T.useState(0),[X,ie]=T.useState(0),[B,J]=T.useState(!1),[Q,ne]=T.useState("prompt"),{project:he,effectiveSettings:de}=T.useMemo(()=>{const Pe=n?r(n):null,Qe=n?i(n):null;return{project:Pe,effectiveSettings:Qe}},[n,r,i]),Ie=T.useCallback(Pe=>{var Le;if(!Pe)return null;const Qe=r(Pe);return Qe?((Le=Qe.metadata)==null?void 0:Le.syncRepoId)!==void 0?Qe.metadata.syncRepoId:Ie(Qe.parentId):null},[r]),Te=n?Ie(n):null;T.useEffect(()=>{var Pe;e&&n&&he&&de?(c(n),h(he.systemPrompt??null),g(he.modelId??null),b(he.temperature??null),w(he.maxTokens??null),E(he.topP??null),k(he.topK??null),I(he.presencePenalty??null),P(he.frequencyPenalty??null),H(((Pe=he.metadata)==null?void 0:Pe.syncRepoId)??null),Z(de.temperature??o.temperature),ue(de.topP??o.topP??1),ee(de.presencePenalty??o.presencePenalty??0),ie(de.frequencyPenalty??o.frequencyPenalty??0),ne("prompt")):e||(c(null),h(null),g(null),b(null),w(null),E(null),k(null),I(null),P(null),H(null))},[e,n,he,de,o,c]),T.useEffect(()=>Z(v??(de==null?void 0:de.temperature)??o.temperature),[v,de,o.temperature]),T.useEffect(()=>ue(S??(de==null?void 0:de.topP)??o.topP??1),[S,de,o.topP]),T.useEffect(()=>ee(j??(de==null?void 0:de.presencePenalty)??o.presencePenalty??0),[j,de,o.presencePenalty]),T.useEffect(()=>ie(N??(de==null?void 0:de.frequencyPenalty)??o.frequencyPenalty??0),[N,de,o.frequencyPenalty]);const Ae=async()=>{if(!(!n||!he)){J(!0);try{const Pe=he.parentId?i(he.parentId):{systemPrompt:o.globalSystemPrompt,modelId:l,temperature:o.temperature,maxTokens:o.maxTokens,topP:o.topP,topK:o.topK,presencePenalty:o.presencePenalty,frequencyPenalty:o.frequencyPenalty},Qe=he.parentId?Ie(he.parentId):null,Le={},je={...he.metadata??{}};d!==Pe.systemPrompt?Le.systemPrompt=d:Le.systemPrompt=void 0,p!==Pe.modelId?Le.modelId=p:Le.modelId=void 0,v!==Pe.temperature?Le.temperature=v:Le.temperature=void 0,x!==Pe.maxTokens?Le.maxTokens=x:Le.maxTokens=void 0,S!==Pe.topP?Le.topP=S:Le.topP=void 0,C!==Pe.topK?Le.topK=C:Le.topK=void 0,j!==Pe.presencePenalty?Le.presencePenalty=j:Le.presencePenalty=void 0,N!==Pe.frequencyPenalty?Le.frequencyPenalty=N:Le.frequencyPenalty=void 0,L!==Qe?je.syncRepoId=L:delete je.syncRepoId,Le.metadata=je,await a(n,Le),Ge.success(`Project "${he.name}" settings updated.`),t()}catch(Pe){Ge.error("Failed to save project settings."),console.error("Failed to save project settings:",Pe)}finally{J(!1)}}},Ee=T.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:m.jsx(s3e,{systemPrompt:d,setSystemPrompt:h,modelId:p,setModelId:g,effectiveSystemPrompt:(de==null?void 0:de.systemPrompt)??o.globalSystemPrompt,effectiveModelId:(de==null?void 0:de.modelId)??l,isSaving:B})},{value:"params",label:"Parameters",content:m.jsx(o3e,{temperature:v,setTemperature:b,maxTokens:x,setMaxTokens:w,topP:S,setTopP:E,topK:C,setTopK:k,presencePenalty:j,setPresencePenalty:I,frequencyPenalty:N,setFrequencyPenalty:P,localTemp:M,setLocalTemp:Z,localTopP:q,setLocalTopP:ue,localPresence:ae,setLocalPresence:ee,localFrequency:X,setLocalFrequency:ie,effectiveTemperature:(de==null?void 0:de.temperature)??o.temperature,effectiveMaxTokens:(de==null?void 0:de.maxTokens)??o.maxTokens,effectiveTopP:(de==null?void 0:de.topP)??o.topP,effectiveTopK:(de==null?void 0:de.topK)??o.topK,effectivePresencePenalty:(de==null?void 0:de.presencePenalty)??o.presencePenalty,effectiveFrequencyPenalty:(de==null?void 0:de.frequencyPenalty)??o.frequencyPenalty,isSaving:B})},{value:"sync",label:"Sync",content:m.jsx(l3e,{syncRepoId:L,setSyncRepoId:H,effectiveSyncRepoId:Te,syncRepos:s,isSaving:B})},{value:"vfs",label:"Filesystem",content:m.jsx(c3e,{projectId:n,projectName:(he==null?void 0:he.name)??null,isSaving:B})}],[d,p,v,x,S,C,j,N,L,de,o,l,B,M,q,ae,X,Te,s,n,he==null?void 0:he.name]);return m.jsx(F_,{open:e,onOpenChange:t,children:m.jsxs(L_,{className:xt("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[m.jsxs($_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[m.jsxs(z_,{children:["Project Settings: ",he==null?void 0:he.name]}),m.jsx(U_,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),m.jsx(md,{tabs:Ee,initialValue:Q,onValueChange:ne,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),m.jsxs(B_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[m.jsx(It,{variant:"outline",onClick:t,disabled:B,children:"Cancel"}),m.jsxs(It,{onClick:Ae,disabled:B,children:[B&&m.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function d3e(){const e=Ir.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=bs.getState();return m.jsx(u3e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>gt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const f3e=()=>{const{selectedModelId:e,selectModel:t}=zn(dn(l=>({selectedModelId:l.selectedModelId,selectModel:l.selectModel}))),n=Oi(l=>l.setModelId),[r,a]=T.useState(()=>qn.getState().status==="streaming"),[i,s]=T.useState(e);T.useEffect(()=>{const l=h=>{a(h.status==="streaming")},c=h=>{s(h.modelId),n(h.modelId)},d=zn.getState().selectedModelId;return s(d),n(d),Tt.on(Et.INTERACTION_STATUS_CHANGED,l),Tt.on(Et.MODEL_SELECTION_CHANGED,c),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,l),Tt.off(Et.MODEL_SELECTION_CHANGED,c)}},[n]);const o=l=>{t(l),n(l)};return m.jsx(q_,{value:i,onChange:o,disabled:r})};function h3e(){const e=Ir.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>zn.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(f3e),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const p3e=({initialPromptValue:e,onPromptChange:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(!1),[s,o]=T.useState(null),[l,c]=T.useState(()=>qn.getState().status==="streaming");T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const v=C=>{c(C.status==="streaming")},b=(C,k)=>{var L;const{getConversationById:j}=mn.getState(),{getEffectiveProjectSettings:I}=di.getState(),N=hr.getState().globalSystemPrompt,P=k==="project"?C:k==="conversation"?((L=j(C))==null?void 0:L.projectId)??null:null;o(I(P).systemPrompt??N)},x=C=>{b(C.selectedItemId,C.selectedItemType)},w=C=>{var I;const k=mn.getState();(k.selectedItemType==="project"?k.selectedItemId:k.selectedItemType==="conversation"?((I=k.getConversationById(k.selectedItemId))==null?void 0:I.projectId)??null:null)===C.projectId&&b(k.selectedItemId,k.selectedItemType)},S=C=>{if(C.key==="globalSystemPrompt"){const k=mn.getState();b(k.selectedItemId,k.selectedItemType)}},E=mn.getState();return b(E.selectedItemId,E.selectedItemType),Tt.on(Et.INTERACTION_STATUS_CHANGED,v),Tt.on(Et.CONTEXT_CHANGED,x),Tt.on(Et.PROJECT_UPDATED,w),Tt.on(Et.SETTINGS_CHANGED,S),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,v),Tt.off(Et.CONTEXT_CHANGED,x),Tt.off(Et.PROJECT_UPDATED,w),Tt.off(Et.SETTINGS_CHANGED,S)}},[]);const d=T.useCallback(()=>{t(n.trim()),i(!1)},[n,t]),h=T.useCallback(()=>{r(""),t(""),i(!1)},[t]),p=v=>{v&&r(e),i(v)},g=e.trim().length>0;return m.jsxs(jc,{open:a,onOpenChange:p,children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(Dc,{asChild:!0,children:m.jsx(It,{variant:g?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:l,"aria-label":"Set System Prompt for Next Turn",children:m.jsx(mX,{className:"h-4 w-4"})})})}),m.jsx(Yn,{side:"top",children:g?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),m.jsxs(Mc,{className:"w-80 p-4 space-y-3",align:"start",children:[m.jsx(Gt,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),m.jsx(pd,{id:"turn-system-prompt",placeholder:`Inherited: ${(s==null?void 0:s.substring(0,50))||"Default"}${s&&s.length>50?"...":""}`,value:n,onChange:v=>r(v.target.value),rows:5,className:"text-sm"}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx(It,{variant:"outline",size:"sm",onClick:h,disabled:!n.trim(),children:"Clear Override"}),m.jsx(It,{size:"sm",onClick:d,children:"Set for Next Turn"})]})]})]})};let Mg="";function m3e(){const e=Ir.getState().registerPromptControl;Mg="";const t=n=>{Mg=n};e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>gt.createElement(p3e,{initialPromptValue:Mg,onPromptChange:t}),getMetadata:()=>{const n=Mg.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{Mg=""}}),console.log("[Function] Registered Core System Prompt Control")}const g3e=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=Oi(dn(w=>({structuredOutputJson:w.structuredOutputJson,setStructuredOutputJson:w.setStructuredOutputJson}))),[n,r]=T.useState(!1),[a,i]=T.useState(e??""),[s,o]=T.useState(""),[l,c]=T.useState([]),d=T.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),Ge.success("Structured output applied for next turn.")}catch{Ge.error("Invalid JSON format.")}},[a,t]),h=T.useCallback(()=>{i(""),t(null),r(!1),Ge.info("Structured output cleared.")},[t]),p=T.useCallback(()=>{if(!s.trim()){Ge.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const w={id:Date.now().toString(),name:s.trim(),json:a};c(S=>[...S,w]),o(""),Ge.success(`"${w.name}" saved to library.`)}catch{Ge.error("Cannot save invalid JSON to library.")}},[a,s]),g=T.useCallback(w=>{i(w.json),t(w.json),r(!1),Ge.success(`Loaded "${w.name}" from library.`)},[t]),v=T.useCallback(w=>{c(S=>S.filter(E=>E.id!==w)),Ge.info("Item removed from library.")},[]);T.useEffect(()=>{n&&i(e??"")},[n,e]);const b=[{value:"entry",label:"Entry",content:m.jsxs("div",{className:"space-y-3 p-1",children:[m.jsx(Gt,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),m.jsx(pd,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:w=>i(w.target.value),rows:8,className:"font-mono text-xs"}),m.jsxs("div",{className:"flex justify-between items-end gap-2",children:[m.jsxs("div",{className:"flex-grow space-y-1",children:[m.jsx(Gt,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),m.jsx(Tn,{id:"structured-output-name",value:s,onChange:w=>o(w.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),m.jsxs(It,{size:"sm",variant:"outline",onClick:p,disabled:!s.trim()||!a.trim(),className:"h-8",children:[m.jsx(kf,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),m.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[m.jsx(It,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),m.jsx(It,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:m.jsx("div",{className:"space-y-2 p-1",children:l.length===0?m.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(w=>m.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[m.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:w.name}),m.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[m.jsx(It,{size:"sm",variant:"outline",onClick:()=>g(w),className:"h-7 px-2 text-xs",children:"Use"}),m.jsx(It,{size:"icon",variant:"ghost",onClick:()=>v(w.id),className:"h-7 w-7 text-destructive",children:m.jsx(Zi,{className:"h-3.5 w-3.5"})})]})]},w.id))})}],x=!!e;return m.jsxs(jc,{open:n,onOpenChange:r,children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(Dc,{asChild:!0,children:m.jsx(It,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:m.jsx(Z8,{className:"h-4 w-4"})})})}),m.jsx(Yn,{side:"top",children:x?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),m.jsx(Mc,{className:"w-[450px] p-0",align:"start",children:m.jsx(md,{tabs:b,defaultValue:"entry"})})]})},y3e=()=>{const[e,t]=T.useState(!0);return T.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=zn.getState(),i=a(),s=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,o=Array.isArray(s)&&s.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${o}`),t(o)};return n({modelId:zn.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${Et.MODEL_SELECTION_CHANGED}`),Tt.on(Et.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),Tt.off(Et.MODEL_SELECTION_CHANGED,n)}},[]),e?m.jsx(g3e,{}):null};function b3e(){const e=Ir.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>gt.createElement(y3e),getParameters:()=>{const{structuredOutputJson:t}=Oi.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{Oi.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const JG=4,vT=e=>{let t=0;return e.forEach(n=>{var r,a,i,s;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(s=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||s.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/JG)},v3e=()=>{const[e,t]=T.useState(""),[n,r]=T.useState(0),[a,i]=T.useState([]),[s,o]=T.useState(null),[l,c]=T.useState(0);T.useEffect(()=>{const b=mc.getState(),x=zn.getState(),w=qn.getState();if(i(b.attachedFilesMetadata),o(x.selectedModelId),w.currentConversationId){const I=w.interactions.filter(N=>N.status==="COMPLETED");r(vT(I))}else r(0);const S=I=>{t(I.value)},E=I=>{i(I.files)},C=I=>{console.log(I),o(I.modelId)},k=()=>{const I=qn.getState();if(I.currentConversationId){const N=I.interactions.filter(P=>P.status==="COMPLETED");r(vT(N))}},j=()=>{const I=qn.getState();if(I.currentConversationId){const N=I.interactions.filter(P=>P.status==="COMPLETED");r(vT(N))}else r(0)};return Tt.on(Et.PROMPT_INPUT_CHANGE,S),Tt.on(Et.ATTACHED_FILES_CHANGED,E),Tt.on(Et.MODEL_SELECTION_CHANGED,C),Tt.on(Et.INTERACTION_COMPLETED,k),Tt.on(Et.CONTEXT_CHANGED,j),()=>{Tt.off(Et.PROMPT_INPUT_CHANGE,S),Tt.off(Et.ATTACHED_FILES_CHANGED,E),Tt.off(Et.MODEL_SELECTION_CHANGED,C),Tt.off(Et.INTERACTION_COMPLETED,k),Tt.off(Et.CONTEXT_CHANGED,j)}},[]),T.useEffect(()=>{var N;if(!s){c(0);return}const{dbProviderConfigs:b,dbApiKeys:x}=zn.getState(),{providerId:w,modelId:S}=Ac(s);if(!w||!S){c(0);return}const E=b.find(P=>P.id===w);if(!E){c(0);return}const C=x.find(P=>P.id===E.apiKeyId),k=$A(E,S,C==null?void 0:C.value),j=k==null?void 0:k.metadata,I=((N=j==null?void 0:j.top_provider)==null?void 0:N.context_length)??(j==null?void 0:j.context_length)??0;c(I)},[s]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:p}=T.useMemo(()=>{const b=new TextEncoder().encode(e).length,x=a.reduce((C,k)=>C+k.size,0),w=Math.ceil((b+x)/JG),S=n+w,E=l?Math.min(100,Math.round(S/l*100)):0;return{estimatedInputTokens:w,totalEstimatedTokens:S,contextPercentage:E}},[e,a,n,l]),g=T.useMemo(()=>p>85?"text-red-600 dark:text-red-500":p>70?"text-orange-500 dark:text-orange-400":p>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[p]);if(!s||l===0)return null;const v=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${p}%) [History: ${n}, Input: ${d}]`;return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:m.jsx(LZ,{className:xt("h-3 w-3 fill-current",g)})})}),m.jsx(Yn,{side:"top",children:v})]})})};function w3e(){const e=Ir.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>gt.createElement(v3e),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const x3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=p=>{i(p.status==="streaming")},h=p=>{var b,x;if(!p.modelId){o(!1);return}const{getSelectedModel:g}=zn.getState(),v=g();o(((x=(b=v==null?void 0:v.metadata)==null?void 0:b.supported_parameters)==null?void 0:x.includes("reasoning"))??!1)};return h({modelId:zn.getState().selectedModelId}),Tt.on(Et.INTERACTION_STATUS_CHANGED,d),Tt.on(Et.MODEL_SELECTION_CHANGED,h),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,d),Tt.off(Et.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,c=()=>{const d=l?null:!0;r(d),t(d)};return s?m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:c,disabled:a,"aria-label":l?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:m.jsx(by,{className:xt("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),m.jsx(Yn,{side:"top",children:l?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function _3e(){const e=Ir.getState().registerPromptControl,t=Oi.getState(),n=r=>{t.setReasoningEnabled(r)};e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>gt.createElement(x3e,{initialEnabled:t.reasoningEnabled,onToggle:n}),getParameters:()=>{const{reasoningEnabled:r}=Oi.getState();return r===!0?{reasoning:!0}:void 0},clearOnSubmit:()=>{t.setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const S3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=p=>{i(p.status==="streaming")},h=p=>{var x;if(!p.modelId){o(!1);return}const{getSelectedModel:g}=zn.getState(),v=g(),b=((x=v==null?void 0:v.metadata)==null?void 0:x.supported_parameters)??[];o(b.includes("web_search")||b.includes("web_search_options"))};return h({modelId:zn.getState().selectedModelId}),Tt.on(Et.INTERACTION_STATUS_CHANGED,d),Tt.on(Et.MODEL_SELECTION_CHANGED,h),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,d),Tt.off(Et.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,c=()=>{const d=l?null:!0;r(d),t(d)};return s?m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:c,disabled:a,"aria-label":l?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:m.jsx(yo,{className:xt("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),m.jsx(Yn,{side:"top",children:l?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function E3e(){const e=Ir.getState().registerPromptControl,t=Oi.getState(),n=r=>{t.setWebSearchEnabled(r)};e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>gt.createElement(S3e,{initialEnabled:t.webSearchEnabled,onToggle:n}),getParameters:()=>{const{webSearchEnabled:r}=Oi.getState();return r===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{t.setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const C3e=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r})=>{const{rules:a,tags:i,getRulesForTag:s}=Cc(dn(S=>({rules:S.rules,tags:S.tags,getRulesForTag:S.getRulesForTag}))),[o,l]=T.useState(""),[c,d]=T.useState(""),h=T.useMemo(()=>{const S=o.toLowerCase();return S?i.filter(E=>{var C;return E.name.toLowerCase().includes(S)||((C=E.description)==null?void 0:C.toLowerCase().includes(S))}):i},[i,o]),p=T.useMemo(()=>{const S=c.toLowerCase();return S?a.filter(E=>E.name.toLowerCase().includes(S)||E.content.toLowerCase().includes(S)||E.type.toLowerCase().includes(S)):a},[a,c]),g=T.useCallback((S,E)=>{n(S,E)},[n]),v=T.useCallback((S,E)=>{r(S,E)},[r]),b=()=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"relative",children:[m.jsx(yo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(Tn,{type:"search",placeholder:"Filter tags...",value:o,onChange:S=>l(S.target.value),className:"pl-8 h-9"})]}),m.jsx(Xu,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No tags defined.":"No tags match filter."}):m.jsx("div",{className:"space-y-1",children:h.map(S=>{const E=s(S.id);return m.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:m.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[m.jsx(dy,{id:`tag-activate-${S.id}`,checked:e.has(S.id),onCheckedChange:C=>g(S.id,!!C),className:"mt-0.5"}),m.jsxs(Gt,{htmlFor:`tag-activate-${S.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[m.jsx("span",{className:"block font-medium",children:S.name}),S.description&&m.jsx("span",{className:"block text-xs text-muted-foreground",children:S.description}),E.length>0&&m.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",E.map(C=>C.name).join(", ")]})]})]})},S.id)})})})]}),x=()=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"relative",children:[m.jsx(yo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(Tn,{type:"search",placeholder:"Filter rules...",value:c,onChange:S=>d(S.target.value),className:"pl-8 h-9"})]}),m.jsx(Xu,{className:"h-64 border rounded-md p-2 bg-background/50",children:p.length===0?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:a.length===0?"No rules defined.":"No rules match filter."}):m.jsx("div",{className:"space-y-1",children:p.map(S=>m.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:m.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[m.jsx(dy,{id:`rule-activate-${S.id}`,checked:t.has(S.id),onCheckedChange:E=>v(S.id,!!E),className:"mt-0.5"}),m.jsxs(Gt,{htmlFor:`rule-activate-${S.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[m.jsx("span",{className:"block font-medium",children:S.name}),m.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",S.type]}),m.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",S.content]})]})]})},S.id))})})]}),w=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:x()}];return m.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:m.jsx(md,{tabs:w,defaultValue:"tags"})})};let af=new Set,sf=new Set,Hg=()=>{};const T3e=()=>{const[e,t]=T.useState({activeTagIds:af,activeRuleIds:sf}),[n,r]=T.useState(!1),[a,i]=T.useState(()=>qn.getState().status==="streaming"),s=Cc(h=>h.rules.length>0||h.tags.length>0);T.useEffect(()=>(Hg=h=>{const p=h({activeTagIds:af,activeRuleIds:sf});af=p.activeTagIds,sf=p.activeRuleIds,t(p)},t({activeTagIds:af,activeRuleIds:sf}),()=>{Hg=()=>{}}),[]),T.useEffect(()=>{const h=p=>{i(p.status==="streaming")};return Tt.on(Et.INTERACTION_STATUS_CHANGED,h),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,h)}},[]);const o=T.useCallback((h,p)=>{Hg(g=>{const v=new Set(g.activeTagIds);return p?v.add(h):v.delete(h),{...g,activeTagIds:v}})},[]),l=T.useCallback((h,p)=>{Hg(g=>{const v=new Set(g.activeRuleIds);return p?v.add(h):v.delete(h),{...g,activeRuleIds:v}})},[]),c=e.activeTagIds.size>0||e.activeRuleIds.size>0,d=a||!s;return s?m.jsxs(jc,{open:n,onOpenChange:r,children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(Dc,{asChild:!0,children:m.jsx(It,{variant:c?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d,"aria-label":"Configure Rules & Tags for Next Turn",children:m.jsx(AT,{className:"h-4 w-4"})})})}),m.jsx(Yn,{side:"top",children:c?`Rules/Tags Active (${e.activeTagIds.size} tags, ${e.activeRuleIds.size} rules)`:"Activate Rules/Tags (Next Turn)"})]})}),m.jsx(Mc,{className:"w-auto p-0",align:"start",children:m.jsx(C3e,{activeTagIds:e.activeTagIds,activeRuleIds:e.activeRuleIds,onToggleTag:o,onToggleRule:l})})]}):null};function k3e(){const e=Ir.getState().registerPromptControl;af=new Set,sf=new Set,e({id:"core-rules-tags",status:()=>Cc.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(T3e),getMetadata:()=>{const t=Array.from(af),n=Array.from(sf);if(t.length>0||n.length>0)return{activeTagIds:t,activeRuleIds:n}},clearOnSubmit:()=>{af=new Set,sf=new Set,Hg(()=>({activeTagIds:new Set,activeRuleIds:new Set}))},show:()=>{const t=Cc.getState();return t.rules.length>0||t.tags.length>0}}),console.log("[Function] Registered Core Rules & Tags Control")}const A3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!1),l=hr(d=>d.autoTitleEnabled);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=p=>{i(p.status==="streaming")},h=()=>{const p=qn.getState(),g=p.currentConversationId!==null&&p.interactions.filter(v=>v.conversationId===p.currentConversationId).length===0;o(g),!g&&n&&c()};return h(),Tt.on(Et.INTERACTION_STATUS_CHANGED,d),Tt.on(Et.CONTEXT_CHANGED,h),Tt.on(Et.INTERACTION_COMPLETED,h),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,d),Tt.off(Et.CONTEXT_CHANGED,h),Tt.off(Et.INTERACTION_COMPLETED,h)}},[n]);const c=()=>{const d=!n;r(d),t(d)};return!l||!s?null:m.jsx(Gn,{delayDuration:100,children:m.jsxs(Kn,{children:[m.jsx(Zn,{asChild:!0,children:m.jsx(It,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:c,disabled:a,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:m.jsx(r5,{className:xt("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),m.jsx(Yn,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})})};let Og=!1;function N3e(){const e=Ir.getState().registerPromptControl;Og=!1;const t=n=>{Og=n};e({id:"core-auto-title",status:()=>"ready",triggerRenderer:()=>gt.createElement(A3e,{initialEnabled:Og,onToggle:t}),getMetadata:()=>Og?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{Og=!1}}),console.log("[Function] Registered Core Auto-Title Control")}const R3e=[DCe,VNe,UNe,d3e,h3e,N3e,w3e,_3e,E3e,YNe,zIe,k3e,m3e,i3e,GNe,b3e,VIe,YIe,n3e];function I3e(){return m.jsxs(NCe,{children:[m.jsx(kCe,{}),m.jsx(TCe,{}),m.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:m.jsx("main",{className:"flex-grow overflow-hidden",children:m.jsx(wCe,{controls:R3e})})})]})}UX();RK.createRoot(document.getElementById("root")).render(m.jsx(gt.StrictMode,{children:m.jsx(I3e,{})}));
