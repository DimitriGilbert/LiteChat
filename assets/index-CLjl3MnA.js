var vW=Object.defineProperty;var wW=(e,t,n)=>t in e?vW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ta=(e,t,n)=>wW(e,typeof t!="symbol"?t+"":t,n);function xW(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var B2={exports:{}},wg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xj;function _W(){if(Xj)return wg;Xj=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:s,ref:a!==void 0?a:null,props:i}}return wg.Fragment=t,wg.jsx=n,wg.jsxs=n,wg}var Jj;function SW(){return Jj||(Jj=1,B2.exports=_W()),B2.exports}var p=SW(),$2={exports:{}};function EW(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l8={exports:{}},pa=l8.exports={},el,tl;function hT(){throw new Error("setTimeout has not been defined")}function pT(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?el=setTimeout:el=hT}catch{el=hT}try{typeof clearTimeout=="function"?tl=clearTimeout:tl=pT}catch{tl=pT}})();function c8(e){if(el===setTimeout)return setTimeout(e,0);if((el===hT||!el)&&setTimeout)return el=setTimeout,setTimeout(e,0);try{return el(e,0)}catch{try{return el.call(null,e,0)}catch{return el.call(this,e,0)}}}function CW(e){if(tl===clearTimeout)return clearTimeout(e);if((tl===pT||!tl)&&clearTimeout)return tl=clearTimeout,clearTimeout(e);try{return tl(e)}catch{try{return tl.call(null,e)}catch{return tl.call(this,e)}}}var ac=[],ep=!1,Yd,Rw=-1;function TW(){!ep||!Yd||(ep=!1,Yd.length?ac=Yd.concat(ac):Rw=-1,ac.length&&u8())}function u8(){if(!ep){var e=c8(TW);ep=!0;for(var t=ac.length;t;){for(Yd=ac,ac=[];++Rw<t;)Yd&&Yd[Rw].run();Rw=-1,t=ac.length}Yd=null,ep=!1,CW(e)}}pa.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ac.push(new d8(e,t)),ac.length===1&&!ep&&c8(u8)};function d8(e,t){this.fun=e,this.array=t}d8.prototype.run=function(){this.fun.apply(null,this.array)};pa.title="browser";pa.browser=!0;pa.env={};pa.argv=[];pa.version="";pa.versions={};function kc(){}pa.on=kc;pa.addListener=kc;pa.once=kc;pa.off=kc;pa.removeListener=kc;pa.removeAllListeners=kc;pa.emit=kc;pa.prependListener=kc;pa.prependOnceListener=kc;pa.listeners=function(e){return[]};pa.binding=function(e){throw new Error("process.binding is not supported")};pa.cwd=function(){return"/"};pa.chdir=function(e){throw new Error("process.chdir is not supported")};pa.umask=function(){return 0};var kW=l8.exports;const da=EW(kW);var Bn={},Qj;function AW(){if(Qj)return Bn;Qj=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(V){return V===null||typeof V!="object"?null:(V=h&&V[h]||V["@@iterator"],typeof V=="function"?V:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function x(V,J,Q){this.props=V,this.context=J,this.refs=v,this.updater=Q||g}x.prototype.isReactComponent={},x.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},x.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function w(){}w.prototype=x.prototype;function _(V,J,Q){this.props=V,this.context=J,this.refs=v,this.updater=Q||g}var E=_.prototype=new w;E.constructor=_,b(E,x.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function j(V,J,Q,ne,he,de){return Q=de.ref,{$$typeof:e,type:V,key:J,ref:Q!==void 0?Q:null,props:de}}function N(V,J){return j(V.type,J,void 0,void 0,void 0,V.props)}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function L(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Q){return J[Q]})}var H=/\/+/g;function M(V,J){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):J.toString(36)}function K(){}function q(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(K,K):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function ue(V,J,Q,ne,he){var de=typeof V;(de==="undefined"||de==="boolean")&&(V=null);var Ie=!1;if(V===null)Ie=!0;else switch(de){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(V.$$typeof){case e:case t:Ie=!0;break;case d:return Ie=V._init,ue(Ie(V._payload),J,Q,ne,he)}}if(Ie)return he=he(V),Ie=ne===""?"."+M(V,0):ne,C(he)?(Q="",Ie!=null&&(Q=Ie.replace(H,"$&/")+"/"),ue(he,J,Q,"",function(Se){return Se})):he!=null&&(P(he)&&(he=N(he,Q+(he.key==null||V&&V.key===he.key?"":(""+he.key).replace(H,"$&/")+"/")+Ie)),J.push(he)),1;Ie=0;var ke=ne===""?".":ne+":";if(C(V))for(var Te=0;Te<V.length;Te++)ne=V[Te],de=ke+M(ne,Te),Ie+=ue(ne,J,Q,de,he);else if(Te=m(V),typeof Te=="function")for(V=Te.call(V),Te=0;!(ne=V.next()).done;)ne=ne.value,de=ke+M(ne,Te++),Ie+=ue(ne,J,Q,de,he);else if(de==="object"){if(typeof V.then=="function")return ue(q(V),J,Q,ne,he);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function ae(V,J,Q){if(V==null)return V;var ne=[],he=0;return ue(V,ne,"","",function(de){return J.call(Q,de,he++)}),ne}function te(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(Q){(V._status===0||V._status===-1)&&(V._status=1,V._result=Q)},function(Q){(V._status===0||V._status===-1)&&(V._status=2,V._result=Q)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var Y=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof da=="object"&&typeof da.emit=="function"){da.emit("uncaughtException",V);return}console.error(V)};function ie(){}return Bn.Children={map:ae,forEach:function(V,J,Q){ae(V,function(){J.apply(this,arguments)},Q)},count:function(V){var J=0;return ae(V,function(){J++}),J},toArray:function(V){return ae(V,function(J){return J})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Bn.Component=x,Bn.Fragment=n,Bn.Profiler=a,Bn.PureComponent=_,Bn.StrictMode=r,Bn.Suspense=l,Bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Bn.__COMPILER_RUNTIME={__proto__:null,c:function(V){return k.H.useMemoCache(V)}},Bn.cache=function(V){return function(){return V.apply(null,arguments)}},Bn.cloneElement=function(V,J,Q){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ne=b({},V.props),he=V.key,de=void 0;if(J!=null)for(Ie in J.ref!==void 0&&(de=void 0),J.key!==void 0&&(he=""+J.key),J)!I.call(J,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&J.ref===void 0||(ne[Ie]=J[Ie]);var Ie=arguments.length-2;if(Ie===1)ne.children=Q;else if(1<Ie){for(var ke=Array(Ie),Te=0;Te<Ie;Te++)ke[Te]=arguments[Te+2];ne.children=ke}return j(V.type,he,void 0,void 0,de,ne)},Bn.createContext=function(V){return V={$$typeof:s,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:i,_context:V},V},Bn.createElement=function(V,J,Q){var ne,he={},de=null;if(J!=null)for(ne in J.key!==void 0&&(de=""+J.key),J)I.call(J,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(he[ne]=J[ne]);var Ie=arguments.length-2;if(Ie===1)he.children=Q;else if(1<Ie){for(var ke=Array(Ie),Te=0;Te<Ie;Te++)ke[Te]=arguments[Te+2];he.children=ke}if(V&&V.defaultProps)for(ne in Ie=V.defaultProps,Ie)he[ne]===void 0&&(he[ne]=Ie[ne]);return j(V,de,void 0,void 0,null,he)},Bn.createRef=function(){return{current:null}},Bn.forwardRef=function(V){return{$$typeof:o,render:V}},Bn.isValidElement=P,Bn.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:te}},Bn.memo=function(V,J){return{$$typeof:u,type:V,compare:J===void 0?null:J}},Bn.startTransition=function(V){var J=k.T,Q={};k.T=Q;try{var ne=V(),he=k.S;he!==null&&he(Q,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(ie,Y)}catch(de){Y(de)}finally{k.T=J}},Bn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Bn.use=function(V){return k.H.use(V)},Bn.useActionState=function(V,J,Q){return k.H.useActionState(V,J,Q)},Bn.useCallback=function(V,J){return k.H.useCallback(V,J)},Bn.useContext=function(V){return k.H.useContext(V)},Bn.useDebugValue=function(){},Bn.useDeferredValue=function(V,J){return k.H.useDeferredValue(V,J)},Bn.useEffect=function(V,J,Q){var ne=k.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(V,J)},Bn.useId=function(){return k.H.useId()},Bn.useImperativeHandle=function(V,J,Q){return k.H.useImperativeHandle(V,J,Q)},Bn.useInsertionEffect=function(V,J){return k.H.useInsertionEffect(V,J)},Bn.useLayoutEffect=function(V,J){return k.H.useLayoutEffect(V,J)},Bn.useMemo=function(V,J){return k.H.useMemo(V,J)},Bn.useOptimistic=function(V,J){return k.H.useOptimistic(V,J)},Bn.useReducer=function(V,J,Q){return k.H.useReducer(V,J,Q)},Bn.useRef=function(V){return k.H.useRef(V)},Bn.useState=function(V){return k.H.useState(V)},Bn.useSyncExternalStore=function(V,J,Q){return k.H.useSyncExternalStore(V,J,Q)},Bn.useTransition=function(){return k.H.useTransition()},Bn.version="19.1.0",Bn}var e4;function eA(){return e4||(e4=1,$2.exports=AW()),$2.exports}var T=eA();const gt=bi(T),f8=xW({__proto__:null,default:gt},[T]);var z2={exports:{}},xg={},U2={exports:{}},V2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t4;function NW(){return t4||(t4=1,function(e){function t(ae,te){var Y=ae.length;ae.push(te);e:for(;0<Y;){var ie=Y-1>>>1,V=ae[ie];if(0<a(V,te))ae[ie]=te,ae[Y]=V,Y=ie;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var te=ae[0],Y=ae.pop();if(Y!==te){ae[0]=Y;e:for(var ie=0,V=ae.length,J=V>>>1;ie<J;){var Q=2*(ie+1)-1,ne=ae[Q],he=Q+1,de=ae[he];if(0>a(ne,Y))he<V&&0>a(de,ne)?(ae[ie]=de,ae[he]=Y,ie=he):(ae[ie]=ne,ae[Q]=Y,ie=Q);else if(he<V&&0>a(de,Y))ae[ie]=de,ae[he]=Y,ie=he;else break e}}return te}function a(ae,te){var Y=ae.sortIndex-te.sortIndex;return Y!==0?Y:ae.id-te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,h=null,m=3,g=!1,b=!1,v=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ae){for(var te=n(u);te!==null;){if(te.callback===null)r(u);else if(te.startTime<=ae)r(u),te.sortIndex=te.expirationTime,t(l,te);else break;te=n(u)}}function k(ae){if(v=!1,C(ae),!b)if(n(l)!==null)b=!0,I||(I=!0,M());else{var te=n(u);te!==null&&ue(k,te.startTime-ae)}}var I=!1,j=-1,N=5,P=-1;function L(){return x?!0:!(e.unstable_now()-P<N)}function H(){if(x=!1,I){var ae=e.unstable_now();P=ae;var te=!0;try{e:{b=!1,v&&(v=!1,_(j),j=-1),g=!0;var Y=m;try{t:{for(C(ae),h=n(l);h!==null&&!(h.expirationTime>ae&&L());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,m=h.priorityLevel;var V=ie(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof V=="function"){h.callback=V,C(ae),te=!0;break t}h===n(l)&&r(l),C(ae)}else r(l);h=n(l)}if(h!==null)te=!0;else{var J=n(u);J!==null&&ue(k,J.startTime-ae),te=!1}}break e}finally{h=null,m=Y,g=!1}te=void 0}}finally{te?M():I=!1}}}var M;if(typeof E=="function")M=function(){E(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,q=K.port2;K.port1.onmessage=H,M=function(){q.postMessage(null)}}else M=function(){w(H,0)};function ue(ae,te){j=w(function(){ae(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ae){switch(m){case 1:case 2:case 3:var te=3;break;default:te=m}var Y=m;m=te;try{return ae()}finally{m=Y}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(ae,te){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var Y=m;m=ae;try{return te()}finally{m=Y}},e.unstable_scheduleCallback=function(ae,te,Y){var ie=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ie+Y:ie):Y=ie,ae){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Y+V,ae={id:d++,callback:te,priorityLevel:ae,startTime:Y,expirationTime:V,sortIndex:-1},Y>ie?(ae.sortIndex=Y,t(u,ae),n(l)===null&&ae===n(u)&&(v?(_(j),j=-1):v=!0,ue(k,Y-ie))):(ae.sortIndex=V,t(l,ae),b||g||(b=!0,I||(I=!0,M()))),ae},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(ae){var te=m;return function(){var Y=m;m=te;try{return ae.apply(this,arguments)}finally{m=Y}}}}(V2)),V2}var n4;function RW(){return n4||(n4=1,U2.exports=NW()),U2.exports}var H2={exports:{}},li={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r4;function IW(){if(r4)return li;r4=1;var e=eA();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return li.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,li.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(l,u,null,d)},li.flushSync=function(l){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=u,r.p=d,r.d.f()}},li.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},li.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},li.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},li.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},li.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},li.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},li.requestFormReset=function(l){r.d.r(l)},li.unstable_batchedUpdates=function(l,u){return l(u)},li.useFormState=function(l,u,d){return s.H.useFormState(l,u,d)},li.useFormStatus=function(){return s.H.useHostTransitionStatus()},li.version="19.1.0",li}var a4;function h8(){if(a4)return H2.exports;a4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),H2.exports=IW(),H2.exports}var i4;function jW(){if(i4)return xg;i4=1;var e=RW(),t=eA(),n=h8();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function s(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(i(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=i(c),f===null)throw Error(r(188));return f!==c?null:c}for(var y=c,S=f;;){var R=y.return;if(R===null)break;var B=R.alternate;if(B===null){if(S=R.return,S!==null){y=S;continue}break}if(R.child===B.child){for(B=R.child;B;){if(B===y)return o(R),c;if(B===S)return o(R),f;B=B.sibling}throw Error(r(188))}if(y.return!==S.return)y=R,S=B;else{for(var oe=!1,_e=R.child;_e;){if(_e===y){oe=!0,y=R,S=B;break}if(_e===S){oe=!0,S=R,y=B;break}_e=_e.sibling}if(!oe){for(_e=B.child;_e;){if(_e===y){oe=!0,y=B,S=R;break}if(_e===S){oe=!0,S=B,y=R;break}_e=_e.sibling}if(!oe)throw Error(r(189))}}if(y.alternate!==S)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function M(c){return c===null||typeof c!="object"?null:(c=H&&c[H]||c["@@iterator"],typeof c=="function"?c:null)}var K=Symbol.for("react.client.reference");function q(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===K?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case b:return"Fragment";case x:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case P:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case E:return(c.displayName||"Context")+".Provider";case _:return(c._context.displayName||"Context")+".Consumer";case C:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case j:return f=c.displayName||null,f!==null?f:q(c.type)||"Memo";case N:f=c._payload,c=c._init;try{return q(c(f))}catch{}}return null}var ue=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ie=[],V=-1;function J(c){return{current:c}}function Q(c){0>V||(c.current=ie[V],ie[V]=null,V--)}function ne(c,f){V++,ie[V]=c.current,c.current=f}var he=J(null),de=J(null),Ie=J(null),ke=J(null);function Te(c,f){switch(ne(Ie,f),ne(de,c),ne(he,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?Cj(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=Cj(f),c=Tj(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Q(he),ne(he,c)}function Se(){Q(he),Q(de),Q(Ie)}function Pe(c){c.memoizedState!==null&&ne(ke,c);var f=he.current,y=Tj(f,c.type);f!==y&&(ne(de,c),ne(he,y))}function Qe(c){de.current===c&&(Q(he),Q(de)),ke.current===c&&(Q(ke),mg._currentValue=Y)}var Le=Object.prototype.hasOwnProperty,je=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,Ee=e.unstable_shouldYield,Ne=e.unstable_requestPaint,fe=e.unstable_now,se=e.unstable_getCurrentPriorityLevel,ee=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Fe=e.unstable_NormalPriority,Ce=e.unstable_LowPriority,We=e.unstable_IdlePriority,Nt=e.log,it=e.unstable_setDisableYieldValue,St=null,Ft=null;function Mt(c){if(typeof Nt=="function"&&it(c),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(St,c)}catch{}}var Kt=Math.clz32?Math.clz32:W,be=Math.log,D=Math.LN2;function W(c){return c>>>=0,c===0?32:31-(be(c)/D|0)|0}var pe=256,De=4194304;function ve(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Ae(c,f,y){var S=c.pendingLanes;if(S===0)return 0;var R=0,B=c.suspendedLanes,oe=c.pingedLanes;c=c.warmLanes;var _e=S&134217727;return _e!==0?(S=_e&~B,S!==0?R=ve(S):(oe&=_e,oe!==0?R=ve(oe):y||(y=_e&~c,y!==0&&(R=ve(y))))):(_e=S&~B,_e!==0?R=ve(_e):oe!==0?R=ve(oe):y||(y=S&~c,y!==0&&(R=ve(y)))),R===0?0:f!==0&&f!==R&&(f&B)===0&&(B=R&-R,y=f&-f,B>=y||B===32&&(y&4194048)!==0)?f:R}function le(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function ft(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var c=pe;return pe<<=1,(pe&4194048)===0&&(pe=256),c}function F(){var c=De;return De<<=1,(De&62914560)===0&&(De=4194304),c}function $e(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function nt(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ye(c,f,y,S,R,B){var oe=c.pendingLanes;c.pendingLanes=y,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=y,c.entangledLanes&=y,c.errorRecoveryDisabledLanes&=y,c.shellSuspendCounter=0;var _e=c.entanglements,ze=c.expirationTimes,dt=c.hiddenUpdates;for(y=oe&~y;0<y;){var At=31-Kt(y),Ot=1<<At;_e[At]=0,ze[At]=-1;var mt=dt[At];if(mt!==null)for(dt[At]=null,At=0;At<mt.length;At++){var yt=mt[At];yt!==null&&(yt.lane&=-536870913)}y&=~Ot}S!==0&&Me(c,S,0),B!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=B&~(oe&~f))}function Me(c,f,y){c.pendingLanes|=f,c.suspendedLanes&=~f;var S=31-Kt(f);c.entangledLanes|=f,c.entanglements[S]=c.entanglements[S]|1073741824|y&4194090}function Ke(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var S=31-Kt(y),R=1<<S;R&f|c[S]&f&&(c[S]|=f),y&=~R}}function Dt(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function ge(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function G(){var c=te.p;return c!==0?c:(c=window.event,c===void 0?32:qj(c.type))}function U(c,f){var y=te.p;try{return te.p=c,f()}finally{te.p=y}}var Z=Math.random().toString(36).slice(2),me="__reactFiber$"+Z,Re="__reactProps$"+Z,Ve="__reactContainer$"+Z,pt="__reactEvents$"+Z,Wt="__reactListeners$"+Z,ut="__reactHandles$"+Z,Rt="__reactResources$"+Z,Lt="__reactMarker$"+Z;function en(c){delete c[me],delete c[Re],delete c[pt],delete c[Wt],delete c[ut]}function Nn(c){var f=c[me];if(f)return f;for(var y=c.parentNode;y;){if(f=y[Ve]||y[me]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(c=Rj(c);c!==null;){if(y=c[me])return y;c=Rj(c)}return f}c=y,y=c.parentNode}return null}function Xn(c){if(c=c[me]||c[Ve]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function Sr(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function Er(c){var f=c[Rt];return f||(f=c[Rt]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function $n(c){c[Lt]=!0}var xi=new Set,Do={};function Mo(c,f){Oo(c,f),Oo(c+"Capture",f)}function Oo(c,f){for(Do[c]=f,c=0;c<f.length;c++)xi.add(f[c])}var Kr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Po={},_s={};function mb(c){return Le.call(_s,c)?!0:Le.call(Po,c)?!1:Kr.test(c)?_s[c]=!0:(Po[c]=!0,!1)}function eo(c,f,y){if(mb(f))if(y===null)c.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+y)}}function Cl(c,f,y){if(y===null)c.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+y)}}function as(c,f,y,S){if(S===null)c.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(y);return}c.setAttributeNS(f,y,""+S)}}var pd,Fo;function Tl(c){if(pd===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);pd=f&&f[1]||"",Fo=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pd+c+Fo}var Oc=!1;function Uf(c,f){if(!c||Oc)return"";Oc=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(yt){var mt=yt}Reflect.construct(c,[],Ot)}else{try{Ot.call()}catch(yt){mt=yt}c.call(Ot.prototype)}}else{try{throw Error()}catch(yt){mt=yt}(Ot=c())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(yt){if(yt&&mt&&typeof yt.stack=="string")return[yt.stack,mt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=S.DetermineComponentFrameRoot(),oe=B[0],_e=B[1];if(oe&&_e){var ze=oe.split(`
`),dt=_e.split(`
`);for(R=S=0;S<ze.length&&!ze[S].includes("DetermineComponentFrameRoot");)S++;for(;R<dt.length&&!dt[R].includes("DetermineComponentFrameRoot");)R++;if(S===ze.length||R===dt.length)for(S=ze.length-1,R=dt.length-1;1<=S&&0<=R&&ze[S]!==dt[R];)R--;for(;1<=S&&0<=R;S--,R--)if(ze[S]!==dt[R]){if(S!==1||R!==1)do if(S--,R--,0>R||ze[S]!==dt[R]){var At=`
`+ze[S].replace(" at new "," at ");return c.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",c.displayName)),At}while(1<=S&&0<=R);break}}}finally{Oc=!1,Error.prepareStackTrace=y}return(y=c?c.displayName||c.name:"")?Tl(y):""}function Jn(c){switch(c.tag){case 26:case 27:case 5:return Tl(c.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 15:return Uf(c.type,!1);case 11:return Uf(c.type.render,!1);case 1:return Uf(c.type,!0);case 31:return Tl("Activity");default:return""}}function ym(c){try{var f="";do f+=Jn(c),c=c.return;while(c);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function _i(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function bm(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function jr(c){var f=bm(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),S=""+c[f];if(!c.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var R=y.get,B=y.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return R.call(this)},set:function(oe){S=""+oe,B.call(this,oe)}}),Object.defineProperty(c,f,{enumerable:y.enumerable}),{getValue:function(){return S},setValue:function(oe){S=""+oe},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function Lo(c){c._valueTracker||(c._valueTracker=jr(c))}function Pc(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var y=f.getValue(),S="";return c&&(S=bm(c)?c.checked?"true":"false":c.value),c=S,c!==y?(f.setValue(c),!0):!1}function to(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var vm=/[\n"\\]/g;function ai(c){return c.replace(vm,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Fc(c,f,y,S,R,B,oe,_e){c.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?c.type=oe:c.removeAttribute("type"),f!=null?oe==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+_i(f)):c.value!==""+_i(f)&&(c.value=""+_i(f)):oe!=="submit"&&oe!=="reset"||c.removeAttribute("value"),f!=null?Lc(c,oe,_i(f)):y!=null?Lc(c,oe,_i(y)):S!=null&&c.removeAttribute("value"),R==null&&B!=null&&(c.defaultChecked=!!B),R!=null&&(c.checked=R&&typeof R!="function"&&typeof R!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?c.name=""+_i(_e):c.removeAttribute("name")}function wm(c,f,y,S,R,B,oe,_e){if(B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(c.type=B),f!=null||y!=null){if(!(B!=="submit"&&B!=="reset"||f!=null))return;y=y!=null?""+_i(y):"",f=f!=null?""+_i(f):y,_e||f===c.value||(c.value=f),c.defaultValue=f}S=S??R,S=typeof S!="function"&&typeof S!="symbol"&&!!S,c.checked=_e?c.checked:!!S,c.defaultChecked=!!S,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(c.name=oe)}function Lc(c,f,y){f==="number"&&to(c.ownerDocument)===c||c.defaultValue===""+y||(c.defaultValue=""+y)}function kl(c,f,y,S){if(c=c.options,f){f={};for(var R=0;R<y.length;R++)f["$"+y[R]]=!0;for(y=0;y<c.length;y++)R=f.hasOwnProperty("$"+c[y].value),c[y].selected!==R&&(c[y].selected=R),R&&S&&(c[y].defaultSelected=!0)}else{for(y=""+_i(y),f=null,R=0;R<c.length;R++){if(c[R].value===y){c[R].selected=!0,S&&(c[R].defaultSelected=!0);return}f!==null||c[R].disabled||(f=c[R])}f!==null&&(f.selected=!0)}}function Bc(c,f,y){if(f!=null&&(f=""+_i(f),f!==c.value&&(c.value=f),y==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=y!=null?""+_i(y):""}function xm(c,f,y,S){if(f==null){if(S!=null){if(y!=null)throw Error(r(92));if(ue(S)){if(1<S.length)throw Error(r(93));S=S[0]}y=S}y==null&&(y=""),f=y}y=_i(f),c.defaultValue=y,S=c.textContent,S===y&&S!==""&&S!==null&&(c.value=S)}function $c(c,f){if(f){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=f;return}}c.textContent=f}var nr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vf(c,f,y){var S=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":S?c.setProperty(f,y):typeof y!="number"||y===0||nr.has(f)?f==="float"?c.cssFloat=y:c[f]=(""+y).trim():c[f]=y+"px"}function gb(c,f,y){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?c.setProperty(S,""):S==="float"?c.cssFloat="":c[S]="");for(var R in f)S=f[R],f.hasOwnProperty(R)&&y[R]!==S&&Vf(c,R,S)}else for(var B in f)f.hasOwnProperty(B)&&Vf(c,B,f[B])}function _m(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Si=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Al(c){return zc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Ss=null;function Hf(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Nl=null,$r=null;function is(c){var f=Xn(c);if(f&&(c=f.stateNode)){var y=c[Re]||null;e:switch(c=f.stateNode,f.type){case"input":if(Fc(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ai(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var S=y[f];if(S!==c&&S.form===c.form){var R=S[Re]||null;if(!R)throw Error(r(90));Fc(S,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(f=0;f<y.length;f++)S=y[f],S.form===c.form&&Pc(S)}break e;case"textarea":Bc(c,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&kl(c,!!y.multiple,f,!1)}}}var Rl=!1;function Uc(c,f,y){if(Rl)return c(f,y);Rl=!0;try{var S=c(f);return S}finally{if(Rl=!1,(Nl!==null||$r!==null)&&(av(),Nl&&(f=Nl,c=$r,$r=Nl=null,is(f),c)))for(f=0;f<c.length;f++)is(c[f])}}function Il(c,f){var y=c.stateNode;if(y===null)return null;var S=y[Re]||null;if(S===null)return null;y=S[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(c=c.type,S=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!S;break e;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(r(231,f,typeof y));return y}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sm=!1;if(ja)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){Sm=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{Sm=!1}var Es=null,qf=null,Vc=null;function Hc(){if(Vc)return Vc;var c,f=qf,y=f.length,S,R="value"in Es?Es.value:Es.textContent,B=R.length;for(c=0;c<y&&f[c]===R[c];c++);var oe=y-c;for(S=1;S<=oe&&f[y-S]===R[B-S];S++);return Vc=R.slice(c,1<S?1-S:void 0)}function qc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function md(){return!0}function yb(){return!1}function ma(c){function f(y,S,R,B,oe){this._reactName=y,this._targetInst=R,this.type=S,this.nativeEvent=B,this.target=oe,this.currentTarget=null;for(var _e in c)c.hasOwnProperty(_e)&&(y=c[_e],this[_e]=y?y(B):B[_e]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?md:yb,this.isPropagationStopped=yb,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=md)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=md)},persist:function(){},isPersistent:md}),f}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gf=ma(jl),Bo=d({},jl,{view:0,detail:0}),Wf=ma(Bo),gd,Em,yd,Kf=d({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==yd&&(yd&&c.type==="mousemove"?(gd=c.screenX-yd.screenX,Em=c.screenY-yd.screenY):Em=gd=0,yd=c),gd)},movementY:function(c){return"movementY"in c?c.movementY:Em}}),Zf=ma(Kf),Cm=d({},Kf,{dataTransfer:0}),bb=ma(Cm),Yf=d({},Bo,{relatedTarget:0}),Gc=ma(Yf),Xf=d({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),vb=ma(Xf),Q_=d({},jl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Jf=ma(Q_),Tm=d({},jl,{data:0}),Qf=ma(Tm),km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bd(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Da[c])?!!f[c]:!1}function Dl(){return bd}var wb=d({},Bo,{key:function(c){if(c.key){var f=km[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=qc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Am[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(c){return c.type==="keypress"?qc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?qc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),eh=ma(wb),xb=d({},Kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=ma(xb),th=d({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),Rm=ma(th),Ml=d({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Im=ma(Ml),jm=d({},Kf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),nh=ma(jm),Dm=d({},jl,{newState:0,oldState:0}),_b=ma(Dm),eS=[9,13,27,32],vd=ja&&"CompositionEvent"in window,$o=null;ja&&"documentMode"in document&&($o=document.documentMode);var tS=ja&&"TextEvent"in window&&!$o,rh=ja&&(!vd||$o&&8<$o&&11>=$o),ah=" ",Sb=!1;function Mm(c,f){switch(c){case"keyup":return eS.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eb(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Ol=!1;function Cb(c,f){switch(c){case"compositionend":return Eb(f);case"keypress":return f.which!==32?null:(Sb=!0,ah);case"textInput":return c=f.data,c===ah&&Sb?null:c;default:return null}}function nS(c,f){if(Ol)return c==="compositionend"||!vd&&Mm(c,f)?(c=Hc(),Vc=qf=Es=null,Ol=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return rh&&f.locale!=="ko"?null:f.data;default:return null}}var Tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ih(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!Tb[c.type]:f==="textarea"}function Om(c,f,y,S){Nl?$r?$r.push(S):$r=[S]:Nl=S,f=uv(f,"onChange"),0<f.length&&(y=new Gf("onChange","change",null,y,S),c.push({event:y,listeners:f}))}var Wc=null,wd=null;function rS(c){wj(c,0)}function sh(c){var f=Sr(c);if(Pc(f))return c}function xd(c,f){if(c==="change")return f}var Cs=!1;if(ja){var zr;if(ja){var Kc="oninput"in document;if(!Kc){var Ei=document.createElement("div");Ei.setAttribute("oninput","return;"),Kc=typeof Ei.oninput=="function"}zr=Kc}else zr=!1;Cs=zr&&(!document.documentMode||9<document.documentMode)}function kb(){Wc&&(Wc.detachEvent("onpropertychange",oh),wd=Wc=null)}function oh(c){if(c.propertyName==="value"&&sh(wd)){var f=[];Om(f,wd,c,Hf(c)),Uc(rS,f)}}function Ab(c,f,y){c==="focusin"?(kb(),Wc=f,wd=y,Wc.attachEvent("onpropertychange",oh)):c==="focusout"&&kb()}function Pl(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return sh(wd)}function Pm(c,f){if(c==="click")return sh(f)}function Zc(c,f){if(c==="input"||c==="change")return sh(f)}function zo(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var si=typeof Object.is=="function"?Object.is:zo;function A(c,f){if(si(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),S=Object.keys(f);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var R=y[S];if(!Le.call(f,R)||!si(c[R],f[R]))return!1}return!0}function O(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function X(c,f){var y=O(c);c=0;for(var S;y;){if(y.nodeType===3){if(S=c+y.textContent.length,c<=f&&S>=f)return{node:y,offset:f-c};c=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=O(y)}}function re(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?re(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function ce(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=to(c.document);f instanceof c.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)c=f.contentWindow;else break;f=to(c.document)}return f}function we(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var Oe=ja&&"documentMode"in document&&11>=document.documentMode,Be=null,Ze=null,Xe=null,rt=!1;function He(c,f,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;rt||Be==null||Be!==to(S)||(S=Be,"selectionStart"in S&&we(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Xe&&A(Xe,S)||(Xe=S,S=uv(Ze,"onSelect"),0<S.length&&(f=new Gf("onSelect","select",null,f,y),c.push({event:f,listeners:S}),f.target=Be)))}function st(c,f){var y={};return y[c.toLowerCase()]=f.toLowerCase(),y["Webkit"+c]="webkit"+f,y["Moz"+c]="moz"+f,y}var qe={animationend:st("Animation","AnimationEnd"),animationiteration:st("Animation","AnimationIteration"),animationstart:st("Animation","AnimationStart"),transitionrun:st("Transition","TransitionRun"),transitionstart:st("Transition","TransitionStart"),transitioncancel:st("Transition","TransitionCancel"),transitionend:st("Transition","TransitionEnd")},tt={},ot={};ja&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);function Je(c){if(tt[c])return tt[c];if(!qe[c])return c;var f=qe[c],y;for(y in f)if(f.hasOwnProperty(y)&&y in ot)return tt[c]=f[y];return c}var ht=Je("animationend"),bt=Je("animationiteration"),wt=Je("animationstart"),kt=Je("transitionrun"),Vt=Je("transitionstart"),Yt=Je("transitioncancel"),$t=Je("transitionend"),Gt=new Map,Jt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jt.push("scrollEnd");function zt(c,f){Gt.set(c,f),Mo(f,[c])}var nn=new WeakMap;function pn(c,f){if(typeof c=="object"&&c!==null){var y=nn.get(c);return y!==void 0?y:(f={value:c,source:f,stack:ym(f)},nn.set(c,f),f)}return{value:c,source:f,stack:ym(f)}}var gn=[],In=0,Ya=0;function _n(){for(var c=In,f=Ya=In=0;f<c;){var y=gn[f];gn[f++]=null;var S=gn[f];gn[f++]=null;var R=gn[f];gn[f++]=null;var B=gn[f];if(gn[f++]=null,S!==null&&R!==null){var oe=S.pending;oe===null?R.next=R:(R.next=oe.next,oe.next=R),S.pending=R}B!==0&&Ma(y,R,B)}}function sa(c,f,y,S){gn[In++]=c,gn[In++]=f,gn[In++]=y,gn[In++]=S,Ya|=S,c.lanes|=S,c=c.alternate,c!==null&&(c.lanes|=S)}function ga(c,f,y,S){return sa(c,f,y,S),Ts(c)}function no(c,f){return sa(c,null,null,f),Ts(c)}function Ma(c,f,y){c.lanes|=y;var S=c.alternate;S!==null&&(S.lanes|=y);for(var R=!1,B=c.return;B!==null;)B.childLanes|=y,S=B.alternate,S!==null&&(S.childLanes|=y),B.tag===22&&(c=B.stateNode,c===null||c._visibility&1||(R=!0)),c=B,B=B.return;return c.tag===3?(B=c.stateNode,R&&f!==null&&(R=31-Kt(y),c=B.hiddenUpdates,S=c[R],S===null?c[R]=[f]:S.push(f),f.lane=y|536870912),B):null}function Ts(c){if(50<og)throw og=0,c2=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var Uo={};function aG(c,f,y,S){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(c,f,y,S){return new aG(c,f,y,S)}function aS(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Fl(c,f){var y=c.alternate;return y===null?(y=ss(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&65011712,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y.refCleanup=c.refCleanup,y}function i3(c,f){c.flags&=65011714;var y=c.alternate;return y===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=y.childLanes,c.lanes=y.lanes,c.child=y.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=y.memoizedProps,c.memoizedState=y.memoizedState,c.updateQueue=y.updateQueue,c.type=y.type,f=y.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Nb(c,f,y,S,R,B){var oe=0;if(S=c,typeof c=="function")aS(c)&&(oe=1);else if(typeof c=="string")oe=sW(c,y,he.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case P:return c=ss(31,y,f,R),c.elementType=P,c.lanes=B,c;case b:return _d(y.children,R,B,f);case v:oe=8,R|=24;break;case x:return c=ss(12,y,f,R|2),c.elementType=x,c.lanes=B,c;case k:return c=ss(13,y,f,R),c.elementType=k,c.lanes=B,c;case I:return c=ss(19,y,f,R),c.elementType=I,c.lanes=B,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case w:case E:oe=10;break e;case _:oe=9;break e;case C:oe=11;break e;case j:oe=14;break e;case N:oe=16,S=null;break e}oe=29,y=Error(r(130,c===null?"null":typeof c,"")),S=null}return f=ss(oe,y,f,R),f.elementType=c,f.type=S,f.lanes=B,f}function _d(c,f,y,S){return c=ss(7,c,S,f),c.lanes=y,c}function iS(c,f,y){return c=ss(6,c,null,f),c.lanes=y,c}function sS(c,f,y){return f=ss(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var lh=[],ch=0,Rb=null,Ib=0,ks=[],As=0,Sd=null,Ll=1,Bl="";function Ed(c,f){lh[ch++]=Ib,lh[ch++]=Rb,Rb=c,Ib=f}function s3(c,f,y){ks[As++]=Ll,ks[As++]=Bl,ks[As++]=Sd,Sd=c;var S=Ll;c=Bl;var R=32-Kt(S)-1;S&=~(1<<R),y+=1;var B=32-Kt(f)+R;if(30<B){var oe=R-R%5;B=(S&(1<<oe)-1).toString(32),S>>=oe,R-=oe,Ll=1<<32-Kt(f)+R|y<<R|S,Bl=B+c}else Ll=1<<B|y<<R|S,Bl=c}function oS(c){c.return!==null&&(Ed(c,1),s3(c,1,0))}function lS(c){for(;c===Rb;)Rb=lh[--ch],lh[ch]=null,Ib=lh[--ch],lh[ch]=null;for(;c===Sd;)Sd=ks[--As],ks[As]=null,Bl=ks[--As],ks[As]=null,Ll=ks[--As],ks[As]=null}var Ci=null,ta=null,dr=!1,Cd=null,Vo=!1,cS=Error(r(519));function Td(c){var f=Error(r(418,""));throw Bm(pn(f,c)),cS}function o3(c){var f=c.stateNode,y=c.type,S=c.memoizedProps;switch(f[me]=c,f[Re]=S,y){case"dialog":er("cancel",f),er("close",f);break;case"iframe":case"object":case"embed":er("load",f);break;case"video":case"audio":for(y=0;y<cg.length;y++)er(cg[y],f);break;case"source":er("error",f);break;case"img":case"image":case"link":er("error",f),er("load",f);break;case"details":er("toggle",f);break;case"input":er("invalid",f),wm(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),Lo(f);break;case"select":er("invalid",f);break;case"textarea":er("invalid",f),xm(f,S.value,S.defaultValue,S.children),Lo(f)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||S.suppressHydrationWarning===!0||Ej(f.textContent,y)?(S.popover!=null&&(er("beforetoggle",f),er("toggle",f)),S.onScroll!=null&&er("scroll",f),S.onScrollEnd!=null&&er("scrollend",f),S.onClick!=null&&(f.onclick=dv),f=!0):f=!1,f||Td(c)}function l3(c){for(Ci=c.return;Ci;)switch(Ci.tag){case 5:case 13:Vo=!1;return;case 27:case 3:Vo=!0;return;default:Ci=Ci.return}}function Fm(c){if(c!==Ci)return!1;if(!dr)return l3(c),dr=!0,!1;var f=c.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=c.type,y=!(y!=="form"&&y!=="button")||C2(c.type,c.memoizedProps)),y=!y),y&&ta&&Td(c),l3(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(y=c.data,y==="/$"){if(f===0){ta=ao(c.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++;c=c.nextSibling}ta=null}}else f===27?(f=ta,du(c.type)?(c=N2,N2=null,ta=c):ta=f):ta=Ci?ao(c.stateNode.nextSibling):null;return!0}function Lm(){ta=Ci=null,dr=!1}function c3(){var c=Cd;return c!==null&&(Ui===null?Ui=c:Ui.push.apply(Ui,c),Cd=null),c}function Bm(c){Cd===null?Cd=[c]:Cd.push(c)}var uS=J(null),kd=null,$l=null;function Yc(c,f,y){ne(uS,f._currentValue),f._currentValue=y}function zl(c){c._currentValue=uS.current,Q(uS)}function dS(c,f,y){for(;c!==null;){var S=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),c===y)break;c=c.return}}function fS(c,f,y,S){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var B=R.dependencies;if(B!==null){var oe=R.child;B=B.firstContext;e:for(;B!==null;){var _e=B;B=R;for(var ze=0;ze<f.length;ze++)if(_e.context===f[ze]){B.lanes|=y,_e=B.alternate,_e!==null&&(_e.lanes|=y),dS(B.return,y,c),S||(oe=null);break e}B=_e.next}}else if(R.tag===18){if(oe=R.return,oe===null)throw Error(r(341));oe.lanes|=y,B=oe.alternate,B!==null&&(B.lanes|=y),dS(oe,y,c),oe=null}else oe=R.child;if(oe!==null)oe.return=R;else for(oe=R;oe!==null;){if(oe===c){oe=null;break}if(R=oe.sibling,R!==null){R.return=oe.return,oe=R;break}oe=oe.return}R=oe}}function $m(c,f,y,S){c=null;for(var R=f,B=!1;R!==null;){if(!B){if((R.flags&524288)!==0)B=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var oe=R.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var _e=R.type;si(R.pendingProps.value,oe.value)||(c!==null?c.push(_e):c=[_e])}}else if(R===ke.current){if(oe=R.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(mg):c=[mg])}R=R.return}c!==null&&fS(f,c,y,S),f.flags|=262144}function jb(c){for(c=c.firstContext;c!==null;){if(!si(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Ad(c){kd=c,$l=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function oi(c){return u3(kd,c)}function Db(c,f){return kd===null&&Ad(c),u3(c,f)}function u3(c,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},$l===null){if(c===null)throw Error(r(308));$l=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else $l=$l.next=f;return y}var iG=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(y,S){c.push(S)}};this.abort=function(){f.aborted=!0,c.forEach(function(y){return y()})}},sG=e.unstable_scheduleCallback,oG=e.unstable_NormalPriority,Ea={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hS(){return{controller:new iG,data:new Map,refCount:0}}function zm(c){c.refCount--,c.refCount===0&&sG(oG,function(){c.controller.abort()})}var Um=null,pS=0,uh=0,dh=null;function lG(c,f){if(Um===null){var y=Um=[];pS=0,uh=g2(),dh={status:"pending",value:void 0,then:function(S){y.push(S)}}}return pS++,f.then(d3,d3),f}function d3(){if(--pS===0&&Um!==null){dh!==null&&(dh.status="fulfilled");var c=Um;Um=null,uh=0,dh=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function cG(c,f){var y=[],S={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return c.then(function(){S.status="fulfilled",S.value=f;for(var R=0;R<y.length;R++)(0,y[R])(f)},function(R){for(S.status="rejected",S.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),S}var f3=ae.S;ae.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&lG(c,f),f3!==null&&f3(c,f)};var Nd=J(null);function mS(){var c=Nd.current;return c!==null?c:Fr.pooledCache}function Mb(c,f){f===null?ne(Nd,Nd.current):ne(Nd,f.pool)}function h3(){var c=mS();return c===null?null:{parent:Ea._currentValue,pool:c}}var Vm=Error(r(460)),p3=Error(r(474)),Ob=Error(r(542)),gS={then:function(){}};function m3(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Pb(){}function g3(c,f,y){switch(y=c[y],y===void 0?c.push(f):y!==f&&(f.then(Pb,Pb),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,b3(c),c;default:if(typeof f.status=="string")f.then(Pb,Pb);else{if(c=Fr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(S){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=S}},function(S){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,b3(c),c}throw Hm=f,Vm}}var Hm=null;function y3(){if(Hm===null)throw Error(r(459));var c=Hm;return Hm=null,c}function b3(c){if(c===Vm||c===Ob)throw Error(r(483))}var Xc=!1;function yS(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bS(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Jc(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Qc(c,f,y){var S=c.updateQueue;if(S===null)return null;if(S=S.shared,(br&2)!==0){var R=S.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),S.pending=f,f=Ts(c),Ma(c,null,y),f}return sa(c,S,f,y),Ts(c)}function qm(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var S=f.lanes;S&=c.pendingLanes,y|=S,f.lanes=y,Ke(c,y)}}function vS(c,f){var y=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var R=null,B=null;if(y=y.firstBaseUpdate,y!==null){do{var oe={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};B===null?R=B=oe:B=B.next=oe,y=y.next}while(y!==null);B===null?R=B=f:B=B.next=f}else R=B=f;y={baseState:S.baseState,firstBaseUpdate:R,lastBaseUpdate:B,shared:S.shared,callbacks:S.callbacks},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}var wS=!1;function Gm(){if(wS){var c=dh;if(c!==null)throw c}}function Wm(c,f,y,S){wS=!1;var R=c.updateQueue;Xc=!1;var B=R.firstBaseUpdate,oe=R.lastBaseUpdate,_e=R.shared.pending;if(_e!==null){R.shared.pending=null;var ze=_e,dt=ze.next;ze.next=null,oe===null?B=dt:oe.next=dt,oe=ze;var At=c.alternate;At!==null&&(At=At.updateQueue,_e=At.lastBaseUpdate,_e!==oe&&(_e===null?At.firstBaseUpdate=dt:_e.next=dt,At.lastBaseUpdate=ze))}if(B!==null){var Ot=R.baseState;oe=0,At=dt=ze=null,_e=B;do{var mt=_e.lane&-536870913,yt=mt!==_e.lane;if(yt?(rr&mt)===mt:(S&mt)===mt){mt!==0&&mt===uh&&(wS=!0),At!==null&&(At=At.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Sn=c,yn=_e;mt=f;var kr=y;switch(yn.tag){case 1:if(Sn=yn.payload,typeof Sn=="function"){Ot=Sn.call(kr,Ot,mt);break e}Ot=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=yn.payload,mt=typeof Sn=="function"?Sn.call(kr,Ot,mt):Sn,mt==null)break e;Ot=d({},Ot,mt);break e;case 2:Xc=!0}}mt=_e.callback,mt!==null&&(c.flags|=64,yt&&(c.flags|=8192),yt=R.callbacks,yt===null?R.callbacks=[mt]:yt.push(mt))}else yt={lane:mt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},At===null?(dt=At=yt,ze=Ot):At=At.next=yt,oe|=mt;if(_e=_e.next,_e===null){if(_e=R.shared.pending,_e===null)break;yt=_e,_e=yt.next,yt.next=null,R.lastBaseUpdate=yt,R.shared.pending=null}}while(!0);At===null&&(ze=Ot),R.baseState=ze,R.firstBaseUpdate=dt,R.lastBaseUpdate=At,B===null&&(R.shared.lanes=0),ou|=oe,c.lanes=oe,c.memoizedState=Ot}}function v3(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function w3(c,f){var y=c.callbacks;if(y!==null)for(c.callbacks=null,c=0;c<y.length;c++)v3(y[c],f)}var fh=J(null),Fb=J(0);function x3(c,f){c=Kl,ne(Fb,c),ne(fh,f),Kl=c|f.baseLanes}function xS(){ne(Fb,Kl),ne(fh,fh.current)}function _S(){Kl=Fb.current,Q(fh),Q(Fb)}var eu=0,Hn=null,Cr=null,ya=null,Lb=!1,hh=!1,Rd=!1,Bb=0,Km=0,ph=null,uG=0;function oa(){throw Error(r(321))}function SS(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!si(c[y],f[y]))return!1;return!0}function ES(c,f,y,S,R,B){return eu=B,Hn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ae.H=c===null||c.memoizedState===null?aI:iI,Rd=!1,B=y(S,R),Rd=!1,hh&&(B=S3(f,y,S,R)),_3(c),B}function _3(c){ae.H=qb;var f=Cr!==null&&Cr.next!==null;if(eu=0,ya=Cr=Hn=null,Lb=!1,Km=0,ph=null,f)throw Error(r(300));c===null||Oa||(c=c.dependencies,c!==null&&jb(c)&&(Oa=!0))}function S3(c,f,y,S){Hn=c;var R=0;do{if(hh&&(ph=null),Km=0,hh=!1,25<=R)throw Error(r(301));if(R+=1,ya=Cr=null,c.updateQueue!=null){var B=c.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}ae.H=yG,B=f(y,S)}while(hh);return B}function dG(){var c=ae.H,f=c.useState()[0];return f=typeof f.then=="function"?Zm(f):f,c=c.useState()[0],(Cr!==null?Cr.memoizedState:null)!==c&&(Hn.flags|=1024),f}function CS(){var c=Bb!==0;return Bb=0,c}function TS(c,f,y){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~y}function kS(c){if(Lb){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Lb=!1}eu=0,ya=Cr=Hn=null,hh=!1,Km=Bb=0,ph=null}function $i(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ya===null?Hn.memoizedState=ya=c:ya=ya.next=c,ya}function ba(){if(Cr===null){var c=Hn.alternate;c=c!==null?c.memoizedState:null}else c=Cr.next;var f=ya===null?Hn.memoizedState:ya.next;if(f!==null)ya=f,Cr=c;else{if(c===null)throw Hn.alternate===null?Error(r(467)):Error(r(310));Cr=c,c={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},ya===null?Hn.memoizedState=ya=c:ya=ya.next=c}return ya}function AS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zm(c){var f=Km;return Km+=1,ph===null&&(ph=[]),c=g3(ph,c,f),f=Hn,(ya===null?f.memoizedState:ya.next)===null&&(f=f.alternate,ae.H=f===null||f.memoizedState===null?aI:iI),c}function $b(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Zm(c);if(c.$$typeof===E)return oi(c)}throw Error(r(438,String(c)))}function NS(c){var f=null,y=Hn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var S=Hn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=AS(),Hn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(c),S=0;S<c;S++)y[S]=L;return f.index++,y}function Ul(c,f){return typeof f=="function"?f(c):f}function zb(c){var f=ba();return RS(f,Cr,c)}function RS(c,f,y){var S=c.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=y;var R=c.baseQueue,B=S.pending;if(B!==null){if(R!==null){var oe=R.next;R.next=B.next,B.next=oe}f.baseQueue=R=B,S.pending=null}if(B=c.baseState,R===null)c.memoizedState=B;else{f=R.next;var _e=oe=null,ze=null,dt=f,At=!1;do{var Ot=dt.lane&-536870913;if(Ot!==dt.lane?(rr&Ot)===Ot:(eu&Ot)===Ot){var mt=dt.revertLane;if(mt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Ot===uh&&(At=!0);else if((eu&mt)===mt){dt=dt.next,mt===uh&&(At=!0);continue}else Ot={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=Ot,oe=B):ze=ze.next=Ot,Hn.lanes|=mt,ou|=mt;Ot=dt.action,Rd&&y(B,Ot),B=dt.hasEagerState?dt.eagerState:y(B,Ot)}else mt={lane:Ot,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=mt,oe=B):ze=ze.next=mt,Hn.lanes|=Ot,ou|=Ot;dt=dt.next}while(dt!==null&&dt!==f);if(ze===null?oe=B:ze.next=_e,!si(B,c.memoizedState)&&(Oa=!0,At&&(y=dh,y!==null)))throw y;c.memoizedState=B,c.baseState=oe,c.baseQueue=ze,S.lastRenderedState=B}return R===null&&(S.lanes=0),[c.memoizedState,S.dispatch]}function IS(c){var f=ba(),y=f.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=c;var S=y.dispatch,R=y.pending,B=f.memoizedState;if(R!==null){y.pending=null;var oe=R=R.next;do B=c(B,oe.action),oe=oe.next;while(oe!==R);si(B,f.memoizedState)||(Oa=!0),f.memoizedState=B,f.baseQueue===null&&(f.baseState=B),y.lastRenderedState=B}return[B,S]}function E3(c,f,y){var S=Hn,R=ba(),B=dr;if(B){if(y===void 0)throw Error(r(407));y=y()}else y=f();var oe=!si((Cr||R).memoizedState,y);oe&&(R.memoizedState=y,Oa=!0),R=R.queue;var _e=k3.bind(null,S,R,c);if(Ym(2048,8,_e,[c]),R.getSnapshot!==f||oe||ya!==null&&ya.memoizedState.tag&1){if(S.flags|=2048,mh(9,Ub(),T3.bind(null,S,R,y,f),null),Fr===null)throw Error(r(349));B||(eu&124)!==0||C3(S,f,y)}return y}function C3(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=Hn.updateQueue,f===null?(f=AS(),Hn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function T3(c,f,y,S){f.value=y,f.getSnapshot=S,A3(f)&&N3(c)}function k3(c,f,y){return y(function(){A3(f)&&N3(c)})}function A3(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!si(c,y)}catch{return!0}}function N3(c){var f=no(c,2);f!==null&&ds(f,c,2)}function jS(c){var f=$i();if(typeof c=="function"){var y=c;if(c=y(),Rd){Mt(!0);try{y()}finally{Mt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:c},f}function R3(c,f,y,S){return c.baseState=y,RS(c,Cr,typeof S=="function"?S:Ul)}function fG(c,f,y,S,R){if(Hb(c))throw Error(r(485));if(c=f.action,c!==null){var B={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){B.listeners.push(oe)}};ae.T!==null?y(!0):B.isTransition=!1,S(B),y=f.pending,y===null?(B.next=f.pending=B,I3(f,B)):(B.next=y.next,f.pending=y.next=B)}}function I3(c,f){var y=f.action,S=f.payload,R=c.state;if(f.isTransition){var B=ae.T,oe={};ae.T=oe;try{var _e=y(R,S),ze=ae.S;ze!==null&&ze(oe,_e),j3(c,f,_e)}catch(dt){DS(c,f,dt)}finally{ae.T=B}}else try{B=y(R,S),j3(c,f,B)}catch(dt){DS(c,f,dt)}}function j3(c,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){D3(c,f,S)},function(S){return DS(c,f,S)}):D3(c,f,y)}function D3(c,f,y){f.status="fulfilled",f.value=y,M3(f),c.state=y,f=c.pending,f!==null&&(y=f.next,y===f?c.pending=null:(y=y.next,f.next=y,I3(c,y)))}function DS(c,f,y){var S=c.pending;if(c.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=y,M3(f),f=f.next;while(f!==S)}c.action=null}function M3(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function O3(c,f){return f}function P3(c,f){if(dr){var y=Fr.formState;if(y!==null){e:{var S=Hn;if(dr){if(ta){t:{for(var R=ta,B=Vo;R.nodeType!==8;){if(!B){R=null;break t}if(R=ao(R.nextSibling),R===null){R=null;break t}}B=R.data,R=B==="F!"||B==="F"?R:null}if(R){ta=ao(R.nextSibling),S=R.data==="F!";break e}}Td(S)}S=!1}S&&(f=y[0])}}return y=$i(),y.memoizedState=y.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O3,lastRenderedState:f},y.queue=S,y=tI.bind(null,Hn,S),S.dispatch=y,S=jS(!1),B=LS.bind(null,Hn,!1,S.queue),S=$i(),R={state:f,dispatch:null,action:c,pending:null},S.queue=R,y=fG.bind(null,Hn,R,B,y),R.dispatch=y,S.memoizedState=c,[f,y,!1]}function F3(c){var f=ba();return L3(f,Cr,c)}function L3(c,f,y){if(f=RS(c,f,O3)[0],c=zb(Ul)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=Zm(f)}catch(oe){throw oe===Vm?Ob:oe}else S=f;f=ba();var R=f.queue,B=R.dispatch;return y!==f.memoizedState&&(Hn.flags|=2048,mh(9,Ub(),hG.bind(null,R,y),null)),[S,B,c]}function hG(c,f){c.action=f}function B3(c){var f=ba(),y=Cr;if(y!==null)return L3(f,y,c);ba(),f=f.memoizedState,y=ba();var S=y.queue.dispatch;return y.memoizedState=c,[f,S,!1]}function mh(c,f,y,S){return c={tag:c,create:y,deps:S,inst:f,next:null},f=Hn.updateQueue,f===null&&(f=AS(),Hn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=c.next=c:(S=y.next,y.next=c,c.next=S,f.lastEffect=c),c}function Ub(){return{destroy:void 0,resource:void 0}}function $3(){return ba().memoizedState}function Vb(c,f,y,S){var R=$i();S=S===void 0?null:S,Hn.flags|=c,R.memoizedState=mh(1|f,Ub(),y,S)}function Ym(c,f,y,S){var R=ba();S=S===void 0?null:S;var B=R.memoizedState.inst;Cr!==null&&S!==null&&SS(S,Cr.memoizedState.deps)?R.memoizedState=mh(f,B,y,S):(Hn.flags|=c,R.memoizedState=mh(1|f,B,y,S))}function z3(c,f){Vb(8390656,8,c,f)}function U3(c,f){Ym(2048,8,c,f)}function V3(c,f){return Ym(4,2,c,f)}function H3(c,f){return Ym(4,4,c,f)}function q3(c,f){if(typeof f=="function"){c=c();var y=f(c);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function G3(c,f,y){y=y!=null?y.concat([c]):null,Ym(4,4,q3.bind(null,f,c),y)}function MS(){}function W3(c,f){var y=ba();f=f===void 0?null:f;var S=y.memoizedState;return f!==null&&SS(f,S[1])?S[0]:(y.memoizedState=[c,f],c)}function K3(c,f){var y=ba();f=f===void 0?null:f;var S=y.memoizedState;if(f!==null&&SS(f,S[1]))return S[0];if(S=c(),Rd){Mt(!0);try{c()}finally{Mt(!1)}}return y.memoizedState=[S,f],S}function OS(c,f,y){return y===void 0||(eu&1073741824)!==0?c.memoizedState=f:(c.memoizedState=y,c=XI(),Hn.lanes|=c,ou|=c,y)}function Z3(c,f,y,S){return si(y,f)?y:fh.current!==null?(c=OS(c,y,S),si(c,f)||(Oa=!0),c):(eu&42)===0?(Oa=!0,c.memoizedState=y):(c=XI(),Hn.lanes|=c,ou|=c,f)}function Y3(c,f,y,S,R){var B=te.p;te.p=B!==0&&8>B?B:8;var oe=ae.T,_e={};ae.T=_e,LS(c,!1,f,y);try{var ze=R(),dt=ae.S;if(dt!==null&&dt(_e,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var At=cG(ze,S);Xm(c,f,At,us(c))}else Xm(c,f,S,us(c))}catch(Ot){Xm(c,f,{then:function(){},status:"rejected",reason:Ot},us())}finally{te.p=B,ae.T=oe}}function pG(){}function PS(c,f,y,S){if(c.tag!==5)throw Error(r(476));var R=X3(c).queue;Y3(c,R,f,Y,y===null?pG:function(){return J3(c),y(S)})}function X3(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:Y},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:y},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function J3(c){var f=X3(c).next.queue;Xm(c,f,{},us())}function FS(){return oi(mg)}function Q3(){return ba().memoizedState}function eI(){return ba().memoizedState}function mG(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var y=us();c=Jc(y);var S=Qc(f,c,y);S!==null&&(ds(S,f,y),qm(S,f,y)),f={cache:hS()},c.payload=f;return}f=f.return}}function gG(c,f,y){var S=us();y={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},Hb(c)?nI(f,y):(y=ga(c,f,y,S),y!==null&&(ds(y,c,S),rI(y,f,S)))}function tI(c,f,y){var S=us();Xm(c,f,y,S)}function Xm(c,f,y,S){var R={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(Hb(c))nI(f,R);else{var B=c.alternate;if(c.lanes===0&&(B===null||B.lanes===0)&&(B=f.lastRenderedReducer,B!==null))try{var oe=f.lastRenderedState,_e=B(oe,y);if(R.hasEagerState=!0,R.eagerState=_e,si(_e,oe))return sa(c,f,R,0),Fr===null&&_n(),!1}catch{}finally{}if(y=ga(c,f,R,S),y!==null)return ds(y,c,S),rI(y,f,S),!0}return!1}function LS(c,f,y,S){if(S={lane:2,revertLane:g2(),action:S,hasEagerState:!1,eagerState:null,next:null},Hb(c)){if(f)throw Error(r(479))}else f=ga(c,y,S,2),f!==null&&ds(f,c,2)}function Hb(c){var f=c.alternate;return c===Hn||f!==null&&f===Hn}function nI(c,f){hh=Lb=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function rI(c,f,y){if((y&4194048)!==0){var S=f.lanes;S&=c.pendingLanes,y|=S,f.lanes=y,Ke(c,y)}}var qb={readContext:oi,use:$b,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useInsertionEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useSyncExternalStore:oa,useId:oa,useHostTransitionStatus:oa,useFormState:oa,useActionState:oa,useOptimistic:oa,useMemoCache:oa,useCacheRefresh:oa},aI={readContext:oi,use:$b,useCallback:function(c,f){return $i().memoizedState=[c,f===void 0?null:f],c},useContext:oi,useEffect:z3,useImperativeHandle:function(c,f,y){y=y!=null?y.concat([c]):null,Vb(4194308,4,q3.bind(null,f,c),y)},useLayoutEffect:function(c,f){return Vb(4194308,4,c,f)},useInsertionEffect:function(c,f){Vb(4,2,c,f)},useMemo:function(c,f){var y=$i();f=f===void 0?null:f;var S=c();if(Rd){Mt(!0);try{c()}finally{Mt(!1)}}return y.memoizedState=[S,f],S},useReducer:function(c,f,y){var S=$i();if(y!==void 0){var R=y(f);if(Rd){Mt(!0);try{y(f)}finally{Mt(!1)}}}else R=f;return S.memoizedState=S.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},S.queue=c,c=c.dispatch=gG.bind(null,Hn,c),[S.memoizedState,c]},useRef:function(c){var f=$i();return c={current:c},f.memoizedState=c},useState:function(c){c=jS(c);var f=c.queue,y=tI.bind(null,Hn,f);return f.dispatch=y,[c.memoizedState,y]},useDebugValue:MS,useDeferredValue:function(c,f){var y=$i();return OS(y,c,f)},useTransition:function(){var c=jS(!1);return c=Y3.bind(null,Hn,c.queue,!0,!1),$i().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,y){var S=Hn,R=$i();if(dr){if(y===void 0)throw Error(r(407));y=y()}else{if(y=f(),Fr===null)throw Error(r(349));(rr&124)!==0||C3(S,f,y)}R.memoizedState=y;var B={value:y,getSnapshot:f};return R.queue=B,z3(k3.bind(null,S,B,c),[c]),S.flags|=2048,mh(9,Ub(),T3.bind(null,S,B,y,f),null),y},useId:function(){var c=$i(),f=Fr.identifierPrefix;if(dr){var y=Bl,S=Ll;y=(S&~(1<<32-Kt(S)-1)).toString(32)+y,f="«"+f+"R"+y,y=Bb++,0<y&&(f+="H"+y.toString(32)),f+="»"}else y=uG++,f="«"+f+"r"+y.toString(32)+"»";return c.memoizedState=f},useHostTransitionStatus:FS,useFormState:P3,useActionState:P3,useOptimistic:function(c){var f=$i();f.memoizedState=f.baseState=c;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=LS.bind(null,Hn,!0,y),y.dispatch=f,[c,f]},useMemoCache:NS,useCacheRefresh:function(){return $i().memoizedState=mG.bind(null,Hn)}},iI={readContext:oi,use:$b,useCallback:W3,useContext:oi,useEffect:U3,useImperativeHandle:G3,useInsertionEffect:V3,useLayoutEffect:H3,useMemo:K3,useReducer:zb,useRef:$3,useState:function(){return zb(Ul)},useDebugValue:MS,useDeferredValue:function(c,f){var y=ba();return Z3(y,Cr.memoizedState,c,f)},useTransition:function(){var c=zb(Ul)[0],f=ba().memoizedState;return[typeof c=="boolean"?c:Zm(c),f]},useSyncExternalStore:E3,useId:Q3,useHostTransitionStatus:FS,useFormState:F3,useActionState:F3,useOptimistic:function(c,f){var y=ba();return R3(y,Cr,c,f)},useMemoCache:NS,useCacheRefresh:eI},yG={readContext:oi,use:$b,useCallback:W3,useContext:oi,useEffect:U3,useImperativeHandle:G3,useInsertionEffect:V3,useLayoutEffect:H3,useMemo:K3,useReducer:IS,useRef:$3,useState:function(){return IS(Ul)},useDebugValue:MS,useDeferredValue:function(c,f){var y=ba();return Cr===null?OS(y,c,f):Z3(y,Cr.memoizedState,c,f)},useTransition:function(){var c=IS(Ul)[0],f=ba().memoizedState;return[typeof c=="boolean"?c:Zm(c),f]},useSyncExternalStore:E3,useId:Q3,useHostTransitionStatus:FS,useFormState:B3,useActionState:B3,useOptimistic:function(c,f){var y=ba();return Cr!==null?R3(y,Cr,c,f):(y.baseState=c,[c,y.queue.dispatch])},useMemoCache:NS,useCacheRefresh:eI},gh=null,Jm=0;function Gb(c){var f=Jm;return Jm+=1,gh===null&&(gh=[]),g3(gh,c,f)}function Qm(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Wb(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function sI(c){var f=c._init;return f(c._payload)}function oI(c){function f(at,Ye){if(c){var ct=at.deletions;ct===null?(at.deletions=[Ye],at.flags|=16):ct.push(Ye)}}function y(at,Ye){if(!c)return null;for(;Ye!==null;)f(at,Ye),Ye=Ye.sibling;return null}function S(at){for(var Ye=new Map;at!==null;)at.key!==null?Ye.set(at.key,at):Ye.set(at.index,at),at=at.sibling;return Ye}function R(at,Ye){return at=Fl(at,Ye),at.index=0,at.sibling=null,at}function B(at,Ye,ct){return at.index=ct,c?(ct=at.alternate,ct!==null?(ct=ct.index,ct<Ye?(at.flags|=67108866,Ye):ct):(at.flags|=67108866,Ye)):(at.flags|=1048576,Ye)}function oe(at){return c&&at.alternate===null&&(at.flags|=67108866),at}function _e(at,Ye,ct,jt){return Ye===null||Ye.tag!==6?(Ye=iS(ct,at.mode,jt),Ye.return=at,Ye):(Ye=R(Ye,ct),Ye.return=at,Ye)}function ze(at,Ye,ct,jt){var sn=ct.type;return sn===b?At(at,Ye,ct.props.children,jt,ct.key):Ye!==null&&(Ye.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===N&&sI(sn)===Ye.type)?(Ye=R(Ye,ct.props),Qm(Ye,ct),Ye.return=at,Ye):(Ye=Nb(ct.type,ct.key,ct.props,null,at.mode,jt),Qm(Ye,ct),Ye.return=at,Ye)}function dt(at,Ye,ct,jt){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==ct.containerInfo||Ye.stateNode.implementation!==ct.implementation?(Ye=sS(ct,at.mode,jt),Ye.return=at,Ye):(Ye=R(Ye,ct.children||[]),Ye.return=at,Ye)}function At(at,Ye,ct,jt,sn){return Ye===null||Ye.tag!==7?(Ye=_d(ct,at.mode,jt,sn),Ye.return=at,Ye):(Ye=R(Ye,ct),Ye.return=at,Ye)}function Ot(at,Ye,ct){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=iS(""+Ye,at.mode,ct),Ye.return=at,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case m:return ct=Nb(Ye.type,Ye.key,Ye.props,null,at.mode,ct),Qm(ct,Ye),ct.return=at,ct;case g:return Ye=sS(Ye,at.mode,ct),Ye.return=at,Ye;case N:var jt=Ye._init;return Ye=jt(Ye._payload),Ot(at,Ye,ct)}if(ue(Ye)||M(Ye))return Ye=_d(Ye,at.mode,ct,null),Ye.return=at,Ye;if(typeof Ye.then=="function")return Ot(at,Gb(Ye),ct);if(Ye.$$typeof===E)return Ot(at,Db(at,Ye),ct);Wb(at,Ye)}return null}function mt(at,Ye,ct,jt){var sn=Ye!==null?Ye.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return sn!==null?null:_e(at,Ye,""+ct,jt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:return ct.key===sn?ze(at,Ye,ct,jt):null;case g:return ct.key===sn?dt(at,Ye,ct,jt):null;case N:return sn=ct._init,ct=sn(ct._payload),mt(at,Ye,ct,jt)}if(ue(ct)||M(ct))return sn!==null?null:At(at,Ye,ct,jt,null);if(typeof ct.then=="function")return mt(at,Ye,Gb(ct),jt);if(ct.$$typeof===E)return mt(at,Ye,Db(at,ct),jt);Wb(at,ct)}return null}function yt(at,Ye,ct,jt,sn){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return at=at.get(ct)||null,_e(Ye,at,""+jt,sn);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case m:return at=at.get(jt.key===null?ct:jt.key)||null,ze(Ye,at,jt,sn);case g:return at=at.get(jt.key===null?ct:jt.key)||null,dt(Ye,at,jt,sn);case N:var Wn=jt._init;return jt=Wn(jt._payload),yt(at,Ye,ct,jt,sn)}if(ue(jt)||M(jt))return at=at.get(ct)||null,At(Ye,at,jt,sn,null);if(typeof jt.then=="function")return yt(at,Ye,ct,Gb(jt),sn);if(jt.$$typeof===E)return yt(at,Ye,ct,Db(Ye,jt),sn);Wb(Ye,jt)}return null}function Sn(at,Ye,ct,jt){for(var sn=null,Wn=null,fn=Ye,wn=Ye=0,Fa=null;fn!==null&&wn<ct.length;wn++){fn.index>wn?(Fa=fn,fn=null):Fa=fn.sibling;var cr=mt(at,fn,ct[wn],jt);if(cr===null){fn===null&&(fn=Fa);break}c&&fn&&cr.alternate===null&&f(at,fn),Ye=B(cr,Ye,wn),Wn===null?sn=cr:Wn.sibling=cr,Wn=cr,fn=Fa}if(wn===ct.length)return y(at,fn),dr&&Ed(at,wn),sn;if(fn===null){for(;wn<ct.length;wn++)fn=Ot(at,ct[wn],jt),fn!==null&&(Ye=B(fn,Ye,wn),Wn===null?sn=fn:Wn.sibling=fn,Wn=fn);return dr&&Ed(at,wn),sn}for(fn=S(fn);wn<ct.length;wn++)Fa=yt(fn,at,wn,ct[wn],jt),Fa!==null&&(c&&Fa.alternate!==null&&fn.delete(Fa.key===null?wn:Fa.key),Ye=B(Fa,Ye,wn),Wn===null?sn=Fa:Wn.sibling=Fa,Wn=Fa);return c&&fn.forEach(function(gu){return f(at,gu)}),dr&&Ed(at,wn),sn}function yn(at,Ye,ct,jt){if(ct==null)throw Error(r(151));for(var sn=null,Wn=null,fn=Ye,wn=Ye=0,Fa=null,cr=ct.next();fn!==null&&!cr.done;wn++,cr=ct.next()){fn.index>wn?(Fa=fn,fn=null):Fa=fn.sibling;var gu=mt(at,fn,cr.value,jt);if(gu===null){fn===null&&(fn=Fa);break}c&&fn&&gu.alternate===null&&f(at,fn),Ye=B(gu,Ye,wn),Wn===null?sn=gu:Wn.sibling=gu,Wn=gu,fn=Fa}if(cr.done)return y(at,fn),dr&&Ed(at,wn),sn;if(fn===null){for(;!cr.done;wn++,cr=ct.next())cr=Ot(at,cr.value,jt),cr!==null&&(Ye=B(cr,Ye,wn),Wn===null?sn=cr:Wn.sibling=cr,Wn=cr);return dr&&Ed(at,wn),sn}for(fn=S(fn);!cr.done;wn++,cr=ct.next())cr=yt(fn,at,wn,cr.value,jt),cr!==null&&(c&&cr.alternate!==null&&fn.delete(cr.key===null?wn:cr.key),Ye=B(cr,Ye,wn),Wn===null?sn=cr:Wn.sibling=cr,Wn=cr);return c&&fn.forEach(function(bW){return f(at,bW)}),dr&&Ed(at,wn),sn}function kr(at,Ye,ct,jt){if(typeof ct=="object"&&ct!==null&&ct.type===b&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:e:{for(var sn=ct.key;Ye!==null;){if(Ye.key===sn){if(sn=ct.type,sn===b){if(Ye.tag===7){y(at,Ye.sibling),jt=R(Ye,ct.props.children),jt.return=at,at=jt;break e}}else if(Ye.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===N&&sI(sn)===Ye.type){y(at,Ye.sibling),jt=R(Ye,ct.props),Qm(jt,ct),jt.return=at,at=jt;break e}y(at,Ye);break}else f(at,Ye);Ye=Ye.sibling}ct.type===b?(jt=_d(ct.props.children,at.mode,jt,ct.key),jt.return=at,at=jt):(jt=Nb(ct.type,ct.key,ct.props,null,at.mode,jt),Qm(jt,ct),jt.return=at,at=jt)}return oe(at);case g:e:{for(sn=ct.key;Ye!==null;){if(Ye.key===sn)if(Ye.tag===4&&Ye.stateNode.containerInfo===ct.containerInfo&&Ye.stateNode.implementation===ct.implementation){y(at,Ye.sibling),jt=R(Ye,ct.children||[]),jt.return=at,at=jt;break e}else{y(at,Ye);break}else f(at,Ye);Ye=Ye.sibling}jt=sS(ct,at.mode,jt),jt.return=at,at=jt}return oe(at);case N:return sn=ct._init,ct=sn(ct._payload),kr(at,Ye,ct,jt)}if(ue(ct))return Sn(at,Ye,ct,jt);if(M(ct)){if(sn=M(ct),typeof sn!="function")throw Error(r(150));return ct=sn.call(ct),yn(at,Ye,ct,jt)}if(typeof ct.then=="function")return kr(at,Ye,Gb(ct),jt);if(ct.$$typeof===E)return kr(at,Ye,Db(at,ct),jt);Wb(at,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ye!==null&&Ye.tag===6?(y(at,Ye.sibling),jt=R(Ye,ct),jt.return=at,at=jt):(y(at,Ye),jt=iS(ct,at.mode,jt),jt.return=at,at=jt),oe(at)):y(at,Ye)}return function(at,Ye,ct,jt){try{Jm=0;var sn=kr(at,Ye,ct,jt);return gh=null,sn}catch(fn){if(fn===Vm||fn===Ob)throw fn;var Wn=ss(29,fn,null,at.mode);return Wn.lanes=jt,Wn.return=at,Wn}finally{}}}var yh=oI(!0),lI=oI(!1),Ns=J(null),Ho=null;function tu(c){var f=c.alternate;ne(Ca,Ca.current&1),ne(Ns,c),Ho===null&&(f===null||fh.current!==null||f.memoizedState!==null)&&(Ho=c)}function cI(c){if(c.tag===22){if(ne(Ca,Ca.current),ne(Ns,c),Ho===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(Ho=c)}}else nu()}function nu(){ne(Ca,Ca.current),ne(Ns,Ns.current)}function Vl(c){Q(Ns),Ho===c&&(Ho=null),Q(Ca)}var Ca=J(0);function Kb(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||A2(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function BS(c,f,y,S){f=c.memoizedState,y=y(S,f),y=y==null?f:d({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var $S={enqueueSetState:function(c,f,y){c=c._reactInternals;var S=us(),R=Jc(S);R.payload=f,y!=null&&(R.callback=y),f=Qc(c,R,S),f!==null&&(ds(f,c,S),qm(f,c,S))},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var S=us(),R=Jc(S);R.tag=1,R.payload=f,y!=null&&(R.callback=y),f=Qc(c,R,S),f!==null&&(ds(f,c,S),qm(f,c,S))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=us(),S=Jc(y);S.tag=2,f!=null&&(S.callback=f),f=Qc(c,S,y),f!==null&&(ds(f,c,y),qm(f,c,y))}};function uI(c,f,y,S,R,B,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,B,oe):f.prototype&&f.prototype.isPureReactComponent?!A(y,S)||!A(R,B):!0}function dI(c,f,y,S){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,S),f.state!==c&&$S.enqueueReplaceState(f,f.state,null)}function Id(c,f){var y=f;if("ref"in f){y={};for(var S in f)S!=="ref"&&(y[S]=f[S])}if(c=c.defaultProps){y===f&&(y=d({},y));for(var R in c)y[R]===void 0&&(y[R]=c[R])}return y}var Zb=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof da=="object"&&typeof da.emit=="function"){da.emit("uncaughtException",c);return}console.error(c)};function fI(c){Zb(c)}function hI(c){console.error(c)}function pI(c){Zb(c)}function Yb(c,f){try{var y=c.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function mI(c,f,y){try{var S=c.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function zS(c,f,y){return y=Jc(y),y.tag=3,y.payload={element:null},y.callback=function(){Yb(c,f)},y}function gI(c){return c=Jc(c),c.tag=3,c}function yI(c,f,y,S){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var B=S.value;c.payload=function(){return R(B)},c.callback=function(){mI(f,y,S)}}var oe=y.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(c.callback=function(){mI(f,y,S),typeof R!="function"&&(lu===null?lu=new Set([this]):lu.add(this));var _e=S.stack;this.componentDidCatch(S.value,{componentStack:_e!==null?_e:""})})}function bG(c,f,y,S,R){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=y.alternate,f!==null&&$m(f,y,R,!0),y=Ns.current,y!==null){switch(y.tag){case 13:return Ho===null?d2():y.alternate===null&&na===0&&(na=3),y.flags&=-257,y.flags|=65536,y.lanes=R,S===gS?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([S]):f.add(S),h2(c,S,R)),!1;case 22:return y.flags|=65536,S===gS?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([S]):y.add(S)),h2(c,S,R)),!1}throw Error(r(435,y.tag))}return h2(c,S,R),d2(),!1}if(dr)return f=Ns.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,S!==cS&&(c=Error(r(422),{cause:S}),Bm(pn(c,y)))):(S!==cS&&(f=Error(r(423),{cause:S}),Bm(pn(f,y))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,S=pn(S,y),R=zS(c.stateNode,S,R),vS(c,R),na!==4&&(na=2)),!1;var B=Error(r(520),{cause:S});if(B=pn(B,y),sg===null?sg=[B]:sg.push(B),na!==4&&(na=2),f===null)return!0;S=pn(S,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,c=R&-R,y.lanes|=c,c=zS(y.stateNode,S,c),vS(y,c),!1;case 1:if(f=y.type,B=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(lu===null||!lu.has(B))))return y.flags|=65536,R&=-R,y.lanes|=R,R=gI(R),yI(R,c,y,S),vS(y,R),!1}y=y.return}while(y!==null);return!1}var bI=Error(r(461)),Oa=!1;function Xa(c,f,y,S){f.child=c===null?lI(f,null,y,S):yh(f,c.child,y,S)}function vI(c,f,y,S,R){y=y.render;var B=f.ref;if("ref"in S){var oe={};for(var _e in S)_e!=="ref"&&(oe[_e]=S[_e])}else oe=S;return Ad(f),S=ES(c,f,y,oe,B,R),_e=CS(),c!==null&&!Oa?(TS(c,f,R),Hl(c,f,R)):(dr&&_e&&oS(f),f.flags|=1,Xa(c,f,S,R),f.child)}function wI(c,f,y,S,R){if(c===null){var B=y.type;return typeof B=="function"&&!aS(B)&&B.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=B,xI(c,f,B,S,R)):(c=Nb(y.type,null,S,f,f.mode,R),c.ref=f.ref,c.return=f,f.child=c)}if(B=c.child,!ZS(c,R)){var oe=B.memoizedProps;if(y=y.compare,y=y!==null?y:A,y(oe,S)&&c.ref===f.ref)return Hl(c,f,R)}return f.flags|=1,c=Fl(B,S),c.ref=f.ref,c.return=f,f.child=c}function xI(c,f,y,S,R){if(c!==null){var B=c.memoizedProps;if(A(B,S)&&c.ref===f.ref)if(Oa=!1,f.pendingProps=S=B,ZS(c,R))(c.flags&131072)!==0&&(Oa=!0);else return f.lanes=c.lanes,Hl(c,f,R)}return US(c,f,y,S,R)}function _I(c,f,y){var S=f.pendingProps,R=S.children,B=c!==null?c.memoizedState:null;if(S.mode==="hidden"){if((f.flags&128)!==0){if(S=B!==null?B.baseLanes|y:y,c!==null){for(R=f.child=c.child,B=0;R!==null;)B=B|R.lanes|R.childLanes,R=R.sibling;f.childLanes=B&~S}else f.childLanes=0,f.child=null;return SI(c,f,S,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Mb(f,B!==null?B.cachePool:null),B!==null?x3(f,B):xS(),cI(f);else return f.lanes=f.childLanes=536870912,SI(c,f,B!==null?B.baseLanes|y:y,y)}else B!==null?(Mb(f,B.cachePool),x3(f,B),nu(),f.memoizedState=null):(c!==null&&Mb(f,null),xS(),nu());return Xa(c,f,R,y),f.child}function SI(c,f,y,S){var R=mS();return R=R===null?null:{parent:Ea._currentValue,pool:R},f.memoizedState={baseLanes:y,cachePool:R},c!==null&&Mb(f,null),xS(),cI(f),c!==null&&$m(c,f,S,!0),null}function Xb(c,f){var y=f.ref;if(y===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(c===null||c.ref!==y)&&(f.flags|=4194816)}}function US(c,f,y,S,R){return Ad(f),y=ES(c,f,y,S,void 0,R),S=CS(),c!==null&&!Oa?(TS(c,f,R),Hl(c,f,R)):(dr&&S&&oS(f),f.flags|=1,Xa(c,f,y,R),f.child)}function EI(c,f,y,S,R,B){return Ad(f),f.updateQueue=null,y=S3(f,S,y,R),_3(c),S=CS(),c!==null&&!Oa?(TS(c,f,B),Hl(c,f,B)):(dr&&S&&oS(f),f.flags|=1,Xa(c,f,y,B),f.child)}function CI(c,f,y,S,R){if(Ad(f),f.stateNode===null){var B=Uo,oe=y.contextType;typeof oe=="object"&&oe!==null&&(B=oi(oe)),B=new y(S,B),f.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=$S,f.stateNode=B,B._reactInternals=f,B=f.stateNode,B.props=S,B.state=f.memoizedState,B.refs={},yS(f),oe=y.contextType,B.context=typeof oe=="object"&&oe!==null?oi(oe):Uo,B.state=f.memoizedState,oe=y.getDerivedStateFromProps,typeof oe=="function"&&(BS(f,y,oe,S),B.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(oe=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),oe!==B.state&&$S.enqueueReplaceState(B,B.state,null),Wm(f,S,B,R),Gm(),B.state=f.memoizedState),typeof B.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(c===null){B=f.stateNode;var _e=f.memoizedProps,ze=Id(y,_e);B.props=ze;var dt=B.context,At=y.contextType;oe=Uo,typeof At=="object"&&At!==null&&(oe=oi(At));var Ot=y.getDerivedStateFromProps;At=typeof Ot=="function"||typeof B.getSnapshotBeforeUpdate=="function",_e=f.pendingProps!==_e,At||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(_e||dt!==oe)&&dI(f,B,S,oe),Xc=!1;var mt=f.memoizedState;B.state=mt,Wm(f,S,B,R),Gm(),dt=f.memoizedState,_e||mt!==dt||Xc?(typeof Ot=="function"&&(BS(f,y,Ot,S),dt=f.memoizedState),(ze=Xc||uI(f,y,ze,S,mt,dt,oe))?(At||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(f.flags|=4194308)):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=dt),B.props=S,B.state=dt,B.context=oe,S=ze):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{B=f.stateNode,bS(c,f),oe=f.memoizedProps,At=Id(y,oe),B.props=At,Ot=f.pendingProps,mt=B.context,dt=y.contextType,ze=Uo,typeof dt=="object"&&dt!==null&&(ze=oi(dt)),_e=y.getDerivedStateFromProps,(dt=typeof _e=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(oe!==Ot||mt!==ze)&&dI(f,B,S,ze),Xc=!1,mt=f.memoizedState,B.state=mt,Wm(f,S,B,R),Gm();var yt=f.memoizedState;oe!==Ot||mt!==yt||Xc||c!==null&&c.dependencies!==null&&jb(c.dependencies)?(typeof _e=="function"&&(BS(f,y,_e,S),yt=f.memoizedState),(At=Xc||uI(f,y,At,S,mt,yt,ze)||c!==null&&c.dependencies!==null&&jb(c.dependencies))?(dt||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(S,yt,ze),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(S,yt,ze)),typeof B.componentDidUpdate=="function"&&(f.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof B.componentDidUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=yt),B.props=S,B.state=yt,B.context=ze,S=At):(typeof B.componentDidUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),S=!1)}return B=S,Xb(c,f),S=(f.flags&128)!==0,B||S?(B=f.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:B.render(),f.flags|=1,c!==null&&S?(f.child=yh(f,c.child,null,R),f.child=yh(f,null,y,R)):Xa(c,f,y,R),f.memoizedState=B.state,c=f.child):c=Hl(c,f,R),c}function TI(c,f,y,S){return Lm(),f.flags|=256,Xa(c,f,y,S),f.child}var VS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function HS(c){return{baseLanes:c,cachePool:h3()}}function qS(c,f,y){return c=c!==null?c.childLanes&~y:0,f&&(c|=Rs),c}function kI(c,f,y){var S=f.pendingProps,R=!1,B=(f.flags&128)!==0,oe;if((oe=B)||(oe=c!==null&&c.memoizedState===null?!1:(Ca.current&2)!==0),oe&&(R=!0,f.flags&=-129),oe=(f.flags&32)!==0,f.flags&=-33,c===null){if(dr){if(R?tu(f):nu(),dr){var _e=ta,ze;if(ze=_e){e:{for(ze=_e,_e=Vo;ze.nodeType!==8;){if(!_e){_e=null;break e}if(ze=ao(ze.nextSibling),ze===null){_e=null;break e}}_e=ze}_e!==null?(f.memoizedState={dehydrated:_e,treeContext:Sd!==null?{id:Ll,overflow:Bl}:null,retryLane:536870912,hydrationErrors:null},ze=ss(18,null,null,0),ze.stateNode=_e,ze.return=f,f.child=ze,Ci=f,ta=null,ze=!0):ze=!1}ze||Td(f)}if(_e=f.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return A2(_e)?f.lanes=32:f.lanes=536870912,null;Vl(f)}return _e=S.children,S=S.fallback,R?(nu(),R=f.mode,_e=Jb({mode:"hidden",children:_e},R),S=_d(S,R,y,null),_e.return=f,S.return=f,_e.sibling=S,f.child=_e,R=f.child,R.memoizedState=HS(y),R.childLanes=qS(c,oe,y),f.memoizedState=VS,S):(tu(f),GS(f,_e))}if(ze=c.memoizedState,ze!==null&&(_e=ze.dehydrated,_e!==null)){if(B)f.flags&256?(tu(f),f.flags&=-257,f=WS(c,f,y)):f.memoizedState!==null?(nu(),f.child=c.child,f.flags|=128,f=null):(nu(),R=S.fallback,_e=f.mode,S=Jb({mode:"visible",children:S.children},_e),R=_d(R,_e,y,null),R.flags|=2,S.return=f,R.return=f,S.sibling=R,f.child=S,yh(f,c.child,null,y),S=f.child,S.memoizedState=HS(y),S.childLanes=qS(c,oe,y),f.memoizedState=VS,f=R);else if(tu(f),A2(_e)){if(oe=_e.nextSibling&&_e.nextSibling.dataset,oe)var dt=oe.dgst;oe=dt,S=Error(r(419)),S.stack="",S.digest=oe,Bm({value:S,source:null,stack:null}),f=WS(c,f,y)}else if(Oa||$m(c,f,y,!1),oe=(y&c.childLanes)!==0,Oa||oe){if(oe=Fr,oe!==null&&(S=y&-y,S=(S&42)!==0?1:Dt(S),S=(S&(oe.suspendedLanes|y))!==0?0:S,S!==0&&S!==ze.retryLane))throw ze.retryLane=S,no(c,S),ds(oe,c,S),bI;_e.data==="$?"||d2(),f=WS(c,f,y)}else _e.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=ze.treeContext,ta=ao(_e.nextSibling),Ci=f,dr=!0,Cd=null,Vo=!1,c!==null&&(ks[As++]=Ll,ks[As++]=Bl,ks[As++]=Sd,Ll=c.id,Bl=c.overflow,Sd=f),f=GS(f,S.children),f.flags|=4096);return f}return R?(nu(),R=S.fallback,_e=f.mode,ze=c.child,dt=ze.sibling,S=Fl(ze,{mode:"hidden",children:S.children}),S.subtreeFlags=ze.subtreeFlags&65011712,dt!==null?R=Fl(dt,R):(R=_d(R,_e,y,null),R.flags|=2),R.return=f,S.return=f,S.sibling=R,f.child=S,S=R,R=f.child,_e=c.child.memoizedState,_e===null?_e=HS(y):(ze=_e.cachePool,ze!==null?(dt=Ea._currentValue,ze=ze.parent!==dt?{parent:dt,pool:dt}:ze):ze=h3(),_e={baseLanes:_e.baseLanes|y,cachePool:ze}),R.memoizedState=_e,R.childLanes=qS(c,oe,y),f.memoizedState=VS,S):(tu(f),y=c.child,c=y.sibling,y=Fl(y,{mode:"visible",children:S.children}),y.return=f,y.sibling=null,c!==null&&(oe=f.deletions,oe===null?(f.deletions=[c],f.flags|=16):oe.push(c)),f.child=y,f.memoizedState=null,y)}function GS(c,f){return f=Jb({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Jb(c,f){return c=ss(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function WS(c,f,y){return yh(f,c.child,null,y),c=GS(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function AI(c,f,y){c.lanes|=f;var S=c.alternate;S!==null&&(S.lanes|=f),dS(c.return,f,y)}function KS(c,f,y,S,R){var B=c.memoizedState;B===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:R}:(B.isBackwards=f,B.rendering=null,B.renderingStartTime=0,B.last=S,B.tail=y,B.tailMode=R)}function NI(c,f,y){var S=f.pendingProps,R=S.revealOrder,B=S.tail;if(Xa(c,f,S.children,y),S=Ca.current,(S&2)!==0)S=S&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&AI(c,y,f);else if(c.tag===19)AI(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}switch(ne(Ca,S),R){case"forwards":for(y=f.child,R=null;y!==null;)c=y.alternate,c!==null&&Kb(c)===null&&(R=y),y=y.sibling;y=R,y===null?(R=f.child,f.child=null):(R=y.sibling,y.sibling=null),KS(f,!1,R,y,B);break;case"backwards":for(y=null,R=f.child,f.child=null;R!==null;){if(c=R.alternate,c!==null&&Kb(c)===null){f.child=R;break}c=R.sibling,R.sibling=y,y=R,R=c}KS(f,!0,y,null,B);break;case"together":KS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Hl(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),ou|=f.lanes,(y&f.childLanes)===0)if(c!==null){if($m(c,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,y=Fl(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=Fl(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function ZS(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&jb(c)))}function vG(c,f,y){switch(f.tag){case 3:Te(f,f.stateNode.containerInfo),Yc(f,Ea,c.memoizedState.cache),Lm();break;case 27:case 5:Pe(f);break;case 4:Te(f,f.stateNode.containerInfo);break;case 10:Yc(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(tu(f),f.flags|=128,null):(y&f.child.childLanes)!==0?kI(c,f,y):(tu(f),c=Hl(c,f,y),c!==null?c.sibling:null);tu(f);break;case 19:var R=(c.flags&128)!==0;if(S=(y&f.childLanes)!==0,S||($m(c,f,y,!1),S=(y&f.childLanes)!==0),R){if(S)return NI(c,f,y);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),ne(Ca,Ca.current),S)break;return null;case 22:case 23:return f.lanes=0,_I(c,f,y);case 24:Yc(f,Ea,c.memoizedState.cache)}return Hl(c,f,y)}function RI(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps)Oa=!0;else{if(!ZS(c,y)&&(f.flags&128)===0)return Oa=!1,vG(c,f,y);Oa=(c.flags&131072)!==0}else Oa=!1,dr&&(f.flags&1048576)!==0&&s3(f,Ib,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var S=f.elementType,R=S._init;if(S=R(S._payload),f.type=S,typeof S=="function")aS(S)?(c=Id(S,c),f.tag=1,f=CI(null,f,S,c,y)):(f.tag=0,f=US(null,f,S,c,y));else{if(S!=null){if(R=S.$$typeof,R===C){f.tag=11,f=vI(null,f,S,c,y);break e}else if(R===j){f.tag=14,f=wI(null,f,S,c,y);break e}}throw f=q(S)||S,Error(r(306,f,""))}}return f;case 0:return US(c,f,f.type,f.pendingProps,y);case 1:return S=f.type,R=Id(S,f.pendingProps),CI(c,f,S,R,y);case 3:e:{if(Te(f,f.stateNode.containerInfo),c===null)throw Error(r(387));S=f.pendingProps;var B=f.memoizedState;R=B.element,bS(c,f),Wm(f,S,null,y);var oe=f.memoizedState;if(S=oe.cache,Yc(f,Ea,S),S!==B.cache&&fS(f,[Ea],y,!0),Gm(),S=oe.element,B.isDehydrated)if(B={element:S,isDehydrated:!1,cache:oe.cache},f.updateQueue.baseState=B,f.memoizedState=B,f.flags&256){f=TI(c,f,S,y);break e}else if(S!==R){R=pn(Error(r(424)),f),Bm(R),f=TI(c,f,S,y);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(ta=ao(c.firstChild),Ci=f,dr=!0,Cd=null,Vo=!0,y=lI(f,null,S,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Lm(),S===R){f=Hl(c,f,y);break e}Xa(c,f,S,y)}f=f.child}return f;case 26:return Xb(c,f),c===null?(y=Mj(f.type,null,f.pendingProps,null))?f.memoizedState=y:dr||(y=f.type,c=f.pendingProps,S=fv(Ie.current).createElement(y),S[me]=f,S[Re]=c,Qa(S,y,c),$n(S),f.stateNode=S):f.memoizedState=Mj(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Pe(f),c===null&&dr&&(S=f.stateNode=Ij(f.type,f.pendingProps,Ie.current),Ci=f,Vo=!0,R=ta,du(f.type)?(N2=R,ta=ao(S.firstChild)):ta=R),Xa(c,f,f.pendingProps.children,y),Xb(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&dr&&((R=S=ta)&&(S=WG(S,f.type,f.pendingProps,Vo),S!==null?(f.stateNode=S,Ci=f,ta=ao(S.firstChild),Vo=!1,R=!0):R=!1),R||Td(f)),Pe(f),R=f.type,B=f.pendingProps,oe=c!==null?c.memoizedProps:null,S=B.children,C2(R,B)?S=null:oe!==null&&C2(R,oe)&&(f.flags|=32),f.memoizedState!==null&&(R=ES(c,f,dG,null,null,y),mg._currentValue=R),Xb(c,f),Xa(c,f,S,y),f.child;case 6:return c===null&&dr&&((c=y=ta)&&(y=KG(y,f.pendingProps,Vo),y!==null?(f.stateNode=y,Ci=f,ta=null,c=!0):c=!1),c||Td(f)),null;case 13:return kI(c,f,y);case 4:return Te(f,f.stateNode.containerInfo),S=f.pendingProps,c===null?f.child=yh(f,null,S,y):Xa(c,f,S,y),f.child;case 11:return vI(c,f,f.type,f.pendingProps,y);case 7:return Xa(c,f,f.pendingProps,y),f.child;case 8:return Xa(c,f,f.pendingProps.children,y),f.child;case 12:return Xa(c,f,f.pendingProps.children,y),f.child;case 10:return S=f.pendingProps,Yc(f,f.type,S.value),Xa(c,f,S.children,y),f.child;case 9:return R=f.type._context,S=f.pendingProps.children,Ad(f),R=oi(R),S=S(R),f.flags|=1,Xa(c,f,S,y),f.child;case 14:return wI(c,f,f.type,f.pendingProps,y);case 15:return xI(c,f,f.type,f.pendingProps,y);case 19:return NI(c,f,y);case 31:return S=f.pendingProps,y=f.mode,S={mode:S.mode,children:S.children},c===null?(y=Jb(S,y),y.ref=f.ref,f.child=y,y.return=f,f=y):(y=Fl(c.child,S),y.ref=f.ref,f.child=y,y.return=f,f=y),f;case 22:return _I(c,f,y);case 24:return Ad(f),S=oi(Ea),c===null?(R=mS(),R===null&&(R=Fr,B=hS(),R.pooledCache=B,B.refCount++,B!==null&&(R.pooledCacheLanes|=y),R=B),f.memoizedState={parent:S,cache:R},yS(f),Yc(f,Ea,R)):((c.lanes&y)!==0&&(bS(c,f),Wm(f,null,null,y),Gm()),R=c.memoizedState,B=f.memoizedState,R.parent!==S?(R={parent:S,cache:S},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),Yc(f,Ea,S)):(S=B.cache,Yc(f,Ea,S),S!==R.cache&&fS(f,[Ea],y,!0))),Xa(c,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function ql(c){c.flags|=4}function II(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!Bj(f)){if(f=Ns.current,f!==null&&((rr&4194048)===rr?Ho!==null:(rr&62914560)!==rr&&(rr&536870912)===0||f!==Ho))throw Hm=gS,p3;c.flags|=8192}}function Qb(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?F():536870912,c.lanes|=f,xh|=f)}function eg(c,f){if(!dr)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function Zr(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,S=0;if(f)for(var R=c.child;R!==null;)y|=R.lanes|R.childLanes,S|=R.subtreeFlags&65011712,S|=R.flags&65011712,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)y|=R.lanes|R.childLanes,S|=R.subtreeFlags,S|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=S,c.childLanes=y,f}function wG(c,f,y){var S=f.pendingProps;switch(lS(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(f),null;case 1:return Zr(f),null;case 3:return y=f.stateNode,S=null,c!==null&&(S=c.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),zl(Ea),Se(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(Fm(f)?ql(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,c3())),Zr(f),null;case 26:return y=f.memoizedState,c===null?(ql(f),y!==null?(Zr(f),II(f,y)):(Zr(f),f.flags&=-16777217)):y?y!==c.memoizedState?(ql(f),Zr(f),II(f,y)):(Zr(f),f.flags&=-16777217):(c.memoizedProps!==S&&ql(f),Zr(f),f.flags&=-16777217),null;case 27:Qe(f),y=Ie.current;var R=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==S&&ql(f);else{if(!S){if(f.stateNode===null)throw Error(r(166));return Zr(f),null}c=he.current,Fm(f)?o3(f):(c=Ij(R,S,y),f.stateNode=c,ql(f))}return Zr(f),null;case 5:if(Qe(f),y=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==S&&ql(f);else{if(!S){if(f.stateNode===null)throw Error(r(166));return Zr(f),null}if(c=he.current,Fm(f))o3(f);else{switch(R=fv(Ie.current),c){case 1:c=R.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:c=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":c=R.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":c=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":c=R.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof S.is=="string"?R.createElement("select",{is:S.is}):R.createElement("select"),S.multiple?c.multiple=!0:S.size&&(c.size=S.size);break;default:c=typeof S.is=="string"?R.createElement(y,{is:S.is}):R.createElement(y)}}c[me]=f,c[Re]=S;e:for(R=f.child;R!==null;){if(R.tag===5||R.tag===6)c.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===f)break e;for(;R.sibling===null;){if(R.return===null||R.return===f)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}f.stateNode=c;e:switch(Qa(c,y,S),y){case"button":case"input":case"select":case"textarea":c=!!S.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ql(f)}}return Zr(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==S&&ql(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(r(166));if(c=Ie.current,Fm(f)){if(c=f.stateNode,y=f.memoizedProps,S=null,R=Ci,R!==null)switch(R.tag){case 27:case 5:S=R.memoizedProps}c[me]=f,c=!!(c.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||Ej(c.nodeValue,y)),c||Td(f)}else c=fv(c).createTextNode(S),c[me]=f,f.stateNode=c}return Zr(f),null;case 13:if(S=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=Fm(f),S!==null&&S.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[me]=f}else Lm(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Zr(f),R=!1}else R=c3(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=R),R=!0;if(!R)return f.flags&256?(Vl(f),f):(Vl(f),null)}if(Vl(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=S!==null,c=c!==null&&c.memoizedState!==null,y){S=f.child,R=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(R=S.alternate.memoizedState.cachePool.pool);var B=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(B=S.memoizedState.cachePool.pool),B!==R&&(S.flags|=2048)}return y!==c&&y&&(f.child.flags|=8192),Qb(f,f.updateQueue),Zr(f),null;case 4:return Se(),c===null&&w2(f.stateNode.containerInfo),Zr(f),null;case 10:return zl(f.type),Zr(f),null;case 19:if(Q(Ca),R=f.memoizedState,R===null)return Zr(f),null;if(S=(f.flags&128)!==0,B=R.rendering,B===null)if(S)eg(R,!1);else{if(na!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(B=Kb(c),B!==null){for(f.flags|=128,eg(R,!1),c=B.updateQueue,f.updateQueue=c,Qb(f,c),f.subtreeFlags=0,c=y,y=f.child;y!==null;)i3(y,c),y=y.sibling;return ne(Ca,Ca.current&1|2),f.child}c=c.sibling}R.tail!==null&&fe()>nv&&(f.flags|=128,S=!0,eg(R,!1),f.lanes=4194304)}else{if(!S)if(c=Kb(B),c!==null){if(f.flags|=128,S=!0,c=c.updateQueue,f.updateQueue=c,Qb(f,c),eg(R,!0),R.tail===null&&R.tailMode==="hidden"&&!B.alternate&&!dr)return Zr(f),null}else 2*fe()-R.renderingStartTime>nv&&y!==536870912&&(f.flags|=128,S=!0,eg(R,!1),f.lanes=4194304);R.isBackwards?(B.sibling=f.child,f.child=B):(c=R.last,c!==null?c.sibling=B:f.child=B,R.last=B)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=fe(),f.sibling=null,c=Ca.current,ne(Ca,S?c&1|2:c&1),f):(Zr(f),null);case 22:case 23:return Vl(f),_S(),S=f.memoizedState!==null,c!==null?c.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(y&536870912)!==0&&(f.flags&128)===0&&(Zr(f),f.subtreeFlags&6&&(f.flags|=8192)):Zr(f),y=f.updateQueue,y!==null&&Qb(f,y.retryQueue),y=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048),c!==null&&Q(Nd),null;case 24:return y=null,c!==null&&(y=c.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),zl(Ea),Zr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function xG(c,f){switch(lS(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return zl(Ea),Se(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Qe(f),null;case 13:if(Vl(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Lm()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Q(Ca),null;case 4:return Se(),null;case 10:return zl(f.type),null;case 22:case 23:return Vl(f),_S(),c!==null&&Q(Nd),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return zl(Ea),null;case 25:return null;default:return null}}function jI(c,f){switch(lS(f),f.tag){case 3:zl(Ea),Se();break;case 26:case 27:case 5:Qe(f);break;case 4:Se();break;case 13:Vl(f);break;case 19:Q(Ca);break;case 10:zl(f.type);break;case 22:case 23:Vl(f),_S(),c!==null&&Q(Nd);break;case 24:zl(Ea)}}function tg(c,f){try{var y=f.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var R=S.next;y=R;do{if((y.tag&c)===c){S=void 0;var B=y.create,oe=y.inst;S=B(),oe.destroy=S}y=y.next}while(y!==R)}}catch(_e){Dr(f,f.return,_e)}}function ru(c,f,y){try{var S=f.updateQueue,R=S!==null?S.lastEffect:null;if(R!==null){var B=R.next;S=B;do{if((S.tag&c)===c){var oe=S.inst,_e=oe.destroy;if(_e!==void 0){oe.destroy=void 0,R=f;var ze=y,dt=_e;try{dt()}catch(At){Dr(R,ze,At)}}}S=S.next}while(S!==B)}}catch(At){Dr(f,f.return,At)}}function DI(c){var f=c.updateQueue;if(f!==null){var y=c.stateNode;try{w3(f,y)}catch(S){Dr(c,c.return,S)}}}function MI(c,f,y){y.props=Id(c.type,c.memoizedProps),y.state=c.memoizedState;try{y.componentWillUnmount()}catch(S){Dr(c,f,S)}}function ng(c,f){try{var y=c.ref;if(y!==null){switch(c.tag){case 26:case 27:case 5:var S=c.stateNode;break;case 30:S=c.stateNode;break;default:S=c.stateNode}typeof y=="function"?c.refCleanup=y(S):y.current=S}}catch(R){Dr(c,f,R)}}function qo(c,f){var y=c.ref,S=c.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(R){Dr(c,f,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){Dr(c,f,R)}else y.current=null}function OI(c){var f=c.type,y=c.memoizedProps,S=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(R){Dr(c,c.return,R)}}function YS(c,f,y){try{var S=c.stateNode;UG(S,c.type,y,f),S[Re]=f}catch(R){Dr(c,c.return,R)}}function PI(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&du(c.type)||c.tag===4}function XS(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||PI(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&du(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function JS(c,f,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(c,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(c),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=dv));else if(S!==4&&(S===27&&du(c.type)&&(y=c.stateNode,f=null),c=c.child,c!==null))for(JS(c,f,y),c=c.sibling;c!==null;)JS(c,f,y),c=c.sibling}function ev(c,f,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?y.insertBefore(c,f):y.appendChild(c);else if(S!==4&&(S===27&&du(c.type)&&(y=c.stateNode),c=c.child,c!==null))for(ev(c,f,y),c=c.sibling;c!==null;)ev(c,f,y),c=c.sibling}function FI(c){var f=c.stateNode,y=c.memoizedProps;try{for(var S=c.type,R=f.attributes;R.length;)f.removeAttributeNode(R[0]);Qa(f,S,y),f[me]=c,f[Re]=y}catch(B){Dr(c,c.return,B)}}var Gl=!1,la=!1,QS=!1,LI=typeof WeakSet=="function"?WeakSet:Set,Pa=null;function _G(c,f){if(c=c.containerInfo,S2=bv,c=ce(c),we(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else e:{y=(y=c.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var R=S.anchorOffset,B=S.focusNode;S=S.focusOffset;try{y.nodeType,B.nodeType}catch{y=null;break e}var oe=0,_e=-1,ze=-1,dt=0,At=0,Ot=c,mt=null;t:for(;;){for(var yt;Ot!==y||R!==0&&Ot.nodeType!==3||(_e=oe+R),Ot!==B||S!==0&&Ot.nodeType!==3||(ze=oe+S),Ot.nodeType===3&&(oe+=Ot.nodeValue.length),(yt=Ot.firstChild)!==null;)mt=Ot,Ot=yt;for(;;){if(Ot===c)break t;if(mt===y&&++dt===R&&(_e=oe),mt===B&&++At===S&&(ze=oe),(yt=Ot.nextSibling)!==null)break;Ot=mt,mt=Ot.parentNode}Ot=yt}y=_e===-1||ze===-1?null:{start:_e,end:ze}}else y=null}y=y||{start:0,end:0}}else y=null;for(E2={focusedElem:c,selectionRange:y},bv=!1,Pa=f;Pa!==null;)if(f=Pa,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,Pa=c;else for(;Pa!==null;){switch(f=Pa,B=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&B!==null){c=void 0,y=f,R=B.memoizedProps,B=B.memoizedState,S=y.stateNode;try{var Sn=Id(y.type,R,y.elementType===y.type);c=S.getSnapshotBeforeUpdate(Sn,B),S.__reactInternalSnapshotBeforeUpdate=c}catch(yn){Dr(y,y.return,yn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,y=c.nodeType,y===9)k2(c);else if(y===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":k2(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,Pa=c;break}Pa=f.return}}function BI(c,f,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:au(c,y),S&4&&tg(5,y);break;case 1:if(au(c,y),S&4)if(c=y.stateNode,f===null)try{c.componentDidMount()}catch(oe){Dr(y,y.return,oe)}else{var R=Id(y.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(R,f,c.__reactInternalSnapshotBeforeUpdate)}catch(oe){Dr(y,y.return,oe)}}S&64&&DI(y),S&512&&ng(y,y.return);break;case 3:if(au(c,y),S&64&&(c=y.updateQueue,c!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{w3(c,f)}catch(oe){Dr(y,y.return,oe)}}break;case 27:f===null&&S&4&&FI(y);case 26:case 5:au(c,y),f===null&&S&4&&OI(y),S&512&&ng(y,y.return);break;case 12:au(c,y);break;case 13:au(c,y),S&4&&UI(c,y),S&64&&(c=y.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(y=IG.bind(null,y),ZG(c,y))));break;case 22:if(S=y.memoizedState!==null||Gl,!S){f=f!==null&&f.memoizedState!==null||la,R=Gl;var B=la;Gl=S,(la=f)&&!B?iu(c,y,(y.subtreeFlags&8772)!==0):au(c,y),Gl=R,la=B}break;case 30:break;default:au(c,y)}}function $I(c){var f=c.alternate;f!==null&&(c.alternate=null,$I(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&en(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var qr=null,zi=!1;function Wl(c,f,y){for(y=y.child;y!==null;)zI(c,f,y),y=y.sibling}function zI(c,f,y){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(St,y)}catch{}switch(y.tag){case 26:la||qo(y,f),Wl(c,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:la||qo(y,f);var S=qr,R=zi;du(y.type)&&(qr=y.stateNode,zi=!1),Wl(c,f,y),dg(y.stateNode),qr=S,zi=R;break;case 5:la||qo(y,f);case 6:if(S=qr,R=zi,qr=null,Wl(c,f,y),qr=S,zi=R,qr!==null)if(zi)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(y.stateNode)}catch(B){Dr(y,f,B)}else try{qr.removeChild(y.stateNode)}catch(B){Dr(y,f,B)}break;case 18:qr!==null&&(zi?(c=qr,Nj(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,y.stateNode),vg(c)):Nj(qr,y.stateNode));break;case 4:S=qr,R=zi,qr=y.stateNode.containerInfo,zi=!0,Wl(c,f,y),qr=S,zi=R;break;case 0:case 11:case 14:case 15:la||ru(2,y,f),la||ru(4,y,f),Wl(c,f,y);break;case 1:la||(qo(y,f),S=y.stateNode,typeof S.componentWillUnmount=="function"&&MI(y,f,S)),Wl(c,f,y);break;case 21:Wl(c,f,y);break;case 22:la=(S=la)||y.memoizedState!==null,Wl(c,f,y),la=S;break;default:Wl(c,f,y)}}function UI(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{vg(c)}catch(y){Dr(f,f.return,y)}}function SG(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new LI),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new LI),f;default:throw Error(r(435,c.tag))}}function e2(c,f){var y=SG(c);f.forEach(function(S){var R=jG.bind(null,c,S);y.has(S)||(y.add(S),S.then(R,R))})}function os(c,f){var y=f.deletions;if(y!==null)for(var S=0;S<y.length;S++){var R=y[S],B=c,oe=f,_e=oe;e:for(;_e!==null;){switch(_e.tag){case 27:if(du(_e.type)){qr=_e.stateNode,zi=!1;break e}break;case 5:qr=_e.stateNode,zi=!1;break e;case 3:case 4:qr=_e.stateNode.containerInfo,zi=!0;break e}_e=_e.return}if(qr===null)throw Error(r(160));zI(B,oe,R),qr=null,zi=!1,B=R.alternate,B!==null&&(B.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)VI(f,c),f=f.sibling}var ro=null;function VI(c,f){var y=c.alternate,S=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:os(f,c),ls(c),S&4&&(ru(3,c,c.return),tg(3,c),ru(5,c,c.return));break;case 1:os(f,c),ls(c),S&512&&(la||y===null||qo(y,y.return)),S&64&&Gl&&(c=c.updateQueue,c!==null&&(S=c.callbacks,S!==null&&(y=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var R=ro;if(os(f,c),ls(c),S&512&&(la||y===null||qo(y,y.return)),S&4){var B=y!==null?y.memoizedState:null;if(S=c.memoizedState,y===null)if(S===null)if(c.stateNode===null){e:{S=c.type,y=c.memoizedProps,R=R.ownerDocument||R;t:switch(S){case"title":B=R.getElementsByTagName("title")[0],(!B||B[Lt]||B[me]||B.namespaceURI==="http://www.w3.org/2000/svg"||B.hasAttribute("itemprop"))&&(B=R.createElement(S),R.head.insertBefore(B,R.querySelector("head > title"))),Qa(B,S,y),B[me]=c,$n(B),S=B;break e;case"link":var oe=Fj("link","href",R).get(S+(y.href||""));if(oe){for(var _e=0;_e<oe.length;_e++)if(B=oe[_e],B.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&B.getAttribute("rel")===(y.rel==null?null:y.rel)&&B.getAttribute("title")===(y.title==null?null:y.title)&&B.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){oe.splice(_e,1);break t}}B=R.createElement(S),Qa(B,S,y),R.head.appendChild(B);break;case"meta":if(oe=Fj("meta","content",R).get(S+(y.content||""))){for(_e=0;_e<oe.length;_e++)if(B=oe[_e],B.getAttribute("content")===(y.content==null?null:""+y.content)&&B.getAttribute("name")===(y.name==null?null:y.name)&&B.getAttribute("property")===(y.property==null?null:y.property)&&B.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&B.getAttribute("charset")===(y.charSet==null?null:y.charSet)){oe.splice(_e,1);break t}}B=R.createElement(S),Qa(B,S,y),R.head.appendChild(B);break;default:throw Error(r(468,S))}B[me]=c,$n(B),S=B}c.stateNode=S}else Lj(R,c.type,c.stateNode);else c.stateNode=Pj(R,S,c.memoizedProps);else B!==S?(B===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):B.count--,S===null?Lj(R,c.type,c.stateNode):Pj(R,S,c.memoizedProps)):S===null&&c.stateNode!==null&&YS(c,c.memoizedProps,y.memoizedProps)}break;case 27:os(f,c),ls(c),S&512&&(la||y===null||qo(y,y.return)),y!==null&&S&4&&YS(c,c.memoizedProps,y.memoizedProps);break;case 5:if(os(f,c),ls(c),S&512&&(la||y===null||qo(y,y.return)),c.flags&32){R=c.stateNode;try{$c(R,"")}catch(yt){Dr(c,c.return,yt)}}S&4&&c.stateNode!=null&&(R=c.memoizedProps,YS(c,R,y!==null?y.memoizedProps:R)),S&1024&&(QS=!0);break;case 6:if(os(f,c),ls(c),S&4){if(c.stateNode===null)throw Error(r(162));S=c.memoizedProps,y=c.stateNode;try{y.nodeValue=S}catch(yt){Dr(c,c.return,yt)}}break;case 3:if(mv=null,R=ro,ro=hv(f.containerInfo),os(f,c),ro=R,ls(c),S&4&&y!==null&&y.memoizedState.isDehydrated)try{vg(f.containerInfo)}catch(yt){Dr(c,c.return,yt)}QS&&(QS=!1,HI(c));break;case 4:S=ro,ro=hv(c.stateNode.containerInfo),os(f,c),ls(c),ro=S;break;case 12:os(f,c),ls(c);break;case 13:os(f,c),ls(c),c.child.flags&8192&&c.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(s2=fe()),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,e2(c,S)));break;case 22:R=c.memoizedState!==null;var ze=y!==null&&y.memoizedState!==null,dt=Gl,At=la;if(Gl=dt||R,la=At||ze,os(f,c),la=At,Gl=dt,ls(c),S&8192)e:for(f=c.stateNode,f._visibility=R?f._visibility&-2:f._visibility|1,R&&(y===null||ze||Gl||la||jd(c)),y=null,f=c;;){if(f.tag===5||f.tag===26){if(y===null){ze=y=f;try{if(B=ze.stateNode,R)oe=B.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{_e=ze.stateNode;var Ot=ze.memoizedProps.style,mt=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;_e.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(yt){Dr(ze,ze.return,yt)}}}else if(f.tag===6){if(y===null){ze=f;try{ze.stateNode.nodeValue=R?"":ze.memoizedProps}catch(yt){Dr(ze,ze.return,yt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=c.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,e2(c,y))));break;case 19:os(f,c),ls(c),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,e2(c,S)));break;case 30:break;case 21:break;default:os(f,c),ls(c)}}function ls(c){var f=c.flags;if(f&2){try{for(var y,S=c.return;S!==null;){if(PI(S)){y=S;break}S=S.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var R=y.stateNode,B=XS(c);ev(c,B,R);break;case 5:var oe=y.stateNode;y.flags&32&&($c(oe,""),y.flags&=-33);var _e=XS(c);ev(c,_e,oe);break;case 3:case 4:var ze=y.stateNode.containerInfo,dt=XS(c);JS(c,dt,ze);break;default:throw Error(r(161))}}catch(At){Dr(c,c.return,At)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function HI(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;HI(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function au(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)BI(c,f.alternate,f),f=f.sibling}function jd(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return),jd(f);break;case 1:qo(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&MI(f,f.return,y),jd(f);break;case 27:dg(f.stateNode);case 26:case 5:qo(f,f.return),jd(f);break;case 22:f.memoizedState===null&&jd(f);break;case 30:jd(f);break;default:jd(f)}c=c.sibling}}function iu(c,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,R=c,B=f,oe=B.flags;switch(B.tag){case 0:case 11:case 15:iu(R,B,y),tg(4,B);break;case 1:if(iu(R,B,y),S=B,R=S.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(dt){Dr(S,S.return,dt)}if(S=B,R=S.updateQueue,R!==null){var _e=S.stateNode;try{var ze=R.shared.hiddenCallbacks;if(ze!==null)for(R.shared.hiddenCallbacks=null,R=0;R<ze.length;R++)v3(ze[R],_e)}catch(dt){Dr(S,S.return,dt)}}y&&oe&64&&DI(B),ng(B,B.return);break;case 27:FI(B);case 26:case 5:iu(R,B,y),y&&S===null&&oe&4&&OI(B),ng(B,B.return);break;case 12:iu(R,B,y);break;case 13:iu(R,B,y),y&&oe&4&&UI(R,B);break;case 22:B.memoizedState===null&&iu(R,B,y),ng(B,B.return);break;case 30:break;default:iu(R,B,y)}f=f.sibling}}function t2(c,f){var y=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==y&&(c!=null&&c.refCount++,y!=null&&zm(y))}function n2(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&zm(c))}function Go(c,f,y,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)qI(c,f,y,S),f=f.sibling}function qI(c,f,y,S){var R=f.flags;switch(f.tag){case 0:case 11:case 15:Go(c,f,y,S),R&2048&&tg(9,f);break;case 1:Go(c,f,y,S);break;case 3:Go(c,f,y,S),R&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&zm(c)));break;case 12:if(R&2048){Go(c,f,y,S),c=f.stateNode;try{var B=f.memoizedProps,oe=B.id,_e=B.onPostCommit;typeof _e=="function"&&_e(oe,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ze){Dr(f,f.return,ze)}}else Go(c,f,y,S);break;case 13:Go(c,f,y,S);break;case 23:break;case 22:B=f.stateNode,oe=f.alternate,f.memoizedState!==null?B._visibility&2?Go(c,f,y,S):rg(c,f):B._visibility&2?Go(c,f,y,S):(B._visibility|=2,bh(c,f,y,S,(f.subtreeFlags&10256)!==0)),R&2048&&t2(oe,f);break;case 24:Go(c,f,y,S),R&2048&&n2(f.alternate,f);break;default:Go(c,f,y,S)}}function bh(c,f,y,S,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var B=c,oe=f,_e=y,ze=S,dt=oe.flags;switch(oe.tag){case 0:case 11:case 15:bh(B,oe,_e,ze,R),tg(8,oe);break;case 23:break;case 22:var At=oe.stateNode;oe.memoizedState!==null?At._visibility&2?bh(B,oe,_e,ze,R):rg(B,oe):(At._visibility|=2,bh(B,oe,_e,ze,R)),R&&dt&2048&&t2(oe.alternate,oe);break;case 24:bh(B,oe,_e,ze,R),R&&dt&2048&&n2(oe.alternate,oe);break;default:bh(B,oe,_e,ze,R)}f=f.sibling}}function rg(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=c,S=f,R=S.flags;switch(S.tag){case 22:rg(y,S),R&2048&&t2(S.alternate,S);break;case 24:rg(y,S),R&2048&&n2(S.alternate,S);break;default:rg(y,S)}f=f.sibling}}var ag=8192;function vh(c){if(c.subtreeFlags&ag)for(c=c.child;c!==null;)GI(c),c=c.sibling}function GI(c){switch(c.tag){case 26:vh(c),c.flags&ag&&c.memoizedState!==null&&lW(ro,c.memoizedState,c.memoizedProps);break;case 5:vh(c);break;case 3:case 4:var f=ro;ro=hv(c.stateNode.containerInfo),vh(c),ro=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=ag,ag=16777216,vh(c),ag=f):vh(c));break;default:vh(c)}}function WI(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function ig(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Pa=S,ZI(S,c)}WI(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)KI(c),c=c.sibling}function KI(c){switch(c.tag){case 0:case 11:case 15:ig(c),c.flags&2048&&ru(9,c,c.return);break;case 3:ig(c);break;case 12:ig(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,tv(c)):ig(c);break;default:ig(c)}}function tv(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Pa=S,ZI(S,c)}WI(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:ru(8,f,f.return),tv(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,tv(f));break;default:tv(f)}c=c.sibling}}function ZI(c,f){for(;Pa!==null;){var y=Pa;switch(y.tag){case 0:case 11:case 15:ru(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:zm(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,Pa=S;else e:for(y=c;Pa!==null;){S=Pa;var R=S.sibling,B=S.return;if($I(S),S===y){Pa=null;break e}if(R!==null){R.return=B,Pa=R;break e}Pa=B}}}var EG={getCacheForType:function(c){var f=oi(Ea),y=f.data.get(c);return y===void 0&&(y=c(),f.data.set(c,y)),y}},CG=typeof WeakMap=="function"?WeakMap:Map,br=0,Fr=null,Qn=null,rr=0,vr=0,cs=null,su=!1,wh=!1,r2=!1,Kl=0,na=0,ou=0,Dd=0,a2=0,Rs=0,xh=0,sg=null,Ui=null,i2=!1,s2=0,nv=1/0,rv=null,lu=null,Ja=0,cu=null,_h=null,Sh=0,o2=0,l2=null,YI=null,og=0,c2=null;function us(){if((br&2)!==0&&rr!==0)return rr&-rr;if(ae.T!==null){var c=uh;return c!==0?c:g2()}return G()}function XI(){Rs===0&&(Rs=(rr&536870912)===0||dr?vt():536870912);var c=Ns.current;return c!==null&&(c.flags|=32),Rs}function ds(c,f,y){(c===Fr&&(vr===2||vr===9)||c.cancelPendingCommit!==null)&&(Eh(c,0),uu(c,rr,Rs,!1)),nt(c,y),((br&2)===0||c!==Fr)&&(c===Fr&&((br&2)===0&&(Dd|=y),na===4&&uu(c,rr,Rs,!1)),Wo(c))}function JI(c,f,y){if((br&6)!==0)throw Error(r(327));var S=!y&&(f&124)===0&&(f&c.expiredLanes)===0||le(c,f),R=S?AG(c,f):f2(c,f,!0),B=S;do{if(R===0){wh&&!S&&uu(c,f,0,!1);break}else{if(y=c.current.alternate,B&&!TG(y)){R=f2(c,f,!1),B=!1;continue}if(R===2){if(B=f,c.errorRecoveryDisabledLanes&B)var oe=0;else oe=c.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){f=oe;e:{var _e=c;R=sg;var ze=_e.current.memoizedState.isDehydrated;if(ze&&(Eh(_e,oe).flags|=256),oe=f2(_e,oe,!1),oe!==2){if(r2&&!ze){_e.errorRecoveryDisabledLanes|=B,Dd|=B,R=4;break e}B=Ui,Ui=R,B!==null&&(Ui===null?Ui=B:Ui.push.apply(Ui,B))}R=oe}if(B=!1,R!==2)continue}}if(R===1){Eh(c,0),uu(c,f,0,!0);break}e:{switch(S=c,B=R,B){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:uu(S,f,Rs,!su);break e;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(R=s2+300-fe(),10<R)){if(uu(S,f,Rs,!su),Ae(S,0,!0)!==0)break e;S.timeoutHandle=kj(QI.bind(null,S,y,Ui,rv,i2,f,Rs,Dd,xh,su,B,2,-0,0),R);break e}QI(S,y,Ui,rv,i2,f,Rs,Dd,xh,su,B,0,-0,0)}}break}while(!0);Wo(c)}function QI(c,f,y,S,R,B,oe,_e,ze,dt,At,Ot,mt,yt){if(c.timeoutHandle=-1,Ot=f.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(pg={stylesheets:null,count:0,unsuspend:oW},GI(f),Ot=cW(),Ot!==null)){c.cancelPendingCommit=Ot(sj.bind(null,c,f,B,y,S,R,oe,_e,ze,At,1,mt,yt)),uu(c,B,oe,!dt);return}sj(c,f,B,y,S,R,oe,_e,ze)}function TG(c){for(var f=c;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var R=y[S],B=R.getSnapshot;R=R.value;try{if(!si(B(),R))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function uu(c,f,y,S){f&=~a2,f&=~Dd,c.suspendedLanes|=f,c.pingedLanes&=~f,S&&(c.warmLanes|=f),S=c.expirationTimes;for(var R=f;0<R;){var B=31-Kt(R),oe=1<<B;S[B]=-1,R&=~oe}y!==0&&Me(c,y,f)}function av(){return(br&6)===0?(lg(0),!1):!0}function u2(){if(Qn!==null){if(vr===0)var c=Qn.return;else c=Qn,$l=kd=null,kS(c),gh=null,Jm=0,c=Qn;for(;c!==null;)jI(c.alternate,c),c=c.return;Qn=null}}function Eh(c,f){var y=c.timeoutHandle;y!==-1&&(c.timeoutHandle=-1,HG(y)),y=c.cancelPendingCommit,y!==null&&(c.cancelPendingCommit=null,y()),u2(),Fr=c,Qn=y=Fl(c.current,null),rr=f,vr=0,cs=null,su=!1,wh=le(c,f),r2=!1,xh=Rs=a2=Dd=ou=na=0,Ui=sg=null,i2=!1,(f&8)!==0&&(f|=f&32);var S=c.entangledLanes;if(S!==0)for(c=c.entanglements,S&=f;0<S;){var R=31-Kt(S),B=1<<R;f|=c[R],S&=~B}return Kl=f,_n(),y}function ej(c,f){Hn=null,ae.H=qb,f===Vm||f===Ob?(f=y3(),vr=3):f===p3?(f=y3(),vr=4):vr=f===bI?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,cs=f,Qn===null&&(na=1,Yb(c,pn(f,c.current)))}function tj(){var c=ae.H;return ae.H=qb,c===null?qb:c}function nj(){var c=ae.A;return ae.A=EG,c}function d2(){na=4,su||(rr&4194048)!==rr&&Ns.current!==null||(wh=!0),(ou&134217727)===0&&(Dd&134217727)===0||Fr===null||uu(Fr,rr,Rs,!1)}function f2(c,f,y){var S=br;br|=2;var R=tj(),B=nj();(Fr!==c||rr!==f)&&(rv=null,Eh(c,f)),f=!1;var oe=na;e:do try{if(vr!==0&&Qn!==null){var _e=Qn,ze=cs;switch(vr){case 8:u2(),oe=6;break e;case 3:case 2:case 9:case 6:Ns.current===null&&(f=!0);var dt=vr;if(vr=0,cs=null,Ch(c,_e,ze,dt),y&&wh){oe=0;break e}break;default:dt=vr,vr=0,cs=null,Ch(c,_e,ze,dt)}}kG(),oe=na;break}catch(At){ej(c,At)}while(!0);return f&&c.shellSuspendCounter++,$l=kd=null,br=S,ae.H=R,ae.A=B,Qn===null&&(Fr=null,rr=0,_n()),oe}function kG(){for(;Qn!==null;)rj(Qn)}function AG(c,f){var y=br;br|=2;var S=tj(),R=nj();Fr!==c||rr!==f?(rv=null,nv=fe()+500,Eh(c,f)):wh=le(c,f);e:do try{if(vr!==0&&Qn!==null){f=Qn;var B=cs;t:switch(vr){case 1:vr=0,cs=null,Ch(c,f,B,1);break;case 2:case 9:if(m3(B)){vr=0,cs=null,aj(f);break}f=function(){vr!==2&&vr!==9||Fr!==c||(vr=7),Wo(c)},B.then(f,f);break e;case 3:vr=7;break e;case 4:vr=5;break e;case 7:m3(B)?(vr=0,cs=null,aj(f)):(vr=0,cs=null,Ch(c,f,B,7));break;case 5:var oe=null;switch(Qn.tag){case 26:oe=Qn.memoizedState;case 5:case 27:var _e=Qn;if(!oe||Bj(oe)){vr=0,cs=null;var ze=_e.sibling;if(ze!==null)Qn=ze;else{var dt=_e.return;dt!==null?(Qn=dt,iv(dt)):Qn=null}break t}}vr=0,cs=null,Ch(c,f,B,5);break;case 6:vr=0,cs=null,Ch(c,f,B,6);break;case 8:u2(),na=6;break e;default:throw Error(r(462))}}NG();break}catch(At){ej(c,At)}while(!0);return $l=kd=null,ae.H=S,ae.A=R,br=y,Qn!==null?0:(Fr=null,rr=0,_n(),na)}function NG(){for(;Qn!==null&&!Ee();)rj(Qn)}function rj(c){var f=RI(c.alternate,c,Kl);c.memoizedProps=c.pendingProps,f===null?iv(c):Qn=f}function aj(c){var f=c,y=f.alternate;switch(f.tag){case 15:case 0:f=EI(y,f,f.pendingProps,f.type,void 0,rr);break;case 11:f=EI(y,f,f.pendingProps,f.type.render,f.ref,rr);break;case 5:kS(f);default:jI(y,f),f=Qn=i3(f,Kl),f=RI(y,f,Kl)}c.memoizedProps=c.pendingProps,f===null?iv(c):Qn=f}function Ch(c,f,y,S){$l=kd=null,kS(f),gh=null,Jm=0;var R=f.return;try{if(bG(c,R,f,y,rr)){na=1,Yb(c,pn(y,c.current)),Qn=null;return}}catch(B){if(R!==null)throw Qn=R,B;na=1,Yb(c,pn(y,c.current)),Qn=null;return}f.flags&32768?(dr||S===1?c=!0:wh||(rr&536870912)!==0?c=!1:(su=c=!0,(S===2||S===9||S===3||S===6)&&(S=Ns.current,S!==null&&S.tag===13&&(S.flags|=16384))),ij(f,c)):iv(f)}function iv(c){var f=c;do{if((f.flags&32768)!==0){ij(f,su);return}c=f.return;var y=wG(f.alternate,f,Kl);if(y!==null){Qn=y;return}if(f=f.sibling,f!==null){Qn=f;return}Qn=f=c}while(f!==null);na===0&&(na=5)}function ij(c,f){do{var y=xG(c.alternate,c);if(y!==null){y.flags&=32767,Qn=y;return}if(y=c.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(c=c.sibling,c!==null)){Qn=c;return}Qn=c=y}while(c!==null);na=6,Qn=null}function sj(c,f,y,S,R,B,oe,_e,ze){c.cancelPendingCommit=null;do sv();while(Ja!==0);if((br&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(B=f.lanes|f.childLanes,B|=Ya,ye(c,y,B,oe,_e,ze),c===Fr&&(Qn=Fr=null,rr=0),_h=f,cu=c,Sh=y,o2=B,l2=R,YI=S,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,DG(Fe,function(){return dj(),null})):(c.callbackNode=null,c.callbackPriority=0),S=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||S){S=ae.T,ae.T=null,R=te.p,te.p=2,oe=br,br|=4;try{_G(c,f,y)}finally{br=oe,te.p=R,ae.T=S}}Ja=1,oj(),lj(),cj()}}function oj(){if(Ja===1){Ja=0;var c=cu,f=_h,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=ae.T,ae.T=null;var S=te.p;te.p=2;var R=br;br|=4;try{VI(f,c);var B=E2,oe=ce(c.containerInfo),_e=B.focusedElem,ze=B.selectionRange;if(oe!==_e&&_e&&_e.ownerDocument&&re(_e.ownerDocument.documentElement,_e)){if(ze!==null&&we(_e)){var dt=ze.start,At=ze.end;if(At===void 0&&(At=dt),"selectionStart"in _e)_e.selectionStart=dt,_e.selectionEnd=Math.min(At,_e.value.length);else{var Ot=_e.ownerDocument||document,mt=Ot&&Ot.defaultView||window;if(mt.getSelection){var yt=mt.getSelection(),Sn=_e.textContent.length,yn=Math.min(ze.start,Sn),kr=ze.end===void 0?yn:Math.min(ze.end,Sn);!yt.extend&&yn>kr&&(oe=kr,kr=yn,yn=oe);var at=X(_e,yn),Ye=X(_e,kr);if(at&&Ye&&(yt.rangeCount!==1||yt.anchorNode!==at.node||yt.anchorOffset!==at.offset||yt.focusNode!==Ye.node||yt.focusOffset!==Ye.offset)){var ct=Ot.createRange();ct.setStart(at.node,at.offset),yt.removeAllRanges(),yn>kr?(yt.addRange(ct),yt.extend(Ye.node,Ye.offset)):(ct.setEnd(Ye.node,Ye.offset),yt.addRange(ct))}}}}for(Ot=[],yt=_e;yt=yt.parentNode;)yt.nodeType===1&&Ot.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<Ot.length;_e++){var jt=Ot[_e];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}bv=!!S2,E2=S2=null}finally{br=R,te.p=S,ae.T=y}}c.current=f,Ja=2}}function lj(){if(Ja===2){Ja=0;var c=cu,f=_h,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=ae.T,ae.T=null;var S=te.p;te.p=2;var R=br;br|=4;try{BI(c,f.alternate,f)}finally{br=R,te.p=S,ae.T=y}}Ja=3}}function cj(){if(Ja===4||Ja===3){Ja=0,Ne();var c=cu,f=_h,y=Sh,S=YI;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Ja=5:(Ja=0,_h=cu=null,uj(c,c.pendingLanes));var R=c.pendingLanes;if(R===0&&(lu=null),ge(y),f=f.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(St,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=ae.T,R=te.p,te.p=2,ae.T=null;try{for(var B=c.onRecoverableError,oe=0;oe<S.length;oe++){var _e=S[oe];B(_e.value,{componentStack:_e.stack})}}finally{ae.T=f,te.p=R}}(Sh&3)!==0&&sv(),Wo(c),R=c.pendingLanes,(y&4194090)!==0&&(R&42)!==0?c===c2?og++:(og=0,c2=c):og=0,lg(0)}}function uj(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,zm(f)))}function sv(c){return oj(),lj(),cj(),dj()}function dj(){if(Ja!==5)return!1;var c=cu,f=o2;o2=0;var y=ge(Sh),S=ae.T,R=te.p;try{te.p=32>y?32:y,ae.T=null,y=l2,l2=null;var B=cu,oe=Sh;if(Ja=0,_h=cu=null,Sh=0,(br&6)!==0)throw Error(r(331));var _e=br;if(br|=4,KI(B.current),qI(B,B.current,oe,y),br=_e,lg(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(St,B)}catch{}return!0}finally{te.p=R,ae.T=S,uj(c,f)}}function fj(c,f,y){f=pn(y,f),f=zS(c.stateNode,f,2),c=Qc(c,f,2),c!==null&&(nt(c,2),Wo(c))}function Dr(c,f,y){if(c.tag===3)fj(c,c,y);else for(;f!==null;){if(f.tag===3){fj(f,c,y);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(lu===null||!lu.has(S))){c=pn(y,c),y=gI(2),S=Qc(f,y,2),S!==null&&(yI(y,S,f,c),nt(S,2),Wo(S));break}}f=f.return}}function h2(c,f,y){var S=c.pingCache;if(S===null){S=c.pingCache=new CG;var R=new Set;S.set(f,R)}else R=S.get(f),R===void 0&&(R=new Set,S.set(f,R));R.has(y)||(r2=!0,R.add(y),c=RG.bind(null,c,f,y),f.then(c,c))}function RG(c,f,y){var S=c.pingCache;S!==null&&S.delete(f),c.pingedLanes|=c.suspendedLanes&y,c.warmLanes&=~y,Fr===c&&(rr&y)===y&&(na===4||na===3&&(rr&62914560)===rr&&300>fe()-s2?(br&2)===0&&Eh(c,0):a2|=y,xh===rr&&(xh=0)),Wo(c)}function hj(c,f){f===0&&(f=F()),c=no(c,f),c!==null&&(nt(c,f),Wo(c))}function IG(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),hj(c,y)}function jG(c,f){var y=0;switch(c.tag){case 13:var S=c.stateNode,R=c.memoizedState;R!==null&&(y=R.retryLane);break;case 19:S=c.stateNode;break;case 22:S=c.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(f),hj(c,y)}function DG(c,f){return je(c,f)}var ov=null,Th=null,p2=!1,lv=!1,m2=!1,Md=0;function Wo(c){c!==Th&&c.next===null&&(Th===null?ov=Th=c:Th=Th.next=c),lv=!0,p2||(p2=!0,OG())}function lg(c,f){if(!m2&&lv){m2=!0;do for(var y=!1,S=ov;S!==null;){if(c!==0){var R=S.pendingLanes;if(R===0)var B=0;else{var oe=S.suspendedLanes,_e=S.pingedLanes;B=(1<<31-Kt(42|c)+1)-1,B&=R&~(oe&~_e),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(y=!0,yj(S,B))}else B=rr,B=Ae(S,S===Fr?B:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(B&3)===0||le(S,B)||(y=!0,yj(S,B));S=S.next}while(y);m2=!1}}function MG(){pj()}function pj(){lv=p2=!1;var c=0;Md!==0&&(VG()&&(c=Md),Md=0);for(var f=fe(),y=null,S=ov;S!==null;){var R=S.next,B=mj(S,f);B===0?(S.next=null,y===null?ov=R:y.next=R,R===null&&(Th=y)):(y=S,(c!==0||(B&3)!==0)&&(lv=!0)),S=R}lg(c)}function mj(c,f){for(var y=c.suspendedLanes,S=c.pingedLanes,R=c.expirationTimes,B=c.pendingLanes&-62914561;0<B;){var oe=31-Kt(B),_e=1<<oe,ze=R[oe];ze===-1?((_e&y)===0||(_e&S)!==0)&&(R[oe]=ft(_e,f)):ze<=f&&(c.expiredLanes|=_e),B&=~_e}if(f=Fr,y=rr,y=Ae(c,c===f?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),S=c.callbackNode,y===0||c===f&&(vr===2||vr===9)||c.cancelPendingCommit!==null)return S!==null&&S!==null&&z(S),c.callbackNode=null,c.callbackPriority=0;if((y&3)===0||le(c,y)){if(f=y&-y,f===c.callbackPriority)return f;switch(S!==null&&z(S),ge(y)){case 2:case 8:y=xe;break;case 32:y=Fe;break;case 268435456:y=We;break;default:y=Fe}return S=gj.bind(null,c),y=je(y,S),c.callbackPriority=f,c.callbackNode=y,f}return S!==null&&S!==null&&z(S),c.callbackPriority=2,c.callbackNode=null,2}function gj(c,f){if(Ja!==0&&Ja!==5)return c.callbackNode=null,c.callbackPriority=0,null;var y=c.callbackNode;if(sv()&&c.callbackNode!==y)return null;var S=rr;return S=Ae(c,c===Fr?S:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),S===0?null:(JI(c,S,f),mj(c,fe()),c.callbackNode!=null&&c.callbackNode===y?gj.bind(null,c):null)}function yj(c,f){if(sv())return null;JI(c,f,!0)}function OG(){qG(function(){(br&6)!==0?je(ee,MG):pj()})}function g2(){return Md===0&&(Md=vt()),Md}function bj(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Al(""+c)}function vj(c,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,c.id&&y.setAttribute("form",c.id),f.parentNode.insertBefore(y,f),c=new FormData(c),y.parentNode.removeChild(y),c}function PG(c,f,y,S,R){if(f==="submit"&&y&&y.stateNode===R){var B=bj((R[Re]||null).action),oe=S.submitter;oe&&(f=(f=oe[Re]||null)?bj(f.formAction):oe.getAttribute("formAction"),f!==null&&(B=f,oe=null));var _e=new Gf("action","action",null,S,R);c.push({event:_e,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Md!==0){var ze=oe?vj(R,oe):new FormData(R);PS(y,{pending:!0,data:ze,method:R.method,action:B},null,ze)}}else typeof B=="function"&&(_e.preventDefault(),ze=oe?vj(R,oe):new FormData(R),PS(y,{pending:!0,data:ze,method:R.method,action:B},B,ze))},currentTarget:R}]})}}for(var y2=0;y2<Jt.length;y2++){var b2=Jt[y2],FG=b2.toLowerCase(),LG=b2[0].toUpperCase()+b2.slice(1);zt(FG,"on"+LG)}zt(ht,"onAnimationEnd"),zt(bt,"onAnimationIteration"),zt(wt,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(kt,"onTransitionRun"),zt(Vt,"onTransitionStart"),zt(Yt,"onTransitionCancel"),zt($t,"onTransitionEnd"),Oo("onMouseEnter",["mouseout","mouseover"]),Oo("onMouseLeave",["mouseout","mouseover"]),Oo("onPointerEnter",["pointerout","pointerover"]),Oo("onPointerLeave",["pointerout","pointerover"]),Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cg));function wj(c,f){f=(f&4)!==0;for(var y=0;y<c.length;y++){var S=c[y],R=S.event;S=S.listeners;e:{var B=void 0;if(f)for(var oe=S.length-1;0<=oe;oe--){var _e=S[oe],ze=_e.instance,dt=_e.currentTarget;if(_e=_e.listener,ze!==B&&R.isPropagationStopped())break e;B=_e,R.currentTarget=dt;try{B(R)}catch(At){Zb(At)}R.currentTarget=null,B=ze}else for(oe=0;oe<S.length;oe++){if(_e=S[oe],ze=_e.instance,dt=_e.currentTarget,_e=_e.listener,ze!==B&&R.isPropagationStopped())break e;B=_e,R.currentTarget=dt;try{B(R)}catch(At){Zb(At)}R.currentTarget=null,B=ze}}}}function er(c,f){var y=f[pt];y===void 0&&(y=f[pt]=new Set);var S=c+"__bubble";y.has(S)||(xj(f,c,2,!1),y.add(S))}function v2(c,f,y){var S=0;f&&(S|=4),xj(y,c,S,f)}var cv="_reactListening"+Math.random().toString(36).slice(2);function w2(c){if(!c[cv]){c[cv]=!0,xi.forEach(function(y){y!=="selectionchange"&&(BG.has(y)||v2(y,!1,c),v2(y,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[cv]||(f[cv]=!0,v2("selectionchange",!1,f))}}function xj(c,f,y,S){switch(qj(f)){case 2:var R=fW;break;case 8:R=hW;break;default:R=M2}y=R.bind(null,f,y,c),R=void 0,!Sm||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(R=!0),S?R!==void 0?c.addEventListener(f,y,{capture:!0,passive:R}):c.addEventListener(f,y,!0):R!==void 0?c.addEventListener(f,y,{passive:R}):c.addEventListener(f,y,!1)}function x2(c,f,y,S,R){var B=S;if((f&1)===0&&(f&2)===0&&S!==null)e:for(;;){if(S===null)return;var oe=S.tag;if(oe===3||oe===4){var _e=S.stateNode.containerInfo;if(_e===R)break;if(oe===4)for(oe=S.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===R)return;oe=oe.return}for(;_e!==null;){if(oe=Nn(_e),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){S=B=oe;continue e}_e=_e.parentNode}}S=S.return}Uc(function(){var dt=B,At=Hf(y),Ot=[];e:{var mt=Gt.get(c);if(mt!==void 0){var yt=Gf,Sn=c;switch(c){case"keypress":if(qc(y)===0)break e;case"keydown":case"keyup":yt=eh;break;case"focusin":Sn="focus",yt=Gc;break;case"focusout":Sn="blur",yt=Gc;break;case"beforeblur":case"afterblur":yt=Gc;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=bb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Rm;break;case ht:case bt:case wt:yt=vb;break;case $t:yt=Im;break;case"scroll":case"scrollend":yt=Wf;break;case"wheel":yt=nh;break;case"copy":case"cut":case"paste":yt=Jf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Nm;break;case"toggle":case"beforetoggle":yt=_b}var yn=(f&4)!==0,kr=!yn&&(c==="scroll"||c==="scrollend"),at=yn?mt!==null?mt+"Capture":null:mt;yn=[];for(var Ye=dt,ct;Ye!==null;){var jt=Ye;if(ct=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||ct===null||at===null||(jt=Il(Ye,at),jt!=null&&yn.push(ug(Ye,jt,ct))),kr)break;Ye=Ye.return}0<yn.length&&(mt=new yt(mt,Sn,null,y,At),Ot.push({event:mt,listeners:yn}))}}if((f&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",yt=c==="mouseout"||c==="pointerout",mt&&y!==Ss&&(Sn=y.relatedTarget||y.fromElement)&&(Nn(Sn)||Sn[Ve]))break e;if((yt||mt)&&(mt=At.window===At?At:(mt=At.ownerDocument)?mt.defaultView||mt.parentWindow:window,yt?(Sn=y.relatedTarget||y.toElement,yt=dt,Sn=Sn?Nn(Sn):null,Sn!==null&&(kr=i(Sn),yn=Sn.tag,Sn!==kr||yn!==5&&yn!==27&&yn!==6)&&(Sn=null)):(yt=null,Sn=dt),yt!==Sn)){if(yn=Zf,jt="onMouseLeave",at="onMouseEnter",Ye="mouse",(c==="pointerout"||c==="pointerover")&&(yn=Nm,jt="onPointerLeave",at="onPointerEnter",Ye="pointer"),kr=yt==null?mt:Sr(yt),ct=Sn==null?mt:Sr(Sn),mt=new yn(jt,Ye+"leave",yt,y,At),mt.target=kr,mt.relatedTarget=ct,jt=null,Nn(At)===dt&&(yn=new yn(at,Ye+"enter",Sn,y,At),yn.target=ct,yn.relatedTarget=kr,jt=yn),kr=jt,yt&&Sn)t:{for(yn=yt,at=Sn,Ye=0,ct=yn;ct;ct=kh(ct))Ye++;for(ct=0,jt=at;jt;jt=kh(jt))ct++;for(;0<Ye-ct;)yn=kh(yn),Ye--;for(;0<ct-Ye;)at=kh(at),ct--;for(;Ye--;){if(yn===at||at!==null&&yn===at.alternate)break t;yn=kh(yn),at=kh(at)}yn=null}else yn=null;yt!==null&&_j(Ot,mt,yt,yn,!1),Sn!==null&&kr!==null&&_j(Ot,kr,Sn,yn,!0)}}e:{if(mt=dt?Sr(dt):window,yt=mt.nodeName&&mt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&mt.type==="file")var sn=xd;else if(ih(mt))if(Cs)sn=Zc;else{sn=Pl;var Wn=Ab}else yt=mt.nodeName,!yt||yt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&_m(dt.elementType)&&(sn=xd):sn=Pm;if(sn&&(sn=sn(c,dt))){Om(Ot,sn,y,At);break e}Wn&&Wn(c,mt,dt),c==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&Lc(mt,"number",mt.value)}switch(Wn=dt?Sr(dt):window,c){case"focusin":(ih(Wn)||Wn.contentEditable==="true")&&(Be=Wn,Ze=dt,Xe=null);break;case"focusout":Xe=Ze=Be=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,He(Ot,y,At);break;case"selectionchange":if(Oe)break;case"keydown":case"keyup":He(Ot,y,At)}var fn;if(vd)e:{switch(c){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else Ol?Mm(c,y)&&(wn="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(wn="onCompositionStart");wn&&(rh&&y.locale!=="ko"&&(Ol||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&Ol&&(fn=Hc()):(Es=At,qf="value"in Es?Es.value:Es.textContent,Ol=!0)),Wn=uv(dt,wn),0<Wn.length&&(wn=new Qf(wn,c,null,y,At),Ot.push({event:wn,listeners:Wn}),fn?wn.data=fn:(fn=Eb(y),fn!==null&&(wn.data=fn)))),(fn=tS?Cb(c,y):nS(c,y))&&(wn=uv(dt,"onBeforeInput"),0<wn.length&&(Wn=new Qf("onBeforeInput","beforeinput",null,y,At),Ot.push({event:Wn,listeners:wn}),Wn.data=fn)),PG(Ot,c,dt,y,At)}wj(Ot,f)})}function ug(c,f,y){return{instance:c,listener:f,currentTarget:y}}function uv(c,f){for(var y=f+"Capture",S=[];c!==null;){var R=c,B=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||B===null||(R=Il(c,y),R!=null&&S.unshift(ug(c,R,B)),R=Il(c,f),R!=null&&S.push(ug(c,R,B))),c.tag===3)return S;c=c.return}return[]}function kh(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function _j(c,f,y,S,R){for(var B=f._reactName,oe=[];y!==null&&y!==S;){var _e=y,ze=_e.alternate,dt=_e.stateNode;if(_e=_e.tag,ze!==null&&ze===S)break;_e!==5&&_e!==26&&_e!==27||dt===null||(ze=dt,R?(dt=Il(y,B),dt!=null&&oe.unshift(ug(y,dt,ze))):R||(dt=Il(y,B),dt!=null&&oe.push(ug(y,dt,ze)))),y=y.return}oe.length!==0&&c.push({event:f,listeners:oe})}var $G=/\r\n?/g,zG=/\u0000|\uFFFD/g;function Sj(c){return(typeof c=="string"?c:""+c).replace($G,`
`).replace(zG,"")}function Ej(c,f){return f=Sj(f),Sj(c)===f}function dv(){}function Tr(c,f,y,S,R,B){switch(y){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||$c(c,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&$c(c,""+S);break;case"className":Cl(c,"class",S);break;case"tabIndex":Cl(c,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Cl(c,y,S);break;case"style":gb(c,S,B);break;case"data":if(f!=="object"){Cl(c,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||y!=="href")){c.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){c.removeAttribute(y);break}S=Al(""+S),c.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){c.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof B=="function"&&(y==="formAction"?(f!=="input"&&Tr(c,f,"name",R.name,R,null),Tr(c,f,"formEncType",R.formEncType,R,null),Tr(c,f,"formMethod",R.formMethod,R,null),Tr(c,f,"formTarget",R.formTarget,R,null)):(Tr(c,f,"encType",R.encType,R,null),Tr(c,f,"method",R.method,R,null),Tr(c,f,"target",R.target,R,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){c.removeAttribute(y);break}S=Al(""+S),c.setAttribute(y,S);break;case"onClick":S!=null&&(c.onclick=dv);break;case"onScroll":S!=null&&er("scroll",c);break;case"onScrollEnd":S!=null&&er("scrollend",c);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=y}}break;case"multiple":c.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":c.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){c.removeAttribute("xlink:href");break}y=Al(""+S),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,""+S):c.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,""):c.removeAttribute(y);break;case"capture":case"download":S===!0?c.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,S):c.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?c.setAttribute(y,S):c.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?c.removeAttribute(y):c.setAttribute(y,S);break;case"popover":er("beforetoggle",c),er("toggle",c),eo(c,"popover",S);break;case"xlinkActuate":as(c,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":as(c,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":as(c,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":as(c,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":as(c,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":as(c,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":as(c,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":as(c,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":as(c,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":eo(c,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Si.get(y)||y,eo(c,y,S))}}function _2(c,f,y,S,R,B){switch(y){case"style":gb(c,S,B);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=y}}break;case"children":typeof S=="string"?$c(c,S):(typeof S=="number"||typeof S=="bigint")&&$c(c,""+S);break;case"onScroll":S!=null&&er("scroll",c);break;case"onScrollEnd":S!=null&&er("scrollend",c);break;case"onClick":S!=null&&(c.onclick=dv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Do.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(R=y.endsWith("Capture"),f=y.slice(2,R?y.length-7:void 0),B=c[Re]||null,B=B!=null?B[y]:null,typeof B=="function"&&c.removeEventListener(f,B,R),typeof S=="function")){typeof B!="function"&&B!==null&&(y in c?c[y]=null:c.hasAttribute(y)&&c.removeAttribute(y)),c.addEventListener(f,S,R);break e}y in c?c[y]=S:S===!0?c.setAttribute(y,""):eo(c,y,S)}}}function Qa(c,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":er("error",c),er("load",c);var S=!1,R=!1,B;for(B in y)if(y.hasOwnProperty(B)){var oe=y[B];if(oe!=null)switch(B){case"src":S=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Tr(c,f,B,oe,y,null)}}R&&Tr(c,f,"srcSet",y.srcSet,y,null),S&&Tr(c,f,"src",y.src,y,null);return;case"input":er("invalid",c);var _e=B=oe=R=null,ze=null,dt=null;for(S in y)if(y.hasOwnProperty(S)){var At=y[S];if(At!=null)switch(S){case"name":R=At;break;case"type":oe=At;break;case"checked":ze=At;break;case"defaultChecked":dt=At;break;case"value":B=At;break;case"defaultValue":_e=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,f));break;default:Tr(c,f,S,At,y,null)}}wm(c,B,_e,ze,dt,oe,R,!1),Lo(c);return;case"select":er("invalid",c),S=oe=B=null;for(R in y)if(y.hasOwnProperty(R)&&(_e=y[R],_e!=null))switch(R){case"value":B=_e;break;case"defaultValue":oe=_e;break;case"multiple":S=_e;default:Tr(c,f,R,_e,y,null)}f=B,y=oe,c.multiple=!!S,f!=null?kl(c,!!S,f,!1):y!=null&&kl(c,!!S,y,!0);return;case"textarea":er("invalid",c),B=R=S=null;for(oe in y)if(y.hasOwnProperty(oe)&&(_e=y[oe],_e!=null))switch(oe){case"value":S=_e;break;case"defaultValue":R=_e;break;case"children":B=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(91));break;default:Tr(c,f,oe,_e,y,null)}xm(c,S,R,B),Lo(c);return;case"option":for(ze in y)if(y.hasOwnProperty(ze)&&(S=y[ze],S!=null))switch(ze){case"selected":c.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:Tr(c,f,ze,S,y,null)}return;case"dialog":er("beforetoggle",c),er("toggle",c),er("cancel",c),er("close",c);break;case"iframe":case"object":er("load",c);break;case"video":case"audio":for(S=0;S<cg.length;S++)er(cg[S],c);break;case"image":er("error",c),er("load",c);break;case"details":er("toggle",c);break;case"embed":case"source":case"link":er("error",c),er("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in y)if(y.hasOwnProperty(dt)&&(S=y[dt],S!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Tr(c,f,dt,S,y,null)}return;default:if(_m(f)){for(At in y)y.hasOwnProperty(At)&&(S=y[At],S!==void 0&&_2(c,f,At,S,y,void 0));return}}for(_e in y)y.hasOwnProperty(_e)&&(S=y[_e],S!=null&&Tr(c,f,_e,S,y,null))}function UG(c,f,y,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,B=null,oe=null,_e=null,ze=null,dt=null,At=null;for(yt in y){var Ot=y[yt];if(y.hasOwnProperty(yt)&&Ot!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":ze=Ot;default:S.hasOwnProperty(yt)||Tr(c,f,yt,null,S,Ot)}}for(var mt in S){var yt=S[mt];if(Ot=y[mt],S.hasOwnProperty(mt)&&(yt!=null||Ot!=null))switch(mt){case"type":B=yt;break;case"name":R=yt;break;case"checked":dt=yt;break;case"defaultChecked":At=yt;break;case"value":oe=yt;break;case"defaultValue":_e=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,f));break;default:yt!==Ot&&Tr(c,f,mt,yt,S,Ot)}}Fc(c,oe,_e,ze,dt,At,B,R);return;case"select":yt=oe=_e=mt=null;for(B in y)if(ze=y[B],y.hasOwnProperty(B)&&ze!=null)switch(B){case"value":break;case"multiple":yt=ze;default:S.hasOwnProperty(B)||Tr(c,f,B,null,S,ze)}for(R in S)if(B=S[R],ze=y[R],S.hasOwnProperty(R)&&(B!=null||ze!=null))switch(R){case"value":mt=B;break;case"defaultValue":_e=B;break;case"multiple":oe=B;default:B!==ze&&Tr(c,f,R,B,S,ze)}f=_e,y=oe,S=yt,mt!=null?kl(c,!!y,mt,!1):!!S!=!!y&&(f!=null?kl(c,!!y,f,!0):kl(c,!!y,y?[]:"",!1));return;case"textarea":yt=mt=null;for(_e in y)if(R=y[_e],y.hasOwnProperty(_e)&&R!=null&&!S.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Tr(c,f,_e,null,S,R)}for(oe in S)if(R=S[oe],B=y[oe],S.hasOwnProperty(oe)&&(R!=null||B!=null))switch(oe){case"value":mt=R;break;case"defaultValue":yt=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==B&&Tr(c,f,oe,R,S,B)}Bc(c,mt,yt);return;case"option":for(var Sn in y)if(mt=y[Sn],y.hasOwnProperty(Sn)&&mt!=null&&!S.hasOwnProperty(Sn))switch(Sn){case"selected":c.selected=!1;break;default:Tr(c,f,Sn,null,S,mt)}for(ze in S)if(mt=S[ze],yt=y[ze],S.hasOwnProperty(ze)&&mt!==yt&&(mt!=null||yt!=null))switch(ze){case"selected":c.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:Tr(c,f,ze,mt,S,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in y)mt=y[yn],y.hasOwnProperty(yn)&&mt!=null&&!S.hasOwnProperty(yn)&&Tr(c,f,yn,null,S,mt);for(dt in S)if(mt=S[dt],yt=y[dt],S.hasOwnProperty(dt)&&mt!==yt&&(mt!=null||yt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:Tr(c,f,dt,mt,S,yt)}return;default:if(_m(f)){for(var kr in y)mt=y[kr],y.hasOwnProperty(kr)&&mt!==void 0&&!S.hasOwnProperty(kr)&&_2(c,f,kr,void 0,S,mt);for(At in S)mt=S[At],yt=y[At],!S.hasOwnProperty(At)||mt===yt||mt===void 0&&yt===void 0||_2(c,f,At,mt,S,yt);return}}for(var at in y)mt=y[at],y.hasOwnProperty(at)&&mt!=null&&!S.hasOwnProperty(at)&&Tr(c,f,at,null,S,mt);for(Ot in S)mt=S[Ot],yt=y[Ot],!S.hasOwnProperty(Ot)||mt===yt||mt==null&&yt==null||Tr(c,f,Ot,mt,S,yt)}var S2=null,E2=null;function fv(c){return c.nodeType===9?c:c.ownerDocument}function Cj(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tj(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function C2(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var T2=null;function VG(){var c=window.event;return c&&c.type==="popstate"?c===T2?!1:(T2=c,!0):(T2=null,!1)}var kj=typeof setTimeout=="function"?setTimeout:void 0,HG=typeof clearTimeout=="function"?clearTimeout:void 0,Aj=typeof Promise=="function"?Promise:void 0,qG=typeof queueMicrotask=="function"?queueMicrotask:typeof Aj<"u"?function(c){return Aj.resolve(null).then(c).catch(GG)}:kj;function GG(c){setTimeout(function(){throw c})}function du(c){return c==="head"}function Nj(c,f){var y=f,S=0,R=0;do{var B=y.nextSibling;if(c.removeChild(y),B&&B.nodeType===8)if(y=B.data,y==="/$"){if(0<S&&8>S){y=S;var oe=c.ownerDocument;if(y&1&&dg(oe.documentElement),y&2&&dg(oe.body),y&4)for(y=oe.head,dg(y),oe=y.firstChild;oe;){var _e=oe.nextSibling,ze=oe.nodeName;oe[Lt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||y.removeChild(oe),oe=_e}}if(R===0){c.removeChild(B),vg(f);return}R--}else y==="$"||y==="$?"||y==="$!"?R++:S=y.charCodeAt(0)-48;else S=0;y=B}while(y);vg(f)}function k2(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":k2(y),en(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}c.removeChild(y)}}function WG(c,f,y,S){for(;c.nodeType===1;){var R=y;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(S){if(!c[Lt])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(B=c.getAttribute("rel"),B==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(B!==R.rel||c.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||c.getAttribute("title")!==(R.title==null?null:R.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(B=c.getAttribute("src"),(B!==(R.src==null?null:R.src)||c.getAttribute("type")!==(R.type==null?null:R.type)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&B&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var B=R.name==null?null:""+R.name;if(R.type==="hidden"&&c.getAttribute("name")===B)return c}else return c;if(c=ao(c.nextSibling),c===null)break}return null}function KG(c,f,y){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!y||(c=ao(c.nextSibling),c===null))return null;return c}function A2(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function ZG(c,f){var y=c.ownerDocument;if(c.data!=="$?"||y.readyState==="complete")f();else{var S=function(){f(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),c._reactRetry=S}}function ao(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var N2=null;function Rj(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return c;f--}else y==="/$"&&f++}c=c.previousSibling}return null}function Ij(c,f,y){switch(f=fv(y),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function dg(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);en(c)}var Is=new Map,jj=new Set;function hv(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Zl=te.d;te.d={f:YG,r:XG,D:JG,C:QG,L:eW,m:tW,X:rW,S:nW,M:aW};function YG(){var c=Zl.f(),f=av();return c||f}function XG(c){var f=Xn(c);f!==null&&f.tag===5&&f.type==="form"?J3(f):Zl.r(c)}var Ah=typeof document>"u"?null:document;function Dj(c,f,y){var S=Ah;if(S&&typeof f=="string"&&f){var R=ai(f);R='link[rel="'+c+'"][href="'+R+'"]',typeof y=="string"&&(R+='[crossorigin="'+y+'"]'),jj.has(R)||(jj.add(R),c={rel:c,crossOrigin:y,href:f},S.querySelector(R)===null&&(f=S.createElement("link"),Qa(f,"link",c),$n(f),S.head.appendChild(f)))}}function JG(c){Zl.D(c),Dj("dns-prefetch",c,null)}function QG(c,f){Zl.C(c,f),Dj("preconnect",c,f)}function eW(c,f,y){Zl.L(c,f,y);var S=Ah;if(S&&c&&f){var R='link[rel="preload"][as="'+ai(f)+'"]';f==="image"&&y&&y.imageSrcSet?(R+='[imagesrcset="'+ai(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(R+='[imagesizes="'+ai(y.imageSizes)+'"]')):R+='[href="'+ai(c)+'"]';var B=R;switch(f){case"style":B=Nh(c);break;case"script":B=Rh(c)}Is.has(B)||(c=d({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:c,as:f},y),Is.set(B,c),S.querySelector(R)!==null||f==="style"&&S.querySelector(fg(B))||f==="script"&&S.querySelector(hg(B))||(f=S.createElement("link"),Qa(f,"link",c),$n(f),S.head.appendChild(f)))}}function tW(c,f){Zl.m(c,f);var y=Ah;if(y&&c){var S=f&&typeof f.as=="string"?f.as:"script",R='link[rel="modulepreload"][as="'+ai(S)+'"][href="'+ai(c)+'"]',B=R;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":B=Rh(c)}if(!Is.has(B)&&(c=d({rel:"modulepreload",href:c},f),Is.set(B,c),y.querySelector(R)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(hg(B)))return}S=y.createElement("link"),Qa(S,"link",c),$n(S),y.head.appendChild(S)}}}function nW(c,f,y){Zl.S(c,f,y);var S=Ah;if(S&&c){var R=Er(S).hoistableStyles,B=Nh(c);f=f||"default";var oe=R.get(B);if(!oe){var _e={loading:0,preload:null};if(oe=S.querySelector(fg(B)))_e.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},y),(y=Is.get(B))&&R2(c,y);var ze=oe=S.createElement("link");$n(ze),Qa(ze,"link",c),ze._p=new Promise(function(dt,At){ze.onload=dt,ze.onerror=At}),ze.addEventListener("load",function(){_e.loading|=1}),ze.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,pv(oe,f,S)}oe={type:"stylesheet",instance:oe,count:1,state:_e},R.set(B,oe)}}}function rW(c,f){Zl.X(c,f);var y=Ah;if(y&&c){var S=Er(y).hoistableScripts,R=Rh(c),B=S.get(R);B||(B=y.querySelector(hg(R)),B||(c=d({src:c,async:!0},f),(f=Is.get(R))&&I2(c,f),B=y.createElement("script"),$n(B),Qa(B,"link",c),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},S.set(R,B))}}function aW(c,f){Zl.M(c,f);var y=Ah;if(y&&c){var S=Er(y).hoistableScripts,R=Rh(c),B=S.get(R);B||(B=y.querySelector(hg(R)),B||(c=d({src:c,async:!0,type:"module"},f),(f=Is.get(R))&&I2(c,f),B=y.createElement("script"),$n(B),Qa(B,"link",c),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},S.set(R,B))}}function Mj(c,f,y,S){var R=(R=Ie.current)?hv(R):null;if(!R)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=Nh(y.href),y=Er(R).hoistableStyles,S=y.get(f),S||(S={type:"style",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){c=Nh(y.href);var B=Er(R).hoistableStyles,oe=B.get(c);if(oe||(R=R.ownerDocument||R,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},B.set(c,oe),(B=R.querySelector(fg(c)))&&!B._p&&(oe.instance=B,oe.state.loading=5),Is.has(c)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Is.set(c,y),B||iW(R,c,y,oe.state))),f&&S===null)throw Error(r(528,""));return oe}if(f&&S!==null)throw Error(r(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Rh(y),y=Er(R).hoistableScripts,S=y.get(f),S||(S={type:"script",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Nh(c){return'href="'+ai(c)+'"'}function fg(c){return'link[rel="stylesheet"]['+c+"]"}function Oj(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function iW(c,f,y,S){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=c.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),Qa(f,"link",y),$n(f),c.head.appendChild(f))}function Rh(c){return'[src="'+ai(c)+'"]'}function hg(c){return"script[async]"+c}function Pj(c,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var S=c.querySelector('style[data-href~="'+ai(y.href)+'"]');if(S)return f.instance=S,$n(S),S;var R=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(c.ownerDocument||c).createElement("style"),$n(S),Qa(S,"style",R),pv(S,y.precedence,c),f.instance=S;case"stylesheet":R=Nh(y.href);var B=c.querySelector(fg(R));if(B)return f.state.loading|=4,f.instance=B,$n(B),B;S=Oj(y),(R=Is.get(R))&&R2(S,R),B=(c.ownerDocument||c).createElement("link"),$n(B);var oe=B;return oe._p=new Promise(function(_e,ze){oe.onload=_e,oe.onerror=ze}),Qa(B,"link",S),f.state.loading|=4,pv(B,y.precedence,c),f.instance=B;case"script":return B=Rh(y.src),(R=c.querySelector(hg(B)))?(f.instance=R,$n(R),R):(S=y,(R=Is.get(B))&&(S=d({},y),I2(S,R)),c=c.ownerDocument||c,R=c.createElement("script"),$n(R),Qa(R,"link",S),c.head.appendChild(R),f.instance=R);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(S=f.instance,f.state.loading|=4,pv(S,y.precedence,c));return f.instance}function pv(c,f,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=S.length?S[S.length-1]:null,B=R,oe=0;oe<S.length;oe++){var _e=S[oe];if(_e.dataset.precedence===f)B=_e;else if(B!==R)break}B?B.parentNode.insertBefore(c,B.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(c,f.firstChild))}function R2(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function I2(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var mv=null;function Fj(c,f,y){if(mv===null){var S=new Map,R=mv=new Map;R.set(y,S)}else R=mv,S=R.get(y),S||(S=new Map,R.set(y,S));if(S.has(c))return S;for(S.set(c,null),y=y.getElementsByTagName(c),R=0;R<y.length;R++){var B=y[R];if(!(B[Lt]||B[me]||c==="link"&&B.getAttribute("rel")==="stylesheet")&&B.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=B.getAttribute(f)||"";oe=c+oe;var _e=S.get(oe);_e?_e.push(B):S.set(oe,[B])}}return S}function Lj(c,f,y){c=c.ownerDocument||c,c.head.insertBefore(y,f==="title"?c.querySelector("head > title"):null)}function sW(c,f,y){if(y===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function Bj(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var pg=null;function oW(){}function lW(c,f,y){if(pg===null)throw Error(r(475));var S=pg;if(f.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var R=Nh(y.href),B=c.querySelector(fg(R));if(B){c=B._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(S.count++,S=gv.bind(S),c.then(S,S)),f.state.loading|=4,f.instance=B,$n(B);return}B=c.ownerDocument||c,y=Oj(y),(R=Is.get(R))&&R2(y,R),B=B.createElement("link"),$n(B);var oe=B;oe._p=new Promise(function(_e,ze){oe.onload=_e,oe.onerror=ze}),Qa(B,"link",y),f.instance=B}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(S.count++,f=gv.bind(S),c.addEventListener("load",f),c.addEventListener("error",f))}}function cW(){if(pg===null)throw Error(r(475));var c=pg;return c.stylesheets&&c.count===0&&j2(c,c.stylesheets),0<c.count?function(f){var y=setTimeout(function(){if(c.stylesheets&&j2(c,c.stylesheets),c.unsuspend){var S=c.unsuspend;c.unsuspend=null,S()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(y)}}:null}function gv(){if(this.count--,this.count===0){if(this.stylesheets)j2(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var yv=null;function j2(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,yv=new Map,f.forEach(uW,c),yv=null,gv.call(c))}function uW(c,f){if(!(f.state.loading&4)){var y=yv.get(c);if(y)var S=y.get(null);else{y=new Map,yv.set(c,y);for(var R=c.querySelectorAll("link[data-precedence],style[data-precedence]"),B=0;B<R.length;B++){var oe=R[B];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(y.set(oe.dataset.precedence,oe),S=oe)}S&&y.set(null,S)}R=f.instance,oe=R.getAttribute("data-precedence"),B=y.get(oe)||S,B===S&&y.set(null,R),y.set(oe,R),this.count++,S=gv.bind(this),R.addEventListener("load",S),R.addEventListener("error",S),B?B.parentNode.insertBefore(R,B.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(R,c.firstChild)),f.state.loading|=4}}var mg={$$typeof:E,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function dW(c,f,y,S,R,B,oe,_e){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=S,this.onUncaughtError=R,this.onCaughtError=B,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function $j(c,f,y,S,R,B,oe,_e,ze,dt,At,Ot){return c=new dW(c,f,y,oe,_e,ze,dt,Ot),f=1,B===!0&&(f|=24),B=ss(3,null,null,f),c.current=B,B.stateNode=c,f=hS(),f.refCount++,c.pooledCache=f,f.refCount++,B.memoizedState={element:S,isDehydrated:y,cache:f},yS(B),c}function zj(c){return c?(c=Uo,c):Uo}function Uj(c,f,y,S,R,B){R=zj(R),S.context===null?S.context=R:S.pendingContext=R,S=Jc(f),S.payload={element:y},B=B===void 0?null:B,B!==null&&(S.callback=B),y=Qc(c,S,f),y!==null&&(ds(y,c,f),qm(y,c,f))}function Vj(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function D2(c,f){Vj(c,f),(c=c.alternate)&&Vj(c,f)}function Hj(c){if(c.tag===13){var f=no(c,67108864);f!==null&&ds(f,c,67108864),D2(c,67108864)}}var bv=!0;function fW(c,f,y,S){var R=ae.T;ae.T=null;var B=te.p;try{te.p=2,M2(c,f,y,S)}finally{te.p=B,ae.T=R}}function hW(c,f,y,S){var R=ae.T;ae.T=null;var B=te.p;try{te.p=8,M2(c,f,y,S)}finally{te.p=B,ae.T=R}}function M2(c,f,y,S){if(bv){var R=O2(S);if(R===null)x2(c,f,S,vv,y),Gj(c,S);else if(mW(R,c,f,y,S))S.stopPropagation();else if(Gj(c,S),f&4&&-1<pW.indexOf(c)){for(;R!==null;){var B=Xn(R);if(B!==null)switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var oe=ve(B.pendingLanes);if(oe!==0){var _e=B;for(_e.pendingLanes|=2,_e.entangledLanes|=2;oe;){var ze=1<<31-Kt(oe);_e.entanglements[1]|=ze,oe&=~ze}Wo(B),(br&6)===0&&(nv=fe()+500,lg(0))}}break;case 13:_e=no(B,2),_e!==null&&ds(_e,B,2),av(),D2(B,2)}if(B=O2(S),B===null&&x2(c,f,S,vv,y),B===R)break;R=B}R!==null&&S.stopPropagation()}else x2(c,f,S,null,y)}}function O2(c){return c=Hf(c),P2(c)}var vv=null;function P2(c){if(vv=null,c=Nn(c),c!==null){var f=i(c);if(f===null)c=null;else{var y=f.tag;if(y===13){if(c=s(f),c!==null)return c;c=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return vv=c,null}function qj(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case ee:return 2;case xe:return 8;case Fe:case Ce:return 32;case We:return 268435456;default:return 32}default:return 32}}var F2=!1,fu=null,hu=null,pu=null,gg=new Map,yg=new Map,mu=[],pW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gj(c,f){switch(c){case"focusin":case"focusout":fu=null;break;case"dragenter":case"dragleave":hu=null;break;case"mouseover":case"mouseout":pu=null;break;case"pointerover":case"pointerout":gg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":yg.delete(f.pointerId)}}function bg(c,f,y,S,R,B){return c===null||c.nativeEvent!==B?(c={blockedOn:f,domEventName:y,eventSystemFlags:S,nativeEvent:B,targetContainers:[R]},f!==null&&(f=Xn(f),f!==null&&Hj(f)),c):(c.eventSystemFlags|=S,f=c.targetContainers,R!==null&&f.indexOf(R)===-1&&f.push(R),c)}function mW(c,f,y,S,R){switch(f){case"focusin":return fu=bg(fu,c,f,y,S,R),!0;case"dragenter":return hu=bg(hu,c,f,y,S,R),!0;case"mouseover":return pu=bg(pu,c,f,y,S,R),!0;case"pointerover":var B=R.pointerId;return gg.set(B,bg(gg.get(B)||null,c,f,y,S,R)),!0;case"gotpointercapture":return B=R.pointerId,yg.set(B,bg(yg.get(B)||null,c,f,y,S,R)),!0}return!1}function Wj(c){var f=Nn(c.target);if(f!==null){var y=i(f);if(y!==null){if(f=y.tag,f===13){if(f=s(y),f!==null){c.blockedOn=f,U(c.priority,function(){if(y.tag===13){var S=us();S=Dt(S);var R=no(y,S);R!==null&&ds(R,y,S),D2(y,S)}});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function wv(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var y=O2(c.nativeEvent);if(y===null){y=c.nativeEvent;var S=new y.constructor(y.type,y);Ss=S,y.target.dispatchEvent(S),Ss=null}else return f=Xn(y),f!==null&&Hj(f),c.blockedOn=y,!1;f.shift()}return!0}function Kj(c,f,y){wv(c)&&y.delete(f)}function gW(){F2=!1,fu!==null&&wv(fu)&&(fu=null),hu!==null&&wv(hu)&&(hu=null),pu!==null&&wv(pu)&&(pu=null),gg.forEach(Kj),yg.forEach(Kj)}function xv(c,f){c.blockedOn===f&&(c.blockedOn=null,F2||(F2=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gW)))}var _v=null;function Zj(c){_v!==c&&(_v=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){_v===c&&(_v=null);for(var f=0;f<c.length;f+=3){var y=c[f],S=c[f+1],R=c[f+2];if(typeof S!="function"){if(P2(S||y)===null)continue;break}var B=Xn(y);B!==null&&(c.splice(f,3),f-=3,PS(B,{pending:!0,data:R,method:y.method,action:S},S,R))}}))}function vg(c){function f(ze){return xv(ze,c)}fu!==null&&xv(fu,c),hu!==null&&xv(hu,c),pu!==null&&xv(pu,c),gg.forEach(f),yg.forEach(f);for(var y=0;y<mu.length;y++){var S=mu[y];S.blockedOn===c&&(S.blockedOn=null)}for(;0<mu.length&&(y=mu[0],y.blockedOn===null);)Wj(y),y.blockedOn===null&&mu.shift();if(y=(c.ownerDocument||c).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var R=y[S],B=y[S+1],oe=R[Re]||null;if(typeof B=="function")oe||Zj(y);else if(oe){var _e=null;if(B&&B.hasAttribute("formAction")){if(R=B,oe=B[Re]||null)_e=oe.formAction;else if(P2(R)!==null)continue}else _e=oe.action;typeof _e=="function"?y[S+1]=_e:(y.splice(S,3),S-=3),Zj(y)}}}function L2(c){this._internalRoot=c}Sv.prototype.render=L2.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var y=f.current,S=us();Uj(y,S,c,f,null,null)},Sv.prototype.unmount=L2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;Uj(c.current,2,null,c,null,null),av(),f[Ve]=null}};function Sv(c){this._internalRoot=c}Sv.prototype.unstable_scheduleHydration=function(c){if(c){var f=G();c={blockedOn:null,target:c,priority:f};for(var y=0;y<mu.length&&f!==0&&f<mu[y].priority;y++);mu.splice(y,0,c),y===0&&Wj(c)}};var Yj=t.version;if(Yj!=="19.1.0")throw Error(r(527,Yj,"19.1.0"));te.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var yW={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ev.isDisabled&&Ev.supportsFiber)try{St=Ev.inject(yW),Ft=Ev}catch{}}return xg.createRoot=function(c,f){if(!a(c))throw Error(r(299));var y=!1,S="",R=fI,B=hI,oe=pI,_e=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(R=f.onUncaughtError),f.onCaughtError!==void 0&&(B=f.onCaughtError),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(_e=f.unstable_transitionCallbacks)),f=$j(c,1,!1,null,null,y,S,R,B,oe,_e,null),c[Ve]=f.current,w2(c),new L2(f)},xg.hydrateRoot=function(c,f,y){if(!a(c))throw Error(r(299));var S=!1,R="",B=fI,oe=hI,_e=pI,ze=null,dt=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&(B=y.onUncaughtError),y.onCaughtError!==void 0&&(oe=y.onCaughtError),y.onRecoverableError!==void 0&&(_e=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(ze=y.unstable_transitionCallbacks),y.formState!==void 0&&(dt=y.formState)),f=$j(c,1,!0,f,y??null,S,R,B,oe,_e,ze,dt),f.context=zj(null),y=f.current,S=us(),S=Dt(S),R=Jc(S),R.callback=null,Qc(y,R,S),y=S,f.current.lanes=y,nt(f,y),Wo(f),c[Ve]=f.current,w2(c),new Sv(f)},xg.version="19.1.0",xg}var s4;function DW(){if(s4)return z2.exports;s4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),z2.exports=jW(),z2.exports}var MW=DW();const OW=bi(MW);function o4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function pc(...e){return t=>{let n=!1;const r=e.map(a=>{const i=o4(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():o4(e[a],null)}}}}function kn(...e){return T.useCallback(pc(...e),e)}function Iu(e){const t=PW(e),n=T.forwardRef((r,a)=>{const{children:i,...s}=r,o=T.Children.toArray(i),l=o.find(LW);if(l){const u=l.props.children,d=o.map(h=>h===l?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return p.jsx(t,{...s,ref:a,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return p.jsx(t,{...s,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var p8=Iu("Slot");function PW(e){const t=T.forwardRef((n,r)=>{const{children:a,...i}=n;if(T.isValidElement(a)){const s=$W(a),o=BW(i,a.props);return a.type!==T.Fragment&&(o.ref=r?pc(r,s):s),T.cloneElement(a,o)}return T.Children.count(a)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var m8=Symbol("radix.slottable");function FW(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=m8,t}function LW(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===m8}function BW(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{i(...o),a(...o)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function $W(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function g8(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=g8(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function y8(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=g8(e))&&(r&&(r+=" "),r+=t);return r}const l4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,c4=y8,tA=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return c4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=l4(d)||l4(h);return a[u][m]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(b=>{let[v,x]=b;return Array.isArray(x)?x.includes({...i,...o}[v]):{...i,...o}[v]===x})?[...u,h,m]:u},[]);return c4(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},nA="-",zW=e=>{const t=VW(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const o=s.split(nA);return o[0]===""&&o.length!==1&&o.shift(),b8(o,t)||UW(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},b8=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?b8(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(nA);return(s=t.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},u4=/^\[(.+)\]$/,UW=e=>{if(u4.test(e)){const t=u4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},VW=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)mT(n[a],r,a,t);return r},mT=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:d4(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(HW(a)){mT(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,s])=>{mT(s,d4(t,i),n,r)})})},d4=(e,t)=>{let n=e;return t.split(nA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},HW=e=>e.isThemeGetter,qW=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return a(i,s),s},set(i,s){n.has(i)?n.set(i,s):a(i,s)}}},gT="!",yT=":",GW=yT.length,WW=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let s=0,o=0,l=0,u;for(let b=0;b<a.length;b++){let v=a[b];if(s===0&&o===0){if(v===yT){i.push(a.slice(l,b)),l=b+GW;continue}if(v==="/"){u=b;continue}}v==="["?s++:v==="]"?s--:v==="("?o++:v===")"&&o--}const d=i.length===0?a:a.substring(l),h=KW(d),m=h!==d,g=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+yT,i=r;r=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},KW=e=>e.endsWith(gT)?e.substring(0,e.length-1):e.startsWith(gT)?e.substring(1):e,ZW=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},YW=e=>({cache:qW(e.cacheSize),parseClassName:WW(e),sortModifiers:ZW(e),...zW(e)}),XW=/\s+/,JW=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,s=[],o=e.trim().split(XW);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:v}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let x=!!v,w=r(x?b.substring(0,v):b);if(!w){if(!x){l=d+(l.length>0?" "+l:l);continue}if(w=r(b),!w){l=d+(l.length>0?" "+l:l);continue}x=!1}const _=i(m).join(":"),E=g?_+gT:_,C=E+w;if(s.includes(C))continue;s.push(C);const k=a(w,x);for(let I=0;I<k.length;++I){const j=k[I];s.push(E+j)}l=d+(l.length>0?" "+l:l)}return l};function QW(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=v8(t))&&(r&&(r+=" "),r+=n);return r}const v8=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=v8(e[r]))&&(n&&(n+=" "),n+=t);return n};function eK(e,...t){let n,r,a,i=s;function s(l){const u=t.reduce((d,h)=>h(d),e());return n=YW(u),r=n.cache.get,a=n.cache.set,i=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=JW(l,n);return a(l,d),d}return function(){return i(QW.apply(null,arguments))}}const ka=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},w8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,x8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tK=/^\d+\/\d+$/,nK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ih=e=>tK.test(e),qn=e=>!!e&&!Number.isNaN(Number(e)),yu=e=>!!e&&Number.isInteger(Number(e)),q2=e=>e.endsWith("%")&&qn(e.slice(0,-1)),Yl=e=>nK.test(e),oK=()=>!0,lK=e=>rK.test(e)&&!aK.test(e),_8=()=>!1,cK=e=>iK.test(e),uK=e=>sK.test(e),dK=e=>!on(e)&&!ln(e),fK=e=>jp(e,C8,_8),on=e=>w8.test(e),Od=e=>jp(e,T8,lK),G2=e=>jp(e,yK,qn),f4=e=>jp(e,S8,_8),hK=e=>jp(e,E8,uK),Cv=e=>jp(e,k8,cK),ln=e=>x8.test(e),_g=e=>Dp(e,T8),pK=e=>Dp(e,bK),h4=e=>Dp(e,S8),mK=e=>Dp(e,C8),gK=e=>Dp(e,E8),Tv=e=>Dp(e,k8,!0),jp=(e,t,n)=>{const r=w8.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Dp=(e,t,n=!1)=>{const r=x8.exec(e);return r?r[1]?t(r[1]):n:!1},S8=e=>e==="position"||e==="percentage",E8=e=>e==="image"||e==="url",C8=e=>e==="length"||e==="size"||e==="bg-size",T8=e=>e==="length",yK=e=>e==="number",bK=e=>e==="family-name",k8=e=>e==="shadow",vK=()=>{const e=ka("color"),t=ka("font"),n=ka("text"),r=ka("font-weight"),a=ka("tracking"),i=ka("leading"),s=ka("breakpoint"),o=ka("container"),l=ka("spacing"),u=ka("radius"),d=ka("shadow"),h=ka("inset-shadow"),m=ka("text-shadow"),g=ka("drop-shadow"),b=ka("blur"),v=ka("perspective"),x=ka("aspect"),w=ka("ease"),_=ka("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),ln,on],I=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],N=()=>[ln,on,l],P=()=>[Ih,"full","auto",...N()],L=()=>[yu,"none","subgrid",ln,on],H=()=>["auto",{span:["full",yu,ln,on]},yu,ln,on],M=()=>[yu,"auto",ln,on],K=()=>["auto","min","max","fr",ln,on],q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...N()],te=()=>[Ih,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],Y=()=>[e,ln,on],ie=()=>[...C(),h4,f4,{position:[ln,on]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",mK,fK,{size:[ln,on]}],Q=()=>[q2,_g,Od],ne=()=>["","none","full",u,ln,on],he=()=>["",qn,_g,Od],de=()=>["solid","dashed","dotted","double"],Ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[qn,q2,h4,f4],Te=()=>["","none",b,ln,on],Se=()=>["none",qn,ln,on],Pe=()=>["none",qn,ln,on],Qe=()=>[qn,ln,on],Le=()=>[Ih,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yl],breakpoint:[Yl],color:[oK],container:[Yl],"drop-shadow":[Yl],ease:["in","out","in-out"],font:[dK],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yl],shadow:[Yl],spacing:["px",qn],text:[Yl],"text-shadow":[Yl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ih,on,ln,x]}],container:["container"],columns:[{columns:[qn,on,ln,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[yu,"auto",ln,on]}],basis:[{basis:[Ih,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qn,Ih,"auto","initial","none",on]}],grow:[{grow:["",qn,ln,on]}],shrink:[{shrink:["",qn,ln,on]}],order:[{order:[yu,"first","last","none",ln,on]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...q(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...q()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":q()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[o,"screen",...te()]}],"min-w":[{"min-w":[o,"screen","none",...te()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...te()]}],h:[{h:["screen",...te()]}],"min-h":[{"min-h":["screen","none",...te()]}],"max-h":[{"max-h":["screen",...te()]}],"font-size":[{text:["base",n,_g,Od]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ln,G2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",q2,on]}],"font-family":[{font:[pK,on,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ln,on]}],"line-clamp":[{"line-clamp":[qn,"none",ln,G2]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",ln,on]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ln,on]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:[qn,"from-font","auto",ln,Od]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[qn,"auto",ln,on]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ln,on]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ln,on]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},yu,ln,on],radial:["",ln,on],conic:[yu,ln,on]},gK,hK]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...de(),"hidden","none"]}],"divide-style":[{divide:[...de(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...de(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qn,ln,on]}],"outline-w":[{outline:["",qn,_g,Od]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",d,Tv,Cv]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",h,Tv,Cv]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[qn,Od]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",m,Tv,Cv]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[qn,ln,on]}],"mix-blend":[{"mix-blend":[...Ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[ln,on]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[qn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ln,on]}],filter:[{filter:["","none",ln,on]}],blur:[{blur:Te()}],brightness:[{brightness:[qn,ln,on]}],contrast:[{contrast:[qn,ln,on]}],"drop-shadow":[{"drop-shadow":["","none",g,Tv,Cv]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",qn,ln,on]}],"hue-rotate":[{"hue-rotate":[qn,ln,on]}],invert:[{invert:["",qn,ln,on]}],saturate:[{saturate:[qn,ln,on]}],sepia:[{sepia:["",qn,ln,on]}],"backdrop-filter":[{"backdrop-filter":["","none",ln,on]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[qn,ln,on]}],"backdrop-contrast":[{"backdrop-contrast":[qn,ln,on]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qn,ln,on]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qn,ln,on]}],"backdrop-invert":[{"backdrop-invert":["",qn,ln,on]}],"backdrop-opacity":[{"backdrop-opacity":[qn,ln,on]}],"backdrop-saturate":[{"backdrop-saturate":[qn,ln,on]}],"backdrop-sepia":[{"backdrop-sepia":["",qn,ln,on]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ln,on]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qn,"initial",ln,on]}],ease:[{ease:["linear","initial",w,ln,on]}],delay:[{delay:[qn,ln,on]}],animate:[{animate:["none",_,ln,on]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,ln,on]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Se()}],"rotate-x":[{"rotate-x":Se()}],"rotate-y":[{"rotate-y":Se()}],"rotate-z":[{"rotate-z":Se()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[ln,on,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ln,on]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ln,on]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[qn,_g,Od,G2]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},wK=eK(vK);function xt(...e){return wK(y8(e))}const xK=tA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function It({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?p8:"button";return p.jsx(i,{"data-slot":"button",className:xt(xK({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SK=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),p4=e=>{const t=SK(e);return t.charAt(0).toUpperCase()+t.slice(1)},A8=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>T.createElement("svg",{ref:l,...EK,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:A8("lucide",a),...o},[...s.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=(e,t)=>{const n=T.forwardRef(({className:r,...a},i)=>T.createElement(CK,{ref:i,iconNode:t,className:A8(`lucide-${_K(p4(e))}`,`lucide-${e}`,r),...a}));return n.displayName=p4(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],kK=Xt("archive",TK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],NK=Xt("arrow-down",AK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],IK=Xt("arrow-right",RK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],DK=Xt("ban",jK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],OK=Xt("bot",MK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Mp=Xt("brain-circuit",PK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ri=Xt("check",FK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wl=Xt("chevron-down",LK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],N8=Xt("chevron-right",BK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ju=Xt("chevron-up",$K);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],p1=Xt("chevrons-up-down",zK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cf=Xt("circle-alert",UK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rA=Xt("circle-check",VK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qK=Xt("circle",HK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],aA=Xt("clipboard",GK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],KK=Xt("clock",WK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],R8=Xt("cloud-upload",ZK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],I8=Xt("code",YK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],JK=Xt("cog",XK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],eZ=Xt("coins",QK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],nZ=Xt("copy",tZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],aZ=Xt("dollar-sign",rZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],af=Xt("download",iZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],oZ=Xt("ellipsis-vertical",sZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],cZ=Xt("file-archive",lZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],dZ=Xt("file-down",uZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],hZ=Xt("file-json",fZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],mZ=Xt("file-question",pZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yZ=Xt("file-text",gZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],vZ=Xt("file-up",bZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],j8=Xt("file",wZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],D8=Xt("folder-git",xZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],iA=Xt("folder-plus",_Z);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],m4=Xt("folder-tree",SZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],CZ=Xt("folder-up",EZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],uf=Xt("folder",TZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],AZ=Xt("funnel",kZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],ju=Xt("git-branch",NZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],M8=Xt("git-commit-horizontal",RZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IZ=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],O8=Xt("git-merge",IZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],sA=Xt("git-pull-request",jZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],MZ=Xt("grip-vertical",DZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],oA=Xt("hard-drive",OZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],FZ=Xt("house",PZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],lA=Xt("image",LZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],P8=Xt("info",BZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Z=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],t0=Xt("key",$Z);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Pn=Xt("loader-circle",zZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],VZ=Xt("menu",UZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],qZ=Xt("message-square-plus",HZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],bT=Xt("message-square",GZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],KZ=Xt("music",WZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],YZ=Xt("palette",ZZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],JZ=Xt("panel-left-close",XZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],eY=Xt("panel-right-close",QZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],cA=Xt("paperclip",tY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],by=Xt("pen",nY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Sf=Xt("plus",rY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],g4=Xt("puzzle",aY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],m1=Xt("refresh-cw",iY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],oY=Xt("rocket",sY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],uA=Xt("rotate-ccw",lY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ef=Xt("save",cY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],wo=Xt("search",uY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],fY=Xt("send-horizontal",dY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],qw=Xt("server",hY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vT=Xt("settings",pY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],gY=Xt("sliders-horizontal",mY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],F8=Xt("sparkles",yY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Vg=Xt("square-pen",bY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],wY=Xt("square",vY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],_Y=Xt("star",xY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],Gw=Xt("tags",SY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],CY=Xt("text",EY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Zi=Xt("trash-2",TY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dA=Xt("triangle-alert",kY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],NY=Xt("upload",AY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],IY=Xt("user",RY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],y4=Xt("users",jY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],MY=Xt("video",DY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],fA=Xt("wrench",OY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ii=Xt("x",PY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],LY=Xt("zap",FY),b4=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:p.jsx("div",{className:xt(n),children:r.map(a=>{var s,o;const i=t==="trigger"?(s=a.triggerRenderer)==null?void 0:s.call(a):(o=a.renderer)==null?void 0:o.call(a);return i?p.jsx(gt.Fragment,{children:i},a.id):null})})},v4=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,a,o);return o},BY=e=>e?v4(e):v4,$Y=e=>e;function zY(e,t=$Y){const n=gt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return gt.useDebugValue(n),n}const w4=e=>{const t=BY(e),n=r=>zY(t,r);return Object.assign(n,t),n},Ks=e=>e?w4(e):w4;var L8=Symbol.for("immer-nothing"),x4=Symbol.for("immer-draftable"),mr=Symbol.for("immer-state");function zs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var lp=Object.getPrototypeOf;function cp(e){return!!e&&!!e[mr]}function mc(e){var t;return e?B8(e)||Array.isArray(e)||!!e[x4]||!!((t=e.constructor)!=null&&t[x4])||y1(e)||b1(e):!1}var UY=Object.prototype.constructor.toString();function B8(e){if(!e||typeof e!="object")return!1;const t=lp(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===UY}function n0(e,t){g1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function g1(e){const t=e[mr];return t?t.type_:Array.isArray(e)?1:y1(e)?2:b1(e)?3:0}function wT(e,t){return g1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function $8(e,t,n){const r=g1(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function VY(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function y1(e){return e instanceof Map}function b1(e){return e instanceof Set}function $a(e){return e.copy_||e.base_}function xT(e,t){if(y1(e))return new Map(e);if(b1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=B8(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[mr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(lp(e),r)}else{const r=lp(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function hA(e,t=!1){return v1(e)||cp(e)||!mc(e)||(g1(e)>1&&(e.set=e.add=e.clear=e.delete=HY),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>hA(r,!0))),e}function HY(){zs(2)}function v1(e){return Object.isFrozen(e)}var _T={};function df(e){const t=_T[e];return t||zs(0,e),t}function qY(e,t){_T[e]||(_T[e]=t)}var r0;function Ww(){return r0}function GY(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _4(e,t){t&&(df("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ST(e){ET(e),e.drafts_.forEach(WY),e.drafts_=null}function ET(e){e===r0&&(r0=e.parent_)}function S4(e){return r0=GY(r0,e)}function WY(e){const t=e[mr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function E4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[mr].modified_&&(ST(t),zs(4)),mc(e)&&(e=Kw(t,e),t.parent_||Zw(t,e)),t.patches_&&df("Patches").generateReplacementPatches_(n[mr].base_,e,t.patches_,t.inversePatches_)):e=Kw(t,n,[]),ST(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==L8?e:void 0}function Kw(e,t,n){if(v1(t))return t;const r=t[mr];if(!r)return n0(t,(a,i)=>C4(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Zw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,s=!1;r.type_===3&&(i=new Set(a),a.clear(),s=!0),n0(i,(o,l)=>C4(e,r,a,o,l,n,s)),Zw(e,a,!1),n&&e.patches_&&df("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function C4(e,t,n,r,a,i,s){if(cp(a)){const o=i&&t&&t.type_!==3&&!wT(t.assigned_,r)?i.concat(r):void 0,l=Kw(e,a,o);if($8(n,r,l),cp(l))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(mc(a)&&!v1(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Kw(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Zw(e,a)}}function Zw(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&hA(t,n)}function KY(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Ww(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=pA;n&&(a=[r],i=a0);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}var pA={get(e,t){if(t===mr)return e;const n=$a(e);if(!wT(n,t))return ZY(e,n,t);const r=n[t];return e.finalized_||!mc(r)?r:r===W2(e.base_,t)?(K2(e),e.copy_[t]=i0(r,e)):r},has(e,t){return t in $a(e)},ownKeys(e){return Reflect.ownKeys($a(e))},set(e,t,n){const r=z8($a(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=W2($a(e),t),i=a==null?void 0:a[mr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(VY(n,a)&&(n!==void 0||wT(e.base_,t)))return!0;K2(e),Ql(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return W2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,K2(e),Ql(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$a(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){zs(11)},getPrototypeOf(e){return lp(e.base_)},setPrototypeOf(){zs(12)}},a0={};n0(pA,(e,t)=>{a0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});a0.deleteProperty=function(e,t){return a0.set.call(this,e,t,void 0)};a0.set=function(e,t,n){return pA.set.call(this,e[0],t,n,e[0])};function W2(e,t){const n=e[mr];return(n?$a(n):e)[t]}function ZY(e,t,n){var a;const r=z8(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function z8(e,t){if(!(t in e))return;let n=lp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=lp(n)}}function Ql(e){e.modified_||(e.modified_=!0,e.parent_&&Ql(e.parent_))}function K2(e){e.copy_||(e.copy_=xT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var YY=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...u){return s.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&zs(6),r!==void 0&&typeof r!="function"&&zs(7);let a;if(mc(t)){const i=S4(this),s=i0(t,void 0);let o=!0;try{a=n(s),o=!1}finally{o?ST(i):ET(i)}return _4(i,r),E4(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===L8&&(a=void 0),this.autoFreeze_&&hA(a,!0),r){const i=[],s=[];df("Patches").generateReplacementPatches_(t,a,i,s),r(i,s)}return a}else zs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let r,a;return[this.produce(t,n,(s,o)=>{r=s,a=o}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mc(e)||zs(8),cp(e)&&(e=XY(e));const t=S4(this),n=i0(e,void 0);return n[mr].isManual_=!0,ET(t),n}finishDraft(e,t){const n=e&&e[mr];(!n||!n.isManual_)&&zs(9);const{scope_:r}=n;return _4(r,t),E4(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=df("Patches").applyPatches_;return cp(e)?r(e,t):this.produce(e,a=>r(a,t))}};function i0(e,t){const n=y1(e)?df("MapSet").proxyMap_(e,t):b1(e)?df("MapSet").proxySet_(e,t):KY(e,t);return(t?t.scope_:Ww()).drafts_.push(n),n}function XY(e){return cp(e)||zs(10,e),U8(e)}function U8(e){if(!mc(e)||v1(e))return e;const t=e[mr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=xT(e,t.scope_.immer_.useStrictShallowCopy_)}else n=xT(e,!0);return n0(n,(r,a)=>{$8(n,r,U8(a))}),t&&(t.finalized_=!1),n}function JY(){class e extends Map{constructor(l,u){super(),this[mr]={type_:2,parent_:u,scope_:u?u.scope_:Ww(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return $a(this[mr]).size}has(l){return $a(this[mr]).has(l)}set(l,u){const d=this[mr];return s(d),(!$a(d).has(l)||$a(d).get(l)!==u)&&(n(d),Ql(d),d.assigned_.set(l,!0),d.copy_.set(l,u),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const u=this[mr];return s(u),n(u),Ql(u),u.base_.has(l)?u.assigned_.set(l,!1):u.assigned_.delete(l),u.copy_.delete(l),!0}clear(){const l=this[mr];s(l),$a(l).size&&(n(l),Ql(l),l.assigned_=new Map,n0(l.base_,u=>{l.assigned_.set(u,!1)}),l.copy_.clear())}forEach(l,u){const d=this[mr];$a(d).forEach((h,m,g)=>{l.call(u,this.get(m),m,this)})}get(l){const u=this[mr];s(u);const d=$a(u).get(l);if(u.finalized_||!mc(d)||d!==u.base_.get(l))return d;const h=i0(d,u);return n(u),u.copy_.set(l,h),h}keys(){return $a(this[mr]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=l.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=l.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,u){super(),this[mr]={type_:3,parent_:u,scope_:u?u.scope_:Ww(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return $a(this[mr]).size}has(l){const u=this[mr];return s(u),u.copy_?!!(u.copy_.has(l)||u.drafts_.has(l)&&u.copy_.has(u.drafts_.get(l))):u.base_.has(l)}add(l){const u=this[mr];return s(u),this.has(l)||(i(u),Ql(u),u.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const u=this[mr];return s(u),i(u),Ql(u),u.copy_.delete(l)||(u.drafts_.has(l)?u.copy_.delete(u.drafts_.get(l)):!1)}clear(){const l=this[mr];s(l),$a(l).size&&(i(l),Ql(l),l.copy_.clear())}values(){const l=this[mr];return s(l),i(l),l.copy_.values()}entries(){const l=this[mr];return s(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,u){const d=this.values();let h=d.next();for(;!h.done;)l.call(u,h.value,h.value,this),h=d.next()}}function a(o,l){return new r(o,l)}function i(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(mc(l)){const u=i0(l,o);o.drafts_.set(l,u),o.copy_.add(u)}else o.copy_.add(l)}))}function s(o){o.revoked_&&zs(3,JSON.stringify($a(o)))}qY("MapSet",{proxyMap_:t,proxySet_:a})}var ws=new YY,QY=ws.produce;ws.produceWithPatches.bind(ws);ws.setAutoFreeze.bind(ws);ws.setUseStrictShallowCopy.bind(ws);ws.applyPatches.bind(ws);ws.createDraft.bind(ws);ws.finishDraft.bind(ws);const eX=e=>(t,n,r)=>(r.setState=(a,i,...s)=>{const o=typeof a=="function"?QY(a):a;return t(o,i,...s)},e(r.setState,n,r)),Zs=eX,Ir=Ks(Zs((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const s={modId:r,callback:a,order:i};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(s),o.middlewareRegistry[n].sort((l,u)=>(l.order??0)-(u.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var s;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===a)),((s=i.middlewareRegistry[n])==null?void 0:s.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(s=>{s.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${s.tools[r].modId}". Overwriting with registration from mod "${n}".`),s.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Iw={exports:{}},tX=Iw.exports,T4;function nX(){return T4||(T4=1,function(e,t){(function(n,r){e.exports=r()})(tX,function(){var n=function(A,O){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,re){X.__proto__=re}||function(X,re){for(var ce in re)Object.prototype.hasOwnProperty.call(re,ce)&&(X[ce]=re[ce])})(A,O)},r=function(){return(r=Object.assign||function(A){for(var O,X=1,re=arguments.length;X<re;X++)for(var ce in O=arguments[X])Object.prototype.hasOwnProperty.call(O,ce)&&(A[ce]=O[ce]);return A}).apply(this,arguments)};function a(A,O,X){for(var re,ce=0,we=O.length;ce<we;ce++)!re&&ce in O||((re=re||Array.prototype.slice.call(O,0,ce))[ce]=O[ce]);return A.concat(re||Array.prototype.slice.call(O))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Zd,s=Object.keys,o=Array.isArray;function l(A,O){return typeof O!="object"||s(O).forEach(function(X){A[X]=O[X]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,O){return d.call(A,O)}function m(A,O){typeof O=="function"&&(O=O(u(A))),(typeof Reflect>"u"?s:Reflect.ownKeys)(O).forEach(function(X){b(A,X,O[X])})}var g=Object.defineProperty;function b(A,O,X,re){g(A,O,l(X&&h(X,"get")&&typeof X.get=="function"?{get:X.get,set:X.set,configurable:!0}:{value:X,configurable:!0,writable:!0},re))}function v(A){return{from:function(O){return A.prototype=Object.create(O.prototype),b(A.prototype,"constructor",A),{extend:m.bind(null,A.prototype)}}}}var x=Object.getOwnPropertyDescriptor,w=[].slice;function _(A,O,X){return w.call(A,O,X)}function E(A,O){return O(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function I(A,O){if(typeof O=="string"&&h(A,O))return A[O];if(!O)return A;if(typeof O!="string"){for(var X=[],re=0,ce=O.length;re<ce;++re){var we=I(A,O[re]);X.push(we)}return X}var Oe=O.indexOf(".");if(Oe!==-1){var Be=A[O.substr(0,Oe)];return Be==null?void 0:I(Be,O.substr(Oe+1))}}function j(A,O,X){if(A&&O!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof O!="string"&&"length"in O){C(typeof X!="string"&&"length"in X);for(var re=0,ce=O.length;re<ce;++re)j(A,O[re],X[re])}else{var we,Oe,Be=O.indexOf(".");Be!==-1?(we=O.substr(0,Be),(Oe=O.substr(Be+1))===""?X===void 0?o(A)&&!isNaN(parseInt(we))?A.splice(we,1):delete A[we]:A[we]=X:j(Be=!(Be=A[we])||!h(A,we)?A[we]={}:Be,Oe,X)):X===void 0?o(A)&&!isNaN(parseInt(O))?A.splice(O,1):delete A[O]:A[O]=X}}function N(A){var O,X={};for(O in A)h(A,O)&&(X[O]=A[O]);return X}var P=[].concat;function L(A){return P.apply([],A)}var St="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(O){return O+A+"Array"})}))).filter(function(A){return i[A]}),H=new Set(St.map(function(A){return i[A]})),M=null;function K(A){return M=new WeakMap,A=function O(X){if(!X||typeof X!="object")return X;var re=M.get(X);if(re)return re;if(o(X)){re=[],M.set(X,re);for(var ce=0,we=X.length;ce<we;++ce)re.push(O(X[ce]))}else if(H.has(X.constructor))re=X;else{var Oe,Be=u(X);for(Oe in re=Be===Object.prototype?{}:Object.create(Be),M.set(X,re),X)h(X,Oe)&&(re[Oe]=O(X[Oe]))}return re}(A),M=null,A}var q={}.toString;function ue(A){return q.call(A).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",te=typeof ae=="symbol"?function(A){var O;return A!=null&&(O=A[ae])&&O.apply(A)}:function(){return null};function Y(A,O){return O=A.indexOf(O),0<=O&&A.splice(O,1),0<=O}var ie={};function V(A){var O,X,re,ce;if(arguments.length===1){if(o(A))return A.slice();if(this===ie&&typeof A=="string")return[A];if(ce=te(A)){for(X=[];!(re=ce.next()).done;)X.push(re.value);return X}if(A==null)return[A];if(typeof(O=A.length)!="number")return[A];for(X=new Array(O);O--;)X[O]=A[O];return X}for(O=arguments.length,X=new Array(O);O--;)X[O]=arguments[O];return X}var J=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},it=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ei=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(it),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ne(A,O){this.name=A,this.message=O}function he(A,O){return A+". Errors: "+Object.keys(O).map(function(X){return O[X].toString()}).filter(function(X,re,ce){return ce.indexOf(X)===re}).join(`
`)}function de(A,O,X,re){this.failures=O,this.failedKeys=re,this.successCount=X,this.message=he(A,O)}function Ie(A,O){this.name="BulkError",this.failures=Object.keys(O).map(function(X){return O[X]}),this.failuresByPos=O,this.message=he(A,this.failures)}v(ne).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(de).from(ne),v(Ie).from(ne);var ke=Ei.reduce(function(A,O){return A[O]=O+"Error",A},{}),Te=ne,Se=Ei.reduce(function(A,O){var X=O+"Error";function re(ce,we){this.name=X,ce?typeof ce=="string"?(this.message="".concat(ce).concat(we?`
 `+we:""),this.inner=we||null):typeof ce=="object"&&(this.message="".concat(ce.name," ").concat(ce.message),this.inner=ce):(this.message=Q[O]||X,this.inner=null)}return v(re).from(Te),A[O]=re,A},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var Pe=it.reduce(function(A,O){return A[O+"Error"]=Se[O],A},{}),Qe=Ei.reduce(function(A,O){return["Syntax","Type","Range"].indexOf(O)===-1&&(A[O+"Error"]=Se[O]),A},{});function Le(){}function je(A){return A}function z(A,O){return A==null||A===je?O:function(X){return O(A(X))}}function Ee(A,O){return function(){A.apply(this,arguments),O.apply(this,arguments)}}function Ne(A,O){return A===Le?O:function(){var X=A.apply(this,arguments);X!==void 0&&(arguments[0]=X);var re=this.onsuccess,ce=this.onerror;this.onsuccess=null,this.onerror=null;var we=O.apply(this,arguments);return re&&(this.onsuccess=this.onsuccess?Ee(re,this.onsuccess):re),ce&&(this.onerror=this.onerror?Ee(ce,this.onerror):ce),we!==void 0?we:X}}function fe(A,O){return A===Le?O:function(){A.apply(this,arguments);var X=this.onsuccess,re=this.onerror;this.onsuccess=this.onerror=null,O.apply(this,arguments),X&&(this.onsuccess=this.onsuccess?Ee(X,this.onsuccess):X),re&&(this.onerror=this.onerror?Ee(re,this.onerror):re)}}function se(A,O){return A===Le?O:function(X){var re=A.apply(this,arguments);l(X,re);var ce=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,X=O.apply(this,arguments),ce&&(this.onsuccess=this.onsuccess?Ee(ce,this.onsuccess):ce),we&&(this.onerror=this.onerror?Ee(we,this.onerror):we),re===void 0?X===void 0?void 0:X:l(re,X)}}function ee(A,O){return A===Le?O:function(){return O.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function xe(A,O){return A===Le?O:function(){var X=A.apply(this,arguments);if(X&&typeof X.then=="function"){for(var re=this,ce=arguments.length,we=new Array(ce);ce--;)we[ce]=arguments[ce];return X.then(function(){return O.apply(re,we)})}return O.apply(this,arguments)}}Qe.ModifyError=de,Qe.DexieError=ne,Qe.BulkError=Ie;var Fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ce(A){Fe=A}var We={},Nt=100,St=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,u(A),A];var O=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[O,u(O),A]}(),it=St[0],Ei=St[1],St=St[2],Ei=Ei&&Ei.then,Ft=it&&it.constructor,Mt=!!St,Kt=function(A,O){le.push([A,O]),D&&(queueMicrotask(ge),D=!1)},be=!0,D=!0,W=[],pe=[],De=je,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},Ae=ve,le=[],ft=0,vt=[];function F(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var O=this._PSD=Ae;if(typeof A!="function"){if(A!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ye(this,this._value))}this._state=null,this._value=null,++O.ref,function X(re,ce){try{ce(function(we){if(re._state===null){if(we===re)throw new TypeError("A promise cannot be resolved with itself.");var Oe=re._lib&&G();we&&typeof we.then=="function"?X(re,function(Be,Ze){we instanceof F?we._then(Be,Ze):we.then(Be,Ze)}):(re._state=!0,re._value=we,Me(re)),Oe&&U()}},ye.bind(null,re))}catch(we){ye(re,we)}}(this,A)}var $e={get:function(){var A=Ae,O=Rt;function X(re,ce){var we=this,Oe=!A.global&&(A!==Ae||O!==Rt),Be=Oe&&!Xn(),Ze=new F(function(Xe,rt){Ke(we,new nt(Mo(re,A,Oe,Be),Mo(ce,A,Oe,Be),Xe,rt,A))});return this._consoleTask&&(Ze._consoleTask=this._consoleTask),Ze}return X.prototype=We,X},set:function(A){b(this,"then",A&&A.prototype===We?$e:{get:function(){return A},set:$e.set})}};function nt(A,O,X,re,ce){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof O=="function"?O:null,this.resolve=X,this.reject=re,this.psd=ce}function ye(A,O){var X,re;pe.push(O),A._state===null&&(X=A._lib&&G(),O=De(O),A._state=!1,A._value=O,re=A,W.some(function(ce){return ce._value===re._value})||W.push(re),Me(A),X&&U())}function Me(A){var O=A._listeners;A._listeners=[];for(var X=0,re=O.length;X<re;++X)Ke(A,O[X]);var ce=A._PSD;--ce.ref||ce.finalize(),ft===0&&(++ft,Kt(function(){--ft==0&&Z()},[]))}function Ke(A,O){if(A._state!==null){var X=A._state?O.onFulfilled:O.onRejected;if(X===null)return(A._state?O.resolve:O.reject)(A._value);++O.psd.ref,++ft,Kt(Dt,[X,A,O])}else A._listeners.push(O)}function Dt(A,O,X){try{var re,ce=O._value;!O._state&&pe.length&&(pe=[]),re=Fe&&O._consoleTask?O._consoleTask.run(function(){return A(ce)}):A(ce),O._state||pe.indexOf(ce)!==-1||function(we){for(var Oe=W.length;Oe;)if(W[--Oe]._value===we._value)return W.splice(Oe,1)}(O),X.resolve(re)}catch(we){X.reject(we)}finally{--ft==0&&Z(),--X.psd.ref||X.psd.finalize()}}function ge(){Do(ve,function(){G()&&U()})}function G(){var A=be;return D=be=!1,A}function U(){var A,O,X;do for(;0<le.length;)for(A=le,le=[],X=A.length,O=0;O<X;++O){var re=A[O];re[0].apply(null,re[1])}while(0<le.length);D=be=!0}function Z(){var A=W;W=[],A.forEach(function(re){re._PSD.onunhandled.call(null,re._value,re)});for(var O=vt.slice(0),X=O.length;X;)O[--X]()}function me(A){return new F(We,!1,A)}function Re(A,O){var X=Ae;return function(){var re=G(),ce=Ae;try{return $n(X,!0),A.apply(this,arguments)}catch(we){O&&O(we)}finally{$n(ce,!1),re&&U()}}}m(F.prototype,{then:$e,_then:function(A,O){Ke(this,new nt(null,null,A,O,Ae))},catch:function(A){if(arguments.length===1)return this.then(null,A);var O=A,X=arguments[1];return typeof O=="function"?this.then(null,function(re){return(re instanceof O?X:me)(re)}):this.then(null,function(re){return(re&&re.name===O?X:me)(re)})},finally:function(A){return this.then(function(O){return F.resolve(A()).then(function(){return O})},function(O){return F.resolve(A()).then(function(){return me(O)})})},timeout:function(A,O){var X=this;return A<1/0?new F(function(re,ce){var we=setTimeout(function(){return ce(new Se.Timeout(O))},A);X.then(re,ce).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(F.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=xi(),m(F,{all:function(){var A=V.apply(null,arguments).map(Sr);return new F(function(O,X){A.length===0&&O([]);var re=A.length;A.forEach(function(ce,we){return F.resolve(ce).then(function(Oe){A[we]=Oe,--re||O(A)},X)})})},resolve:function(A){return A instanceof F?A:A&&typeof A.then=="function"?new F(function(O,X){A.then(O,X)}):new F(We,!0,A)},reject:me,race:function(){var A=V.apply(null,arguments).map(Sr);return new F(function(O,X){A.map(function(re){return F.resolve(re).then(O,X)})})},PSD:{get:function(){return Ae},set:function(A){return Ae=A}},totalEchoes:{get:function(){return Rt}},newPSD:en,usePSD:Do,scheduler:{get:function(){return Kt},set:function(A){Kt=A}},rejectionMapper:{get:function(){return De},set:function(A){De=A}},follow:function(A,O){return new F(function(X,re){return en(function(ce,we){var Oe=Ae;Oe.unhandleds=[],Oe.onunhandled=we,Oe.finalize=Ee(function(){var Be,Ze=this;Be=function(){Ze.unhandleds.length===0?ce():we(Ze.unhandleds[0])},vt.push(function Xe(){Be(),vt.splice(vt.indexOf(Xe),1)}),++ft,Kt(function(){--ft==0&&Z()},[])},Oe.finalize),A()},O,X,re)})}}),Ft&&(Ft.allSettled&&b(F,"allSettled",function(){var A=V.apply(null,arguments).map(Sr);return new F(function(O){A.length===0&&O([]);var X=A.length,re=new Array(X);A.forEach(function(ce,we){return F.resolve(ce).then(function(Oe){return re[we]={status:"fulfilled",value:Oe}},function(Oe){return re[we]={status:"rejected",reason:Oe}}).then(function(){return--X||O(re)})})})}),Ft.any&&typeof AggregateError<"u"&&b(F,"any",function(){var A=V.apply(null,arguments).map(Sr);return new F(function(O,X){A.length===0&&X(new AggregateError([]));var re=A.length,ce=new Array(re);A.forEach(function(we,Oe){return F.resolve(we).then(function(Be){return O(Be)},function(Be){ce[Oe]=Be,--re||X(new AggregateError(ce))})})})}),Ft.withResolvers&&(F.withResolvers=Ft.withResolvers));var Ve={awaits:0,echoes:0,id:0},pt=0,Wt=[],ut=0,Rt=0,Lt=0;function en(A,O,X,re){var ce=Ae,we=Object.create(ce);return we.parent=ce,we.ref=0,we.global=!1,we.id=++Lt,ve.env,we.env=Mt?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject}:{},O&&l(we,O),++ce.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},re=Do(we,A,X,re),we.ref===0&&we.finalize(),re}function Nn(){return Ve.id||(Ve.id=++pt),++Ve.awaits,Ve.echoes+=Nt,Ve.id}function Xn(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=Ve.awaits*Nt,!0)}function Sr(A){return Ve.echoes&&A&&A.constructor===Ft?(Nn(),A.then(function(O){return Xn(),O},function(O){return Xn(),Kr(O)})):A}function Er(){var A=Wt[Wt.length-1];Wt.pop(),$n(A,!1)}function $n(A,O){var X,re=Ae;(O?!Ve.echoes||ut++&&A===Ae:!ut||--ut&&A===Ae)||queueMicrotask(O?(function(ce){++Rt,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.awaits=Ve.id=0),Wt.push(Ae),$n(ce,!0)}).bind(null,A):Er),A!==Ae&&(Ae=A,re===ve&&(ve.env=xi()),Mt&&(X=ve.env.Promise,O=A.env,(re.global||A.global)&&(Object.defineProperty(i,"Promise",O.PromiseProp),X.all=O.all,X.race=O.race,X.resolve=O.resolve,X.reject=O.reject,O.allSettled&&(X.allSettled=O.allSettled),O.any&&(X.any=O.any))))}function xi(){var A=i.Promise;return Mt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function Do(A,O,X,re,ce){var we=Ae;try{return $n(A,!0),O(X,re,ce)}finally{$n(we,!1)}}function Mo(A,O,X,re){return typeof A!="function"?A:function(){var ce=Ae;X&&Nn(),$n(O,!0);try{return A.apply(this,arguments)}finally{$n(ce,!1),re&&queueMicrotask(Xn)}}}function Oo(A){Promise===Ft&&Ve.echoes===0?ut===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+Ei).indexOf("[native code]")===-1&&(Nn=Xn=Le);var Kr=F.reject,Po="￿",_s="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mb="String expected.",eo=[],Cl="__dbnames",as="readonly",pd="readwrite";function Fo(A,O){return A?O?function(){return A.apply(this,arguments)&&O.apply(this,arguments)}:A:O}var Tl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Oc(A){return typeof A!="string"||/\./.test(A)?function(O){return O}:function(O){return O[A]===void 0&&A in O&&delete(O=K(O))[A],O}}function Uf(){throw Se.Type()}function Jn(A,O){try{var X=ym(A),re=ym(O);if(X!==re)return X==="Array"?1:re==="Array"?-1:X==="binary"?1:re==="binary"?-1:X==="string"?1:re==="string"?-1:X==="Date"?1:re!=="Date"?NaN:-1;switch(X){case"number":case"Date":case"string":return O<A?1:A<O?-1:0;case"binary":return function(ce,we){for(var Oe=ce.length,Be=we.length,Ze=Oe<Be?Oe:Be,Xe=0;Xe<Ze;++Xe)if(ce[Xe]!==we[Xe])return ce[Xe]<we[Xe]?-1:1;return Oe===Be?0:Oe<Be?-1:1}(_i(A),_i(O));case"Array":return function(ce,we){for(var Oe=ce.length,Be=we.length,Ze=Oe<Be?Oe:Be,Xe=0;Xe<Ze;++Xe){var rt=Jn(ce[Xe],we[Xe]);if(rt!==0)return rt}return Oe===Be?0:Oe<Be?-1:1}(A,O)}}catch{}return NaN}function ym(A){var O=typeof A;return O!="object"?O:ArrayBuffer.isView(A)?"binary":(A=ue(A),A==="ArrayBuffer"?"binary":A)}function _i(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var bm=(jr.prototype._trans=function(A,O,X){var re=this._tx||Ae.trans,ce=this.name,we=Fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function Oe(Xe,rt,He){if(!He.schema[ce])throw new Se.NotFound("Table "+ce+" not part of transaction");return O(He.idbtrans,He)}var Be=G();try{var Ze=re&&re.db._novip===this.db._novip?re===Ae.trans?re._promise(A,Oe,X):en(function(){return re._promise(A,Oe,X)},{trans:re,transless:Ae.transless||Ae}):function Xe(rt,He,st,qe){if(rt.idbdb&&(rt._state.openComplete||Ae.letThrough||rt._vip)){var tt=rt._createTransaction(He,st,rt._dbSchema);try{tt.create(),rt._state.PR1398_maxLoop=3}catch(ot){return ot.name===ke.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,He,st,qe)})):Kr(ot)}return tt._promise(He,function(ot,Je){return en(function(){return Ae.trans=tt,qe(ot,Je,tt)})}).then(function(ot){if(He==="readwrite")try{tt.idbtrans.commit()}catch{}return He==="readonly"?ot:tt._completion.then(function(){return ot})})}if(rt._state.openComplete)return Kr(new Se.DatabaseClosed(rt._state.dbOpenError));if(!rt._state.isBeingOpened){if(!rt._state.autoOpen)return Kr(new Se.DatabaseClosed);rt.open().catch(Le)}return rt._state.dbReadyPromise.then(function(){return Xe(rt,He,st,qe)})}(this.db,A,[this.name],Oe);return we&&(Ze._consoleTask=we,Ze=Ze.catch(function(Xe){return console.trace(Xe),Kr(Xe)})),Ze}finally{Be&&U()}},jr.prototype.get=function(A,O){var X=this;return A&&A.constructor===Object?this.where(A).first(O):A==null?Kr(new Se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(re){return X.core.get({trans:re,key:A}).then(function(ce){return X.hook.reading.fire(ce)})}).then(O)},jr.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(o(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var O=s(A);if(O.length===1)return this.where(O[0]).equals(A[O[0]]);var X=this.schema.indexes.concat(this.schema.primKey).filter(function(Be){if(Be.compound&&O.every(function(Xe){return 0<=Be.keyPath.indexOf(Xe)})){for(var Ze=0;Ze<O.length;++Ze)if(O.indexOf(Be.keyPath[Ze])===-1)return!1;return!0}return!1}).sort(function(Be,Ze){return Be.keyPath.length-Ze.keyPath.length})[0];if(X&&this.db._maxKey!==Po){var we=X.keyPath.slice(0,O.length);return this.where(we).equals(we.map(function(Ze){return A[Ze]}))}!X&&Fe&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(O.join("+"),"]"));var re=this.schema.idxByName;function ce(Be,Ze){return Jn(Be,Ze)===0}var Oe=O.reduce(function(He,Ze){var Xe=He[0],rt=He[1],He=re[Ze],st=A[Ze];return[Xe||He,Xe||!He?Fo(rt,He&&He.multi?function(qe){return qe=I(qe,Ze),o(qe)&&qe.some(function(tt){return ce(st,tt)})}:function(qe){return ce(st,I(qe,Ze))}):rt]},[null,null]),we=Oe[0],Oe=Oe[1];return we?this.where(we.name).equals(A[we.keyPath]).filter(Oe):X?this.filter(Oe):this.where(O).equals("")},jr.prototype.filter=function(A){return this.toCollection().and(A)},jr.prototype.count=function(A){return this.toCollection().count(A)},jr.prototype.offset=function(A){return this.toCollection().offset(A)},jr.prototype.limit=function(A){return this.toCollection().limit(A)},jr.prototype.each=function(A){return this.toCollection().each(A)},jr.prototype.toArray=function(A){return this.toCollection().toArray(A)},jr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},jr.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,o(A)?"[".concat(A.join("+"),"]"):A))},jr.prototype.reverse=function(){return this.toCollection().reverse()},jr.prototype.mapToClass=function(A){var O,X=this.db,re=this.name;function ce(){return O!==null&&O.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof Uf&&(function(Ze,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function rt(){this.constructor=Ze}n(Ze,Xe),Ze.prototype=Xe===null?Object.create(Xe):(rt.prototype=Xe.prototype,new rt)}(ce,O=A),Object.defineProperty(ce.prototype,"db",{get:function(){return X},enumerable:!1,configurable:!0}),ce.prototype.table=function(){return re},A=ce);for(var we=new Set,Oe=A.prototype;Oe;Oe=u(Oe))Object.getOwnPropertyNames(Oe).forEach(function(Ze){return we.add(Ze)});function Be(Ze){if(!Ze)return Ze;var Xe,rt=Object.create(A.prototype);for(Xe in Ze)if(!we.has(Xe))try{rt[Xe]=Ze[Xe]}catch{}return rt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Be,this.hook("reading",Be),A},jr.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},jr.prototype.add=function(A,O){var X=this,re=this.schema.primKey,ce=re.auto,we=re.keyPath,Oe=A;return we&&ce&&(Oe=Oc(we)(A)),this._trans("readwrite",function(Be){return X.core.mutate({trans:Be,type:"add",keys:O!=null?[O]:null,values:[Oe]})}).then(function(Be){return Be.numFailures?F.reject(Be.failures[0]):Be.lastResult}).then(function(Be){if(we)try{j(A,we,Be)}catch{}return Be})},jr.prototype.update=function(A,O){return typeof A!="object"||o(A)?this.where(":id").equals(A).modify(O):(A=I(A,this.schema.primKey.keyPath),A===void 0?Kr(new Se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(O))},jr.prototype.put=function(A,O){var X=this,re=this.schema.primKey,ce=re.auto,we=re.keyPath,Oe=A;return we&&ce&&(Oe=Oc(we)(A)),this._trans("readwrite",function(Be){return X.core.mutate({trans:Be,type:"put",values:[Oe],keys:O!=null?[O]:null})}).then(function(Be){return Be.numFailures?F.reject(Be.failures[0]):Be.lastResult}).then(function(Be){if(we)try{j(A,we,Be)}catch{}return Be})},jr.prototype.delete=function(A){var O=this;return this._trans("readwrite",function(X){return O.core.mutate({trans:X,type:"delete",keys:[A]})}).then(function(X){return X.numFailures?F.reject(X.failures[0]):void 0})},jr.prototype.clear=function(){var A=this;return this._trans("readwrite",function(O){return A.core.mutate({trans:O,type:"deleteRange",range:Tl})}).then(function(O){return O.numFailures?F.reject(O.failures[0]):void 0})},jr.prototype.bulkGet=function(A){var O=this;return this._trans("readonly",function(X){return O.core.getMany({keys:A,trans:X}).then(function(re){return re.map(function(ce){return O.hook.reading.fire(ce)})})})},jr.prototype.bulkAdd=function(A,O,X){var re=this,ce=Array.isArray(O)?O:void 0,we=(X=X||(ce?void 0:O))?X.allKeys:void 0;return this._trans("readwrite",function(Oe){var Xe=re.schema.primKey,Be=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var Ze=A.length,Xe=Xe&&Be?A.map(Oc(Xe)):A;return re.core.mutate({trans:Oe,type:"add",keys:ce,values:Xe,wantResults:we}).then(function(tt){var He=tt.numFailures,st=tt.results,qe=tt.lastResult,tt=tt.failures;if(He===0)return we?st:qe;throw new Ie("".concat(re.name,".bulkAdd(): ").concat(He," of ").concat(Ze," operations failed"),tt)})})},jr.prototype.bulkPut=function(A,O,X){var re=this,ce=Array.isArray(O)?O:void 0,we=(X=X||(ce?void 0:O))?X.allKeys:void 0;return this._trans("readwrite",function(Oe){var Xe=re.schema.primKey,Be=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var Ze=A.length,Xe=Xe&&Be?A.map(Oc(Xe)):A;return re.core.mutate({trans:Oe,type:"put",keys:ce,values:Xe,wantResults:we}).then(function(tt){var He=tt.numFailures,st=tt.results,qe=tt.lastResult,tt=tt.failures;if(He===0)return we?st:qe;throw new Ie("".concat(re.name,".bulkPut(): ").concat(He," of ").concat(Ze," operations failed"),tt)})})},jr.prototype.bulkUpdate=function(A){var O=this,X=this.core,re=A.map(function(Oe){return Oe.key}),ce=A.map(function(Oe){return Oe.changes}),we=[];return this._trans("readwrite",function(Oe){return X.getMany({trans:Oe,keys:re,cache:"clone"}).then(function(Be){var Ze=[],Xe=[];A.forEach(function(He,st){var qe=He.key,tt=He.changes,ot=Be[st];if(ot){for(var Je=0,ht=Object.keys(tt);Je<ht.length;Je++){var bt=ht[Je],wt=tt[bt];if(bt===O.schema.primKey.keyPath){if(Jn(wt,qe)!==0)throw new Se.Constraint("Cannot update primary key in bulkUpdate()")}else j(ot,bt,wt)}we.push(st),Ze.push(qe),Xe.push(ot)}});var rt=Ze.length;return X.mutate({trans:Oe,type:"put",keys:Ze,values:Xe,updates:{keys:re,changeSpecs:ce}}).then(function(He){var st=He.numFailures,qe=He.failures;if(st===0)return rt;for(var tt=0,ot=Object.keys(qe);tt<ot.length;tt++){var Je,ht=ot[tt],bt=we[Number(ht)];bt!=null&&(Je=qe[ht],delete qe[ht],qe[bt]=Je)}throw new Ie("".concat(O.name,".bulkUpdate(): ").concat(st," of ").concat(rt," operations failed"),qe)})})})},jr.prototype.bulkDelete=function(A){var O=this,X=A.length;return this._trans("readwrite",function(re){return O.core.mutate({trans:re,type:"delete",keys:A})}).then(function(Oe){var ce=Oe.numFailures,we=Oe.lastResult,Oe=Oe.failures;if(ce===0)return we;throw new Ie("".concat(O.name,".bulkDelete(): ").concat(ce," of ").concat(X," operations failed"),Oe)})},jr);function jr(){}function Lo(A){function O(Oe,Be){if(Be){for(var Ze=arguments.length,Xe=new Array(Ze-1);--Ze;)Xe[Ze-1]=arguments[Ze];return X[Oe].subscribe.apply(null,Xe),A}if(typeof Oe=="string")return X[Oe]}var X={};O.addEventType=we;for(var re=1,ce=arguments.length;re<ce;++re)we(arguments[re]);return O;function we(Oe,Be,Ze){if(typeof Oe!="object"){var Xe;Be=Be||ee;var rt={subscribers:[],fire:Ze=Ze||Le,subscribe:function(He){rt.subscribers.indexOf(He)===-1&&(rt.subscribers.push(He),rt.fire=Be(rt.fire,He))},unsubscribe:function(He){rt.subscribers=rt.subscribers.filter(function(st){return st!==He}),rt.fire=rt.subscribers.reduce(Be,Ze)}};return X[Oe]=O[Oe]=rt}s(Xe=Oe).forEach(function(He){var st=Xe[He];if(o(st))we(He,Xe[He][0],Xe[He][1]);else{if(st!=="asap")throw new Se.InvalidArgument("Invalid event config");var qe=we(He,je,function(){for(var tt=arguments.length,ot=new Array(tt);tt--;)ot[tt]=arguments[tt];qe.subscribers.forEach(function(Je){k(function(){Je.apply(null,ot)})})})}})}}function Pc(A,O){return v(O).from({prototype:A}),O}function to(A,O){return!(A.filter||A.algorithm||A.or)&&(O?A.justLimit:!A.replayFilter)}function vm(A,O){A.filter=Fo(A.filter,O)}function ai(A,O,X){var re=A.replayFilter;A.replayFilter=re?function(){return Fo(re(),O())}:O,A.justLimit=X&&!re}function Fc(A,O){if(A.isPrimKey)return O.primaryKey;var X=O.getIndexByKeyPath(A.index);if(!X)throw new Se.Schema("KeyPath "+A.index+" on object store "+O.name+" is not indexed");return X}function wm(A,O,X){var re=Fc(A,O.schema);return O.openCursor({trans:X,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:re,range:A.range}})}function Lc(A,O,X,re){var ce=A.replayFilter?Fo(A.filter,A.replayFilter()):A.filter;if(A.or){var we={},Oe=function(Be,Ze,Xe){var rt,He;ce&&!ce(Ze,Xe,function(st){return Ze.stop(st)},function(st){return Ze.fail(st)})||((He=""+(rt=Ze.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(rt)),h(we,He)||(we[He]=!0,O(Be,Ze,Xe)))};return Promise.all([A.or._iterate(Oe,X),kl(wm(A,re,X),A.algorithm,Oe,!A.keysOnly&&A.valueMapper)])}return kl(wm(A,re,X),Fo(A.algorithm,ce),O,!A.keysOnly&&A.valueMapper)}function kl(A,O,X,re){var ce=Re(re?function(we,Oe,Be){return X(re(we),Oe,Be)}:X);return A.then(function(we){if(we)return we.start(function(){var Oe=function(){return we.continue()};O&&!O(we,function(Be){return Oe=Be},function(Be){we.stop(Be),Oe=Le},function(Be){we.fail(Be),Oe=Le})||ce(we.value,we,function(Be){return Oe=Be}),Oe()})})}var Bc=(xm.prototype.execute=function(A){var O=this["@@propmod"];if(O.add!==void 0){var X=O.add;if(o(X))return a(a([],o(A)?A:[],!0),X).sort();if(typeof X=="number")return(Number(A)||0)+X;if(typeof X=="bigint")try{return BigInt(A)+X}catch{return BigInt(0)+X}throw new TypeError("Invalid term ".concat(X))}if(O.remove!==void 0){var re=O.remove;if(o(re))return o(A)?A.filter(function(ce){return!re.includes(ce)}).sort():[];if(typeof re=="number")return Number(A)-re;if(typeof re=="bigint")try{return BigInt(A)-re}catch{return BigInt(0)-re}throw new TypeError("Invalid subtrahend ".concat(re))}return X=(X=O.replacePrefix)===null||X===void 0?void 0:X[0],X&&typeof A=="string"&&A.startsWith(X)?O.replacePrefix[1]+A.substring(X.length):A},xm);function xm(A){this["@@propmod"]=A}var $c=(nr.prototype._read=function(A,O){var X=this._ctx;return X.error?X.table._trans(null,Kr.bind(null,X.error)):X.table._trans("readonly",A).then(O)},nr.prototype._write=function(A){var O=this._ctx;return O.error?O.table._trans(null,Kr.bind(null,O.error)):O.table._trans("readwrite",A,"locked")},nr.prototype._addAlgorithm=function(A){var O=this._ctx;O.algorithm=Fo(O.algorithm,A)},nr.prototype._iterate=function(A,O){return Lc(this._ctx,A,O,this._ctx.table.core)},nr.prototype.clone=function(A){var O=Object.create(this.constructor.prototype),X=Object.create(this._ctx);return A&&l(X,A),O._ctx=X,O},nr.prototype.raw=function(){return this._ctx.valueMapper=null,this},nr.prototype.each=function(A){var O=this._ctx;return this._read(function(X){return Lc(O,A,X,O.table.core)})},nr.prototype.count=function(A){var O=this;return this._read(function(X){var re=O._ctx,ce=re.table.core;if(to(re,!0))return ce.count({trans:X,query:{index:Fc(re,ce.schema),range:re.range}}).then(function(Oe){return Math.min(Oe,re.limit)});var we=0;return Lc(re,function(){return++we,!1},X,ce).then(function(){return we})}).then(A)},nr.prototype.sortBy=function(A,O){var X=A.split(".").reverse(),re=X[0],ce=X.length-1;function we(Ze,Xe){return Xe?we(Ze[X[Xe]],Xe-1):Ze[re]}var Oe=this._ctx.dir==="next"?1:-1;function Be(Ze,Xe){return Jn(we(Ze,ce),we(Xe,ce))*Oe}return this.toArray(function(Ze){return Ze.sort(Be)}).then(O)},nr.prototype.toArray=function(A){var O=this;return this._read(function(X){var re=O._ctx;if(re.dir==="next"&&to(re,!0)&&0<re.limit){var ce=re.valueMapper,we=Fc(re,re.table.core.schema);return re.table.core.query({trans:X,limit:re.limit,values:!0,query:{index:we,range:re.range}}).then(function(Be){return Be=Be.result,ce?Be.map(ce):Be})}var Oe=[];return Lc(re,function(Be){return Oe.push(Be)},X,re.table.core).then(function(){return Oe})},A)},nr.prototype.offset=function(A){var O=this._ctx;return A<=0||(O.offset+=A,to(O)?ai(O,function(){var X=A;return function(re,ce){return X===0||(X===1?--X:ce(function(){re.advance(X),X=0}),!1)}}):ai(O,function(){var X=A;return function(){return--X<0}})),this},nr.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),ai(this._ctx,function(){var O=A;return function(X,re,ce){return--O<=0&&re(ce),0<=O}},!0),this},nr.prototype.until=function(A,O){return vm(this._ctx,function(X,re,ce){return!A(X.value)||(re(ce),O)}),this},nr.prototype.first=function(A){return this.limit(1).toArray(function(O){return O[0]}).then(A)},nr.prototype.last=function(A){return this.reverse().first(A)},nr.prototype.filter=function(A){var O;return vm(this._ctx,function(X){return A(X.value)}),(O=this._ctx).isMatch=Fo(O.isMatch,A),this},nr.prototype.and=function(A){return this.filter(A)},nr.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},nr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},nr.prototype.desc=function(){return this.reverse()},nr.prototype.eachKey=function(A){var O=this._ctx;return O.keysOnly=!O.isMatch,this.each(function(X,re){A(re.key,re)})},nr.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},nr.prototype.eachPrimaryKey=function(A){var O=this._ctx;return O.keysOnly=!O.isMatch,this.each(function(X,re){A(re.primaryKey,re)})},nr.prototype.keys=function(A){var O=this._ctx;O.keysOnly=!O.isMatch;var X=[];return this.each(function(re,ce){X.push(ce.key)}).then(function(){return X}).then(A)},nr.prototype.primaryKeys=function(A){var O=this._ctx;if(O.dir==="next"&&to(O,!0)&&0<O.limit)return this._read(function(re){var ce=Fc(O,O.table.core.schema);return O.table.core.query({trans:re,values:!1,limit:O.limit,query:{index:ce,range:O.range}})}).then(function(re){return re.result}).then(A);O.keysOnly=!O.isMatch;var X=[];return this.each(function(re,ce){X.push(ce.primaryKey)}).then(function(){return X}).then(A)},nr.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},nr.prototype.firstKey=function(A){return this.limit(1).keys(function(O){return O[0]}).then(A)},nr.prototype.lastKey=function(A){return this.reverse().firstKey(A)},nr.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var O={};return vm(this._ctx,function(ce){var re=ce.primaryKey.toString(),ce=h(O,re);return O[re]=!0,!ce}),this},nr.prototype.modify=function(A){var O=this,X=this._ctx;return this._write(function(re){var ce,we,Oe;Oe=typeof A=="function"?A:(ce=s(A),we=ce.length,function(Je){for(var ht=!1,bt=0;bt<we;++bt){var wt=ce[bt],kt=A[wt],Vt=I(Je,wt);kt instanceof Bc?(j(Je,wt,kt.execute(Vt)),ht=!0):Vt!==kt&&(j(Je,wt,kt),ht=!0)}return ht});var Be=X.table.core,He=Be.schema.primaryKey,Ze=He.outbound,Xe=He.extractKey,rt=200,He=O.db._options.modifyChunkSize;He&&(rt=typeof He=="object"?He[Be.name]||He["*"]||200:He);function st(Je,wt){var bt=wt.failures,wt=wt.numFailures;tt+=Je-wt;for(var kt=0,Vt=s(bt);kt<Vt.length;kt++){var Yt=Vt[kt];qe.push(bt[Yt])}}var qe=[],tt=0,ot=[];return O.clone().primaryKeys().then(function(Je){function ht(wt){var kt=Math.min(rt,Je.length-wt);return Be.getMany({trans:re,keys:Je.slice(wt,wt+kt),cache:"immutable"}).then(function(Vt){for(var Yt=[],$t=[],Gt=Ze?[]:null,Jt=[],zt=0;zt<kt;++zt){var nn=Vt[zt],pn={value:K(nn),primKey:Je[wt+zt]};Oe.call(pn,pn.value,pn)!==!1&&(pn.value==null?Jt.push(Je[wt+zt]):Ze||Jn(Xe(nn),Xe(pn.value))===0?($t.push(pn.value),Ze&&Gt.push(Je[wt+zt])):(Jt.push(Je[wt+zt]),Yt.push(pn.value)))}return Promise.resolve(0<Yt.length&&Be.mutate({trans:re,type:"add",values:Yt}).then(function(gn){for(var In in gn.failures)Jt.splice(parseInt(In),1);st(Yt.length,gn)})).then(function(){return(0<$t.length||bt&&typeof A=="object")&&Be.mutate({trans:re,type:"put",keys:Gt,values:$t,criteria:bt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<wt}).then(function(gn){return st($t.length,gn)})}).then(function(){return(0<Jt.length||bt&&A===Vf)&&Be.mutate({trans:re,type:"delete",keys:Jt,criteria:bt,isAdditionalChunk:0<wt}).then(function(gn){return st(Jt.length,gn)})}).then(function(){return Je.length>wt+kt&&ht(wt+rt)})})}var bt=to(X)&&X.limit===1/0&&(typeof A!="function"||A===Vf)&&{index:X.index,range:X.range};return ht(0).then(function(){if(0<qe.length)throw new de("Error modifying one or more objects",qe,tt,ot);return Je.length})})})},nr.prototype.delete=function(){var A=this._ctx,O=A.range;return to(A)&&(A.isPrimKey||O.type===3)?this._write(function(X){var re=A.table.core.schema.primaryKey,ce=O;return A.table.core.count({trans:X,query:{index:re,range:ce}}).then(function(we){return A.table.core.mutate({trans:X,type:"deleteRange",range:ce}).then(function(Oe){var Be=Oe.failures;if(Oe.lastResult,Oe.results,Oe=Oe.numFailures,Oe)throw new de("Could not delete some values",Object.keys(Be).map(function(Ze){return Be[Ze]}),we-Oe);return we-Oe})})}):this.modify(Vf)},nr);function nr(){}var Vf=function(A,O){return O.value=null};function gb(A,O){return A<O?-1:A===O?0:1}function _m(A,O){return O<A?-1:A===O?0:1}function Si(A,O,X){return A=A instanceof Nl?new A.Collection(A):A,A._ctx.error=new(X||TypeError)(O),A}function zc(A){return new A.Collection(A,function(){return Hf("")}).limit(0)}function Al(A,O,X,re){var ce,we,Oe,Be,Ze,Xe,rt,He=X.length;if(!X.every(function(tt){return typeof tt=="string"}))return Si(A,mb);function st(tt){ce=tt==="next"?function(Je){return Je.toUpperCase()}:function(Je){return Je.toLowerCase()},we=tt==="next"?function(Je){return Je.toLowerCase()}:function(Je){return Je.toUpperCase()},Oe=tt==="next"?gb:_m;var ot=X.map(function(Je){return{lower:we(Je),upper:ce(Je)}}).sort(function(Je,ht){return Oe(Je.lower,ht.lower)});Be=ot.map(function(Je){return Je.upper}),Ze=ot.map(function(Je){return Je.lower}),rt=(Xe=tt)==="next"?"":re}st("next"),A=new A.Collection(A,function(){return Ss(Be[0],Ze[He-1]+re)}),A._ondirectionchange=function(tt){st(tt)};var qe=0;return A._addAlgorithm(function(tt,ot,Je){var ht=tt.key;if(typeof ht!="string")return!1;var bt=we(ht);if(O(bt,Ze,qe))return!0;for(var wt=null,kt=qe;kt<He;++kt){var Vt=function(Yt,$t,Gt,Jt,zt,nn){for(var pn=Math.min(Yt.length,Jt.length),gn=-1,In=0;In<pn;++In){var Ya=$t[In];if(Ya!==Jt[In])return zt(Yt[In],Gt[In])<0?Yt.substr(0,In)+Gt[In]+Gt.substr(In+1):zt(Yt[In],Jt[In])<0?Yt.substr(0,In)+Jt[In]+Gt.substr(In+1):0<=gn?Yt.substr(0,gn)+$t[gn]+Gt.substr(gn+1):null;zt(Yt[In],Ya)<0&&(gn=In)}return pn<Jt.length&&nn==="next"?Yt+Gt.substr(Yt.length):pn<Yt.length&&nn==="prev"?Yt.substr(0,Gt.length):gn<0?null:Yt.substr(0,gn)+Jt[gn]+Gt.substr(gn+1)}(ht,bt,Be[kt],Ze[kt],Oe,Xe);Vt===null&&wt===null?qe=kt+1:(wt===null||0<Oe(wt,Vt))&&(wt=Vt)}return ot(wt!==null?function(){tt.continue(wt+rt)}:Je),!1}),A}function Ss(A,O,X,re){return{type:2,lower:A,upper:O,lowerOpen:X,upperOpen:re}}function Hf(A){return{type:1,lower:A,upper:A}}var Nl=(Object.defineProperty($r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$r.prototype.between=function(A,O,X,re){X=X!==!1,re=re===!0;try{return 0<this._cmp(A,O)||this._cmp(A,O)===0&&(X||re)&&(!X||!re)?zc(this):new this.Collection(this,function(){return Ss(A,O,!X,!re)})}catch{return Si(this,_s)}},$r.prototype.equals=function(A){return A==null?Si(this,_s):new this.Collection(this,function(){return Hf(A)})},$r.prototype.above=function(A){return A==null?Si(this,_s):new this.Collection(this,function(){return Ss(A,void 0,!0)})},$r.prototype.aboveOrEqual=function(A){return A==null?Si(this,_s):new this.Collection(this,function(){return Ss(A,void 0,!1)})},$r.prototype.below=function(A){return A==null?Si(this,_s):new this.Collection(this,function(){return Ss(void 0,A,!1,!0)})},$r.prototype.belowOrEqual=function(A){return A==null?Si(this,_s):new this.Collection(this,function(){return Ss(void 0,A)})},$r.prototype.startsWith=function(A){return typeof A!="string"?Si(this,mb):this.between(A,A+Po,!0,!0)},$r.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):Al(this,function(O,X){return O.indexOf(X[0])===0},[A],Po)},$r.prototype.equalsIgnoreCase=function(A){return Al(this,function(O,X){return O===X[0]},[A],"")},$r.prototype.anyOfIgnoreCase=function(){var A=V.apply(ie,arguments);return A.length===0?zc(this):Al(this,function(O,X){return X.indexOf(O)!==-1},A,"")},$r.prototype.startsWithAnyOfIgnoreCase=function(){var A=V.apply(ie,arguments);return A.length===0?zc(this):Al(this,function(O,X){return X.some(function(re){return O.indexOf(re)===0})},A,Po)},$r.prototype.anyOf=function(){var A=this,O=V.apply(ie,arguments),X=this._cmp;try{O.sort(X)}catch{return Si(this,_s)}if(O.length===0)return zc(this);var re=new this.Collection(this,function(){return Ss(O[0],O[O.length-1])});re._ondirectionchange=function(we){X=we==="next"?A._ascending:A._descending,O.sort(X)};var ce=0;return re._addAlgorithm(function(we,Oe,Be){for(var Ze=we.key;0<X(Ze,O[ce]);)if(++ce===O.length)return Oe(Be),!1;return X(Ze,O[ce])===0||(Oe(function(){we.continue(O[ce])}),!1)}),re},$r.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$r.prototype.noneOf=function(){var A=V.apply(ie,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return Si(this,_s)}var O=A.reduce(function(X,re){return X?X.concat([[X[X.length-1][1],re]]):[[-1/0,re]]},null);return O.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(O,{includeLowers:!1,includeUppers:!1})},$r.prototype.inAnyRange=function(ht,O){var X=this,re=this._cmp,ce=this._ascending,we=this._descending,Oe=this._min,Be=this._max;if(ht.length===0)return zc(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&ce(bt[0],bt[1])<=0}))return Si(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);var Ze=!O||O.includeLowers!==!1,Xe=O&&O.includeUppers===!0,rt,He=ce;function st(bt,wt){return He(bt[0],wt[0])}try{(rt=ht.reduce(function(bt,wt){for(var kt=0,Vt=bt.length;kt<Vt;++kt){var Yt=bt[kt];if(re(wt[0],Yt[1])<0&&0<re(wt[1],Yt[0])){Yt[0]=Oe(Yt[0],wt[0]),Yt[1]=Be(Yt[1],wt[1]);break}}return kt===Vt&&bt.push(wt),bt},[])).sort(st)}catch{return Si(this,_s)}var qe=0,tt=Xe?function(bt){return 0<ce(bt,rt[qe][1])}:function(bt){return 0<=ce(bt,rt[qe][1])},ot=Ze?function(bt){return 0<we(bt,rt[qe][0])}:function(bt){return 0<=we(bt,rt[qe][0])},Je=tt,ht=new this.Collection(this,function(){return Ss(rt[0][0],rt[rt.length-1][1],!Ze,!Xe)});return ht._ondirectionchange=function(bt){He=bt==="next"?(Je=tt,ce):(Je=ot,we),rt.sort(st)},ht._addAlgorithm(function(bt,wt,kt){for(var Vt,Yt=bt.key;Je(Yt);)if(++qe===rt.length)return wt(kt),!1;return!tt(Vt=Yt)&&!ot(Vt)||(X._cmp(Yt,rt[qe][1])===0||X._cmp(Yt,rt[qe][0])===0||wt(function(){He===ce?bt.continue(rt[qe][0]):bt.continue(rt[qe][1])}),!1)}),ht},$r.prototype.startsWithAnyOf=function(){var A=V.apply(ie,arguments);return A.every(function(O){return typeof O=="string"})?A.length===0?zc(this):this.inAnyRange(A.map(function(O){return[O,O+Po]})):Si(this,"startsWithAnyOf() only works with strings")},$r);function $r(){}function is(A){return Re(function(O){return Rl(O),A(O.target.error),!1})}function Rl(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var Uc="storagemutated",Il="x-storagemutated-1",ja=Lo(null,Uc),Sm=(ii.prototype._lock=function(){return C(!Ae.global),++this._reculock,this._reculock!==1||Ae.global||(Ae.lockOwnerFor=this),this},ii.prototype._unlock=function(){if(C(!Ae.global),--this._reculock==0)for(Ae.global||(Ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{Do(A[1],A[0])}catch{}}return this},ii.prototype._locked=function(){return this._reculock&&Ae.lockOwnerFor!==this},ii.prototype.create=function(A){var O=this;if(!this.mode)return this;var X=this.db.idbdb,re=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!X)switch(re&&re.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(re);case"MissingAPIError":throw new Se.MissingAPI(re.message,re);default:throw new Se.OpenFailed(re)}if(!this.active)throw new Se.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||X).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(ce){Rl(ce),O._reject(A.error)}),A.onabort=Re(function(ce){Rl(ce),O.active&&O._reject(new Se.Abort(A.error)),O.active=!1,O.on("abort").fire(ce)}),A.oncomplete=Re(function(){O.active=!1,O._resolve(),"mutatedParts"in A&&ja.storagemutated.fire(A.mutatedParts)}),this},ii.prototype._promise=function(A,O,X){var re=this;if(A==="readwrite"&&this.mode!=="readwrite")return Kr(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return Kr(new Se.TransactionInactive);if(this._locked())return new F(function(we,Oe){re._blockedFuncs.push([function(){re._promise(A,O,X).then(we,Oe)},Ae])});if(X)return en(function(){var we=new F(function(Oe,Be){re._lock();var Ze=O(Oe,Be,re);Ze&&Ze.then&&Ze.then(Oe,Be)});return we.finally(function(){return re._unlock()}),we._lib=!0,we});var ce=new F(function(we,Oe){var Be=O(we,Oe,re);Be&&Be.then&&Be.then(we,Oe)});return ce._lib=!0,ce},ii.prototype._root=function(){return this.parent?this.parent._root():this},ii.prototype.waitFor=function(A){var O,X=this._root(),re=F.resolve(A);X._waitingFor?X._waitingFor=X._waitingFor.then(function(){return re}):(X._waitingFor=re,X._waitingQueue=[],O=X.idbtrans.objectStore(X.storeNames[0]),function we(){for(++X._spinCount;X._waitingQueue.length;)X._waitingQueue.shift()();X._waitingFor&&(O.get(-1/0).onsuccess=we)}());var ce=X._waitingFor;return new F(function(we,Oe){re.then(function(Be){return X._waitingQueue.push(Re(we.bind(null,Be)))},function(Be){return X._waitingQueue.push(Re(Oe.bind(null,Be)))}).finally(function(){X._waitingFor===ce&&(X._waitingFor=null)})})},ii.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))},ii.prototype.table=function(A){var O=this._memoizedTables||(this._memoizedTables={});if(h(O,A))return O[A];var X=this.schema[A];if(!X)throw new Se.NotFound("Table "+A+" not part of transaction");return X=new this.db.Table(A,X,this),X.core=this.db.core.table(A),O[A]=X},ii);function ii(){}function Es(A,O,X,re,ce,we,Oe){return{name:A,keyPath:O,unique:X,multi:re,auto:ce,compound:we,src:(X&&!Oe?"&":"")+(re?"*":"")+(ce?"++":"")+qf(O)}}function qf(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function Vc(A,O,X){return{name:A,primKey:O,indexes:X,mappedClass:null,idxByName:(re=function(ce){return[ce.name,ce]},X.reduce(function(ce,we,Oe){return Oe=re(we,Oe),Oe&&(ce[Oe[0]]=Oe[1]),ce},{}))};var re}var Hc=function(A){try{return A.only([[]]),Hc=function(){return[[]]},[[]]}catch{return Hc=function(){return Po},Po}};function qc(A){return A==null?function(){}:typeof A=="string"?(O=A).split(".").length===1?function(X){return X[O]}:function(X){return I(X,O)}:function(X){return I(X,A)};var O}function md(A){return[].slice.call(A)}var yb=0;function ma(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function jl(A,O,Ze){function re(Je){if(Je.type===3)return null;if(Je.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var qe=Je.lower,tt=Je.upper,ot=Je.lowerOpen,Je=Je.upperOpen;return qe===void 0?tt===void 0?null:O.upperBound(tt,!!Je):tt===void 0?O.lowerBound(qe,!!ot):O.bound(qe,tt,!!ot,!!Je)}function ce(st){var qe,tt=st.name;return{name:tt,schema:st,mutate:function(ot){var Je=ot.trans,ht=ot.type,bt=ot.keys,wt=ot.values,kt=ot.range;return new Promise(function(Vt,Yt){Vt=Re(Vt);var $t=Je.objectStore(tt),Gt=$t.keyPath==null,Jt=ht==="put"||ht==="add";if(!Jt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var zt,nn=(bt||wt||{length:1}).length;if(bt&&wt&&bt.length!==wt.length)throw new Error("Given keys array must have same length as given values array.");if(nn===0)return Vt({numFailures:0,failures:{},results:[],lastResult:void 0});function pn(Ma){++Ya,Rl(Ma)}var gn=[],In=[],Ya=0;if(ht==="deleteRange"){if(kt.type===4)return Vt({numFailures:Ya,failures:In,results:[],lastResult:void 0});kt.type===3?gn.push(zt=$t.clear()):gn.push(zt=$t.delete(re(kt)))}else{var Gt=Jt?Gt?[wt,bt]:[wt,null]:[bt,null],_n=Gt[0],sa=Gt[1];if(Jt)for(var ga=0;ga<nn;++ga)gn.push(zt=sa&&sa[ga]!==void 0?$t[ht](_n[ga],sa[ga]):$t[ht](_n[ga])),zt.onerror=pn;else for(ga=0;ga<nn;++ga)gn.push(zt=$t[ht](_n[ga])),zt.onerror=pn}function no(Ma){Ma=Ma.target.result,gn.forEach(function(Ts,Uo){return Ts.error!=null&&(In[Uo]=Ts.error)}),Vt({numFailures:Ya,failures:In,results:ht==="delete"?bt:gn.map(function(Ts){return Ts.result}),lastResult:Ma})}zt.onerror=function(Ma){pn(Ma),no(Ma)},zt.onsuccess=no})},getMany:function(ot){var Je=ot.trans,ht=ot.keys;return new Promise(function(bt,wt){bt=Re(bt);for(var kt,Vt=Je.objectStore(tt),Yt=ht.length,$t=new Array(Yt),Gt=0,Jt=0,zt=function(gn){gn=gn.target,$t[gn._pos]=gn.result,++Jt===Gt&&bt($t)},nn=is(wt),pn=0;pn<Yt;++pn)ht[pn]!=null&&((kt=Vt.get(ht[pn]))._pos=pn,kt.onsuccess=zt,kt.onerror=nn,++Gt);Gt===0&&bt($t)})},get:function(ot){var Je=ot.trans,ht=ot.key;return new Promise(function(bt,wt){bt=Re(bt);var kt=Je.objectStore(tt).get(ht);kt.onsuccess=function(Vt){return bt(Vt.target.result)},kt.onerror=is(wt)})},query:(qe=Xe,function(ot){return new Promise(function(Je,ht){Je=Re(Je);var bt,wt,kt,Gt=ot.trans,Vt=ot.values,Yt=ot.limit,zt=ot.query,$t=Yt===1/0?void 0:Yt,Jt=zt.index,zt=zt.range,Gt=Gt.objectStore(tt),Jt=Jt.isPrimaryKey?Gt:Gt.index(Jt.name),zt=re(zt);if(Yt===0)return Je({result:[]});qe?(($t=Vt?Jt.getAll(zt,$t):Jt.getAllKeys(zt,$t)).onsuccess=function(nn){return Je({result:nn.target.result})},$t.onerror=is(ht)):(bt=0,wt=!Vt&&"openKeyCursor"in Jt?Jt.openKeyCursor(zt):Jt.openCursor(zt),kt=[],wt.onsuccess=function(nn){var pn=wt.result;return pn?(kt.push(Vt?pn.value:pn.primaryKey),++bt===Yt?Je({result:kt}):void pn.continue()):Je({result:kt})},wt.onerror=is(ht))})}),openCursor:function(ot){var Je=ot.trans,ht=ot.values,bt=ot.query,wt=ot.reverse,kt=ot.unique;return new Promise(function(Vt,Yt){Vt=Re(Vt);var Jt=bt.index,$t=bt.range,Gt=Je.objectStore(tt),Gt=Jt.isPrimaryKey?Gt:Gt.index(Jt.name),Jt=wt?kt?"prevunique":"prev":kt?"nextunique":"next",zt=!ht&&"openKeyCursor"in Gt?Gt.openKeyCursor(re($t),Jt):Gt.openCursor(re($t),Jt);zt.onerror=is(Yt),zt.onsuccess=Re(function(nn){var pn,gn,In,Ya,_n=zt.result;_n?(_n.___id=++yb,_n.done=!1,pn=_n.continue.bind(_n),gn=(gn=_n.continuePrimaryKey)&&gn.bind(_n),In=_n.advance.bind(_n),Ya=function(){throw new Error("Cursor not stopped")},_n.trans=Je,_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=function(){throw new Error("Cursor not started")},_n.fail=Re(Yt),_n.next=function(){var sa=this,ga=1;return this.start(function(){return ga--?sa.continue():sa.stop()}).then(function(){return sa})},_n.start=function(sa){function ga(){if(zt.result)try{sa()}catch(Ma){_n.fail(Ma)}else _n.done=!0,_n.start=function(){throw new Error("Cursor behind last entry")},_n.stop()}var no=new Promise(function(Ma,Ts){Ma=Re(Ma),zt.onerror=is(Ts),_n.fail=Ts,_n.stop=function(Uo){_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=Ya,Ma(Uo)}});return zt.onsuccess=Re(function(Ma){zt.onsuccess=ga,ga()}),_n.continue=pn,_n.continuePrimaryKey=gn,_n.advance=In,ga(),no},Vt(_n)):Vt(null)},Yt)})},count:function(ot){var Je=ot.query,ht=ot.trans,bt=Je.index,wt=Je.range;return new Promise(function(kt,Vt){var Yt=ht.objectStore(tt),$t=bt.isPrimaryKey?Yt:Yt.index(bt.name),Yt=re(wt),$t=Yt?$t.count(Yt):$t.count();$t.onsuccess=Re(function(Gt){return kt(Gt.target.result)}),$t.onerror=is(Vt)})}}}var we,Oe,Be,rt=(Oe=Ze,Be=md((we=A).objectStoreNames),{schema:{name:we.name,tables:Be.map(function(st){return Oe.objectStore(st)}).map(function(st){var qe=st.keyPath,Je=st.autoIncrement,tt=o(qe),ot={},Je={name:st.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:qe==null,compound:tt,keyPath:qe,autoIncrement:Je,unique:!0,extractKey:qc(qe)},indexes:md(st.indexNames).map(function(ht){return st.index(ht)}).map(function(kt){var bt=kt.name,wt=kt.unique,Vt=kt.multiEntry,kt=kt.keyPath,Vt={name:bt,compound:o(kt),keyPath:kt,unique:wt,multiEntry:Vt,extractKey:qc(kt)};return ot[ma(kt)]=Vt}),getIndexByKeyPath:function(ht){return ot[ma(ht)]}};return ot[":id"]=Je.primaryKey,qe!=null&&(ot[ma(qe)]=Je.primaryKey),Je})},hasGetAll:0<Be.length&&"getAll"in Oe.objectStore(Be[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ze=rt.schema,Xe=rt.hasGetAll,rt=Ze.tables.map(ce),He={};return rt.forEach(function(st){return He[st.name]=st}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(st){if(!He[st])throw new Error("Table '".concat(st,"' not found"));return He[st]},MIN_KEY:-1/0,MAX_KEY:Hc(O),schema:Ze}}function Gf(A,O,X,re){var ce=X.IDBKeyRange;return X.indexedDB,{dbcore:(re=jl(O,ce,re),A.dbcore.reduce(function(we,Oe){return Oe=Oe.create,r(r({},we),Oe(we))},re))}}function Bo(A,re){var X=re.db,re=Gf(A._middlewares,X,A._deps,re);A.core=re.dbcore,A.tables.forEach(function(ce){var we=ce.name;A.core.schema.tables.some(function(Oe){return Oe.name===we})&&(ce.core=A.core.table(we),A[we]instanceof A.Table&&(A[we].core=ce.core))})}function Wf(A,O,X,re){X.forEach(function(ce){var we=re[ce];O.forEach(function(Oe){var Be=function Ze(Xe,rt){return x(Xe,rt)||(Xe=u(Xe))&&Ze(Xe,rt)}(Oe,ce);(!Be||"value"in Be&&Be.value===void 0)&&(Oe===A.Transaction.prototype||Oe instanceof A.Transaction?b(Oe,ce,{get:function(){return this.table(ce)},set:function(Ze){g(this,ce,{value:Ze,writable:!0,configurable:!0,enumerable:!0})}}):Oe[ce]=new A.Table(ce,we))})})}function gd(A,O){O.forEach(function(X){for(var re in X)X[re]instanceof A.Table&&delete X[re]})}function Em(A,O){return A._cfg.version-O._cfg.version}function yd(A,O,X,re){var ce=A._dbSchema;X.objectStoreNames.contains("$meta")&&!ce.$meta&&(ce.$meta=Vc("$meta",vb("")[0],[]),A._storeNames.push("$meta"));var we=A._createTransaction("readwrite",A._storeNames,ce);we.create(X),we._completion.catch(re);var Oe=we._reject.bind(we),Be=Ae.transless||Ae;en(function(){return Ae.trans=we,Ae.transless=Be,O!==0?(Bo(A,X),Xe=O,((Ze=we).storeNames.includes("$meta")?Ze.table("$meta").get("version").then(function(rt){return rt??Xe}):F.resolve(Xe)).then(function(rt){return st=rt,qe=we,tt=X,ot=[],rt=(He=A)._versions,Je=He._dbSchema=Gc(0,He.idbdb,tt),(rt=rt.filter(function(ht){return ht._cfg.version>=st})).length!==0?(rt.forEach(function(ht){ot.push(function(){var bt=Je,wt=ht._cfg.dbschema;Xf(He,bt,tt),Xf(He,wt,tt),Je=He._dbSchema=wt;var kt=Zf(bt,wt);kt.add.forEach(function(Jt){Cm(tt,Jt[0],Jt[1].primKey,Jt[1].indexes)}),kt.change.forEach(function(Jt){if(Jt.recreate)throw new Se.Upgrade("Not yet support for changing primary key");var zt=tt.objectStore(Jt.name);Jt.add.forEach(function(nn){return Yf(zt,nn)}),Jt.change.forEach(function(nn){zt.deleteIndex(nn.name),Yf(zt,nn)}),Jt.del.forEach(function(nn){return zt.deleteIndex(nn)})});var Vt=ht._cfg.contentUpgrade;if(Vt&&ht._cfg.version>st){Bo(He,tt),qe._memoizedTables={};var Yt=N(wt);kt.del.forEach(function(Jt){Yt[Jt]=bt[Jt]}),gd(He,[He.Transaction.prototype]),Wf(He,[He.Transaction.prototype],s(Yt),Yt),qe.schema=Yt;var $t,Gt=J(Vt);return Gt&&Nn(),kt=F.follow(function(){var Jt;($t=Vt(qe))&&Gt&&(Jt=Xn.bind(null,null),$t.then(Jt,Jt))}),$t&&typeof $t.then=="function"?F.resolve($t):kt.then(function(){return $t})}}),ot.push(function(bt){var wt,kt,Vt=ht._cfg.dbschema;wt=Vt,kt=bt,[].slice.call(kt.db.objectStoreNames).forEach(function(Yt){return wt[Yt]==null&&kt.db.deleteObjectStore(Yt)}),gd(He,[He.Transaction.prototype]),Wf(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),qe.schema=He._dbSchema}),ot.push(function(bt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===ht._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(wt){return wt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?F.resolve(ot.shift()(qe.idbtrans)).then(ht):F.resolve()}().then(function(){bb(Je,tt)})):F.resolve();var He,st,qe,tt,ot,Je}).catch(Oe)):(s(ce).forEach(function(rt){Cm(X,rt,ce[rt].primKey,ce[rt].indexes)}),Bo(A,X),void F.follow(function(){return A.on.populate.fire(we)}).catch(Oe));var Ze,Xe})}function Kf(A,O){bb(A._dbSchema,O),O.db.version%10!=0||O.objectStoreNames.contains("$meta")||O.db.createObjectStore("$meta").add(Math.ceil(O.db.version/10-1),"version");var X=Gc(0,A.idbdb,O);Xf(A,A._dbSchema,O);for(var re=0,ce=Zf(X,A._dbSchema).change;re<ce.length;re++){var we=function(Oe){if(Oe.change.length||Oe.recreate)return console.warn("Unable to patch indexes of table ".concat(Oe.name," because it has changes on the type of index or primary key.")),{value:void 0};var Be=O.objectStore(Oe.name);Oe.add.forEach(function(Ze){Fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Oe.name,".").concat(Ze.src)),Yf(Be,Ze)})}(ce[re]);if(typeof we=="object")return we.value}}function Zf(A,O){var X,re={del:[],add:[],change:[]};for(X in A)O[X]||re.del.push(X);for(X in O){var ce=A[X],we=O[X];if(ce){var Oe={name:X,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ce.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ce.primKey.auto!==we.primKey.auto)Oe.recreate=!0,re.change.push(Oe);else{var Be=ce.idxByName,Ze=we.idxByName,Xe=void 0;for(Xe in Be)Ze[Xe]||Oe.del.push(Xe);for(Xe in Ze){var rt=Be[Xe],He=Ze[Xe];rt?rt.src!==He.src&&Oe.change.push(He):Oe.add.push(He)}(0<Oe.del.length||0<Oe.add.length||0<Oe.change.length)&&re.change.push(Oe)}}else re.add.push([X,we])}return re}function Cm(A,O,X,re){var ce=A.db.createObjectStore(O,X.keyPath?{keyPath:X.keyPath,autoIncrement:X.auto}:{autoIncrement:X.auto});return re.forEach(function(we){return Yf(ce,we)}),ce}function bb(A,O){s(A).forEach(function(X){O.db.objectStoreNames.contains(X)||(Fe&&console.debug("Dexie: Creating missing table",X),Cm(O,X,A[X].primKey,A[X].indexes))})}function Yf(A,O){A.createIndex(O.name,O.keyPath,{unique:O.unique,multiEntry:O.multi})}function Gc(A,O,X){var re={};return _(O.objectStoreNames,0).forEach(function(ce){for(var we=X.objectStore(ce),Oe=Es(qf(Xe=we.keyPath),Xe||"",!0,!1,!!we.autoIncrement,Xe&&typeof Xe!="string",!0),Be=[],Ze=0;Ze<we.indexNames.length;++Ze){var rt=we.index(we.indexNames[Ze]),Xe=rt.keyPath,rt=Es(rt.name,Xe,!!rt.unique,!!rt.multiEntry,!1,Xe&&typeof Xe!="string",!1);Be.push(rt)}re[ce]=Vc(ce,Oe,Be)}),re}function Xf(A,O,X){for(var re=X.db.objectStoreNames,ce=0;ce<re.length;++ce){var we=re[ce],Oe=X.objectStore(we);A._hasGetAll="getAll"in Oe;for(var Be=0;Be<Oe.indexNames.length;++Be){var Ze=Oe.indexNames[Be],Xe=Oe.index(Ze).keyPath,rt=typeof Xe=="string"?Xe:"["+_(Xe).join("+")+"]";!O[we]||(Xe=O[we].idxByName[rt])&&(Xe.name=Ze,delete O[we].idxByName[rt],O[we].idxByName[Ze]=Xe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function vb(A){return A.split(",").map(function(O,X){var re=(O=O.trim()).replace(/([&*]|\+\+)/g,""),ce=/^\[/.test(re)?re.match(/^\[(.*)\]$/)[1].split("+"):re;return Es(re,ce||null,/\&/.test(O),/\*/.test(O),/\+\+/.test(O),o(ce),X===0)})}var Q_=(Jf.prototype._parseStoresSpec=function(A,O){s(A).forEach(function(X){if(A[X]!==null){var re=vb(A[X]),ce=re.shift();if(ce.unique=!0,ce.multi)throw new Se.Schema("Primary key cannot be multi-valued");re.forEach(function(we){if(we.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),O[X]=Vc(X,ce,re)}})},Jf.prototype.stores=function(X){var O=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,X):X;var X=O._versions,re={},ce={};return X.forEach(function(we){l(re,we._cfg.storesSource),ce=we._cfg.dbschema={},we._parseStoresSpec(re,ce)}),O._dbSchema=ce,gd(O,[O._allTables,O,O.Transaction.prototype]),Wf(O,[O._allTables,O,O.Transaction.prototype,this._cfg.tables],s(ce),ce),O._storeNames=s(ce),this},Jf.prototype.upgrade=function(A){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Le,A),this},Jf);function Jf(){}function Tm(A,O){var X=A._dbNamesDB;return X||(X=A._dbNamesDB=new Cs(Cl,{addons:[],indexedDB:A,IDBKeyRange:O})).version(1).stores({dbnames:"name"}),X.table("dbnames")}function Qf(A){return A&&typeof A.databases=="function"}function km(A){return en(function(){return Ae.letThrough=!0,A()})}function Am(A){return!("from"in A)}var Da=function(A,O){if(!this){var X=new Da;return A&&"d"in A&&l(X,A),X}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?O:A}:{d:0})};function bd(A,O,X){var re=Jn(O,X);if(!isNaN(re)){if(0<re)throw RangeError();if(Am(A))return l(A,{from:O,to:X,d:1});var ce=A.l,re=A.r;if(Jn(X,A.from)<0)return ce?bd(ce,O,X):A.l={from:O,to:X,d:1,l:null,r:null},xb(A);if(0<Jn(O,A.to))return re?bd(re,O,X):A.r={from:O,to:X,d:1,l:null,r:null},xb(A);Jn(O,A.from)<0&&(A.from=O,A.l=null,A.d=re?re.d+1:1),0<Jn(X,A.to)&&(A.to=X,A.r=null,A.d=A.l?A.l.d+1:1),X=!A.r,ce&&!A.l&&Dl(A,ce),re&&X&&Dl(A,re)}}function Dl(A,O){Am(O)||function X(re,Ze){var we=Ze.from,Oe=Ze.to,Be=Ze.l,Ze=Ze.r;bd(re,we,Oe),Be&&X(re,Be),Ze&&X(re,Ze)}(A,O)}function wb(A,O){var X=eh(O),re=X.next();if(re.done)return!1;for(var ce=re.value,we=eh(A),Oe=we.next(ce.from),Be=Oe.value;!re.done&&!Oe.done;){if(Jn(Be.from,ce.to)<=0&&0<=Jn(Be.to,ce.from))return!0;Jn(ce.from,Be.from)<0?ce=(re=X.next(Be.from)).value:Be=(Oe=we.next(ce.from)).value}return!1}function eh(A){var O=Am(A)?null:{s:0,n:A};return{next:function(X){for(var re=0<arguments.length;O;)switch(O.s){case 0:if(O.s=1,re)for(;O.n.l&&Jn(X,O.n.from)<0;)O={up:O,n:O.n.l,s:1};else for(;O.n.l;)O={up:O,n:O.n.l,s:1};case 1:if(O.s=2,!re||Jn(X,O.n.to)<=0)return{value:O.n,done:!1};case 2:if(O.n.r){O.s=3,O={up:O,n:O.n.r,s:0};continue}case 3:O=O.up}return{done:!0}}}}function xb(A){var O,X,re=(((O=A.r)===null||O===void 0?void 0:O.d)||0)-(((X=A.l)===null||X===void 0?void 0:X.d)||0),ce=1<re?"r":re<-1?"l":"";ce&&(O=ce=="r"?"l":"r",X=r({},A),re=A[ce],A.from=re.from,A.to=re.to,A[ce]=re[ce],X[ce]=re[O],(A[O]=X).d=Nm(X)),A.d=Nm(A)}function Nm(X){var O=X.r,X=X.l;return(O?X?Math.max(O.d,X.d):O.d:X?X.d:0)+1}function th(A,O){return s(O).forEach(function(X){A[X]?Dl(A[X],O[X]):A[X]=function re(ce){var we,Oe,Be={};for(we in ce)h(ce,we)&&(Oe=ce[we],Be[we]=!Oe||typeof Oe!="object"||H.has(Oe.constructor)?Oe:re(Oe));return Be}(O[X])}),A}function Rm(A,O){return A.all||O.all||Object.keys(A).some(function(X){return O[X]&&wb(O[X],A[X])})}m(Da.prototype,((Ei={add:function(A){return Dl(this,A),this},addKey:function(A){return bd(this,A,A),this},addKeys:function(A){var O=this;return A.forEach(function(X){return bd(O,X,X)}),this},hasKey:function(A){var O=eh(this).next(A).value;return O&&Jn(O.from,A)<=0&&0<=Jn(O.to,A)}})[ae]=function(){return eh(this)},Ei));var Ml={},Im={},jm=!1;function nh(A){th(Im,A),jm||(jm=!0,setTimeout(function(){jm=!1,Dm(Im,!(Im={}))},0))}function Dm(A,O){O===void 0&&(O=!1);var X=new Set;if(A.all)for(var re=0,ce=Object.values(Ml);re<ce.length;re++)_b(Oe=ce[re],A,X,O);else for(var we in A){var Oe,Be=/^idb\:\/\/(.*)\/(.*)\//.exec(we);Be&&(we=Be[1],Be=Be[2],(Oe=Ml["idb://".concat(we,"/").concat(Be)])&&_b(Oe,A,X,O))}X.forEach(function(Ze){return Ze()})}function _b(A,O,X,re){for(var ce=[],we=0,Oe=Object.entries(A.queries.query);we<Oe.length;we++){for(var Be=Oe[we],Ze=Be[0],Xe=[],rt=0,He=Be[1];rt<He.length;rt++){var st=He[rt];Rm(O,st.obsSet)?st.subscribers.forEach(function(Je){return X.add(Je)}):re&&Xe.push(st)}re&&ce.push([Ze,Xe])}if(re)for(var qe=0,tt=ce;qe<tt.length;qe++){var ot=tt[qe],Ze=ot[0],Xe=ot[1];A.queries.query[Ze]=Xe}}function eS(A){var O=A._state,X=A._deps.indexedDB;if(O.isBeingOpened||A.idbdb)return O.dbReadyPromise.then(function(){return O.dbOpenError?Kr(O.dbOpenError):A});O.isBeingOpened=!0,O.dbOpenError=null,O.openComplete=!1;var re=O.openCanceller,ce=Math.round(10*A.verno),we=!1;function Oe(){if(O.openCanceller!==re)throw new Se.DatabaseClosed("db.open() was cancelled")}function Be(){return new F(function(st,qe){if(Oe(),!X)throw new Se.MissingAPI;var tt=A.name,ot=O.autoSchema||!ce?X.open(tt):X.open(tt,ce);if(!ot)throw new Se.MissingAPI;ot.onerror=is(qe),ot.onblocked=Re(A._fireOnBlocked),ot.onupgradeneeded=Re(function(Je){var ht;rt=ot.transaction,O.autoSchema&&!A._options.allowEmptyDB?(ot.onerror=Rl,rt.abort(),ot.result.close(),(ht=X.deleteDatabase(tt)).onsuccess=ht.onerror=Re(function(){qe(new Se.NoSuchDatabase("Database ".concat(tt," doesnt exist")))})):(rt.onerror=is(qe),Je=Je.oldVersion>Math.pow(2,62)?0:Je.oldVersion,He=Je<1,A.idbdb=ot.result,we&&Kf(A,rt),yd(A,Je/10,rt,qe))},qe),ot.onsuccess=Re(function(){rt=null;var Je,ht,bt,wt,kt,Vt=A.idbdb=ot.result,Yt=_(Vt.objectStoreNames);if(0<Yt.length)try{var $t=Vt.transaction((wt=Yt).length===1?wt[0]:wt,"readonly");if(O.autoSchema)ht=Vt,bt=$t,(Je=A).verno=ht.version/10,bt=Je._dbSchema=Gc(0,ht,bt),Je._storeNames=_(ht.objectStoreNames,0),Wf(Je,[Je._allTables],s(bt),bt);else if(Xf(A,A._dbSchema,$t),((kt=Zf(Gc(0,(kt=A).idbdb,$t),kt._dbSchema)).add.length||kt.change.some(function(Gt){return Gt.add.length||Gt.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Vt.close(),ce=Vt.version+1,we=!0,st(Be());Bo(A,$t)}catch{}eo.push(A),Vt.onversionchange=Re(function(Gt){O.vcFired=!0,A.on("versionchange").fire(Gt)}),Vt.onclose=Re(function(Gt){A.on("close").fire(Gt)}),He&&(kt=A._deps,$t=tt,Vt=kt.indexedDB,kt=kt.IDBKeyRange,Qf(Vt)||$t===Cl||Tm(Vt,kt).put({name:$t}).catch(Le)),st()},qe)}).catch(function(st){switch(st==null?void 0:st.name){case"UnknownError":if(0<O.PR1398_maxLoop)return O.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Be();break;case"VersionError":if(0<ce)return ce=0,Be()}return F.reject(st)})}var Ze,Xe=O.dbReadyResolve,rt=null,He=!1;return F.race([re,(typeof navigator>"u"?F.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(st){function qe(){return indexedDB.databases().finally(st)}Ze=setInterval(qe,100),qe()}).finally(function(){return clearInterval(Ze)}):Promise.resolve()).then(Be)]).then(function(){return Oe(),O.onReadyBeingFired=[],F.resolve(km(function(){return A.on.ready.fire(A.vip)})).then(function st(){if(0<O.onReadyBeingFired.length){var qe=O.onReadyBeingFired.reduce(xe,Le);return O.onReadyBeingFired=[],F.resolve(km(function(){return qe(A.vip)})).then(st)}})}).finally(function(){O.openCanceller===re&&(O.onReadyBeingFired=null,O.isBeingOpened=!1)}).catch(function(st){O.dbOpenError=st;try{rt&&rt.abort()}catch{}return re===O.openCanceller&&A._close(),Kr(st)}).finally(function(){O.openComplete=!0,Xe()}).then(function(){var st;return He&&(st={},A.tables.forEach(function(qe){qe.schema.indexes.forEach(function(tt){tt.name&&(st["idb://".concat(A.name,"/").concat(qe.name,"/").concat(tt.name)]=new Da(-1/0,[[[]]]))}),st["idb://".concat(A.name,"/").concat(qe.name,"/")]=st["idb://".concat(A.name,"/").concat(qe.name,"/:dels")]=new Da(-1/0,[[[]]])}),ja(Uc).fire(st),Dm(st,!0)),A})}function vd(A){function O(we){return A.next(we)}var X=ce(O),re=ce(function(we){return A.throw(we)});function ce(we){return function(Ze){var Be=we(Ze),Ze=Be.value;return Be.done?Ze:Ze&&typeof Ze.then=="function"?Ze.then(X,re):o(Ze)?Promise.all(Ze).then(X,re):X(Ze)}}return ce(O)()}function $o(A,O,X){for(var re=o(A)?A.slice():[A],ce=0;ce<X;++ce)re.push(O);return re}var tS={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(O){var X=A.table(O),re=X.schema,ce={},we=[];function Oe(He,st,qe){var tt=ma(He),ot=ce[tt]=ce[tt]||[],Je=He==null?0:typeof He=="string"?1:He.length,ht=0<st,ht=r(r({},qe),{name:ht?"".concat(tt,"(virtual-from:").concat(qe.name,")"):qe.name,lowLevelIndex:qe,isVirtual:ht,keyTail:st,keyLength:Je,extractKey:qc(He),unique:!ht&&qe.unique});return ot.push(ht),ht.isPrimaryKey||we.push(ht),1<Je&&Oe(Je===2?He[0]:He.slice(0,Je-1),st+1,qe),ot.sort(function(bt,wt){return bt.keyTail-wt.keyTail}),ht}O=Oe(re.primaryKey.keyPath,0,re.primaryKey),ce[":id"]=[O];for(var Be=0,Ze=re.indexes;Be<Ze.length;Be++){var Xe=Ze[Be];Oe(Xe.keyPath,0,Xe)}function rt(He){var st,qe=He.query.index;return qe.isVirtual?r(r({},He),{query:{index:qe.lowLevelIndex,range:(st=He.query.range,qe=qe.keyTail,{type:st.type===1?2:st.type,lower:$o(st.lower,st.lowerOpen?A.MAX_KEY:A.MIN_KEY,qe),lowerOpen:!0,upper:$o(st.upper,st.upperOpen?A.MIN_KEY:A.MAX_KEY,qe),upperOpen:!0})}}):He}return r(r({},X),{schema:r(r({},re),{primaryKey:O,indexes:we,getIndexByKeyPath:function(He){return(He=ce[ma(He)])&&He[0]}}),count:function(He){return X.count(rt(He))},query:function(He){return X.query(rt(He))},openCursor:function(He){var st=He.query.index,qe=st.keyTail,tt=st.isVirtual,ot=st.keyLength;return tt?X.openCursor(rt(He)).then(function(ht){return ht&&Je(ht)}):X.openCursor(He);function Je(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue($o(bt,He.reverse?A.MAX_KEY:A.MIN_KEY,qe)):He.unique?ht.continue(ht.key.slice(0,ot).concat(He.reverse?A.MIN_KEY:A.MAX_KEY,qe)):ht.continue()}},continuePrimaryKey:{value:function(bt,wt){ht.continuePrimaryKey($o(bt,A.MAX_KEY,qe),wt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function rh(A,O,X,re){return X=X||{},re=re||"",s(A).forEach(function(ce){var we,Oe,Be;h(O,ce)?(we=A[ce],Oe=O[ce],typeof we=="object"&&typeof Oe=="object"&&we&&Oe?(Be=ue(we))!==ue(Oe)?X[re+ce]=O[ce]:Be==="Object"?rh(we,Oe,X,re+ce+"."):we!==Oe&&(X[re+ce]=O[ce]):we!==Oe&&(X[re+ce]=O[ce])):X[re+ce]=void 0}),s(O).forEach(function(ce){h(A,ce)||(X[re+ce]=O[ce])}),X}function ah(A,O){return O.type==="delete"?O.keys:O.keys||O.values.map(A.extractKey)}var Sb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(O){var X=A.table(O),re=X.schema.primaryKey;return r(r({},X),{mutate:function(ce){var we=Ae.trans,Oe=we.table(O).hook,Be=Oe.deleting,Ze=Oe.creating,Xe=Oe.updating;switch(ce.type){case"add":if(Ze.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"put":if(Ze.fire===Le&&Xe.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"delete":if(Be.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"deleteRange":if(Be.fire===Le)break;return we._promise("readwrite",function(){return function He(st,qe,tt){return X.query({trans:st,values:!1,query:{index:re,range:qe},limit:tt}).then(function(ot){var Je=ot.result;return rt({type:"delete",keys:Je,trans:st}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Je.length<tt?{failures:[],numFailures:0,lastResult:void 0}:He(st,r(r({},qe),{lower:Je[Je.length-1],lowerOpen:!0}),tt)})})}(ce.trans,ce.range,1e4)},!0)}return X.mutate(ce);function rt(He){var st,qe,tt,ot=Ae.trans,Je=He.keys||ah(re,He);if(!Je)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Je}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),st=X,tt=Je,((qe=He).type==="add"?Promise.resolve([]):st.getMany({trans:qe.trans,keys:tt,cache:"immutable"})).then(function(ht){var bt=Je.map(function(wt,kt){var Vt,Yt,$t,Gt=ht[kt],Jt={onerror:null,onsuccess:null};return He.type==="delete"?Be.fire.call(Jt,wt,Gt,ot):He.type==="add"||Gt===void 0?(Vt=Ze.fire.call(Jt,wt,He.values[kt],ot),wt==null&&Vt!=null&&(He.keys[kt]=wt=Vt,re.outbound||j(He.values[kt],re.keyPath,wt))):(Vt=rh(Gt,He.values[kt]),(Yt=Xe.fire.call(Jt,Vt,wt,Gt,ot))&&($t=He.values[kt],Object.keys(Yt).forEach(function(zt){h($t,zt)?$t[zt]=Yt[zt]:j($t,zt,Yt[zt])}))),Jt});return X.mutate(He).then(function(wt){for(var kt=wt.failures,Vt=wt.results,Yt=wt.numFailures,wt=wt.lastResult,$t=0;$t<Je.length;++$t){var Gt=(Vt||Je)[$t],Jt=bt[$t];Gt==null?Jt.onerror&&Jt.onerror(kt[$t]):Jt.onsuccess&&Jt.onsuccess(He.type==="put"&&ht[$t]?He.values[$t]:Gt)}return{failures:kt,results:Vt,numFailures:Yt,lastResult:wt}}).catch(function(wt){return bt.forEach(function(kt){return kt.onerror&&kt.onerror(wt)}),Promise.reject(wt)})})}}})}})}};function Mm(A,O,X){try{if(!O||O.keys.length<A.length)return null;for(var re=[],ce=0,we=0;ce<O.keys.length&&we<A.length;++ce)Jn(O.keys[ce],A[we])===0&&(re.push(X?K(O.values[ce]):O.values[ce]),++we);return re.length===A.length?re:null}catch{return null}}var Eb={stack:"dbcore",level:-1,create:function(A){return{table:function(O){var X=A.table(O);return r(r({},X),{getMany:function(re){if(!re.cache)return X.getMany(re);var ce=Mm(re.keys,re.trans._cache,re.cache==="clone");return ce?F.resolve(ce):X.getMany(re).then(function(we){return re.trans._cache={keys:re.keys,values:re.cache==="clone"?K(we):we},we})},mutate:function(re){return re.type!=="add"&&(re.trans._cache=null),X.mutate(re)}})}}}};function Ol(A,O){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!O.schema.primaryKey.outbound}function Cb(A,O){switch(A){case"query":return O.values&&!O.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var nS={stack:"dbcore",level:0,name:"Observability",create:function(A){var O=A.schema.name,X=new Da(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(re,ce,we){if(Ae.subscr&&ce!=="readonly")throw new Se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ae.querier));return A.transaction(re,ce,we)},table:function(re){var ce=A.table(re),we=ce.schema,Oe=we.primaryKey,He=we.indexes,Be=Oe.extractKey,Ze=Oe.outbound,Xe=Oe.autoIncrement&&He.filter(function(qe){return qe.compound&&qe.keyPath.includes(Oe.keyPath)}),rt=r(r({},ce),{mutate:function(qe){function tt(zt){return zt="idb://".concat(O,"/").concat(re,"/").concat(zt),wt[zt]||(wt[zt]=new Da)}var ot,Je,ht,bt=qe.trans,wt=qe.mutatedParts||(qe.mutatedParts={}),kt=tt(""),Vt=tt(":dels"),Yt=qe.type,Jt=qe.type==="deleteRange"?[qe.range]:qe.type==="delete"?[qe.keys]:qe.values.length<50?[ah(Oe,qe).filter(function(zt){return zt}),qe.values]:[],$t=Jt[0],Gt=Jt[1],Jt=qe.trans._cache;return o($t)?(kt.addKeys($t),(Jt=Yt==="delete"||$t.length===Gt.length?Mm($t,Jt):null)||Vt.addKeys($t),(Jt||Gt)&&(ot=tt,Je=Jt,ht=Gt,we.indexes.forEach(function(zt){var nn=ot(zt.name||"");function pn(In){return In!=null?zt.extractKey(In):null}function gn(In){return zt.multiEntry&&o(In)?In.forEach(function(Ya){return nn.addKey(Ya)}):nn.addKey(In)}(Je||ht).forEach(function(In,sa){var _n=Je&&pn(Je[sa]),sa=ht&&pn(ht[sa]);Jn(_n,sa)!==0&&(_n!=null&&gn(_n),sa!=null&&gn(sa))})}))):$t?(Gt={from:(Gt=$t.lower)!==null&&Gt!==void 0?Gt:A.MIN_KEY,to:(Gt=$t.upper)!==null&&Gt!==void 0?Gt:A.MAX_KEY},Vt.add(Gt),kt.add(Gt)):(kt.add(X),Vt.add(X),we.indexes.forEach(function(zt){return tt(zt.name).add(X)})),ce.mutate(qe).then(function(zt){return!$t||qe.type!=="add"&&qe.type!=="put"||(kt.addKeys(zt.results),Xe&&Xe.forEach(function(nn){for(var pn=qe.values.map(function(_n){return nn.extractKey(_n)}),gn=nn.keyPath.findIndex(function(_n){return _n===Oe.keyPath}),In=0,Ya=zt.results.length;In<Ya;++In)pn[In][gn]=zt.results[In];tt(nn.name).addKeys(pn)})),bt.mutatedParts=th(bt.mutatedParts||{},wt),zt})}}),He=function(tt){var ot=tt.query,tt=ot.index,ot=ot.range;return[tt,new Da((tt=ot.lower)!==null&&tt!==void 0?tt:A.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:A.MAX_KEY)]},st={get:function(qe){return[Oe,new Da(qe.key)]},getMany:function(qe){return[Oe,new Da().addKeys(qe.keys)]},count:He,query:He,openCursor:He};return s(st).forEach(function(qe){rt[qe]=function(tt){var ot=Ae.subscr,Je=!!ot,ht=Ol(Ae,ce)&&Cb(qe,tt)?tt.obsSet={}:ot;if(Je){var bt=function(Gt){return Gt="idb://".concat(O,"/").concat(re,"/").concat(Gt),ht[Gt]||(ht[Gt]=new Da)},wt=bt(""),kt=bt(":dels"),ot=st[qe](tt),Je=ot[0],ot=ot[1];if((qe==="query"&&Je.isPrimaryKey&&!tt.values?kt:bt(Je.name||"")).add(ot),!Je.isPrimaryKey){if(qe!=="count"){var Vt=qe==="query"&&Ze&&tt.values&&ce.query(r(r({},tt),{values:!1}));return ce[qe].apply(this,arguments).then(function(Gt){if(qe==="query"){if(Ze&&tt.values)return Vt.then(function(pn){return pn=pn.result,wt.addKeys(pn),Gt});var Jt=tt.values?Gt.result.map(Be):Gt.result;(tt.values?wt:kt).addKeys(Jt)}else if(qe==="openCursor"){var zt=Gt,nn=tt.values;return zt&&Object.create(zt,{key:{get:function(){return kt.addKey(zt.primaryKey),zt.key}},primaryKey:{get:function(){var pn=zt.primaryKey;return kt.addKey(pn),pn}},value:{get:function(){return nn&&wt.addKey(zt.primaryKey),zt.value}}})}return Gt})}kt.add(X)}}return ce[qe].apply(this,arguments)}}),rt}})}};function Tb(A,O,X){if(X.numFailures===0)return O;if(O.type==="deleteRange")return null;var re=O.keys?O.keys.length:"values"in O&&O.values?O.values.length:1;return X.numFailures===re?null:(O=r({},O),o(O.keys)&&(O.keys=O.keys.filter(function(ce,we){return!(we in X.failures)})),"values"in O&&o(O.values)&&(O.values=O.values.filter(function(ce,we){return!(we in X.failures)})),O)}function ih(A,O){return X=A,((re=O).lower===void 0||(re.lowerOpen?0<Jn(X,re.lower):0<=Jn(X,re.lower)))&&(A=A,(O=O).upper===void 0||(O.upperOpen?Jn(A,O.upper)<0:Jn(A,O.upper)<=0));var X,re}function Om(A,O,st,re,ce,we){if(!st||st.length===0)return A;var Oe=O.query.index,Be=Oe.multiEntry,Ze=O.query.range,Xe=re.schema.primaryKey.extractKey,rt=Oe.extractKey,He=(Oe.lowLevelIndex||Oe).extractKey,st=st.reduce(function(qe,tt){var ot=qe,Je=[];if(tt.type==="add"||tt.type==="put")for(var ht=new Da,bt=tt.values.length-1;0<=bt;--bt){var wt,kt=tt.values[bt],Vt=Xe(kt);ht.hasKey(Vt)||(wt=rt(kt),(Be&&o(wt)?wt.some(function(zt){return ih(zt,Ze)}):ih(wt,Ze))&&(ht.addKey(Vt),Je.push(kt)))}switch(tt.type){case"add":var Yt=new Da().addKeys(O.values?qe.map(function(nn){return Xe(nn)}):qe),ot=qe.concat(O.values?Je.filter(function(nn){return nn=Xe(nn),!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}):Je.map(function(nn){return Xe(nn)}).filter(function(nn){return!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}));break;case"put":var $t=new Da().addKeys(tt.values.map(function(nn){return Xe(nn)}));ot=qe.filter(function(nn){return!$t.hasKey(O.values?Xe(nn):nn)}).concat(O.values?Je:Je.map(function(nn){return Xe(nn)}));break;case"delete":var Gt=new Da().addKeys(tt.keys);ot=qe.filter(function(nn){return!Gt.hasKey(O.values?Xe(nn):nn)});break;case"deleteRange":var Jt=tt.range;ot=qe.filter(function(nn){return!ih(Xe(nn),Jt)})}return ot},A);return st===A?A:(st.sort(function(qe,tt){return Jn(He(qe),He(tt))||Jn(Xe(qe),Xe(tt))}),O.limit&&O.limit<1/0&&(st.length>O.limit?st.length=O.limit:A.length===O.limit&&st.length<O.limit&&(ce.dirty=!0)),we?Object.freeze(st):st)}function Wc(A,O){return Jn(A.lower,O.lower)===0&&Jn(A.upper,O.upper)===0&&!!A.lowerOpen==!!O.lowerOpen&&!!A.upperOpen==!!O.upperOpen}function wd(A,O){return function(X,re,ce,we){if(X===void 0)return re!==void 0?-1:0;if(re===void 0)return 1;if((re=Jn(X,re))===0){if(ce&&we)return 0;if(ce)return 1;if(we)return-1}return re}(A.lower,O.lower,A.lowerOpen,O.lowerOpen)<=0&&0<=function(X,re,ce,we){if(X===void 0)return re!==void 0?1:0;if(re===void 0)return-1;if((re=Jn(X,re))===0){if(ce&&we)return 0;if(ce)return-1;if(we)return 1}return re}(A.upper,O.upper,A.upperOpen,O.upperOpen)}function rS(A,O,X,re){A.subscribers.add(X),re.addEventListener("abort",function(){var ce,we;A.subscribers.delete(X),A.subscribers.size===0&&(ce=A,we=O,setTimeout(function(){ce.subscribers.size===0&&Y(we,ce)},3e3))})}var sh={stack:"dbcore",level:0,name:"Cache",create:function(A){var O=A.schema.name;return r(r({},A),{transaction:function(X,re,ce){var we,Oe,Be=A.transaction(X,re,ce);return re==="readwrite"&&(Oe=(we=new AbortController).signal,ce=function(Ze){return function(){if(we.abort(),re==="readwrite"){for(var Xe=new Set,rt=0,He=X;rt<He.length;rt++){var st=He[rt],qe=Ml["idb://".concat(O,"/").concat(st)];if(qe){var tt=A.table(st),ot=qe.optimisticOps.filter(function(nn){return nn.trans===Be});if(Be._explicit&&Ze&&Be.mutatedParts)for(var Je=0,ht=Object.values(qe.queries.query);Je<ht.length;Je++)for(var bt=0,wt=(Yt=ht[Je]).slice();bt<wt.length;bt++)Rm(($t=wt[bt]).obsSet,Be.mutatedParts)&&(Y(Yt,$t),$t.subscribers.forEach(function(nn){return Xe.add(nn)}));else if(0<ot.length){qe.optimisticOps=qe.optimisticOps.filter(function(nn){return nn.trans!==Be});for(var kt=0,Vt=Object.values(qe.queries.query);kt<Vt.length;kt++)for(var Yt,$t,Gt,Jt=0,zt=(Yt=Vt[kt]).slice();Jt<zt.length;Jt++)($t=zt[Jt]).res!=null&&Be.mutatedParts&&(Ze&&!$t.dirty?(Gt=Object.isFrozen($t.res),Gt=Om($t.res,$t.req,ot,tt,$t,Gt),$t.dirty?(Y(Yt,$t),$t.subscribers.forEach(function(nn){return Xe.add(nn)})):Gt!==$t.res&&($t.res=Gt,$t.promise=F.resolve({result:Gt}))):($t.dirty&&Y(Yt,$t),$t.subscribers.forEach(function(nn){return Xe.add(nn)})))}}}Xe.forEach(function(nn){return nn()})}}},Be.addEventListener("abort",ce(!1),{signal:Oe}),Be.addEventListener("error",ce(!1),{signal:Oe}),Be.addEventListener("complete",ce(!0),{signal:Oe})),Be},table:function(X){var re=A.table(X),ce=re.schema.primaryKey;return r(r({},re),{mutate:function(we){var Oe=Ae.trans;if(ce.outbound||Oe.db._options.cache==="disabled"||Oe.explicit||Oe.idbtrans.mode!=="readwrite")return re.mutate(we);var Be=Ml["idb://".concat(O,"/").concat(X)];return Be?(Oe=re.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||ah(ce,we).some(function(Ze){return Ze==null}))?(Be.optimisticOps.push(we),we.mutatedParts&&nh(we.mutatedParts),Oe.then(function(Ze){0<Ze.numFailures&&(Y(Be.optimisticOps,we),(Ze=Tb(0,we,Ze))&&Be.optimisticOps.push(Ze),we.mutatedParts&&nh(we.mutatedParts))}),Oe.catch(function(){Y(Be.optimisticOps,we),we.mutatedParts&&nh(we.mutatedParts)})):Oe.then(function(Ze){var Xe=Tb(0,r(r({},we),{values:we.values.map(function(rt,He){var st;return Ze.failures[He]?rt:(rt=(st=ce.keyPath)!==null&&st!==void 0&&st.includes(".")?K(rt):r({},rt),j(rt,ce.keyPath,Ze.results[He]),rt)})}),Ze);Be.optimisticOps.push(Xe),queueMicrotask(function(){return we.mutatedParts&&nh(we.mutatedParts)})}),Oe):re.mutate(we)},query:function(we){if(!Ol(Ae,re)||!Cb("query",we))return re.query(we);var Oe=((Xe=Ae.trans)===null||Xe===void 0?void 0:Xe.db._options.cache)==="immutable",He=Ae,Be=He.requery,Ze=He.signal,Xe=function(tt,ot,Je,ht){var bt=Ml["idb://".concat(tt,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Je]))return[null,!1,bt,null];var wt=ot[(ht.query?ht.query.index.name:null)||""];if(!wt)return[null,!1,bt,null];switch(Je){case"query":var kt=wt.find(function(Vt){return Vt.req.limit===ht.limit&&Vt.req.values===ht.values&&Wc(Vt.req.query.range,ht.query.range)});return kt?[kt,!0,bt,wt]:[wt.find(function(Vt){return("limit"in Vt.req?Vt.req.limit:1/0)>=ht.limit&&(!ht.values||Vt.req.values)&&wd(Vt.req.query.range,ht.query.range)}),!1,bt,wt];case"count":return kt=wt.find(function(Vt){return Wc(Vt.req.query.range,ht.query.range)}),[kt,!!kt,bt,wt]}}(O,X,"query",we),rt=Xe[0],He=Xe[1],st=Xe[2],qe=Xe[3];return rt&&He?rt.obsSet=we.obsSet:(He=re.query(we).then(function(tt){var ot=tt.result;if(rt&&(rt.res=ot),Oe){for(var Je=0,ht=ot.length;Je<ht;++Je)Object.freeze(ot[Je]);Object.freeze(ot)}else tt.result=K(ot);return tt}).catch(function(tt){return qe&&rt&&Y(qe,rt),Promise.reject(tt)}),rt={obsSet:we.obsSet,promise:He,subscribers:new Set,type:"query",req:we,dirty:!1},qe?qe.push(rt):(qe=[rt],(st=st||(Ml["idb://".concat(O,"/").concat(X)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=qe)),rS(rt,qe,Be,Ze),rt.promise.then(function(tt){return{result:Om(tt.result,we,st==null?void 0:st.optimisticOps,re,rt,Oe)}})}})}})}};function xd(A,O){return new Proxy(A,{get:function(X,re,ce){return re==="db"?O:Reflect.get(X,re,ce)}})}var Cs=(zr.prototype.version=function(A){if(isNaN(A)||A<.1)throw new Se.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var O=this._versions,X=O.filter(function(re){return re._cfg.version===A})[0];return X||(X=new this.Version(A),O.push(X),O.sort(Em),X.stores({}),this._state.autoSchema=!1,X)},zr.prototype._whenReady=function(A){var O=this;return this.idbdb&&(this._state.openComplete||Ae.letThrough||this._vip)?A():new F(function(X,re){if(O._state.openComplete)return re(new Se.DatabaseClosed(O._state.dbOpenError));if(!O._state.isBeingOpened){if(!O._state.autoOpen)return void re(new Se.DatabaseClosed);O.open().catch(Le)}O._state.dbReadyPromise.then(X,re)}).then(A)},zr.prototype.use=function(A){var O=A.stack,X=A.create,re=A.level,ce=A.name;return ce&&this.unuse({stack:O,name:ce}),A=this._middlewares[O]||(this._middlewares[O]=[]),A.push({stack:O,create:X,level:re??10,name:ce}),A.sort(function(we,Oe){return we.level-Oe.level}),this},zr.prototype.unuse=function(A){var O=A.stack,X=A.name,re=A.create;return O&&this._middlewares[O]&&(this._middlewares[O]=this._middlewares[O].filter(function(ce){return re?ce.create!==re:!!X&&ce.name!==X})),this},zr.prototype.open=function(){var A=this;return Do(ve,function(){return eS(A)})},zr.prototype._close=function(){var A=this._state,O=eo.indexOf(this);if(0<=O&&eo.splice(O,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new F(function(X){A.dbReadyResolve=X}),A.openCanceller=new F(function(X,re){A.cancelOpen=re}))},zr.prototype.close=function(X){var O=(X===void 0?{disableAutoOpen:!0}:X).disableAutoOpen,X=this._state;O?(X.isBeingOpened&&X.cancelOpen(new Se.DatabaseClosed),this._close(),X.autoOpen=!1,X.dbOpenError=new Se.DatabaseClosed):(this._close(),X.autoOpen=this._options.autoOpen||X.isBeingOpened,X.openComplete=!1,X.dbOpenError=null)},zr.prototype.delete=function(A){var O=this;A===void 0&&(A={disableAutoOpen:!0});var X=0<arguments.length&&typeof arguments[0]!="object",re=this._state;return new F(function(ce,we){function Oe(){O.close(A);var Be=O._deps.indexedDB.deleteDatabase(O.name);Be.onsuccess=Re(function(){var Ze,Xe,rt;Ze=O._deps,Xe=O.name,rt=Ze.indexedDB,Ze=Ze.IDBKeyRange,Qf(rt)||Xe===Cl||Tm(rt,Ze).delete(Xe).catch(Le),ce()}),Be.onerror=is(we),Be.onblocked=O._fireOnBlocked}if(X)throw new Se.InvalidArgument("Invalid closeOptions argument to db.delete()");re.isBeingOpened?re.dbReadyPromise.then(Oe):Oe()})},zr.prototype.backendDB=function(){return this.idbdb},zr.prototype.isOpen=function(){return this.idbdb!==null},zr.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},zr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},zr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(zr.prototype,"tables",{get:function(){var A=this;return s(this._allTables).map(function(O){return A._allTables[O]})},enumerable:!1,configurable:!0}),zr.prototype.transaction=function(){var A=(function(O,X,re){var ce=arguments.length;if(ce<2)throw new Se.InvalidArgument("Too few arguments");for(var we=new Array(ce-1);--ce;)we[ce-1]=arguments[ce];return re=we.pop(),[O,L(we),re]}).apply(this,arguments);return this._transaction.apply(this,A)},zr.prototype._transaction=function(A,O,X){var re=this,ce=Ae.trans;ce&&ce.db===this&&A.indexOf("!")===-1||(ce=null);var we,Oe,Be=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(Oe=O.map(function(Xe){if(Xe=Xe instanceof re.Table?Xe.name:Xe,typeof Xe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Xe}),A=="r"||A===as)we=as;else{if(A!="rw"&&A!=pd)throw new Se.InvalidArgument("Invalid transaction mode: "+A);we=pd}if(ce){if(ce.mode===as&&we===pd){if(!Be)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ce=null}ce&&Oe.forEach(function(Xe){if(ce&&ce.storeNames.indexOf(Xe)===-1){if(!Be)throw new Se.SubTransaction("Table "+Xe+" not included in parent transaction.");ce=null}}),Be&&ce&&!ce.active&&(ce=null)}}catch(Xe){return ce?ce._promise(null,function(rt,He){He(Xe)}):Kr(Xe)}var Ze=(function Xe(rt,He,st,qe,tt){return F.resolve().then(function(){var ot=Ae.transless||Ae,Je=rt._createTransaction(He,st,rt._dbSchema,qe);if(Je.explicit=!0,ot={trans:Je,transless:ot},qe)Je.idbtrans=qe.idbtrans;else try{Je.create(),Je.idbtrans._explicit=!0,rt._state.PR1398_maxLoop=3}catch(wt){return wt.name===ke.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,He,st,null,tt)})):Kr(wt)}var ht,bt=J(tt);return bt&&Nn(),ot=F.follow(function(){var wt;(ht=tt.call(Je,Je))&&(bt?(wt=Xn.bind(null,null),ht.then(wt,wt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=vd(ht)))},ot),(ht&&typeof ht.then=="function"?F.resolve(ht).then(function(wt){return Je.active?wt:Kr(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(wt){return qe&&Je._resolve(),Je._completion.then(function(){return wt})}).catch(function(wt){return Je._reject(wt),Kr(wt)})})}).bind(null,this,we,Oe,ce,X);return ce?ce._promise(we,Ze,"lock"):Ae.trans?Do(Ae.transless,function(){return re._whenReady(Ze)}):this._whenReady(Ze)},zr.prototype.table=function(A){if(!h(this._allTables,A))throw new Se.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},zr);function zr(A,O){var X=this;this._middlewares={},this.verno=0;var re=zr.dependencies;this._options=O=r({addons:zr.addons,autoOpen:!0,indexedDB:re.indexedDB,IDBKeyRange:re.IDBKeyRange,cache:"cloned"},O),this._deps={indexedDB:O.indexedDB,IDBKeyRange:O.IDBKeyRange},re=O.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ce,we,Oe,Be,Ze,Xe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:O.autoOpen};Xe.dbReadyPromise=new F(function(He){Xe.dbReadyResolve=He}),Xe.openCanceller=new F(function(He,st){Xe.cancelOpen=st}),this._state=Xe,this.name=A,this.on=Lo(this,"populate","blocked","versionchange","close",{ready:[xe,Le]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(st,qe){zr.vip(function(){var tt,ot=X._state;ot.openComplete?(ot.dbOpenError||F.resolve().then(st),qe&&He(st)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(st),qe&&He(st)):(He(st),tt=X,qe||He(function Je(){tt.on.ready.unsubscribe(st),tt.on.ready.unsubscribe(Je)}))})}}),this.Collection=(ce=this,Pc($c.prototype,function(ht,Je){this.db=ce;var qe=Tl,tt=null;if(Je)try{qe=Je()}catch(bt){tt=bt}var ot=ht._ctx,Je=ot.table,ht=Je.hook.reading.fire;this._ctx={table:Je,index:ot.index,isPrimKey:!ot.index||Je.schema.primKey.keyPath&&ot.index===Je.schema.primKey.name,range:qe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:tt,or:ot.or,valueMapper:ht!==je?ht:null}})),this.Table=(we=this,Pc(bm.prototype,function(He,st,qe){this.db=we,this._tx=qe,this.name=He,this.schema=st,this.hook=we._allTables[He]?we._allTables[He].hook:Lo(null,{creating:[Ne,Le],reading:[z,je],updating:[se,Le],deleting:[fe,Le]})})),this.Transaction=(Oe=this,Pc(Sm.prototype,function(He,st,qe,tt,ot){var Je=this;this.db=Oe,this.mode=He,this.storeNames=st,this.schema=qe,this.chromeTransactionDurability=tt,this.idbtrans=null,this.on=Lo(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(ht,bt){Je._resolve=ht,Je._reject=bt}),this._completion.then(function(){Je.active=!1,Je.on.complete.fire()},function(ht){var bt=Je.active;return Je.active=!1,Je.on.error.fire(ht),Je.parent?Je.parent._reject(ht):bt&&Je.idbtrans&&Je.idbtrans.abort(),Kr(ht)})})),this.Version=(Be=this,Pc(Q_.prototype,function(He){this.db=Be,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ze=this,Pc(Nl.prototype,function(He,st,qe){if(this.db=Ze,this._ctx={table:He,index:st===":id"?null:st,or:qe},this._cmp=this._ascending=Jn,this._descending=function(tt,ot){return Jn(ot,tt)},this._max=function(tt,ot){return 0<Jn(tt,ot)?tt:ot},this._min=function(tt,ot){return Jn(tt,ot)<0?tt:ot},this._IDBKeyRange=Ze._deps.IDBKeyRange,!this._IDBKeyRange)throw new Se.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(X.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(X.name,"'. Closing db now to resume the delete request.")),X.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(X.name,"') was blocked")):console.warn("Upgrade '".concat(X.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=Hc(O.IDBKeyRange),this._createTransaction=function(He,st,qe,tt){return new X.Transaction(He,st,qe,X._options.chromeTransactionDurability,tt)},this._fireOnBlocked=function(He){X.on("blocked").fire(He),eo.filter(function(st){return st.name===X.name&&st!==X&&!st._state.vcFired}).map(function(st){return st.on("versionchange").fire(He)})},this.use(Eb),this.use(sh),this.use(nS),this.use(tS),this.use(Sb);var rt=new Proxy(this,{get:function(He,st,qe){if(st==="_vip")return!0;if(st==="table")return function(ot){return xd(X.table(ot),rt)};var tt=Reflect.get(He,st,qe);return tt instanceof bm?xd(tt,rt):st==="tables"?tt.map(function(ot){return xd(ot,rt)}):st==="_createTransaction"?function(){return xd(tt.apply(this,arguments),rt)}:tt}});this.vip=rt,re.forEach(function(He){return He(X)})}var Kc,Ei=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kb=(oh.prototype.subscribe=function(A,O,X){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:O,complete:X})},oh.prototype[Ei]=function(){return this},oh);function oh(A){this._subscribe=A}try{Kc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Kc={indexedDB:null,IDBKeyRange:null}}function Ab(A){var O,X=!1,re=new kb(function(ce){var we=J(A),Oe,Be=!1,Ze={},Xe={},rt={get closed(){return Be},unsubscribe:function(){Be||(Be=!0,Oe&&Oe.abort(),He&&ja.storagemutated.unsubscribe(qe))}};ce.start&&ce.start(rt);var He=!1,st=function(){return Oo(tt)},qe=function(ot){th(Ze,ot),Rm(Xe,Ze)&&st()},tt=function(){var ot,Je,ht;!Be&&Kc.indexedDB&&(Ze={},ot={},Oe&&Oe.abort(),Oe=new AbortController,ht=function(bt){var wt=G();try{we&&Nn();var kt=en(A,bt);return kt=we?kt.finally(Xn):kt}finally{wt&&U()}}(Je={subscr:ot,signal:Oe.signal,requery:st,querier:A,trans:null}),Promise.resolve(ht).then(function(bt){X=!0,O=bt,Be||Je.signal.aborted||(Ze={},function(wt){for(var kt in wt)if(h(wt,kt))return;return 1}(Xe=ot)||He||(ja(Uc,qe),He=!0),Oo(function(){return!Be&&ce.next&&ce.next(bt)}))},function(bt){X=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||Be||Oo(function(){Be||ce.error&&ce.error(bt)})}))};return setTimeout(st,0),rt});return re.hasValue=function(){return X},re.getValue=function(){return O},re}var Pl=Cs;function Pm(A){var O=zo;try{zo=!0,ja.storagemutated.fire(A),Dm(A,!0)}finally{zo=O}}m(Pl,r(r({},Qe),{delete:function(A){return new Pl(A,{addons:[]}).delete()},exists:function(A){return new Pl(A,{addons:[]}).open().then(function(O){return O.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return O=Pl.dependencies,X=O.indexedDB,O=O.IDBKeyRange,(Qf(X)?Promise.resolve(X.databases()).then(function(re){return re.map(function(ce){return ce.name}).filter(function(ce){return ce!==Cl})}):Tm(X,O).toCollection().primaryKeys()).then(A)}catch{return Kr(new Se.MissingAPI)}var O,X},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return Ae.trans?Do(Ae.transless,A):A()},vip:km,async:function(A){return function(){try{var O=vd(A.apply(this,arguments));return O&&typeof O.then=="function"?O:F.resolve(O)}catch(X){return Kr(X)}}},spawn:function(A,O,X){try{var re=vd(A.apply(X,O||[]));return re&&typeof re.then=="function"?re:F.resolve(re)}catch(ce){return Kr(ce)}},currentTransaction:{get:function(){return Ae.trans||null}},waitFor:function(A,O){return O=F.resolve(typeof A=="function"?Pl.ignoreTransaction(A):A).timeout(O||6e4),Ae.trans?Ae.trans.waitFor(O):O},Promise:F,debug:{get:function(){return Fe},set:function(A){Ce(A)}},derive:v,extend:l,props:m,override:E,Events:Lo,on:ja,liveQuery:Ab,extendObservabilitySet:th,getByKeyPath:I,setByKeyPath:j,delByKeyPath:function(A,O){typeof O=="string"?j(A,O,void 0):"length"in O&&[].map.call(O,function(X){j(A,X,void 0)})},shallowClone:N,deepClone:K,getObjectDiff:rh,cmp:Jn,asap:k,minKey:-1/0,addons:[],connections:eo,errnames:ke,dependencies:Kc,cache:Ml,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,O,X){return A+O/Math.pow(10,2*X)})})),Pl.maxKey=Hc(Pl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ja(Uc,function(A){zo||(A=new CustomEvent(Il,{detail:A}),zo=!0,dispatchEvent(A),zo=!1)}),addEventListener(Il,function(A){A=A.detail,zo||Pm(A)}));var Zc,zo=!1,si=function(){};return typeof BroadcastChannel<"u"&&((si=function(){(Zc=new BroadcastChannel(Il)).onmessage=function(A){return A.data&&Pm(A.data)}})(),typeof Zc.unref=="function"&&Zc.unref(),ja(Uc,function(A){zo||Zc.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!Cs.disableBfCache&&A.persisted){Fe&&console.debug("Dexie: handling persisted pagehide"),Zc!=null&&Zc.close();for(var O=0,X=eo;O<X.length;O++)X[O].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!Cs.disableBfCache&&A.persisted&&(Fe&&console.debug("Dexie: handling persisted pageshow"),si(),Pm({all:new Da(-1/0,[[]])}))})),F.rejectionMapper=function(A,O){return!A||A instanceof ne||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Pe[A.name]?A:(O=new Pe[A.name](O||A.message,A),"stack"in A&&b(O,"stack",{get:function(){return this.inner.stack}}),O)},Ce(Fe),r(Cs,Object.freeze({__proto__:null,Dexie:Cs,liveQuery:Ab,Entity:Uf,cmp:Jn,PropModification:Bc,replacePrefix:function(A,O){return new Bc({replacePrefix:[A,O]})},add:function(A){return new Bc({add:A})},remove:function(A){return new Bc({remove:A})},default:Cs,RangeSet:Da,mergeRanges:Dl,rangesOverlap:wb}),{default:Cs}),Cs})}(Iw)),Iw.exports}var rX=nX();const CT=bi(rX),k4=Symbol.for("Dexie"),Yw=globalThis[k4]||(globalThis[k4]=CT);if(CT.semVer!==Yw.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${CT.semVer} and ${Yw.semVer}`);const{liveQuery:e3e,mergeRanges:t3e,rangesOverlap:n3e,RangeSet:r3e,cmp:a3e,Entity:i3e,PropModification:s3e,replacePrefix:o3e,add:l3e,remove:c3e}=Yw;class aX extends Yw{constructor(){super("LiteChatDatabase_Rewrite_v1");Ta(this,"conversations");Ta(this,"interactions");Ta(this,"mods");Ta(this,"appState");Ta(this,"providerConfigs");Ta(this,"apiKeys");Ta(this,"syncRepos");Ta(this,"projects");Ta(this,"rules");Ta(this,"tags");Ta(this,"tagRuleLinks");this.version(8).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Ct=new aX,La=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class _t{static async loadConversations(){try{return(await Ct.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>La(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Ct.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Ct.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Ct.interactions.where({conversationId:t}).sortBy("index")).map(r=>La(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Ct.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Ct.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Ct.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Ct.mods.orderBy("loadOrder").toArray()).map(n=>La(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Ct.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Ct.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Ct.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Ct.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Ct.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>La(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Ct.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Ct.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Ct.apiKeys)==null?void 0:t.toArray())??[]).map(r=>La(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Ct.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Ct.transaction("rw",[Ct.apiKeys,Ct.providerConfigs],async()=>{const n=await Ct.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Ct.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Ct.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Ct.syncRepos.toArray()).map(n=>La(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Ct.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Ct.transaction("rw",[Ct.syncRepos,Ct.conversations],async()=>{const n=await Ct.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Ct.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Ct.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Ct.projects.orderBy("updatedAt").reverse().toArray()).map(n=>La(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,metadata:t.metadata?{...t.metadata}:{}};return await Ct.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await Ct.projects.where("parentId").equals(r).toArray();for(const s of a)await n(s.id);const i=await Ct.conversations.where("projectId").equals(r).toArray();if(i.length>0){const s=i.map(o=>Ct.conversations.update(o.id,{projectId:null}));await Promise.all(s),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await Ct.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Ct.transaction("rw",[Ct.projects,Ct.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Ct.rules.orderBy("name").toArray()).map(n=>La(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Ct.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Ct.transaction("rw",[Ct.rules,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("ruleId").equals(t).delete(),await Ct.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Ct.tags.orderBy("name").toArray()).map(n=>La(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Ct.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Ct.transaction("rw",[Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("tagId").equals(t).delete(),await Ct.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Ct.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Ct.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Ct.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Ct.appState.toArray();n.settings={},r.forEach(a=>{a.key.startsWith("settings:")&&(n.settings[a.key.substring(9)]=a.value)})}return t.importApiKeys&&(n.apiKeys=await Ct.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Ct.providerConfigs.toArray()),t.importProjects&&(n.projects=await Ct.projects.toArray()),t.importConversations&&(n.conversations=await Ct.conversations.toArray(),n.interactions=await Ct.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Ct.rules.toArray(),n.tags=await Ct.tags.toArray(),n.tagRuleLinks=await Ct.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Ct.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Ct.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Ct.transaction("rw",[Ct.appState,Ct.apiKeys,Ct.providerConfigs,Ct.projects,Ct.conversations,Ct.interactions,Ct.rules,Ct.tags,Ct.tagRuleLinks,Ct.mods,Ct.syncRepos],async()=>{if(n.importSettings&&await Ct.appState.clear(),n.importApiKeys&&await Ct.apiKeys.clear(),n.importProviderConfigs&&await Ct.providerConfigs.clear(),n.importProjects&&await Ct.projects.clear(),n.importConversations&&(await Ct.conversations.clear(),await Ct.interactions.clear()),n.importRulesAndTags&&(await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()),n.importMods&&await Ct.mods.clear(),n.importSyncRepos&&await Ct.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([a,i])=>({key:`settings:${a}`,value:i}));await Ct.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Ct.apiKeys.bulkPut(t.apiKeys.map(r=>La(r))),n.importProviderConfigs&&t.providerConfigs&&await Ct.providerConfigs.bulkPut(t.providerConfigs.map(r=>La(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Ct.projects.bulkPut(t.projects.map(r=>La(r))),n.importConversations&&t.conversations&&(await Ct.conversations.bulkPut(t.conversations.map(r=>La(r,["lastSyncedAt"]))),t.interactions&&await Ct.interactions.bulkPut(t.interactions.map(r=>La(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Ct.rules.bulkPut(t.rules.map(r=>La(r))),t.tags&&await Ct.tags.bulkPut(t.tags.map(r=>La(r))),t.tagRuleLinks&&await Ct.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Ct.mods.bulkPut(t.mods.map(r=>La(r))),n.importSyncRepos&&t.syncRepos&&await Ct.syncRepos.bulkPut(t.syncRepos.map(r=>La(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Ct.transaction("rw",[Ct.conversations,Ct.interactions,Ct.mods,Ct.appState,Ct.providerConfigs,Ct.apiKeys,Ct.syncRepos,Ct.projects,Ct.rules,Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.interactions.clear(),await Ct.conversations.clear(),await Ct.projects.clear(),await Ct.mods.clear(),await Ct.appState.clear(),await Ct.providerConfigs.clear(),await Ct.apiKeys.clear(),await Ct.syncRepos.clear(),await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function iX(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Tt=iX();var Et=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(Et||{}),Xw=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))(Xw||{}),il=h8();const V8=bi(il);function sX(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const oX=e=>{switch(e){case"success":return uX;case"info":return fX;case"warning":return dX;case"error":return hX;default:return null}},lX=Array(12).fill(0),cX=({visible:e,className:t})=>gt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},gt.createElement("div",{className:"sonner-spinner"},lX.map((n,r)=>gt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),uX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),dX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),pX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},gt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),gt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),mX=()=>{const[e,t]=gt.useState(document.hidden);return gt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let TT=1;class gX{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:TT++,s=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...a,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,s;const o=a.then(async u=>{if(s=["resolve",u],gt.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(bX(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,b=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...b})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,m=typeof n.description=="function"?await n.description(u):n.description,b=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...b})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,m=typeof n.description=="function"?await n.description(u):n.description,b=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...b})}}).catch(async u=>{if(s=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof d=="object"&&!gt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>o.then(()=>s[0]==="reject"?d(s[1]):u(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||TT++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Hi=new gX,yX=(e,t)=>{const n=(t==null?void 0:t.id)||TT++;return Hi.addToast({title:e,...t,id:n}),n},bX=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",vX=yX,wX=()=>Hi.toasts,xX=()=>Hi.getActiveToasts(),Ge=Object.assign(vX,{success:Hi.success,info:Hi.info,warning:Hi.warning,error:Hi.error,custom:Hi.custom,message:Hi.message,promise:Hi.promise,dismiss:Hi.dismiss,loading:Hi.loading},{getHistory:wX,getToasts:xX});sX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function kv(e){return e.label!==void 0}const _X=3,SX="24px",EX="16px",A4=4e3,CX=356,TX=14,kX=45,AX=200;function Ko(...e){return e.filter(Boolean).join(" ")}function NX(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const RX=e=>{var t,n,r,a,i,s,o,l,u;const{invert:d,toast:h,unstyled:m,interacting:g,setHeights:b,visibleToasts:v,heights:x,index:w,toasts:_,expanded:E,removeToast:C,defaultRichColors:k,closeButton:I,style:j,cancelButtonStyle:N,actionButtonStyle:P,className:L="",descriptionClassName:H="",duration:M,position:K,gap:q,expandByDefault:ue,classNames:ae,icons:te,closeButtonAriaLabel:Y="Close toast"}=e,[ie,V]=gt.useState(null),[J,Q]=gt.useState(null),[ne,he]=gt.useState(!1),[de,Ie]=gt.useState(!1),[ke,Te]=gt.useState(!1),[Se,Pe]=gt.useState(!1),[Qe,Le]=gt.useState(!1),[je,z]=gt.useState(0),[Ee,Ne]=gt.useState(0),fe=gt.useRef(h.duration||M||A4),se=gt.useRef(null),ee=gt.useRef(null),xe=w===0,Fe=w+1<=v,Ce=h.type,We=h.dismissible!==!1,Nt=h.className||"",it=h.descriptionClassName||"",St=gt.useMemo(()=>x.findIndex(Me=>Me.toastId===h.id)||0,[x,h.id]),Ft=gt.useMemo(()=>{var Me;return(Me=h.closeButton)!=null?Me:I},[h.closeButton,I]),Mt=gt.useMemo(()=>h.duration||M||A4,[h.duration,M]),Kt=gt.useRef(0),be=gt.useRef(0),D=gt.useRef(0),W=gt.useRef(null),[pe,De]=K.split("-"),ve=gt.useMemo(()=>x.reduce((Me,Ke,Dt)=>Dt>=St?Me:Me+Ke.height,0),[x,St]),Ae=mX(),le=h.invert||d,ft=Ce==="loading";be.current=gt.useMemo(()=>St*q+ve,[St,ve]),gt.useEffect(()=>{fe.current=Mt},[Mt]),gt.useEffect(()=>{he(!0)},[]),gt.useEffect(()=>{const Me=ee.current;if(Me){const Ke=Me.getBoundingClientRect().height;return Ne(Ke),b(Dt=>[{toastId:h.id,height:Ke,position:h.position},...Dt]),()=>b(Dt=>Dt.filter(ge=>ge.toastId!==h.id))}},[b,h.id]),gt.useLayoutEffect(()=>{if(!ne)return;const Me=ee.current,Ke=Me.style.height;Me.style.height="auto";const Dt=Me.getBoundingClientRect().height;Me.style.height=Ke,Ne(Dt),b(ge=>ge.find(U=>U.toastId===h.id)?ge.map(U=>U.toastId===h.id?{...U,height:Dt}:U):[{toastId:h.id,height:Dt,position:h.position},...ge])},[ne,h.title,h.description,b,h.id]);const vt=gt.useCallback(()=>{Ie(!0),z(be.current),b(Me=>Me.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},AX)},[h,C,b,be]);gt.useEffect(()=>{if(h.promise&&Ce==="loading"||h.duration===1/0||h.type==="loading")return;let Me;return E||g||Ae?(()=>{if(D.current<Kt.current){const ge=new Date().getTime()-Kt.current;fe.current=fe.current-ge}D.current=new Date().getTime()})():(()=>{fe.current!==1/0&&(Kt.current=new Date().getTime(),Me=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},fe.current))})(),()=>clearTimeout(Me)},[E,g,h,Ce,Ae,vt]),gt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function F(){var Me;if(te!=null&&te.loading){var Ke;return gt.createElement("div",{className:Ko(ae==null?void 0:ae.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Ce==="loading"},te.loading)}return gt.createElement(cX,{className:Ko(ae==null?void 0:ae.loader,h==null||(Me=h.classNames)==null?void 0:Me.loader),visible:Ce==="loading"})}const $e=h.icon||(te==null?void 0:te[Ce])||oX(Ce);var nt,ye;return gt.createElement("li",{tabIndex:0,ref:ee,className:Ko(L,Nt,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[Ce],h==null||(n=h.classNames)==null?void 0:n[Ce]),"data-sonner-toast":"","data-rich-colors":(nt=h.richColors)!=null?nt:k,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":ne,"data-promise":!!h.promise,"data-swiped":Qe,"data-removed":de,"data-visible":Fe,"data-y-position":pe,"data-x-position":De,"data-index":w,"data-front":xe,"data-swiping":ke,"data-dismissible":We,"data-type":Ce,"data-invert":le,"data-swipe-out":Se,"data-swipe-direction":J,"data-expanded":!!(E||ue&&ne),style:{"--index":w,"--toasts-before":w,"--z-index":_.length-w,"--offset":`${de?je:be.current}px`,"--initial-height":ue?"auto":`${Ee}px`,...j,...h.style},onDragEnd:()=>{Te(!1),V(null),W.current=null},onPointerDown:Me=>{ft||!We||(se.current=new Date,z(be.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(Te(!0),W.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,Ke,Dt;if(Se||!We)return;W.current=null;const ge=Number(((Me=ee.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),G=Number(((Ke=ee.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),U=new Date().getTime()-((Dt=se.current)==null?void 0:Dt.getTime()),Z=ie==="x"?ge:G,me=Math.abs(Z)/U;if(Math.abs(Z)>=kX||me>.11){z(be.current),h.onDismiss==null||h.onDismiss.call(h,h),Q(ie==="x"?ge>0?"right":"left":G>0?"down":"up"),vt(),Pe(!0);return}else{var Re,Ve;(Re=ee.current)==null||Re.style.setProperty("--swipe-amount-x","0px"),(Ve=ee.current)==null||Ve.style.setProperty("--swipe-amount-y","0px")}Le(!1),Te(!1),V(null)},onPointerMove:Me=>{var Ke,Dt,ge;if(!W.current||!We||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const U=Me.clientY-W.current.y,Z=Me.clientX-W.current.x;var me;const Re=(me=e.swipeDirections)!=null?me:NX(K);!ie&&(Math.abs(Z)>1||Math.abs(U)>1)&&V(Math.abs(Z)>Math.abs(U)?"x":"y");let Ve={x:0,y:0};const pt=Wt=>1/(1.5+Math.abs(Wt)/20);if(ie==="y"){if(Re.includes("top")||Re.includes("bottom"))if(Re.includes("top")&&U<0||Re.includes("bottom")&&U>0)Ve.y=U;else{const Wt=U*pt(U);Ve.y=Math.abs(Wt)<Math.abs(U)?Wt:U}}else if(ie==="x"&&(Re.includes("left")||Re.includes("right")))if(Re.includes("left")&&Z<0||Re.includes("right")&&Z>0)Ve.x=Z;else{const Wt=Z*pt(Z);Ve.x=Math.abs(Wt)<Math.abs(Z)?Wt:Z}(Math.abs(Ve.x)>0||Math.abs(Ve.y)>0)&&Le(!0),(Dt=ee.current)==null||Dt.style.setProperty("--swipe-amount-x",`${Ve.x}px`),(ge=ee.current)==null||ge.style.setProperty("--swipe-amount-y",`${Ve.y}px`)}},Ft&&!h.jsx&&Ce!=="loading"?gt.createElement("button",{"aria-label":Y,"data-disabled":ft,"data-close-button":!0,onClick:ft||!We?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Ko(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ye=te==null?void 0:te.close)!=null?ye:pX):null,(Ce||h.icon||h.promise)&&h.icon!==null&&((te==null?void 0:te[Ce])!==null||h.icon)?gt.createElement("div",{"data-icon":"",className:Ko(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||F():null,h.type!=="loading"?$e:null):null,gt.createElement("div",{"data-content":"",className:Ko(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},gt.createElement("div",{"data-title":"",className:Ko(ae==null?void 0:ae.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?gt.createElement("div",{"data-description":"",className:Ko(H,it,ae==null?void 0:ae.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),gt.isValidElement(h.cancel)?h.cancel:h.cancel&&kv(h.cancel)?gt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||N,onClick:Me=>{kv(h.cancel)&&We&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Me),vt())},className:Ko(ae==null?void 0:ae.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,gt.isValidElement(h.action)?h.action:h.action&&kv(h.action)?gt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:Me=>{kv(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Me),!Me.defaultPrevented&&vt())},className:Ko(ae==null?void 0:ae.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function N4(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function IX(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,s=i?"--mobile-offset":"--offset",o=i?EX:SX;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=o:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),n}const jX=gt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:u,mobileOffset:d,theme:h="light",richColors:m,duration:g,style:b,visibleToasts:v=_X,toastOptions:x,dir:w=N4(),gap:_=TX,icons:E,containerAriaLabel:C="Notifications"}=t,[k,I]=gt.useState([]),j=gt.useMemo(()=>Array.from(new Set([a].concat(k.filter(J=>J.position).map(J=>J.position)))),[k,a]),[N,P]=gt.useState([]),[L,H]=gt.useState(!1),[M,K]=gt.useState(!1),[q,ue]=gt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=gt.useRef(null),te=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=gt.useRef(null),ie=gt.useRef(!1),V=gt.useCallback(J=>{I(Q=>{var ne;return(ne=Q.find(he=>he.id===J.id))!=null&&ne.delete||Hi.dismiss(J.id),Q.filter(({id:he})=>he!==J.id)})},[]);return gt.useEffect(()=>Hi.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{I(Q=>Q.map(ne=>ne.id===J.id?{...ne,delete:!0}:ne))});return}setTimeout(()=>{V8.flushSync(()=>{I(Q=>{const ne=Q.findIndex(he=>he.id===J.id);return ne!==-1?[...Q.slice(0,ne),{...Q[ne],...J},...Q.slice(ne+1)]:[J,...Q]})})})}),[k]),gt.useEffect(()=>{if(h!=="system"){ue(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:Q})=>{ue(Q?"dark":"light")})}catch{J.addListener(({matches:ne})=>{try{ue(ne?"dark":"light")}catch(he){console.error(he)}})}},[h]),gt.useEffect(()=>{k.length<=1&&H(!1)},[k]),gt.useEffect(()=>{const J=Q=>{var ne;if(i.every(Ie=>Q[Ie]||Q.code===Ie)){var de;H(!0),(de=ae.current)==null||de.focus()}Q.code==="Escape"&&(document.activeElement===ae.current||(ne=ae.current)!=null&&ne.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),gt.useEffect(()=>{if(ae.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,ie.current=!1)}},[ae.current]),gt.createElement("section",{ref:n,"aria-label":`${C} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((J,Q)=>{var ne;const[he,de]=J.split("-");return k.length?gt.createElement("ol",{key:J,dir:w==="auto"?N4():w,tabIndex:-1,ref:ae,className:l,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":he,"data-lifted":L&&k.length>1&&!s,"data-x-position":de,style:{"--front-toast-height":`${((ne=N[0])==null?void 0:ne.height)||0}px`,"--width":`${CX}px`,"--gap":`${_}px`,...b,...IX(u,d)},onBlur:Ie=>{ie.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(ie.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,Y.current=Ie.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{M||H(!1)},onDragEnd:()=>H(!1),onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},k.filter(Ie=>!Ie.position&&Q===0||Ie.position===J).map((Ie,ke)=>{var Te,Se;return gt.createElement(RX,{key:Ie.id,icons:E,index:ke,toast:Ie,defaultRichColors:m,duration:(Te=x==null?void 0:x.duration)!=null?Te:g,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:r,visibleToasts:v,closeButton:(Se=x==null?void 0:x.closeButton)!=null?Se:o,interacting:M,position:J,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,closeButtonAriaLabel:x==null?void 0:x.closeButtonAriaLabel,removeToast:V,toasts:k.filter(Pe=>Pe.position==Ie.position),heights:N.filter(Pe=>Pe.position==Ie.position),setHeights:P,expandByDefault:s,gap:_,expanded:L,swipeDirections:t.swipeDirections})})):null}))}),Mn=Ks(Zs((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},currentConversationId:n}),r!=="loading"&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await _t.loadInteractionsForConversation(n);a.sort((i,s)=>i.index-s.index),e({interactions:a,status:"idle"}),Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(s=>s.id===n);if(i!==-1){const s=a.interactions[i];let o={...s.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]),r.metadata.reasoning!==void 0&&(o.reasoning=r.metadata.reasoning));const l={...s,...r,metadata:o};"response"in r&&(l.response=r.response),"rating"in r&&(l.rating=r.rating),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},appendReasoningChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeReasoningBuffers[n]=(a.activeReasoningBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},rateInteraction:async(n,r)=>{const a=t().interactions.find(i=>i.id===n);if(!a){console.error(`InteractionStore: Interaction ${n} not found for rating.`);return}t()._updateInteractionInState(n,{rating:r});try{await _t.saveInteraction({...a,rating:r})}catch(i){console.error(`InteractionStore: Failed to persist rating for ${n}`,i),t()._updateInteractionInState(n,{rating:a.rating}),Ge.error("Failed to save rating.")}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.activeReasoningBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],delete a.activeReasoningBuffers[n],console.log(`InteractionStore: Cleaned up buffers for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&Tt.emit(Et.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),DX="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ji=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=DX[n[e]&63];return t};const gc=Ks(Zs((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(s=>s.source==="direct"&&n.source==="direct"?s.name===n.name&&s.size===n.size:s.source==="vfs"&&n.source==="vfs"?s.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const s={id:ji(),...n};a.attachedFilesMetadata.push(s),r=!0}}),r&&Tt.emit(Et.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(s=>s.id!==n),r=a.attachedFilesMetadata.length<i}),r&&Tt.emit(Et.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Tt.emit(Et.ATTACHED_FILES_CHANGED,{files:[]})}}))),H8=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(H8);const mA=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return H8.has(r)};var q8="vercel.ai.error",MX=Symbol.for(q8),G8,OX=class W8 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[G8]=!0,this.name=t,this.cause=r}static isInstance(t){return W8.hasMarker(t,q8)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};G8=MX;var An=OX,K8="AI_APICallError",Z8=`vercel.ai.error.${K8}`,PX=Symbol.for(Z8),Y8,Us=class extends An{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:K8,message:t,cause:o}),this[Y8]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return An.hasMarker(t,Z8)}};Y8=PX;var X8="AI_EmptyResponseBodyError",J8=`vercel.ai.error.${X8}`,FX=Symbol.for(J8),Q8,e5=class extends An{constructor({message:t="Empty response body"}={}){super({name:X8,message:t}),this[Q8]=!0}static isInstance(t){return An.hasMarker(t,J8)}};Q8=FX;function vy(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var t5="AI_InvalidArgumentError",n5=`vercel.ai.error.${t5}`,LX=Symbol.for(n5),r5,a5=class extends An{constructor({message:t,cause:n,argument:r}){super({name:t5,message:t,cause:n}),this[r5]=!0,this.argument=r}static isInstance(t){return An.hasMarker(t,n5)}};r5=LX;var i5="AI_InvalidPromptError",s5=`vercel.ai.error.${i5}`,BX=Symbol.for(s5),o5,Jl=class extends An{constructor({prompt:t,message:n,cause:r}){super({name:i5,message:`Invalid prompt: ${n}`,cause:r}),this[o5]=!0,this.prompt=t}static isInstance(t){return An.hasMarker(t,s5)}};o5=BX;var l5="AI_InvalidResponseDataError",c5=`vercel.ai.error.${l5}`,$X=Symbol.for(c5),u5,tp=class extends An{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:l5,message:n}),this[u5]=!0,this.data=t}static isInstance(t){return An.hasMarker(t,c5)}};u5=$X;var d5="AI_JSONParseError",f5=`vercel.ai.error.${d5}`,zX=Symbol.for(f5),h5,Jw=class extends An{constructor({text:t,cause:n}){super({name:d5,message:`JSON parsing failed: Text: ${t}.
Error message: ${vy(n)}`,cause:n}),this[h5]=!0,this.text=t}static isInstance(t){return An.hasMarker(t,f5)}};h5=zX;var p5="AI_LoadAPIKeyError",m5=`vercel.ai.error.${p5}`,UX=Symbol.for(m5),g5,Av=class extends An{constructor({message:t}){super({name:p5,message:t}),this[g5]=!0}static isInstance(t){return An.hasMarker(t,m5)}};g5=UX;var y5="AI_TooManyEmbeddingValuesForCallError",b5=`vercel.ai.error.${y5}`,VX=Symbol.for(b5),v5,w1=class extends An{constructor(e){super({name:y5,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[v5]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return An.hasMarker(e,b5)}};v5=VX;var w5="AI_TypeValidationError",x5=`vercel.ai.error.${w5}`,HX=Symbol.for(x5),_5,qX=class kT extends An{constructor({value:t,cause:n}){super({name:w5,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${vy(n)}`,cause:n}),this[_5]=!0,this.value=t}static isInstance(t){return An.hasMarker(t,x5)}static wrap({value:t,cause:n}){return kT.isInstance(n)&&n.value===t?n:new kT({value:t,cause:n})}};_5=HX;var Qw=qX,S5="AI_UnsupportedFunctionalityError",E5=`vercel.ai.error.${S5}`,GX=Symbol.for(E5),C5,ur=class extends An{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:S5,message:n}),this[C5]=!0,this.functionality=t}static isInstance(t){return An.hasMarker(t,E5)}};C5=GX;let WX=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var gA={},x1={};x1.byteLength=YX;x1.toByteArray=JX;x1.fromByteArray=tJ;var nl=[],Fs=[],KX=typeof Uint8Array<"u"?Uint8Array:Array,Z2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var jh=0,ZX=Z2.length;jh<ZX;++jh)nl[jh]=Z2[jh],Fs[Z2.charCodeAt(jh)]=jh;Fs[45]=62;Fs[95]=63;function T5(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function YX(e){var t=T5(e),n=t[0],r=t[1];return(n+r)*3/4-r}function XX(e,t,n){return(t+n)*3/4-n}function JX(e){var t,n=T5(e),r=n[0],a=n[1],i=new KX(XX(e,r,a)),s=0,o=a>0?r-4:r,l;for(l=0;l<o;l+=4)t=Fs[e.charCodeAt(l)]<<18|Fs[e.charCodeAt(l+1)]<<12|Fs[e.charCodeAt(l+2)]<<6|Fs[e.charCodeAt(l+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return a===2&&(t=Fs[e.charCodeAt(l)]<<2|Fs[e.charCodeAt(l+1)]>>4,i[s++]=t&255),a===1&&(t=Fs[e.charCodeAt(l)]<<10|Fs[e.charCodeAt(l+1)]<<4|Fs[e.charCodeAt(l+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function QX(e){return nl[e>>18&63]+nl[e>>12&63]+nl[e>>6&63]+nl[e&63]}function eJ(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(QX(r));return a.join("")}function tJ(e){for(var t,n=e.length,r=n%3,a=[],i=16383,s=0,o=n-r;s<o;s+=i)a.push(eJ(e,s,s+i>o?o:s+i));return r===1?(t=e[n-1],a.push(nl[t>>2]+nl[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(nl[t>>10]+nl[t>>4&63]+nl[t<<2&63]+"=")),a.join("")}var yA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */yA.read=function(e,t,n,r,a){var i,s,o=a*8-r-1,l=(1<<o)-1,u=l>>1,d=-7,h=n?a-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-d)-1,g>>=-d,d+=o;d>0;i=i*256+e[t+h],h+=m,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=r;d>0;s=s*256+e[t+h],h+=m,d-=8);if(i===0)i=1-u;else{if(i===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-u}return(g?-1:1)*s*Math.pow(2,i-r)};yA.write=function(e,t,n,r,a,i){var s,o,l,u=i*8-a-1,d=(1<<u)-1,h=d>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,b=r?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=m/l:t+=m*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*l-1)*Math.pow(2,a),s=s+h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),s=0));a>=8;e[n+g]=o&255,g+=b,o/=256,a-=8);for(s=s<<a|o,u+=a;u>0;e[n+g]=s&255,g+=b,s/=256,u-=8);e[n+g-b]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=x1,n=yA,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:s,SharedArrayBuffer:o}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const be=new i(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,i.prototype),Object.setPrototypeOf(be,D),be.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(be){if(be>a)throw new RangeError('The value "'+be+'" is invalid for option "size"');const D=new i(be);return Object.setPrototypeOf(D,d.prototype),D}function d(be,D,W){if(typeof be=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(be)}return h(be,D,W)}d.poolSize=8192;function h(be,D,W){if(typeof be=="string")return v(be,D);if(s.isView(be))return w(be);if(be==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(it(be,s)||be&&it(be.buffer,s)||typeof o<"u"&&(it(be,o)||be&&it(be.buffer,o)))return _(be,D,W);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=be.valueOf&&be.valueOf();if(pe!=null&&pe!==be)return d.from(pe,D,W);const De=E(be);if(De)return De;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return d.from(be[Symbol.toPrimitive]("string"),D,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}d.from=function(be,D,W){return h(be,D,W)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function m(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function g(be,D,W){return m(be),be<=0?u(be):D!==void 0?typeof W=="string"?u(be).fill(D,W):u(be).fill(D):u(be)}d.alloc=function(be,D,W){return g(be,D,W)};function b(be){return m(be),u(be<0?0:C(be)|0)}d.allocUnsafe=function(be){return b(be)},d.allocUnsafeSlow=function(be){return b(be)};function v(be,D){if((typeof D!="string"||D==="")&&(D="utf8"),!d.isEncoding(D))throw new TypeError("Unknown encoding: "+D);const W=I(be,D)|0;let pe=u(W);const De=pe.write(be,D);return De!==W&&(pe=pe.slice(0,De)),pe}function x(be){const D=be.length<0?0:C(be.length)|0,W=u(D);for(let pe=0;pe<D;pe+=1)W[pe]=be[pe]&255;return W}function w(be){if(it(be,i)){const D=new i(be);return _(D.buffer,D.byteOffset,D.byteLength)}return x(be)}function _(be,D,W){if(D<0||be.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<D+(W||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return D===void 0&&W===void 0?pe=new i(be):W===void 0?pe=new i(be,D):pe=new i(be,D,W),Object.setPrototypeOf(pe,d.prototype),pe}function E(be){if(d.isBuffer(be)){const D=C(be.length)|0,W=u(D);return W.length===0||be.copy(W,0,0,D),W}if(be.length!==void 0)return typeof be.length!="number"||St(be.length)?u(0):x(be);if(be.type==="Buffer"&&Array.isArray(be.data))return x(be.data)}function C(be){if(be>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return be|0}function k(be){return+be!=be&&(be=0),d.alloc(+be)}d.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==d.prototype},d.compare=function(D,W){if(it(D,i)&&(D=d.from(D,D.offset,D.byteLength)),it(W,i)&&(W=d.from(W,W.offset,W.byteLength)),!d.isBuffer(D)||!d.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===W)return 0;let pe=D.length,De=W.length;for(let ve=0,Ae=Math.min(pe,De);ve<Ae;++ve)if(D[ve]!==W[ve]){pe=D[ve],De=W[ve];break}return pe<De?-1:De<pe?1:0},d.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(D,W){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return d.alloc(0);let pe;if(W===void 0)for(W=0,pe=0;pe<D.length;++pe)W+=D[pe].length;const De=d.allocUnsafe(W);let ve=0;for(pe=0;pe<D.length;++pe){let Ae=D[pe];if(it(Ae,i))ve+Ae.length>De.length?(d.isBuffer(Ae)||(Ae=d.from(Ae)),Ae.copy(De,ve)):i.prototype.set.call(De,Ae,ve);else if(d.isBuffer(Ae))Ae.copy(De,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=Ae.length}return De};function I(be,D){if(d.isBuffer(be))return be.length;if(s.isView(be)||it(be,s))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);const W=be.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&W===0)return 0;let De=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return xe(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return We(be).length;default:if(De)return pe?-1:xe(be).length;D=(""+D).toLowerCase(),De=!0}}d.byteLength=I;function j(be,D,W){let pe=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,D>>>=0,W<=D))return"";for(be||(be="utf8");;)switch(be){case"hex":return Q(this,D,W);case"utf8":case"utf-8":return te(this,D,W);case"ascii":return V(this,D,W);case"latin1":case"binary":return J(this,D,W);case"base64":return ae(this,D,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,D,W);default:if(pe)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),pe=!0}}d.prototype._isBuffer=!0;function N(be,D,W){const pe=be[D];be[D]=be[W],be[W]=pe}d.prototype.swap16=function(){const D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<D;W+=2)N(this,W,W+1);return this},d.prototype.swap32=function(){const D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<D;W+=4)N(this,W,W+3),N(this,W+1,W+2);return this},d.prototype.swap64=function(){const D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<D;W+=8)N(this,W,W+7),N(this,W+1,W+6),N(this,W+2,W+5),N(this,W+3,W+4);return this},d.prototype.toString=function(){const D=this.length;return D===0?"":arguments.length===0?te(this,0,D):j.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(D){if(!d.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:d.compare(this,D)===0},d.prototype.inspect=function(){let D="";const W=e.INSPECT_MAX_BYTES;return D=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(D+=" ... "),"<Buffer "+D+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(D,W,pe,De,ve){if(it(D,i)&&(D=d.from(D,D.offset,D.byteLength)),!d.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(W===void 0&&(W=0),pe===void 0&&(pe=D?D.length:0),De===void 0&&(De=0),ve===void 0&&(ve=this.length),W<0||pe>D.length||De<0||ve>this.length)throw new RangeError("out of range index");if(De>=ve&&W>=pe)return 0;if(De>=ve)return-1;if(W>=pe)return 1;if(W>>>=0,pe>>>=0,De>>>=0,ve>>>=0,this===D)return 0;let Ae=ve-De,le=pe-W;const ft=Math.min(Ae,le),vt=this.slice(De,ve),F=D.slice(W,pe);for(let $e=0;$e<ft;++$e)if(vt[$e]!==F[$e]){Ae=vt[$e],le=F[$e];break}return Ae<le?-1:le<Ae?1:0};function P(be,D,W,pe,De){if(be.length===0)return-1;if(typeof W=="string"?(pe=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,St(W)&&(W=De?0:be.length-1),W<0&&(W=be.length+W),W>=be.length){if(De)return-1;W=be.length-1}else if(W<0)if(De)W=0;else return-1;if(typeof D=="string"&&(D=d.from(D,pe)),d.isBuffer(D))return D.length===0?-1:L(be,D,W,pe,De);if(typeof D=="number")return D=D&255,typeof i.prototype.indexOf=="function"?De?i.prototype.indexOf.call(be,D,W):i.prototype.lastIndexOf.call(be,D,W):L(be,[D],W,pe,De);throw new TypeError("val must be string, number or Buffer")}function L(be,D,W,pe,De){let ve=1,Ae=be.length,le=D.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(be.length<2||D.length<2)return-1;ve=2,Ae/=2,le/=2,W/=2}function ft(F,$e){return ve===1?F[$e]:F.readUInt16BE($e*ve)}let vt;if(De){let F=-1;for(vt=W;vt<Ae;vt++)if(ft(be,vt)===ft(D,F===-1?0:vt-F)){if(F===-1&&(F=vt),vt-F+1===le)return F*ve}else F!==-1&&(vt-=vt-F),F=-1}else for(W+le>Ae&&(W=Ae-le),vt=W;vt>=0;vt--){let F=!0;for(let $e=0;$e<le;$e++)if(ft(be,vt+$e)!==ft(D,$e)){F=!1;break}if(F)return vt}return-1}d.prototype.includes=function(D,W,pe){return this.indexOf(D,W,pe)!==-1},d.prototype.indexOf=function(D,W,pe){return P(this,D,W,pe,!0)},d.prototype.lastIndexOf=function(D,W,pe){return P(this,D,W,pe,!1)};function H(be,D,W,pe){W=Number(W)||0;const De=be.length-W;pe?(pe=Number(pe),pe>De&&(pe=De)):pe=De;const ve=D.length;pe>ve/2&&(pe=ve/2);let Ae;for(Ae=0;Ae<pe;++Ae){const le=parseInt(D.substr(Ae*2,2),16);if(St(le))return Ae;be[W+Ae]=le}return Ae}function M(be,D,W,pe){return Nt(xe(D,be.length-W),be,W,pe)}function K(be,D,W,pe){return Nt(Fe(D),be,W,pe)}function q(be,D,W,pe){return Nt(We(D),be,W,pe)}function ue(be,D,W,pe){return Nt(Ce(D,be.length-W),be,W,pe)}d.prototype.write=function(D,W,pe,De){if(W===void 0)De="utf8",pe=this.length,W=0;else if(pe===void 0&&typeof W=="string")De=W,pe=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(pe)?(pe=pe>>>0,De===void 0&&(De="utf8")):(De=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-W;if((pe===void 0||pe>ve)&&(pe=ve),D.length>0&&(pe<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");let Ae=!1;for(;;)switch(De){case"hex":return H(this,D,W,pe);case"utf8":case"utf-8":return M(this,D,W,pe);case"ascii":case"latin1":case"binary":return K(this,D,W,pe);case"base64":return q(this,D,W,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,D,W,pe);default:if(Ae)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Ae=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(be,D,W){return D===0&&W===be.length?t.fromByteArray(be):t.fromByteArray(be.slice(D,W))}function te(be,D,W){W=Math.min(be.length,W);const pe=[];let De=D;for(;De<W;){const ve=be[De];let Ae=null,le=ve>239?4:ve>223?3:ve>191?2:1;if(De+le<=W){let ft,vt,F,$e;switch(le){case 1:ve<128&&(Ae=ve);break;case 2:ft=be[De+1],(ft&192)===128&&($e=(ve&31)<<6|ft&63,$e>127&&(Ae=$e));break;case 3:ft=be[De+1],vt=be[De+2],(ft&192)===128&&(vt&192)===128&&($e=(ve&15)<<12|(ft&63)<<6|vt&63,$e>2047&&($e<55296||$e>57343)&&(Ae=$e));break;case 4:ft=be[De+1],vt=be[De+2],F=be[De+3],(ft&192)===128&&(vt&192)===128&&(F&192)===128&&($e=(ve&15)<<18|(ft&63)<<12|(vt&63)<<6|F&63,$e>65535&&$e<1114112&&(Ae=$e))}}Ae===null?(Ae=65533,le=1):Ae>65535&&(Ae-=65536,pe.push(Ae>>>10&1023|55296),Ae=56320|Ae&1023),pe.push(Ae),De+=le}return ie(pe)}const Y=4096;function ie(be){const D=be.length;if(D<=Y)return String.fromCharCode.apply(String,be);let W="",pe=0;for(;pe<D;)W+=String.fromCharCode.apply(String,be.slice(pe,pe+=Y));return W}function V(be,D,W){let pe="";W=Math.min(be.length,W);for(let De=D;De<W;++De)pe+=String.fromCharCode(be[De]&127);return pe}function J(be,D,W){let pe="";W=Math.min(be.length,W);for(let De=D;De<W;++De)pe+=String.fromCharCode(be[De]);return pe}function Q(be,D,W){const pe=be.length;(!D||D<0)&&(D=0),(!W||W<0||W>pe)&&(W=pe);let De="";for(let ve=D;ve<W;++ve)De+=Ft[be[ve]];return De}function ne(be,D,W){const pe=be.slice(D,W);let De="";for(let ve=0;ve<pe.length-1;ve+=2)De+=String.fromCharCode(pe[ve]+pe[ve+1]*256);return De}d.prototype.slice=function(D,W){const pe=this.length;D=~~D,W=W===void 0?pe:~~W,D<0?(D+=pe,D<0&&(D=0)):D>pe&&(D=pe),W<0?(W+=pe,W<0&&(W=0)):W>pe&&(W=pe),W<D&&(W=D);const De=this.subarray(D,W);return Object.setPrototypeOf(De,d.prototype),De};function he(be,D,W){if(be%1!==0||be<0)throw new RangeError("offset is not uint");if(be+D>W)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(D,W,pe){D=D>>>0,W=W>>>0,pe||he(D,W,this.length);let De=this[D],ve=1,Ae=0;for(;++Ae<W&&(ve*=256);)De+=this[D+Ae]*ve;return De},d.prototype.readUintBE=d.prototype.readUIntBE=function(D,W,pe){D=D>>>0,W=W>>>0,pe||he(D,W,this.length);let De=this[D+--W],ve=1;for(;W>0&&(ve*=256);)De+=this[D+--W]*ve;return De},d.prototype.readUint8=d.prototype.readUInt8=function(D,W){return D=D>>>0,W||he(D,1,this.length),this[D]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(D,W){return D=D>>>0,W||he(D,2,this.length),this[D]|this[D+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(D,W){return D=D>>>0,W||he(D,2,this.length),this[D]<<8|this[D+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(D,W){return D=D>>>0,W||he(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(D,W){return D=D>>>0,W||he(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},d.prototype.readBigUInt64LE=Mt(function(D){D=D>>>0,Ne(D,"offset");const W=this[D],pe=this[D+7];(W===void 0||pe===void 0)&&fe(D,this.length-8);const De=W+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24,ve=this[++D]+this[++D]*2**8+this[++D]*2**16+pe*2**24;return BigInt(De)+(BigInt(ve)<<BigInt(32))}),d.prototype.readBigUInt64BE=Mt(function(D){D=D>>>0,Ne(D,"offset");const W=this[D],pe=this[D+7];(W===void 0||pe===void 0)&&fe(D,this.length-8);const De=W*2**24+this[++D]*2**16+this[++D]*2**8+this[++D],ve=this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+pe;return(BigInt(De)<<BigInt(32))+BigInt(ve)}),d.prototype.readIntLE=function(D,W,pe){D=D>>>0,W=W>>>0,pe||he(D,W,this.length);let De=this[D],ve=1,Ae=0;for(;++Ae<W&&(ve*=256);)De+=this[D+Ae]*ve;return ve*=128,De>=ve&&(De-=Math.pow(2,8*W)),De},d.prototype.readIntBE=function(D,W,pe){D=D>>>0,W=W>>>0,pe||he(D,W,this.length);let De=W,ve=1,Ae=this[D+--De];for(;De>0&&(ve*=256);)Ae+=this[D+--De]*ve;return ve*=128,Ae>=ve&&(Ae-=Math.pow(2,8*W)),Ae},d.prototype.readInt8=function(D,W){return D=D>>>0,W||he(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},d.prototype.readInt16LE=function(D,W){D=D>>>0,W||he(D,2,this.length);const pe=this[D]|this[D+1]<<8;return pe&32768?pe|4294901760:pe},d.prototype.readInt16BE=function(D,W){D=D>>>0,W||he(D,2,this.length);const pe=this[D+1]|this[D]<<8;return pe&32768?pe|4294901760:pe},d.prototype.readInt32LE=function(D,W){return D=D>>>0,W||he(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},d.prototype.readInt32BE=function(D,W){return D=D>>>0,W||he(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},d.prototype.readBigInt64LE=Mt(function(D){D=D>>>0,Ne(D,"offset");const W=this[D],pe=this[D+7];(W===void 0||pe===void 0)&&fe(D,this.length-8);const De=this[D+4]+this[D+5]*2**8+this[D+6]*2**16+(pe<<24);return(BigInt(De)<<BigInt(32))+BigInt(W+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24)}),d.prototype.readBigInt64BE=Mt(function(D){D=D>>>0,Ne(D,"offset");const W=this[D],pe=this[D+7];(W===void 0||pe===void 0)&&fe(D,this.length-8);const De=(W<<24)+this[++D]*2**16+this[++D]*2**8+this[++D];return(BigInt(De)<<BigInt(32))+BigInt(this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+pe)}),d.prototype.readFloatLE=function(D,W){return D=D>>>0,W||he(D,4,this.length),n.read(this,D,!0,23,4)},d.prototype.readFloatBE=function(D,W){return D=D>>>0,W||he(D,4,this.length),n.read(this,D,!1,23,4)},d.prototype.readDoubleLE=function(D,W){return D=D>>>0,W||he(D,8,this.length),n.read(this,D,!0,52,8)},d.prototype.readDoubleBE=function(D,W){return D=D>>>0,W||he(D,8,this.length),n.read(this,D,!1,52,8)};function de(be,D,W,pe,De,ve){if(!d.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>De||D<ve)throw new RangeError('"value" argument is out of bounds');if(W+pe>be.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(D,W,pe,De){if(D=+D,W=W>>>0,pe=pe>>>0,!De){const le=Math.pow(2,8*pe)-1;de(this,D,W,pe,le,0)}let ve=1,Ae=0;for(this[W]=D&255;++Ae<pe&&(ve*=256);)this[W+Ae]=D/ve&255;return W+pe},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(D,W,pe,De){if(D=+D,W=W>>>0,pe=pe>>>0,!De){const le=Math.pow(2,8*pe)-1;de(this,D,W,pe,le,0)}let ve=pe-1,Ae=1;for(this[W+ve]=D&255;--ve>=0&&(Ae*=256);)this[W+ve]=D/Ae&255;return W+pe},d.prototype.writeUint8=d.prototype.writeUInt8=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,1,255,0),this[W]=D&255,W+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,2,65535,0),this[W]=D&255,this[W+1]=D>>>8,W+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,2,65535,0),this[W]=D>>>8,this[W+1]=D&255,W+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,4,4294967295,0),this[W+3]=D>>>24,this[W+2]=D>>>16,this[W+1]=D>>>8,this[W]=D&255,W+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,4,4294967295,0),this[W]=D>>>24,this[W+1]=D>>>16,this[W+2]=D>>>8,this[W+3]=D&255,W+4};function Ie(be,D,W,pe,De){Ee(D,pe,De,be,W,7);let ve=Number(D&BigInt(4294967295));be[W++]=ve,ve=ve>>8,be[W++]=ve,ve=ve>>8,be[W++]=ve,ve=ve>>8,be[W++]=ve;let Ae=Number(D>>BigInt(32)&BigInt(4294967295));return be[W++]=Ae,Ae=Ae>>8,be[W++]=Ae,Ae=Ae>>8,be[W++]=Ae,Ae=Ae>>8,be[W++]=Ae,W}function ke(be,D,W,pe,De){Ee(D,pe,De,be,W,7);let ve=Number(D&BigInt(4294967295));be[W+7]=ve,ve=ve>>8,be[W+6]=ve,ve=ve>>8,be[W+5]=ve,ve=ve>>8,be[W+4]=ve;let Ae=Number(D>>BigInt(32)&BigInt(4294967295));return be[W+3]=Ae,Ae=Ae>>8,be[W+2]=Ae,Ae=Ae>>8,be[W+1]=Ae,Ae=Ae>>8,be[W]=Ae,W+8}d.prototype.writeBigUInt64LE=Mt(function(D,W=0){return Ie(this,D,W,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Mt(function(D,W=0){return ke(this,D,W,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(D,W,pe,De){if(D=+D,W=W>>>0,!De){const ft=Math.pow(2,8*pe-1);de(this,D,W,pe,ft-1,-ft)}let ve=0,Ae=1,le=0;for(this[W]=D&255;++ve<pe&&(Ae*=256);)D<0&&le===0&&this[W+ve-1]!==0&&(le=1),this[W+ve]=(D/Ae>>0)-le&255;return W+pe},d.prototype.writeIntBE=function(D,W,pe,De){if(D=+D,W=W>>>0,!De){const ft=Math.pow(2,8*pe-1);de(this,D,W,pe,ft-1,-ft)}let ve=pe-1,Ae=1,le=0;for(this[W+ve]=D&255;--ve>=0&&(Ae*=256);)D<0&&le===0&&this[W+ve+1]!==0&&(le=1),this[W+ve]=(D/Ae>>0)-le&255;return W+pe},d.prototype.writeInt8=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,1,127,-128),D<0&&(D=255+D+1),this[W]=D&255,W+1},d.prototype.writeInt16LE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,2,32767,-32768),this[W]=D&255,this[W+1]=D>>>8,W+2},d.prototype.writeInt16BE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,2,32767,-32768),this[W]=D>>>8,this[W+1]=D&255,W+2},d.prototype.writeInt32LE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,4,2147483647,-2147483648),this[W]=D&255,this[W+1]=D>>>8,this[W+2]=D>>>16,this[W+3]=D>>>24,W+4},d.prototype.writeInt32BE=function(D,W,pe){return D=+D,W=W>>>0,pe||de(this,D,W,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[W]=D>>>24,this[W+1]=D>>>16,this[W+2]=D>>>8,this[W+3]=D&255,W+4},d.prototype.writeBigInt64LE=Mt(function(D,W=0){return Ie(this,D,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Mt(function(D,W=0){return ke(this,D,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Te(be,D,W,pe,De,ve){if(W+pe>be.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Se(be,D,W,pe,De){return D=+D,W=W>>>0,De||Te(be,D,W,4),n.write(be,D,W,pe,23,4),W+4}d.prototype.writeFloatLE=function(D,W,pe){return Se(this,D,W,!0,pe)},d.prototype.writeFloatBE=function(D,W,pe){return Se(this,D,W,!1,pe)};function Pe(be,D,W,pe,De){return D=+D,W=W>>>0,De||Te(be,D,W,8),n.write(be,D,W,pe,52,8),W+8}d.prototype.writeDoubleLE=function(D,W,pe){return Pe(this,D,W,!0,pe)},d.prototype.writeDoubleBE=function(D,W,pe){return Pe(this,D,W,!1,pe)},d.prototype.copy=function(D,W,pe,De){if(!d.isBuffer(D))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!De&&De!==0&&(De=this.length),W>=D.length&&(W=D.length),W||(W=0),De>0&&De<pe&&(De=pe),De===pe||D.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),D.length-W<De-pe&&(De=D.length-W+pe);const ve=De-pe;return this===D&&typeof i.prototype.copyWithin=="function"?this.copyWithin(W,pe,De):i.prototype.set.call(D,this.subarray(pe,De),W),ve},d.prototype.fill=function(D,W,pe,De){if(typeof D=="string"){if(typeof W=="string"?(De=W,W=0,pe=this.length):typeof pe=="string"&&(De=pe,pe=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!d.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(D.length===1){const Ae=D.charCodeAt(0);(De==="utf8"&&Ae<128||De==="latin1")&&(D=Ae)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(W<0||this.length<W||this.length<pe)throw new RangeError("Out of range index");if(pe<=W)return this;W=W>>>0,pe=pe===void 0?this.length:pe>>>0,D||(D=0);let ve;if(typeof D=="number")for(ve=W;ve<pe;++ve)this[ve]=D;else{const Ae=d.isBuffer(D)?D:d.from(D,De),le=Ae.length;if(le===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(ve=0;ve<pe-W;++ve)this[ve+W]=Ae[ve%le]}return this};const Qe={};function Le(be,D,W){Qe[be]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${be}]`,this.stack,delete this.name}get code(){return be}set code(De){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:De,writable:!0})}toString(){return`${this.name} [${be}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(be){return be?`${be} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(be,D){return`The "${be}" argument must be of type number. Received type ${typeof D}`},TypeError),Le("ERR_OUT_OF_RANGE",function(be,D,W){let pe=`The value of "${be}" is out of range.`,De=W;return Number.isInteger(W)&&Math.abs(W)>2**32?De=je(String(W)):typeof W=="bigint"&&(De=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(De=je(De)),De+="n"),pe+=` It must be ${D}. Received ${De}`,pe},RangeError);function je(be){let D="",W=be.length;const pe=be[0]==="-"?1:0;for(;W>=pe+4;W-=3)D=`_${be.slice(W-3,W)}${D}`;return`${be.slice(0,W)}${D}`}function z(be,D,W){Ne(D,"offset"),(be[D]===void 0||be[D+W]===void 0)&&fe(D,be.length-(W+1))}function Ee(be,D,W,pe,De,ve){if(be>W||be<D){const Ae=typeof D=="bigint"?"n":"";let le;throw D===0||D===BigInt(0)?le=`>= 0${Ae} and < 2${Ae} ** ${(ve+1)*8}${Ae}`:le=`>= -(2${Ae} ** ${(ve+1)*8-1}${Ae}) and < 2 ** ${(ve+1)*8-1}${Ae}`,new Qe.ERR_OUT_OF_RANGE("value",le,be)}z(pe,De,ve)}function Ne(be,D){if(typeof be!="number")throw new Qe.ERR_INVALID_ARG_TYPE(D,"number",be)}function fe(be,D,W){throw Math.floor(be)!==be?(Ne(be,W),new Qe.ERR_OUT_OF_RANGE("offset","an integer",be)):D<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,be)}const se=/[^+/0-9A-Za-z-_]/g;function ee(be){if(be=be.split("=")[0],be=be.trim().replace(se,""),be.length<2)return"";for(;be.length%4!==0;)be=be+"=";return be}function xe(be,D){D=D||1/0;let W;const pe=be.length;let De=null;const ve=[];for(let Ae=0;Ae<pe;++Ae){if(W=be.charCodeAt(Ae),W>55295&&W<57344){if(!De){if(W>56319){(D-=3)>-1&&ve.push(239,191,189);continue}else if(Ae+1===pe){(D-=3)>-1&&ve.push(239,191,189);continue}De=W;continue}if(W<56320){(D-=3)>-1&&ve.push(239,191,189),De=W;continue}W=(De-55296<<10|W-56320)+65536}else De&&(D-=3)>-1&&ve.push(239,191,189);if(De=null,W<128){if((D-=1)<0)break;ve.push(W)}else if(W<2048){if((D-=2)<0)break;ve.push(W>>6|192,W&63|128)}else if(W<65536){if((D-=3)<0)break;ve.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((D-=4)<0)break;ve.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return ve}function Fe(be){const D=[];for(let W=0;W<be.length;++W)D.push(be.charCodeAt(W)&255);return D}function Ce(be,D){let W,pe,De;const ve=[];for(let Ae=0;Ae<be.length&&!((D-=2)<0);++Ae)W=be.charCodeAt(Ae),pe=W>>8,De=W%256,ve.push(De),ve.push(pe);return ve}function We(be){return t.toByteArray(ee(be))}function Nt(be,D,W,pe){let De;for(De=0;De<pe&&!(De+W>=D.length||De>=be.length);++De)D[De+W]=be[De];return De}function it(be,D){return be instanceof D||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===D.name}function St(be){return be!==be}const Ft=function(){const be="0123456789abcdef",D=new Array(256);for(let W=0;W<16;++W){const pe=W*16;for(let De=0;De<16;++De)D[pe+De]=be[W]+be[De]}return D}();function Mt(be){return typeof BigInt>"u"?Kt:be}function Kt(){throw new Error("BigInt not supported")}})(gA);const Qt=gA.Buffer,Lr=gA.Buffer;var Pd={exports:{}},R4;function nJ(){if(R4)return Pd.exports;R4=1;const e=typeof Qt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),e&&Qt.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const h=u&&u.protoAction||"error",m=u&&u.constructorAction||"error";if(h==="ignore"&&m==="ignore")return d;if(h!=="ignore"&&m!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return d}else if(h!=="ignore"&&m==="ignore"){if(t.test(o)===!1)return d}else if(n.test(o)===!1)return d;return a(d,{protoAction:h,constructorAction:m,safe:u&&u.safe})}function a(o,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let h=[o];for(;h.length;){const m=h;h=[];for(const g of m){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const b in g){const v=g[b];v&&typeof v=="object"&&h.push(v)}}}return o}function i(o,l,u){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,u)}finally{Error.stackTraceLimit=d}}function s(o,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return Pd.exports=i,Pd.exports.default=i,Pd.exports.parse=i,Pd.exports.safeParse=s,Pd.exports.scan=a,Pd.exports}var rJ=nJ();const Op=bi(rJ);var aJ={};function fa(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function iJ(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function sJ(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function oJ(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,g=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,g)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=lJ(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function lJ(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Pp(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Cf=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=WX(n,t);if(e==null)return a;if(n.includes(r))throw new a5({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},qi=Cf();function cJ(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function uJ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function jw(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function k5({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Av({message:`${r} API key must be a string.`});if(typeof da>"u")throw new Av({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=aJ[t],e==null)throw new Av({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Av({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var ex=Symbol.for("vercel.ai.validator");function dJ(e){return{[ex]:!0,validate:e}}function fJ(e){return typeof e=="object"&&e!==null&&ex in e&&e[ex]===!0&&"validate"in e}function hJ(e){return fJ(e)?e:pJ(e)}function pJ(e){return dJ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function mJ({value:e,schema:t}){const n=Fp({value:e,schema:t});if(!n.success)throw Qw.wrap({value:e,cause:n.error});return n.value}function Fp({value:e,schema:t}){const n=hJ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Qw.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Qw.wrap({value:e,cause:r})}}}function gJ({text:e,schema:t}){try{const n=Op.parse(e);return t==null?n:mJ({value:n,schema:t})}catch(n){throw Jw.isInstance(n)||Qw.isInstance(n)?n:new Jw({text:e,cause:n})}}function ff({text:e,schema:t}){try{const n=Op.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Fp({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Jw.isInstance(n)?n:new Jw({text:e,cause:n})}}}function tx(e){try{return Op.parse(e),!0}catch{return!1}}function _1({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Fp({value:t[e],schema:n});if(!r.success)throw new a5({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var yJ=()=>globalThis.fetch,ha=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>A5({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),bJ=async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>A5({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),A5=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=yJ()})=>{try{const o=await s(e,{method:"POST",headers:uJ(t),body:n.content,signal:i}),l=Pp(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw jw(d)||Us.isInstance(d)?d:new Us({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(jw(u)||Us.isInstance(u))?u:new Us({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(jw(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new Us({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function AT(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Tf=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=Pp(r);if(s.trim()==="")return{responseHeaders:o,value:new Us({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=gJ({text:s,schema:e});return{responseHeaders:o,value:new Us({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new Us({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},Lp=e=>async({response:t})=>{const n=Pp(t);if(t.body==null)throw new e5({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(oJ()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(ff({text:r,schema:e}))}}))}},ts=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=ff({text:a,schema:e}),s=Pp(t);if(!i.success)throw new Us({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},vJ=()=>async({response:e,url:t,requestBodyValues:n})=>{const r=Pp(e);if(!e.body)throw new Us({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{const a=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(a)}}catch(a){throw new Us({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:a})}},{btoa:wJ,atob:xJ}=globalThis;function S1(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=xJ(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Du(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return wJ(t)}function E1(e){return e==null?void 0:e.replace(/\/$/,"")}var ir;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},e.find=(a,i)=>{for(const s of a)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ir||(ir={}));var NT;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(NT||(NT={}));const rn=ir.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ec=e=>{switch(typeof e){case"undefined":return rn.undefined;case"string":return rn.string;case"number":return isNaN(e)?rn.nan:rn.number;case"boolean":return rn.boolean;case"function":return rn.function;case"bigint":return rn.bigint;case"symbol":return rn.symbol;case"object":return Array.isArray(e)?rn.array:e===null?rn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?rn.promise:typeof Map<"u"&&e instanceof Map?rn.map:typeof Set<"u"&&e instanceof Set?rn.set:typeof Date<"u"&&e instanceof Date?rn.date:rn.object;default:return rn.unknown}},Bt=ir.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_J=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class bs extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(s))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof bs))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ir.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}bs.create=e=>new bs(e);const up=(e,t)=>{let n;switch(e.code){case Bt.invalid_type:e.received===rn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Bt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ir.jsonStringifyReplacer)}`;break;case Bt.unrecognized_keys:n=`Unrecognized key(s) in object: ${ir.joinValues(e.keys,", ")}`;break;case Bt.invalid_union:n="Invalid input";break;case Bt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ir.joinValues(e.options)}`;break;case Bt.invalid_enum_value:n=`Invalid enum value. Expected ${ir.joinValues(e.options)}, received '${e.received}'`;break;case Bt.invalid_arguments:n="Invalid function arguments";break;case Bt.invalid_return_type:n="Invalid function return type";break;case Bt.invalid_date:n="Invalid date";break;case Bt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ir.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Bt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Bt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Bt.custom:n="Invalid input";break;case Bt.invalid_intersection_types:n="Intersection results could not be merged";break;case Bt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Bt.not_finite:n="Number must be finite";break;default:n=t.defaultError,ir.assertNever(e)}return{message:n}};let N5=up;function SJ(e){N5=e}function nx(){return N5}const rx=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},EJ=[];function tn(e,t){const n=nx(),r=rx({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===up?void 0:up].filter(a=>!!a)});e.common.issues.push(r)}class mi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return Cn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,s=await a.value;r.push({key:i,value:s})}return mi.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return Cn;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:t.value,value:r}}}const Cn=Object.freeze({status:"aborted"}),Hh=e=>({status:"dirty",value:e}),Di=e=>({status:"valid",value:e}),RT=e=>e.status==="aborted",IT=e=>e.status==="dirty",hf=e=>e.status==="valid",s0=e=>typeof Promise<"u"&&e instanceof Promise;function ax(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function R5(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var un;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(un||(un={}));var Mg,Og;class pl{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const I4=(e,t)=>{if(hf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new bs(e.common.issues);return this._error=n,this._error}}};function Ln(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,o)=>{var l,u;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:o.defaultError}},description:a}}class zn{get description(){return this._def.description}_getType(t){return ec(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:ec(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new mi,ctx:{common:t.parent.common,data:t.data,parsedType:ec(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(s0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ec(t)},i=this._parseSync({data:t,path:a.path,parent:a});return I4(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ec(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return hf(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>hf(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ec(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(s0(a)?a:Promise.resolve(a));return I4(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const s=t(a),o=()=>i.addIssue({code:Bt.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new xo({schema:this,typeName:Ht.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return yo.create(this,this._def)}nullable(){return Fu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return go.create(this)}promise(){return fp.create(this,this._def)}or(t){return u0.create([this,t],this._def)}and(t){return d0.create(this,t,this._def)}transform(t){return new xo({...Ln(this._def),schema:this,typeName:Ht.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new g0({...Ln(this._def),innerType:this,defaultValue:n,typeName:Ht.ZodDefault})}brand(){return new bA({typeName:Ht.ZodBranded,type:this,...Ln(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new y0({...Ln(this._def),innerType:this,catchValue:n,typeName:Ht.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return wy.create(this,t)}readonly(){return b0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CJ=/^c[^\s-]{8,}$/i,TJ=/^[0-9a-z]+$/,kJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,AJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,NJ=/^[a-z0-9_-]{21}$/i,RJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,IJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,jJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,DJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Y2;const MJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,OJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,PJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,FJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,LJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,BJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,I5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$J=new RegExp(`^${I5}$`);function j5(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function zJ(e){return new RegExp(`^${j5(e)}$`)}function D5(e){let t=`${I5}T${j5(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function UJ(e,t){return!!((t==="v4"||!t)&&MJ.test(e)||(t==="v6"||!t)&&PJ.test(e))}function VJ(e,t){if(!RJ.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function HJ(e,t){return!!((t==="v4"||!t)&&OJ.test(e)||(t==="v6"||!t)&&FJ.test(e))}class ho extends zn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==rn.string){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.string,received:i.parsedType}),Cn}const r=new mi;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=t.data.length>i.value,o=t.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(t,a),s?tn(a,{code:Bt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&tn(a,{code:Bt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")jJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"email",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Y2||(Y2=new RegExp(DJ,"u")),Y2.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"emoji",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")AJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"uuid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")NJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"nanoid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")CJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")TJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid2",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")kJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ulid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),tn(a,{validation:"url",code:Bt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"regex",code:Bt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?D5(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?$J.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?zJ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?IJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"duration",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?UJ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ip",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?VJ(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"jwt",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?HJ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cidr",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?LJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?BJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64url",code:Bt.invalid_string,message:i.message}),r.dirty()):ir.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Bt.invalid_string,...un.errToObj(r)})}_addCheck(t){return new ho({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...un.errToObj(t)})}url(t){return this._addCheck({kind:"url",...un.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...un.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...un.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...un.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...un.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...un.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...un.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...un.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...un.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...un.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...un.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...un.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...un.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...un.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...un.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...un.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...un.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...un.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...un.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...un.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...un.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...un.errToObj(n)})}nonempty(t){return this.min(1,un.errToObj(t))}trim(){return new ho({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ho({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ho({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ho.create=e=>{var t;return new ho({checks:[],typeName:Ht.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ln(e)})};function qJ(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class Mu extends zn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==rn.number){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.number,received:i.parsedType}),Cn}let r;const a=new mi;for(const i of this._def.checks)i.kind==="int"?ir.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?qJ(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_finite,message:i.message}),a.dirty()):ir.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new Mu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new Mu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:un.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:un.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:un.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:un.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ir.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Mu.create=e=>new Mu({checks:[],typeName:Ht.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ln(e)});class Ou extends zn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==rn.bigint)return this._getInvalidInput(t);let r;const a=new mi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ir.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return tn(n,{code:Bt.invalid_type,expected:rn.bigint,received:n.parsedType}),Cn}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new Ou({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new Ou({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ou.create=e=>{var t;return new Ou({checks:[],typeName:Ht.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ln(e)})};class o0 extends zn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==rn.boolean){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.boolean,received:r.parsedType}),Cn}return Di(t.data)}}o0.create=e=>new o0({typeName:Ht.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ln(e)});class pf extends zn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==rn.date){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.date,received:i.parsedType}),Cn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_date}),Cn}const r=new mi;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ir.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new pf({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:un.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:un.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}pf.create=e=>new pf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ht.ZodDate,...Ln(e)});class ix extends zn{_parse(t){if(this._getType(t)!==rn.symbol){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.symbol,received:r.parsedType}),Cn}return Di(t.data)}}ix.create=e=>new ix({typeName:Ht.ZodSymbol,...Ln(e)});class l0 extends zn{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.undefined,received:r.parsedType}),Cn}return Di(t.data)}}l0.create=e=>new l0({typeName:Ht.ZodUndefined,...Ln(e)});class c0 extends zn{_parse(t){if(this._getType(t)!==rn.null){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.null,received:r.parsedType}),Cn}return Di(t.data)}}c0.create=e=>new c0({typeName:Ht.ZodNull,...Ln(e)});class dp extends zn{constructor(){super(...arguments),this._any=!0}_parse(t){return Di(t.data)}}dp.create=e=>new dp({typeName:Ht.ZodAny,...Ln(e)});class sf extends zn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Di(t.data)}}sf.create=e=>new sf({typeName:Ht.ZodUnknown,...Ln(e)});class yc extends zn{_parse(t){const n=this._getOrReturnCtx(t);return tn(n,{code:Bt.invalid_type,expected:rn.never,received:n.parsedType}),Cn}}yc.create=e=>new yc({typeName:Ht.ZodNever,...Ln(e)});class sx extends zn{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.void,received:r.parsedType}),Cn}return Di(t.data)}}sx.create=e=>new sx({typeName:Ht.ZodVoid,...Ln(e)});class go extends zn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==rn.array)return tn(n,{code:Bt.invalid_type,expected:rn.array,received:n.parsedType}),Cn;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(s||o)&&(tn(n,{code:s?Bt.too_big:Bt.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(tn(n,{code:Bt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(tn(n,{code:Bt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>a.type._parseAsync(new pl(n,s,n.path,o)))).then(s=>mi.mergeArray(r,s));const i=[...n.data].map((s,o)=>a.type._parseSync(new pl(n,s,n.path,o)));return mi.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new go({...this._def,minLength:{value:t,message:un.toString(n)}})}max(t,n){return new go({...this._def,maxLength:{value:t,message:un.toString(n)}})}length(t,n){return new go({...this._def,exactLength:{value:t,message:un.toString(n)}})}nonempty(t){return this.min(1,t)}}go.create=(e,t)=>new go({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ht.ZodArray,...Ln(t)});function zh(e){if(e instanceof Yr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=yo.create(zh(r))}return new Yr({...e._def,shape:()=>t})}else return e instanceof go?new go({...e._def,type:zh(e.element)}):e instanceof yo?yo.create(zh(e.unwrap())):e instanceof Fu?Fu.create(zh(e.unwrap())):e instanceof ml?ml.create(e.items.map(t=>zh(t))):e}class Yr extends zn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ir.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==rn.object){const u=this._getOrReturnCtx(t);return tn(u,{code:Bt.invalid_type,expected:rn.object,received:u.parsedType}),Cn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof yc&&this._def.unknownKeys==="strip"))for(const u in a.data)s.includes(u)||o.push(u);const l=[];for(const u of s){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new pl(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof yc){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")o.length>0&&(tn(a,{code:Bt.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new pl(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>mi.mergeObjectSync(r,u)):mi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return un.errToObj,new Yr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,s,o;const l=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=un.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Yr({...this._def,unknownKeys:"strip"})}passthrough(){return new Yr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Yr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Yr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ht.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Yr({...this._def,catchall:t})}pick(t){const n={};return ir.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Yr({...this._def,shape:()=>n})}omit(t){const n={};return ir.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Yr({...this._def,shape:()=>n})}deepPartial(){return zh(this)}partial(t){const n={};return ir.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Yr({...this._def,shape:()=>n})}required(t){const n={};return ir.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof yo;)i=i._def.innerType;n[r]=i}}),new Yr({...this._def,shape:()=>n})}keyof(){return M5(ir.objectKeys(this.shape))}}Yr.create=(e,t)=>new Yr({shape:()=>e,unknownKeys:"strip",catchall:yc.create(),typeName:Ht.ZodObject,...Ln(t)});Yr.strictCreate=(e,t)=>new Yr({shape:()=>e,unknownKeys:"strict",catchall:yc.create(),typeName:Ht.ZodObject,...Ln(t)});Yr.lazycreate=(e,t)=>new Yr({shape:e,unknownKeys:"strip",catchall:yc.create(),typeName:Ht.ZodObject,...Ln(t)});class u0 extends zn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new bs(o.ctx.common.issues));return tn(n,{code:Bt.invalid_union,unionErrors:s}),Cn}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(l=>new bs(l));return tn(n,{code:Bt.invalid_union,unionErrors:o}),Cn}}get options(){return this._def.options}}u0.create=(e,t)=>new u0({options:e,typeName:Ht.ZodUnion,...Ln(t)});const Xl=e=>e instanceof h0?Xl(e.schema):e instanceof xo?Xl(e.innerType()):e instanceof p0?[e.value]:e instanceof Pu?e.options:e instanceof m0?ir.objectValues(e.enum):e instanceof g0?Xl(e._def.innerType):e instanceof l0?[void 0]:e instanceof c0?[null]:e instanceof yo?[void 0,...Xl(e.unwrap())]:e instanceof Fu?[null,...Xl(e.unwrap())]:e instanceof bA||e instanceof b0?Xl(e.unwrap()):e instanceof y0?Xl(e._def.innerType):[];class C1 extends zn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.object)return tn(n,{code:Bt.invalid_type,expected:rn.object,received:n.parsedType}),Cn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:Bt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Cn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const s=Xl(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new C1({typeName:Ht.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Ln(r)})}}function jT(e,t){const n=ec(e),r=ec(t);if(e===t)return{valid:!0,data:e};if(n===rn.object&&r===rn.object){const a=ir.objectKeys(t),i=ir.objectKeys(e).filter(o=>a.indexOf(o)!==-1),s={...e,...t};for(const o of i){const l=jT(e[o],t[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===rn.array&&r===rn.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const s=e[i],o=t[i],l=jT(s,o);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===rn.date&&r===rn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class d0 extends zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,s)=>{if(RT(i)||RT(s))return Cn;const o=jT(i.value,s.value);return o.valid?((IT(i)||IT(s))&&n.dirty(),{status:n.value,value:o.data}):(tn(r,{code:Bt.invalid_intersection_types}),Cn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}d0.create=(e,t,n)=>new d0({left:e,right:t,typeName:Ht.ZodIntersection,...Ln(n)});class ml extends zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.array)return tn(r,{code:Bt.invalid_type,expected:rn.array,received:r.parsedType}),Cn;if(r.data.length<this._def.items.length)return tn(r,{code:Bt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Cn;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:Bt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new pl(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>mi.mergeArray(n,s)):mi.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new ml({...this._def,rest:t})}}ml.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ml({items:e,typeName:Ht.ZodTuple,rest:null,...Ln(t)})};class f0 extends zn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.object)return tn(r,{code:Bt.invalid_type,expected:rn.object,received:r.parsedType}),Cn;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new pl(r,o,r.path,o)),value:s._parse(new pl(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?mi.mergeObjectAsync(n,a):mi.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof zn?new f0({keyType:t,valueType:n,typeName:Ht.ZodRecord,...Ln(r)}):new f0({keyType:ho.create(),valueType:t,typeName:Ht.ZodRecord,...Ln(n)})}}class ox extends zn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.map)return tn(r,{code:Bt.invalid_type,expected:rn.map,received:r.parsedType}),Cn;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,l],u)=>({key:a._parse(new pl(r,o,r.path,[u,"key"])),value:i._parse(new pl(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return Cn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return Cn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}ox.create=(e,t,n)=>new ox({valueType:t,keyType:e,typeName:Ht.ZodMap,...Ln(n)});class mf extends zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.set)return tn(r,{code:Bt.invalid_type,expected:rn.set,received:r.parsedType}),Cn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(tn(r,{code:Bt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(tn(r,{code:Bt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return Cn;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new pl(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(t,n){return new mf({...this._def,minSize:{value:t,message:un.toString(n)}})}max(t,n){return new mf({...this._def,maxSize:{value:t,message:un.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}mf.create=(e,t)=>new mf({valueType:e,minSize:null,maxSize:null,typeName:Ht.ZodSet,...Ln(t)});class np extends zn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.function)return tn(n,{code:Bt.invalid_type,expected:rn.function,received:n.parsedType}),Cn;function r(o,l){return rx({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,nx(),up].filter(u=>!!u),issueData:{code:Bt.invalid_arguments,argumentsError:l}})}function a(o,l){return rx({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,nx(),up].filter(u=>!!u),issueData:{code:Bt.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof fp){const o=this;return Di(async function(...l){const u=new bs([]),d=await o._def.args.parseAsync(l,i).catch(g=>{throw u.addIssue(r(l,g)),u}),h=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(g=>{throw u.addIssue(a(h,g)),u})})}else{const o=this;return Di(function(...l){const u=o._def.args.safeParse(l,i);if(!u.success)throw new bs([r(l,u.error)]);const d=Reflect.apply(s,this,u.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new bs([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new np({...this._def,args:ml.create(t).rest(sf.create())})}returns(t){return new np({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new np({args:t||ml.create([]).rest(sf.create()),returns:n||sf.create(),typeName:Ht.ZodFunction,...Ln(r)})}}class h0 extends zn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}h0.create=(e,t)=>new h0({getter:e,typeName:Ht.ZodLazy,...Ln(t)});class p0 extends zn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return tn(n,{received:n.data,code:Bt.invalid_literal,expected:this._def.value}),Cn}return{status:"valid",value:t.data}}get value(){return this._def.value}}p0.create=(e,t)=>new p0({value:e,typeName:Ht.ZodLiteral,...Ln(t)});function M5(e,t){return new Pu({values:e,typeName:Ht.ZodEnum,...Ln(t)})}class Pu extends zn{constructor(){super(...arguments),Mg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{expected:ir.joinValues(r),received:n.parsedType,code:Bt.invalid_type}),Cn}if(ax(this,Mg)||R5(this,Mg,new Set(this._def.values)),!ax(this,Mg).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{received:n.data,code:Bt.invalid_enum_value,options:r}),Cn}return Di(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Pu.create(t,{...this._def,...n})}exclude(t,n=this._def){return Pu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Mg=new WeakMap;Pu.create=M5;class m0 extends zn{constructor(){super(...arguments),Og.set(this,void 0)}_parse(t){const n=ir.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==rn.string&&r.parsedType!==rn.number){const a=ir.objectValues(n);return tn(r,{expected:ir.joinValues(a),received:r.parsedType,code:Bt.invalid_type}),Cn}if(ax(this,Og)||R5(this,Og,new Set(ir.getValidEnumValues(this._def.values))),!ax(this,Og).has(t.data)){const a=ir.objectValues(n);return tn(r,{received:r.data,code:Bt.invalid_enum_value,options:a}),Cn}return Di(t.data)}get enum(){return this._def.values}}Og=new WeakMap;m0.create=(e,t)=>new m0({values:e,typeName:Ht.ZodNativeEnum,...Ln(t)});class fp extends zn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.promise&&n.common.async===!1)return tn(n,{code:Bt.invalid_type,expected:rn.promise,received:n.parsedType}),Cn;const r=n.parsedType===rn.promise?n.data:Promise.resolve(n.data);return Di(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}fp.create=(e,t)=>new fp({type:e,typeName:Ht.ZodPromise,...Ln(t)});class xo extends zn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ht.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:s=>{tn(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return Cn;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?Cn:l.status==="dirty"||n.value==="dirty"?Hh(l.value):l});{if(n.value==="aborted")return Cn;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?Cn:o.status==="dirty"||n.value==="dirty"?Hh(o.value):o}}if(a.type==="refinement"){const s=o=>{const l=a.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Cn:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Cn:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!hf(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>hf(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:n.value,value:o})):s);ir.assertNever(a)}}xo.create=(e,t,n)=>new xo({schema:e,typeName:Ht.ZodEffects,effect:t,...Ln(n)});xo.createWithPreprocess=(e,t,n)=>new xo({schema:t,effect:{type:"preprocess",transform:e},typeName:Ht.ZodEffects,...Ln(n)});class yo extends zn{_parse(t){return this._getType(t)===rn.undefined?Di(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}yo.create=(e,t)=>new yo({innerType:e,typeName:Ht.ZodOptional,...Ln(t)});class Fu extends zn{_parse(t){return this._getType(t)===rn.null?Di(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Fu.create=(e,t)=>new Fu({innerType:e,typeName:Ht.ZodNullable,...Ln(t)});class g0 extends zn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===rn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}g0.create=(e,t)=>new g0({innerType:e,typeName:Ht.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ln(t)});class y0 extends zn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return s0(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new bs(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new bs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}y0.create=(e,t)=>new y0({innerType:e,typeName:Ht.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ln(t)});class lx extends zn{_parse(t){if(this._getType(t)!==rn.nan){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.nan,received:r.parsedType}),Cn}return{status:"valid",value:t.data}}}lx.create=e=>new lx({typeName:Ht.ZodNaN,...Ln(e)});const GJ=Symbol("zod_brand");class bA extends zn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class wy extends zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Cn:i.status==="dirty"?(n.dirty(),Hh(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Cn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new wy({in:t,out:n,typeName:Ht.ZodPipeline})}}class b0 extends zn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(hf(a)&&(a.value=Object.freeze(a.value)),a);return s0(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}b0.create=(e,t)=>new b0({innerType:e,typeName:Ht.ZodReadonly,...Ln(t)});function j4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function O5(e,t={},n){return e?dp.create().superRefine((r,a)=>{var i,s;const o=e(r);if(o instanceof Promise)return o.then(l=>{var u,d;if(!l){const h=j4(t,r),m=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!o){const l=j4(t,r),u=(s=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...l,fatal:u})}}):dp.create()}const WJ={object:Yr.lazycreate};var Ht;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ht||(Ht={}));const KJ=(e,t={message:`Input not instance of ${e.name}`})=>O5(n=>n instanceof e,t),P5=ho.create,F5=Mu.create,ZJ=lx.create,YJ=Ou.create,L5=o0.create,XJ=pf.create,JJ=ix.create,QJ=l0.create,eQ=c0.create,tQ=dp.create,nQ=sf.create,rQ=yc.create,aQ=sx.create,iQ=go.create,sQ=Yr.create,oQ=Yr.strictCreate,lQ=u0.create,cQ=C1.create,uQ=d0.create,dQ=ml.create,fQ=f0.create,hQ=ox.create,pQ=mf.create,mQ=np.create,gQ=h0.create,yQ=p0.create,bQ=Pu.create,vQ=m0.create,wQ=fp.create,D4=xo.create,xQ=yo.create,_Q=Fu.create,SQ=xo.createWithPreprocess,EQ=wy.create,CQ=()=>P5().optional(),TQ=()=>F5().optional(),kQ=()=>L5().optional(),AQ={string:e=>ho.create({...e,coerce:!0}),number:e=>Mu.create({...e,coerce:!0}),boolean:e=>o0.create({...e,coerce:!0}),bigint:e=>Ou.create({...e,coerce:!0}),date:e=>pf.create({...e,coerce:!0})},NQ=Cn;var $=Object.freeze({__proto__:null,defaultErrorMap:up,setErrorMap:SJ,getErrorMap:nx,makeIssue:rx,EMPTY_PATH:EJ,addIssueToContext:tn,ParseStatus:mi,INVALID:Cn,DIRTY:Hh,OK:Di,isAborted:RT,isDirty:IT,isValid:hf,isAsync:s0,get util(){return ir},get objectUtil(){return NT},ZodParsedType:rn,getParsedType:ec,ZodType:zn,datetimeRegex:D5,ZodString:ho,ZodNumber:Mu,ZodBigInt:Ou,ZodBoolean:o0,ZodDate:pf,ZodSymbol:ix,ZodUndefined:l0,ZodNull:c0,ZodAny:dp,ZodUnknown:sf,ZodNever:yc,ZodVoid:sx,ZodArray:go,ZodObject:Yr,ZodUnion:u0,ZodDiscriminatedUnion:C1,ZodIntersection:d0,ZodTuple:ml,ZodRecord:f0,ZodMap:ox,ZodSet:mf,ZodFunction:np,ZodLazy:h0,ZodLiteral:p0,ZodEnum:Pu,ZodNativeEnum:m0,ZodPromise:fp,ZodEffects:xo,ZodTransformer:xo,ZodOptional:yo,ZodNullable:Fu,ZodDefault:g0,ZodCatch:y0,ZodNaN:lx,BRAND:GJ,ZodBranded:bA,ZodPipeline:wy,ZodReadonly:b0,custom:O5,Schema:zn,ZodSchema:zn,late:WJ,get ZodFirstPartyTypeKind(){return Ht},coerce:AQ,any:tQ,array:iQ,bigint:YJ,boolean:L5,date:XJ,discriminatedUnion:cQ,effect:D4,enum:bQ,function:mQ,instanceof:KJ,intersection:uQ,lazy:gQ,literal:yQ,map:hQ,nan:ZJ,nativeEnum:vQ,never:rQ,null:eQ,nullable:_Q,number:F5,object:sQ,oboolean:kQ,onumber:TQ,optional:xQ,ostring:CQ,pipeline:EQ,preprocess:SQ,promise:wQ,record:fQ,set:pQ,strictObject:oQ,string:P5,symbol:JJ,transformer:D4,tuple:dQ,undefined:QJ,union:lQ,unknown:nQ,void:aQ,NEVER:NQ,ZodIssueCode:Bt,quotelessJson:_J,ZodError:bs});function RQ({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:s});break}case"developer":{r.push({role:"developer",content:s});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){r.push({role:"user",content:s[0].text});break}r.push({role:"user",content:s.map((o,l)=>{var u,d,h,m;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${Du(o.image)}`,detail:(h=(d=o.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(o.data instanceof URL)throw new ur({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=o.filename)!=null?m:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new ur({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const u of s)switch(u.type){case"text":{o+=u.text;break}case"tool-call":{l.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}}if(t){if(l.length>1)throw new ur({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of s)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:a}}function M4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function cx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var vA=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),gl=Tf({errorSchema:vA,errorToMessage:e=>e.error.message});function ux({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function IQ({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice;if(t){const u=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):u.push({name:h.name,description:h.description,parameters:h.parameters});if(s==null)return{functions:u,function_call:void 0,toolWarnings:i};switch(s.type){case"auto":case"none":case void 0:return{functions:u,function_call:void 0,toolWarnings:i};case"required":throw new ur({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:u,function_call:{name:s.toolName},toolWarnings:i}}}const o=[];for(const u of a)u.type==="provider-defined"?i.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:n?!0:void 0}});if(s==null)return{tools:o,tool_choice:void 0,toolWarnings:i};const l=s.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:i};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const u=l;throw new ur({functionality:`Unsupported tool choice type: ${u}`})}}}var jQ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:DT(this.modelId)}get defaultObjectGenerationMode(){return OQ(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,g,b,v,x,w,_,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const I=this.settings.useLegacyFunctionCalling;if(I&&this.settings.parallelToolCalls===!0)throw new ur({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(I&&this.supportsStructuredOutputs)throw new ur({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:j,warnings:N}=RQ({prompt:t,useLegacyFunctionCalling:I,systemMessageMode:PQ(this.modelId)});k.push(...N);const P={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:(m=u.name)!=null?m:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(b=h==null?void 0:h.openai)==null?void 0:b.store,metadata:(v=h==null?void 0:h.openai)==null?void 0:v.metadata,prediction:(x=h==null?void 0:h.openai)==null?void 0:x.prediction,reasoning_effort:(_=(w=h==null?void 0:h.openai)==null?void 0:w.reasoningEffort)!=null?_:this.settings.reasoningEffort,messages:j};switch(DT(this.modelId)?(P.temperature!=null&&(P.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),P.top_p!=null&&(P.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),P.frequency_penalty!=null&&(P.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),P.presence_penalty!=null&&(P.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),P.logit_bias!=null&&(P.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),P.logprobs!=null&&(P.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),P.top_logprobs!=null&&(P.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),P.max_tokens!=null&&(P.max_completion_tokens==null&&(P.max_completion_tokens=P.max_tokens),P.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&P.temperature!=null&&(P.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),C){case"regular":{const{tools:L,tool_choice:H,functions:M,function_call:K,toolWarnings:q}=IQ({mode:e,useLegacyFunctionCalling:I,structuredOutputs:this.supportsStructuredOutputs});return{args:{...P,tools:L,tool_choice:H,functions:M,function_call:K},warnings:[...k,...q]}}case"object-json":return{args:{...P,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:I?{...P,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...P,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const L=C;throw new Error(`Unsupported type: ${L}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l;const{args:u,warnings:d}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await ha({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:u,failedResponseHandler:gl,successfulResponseHandler:ts(DQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:b,...v}=u,x=m.choices[0],w=(t=m.usage)==null?void 0:t.completion_tokens_details,_=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(w==null?void 0:w.reasoning_tokens)!=null&&(E.openai.reasoningTokens=w==null?void 0:w.reasoning_tokens),(w==null?void 0:w.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=w==null?void 0:w.accepted_prediction_tokens),(w==null?void 0:w.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=w==null?void 0:w.rejected_prediction_tokens),(_==null?void 0:_.cached_tokens)!=null&&(E.openai.cachedPromptTokens=_==null?void 0:_.cached_tokens),{text:(r=x.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&x.message.function_call?[{toolCallType:"function",toolCallId:qi(),toolName:x.message.function_call.name,args:x.message.function_call.arguments}]:(a=x.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:qi(),toolName:C.function.name,args:C.function.arguments}}),finishReason:cx(x.finish_reason),usage:{promptTokens:(s=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?s:NaN,completionTokens:(l=(o=m.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:b,rawSettings:v},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(u)},response:ux(m),warnings:d,logprobs:M4(x.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...v.response}),v.text&&w.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const _ of v.toolCalls)w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_.toolCallId,toolName:_.toolName,argsTextDelta:_.args}),w.enqueue({type:"tool-call",..._});w.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),w.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await ha({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:r,failedResponseHandler:gl,successfulResponseHandler:Lp(MQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=t,l=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,b={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(v,x){var w,_,E,C,k,I,j,N,P,L,H,M;if(!v.success){u="error",x.enqueue({type:"error",error:v.error});return}const K=v.value;if("error"in K){u="error",x.enqueue({type:"error",error:K.error});return}if(m&&(m=!1,x.enqueue({type:"response-metadata",...ux(K)})),K.usage!=null){const{prompt_tokens:Y,completion_tokens:ie,prompt_tokens_details:V,completion_tokens_details:J}=K.usage;d={promptTokens:Y??void 0,completionTokens:ie??void 0},(J==null?void 0:J.reasoning_tokens)!=null&&(b.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(b.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(b.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(V==null?void 0:V.cached_tokens)!=null&&(b.openai.cachedPromptTokens=V==null?void 0:V.cached_tokens)}const q=K.choices[0];if((q==null?void 0:q.finish_reason)!=null&&(u=cx(q.finish_reason)),(q==null?void 0:q.delta)==null)return;const ue=q.delta;ue.content!=null&&x.enqueue({type:"text-delta",textDelta:ue.content});const ae=M4(q==null?void 0:q.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const te=g&&ue.function_call!=null?[{type:"function",id:qi(),function:ue.function_call,index:0}]:ue.tool_calls;if(te!=null)for(const Y of te){const ie=Y.index;if(l[ie]==null){if(Y.type!=="function")throw new tp({data:Y,message:"Expected 'function' type."});if(Y.id==null)throw new tp({data:Y,message:"Expected 'id' to be a string."});if(((w=Y.function)==null?void 0:w.name)==null)throw new tp({data:Y,message:"Expected 'function.name' to be a string."});l[ie]={id:Y.id,type:"function",function:{name:Y.function.name,arguments:(_=Y.function.arguments)!=null?_:""},hasFinished:!1};const J=l[ie];((E=J.function)==null?void 0:E.name)!=null&&((C=J.function)==null?void 0:C.arguments)!=null&&(J.function.arguments.length>0&&x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),tx(J.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=J.id)!=null?k:qi(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const V=l[ie];V.hasFinished||(((I=Y.function)==null?void 0:I.arguments)!=null&&(V.function.arguments+=(N=(j=Y.function)==null?void 0:j.arguments)!=null?N:""),x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:V.id,toolName:V.function.name,argsTextDelta:(P=Y.function.arguments)!=null?P:""}),((L=V.function)==null?void 0:L.name)!=null&&((H=V.function)==null?void 0:H.arguments)!=null&&tx(V.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(M=V.id)!=null?M:qi(),toolName:V.function.name,args:V.function.arguments}),V.hasFinished=!0))}},flush(v){var x,w;v.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(x=d.promptTokens)!=null?x:NaN,completionTokens:(w=d.completionTokens)!=null?w:NaN},...b!=null?{providerMetadata:b}:{}})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},B5=$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish(),prompt_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),completion_tokens_details:$.object({reasoning_tokens:$.number().nullish(),accepted_prediction_tokens:$.number().nullish(),rejected_prediction_tokens:$.number().nullish()}).nullish()}).nullish(),DQ=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),function_call:$.object({arguments:$.string(),name:$.string()}).nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullish()})),usage:B5}),MQ=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),function_call:$.object({name:$.string().optional(),arguments:$.string().optional()}).nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").nullish(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullish(),index:$.number()})),usage:B5}),vA]);function DT(e){return e.startsWith("o")}function OQ(e){return e.startsWith("gpt-4o-audio-preview")}function PQ(e){var t,n;return DT(e)?(n=(t=FQ[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var FQ={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function LQ({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Jl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new ur({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new ur({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new ur({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function O4(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var BQ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h}){var m;const g=e.type,b=[];s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:v,stopSequences:x}=LQ({prompt:n,inputFormat:t}),w=[...x??[],...u??[]],_={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,prompt:v,stop:w.length>0?w:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new ur({functionality:"tools"});if(e.toolChoice)throw new ur({functionality:"toolChoice"});return{args:_,warnings:b}}case"object-json":throw new ur({functionality:"object-json mode"});case"object-tool":throw new ur({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await ha({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:t,failedResponseHandler:gl,successfulResponseHandler:ts($Q),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:cx(l.finish_reason),logprobs:O4(l.logprobs),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r,body:i},response:ux(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await ha({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:r,failedResponseHandler:gl,successfulResponseHandler:Lp(zQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){l="error",g.enqueue({type:"error",error:m.error});return}const b=m.value;if("error"in b){l="error",g.enqueue({type:"error",error:b.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...ux(b)})),b.usage!=null&&(u={promptTokens:b.usage.prompt_tokens,completionTokens:b.usage.completion_tokens});const v=b.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=cx(v.finish_reason)),(v==null?void 0:v.text)!=null&&g.enqueue({type:"text-delta",textDelta:v.text});const x=O4(v==null?void 0:v.logprobs);x!=null&&x.length&&(d===void 0&&(d=[]),d.push(...x))},flush(m){m.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},$Q=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()})}),zQ=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),vA]),UQ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new w1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await ha({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:fa(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:gl,successfulResponseHandler:ts(VQ),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},VQ=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),HQ={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},qQ=new Set(["gpt-image-1"]),GQ=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:HQ[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:b,responseHeaders:v}=await ha({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:fa(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},...qQ.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:gl,successfulResponseHandler:ts(WQ),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:v}}}},WQ=$.object({data:$.array($.object({b64_json:$.string()}))}),KQ=$.object({include:$.array($.string()).nullish(),language:$.string().nullish(),prompt:$.string().nullish(),temperature:$.number().min(0).max(1).nullish().default(0),timestampGranularities:$.array($.enum(["word","segment"])).nullish().default(["segment"])}),P4={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},ZQ=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:n}){var r,a,i,s,o;const l=[],u=_1({provider:"openai",providerOptions:n,schema:KQ}),d=new FormData,h=e instanceof Uint8Array?new Blob([e]):new Blob([S1(e)]);if(d.append("model",this.modelId),d.append("file",new File([h],"audio",{type:t})),u){const m={include:(r=u.include)!=null?r:void 0,language:(a=u.language)!=null?a:void 0,prompt:(i=u.prompt)!=null?i:void 0,temperature:(s=u.temperature)!=null?s:void 0,timestamp_granularities:(o=u.timestampGranularities)!=null?o:void 0};for(const g in m){const b=m[g];b!==void 0&&d.append(g,String(b))}}return{formData:d,warnings:l}}async doGenerate(e){var t,n,r,a,i,s;const o=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{formData:l,warnings:u}=this.getArgs(e),{value:d,responseHeaders:h,rawValue:m}=await bJ({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),formData:l,failedResponseHandler:gl,successfulResponseHandler:ts(YQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=d.language!=null&&d.language in P4?P4[d.language]:void 0;return{text:d.text,segments:(i=(a=d.words)==null?void 0:a.map(b=>({text:b.word,startSecond:b.start,endSecond:b.end})))!=null?i:[],language:g,durationInSeconds:(s=d.duration)!=null?s:void 0,warnings:u,response:{timestamp:o,modelId:this.modelId,headers:h,body:m}}}},YQ=$.object({text:$.string(),language:$.string().nullish(),duration:$.number().nullish(),words:$.array($.object({word:$.string(),start:$.number(),end:$.number()})).nullish()});function XQ({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=t;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{n.push({role:"user",content:i.map((s,o)=>{var l,u,d,h;switch(s.type){case"text":return{type:"input_text",text:s.text};case"image":return{type:"input_image",image_url:s.image instanceof URL?s.image.toString():`data:${(l=s.mimeType)!=null?l:"image/jpeg"};base64,${Du(s.image)}`,detail:(d=(u=s.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail};case"file":{if(s.data instanceof URL)throw new ur({functionality:"File URLs in user messages"});switch(s.mimeType){case"application/pdf":return{type:"input_file",filename:(h=s.filename)!=null?h:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${s.data}`};default:throw new ur({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const s of i)switch(s.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:s.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:s.toolCallId,name:s.toolName,arguments:JSON.stringify(s.args)});break}}break}case"tool":{for(const s of i)n.push({type:"function_call_output",call_id:s.toolCallId,output:JSON.stringify(s.result)});break}default:{const s=a;throw new Error(`Unsupported role: ${s}`)}}return{messages:n,warnings:r}}function F4({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function JQ({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)switch(l.type){case"function":s.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":s.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:s,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:s,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=o;throw new ur({functionality:`Unsupported tool choice type: ${l}`})}}}var QQ=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:s,frequencyPenalty:o,seed:l,prompt:u,providerMetadata:d,responseFormat:h}){var m,g,b;const v=[],x=yee(this.modelId),w=e.type;i!=null&&v.push({type:"unsupported-setting",setting:"topK"}),l!=null&&v.push({type:"unsupported-setting",setting:"seed"}),s!=null&&v.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&v.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&v.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:_,warnings:E}=XQ({prompt:u,systemMessageMode:x.systemMessageMode});v.push(...E);const C=_1({provider:"openai",providerOptions:d,schema:bee}),k=(m=C==null?void 0:C.strictSchemas)!=null?m:!0,I={model:this.modelId,input:_,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,...x.isReasoningModel&&((C==null?void 0:C.reasoningEffort)!=null||(C==null?void 0:C.reasoningSummary)!=null)&&{reasoning:{...(C==null?void 0:C.reasoningEffort)!=null&&{effort:C.reasoningEffort},...(C==null?void 0:C.reasoningSummary)!=null&&{summary:C.reasoningSummary}}},...x.requiredAutoTruncation&&{truncation:"auto"}};switch(x.isReasoningModel&&(I.temperature!=null&&(I.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),I.top_p!=null&&(I.top_p=void 0,v.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),w){case"regular":{const{tools:j,tool_choice:N,toolWarnings:P}=JQ({mode:e,strict:k});return{args:{...I,tools:j,tool_choice:N},warnings:[...v,...P]}}case"object-json":return{args:{...I,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(b=e.name)!=null?b:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:v};case"object-tool":return{args:{...I,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:v};default:{const j=w;throw new Error(`Unsupported type: ${j}`)}}}async doGenerate(e){var t,n,r,a,i,s,o;const{args:l,warnings:u}=this.getArgs(e),{responseHeaders:d,value:h,rawValue:m}=await ha({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:l,failedResponseHandler:gl,successfulResponseHandler:ts($.object({id:$.string(),created_at:$.number(),model:$.string(),output:$.array($.discriminatedUnion("type",[$.object({type:$.literal("message"),role:$.literal("assistant"),content:$.array($.object({type:$.literal("output_text"),text:$.string(),annotations:$.array($.object({type:$.literal("url_citation"),start_index:$.number(),end_index:$.number(),url:$.string(),title:$.string()}))}))}),$.object({type:$.literal("function_call"),call_id:$.string(),name:$.string(),arguments:$.string()}),$.object({type:$.literal("web_search_call")}),$.object({type:$.literal("computer_call")}),$.object({type:$.literal("reasoning"),summary:$.array($.object({type:$.literal("summary_text"),text:$.string()}))})])),incomplete_details:$.object({reason:$.string()}).nullable(),usage:$5})),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=h.output.filter(x=>x.type==="message").flatMap(x=>x.content).filter(x=>x.type==="output_text"),b=h.output.filter(x=>x.type==="function_call").map(x=>({toolCallType:"function",toolCallId:x.call_id,toolName:x.name,args:x.arguments})),v=(n=(t=h.output.find(x=>x.type==="reasoning"))==null?void 0:t.summary)!=null?n:null;return{text:g.map(x=>x.text).join(`
`),sources:g.flatMap(x=>x.annotations.map(w=>{var _,E,C;return{sourceType:"url",id:(C=(E=(_=this.config).generateId)==null?void 0:E.call(_))!=null?C:qi(),url:w.url,title:w.title}})),finishReason:F4({finishReason:(r=h.incomplete_details)==null?void 0:r.reason,hasToolCalls:b.length>0}),toolCalls:b.length>0?b:void 0,reasoning:v?v.map(x=>({type:"text",text:x.text})):void 0,usage:{promptTokens:h.usage.input_tokens,completionTokens:h.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:d,body:m},request:{body:JSON.stringify(l)},response:{id:h.id,timestamp:new Date(h.created_at*1e3),modelId:h.model},providerMetadata:{openai:{responseId:h.id,cachedPromptTokens:(i=(a=h.usage.input_tokens_details)==null?void 0:a.cached_tokens)!=null?i:null,reasoningTokens:(o=(s=h.usage.output_tokens_details)==null?void 0:s.reasoning_tokens)!=null?o:null}},warnings:u}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await ha({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:gl,successfulResponseHandler:Lp(lee),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let s="unknown",o=NaN,l=NaN,u=null,d=null,h=null;const m={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(b,v){var x,w,_,E,C,k,I,j;if(!b.success){s="error",v.enqueue({type:"error",error:b.error});return}const N=b.value;if(pee(N))N.item.type==="function_call"&&(m[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(hee(N)){const P=m[N.output_index];P!=null&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:P.toolCallId,toolName:P.toolName,argsTextDelta:N.delta})}else fee(N)?(h=N.response.id,v.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):cee(N)?v.enqueue({type:"text-delta",textDelta:N.delta}):gee(N)?v.enqueue({type:"reasoning",textDelta:N.delta}):uee(N)&&N.item.type==="function_call"?(m[N.output_index]=void 0,g=!0,v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):dee(N)?(s=F4({finishReason:(x=N.response.incomplete_details)==null?void 0:x.reason,hasToolCalls:g}),o=N.response.usage.input_tokens,l=N.response.usage.output_tokens,u=(_=(w=N.response.usage.input_tokens_details)==null?void 0:w.cached_tokens)!=null?_:u,d=(C=(E=N.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:d):mee(N)&&v.enqueue({type:"source",source:{sourceType:"url",id:(j=(I=(k=i.config).generateId)==null?void 0:I.call(k))!=null?j:qi(),url:N.annotation.url,title:N.annotation.title}})},flush(b){b.enqueue({type:"finish",finishReason:s,usage:{promptTokens:o,completionTokens:l},...(u!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:u,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},$5=$.object({input_tokens:$.number(),input_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),output_tokens:$.number(),output_tokens_details:$.object({reasoning_tokens:$.number().nullish()}).nullish()}),eee=$.object({type:$.literal("response.output_text.delta"),delta:$.string()}),tee=$.object({type:$.enum(["response.completed","response.incomplete"]),response:$.object({incomplete_details:$.object({reason:$.string()}).nullish(),usage:$5})}),nee=$.object({type:$.literal("response.created"),response:$.object({id:$.string(),created_at:$.number(),model:$.string()})}),ree=$.object({type:$.literal("response.output_item.done"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string(),status:$.literal("completed")})])}),aee=$.object({type:$.literal("response.function_call_arguments.delta"),item_id:$.string(),output_index:$.number(),delta:$.string()}),iee=$.object({type:$.literal("response.output_item.added"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string()})])}),see=$.object({type:$.literal("response.output_text.annotation.added"),annotation:$.object({type:$.literal("url_citation"),url:$.string(),title:$.string()})}),oee=$.object({type:$.literal("response.reasoning_summary_text.delta"),item_id:$.string(),output_index:$.number(),summary_index:$.number(),delta:$.string()}),lee=$.union([eee,tee,nee,ree,aee,iee,see,oee,$.object({type:$.string()}).passthrough()]);function cee(e){return e.type==="response.output_text.delta"}function uee(e){return e.type==="response.output_item.done"}function dee(e){return e.type==="response.completed"||e.type==="response.incomplete"}function fee(e){return e.type==="response.created"}function hee(e){return e.type==="response.function_call_arguments.delta"}function pee(e){return e.type==="response.output_item.added"}function mee(e){return e.type==="response.output_text.annotation.added"}function gee(e){return e.type==="response.reasoning_summary_text.delta"}function yee(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var bee=$.object({metadata:$.any().nullish(),parallelToolCalls:$.boolean().nullish(),previousResponseId:$.string().nullish(),store:$.boolean().nullish(),user:$.string().nullish(),reasoningEffort:$.string().nullish(),strictSchemas:$.boolean().nullish(),instructions:$.string().nullish(),reasoningSummary:$.string().nullish()}),vee=$.object({});function wee({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:vee}}var xee={webSearchPreview:wee},_ee=$.object({instructions:$.string().nullish(),speed:$.number().min(.25).max(4).default(1).nullish()}),See=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:r,instructions:a,providerOptions:i}){const s=[],o=_1({provider:"openai",providerOptions:i,schema:_ee}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:r,instructions:a};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?l.response_format=n:s.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),o){const u={};for(const d in u){const h=u[d];h!==void 0&&(l[d]=h)}}return{requestBody:l,warnings:s}}async doGenerate(e){var t,n,r;const a=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{requestBody:i,warnings:s}=this.getArgs(e),{value:o,responseHeaders:l,rawValue:u}=await ha({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:i,failedResponseHandler:gl,successfulResponseHandler:vJ(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:o,warnings:s,request:{body:JSON.stringify(i)},response:{timestamp:a,modelId:this.modelId,headers:l,body:u}}}};function z5(e={}){var t,n,r;const a=(t=E1(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",s=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${k5({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(w,_={})=>new jQ(w,_,{provider:`${s}.chat`,url:({path:E})=>`${a}${E}`,headers:o,compatibility:i,fetch:e.fetch}),u=(w,_={})=>new BQ(w,_,{provider:`${s}.completion`,url:({path:E})=>`${a}${E}`,headers:o,compatibility:i,fetch:e.fetch}),d=(w,_={})=>new UQ(w,_,{provider:`${s}.embedding`,url:({path:E})=>`${a}${E}`,headers:o,fetch:e.fetch}),h=(w,_={})=>new GQ(w,_,{provider:`${s}.image`,url:({path:E})=>`${a}${E}`,headers:o,fetch:e.fetch}),m=w=>new ZQ(w,{provider:`${s}.transcription`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),g=w=>new See(w,{provider:`${s}.speech`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),b=(w,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return w==="gpt-3.5-turbo-instruct"?u(w,_):l(w,_)},v=w=>new QQ(w,{provider:`${s}.responses`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),x=function(w,_){return b(w,_)};return x.languageModel=b,x.chat=l,x.completion=u,x.responses=v,x.embedding=d,x.textEmbedding=d,x.textEmbeddingModel=d,x.image=h,x.imageModel=h,x.transcription=m,x.transcriptionModel=m,x.speech=g,x.speechModel=g,x.tools=xee,x}z5({compatibility:"strict"});function Ls(e){if(Eee(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:s,anyOf:o,oneOf:l,format:u,const:d,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),u&&(g.format=u),d!==void 0&&(g.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(b=>b!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),a!=null&&(g.properties=Object.entries(a).reduce((b,[v,x])=>(b[v]=Ls(x),b),{})),i&&(g.items=Array.isArray(i)?i.map(Ls):Ls(i)),s&&(g.allOf=s.map(Ls)),o)if(o.some(b=>typeof b=="object"&&(b==null?void 0:b.type)==="null")){const b=o.filter(v=>!(typeof v=="object"&&(v==null?void 0:v.type)==="null"));if(b.length===1){const v=Ls(b[0]);typeof v=="object"&&(g.nullable=!0,Object.assign(g,v))}else g.anyOf=b.map(Ls),g.nullable=!0}else g.anyOf=o.map(Ls);return l&&(g.oneOf=l.map(Ls)),h!==void 0&&(g.minLength=h),g}function Eee(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function Cee(e){var t,n;const r=[],a=[];let i=!0;for(const{role:s,content:o}of e)switch(s){case"system":{if(!i)throw new ur({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{i=!1;const l=[];for(const u of o)switch(u.type){case"text":{l.push({text:u.text});break}case"image":{l.push(u.image instanceof URL?{fileData:{mimeType:(t=u.mimeType)!=null?t:"image/jpeg",fileUri:u.image.toString()}}:{inlineData:{mimeType:(n=u.mimeType)!=null?n:"image/jpeg",data:Du(u.image)}});break}case"file":{l.push(u.data instanceof URL?{fileData:{mimeType:u.mimeType,fileUri:u.data.toString()}}:{inlineData:{mimeType:u.mimeType,data:u.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new ur({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new ur({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function L4(e){return e.includes("/")?e:`models/${e}`}var Tee=$.object({error:$.object({code:$.number().nullable(),message:$.string(),status:$.string()})}),MT=Tf({errorSchema:Tee,errorToMessage:e=>e.error.message});function kee(e,t,n,r){var a,i;const s=(a=e.tools)!=null&&a.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!u||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(s==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const d=[];for(const g of s)g.type==="provider-defined"?o.push({type:"unsupported-tool",tool:g}):d.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:Ls(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:o};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:o};default:{const g=m;throw new ur({functionality:`Unsupported tool choice type: ${g}`})}}}function B4({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var Aee=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,g;const b=e.type,v=[],x=_1({provider:"google",providerOptions:h,schema:jee}),w={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:s,presencePenalty:o,stopSequences:l,seed:d,responseMimeType:(u==null?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(u==null?void 0:u.type)==="json"&&u.schema!=null&&this.supportsStructuredOutputs?Ls(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:x==null?void 0:x.responseModalities,thinkingConfig:x==null?void 0:x.thinkingConfig},{contents:_,systemInstruction:E}=Cee(t);switch(b){case"regular":{const{tools:C,toolConfig:k,toolWarnings:I}=kee(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:w,contents:_,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...v,...I]}}case"object-json":return{args:{generationConfig:{...w,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?Ls(e.schema):void 0},contents:_,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};case"object-tool":return{args:{generationConfig:w,contents:_,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:Ls(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};default:{const C=b;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=await this.getArgs(e),l=JSON.stringify(s),u=fa(await AT(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:m}=await ha({url:`${this.config.baseURL}/${L4(this.modelId)}:generateContent`,headers:u,body:s,failedResponseHandler:MT,successfulResponseHandler:ts(Ree),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...b}=s,v=h.candidates[0],x=v.content==null||typeof v.content!="object"||!("parts"in v.content)?[]:v.content.parts,w=$4({parts:x,generateId:this.config.generateId}),_=h.usageMetadata;return{text:z4(x),files:(t=U4(x))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:w,finishReason:B4({finishReason:v.finishReason,hasToolCalls:w!=null&&w.length>0}),usage:{promptTokens:(n=_==null?void 0:_.promptTokenCount)!=null?n:NaN,completionTokens:(r=_==null?void 0:_.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:b},rawResponse:{headers:d,body:m},warnings:o,providerMetadata:{google:{groundingMetadata:(a=v.groundingMetadata)!=null?a:null,safetyRatings:(i=v.safetyRatings)!=null?i:null}},sources:V4({groundingMetadata:v.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=fa(await AT(this.config.headers),e.headers),{responseHeaders:i,value:s}=await ha({url:`${this.config.baseURL}/${L4(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:MT,successfulResponseHandler:Lp(Iee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let u="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:s.pipeThrough(new TransformStream({transform(b,v){var x,w,_,E,C,k;if(!b.success){v.enqueue({type:"error",error:b.error});return}const I=b.value,j=I.usageMetadata;j!=null&&(d={promptTokens:(x=j.promptTokenCount)!=null?x:NaN,completionTokens:(w=j.candidatesTokenCount)!=null?w:NaN});const N=(_=I.candidates)==null?void 0:_[0];if(N==null)return;const P=N.content;if(P!=null){const L=z4(P.parts);L!=null&&v.enqueue({type:"text-delta",textDelta:L});const H=U4(P.parts);if(H!=null)for(const K of H)v.enqueue({type:"file",mimeType:K.inlineData.mimeType,data:K.inlineData.data});const M=$4({parts:P.parts,generateId:m});if(M!=null)for(const K of M)v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,argsTextDelta:K.args}),v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,args:K.args}),g=!0}if(N.finishReason!=null){u=B4({finishReason:N.finishReason,hasToolCalls:g});const L=(E=V4({groundingMetadata:N.groundingMetadata,generateId:m}))!=null?E:[];for(const H of L)v.enqueue({type:"source",source:H});h={google:{groundingMetadata:(C=N.groundingMetadata)!=null?C:null,safetyRatings:(k=N.safetyRatings)!=null?k:null}}}},flush(b){b.enqueue({type:"finish",finishReason:u,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function $4({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function z4(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function U4(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function V4({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var U5=$.object({role:$.string(),parts:$.array($.union([$.object({text:$.string()}),$.object({functionCall:$.object({name:$.string(),args:$.unknown()})}),$.object({inlineData:$.object({mimeType:$.string(),data:$.string()})})])).nullish()}),Nee=$.object({web:$.object({uri:$.string(),title:$.string()}).nullish(),retrievedContext:$.object({uri:$.string(),title:$.string()}).nullish()}),V5=$.object({webSearchQueries:$.array($.string()).nullish(),retrievalQueries:$.array($.string()).nullish(),searchEntryPoint:$.object({renderedContent:$.string()}).nullish(),groundingChunks:$.array(Nee).nullish(),groundingSupports:$.array($.object({segment:$.object({startIndex:$.number().nullish(),endIndex:$.number().nullish(),text:$.string().nullish()}),segment_text:$.string().nullish(),groundingChunkIndices:$.array($.number()).nullish(),supportChunkIndices:$.array($.number()).nullish(),confidenceScores:$.array($.number()).nullish(),confidenceScore:$.array($.number()).nullish()})).nullish(),retrievalMetadata:$.union([$.object({webDynamicRetrievalScore:$.number()}),$.object({})]).nullish()}),H5=$.object({category:$.string().nullish(),probability:$.string().nullish(),probabilityScore:$.number().nullish(),severity:$.string().nullish(),severityScore:$.number().nullish(),blocked:$.boolean().nullish()}),Ree=$.object({candidates:$.array($.object({content:U5.nullish().or($.object({}).strict()),finishReason:$.string().nullish(),safetyRatings:$.array(H5).nullish(),groundingMetadata:V5.nullish()})),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),Iee=$.object({candidates:$.array($.object({content:U5.nullish(),finishReason:$.string().nullish(),safetyRatings:$.array(H5).nullish(),groundingMetadata:V5.nullish()})).nullish(),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),jee=$.object({responseModalities:$.array($.enum(["TEXT","IMAGE"])).nullish(),thinkingConfig:$.object({thinkingBudget:$.number().nullish()}).nullish()}),Dee=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new w1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=fa(await AT(this.config.headers),t),{responseHeaders:a,value:i}=await ha({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(s=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:s}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:MT,successfulResponseHandler:ts(Mee),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(s=>s.values),usage:void 0,rawResponse:{headers:a}}}},Mee=$.object({embeddings:$.array($.object({values:$.array($.number())}))});function Oee(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function q5(e={}){var t;const n=(t=E1(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":k5({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(o,l={})=>{var u;return new Aee(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(u=e.generateId)!=null?u:qi,isSupportedUrl:Oee,fetch:e.fetch})},i=(o,l={})=>new Dee(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(o,l)};return s.languageModel=a,s.chat=a,s.generativeAI=a,s.embedding=i,s.textEmbedding=i,s.textEmbeddingModel=i,s}q5();var G5="vercel.ai.error",Pee=Symbol.for(G5),W5,Fee=class K5 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[W5]=!0,this.name=t,this.cause=r}static isInstance(t){return K5.hasMarker(t,G5)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};W5=Pee;var Ga=Fee,Z5="AI_APICallError",Y5=`vercel.ai.error.${Z5}`,Lee=Symbol.for(Y5),X5,nc=class extends Ga{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:s,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:Z5,message:e,cause:s}),this[X5]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=o,this.data=l}static isInstance(e){return Ga.hasMarker(e,Y5)}};X5=Lee;var J5="AI_EmptyResponseBodyError",Q5=`vercel.ai.error.${J5}`,Bee=Symbol.for(Q5),eF,$ee=class extends Ga{constructor({message:e="Empty response body"}={}){super({name:J5,message:e}),this[eF]=!0}static isInstance(e){return Ga.hasMarker(e,Q5)}};eF=Bee;function tF(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var nF="AI_InvalidArgumentError",rF=`vercel.ai.error.${nF}`,zee=Symbol.for(rF),aF,Uee=class extends Ga{constructor({message:t,cause:n,argument:r}){super({name:nF,message:t,cause:n}),this[aF]=!0,this.argument=r}static isInstance(t){return Ga.hasMarker(t,rF)}};aF=zee;var iF="AI_InvalidPromptError",sF=`vercel.ai.error.${iF}`,Vee=Symbol.for(sF),oF,Hee=class extends Ga{constructor({prompt:e,message:t,cause:n}){super({name:iF,message:`Invalid prompt: ${t}`,cause:n}),this[oF]=!0,this.prompt=e}static isInstance(e){return Ga.hasMarker(e,sF)}};oF=Vee;var lF="AI_InvalidResponseDataError",cF=`vercel.ai.error.${lF}`,qee=Symbol.for(cF),uF,X2=class extends Ga{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:lF,message:t}),this[uF]=!0,this.data=e}static isInstance(e){return Ga.hasMarker(e,cF)}};uF=qee;var dF="AI_JSONParseError",fF=`vercel.ai.error.${dF}`,Gee=Symbol.for(fF),hF,dx=class extends Ga{constructor({text:e,cause:t}){super({name:dF,message:`JSON parsing failed: Text: ${e}.
Error message: ${tF(t)}`,cause:t}),this[hF]=!0,this.text=e}static isInstance(e){return Ga.hasMarker(e,fF)}};hF=Gee;var pF="AI_LoadAPIKeyError",mF=`vercel.ai.error.${pF}`,Wee=Symbol.for(mF),gF,Nv=class extends Ga{constructor({message:e}){super({name:pF,message:e}),this[gF]=!0}static isInstance(e){return Ga.hasMarker(e,mF)}};gF=Wee;var yF="AI_TypeValidationError",bF=`vercel.ai.error.${yF}`,Kee=Symbol.for(bF),vF,Zee=class OT extends Ga{constructor({value:t,cause:n}){super({name:yF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${tF(n)}`,cause:n}),this[vF]=!0,this.value=t}static isInstance(t){return Ga.hasMarker(t,bF)}static wrap({value:t,cause:n}){return OT.isInstance(n)&&n.value===t?n:new OT({value:t,cause:n})}};vF=Kee;var fx=Zee,wF="AI_UnsupportedFunctionalityError",xF=`vercel.ai.error.${wF}`,Yee=Symbol.for(xF),_F,$s=class extends Ga{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:wF,message:t}),this[_F]=!0,this.functionality=e}static isInstance(e){return Ga.hasMarker(e,xF)}};_F=Yee;let Xee=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},H4=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function J2(e){}function Jee(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=J2,onError:n=J2,onRetry:r=J2,onComment:a}=e;let i="",s=!0,o,l="",u="";function d(v){const x=s?v.replace(/^\xEF\xBB\xBF/,""):v,[w,_]=Qee(`${i}${x}`);for(const E of w)h(E);i=_,s=!1}function h(v){if(v===""){g();return}if(v.startsWith(":")){a&&a(v.slice(v.startsWith(": ")?2:1));return}const x=v.indexOf(":");if(x!==-1){const w=v.slice(0,x),_=v[x+1]===" "?2:1,E=v.slice(x+_);m(w,E,v);return}m(v,"",v)}function m(v,x,w){switch(v){case"event":u=x;break;case"data":l=`${l}${x}
`;break;case"id":o=x.includes("\0")?void 0:x;break;case"retry":/^\d+$/.test(x)?r(parseInt(x,10)):n(new H4(`Invalid \`retry\` value: "${x}"`,{type:"invalid-retry",value:x,line:w}));break;default:n(new H4(`Unknown field "${v.length>20?`${v.slice(0,20)}…`:v}"`,{type:"unknown-field",field:v,value:x,line:w}));break}}function g(){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u=""}function b(v={}){i&&v.consume&&h(i),s=!0,o=void 0,l="",u="",i=""}return{feed:d,reset:b}}function Qee(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(a!==-1&&i!==-1?s=Math.min(a,i):a!==-1?s=a:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const o=e.slice(r,s);t.push(o),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class ete extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=Jee({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var tte={};function hx(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function T1(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var nte=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Xee(n,t);if(e==null)return a;if(n.includes(r))throw new Uee({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Rv=nte();function rte(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Q2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function ate({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Nv({message:`${r} API key must be a string.`});if(typeof da>"u")throw new Nv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=tte[t],e==null)throw new Nv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Nv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var PT=Symbol.for("vercel.ai.validator");function ite(e){return{[PT]:!0,validate:e}}function ste(e){return typeof e=="object"&&e!==null&&PT in e&&e[PT]===!0&&"validate"in e}function ote(e){return ste(e)?e:lte(e)}function lte(e){return ite(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function cte({value:e,schema:t}){const n=SF({value:e,schema:t});if(!n.success)throw fx.wrap({value:e,cause:n.error});return n.value}function SF({value:e,schema:t}){const n=ote(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:fx.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:fx.wrap({value:e,cause:r})}}}function ute({text:e,schema:t}){try{const n=Op.parse(e);return t==null?n:cte({value:n,schema:t})}catch(n){throw dx.isInstance(n)||fx.isInstance(n)?n:new dx({text:e,cause:n})}}function EF({text:e,schema:t}){try{const n=Op.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=SF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:dx.isInstance(n)?n:new dx({text:e,cause:n})}}}function eE(e){try{return Op.parse(e),!0}catch{return!1}}var dte=()=>globalThis.fetch,px=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>fte({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),fte=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=dte()})=>{try{const o=await s(e,{method:"POST",headers:rte(t),body:n.content,signal:i}),l=T1(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw Q2(d)||nc.isInstance(d)?d:new nc({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Q2(u)||nc.isInstance(u))?u:new nc({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(Q2(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new nc({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},hte=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=T1(r);if(s.trim()==="")return{responseHeaders:o,value:new nc({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=ute({text:s,schema:e});return{responseHeaders:o,value:new nc({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new nc({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},CF=e=>async({response:t})=>{const n=T1(t);if(t.body==null)throw new $ee({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new ete).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(EF({text:r,schema:e}))}}))}},TF=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=EF({text:a,schema:e}),s=T1(t);if(!i.success)throw new nc({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:pte}=globalThis;function mte(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return pte(t)}function gte(e){return e==null?void 0:e.replace(/\/$/,"")}var yte=Object.defineProperty,bte=Object.defineProperties,vte=Object.getOwnPropertyDescriptors,mx=Object.getOwnPropertySymbols,kF=Object.prototype.hasOwnProperty,AF=Object.prototype.propertyIsEnumerable,q4=(e,t,n)=>t in e?yte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gs=(e,t)=>{for(var n in t||(t={}))kF.call(t,n)&&q4(e,n,t[n]);if(mx)for(var n of mx(t))AF.call(t,n)&&q4(e,n,t[n]);return e},Dw=(e,t)=>bte(e,vte(t)),gx=(e,t)=>{var n={};for(var r in e)kF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mx)for(var r of mx(e))t.indexOf(r)<0&&AF.call(e,r)&&(n[r]=e[r]);return n};function Zo(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function wte(e){var t,n,r;const a=[];for(const{role:i,content:s,providerMetadata:o}of e)switch(i){case"system":{a.push({role:"system",content:s,cache_control:Zo(o)});break}case"user":{if(s.length===1&&((t=s[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:s[0].text,cache_control:(n=Zo(o))!=null?n:Zo(s[0].providerMetadata)});break}const l=Zo(o),u=s.map(d=>{var h,m,g,b;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=Zo(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(m=d.mimeType)!=null?m:"image/jpeg"};base64,${mte(d.image)}`},cache_control:(g=Zo(d.providerMetadata))!=null?g:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(b=Zo(d.providerMetadata))!=null?b:l};default:{const v=d;throw new Error(`Unsupported content part type: ${v}`)}}});a.push({role:"user",content:u});break}case"assistant":{let l="";const u=[];for(const d of s)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{u.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:u.length>0?u:void 0,cache_control:Zo(o)});break}case"tool":{for(const l of s)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Zo(o))!=null?r:Zo(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function G4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function yx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var wA=$.object({error:$.object({message:$.string(),type:$.string(),param:$.any().nullable(),code:$.string().nullable()})}),bx=hte({errorSchema:wA,errorToMessage:e=>e.error.message});function xte(e){return"parameters"in e}var _te=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:s,seed:o,stopSequences:l,responseFormat:u,topK:d,providerMetadata:h}){var m;const g=e.type,b=(m=h==null?void 0:h.openrouter)!=null?m:{},v=gs(gs(gs({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:s,seed:o,stop:l,response_format:u,top_k:d,messages:wte(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),b);switch(g){case"regular":return gs(gs({},v),Cte(e));case"object-json":return Dw(gs({},v),{response_format:{type:"json_object"}});case"object-tool":return Dw(gs({},v),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const x=g;throw new $s({functionality:`${x} mode`})}}}async doGenerate(e){var t,n,r,a,i,s,o;const l=this.getArgs(e),{responseHeaders:u,value:d}=await px({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hx(this.config.headers(),e.headers),body:l,failedResponseHandler:bx,successfulResponseHandler:TF(Ste),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:m}=h,g=gx(h,["messages"]),b=d.choices[0];if(!b)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=b.message.content)!=null?t:void 0,reasoning:(n=b.message.reasoning)!=null?n:void 0,toolCalls:(r=b.message.tool_calls)==null?void 0:r.map(v=>{var x;return{toolCallType:"function",toolCallId:(x=v.id)!=null?x:Rv(),toolName:v.function.name,args:v.function.arguments}}),finishReason:yx(b.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(o=(s=d.usage)==null?void 0:s.completion_tokens)!=null?o:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:u},warnings:[],logprobs:G4(b.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await px({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hx(this.config.headers(),e.headers),body:Dw(gs({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:bx,successfulResponseHandler:CF(Ete),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,s=gx(a,["messages"]),o=[];let l="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,b,v,x,w,_,E,C,k,I,j,N;if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const P=h.value;if("error"in P){l="error",m.enqueue({type:"error",error:P.error});return}P.id&&m.enqueue({type:"response-metadata",id:P.id}),P.model&&m.enqueue({type:"response-metadata",modelId:P.model}),P.usage!=null&&(u={promptTokens:P.usage.prompt_tokens,completionTokens:P.usage.completion_tokens});const L=P.choices[0];if((L==null?void 0:L.finish_reason)!=null&&(l=yx(L.finish_reason)),(L==null?void 0:L.delta)==null)return;const H=L.delta;H.content!=null&&m.enqueue({type:"text-delta",textDelta:H.content}),H.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:H.reasoning});const M=G4(L==null?void 0:L.logprobs);if(M!=null&&M.length&&(d===void 0&&(d=[]),d.push(...M)),H.tool_calls!=null)for(const K of H.tool_calls){const q=K.index;if(o[q]==null){if(K.type!=="function")throw new X2({data:K,message:"Expected 'function' type."});if(K.id==null)throw new X2({data:K,message:"Expected 'id' to be a string."});if(((g=K.function)==null?void 0:g.name)==null)throw new X2({data:K,message:"Expected 'function.name' to be a string."});o[q]={id:K.id,type:"function",function:{name:K.function.name,arguments:(b=K.function.arguments)!=null?b:""},sent:!1};const ae=o[q];if(ae==null)throw new Error("Tool call is missing");((v=ae.function)==null?void 0:v.name)!=null&&((x=ae.function)==null?void 0:x.arguments)!=null&&eE(ae.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(w=ae.id)!=null?w:Rv(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const ue=o[q];if(ue==null)throw new Error("Tool call is missing");((_=K.function)==null?void 0:_.arguments)!=null&&(ue.function.arguments+=(C=(E=K.function)==null?void 0:E.arguments)!=null?C:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ue.id,toolName:ue.function.name,argsTextDelta:(k=K.function.arguments)!=null?k:""}),((I=ue.function)==null?void 0:I.name)!=null&&((j=ue.function)==null?void 0:j.arguments)!=null&&eE(ue.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=ue.id)!=null?N:Rv(),toolName:ue.function.name,args:ue.function.arguments}),ue.sent=!0)}},flush(h){var m;if(l==="tool-calls")for(const g of o)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:Rv(),toolName:g.function.name,args:eE(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},NF=$.object({id:$.string().optional(),model:$.string().optional(),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number(),total_tokens:$.number()}).nullish()}),Ste=NF.extend({choices:$.array($.object({message:$.object({role:$.literal("assistant"),content:$.string().nullable().optional(),reasoning:$.string().nullable().optional(),tool_calls:$.array($.object({id:$.string().optional().nullable(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).optional()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullable().optional(),finish_reason:$.string().optional().nullable()}))}),Ete=$.union([NF.extend({choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).optional(),content:$.string().nullish(),reasoning:$.string().nullish().optional(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()}))}),wA]);function Cte(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(s=>xte(s)?{type:"function",function:{name:s.name,description:s.description,parameters:s.parameters}}:{type:"function",function:{name:s.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const s=i;throw new Error(`Unsupported tool choice type: ${s}`)}}}function Tte({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Hee({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new $s({functionality:"images"});case"file":throw new $s({functionality:"file attachments"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new $s({functionality:"tool-call messages"});case"reasoning":throw new $s({functionality:"reasoning messages"});case"redacted-reasoning":throw new $s({functionality:"redacted reasoning messages"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new $s({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a}}function W4(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,s])=>({token:i,logprob:s})):[]}})}var kte=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:s,presencePenalty:o,seed:l,responseFormat:u,topK:d,stopSequences:h,providerMetadata:m}){var g,b;const v=e.type,x=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:w}=Tte({prompt:n,inputFormat:t}),_=gs(gs(gs({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:o,seed:l,stop:h,response_format:u,top_k:d,prompt:w,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),x);switch(v){case"regular":{if((b=e.tools)!=null&&b.length)throw new $s({functionality:"tools"});if(e.toolChoice)throw new $s({functionality:"toolChoice"});return _}case"object-json":throw new $s({functionality:"object-json mode"});case"object-tool":throw new $s({functionality:"object-tool mode"});default:{const E=v;throw new $s({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const s=this.getArgs(e),{responseHeaders:o,value:l}=await px({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hx(this.config.headers(),e.headers),body:s,failedResponseHandler:bx,successfulResponseHandler:TF(K4),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=s,{prompt:d}=u,h=gx(u,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const m=l.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:yx(m.finish_reason),logprobs:W4(m.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await px({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hx(this.config.headers(),e.headers),body:Dw(gs({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:bx,successfulResponseHandler:CF(K4),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,s=gx(a,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){o="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;if("error"in m){o="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(l={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(o=yx(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const b=W4(g==null?void 0:g.logprobs);b!=null&&b.length&&(u===void 0&&(u=[]),u.push(...b))},flush(d){d.enqueue({type:"finish",finishReason:o,logprobs:u,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},K4=$.union([$.object({id:$.string().optional(),model:$.string().optional(),choices:$.array($.object({text:$.string(),reasoning:$.string().nullish().optional(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullable().optional()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).optional().nullable()}),wA]);function RF(e={}){var t,n,r;const a=(n=gte((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",s=()=>gs({Authorization:`Bearer ${ate({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(h,m={})=>new _te(h,m,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,m={})=>new kte(h,m,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,m):o(h,m)},d=function(h,m){return u(h,m)};return d.languageModel=u,d.chat=o,d.completion=l,d}RF({compatibility:"strict"});var Fd={},tE={},Z4;function Y4(){return Z4||(Z4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(tE)),tE}var X4;function Ate(){return X4||(X4=1,function(e){var t=Fd&&Fd.__createBinding||(Object.create?function(u,d,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,m,g)}:function(u,d,h,m){m===void 0&&(m=h),u[m]=d[h]}),n=Fd&&Fd.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,u,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=Y4();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(Y4(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function s(u,d=r.Allow.ALL){if(typeof u!="string")throw new TypeError(`expecting str, got ${typeof u}`);if(!u.trim())throw new Error(`${u} is empty`);return o(u.trim(),d)}e.parseJSON=s;const o=(u,d)=>{const h=u.length;let m=0;const g=k=>{throw new a(`${k} at position ${m}`)},b=k=>{throw new i(`${k} at position ${m}`)},v=()=>(C(),m>=h&&g("Unexpected end of input"),u[m]==='"'?x():u[m]==="{"?w():u[m]==="["?_():u.substring(m,m+4)==="null"||r.Allow.NULL&d&&h-m<4&&"null".startsWith(u.substring(m))?(m+=4,null):u.substring(m,m+4)==="true"||r.Allow.BOOL&d&&h-m<4&&"true".startsWith(u.substring(m))?(m+=4,!0):u.substring(m,m+5)==="false"||r.Allow.BOOL&d&&h-m<5&&"false".startsWith(u.substring(m))?(m+=5,!1):u.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&d&&h-m<8&&"Infinity".startsWith(u.substring(m))?(m+=8,1/0):u.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-m&&h-m<9&&"-Infinity".startsWith(u.substring(m))?(m+=9,-1/0):u.substring(m,m+3)==="NaN"||r.Allow.NAN&d&&h-m<3&&"NaN".startsWith(u.substring(m))?(m+=3,NaN):E()),x=()=>{const k=m;let I=!1;for(m++;m<h&&(u[m]!=='"'||I&&u[m-1]==="\\");)I=u[m]==="\\"?!I:!1,m++;if(u.charAt(m)=='"')try{return JSON.parse(u.substring(k,++m-Number(I)))}catch(j){b(String(j))}else if(r.Allow.STR&d)try{return JSON.parse(u.substring(k,m-Number(I))+'"')}catch{return JSON.parse(u.substring(k,u.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},w=()=>{m++,C();const k={};try{for(;u[m]!=="}";){if(C(),m>=h&&r.Allow.OBJ&d)return k;const I=x();C(),m++;try{const j=v();k[I]=j}catch(j){if(r.Allow.OBJ&d)return k;throw j}C(),u[m]===","&&m++}}catch{if(r.Allow.OBJ&d)return k;g("Expected '}' at end of object")}return m++,k},_=()=>{m++;const k=[];try{for(;u[m]!=="]";)k.push(v()),C(),u[m]===","&&m++}catch{if(r.Allow.ARR&d)return k;g("Expected ']' at end of array")}return m++,k},E=()=>{if(m===0){u==="-"&&b("Not sure what '-' is");try{return JSON.parse(u)}catch(I){if(r.Allow.NUM&d)try{return JSON.parse(u.substring(0,u.lastIndexOf("e")))}catch{}b(String(I))}}const k=m;for(u[m]==="-"&&m++;u[m]&&",]}".indexOf(u[m])===-1;)m++;m==h&&!(r.Allow.NUM&d)&&g("Unterminated number literal");try{return JSON.parse(u.substring(k,m))}catch{u.substring(k,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(u.substring(k,u.lastIndexOf("e")))}catch(j){b(String(j))}}},C=()=>{for(;m<h&&` 
\r	`.includes(u[m]);)m++};return v()},l=s;e.parse=l}(Fd)),Fd}var Nte=Ate();function nE(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new ur({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(Du(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const s of n)switch(s.type){case"text":{a.push(s.text);break}case"tool-call":{i.push({function:{arguments:s.args,name:s.toolName},id:s.toolCallId,type:"function"});break}default:{const o=s;throw new Error(`Unsupported part: ${o}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var Rte=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=Nte.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const s=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(s==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:qi(),type:"function"});const o=this._toolCalls[a];o.function.arguments=s,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function Ite({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var jte=$.object({error:$.object({code:$.string().nullable(),message:$.string(),param:$.any().nullable(),type:$.string()})}),FT=Tf({errorSchema:jte,errorToMessage:e=>e.error.message});function Dte({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):i.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const s=a.type;switch(s){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=s;throw new ur({functionality:`Unsupported tool choice type: ${o}`})}}}function Mte(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var Ote=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},Pte=e=>async({response:t})=>{const n=Pp(t);if(t.body===null)throw new e5({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Ote).pipeThrough(new TransformStream({transform(r,a){a.enqueue(ff({schema:e,text:r}))}}))}},Fte=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:s,stopSequences:o,temperature:l,topK:u,topP:d}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:Mte({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:s,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:u,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:b,toolWarnings:v}=Dte({mode:n});return{args:{...g,messages:nE(a),tools:b},type:h,warnings:[...m,...v]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:nE(a)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:nE(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const b=h;throw new Error(`Unsupported type: ${b}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:s,value:o}=await ha({abortSignal:e.abortSignal,body:i,failedResponseHandler:FT,fetch:this.config.fetch,headers:fa(this.config.headers(),e.headers),successfulResponseHandler:ts(Lte),url:`${this.config.baseURL}/chat`}),{messages:l,...u}=i,d=(t=o.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:qi(),toolCallType:"function",toolName:h.function.name}});return{finishReason:Ite({finishReason:o.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},request:{body:JSON.stringify(i)},text:(n=o.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),b=new ReadableStream({start(v){if(v.enqueue({type:"response-metadata",...g.response}),g.text&&v.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const x of g.toolCalls)v.enqueue({argsTextDelta:x.args,toolCallId:x.toolCallId,toolCallType:"function",toolName:x.toolName,type:"tool-call-delta"}),v.enqueue({type:"tool-call",...x});v.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),v.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:b,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await ha({abortSignal:e.abortSignal,body:t,failedResponseHandler:FT,fetch:this.config.fetch,headers:fa(this.config.headers(),e.headers),successfulResponseHandler:Pte(Bte),url:`${this.config.baseURL}/chat`}),{messages:s,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,u=new Rte({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:d,type:"finish",usage:h})},async transform(g,b){if(!g.success){b.enqueue({error:g.error,type:"error"});return}const v=g.value;if(v.done){d=u.finish({controller:b}),h={completionTokens:v.eval_count,promptTokens:v.prompt_eval_count||0};return}m&&u.parse({controller:b,delta:v.message.content})||v.message.content!==null&&b.enqueue({textDelta:v.message.content,type:"text-delta"})}})),warnings:r}}},Lte=$.object({created_at:$.string(),done:$.literal(!0),done_reason:$.string().optional().nullable(),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),message:$.object({content:$.string(),role:$.string(),tool_calls:$.array($.object({function:$.object({arguments:$.record($.any()),name:$.string()}),id:$.string().optional()})).optional().nullable()}),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()}),Bte=$.discriminatedUnion("done",[$.object({created_at:$.string(),done:$.literal(!1),message:$.object({content:$.string(),role:$.string()}),model:$.string()}),$.object({created_at:$.string(),done:$.literal(!0),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()})]),$te=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new w1({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await ha({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:FT,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:ts(zte),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},zte=$.object({embeddings:$.array($.array($.number())),prompt_eval_count:$.number().nullable()});function IF(e={}){var t;const n=(t=E1(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(o,l={})=>new Fte(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(o,l={})=>new $te(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),s=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(o,l)};return s.chat=a,s.embedding=i,s.languageModel=a,s.textEmbedding=i,s.textEmbeddingModel=i,s}IF();function Sg(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function Ute(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Sg({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Sg(r[0])});break}t.push({role:"user",content:r.map(s=>{var o;const l=Sg(s);switch(s.type){case"text":return{type:"text",text:s.text,...l};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(o=s.mimeType)!=null?o:"image/jpeg"};base64,${Du(s.image)}`},...l};case"file":throw new ur({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let s="";const o=[];for(const l of r){const u=Sg(l);switch(l.type){case"text":{s+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...u});break}}}t.push({role:"assistant",content:s,tool_calls:o.length>0?o:void 0,...i});break}case"tool":{for(const s of r){const o=Sg(s);t.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result),...o})}break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}}return t}function vx({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function wx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Vte=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),k1={errorSchema:Vte,errorToMessage:e=>e.error.message};function Hte({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):s.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=o;throw new ur({functionality:`Unsupported tool choice type: ${l}`})}}}var qte=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:k1;this.chunkSchema=Wte(i.errorSchema),this.failedResponseHandler=Tf(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,providerMetadata:l,stopSequences:u,responseFormat:d,seed:h}){var m,g,b,v,x;const w=e.type,_=[];i!=null&&_.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&_.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const E={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(m=d.name)!=null?m:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:h,...l==null?void 0:l[this.providerOptionsName],reasoning_effort:(v=(g=l==null?void 0:l[this.providerOptionsName])==null?void 0:g.reasoningEffort)!=null?v:(b=l==null?void 0:l["openai-compatible"])==null?void 0:b.reasoningEffort,messages:Ute(t)};switch(w){case"regular":{const{tools:C,tool_choice:k,toolWarnings:I}=Hte({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...E,tools:C,tool_choice:k},warnings:[..._,...I]}}case"object-json":return{args:{...E,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(x=e.name)!=null?x:"response",description:e.description}}:{type:"json_object"}},warnings:_};case"object-tool":return{args:{...E,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:_};default:{const C=w;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l,u,d,h;const{args:m,warnings:g}=this.getArgs({...e}),b=JSON.stringify(m),{responseHeaders:v,value:x,rawValue:w}=await ha({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:m,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ts(Gte),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...E}=m,C=x.choices[0],k={[this.providerOptionsName]:{},...(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:w})},I=(r=x.usage)==null?void 0:r.completion_tokens_details,j=(a=x.usage)==null?void 0:a.prompt_tokens_details;return(I==null?void 0:I.reasoning_tokens)!=null&&(k[this.providerOptionsName].reasoningTokens=I==null?void 0:I.reasoning_tokens),(I==null?void 0:I.accepted_prediction_tokens)!=null&&(k[this.providerOptionsName].acceptedPredictionTokens=I==null?void 0:I.accepted_prediction_tokens),(I==null?void 0:I.rejected_prediction_tokens)!=null&&(k[this.providerOptionsName].rejectedPredictionTokens=I==null?void 0:I.rejected_prediction_tokens),(j==null?void 0:j.cached_tokens)!=null&&(k[this.providerOptionsName].cachedPromptTokens=j==null?void 0:j.cached_tokens),{text:(i=C.message.content)!=null?i:void 0,reasoning:(s=C.message.reasoning_content)!=null?s:void 0,toolCalls:(o=C.message.tool_calls)==null?void 0:o.map(N=>{var P;return{toolCallType:"function",toolCallId:(P=N.id)!=null?P:qi(),toolName:N.function.name,args:N.function.arguments}}),finishReason:wx(C.finish_reason),usage:{promptTokens:(u=(l=x.usage)==null?void 0:l.prompt_tokens)!=null?u:NaN,completionTokens:(h=(d=x.usage)==null?void 0:d.completion_tokens)!=null?h:NaN},providerMetadata:k,rawCall:{rawPrompt:_,rawSettings:E},rawResponse:{headers:v,body:w},response:vx(x),warnings:g,request:{body:b}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const _ of v.reasoning)_.type==="text"&&w.enqueue({type:"reasoning",textDelta:_.text});else w.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&w.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const _ of v.toolCalls)w.enqueue({type:"tool-call",..._});w.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),w.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:o}=await ha({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:a,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Lp(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...u}=n,d=[];let h="unknown",m={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0}},g=!0,b=this.providerOptionsName;return{stream:o.pipeThrough(new TransformStream({transform(v,x){var w,_,E,C,k,I,j,N,P,L,H,M;if(!v.success){h="error",x.enqueue({type:"error",error:v.error});return}const K=v.value;if(i==null||i.processChunk(v.rawValue),"error"in K){h="error",x.enqueue({type:"error",error:K.error.message});return}if(g&&(g=!1,x.enqueue({type:"response-metadata",...vx(K)})),K.usage!=null){const{prompt_tokens:ae,completion_tokens:te,prompt_tokens_details:Y,completion_tokens_details:ie}=K.usage;m.promptTokens=ae??void 0,m.completionTokens=te??void 0,(ie==null?void 0:ie.reasoning_tokens)!=null&&(m.completionTokensDetails.reasoningTokens=ie==null?void 0:ie.reasoning_tokens),(ie==null?void 0:ie.accepted_prediction_tokens)!=null&&(m.completionTokensDetails.acceptedPredictionTokens=ie==null?void 0:ie.accepted_prediction_tokens),(ie==null?void 0:ie.rejected_prediction_tokens)!=null&&(m.completionTokensDetails.rejectedPredictionTokens=ie==null?void 0:ie.rejected_prediction_tokens),(Y==null?void 0:Y.cached_tokens)!=null&&(m.promptTokensDetails.cachedTokens=Y==null?void 0:Y.cached_tokens)}const q=K.choices[0];if((q==null?void 0:q.finish_reason)!=null&&(h=wx(q.finish_reason)),(q==null?void 0:q.delta)==null)return;const ue=q.delta;if(ue.reasoning_content!=null&&x.enqueue({type:"reasoning",textDelta:ue.reasoning_content}),ue.content!=null&&x.enqueue({type:"text-delta",textDelta:ue.content}),ue.tool_calls!=null)for(const ae of ue.tool_calls){const te=ae.index;if(d[te]==null){if(ae.type!=="function")throw new tp({data:ae,message:"Expected 'function' type."});if(ae.id==null)throw new tp({data:ae,message:"Expected 'id' to be a string."});if(((w=ae.function)==null?void 0:w.name)==null)throw new tp({data:ae,message:"Expected 'function.name' to be a string."});d[te]={id:ae.id,type:"function",function:{name:ae.function.name,arguments:(_=ae.function.arguments)!=null?_:""},hasFinished:!1};const ie=d[te];((E=ie.function)==null?void 0:E.name)!=null&&((C=ie.function)==null?void 0:C.arguments)!=null&&(ie.function.arguments.length>0&&x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:ie.function.arguments}),tx(ie.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=ie.id)!=null?k:qi(),toolName:ie.function.name,args:ie.function.arguments}),ie.hasFinished=!0));continue}const Y=d[te];Y.hasFinished||(((I=ae.function)==null?void 0:I.arguments)!=null&&(Y.function.arguments+=(N=(j=ae.function)==null?void 0:j.arguments)!=null?N:""),x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Y.id,toolName:Y.function.name,argsTextDelta:(P=ae.function.arguments)!=null?P:""}),((L=Y.function)==null?void 0:L.name)!=null&&((H=Y.function)==null?void 0:H.arguments)!=null&&tx(Y.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(M=Y.id)!=null?M:qi(),toolName:Y.function.name,args:Y.function.arguments}),Y.hasFinished=!0))}},flush(v){var x,w;const _={[b]:{},...i==null?void 0:i.buildMetadata()};m.completionTokensDetails.reasoningTokens!=null&&(_[b].reasoningTokens=m.completionTokensDetails.reasoningTokens),m.completionTokensDetails.acceptedPredictionTokens!=null&&(_[b].acceptedPredictionTokens=m.completionTokensDetails.acceptedPredictionTokens),m.completionTokensDetails.rejectedPredictionTokens!=null&&(_[b].rejectedPredictionTokens=m.completionTokensDetails.rejectedPredictionTokens),m.promptTokensDetails.cachedTokens!=null&&(_[b].cachedPromptTokens=m.promptTokensDetails.cachedTokens),v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(x=m.promptTokens)!=null?x:NaN,completionTokens:(w=m.completionTokens)!=null?w:NaN},providerMetadata:_})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},warnings:r,request:{body:JSON.stringify(a)}}}},jF=$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish(),prompt_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),completion_tokens_details:$.object({reasoning_tokens:$.number().nullish(),accepted_prediction_tokens:$.number().nullish(),rejected_prediction_tokens:$.number().nullish()}).nullish()}).nullish(),Gte=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),finish_reason:$.string().nullish()})),usage:jF}),Wte=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").nullish(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),finish_reason:$.string().nullish()})),usage:jF}),e]);function Kte({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Jl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new ur({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new ur({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new ur({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var Zte=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:k1;this.chunkSchema=Xte(a.errorSchema),this.failedResponseHandler=Tf(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h,providerMetadata:m}){var g;const b=e.type,v=[];s!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:x,stopSequences:w}=Kte({prompt:n,inputFormat:t}),_=[...w??[],...u??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:x,stop:_.length>0?_:void 0};switch(b){case"regular":{if((g=e.tools)!=null&&g.length)throw new ur({functionality:"tools"});if(e.toolChoice)throw new ur({functionality:"toolChoice"});return{args:E,warnings:v}}case"object-json":throw new ur({functionality:"object-json mode"});case"object-tool":throw new ur({functionality:"object-tool mode"});default:{const C=b;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:s}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:u}=await ha({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ts(Yte),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,m=l.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:wx(m.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o,body:u},response:vx(l),warnings:s,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await ha({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Lp(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){l="error",m.enqueue({type:"error",error:g.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...vx(g)})),g.usage!=null&&(u={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const b=g.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=wx(b.finish_reason)),(b==null?void 0:b.text)!=null&&m.enqueue({type:"text-delta",textDelta:b.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Yte=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),Xte=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),e]),Jte=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new w1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await ha({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:fa(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Tf((r=this.config.errorStructure)!=null?r:k1),successfulResponseHandler:ts(Qte),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},Qte=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),ene=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const b=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:v,responseHeaders:x}=await ha({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:fa(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:Tf((m=this.config.errorStructure)!=null?m:k1),successfulResponseHandler:ts(tne),abortSignal:o,fetch:this.config.fetch});return{images:v.data.map(w=>w.b64_json),warnings:g,response:{timestamp:b,modelId:this.modelId,headers:x}}}},tne=$.object({data:$.array($.object({b64_json:$.string()}))});function nne(e){const t=E1(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>s(h,m),s=(h,m={})=>new qte(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),o=(h,m={})=>new Zte(h,m,a("completion")),l=(h,m={})=>new Jte(h,m,a("embedding")),u=(h,m={})=>new ene(h,m,a("image")),d=(h,m)=>i(h,m);return d.languageModel=i,d.chatModel=s,d.completionModel=o,d.textEmbeddingModel=l,d.imageModel=u,d}const Cu=(e,t)=>`${e}:${t}`,Ac=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},v0=e=>e==="openai"||e==="openrouter"||e==="google",DF=e=>e==="ollama"||e==="openai-compatible",Xd=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",ic=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],rne={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},MF=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function OF(e,t,n){try{switch(e.type){case"openai":return z5({apiKey:n})(t);case"google":return q5({apiKey:n})(t);case"openrouter":return RF({apiKey:n,extraBody:{include_reasoning:!0}})(t);case"ollama":return IF({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return nne({baseURL:MF(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function xA(e,t,n){const a=Un.getState().getAllAvailableModelDefsForProvider(e.id).find(s=>s.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=OF(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:Cu(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const PF={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]},Eg=new Map,ane=5*60*1e3,ine=(e,t)=>{var i,s,o,l,u,d,h,m,g,b,v,x,w,_;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((s=e.architecture)==null?void 0:s.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((u=e.architecture)==null?void 0:u.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((m=e.pricing)==null?void 0:m.request)??"0",image:((g=e.pricing)==null?void 0:g.image)??"0",web_search:((b=e.pricing)==null?void 0:b.web_search)??"0",internal_reasoning:((v=e.pricing)==null?void 0:v.internal_reasoning)??"0"},top_provider:{context_length:((x=e.top_provider)==null?void 0:x.context_length)??e.context_length??null,max_completion_tokens:((w=e.top_provider)==null?void 0:w.max_completion_tokens)??null,is_moderated:((_=e.top_provider)==null?void 0:_.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??PF[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function sne(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Eg.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var o,l,u;let i;const s={Accept:"application/json"};t&&(s.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",s["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",s["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete s.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=MF(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),Ge.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:s});if(!d.ok){let b=`(${d.status} ${d.statusText})`;try{const v=await d.text();b=v||b;try{const x=JSON.parse(v);b=((u=x==null?void 0:x.error)==null?void 0:u.message)||(x==null?void 0:x.message)||b}catch{}}catch(v){console.warn("[ModelFetcher] Failed to read error response body:",v)}throw new Error(`API Error: ${b}`)}const h=await d.json();let m=[];if(e.type==="ollama"?m=h.models||[]:m=h.data||h||[],!Array.isArray(m))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const g=m.map(b=>ine(b,e.type));return g.sort((b,v)=>(b.name||b.id).localeCompare(v.name||v.id)),console.log(`[ModelFetcher] Fetched and mapped ${g.length} models for ${e.name}`),g}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),Ge.error(`Failed to fetch models for ${e.name}: ${h}`),Eg.delete(n),[]}})();return Eg.set(n,a),setTimeout(()=>{Eg.get(n)===a&&(Eg.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},ane),a}const rE="provider:lastModelSelection",J4="provider:globalModelSortOrder",Un=Ks(Zs((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),_t.saveSetting("enableApiKeyManagement",n),Tt.emit(Et.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadSetting("enableApiKeyManagement",!0),[r,a,i,s]=await Promise.all([_t.loadProviderConfigs(),_t.loadApiKeys(),_t.loadSetting(J4,[]),_t.loadSetting(rE,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const o=r.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(b=>{m.push(Cu(g.id,b))}),m),[]),l=new Set(o),u=i.filter(m=>l.has(m));let d=s;d&&l.has(d)||(d=u[0]??null,d||(d=o[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${d}`)),e({globalModelSortOrder:u,selectedModelId:d,isLoading:!1}),await _t.saveSetting(rE,d),console.log(`[ProviderStore] Emitting initial ${Et.MODEL_SELECTION_CHANGED} with payload:`,{modelId:d}),Tt.emit(Et.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),Ge.error("Failed to load provider data")}},selectModel:n=>{const r=t().selectedModelId;console.log(`[ProviderStore] selectModel called. Current: ${r}, New: ${n}`),r!==n?(e({selectedModelId:n}),_t.saveSetting(rE,n),console.log(`[ProviderStore] Emitting ${Et.MODEL_SELECTION_CHANGED} with payload:`,{modelId:n}),Tt.emit(Et.MODEL_SELECTION_CHANGED,{modelId:n})):console.log(`[ProviderStore] selectModel skipped: ID ${n} already selected.`)},addApiKey:async(n,r,a)=>{const i=ji(),s=new Date,o={id:i,name:n,value:a,providerId:r,createdAt:s,updatedAt:s};try{return await _t.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),Ge.success(`API Key "${n}" added.`),Tt.emit(Et.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),Ge.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await _t.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(s=>s.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(s=>s.apiKeyId===n?{...s,apiKeyId:null}:s)}),Ge.success(`API Key "${r}" deleted.`),Tt.emit(Et.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),Ge.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await _t.saveProviderConfig(i),e(s=>{s.dbProviderConfigs.push(i)}),Ge.success(`Provider "${n.name}" added.`),Tt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),t().fetchModels(r).catch(s=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,s)}),r}catch(s){throw console.error("ProviderStore: Error adding provider config",s),Ge.error(`Failed to add Provider: ${s instanceof Error?s.message:String(s)}`),s}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(s=>s.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await _t.saveProviderConfig(i),e(h=>{const m=h.dbProviderConfigs.findIndex(g=>g.id===n);m!==-1&&(h.dbProviderConfigs[m]=i)}),Tt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const s=t().globalModelSortOrder,o=t().dbProviderConfigs;let l=[...s];const u=o.reduce((h,m)=>(m.isEnabled&&m.enabledModels&&m.enabledModels.forEach(g=>{h.push(Cu(m.id,g))}),h),[]),d=new Set(u);l=s.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(s){throw console.error("ProviderStore: Error updating provider config",s),Ge.error(`Failed to update Provider: ${s instanceof Error?s.message:String(s)}`),s}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await _t.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),Tt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const s=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(m=>{d.push(Cu(h.id,m))}),d),[]),o=new Set(s),u=t().globalModelSortOrder.filter(d=>o.has(d));await t().setGlobalModelSortOrder(u),Ge.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),Ge.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){Ge.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,s=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,o=await sne(r,s);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),Ge.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await _t.saveSetting(J4,r);const a=t().selectedModelId,s=t().dbProviderConfigs.reduce((l,u)=>(u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{l.push(Cu(u.id,d))}),l),[]),o=new Set(s);if(!a||!o.has(a)){const l=r.find(h=>o.has(h)),u=s[0]??null,d=l??u;d!==a&&(console.log(`[ProviderStore] Selection ${a} invalidated or missing. Selecting ${d}`),t().selectModel(d))}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:s}=Ac(n);if(!i||!s)return;const o=r.find(u=>u.id===i);if(!o)return;const l=a.find(u=>u.id===o.apiKeyId);return xA(o,s,l==null?void 0:l.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(rne[a]||[]).map(s=>({id:s.id,name:s.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:PF[r.type]??[]}))}}))),Iv="system",jv="You are a helpful AI assistant.",Dv=.7,Mv=null,Ov=null,Pv=null,Fv=0,Lv=0,Q4=!0,Bv=!0,$v=!1,zv=!1,Uv=!1,Vv=15,eD=null,tD=null,Hv=5,qv=null,Gv=!0,Wv=null,Kv=768,Zv=!1,Yv=!1,Xv=null,Jv=16,Qv="max-w-7xl",ew=null,pr=Ks(Zs((e,t)=>({theme:Iv,globalSystemPrompt:jv,temperature:Dv,maxTokens:Mv,topP:Ov,topK:Pv,presencePenalty:Fv,frequencyPenalty:Lv,enableAdvancedSettings:Q4,enableStreamingMarkdown:Bv,enableStreamingCodeBlockParsing:$v,foldStreamingCodeBlocks:zv,foldUserMessagesOnCompletion:Uv,streamingRenderFPS:Vv,gitUserName:eD,gitUserEmail:tD,toolMaxSteps:Hv,prismThemeUrl:qv,autoTitleEnabled:Gv,autoTitleModelId:Wv,autoTitlePromptMaxLength:Kv,autoTitleIncludeFiles:Zv,autoTitleIncludeRules:Yv,customFontFamily:Xv,customFontSize:Jv,chatMaxWidth:Qv,customThemeColors:ew,setTheme:n=>{e({theme:n}),_t.saveSetting("theme",n)},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),_t.saveSetting("globalSystemPrompt",n)},setTemperature:n=>{e({temperature:n}),_t.saveSetting("temperature",n)},setMaxTokens:n=>{e({maxTokens:n}),_t.saveSetting("maxTokens",n)},setTopP:n=>{e({topP:n}),_t.saveSetting("topP",n)},setTopK:n=>{e({topK:n}),_t.saveSetting("topK",n)},setPresencePenalty:n=>{e({presencePenalty:n}),_t.saveSetting("presencePenalty",n)},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),_t.saveSetting("frequencyPenalty",n)},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),_t.saveSetting("enableAdvancedSettings",n)},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),_t.saveSetting("enableStreamingMarkdown",n)},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),_t.saveSetting("enableStreamingCodeBlockParsing",n)},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),_t.saveSetting("foldStreamingCodeBlocks",n)},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),_t.saveSetting("foldUserMessagesOnCompletion",n)},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),_t.saveSetting("streamingRenderFPS",r)},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),_t.saveSetting("gitUserName",r)},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),_t.saveSetting("gitUserEmail",r)},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),_t.saveSetting("toolMaxSteps",r)},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),_t.saveSetting("prismThemeUrl",r)},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),_t.saveSetting("autoTitleEnabled",n)},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),_t.saveSetting("autoTitleModelId",n)},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),_t.saveSetting("autoTitlePromptMaxLength",r)},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),_t.saveSetting("autoTitleIncludeFiles",n)},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),_t.saveSetting("autoTitleIncludeRules",n)},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),_t.saveSetting("customFontFamily",r)},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),_t.saveSetting("customFontSize",r)},setChatMaxWidth:n=>{e({chatMaxWidth:n}),_t.saveSetting("chatMaxWidth",n)},setCustomThemeColors:n=>{e({customThemeColors:n}),_t.saveSetting("customThemeColors",n)},setCustomThemeColor:(n,r)=>{e(a=>{const s={...a.customThemeColors??{}};r===null||r.trim()===""?delete s[n]:s[n]=r.trim(),a.customThemeColors=Object.keys(s).length>0?s:null}),_t.saveSetting("customThemeColors",t().customThemeColors)},loadSettings:async()=>{try{const[n,r,a,i,s,o,l,u,d,h,m,g,b,v,x,w,_,E,C,k,I,j,N,P,L,H,M]=await Promise.all([_t.loadSetting("theme",Iv),_t.loadSetting("temperature",Dv),_t.loadSetting("maxTokens",Mv),_t.loadSetting("topP",Ov),_t.loadSetting("topK",Pv),_t.loadSetting("presencePenalty",Fv),_t.loadSetting("frequencyPenalty",Lv),_t.loadSetting("globalSystemPrompt",jv),_t.loadSetting("enableAdvancedSettings",Q4),_t.loadSetting("enableStreamingMarkdown",Bv),_t.loadSetting("enableStreamingCodeBlockParsing",$v),_t.loadSetting("foldStreamingCodeBlocks",zv),_t.loadSetting("foldUserMessagesOnCompletion",Uv),_t.loadSetting("streamingRenderFPS",Vv),_t.loadSetting("gitUserName",eD),_t.loadSetting("gitUserEmail",tD),_t.loadSetting("toolMaxSteps",Hv),_t.loadSetting("prismThemeUrl",qv),_t.loadSetting("autoTitleEnabled",Gv),_t.loadSetting("autoTitleModelId",Wv),_t.loadSetting("autoTitlePromptMaxLength",Kv),_t.loadSetting("autoTitleIncludeFiles",Zv),_t.loadSetting("autoTitleIncludeRules",Yv),_t.loadSetting("customFontFamily",Xv),_t.loadSetting("customFontSize",Jv),_t.loadSetting("chatMaxWidth",Qv),_t.loadSetting("customThemeColors",ew)]);e({theme:n,temperature:r,maxTokens:a,topP:i,topK:s,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:u,enableAdvancedSettings:d,enableStreamingMarkdown:h,enableStreamingCodeBlockParsing:m,foldStreamingCodeBlocks:g,foldUserMessagesOnCompletion:b,streamingRenderFPS:v,gitUserName:x,gitUserEmail:w,toolMaxSteps:_,prismThemeUrl:E,autoTitleEnabled:C,autoTitleModelId:k,autoTitlePromptMaxLength:I,autoTitleIncludeFiles:j,autoTitleIncludeRules:N,customFontFamily:P,customFontSize:L,chatMaxWidth:H,customThemeColors:M})}catch(n){console.error("SettingsStore: Error loading settings",n)}},resetGeneralSettings:async()=>{try{e({enableStreamingMarkdown:Bv,enableStreamingCodeBlockParsing:$v,foldStreamingCodeBlocks:zv,foldUserMessagesOnCompletion:Uv,streamingRenderFPS:Vv}),await Promise.all([_t.saveSetting("enableStreamingMarkdown",Bv),_t.saveSetting("enableStreamingCodeBlockParsing",$v),_t.saveSetting("foldStreamingCodeBlocks",zv),_t.saveSetting("foldUserMessagesOnCompletion",Uv),_t.saveSetting("streamingRenderFPS",Vv)]),Ge.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),Ge.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{e({globalSystemPrompt:jv,temperature:Dv,maxTokens:Mv,topP:Ov,topK:Pv,presencePenalty:Fv,frequencyPenalty:Lv,toolMaxSteps:Hv,autoTitleEnabled:Gv,autoTitleModelId:Wv,autoTitlePromptMaxLength:Kv,autoTitleIncludeFiles:Zv,autoTitleIncludeRules:Yv}),await Promise.all([_t.saveSetting("globalSystemPrompt",jv),_t.saveSetting("temperature",Dv),_t.saveSetting("maxTokens",Mv),_t.saveSetting("topP",Ov),_t.saveSetting("topK",Pv),_t.saveSetting("presencePenalty",Fv),_t.saveSetting("frequencyPenalty",Lv),_t.saveSetting("toolMaxSteps",Hv),_t.saveSetting("autoTitleEnabled",Gv),_t.saveSetting("autoTitleModelId",Wv),_t.saveSetting("autoTitlePromptMaxLength",Kv),_t.saveSetting("autoTitleIncludeFiles",Zv),_t.saveSetting("autoTitleIncludeRules",Yv)]),Ge.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),Ge.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{e({theme:Iv,prismThemeUrl:qv,customFontFamily:Xv,customFontSize:Jv,chatMaxWidth:Qv,customThemeColors:ew}),await Promise.all([_t.saveSetting("theme",Iv),_t.saveSetting("prismThemeUrl",qv),_t.saveSetting("customFontFamily",Xv),_t.saveSetting("customFontSize",Jv),_t.saveSetting("chatMaxWidth",Qv),_t.saveSetting("customThemeColors",ew)]),Ge.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),Ge.error("Failed to reset theme settings.")}}})));async function LT(e,t){const n=Ir.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const s=await i.callback(a);if(s===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;s&&typeof s=="object"&&(a=s)}catch(s){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,s),!1}return a}function one(){const e=Mn.getState(),t=Un.getState(),n=pr.getState(),{providerId:r}=Ac(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function lne(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function nD(e){try{const t=e.type||"application/octet-stream",n=mA(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:lne(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),Ge.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function rD(e){return e.flatMap(t=>{var a,i,s;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-call"&&u.toolCallId&&u.toolName&&u.args!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,u)}}),o.length>0&&n.push({role:"assistant",content:o})}if((s=t.metadata)!=null&&s.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-result"&&u.toolCallId&&u.toolName&&u.result!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,u)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const aD=e=>Symbol.iterator in e,iD=e=>"entries"in e,sD=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},cne=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function une(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!aD(e)||!aD(t)?sD({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):iD(e)&&iD(t)?sD(e,t):cne(e,t)}function dn(e){const t=gt.useRef(void 0);return n=>{const r=e(n);return une(t.current,r)?t.current:t.current=r}}function qt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function dne(e,t){const n=T.createContext(t),r=i=>{const{children:s,...o}=i,l=T.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function a(i){const s=T.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function vi(e,t=[]){let n=[];function r(i,s){const o=T.createContext(s),l=n.length;n=[...n,s];const u=h=>{var w;const{scope:m,children:g,...b}=h,v=((w=m==null?void 0:m[e])==null?void 0:w[l])||o,x=T.useMemo(()=>b,Object.values(b));return p.jsx(v.Provider,{value:x,children:g})};u.displayName=i+"Provider";function d(h,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||o,b=T.useContext(g);if(b)return b;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(s=>T.createContext(s));return function(o){const l=(o==null?void 0:o[e])||i;return T.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return a.scopeName=e,[r,fne(a,...t)]}function fne(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...o,...h}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var hne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],an=hne.reduce((e,t)=>{const n=Iu(`Primitive.${t}`),r=T.forwardRef((a,i)=>{const{asChild:s,...o}=a,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function FF(e,t){e&&il.flushSync(()=>e.dispatchEvent(t))}function Ua(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function pne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e);T.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var mne="DismissableLayer",BT="dismissableLayer.update",gne="dismissableLayer.pointerDownOutside",yne="dismissableLayer.focusOutside",oD,LF=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bp=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...l}=e,u=T.useContext(LF),[d,h]=T.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=T.useState({}),b=kn(t,j=>h(j)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(x),_=d?v.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,C=_>=w,k=wne(j=>{const N=j.target,P=[...u.branches].some(L=>L.contains(N));!C||P||(a==null||a(j),s==null||s(j),j.defaultPrevented||o==null||o())},m),I=xne(j=>{const N=j.target;[...u.branches].some(L=>L.contains(N))||(i==null||i(j),s==null||s(j),j.defaultPrevented||o==null||o())},m);return pne(j=>{_===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&o&&(j.preventDefault(),o()))},m),T.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(oD=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),lD(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=oD)}},[d,m,n,u]),T.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),lD())},[d,u]),T.useEffect(()=>{const j=()=>g({});return document.addEventListener(BT,j),()=>document.removeEventListener(BT,j)},[]),p.jsx(an.div,{...l,ref:b,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:qt(e.onFocusCapture,I.onFocusCapture),onBlurCapture:qt(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:qt(e.onPointerDownCapture,k.onPointerDownCapture)})});Bp.displayName=mne;var bne="DismissableLayerBranch",vne=T.forwardRef((e,t)=>{const n=T.useContext(LF),r=T.useRef(null),a=kn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(an.div,{...e,ref:a})});vne.displayName=bne;function wne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e),r=T.useRef(!1),a=T.useRef(()=>{});return T.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){BF(gne,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function xne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e),r=T.useRef(!1);return T.useEffect(()=>{const a=i=>{i.target&&!r.current&&BF(yne,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lD(){const e=new CustomEvent(BT);document.dispatchEvent(e)}function BF(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?FF(a,i):a.dispatchEvent(i)}var ri=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},_ne=f8[" useId ".trim().toString()]||(()=>{}),Sne=0;function Ha(e){const[t,n]=T.useState(_ne());return ri(()=>{n(r=>r??String(Sne++))},[e]),t?`radix-${t}`:""}const Ene=["top","right","bottom","left"],Lu=Math.min,ys=Math.max,xx=Math.round,tw=Math.floor,ul=e=>({x:e,y:e}),Cne={left:"right",right:"left",bottom:"top",top:"bottom"},Tne={start:"end",end:"start"};function $T(e,t,n){return ys(e,Lu(t,n))}function bc(e,t){return typeof e=="function"?e(t):e}function vc(e){return e.split("-")[0]}function $p(e){return e.split("-")[1]}function _A(e){return e==="x"?"y":"x"}function SA(e){return e==="y"?"height":"width"}function Bu(e){return["top","bottom"].includes(vc(e))?"y":"x"}function EA(e){return _A(Bu(e))}function kne(e,t,n){n===void 0&&(n=!1);const r=$p(e),a=EA(e),i=SA(a);let s=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=_x(s)),[s,_x(s)]}function Ane(e){const t=_x(e);return[zT(e),t,zT(t)]}function zT(e){return e.replace(/start|end/g,t=>Tne[t])}function Nne(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:s;default:return[]}}function Rne(e,t,n,r){const a=$p(e);let i=Nne(vc(e),n==="start",r);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(zT)))),i}function _x(e){return e.replace(/left|right|bottom|top/g,t=>Cne[t])}function Ine(e){return{top:0,right:0,bottom:0,left:0,...e}}function $F(e){return typeof e!="number"?Ine(e):{top:e,right:e,bottom:e,left:e}}function Sx(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function cD(e,t,n){let{reference:r,floating:a}=e;const i=Bu(t),s=EA(t),o=SA(s),l=vc(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[o]/2-a[o]/2;let g;switch(l){case"top":g={x:d,y:r.y-a.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch($p(t)){case"start":g[s]-=m*(n&&u?-1:1);break;case"end":g[s]+=m*(n&&u?-1:1);break}return g}const jne=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,o=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=cD(u,r,l),m=r,g={},b=0;for(let v=0;v<o.length;v++){const{name:x,fn:w}=o[v],{x:_,y:E,data:C,reset:k}=await w({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:u,platform:s,elements:{reference:e,floating:t}});d=_??d,h=E??h,g={...g,[x]:{...g[x],...C}},k&&b<=50&&(b++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=cD(u,m,l)),v=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:g}};async function w0(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=bc(t,e),b=$F(g),x=o[m?h==="floating"?"reference":"floating":h],w=Sx(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Sx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:E,strategy:l}):_);return{top:(w.top-k.top+b.top)/C.y,bottom:(k.bottom-w.bottom+b.bottom)/C.y,left:(w.left-k.left+b.left)/C.x,right:(k.right-w.right+b.right)/C.x}}const Dne=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:u,padding:d=0}=bc(e,t)||{};if(u==null)return{};const h=$F(d),m={x:n,y:r},g=EA(a),b=SA(g),v=await s.getDimensions(u),x=g==="y",w=x?"top":"left",_=x?"bottom":"right",E=x?"clientHeight":"clientWidth",C=i.reference[b]+i.reference[g]-m[g]-i.floating[b],k=m[g]-i.reference[g],I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let j=I?I[E]:0;(!j||!await(s.isElement==null?void 0:s.isElement(I)))&&(j=o.floating[E]||i.floating[b]);const N=C/2-k/2,P=j/2-v[b]/2-1,L=Lu(h[w],P),H=Lu(h[_],P),M=L,K=j-v[b]-H,q=j/2-v[b]/2+N,ue=$T(M,q,K),ae=!l.arrow&&$p(a)!=null&&q!==ue&&i.reference[b]/2-(q<M?L:H)-v[b]/2<0,te=ae?q<M?q-M:q-K:0;return{[g]:m[g]+te,data:{[g]:ue,centerOffset:q-ue-te,...ae&&{alignmentOffset:te}},reset:ae}}}),Mne=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...x}=bc(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=vc(a),_=Bu(o),E=vc(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=m||(E||!v?[_x(o)]:Ane(o)),I=b!=="none";!m&&I&&k.push(...Rne(o,v,b,C));const j=[o,...k],N=await w0(t,x),P=[];let L=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(N[w]),h){const q=kne(a,s,C);P.push(N[q[0]],N[q[1]])}if(L=[...L,{placement:a,overflows:P}],!P.every(q=>q<=0)){var H,M;const q=(((H=i.flip)==null?void 0:H.index)||0)+1,ue=j[q];if(ue)return{data:{index:q,overflows:L},reset:{placement:ue}};let ae=(M=L.filter(te=>te.overflows[0]<=0).sort((te,Y)=>te.overflows[1]-Y.overflows[1])[0])==null?void 0:M.placement;if(!ae)switch(g){case"bestFit":{var K;const te=(K=L.filter(Y=>{if(I){const ie=Bu(Y.placement);return ie===_||ie==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(ie=>ie>0).reduce((ie,V)=>ie+V,0)]).sort((Y,ie)=>Y[1]-ie[1])[0])==null?void 0:K[0];te&&(ae=te);break}case"initialPlacement":ae=o;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function uD(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function dD(e){return Ene.some(t=>e[t]>=0)}const One=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=bc(e,t);switch(r){case"referenceHidden":{const i=await w0(t,{...a,elementContext:"reference"}),s=uD(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:dD(s)}}}case"escaped":{const i=await w0(t,{...a,altBoundary:!0}),s=uD(i,n.floating);return{data:{escapedOffsets:s,escaped:dD(s)}}}default:return{}}}}};async function Pne(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),s=vc(n),o=$p(n),l=Bu(n)==="y",u=["left","top"].includes(s)?-1:1,d=i&&l?-1:1,h=bc(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof b=="number"&&(g=o==="end"?b*-1:b),l?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const Fne=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await Pne(t,e);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},Lne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:x=>{let{x:w,y:_}=x;return{x:w,y:_}}},...l}=bc(e,t),u={x:n,y:r},d=await w0(t,l),h=Bu(vc(a)),m=_A(h);let g=u[m],b=u[h];if(i){const x=m==="y"?"top":"left",w=m==="y"?"bottom":"right",_=g+d[x],E=g-d[w];g=$T(_,g,E)}if(s){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",_=b+d[x],E=b-d[w];b=$T(_,b,E)}const v=o.fn({...t,[m]:g,[h]:b});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[h]:s}}}}}},Bne=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=bc(e,t),d={x:n,y:r},h=Bu(a),m=_A(h);let g=d[m],b=d[h];const v=bc(o,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const E=m==="y"?"height":"width",C=i.reference[m]-i.floating[E]+x.mainAxis,k=i.reference[m]+i.reference[E]-x.mainAxis;g<C?g=C:g>k&&(g=k)}if(u){var w,_;const E=m==="y"?"width":"height",C=["top","left"].includes(vc(a)),k=i.reference[h]-i.floating[E]+(C&&((w=s.offset)==null?void 0:w[h])||0)+(C?0:x.crossAxis),I=i.reference[h]+i.reference[E]+(C?0:((_=s.offset)==null?void 0:_[h])||0)-(C?x.crossAxis:0);b<k?b=k:b>I&&(b=I)}return{[m]:g,[h]:b}}}},$ne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...u}=bc(e,t),d=await w0(t,u),h=vc(a),m=$p(a),g=Bu(a)==="y",{width:b,height:v}=i.floating;let x,w;h==="top"||h==="bottom"?(x=h,w=m===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(w=h,x=m==="end"?"top":"bottom");const _=v-d.top-d.bottom,E=b-d.left-d.right,C=Lu(v-d[x],_),k=Lu(b-d[w],E),I=!t.middlewareData.shift;let j=C,N=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(j=_),I&&!m){const L=ys(d.left,0),H=ys(d.right,0),M=ys(d.top,0),K=ys(d.bottom,0);g?N=b-2*(L!==0||H!==0?L+H:ys(d.left,d.right)):j=v-2*(M!==0||K!==0?M+K:ys(d.top,d.bottom))}await l({...t,availableWidth:N,availableHeight:j});const P=await s.getDimensions(o.floating);return b!==P.width||v!==P.height?{reset:{rects:!0}}:{}}}};function A1(){return typeof window<"u"}function zp(e){return zF(e)?(e.nodeName||"").toLowerCase():"#document"}function vs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xl(e){var t;return(t=(zF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zF(e){return A1()?e instanceof Node||e instanceof vs(e).Node:!1}function _o(e){return A1()?e instanceof Element||e instanceof vs(e).Element:!1}function yl(e){return A1()?e instanceof HTMLElement||e instanceof vs(e).HTMLElement:!1}function fD(e){return!A1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vs(e).ShadowRoot}function xy(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=So(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function zne(e){return["table","td","th"].includes(zp(e))}function N1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function CA(e){const t=TA(),n=_o(e)?So(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Une(e){let t=$u(e);for(;yl(t)&&!hp(t);){if(CA(t))return t;if(N1(t))return null;t=$u(t)}return null}function TA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function hp(e){return["html","body","#document"].includes(zp(e))}function So(e){return vs(e).getComputedStyle(e)}function R1(e){return _o(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $u(e){if(zp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fD(e)&&e.host||xl(e);return fD(t)?t.host:t}function UF(e){const t=$u(e);return hp(t)?e.ownerDocument?e.ownerDocument.body:e.body:yl(t)&&xy(t)?t:UF(t)}function x0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=UF(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),s=vs(a);if(i){const o=UT(s);return t.concat(s,s.visualViewport||[],xy(a)?a:[],o&&n?x0(o):[])}return t.concat(a,x0(a,[],n))}function UT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function VF(e){const t=So(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=yl(e),i=a?e.offsetWidth:n,s=a?e.offsetHeight:r,o=xx(n)!==i||xx(r)!==s;return o&&(n=i,r=s),{width:n,height:r,$:o}}function kA(e){return _o(e)?e:e.contextElement}function rp(e){const t=kA(e);if(!yl(t))return ul(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=VF(t);let s=(i?xx(n.width):n.width)/r,o=(i?xx(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Vne=ul(0);function HF(e){const t=vs(e);return!TA()||!t.visualViewport?Vne:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Hne(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==vs(e)?!1:t}function gf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=kA(e);let s=ul(1);t&&(r?_o(r)&&(s=rp(r)):s=rp(e));const o=Hne(i,n,r)?HF(i):ul(0);let l=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,d=a.width/s.x,h=a.height/s.y;if(i){const m=vs(i),g=r&&_o(r)?vs(r):r;let b=m,v=UT(b);for(;v&&r&&g!==b;){const x=rp(v),w=v.getBoundingClientRect(),_=So(v),E=w.left+(v.clientLeft+parseFloat(_.paddingLeft))*x.x,C=w.top+(v.clientTop+parseFloat(_.paddingTop))*x.y;l*=x.x,u*=x.y,d*=x.x,h*=x.y,l+=E,u+=C,b=vs(v),v=UT(b)}}return Sx({width:d,height:h,x:l,y:u})}function AA(e,t){const n=R1(e).scrollLeft;return t?t.left+n:gf(xl(e)).left+n}function qF(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:AA(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function qne(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",s=xl(r),o=t?N1(t.floating):!1;if(r===s||o&&i)return n;let l={scrollLeft:0,scrollTop:0},u=ul(1);const d=ul(0),h=yl(r);if((h||!h&&!i)&&((zp(r)!=="body"||xy(s))&&(l=R1(r)),yl(r))){const g=gf(r);u=rp(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=s&&!h&&!i?qF(s,l,!0):ul(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-l.scrollTop*u.y+d.y+m.y}}function Gne(e){return Array.from(e.getClientRects())}function Wne(e){const t=xl(e),n=R1(e),r=e.ownerDocument.body,a=ys(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ys(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+AA(e);const o=-n.scrollTop;return So(r).direction==="rtl"&&(s+=ys(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:s,y:o}}function Kne(e,t){const n=vs(e),r=xl(e),a=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const u=TA();(!u||u&&t==="fixed")&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}function Zne(e,t){const n=gf(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=yl(e)?rp(e):ul(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y,l=a*i.x,u=r*i.y;return{width:s,height:o,x:l,y:u}}function hD(e,t,n){let r;if(t==="viewport")r=Kne(e,n);else if(t==="document")r=Wne(xl(e));else if(_o(t))r=Zne(t,n);else{const a=HF(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Sx(r)}function GF(e,t){const n=$u(e);return n===t||!_o(n)||hp(n)?!1:So(n).position==="fixed"||GF(n,t)}function Yne(e,t){const n=t.get(e);if(n)return n;let r=x0(e,[],!1).filter(o=>_o(o)&&zp(o)!=="body"),a=null;const i=So(e).position==="fixed";let s=i?$u(e):e;for(;_o(s)&&!hp(s);){const o=So(s),l=CA(s);!l&&o.position==="fixed"&&(a=null),(i?!l&&!a:!l&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||xy(s)&&!l&&GF(e,s))?r=r.filter(d=>d!==s):a=o,s=$u(s)}return t.set(e,r),r}function Xne(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const s=[...n==="clippingAncestors"?N1(t)?[]:Yne(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((u,d)=>{const h=hD(t,d,a);return u.top=ys(h.top,u.top),u.right=Lu(h.right,u.right),u.bottom=Lu(h.bottom,u.bottom),u.left=ys(h.left,u.left),u},hD(t,o,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Jne(e){const{width:t,height:n}=VF(e);return{width:t,height:n}}function Qne(e,t,n){const r=yl(t),a=xl(t),i=n==="fixed",s=gf(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=ul(0);if(r||!r&&!i)if((zp(t)!=="body"||xy(a))&&(o=R1(t)),r){const m=gf(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else a&&(l.x=AA(a));const u=a&&!r&&!i?qF(a,o):ul(0),d=s.left+o.scrollLeft-l.x-u.x,h=s.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:s.width,height:s.height}}function aE(e){return So(e).position==="static"}function pD(e,t){if(!yl(e)||So(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return xl(e)===n&&(n=n.ownerDocument.body),n}function WF(e,t){const n=vs(e);if(N1(e))return n;if(!yl(e)){let a=$u(e);for(;a&&!hp(a);){if(_o(a)&&!aE(a))return a;a=$u(a)}return n}let r=pD(e,t);for(;r&&zne(r)&&aE(r);)r=pD(r,t);return r&&hp(r)&&aE(r)&&!CA(r)?n:r||Une(e)||n}const ere=async function(e){const t=this.getOffsetParent||WF,n=this.getDimensions,r=await n(e.floating);return{reference:Qne(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function tre(e){return So(e).direction==="rtl"}const nre={convertOffsetParentRelativeRectToViewportRelativeRect:qne,getDocumentElement:xl,getClippingRect:Xne,getOffsetParent:WF,getElementRects:ere,getClientRects:Gne,getDimensions:Jne,getScale:rp,isElement:_o,isRTL:tre};function KF(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function rre(e,t){let n=null,r;const a=xl(e);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=u;if(o||t(),!m||!g)return;const b=tw(h),v=tw(a.clientWidth-(d+m)),x=tw(a.clientHeight-(h+g)),w=tw(d),E={rootMargin:-b+"px "+-v+"px "+-x+"px "+-w+"px",threshold:ys(0,Lu(1,l))||1};let C=!0;function k(I){const j=I[0].intersectionRatio;if(j!==l){if(!C)return s();j?s(!1,j):r=setTimeout(()=>{s(!1,1e-7)},1e3)}j===1&&!KF(u,e.getBoundingClientRect())&&s(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return s(!0),i}function are(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=kA(e),d=a||i?[...u?x0(u):[],...x0(t)]:[];d.forEach(w=>{a&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=u&&o?rre(u,n):null;let m=-1,g=null;s&&(g=new ResizeObserver(w=>{let[_]=w;_&&_.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),u&&!l&&g.observe(u),g.observe(t));let b,v=l?gf(e):null;l&&x();function x(){const w=gf(e);v&&!KF(v,w)&&n(),v=w,b=requestAnimationFrame(x)}return n(),()=>{var w;d.forEach(_=>{a&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(b)}}const ire=Fne,sre=Lne,ore=Mne,lre=$ne,cre=One,mD=Dne,ure=Bne,dre=(e,t,n)=>{const r=new Map,a={platform:nre,...n},i={...a.platform,_c:r};return jne(e,t,{...a,platform:i})};var Mw=typeof document<"u"?T.useLayoutEffect:T.useEffect;function Ex(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ex(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Ex(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function ZF(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function gD(e,t){const n=ZF(e);return Math.round(t*n)/n}function iE(e){const t=T.useRef(e);return Mw(()=>{t.current=e}),t}function fre(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[d,h]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=T.useState(r);Ex(m,r)||g(r);const[b,v]=T.useState(null),[x,w]=T.useState(null),_=T.useCallback(Y=>{Y!==I.current&&(I.current=Y,v(Y))},[]),E=T.useCallback(Y=>{Y!==j.current&&(j.current=Y,w(Y))},[]),C=i||b,k=s||x,I=T.useRef(null),j=T.useRef(null),N=T.useRef(d),P=l!=null,L=iE(l),H=iE(a),M=iE(u),K=T.useCallback(()=>{if(!I.current||!j.current)return;const Y={placement:t,strategy:n,middleware:m};H.current&&(Y.platform=H.current),dre(I.current,j.current,Y).then(ie=>{const V={...ie,isPositioned:M.current!==!1};q.current&&!Ex(N.current,V)&&(N.current=V,il.flushSync(()=>{h(V)}))})},[m,t,n,H,M]);Mw(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(Y=>({...Y,isPositioned:!1})))},[u]);const q=T.useRef(!1);Mw(()=>(q.current=!0,()=>{q.current=!1}),[]),Mw(()=>{if(C&&(I.current=C),k&&(j.current=k),C&&k){if(L.current)return L.current(C,k,K);K()}},[C,k,K,L,P]);const ue=T.useMemo(()=>({reference:I,floating:j,setReference:_,setFloating:E}),[_,E]),ae=T.useMemo(()=>({reference:C,floating:k}),[C,k]),te=T.useMemo(()=>{const Y={position:n,left:0,top:0};if(!ae.floating)return Y;const ie=gD(ae.floating,d.x),V=gD(ae.floating,d.y);return o?{...Y,transform:"translate("+ie+"px, "+V+"px)",...ZF(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:V}},[n,o,ae.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:K,refs:ue,elements:ae,floatingStyles:te}),[d,K,ue,ae,te])}const hre=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?mD({element:r.current,padding:a}).fn(n):{}:r?mD({element:r,padding:a}).fn(n):{}}}},pre=(e,t)=>({...ire(e),options:[e,t]}),mre=(e,t)=>({...sre(e),options:[e,t]}),gre=(e,t)=>({...ure(e),options:[e,t]}),yre=(e,t)=>({...ore(e),options:[e,t]}),bre=(e,t)=>({...lre(e),options:[e,t]}),vre=(e,t)=>({...cre(e),options:[e,t]}),wre=(e,t)=>({...hre(e),options:[e,t]});var xre="Arrow",YF=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return p.jsx(an.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});YF.displayName=xre;var _re=YF;function I1(e){const[t,n]=T.useState(void 0);return ri(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=e.offsetWidth,o=e.offsetHeight;n({width:s,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var NA="Popper",[XF,Qu]=vi(NA),[Sre,JF]=XF(NA),QF=e=>{const{__scopePopper:t,children:n}=e,[r,a]=T.useState(null);return p.jsx(Sre,{scope:t,anchor:r,onAnchorChange:a,children:n})};QF.displayName=NA;var eL="PopperAnchor",tL=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=JF(eL,n),s=T.useRef(null),o=kn(t,s);return T.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:p.jsx(an.div,{...a,ref:o})});tL.displayName=eL;var RA="PopperContent",[Ere,Cre]=XF(RA),nL=T.forwardRef((e,t)=>{var ke,Te,Se,Pe,Qe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:b,...v}=e,x=JF(RA,n),[w,_]=T.useState(null),E=kn(t,je=>_(je)),[C,k]=T.useState(null),I=I1(C),j=(I==null?void 0:I.width)??0,N=(I==null?void 0:I.height)??0,P=r+(i!=="center"?"-"+i:""),L=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},H=Array.isArray(u)?u:[u],M=H.length>0,K={padding:L,boundary:H.filter(kre),altBoundary:M},{refs:q,floatingStyles:ue,placement:ae,isPositioned:te,middlewareData:Y}=fre({strategy:"fixed",placement:P,whileElementsMounted:(...je)=>are(...je,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[pre({mainAxis:a+N,alignmentAxis:s}),l&&mre({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?gre():void 0,...K}),l&&yre({...K}),bre({...K,apply:({elements:je,rects:z,availableWidth:Ee,availableHeight:Ne})=>{const{width:fe,height:se}=z.reference,ee=je.floating.style;ee.setProperty("--radix-popper-available-width",`${Ee}px`),ee.setProperty("--radix-popper-available-height",`${Ne}px`),ee.setProperty("--radix-popper-anchor-width",`${fe}px`),ee.setProperty("--radix-popper-anchor-height",`${se}px`)}}),C&&wre({element:C,padding:o}),Are({arrowWidth:j,arrowHeight:N}),m&&vre({strategy:"referenceHidden",...K})]}),[ie,V]=iL(ae),J=Ua(b);ri(()=>{te&&(J==null||J())},[te,J]);const Q=(ke=Y.arrow)==null?void 0:ke.x,ne=(Te=Y.arrow)==null?void 0:Te.y,he=((Se=Y.arrow)==null?void 0:Se.centerOffset)!==0,[de,Ie]=T.useState();return ri(()=>{w&&Ie(window.getComputedStyle(w).zIndex)},[w]),p.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:te?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(Pe=Y.transformOrigin)==null?void 0:Pe.x,(Qe=Y.transformOrigin)==null?void 0:Qe.y].join(" "),...((Le=Y.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(Ere,{scope:n,placedSide:ie,onArrowChange:k,arrowX:Q,arrowY:ne,shouldHideArrow:he,children:p.jsx(an.div,{"data-side":ie,"data-align":V,...v,ref:E,style:{...v.style,animation:te?void 0:"none"}})})})});nL.displayName=RA;var rL="PopperArrow",Tre={top:"bottom",right:"left",bottom:"top",left:"right"},aL=T.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=Cre(rL,r),s=Tre[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(_re,{...a,ref:n,style:{...a.style,display:"block"}})})});aL.displayName=rL;function kre(e){return e!==null}var Are=e=>({name:"transformOrigin",options:e,fn(t){var x,w,_;const{placement:n,rects:r,middlewareData:a}=t,s=((x=a.arrow)==null?void 0:x.centerOffset)!==0,o=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[u,d]=iL(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=a.arrow)==null?void 0:w.x)??0)+o/2,g=(((_=a.arrow)==null?void 0:_.y)??0)+l/2;let b="",v="";return u==="bottom"?(b=s?h:`${m}px`,v=`${-l}px`):u==="top"?(b=s?h:`${m}px`,v=`${r.floating.height+l}px`):u==="right"?(b=`${-l}px`,v=s?h:`${g}px`):u==="left"&&(b=`${r.floating.width+l}px`,v=s?h:`${g}px`),{data:{x:b,y:v}}}});function iL(e){const[t,n="center"]=e.split("-");return[t,n]}var j1=QF,_y=tL,D1=nL,M1=aL,Nre="Portal",Up=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[a,i]=T.useState(!1);ri(()=>i(!0),[]);const s=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?V8.createPortal(p.jsx(an.div,{...r,ref:t}),s):null});Up.displayName=Nre;function Rre(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var Ka=e=>{const{present:t,children:n}=e,r=Ire(t),a=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),i=kn(r.ref,jre(a));return typeof n=="function"||r.isPresent?T.cloneElement(a,{ref:i}):null};Ka.displayName="Presence";function Ire(e){const[t,n]=T.useState(),r=T.useRef(null),a=T.useRef(e),i=T.useRef("none"),s=e?"mounted":"unmounted",[o,l]=Rre(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const u=nw(r.current);i.current=o==="mounted"?u:"none"},[o]),ri(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,g=nw(u);e?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),ri(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=g=>{const v=nw(r.current).includes(g.animationName);if(g.target===t&&v&&(l("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},m=g=>{g.target===t&&(i.current=nw(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:T.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function nw(e){return(e==null?void 0:e.animationName)||"none"}function jre(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Dre=f8[" useInsertionEffect ".trim().toString()]||ri;function Eo({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,s]=Mre({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:a;{const d=T.useRef(e!==void 0);T.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=T.useCallback(d=>{var h;if(o){const m=Ore(d)?d(e):d;m!==e&&((h=s.current)==null||h.call(s,m))}else i(d)},[o,e,i,s]);return[l,u]}function Mre({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),a=T.useRef(n),i=T.useRef(t);return Dre(()=>{i.current=t},[t]),T.useEffect(()=>{var s;a.current!==n&&((s=i.current)==null||s.call(i,n),a.current=n)},[n,a]),[n,r,i]}function Ore(e){return typeof e=="function"}var sL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Pre="VisuallyHidden",oL=T.forwardRef((e,t)=>p.jsx(an.span,{...e,ref:t,style:{...sL,...e.style}}));oL.displayName=Pre;var Fre=oL,[O1,x3e]=vi("Tooltip",[Qu]),P1=Qu(),lL="TooltipProvider",Lre=700,VT="tooltip.open",[Bre,IA]=O1(lL),cL=e=>{const{__scopeTooltip:t,delayDuration:n=Lre,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,s=T.useRef(!0),o=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),p.jsx(Bre,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:T.useCallback(u=>{o.current=u},[]),disableHoverableContent:a,children:i})};cL.displayName=lL;var _0="Tooltip",[$re,Sy]=O1(_0),uL=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,l=IA(_0,e.__scopeTooltip),u=P1(t),[d,h]=T.useState(null),m=Ha(),g=T.useRef(0),b=s??l.disableHoverableContent,v=o??l.delayDuration,x=T.useRef(!1),[w,_]=Eo({prop:r,defaultProp:a??!1,onChange:j=>{j?(l.onOpen(),document.dispatchEvent(new CustomEvent(VT))):l.onClose(),i==null||i(j)},caller:_0}),E=T.useMemo(()=>w?x.current?"delayed-open":"instant-open":"closed",[w]),C=T.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x.current=!1,_(!0)},[_]),k=T.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),I=T.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{x.current=!0,_(!0),g.current=0},v)},[v,_]);return T.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),p.jsx(j1,{...u,children:p.jsx($re,{scope:t,contentId:m,open:w,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayedRef.current?I():C()},[l.isOpenDelayedRef,I,C]),onTriggerLeave:T.useCallback(()=>{b?k():(window.clearTimeout(g.current),g.current=0)},[k,b]),onOpen:C,onClose:k,disableHoverableContent:b,children:n})})};uL.displayName=_0;var HT="TooltipTrigger",dL=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Sy(HT,n),i=IA(HT,n),s=P1(n),o=T.useRef(null),l=kn(t,o,a.onTriggerChange),u=T.useRef(!1),d=T.useRef(!1),h=T.useCallback(()=>u.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(_y,{asChild:!0,...s,children:p.jsx(an.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:qt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:qt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:qt(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:qt(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:qt(e.onBlur,a.onClose),onClick:qt(e.onClick,a.onClose)})})});dL.displayName=HT;var jA="TooltipPortal",[zre,Ure]=O1(jA,{forceMount:void 0}),fL=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=Sy(jA,t);return p.jsx(zre,{scope:t,forceMount:n,children:p.jsx(Ka,{present:n||i.open,children:p.jsx(Up,{asChild:!0,container:a,children:r})})})};fL.displayName=jA;var pp="TooltipContent",hL=T.forwardRef((e,t)=>{const n=Ure(pp,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,s=Sy(pp,e.__scopeTooltip);return p.jsx(Ka,{present:r||s.open,children:s.disableHoverableContent?p.jsx(pL,{side:a,...i,ref:t}):p.jsx(Vre,{side:a,...i,ref:t})})}),Vre=T.forwardRef((e,t)=>{const n=Sy(pp,e.__scopeTooltip),r=IA(pp,e.__scopeTooltip),a=T.useRef(null),i=kn(t,a),[s,o]=T.useState(null),{trigger:l,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=T.useCallback(()=>{o(null),h(!1)},[h]),g=T.useCallback((b,v)=>{const x=b.currentTarget,w={x:b.clientX,y:b.clientY},_=Wre(w,x.getBoundingClientRect()),E=Kre(w,_),C=Zre(v.getBoundingClientRect()),k=Xre([...E,...C]);o(k),h(!0)},[h]);return T.useEffect(()=>()=>m(),[m]),T.useEffect(()=>{if(l&&d){const b=x=>g(x,d),v=x=>g(x,l);return l.addEventListener("pointerleave",b),d.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",v)}}},[l,d,g,m]),T.useEffect(()=>{if(s){const b=v=>{const x=v.target,w={x:v.clientX,y:v.clientY},_=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),E=!Yre(w,s);_?m():E&&(m(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[l,d,s,u,m]),p.jsx(pL,{...e,ref:i})}),[Hre,qre]=O1(_0,{isInside:!1}),Gre=FW("TooltipContent"),pL=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,l=Sy(pp,n),u=P1(n),{onClose:d}=l;return T.useEffect(()=>(document.addEventListener(VT,d),()=>document.removeEventListener(VT,d)),[d]),T.useEffect(()=>{if(l.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),p.jsx(Bp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:p.jsxs(D1,{"data-state":l.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(Gre,{children:r}),p.jsx(Hre,{scope:n,isInside:!0,children:p.jsx(Fre,{id:l.contentId,role:"tooltip",children:a||r})})]})})});hL.displayName=pp;var mL="TooltipArrow",gL=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=P1(n);return qre(mL,n).isInside?null:p.jsx(M1,{...a,...r,ref:t})});gL.displayName=mL;function Wre(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Kre(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Zre(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function Yre(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function Xre(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Jre(t)}function Jre(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Qre=cL,eae=uL,tae=dL,nae=fL,rae=hL,aae=gL;function Gn({delayDuration:e=0,...t}){return p.jsx(Qre,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Kn({...e}){return p.jsx(Gn,{children:p.jsx(eae,{"data-slot":"tooltip",...e})})}function Zn({...e}){return p.jsx(tae,{"data-slot":"tooltip-trigger",...e})}function Yn({className:e,sideOffset:t=0,children:n,...r}){return p.jsx(nae,{children:p.jsxs(rae,{"data-slot":"tooltip-content",sideOffset:t,className:xt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,p.jsx(aae,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var sE={exports:{}},yD;function iae(){return yD||(yD=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function _(E){return E instanceof l?new l(E.type,_(E.content),E.alias):Array.isArray(E)?E.map(_):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(_){return Object.prototype.toString.call(_).slice(8,-1)},objId:function(_){return _.__id||Object.defineProperty(_,"__id",{value:++i}),_.__id},clone:function _(E,C){C=C||{};var k,I;switch(o.util.type(E)){case"Object":if(I=o.util.objId(E),C[I])return C[I];k={},C[I]=k;for(var j in E)E.hasOwnProperty(j)&&(k[j]=_(E[j],C));return k;case"Array":return I=o.util.objId(E),C[I]?C[I]:(k=[],C[I]=k,E.forEach(function(N,P){k[P]=_(N,C)}),k);default:return E}},getLanguage:function(_){for(;_;){var E=a.exec(_.className);if(E)return E[1].toLowerCase();_=_.parentElement}return"none"},setLanguage:function(_,E){_.className=_.className.replace(RegExp(a,"gi"),""),_.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var _=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(_){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==_)return E[C]}return null}},isActive:function(_,E,C){for(var k="no-"+E;_;){var I=_.classList;if(I.contains(E))return!0;if(I.contains(k))return!1;_=_.parentElement}return!!C}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(_,E){var C=o.util.clone(o.languages[_]);for(var k in E)C[k]=E[k];return C},insertBefore:function(_,E,C,k){k=k||o.languages;var I=k[_],j={};for(var N in I)if(I.hasOwnProperty(N)){if(N==E)for(var P in C)C.hasOwnProperty(P)&&(j[P]=C[P]);C.hasOwnProperty(N)||(j[N]=I[N])}var L=k[_];return k[_]=j,o.languages.DFS(o.languages,function(H,M){M===L&&H!=_&&(this[H]=j)}),j},DFS:function _(E,C,k,I){I=I||{};var j=o.util.objId;for(var N in E)if(E.hasOwnProperty(N)){C.call(E,N,E[N],k||N);var P=E[N],L=o.util.type(P);L==="Object"&&!I[j(P)]?(I[j(P)]=!0,_(P,C,null,I)):L==="Array"&&!I[j(P)]&&(I[j(P)]=!0,_(P,C,N,I))}}},plugins:{},highlightAll:function(_,E){o.highlightAllUnder(document,_,E)},highlightAllUnder:function(_,E,C){var k={callback:C,container:_,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var I=0,j;j=k.elements[I++];)o.highlightElement(j,E===!0,k.callback)},highlightElement:function(_,E,C){var k=o.util.getLanguage(_),I=o.languages[k];o.util.setLanguage(_,k);var j=_.parentElement;j&&j.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(j,k);var N=_.textContent,P={element:_,language:k,grammar:I,code:N};function L(M){P.highlightedCode=M,o.hooks.run("before-insert",P),P.element.innerHTML=P.highlightedCode,o.hooks.run("after-highlight",P),o.hooks.run("complete",P),C&&C.call(P.element)}if(o.hooks.run("before-sanity-check",P),j=P.element.parentElement,j&&j.nodeName.toLowerCase()==="pre"&&!j.hasAttribute("tabindex")&&j.setAttribute("tabindex","0"),!P.code){o.hooks.run("complete",P),C&&C.call(P.element);return}if(o.hooks.run("before-highlight",P),!P.grammar){L(o.util.encode(P.code));return}if(E&&r.Worker){var H=new Worker(o.filename);H.onmessage=function(M){L(M.data)},H.postMessage(JSON.stringify({language:P.language,code:P.code,immediateClose:!0}))}else L(o.highlight(P.code,P.grammar,P.language))},highlight:function(_,E,C){var k={code:_,grammar:E,language:C};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),l.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(_,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var I=new h;return m(I,I.head,_),d(_,I,E,I.head,0),b(I)},hooks:{all:{},add:function(_,E){var C=o.hooks.all;C[_]=C[_]||[],C[_].push(E)},run:function(_,E){var C=o.hooks.all[_];if(!(!C||!C.length))for(var k=0,I;I=C[k++];)I(E)}},Token:l};r.Prism=o;function l(_,E,C,k){this.type=_,this.content=E,this.alias=C,this.length=(k||"").length|0}l.stringify=function _(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(L){k+=_(L,C)}),k}var I={type:E.type,content:_(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},j=E.alias;j&&(Array.isArray(j)?Array.prototype.push.apply(I.classes,j):I.classes.push(j)),o.hooks.run("wrap",I);var N="";for(var P in I.attributes)N+=" "+P+'="'+(I.attributes[P]||"").replace(/"/g,"&quot;")+'"';return"<"+I.tag+' class="'+I.classes.join(" ")+'"'+N+">"+I.content+"</"+I.tag+">"};function u(_,E,C,k){_.lastIndex=E;var I=_.exec(C);if(I&&k&&I[1]){var j=I[1].length;I.index+=j,I[0]=I[0].slice(j)}return I}function d(_,E,C,k,I,j){for(var N in C)if(!(!C.hasOwnProperty(N)||!C[N])){var P=C[N];P=Array.isArray(P)?P:[P];for(var L=0;L<P.length;++L){if(j&&j.cause==N+","+L)return;var H=P[L],M=H.inside,K=!!H.lookbehind,q=!!H.greedy,ue=H.alias;if(q&&!H.pattern.global){var ae=H.pattern.toString().match(/[imsuy]*$/)[0];H.pattern=RegExp(H.pattern.source,ae+"g")}for(var te=H.pattern||H,Y=k.next,ie=I;Y!==E.tail&&!(j&&ie>=j.reach);ie+=Y.value.length,Y=Y.next){var V=Y.value;if(E.length>_.length)return;if(!(V instanceof l)){var J=1,Q;if(q){if(Q=u(te,ie,_,K),!Q||Q.index>=_.length)break;var Ie=Q.index,ne=Q.index+Q[0].length,he=ie;for(he+=Y.value.length;Ie>=he;)Y=Y.next,he+=Y.value.length;if(he-=Y.value.length,ie=he,Y.value instanceof l)continue;for(var de=Y;de!==E.tail&&(he<ne||typeof de.value=="string");de=de.next)J++,he+=de.value.length;J--,V=_.slice(ie,he),Q.index-=ie}else if(Q=u(te,0,V,K),!Q)continue;var Ie=Q.index,ke=Q[0],Te=V.slice(0,Ie),Se=V.slice(Ie+ke.length),Pe=ie+V.length;j&&Pe>j.reach&&(j.reach=Pe);var Qe=Y.prev;Te&&(Qe=m(E,Qe,Te),ie+=Te.length),g(E,Qe,J);var Le=new l(N,M?o.tokenize(ke,M):ke,ue,ke);if(Y=m(E,Qe,Le),Se&&m(E,Y,Se),J>1){var je={cause:N+","+L,reach:Pe};d(_,E,C,Y.prev,ie,je),j&&je.reach>j.reach&&(j.reach=je.reach)}}}}}}function h(){var _={value:null,prev:null,next:null},E={value:null,prev:_,next:null};_.next=E,this.head=_,this.tail=E,this.length=0}function m(_,E,C){var k=E.next,I={value:C,prev:E,next:k};return E.next=I,k.prev=I,_.length++,I}function g(_,E,C){for(var k=E.next,I=0;I<C&&k!==_.tail;I++)k=k.next;E.next=k,k.prev=E,_.length-=I}function b(_){for(var E=[],C=_.head.next;C!==_.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(_){var E=JSON.parse(_.data),C=E.language,k=E.code,I=E.immediateClose;r.postMessage(o.highlight(k,o.languages[C],C)),I&&r.close()},!1)),o;var v=o.util.currentScript();v&&(o.filename=v.src,v.hasAttribute("data-manual")&&(o.manual=!0));function x(){o.manual||o.highlightAll()}if(!o.manual){var w=document.readyState;w==="loading"||w==="interactive"&&v&&v.defer?document.addEventListener("DOMContentLoaded",x):window.requestAnimationFrame?window.requestAnimationFrame(x):window.setTimeout(x,16)}return o}(t);e.exports&&(e.exports=n),typeof Zd<"u"&&(Zd.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading…",a=function(v,x){return"✖ Error "+v+" while fetching file: "+x},i="✖ Error: File does not exist or is empty",s={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",h="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function m(v,x,w){var _=new XMLHttpRequest;_.open("GET",v,!0),_.onreadystatechange=function(){_.readyState==4&&(_.status<400&&_.responseText?x(_.responseText):_.status>=400?w(a(_.status,_.statusText)):w(i))},_.send(null)}function g(v){var x=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(v||"");if(x){var w=Number(x[1]),_=x[2],E=x[3];return _?E?[w,Number(E)]:[w,void 0]:[w,w]}}n.hooks.add("before-highlightall",function(v){v.selector+=", "+h}),n.hooks.add("before-sanity-check",function(v){var x=v.element;if(x.matches(h)){v.code="",x.setAttribute(o,l);var w=x.appendChild(document.createElement("CODE"));w.textContent=r;var _=x.getAttribute("data-src"),E=v.language;if(E==="none"){var C=(/\.(\w+)$/.exec(_)||[,"none"])[1];E=s[C]||C}n.util.setLanguage(w,E),n.util.setLanguage(x,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),m(_,function(I){x.setAttribute(o,u);var j=g(x.getAttribute("data-range"));if(j){var N=I.split(/\r\n?|\n/g),P=j[0],L=j[1]==null?N.length:j[1];P<0&&(P+=N.length),P=Math.max(0,Math.min(P-1,N.length)),L<0&&(L+=N.length),L=Math.max(0,Math.min(L,N.length)),I=N.slice(P,L).join(`
`),x.hasAttribute("data-start")||x.setAttribute("data-start",String(P+1))}w.textContent=I,n.highlightElement(w)},function(I){x.setAttribute(o,d),w.textContent=I})}}),n.plugins.fileHighlight={highlight:function(x){for(var w=(x||document).querySelectorAll(h),_=0,E;E=w[_++];)n.highlightElement(E)}};var b=!1;n.fileHighlight=function(){b||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),b=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(sE)),sE.exports}var sae=iae();const oae=bi(sae);var bD={},vD;function lae(){return vD||(vD=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),bD}lae();var wD={},xD;function cae(){return xD||(xD=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),wD}cae();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,s=0;s<a.length;s++)i[a[s]]=e.languages.bash[a[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,b=m.length;g<b;g++){var v=m[g];if(v.type!=="code"){h(v.content);continue}var x=v.content[1],w=v.content[3];if(x&&w&&x.type==="code-language"&&w.type==="code-block"&&typeof x.content=="string"){var _=x.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");_=(/[a-z][\w-]*/i.exec(_)||[""])[0].toLowerCase();var E="language-"+_;w.alias?typeof w.alias=="string"?w.alias=[w.alias,E]:w.alias.push(E):w.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",m=0,g=d.classes.length;m<g;m++){var b=d.classes[m],v=/language-(.+)/.exec(b);if(v){h=v[1];break}}var x=e.languages[h];if(x)d.content=e.highlight(u(d.content),x,h);else if(h&&h!=="none"&&e.plugins.autoloader){var w="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=w,e.plugins.autoloader.loadLanguages(h,function(){var _=document.getElementById(w);_&&(_.innerHTML=e.highlight(_.textContent,e.languages[h],h))})}}});var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var h=d.replace(s,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var b;return g[1]==="x"?b=parseInt(g.slice(2),16):b=Number(g.slice(1)),l(b)}else{var v=o[g];return v||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(o,l){l=(l||"").replace(/m/g,"")+"m";var u=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(u,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(i),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var _D={},SD;function uae(){return SD||(SD=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),_D}uae();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const dae=({lang:e,code:t,isStreaming:n=!1})=>{const{foldStreamingCodeBlocks:r}=pr(dn(b=>({prismThemeUrl:b.prismThemeUrl,theme:b.theme,foldStreamingCodeBlocks:b.foldStreamingCodeBlocks}))),[a,i]=T.useState(!1),[s,o]=T.useState(n?r:!1),l=T.useRef(null),u=T.useCallback(()=>{if(l.current&&t)try{l.current.style.whiteSpace!=="pre-wrap"&&(l.current.style.whiteSpace="pre-wrap"),l.current.textContent=t,oae.highlightElement(l.current)}catch(b){console.error("Prism highlight error:",b),l.current.textContent=t}else l.current&&(l.current.textContent="")},[t]);T.useEffect(()=>{s||u()},[t,e,s,u]);const d=async()=>{try{await navigator.clipboard.writeText(t),i(!0),Ge.success("Code copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(b){Ge.error("Failed to copy code."),console.error("Clipboard copy failed:",b)}},h=()=>{const b=s;o(v=>!v),b&&setTimeout(u,0)},m=e?`language-${e}`:"language-plaintext",g=T.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":s?"Unfold code":"Fold code",children:p.jsx(p1,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:s?"Unfold":"Fold"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:d,"aria-label":"Copy code",children:a?p.jsx(Ri,{className:"h-3.5 w-3.5 text-green-500"}):p.jsx(aA,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:"Copy"})]})})]})]}),p.jsx("div",{})]}),!s&&p.jsx("div",{className:"overflow-hidden w-full",children:p.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:p.jsx("code",{ref:l,className:m+" block"})})}),s&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:h,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:g})})]})},Vp=T.memo(dae);var lt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(lt||(lt={}));const ED={[lt.EPERM]:"Operation not permitted",[lt.ENOENT]:"No such file or directory",[lt.EINTR]:"Interrupted system call",[lt.EIO]:"Input/output error",[lt.ENXIO]:"No such device or address",[lt.EBADF]:"Bad file descriptor",[lt.EAGAIN]:"Resource temporarily unavailable",[lt.ENOMEM]:"Cannot allocate memory",[lt.EACCES]:"Permission denied",[lt.EFAULT]:"Bad address",[lt.ENOTBLK]:"Block device required",[lt.EBUSY]:"Resource busy or locked",[lt.EEXIST]:"File exists",[lt.EXDEV]:"Invalid cross-device link",[lt.ENODEV]:"No such device",[lt.ENOTDIR]:"File is not a directory",[lt.EISDIR]:"File is a directory",[lt.EINVAL]:"Invalid argument",[lt.ENFILE]:"Too many open files in system",[lt.EMFILE]:"Too many open files",[lt.ETXTBSY]:"Text file busy",[lt.EFBIG]:"File is too big",[lt.ENOSPC]:"No space left on disk",[lt.ESPIPE]:"Illegal seek",[lt.EROFS]:"Cannot modify a read-only file system",[lt.EMLINK]:"Too many links",[lt.EPIPE]:"Broken pipe",[lt.EDOM]:"Numerical argument out of domain",[lt.ERANGE]:"Numerical result out of range",[lt.EDEADLK]:"Resource deadlock would occur",[lt.ENAMETOOLONG]:"File name too long",[lt.ENOLCK]:"No locks available",[lt.ENOSYS]:"Function not implemented",[lt.ENOTEMPTY]:"Directory is not empty",[lt.ELOOP]:"Too many levels of symbolic links",[lt.ENOMSG]:"No message of desired type",[lt.EBADE]:"Invalid exchange",[lt.EBADR]:"Invalid request descriptor",[lt.EXFULL]:"Exchange full",[lt.ENOANO]:"No anode",[lt.EBADRQC]:"Invalid request code",[lt.ENOSTR]:"Device not a stream",[lt.ENODATA]:"No data available",[lt.ETIME]:"Timer expired",[lt.ENOSR]:"Out of streams resources",[lt.ENONET]:"Machine is not on the network",[lt.EREMOTE]:"Object is remote",[lt.ENOLINK]:"Link has been severed",[lt.ECOMM]:"Communication error on send",[lt.EPROTO]:"Protocol error",[lt.EBADMSG]:"Bad message",[lt.EOVERFLOW]:"Value too large for defined data type",[lt.EBADFD]:"File descriptor in bad state",[lt.ESTRPIPE]:"Streams pipe error",[lt.ENOTSOCK]:"Socket operation on non-socket",[lt.EDESTADDRREQ]:"Destination address required",[lt.EMSGSIZE]:"Message too long",[lt.EPROTOTYPE]:"Protocol wrong type for socket",[lt.ENOPROTOOPT]:"Protocol not available",[lt.EPROTONOSUPPORT]:"Protocol not supported",[lt.ESOCKTNOSUPPORT]:"Socket type not supported",[lt.ENOTSUP]:"Operation is not supported",[lt.ENETDOWN]:"Network is down",[lt.ENETUNREACH]:"Network is unreachable",[lt.ENETRESET]:"Network dropped connection on reset",[lt.ETIMEDOUT]:"Connection timed out",[lt.ECONNREFUSED]:"Connection refused",[lt.EHOSTDOWN]:"Host is down",[lt.EHOSTUNREACH]:"No route to host",[lt.EALREADY]:"Operation already in progress",[lt.EINPROGRESS]:"Operation now in progress",[lt.ESTALE]:"Stale file handle",[lt.EREMOTEIO]:"Remote I/O error",[lt.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(lt[t],ED[lt[t]],n,r)}constructor(t,n=ED[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=lt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var oE={exports:{}},CD;function fae(){return CD||(CD=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,h||l,m),b=n?n+u:u;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],g]:l._events[b].push(g):(l._events[b]=g,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,b=new Array(g);m<g;m++)b[m]=h[m].fn;return b},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,m,g,b){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],w=arguments.length,_,E;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,m),!0;case 5:return x.fn.call(x.context,d,h,m,g),!0;case 6:return x.fn.call(x.context,d,h,m,g,b),!0}for(E=1,_=new Array(w-1);E<w;E++)_[E-1]=arguments[E];x.fn.apply(x.context,_)}else{var C=x.length,k;for(E=0;E<C;E++)switch(x[E].once&&this.removeListener(u,x[E].fn,void 0,!0),w){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,d);break;case 3:x[E].fn.call(x[E].context,d,h);break;case 4:x[E].fn.call(x[E].context,d,h,m);break;default:if(!_)for(k=1,_=new Array(w-1);k<w;k++)_[k-1]=arguments[k];x[E].fn.apply(x[E].context,_)}}return!0},o.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,m){var g=n?n+u:u;if(!this._events[g])return this;if(!d)return s(this,g),this;var b=this._events[g];if(b.fn)b.fn===d&&(!m||b.once)&&(!h||b.context===h)&&s(this,g);else{for(var v=0,x=[],w=b.length;v<w;v++)(b[v].fn!==d||m&&!b[v].once||h&&b[v].context!==h)&&x.push(b[v]);x.length?this._events[g]=x.length===1?x[0]:x:s(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(oE)),oE.exports}var hae=fae();const DA=bi(hae);var o8;let pae=class extends DA{constructor(n){super();Ta(this,o8,"List");Ta(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),s=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),s}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(o8=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function TD(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function wr(e){throw e}const kD=Intl.NumberFormat("en",{notation:"compact"});kD.format.bind(kD);function kf(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function mae(e){try{return JSON.parse(e),!0}catch{return!1}}function qT(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function MA(e){return e.at(0).toUpperCase()+e.slice(1)}const gae=new TextEncoder;function Wd(e){return gae.encode(e)}const AD=new TextDecoder;function OA(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return AD.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),AD.decode(t)}function S0(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=S0(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function yae(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var bae={};let vae="process"in globalThis&&"env"in globalThis.process&&bae.U_DEBUG=="true";function E0(...e){vae&&console.debug("[U]",...e)}const ND=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],wae=[...ND,...ND.map(e=>MA(e)),"char"],PA=/^(u?int|float)(8|16|32|64|128)$/i;function yL(e){return e=="char"?"uint8":e.toLowerCase()}function FA(e){return PA.test(e.toString())}function GT(e){return e=="char"||PA.test(e.toString().toLowerCase())}function xae(e){if(!GT(e))throw new TypeError("Not a valid primitive type: "+e)}const RD=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function bL(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function _ae(e){return e!=null&&typeof e=="object"&&"struct"in e}function F1(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function bo(e){return typeof e=="function"&&Symbol.metadata in e&&_ae(e[Symbol.metadata])}function Ey(e){return e!=null&&typeof e=="object"&&bo(e.constructor)}function vL(e){if(!Ey(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function LA(e){return Ey(e)||bo(e)}function wL(e){if(!LA(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function BA(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Hr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Hr(e[i]);return a}if(typeof e=="string")return xae(e),+yL(e).match(PA)[2]/8;if(BA(e))return e[Symbol.size];wL(e);const t=bo(e)?e:e.constructor;F1(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(bo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(Ey(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Hr(i)):r+=Hr(i);continue}if(typeof a.length!="string")continue;let s=0;for(let o=0;o<e[a.length];o++)s+=Hr(LA(i[o])?i[o]:a.type);n.isUnion?r=Math.max(r,s):r+=s}return r}function Sae(e,t){var i;wL(e);const n=bo(e)?e:e.constructor;F1(n);const{struct:r}=n[Symbol.metadata];if(bo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??wr(new Error("Struct does not have member: "+t));let a=0;for(const s of r.members.values()){if(s.name==t)return a;const o=e[s.name];a+=Hr(LA(o)?o:s.type)}throw new Error("Struct does not have member: "+t)}function Eae(e,t){return Math.ceil(e/t)*t}function Af(e={}){return function(n,r){const a=new Map;let i=0,s=!1;for(const{name:o,type:l,length:u}of bL(r)){if(!GT(l)&&!bo(l))throw new TypeError("Not a valid type: "+l);if(typeof u=="string"){const m=a.get(u);if(!m)throw new Error(`"${u}" is undefined or declared after "${o}"`);if(!FA(m.type))throw new Error(`"${u}" is not a number and cannot be used to count "${o}"`)}let d=`${typeof l=="string"?l:l.name} ${o}`;u!==void 0&&(d+=`[${u}]`),a.set(o,{name:o,staticOffset:e.isUnion?0:i,type:GT(l)?yL(l):l,length:u,decl:d});const h=typeof u=="string"||bo(l)&&l[Symbol.metadata].struct.isDynamic?0:Hr(l)*(u||1);s||(s=bo(l)?l[Symbol.metadata].struct.isDynamic:typeof u=="string"),i=e.isUnion?Math.max(i,h):i+h,i=Eae(i,e.align||1),E0("define",n.name+"."+o)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:s,isUnion:e.isUnion??!1},n}}function C0(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return bL(r).push({name:a,type:e,length:t}),n}}function xL(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:wr(new Error("Array lengths must be natural numbers"))}function ei(e){if(BA(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();vL(e),F1(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Hr(e),a=new Uint8Array(r),i=new DataView(a.buffer);E0("serialize",e.constructor.name);let s=0,o=0;for(const l of n.values()){const u=xL(e,l);E0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),s=o,o+=Ey(h)?Hr(h):Hr(l.type),!FA(l.type)){a.set(h?ei(h):new Uint8Array(Hr(l.type)),s);continue}const m=`set${MA(l.type)}`;if(m=="setInt64"){i.setBigInt64(s,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(s,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(s+(t.bigEndian?8:0),h&RD,!t.bigEndian),i.setBigInt64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(s+(t.bigEndian?8:0),h&RD,!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(s+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](s,Number(h),!t.bigEndian)}}return a}function L1(e,t){const n=yae(t);if(BA(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);vL(e),F1(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);E0("deserialize",e.constructor.name);let s=0,o=0;for(const l of a.values()){const u=xL(e,l);E0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name]:e;const m=u!=-1?d:l.name,g=h[m]===null||h[m]===void 0,b=g&&bo(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(s=o,!Ey(h[m])&&!b&&(o+=Hr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(s))+e[l.name].slice(d+1);continue}if(!FA(l.type)){if(b&&bo(l.type))h[m]??(h[m]=new l.type);else if(g)continue;L1(h[m],new Uint8Array(n.subarray(s))),o+=Hr(h[m]);continue}u&&u!=-1&&(h||(h=[]));const v=`get${MA(l.type)}`;if(v=="getInt64"){h[m]=i.getBigInt64(s,!r.bigEndian);continue}if(v=="getUint64"){h[m]=i.getBigUint64(s,!r.bigEndian);continue}if(v=="getInt128"){h[m]=i.getBigInt64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(v=="getUint128"){h[m]=i.getBigUint64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(v=="getFloat128"){h[m]=i.getFloat64(s+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[v](s,!r.bigEndian)}}}function Cae(e){function t(n,r){return typeof n=="number"||typeof n=="string"?C0(e,n):C0(e)(n,r)}return t}const xn=Object.fromEntries(wae.map(e=>[e,Cae(e)]));function Tae(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const No={root:"/",pwd:"/",credentials:Tae({uid:0,gid:0}),descriptors:new Map};function _L(e,t){let n="",r=0,a=-1,i=0,s="\0";for(let o=0;o<=e.length;++o){if(o<e.length)s=e[o];else{if(s=="/")break;s="/"}if(s=="/"){if(!(a===o-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}else if(n.length!==0){n="",r=0,a=o,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else s==="."&&i!==-1?++i:i=-1}return n}function wc(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:No.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=_L(n,!r),r?`/${n}`:n.length?n:"/"}function kae(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=_L(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function fr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?kae(t):"."}function SL(e,t){if(e===t||(e=wc.call(this,e),t=wc.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,s=t.length-i,o=a<s?a:s;let l=-1,u=0;for(;u<o;u++){const h=e[n+u];if(h!==t[i+u])break;h==="/"&&(l=u)}if(u===o)if(s>o){if(t[i+u]==="/")return t.slice(i+u+1);if(u===0)return t.slice(i+u)}else a>o&&(e[n+u]==="/"?l=u:u===0&&(l=0));let d="";for(u=n+l+1;u<=r;++u)(u===r||e[u]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function sr(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function mp(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Qo(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,s=-1,o=!0,l=e.length-1,u=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){i=l+1;break}continue}s===-1&&(o=!1,s=l+1),e[l]==="."?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}if(s!==-1){const d=i===0&&t?1:i;a===-1||u===0||u===1&&a===s-1&&a===i+1?n.base=n.name=e.slice(d,s):(n.name=e.slice(d,a),n.base=e.slice(d,s),n.ext=e.slice(a,s))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(vn||(vn={}));vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";const Aae=new pae;function Nae(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};Aae.add(n),Fae(n)}function Rae(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+fr(i,e.path)}function ed(e){return function(t,n={}){return Nae(e,Rae(t,n)),t}}ed(vn.EMERG);const Iae=ed(vn.ALERT),B1=ed(vn.CRIT),Gi=ed(vn.ERR),hi=ed(vn.WARN),$A=ed(vn.NOTICE),EL=ed(vn.INFO),Hg=ed(vn.DEBUG);function jae(e,t){return`\x1B[${t}m${e}\x1B[0m`}function Dae(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[jae(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";let Mae=e=>[...Dae(e),e.message];function Oae(e){const t=Mae(e);return typeof t=="string"?[t]:Array.from(t)}let Pae=console.error;function Fae(e){e.level>Lae||Pae(...Oae(e))}let Lae=vn.ALERT;function zA(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function Bae(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function $ae(e,t){if(typeof t!="object"||t===null)throw Gi(new Ue(lt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){Hg("Using default for option: "+n);continue}throw Gi(new Ue(lt.EINVAL,"Missing required option: "+n))}const i=(u,d=a)=>{var h;return typeof u=="function"?Symbol.hasInstance in u&&u.prototype?a instanceof u:u(a):typeof a===u||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===u};if(Array.isArray(r.type)?r.type.some(u=>i(u)):i(r.type))continue;const s=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,o=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw Gi(new Ue(lt.EINVAL,`Incorrect type for "${n}": ${s} (expected ${l})`))}}function CL(e){return e!=null&&typeof e=="object"&&"backend"in e&&zA(e.backend)}const UA=0,Ra=4,aa=2,Ow=1,VA=1,zae=2,Uae=4,TL=0,di=1,sc=2,$1=64,z1=128,Vae=256,U1=512,yf=1024,Hae=65536,qae=262144,Gae=131072,V1=1052672,Wae=4096,Kae=32768,Zae=16384,Yae=2048,Ar=61440,Nf=49152,Nc=40960,vo=32768,Rf=24576,wa=16384,If=8192,jf=4096,Cy=2048,Ty=1024,Xae=512,Jae=448,kL=256,AL=128,NL=64,Qae=56,RL=32,IL=16,jL=8,eie=7,DL=4,ML=2,OL=1,tie=0,Mi=4294967295,PL=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:VA,COPYFILE_FICLONE:zae,COPYFILE_FICLONE_FORCE:Uae,F_OK:UA,O_APPEND:yf,O_CREAT:$1,O_DIRECT:Zae,O_DIRECTORY:Hae,O_DSYNC:Wae,O_EXCL:z1,O_NOATIME:qae,O_NOCTTY:Vae,O_NOFOLLOW:Gae,O_NONBLOCK:Yae,O_RDONLY:TL,O_RDWR:sc,O_SYMLINK:Kae,O_SYNC:V1,O_TRUNC:U1,O_WRONLY:di,R_OK:Ra,S_IFBLK:Rf,S_IFCHR:If,S_IFDIR:wa,S_IFIFO:jf,S_IFLNK:Nc,S_IFMT:Ar,S_IFREG:vo,S_IFSOCK:Nf,S_IRGRP:RL,S_IROTH:DL,S_IRUSR:kL,S_IRWXG:Qae,S_IRWXO:eie,S_IRWXU:Jae,S_ISGID:Ty,S_ISUID:Cy,S_ISVTX:Xae,S_IWGRP:IL,S_IWOTH:ML,S_IWUSR:AL,S_IXGRP:jL,S_IXOTH:OL,S_IXUSR:NL,UV_FS_O_FILEMAP:tie,W_OK:aa,X_OK:Ow,size_max:Mi},Symbol.toStringTag,{value:"Module"})),rw=BigInt(1e3);class FL{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:s,size:o,mode:l,ino:u,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(s??0),this.size=this._convert(o??0),this.ino=this._convert(u??0),this.mode=this._convert(l??420&vo),(this.mode&Ar)==0&&(this.mode=this.mode|this._convert(vo)),Object.assign(this,d)}isFile(){return(this.mode&Ar)===vo}isDirectory(){return(this.mode&Ar)===wa}isSymbolicLink(){return(this.mode&Ar)===Nc}isSocket(){return(this.mode&Ar)===Nf}isBlockDevice(){return(this.mode&Ar)===Rf}isCharacterDevice(){return(this.mode&Ar)===If}isFIFO(){return(this.mode&Ar)===jf}toJSON(){return kf(this,WT)}hasAccess(t,n){return gr(n,this._isBigint?new Rc(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*rw}get mtimeNs(){return BigInt(this.mtimeMs)*rw}get ctimeNs(){return BigInt(this.ctimeMs)*rw}get birthtimeNs(){return BigInt(this.birthtimeMs)*rw}}function LL(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<Mi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<Mi?e.gid=n:r=!1,r}class Rc extends FL{constructor(){super(...arguments),this._isBigint=!1}}class Df extends FL{constructor(){super(...arguments),this._isBigint=!0}}function nie(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class rie{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Mi,this.ffree=Mi}}class aie{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(Mi),this.ffree=BigInt(Mi)}}var Pr=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],b);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},bn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},HA=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const fs=0,iie=1024;let ID=(()=>{var e,t;let n=[Af()],r,a=[],i,s,o=[],l=[],u,d=[],h=[],m,g=[],b=[],v,x=[],w=[];return i=class{get key(){return this._key}set key(_){this._key=_,this.keySize=_.length}get value(){return this._value.subarray(0,this.valueSize)}set value(_){this._value=_,this.valueSize=_.length}constructor(_,E){this.keySize=bn(this,o,0),this.valueSize=(bn(this,l),bn(this,d,0)),this._key=(bn(this,h),bn(this,g,"")),this._value=(bn(this,b),bn(this,x,new Uint8Array(iie))),bn(this,w),_&&(this.key=_),E&&(this.value=E)}},HA(i,"Attribute"),(()=>{const _=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=xn).uint32.bind(e)],u=[(t=xn).uint32.bind(t)],m=[xn.char("keySize")],v=[xn.uint8("valueSize")],Pr(null,null,s,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:_},o,l),Pr(null,null,u,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:_},d,h),Pr(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:_},g,b),Pr(null,null,v,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:_},x,w),Pr(null,r={value:i},n,{kind:"class",name:i.name,metadata:_},null,a),i=r.value,_&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_}),bn(i,a)})(),i})(),zu=(()=>{var e;let t=[Af()],n,r=[],a,i,s=[],o=[],l,u=[],d=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new ID(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=bn(this,s,0),this.data=(bn(this,o),bn(this,u,[])),bn(this,d)}},HA(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=xn).uint32.bind(e)],l=[C0(ID,"size")],Pr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},s,o),Pr(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},u,d),Pr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),bn(a,r)})(),a})();const WT=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],sie=4;var Wi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Wi||(Wi={}));let va=(()=>{var e,t,n,r,a,i,s,o,l,u,d,h,m,g,b,v;let x=[Af()],w,_=[],E,C,k=[],I=[],j,N=[],P=[],L,H=[],M=[],K,q=[],ue=[],ae,te=[],Y=[],ie,V=[],J=[],Q,ne=[],he=[],de,Ie=[],ke=[],Te,Se=[],Pe=[],Qe,Le=[],je=[],z,Ee=[],Ne=[],fe,se=[],ee=[],xe,Fe=[],Ce=[],We,Nt=[],it=[],St,Ft=[],Mt=[],Kt,be=[],D=[],W,pe=[],De=[],ve,Ae=[],le=[];var ft=E=class{constructor(vt){if(this.data=bn(this,k,qT(0,Mi)),this.__data_old=(bn(this,I),bn(this,N,0)),this.size=(bn(this,P),bn(this,H,0)),this.mode=(bn(this,M),bn(this,q,0)),this.nlink=(bn(this,ue),bn(this,te,1)),this.uid=(bn(this,Y),bn(this,V,0)),this.gid=(bn(this,J),bn(this,ne,0)),this.atimeMs=(bn(this,he),bn(this,Ie,Date.now())),this.birthtimeMs=(bn(this,ke),bn(this,Se,Date.now())),this.mtimeMs=(bn(this,Pe),bn(this,Le,Date.now())),this.ctimeMs=(bn(this,je),bn(this,Ee,Date.now())),this.ino=(bn(this,Ne),bn(this,se,qT(0,Mi))),this.__ino_old=(bn(this,ee),bn(this,Fe,0)),this.flags=(bn(this,Ce),bn(this,Nt,0)),this.__after_flags=(bn(this,it),bn(this,Ft,0)),this.version=(bn(this,Mt),bn(this,be,0)),this.__padding=(bn(this,D),bn(this,pe,[])),this.attributes=(bn(this,De),bn(this,Ae,new zu)),bn(this,le),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<Hr(ft))throw B1(new Ue(lt.EIO,"Buffer is too small to create an inode"));L1(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...kf(this,WT),attributes:this.attributes}}toStats(){return new Rc(this)}update(vt){if(!vt)return!1;let F=!1;for(const $e of WT)vt[$e]!==void 0&&($e=="ino"||$e=="data"||this[$e]!==vt[$e]&&($e=="atimeMs"&&this.flags&Wi.NoAtime||(this[$e]=vt[$e],F=!0)));return vt.attributes&&(this.attributes=vt.attributes,F=!0),F&&(this.ctimeMs=Date.now()),F}};return HA(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=xn).uint32.bind(e)],j=[(t=xn).uint32.bind(t)],L=[(n=xn).uint32.bind(n)],K=[(r=xn).uint16.bind(r)],ae=[(a=xn).uint32.bind(a)],ie=[(i=xn).uint32.bind(i)],Q=[(s=xn).uint32.bind(s)],de=[(o=xn).float64.bind(o)],Te=[(l=xn).float64.bind(l)],Qe=[(u=xn).float64.bind(u)],z=[(d=xn).float64.bind(d)],fe=[(h=xn).uint32.bind(h)],xe=[(m=xn).uint32.bind(m)],We=[(g=xn).uint32.bind(g)],St=[(b=xn).uint16.bind(b)],Kt=[(v=xn).uint32.bind(v)],W=[xn.uint8(48)],ve=[C0(zu)],Pr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:F=>"data"in F,get:F=>F.data,set:(F,$e)=>{F.data=$e}},metadata:vt},k,I),Pr(null,null,j,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:F=>"__data_old"in F,get:F=>F.__data_old,set:(F,$e)=>{F.__data_old=$e}},metadata:vt},N,P),Pr(null,null,L,{kind:"field",name:"size",static:!1,private:!1,access:{has:F=>"size"in F,get:F=>F.size,set:(F,$e)=>{F.size=$e}},metadata:vt},H,M),Pr(null,null,K,{kind:"field",name:"mode",static:!1,private:!1,access:{has:F=>"mode"in F,get:F=>F.mode,set:(F,$e)=>{F.mode=$e}},metadata:vt},q,ue),Pr(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:F=>"nlink"in F,get:F=>F.nlink,set:(F,$e)=>{F.nlink=$e}},metadata:vt},te,Y),Pr(null,null,ie,{kind:"field",name:"uid",static:!1,private:!1,access:{has:F=>"uid"in F,get:F=>F.uid,set:(F,$e)=>{F.uid=$e}},metadata:vt},V,J),Pr(null,null,Q,{kind:"field",name:"gid",static:!1,private:!1,access:{has:F=>"gid"in F,get:F=>F.gid,set:(F,$e)=>{F.gid=$e}},metadata:vt},ne,he),Pr(null,null,de,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:F=>"atimeMs"in F,get:F=>F.atimeMs,set:(F,$e)=>{F.atimeMs=$e}},metadata:vt},Ie,ke),Pr(null,null,Te,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:F=>"birthtimeMs"in F,get:F=>F.birthtimeMs,set:(F,$e)=>{F.birthtimeMs=$e}},metadata:vt},Se,Pe),Pr(null,null,Qe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:F=>"mtimeMs"in F,get:F=>F.mtimeMs,set:(F,$e)=>{F.mtimeMs=$e}},metadata:vt},Le,je),Pr(null,null,z,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:F=>"ctimeMs"in F,get:F=>F.ctimeMs,set:(F,$e)=>{F.ctimeMs=$e}},metadata:vt},Ee,Ne),Pr(null,null,fe,{kind:"field",name:"ino",static:!1,private:!1,access:{has:F=>"ino"in F,get:F=>F.ino,set:(F,$e)=>{F.ino=$e}},metadata:vt},se,ee),Pr(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:F=>"__ino_old"in F,get:F=>F.__ino_old,set:(F,$e)=>{F.__ino_old=$e}},metadata:vt},Fe,Ce),Pr(null,null,We,{kind:"field",name:"flags",static:!1,private:!1,access:{has:F=>"flags"in F,get:F=>F.flags,set:(F,$e)=>{F.flags=$e}},metadata:vt},Nt,it),Pr(null,null,St,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:F=>"__after_flags"in F,get:F=>F.__after_flags,set:(F,$e)=>{F.__after_flags=$e}},metadata:vt},Ft,Mt),Pr(null,null,Kt,{kind:"field",name:"version",static:!1,private:!1,access:{has:F=>"version"in F,get:F=>F.version,set:(F,$e)=>{F.version=$e}},metadata:vt},be,D),Pr(null,null,W,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:F=>"__padding"in F,get:F=>F.__padding,set:(F,$e)=>{F.__padding=$e}},metadata:vt},pe,De),Pr(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:F=>"attributes"in F,get:F=>F.attributes,set:(F,$e)=>{F.attributes=$e}},metadata:vt},Ae,le),Pr(null,w={value:E},x,{kind:"class",name:E.name,metadata:vt},null,_),ft=E=w.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),bn(E,_)})(),ft=E})();function oie(e){return(e.mode&Ar)===vo}function Co(e){return(e.mode&Ar)===wa}function gp(e){return(e.mode&Ar)===Nc}function lie(e){return(e.mode&Ar)===Nf}function T0(e){return(e.mode&Ar)===Rf}function k0(e){return(e.mode&Ar)===If}function cie(e){return(e.mode&Ar)===jf}function gr(e,t,n){const r=(e==null?void 0:e.credentials)||No.credentials;if(gp(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&kL&&(a|=Ra),t.mode&AL&&(a|=aa),t.mode&NL&&(a|=Ow)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&RL&&(a|=Ra),t.mode&IL&&(a|=aa),t.mode&jL&&(a|=Ow)),t.mode&DL&&(a|=Ra),t.mode&ML&&(a|=aa),t.mode&OL&&(a|=Ow),(a&n)===n}const jD=1;class Cx extends Map{constructor(){super(...arguments),this.maxSize=Mi}toJSON(){return{version:jD,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Hr(va);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&Ar)!=wa)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())sr(a)==t&&a!=t&&(r[mp(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&Ar)!=wa)continue;const a={};for(const i of this.keys())sr(i)==n&&i!=n&&(a[mp(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=jD)throw new Ue(lt.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=qT(1,Mi)),r=="/"&&(a.ino=0),this.set(r,new va(a));return this}static parse(t){if(!mae(t))throw new Ue(lt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Cx;return r.fromJSON(n),r}}const lE=4096;let qA=class KT{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===KT.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===KT.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:s=a}=n;for(let o=i;o<s;o+=lE){const l=o+lE>s?s-o:lE,u=new Uint8Array(l);await this.read(t,u,o,o+l).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,s)=>{let o=!1;const l=d=>{o=!0,s.error(d)},{size:u}=await this.stat(t);await this.write(t,i,a).catch(l),!o&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(u,a)}).catch(l))}})}};function Ti(e){return JSON.parse(OA(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function js(e){return Wd(JSON.stringify(e))}function td(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(lt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Tx(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(lt.EINVAL,"Invalid time.")}}function hn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(lt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(lt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(lt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:wc(e)}function oc(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:td("mode"in e?e==null?void 0:e.mode:null,r)}}class uie{constructor(t,n,r,a){Ta(this,"id");Ta(this,"_size");Ta(this,"options");Ta(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,s)=>i.start-s.start),r.ranges=r.ranges.reduce((i,s)=>(!i.length||i.at(-1).end<s.start?i.push(s):i.at(-1).end=Math.max(i.at(-1).end,s.end),i),[]),r.data=S0(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)){if(s.start>=n)break;r.push({start:Math.max(t,s.start),end:Math.min(n,s.end)})}}r.sort((i,s)=>i.start-s.start);const a=[];for(const i of r){const s=a.at(-1);s&&i.start<=s.end?s.end=Math.max(s.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=S0(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},s=this.regions.findIndex(o=>o.offset>n);return s==-1?this.regions.push(i):this.regions.splice(s,0,i),this.collect(),this}}var cE,uE,dE;(cE=Promise.withResolvers)!==null&&cE!==void 0||(Promise.withResolvers=(hi("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(uE=Symbol.dispose)!==null&&uE!==void 0||(Symbol.dispose=(hi("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(dE=Symbol.asyncDispose)!==null&&dE!==void 0||(Symbol.asyncDispose=(hi("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class BL{constructor(t){this.store=t}}class die extends BL{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class ZT extends BL{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new uie(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const s=i.missing(n,r);for(const{start:l,end:u}of s)this.async(this.get(t,l,u));if(s.length)throw Gi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const o=i.regionAt(n);if(!o){hi("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class fie{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof ZT))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof ZT))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Mr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Or=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class $L extends qA{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const s=SL(t,a);if(s.startsWith(".."))continue;let o=fr(n,s);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:a,newKey:o,ino:i})}for(const{oldKey:a,newKey:i,ino:s}of r){this._ids.delete(a),this._ids.set(i,s);const o=this._paths.get(s);if(!o){hi("Missing paths in table for ino "+s);continue}o.delete(a),o.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,Hg(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!0),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),await r.set(s.ino,ei(s)),a.has(i)&&await r.set(s.data,js(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!1),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),r.setSync(s.ino,ei(s)),a.has(i)&&r.setSync(s.data,js(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Cx,a=Mr(n,this.transaction(),!0),i=[["/",0]],s=TD(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new va(await a.get(l));if(r.set(o,u),u.mode&wa){const d=Ti((t=await a.get(u.data))!==null&&t!==void 0?t:wr(Ue.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([fr(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Cx,a=Mr(n,this.transaction(),!1),i=[["/",0]],s=TD(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new va(a.getSync(l));if(r.set(o,u),u.mode&wa){const d=Ti((t=a.getSync(u.data))!==null&&t!==void 0?t:wr(Ue.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([fr(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async rename(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!0),l=Qo(t),u=Qo(n),d=await this.findInode(o,l.dir,"rename"),h=Ti((r=await o.get(d.data))!==null&&r!==void 0?r:wr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Gi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const g=u.dir==l.dir,b=g?d:await this.findInode(o,u.dir,"rename"),v=g?h:Ti((a=await o.get(b.data))!==null&&a!==void 0?a:wr(Ue.With("ENODATA",u.dir,"rename")));if(v[u.base]){const x=new va((i=await o.get(v[u.base]))!==null&&i!==void 0?i:wr(Ue.With("ENOENT",n,"rename")));if(!x.toStats().isFile())throw Ue.With("EPERM",n,"rename");await o.remove(x.data),await o.remove(v[u.base])}v[u.base]=m,await o.set(d.data,js(h)),await o.set(b.data,js(v)),await o.commit(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}renameSync(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!1),l=Qo(t),u=Qo(n),d=this.findInodeSync(o,l.dir,"rename"),h=Ti((r=o.getSync(d.data))!==null&&r!==void 0?r:wr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Gi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const g=u.dir===l.dir,b=g?d:this.findInodeSync(o,u.dir,"rename"),v=g?h:Ti((a=o.getSync(b.data))!==null&&a!==void 0?a:wr(Ue.With("ENODATA",u.dir,"rename")));if(v[u.base]){const x=new va((i=o.getSync(v[u.base]))!==null&&i!==void 0?i:wr(Ue.With("ENOENT",n,"rename")));if(!x.toStats().isFile())throw Ue.With("EPERM",n,"rename");o.removeSync(x.data),o.removeSync(v[u.base])}v[u.base]=m,o.setSync(d.data,js(h)),o.setSync(b.data,js(v)),o.commitSync(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,ei(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Or(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,ei(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Or(r)}}async createFile(t,n){return n.mode|=vo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=vo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=wa,await this.commitNew(t,n,Wd("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=wa,this.commitNewSync(t,n,Wd("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(Ti((n=await a.get(i.data))!==null&&n!==void 0?n:wr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Or(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(Ti((n=a.getSync(i.data))!==null&&n!==void 0?n:wr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Or(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!0),s=await this.findInode(i,t,"sync");n&&await i.set(s.data,n),s.update(r)&&(this._add(s.ino,t),await i.set(s.ino,ei(s))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Or(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!1),s=this.findInodeSync(i,t,"sync");n&&i.setSync(s.data,n),s.update(r)&&(this._add(s.ino,t),i.setSync(s.ino,ei(s))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Or(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!0),s=sr(n),o=await this.findInode(i,s,"link"),l=Ti((r=await i.get(o.data))!==null&&r!==void 0?r:wr(Ue.With("ENOENT",s,"link"))),u=await this.findInode(i,t,"link");u.nlink++,l[mp(n)]=u.ino,this._add(u.ino,n),await i.set(u.ino,ei(u)),await i.set(o.data,js(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Or(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!1),s=sr(n),o=this.findInodeSync(i,s,"link"),l=Ti((r=i.getSync(o.data))!==null&&r!==void 0?r:wr(Ue.With("ENOENT",s,"link"))),u=this.findInodeSync(i,t,"link");u.nlink++,l[mp(n)]=u.ino,this._add(u.ino,n),i.setSync(u.ino,ei(u)),i.setSync(o.data,js(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Or(a)}}async read(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const u=(i=await o.get(l.data,r,a))!==null&&i!==void 0?i:wr(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Gi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}readSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const u=(i=o.getSync(l.data,r,a))!==null&&i!==void 0?i:wr(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Gi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Mr(i,this.transaction(),!0),o=await this.findInode(s,t,"write");let l=n;s.flag("partial")||(l=S0((a=await s.get(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await s.set(o.data,l,r),this._add(o.ino,t),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Or(i);s&&await s}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Mr(i,this.transaction(),!1),o=this.findInodeSync(s,t,"write");let l=n;s.flag("partial")||(l=S0((a=s.getSync(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),s.setSync(o.data,l,r),this._add(o.ino,t),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Or(i)}}transaction(){return new fie(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Mr(t,this.transaction(),!0);if(await n.get(fs))return;const r=new va({ino:fs,data:1,mode:511|wa});await n.set(r.data,Wd("{}")),this._add(fs,"/"),await n.set(fs,ei(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Or(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Mr(t,this.transaction(),!1);if(n.getSync(fs))return;const r=new va({ino:fs,data:1,mode:511|wa});n.setSync(r.data,Wd("{}")),this._add(fs,"/"),n.setSync(fs,ei(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Or(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){hi("Attempted to populate tables after initialization");return}Hg("Populating tables with existing store metadata");const n=Mr(t,this.transaction(),!0),r=await n.get(fs);if(!r){$A("Store does not have a root inode");const o=new va({ino:fs,data:1,mode:511|wa});await n.set(o.data,Wd("{}")),this._add(fs,"/"),await n.set(fs,ei(o)),await n.commit();return}if(r.length<Hr(va)){B1("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const s=[["/",fs]];for(;s.length>0;){i++;const[o,l]=s.shift();this._add(l,o);const u=await n.get(l);if(!u){hi("Store is missing data for inode: "+l);continue}if(u.length<Hr(va)){hi(`Invalid inode size for ino ${l}: ${u.length}`);continue}const d=new va(u);if((d.mode&wa)!=wa||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){hi("Store is missing directory data: "+d.data);continue}const m=Ti(h);for(const[g,b]of Object.entries(m))s.push([fr(o,g),b])}Hg(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Or(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new va((a=await t.get(i))!==null&&a!==void 0?a:wr(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new va((a=t.getSync(i))!==null&&a!==void 0?a:wr(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>Mi)throw Gi(new Ue(lt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Mr(s,this.transaction(),!0),{dir:l,base:u}=Qo(t),d=await this.findInode(o,l,a),h=Ti((i=await o.get(d.data))!==null&&i!==void 0?i:wr(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new va({...n,ino:m,data:m+1,size:r.byteLength});return await o.set(g.ino,ei(g)),await o.set(g.data,r),h[u]=g.ino,await o.set(d.data,js(h)),await o.commit(),g}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}commitNewSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Mr(s,this.transaction(),!1),{dir:l,base:u}=Qo(t),d=this.findInodeSync(o,l,a),h=Ti((i=o.getSync(d.data))!==null&&i!==void 0?i:wr(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new va({...n,ino:m,data:m+1,size:r.byteLength});return o.setSync(g.ino,ei(g)),o.setSync(g.data,r),h[u]=g.ino,o.setSync(d.data,js(h)),o.commitSync(),g}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Mr(i,this.transaction(),!0),{dir:l,base:u}=Qo(t),d=await this.findInode(o,l,s),h=Ti((r=await o.get(d.data))!==null&&r!==void 0?r:wr(Ue.With("ENOENT",l,s)));if(!h[u])throw Ue.With("ENOENT",t,s);const m=h[u],g=new va((a=await o.get(m))!==null&&a!==void 0?a:wr(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&Co(g))throw Ue.With("EISDIR",t,s);await o.set(d.data,js(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await o.set(g.ino,ei(g))):(await o.remove(g.data),await o.remove(m),this._remove(m)),await o.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Or(i);s&&await s}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Mr(i,this.transaction(),!1),{dir:l,base:u}=Qo(t),d=this.findInodeSync(o,l,s),h=Ti((r=o.getSync(d.data))!==null&&r!==void 0?r:wr(Ue.With("ENOENT",l,s))),m=h[u];if(!m)throw Ue.With("ENOENT",t,s);const g=new va((a=o.getSync(m))!==null&&a!==void 0?a:wr(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&Co(g))throw Ue.With("EISDIR",t,s);o.setSync(d.data,js(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),o.setSync(g.ino,ei(g))):(o.removeSync(g.data),o.removeSync(m),this._remove(m)),o.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Or(i)}}}class hie extends die{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class pie extends Map{constructor(t=Mi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new hie(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const mie={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new $L(new pie(e,t));return n.checkRootSync(),n}},gie=mie;let Ia=!0;class DD extends DA{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let s=this._buffer.indexOf(`
`);s>=0;s=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,s);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(s+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;Ds(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;Ds(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);aw(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);aw(this.output,0),Ds(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,Ds(this.output,-a.length,0),Ds(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;Ds(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(Ds(this.output,-this._cursor,0),Ds(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);aw(this.output,0),Ds(this.output,0,0),this.output.write(this._prompt+r),this.line=r,Ds(this.output,-r.length,0),Ds(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(aw(this.output,0),Ds(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return hi("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return hi("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function yie(e,t,n,r){return"input"in e?new DD(e.input,e.output,e.completer,e.terminal):new DD(e,t,n,r)}function aw(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function Ds(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class kx{get position(){return this.flag&yf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,s){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=s,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&V1||this.inode.flags&Wi.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&di||this.flag&sc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&di||this.flag&sc))throw new Ue(lt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!k0(this.inode)&&!T0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,this.fs.writeSync(this.internalPath,s,a),this._isSync&&this.sync(),s.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&di)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Wi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!k0(this.inode)&&!T0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>Ar?-61441:Ar)|t,(this._isSync||t>Ar)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,LL(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Ax(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:No.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function wi(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:No.descriptors).get(t);if(!a)throw new Ue(lt.EBADF);return a}function zL(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:No.descriptors).delete(t)}const bie=/[rwasx]{1,2}\+?/;function lc(e){if(typeof e=="number")return e;if(!bie.test(e))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);return vie(e)}function vie(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?TL:$1;return e.includes("w")&&(t|=U1),e.includes("a")&&(t|=yf),e.includes("+")?t|=sc:e.includes("r")||(t|=di),e.includes("s")&&(t|=V1),e.includes("x")&&(t|=z1),t}function UL(e){let t=0;return e&di||(t|=Ra),(e&di||e&sc)&&(t|=aa),t}const A0=new Map;GA("/",gie.create({label:"root"}));function GA(e,t){if(e[0]!="/"&&(e="/"+e),e=wc.call(this,e),A0.has(e))throw Gi(new Ue(lt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,A0.set(e,t),EL(`Mounted ${t.name} on ${e}`),Hg(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function VL(e){if(e[0]!="/"&&(e="/"+e),e=wc.call(this,e),!A0.has(e)){hi(e+" is already unmounted");return}A0.delete(e),$A("Unmounted "+e)}function Vn(e,t){const n=(t==null?void 0:t.root)||No.root;e=hn(fr(n,e));const r=[...A0].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(xie(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw Iae(new Ue(lt.EIO,"No file system",e))}function fE(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function yr(e,t){typeof e.stack=="string"&&(e.stack=fE(e.stack,t));try{e.message=fE(e.message,t)}catch{}return e.path&&(e.path=fE(e.path,t)),e}function HL(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Mi),files:(t?BigInt:Number)(n.totalNodes||Mi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function wie(e){var t,n,r,a,i,s,o;const l=this!==null&&this!==void 0?this:No;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(lt.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const u=fr(l.root,e);for(const d of(o=(s=l.descriptors)===null||s===void 0?void 0:s.values())!==null&&o!==void 0?o:[]){if(!d.path.startsWith(l.root))throw Ue.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(u.length>l.root.length)throw new Ue(lt.EPERM,"Can not chroot() outside of current root");l.root=u}function xie(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class qL extends DA{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class GL extends qL{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?fr(t.root,n):n,Sie(this.realpath,this)}close(){super.emit("close"),Eie(this.realpath,this)}[Symbol.dispose](){this.close()}}class _ie extends qL{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Uu(this.path);nie(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Uu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Tu=new Map;function Sie(e,t){const n=hn(e);Tu.has(n)||Tu.set(n,new Set),Tu.get(n).add(t)}function Eie(e,t){const n=hn(e);Tu.has(n)&&(Tu.get(n).delete(t),Tu.get(n).size===0&&Tu.delete(n))}function ni(e,t,n){var r;e&&(n=fr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=hn(n);for(let a=n;a!="/";a=sr(a)){const i=Tu.get(a);if(i)for(const s of i)s.emit("change",t,SL.call(s._context,a,n)||mp(n))}}var ky=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ay=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function Cie(e,t){e=hn(e),t=hn(t);const n=Vn(e,this),r=Vn(t,this);if(!Uu.call(this,sr(e)).hasAccess(aa,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),ni(this,"rename",e.toString()),ni(this,"change",t.toString());return}XA.call(this,t,YA(e)),ZA.call(this,e),ni(this,"rename",e.toString())}catch(a){throw yr(a,{[n.path]:e,[r.path]:t})}}function WA(e){e=hn(e);try{const{fs:t,path:n}=Vn(nd.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==lt.ENOENT)return!1;throw t}}function Uu(e,t){e=hn(e);const{fs:n,path:r}=Vn(nd.call(this,e),this);try{const a=n.statSync(r);if(Ia&&!gr(this,a,Ra))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Df(a):new Rc(a)}catch(a){throw yr(a,{[r]:e})}}function KA(e,t){e=hn(e);const{fs:n,path:r}=Vn(e,this);try{const a=n.statSync(r);if(Ia&&!gr(this,a,Ra))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Df(a):new Rc(a)}catch(a){throw yr(a,{[r]:e})}}function Tie(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=ky(n,Mf.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(lt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{Ay(n)}}function ZA(e){e=hn(e);const{fs:t,path:n}=Vn(e,this);try{if(Ia&&!gr(this,t.statSync(n),aa))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),ni(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}function Mf(e,t){var n;e=hn(e);const r=td(t.mode,420),a=lc(t.flag);e=t.preserveSymlinks?e:nd.call(this,e);const{fs:i,path:s}=Vn(e,this);let o;try{o=i.statSync(s)}catch{}if(!o){if(!(a&$1))throw Ue.With("ENOENT",e,"_open");const u=i.statSync(sr(s));if(!gr(this,u,aa))throw Ue.With("EACCES",sr(e),"_open");if(!Co(u))throw Ue.With("ENOTDIR",sr(e),"_open");if(!t.allowDirectory&&r&wa)throw Ue.With("EISDIR",e,"_open");if(!gr(this,u,aa))throw Ue.With("EACCES",sr(s),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:No.credentials,m=i.createFileSync(s,{mode:r,uid:u.mode&Cy?u.uid:d,gid:u.mode&Ty?u.gid:h});return new kx(this,e,i,s,a,m)}if(!gr(this,o,r)||!gr(this,o,UL(a)))throw Ue.With("EACCES",e,"_open");if(a&z1)throw Ue.With("EEXIST",e,"_open");const l=new kx(this,e,i,s,a,o);if(a&U1&&l.truncate(0),!t.allowDirectory&&o.mode&wa)throw Ue.With("EISDIR",e,"_open");return l}function H1(e,t,n=UA){return Ax(Mf.call(this,e,{flag:t,mode:n}))}function q1(e,t,n){return Ax(Mf.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function WL(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=ky(r,typeof e=="number"?wi(this,e):Mf.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),s=new Uint8Array(i);return a.read(s,0,i,0),s}catch(a){r.error=a,r.hasError=!0}finally{Ay(r)}}function YA(e,t={}){const n=oc(t,null,"r",420);if(lc(n.flag)&di)throw new Ue(lt.EINVAL,"Flag passed to readFile must allow for reading");const a=Lr.from(WL.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function XA(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=oc(n,"utf8","w+",420),i=lc(a.flag);if(!(i&di||i&sc))throw new Ue(lt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!s)throw new Ue(lt.EINVAL,"Data not specified");ky(r,typeof e=="number"?wi(this,e):Mf.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength,0),ni(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{Ay(r)}}function kie(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=oc(n,"utf8","a+",420),i=lc(a.flag);if(!(i&yf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);ky(r,Mf.call(this,typeof e=="number"?wi(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{Ay(r)}}function Aie(e,t){const n=wi(this,e).stat();return t!=null&&t.bigint?new Df(n):new Rc(n)}function Of(e){wi(this,e).close(),zL(this,e)}function Nie(e,t=0){if(t||(t=0),t<0)throw new Ue(lt.EINVAL);wi(this,e).truncate(t)}function Rie(e){wi(this,e).sync()}function Iie(e){wi(this,e).datasync()}function jie(e,t,n,r,a){let i,s,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";s=0,i=Lr.from(t,h),o=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n,o=r,l=typeof a=="number"?a:null;const u=wi(this,e);l??(l=u.position);const d=u.write(i,s,o,l);return ni(this,"change",u.path),d}function Die(e,t,n,r,a){const i=wi(this,e),s=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,s,r,a)}function JA(e,t,n){wi(this,e).chown(t,n)}function QA(e,t){const n=td(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode.");wi(this,e).chmod(n)}function eN(e,t,n){wi(this,e).utimes(Tx(t),Tx(n))}function KL(e){e=hn(e);const{fs:t,path:n}=Vn(nd.call(this,e),this);try{const r=t.statSync(n);if(!Co(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Ia&&!gr(this,r,aa))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),ni(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}function tN(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:No.credentials;t=typeof t=="object"?t:{mode:t};const s=td(t==null?void 0:t.mode,511);e=nd.call(this,e);const{fs:o,path:l,root:u}=Vn(e,this),d={[l]:e},h=(m,g)=>{if(!gr(this,g,aa))throw Ue.With("EACCES",sr(m),"mkdir");const b=o.mkdirSync(m,{mode:s,uid:g.mode&Cy?g.uid:a,gid:g.mode&Ty?g.gid:i});return ni(this,"rename",m),b};try{if(!(t!=null&&t.recursive)){h(l,o.statSync(sr(l)));return}const m=[];for(let b=l,v=e;!o.existsSync(b);b=sr(b),v=sr(v))m.unshift(b),d[b]=v;if(!m.length)return;const g=[o.statSync(sr(m[0]))];for(const[b,v]of m.entries())g.push(h(v,g[b]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw yr(m,d)}}function Hp(e,t){t=typeof t=="object"?t:{encoding:t},e=hn(e);const{fs:n,path:r}=Vn(nd.call(this,e),this);let a;try{const s=n.statSync(r);if(Ia&&!gr(this,s,Ra))throw Ue.With("EACCES",r,"readdir");if(!Co(s))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(s){throw yr(s,{[r]:e})}const i=[];for(const s of a){let o;try{o=n.statSync(fr(r,s))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new N0(s,o)):(t==null?void 0:t.encoding)=="buffer"?i.push(Lr.from(s)):i.push(s),!(!Co(o)||!(t!=null&&t.recursive)))for(const l of Hp.call(this,fr(e,s),t))l instanceof N0?(l.path=fr(s,l.path),i.push(l)):Lr.isBuffer(l)?i.push(Lr.from(fr(s,OA(l)))):i.push(fr(s,l))}return i}function Mie(e,t){if(e=hn(e),!Uu(sr(e)).hasAccess(Ra,this))throw Ue.With("EACCES",sr(e),"link");if(t=hn(t),!Uu(sr(t)).hasAccess(aa,this))throw Ue.With("EACCES",sr(t),"link");const{fs:n,path:r}=Vn(e,this),a=Vn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Ia&&!gr(this,n.statSync(r),Ra))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw yr(i,{[r]:e,[a.path]:t})}}function Oie(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid type: "+n);t=hn(t);const a=ky(r,Mf.call(this,t,{flag:"wx",mode:420}),!1);a.write(Wd(hn(e,!0))),a.chmod(Nc)}catch(a){r.error=a,r.hasError=!0}finally{Ay(r)}}function YT(e,t){const n=Lr.from(WL.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function Pie(e,t,n){const r=H1.call(this,e,"r+");JA.call(this,r,t,n),Of.call(this,r)}function Fie(e,t,n){const r=q1.call(this,e,"r+");JA.call(this,r,t,n),Of.call(this,r)}function Lie(e,t){const n=H1.call(this,e,"r+");QA.call(this,n,t),Of.call(this,n)}function Bie(e,t){const n=q1.call(this,e,"r+");QA.call(this,n,t),Of.call(this,n)}function ZL(e,t,n){const r=H1.call(this,e,"r+");eN.call(this,r,t,n),Of.call(this,r)}function $ie(e,t,n){const r=q1.call(this,e,"r+");eN.call(this,r,t,n),Of.call(this,r)}function XT(e,t,n){try{const l=Vn(t,e),u=l.fs.statSync(l.path);if(!gp(u))return{...l,fullPath:t,stats:u};const d=wc.call(e,sr(t),YT.call(e,t).toString());return XT(e,d)}catch{}const{base:r,dir:a}=Qo(t),i=a=="/"?"/":nd.call(e,a),s=fr(i,r),o=Vn(s,e);try{const l=o.fs.statSync(o.path);if(!gp(l))return{...o,fullPath:s,stats:l};const u=wc.call(e,i,YT.call(e,s).toString());return XT(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw yr(l,{[o.path]:s})}}function nd(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=XT(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Lr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function zie(e,t=384){if(!gr(this,Uu.call(this,e),t))throw new Ue(lt.EACCES)}function YL(e,t){e=hn(e);let n;try{n=KA.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&Ar){case wa:if(t!=null&&t.recursive)for(const r of Hp.call(this,e))YL.call(this,fr(e,r),t);KL.call(this,e);break;case vo:case Nc:case Rf:case If:ZA.call(this,e);break;case jf:case Nf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}function Uie(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return tN.call(this,a),n=="buffer"?Lr.from(a):a}function XL(e,t,n){if(e=hn(e),t=hn(t),n&&n&VA&&WA(t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");XA.call(this,t,YA(e)),ni(this,"rename",t.toString())}function Vie(e,t,n){const r=wi(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function Hie(e,t,n){const r=wi(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function qie(e,t){return e=hn(e),new nN(e,this)}function JL(e,t,n){e=hn(e),t=hn(t);const r=KA.call(this,e);if(n!=null&&n.errorOnExist&&WA.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Ar){case wa:if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");tN.call(this,t,{recursive:!0});for(const a of Hp.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(fr(e,a.name),fr(t,a.name))||JL.call(this,fr(e,a.name),fr(t,a.name),n);break;case vo:case Nc:XL.call(this,e,t);break;case Rf:case If:case jf:case Nf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&ZL.call(this,t,r.atime,r.mtime)}function Gie(e,t){e=hn(e);const{fs:n}=Vn(e,this);return HL(n,t==null?void 0:t.bigint)}function Wie(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),s=[];function o(l){const u=Hp(l,{withFileTypes:r,encoding:"utf8"});for(const d of u){const h=r?d.path:l+"/"+d;a(r?d:h)||(Uu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&o(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&s.push(r?d.path:h.replace(/^\/+/g,"")))}}return o(n),s}class N0{get name(){return mp(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return oie(this.stats)}isDirectory(){return Co(this.stats)}isBlockDevice(){return T0(this.stats)}isCharacterDevice(){return k0(this.stats)}isSymbolicLink(){return gp(this.stats)}isFIFO(){return cie(this.stats)}isSocket(){return lie(this.stats)}}class nN{checkClosed(){if(this.closed)throw new Ue(lt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await Ff.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Hp.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var hE={exports:{}},pE={exports:{}},mE={},MD;function rd(){return MD||(MD=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=m,n.fromByteArray=v;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;a[45]=62,a[95]=63;function u(_){var E=_.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=_.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function d(_){var E=u(_),C=E[0],k=E[1];return(C+k)*3/4-k}function h(_,E,C){return(E+C)*3/4-C}function m(_){var E,C=u(_),k=C[0],I=C[1],j=new i(h(_,k,I)),N=0,P=I>0?k-4:k,L;for(L=0;L<P;L+=4)E=a[_.charCodeAt(L)]<<18|a[_.charCodeAt(L+1)]<<12|a[_.charCodeAt(L+2)]<<6|a[_.charCodeAt(L+3)],j[N++]=E>>16&255,j[N++]=E>>8&255,j[N++]=E&255;return I===2&&(E=a[_.charCodeAt(L)]<<2|a[_.charCodeAt(L+1)]>>4,j[N++]=E&255),I===1&&(E=a[_.charCodeAt(L)]<<10|a[_.charCodeAt(L+1)]<<4|a[_.charCodeAt(L+2)]>>2,j[N++]=E>>8&255,j[N++]=E&255),j}function g(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function b(_,E,C){for(var k,I=[],j=E;j<C;j+=3)k=(_[j]<<16&16711680)+(_[j+1]<<8&65280)+(_[j+2]&255),I.push(g(k));return I.join("")}function v(_){for(var E,C=_.length,k=C%3,I=[],j=16383,N=0,P=C-k;N<P;N+=j)I.push(b(_,N,N+j>P?P:N+j));return k===1?(E=_[C-1],I.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(_[C-2]<<8)+_[C-1],I.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),I.join("")}var x={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */x.read=function(_,E,C,k,I){var j,N,P=I*8-k-1,L=(1<<P)-1,H=L>>1,M=-7,K=C?I-1:0,q=C?-1:1,ue=_[E+K];for(K+=q,j=ue&(1<<-M)-1,ue>>=-M,M+=P;M>0;j=j*256+_[E+K],K+=q,M-=8);for(N=j&(1<<-M)-1,j>>=-M,M+=k;M>0;N=N*256+_[E+K],K+=q,M-=8);if(j===0)j=1-H;else{if(j===L)return N?NaN:(ue?-1:1)*(1/0);N=N+Math.pow(2,k),j=j-H}return(ue?-1:1)*N*Math.pow(2,j-k)},x.write=function(_,E,C,k,I,j){var N,P,L,H=j*8-I-1,M=(1<<H)-1,K=M>>1,q=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=k?0:j-1,ae=k?1:-1,te=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(P=isNaN(E)?1:0,N=M):(N=Math.floor(Math.log(E)/Math.LN2),E*(L=Math.pow(2,-N))<1&&(N--,L*=2),N+K>=1?E+=q/L:E+=q*Math.pow(2,1-K),E*L>=2&&(N++,L/=2),N+K>=M?(P=0,N=M):N+K>=1?(P=(E*L-1)*Math.pow(2,I),N=N+K):(P=E*Math.pow(2,K-1)*Math.pow(2,I),N=0));I>=8;_[C+ue]=P&255,ue+=ae,P/=256,I-=8);for(N=N<<I|P,H+=I;H>0;_[C+ue]=N&255,ue+=ae,N/=256,H-=8);_[C+ue-ae]|=te*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(_){const E=n,C=x,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_.Buffer=M,_.SlowBuffer=ne,_.INSPECT_MAX_BYTES=50;const I=2147483647;_.kMaxLength=I;const{Uint8Array:j,ArrayBuffer:N,SharedArrayBuffer:P}=globalThis;M.TYPED_ARRAY_SUPPORT=L(),!M.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function L(){try{const G=new j(1),U={foo:function(){return 42}};return Object.setPrototypeOf(U,j.prototype),Object.setPrototypeOf(G,U),G.foo()===42}catch{return!1}}Object.defineProperty(M.prototype,"parent",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.buffer}}),Object.defineProperty(M.prototype,"offset",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.byteOffset}});function H(G){if(G>I)throw new RangeError('The value "'+G+'" is invalid for option "size"');const U=new j(G);return Object.setPrototypeOf(U,M.prototype),U}function M(G,U,Z){if(typeof G=="number"){if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(G)}return K(G,U,Z)}M.poolSize=8192;function K(G,U,Z){if(typeof G=="string")return te(G,U);if(N.isView(G))return ie(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(ye(G,N)||G&&ye(G.buffer,N)||typeof P<"u"&&(ye(G,P)||G&&ye(G.buffer,P)))return V(G,U,Z);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const me=G.valueOf&&G.valueOf();if(me!=null&&me!==G)return M.from(me,U,Z);const Re=J(G);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return M.from(G[Symbol.toPrimitive]("string"),U,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}M.from=function(G,U,Z){return K(G,U,Z)},Object.setPrototypeOf(M.prototype,j.prototype),Object.setPrototypeOf(M,j);function q(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function ue(G,U,Z){return q(G),G<=0?H(G):U!==void 0?typeof Z=="string"?H(G).fill(U,Z):H(G).fill(U):H(G)}M.alloc=function(G,U,Z){return ue(G,U,Z)};function ae(G){return q(G),H(G<0?0:Q(G)|0)}M.allocUnsafe=function(G){return ae(G)},M.allocUnsafeSlow=function(G){return ae(G)};function te(G,U){if((typeof U!="string"||U==="")&&(U="utf8"),!M.isEncoding(U))throw new TypeError("Unknown encoding: "+U);const Z=he(G,U)|0;let me=H(Z);const Re=me.write(G,U);return Re!==Z&&(me=me.slice(0,Re)),me}function Y(G){const U=G.length<0?0:Q(G.length)|0,Z=H(U);for(let me=0;me<U;me+=1)Z[me]=G[me]&255;return Z}function ie(G){if(ye(G,j)){const U=new j(G);return V(U.buffer,U.byteOffset,U.byteLength)}return Y(G)}function V(G,U,Z){if(U<0||G.byteLength<U)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<U+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let me;return U===void 0&&Z===void 0?me=new j(G):Z===void 0?me=new j(G,U):me=new j(G,U,Z),Object.setPrototypeOf(me,M.prototype),me}function J(G){if(M.isBuffer(G)){const U=Q(G.length)|0,Z=H(U);return Z.length===0||G.copy(Z,0,0,U),Z}if(G.length!==void 0)return typeof G.length!="number"||Me(G.length)?H(0):Y(G);if(G.type==="Buffer"&&Array.isArray(G.data))return Y(G.data)}function Q(G){if(G>=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return G|0}function ne(G){return+G!=G&&(G=0),M.alloc(+G)}M.isBuffer=function(U){return U!=null&&U._isBuffer===!0&&U!==M.prototype},M.compare=function(U,Z){if(ye(U,j)&&(U=M.from(U,U.offset,U.byteLength)),ye(Z,j)&&(Z=M.from(Z,Z.offset,Z.byteLength)),!M.isBuffer(U)||!M.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===Z)return 0;let me=U.length,Re=Z.length;for(let Ve=0,pt=Math.min(me,Re);Ve<pt;++Ve)if(U[Ve]!==Z[Ve]){me=U[Ve],Re=Z[Ve];break}return me<Re?-1:Re<me?1:0},M.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(U,Z){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(U.length===0)return M.alloc(0);let me;if(Z===void 0)for(Z=0,me=0;me<U.length;++me)Z+=U[me].length;const Re=M.allocUnsafe(Z);let Ve=0;for(me=0;me<U.length;++me){let pt=U[me];if(ye(pt,j))Ve+pt.length>Re.length?(M.isBuffer(pt)||(pt=M.from(pt)),pt.copy(Re,Ve)):j.prototype.set.call(Re,pt,Ve);else if(M.isBuffer(pt))pt.copy(Re,Ve);else throw new TypeError('"list" argument must be an Array of Buffers');Ve+=pt.length}return Re};function he(G,U){if(M.isBuffer(G))return G.length;if(N.isView(G)||ye(G,N))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const Z=G.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&Z===0)return 0;let Re=!1;for(;;)switch(U){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return ft(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return $e(G).length;default:if(Re)return me?-1:ft(G).length;U=(""+U).toLowerCase(),Re=!0}}M.byteLength=he;function de(G,U,Z){let me=!1;if((U===void 0||U<0)&&(U=0),U>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,U>>>=0,Z<=U))return"";for(G||(G="utf8");;)switch(G){case"hex":return xe(this,U,Z);case"utf8":case"utf-8":return Ee(this,U,Z);case"ascii":return se(this,U,Z);case"latin1":case"binary":return ee(this,U,Z);case"base64":return z(this,U,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,U,Z);default:if(me)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),me=!0}}M.prototype._isBuffer=!0;function Ie(G,U,Z){const me=G[U];G[U]=G[Z],G[Z]=me}M.prototype.swap16=function(){const U=this.length;if(U%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<U;Z+=2)Ie(this,Z,Z+1);return this},M.prototype.swap32=function(){const U=this.length;if(U%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<U;Z+=4)Ie(this,Z,Z+3),Ie(this,Z+1,Z+2);return this},M.prototype.swap64=function(){const U=this.length;if(U%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<U;Z+=8)Ie(this,Z,Z+7),Ie(this,Z+1,Z+6),Ie(this,Z+2,Z+5),Ie(this,Z+3,Z+4);return this},M.prototype.toString=function(){const U=this.length;return U===0?"":arguments.length===0?Ee(this,0,U):de.apply(this,arguments)},M.prototype.toLocaleString=M.prototype.toString,M.prototype.equals=function(U){if(!M.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U?!0:M.compare(this,U)===0},M.prototype.inspect=function(){let U="";const Z=_.INSPECT_MAX_BYTES;return U=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(U+=" ... "),"<Buffer "+U+">"},k&&(M.prototype[k]=M.prototype.inspect),M.prototype.compare=function(U,Z,me,Re,Ve){if(ye(U,j)&&(U=M.from(U,U.offset,U.byteLength)),!M.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(Z===void 0&&(Z=0),me===void 0&&(me=U?U.length:0),Re===void 0&&(Re=0),Ve===void 0&&(Ve=this.length),Z<0||me>U.length||Re<0||Ve>this.length)throw new RangeError("out of range index");if(Re>=Ve&&Z>=me)return 0;if(Re>=Ve)return-1;if(Z>=me)return 1;if(Z>>>=0,me>>>=0,Re>>>=0,Ve>>>=0,this===U)return 0;let pt=Ve-Re,Wt=me-Z;const ut=Math.min(pt,Wt),Rt=this.slice(Re,Ve),Lt=U.slice(Z,me);for(let en=0;en<ut;++en)if(Rt[en]!==Lt[en]){pt=Rt[en],Wt=Lt[en];break}return pt<Wt?-1:Wt<pt?1:0};function ke(G,U,Z,me,Re){if(G.length===0)return-1;if(typeof Z=="string"?(me=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Me(Z)&&(Z=Re?0:G.length-1),Z<0&&(Z=G.length+Z),Z>=G.length){if(Re)return-1;Z=G.length-1}else if(Z<0)if(Re)Z=0;else return-1;if(typeof U=="string"&&(U=M.from(U,me)),M.isBuffer(U))return U.length===0?-1:Te(G,U,Z,me,Re);if(typeof U=="number")return U=U&255,typeof j.prototype.indexOf=="function"?Re?j.prototype.indexOf.call(G,U,Z):j.prototype.lastIndexOf.call(G,U,Z):Te(G,[U],Z,me,Re);throw new TypeError("val must be string, number or Buffer")}function Te(G,U,Z,me,Re){let Ve=1,pt=G.length,Wt=U.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(G.length<2||U.length<2)return-1;Ve=2,pt/=2,Wt/=2,Z/=2}function ut(Lt,en){return Ve===1?Lt[en]:Lt.readUInt16BE(en*Ve)}let Rt;if(Re){let Lt=-1;for(Rt=Z;Rt<pt;Rt++)if(ut(G,Rt)===ut(U,Lt===-1?0:Rt-Lt)){if(Lt===-1&&(Lt=Rt),Rt-Lt+1===Wt)return Lt*Ve}else Lt!==-1&&(Rt-=Rt-Lt),Lt=-1}else for(Z+Wt>pt&&(Z=pt-Wt),Rt=Z;Rt>=0;Rt--){let Lt=!0;for(let en=0;en<Wt;en++)if(ut(G,Rt+en)!==ut(U,en)){Lt=!1;break}if(Lt)return Rt}return-1}M.prototype.includes=function(U,Z,me){return this.indexOf(U,Z,me)!==-1},M.prototype.indexOf=function(U,Z,me){return ke(this,U,Z,me,!0)},M.prototype.lastIndexOf=function(U,Z,me){return ke(this,U,Z,me,!1)};function Se(G,U,Z,me){Z=Number(Z)||0;const Re=G.length-Z;me?(me=Number(me),me>Re&&(me=Re)):me=Re;const Ve=U.length;me>Ve/2&&(me=Ve/2);let pt;for(pt=0;pt<me;++pt){const Wt=parseInt(U.substr(pt*2,2),16);if(Me(Wt))return pt;G[Z+pt]=Wt}return pt}function Pe(G,U,Z,me){return nt(ft(U,G.length-Z),G,Z,me)}function Qe(G,U,Z,me){return nt(vt(U),G,Z,me)}function Le(G,U,Z,me){return nt($e(U),G,Z,me)}function je(G,U,Z,me){return nt(F(U,G.length-Z),G,Z,me)}M.prototype.write=function(U,Z,me,Re){if(Z===void 0)Re="utf8",me=this.length,Z=0;else if(me===void 0&&typeof Z=="string")Re=Z,me=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(me)?(me=me>>>0,Re===void 0&&(Re="utf8")):(Re=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ve=this.length-Z;if((me===void 0||me>Ve)&&(me=Ve),U.length>0&&(me<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let pt=!1;for(;;)switch(Re){case"hex":return Se(this,U,Z,me);case"utf8":case"utf-8":return Pe(this,U,Z,me);case"ascii":case"latin1":case"binary":return Qe(this,U,Z,me);case"base64":return Le(this,U,Z,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return je(this,U,Z,me);default:if(pt)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),pt=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(G,U,Z){return U===0&&Z===G.length?E.fromByteArray(G):E.fromByteArray(G.slice(U,Z))}function Ee(G,U,Z){Z=Math.min(G.length,Z);const me=[];let Re=U;for(;Re<Z;){const Ve=G[Re];let pt=null,Wt=Ve>239?4:Ve>223?3:Ve>191?2:1;if(Re+Wt<=Z){let ut,Rt,Lt,en;switch(Wt){case 1:Ve<128&&(pt=Ve);break;case 2:ut=G[Re+1],(ut&192)===128&&(en=(Ve&31)<<6|ut&63,en>127&&(pt=en));break;case 3:ut=G[Re+1],Rt=G[Re+2],(ut&192)===128&&(Rt&192)===128&&(en=(Ve&15)<<12|(ut&63)<<6|Rt&63,en>2047&&(en<55296||en>57343)&&(pt=en));break;case 4:ut=G[Re+1],Rt=G[Re+2],Lt=G[Re+3],(ut&192)===128&&(Rt&192)===128&&(Lt&192)===128&&(en=(Ve&15)<<18|(ut&63)<<12|(Rt&63)<<6|Lt&63,en>65535&&en<1114112&&(pt=en))}}pt===null?(pt=65533,Wt=1):pt>65535&&(pt-=65536,me.push(pt>>>10&1023|55296),pt=56320|pt&1023),me.push(pt),Re+=Wt}return fe(me)}const Ne=4096;function fe(G){const U=G.length;if(U<=Ne)return String.fromCharCode.apply(String,G);let Z="",me=0;for(;me<U;)Z+=String.fromCharCode.apply(String,G.slice(me,me+=Ne));return Z}function se(G,U,Z){let me="";Z=Math.min(G.length,Z);for(let Re=U;Re<Z;++Re)me+=String.fromCharCode(G[Re]&127);return me}function ee(G,U,Z){let me="";Z=Math.min(G.length,Z);for(let Re=U;Re<Z;++Re)me+=String.fromCharCode(G[Re]);return me}function xe(G,U,Z){const me=G.length;(!U||U<0)&&(U=0),(!Z||Z<0||Z>me)&&(Z=me);let Re="";for(let Ve=U;Ve<Z;++Ve)Re+=Ke[G[Ve]];return Re}function Fe(G,U,Z){const me=G.slice(U,Z);let Re="";for(let Ve=0;Ve<me.length-1;Ve+=2)Re+=String.fromCharCode(me[Ve]+me[Ve+1]*256);return Re}M.prototype.slice=function(U,Z){const me=this.length;U=~~U,Z=Z===void 0?me:~~Z,U<0?(U+=me,U<0&&(U=0)):U>me&&(U=me),Z<0?(Z+=me,Z<0&&(Z=0)):Z>me&&(Z=me),Z<U&&(Z=U);const Re=this.subarray(U,Z);return Object.setPrototypeOf(Re,M.prototype),Re};function Ce(G,U,Z){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+U>Z)throw new RangeError("Trying to access beyond buffer length")}M.prototype.readUintLE=M.prototype.readUIntLE=function(U,Z,me){U=U>>>0,Z=Z>>>0,me||Ce(U,Z,this.length);let Re=this[U],Ve=1,pt=0;for(;++pt<Z&&(Ve*=256);)Re+=this[U+pt]*Ve;return Re},M.prototype.readUintBE=M.prototype.readUIntBE=function(U,Z,me){U=U>>>0,Z=Z>>>0,me||Ce(U,Z,this.length);let Re=this[U+--Z],Ve=1;for(;Z>0&&(Ve*=256);)Re+=this[U+--Z]*Ve;return Re},M.prototype.readUint8=M.prototype.readUInt8=function(U,Z){return U=U>>>0,Z||Ce(U,1,this.length),this[U]},M.prototype.readUint16LE=M.prototype.readUInt16LE=function(U,Z){return U=U>>>0,Z||Ce(U,2,this.length),this[U]|this[U+1]<<8},M.prototype.readUint16BE=M.prototype.readUInt16BE=function(U,Z){return U=U>>>0,Z||Ce(U,2,this.length),this[U]<<8|this[U+1]},M.prototype.readUint32LE=M.prototype.readUInt32LE=function(U,Z){return U=U>>>0,Z||Ce(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+this[U+3]*16777216},M.prototype.readUint32BE=M.prototype.readUInt32BE=function(U,Z){return U=U>>>0,Z||Ce(U,4,this.length),this[U]*16777216+(this[U+1]<<16|this[U+2]<<8|this[U+3])},M.prototype.readBigUInt64LE=Dt(function(U){U=U>>>0,De(U,"offset");const Z=this[U],me=this[U+7];(Z===void 0||me===void 0)&&ve(U,this.length-8);const Re=Z+this[++U]*2**8+this[++U]*2**16+this[++U]*2**24,Ve=this[++U]+this[++U]*2**8+this[++U]*2**16+me*2**24;return BigInt(Re)+(BigInt(Ve)<<BigInt(32))}),M.prototype.readBigUInt64BE=Dt(function(U){U=U>>>0,De(U,"offset");const Z=this[U],me=this[U+7];(Z===void 0||me===void 0)&&ve(U,this.length-8);const Re=Z*2**24+this[++U]*2**16+this[++U]*2**8+this[++U],Ve=this[++U]*2**24+this[++U]*2**16+this[++U]*2**8+me;return(BigInt(Re)<<BigInt(32))+BigInt(Ve)}),M.prototype.readIntLE=function(U,Z,me){U=U>>>0,Z=Z>>>0,me||Ce(U,Z,this.length);let Re=this[U],Ve=1,pt=0;for(;++pt<Z&&(Ve*=256);)Re+=this[U+pt]*Ve;return Ve*=128,Re>=Ve&&(Re-=Math.pow(2,8*Z)),Re},M.prototype.readIntBE=function(U,Z,me){U=U>>>0,Z=Z>>>0,me||Ce(U,Z,this.length);let Re=Z,Ve=1,pt=this[U+--Re];for(;Re>0&&(Ve*=256);)pt+=this[U+--Re]*Ve;return Ve*=128,pt>=Ve&&(pt-=Math.pow(2,8*Z)),pt},M.prototype.readInt8=function(U,Z){return U=U>>>0,Z||Ce(U,1,this.length),this[U]&128?(255-this[U]+1)*-1:this[U]},M.prototype.readInt16LE=function(U,Z){U=U>>>0,Z||Ce(U,2,this.length);const me=this[U]|this[U+1]<<8;return me&32768?me|4294901760:me},M.prototype.readInt16BE=function(U,Z){U=U>>>0,Z||Ce(U,2,this.length);const me=this[U+1]|this[U]<<8;return me&32768?me|4294901760:me},M.prototype.readInt32LE=function(U,Z){return U=U>>>0,Z||Ce(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},M.prototype.readInt32BE=function(U,Z){return U=U>>>0,Z||Ce(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},M.prototype.readBigInt64LE=Dt(function(U){U=U>>>0,De(U,"offset");const Z=this[U],me=this[U+7];(Z===void 0||me===void 0)&&ve(U,this.length-8);const Re=this[U+4]+this[U+5]*2**8+this[U+6]*2**16+(me<<24);return(BigInt(Re)<<BigInt(32))+BigInt(Z+this[++U]*2**8+this[++U]*2**16+this[++U]*2**24)}),M.prototype.readBigInt64BE=Dt(function(U){U=U>>>0,De(U,"offset");const Z=this[U],me=this[U+7];(Z===void 0||me===void 0)&&ve(U,this.length-8);const Re=(Z<<24)+this[++U]*2**16+this[++U]*2**8+this[++U];return(BigInt(Re)<<BigInt(32))+BigInt(this[++U]*2**24+this[++U]*2**16+this[++U]*2**8+me)}),M.prototype.readFloatLE=function(U,Z){return U=U>>>0,Z||Ce(U,4,this.length),C.read(this,U,!0,23,4)},M.prototype.readFloatBE=function(U,Z){return U=U>>>0,Z||Ce(U,4,this.length),C.read(this,U,!1,23,4)},M.prototype.readDoubleLE=function(U,Z){return U=U>>>0,Z||Ce(U,8,this.length),C.read(this,U,!0,52,8)},M.prototype.readDoubleBE=function(U,Z){return U=U>>>0,Z||Ce(U,8,this.length),C.read(this,U,!1,52,8)};function We(G,U,Z,me,Re,Ve){if(!M.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>Re||U<Ve)throw new RangeError('"value" argument is out of bounds');if(Z+me>G.length)throw new RangeError("Index out of range")}M.prototype.writeUintLE=M.prototype.writeUIntLE=function(U,Z,me,Re){if(U=+U,Z=Z>>>0,me=me>>>0,!Re){const Wt=Math.pow(2,8*me)-1;We(this,U,Z,me,Wt,0)}let Ve=1,pt=0;for(this[Z]=U&255;++pt<me&&(Ve*=256);)this[Z+pt]=U/Ve&255;return Z+me},M.prototype.writeUintBE=M.prototype.writeUIntBE=function(U,Z,me,Re){if(U=+U,Z=Z>>>0,me=me>>>0,!Re){const Wt=Math.pow(2,8*me)-1;We(this,U,Z,me,Wt,0)}let Ve=me-1,pt=1;for(this[Z+Ve]=U&255;--Ve>=0&&(pt*=256);)this[Z+Ve]=U/pt&255;return Z+me},M.prototype.writeUint8=M.prototype.writeUInt8=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,1,255,0),this[Z]=U&255,Z+1},M.prototype.writeUint16LE=M.prototype.writeUInt16LE=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,2,65535,0),this[Z]=U&255,this[Z+1]=U>>>8,Z+2},M.prototype.writeUint16BE=M.prototype.writeUInt16BE=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,2,65535,0),this[Z]=U>>>8,this[Z+1]=U&255,Z+2},M.prototype.writeUint32LE=M.prototype.writeUInt32LE=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,4,4294967295,0),this[Z+3]=U>>>24,this[Z+2]=U>>>16,this[Z+1]=U>>>8,this[Z]=U&255,Z+4},M.prototype.writeUint32BE=M.prototype.writeUInt32BE=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,4,4294967295,0),this[Z]=U>>>24,this[Z+1]=U>>>16,this[Z+2]=U>>>8,this[Z+3]=U&255,Z+4};function Nt(G,U,Z,me,Re){pe(U,me,Re,G,Z,7);let Ve=Number(U&BigInt(4294967295));G[Z++]=Ve,Ve=Ve>>8,G[Z++]=Ve,Ve=Ve>>8,G[Z++]=Ve,Ve=Ve>>8,G[Z++]=Ve;let pt=Number(U>>BigInt(32)&BigInt(4294967295));return G[Z++]=pt,pt=pt>>8,G[Z++]=pt,pt=pt>>8,G[Z++]=pt,pt=pt>>8,G[Z++]=pt,Z}function it(G,U,Z,me,Re){pe(U,me,Re,G,Z,7);let Ve=Number(U&BigInt(4294967295));G[Z+7]=Ve,Ve=Ve>>8,G[Z+6]=Ve,Ve=Ve>>8,G[Z+5]=Ve,Ve=Ve>>8,G[Z+4]=Ve;let pt=Number(U>>BigInt(32)&BigInt(4294967295));return G[Z+3]=pt,pt=pt>>8,G[Z+2]=pt,pt=pt>>8,G[Z+1]=pt,pt=pt>>8,G[Z]=pt,Z+8}M.prototype.writeBigUInt64LE=Dt(function(U,Z=0){return Nt(this,U,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeBigUInt64BE=Dt(function(U,Z=0){return it(this,U,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeIntLE=function(U,Z,me,Re){if(U=+U,Z=Z>>>0,!Re){const ut=Math.pow(2,8*me-1);We(this,U,Z,me,ut-1,-ut)}let Ve=0,pt=1,Wt=0;for(this[Z]=U&255;++Ve<me&&(pt*=256);)U<0&&Wt===0&&this[Z+Ve-1]!==0&&(Wt=1),this[Z+Ve]=(U/pt>>0)-Wt&255;return Z+me},M.prototype.writeIntBE=function(U,Z,me,Re){if(U=+U,Z=Z>>>0,!Re){const ut=Math.pow(2,8*me-1);We(this,U,Z,me,ut-1,-ut)}let Ve=me-1,pt=1,Wt=0;for(this[Z+Ve]=U&255;--Ve>=0&&(pt*=256);)U<0&&Wt===0&&this[Z+Ve+1]!==0&&(Wt=1),this[Z+Ve]=(U/pt>>0)-Wt&255;return Z+me},M.prototype.writeInt8=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,1,127,-128),U<0&&(U=255+U+1),this[Z]=U&255,Z+1},M.prototype.writeInt16LE=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,2,32767,-32768),this[Z]=U&255,this[Z+1]=U>>>8,Z+2},M.prototype.writeInt16BE=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,2,32767,-32768),this[Z]=U>>>8,this[Z+1]=U&255,Z+2},M.prototype.writeInt32LE=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,4,2147483647,-2147483648),this[Z]=U&255,this[Z+1]=U>>>8,this[Z+2]=U>>>16,this[Z+3]=U>>>24,Z+4},M.prototype.writeInt32BE=function(U,Z,me){return U=+U,Z=Z>>>0,me||We(this,U,Z,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[Z]=U>>>24,this[Z+1]=U>>>16,this[Z+2]=U>>>8,this[Z+3]=U&255,Z+4},M.prototype.writeBigInt64LE=Dt(function(U,Z=0){return Nt(this,U,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),M.prototype.writeBigInt64BE=Dt(function(U,Z=0){return it(this,U,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function St(G,U,Z,me,Re,Ve){if(Z+me>G.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function Ft(G,U,Z,me,Re){return U=+U,Z=Z>>>0,Re||St(G,U,Z,4),C.write(G,U,Z,me,23,4),Z+4}M.prototype.writeFloatLE=function(U,Z,me){return Ft(this,U,Z,!0,me)},M.prototype.writeFloatBE=function(U,Z,me){return Ft(this,U,Z,!1,me)};function Mt(G,U,Z,me,Re){return U=+U,Z=Z>>>0,Re||St(G,U,Z,8),C.write(G,U,Z,me,52,8),Z+8}M.prototype.writeDoubleLE=function(U,Z,me){return Mt(this,U,Z,!0,me)},M.prototype.writeDoubleBE=function(U,Z,me){return Mt(this,U,Z,!1,me)},M.prototype.copy=function(U,Z,me,Re){if(!M.isBuffer(U))throw new TypeError("argument should be a Buffer");if(me||(me=0),!Re&&Re!==0&&(Re=this.length),Z>=U.length&&(Z=U.length),Z||(Z=0),Re>0&&Re<me&&(Re=me),Re===me||U.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),U.length-Z<Re-me&&(Re=U.length-Z+me);const Ve=Re-me;return this===U&&typeof j.prototype.copyWithin=="function"?this.copyWithin(Z,me,Re):j.prototype.set.call(U,this.subarray(me,Re),Z),Ve},M.prototype.fill=function(U,Z,me,Re){if(typeof U=="string"){if(typeof Z=="string"?(Re=Z,Z=0,me=this.length):typeof me=="string"&&(Re=me,me=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!M.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(U.length===1){const pt=U.charCodeAt(0);(Re==="utf8"&&pt<128||Re==="latin1")&&(U=pt)}}else typeof U=="number"?U=U&255:typeof U=="boolean"&&(U=Number(U));if(Z<0||this.length<Z||this.length<me)throw new RangeError("Out of range index");if(me<=Z)return this;Z=Z>>>0,me=me===void 0?this.length:me>>>0,U||(U=0);let Ve;if(typeof U=="number")for(Ve=Z;Ve<me;++Ve)this[Ve]=U;else{const pt=M.isBuffer(U)?U:M.from(U,Re),Wt=pt.length;if(Wt===0)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(Ve=0;Ve<me-Z;++Ve)this[Ve+Z]=pt[Ve%Wt]}return this};const Kt={};function be(G,U,Z){Kt[G]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:U.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(G,U){return`The "${G}" argument must be of type number. Received type ${typeof U}`},TypeError),be("ERR_OUT_OF_RANGE",function(G,U,Z){let me=`The value of "${G}" is out of range.`,Re=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?Re=D(String(Z)):typeof Z=="bigint"&&(Re=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Re=D(Re)),Re+="n"),me+=` It must be ${U}. Received ${Re}`,me},RangeError);function D(G){let U="",Z=G.length;const me=G[0]==="-"?1:0;for(;Z>=me+4;Z-=3)U=`_${G.slice(Z-3,Z)}${U}`;return`${G.slice(0,Z)}${U}`}function W(G,U,Z){De(U,"offset"),(G[U]===void 0||G[U+Z]===void 0)&&ve(U,G.length-(Z+1))}function pe(G,U,Z,me,Re,Ve){if(G>Z||G<U){const pt=typeof U=="bigint"?"n":"";let Wt;throw U===0||U===BigInt(0)?Wt=`>= 0${pt} and < 2${pt} ** ${(Ve+1)*8}${pt}`:Wt=`>= -(2${pt} ** ${(Ve+1)*8-1}${pt}) and < 2 ** ${(Ve+1)*8-1}${pt}`,new Kt.ERR_OUT_OF_RANGE("value",Wt,G)}W(me,Re,Ve)}function De(G,U){if(typeof G!="number")throw new Kt.ERR_INVALID_ARG_TYPE(U,"number",G)}function ve(G,U,Z){throw Math.floor(G)!==G?(De(G,Z),new Kt.ERR_OUT_OF_RANGE("offset","an integer",G)):U<0?new Kt.ERR_BUFFER_OUT_OF_BOUNDS:new Kt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${U}`,G)}const Ae=/[^+/0-9A-Za-z-_]/g;function le(G){if(G=G.split("=")[0],G=G.trim().replace(Ae,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function ft(G,U){U=U||1/0;let Z;const me=G.length;let Re=null;const Ve=[];for(let pt=0;pt<me;++pt){if(Z=G.charCodeAt(pt),Z>55295&&Z<57344){if(!Re){if(Z>56319){(U-=3)>-1&&Ve.push(239,191,189);continue}else if(pt+1===me){(U-=3)>-1&&Ve.push(239,191,189);continue}Re=Z;continue}if(Z<56320){(U-=3)>-1&&Ve.push(239,191,189),Re=Z;continue}Z=(Re-55296<<10|Z-56320)+65536}else Re&&(U-=3)>-1&&Ve.push(239,191,189);if(Re=null,Z<128){if((U-=1)<0)break;Ve.push(Z)}else if(Z<2048){if((U-=2)<0)break;Ve.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((U-=3)<0)break;Ve.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((U-=4)<0)break;Ve.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return Ve}function vt(G){const U=[];for(let Z=0;Z<G.length;++Z)U.push(G.charCodeAt(Z)&255);return U}function F(G,U){let Z,me,Re;const Ve=[];for(let pt=0;pt<G.length&&!((U-=2)<0);++pt)Z=G.charCodeAt(pt),me=Z>>8,Re=Z%256,Ve.push(Re),Ve.push(me);return Ve}function $e(G){return E.toByteArray(le(G))}function nt(G,U,Z,me){let Re;for(Re=0;Re<me&&!(Re+Z>=U.length||Re>=G.length);++Re)U[Re+Z]=G[Re];return Re}function ye(G,U){return G instanceof U||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===U.name}function Me(G){return G!==G}const Ke=function(){const G="0123456789abcdef",U=new Array(256);for(let Z=0;Z<16;++Z){const me=Z*16;for(let Re=0;Re<16;++Re)U[me+Re]=G[Z]+G[Re]}return U}();function Dt(G){return typeof BigInt>"u"?ge:G}function ge(){throw new Error("BigInt not supported")}})(t);const w=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=w,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(mE)),mE}var gE,OD;function Qr(){if(OD)return gE;OD=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return gE={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},gE}var yE={exports:{}},bE,PD;function QL(){return PD||(PD=1,bE={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),bE}var vE,FD;function Pi(){if(FD)return vE;FD=1;const{format:e,inspect:t}=QL(),{AggregateError:n}=Qr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function u(x,w){if(!x)throw new l.ERR_INTERNAL_ASSERTION(w)}function d(x){let w="",_=x.length;const E=x[0]==="-"?1:0;for(;_>=E+4;_-=3)w=`_${x.slice(_-3,_)}${w}`;return`${x.slice(0,_)}${w}`}function h(x,w,_){if(typeof w=="function")return u(w.length<=_.length,`Code: ${x}; The provided arguments length (${_.length}) does not match the required ones (${w.length}).`),w(..._);const E=(w.match(/%[dfijoOs]/g)||[]).length;return u(E===_.length,`Code: ${x}; The provided arguments length (${_.length}) does not match the required ones (${E}).`),_.length===0?w:e(w,..._)}function m(x,w,_){_||(_=Error);class E extends _{constructor(...k){super(h(x,w,k))}toString(){return`${this.name} [${x}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${x}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=x,E.prototype[a]=!0,l[x]=E}function g(x){const w=o+x.name;return Object.defineProperty(x,"name",{value:w}),x}function b(x,w){if(x&&w&&x!==w){if(Array.isArray(w.errors))return w.errors.push(x),w;const _=new r([w,x],w.message);return _.code=w.code,_}return x||w}class v extends Error{constructor(w="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",_);super(w,_),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(x,w,_)=>{u(typeof x=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let E="The ";x.endsWith(" argument")?E+=`${x} `:E+=`"${x}" ${x.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],I=[];for(const N of w)u(typeof N=="string","All expected entries have to be of type string"),i.includes(N)?C.push(N.toLowerCase()):s.test(N)?k.push(N):(u(N!=="object",'The value "object" should be written as "Object"'),I.push(N));if(k.length>0){const N=C.indexOf("object");N!==-1&&(C.splice(C,N,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const N=C.pop();E+=`one of type ${C.join(", ")}, or ${N}`}}(k.length>0||I.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const N=k.pop();E+=`an instance of ${k.join(", ")}, or ${N}`}}I.length>0&&(E+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(E+="an "),E+=`${I[0]}`;break;case 2:E+=`one of ${I[0]} or ${I[1]}`;break;default:{const N=I.pop();E+=`one of ${I.join(", ")}, or ${N}`}}if(_==null)E+=`. Received ${_}`;else if(typeof _=="function"&&_.name)E+=`. Received function ${_.name}`;else if(typeof _=="object"){var j;if((j=_.constructor)!==null&&j!==void 0&&j.name)E+=`. Received an instance of ${_.constructor.name}`;else{const N=t(_,{depth:-1});E+=`. Received ${N}`}}else{let N=t(_,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),E+=`. Received type ${typeof _} (${N})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(x,w,_="is invalid")=>{let E=t(w);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${x.includes(".")?"property":"argument"} '${x}' ${_}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(x,w,_)=>{var E;const C=_!=null&&(E=_.constructor)!==null&&E!==void 0&&E.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${x} to be returned from the "${w}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(...x)=>{u(x.length>0,"At least one arg needs to be specified");let w;const _=x.length;switch(x=(Array.isArray(x)?x:[x]).map(E=>`"${E}"`).join(" or "),_){case 1:w+=`The ${x[0]} argument`;break;case 2:w+=`The ${x[0]} and ${x[1]} arguments`;break;default:{const E=x.pop();w+=`The ${x.join(", ")}, and ${E} arguments`}break}return`${w} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(x,w,_)=>{u(w,'Missing "range" argument');let E;if(Number.isInteger(_)&&Math.abs(_)>2**32)E=d(String(_));else if(typeof _=="bigint"){E=String(_);const C=BigInt(2)**BigInt(32);(_>C||_<-C)&&(E=d(E)),E+="n"}else E=t(_);return`The value of "${x}" is out of range. It must be ${w}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),vE={AbortError:v,aggregateTwoErrors:g(b),hideStackFrames:g,codes:l},vE}var Cg={exports:{}},LD;function R0(){if(LD)return Cg.exports;LD=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Cg.exports=e,Cg.exports.AbortSignal=t,Cg.exports.default=e,Cg.exports}var iw={exports:{}},BD;function G1(){if(BD)return iw.exports;BD=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,I,j){return Function.prototype.apply.call(k,I,j)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}iw.exports=i,iw.exports.once=w,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");s=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var I=[],j=1;j<arguments.length;j++)I.push(arguments[j]);var N=k==="error",P=this._events;if(P!==void 0)N=N&&P.error===void 0;else if(!N)return!1;if(N){var L;if(I.length>0&&(L=I[0]),L instanceof Error)throw L;var H=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw H.context=L,H}var M=P[k];if(M===void 0)return!1;if(typeof M=="function")t(M,this,I);else for(var K=M.length,q=b(M,K),j=0;j<K;++j)t(q[j],this,I);return!0};function u(C,k,I,j){var N,P,L;if(o(I),P=C._events,P===void 0?(P=C._events=Object.create(null),C._eventsCount=0):(P.newListener!==void 0&&(C.emit("newListener",k,I.listener?I.listener:I),P=C._events),L=P[k]),L===void 0)L=P[k]=I,++C._eventsCount;else if(typeof L=="function"?L=P[k]=j?[I,L]:[L,I]:j?L.unshift(I):L.push(I),N=l(C),N>0&&L.length>N&&!L.warned){L.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=C,H.type=k,H.count=L.length,r(H)}return C}i.prototype.addListener=function(k,I){return u(this,k,I,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,I){return u(this,k,I,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,I){var j={fired:!1,wrapFn:void 0,target:C,type:k,listener:I},N=d.bind(j);return N.listener=I,j.wrapFn=N,N}i.prototype.once=function(k,I){return o(I),this.on(k,h(this,k,I)),this},i.prototype.prependOnceListener=function(k,I){return o(I),this.prependListener(k,h(this,k,I)),this},i.prototype.removeListener=function(k,I){var j,N,P,L,H;if(o(I),N=this._events,N===void 0)return this;if(j=N[k],j===void 0)return this;if(j===I||j.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete N[k],N.removeListener&&this.emit("removeListener",k,j.listener||I));else if(typeof j!="function"){for(P=-1,L=j.length-1;L>=0;L--)if(j[L]===I||j[L].listener===I){H=j[L].listener,P=L;break}if(P<0)return this;P===0?j.shift():v(j,P),j.length===1&&(N[k]=j[0]),N.removeListener!==void 0&&this.emit("removeListener",k,H||I)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var I,j,N;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[k]),this;if(arguments.length===0){var P=Object.keys(j),L;for(N=0;N<P.length;++N)L=P[N],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=j[k],typeof I=="function")this.removeListener(k,I);else if(I!==void 0)for(N=I.length-1;N>=0;N--)this.removeListener(k,I[N]);return this};function m(C,k,I){var j=C._events;if(j===void 0)return[];var N=j[k];return N===void 0?[]:typeof N=="function"?I?[N.listener||N]:[N]:I?x(N):b(N,N.length)}i.prototype.listeners=function(k){return m(this,k,!0)},i.prototype.rawListeners=function(k){return m(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):g.call(C,k)},i.prototype.listenerCount=g;function g(C){var k=this._events;if(k!==void 0){var I=k[C];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function b(C,k){for(var I=new Array(k),j=0;j<k;++j)I[j]=C[j];return I}function v(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function x(C){for(var k=new Array(C.length),I=0;I<k.length;++I)k[I]=C[I].listener||C[I];return k}function w(C,k){return new Promise(function(I,j){function N(L){C.removeListener(k,P),j(L)}function P(){typeof C.removeListener=="function"&&C.removeListener("error",N),I([].slice.call(arguments))}E(C,k,P,{once:!0}),k!=="error"&&_(C,N,{once:!0})})}function _(C,k,I){typeof C.on=="function"&&E(C,"error",k,I)}function E(C,k,I,j){if(typeof C.on=="function")j.once?C.once(k,I):C.on(k,I);else if(typeof C.addEventListener=="function")C.addEventListener(k,function N(P){j.once&&C.removeEventListener(k,N),I(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return iw.exports}var $D;function Yi(){return $D||($D=1,function(e){const t=rd(),{format:n,inspect:r}=QL(),{codes:{ERR_INVALID_ARG_TYPE:a}}=Pi(),{kResistStopPropagation:i,AggregateError:s,SymbolDispose:o}=Qr(),l=globalThis.AbortSignal||R0().AbortSignal,u=globalThis.AbortController||R0().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(x){return x instanceof h}:function(x){return!1},g=(v,x)=>{if(v!==void 0&&(v===null||typeof v!="object"||!("aborted"in v)))throw new a(x,"AbortSignal",v)},b=(v,x)=>{if(typeof v!="function")throw new a(x,"Function",v)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(v){let x=!1;return function(...w){x||(x=!0,v.apply(this,w))}},createDeferredPromise:function(){let v,x;return{promise:new Promise((_,E)=>{v=_,x=E}),resolve:v,reject:x}},promisify(v){return new Promise((x,w)=>{v((_,...E)=>_?w(_):x(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(v){return v instanceof d},isArrayBufferView(v){return ArrayBuffer.isView(v)}},isBlob:m,deprecate(v,x){return v},addAbortListener:G1().addAbortListener||function(x,w){if(x===void 0)throw new a("signal","AbortSignal",x);g(x,"signal"),b(w,"listener");let _;return x.aborted?queueMicrotask(()=>w()):(x.addEventListener("abort",w,{__proto__:null,once:!0,[i]:!0}),_=()=>{x.removeEventListener("abort",w)}),{__proto__:null,[o](){var E;(E=_)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(x){if(x.length===1)return x[0];const w=new u,_=()=>w.abort();return x.forEach(E=>{g(E,"signals"),E.addEventListener("abort",_,{once:!0})}),w.signal.addEventListener("abort",()=>{x.forEach(E=>E.removeEventListener("abort",_))},{once:!0}),w.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(yE)),yE.exports}var sw={},wE,zD;function Ny(){if(zD)return wE;zD=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=Qr(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=Pi(),{normalizeEncoding:C}=Yi(),{isAsyncFunction:k,isArrayBufferView:I}=Yi().types,j={};function N(ee){return ee===(ee|0)}function P(ee){return ee===ee>>>0}const L=/^[0-7]+$/,H="must be a 32-bit unsigned integer or an octal string";function M(ee,xe,Fe){if(typeof ee>"u"&&(ee=Fe),typeof ee=="string"){if(d(L,ee)===null)throw new w(xe,ee,H);ee=l(ee,8)}return ue(ee,xe),ee}const K=b((ee,xe,Fe=o,Ce=s)=>{if(typeof ee!="number")throw new x(xe,"number",ee);if(!a(ee))throw new _(xe,"an integer",ee);if(ee<Fe||ee>Ce)throw new _(xe,`>= ${Fe} && <= ${Ce}`,ee)}),q=b((ee,xe,Fe=-2147483648,Ce=2147483647)=>{if(typeof ee!="number")throw new x(xe,"number",ee);if(!a(ee))throw new _(xe,"an integer",ee);if(ee<Fe||ee>Ce)throw new _(xe,`>= ${Fe} && <= ${Ce}`,ee)}),ue=b((ee,xe,Fe=!1)=>{if(typeof ee!="number")throw new x(xe,"number",ee);if(!a(ee))throw new _(xe,"an integer",ee);const Ce=Fe?1:0,We=4294967295;if(ee<Ce||ee>We)throw new _(xe,`>= ${Ce} && <= ${We}`,ee)});function ae(ee,xe){if(typeof ee!="string")throw new x(xe,"string",ee)}function te(ee,xe,Fe=void 0,Ce){if(typeof ee!="number")throw new x(xe,"number",ee);if(Fe!=null&&ee<Fe||Ce!=null&&ee>Ce||(Fe!=null||Ce!=null)&&i(ee))throw new _(xe,`${Fe!=null?`>= ${Fe}`:""}${Fe!=null&&Ce!=null?" && ":""}${Ce!=null?`<= ${Ce}`:""}`,ee)}const Y=b((ee,xe,Fe)=>{if(!t(Fe,ee)){const We="must be one of: "+n(r(Fe,Nt=>typeof Nt=="string"?`'${Nt}'`:h(Nt)),", ");throw new w(xe,ee,We)}});function ie(ee,xe){if(typeof ee!="boolean")throw new x(xe,"boolean",ee)}function V(ee,xe,Fe){return ee==null||!u(ee,xe)?Fe:ee[xe]}const J=b((ee,xe,Fe=null)=>{const Ce=V(Fe,"allowArray",!1),We=V(Fe,"allowFunction",!1);if(!V(Fe,"nullable",!1)&&ee===null||!Ce&&e(ee)||typeof ee!="object"&&(!We||typeof ee!="function"))throw new x(xe,"Object",ee)}),Q=b((ee,xe)=>{if(ee!=null&&typeof ee!="object"&&typeof ee!="function")throw new x(xe,"a dictionary",ee)}),ne=b((ee,xe,Fe=0)=>{if(!e(ee))throw new x(xe,"Array",ee);if(ee.length<Fe){const Ce=`must be longer than ${Fe}`;throw new w(xe,ee,Ce)}});function he(ee,xe){ne(ee,xe);for(let Fe=0;Fe<ee.length;Fe++)ae(ee[Fe],`${xe}[${Fe}]`)}function de(ee,xe){ne(ee,xe);for(let Fe=0;Fe<ee.length;Fe++)ie(ee[Fe],`${xe}[${Fe}]`)}function Ie(ee,xe){ne(ee,xe);for(let Fe=0;Fe<ee.length;Fe++){const Ce=ee[Fe],We=`${xe}[${Fe}]`;if(Ce==null)throw new x(We,"AbortSignal",Ce);Qe(Ce,We)}}function ke(ee,xe="signal"){if(ae(ee,xe),j[ee]===void 0)throw j[m(ee)]!==void 0?new E(ee+" (signals must use all capital letters)"):new E(ee)}const Te=b((ee,xe="buffer")=>{if(!I(ee))throw new x(xe,["Buffer","TypedArray","DataView"],ee)});function Se(ee,xe){const Fe=C(xe),Ce=ee.length;if(Fe==="hex"&&Ce%2!==0)throw new w("encoding",xe,`is invalid for data of length ${Ce}`)}function Pe(ee,xe="Port",Fe=!0){if(typeof ee!="number"&&typeof ee!="string"||typeof ee=="string"&&g(ee).length===0||+ee!==+ee>>>0||ee>65535||ee===0&&!Fe)throw new v(xe,ee,Fe);return ee|0}const Qe=b((ee,xe)=>{if(ee!==void 0&&(ee===null||typeof ee!="object"||!("aborted"in ee)))throw new x(xe,"AbortSignal",ee)}),Le=b((ee,xe)=>{if(typeof ee!="function")throw new x(xe,"Function",ee)}),je=b((ee,xe)=>{if(typeof ee!="function"||k(ee))throw new x(xe,"Function",ee)}),z=b((ee,xe)=>{if(ee!==void 0)throw new x(xe,"undefined",ee)});function Ee(ee,xe,Fe){if(!t(Fe,ee))throw new x(xe,`('${n(Fe,"|")}')`,ee)}const Ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function fe(ee,xe){if(typeof ee>"u"||!d(Ne,ee))throw new w(xe,ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function se(ee){if(typeof ee=="string")return fe(ee,"hints"),ee;if(e(ee)){const xe=ee.length;let Fe="";if(xe===0)return Fe;for(let Ce=0;Ce<xe;Ce++){const We=ee[Ce];fe(We,"hints"),Fe+=We,Ce!==xe-1&&(Fe+=", ")}return Fe}throw new w("hints",ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return wE={isInt32:N,isUint32:P,parseFileMode:M,validateArray:ne,validateStringArray:he,validateBooleanArray:de,validateAbortSignalArray:Ie,validateBoolean:ie,validateBuffer:Te,validateDictionary:Q,validateEncoding:Se,validateFunction:Le,validateInt32:q,validateInteger:K,validateNumber:te,validateObject:J,validateOneOf:Y,validatePlainFunction:je,validatePort:Pe,validateSignalName:ke,validateString:ae,validateUint32:ue,validateUndefined:z,validateUnion:Ee,validateAbortSignal:Qe,validateLinkHeaderValue:se},wE}var ow={exports:{}},xE={},UD;function Pf(){return UD||(UD=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=s}catch{a=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function l(C){if(a===setTimeout)return setTimeout(C,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function u(C){if(i===clearTimeout)return clearTimeout(C);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var d=[],h=!1,m,g=-1;function b(){!h||!m||(h=!1,m.length?d=m.concat(d):g=-1,d.length&&v())}function v(){if(!h){var C=l(b);h=!0;for(var k=d.length;k;){for(m=d,d=[];++g<k;)m&&m[g].run();g=-1,k=d.length}m=null,h=!1,u(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var I=1;I<arguments.length;I++)k[I-1]=arguments[I];d.push(new x(C,k)),d.length===1&&!h&&l(v)};function x(C,k){this.fun=C,this.array=k}x.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function w(){}r.on=w,r.addListener=w,r.once=w,r.off=w,r.removeListener=w,r.removeAllListeners=w,r.emit=w,r.prependListener=w,r.prependOnceListener=w,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var _=n.exports;const E=t(_);e.default=E,e.process=E}(xE)),xE}var _E,VD;function Ic(){if(VD)return _E;VD=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Qr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d(V,J=!1){var Q;return!!(V&&typeof V.pipe=="function"&&typeof V.on=="function"&&(!J||typeof V.pause=="function"&&typeof V.resume=="function")&&(!V._writableState||((Q=V._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!V._writableState||V._readableState))}function h(V){var J;return!!(V&&typeof V.write=="function"&&typeof V.on=="function"&&(!V._readableState||((J=V._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function m(V){return!!(V&&typeof V.pipe=="function"&&V._readableState&&typeof V.on=="function"&&typeof V.write=="function")}function g(V){return V&&(V._readableState||V._writableState||typeof V.write=="function"&&typeof V.on=="function"||typeof V.pipe=="function"&&typeof V.on=="function")}function b(V){return!!(V&&!g(V)&&typeof V.pipeThrough=="function"&&typeof V.getReader=="function"&&typeof V.cancel=="function")}function v(V){return!!(V&&!g(V)&&typeof V.getWriter=="function"&&typeof V.abort=="function")}function x(V){return!!(V&&!g(V)&&typeof V.readable=="object"&&typeof V.writable=="object")}function w(V){return b(V)||v(V)||x(V)}function _(V,J){return V==null?!1:J===!0?typeof V[e]=="function":J===!1?typeof V[t]=="function":typeof V[e]=="function"||typeof V[t]=="function"}function E(V){if(!g(V))return null;const J=V._writableState,Q=V._readableState,ne=J||Q;return!!(V.destroyed||V[r]||ne!=null&&ne.destroyed)}function C(V){if(!h(V))return null;if(V.writableEnded===!0)return!0;const J=V._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function k(V,J){if(!h(V))return null;if(V.writableFinished===!0)return!0;const Q=V._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||J===!1&&Q.ended===!0&&Q.length===0)}function I(V){if(!d(V))return null;if(V.readableEnded===!0)return!0;const J=V._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function j(V,J){if(!d(V))return null;const Q=V._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||J===!1&&Q.ended===!0&&Q.length===0)}function N(V){return V&&V[i]!=null?V[i]:typeof(V==null?void 0:V.readable)!="boolean"?null:E(V)?!1:d(V)&&V.readable&&!j(V)}function P(V){return V&&V[s]!=null?V[s]:typeof(V==null?void 0:V.writable)!="boolean"?null:E(V)?!1:h(V)&&V.writable&&!C(V)}function L(V,J){return g(V)?E(V)?!0:!((J==null?void 0:J.readable)!==!1&&N(V)||(J==null?void 0:J.writable)!==!1&&P(V)):null}function H(V){var J,Q;return g(V)?V.writableErrored?V.writableErrored:(J=(Q=V._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function M(V){var J,Q;return g(V)?V.readableErrored?V.readableErrored:(J=(Q=V._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function K(V){if(!g(V))return null;if(typeof V.closed=="boolean")return V.closed;const J=V._writableState,Q=V._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(J==null?void 0:J.closed)||(Q==null?void 0:Q.closed):typeof V._closed=="boolean"&&q(V)?V._closed:null}function q(V){return typeof V._closed=="boolean"&&typeof V._defaultKeepAlive=="boolean"&&typeof V._removedConnection=="boolean"&&typeof V._removedContLen=="boolean"}function ue(V){return typeof V._sent100=="boolean"&&q(V)}function ae(V){var J;return typeof V._consuming=="boolean"&&typeof V._dumped=="boolean"&&((J=V.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function te(V){if(!g(V))return null;const J=V._writableState,Q=V._readableState,ne=J||Q;return!ne&&ue(V)||!!(ne&&ne.autoDestroy&&ne.emitClose&&ne.closed===!1)}function Y(V){var J;return!!(V&&((J=V[o])!==null&&J!==void 0?J:V.readableDidRead||V.readableAborted))}function ie(V){var J,Q,ne,he,de,Ie,ke,Te,Se,Pe;return!!(V&&((J=(Q=(ne=(he=(de=(Ie=V[a])!==null&&Ie!==void 0?Ie:V.readableErrored)!==null&&de!==void 0?de:V.writableErrored)!==null&&he!==void 0?he:(ke=V._readableState)===null||ke===void 0?void 0:ke.errorEmitted)!==null&&ne!==void 0?ne:(Te=V._writableState)===null||Te===void 0?void 0:Te.errorEmitted)!==null&&Q!==void 0?Q:(Se=V._readableState)===null||Se===void 0?void 0:Se.errored)!==null&&J!==void 0?J:!((Pe=V._writableState)===null||Pe===void 0)&&Pe.errored))}return _E={isDestroyed:E,kIsDestroyed:r,isDisturbed:Y,kIsDisturbed:o,isErrored:ie,kIsErrored:a,isReadable:N,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:K,isDuplexNodeStream:m,isFinished:L,isIterable:_,isReadableNodeStream:d,isReadableStream:b,isReadableEnded:I,isReadableFinished:j,isReadableErrored:M,isNodeStream:g,isWebStream:w,isWritable:P,isWritableNodeStream:h,isWritableStream:v,isWritableEnded:C,isWritableFinished:k,isWritableErrored:H,isServerRequest:ae,isServerResponse:ue,willEmitClose:te,isTransformStream:x},_E}var HD;function ad(){if(HD)return ow.exports;HD=1;const e=Pf(),{AbortError:t,codes:n}=Pi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:s}=Yi(),{validateAbortSignal:o,validateFunction:l,validateObject:u,validateBoolean:d}=Ny(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=Qr(),{isClosed:b,isReadable:v,isReadableNodeStream:x,isReadableStream:w,isReadableFinished:_,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:I,isWritableFinished:j,isWritableErrored:N,isNodeStream:P,willEmitClose:L,kIsClosedPromise:H}=Ic();let M;function K(Y){return Y.setHeader&&typeof Y.abort=="function"}const q=()=>{};function ue(Y,ie,V){var J,Q;if(arguments.length===2?(V=ie,ie=i):ie==null?ie=i:u(ie,"options"),l(V,"callback"),o(ie.signal,"options.signal"),V=s(V),w(Y)||I(Y))return ae(Y,ie,V);if(!P(Y))throw new r("stream",["ReadableStream","WritableStream","Stream"],Y);const ne=(J=ie.readable)!==null&&J!==void 0?J:x(Y),he=(Q=ie.writable)!==null&&Q!==void 0?Q:k(Y),de=Y._writableState,Ie=Y._readableState,ke=()=>{Y.writable||Pe()};let Te=L(Y)&&x(Y)===ne&&k(Y)===he,Se=j(Y,!1);const Pe=()=>{Se=!0,Y.destroyed&&(Te=!1),!(Te&&(!Y.readable||ne))&&(!ne||Qe)&&V.call(Y)};let Qe=_(Y,!1);const Le=()=>{Qe=!0,Y.destroyed&&(Te=!1),!(Te&&(!Y.writable||he))&&(!he||Se)&&V.call(Y)},je=ee=>{V.call(Y,ee)};let z=b(Y);const Ee=()=>{z=!0;const ee=N(Y)||E(Y);if(ee&&typeof ee!="boolean")return V.call(Y,ee);if(ne&&!Qe&&x(Y,!0)&&!_(Y,!1))return V.call(Y,new a);if(he&&!Se&&!j(Y,!1))return V.call(Y,new a);V.call(Y)},Ne=()=>{z=!0;const ee=N(Y)||E(Y);if(ee&&typeof ee!="boolean")return V.call(Y,ee);V.call(Y)},fe=()=>{Y.req.on("finish",Pe)};K(Y)?(Y.on("complete",Pe),Te||Y.on("abort",Ee),Y.req?fe():Y.on("request",fe)):he&&!de&&(Y.on("end",ke),Y.on("close",ke)),!Te&&typeof Y.aborted=="boolean"&&Y.on("aborted",Ee),Y.on("end",Le),Y.on("finish",Pe),ie.error!==!1&&Y.on("error",je),Y.on("close",Ee),z?e.nextTick(Ee):de!=null&&de.errorEmitted||Ie!=null&&Ie.errorEmitted?Te||e.nextTick(Ne):(!ne&&(!Te||v(Y))&&(Se||C(Y)===!1)||!he&&(!Te||C(Y))&&(Qe||v(Y)===!1)||Ie&&Y.req&&Y.aborted)&&e.nextTick(Ne);const se=()=>{V=q,Y.removeListener("aborted",Ee),Y.removeListener("complete",Pe),Y.removeListener("abort",Ee),Y.removeListener("request",fe),Y.req&&Y.req.removeListener("finish",Pe),Y.removeListener("end",ke),Y.removeListener("close",ke),Y.removeListener("finish",Pe),Y.removeListener("end",Le),Y.removeListener("error",je),Y.removeListener("close",Ee)};if(ie.signal&&!z){const ee=()=>{const xe=V;se(),xe.call(Y,new t(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)e.nextTick(ee);else{M=M||Yi().addAbortListener;const xe=M(ie.signal,ee),Fe=V;V=s((...Ce)=>{xe[g](),Fe.apply(Y,Ce)})}}return se}function ae(Y,ie,V){let J=!1,Q=q;if(ie.signal)if(Q=()=>{J=!0,V.call(Y,new t(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)e.nextTick(Q);else{M=M||Yi().addAbortListener;const he=M(ie.signal,Q),de=V;V=s((...Ie)=>{he[g](),de.apply(Y,Ie)})}const ne=(...he)=>{J||e.nextTick(()=>V.apply(Y,he))};return m(Y[H].promise,ne,ne),q}function te(Y,ie){var V;let J=!1;return ie===null&&(ie=i),(V=ie)!==null&&V!==void 0&&V.cleanup&&(d(ie.cleanup,"cleanup"),J=ie.cleanup),new h((Q,ne)=>{const he=ue(Y,ie,de=>{J&&he(),de?ne(de):Q()})})}return ow.exports=ue,ow.exports.finished=te,ow.exports}var SE,qD;function qp(){if(qD)return SE;qD=1;const e=Pf(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=Pi(),{Symbol:a}=Qr(),{kIsDestroyed:i,isDestroyed:s,isFinished:o,isServerRequest:l}=Ic(),u=a("kDestroy"),d=a("kConstruct");function h(L,H,M){L&&(L.stack,H&&!H.errored&&(H.errored=L),M&&!M.errored&&(M.errored=L))}function m(L,H){const M=this._readableState,K=this._writableState,q=K||M;return K!=null&&K.destroyed||M!=null&&M.destroyed?(typeof H=="function"&&H(),this):(h(L,K,M),K&&(K.destroyed=!0),M&&(M.destroyed=!0),q.constructed?g(this,L,H):this.once(u,function(ue){g(this,t(ue,L),H)}),this)}function g(L,H,M){let K=!1;function q(ue){if(K)return;K=!0;const ae=L._readableState,te=L._writableState;h(ue,te,ae),te&&(te.closed=!0),ae&&(ae.closed=!0),typeof M=="function"&&M(ue),ue?e.nextTick(b,L,ue):e.nextTick(v,L)}try{L._destroy(H||null,q)}catch(ue){q(ue)}}function b(L,H){x(L,H),v(L)}function v(L){const H=L._readableState,M=L._writableState;M&&(M.closeEmitted=!0),H&&(H.closeEmitted=!0),(M!=null&&M.emitClose||H!=null&&H.emitClose)&&L.emit("close")}function x(L,H){const M=L._readableState,K=L._writableState;K!=null&&K.errorEmitted||M!=null&&M.errorEmitted||(K&&(K.errorEmitted=!0),M&&(M.errorEmitted=!0),L.emit("error",H))}function w(){const L=this._readableState,H=this._writableState;L&&(L.constructed=!0,L.closed=!1,L.closeEmitted=!1,L.destroyed=!1,L.errored=null,L.errorEmitted=!1,L.reading=!1,L.ended=L.readable===!1,L.endEmitted=L.readable===!1),H&&(H.constructed=!0,H.destroyed=!1,H.closed=!1,H.closeEmitted=!1,H.errored=null,H.errorEmitted=!1,H.finalCalled=!1,H.prefinished=!1,H.ended=H.writable===!1,H.ending=H.writable===!1,H.finished=H.writable===!1)}function _(L,H,M){const K=L._readableState,q=L._writableState;if(q!=null&&q.destroyed||K!=null&&K.destroyed)return this;K!=null&&K.autoDestroy||q!=null&&q.autoDestroy?L.destroy(H):H&&(H.stack,q&&!q.errored&&(q.errored=H),K&&!K.errored&&(K.errored=H),M?e.nextTick(x,L,H):x(L,H))}function E(L,H){if(typeof L._construct!="function")return;const M=L._readableState,K=L._writableState;M&&(M.constructed=!1),K&&(K.constructed=!1),L.once(d,H),!(L.listenerCount(d)>1)&&e.nextTick(C,L)}function C(L){let H=!1;function M(K){if(H){_(L,K??new n);return}H=!0;const q=L._readableState,ue=L._writableState,ae=ue||q;q&&(q.constructed=!0),ue&&(ue.constructed=!0),ae.destroyed?L.emit(u,K):K?_(L,K,!0):e.nextTick(k,L)}try{L._construct(K=>{e.nextTick(M,K)})}catch(K){e.nextTick(M,K)}}function k(L){L.emit(d)}function I(L){return(L==null?void 0:L.setHeader)&&typeof L.abort=="function"}function j(L){L.emit("close")}function N(L,H){L.emit("error",H),e.nextTick(j,L)}function P(L,H){!L||s(L)||(!H&&!o(L)&&(H=new r),l(L)?(L.socket=null,L.destroy(H)):I(L)?L.abort():I(L.req)?L.req.abort():typeof L.destroy=="function"?L.destroy(H):typeof L.close=="function"?L.close():H?e.nextTick(N,L,H):e.nextTick(j,L),L.destroyed||(L[i]=!0))}return SE={construct:E,destroyer:P,destroy:m,undestroy:w,errorOrDestroy:_},SE}var EE,GD;function rN(){if(GD)return EE;GD=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Qr(),{EventEmitter:n}=G1();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,s){const o=this;function l(v){i.writable&&i.write(v)===!1&&o.pause&&o.pause()}o.on("data",l);function u(){o.readable&&o.resume&&o.resume()}i.on("drain",u),!i._isStdio&&(!s||s.end!==!1)&&(o.on("end",h),o.on("close",m));let d=!1;function h(){d||(d=!0,i.end())}function m(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function g(v){b(),n.listenerCount(this,"error")===0&&this.emit("error",v)}a(o,"error",g),a(i,"error",g);function b(){o.removeListener("data",l),i.removeListener("drain",u),o.removeListener("end",h),o.removeListener("close",m),o.removeListener("error",g),i.removeListener("error",g),o.removeListener("end",b),o.removeListener("close",b),i.removeListener("close",b)}return o.on("end",b),o.on("close",b),i.on("close",b),i.emit("pipe",o),i};function a(i,s,o){if(typeof i.prependListener=="function")return i.prependListener(s,o);!i._events||!i._events[s]?i.on(s,o):e(i._events[s])?i._events[s].unshift(o):i._events[s]=[o,i._events[s]]}return EE={Stream:r,prependListener:a},EE}var CE={exports:{}},WD;function W1(){return WD||(WD=1,function(e){const{SymbolDispose:t}=Qr(),{AbortError:n,codes:r}=Pi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:s}=Ic(),o=ad(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new l(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(d(m,"signal"),!a(g)&&!i(g))throw new l("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[s](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{u=u||Yi().addAbortListener;const b=u(h,g);o(m,b[t])}return m}}(CE)),CE.exports}var TE,KD;function Kie(){if(KD)return TE;KD=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Qr(),{Buffer:a}=rd(),{inspect:i}=Yi();return TE=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=o+l.data;return u}concat(o){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(o>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(o,l){const u=this.head.data;if(o<u.length){const d=u.slice(0,o);return this.head.data=u.slice(o),d}return o===u.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",u=this.head,d=0;do{const h=u.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(h,0,o),this.head=u,u.data=e(h,o));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(o){const l=a.allocUnsafe(o),u=o;let d=this.head,h=0;do{const m=d.data;if(o>m.length)n(l,m,u-o),o-=m.length;else{o===m.length?(n(l,m,u-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(m.buffer,m.byteOffset,o),u-o),this.head=d,d.data=m.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return i(this,{...l,depth:0,customInspect:!1})}},TE}var kE,ZD;function K1(){if(ZD)return kE;ZD=1;const{MathFloor:e,NumberIsInteger:t}=Qr(),{validateInteger:n}=Ny(),{ERR_INVALID_ARG_VALUE:r}=Pi().codes;let a=16*1024,i=16;function s(d,h,m){return d.highWaterMark!=null?d.highWaterMark:h?d[m]:null}function o(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function u(d,h,m,g){const b=s(h,g,m);if(b!=null){if(!t(b)||b<0){const v=g?`options.${m}`:"options.highWaterMark";throw new r(v,b)}return e(b)}return o(d.objectMode)}return kE={getHighWaterMark:u,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},kE}var AE={},lw={exports:{}},YD;function aN(){return YD||(YD=1,function(e,t){var n=rd(),r=n.Buffer;function a(s,o){for(var l in s)o[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(s,o,l){return r(s,o,l)}a(r,i),i.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,o,l)},i.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return o!==void 0?typeof l=="string"?u.fill(o,l):u.fill(o):u.fill(0),u},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(lw,lw.exports)),lw.exports}var XD;function Zie(){if(XD)return AE;XD=1;var e=aN().Buffer,t=e.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(w){if(!w)return"utf8";for(var _;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(_)return;w=(""+w).toLowerCase(),_=!0}}function r(w){var _=n(w);if(typeof _!="string"&&(e.isEncoding===t||!t(w)))throw new Error("Unknown encoding: "+w);return _||w}AE.StringDecoder=a;function a(w){this.encoding=r(w);var _;switch(this.encoding){case"utf16le":this.text=h,this.end=m,_=4;break;case"utf8":this.fillLast=l,_=4;break;case"base64":this.text=g,this.end=b,_=3;break;default:this.write=v,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}a.prototype.write=function(w){if(w.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(w),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<w.length?_?_+this.text(w,E):this.text(w,E):_||""},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function i(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function s(w,_,E){var C=_.length-1;if(C<E)return 0;var k=i(_[C]);return k>=0?(k>0&&(w.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(_[C]),k>=0?(k>0&&(w.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(_[C]),k>=0?(k>0&&(k===2?k=0:w.lastNeed=k-3),k):0))}function o(w,_,E){if((_[0]&192)!==128)return w.lastNeed=0,"�";if(w.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return w.lastNeed=1,"�";if(w.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return w.lastNeed=2,"�"}}function l(w){var _=this.lastTotal-this.lastNeed,E=o(this,w);if(E!==void 0)return E;if(this.lastNeed<=w.length)return w.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,_,0,w.length),this.lastNeed-=w.length}function u(w,_){var E=s(this,w,_);if(!this.lastNeed)return w.toString("utf8",_);this.lastTotal=E;var C=w.length-(E-this.lastNeed);return w.copy(this.lastChar,0,C),w.toString("utf8",_,C)}function d(w){var _=w&&w.length?this.write(w):"";return this.lastNeed?_+"�":_}function h(w,_){if((w.length-_)%2===0){var E=w.toString("utf16le",_);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",_,w.length-1)}function m(w){var _=w&&w.length?this.write(w):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function g(w,_){var E=(w.length-_)%3;return E===0?w.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",_,w.length-E))}function b(w){var _=w&&w.length?this.write(w):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function v(w){return w.toString(this.encoding)}function x(w){return w&&w.length?this.write(w):""}return AE}var NE,JD;function e9(){if(JD)return NE;JD=1;const e=Pf(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Qr(),{Buffer:a}=rd(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:s}=Pi().codes;function o(l,u,d){let h;if(typeof u=="string"||u instanceof a)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let m;if(u&&u[n])m=!0,h=u[n]();else if(u&&u[r])m=!1,h=u[r]();else throw new i("iterable",["Iterable"],u);const g=new l({objectMode:!0,highWaterMark:1,...d});let b=!1;g._read=function(){b||(b=!0,x())},g._destroy=function(w,_){t(v(w),()=>e.nextTick(_,w),E=>e.nextTick(_,E||w))};async function v(w){const _=w!=null,E=typeof h.throw=="function";if(_&&E){const{value:C,done:k}=await h.throw(w);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function x(){for(;;){try{const{value:w,done:_}=m?await h.next():h.next();if(_)g.push(null);else{const E=w&&typeof w.then=="function"?await w:w;if(E===null)throw b=!1,new s;if(g.push(E))continue;b=!1}}catch(w){g.destroy(w)}break}}return g}return NE=o,NE}var RE,QD;function Z1(){if(QD)return RE;QD=1;const e=Pf(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:m}=Qr();RE=Ce,Ce.ReadableState=Fe;const{EventEmitter:g}=G1(),{Stream:b,prependListener:v}=rN(),{Buffer:x}=rd(),{addAbortSignal:w}=W1(),_=ad();let E=Yi().debuglog("stream",ge=>{E=ge});const C=Kie(),k=qp(),{getHighWaterMark:I,getDefaultHighWaterMark:j}=K1(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:P,ERR_METHOD_NOT_IMPLEMENTED:L,ERR_OUT_OF_RANGE:H,ERR_STREAM_PUSH_AFTER_EOF:M,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:K},AbortError:q}=Pi(),{validateObject:ue}=Ny(),ae=m("kPaused"),{StringDecoder:te}=Zie(),Y=e9();o(Ce.prototype,b.prototype),o(Ce,b);const ie=()=>{},{errorOrDestroy:V}=k,J=1,Q=2,ne=4,he=8,de=16,Ie=32,ke=64,Te=128,Se=256,Pe=512,Qe=1024,Le=2048,je=4096,z=8192,Ee=16384,Ne=32768,fe=65536,se=1<<17,ee=1<<18;function xe(ge){return{enumerable:!1,get(){return(this.state&ge)!==0},set(G){G?this.state|=ge:this.state&=~ge}}}i(Fe.prototype,{objectMode:xe(J),ended:xe(Q),endEmitted:xe(ne),reading:xe(he),constructed:xe(de),sync:xe(Ie),needReadable:xe(ke),emittedReadable:xe(Te),readableListening:xe(Se),resumeScheduled:xe(Pe),errorEmitted:xe(Qe),emitClose:xe(Le),autoDestroy:xe(je),destroyed:xe(z),closed:xe(Ee),closeEmitted:xe(Ne),multiAwaitDrain:xe(fe),readingMore:xe(se),dataEmitted:xe(ee)});function Fe(ge,G,U){typeof U!="boolean"&&(U=G instanceof xc()),this.state=Le|je|de|Ie,ge&&ge.objectMode&&(this.state|=J),U&&ge&&ge.readableObjectMode&&(this.state|=J),this.highWaterMark=ge?I(this,ge,"readableHighWaterMark",U):j(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,ge&&ge.emitClose===!1&&(this.state&=-2049),ge&&ge.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ge&&ge.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ge&&ge.encoding&&(this.decoder=new te(ge.encoding),this.encoding=ge.encoding)}function Ce(ge){if(!(this instanceof Ce))return new Ce(ge);const G=this instanceof xc();this._readableState=new Fe(ge,this,G),ge&&(typeof ge.read=="function"&&(this._read=ge.read),typeof ge.destroy=="function"&&(this._destroy=ge.destroy),typeof ge.construct=="function"&&(this._construct=ge.construct),ge.signal&&!G&&w(ge.signal,this)),b.call(this,ge),k.construct(this,()=>{this._readableState.needReadable&&D(this,this._readableState)})}Ce.prototype.destroy=k.destroy,Ce.prototype._undestroy=k.undestroy,Ce.prototype._destroy=function(ge,G){G(ge)},Ce.prototype[g.captureRejectionSymbol]=function(ge){this.destroy(ge)},Ce.prototype[d]=function(){let ge;return this.destroyed||(ge=this.readableEnded?null:new q,this.destroy(ge)),new l((G,U)=>_(this,Z=>Z&&Z!==ge?U(Z):G(null)))},Ce.prototype.push=function(ge,G){return We(this,ge,G,!1)},Ce.prototype.unshift=function(ge,G){return We(this,ge,G,!0)};function We(ge,G,U,Z){E("readableAddChunk",G);const me=ge._readableState;let Re;if((me.state&J)===0&&(typeof G=="string"?(U=U||me.defaultEncoding,me.encoding!==U&&(Z&&me.encoding?G=x.from(G,U).toString(me.encoding):(G=x.from(G,U),U=""))):G instanceof x?U="":b._isUint8Array(G)?(G=b._uint8ArrayToBuffer(G),U=""):G!=null&&(Re=new P("chunk",["string","Buffer","Uint8Array"],G))),Re)V(ge,Re);else if(G===null)me.state&=-9,Mt(ge,me);else if((me.state&J)!==0||G&&G.length>0)if(Z)if((me.state&ne)!==0)V(ge,new K);else{if(me.destroyed||me.errored)return!1;Nt(ge,me,G,!0)}else if(me.ended)V(ge,new M);else{if(me.destroyed||me.errored)return!1;me.state&=-9,me.decoder&&!U?(G=me.decoder.write(G),me.objectMode||G.length!==0?Nt(ge,me,G,!1):D(ge,me)):Nt(ge,me,G,!1)}else Z||(me.state&=-9,D(ge,me));return!me.ended&&(me.length<me.highWaterMark||me.length===0)}function Nt(ge,G,U,Z){G.flowing&&G.length===0&&!G.sync&&ge.listenerCount("data")>0?((G.state&fe)!==0?G.awaitDrainWriters.clear():G.awaitDrainWriters=null,G.dataEmitted=!0,ge.emit("data",U)):(G.length+=G.objectMode?1:U.length,Z?G.buffer.unshift(U):G.buffer.push(U),(G.state&ke)!==0&&Kt(ge)),D(ge,G)}Ce.prototype.isPaused=function(){const ge=this._readableState;return ge[ae]===!0||ge.flowing===!1},Ce.prototype.setEncoding=function(ge){const G=new te(ge);this._readableState.decoder=G,this._readableState.encoding=this._readableState.decoder.encoding;const U=this._readableState.buffer;let Z="";for(const me of U)Z+=G.write(me);return U.clear(),Z!==""&&U.push(Z),this._readableState.length=Z.length,this};const it=1073741824;function St(ge){if(ge>it)throw new H("size","<= 1GiB",ge);return ge--,ge|=ge>>>1,ge|=ge>>>2,ge|=ge>>>4,ge|=ge>>>8,ge|=ge>>>16,ge++,ge}function Ft(ge,G){return ge<=0||G.length===0&&G.ended?0:(G.state&J)!==0?1:r(ge)?G.flowing&&G.length?G.buffer.first().length:G.length:ge<=G.length?ge:G.ended?G.length:0}Ce.prototype.read=function(ge){E("read",ge),ge===void 0?ge=NaN:n(ge)||(ge=a(ge,10));const G=this._readableState,U=ge;if(ge>G.highWaterMark&&(G.highWaterMark=St(ge)),ge!==0&&(G.state&=-129),ge===0&&G.needReadable&&((G.highWaterMark!==0?G.length>=G.highWaterMark:G.length>0)||G.ended))return E("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?nt(this):Kt(this),null;if(ge=Ft(ge,G),ge===0&&G.ended)return G.length===0&&nt(this),null;let Z=(G.state&ke)!==0;if(E("need readable",Z),(G.length===0||G.length-ge<G.highWaterMark)&&(Z=!0,E("length less than watermark",Z)),G.ended||G.reading||G.destroyed||G.errored||!G.constructed)Z=!1,E("reading, ended or constructing",Z);else if(Z){E("do read"),G.state|=he|Ie,G.length===0&&(G.state|=ke);try{this._read(G.highWaterMark)}catch(Re){V(this,Re)}G.state&=-33,G.reading||(ge=Ft(U,G))}let me;return ge>0?me=$e(ge,G):me=null,me===null?(G.needReadable=G.length<=G.highWaterMark,ge=0):(G.length-=ge,G.multiAwaitDrain?G.awaitDrainWriters.clear():G.awaitDrainWriters=null),G.length===0&&(G.ended||(G.needReadable=!0),U!==ge&&G.ended&&nt(this)),me!==null&&!G.errorEmitted&&!G.closeEmitted&&(G.dataEmitted=!0,this.emit("data",me)),me};function Mt(ge,G){if(E("onEofChunk"),!G.ended){if(G.decoder){const U=G.decoder.end();U&&U.length&&(G.buffer.push(U),G.length+=G.objectMode?1:U.length)}G.ended=!0,G.sync?Kt(ge):(G.needReadable=!1,G.emittedReadable=!0,be(ge))}}function Kt(ge){const G=ge._readableState;E("emitReadable",G.needReadable,G.emittedReadable),G.needReadable=!1,G.emittedReadable||(E("emitReadable",G.flowing),G.emittedReadable=!0,e.nextTick(be,ge))}function be(ge){const G=ge._readableState;E("emitReadable_",G.destroyed,G.length,G.ended),!G.destroyed&&!G.errored&&(G.length||G.ended)&&(ge.emit("readable"),G.emittedReadable=!1),G.needReadable=!G.flowing&&!G.ended&&G.length<=G.highWaterMark,ft(ge)}function D(ge,G){!G.readingMore&&G.constructed&&(G.readingMore=!0,e.nextTick(W,ge,G))}function W(ge,G){for(;!G.reading&&!G.ended&&(G.length<G.highWaterMark||G.flowing&&G.length===0);){const U=G.length;if(E("maybeReadMore read 0"),ge.read(0),U===G.length)break}G.readingMore=!1}Ce.prototype._read=function(ge){throw new L("_read()")},Ce.prototype.pipe=function(ge,G){const U=this,Z=this._readableState;Z.pipes.length===1&&(Z.multiAwaitDrain||(Z.multiAwaitDrain=!0,Z.awaitDrainWriters=new u(Z.awaitDrainWriters?[Z.awaitDrainWriters]:[]))),Z.pipes.push(ge),E("pipe count=%d opts=%j",Z.pipes.length,G);const Re=(!G||G.end!==!1)&&ge!==e.stdout&&ge!==e.stderr?pt:Er;Z.endEmitted?e.nextTick(Re):U.once("end",Re),ge.on("unpipe",Ve);function Ve($n,xi){E("onunpipe"),$n===U&&xi&&xi.hasUnpiped===!1&&(xi.hasUnpiped=!0,Rt())}function pt(){E("onend"),ge.end()}let Wt,ut=!1;function Rt(){E("cleanup"),ge.removeListener("close",Xn),ge.removeListener("finish",Sr),Wt&&ge.removeListener("drain",Wt),ge.removeListener("error",Nn),ge.removeListener("unpipe",Ve),U.removeListener("end",pt),U.removeListener("end",Er),U.removeListener("data",en),ut=!0,Wt&&Z.awaitDrainWriters&&(!ge._writableState||ge._writableState.needDrain)&&Wt()}function Lt(){ut||(Z.pipes.length===1&&Z.pipes[0]===ge?(E("false write response, pause",0),Z.awaitDrainWriters=ge,Z.multiAwaitDrain=!1):Z.pipes.length>1&&Z.pipes.includes(ge)&&(E("false write response, pause",Z.awaitDrainWriters.size),Z.awaitDrainWriters.add(ge)),U.pause()),Wt||(Wt=pe(U,ge),ge.on("drain",Wt))}U.on("data",en);function en($n){E("ondata");const xi=ge.write($n);E("dest.write",xi),xi===!1&&Lt()}function Nn($n){if(E("onerror",$n),Er(),ge.removeListener("error",Nn),ge.listenerCount("error")===0){const xi=ge._writableState||ge._readableState;xi&&!xi.errorEmitted?V(ge,$n):ge.emit("error",$n)}}v(ge,"error",Nn);function Xn(){ge.removeListener("finish",Sr),Er()}ge.once("close",Xn);function Sr(){E("onfinish"),ge.removeListener("close",Xn),Er()}ge.once("finish",Sr);function Er(){E("unpipe"),U.unpipe(ge)}return ge.emit("pipe",U),ge.writableNeedDrain===!0?Lt():Z.flowing||(E("pipe resume"),U.resume()),ge};function pe(ge,G){return function(){const Z=ge._readableState;Z.awaitDrainWriters===G?(E("pipeOnDrain",1),Z.awaitDrainWriters=null):Z.multiAwaitDrain&&(E("pipeOnDrain",Z.awaitDrainWriters.size),Z.awaitDrainWriters.delete(G)),(!Z.awaitDrainWriters||Z.awaitDrainWriters.size===0)&&ge.listenerCount("data")&&ge.resume()}}Ce.prototype.unpipe=function(ge){const G=this._readableState,U={hasUnpiped:!1};if(G.pipes.length===0)return this;if(!ge){const me=G.pipes;G.pipes=[],this.pause();for(let Re=0;Re<me.length;Re++)me[Re].emit("unpipe",this,{hasUnpiped:!1});return this}const Z=t(G.pipes,ge);return Z===-1?this:(G.pipes.splice(Z,1),G.pipes.length===0&&this.pause(),ge.emit("unpipe",this,U),this)},Ce.prototype.on=function(ge,G){const U=b.prototype.on.call(this,ge,G),Z=this._readableState;return ge==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):ge==="readable"&&!Z.endEmitted&&!Z.readableListening&&(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,E("on readable",Z.length,Z.reading),Z.length?Kt(this):Z.reading||e.nextTick(ve,this)),U},Ce.prototype.addListener=Ce.prototype.on,Ce.prototype.removeListener=function(ge,G){const U=b.prototype.removeListener.call(this,ge,G);return ge==="readable"&&e.nextTick(De,this),U},Ce.prototype.off=Ce.prototype.removeListener,Ce.prototype.removeAllListeners=function(ge){const G=b.prototype.removeAllListeners.apply(this,arguments);return(ge==="readable"||ge===void 0)&&e.nextTick(De,this),G};function De(ge){const G=ge._readableState;G.readableListening=ge.listenerCount("readable")>0,G.resumeScheduled&&G[ae]===!1?G.flowing=!0:ge.listenerCount("data")>0?ge.resume():G.readableListening||(G.flowing=null)}function ve(ge){E("readable nexttick read 0"),ge.read(0)}Ce.prototype.resume=function(){const ge=this._readableState;return ge.flowing||(E("resume"),ge.flowing=!ge.readableListening,Ae(this,ge)),ge[ae]=!1,this};function Ae(ge,G){G.resumeScheduled||(G.resumeScheduled=!0,e.nextTick(le,ge,G))}function le(ge,G){E("resume",G.reading),G.reading||ge.read(0),G.resumeScheduled=!1,ge.emit("resume"),ft(ge),G.flowing&&!G.reading&&ge.read(0)}Ce.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function ft(ge){const G=ge._readableState;for(E("flow",G.flowing);G.flowing&&ge.read()!==null;);}Ce.prototype.wrap=function(ge){let G=!1;ge.on("data",Z=>{!this.push(Z)&&ge.pause&&(G=!0,ge.pause())}),ge.on("end",()=>{this.push(null)}),ge.on("error",Z=>{V(this,Z)}),ge.on("close",()=>{this.destroy()}),ge.on("destroy",()=>{this.destroy()}),this._read=()=>{G&&ge.resume&&(G=!1,ge.resume())};const U=s(ge);for(let Z=1;Z<U.length;Z++){const me=U[Z];this[me]===void 0&&typeof ge[me]=="function"&&(this[me]=ge[me].bind(ge))}return this},Ce.prototype[h]=function(){return vt(this)},Ce.prototype.iterator=function(ge){return ge!==void 0&&ue(ge,"options"),vt(this,ge)};function vt(ge,G){typeof ge.read!="function"&&(ge=Ce.wrap(ge,{objectMode:!0}));const U=F(ge,G);return U.stream=ge,U}async function*F(ge,G){let U=ie;function Z(Ve){this===ge?(U(),U=ie):U=Ve}ge.on("readable",Z);let me;const Re=_(ge,{writable:!1},Ve=>{me=Ve?N(me,Ve):null,U(),U=ie});try{for(;;){const Ve=ge.destroyed?null:ge.read();if(Ve!==null)yield Ve;else{if(me)throw me;if(me===null)return;await new l(Z)}}}catch(Ve){throw me=N(me,Ve),me}finally{(me||(G==null?void 0:G.destroyOnReturn)!==!1)&&(me===void 0||ge._readableState.autoDestroy)?k.destroyer(ge,null):(ge.off("readable",Z),Re())}}i(Ce.prototype,{readable:{__proto__:null,get(){const ge=this._readableState;return!!ge&&ge.readable!==!1&&!ge.destroyed&&!ge.errorEmitted&&!ge.endEmitted},set(ge){this._readableState&&(this._readableState.readable=!!ge)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ge){this._readableState&&(this._readableState.flowing=ge)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ge){this._readableState&&(this._readableState.destroyed=ge)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Fe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(ge){this[ae]=!!ge}}}),Ce._fromList=$e;function $e(ge,G){if(G.length===0)return null;let U;return G.objectMode?U=G.buffer.shift():!ge||ge>=G.length?(G.decoder?U=G.buffer.join(""):G.buffer.length===1?U=G.buffer.first():U=G.buffer.concat(G.length),G.buffer.clear()):U=G.buffer.consume(ge,G.decoder),U}function nt(ge){const G=ge._readableState;E("endReadable",G.endEmitted),G.endEmitted||(G.ended=!0,e.nextTick(ye,G,ge))}function ye(ge,G){if(E("endReadableNT",ge.endEmitted,ge.length),!ge.errored&&!ge.closeEmitted&&!ge.endEmitted&&ge.length===0){if(ge.endEmitted=!0,G.emit("end"),G.writable&&G.allowHalfOpen===!1)e.nextTick(Me,G);else if(ge.autoDestroy){const U=G._writableState;(!U||U.autoDestroy&&(U.finished||U.writable===!1))&&G.destroy()}}}function Me(ge){ge.writable&&!ge.writableEnded&&!ge.destroyed&&ge.end()}Ce.from=function(ge,G){return Y(Ce,ge,G)};let Ke;function Dt(){return Ke===void 0&&(Ke={}),Ke}return Ce.fromWeb=function(ge,G){return Dt().newStreamReadableFromReadableStream(ge,G)},Ce.toWeb=function(ge,G){return Dt().newReadableStreamFromStreamReadable(ge,G)},Ce.wrap=function(ge,G){var U,Z;return new Ce({objectMode:(U=(Z=ge.readableObjectMode)!==null&&Z!==void 0?Z:ge.objectMode)!==null&&U!==void 0?U:!0,...G,destroy(me,Re){k.destroyer(ge,me),Re(me)}}).wrap(ge)},RE}var IE,e6;function iN(){if(e6)return IE;e6=1;const e=Pf(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:u}=Qr();IE=ue,ue.WritableState=K;const{EventEmitter:d}=G1(),h=rN().Stream,{Buffer:m}=rd(),g=qp(),{addAbortSignal:b}=W1(),{getHighWaterMark:v,getDefaultHighWaterMark:x}=K1(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:j,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:P}=Pi().codes,{errorOrDestroy:L}=g;s(ue.prototype,h.prototype),s(ue,h);function H(){}const M=l("kOnFinished");function K(je,z,Ee){typeof Ee!="boolean"&&(Ee=z instanceof xc()),this.objectMode=!!(je&&je.objectMode),Ee&&(this.objectMode=this.objectMode||!!(je&&je.writableObjectMode)),this.highWaterMark=je?v(this,je,"writableHighWaterMark",Ee):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ne=!!(je&&je.decodeStrings===!1);this.decodeStrings=!Ne,this.defaultEncoding=je&&je.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=V.bind(void 0,z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,q(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!je||je.emitClose!==!1,this.autoDestroy=!je||je.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[M]=[]}function q(je){je.buffered=[],je.bufferedIndex=0,je.allBuffers=!0,je.allNoop=!0}K.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(K.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ue(je){const z=this instanceof xc();if(!z&&!r(ue,this))return new ue(je);this._writableState=new K(je,this,z),je&&(typeof je.write=="function"&&(this._write=je.write),typeof je.writev=="function"&&(this._writev=je.writev),typeof je.destroy=="function"&&(this._destroy=je.destroy),typeof je.final=="function"&&(this._final=je.final),typeof je.construct=="function"&&(this._construct=je.construct),je.signal&&b(je.signal,this)),h.call(this,je),g.construct(this,()=>{const Ee=this._writableState;Ee.writing||he(this,Ee),Te(this,Ee)})}a(ue,u,{__proto__:null,value:function(je){return r(this,je)?!0:this!==ue?!1:je&&je._writableState instanceof K}}),ue.prototype.pipe=function(){L(this,new C)};function ae(je,z,Ee,Ne){const fe=je._writableState;if(typeof Ee=="function")Ne=Ee,Ee=fe.defaultEncoding;else{if(!Ee)Ee=fe.defaultEncoding;else if(Ee!=="buffer"&&!m.isEncoding(Ee))throw new P(Ee);typeof Ne!="function"&&(Ne=H)}if(z===null)throw new j;if(!fe.objectMode)if(typeof z=="string")fe.decodeStrings!==!1&&(z=m.from(z,Ee),Ee="buffer");else if(z instanceof m)Ee="buffer";else if(h._isUint8Array(z))z=h._uint8ArrayToBuffer(z),Ee="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],z);let se;return fe.ending?se=new N:fe.destroyed&&(se=new k("write")),se?(e.nextTick(Ne,se),L(je,se,!0),se):(fe.pendingcb++,te(je,fe,z,Ee,Ne))}ue.prototype.write=function(je,z,Ee){return ae(this,je,z,Ee)===!0},ue.prototype.cork=function(){this._writableState.corked++},ue.prototype.uncork=function(){const je=this._writableState;je.corked&&(je.corked--,je.writing||he(this,je))},ue.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=o(z)),!m.isEncoding(z))throw new P(z);return this._writableState.defaultEncoding=z,this};function te(je,z,Ee,Ne,fe){const se=z.objectMode?1:Ee.length;z.length+=se;const ee=z.length<z.highWaterMark;return ee||(z.needDrain=!0),z.writing||z.corked||z.errored||!z.constructed?(z.buffered.push({chunk:Ee,encoding:Ne,callback:fe}),z.allBuffers&&Ne!=="buffer"&&(z.allBuffers=!1),z.allNoop&&fe!==H&&(z.allNoop=!1)):(z.writelen=se,z.writecb=fe,z.writing=!0,z.sync=!0,je._write(Ee,Ne,z.onwrite),z.sync=!1),ee&&!z.errored&&!z.destroyed}function Y(je,z,Ee,Ne,fe,se,ee){z.writelen=Ne,z.writecb=ee,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new k("write")):Ee?je._writev(fe,z.onwrite):je._write(fe,se,z.onwrite),z.sync=!1}function ie(je,z,Ee,Ne){--z.pendingcb,Ne(Ee),ne(z),L(je,Ee)}function V(je,z){const Ee=je._writableState,Ne=Ee.sync,fe=Ee.writecb;if(typeof fe!="function"){L(je,new E);return}Ee.writing=!1,Ee.writecb=null,Ee.length-=Ee.writelen,Ee.writelen=0,z?(z.stack,Ee.errored||(Ee.errored=z),je._readableState&&!je._readableState.errored&&(je._readableState.errored=z),Ne?e.nextTick(ie,je,Ee,z,fe):ie(je,Ee,z,fe)):(Ee.buffered.length>Ee.bufferedIndex&&he(je,Ee),Ne?Ee.afterWriteTickInfo!==null&&Ee.afterWriteTickInfo.cb===fe?Ee.afterWriteTickInfo.count++:(Ee.afterWriteTickInfo={count:1,cb:fe,stream:je,state:Ee},e.nextTick(J,Ee.afterWriteTickInfo)):Q(je,Ee,1,fe))}function J({stream:je,state:z,count:Ee,cb:Ne}){return z.afterWriteTickInfo=null,Q(je,z,Ee,Ne)}function Q(je,z,Ee,Ne){for(!z.ending&&!je.destroyed&&z.length===0&&z.needDrain&&(z.needDrain=!1,je.emit("drain"));Ee-- >0;)z.pendingcb--,Ne();z.destroyed&&ne(z),Te(je,z)}function ne(je){if(je.writing)return;for(let fe=je.bufferedIndex;fe<je.buffered.length;++fe){var z;const{chunk:se,callback:ee}=je.buffered[fe],xe=je.objectMode?1:se.length;je.length-=xe,ee((z=je.errored)!==null&&z!==void 0?z:new k("write"))}const Ee=je[M].splice(0);for(let fe=0;fe<Ee.length;fe++){var Ne;Ee[fe]((Ne=je.errored)!==null&&Ne!==void 0?Ne:new k("end"))}q(je)}function he(je,z){if(z.corked||z.bufferProcessing||z.destroyed||!z.constructed)return;const{buffered:Ee,bufferedIndex:Ne,objectMode:fe}=z,se=Ee.length-Ne;if(!se)return;let ee=Ne;if(z.bufferProcessing=!0,se>1&&je._writev){z.pendingcb-=se-1;const xe=z.allNoop?H:Ce=>{for(let We=ee;We<Ee.length;++We)Ee[We].callback(Ce)},Fe=z.allNoop&&ee===0?Ee:t(Ee,ee);Fe.allBuffers=z.allBuffers,Y(je,z,!0,z.length,Fe,"",xe),q(z)}else{do{const{chunk:xe,encoding:Fe,callback:Ce}=Ee[ee];Ee[ee++]=null;const We=fe?1:xe.length;Y(je,z,!1,We,xe,Fe,Ce)}while(ee<Ee.length&&!z.writing);ee===Ee.length?q(z):ee>256?(Ee.splice(0,ee),z.bufferedIndex=0):z.bufferedIndex=ee}z.bufferProcessing=!1}ue.prototype._write=function(je,z,Ee){if(this._writev)this._writev([{chunk:je,encoding:z}],Ee);else throw new _("_write()")},ue.prototype._writev=null,ue.prototype.end=function(je,z,Ee){const Ne=this._writableState;typeof je=="function"?(Ee=je,je=null,z=null):typeof z=="function"&&(Ee=z,z=null);let fe;if(je!=null){const se=ae(this,je,z);se instanceof n&&(fe=se)}return Ne.corked&&(Ne.corked=1,this.uncork()),fe||(!Ne.errored&&!Ne.ending?(Ne.ending=!0,Te(this,Ne,!0),Ne.ended=!0):Ne.finished?fe=new I("end"):Ne.destroyed&&(fe=new k("end"))),typeof Ee=="function"&&(fe||Ne.finished?e.nextTick(Ee,fe):Ne[M].push(Ee)),this};function de(je){return je.ending&&!je.destroyed&&je.constructed&&je.length===0&&!je.errored&&je.buffered.length===0&&!je.finished&&!je.writing&&!je.errorEmitted&&!je.closeEmitted}function Ie(je,z){let Ee=!1;function Ne(fe){if(Ee){L(je,fe??E());return}if(Ee=!0,z.pendingcb--,fe){const se=z[M].splice(0);for(let ee=0;ee<se.length;ee++)se[ee](fe);L(je,fe,z.sync)}else de(z)&&(z.prefinished=!0,je.emit("prefinish"),z.pendingcb++,e.nextTick(Se,je,z))}z.sync=!0,z.pendingcb++;try{je._final(Ne)}catch(fe){Ne(fe)}z.sync=!1}function ke(je,z){!z.prefinished&&!z.finalCalled&&(typeof je._final=="function"&&!z.destroyed?(z.finalCalled=!0,Ie(je,z)):(z.prefinished=!0,je.emit("prefinish")))}function Te(je,z,Ee){de(z)&&(ke(je,z),z.pendingcb===0&&(Ee?(z.pendingcb++,e.nextTick((Ne,fe)=>{de(fe)?Se(Ne,fe):fe.pendingcb--},je,z)):de(z)&&(z.pendingcb++,Se(je,z))))}function Se(je,z){z.pendingcb--,z.finished=!0;const Ee=z[M].splice(0);for(let Ne=0;Ne<Ee.length;Ne++)Ee[Ne]();if(je.emit("finish"),z.autoDestroy){const Ne=je._readableState;(!Ne||Ne.autoDestroy&&(Ne.endEmitted||Ne.readable===!1))&&je.destroy()}}i(ue.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(je){this._writableState&&(this._writableState.destroyed=je)}},writable:{__proto__:null,get(){const je=this._writableState;return!!je&&je.writable!==!1&&!je.destroyed&&!je.errored&&!je.ending&&!je.ended},set(je){this._writableState&&(this._writableState.writable=!!je)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const je=this._writableState;return je?!je.destroyed&&!je.ending&&je.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Pe=g.destroy;ue.prototype.destroy=function(je,z){const Ee=this._writableState;return!Ee.destroyed&&(Ee.bufferedIndex<Ee.buffered.length||Ee[M].length)&&e.nextTick(ne,Ee),Pe.call(this,je,z),this},ue.prototype._undestroy=g.undestroy,ue.prototype._destroy=function(je,z){z(je)},ue.prototype[d.captureRejectionSymbol]=function(je){this.destroy(je)};let Qe;function Le(){return Qe===void 0&&(Qe={}),Qe}return ue.fromWeb=function(je,z){return Le().newStreamWritableFromWritableStream(je,z)},ue.toWeb=function(je){return Le().newWritableStreamFromStreamWritable(je)},IE}var jE,t6;function Yie(){if(t6)return jE;t6=1;const e=Pf(),t=rd(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=Ic(),h=ad(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:b}}=Pi(),{destroyer:v}=qp(),x=xc(),w=Z1(),_=iN(),{createDeferredPromise:E}=Yi(),C=e9(),k=globalThis.Blob||t.Blob,I=typeof k<"u"?function(K){return K instanceof k}:function(K){return!1},j=globalThis.AbortController||R0().AbortController,{FunctionPrototypeCall:N}=Qr();class P extends x{constructor(K){super(K),(K==null?void 0:K.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(K==null?void 0:K.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}jE=function M(K,q){if(l(K))return K;if(s(K))return H({readable:K});if(o(K))return H({writable:K});if(i(K))return H({writable:!1,readable:!1});if(u(K))return H({readable:w.fromWeb(K)});if(d(K))return H({writable:_.fromWeb(K)});if(typeof K=="function"){const{value:ae,write:te,final:Y,destroy:ie}=L(K);if(a(ae))return C(P,ae,{objectMode:!0,write:te,final:Y,destroy:ie});const V=ae==null?void 0:ae.then;if(typeof V=="function"){let J;const Q=N(V,ae,ne=>{if(ne!=null)throw new b("nully","body",ne)},ne=>{v(J,ne)});return J=new P({objectMode:!0,readable:!1,write:te,final(ne){Y(async()=>{try{await Q,e.nextTick(ne,null)}catch(he){e.nextTick(ne,he)}})},destroy:ie})}throw new b("Iterable, AsyncIterable or AsyncFunction",q,ae)}if(I(K))return M(K.arrayBuffer());if(a(K))return C(P,K,{objectMode:!0,writable:!1});if(u(K==null?void 0:K.readable)&&d(K==null?void 0:K.writable))return P.fromWeb(K);if(typeof(K==null?void 0:K.writable)=="object"||typeof(K==null?void 0:K.readable)=="object"){const ae=K!=null&&K.readable?s(K==null?void 0:K.readable)?K==null?void 0:K.readable:M(K.readable):void 0,te=K!=null&&K.writable?o(K==null?void 0:K.writable)?K==null?void 0:K.writable:M(K.writable):void 0;return H({readable:ae,writable:te})}const ue=K==null?void 0:K.then;if(typeof ue=="function"){let ae;return N(ue,K,te=>{te!=null&&ae.push(te),ae.push(null)},te=>{v(ae,te)}),ae=new P({objectMode:!0,writable:!1,read(){}})}throw new g(q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],K)};function L(M){let{promise:K,resolve:q}=E();const ue=new j,ae=ue.signal;return{value:M(async function*(){for(;;){const Y=K;K=null;const{chunk:ie,done:V,cb:J}=await Y;if(e.nextTick(J),V)return;if(ae.aborted)throw new m(void 0,{cause:ae.reason});({promise:K,resolve:q}=E()),yield ie}}(),{signal:ae}),write(Y,ie,V){const J=q;q=null,J({chunk:Y,done:!1,cb:V})},final(Y){const ie=q;q=null,ie({done:!0,cb:Y})},destroy(Y,ie){ue.abort(),ie(Y)}}}function H(M){const K=M.readable&&typeof M.readable.read!="function"?w.wrap(M.readable):M.readable,q=M.writable;let ue=!!n(K),ae=!!r(q),te,Y,ie,V,J;function Q(ne){const he=V;V=null,he?he(ne):ne&&J.destroy(ne)}return J=new P({readableObjectMode:!!(K!=null&&K.readableObjectMode),writableObjectMode:!!(q!=null&&q.writableObjectMode),readable:ue,writable:ae}),ae&&(h(q,ne=>{ae=!1,ne&&v(K,ne),Q(ne)}),J._write=function(ne,he,de){q.write(ne,he)?de():te=de},J._final=function(ne){q.end(),Y=ne},q.on("drain",function(){if(te){const ne=te;te=null,ne()}}),q.on("finish",function(){if(Y){const ne=Y;Y=null,ne()}})),ue&&(h(K,ne=>{ue=!1,ne&&v(K,ne),Q(ne)}),K.on("readable",function(){if(ie){const ne=ie;ie=null,ne()}}),K.on("end",function(){J.push(null)}),J._read=function(){for(;;){const ne=K.read();if(ne===null){ie=J._read;return}if(!J.push(ne))return}}),J._destroy=function(ne,he){!ne&&V!==null&&(ne=new m),ie=null,te=null,Y=null,V===null?he(ne):(V=he,v(q,ne),v(K,ne))},J}return jE}var DE,n6;function xc(){if(n6)return DE;n6=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Qr();DE=s;const a=Z1(),i=iN();r(s.prototype,a.prototype),r(s,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const m=d[h];s.prototype[m]||(s.prototype[m]=i.prototype[m])}}function s(d){if(!(this instanceof s))return new s(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}s.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},s.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return s.from=function(d){return u||(u=Yie()),u(d,"body")},DE}var ME,r6;function t9(){if(r6)return ME;r6=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Qr();ME=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=Pi().codes,r=xc(),{getHighWaterMark:a}=K1();e(s.prototype,r.prototype),e(s,r);const i=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const d=u?a(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[i]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function o(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){u?u(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==o&&o.call(this)}return s.prototype._final=o,s.prototype._transform=function(u,d,h){throw new n("_transform()")},s.prototype._write=function(u,d,h){const m=this._readableState,g=this._writableState,b=m.length;this._transform(u,d,(v,x)=>{if(v){h(v);return}x!=null&&this.push(x),g.ended||b===m.length||m.length<m.highWaterMark?h():this[i]=h})},s.prototype._read=function(){if(this[i]){const u=this[i];this[i]=null,u()}},ME}var OE,a6;function n9(){if(a6)return OE;a6=1;const{ObjectSetPrototypeOf:e}=Qr();OE=n;const t=t9();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},OE}var PE,i6;function sN(){if(i6)return PE;i6=1;const e=Pf(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Qr(),i=ad(),{once:s}=Yi(),o=qp(),l=xc(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:v}=Pi(),{validateFunction:x,validateAbortSignal:w}=Ny(),{isIterable:_,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:I,isWebStream:j,isReadableStream:N,isReadableFinished:P}=Ic(),L=globalThis.AbortController||R0().AbortController;let H,M,K;function q(ne,he,de){let Ie=!1;ne.on("close",()=>{Ie=!0});const ke=i(ne,{readable:he,writable:de},Te=>{Ie=!Te});return{destroy:Te=>{Ie||(Ie=!0,o.destroyer(ne,Te||new g("pipe")))},cleanup:ke}}function ue(ne){return x(ne[ne.length-1],"streams[stream.length - 1]"),ne.pop()}function ae(ne){if(_(ne))return ne;if(C(ne))return te(ne);throw new d("val",["Readable","Iterable","AsyncIterable"],ne)}async function*te(ne){M||(M=Z1()),yield*M.prototype[r].call(ne)}async function Y(ne,he,de,{end:Ie}){let ke,Te=null;const Se=Le=>{if(Le&&(ke=Le),Te){const je=Te;Te=null,je()}},Pe=()=>new n((Le,je)=>{ke?je(ke):Te=()=>{ke?je(ke):Le()}});he.on("drain",Se);const Qe=i(he,{readable:!1},Se);try{he.writableNeedDrain&&await Pe();for await(const Le of ne)he.write(Le)||await Pe();Ie&&(he.end(),await Pe()),de()}catch(Le){de(ke!==Le?u(ke,Le):Le)}finally{Qe(),he.off("drain",Se)}}async function ie(ne,he,de,{end:Ie}){I(he)&&(he=he.writable);const ke=he.getWriter();try{for await(const Te of ne)await ke.ready,ke.write(Te).catch(()=>{});await ke.ready,Ie&&await ke.close(),de()}catch(Te){try{await ke.abort(Te),de(Te)}catch(Se){de(Se)}}}function V(...ne){return J(ne,s(ue(ne)))}function J(ne,he,de){if(ne.length===1&&t(ne[0])&&(ne=ne[0]),ne.length<2)throw new m("streams");const Ie=new L,ke=Ie.signal,Te=de==null?void 0:de.signal,Se=[];w(Te,"options.signal");function Pe(){fe(new v)}K=K||Yi().addAbortListener;let Qe;Te&&(Qe=K(Te,Pe));let Le,je;const z=[];let Ee=0;function Ne(Ce){fe(Ce,--Ee===0)}function fe(Ce,We){var Nt;if(Ce&&(!Le||Le.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Le=Ce),!(!Le&&!We)){for(;z.length;)z.shift()(Le);(Nt=Qe)===null||Nt===void 0||Nt[a](),Ie.abort(),We&&(Le||Se.forEach(it=>it()),e.nextTick(he,Le,je))}}let se;for(let Ce=0;Ce<ne.length;Ce++){const We=ne[Ce],Nt=Ce<ne.length-1,it=Ce>0,St=Nt||(de==null?void 0:de.end)!==!1,Ft=Ce===ne.length-1;if(k(We)){let Mt=function(Kt){Kt&&Kt.name!=="AbortError"&&Kt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ne(Kt)};var Fe=Mt;if(St){const{destroy:Kt,cleanup:be}=q(We,Nt,it);z.push(Kt),E(We)&&Ft&&Se.push(be)}We.on("error",Mt),E(We)&&Ft&&Se.push(()=>{We.removeListener("error",Mt)})}if(Ce===0)if(typeof We=="function"){if(se=We({signal:ke}),!_(se))throw new h("Iterable, AsyncIterable or Stream","source",se)}else _(We)||C(We)||I(We)?se=We:se=l.from(We);else if(typeof We=="function"){if(I(se)){var ee;se=ae((ee=se)===null||ee===void 0?void 0:ee.readable)}else se=ae(se);if(se=We(se,{signal:ke}),Nt){if(!_(se,!0))throw new h("AsyncIterable",`transform[${Ce-1}]`,se)}else{var xe;H||(H=n9());const Mt=new H({objectMode:!0}),Kt=(xe=se)===null||xe===void 0?void 0:xe.then;if(typeof Kt=="function")Ee++,Kt.call(se,W=>{je=W,W!=null&&Mt.write(W),St&&Mt.end(),e.nextTick(Ne)},W=>{Mt.destroy(W),e.nextTick(Ne,W)});else if(_(se,!0))Ee++,Y(se,Mt,Ne,{end:St});else if(N(se)||I(se)){const W=se.readable||se;Ee++,Y(W,Mt,Ne,{end:St})}else throw new h("AsyncIterable or Promise","destination",se);se=Mt;const{destroy:be,cleanup:D}=q(se,!1,!0);z.push(be),Ft&&Se.push(D)}}else if(k(We)){if(C(se)){Ee+=2;const Mt=Q(se,We,Ne,{end:St});E(We)&&Ft&&Se.push(Mt)}else if(I(se)||N(se)){const Mt=se.readable||se;Ee++,Y(Mt,We,Ne,{end:St})}else if(_(se))Ee++,Y(se,We,Ne,{end:St});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=We}else if(j(We)){if(C(se))Ee++,ie(ae(se),We,Ne,{end:St});else if(N(se)||_(se))Ee++,ie(se,We,Ne,{end:St});else if(I(se))Ee++,ie(se.readable,We,Ne,{end:St});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=We}else se=l.from(We)}return(ke!=null&&ke.aborted||Te!=null&&Te.aborted)&&e.nextTick(Pe),se}function Q(ne,he,de,{end:Ie}){let ke=!1;if(he.on("close",()=>{ke||de(new b)}),ne.pipe(he,{end:!1}),Ie){let Se=function(){ke=!0,he.end()};var Te=Se;P(ne)?e.nextTick(Se):ne.once("end",Se)}else de();return i(ne,{readable:!0,writable:!1},Se=>{const Pe=ne._readableState;Se&&Se.code==="ERR_STREAM_PREMATURE_CLOSE"&&Pe&&Pe.ended&&!Pe.errored&&!Pe.errorEmitted?ne.once("end",de).once("error",de):de(Se)}),i(he,{readable:!1,writable:!0},de)}return PE={pipelineImpl:J,pipeline:V},PE}var FE,s6;function r9(){if(s6)return FE;s6=1;const{pipeline:e}=sN(),t=xc(),{destroyer:n}=qp(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:s,isTransformStream:o,isWritableStream:l,isReadableStream:u}=Ic(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=Pi(),g=ad();return FE=function(...v){if(v.length===0)throw new m("streams");if(v.length===1)return t.from(v[0]);const x=[...v];if(typeof v[0]=="function"&&(v[0]=t.from(v[0])),typeof v[v.length-1]=="function"){const H=v.length-1;v[H]=t.from(v[H])}for(let H=0;H<v.length;++H)if(!(!r(v[H])&&!s(v[H]))){if(H<v.length-1&&!(a(v[H])||u(v[H])||o(v[H])))throw new h(`streams[${H}]`,x[H],"must be readable");if(H>0&&!(i(v[H])||l(v[H])||o(v[H])))throw new h(`streams[${H}]`,x[H],"must be writable")}let w,_,E,C,k;function I(H){const M=C;C=null,M?M(H):H?k.destroy(H):!L&&!P&&k.destroy()}const j=v[0],N=e(v,I),P=!!(i(j)||l(j)||o(j)),L=!!(a(N)||u(N)||o(N));if(k=new t({writableObjectMode:!!(j!=null&&j.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:P,readable:L}),P){if(r(j))k._write=function(M,K,q){j.write(M,K)?q():w=q},k._final=function(M){j.end(),_=M},j.on("drain",function(){if(w){const M=w;w=null,M()}});else if(s(j)){const K=(o(j)?j.writable:j).getWriter();k._write=async function(q,ue,ae){try{await K.ready,K.write(q).catch(()=>{}),ae()}catch(te){ae(te)}},k._final=async function(q){try{await K.ready,K.close().catch(()=>{}),_=q}catch(ue){q(ue)}}}const H=o(N)?N.readable:N;g(H,()=>{if(_){const M=_;_=null,M()}})}if(L){if(r(N))N.on("readable",function(){if(E){const H=E;E=null,H()}}),N.on("end",function(){k.push(null)}),k._read=function(){for(;;){const H=N.read();if(H===null){E=k._read;return}if(!k.push(H))return}};else if(s(N)){const M=(o(N)?N.readable:N).getReader();k._read=async function(){for(;;)try{const{value:K,done:q}=await M.read();if(!k.push(K))return;if(q){k.push(null);return}}catch{return}}}}return k._destroy=function(H,M){!H&&C!==null&&(H=new d),E=null,w=null,_=null,C===null?M(H):(C=M,r(N)&&n(N,H))},k},FE}var o6;function Xie(){if(o6)return sw;o6=1;const e=globalThis.AbortController||R0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=Pi(),{validateAbortSignal:s,validateInteger:o,validateObject:l}=Ny(),u=Qr().Symbol("kWeak"),d=Qr().Symbol("kResistStopPropagation"),{finished:h}=ad(),m=r9(),{addAbortSignalNoValidate:g}=W1(),{isWritable:b,isNodeStream:v}=Ic(),{deprecate:x}=Yi(),{ArrayPrototypePush:w,Boolean:_,MathFloor:E,Number:C,NumberIsNaN:k,Promise:I,PromiseReject:j,PromiseResolve:N,PromisePrototypeThen:P,Symbol:L}=Qr(),H=L("kEmpty"),M=L("kEof");function K(Te,Se){if(Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&s(Se.signal,"options.signal"),v(Te)&&!b(Te))throw new t("stream",Te,"must be writable");const Pe=m(this,Te);return Se!=null&&Se.signal&&g(Se.signal,Pe),Pe}function q(Te,Se){if(typeof Te!="function")throw new n("fn",["Function","AsyncFunction"],Te);Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&s(Se.signal,"options.signal");let Pe=1;(Se==null?void 0:Se.concurrency)!=null&&(Pe=E(Se.concurrency));let Qe=Pe-1;return(Se==null?void 0:Se.highWaterMark)!=null&&(Qe=E(Se.highWaterMark)),o(Pe,"options.concurrency",1),o(Qe,"options.highWaterMark",0),Qe+=Pe,(async function*(){const je=Yi().AbortSignalAny([Se==null?void 0:Se.signal].filter(_)),z=this,Ee=[],Ne={signal:je};let fe,se,ee=!1,xe=0;function Fe(){ee=!0,Ce()}function Ce(){xe-=1,We()}function We(){se&&!ee&&xe<Pe&&Ee.length<Qe&&(se(),se=null)}async function Nt(){try{for await(let it of z){if(ee)return;if(je.aborted)throw new i;try{if(it=Te(it,Ne),it===H)continue;it=N(it)}catch(St){it=j(St)}xe+=1,P(it,Ce,Fe),Ee.push(it),fe&&(fe(),fe=null),!ee&&(Ee.length>=Qe||xe>=Pe)&&await new I(St=>{se=St})}Ee.push(M)}catch(it){const St=j(it);P(St,Ce,Fe),Ee.push(St)}finally{ee=!0,fe&&(fe(),fe=null)}}Nt();try{for(;;){for(;Ee.length>0;){const it=await Ee[0];if(it===M)return;if(je.aborted)throw new i;it!==H&&(yield it),Ee.shift(),We()}await new I(it=>{fe=it})}}finally{ee=!0,se&&(se(),se=null)}}).call(this)}function ue(Te=void 0){return Te!=null&&l(Te,"options"),(Te==null?void 0:Te.signal)!=null&&s(Te.signal,"options.signal"),(async function*(){let Pe=0;for await(const Le of this){var Qe;if(Te!=null&&(Qe=Te.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i({cause:Te.signal.reason});yield[Pe++,Le]}}).call(this)}async function ae(Te,Se=void 0){for await(const Pe of V.call(this,Te,Se))return!0;return!1}async function te(Te,Se=void 0){if(typeof Te!="function")throw new n("fn",["Function","AsyncFunction"],Te);return!await ae.call(this,async(...Pe)=>!await Te(...Pe),Se)}async function Y(Te,Se){for await(const Pe of V.call(this,Te,Se))return Pe}async function ie(Te,Se){if(typeof Te!="function")throw new n("fn",["Function","AsyncFunction"],Te);async function Pe(Qe,Le){return await Te(Qe,Le),H}for await(const Qe of q.call(this,Pe,Se));}function V(Te,Se){if(typeof Te!="function")throw new n("fn",["Function","AsyncFunction"],Te);async function Pe(Qe,Le){return await Te(Qe,Le)?Qe:H}return q.call(this,Pe,Se)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(Te,Se,Pe){var Qe;if(typeof Te!="function")throw new n("reducer",["Function","AsyncFunction"],Te);Pe!=null&&l(Pe,"options"),(Pe==null?void 0:Pe.signal)!=null&&s(Pe.signal,"options.signal");let Le=arguments.length>1;if(Pe!=null&&(Qe=Pe.signal)!==null&&Qe!==void 0&&Qe.aborted){const fe=new i(void 0,{cause:Pe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(fe)),fe}const je=new e,z=je.signal;if(Pe!=null&&Pe.signal){const fe={once:!0,[u]:this,[d]:!0};Pe.signal.addEventListener("abort",()=>je.abort(),fe)}let Ee=!1;try{for await(const fe of this){var Ne;if(Ee=!0,Pe!=null&&(Ne=Pe.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new i;Le?Se=await Te(Se,fe,{signal:z}):(Se=fe,Le=!0)}if(!Ee&&!Le)throw new J}finally{je.abort()}return Se}async function ne(Te){Te!=null&&l(Te,"options"),(Te==null?void 0:Te.signal)!=null&&s(Te.signal,"options.signal");const Se=[];for await(const Qe of this){var Pe;if(Te!=null&&(Pe=Te.signal)!==null&&Pe!==void 0&&Pe.aborted)throw new i(void 0,{cause:Te.signal.reason});w(Se,Qe)}return Se}function he(Te,Se){const Pe=q.call(this,Te,Se);return(async function*(){for await(const Le of Pe)yield*Le}).call(this)}function de(Te){if(Te=C(Te),k(Te))return 0;if(Te<0)throw new a("number",">= 0",Te);return Te}function Ie(Te,Se=void 0){return Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&s(Se.signal,"options.signal"),Te=de(Te),(async function*(){var Qe;if(Se!=null&&(Qe=Se.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const je of this){var Le;if(Se!=null&&(Le=Se.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;Te--<=0&&(yield je)}}).call(this)}function ke(Te,Se=void 0){return Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&s(Se.signal,"options.signal"),Te=de(Te),(async function*(){var Qe;if(Se!=null&&(Qe=Se.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const je of this){var Le;if(Se!=null&&(Le=Se.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;if(Te-- >0&&(yield je),Te<=0)return}}).call(this)}return sw.streamReturningOperators={asIndexedPairs:x(ue,"readable.asIndexedPairs will be removed in a future version."),drop:Ie,filter:V,flatMap:he,map:q,take:ke,compose:K},sw.promiseReturningOperators={every:te,forEach:ie,reduce:Q,toArray:ne,some:ae,find:Y},sw}var LE,l6;function a9(){if(l6)return LE;l6=1;const{ArrayPrototypePop:e,Promise:t}=Qr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Ic(),{pipelineImpl:i}=sN(),{finished:s}=ad();i9();function o(...l){return new t((u,d)=>{let h,m;const g=l[l.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const b=e(l);h=b.signal,m=b.end}i(l,(b,v)=>{b?d(b):u(v)},{signal:h,end:m})})}return LE={finished:s,pipeline:o},LE}var c6;function i9(){if(c6)return pE.exports;c6=1;const{Buffer:e}=rd(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Qr(),{promisify:{custom:a}}=Yi(),{streamReturningOperators:i,promiseReturningOperators:s}=Xie(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Pi(),l=r9(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=K1(),{pipeline:h}=sN(),{destroyer:m}=qp(),g=ad(),b=a9(),v=Ic(),x=pE.exports=rN().Stream;x.isDestroyed=v.isDestroyed,x.isDisturbed=v.isDisturbed,x.isErrored=v.isErrored,x.isReadable=v.isReadable,x.isWritable=v.isWritable,x.Readable=Z1();for(const E of n(i)){let k=function(...I){if(new.target)throw o();return x.Readable.from(r(C,this,I))};var _=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(x.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(s)){let k=function(...j){if(new.target)throw o();return r(C,this,j)};var _=k;const C=s[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(x.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}x.Writable=iN(),x.Duplex=xc(),x.Transform=t9(),x.PassThrough=n9(),x.pipeline=h;const{addAbortSignal:w}=W1();return x.addAbortSignal=w,x.finished=g,x.destroy=m,x.compose=l,x.setDefaultHighWaterMark=u,x.getDefaultHighWaterMark=d,t(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),t(h,a,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return b.finished}}),x.Stream=x,x._isUint8Array=function(C){return C instanceof Uint8Array},x._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},pE.exports}var u6;function Jie(){return u6||(u6=1,function(e){const t=i9(),n=a9(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(hE)),hE.exports}var s9=Jie();class oN extends s9.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(lt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class lN extends s9.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(hi(new Ue(lt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(hi(new Ue(lt.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(lt.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(lt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Ys=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Xs=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class gi{get position(){return this.flag&yf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=wi(t,n);Object.assign(this,kf(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&V1||this.inode.flags&Wi.Sync)}_emitChange(){ni(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,LL(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=td(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>Ar?-61441:Ar)|n,(this._isSync||n>Ar)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(lt.EINVAL);if(this.dirty=!0,!(this.flag&di||this.flag&sc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Tx(t),this.inode.mtimeMs=Tx(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=oc(n,"utf8","a",420);if(!(lc(r.flag)&yf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Lr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&di)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Wi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!k0(this.inode)&&!T0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=oc(t,null,"r",292);if(lc(n.flag)&di)throw new Ue(lt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),s=Lr.from(i);return n.encoding?s.toString(n.encoding):s}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&di)throw Ue.With("EBADF",this.path,"readLines");return yie({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!gr(this.context,this.inode,Ra))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Df(this.inode):new Rc(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&di||this.flag&sc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!k0(this.inode)&&!T0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,await this.fs.write(this.internalPath,s,a),this._isSync&&await this.sync(),s.byteLength}async write(t,n,r,a){let i,s,o;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,s=0,i=Lr.from(t,typeof r=="string"?r:"utf8"),o=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n??0,o=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,s,o,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=oc(n,"utf8","w",420),a=lc(r.flag);if(!(a&di||a&sc))throw new Ue(lt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Lr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),zL(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&di)throw Ue.With("EBADF",this.path,"createReadStream");return new oN(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"createWriteStream");return new lN(t,this)}}async function o9(e,t){e=hn(e),t=hn(t);const n=Vn(e,this),r=Vn(t,this);if(!(await Gp.call(this,sr(e))).hasAccess(aa,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),ni(this,"rename",e.toString()),ni(this,"change",t.toString());return}await Q1.call(this,t,await J1(e)),await X1.call(this,e),ni(this,"rename",e.toString())}catch(a){throw yr(a,{[n.path]:e,[r.path]:t})}}async function Ry(e){try{const{fs:t,path:n}=Vn(await id.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function Gp(e,t){e=hn(e);const{fs:n,path:r}=Vn(await id.call(this,e),this);try{const a=await n.stat(r);if(Ia&&!gr(this,a,Ra))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Df(a):new Rc(a)}catch(a){throw yr(a,{[r]:e})}}async function Y1(e,t){e=hn(e);const{fs:n,path:r}=Vn(e,this);try{const a=await n.stat(r);if(Ia&&!gr(this,a,Ra))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Df(a):new Rc(a)}catch(a){throw yr(a,{[r]:e})}}async function l9(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Ys(n,await Js.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Xs(n);r&&await r}}async function X1(e){e=hn(e);const{fs:t,path:n}=Vn(e,this);try{if(Ia&&!gr(this,await t.stat(n),aa))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),ni(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}async function Wp(e,t,n){var r;t=hn(t);const a=td(n.mode,420),i=lc(n.flag),{fullPath:s,fs:o,path:l,stats:u}=await Rx(e,t.toString(),n.preserveSymlinks);if(!u){if(!(i&$1))throw Ue.With("ENOENT",s,"_open");const h=await o.stat(sr(l));if(!gr(e,h,aa))throw Ue.With("EACCES",sr(s),"_open");if(!Co(h))throw Ue.With("ENOTDIR",sr(s),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:No.credentials,b=await o.createFile(l,{mode:a,uid:h.mode&Cy?h.uid:m,gid:h.mode&Ty?h.gid:g});return new gi(e,Ax(new kx(e,t,o,l,i,b)))}if(!gr(e,u,UL(i)))throw Ue.With("EACCES",s,"_open");if(i&z1)throw Ue.With("EEXIST",s,"_open");const d=new gi(e,Ax(new kx(e,t,o,l,i,u)));return i&U1&&await d.truncate(0),d}async function Js(e,t="r",n=420){return await Wp(this,e,{flag:t,mode:n})}async function J1(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=oc(t,null,"r",292);return await Ys(n,typeof e=="object"&&"fd"in e?e:await Js.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Xs(n);r&&await r}}async function Q1(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=oc(n,"utf8","w+",420),i=Ys(r,e instanceof gi?e:await Js.call(this,e.toString(),a.flag,a.mode),!0),s=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof s!="string"&&!(s instanceof Uint8Array))throw new Ue(lt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Xs(r);a&&await a}}async function c9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=oc(n,"utf8","a",420);if(!(lc(a.flag)&yf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Ys(r,typeof e=="object"&&"fd"in e?e:await Js.call(this,e,a.flag,a.mode),!0).appendFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Xs(r);a&&await a}}async function cN(e){e=await id.call(this,e);const{fs:t,path:n}=Vn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!Co(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Ia&&!gr(this,r,aa))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),ni(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}async function e_(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:No.credentials;t=typeof t=="object"?t:{mode:t};const s=td(t==null?void 0:t.mode,511);e=await id.call(this,e);const{fs:o,path:l,root:u}=Vn(e,this),d={[l]:e},h=async(m,g)=>{if(!gr(this,g,aa))throw Ue.With("EACCES",sr(m),"mkdir");const b=await o.mkdir(m,{mode:s,uid:g.mode&Cy?g.uid:a,gid:g.mode&Ty?g.gid:i});return ni(this,"rename",m),b};try{if(!(t!=null&&t.recursive)){await h(l,await o.stat(sr(l)));return}const m=[];for(let b=l,v=e;!await o.exists(b);b=sr(b),v=sr(v))m.unshift(b),d[b]=v;if(!m.length)return;const g=[await o.stat(sr(m[0]))];for(const[b,v]of m.entries())g.push(await h(v,g[b]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw yr(m,d)}}async function Ff(e,t){t=typeof t=="object"?t:{encoding:t},e=await id.call(this,e);const{fs:n,path:r}=Vn(e,this),a=await n.stat(r).catch(l=>wr(yr(l,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!gr(this,a,Ra))throw Ue.With("EACCES",e,"readdir");if(!Co(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>wr(yr(l,{[r]:e}))),s=[],o=async l=>{let u;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(u=await n.stat(fr(r,l)).catch(d=>{if(d.code!="ENOENT")throw yr(d,{[r]:e})}),!u))&&(t!=null&&t.withFileTypes?s.push(new N0(l,u)):(t==null?void 0:t.encoding)=="buffer"?s.push(Lr.from(l)):s.push(l),!(!(t!=null&&t.recursive)||!Co(u))))for(const d of await Ff.call(this,fr(e,l),t))d instanceof N0?(d.path=fr(l,d.path),s.push(d)):Lr.isBuffer(d)?s.push(Lr.from(fr(l,OA(d)))):s.push(fr(l,d))};return await Promise.all(i.map(o)),s}async function u9(e,t){e=hn(e),t=hn(t);const{fs:n,path:r}=Vn(e,this),a=Vn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Ia&&!gr(this,await n.stat(sr(r)),Ra))throw Ue.With("EACCES",sr(r),"link");if(Ia&&!(await Gp.call(this,sr(t))).hasAccess(aa,this))throw Ue.With("EACCES",sr(t),"link");if(Ia&&!gr(this,await n.stat(r),Ra))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw yr(i,{[a.path]:t,[r]:e})}}async function d9(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid symlink type: "+n);if(t=hn(t),await Ry.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=Ys(r,await Wp(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(hn(e,!0)),await a.chmod(Nc)}catch(a){r.error=a,r.hasError=!0}finally{const a=Xs(r);a&&await a}}async function Nx(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Ys(n,await Wp(this,hn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Xs(n);r&&await r}}async function f9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ys(r,await Js.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Xs(r);a&&await a}}async function h9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ys(r,await Wp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Xs(r);a&&await a}}async function p9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ys(n,await Js.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Xs(n);r&&await r}}async function m9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ys(n,await Wp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Xs(n);r&&await r}}async function uN(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ys(r,await Js.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Xs(r);a&&await a}}async function g9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ys(r,await Wp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Xs(r);a&&await a}}async function Rx(e,t,n){if(n){const l=Vn(t,e),u=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:u}}try{const l=Vn(t,e),u=await l.fs.stat(l.path);if(!gp(u))return{...l,fullPath:t,stats:u};const d=wc.call(e,sr(t),(await Nx.call(e,t)).toString());return await Rx(e,d)}catch{}const{base:r,dir:a}=Qo(t),i=a=="/"?"/":await id.call(e,a),s=fr(i,r),o=Vn(s,e);try{const l=await o.fs.stat(o.path);if(!gp(l))return{...o,fullPath:s,stats:l};const u=wc.call(e,i,(await Nx.call(e,s)).toString());return await Rx(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw yr(l,{[o.path]:s})}}async function id(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=await Rx(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Lr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function Qie(e,t={}){const n=new GL(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(s,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:s,filename:o},done:!1})});function i(){a=!0,n.close();for(const s of r)s({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:s,resolve:o}=Promise.withResolvers();return r.push(o),s},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function y9(e,t=UA){if(!(await Gp.call(this,e)).hasAccess(t,this))throw new Ue(lt.EACCES)}async function dN(e,t){e=hn(e);const n=await Y1.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&Ar){case wa:if(t!=null&&t.recursive)for(const r of await Ff.call(this,e))await dN.call(this,fr(e,r),t);await cN.call(this,e);break;case vo:case Nc:case Rf:case If:await X1.call(this,e);break;case jf:case Nf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}async function b9(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await e_.call(this,a),n=="buffer"?Lr.from(a):a}async function fN(e,t,n){if(e=hn(e),t=hn(t),n&&n&VA&&await Ry.call(this,t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");await Q1.call(this,t,await J1.call(this,e)),ni(this,"rename",t.toString())}function v9(e,t){return e=hn(e),Promise.resolve(new nN(e,this))}async function hN(e,t,n){e=hn(e),t=hn(t);const r=await Y1.call(this,e);if(n!=null&&n.errorOnExist&&await Ry.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Ar){case wa:{if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([Ff.call(this,e,{withFileTypes:!0}),e_.call(this,t,{recursive:!0})]),i=async s=>{n.filter&&!n.filter(fr(e,s.name),fr(t,s.name))||await hN.call(this,fr(e,s.name),fr(t,s.name),n)};await Promise.all(a.map(i));break}case vo:case Nc:await fN.call(this,e,t);break;case Rf:case If:case jf:case Nf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await uN.call(this,t,r.atime,r.mtime)}async function w9(e,t){e=hn(e);const{fs:n}=Vn(e,this);return Promise.resolve(HL(n,t==null?void 0:t.bigint))}function x9(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*s(o){const l=await Ff(o,{withFileTypes:r,encoding:"utf8"});for(const u of l){const d=r?u.path:o+"/"+u;a(r?u:d)||((await Gp(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*s(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?u:d.replace(/^\/+/g,"")))}}return s(n)}const ese=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:gi,access:y9,appendFile:c9,chmod:p9,chown:f9,constants:PL,copyFile:fN,cp:hN,exists:Ry,glob:x9,lchmod:m9,lchown:h9,link:u9,lstat:Y1,lutimes:g9,mkdir:e_,mkdtemp:b9,open:Js,opendir:v9,readFile:J1,readdir:Ff,readlink:Nx,realpath:id,rename:o9,rm:dN,rmdir:cN,stat:Gp,statfs:w9,symlink:d9,truncate:l9,unlink:X1,utimes:uN,watch:Qie,writeFile:Q1},Symbol.toStringTag,{value:"Module"})),jn=()=>{};async function tse(e){const t=[];for await(const n of e)t.push(n);return t}function nse(e,t,n=jn){o9.call(this,e,t).then(()=>n()).catch(n)}function rse(e,t=jn){Ry.call(this,e).then(t).catch(()=>t(!1))}function ase(e,t,n=jn){n=typeof t=="function"?t:n,Gp.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function ise(e,t,n=jn){n=typeof t=="function"?t:n,Y1.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function sse(e,t=0,n=jn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;l9.call(this,e,r).then(()=>n()).catch(n)}function ose(e,t=jn){X1.call(this,e).then(()=>t()).catch(t)}function lse(e,t,n,r=jn){const a=td(n,420);r=typeof n=="function"?n:r,Js.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function cse(e,t,n=jn){n=typeof t=="function"?t:n,J1.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function use(e,t,n,r=jn){r=typeof n=="function"?n:r,Q1.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function dse(e,t,n,r=jn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,c9.call(this,e,t,a).then(()=>r()).catch(r)}function fse(e,t,n=jn){n=typeof t=="function"?t:n,new gi(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Df(r):r)).catch(n)}function hse(e,t=jn){new gi(this,e).close().then(()=>t()).catch(t)}function pse(e,t,n=jn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new gi(this,e);if(r<0)throw new Ue(lt.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function mse(e,t=jn){new gi(this,e).sync().then(()=>t()).catch(t)}function gse(e,t=jn){new gi(this,e).datasync().then(()=>t()).catch(t)}function yse(e,t,n,r,a,i=jn){let s,o,l,u,d;const h=new gi(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":u=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(lt.EINVAL,"Invalid arguments"));return}s=Lr.from(t),o=0,l=s.length;const m=i;h.write(s,o,l,u).then(({bytesWritten:g})=>m(void 0,g,s.toString(d))).catch(m)}else{s=Lr.from(t.buffer),o=n,l=r,u=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(s,o,l,u).then(({bytesWritten:g})=>m(void 0,g,s)).catch(m)}}function bse(e,t,n,r,a,i=jn){new gi(this,e).read(t,n,r,a).then(({bytesRead:s,buffer:o})=>i(void 0,s,o)).catch(i)}function vse(e,t,n,r=jn){new gi(this,e).chown(t,n).then(()=>r()).catch(r)}function wse(e,t,n){new gi(this,e).chmod(t).then(()=>n()).catch(n)}function xse(e,t,n,r=jn){new gi(this,e).utimes(t,n).then(()=>r()).catch(r)}function _se(e,t=jn){cN.call(this,e).then(()=>t()).catch(t)}function Sse(e,t,n=jn){e_.call(this,e,t).then(()=>n()).catch(n)}function Ese(e,t,n=jn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};Ff.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function Cse(e,t,n=jn){u9.call(this,e,t).then(()=>n()).catch(n)}function Tse(e,t,n,r=jn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,d9.call(this,e,t,a).then(()=>r()).catch(r)}function kse(e,t,n=jn){n=typeof t=="function"?t:n,Nx.call(this,e).then(r=>n(void 0,r)).catch(n)}function Ase(e,t,n,r=jn){f9.call(this,e,t,n).then(()=>r()).catch(r)}function Nse(e,t,n,r=jn){h9.call(this,e,t,n).then(()=>r()).catch(r)}function Rse(e,t,n=jn){p9.call(this,e,t).then(()=>n()).catch(n)}function Ise(e,t,n=jn){m9.call(this,e,t).then(()=>n()).catch(n)}function jse(e,t,n,r=jn){uN.call(this,e,t,n).then(()=>r()).catch(r)}function Dse(e,t,n,r=jn){g9.call(this,e,t,n).then(()=>r()).catch(r)}function Mse(e,t,n=jn){n=typeof t=="function"?t:n,id.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Ose(e,t,n=jn){const r=typeof t=="number"?t:Ra;n=typeof t=="function"?t:n,y9.call(this,e,r).then(()=>n()).catch(n)}const qh=new Map;function Pse(e,t,n){const r=hn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(lt.EINVAL,"No listener specified",e.toString(),"watchFile");if(qh.has(r)){const s=qh.get(r);s&&s.listeners.add(n);return}const i=new _ie(this,r,a);i.on("change",(s,o)=>{const l=qh.get(r);if(l)for(const u of l.listeners)u(s,o)}),qh.set(r,{watcher:i,listeners:new Set})}function Fse(e,t=jn){const n=hn(e),r=qh.get(n);r&&(t&&t!==jn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),qh.delete(n)))}function Lse(e,t,n){const r=new GL(this,hn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||jn),r}function Bse(e,t){t=typeof t=="object"?t:{encoding:t};const n=Js.call(this,e,"r",t==null?void 0:t.mode);return new oN({...t,autoClose:!0},n)}function $se(e,t){t=typeof t=="object"?t:{encoding:t};const n=Js.call(this,e,"w",t==null?void 0:t.mode);return new lN(t,n)}function zse(e,t,n=jn){n=typeof t=="function"?t:n,dN.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function Use(e,t,n=jn){n=typeof t=="function"?t:n,b9.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function Vse(e,t,n,r=jn){r=typeof n=="function"?n:r,fN.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function Hse(e,t,n,r=jn){r=typeof n=="function"?n:r,new gi(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function qse(e,t,n,r=jn){r=typeof n=="function"?n:r,new gi(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function Gse(e,t,n=jn){n=typeof t=="function"?t:n,v9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function Wse(e,t,n,r=jn){r=typeof n=="function"?n:r,hN.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function Kse(e,t,n=jn){n=typeof t=="function"?t:n,w9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function Zse(e,t){const n=await Js.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function Yse(e,t,n=jn){n=typeof t=="function"?t:n;const r=x9.call(this,e,typeof t=="function"?void 0:t);tse(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Ld=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],b);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},hs=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},Xse=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Ix;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Ix||(Ix={}));let _9=(()=>{var e,t,n,r,a;let i=[Af()],s,o=[],l,u,d=[],h=[],m,g=[],b=[],v,x=[],w=[],_,E=[],C=[],k,I=[],j=[],N,P=[],L=[];return l=class{constructor(H=wr(new Ue(lt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=hs(this,d,0),this.extsize=(hs(this,h),hs(this,g,0)),this.nextents=(hs(this,b),hs(this,x,0)),this.projid=(hs(this,w),hs(this,E,0)),this.cowextsize=(hs(this,C),hs(this,I,0)),this.pad=(hs(this,j),hs(this,P,[])),hs(this,L),this.extsize=H.size,this.nextents=1,this.projid=H.uid,this.cowextsize=H.size;for(const M of Object.keys(Wi))H.flags&Wi[M]&&M in Ix&&(this.xflags|=Ix[M])}},Xse(l,"fsxattr"),(()=>{const H=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=xn).uint32.bind(e)],m=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],_=[(r=xn).uint32.bind(r)],k=[(a=xn).uint32.bind(a)],N=[xn.char(8)],Ld(null,null,u,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:M=>"xflags"in M,get:M=>M.xflags,set:(M,K)=>{M.xflags=K}},metadata:H},d,h),Ld(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:M=>"extsize"in M,get:M=>M.extsize,set:(M,K)=>{M.extsize=K}},metadata:H},g,b),Ld(null,null,v,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:M=>"nextents"in M,get:M=>M.nextents,set:(M,K)=>{M.nextents=K}},metadata:H},x,w),Ld(null,null,_,{kind:"field",name:"projid",static:!1,private:!1,access:{has:M=>"projid"in M,get:M=>M.projid,set:(M,K)=>{M.projid=K}},metadata:H},E,C),Ld(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:M=>"cowextsize"in M,get:M=>M.cowextsize,set:(M,K)=>{M.cowextsize=K}},metadata:H},I,j),Ld(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:M=>"pad"in M,get:M=>M.pad,set:(M,K)=>{M.pad=K}},metadata:H},P,L),Ld(null,s={value:l},i,{kind:"class",name:l.name,metadata:H},null,o),l=s.value,H&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H}),hs(l,o)})(),l})();var Vr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Vr||(Vr={}));var po;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(po||(po={}));async function Jse(e,t,...n){e=hn(e);const{fs:r,path:a}=Vn(e,this);try{const i=new va(await r.stat(a));switch(t){case Vr.GetFlags:case po.GetFlags:return i.flags;case Vr.SetFlags:case po.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Vr.GetVersion:case po.GetVersion:return i.version;case Vr.SetVersion:case po.SetVersion:i.version=n[0],await r.touch(a,i);return;case Vr.Fiemap:break;case Vr.GetXattr:return new _9(i);case Vr.SetXattr:break;case Vr.GetLabel:return r.label;case Vr.SetLabel:r.label=n[0];return;case Vr.GetUUID:return r.uuid;case Vr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw yr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function Qse(e,t,...n){e=hn(e);const{fs:r,path:a}=Vn(e,this);try{const i=new va(r.statSync(a));switch(t){case Vr.GetFlags:case po.GetFlags:return i.flags;case Vr.SetFlags:case po.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Vr.GetVersion:case po.GetVersion:return i.version;case Vr.SetVersion:case po.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Vr.Fiemap:break;case Vr.GetXattr:return new _9(i);case Vr.SetXattr:break;case Vr.GetLabel:return r.label;case Vr.SetLabel:r.label=n[0];return;case Vr.GetUUID:return r.uuid;case Vr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw yr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const eoe=[];function Kp(e,t,n,r){if(!t.startsWith("user.")&&!eoe.includes(t))throw new Ue(lt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function toe(e,t,n={}){var r;e=hn(e);const{fs:a,path:i}=Vn(e,this);Kp(this,t,e,"xattr.get");try{const s=await a.stat(i);if(Ia&&!gr(this,s,Ra))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new zu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Lr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw yr(s,{[i]:e})}}function noe(e,t,n={}){var r;e=hn(e),Kp(this,t,e,"xattr.get");const{fs:a,path:i}=Vn(e,this);try{const s=a.statSync(i);if(Ia&&!gr(this,s,Ra))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new zu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Lr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw yr(s,{[i]:e})}}async function roe(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Vn(e,this);Kp(this,t,e,"xattr.set");try{const o=await i.stat(s);if(Ia&&!gr(this,o,aa))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new zu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Lr.from(n)),await i.touch(s,kf(o,"attributes"))}catch(o){throw yr(o,{[s]:e})}}function aoe(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Vn(e,this);Kp(this,t,e,"xattr.set");try{const o=i.statSync(s);if(Ia&&!gr(this,o,aa))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new zu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Lr.from(n)),i.touchSync(s,kf(o,"attributes"))}catch(o){throw yr(o,{[s]:e})}}async function ioe(e,t){var n;e=hn(e);const{fs:r,path:a}=Vn(e,this);Kp(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(Ia&&!gr(this,i,aa))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new zu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,kf(i,"attributes"))}catch(i){throw yr(i,{[a]:e})}}function soe(e,t){var n;e=hn(e);const{fs:r,path:a}=Vn(e,this);Kp(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(Ia&&!gr(this,i,aa))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new zu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,kf(i,"attributes"))}catch(i){throw yr(i,{[a]:e})}}async function ooe(e){e=hn(e);const{fs:t,path:n}=Vn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw yr(r,{[n]:e})}}function loe(e){e=hn(e);const{fs:t,path:n}=Vn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw yr(r,{[n]:e})}}const coe=Object.freeze(Object.defineProperty({__proto__:null,get:toe,getSync:noe,list:ooe,listSync:loe,remove:ioe,removeSync:soe,set:roe,setSync:aoe},Symbol.toStringTag,{value:"Module"})),Za=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:aie,Dir:nN,Dirent:N0,get IOC(){return Vr},get IOC32(){return po},ReadStream:oN,Stats:Rc,StatsFs:rie,WriteStream:lN,access:Ose,accessSync:zie,appendFile:dse,appendFileSync:kie,chmod:Rse,chmodSync:Lie,chown:Ase,chownSync:Pie,chroot:wie,close:hse,closeSync:Of,constants:PL,copyFile:Vse,copyFileSync:XL,cp:Wse,cpSync:JL,createReadStream:Bse,createWriteStream:$se,exists:rse,existsSync:WA,fchmod:wse,fchmodSync:QA,fchown:vse,fchownSync:JA,fdatasync:gse,fdatasyncSync:Iie,fstat:fse,fstatSync:Aie,fsync:mse,fsyncSync:Rie,ftruncate:pse,ftruncateSync:Nie,futimes:xse,futimesSync:eN,glob:Yse,globSync:Wie,ioctl:Jse,ioctlSync:Qse,lchmod:Ise,lchmodSync:Bie,lchown:Nse,lchownSync:Fie,link:Cse,linkSync:Mie,lopenSync:q1,lstat:ise,lstatSync:KA,lutimes:Dse,lutimesSync:$ie,mkdir:Sse,mkdirSync:tN,mkdtemp:Use,mkdtempSync:Uie,mount:GA,open:lse,openAsBlob:Zse,openSync:H1,opendir:Gse,opendirSync:qie,promises:ese,read:bse,readFile:cse,readFileSync:YA,readSync:Die,readdir:Ese,readdirSync:Hp,readlink:kse,readlinkSync:YT,readv:Hse,readvSync:Vie,realpath:Mse,realpathSync:nd,rename:nse,renameSync:Cie,rm:zse,rmSync:YL,rmdir:_se,rmdirSync:KL,stat:ase,statSync:Uu,statfs:Kse,statfsSync:Gie,symlink:Tse,symlinkSync:Oie,truncate:sse,truncateSync:Tie,umount:VL,unlink:ose,unlinkSync:ZA,unwatchFile:Fse,utimes:jse,utimesSync:ZL,watch:Lse,watchFile:Pse,write:yse,writeFile:use,writeFileSync:XA,writeSync:jie,writev:qse,writevSync:Hie,xattr:coe},Symbol.toStringTag,{value:"Module"}));function d6(e){return CL(e)||zA(e)||e instanceof qA}async function S9(e,t=0){if(typeof e!="object"||e==null)throw Gi(new Ue(lt.EINVAL,"Invalid options on mount configuration"));if(!d6(e))throw Gi(new Ue(lt.EINVAL,"Invalid mount configuration"));if(e instanceof qA)return await e.ready(),e;zA(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&d6(i)){if(EL("Resolving nested mount configuration: "+a),t>10)throw Gi(new Ue(lt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await S9(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Gi(new Ue(lt.EPERM,"Backend not available: "+n.name));$ae(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function uoe(e){if(!CL(e))throw new TypeError("Invalid single mount point configuration");const t=await S9(e);VL("/"),GA("/",t)}const doe=["delete"];Math.max(...doe.map(e=>e.length));Bae("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const E9=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;E9[e]=t}function foe(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^E9[(t^e[n])&255];return(t^4294967295)>>>0}var Ur=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],b);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},Tn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},pN=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let f6=(()=>{var e,t,n,r;let a=[Af()],i,s=[],o,l,u=[],d=[],h,m=[],g=[],b,v=[],x=[],w,_=[],E=[];return o=class{constructor(){this.id=Tn(this,u,0),this.offset_=(Tn(this,d),Tn(this,m,0)),this.offset=(Tn(this,g),Tn(this,v,0)),this.size=(Tn(this,x),Tn(this,_,0)),Tn(this,E)}},pN(o,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],b=[(n=xn).uint32.bind(n)],w=[(r=xn).uint32.bind(r)],Ur(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,I)=>{k.id=I}},metadata:C},u,d),Ur(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,I)=>{k.offset_=I}},metadata:C},m,g),Ur(null,null,b,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,I)=>{k.offset=I}},metadata:C},v,x),Ur(null,null,w,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,I)=>{k.size=I}},metadata:C},_,E),Ur(null,i={value:o},a,{kind:"class",name:o.name,metadata:C},null,s),o=i.value,C&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),Tn(o,s)})(),o})();const h6=255;let Bd=(()=>{var e,t,n,r;let a=[Af()],i,s=[],o,l,u=[],d=[],h,m=[],g=[],b,v=[],x=[],w,_=[],E=[],C,k=[],I=[];var j=o=class{constructor(N=wr(new Ue(lt.EINVAL,"Metadata block must be initialized with a superblock")),P=0){if(this.superblock=N,this.offset=P,this.checksum=Tn(this,u,0),this.timestamp=(Tn(this,d),Tn(this,m,Date.now())),this.previous_offset_=(Tn(this,g),Tn(this,v,0)),this.previous_offset=(Tn(this,x),Tn(this,_,0)),this._previous=Tn(this,E),this.entries=Tn(this,k,Array.from({length:h6},()=>new f6)),Tn(this,I),this.superblock=N,this.offset=P,!!P&&(L1(this,N.store._buffer.subarray(P,P+Hr(j))),!C9(this)))throw B1(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+P.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new j(this.superblock,this.previous_offset)),this._previous}};return pN(o,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],b=[(n=xn).uint32.bind(n)],w=[(r=xn).uint32.bind(r)],C=[C0(f6,h6)],Ur(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:P=>"checksum"in P,get:P=>P.checksum,set:(P,L)=>{P.checksum=L}},metadata:N},u,d),Ur(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:P=>"timestamp"in P,get:P=>P.timestamp,set:(P,L)=>{P.timestamp=L}},metadata:N},m,g),Ur(null,null,b,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:P=>"previous_offset_"in P,get:P=>P.previous_offset_,set:(P,L)=>{P.previous_offset_=L}},metadata:N},v,x),Ur(null,null,w,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:P=>"previous_offset"in P,get:P=>P.previous_offset,set:(P,L)=>{P.previous_offset=L}},metadata:N},_,E),Ur(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:P=>"entries"in P,get:P=>P.entries,set:(P,L)=>{P.entries=L}},metadata:N},k,I),Ur(null,i={value:o},a,{kind:"class",name:o.name,metadata:N},null,s),j=o=i.value,N&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),Tn(o,s)})(),j=o})();const p6=2049864546;(()=>{var e,t,n,r,a,i,s,o,l,u,d;let h=[Af()],m,g=[],b,v,x=[],w=[],_,E=[],C=[],k,I=[],j=[],N,P=[],L=[],H,M=[],K=[],q,ue=[],ae=[],te,Y=[],ie=[],V,J=[],Q=[],ne,he=[],de=[],Ie,ke=[],Te=[],Se,Pe=[],Qe=[],Le,je=[],z=[],Ee,Ne=[],fe=[];var se=b=class{constructor(ee=wr(new Ue(lt.EINVAL,"Super block must be initialized with a store"))){if(this.store=ee,this.checksum=Tn(this,x,0),this.magic=(Tn(this,w),Tn(this,E,p6)),this.version=(Tn(this,C),Tn(this,I,1)),this.inode_format=(Tn(this,j),Tn(this,P,sie)),this.flags=(Tn(this,L),Tn(this,M,0)),this.used_bytes=(Tn(this,K),Tn(this,ue,BigInt(0))),this.total_bytes=(Tn(this,ae),Tn(this,Y,BigInt(0))),this.uuid=(Tn(this,ie),Tn(this,J,BigInt(0))),this.metadata_block_size=(Tn(this,Q),Tn(this,he,Hr(Bd))),this.metadata_offset_=(Tn(this,de),Tn(this,ke,0)),this.metadata_offset=(Tn(this,Te),Tn(this,Pe,0)),this.metadata=Tn(this,Qe),this.label=Tn(this,je,""),this._padding=(Tn(this,z),Tn(this,Ne,new Array(132).fill(0))),Tn(this,fe),this.store=ee,ee._view.getUint32(Sae(se,"magic"),!0)!=p6){hi("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Bd(this),this.metadata.offset=Hr(se),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Hr(se)+Hr(Bd)),this.total_bytes=BigInt(ee._buffer.byteLength),ee._write(this),ee._write(this.metadata);return}if(L1(this,ee._buffer.subarray(0,Hr(se))),!C9(this))throw B1(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Bd(this,this.metadata_offset)}rotateMetadata(){const ee=new Bd(this);return ee.offset=Number(this.used_bytes),ee.previous_offset=this.metadata_offset,this.metadata=ee,this.metadata_offset=ee.offset,this.store._write(ee),this.used_bytes+=BigInt(Hr(Bd)),this.store._write(this),ee}isUnused(ee,xe){if(!xe)return!0;if(ee+xe>this.total_bytes||ee<Hr(se))return!1;for(let Fe=this.metadata;Fe;Fe=Fe.previous){if(ee<Fe.offset+Hr(Bd)&&ee+xe>Fe.offset)return!1;for(const Ce of Fe.entries)if(Ce.offset&&(ee>=Ce.offset&&ee<Ce.offset+Ce.size||ee+xe>Ce.offset&&ee+xe<=Ce.offset+Ce.size||ee<=Ce.offset&&ee+xe>=Ce.offset+Ce.size))return!1}return!0}};return pN(b,"SuperBlock"),(()=>{const ee=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;v=[(e=xn).uint32.bind(e)],_=[(t=xn).uint32.bind(t)],k=[(n=xn).uint16.bind(n)],N=[(r=xn).uint16.bind(r)],H=[(a=xn).uint32.bind(a)],q=[(i=xn).uint64.bind(i)],te=[(s=xn).uint64.bind(s)],V=[(o=xn).uint128.bind(o)],ne=[(l=xn).uint32.bind(l)],Ie=[(u=xn).uint32.bind(u)],Se=[(d=xn).uint32.bind(d)],Le=[xn.char(64)],Ee=[xn.char(132)],Ur(null,null,v,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Fe)=>{xe.checksum=Fe}},metadata:ee},x,w),Ur(null,null,_,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Fe)=>{xe.magic=Fe}},metadata:ee},E,C),Ur(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Fe)=>{xe.version=Fe}},metadata:ee},I,j),Ur(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Fe)=>{xe.inode_format=Fe}},metadata:ee},P,L),Ur(null,null,H,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Fe)=>{xe.flags=Fe}},metadata:ee},M,K),Ur(null,null,q,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Fe)=>{xe.used_bytes=Fe}},metadata:ee},ue,ae),Ur(null,null,te,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Fe)=>{xe.total_bytes=Fe}},metadata:ee},Y,ie),Ur(null,null,V,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Fe)=>{xe.uuid=Fe}},metadata:ee},J,Q),Ur(null,null,ne,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Fe)=>{xe.metadata_block_size=Fe}},metadata:ee},he,de),Ur(null,null,Ie,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Fe)=>{xe.metadata_offset_=Fe}},metadata:ee},ke,Te),Ur(null,null,Se,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Fe)=>{xe.metadata_offset=Fe}},metadata:ee},Pe,Qe),Ur(null,null,Le,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Fe)=>{xe.label=Fe}},metadata:ee},je,z),Ur(null,null,Ee,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Fe)=>{xe._padding=Fe}},metadata:ee},Ne,fe),Ur(null,m={value:b},h,{kind:"class",name:b.name,metadata:ee},null,g),se=b=m.value,ee&&Object.defineProperty(b,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ee}),Tn(b,g)})(),se=b})();function C9(e){const t=ei(e),n=foe(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Za;function hoe(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function JT(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?lt[hoe(e)]:lt.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Gh(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(JT(e.error))}})}class poe extends ZT{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Gh(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Gh(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Gh(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Gh(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(JT(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(JT(this.tx.error)),this.tx.abort(),t}}async function moe(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(hi("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Gh(n)}class goe{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new poe(t,this)}}const yoe={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Gh(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await moe(e.storeName||"zenfs",e.idbFactory),n=new goe(t),r=new $L(n);if(e!=null&&e.disableAsyncCache)return $A("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},boe=yoe;function cw(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var BE={exports:{}},m6;function voe(){return m6||(m6=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function s(u,d){if(!a[u]){if(!r[u]){var h=typeof cw=="function"&&cw;if(!d&&h)return h(u,!0);if(o)return o(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[u]={exports:{}};r[u][0].call(g.exports,function(b){var v=r[u][1][b];return s(v||b)},g,g.exports,n,r,a,i)}return a[u].exports}for(var o=typeof cw=="function"&&cw,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,r,a){var i=n("./utils"),s=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,d,h,m,g,b,v,x=[],w=0,_=l.length,E=_,C=i.getTypeOf(l)!=="string";w<l.length;)E=_-w,h=C?(u=l[w++],d=w<_?l[w++]:0,w<_?l[w++]:0):(u=l.charCodeAt(w++),d=w<_?l.charCodeAt(w++):0,w<_?l.charCodeAt(w++):0),m=u>>2,g=(3&u)<<4|d>>4,b=1<E?(15&d)<<2|h>>6:64,v=2<E?63&h:64,x.push(o.charAt(m)+o.charAt(g)+o.charAt(b)+o.charAt(v));return x.join("")},a.decode=function(l){var u,d,h,m,g,b,v=0,x=0,w="data:";if(l.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var _,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=s.uint8array?new Uint8Array(0|E):new Array(0|E);v<l.length;)u=o.indexOf(l.charAt(v++))<<2|(m=o.indexOf(l.charAt(v++)))>>4,d=(15&m)<<4|(g=o.indexOf(l.charAt(v++)))>>2,h=(3&g)<<6|(b=o.indexOf(l.charAt(v++))),_[x++]=u,g!==64&&(_[x++]=d),b!==64&&(_[x++]=h);return _}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),s=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,h,m,g,b){this.compressedSize=d,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=b}u.prototype={getContentWorker:function(){var d=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,m){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,d,h,m){var g=s,b=m+h;u^=-1;for(var v=m;v<b;v++)u=u>>>8^g[255&(u^d[v])];return-1^u}(0|l,o,o.length,0):function(u,d,h,m){var g=s,b=m+h;u^=-1;for(var v=m;v<b;v++)u=u>>>8^g[255&(u^d.charCodeAt(v))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(h,m){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,b){var v,x="";for(v=0;v<b;v++)x+=String.fromCharCode(255&g),g>>>=8;return x}function s(g,b,v,x,w,_){var E,C,k=g.file,I=g.compression,j=_!==u.utf8encode,N=o.transformTo("string",_(k.name)),P=o.transformTo("string",u.utf8encode(k.name)),L=k.comment,H=o.transformTo("string",_(L)),M=o.transformTo("string",u.utf8encode(L)),K=P.length!==k.name.length,q=M.length!==L.length,ue="",ae="",te="",Y=k.dir,ie=k.date,V={crc32:0,compressedSize:0,uncompressedSize:0};b&&!v||(V.crc32=g.crc32,V.compressedSize=g.compressedSize,V.uncompressedSize=g.uncompressedSize);var J=0;b&&(J|=8),j||!K&&!q||(J|=2048);var Q=0,ne=0;Y&&(Q|=16),w==="UNIX"?(ne=798,Q|=function(de,Ie){var ke=de;return de||(ke=Ie?16893:33204),(65535&ke)<<16}(k.unixPermissions,Y)):(ne=20,Q|=function(de){return 63&(de||0)}(k.dosPermissions)),E=ie.getUTCHours(),E<<=6,E|=ie.getUTCMinutes(),E<<=5,E|=ie.getUTCSeconds()/2,C=ie.getUTCFullYear()-1980,C<<=4,C|=ie.getUTCMonth()+1,C<<=5,C|=ie.getUTCDate(),K&&(ae=i(1,1)+i(d(N),4)+P,ue+="up"+i(ae.length,2)+ae),q&&(te=i(1,1)+i(d(H),4)+M,ue+="uc"+i(te.length,2)+te);var he="";return he+=`
\0`,he+=i(J,2),he+=I.magic,he+=i(E,2),he+=i(C,2),he+=i(V.crc32,4),he+=i(V.compressedSize,4),he+=i(V.uncompressedSize,4),he+=i(N.length,2),he+=i(ue.length,2),{fileRecord:h.LOCAL_FILE_HEADER+he+N+ue,dirRecord:h.CENTRAL_FILE_HEADER+i(ne,2)+he+i(H.length,2)+"\0\0\0\0"+i(Q,4)+i(x,4)+N+ue+H}}var o=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),h=n("../signature");function m(g,b,v,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=v,this.encodeFileName=x,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,l),m.prototype.push=function(g){var b=g.meta.percent||0,v=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:v?(b+100*(v-x-1))/v:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var b=this.streamFiles&&!g.file.dir;if(b){var v=s(g,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var b=this.streamFiles&&!g.file.dir,v=s(g,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),b)this.push({data:function(x){return h.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var v=this.bytesWritten-g,x=function(w,_,E,C,k){var I=o.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(w,2)+i(w,2)+i(_,4)+i(E,4)+i(I.length,2)+I}(this.dirRecords.length,v,g,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var b=this;return g.on("data",function(v){b.processChunk(v)}),g.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),g.on("error",function(v){b.error(v)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var b=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var v=0;v<b.length;v++)try{b[v].error(g)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,b=0;b<g.length;b++)g[b].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),s=n("./ZipFileWorker");a.generateWorker=function(o,l,u){var d=new s(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(m,g){h++;var b=function(_,E){var C=_||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(g.options.compression,l.compression),v=g.options.compressionOptions||l.compressionOptions||{},x=g.dir,w=g.date;g._compressWorker(b,v).withStreamInfo("file",{name:m,dir:x,date:w,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),s=n("./external"),o=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(m){return new s.Promise(function(g,b){var v=m.decompressed.getContentWorker().pipe(new u);v.on("error",function(x){b(x)}).on("end",function(){v.streamInfo.crc32!==m.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var b=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(v){var x=new l(g);return x.load(v),x}).then(function(v){var x=[s.Promise.resolve(v)],w=v.files;if(g.checkCRC32)for(var _=0;_<w.length;_++)x.push(h(w[_]));return s.Promise.all(x)}).then(function(v){for(var x=v.shift(),w=x.files,_=0;_<w.length;_++){var E=w[_],C=E.fileNameStr,k=i.resolve(E.fileNameStr);b.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(b.file(k).unsafeOriginalName=C)}return x.zipComment.length&&(b.comment=x.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),s=n("../stream/GenericWorker");function o(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,s),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function s(o,l,u){i.call(this,l),this._helper=o;var d=this;o.on("data",function(h,m){d.push(h)||d._helper.pause(),u&&u(m)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Qt<"u",newBufferFrom:function(i,s){if(Qt.from&&Qt.from!==Uint8Array.from)return Qt.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Qt(i,s)},allocBuffer:function(i){if(Qt.alloc)return Qt.alloc(i);var s=new Qt(i);return s.fill(0),s},isBuffer:function(i){return Qt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,I,j){var N,P=o.getTypeOf(I),L=o.extend(j||{},d);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(k=w(k)),L.createFolders&&(N=x(k))&&_.call(this,N,!0);var H=P==="string"&&L.binary===!1&&L.base64===!1;j&&j.binary!==void 0||(L.binary=!H),(I instanceof h&&I.uncompressedSize===0||L.dir||!I||I.length===0)&&(L.base64=!1,L.binary=!0,I="",L.compression="STORE",P="string");var M=null;M=I instanceof h||I instanceof l?I:b.isNode&&b.isStream(I)?new v(k,I):o.prepareContent(k,I,L.binary,L.optimizedBinaryString,L.base64);var K=new m(k,M,L);this.files[k]=K}var s=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),b=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),x=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var I=k.lastIndexOf("/");return 0<I?k.substring(0,I):""},w=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},_=function(k,I){return I=I!==void 0?I:d.createFolders,k=w(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:I}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var I,j,N;for(I in this.files)N=this.files[I],(j=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&k(j,N)},filter:function(k){var I=[];return this.forEach(function(j,N){k(j,N)&&I.push(N)}),I},file:function(k,I,j){if(arguments.length!==1)return k=this.root+k,i.call(this,k,I,j),this;if(E(k)){var N=k;return this.filter(function(L,H){return!H.dir&&N.test(L)})}var P=this.files[this.root+k];return P&&!P.dir?P:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(P,L){return L.dir&&k.test(P)});var I=this.root+k,j=_.call(this,I),N=this.clone();return N.root=j.name,N},remove:function(k){k=this.root+k;var I=this.files[k];if(I||(k.slice(-1)!=="/"&&(k+="/"),I=this.files[k]),I&&!I.dir)delete this.files[k];else for(var j=this.filter(function(P,L){return L.name.slice(0,k.length)===k}),N=0;N<j.length;N++)delete this.files[j[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var I,j={};try{if((j=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");o.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var N=j.comment||this.comment||"";I=g.generateWorker(this,j,N)}catch(P){(I=new l("error")).error(P)}return new u(I,j.type||"string",j.mimeType)},generateAsync:function(k,I){return this.generateInternalStream(k).accumulate(I)},generateNodeStream:function(k,I){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(I)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===u&&this.data[m+2]===d&&this.data[m+3]===h)return m-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.readData(4);return l===m[0]&&u===m[1]&&d===m[2]&&h===m[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),s=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||s.uint8array?m==="nodebuffer"?new u(h):s.uint8array?new d(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),s=n("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),s=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,s),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),s=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(b,v){return new d.Promise(function(x,w){var _=[],E=b._internalType,C=b._outputType,k=b._mimeType;b.on("data",function(I,j){_.push(I),v&&v(j)}).on("error",function(I){_=[],w(I)}).on("end",function(){try{var I=function(j,N,P){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),P);case"base64":return l.encode(N);default:return i.transformTo(j,N)}}(C,function(j,N){var P,L=0,H=null,M=0;for(P=0;P<N.length;P++)M+=N[P].length;switch(j){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(H=new Uint8Array(M),P=0;P<N.length;P++)H.set(N[P],L),L+=N[P].length;return H;case"nodebuffer":return Qt.concat(N);default:throw new Error("concat : unsupported type '"+j+"'")}}(E,_),k);x(I)}catch(j){w(j)}_=[]}).resume()})}function g(b,v,x){var w=v;switch(v){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=v,this._mimeType=x,i.checkSupport(w),this._worker=b.pipe(new s(w)),b.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}g.prototype={accumulate:function(b){return m(this,b)},on:function(b,v){var x=this;return b==="data"?this._worker.on(b,function(w){v.call(x,w.data,w.meta)}):this._worker.on(b,function(){i.delay(v,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},b)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Qt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),s=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}a.utf8encode=function(g){return s.nodebuffer?o.newBufferFrom(g,"utf-8"):function(b){var v,x,w,_,E,C=b.length,k=0;for(_=0;_<C;_++)(64512&(x=b.charCodeAt(_)))==55296&&_+1<C&&(64512&(w=b.charCodeAt(_+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),_++),k+=x<128?1:x<2048?2:x<65536?3:4;for(v=s.uint8array?new Uint8Array(k):new Array(k),_=E=0;E<k;_++)(64512&(x=b.charCodeAt(_)))==55296&&_+1<C&&(64512&(w=b.charCodeAt(_+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),_++),x<128?v[E++]=x:(x<2048?v[E++]=192|x>>>6:(x<65536?v[E++]=224|x>>>12:(v[E++]=240|x>>>18,v[E++]=128|x>>>12&63),v[E++]=128|x>>>6&63),v[E++]=128|63&x);return v}(g)},a.utf8decode=function(g){return s.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(b){var v,x,w,_,E=b.length,C=new Array(2*E);for(v=x=0;v<E;)if((w=b[v++])<128)C[x++]=w;else if(4<(_=u[w]))C[x++]=65533,v+=_-1;else{for(w&=_===2?31:_===3?15:7;1<_&&v<E;)w=w<<6|63&b[v++],_--;1<_?C[x++]=65533:w<65536?C[x++]=w:(w-=65536,C[x++]=55296|w>>10&1023,C[x++]=56320|1023&w)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)}(g=i.transformTo(s.uint8array?"uint8array":"array",g))},i.inherits(h,l),h.prototype.processChunk=function(g){var b=i.transformTo(s.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var v=b;(b=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),b.set(v,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var x=function(_,E){var C;for((E=E||_.length)>_.length&&(E=_.length),C=E-1;0<=C&&(192&_[C])==128;)C--;return C<0||C===0?E:C+u[_[C]]>E?C:E}(b),w=b;x!==b.length&&(s.uint8array?(w=b.subarray(0,x),this.leftOver=b.subarray(x,b.length)):(w=b.slice(0,x),this.leftOver=b.slice(x,b.length))),this.push({data:a.utf8decode(w),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,l),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),s=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function u(v){return v}function d(v,x){for(var w=0;w<v.length;++w)x[w]=255&v.charCodeAt(w);return x}n("setimmediate"),a.newBlob=function(v,x){a.checkSupport("blob");try{return new Blob([v],{type:x})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(v),w.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(v,x,w){var _=[],E=0,C=v.length;if(C<=w)return String.fromCharCode.apply(null,v);for(;E<C;)x==="array"||x==="nodebuffer"?_.push(String.fromCharCode.apply(null,v.slice(E,Math.min(E+w,C)))):_.push(String.fromCharCode.apply(null,v.subarray(E,Math.min(E+w,C)))),E+=w;return _.join("")},stringifyByChar:function(v){for(var x="",w=0;w<v.length;w++)x+=String.fromCharCode(v[w]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(v){var x=65536,w=a.getTypeOf(v),_=!0;if(w==="uint8array"?_=h.applyCanBeUsed.uint8array:w==="nodebuffer"&&(_=h.applyCanBeUsed.nodebuffer),_)for(;1<x;)try{return h.stringifyByChunk(v,w,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(v)}function g(v,x){for(var w=0;w<v.length;w++)x[w]=v[w];return x}a.applyFromCharCode=m;var b={};b.string={string:u,array:function(v){return d(v,new Array(v.length))},arraybuffer:function(v){return b.string.uint8array(v).buffer},uint8array:function(v){return d(v,new Uint8Array(v.length))},nodebuffer:function(v){return d(v,o.allocBuffer(v.length))}},b.array={string:m,array:u,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return o.newBufferFrom(v)}},b.arraybuffer={string:function(v){return m(new Uint8Array(v))},array:function(v){return g(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:u,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return o.newBufferFrom(new Uint8Array(v))}},b.uint8array={string:m,array:function(v){return g(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:u,nodebuffer:function(v){return o.newBufferFrom(v)}},b.nodebuffer={string:m,array:function(v){return g(v,new Array(v.length))},arraybuffer:function(v){return b.nodebuffer.uint8array(v).buffer},uint8array:function(v){return g(v,new Uint8Array(v.length))},nodebuffer:u},a.transformTo=function(v,x){if(x=x||"",!v)return x;a.checkSupport(v);var w=a.getTypeOf(x);return b[w][v](x)},a.resolve=function(v){for(var x=v.split("/"),w=[],_=0;_<x.length;_++){var E=x[_];E==="."||E===""&&_!==0&&_!==x.length-1||(E===".."?w.pop():w.push(E))}return w.join("/")},a.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(v){var x,w,_="";for(w=0;w<(v||"").length;w++)_+="\\x"+((x=v.charCodeAt(w))<16?"0":"")+x.toString(16).toUpperCase();return _},a.delay=function(v,x,w){setImmediate(function(){v.apply(w||null,x||[])})},a.inherits=function(v,x){function w(){}w.prototype=x.prototype,v.prototype=new w},a.extend=function(){var v,x,w={};for(v=0;v<arguments.length;v++)for(x in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],x)&&w[x]===void 0&&(w[x]=arguments[v][x]);return w},a.prepareContent=function(v,x,w,_,E){return l.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,I){var j=new FileReader;j.onload=function(N){k(N.target.result)},j.onerror=function(N){I(N.target.error)},j.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=s.decode(C):w&&_!==!0&&(C=function(I){return d(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(m)+", expected "+s.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var b=this.reader.readString(4)===m;return this.reader.setIndex(g),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",g=s.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,b=this.zip64EndOfCentralSize-44;0<b;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var b=m-g;if(0<b)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),h=n("./support");function m(g,b){this.options=g,this.loadOptions=b}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var b,v;if(g.skip(22),this.fileNameLength=g.readInt(2),v=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(x){for(var w in d)if(Object.prototype.hasOwnProperty.call(d,w)&&d[w].magic===x)return d[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,b,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var b=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(b),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var b,v,x,w=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<w;)b=g.readInt(2),v=g.readInt(2),x=g.readData(v),this.extraFields[b]={id:b,length:v,value:x};g.setIndex(w)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var v=s.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var w=s.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var b=i(g.value);return b.readInt(1)!==1||l(this.fileName)!==b.readInt(4)?null:u.utf8decode(b.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var b=i(g.value);return b.readInt(1)!==1||l(this.fileComment)!==b.readInt(4)?null:u.utf8decode(b.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(b,v,x){this.name=b,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=v,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(b){var v=null,x="string";try{if(!b)throw new Error("No output type specified.");var w=(x=b.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),v=this._decompressWorker();var _=!this._dataBinary;_&&!w&&(v=v.pipe(new l.Utf8EncodeWorker)),!_&&w&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(E){(v=new d("error")).error(E)}return new s(v,x,"")},async:function(b,v){return this.internalStream(b).accumulate(v)},nodeStream:function(b,v){return this.internalStream(b||"nodebuffer").toNodejsStream(v)},_compressWorker:function(b,v){if(this._data instanceof u&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(x,b,v)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var s,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,d=new l(b),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){b(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(b,0)};else{var m=new i.MessageChannel;m.port1.onmessage=b,s=function(){m.port2.postMessage(0)}}var g=[];function b(){var v,x;o=!0;for(var w=g.length;w;){for(x=g,g=[],v=-1;++v<w;)x[v]();w=g.length}o=!1}r.exports=function(v){g.push(v)!==1||o||s()}}).call(this,typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function s(){}var o={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,w!==s&&v(this,w)}function m(w,_,E){this.promise=w,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(w,_,E){i(function(){var C;try{C=_(E)}catch(k){return o.reject(w,k)}C===w?o.reject(w,new TypeError("Cannot resolve promise with itself")):o.resolve(w,C)})}function b(w){var _=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof _=="function")return function(){_.apply(w,arguments)}}function v(w,_){var E=!1;function C(j){E||(E=!0,o.reject(w,j))}function k(j){E||(E=!0,o.resolve(w,j))}var I=x(function(){_(k,C)});I.status==="error"&&C(I.value)}function x(w,_){var E={};try{E.value=w(_),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(w){if(typeof w!="function")return this;var _=this.constructor;return this.then(function(E){return _.resolve(w()).then(function(){return E})},function(E){return _.resolve(w()).then(function(){throw E})})},h.prototype.catch=function(w){return this.then(null,w)},h.prototype.then=function(w,_){if(typeof w!="function"&&this.state===u||typeof _!="function"&&this.state===l)return this;var E=new this.constructor(s);return this.state!==d?g(E,this.state===u?w:_,this.outcome):this.queue.push(new m(E,w,_)),E},m.prototype.callFulfilled=function(w){o.resolve(this.promise,w)},m.prototype.otherCallFulfilled=function(w){g(this.promise,this.onFulfilled,w)},m.prototype.callRejected=function(w){o.reject(this.promise,w)},m.prototype.otherCallRejected=function(w){g(this.promise,this.onRejected,w)},o.resolve=function(w,_){var E=x(b,_);if(E.status==="error")return o.reject(w,E.value);var C=E.value;if(C)v(w,C);else{w.state=u,w.outcome=_;for(var k=-1,I=w.queue.length;++k<I;)w.queue[k].callFulfilled(_)}return w},o.reject=function(w,_){w.state=l,w.outcome=_;for(var E=-1,C=w.queue.length;++E<C;)w.queue[E].callRejected(_);return w},h.resolve=function(w){return w instanceof this?w:o.resolve(new this(s),w)},h.reject=function(w){var _=new this(s);return o.reject(_,w)},h.all=function(w){var _=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),I=0,j=-1,N=new this(s);++j<E;)P(w[j],j);return N;function P(L,H){_.resolve(L).then(function(M){k[H]=M,++I!==E||C||(C=!0,o.resolve(N,k))},function(M){C||(C=!0,o.reject(N,M))})}},h.race=function(w){var _=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,I=new this(s);++k<E;)j=w[k],_.resolve(j).then(function(N){C||(C=!0,o.resolve(I,N))},function(N){C||(C=!0,o.reject(I,N))});var j;return I}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,h=0,m=-1,g=0,b=8;function v(w){if(!(this instanceof v))return new v(w);this.options=s.assign({level:m,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},w||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(E!==h)throw new Error(l[E]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var C;if(C=typeof _.dictionary=="string"?o.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[E]);this._dict_set=!0}}function x(w,_){var E=new v(_);if(E.push(w,!0),E.err)throw E.msg||l[E.err];return E.result}v.prototype.push=function(w,_){var E,C,k=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=_===~~_?_:_===!0?4:0,typeof w=="string"?k.input=o.string2buf(w):d.call(w)==="[object ArrayBuffer]"?k.input=new Uint8Array(w):k.input=w,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(I),k.next_out=0,k.avail_out=I),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(k.output,k.next_out))):this.onData(s.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Deflate=v,a.deflate=x,a.deflateRaw=function(w,_){return(_=_||{}).raw=!0,x(w,_)},a.gzip=function(w,_){return(_=_||{}).gzip=!0,x(w,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(v){if(!(this instanceof g))return new g(v);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},v||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||v&&v.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var w=i.inflateInit2(this.strm,x.windowBits);if(w!==l.Z_OK)throw new Error(u[w]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function b(v,x){var w=new g(x);if(w.push(v,!0),w.err)throw w.msg||u[w.err];return w.result}g.prototype.push=function(v,x){var w,_,E,C,k,I,j=this.strm,N=this.options.chunkSize,P=this.options.dictionary,L=!1;if(this.ended)return!1;_=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?j.input=o.binstring2buf(v):m.call(v)==="[object ArrayBuffer]"?j.input=new Uint8Array(v):j.input=v,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(N),j.next_out=0,j.avail_out=N),(w=i.inflate(j,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&P&&(I=typeof P=="string"?o.string2buf(P):m.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,w=i.inflateSetDictionary(this.strm,I)),w===l.Z_BUF_ERROR&&L===!0&&(w=l.Z_OK,L=!1),w!==l.Z_STREAM_END&&w!==l.Z_OK)return this.onEnd(w),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&w!==l.Z_STREAM_END&&(j.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(j.output,j.next_out),C=j.next_out-E,k=o.buf2string(j.output,E),j.next_out=C,j.avail_out=N-C,C&&s.arraySet(j.output,j.output,E,C,0),this.onData(k)):this.onData(s.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(L=!0)}while((0<j.avail_in||j.avail_out===0)&&w!==l.Z_STREAM_END);return w===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(w=i.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(j.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},a.Inflate=g,a.inflate=b,a.inflateRaw=function(v,x){return(x=x||{}).raw=!0,b(v,x)},a.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,d,h,m){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),m);else for(var g=0;g<h;g++)l[m+g]=u[d+g]},flattenChunks:function(l){var u,d,h,m,g,b;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(b=new Uint8Array(h),u=m=0,d=l.length;u<d;u++)g=l[u],b.set(g,m),m+=g.length;return b}},o={arraySet:function(l,u,d,h,m){for(var g=0;g<h;g++)l[m+g]=u[d+g]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,m){if(m<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",b=0;b<m;b++)g+=String.fromCharCode(h[b]);return g}l[254]=l[254]=1,a.string2buf=function(h){var m,g,b,v,x,w=h.length,_=0;for(v=0;v<w;v++)(64512&(g=h.charCodeAt(v)))==55296&&v+1<w&&(64512&(b=h.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(b-56320),v++),_+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(_),v=x=0;x<_;v++)(64512&(g=h.charCodeAt(v)))==55296&&v+1<w&&(64512&(b=h.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(b-56320),v++),g<128?m[x++]=g:(g<2048?m[x++]=192|g>>>6:(g<65536?m[x++]=224|g>>>12:(m[x++]=240|g>>>18,m[x++]=128|g>>>12&63),m[x++]=128|g>>>6&63),m[x++]=128|63&g);return m},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,b=m.length;g<b;g++)m[g]=h.charCodeAt(g);return m},a.buf2string=function(h,m){var g,b,v,x,w=m||h.length,_=new Array(2*w);for(g=b=0;g<w;)if((v=h[g++])<128)_[b++]=v;else if(4<(x=l[v]))_[b++]=65533,g+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&g<w;)v=v<<6|63&h[g++],x--;1<x?_[b++]=65533:v<65536?_[b++]=v:(v-=65536,_[b++]=55296|v>>10&1023,_[b++]=56320|1023&v)}return d(_,b)},a.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+l[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,s,o,l){for(var u=65535&i|0,d=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(u=u+s[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();r.exports=function(s,o,l,u){var d=i,h=u+l;s^=-1;for(var m=u;m<h;m++)s=s>>>8^d[255&(s^o[m])];return-1^s}},{}],46:[function(n,r,a){var i,s=n("../utils/common"),o=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),h=0,m=4,g=0,b=-2,v=-1,x=4,w=2,_=8,E=9,C=286,k=30,I=19,j=2*C+1,N=15,P=3,L=258,H=L+P+1,M=42,K=113,q=1,ue=2,ae=3,te=4;function Y(z,Ee){return z.msg=d[Ee],Ee}function ie(z){return(z<<1)-(4<z?9:0)}function V(z){for(var Ee=z.length;0<=--Ee;)z[Ee]=0}function J(z){var Ee=z.state,Ne=Ee.pending;Ne>z.avail_out&&(Ne=z.avail_out),Ne!==0&&(s.arraySet(z.output,Ee.pending_buf,Ee.pending_out,Ne,z.next_out),z.next_out+=Ne,Ee.pending_out+=Ne,z.total_out+=Ne,z.avail_out-=Ne,Ee.pending-=Ne,Ee.pending===0&&(Ee.pending_out=0))}function Q(z,Ee){o._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,Ee),z.block_start=z.strstart,J(z.strm)}function ne(z,Ee){z.pending_buf[z.pending++]=Ee}function he(z,Ee){z.pending_buf[z.pending++]=Ee>>>8&255,z.pending_buf[z.pending++]=255&Ee}function de(z,Ee){var Ne,fe,se=z.max_chain_length,ee=z.strstart,xe=z.prev_length,Fe=z.nice_match,Ce=z.strstart>z.w_size-H?z.strstart-(z.w_size-H):0,We=z.window,Nt=z.w_mask,it=z.prev,St=z.strstart+L,Ft=We[ee+xe-1],Mt=We[ee+xe];z.prev_length>=z.good_match&&(se>>=2),Fe>z.lookahead&&(Fe=z.lookahead);do if(We[(Ne=Ee)+xe]===Mt&&We[Ne+xe-1]===Ft&&We[Ne]===We[ee]&&We[++Ne]===We[ee+1]){ee+=2,Ne++;do;while(We[++ee]===We[++Ne]&&We[++ee]===We[++Ne]&&We[++ee]===We[++Ne]&&We[++ee]===We[++Ne]&&We[++ee]===We[++Ne]&&We[++ee]===We[++Ne]&&We[++ee]===We[++Ne]&&We[++ee]===We[++Ne]&&ee<St);if(fe=L-(St-ee),ee=St-L,xe<fe){if(z.match_start=Ee,Fe<=(xe=fe))break;Ft=We[ee+xe-1],Mt=We[ee+xe]}}while((Ee=it[Ee&Nt])>Ce&&--se!=0);return xe<=z.lookahead?xe:z.lookahead}function Ie(z){var Ee,Ne,fe,se,ee,xe,Fe,Ce,We,Nt,it=z.w_size;do{if(se=z.window_size-z.lookahead-z.strstart,z.strstart>=it+(it-H)){for(s.arraySet(z.window,z.window,it,it,0),z.match_start-=it,z.strstart-=it,z.block_start-=it,Ee=Ne=z.hash_size;fe=z.head[--Ee],z.head[Ee]=it<=fe?fe-it:0,--Ne;);for(Ee=Ne=it;fe=z.prev[--Ee],z.prev[Ee]=it<=fe?fe-it:0,--Ne;);se+=it}if(z.strm.avail_in===0)break;if(xe=z.strm,Fe=z.window,Ce=z.strstart+z.lookahead,We=se,Nt=void 0,Nt=xe.avail_in,We<Nt&&(Nt=We),Ne=Nt===0?0:(xe.avail_in-=Nt,s.arraySet(Fe,xe.input,xe.next_in,Nt,Ce),xe.state.wrap===1?xe.adler=l(xe.adler,Fe,Nt,Ce):xe.state.wrap===2&&(xe.adler=u(xe.adler,Fe,Nt,Ce)),xe.next_in+=Nt,xe.total_in+=Nt,Nt),z.lookahead+=Ne,z.lookahead+z.insert>=P)for(ee=z.strstart-z.insert,z.ins_h=z.window[ee],z.ins_h=(z.ins_h<<z.hash_shift^z.window[ee+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[ee+P-1])&z.hash_mask,z.prev[ee&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=ee,ee++,z.insert--,!(z.lookahead+z.insert<P)););}while(z.lookahead<H&&z.strm.avail_in!==0)}function ke(z,Ee){for(var Ne,fe;;){if(z.lookahead<H){if(Ie(z),z.lookahead<H&&Ee===h)return q;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=P&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+P-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Ne!==0&&z.strstart-Ne<=z.w_size-H&&(z.match_length=de(z,Ne)),z.match_length>=P)if(fe=o._tr_tally(z,z.strstart-z.match_start,z.match_length-P),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=P){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+P-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else fe=o._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(fe&&(Q(z,!1),z.strm.avail_out===0))return q}return z.insert=z.strstart<P-1?z.strstart:P-1,Ee===m?(Q(z,!0),z.strm.avail_out===0?ae:te):z.last_lit&&(Q(z,!1),z.strm.avail_out===0)?q:ue}function Te(z,Ee){for(var Ne,fe,se;;){if(z.lookahead<H){if(Ie(z),z.lookahead<H&&Ee===h)return q;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=P&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+P-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=P-1,Ne!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Ne<=z.w_size-H&&(z.match_length=de(z,Ne),z.match_length<=5&&(z.strategy===1||z.match_length===P&&4096<z.strstart-z.match_start)&&(z.match_length=P-1)),z.prev_length>=P&&z.match_length<=z.prev_length){for(se=z.strstart+z.lookahead-P,fe=o._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-P),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=se&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+P-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=P-1,z.strstart++,fe&&(Q(z,!1),z.strm.avail_out===0))return q}else if(z.match_available){if((fe=o._tr_tally(z,0,z.window[z.strstart-1]))&&Q(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return q}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(fe=o._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<P-1?z.strstart:P-1,Ee===m?(Q(z,!0),z.strm.avail_out===0?ae:te):z.last_lit&&(Q(z,!1),z.strm.avail_out===0)?q:ue}function Se(z,Ee,Ne,fe,se){this.good_length=z,this.max_lazy=Ee,this.nice_length=Ne,this.max_chain=fe,this.func=se}function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*j),this.dyn_dtree=new s.Buf16(2*(2*k+1)),this.bl_tree=new s.Buf16(2*(2*I+1)),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(N+1),this.heap=new s.Buf16(2*C+1),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(z){var Ee;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=w,(Ee=z.state).pending=0,Ee.pending_out=0,Ee.wrap<0&&(Ee.wrap=-Ee.wrap),Ee.status=Ee.wrap?M:K,z.adler=Ee.wrap===2?0:1,Ee.last_flush=h,o._tr_init(Ee),g):Y(z,b)}function Le(z){var Ee=Qe(z);return Ee===g&&function(Ne){Ne.window_size=2*Ne.w_size,V(Ne.head),Ne.max_lazy_match=i[Ne.level].max_lazy,Ne.good_match=i[Ne.level].good_length,Ne.nice_match=i[Ne.level].nice_length,Ne.max_chain_length=i[Ne.level].max_chain,Ne.strstart=0,Ne.block_start=0,Ne.lookahead=0,Ne.insert=0,Ne.match_length=Ne.prev_length=P-1,Ne.match_available=0,Ne.ins_h=0}(z.state),Ee}function je(z,Ee,Ne,fe,se,ee){if(!z)return b;var xe=1;if(Ee===v&&(Ee=6),fe<0?(xe=0,fe=-fe):15<fe&&(xe=2,fe-=16),se<1||E<se||Ne!==_||fe<8||15<fe||Ee<0||9<Ee||ee<0||x<ee)return Y(z,b);fe===8&&(fe=9);var Fe=new Pe;return(z.state=Fe).strm=z,Fe.wrap=xe,Fe.gzhead=null,Fe.w_bits=fe,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=se+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+P-1)/P),Fe.window=new s.Buf8(2*Fe.w_size),Fe.head=new s.Buf16(Fe.hash_size),Fe.prev=new s.Buf16(Fe.w_size),Fe.lit_bufsize=1<<se+6,Fe.pending_buf_size=4*Fe.lit_bufsize,Fe.pending_buf=new s.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=Ee,Fe.strategy=ee,Fe.method=Ne,Le(z)}i=[new Se(0,0,0,0,function(z,Ee){var Ne=65535;for(Ne>z.pending_buf_size-5&&(Ne=z.pending_buf_size-5);;){if(z.lookahead<=1){if(Ie(z),z.lookahead===0&&Ee===h)return q;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var fe=z.block_start+Ne;if((z.strstart===0||z.strstart>=fe)&&(z.lookahead=z.strstart-fe,z.strstart=fe,Q(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-H&&(Q(z,!1),z.strm.avail_out===0))return q}return z.insert=0,Ee===m?(Q(z,!0),z.strm.avail_out===0?ae:te):(z.strstart>z.block_start&&(Q(z,!1),z.strm.avail_out),q)}),new Se(4,4,8,4,ke),new Se(4,5,16,8,ke),new Se(4,6,32,32,ke),new Se(4,4,16,16,Te),new Se(8,16,32,32,Te),new Se(8,16,128,128,Te),new Se(8,32,128,256,Te),new Se(32,128,258,1024,Te),new Se(32,258,258,4096,Te)],a.deflateInit=function(z,Ee){return je(z,Ee,_,15,8,0)},a.deflateInit2=je,a.deflateReset=Le,a.deflateResetKeep=Qe,a.deflateSetHeader=function(z,Ee){return z&&z.state?z.state.wrap!==2?b:(z.state.gzhead=Ee,g):b},a.deflate=function(z,Ee){var Ne,fe,se,ee;if(!z||!z.state||5<Ee||Ee<0)return z?Y(z,b):b;if(fe=z.state,!z.output||!z.input&&z.avail_in!==0||fe.status===666&&Ee!==m)return Y(z,z.avail_out===0?-5:b);if(fe.strm=z,Ne=fe.last_flush,fe.last_flush=Ee,fe.status===M)if(fe.wrap===2)z.adler=0,ne(fe,31),ne(fe,139),ne(fe,8),fe.gzhead?(ne(fe,(fe.gzhead.text?1:0)+(fe.gzhead.hcrc?2:0)+(fe.gzhead.extra?4:0)+(fe.gzhead.name?8:0)+(fe.gzhead.comment?16:0)),ne(fe,255&fe.gzhead.time),ne(fe,fe.gzhead.time>>8&255),ne(fe,fe.gzhead.time>>16&255),ne(fe,fe.gzhead.time>>24&255),ne(fe,fe.level===9?2:2<=fe.strategy||fe.level<2?4:0),ne(fe,255&fe.gzhead.os),fe.gzhead.extra&&fe.gzhead.extra.length&&(ne(fe,255&fe.gzhead.extra.length),ne(fe,fe.gzhead.extra.length>>8&255)),fe.gzhead.hcrc&&(z.adler=u(z.adler,fe.pending_buf,fe.pending,0)),fe.gzindex=0,fe.status=69):(ne(fe,0),ne(fe,0),ne(fe,0),ne(fe,0),ne(fe,0),ne(fe,fe.level===9?2:2<=fe.strategy||fe.level<2?4:0),ne(fe,3),fe.status=K);else{var xe=_+(fe.w_bits-8<<4)<<8;xe|=(2<=fe.strategy||fe.level<2?0:fe.level<6?1:fe.level===6?2:3)<<6,fe.strstart!==0&&(xe|=32),xe+=31-xe%31,fe.status=K,he(fe,xe),fe.strstart!==0&&(he(fe,z.adler>>>16),he(fe,65535&z.adler)),z.adler=1}if(fe.status===69)if(fe.gzhead.extra){for(se=fe.pending;fe.gzindex<(65535&fe.gzhead.extra.length)&&(fe.pending!==fe.pending_buf_size||(fe.gzhead.hcrc&&fe.pending>se&&(z.adler=u(z.adler,fe.pending_buf,fe.pending-se,se)),J(z),se=fe.pending,fe.pending!==fe.pending_buf_size));)ne(fe,255&fe.gzhead.extra[fe.gzindex]),fe.gzindex++;fe.gzhead.hcrc&&fe.pending>se&&(z.adler=u(z.adler,fe.pending_buf,fe.pending-se,se)),fe.gzindex===fe.gzhead.extra.length&&(fe.gzindex=0,fe.status=73)}else fe.status=73;if(fe.status===73)if(fe.gzhead.name){se=fe.pending;do{if(fe.pending===fe.pending_buf_size&&(fe.gzhead.hcrc&&fe.pending>se&&(z.adler=u(z.adler,fe.pending_buf,fe.pending-se,se)),J(z),se=fe.pending,fe.pending===fe.pending_buf_size)){ee=1;break}ee=fe.gzindex<fe.gzhead.name.length?255&fe.gzhead.name.charCodeAt(fe.gzindex++):0,ne(fe,ee)}while(ee!==0);fe.gzhead.hcrc&&fe.pending>se&&(z.adler=u(z.adler,fe.pending_buf,fe.pending-se,se)),ee===0&&(fe.gzindex=0,fe.status=91)}else fe.status=91;if(fe.status===91)if(fe.gzhead.comment){se=fe.pending;do{if(fe.pending===fe.pending_buf_size&&(fe.gzhead.hcrc&&fe.pending>se&&(z.adler=u(z.adler,fe.pending_buf,fe.pending-se,se)),J(z),se=fe.pending,fe.pending===fe.pending_buf_size)){ee=1;break}ee=fe.gzindex<fe.gzhead.comment.length?255&fe.gzhead.comment.charCodeAt(fe.gzindex++):0,ne(fe,ee)}while(ee!==0);fe.gzhead.hcrc&&fe.pending>se&&(z.adler=u(z.adler,fe.pending_buf,fe.pending-se,se)),ee===0&&(fe.status=103)}else fe.status=103;if(fe.status===103&&(fe.gzhead.hcrc?(fe.pending+2>fe.pending_buf_size&&J(z),fe.pending+2<=fe.pending_buf_size&&(ne(fe,255&z.adler),ne(fe,z.adler>>8&255),z.adler=0,fe.status=K)):fe.status=K),fe.pending!==0){if(J(z),z.avail_out===0)return fe.last_flush=-1,g}else if(z.avail_in===0&&ie(Ee)<=ie(Ne)&&Ee!==m)return Y(z,-5);if(fe.status===666&&z.avail_in!==0)return Y(z,-5);if(z.avail_in!==0||fe.lookahead!==0||Ee!==h&&fe.status!==666){var Fe=fe.strategy===2?function(Ce,We){for(var Nt;;){if(Ce.lookahead===0&&(Ie(Ce),Ce.lookahead===0)){if(We===h)return q;break}if(Ce.match_length=0,Nt=o._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++,Nt&&(Q(Ce,!1),Ce.strm.avail_out===0))return q}return Ce.insert=0,We===m?(Q(Ce,!0),Ce.strm.avail_out===0?ae:te):Ce.last_lit&&(Q(Ce,!1),Ce.strm.avail_out===0)?q:ue}(fe,Ee):fe.strategy===3?function(Ce,We){for(var Nt,it,St,Ft,Mt=Ce.window;;){if(Ce.lookahead<=L){if(Ie(Ce),Ce.lookahead<=L&&We===h)return q;if(Ce.lookahead===0)break}if(Ce.match_length=0,Ce.lookahead>=P&&0<Ce.strstart&&(it=Mt[St=Ce.strstart-1])===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]){Ft=Ce.strstart+L;do;while(it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&it===Mt[++St]&&St<Ft);Ce.match_length=L-(Ft-St),Ce.match_length>Ce.lookahead&&(Ce.match_length=Ce.lookahead)}if(Ce.match_length>=P?(Nt=o._tr_tally(Ce,1,Ce.match_length-P),Ce.lookahead-=Ce.match_length,Ce.strstart+=Ce.match_length,Ce.match_length=0):(Nt=o._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++),Nt&&(Q(Ce,!1),Ce.strm.avail_out===0))return q}return Ce.insert=0,We===m?(Q(Ce,!0),Ce.strm.avail_out===0?ae:te):Ce.last_lit&&(Q(Ce,!1),Ce.strm.avail_out===0)?q:ue}(fe,Ee):i[fe.level].func(fe,Ee);if(Fe!==ae&&Fe!==te||(fe.status=666),Fe===q||Fe===ae)return z.avail_out===0&&(fe.last_flush=-1),g;if(Fe===ue&&(Ee===1?o._tr_align(fe):Ee!==5&&(o._tr_stored_block(fe,0,0,!1),Ee===3&&(V(fe.head),fe.lookahead===0&&(fe.strstart=0,fe.block_start=0,fe.insert=0))),J(z),z.avail_out===0))return fe.last_flush=-1,g}return Ee!==m?g:fe.wrap<=0?1:(fe.wrap===2?(ne(fe,255&z.adler),ne(fe,z.adler>>8&255),ne(fe,z.adler>>16&255),ne(fe,z.adler>>24&255),ne(fe,255&z.total_in),ne(fe,z.total_in>>8&255),ne(fe,z.total_in>>16&255),ne(fe,z.total_in>>24&255)):(he(fe,z.adler>>>16),he(fe,65535&z.adler)),J(z),0<fe.wrap&&(fe.wrap=-fe.wrap),fe.pending!==0?g:1)},a.deflateEnd=function(z){var Ee;return z&&z.state?(Ee=z.state.status)!==M&&Ee!==69&&Ee!==73&&Ee!==91&&Ee!==103&&Ee!==K&&Ee!==666?Y(z,b):(z.state=null,Ee===K?Y(z,-3):g):b},a.deflateSetDictionary=function(z,Ee){var Ne,fe,se,ee,xe,Fe,Ce,We,Nt=Ee.length;if(!z||!z.state||(ee=(Ne=z.state).wrap)===2||ee===1&&Ne.status!==M||Ne.lookahead)return b;for(ee===1&&(z.adler=l(z.adler,Ee,Nt,0)),Ne.wrap=0,Nt>=Ne.w_size&&(ee===0&&(V(Ne.head),Ne.strstart=0,Ne.block_start=0,Ne.insert=0),We=new s.Buf8(Ne.w_size),s.arraySet(We,Ee,Nt-Ne.w_size,Ne.w_size,0),Ee=We,Nt=Ne.w_size),xe=z.avail_in,Fe=z.next_in,Ce=z.input,z.avail_in=Nt,z.next_in=0,z.input=Ee,Ie(Ne);Ne.lookahead>=P;){for(fe=Ne.strstart,se=Ne.lookahead-(P-1);Ne.ins_h=(Ne.ins_h<<Ne.hash_shift^Ne.window[fe+P-1])&Ne.hash_mask,Ne.prev[fe&Ne.w_mask]=Ne.head[Ne.ins_h],Ne.head[Ne.ins_h]=fe,fe++,--se;);Ne.strstart=fe,Ne.lookahead=P-1,Ie(Ne)}return Ne.strstart+=Ne.lookahead,Ne.block_start=Ne.strstart,Ne.insert=Ne.lookahead,Ne.lookahead=0,Ne.match_length=Ne.prev_length=P-1,Ne.match_available=0,z.next_in=Fe,z.input=Ce,z.avail_in=xe,Ne.wrap=ee,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,s){var o,l,u,d,h,m,g,b,v,x,w,_,E,C,k,I,j,N,P,L,H,M,K,q,ue;o=i.state,l=i.next_in,q=i.input,u=l+(i.avail_in-5),d=i.next_out,ue=i.output,h=d-(s-i.avail_out),m=d+(i.avail_out-257),g=o.dmax,b=o.wsize,v=o.whave,x=o.wnext,w=o.window,_=o.hold,E=o.bits,C=o.lencode,k=o.distcode,I=(1<<o.lenbits)-1,j=(1<<o.distbits)-1;e:do{E<15&&(_+=q[l++]<<E,E+=8,_+=q[l++]<<E,E+=8),N=C[_&I];t:for(;;){if(_>>>=P=N>>>24,E-=P,(P=N>>>16&255)===0)ue[d++]=65535&N;else{if(!(16&P)){if((64&P)==0){N=C[(65535&N)+(_&(1<<P)-1)];continue t}if(32&P){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}L=65535&N,(P&=15)&&(E<P&&(_+=q[l++]<<E,E+=8),L+=_&(1<<P)-1,_>>>=P,E-=P),E<15&&(_+=q[l++]<<E,E+=8,_+=q[l++]<<E,E+=8),N=k[_&j];n:for(;;){if(_>>>=P=N>>>24,E-=P,!(16&(P=N>>>16&255))){if((64&P)==0){N=k[(65535&N)+(_&(1<<P)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(H=65535&N,E<(P&=15)&&(_+=q[l++]<<E,(E+=8)<P&&(_+=q[l++]<<E,E+=8)),g<(H+=_&(1<<P)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(_>>>=P,E-=P,(P=d-h)<H){if(v<(P=H-P)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(K=w,(M=0)===x){if(M+=b-P,P<L){for(L-=P;ue[d++]=w[M++],--P;);M=d-H,K=ue}}else if(x<P){if(M+=b+x-P,(P-=x)<L){for(L-=P;ue[d++]=w[M++],--P;);if(M=0,x<L){for(L-=P=x;ue[d++]=w[M++],--P;);M=d-H,K=ue}}}else if(M+=x-P,P<L){for(L-=P;ue[d++]=w[M++],--P;);M=d-H,K=ue}for(;2<L;)ue[d++]=K[M++],ue[d++]=K[M++],ue[d++]=K[M++],L-=3;L&&(ue[d++]=K[M++],1<L&&(ue[d++]=K[M++]))}else{for(M=d-H;ue[d++]=ue[M++],ue[d++]=ue[M++],ue[d++]=ue[M++],2<(L-=3););L&&(ue[d++]=ue[M++],1<L&&(ue[d++]=ue[M++]))}break}}break}}while(l<u&&d<m);l-=L=E>>3,_&=(1<<(E-=L<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=d<m?m-d+257:257-(d-m),o.hold=_,o.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),s=n("./adler32"),o=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,h=2,m=0,g=-2,b=1,v=852,x=592;function w(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(M){var K;return M&&M.state?(K=M.state,M.total_in=M.total_out=K.total=0,M.msg="",K.wrap&&(M.adler=1&K.wrap),K.mode=b,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new i.Buf32(v),K.distcode=K.distdyn=new i.Buf32(x),K.sane=1,K.back=-1,m):g}function C(M){var K;return M&&M.state?((K=M.state).wsize=0,K.whave=0,K.wnext=0,E(M)):g}function k(M,K){var q,ue;return M&&M.state?(ue=M.state,K<0?(q=0,K=-K):(q=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?g:(ue.window!==null&&ue.wbits!==K&&(ue.window=null),ue.wrap=q,ue.wbits=K,C(M))):g}function I(M,K){var q,ue;return M?(ue=new _,(M.state=ue).window=null,(q=k(M,K))!==m&&(M.state=null),q):g}var j,N,P=!0;function L(M){if(P){var K;for(j=new i.Buf32(512),N=new i.Buf32(32),K=0;K<144;)M.lens[K++]=8;for(;K<256;)M.lens[K++]=9;for(;K<280;)M.lens[K++]=7;for(;K<288;)M.lens[K++]=8;for(u(d,M.lens,0,288,j,0,M.work,{bits:9}),K=0;K<32;)M.lens[K++]=5;u(h,M.lens,0,32,N,0,M.work,{bits:5}),P=!1}M.lencode=j,M.lenbits=9,M.distcode=N,M.distbits=5}function H(M,K,q,ue){var ae,te=M.state;return te.window===null&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new i.Buf8(te.wsize)),ue>=te.wsize?(i.arraySet(te.window,K,q-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(ue<(ae=te.wsize-te.wnext)&&(ae=ue),i.arraySet(te.window,K,q-ue,ae,te.wnext),(ue-=ae)?(i.arraySet(te.window,K,q-ue,ue,0),te.wnext=ue,te.whave=te.wsize):(te.wnext+=ae,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=ae))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(M){return I(M,15)},a.inflateInit2=I,a.inflate=function(M,K){var q,ue,ae,te,Y,ie,V,J,Q,ne,he,de,Ie,ke,Te,Se,Pe,Qe,Le,je,z,Ee,Ne,fe,se=0,ee=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return g;(q=M.state).mode===12&&(q.mode=13),Y=M.next_out,ae=M.output,V=M.avail_out,te=M.next_in,ue=M.input,ie=M.avail_in,J=q.hold,Q=q.bits,ne=ie,he=V,Ee=m;e:for(;;)switch(q.mode){case b:if(q.wrap===0){q.mode=13;break}for(;Q<16;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if(2&q.wrap&&J===35615){ee[q.check=0]=255&J,ee[1]=J>>>8&255,q.check=o(q.check,ee,2,0),Q=J=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&J)<<8)+(J>>8))%31){M.msg="incorrect header check",q.mode=30;break}if((15&J)!=8){M.msg="unknown compression method",q.mode=30;break}if(Q-=4,z=8+(15&(J>>>=4)),q.wbits===0)q.wbits=z;else if(z>q.wbits){M.msg="invalid window size",q.mode=30;break}q.dmax=1<<z,M.adler=q.check=1,q.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if(q.flags=J,(255&q.flags)!=8){M.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){M.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=J>>8&1),512&q.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,q.check=o(q.check,ee,2,0)),Q=J=0,q.mode=3;case 3:for(;Q<32;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}q.head&&(q.head.time=J),512&q.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,ee[2]=J>>>16&255,ee[3]=J>>>24&255,q.check=o(q.check,ee,4,0)),Q=J=0,q.mode=4;case 4:for(;Q<16;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}q.head&&(q.head.xflags=255&J,q.head.os=J>>8),512&q.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,q.check=o(q.check,ee,2,0)),Q=J=0,q.mode=5;case 5:if(1024&q.flags){for(;Q<16;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}q.length=J,q.head&&(q.head.extra_len=J),512&q.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,q.check=o(q.check,ee,2,0)),Q=J=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(ie<(de=q.length)&&(de=ie),de&&(q.head&&(z=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),i.arraySet(q.head.extra,ue,te,de,z)),512&q.flags&&(q.check=o(q.check,ue,de,te)),ie-=de,te+=de,q.length-=de),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(ie===0)break e;for(de=0;z=ue[te+de++],q.head&&z&&q.length<65536&&(q.head.name+=String.fromCharCode(z)),z&&de<ie;);if(512&q.flags&&(q.check=o(q.check,ue,de,te)),ie-=de,te+=de,z)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(ie===0)break e;for(de=0;z=ue[te+de++],q.head&&z&&q.length<65536&&(q.head.comment+=String.fromCharCode(z)),z&&de<ie;);if(512&q.flags&&(q.check=o(q.check,ue,de,te)),ie-=de,te+=de,z)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;Q<16;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if(J!==(65535&q.check)){M.msg="header crc mismatch",q.mode=30;break}Q=J=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),M.adler=q.check=0,q.mode=12;break;case 10:for(;Q<32;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}M.adler=q.check=w(J),Q=J=0,q.mode=11;case 11:if(q.havedict===0)return M.next_out=Y,M.avail_out=V,M.next_in=te,M.avail_in=ie,q.hold=J,q.bits=Q,2;M.adler=q.check=1,q.mode=12;case 12:if(K===5||K===6)break e;case 13:if(q.last){J>>>=7&Q,Q-=7&Q,q.mode=27;break}for(;Q<3;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}switch(q.last=1&J,Q-=1,3&(J>>>=1)){case 0:q.mode=14;break;case 1:if(L(q),q.mode=20,K!==6)break;J>>>=2,Q-=2;break e;case 2:q.mode=17;break;case 3:M.msg="invalid block type",q.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){M.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&J,Q=J=0,q.mode=15,K===6)break e;case 15:q.mode=16;case 16:if(de=q.length){if(ie<de&&(de=ie),V<de&&(de=V),de===0)break e;i.arraySet(ae,ue,te,de,Y),ie-=de,te+=de,V-=de,Y+=de,q.length-=de;break}q.mode=12;break;case 17:for(;Q<14;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if(q.nlen=257+(31&J),J>>>=5,Q-=5,q.ndist=1+(31&J),J>>>=5,Q-=5,q.ncode=4+(15&J),J>>>=4,Q-=4,286<q.nlen||30<q.ndist){M.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;Q<3;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}q.lens[xe[q.have++]]=7&J,J>>>=3,Q-=3}for(;q.have<19;)q.lens[xe[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Ne={bits:q.lenbits},Ee=u(0,q.lens,0,19,q.lencode,0,q.work,Ne),q.lenbits=Ne.bits,Ee){M.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Se=(se=q.lencode[J&(1<<q.lenbits)-1])>>>16&255,Pe=65535&se,!((Te=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if(Pe<16)J>>>=Te,Q-=Te,q.lens[q.have++]=Pe;else{if(Pe===16){for(fe=Te+2;Q<fe;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if(J>>>=Te,Q-=Te,q.have===0){M.msg="invalid bit length repeat",q.mode=30;break}z=q.lens[q.have-1],de=3+(3&J),J>>>=2,Q-=2}else if(Pe===17){for(fe=Te+3;Q<fe;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}Q-=Te,z=0,de=3+(7&(J>>>=Te)),J>>>=3,Q-=3}else{for(fe=Te+7;Q<fe;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}Q-=Te,z=0,de=11+(127&(J>>>=Te)),J>>>=7,Q-=7}if(q.have+de>q.nlen+q.ndist){M.msg="invalid bit length repeat",q.mode=30;break}for(;de--;)q.lens[q.have++]=z}}if(q.mode===30)break;if(q.lens[256]===0){M.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Ne={bits:q.lenbits},Ee=u(d,q.lens,0,q.nlen,q.lencode,0,q.work,Ne),q.lenbits=Ne.bits,Ee){M.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Ne={bits:q.distbits},Ee=u(h,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Ne),q.distbits=Ne.bits,Ee){M.msg="invalid distances set",q.mode=30;break}if(q.mode=20,K===6)break e;case 20:q.mode=21;case 21:if(6<=ie&&258<=V){M.next_out=Y,M.avail_out=V,M.next_in=te,M.avail_in=ie,q.hold=J,q.bits=Q,l(M,he),Y=M.next_out,ae=M.output,V=M.avail_out,te=M.next_in,ue=M.input,ie=M.avail_in,J=q.hold,Q=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Se=(se=q.lencode[J&(1<<q.lenbits)-1])>>>16&255,Pe=65535&se,!((Te=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if(Se&&(240&Se)==0){for(Qe=Te,Le=Se,je=Pe;Se=(se=q.lencode[je+((J&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Pe=65535&se,!(Qe+(Te=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}J>>>=Qe,Q-=Qe,q.back+=Qe}if(J>>>=Te,Q-=Te,q.back+=Te,q.length=Pe,Se===0){q.mode=26;break}if(32&Se){q.back=-1,q.mode=12;break}if(64&Se){M.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Se,q.mode=22;case 22:if(q.extra){for(fe=q.extra;Q<fe;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}q.length+=J&(1<<q.extra)-1,J>>>=q.extra,Q-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Se=(se=q.distcode[J&(1<<q.distbits)-1])>>>16&255,Pe=65535&se,!((Te=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if((240&Se)==0){for(Qe=Te,Le=Se,je=Pe;Se=(se=q.distcode[je+((J&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Pe=65535&se,!(Qe+(Te=se>>>24)<=Q);){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}J>>>=Qe,Q-=Qe,q.back+=Qe}if(J>>>=Te,Q-=Te,q.back+=Te,64&Se){M.msg="invalid distance code",q.mode=30;break}q.offset=Pe,q.extra=15&Se,q.mode=24;case 24:if(q.extra){for(fe=q.extra;Q<fe;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}q.offset+=J&(1<<q.extra)-1,J>>>=q.extra,Q-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){M.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(V===0)break e;if(de=he-V,q.offset>de){if((de=q.offset-de)>q.whave&&q.sane){M.msg="invalid distance too far back",q.mode=30;break}Ie=de>q.wnext?(de-=q.wnext,q.wsize-de):q.wnext-de,de>q.length&&(de=q.length),ke=q.window}else ke=ae,Ie=Y-q.offset,de=q.length;for(V<de&&(de=V),V-=de,q.length-=de;ae[Y++]=ke[Ie++],--de;);q.length===0&&(q.mode=21);break;case 26:if(V===0)break e;ae[Y++]=q.length,V--,q.mode=21;break;case 27:if(q.wrap){for(;Q<32;){if(ie===0)break e;ie--,J|=ue[te++]<<Q,Q+=8}if(he-=V,M.total_out+=he,q.total+=he,he&&(M.adler=q.check=q.flags?o(q.check,ae,he,Y-he):s(q.check,ae,he,Y-he)),he=V,(q.flags?J:w(J))!==q.check){M.msg="incorrect data check",q.mode=30;break}Q=J=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;Q<32;){if(ie===0)break e;ie--,J+=ue[te++]<<Q,Q+=8}if(J!==(4294967295&q.total)){M.msg="incorrect length check",q.mode=30;break}Q=J=0}q.mode=29;case 29:Ee=1;break e;case 30:Ee=-3;break e;case 31:return-4;case 32:default:return g}return M.next_out=Y,M.avail_out=V,M.next_in=te,M.avail_in=ie,q.hold=J,q.bits=Q,(q.wsize||he!==M.avail_out&&q.mode<30&&(q.mode<27||K!==4))&&H(M,M.output,M.next_out,he-M.avail_out)?(q.mode=31,-4):(ne-=M.avail_in,he-=M.avail_out,M.total_in+=ne,M.total_out+=he,q.total+=he,q.wrap&&he&&(M.adler=q.check=q.flags?o(q.check,ae,he,M.next_out-he):s(q.check,ae,he,M.next_out-he)),M.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(ne==0&&he===0||K===4)&&Ee===m&&(Ee=-5),Ee)},a.inflateEnd=function(M){if(!M||!M.state)return g;var K=M.state;return K.window&&(K.window=null),M.state=null,m},a.inflateGetHeader=function(M,K){var q;return M&&M.state?(2&(q=M.state).wrap)==0?g:((q.head=K).done=!1,m):g},a.inflateSetDictionary=function(M,K){var q,ue=K.length;return M&&M.state?(q=M.state).wrap!==0&&q.mode!==11?g:q.mode===11&&s(1,K,ue,0)!==q.check?-3:H(M,K,ue,ue)?(q.mode=31,-4):(q.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,m,g,b,v,x,w){var _,E,C,k,I,j,N,P,L,H=w.bits,M=0,K=0,q=0,ue=0,ae=0,te=0,Y=0,ie=0,V=0,J=0,Q=null,ne=0,he=new i.Buf16(16),de=new i.Buf16(16),Ie=null,ke=0;for(M=0;M<=15;M++)he[M]=0;for(K=0;K<g;K++)he[h[m+K]]++;for(ae=H,ue=15;1<=ue&&he[ue]===0;ue--);if(ue<ae&&(ae=ue),ue===0)return b[v++]=20971520,b[v++]=20971520,w.bits=1,0;for(q=1;q<ue&&he[q]===0;q++);for(ae<q&&(ae=q),M=ie=1;M<=15;M++)if(ie<<=1,(ie-=he[M])<0)return-1;if(0<ie&&(d===0||ue!==1))return-1;for(de[1]=0,M=1;M<15;M++)de[M+1]=de[M]+he[M];for(K=0;K<g;K++)h[m+K]!==0&&(x[de[h[m+K]]++]=K);if(j=d===0?(Q=Ie=x,19):d===1?(Q=s,ne-=257,Ie=o,ke-=257,256):(Q=l,Ie=u,-1),M=q,I=v,Y=K=J=0,C=-1,k=(V=1<<(te=ae))-1,d===1&&852<V||d===2&&592<V)return 1;for(;;){for(N=M-Y,L=x[K]<j?(P=0,x[K]):x[K]>j?(P=Ie[ke+x[K]],Q[ne+x[K]]):(P=96,0),_=1<<M-Y,q=E=1<<te;b[I+(J>>Y)+(E-=_)]=N<<24|P<<16|L|0,E!==0;);for(_=1<<M-1;J&_;)_>>=1;if(_!==0?(J&=_-1,J+=_):J=0,K++,--he[M]==0){if(M===ue)break;M=h[m+x[K]]}if(ae<M&&(J&k)!==C){for(Y===0&&(Y=ae),I+=q,ie=1<<(te=M-Y);te+Y<ue&&!((ie-=he[te+Y])<=0);)te++,ie<<=1;if(V+=1<<te,d===1&&852<V||d===2&&592<V)return 1;b[C=J&k]=ae<<24|te<<16|I-v|0}}return J!==0&&(b[I+J]=M-Y<<24|64<<16|0),w.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),s=0,o=1;function l(se){for(var ee=se.length;0<=--ee;)se[ee]=0}var u=0,d=29,h=256,m=h+1+d,g=30,b=19,v=2*m+1,x=15,w=16,_=7,E=256,C=16,k=17,I=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(m+2));l(H);var M=new Array(2*g);l(M);var K=new Array(512);l(K);var q=new Array(256);l(q);var ue=new Array(d);l(ue);var ae,te,Y,ie=new Array(g);function V(se,ee,xe,Fe,Ce){this.static_tree=se,this.extra_bits=ee,this.extra_base=xe,this.elems=Fe,this.max_length=Ce,this.has_stree=se&&se.length}function J(se,ee){this.dyn_tree=se,this.max_code=0,this.stat_desc=ee}function Q(se){return se<256?K[se]:K[256+(se>>>7)]}function ne(se,ee){se.pending_buf[se.pending++]=255&ee,se.pending_buf[se.pending++]=ee>>>8&255}function he(se,ee,xe){se.bi_valid>w-xe?(se.bi_buf|=ee<<se.bi_valid&65535,ne(se,se.bi_buf),se.bi_buf=ee>>w-se.bi_valid,se.bi_valid+=xe-w):(se.bi_buf|=ee<<se.bi_valid&65535,se.bi_valid+=xe)}function de(se,ee,xe){he(se,xe[2*ee],xe[2*ee+1])}function Ie(se,ee){for(var xe=0;xe|=1&se,se>>>=1,xe<<=1,0<--ee;);return xe>>>1}function ke(se,ee,xe){var Fe,Ce,We=new Array(x+1),Nt=0;for(Fe=1;Fe<=x;Fe++)We[Fe]=Nt=Nt+xe[Fe-1]<<1;for(Ce=0;Ce<=ee;Ce++){var it=se[2*Ce+1];it!==0&&(se[2*Ce]=Ie(We[it]++,it))}}function Te(se){var ee;for(ee=0;ee<m;ee++)se.dyn_ltree[2*ee]=0;for(ee=0;ee<g;ee++)se.dyn_dtree[2*ee]=0;for(ee=0;ee<b;ee++)se.bl_tree[2*ee]=0;se.dyn_ltree[2*E]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function Se(se){8<se.bi_valid?ne(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function Pe(se,ee,xe,Fe){var Ce=2*ee,We=2*xe;return se[Ce]<se[We]||se[Ce]===se[We]&&Fe[ee]<=Fe[xe]}function Qe(se,ee,xe){for(var Fe=se.heap[xe],Ce=xe<<1;Ce<=se.heap_len&&(Ce<se.heap_len&&Pe(ee,se.heap[Ce+1],se.heap[Ce],se.depth)&&Ce++,!Pe(ee,Fe,se.heap[Ce],se.depth));)se.heap[xe]=se.heap[Ce],xe=Ce,Ce<<=1;se.heap[xe]=Fe}function Le(se,ee,xe){var Fe,Ce,We,Nt,it=0;if(se.last_lit!==0)for(;Fe=se.pending_buf[se.d_buf+2*it]<<8|se.pending_buf[se.d_buf+2*it+1],Ce=se.pending_buf[se.l_buf+it],it++,Fe===0?de(se,Ce,ee):(de(se,(We=q[Ce])+h+1,ee),(Nt=j[We])!==0&&he(se,Ce-=ue[We],Nt),de(se,We=Q(--Fe),xe),(Nt=N[We])!==0&&he(se,Fe-=ie[We],Nt)),it<se.last_lit;);de(se,E,ee)}function je(se,ee){var xe,Fe,Ce,We=ee.dyn_tree,Nt=ee.stat_desc.static_tree,it=ee.stat_desc.has_stree,St=ee.stat_desc.elems,Ft=-1;for(se.heap_len=0,se.heap_max=v,xe=0;xe<St;xe++)We[2*xe]!==0?(se.heap[++se.heap_len]=Ft=xe,se.depth[xe]=0):We[2*xe+1]=0;for(;se.heap_len<2;)We[2*(Ce=se.heap[++se.heap_len]=Ft<2?++Ft:0)]=1,se.depth[Ce]=0,se.opt_len--,it&&(se.static_len-=Nt[2*Ce+1]);for(ee.max_code=Ft,xe=se.heap_len>>1;1<=xe;xe--)Qe(se,We,xe);for(Ce=St;xe=se.heap[1],se.heap[1]=se.heap[se.heap_len--],Qe(se,We,1),Fe=se.heap[1],se.heap[--se.heap_max]=xe,se.heap[--se.heap_max]=Fe,We[2*Ce]=We[2*xe]+We[2*Fe],se.depth[Ce]=(se.depth[xe]>=se.depth[Fe]?se.depth[xe]:se.depth[Fe])+1,We[2*xe+1]=We[2*Fe+1]=Ce,se.heap[1]=Ce++,Qe(se,We,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(Mt,Kt){var be,D,W,pe,De,ve,Ae=Kt.dyn_tree,le=Kt.max_code,ft=Kt.stat_desc.static_tree,vt=Kt.stat_desc.has_stree,F=Kt.stat_desc.extra_bits,$e=Kt.stat_desc.extra_base,nt=Kt.stat_desc.max_length,ye=0;for(pe=0;pe<=x;pe++)Mt.bl_count[pe]=0;for(Ae[2*Mt.heap[Mt.heap_max]+1]=0,be=Mt.heap_max+1;be<v;be++)nt<(pe=Ae[2*Ae[2*(D=Mt.heap[be])+1]+1]+1)&&(pe=nt,ye++),Ae[2*D+1]=pe,le<D||(Mt.bl_count[pe]++,De=0,$e<=D&&(De=F[D-$e]),ve=Ae[2*D],Mt.opt_len+=ve*(pe+De),vt&&(Mt.static_len+=ve*(ft[2*D+1]+De)));if(ye!==0){do{for(pe=nt-1;Mt.bl_count[pe]===0;)pe--;Mt.bl_count[pe]--,Mt.bl_count[pe+1]+=2,Mt.bl_count[nt]--,ye-=2}while(0<ye);for(pe=nt;pe!==0;pe--)for(D=Mt.bl_count[pe];D!==0;)le<(W=Mt.heap[--be])||(Ae[2*W+1]!==pe&&(Mt.opt_len+=(pe-Ae[2*W+1])*Ae[2*W],Ae[2*W+1]=pe),D--)}}(se,ee),ke(We,Ft,se.bl_count)}function z(se,ee,xe){var Fe,Ce,We=-1,Nt=ee[1],it=0,St=7,Ft=4;for(Nt===0&&(St=138,Ft=3),ee[2*(xe+1)+1]=65535,Fe=0;Fe<=xe;Fe++)Ce=Nt,Nt=ee[2*(Fe+1)+1],++it<St&&Ce===Nt||(it<Ft?se.bl_tree[2*Ce]+=it:Ce!==0?(Ce!==We&&se.bl_tree[2*Ce]++,se.bl_tree[2*C]++):it<=10?se.bl_tree[2*k]++:se.bl_tree[2*I]++,We=Ce,Ft=(it=0)===Nt?(St=138,3):Ce===Nt?(St=6,3):(St=7,4))}function Ee(se,ee,xe){var Fe,Ce,We=-1,Nt=ee[1],it=0,St=7,Ft=4;for(Nt===0&&(St=138,Ft=3),Fe=0;Fe<=xe;Fe++)if(Ce=Nt,Nt=ee[2*(Fe+1)+1],!(++it<St&&Ce===Nt)){if(it<Ft)for(;de(se,Ce,se.bl_tree),--it!=0;);else Ce!==0?(Ce!==We&&(de(se,Ce,se.bl_tree),it--),de(se,C,se.bl_tree),he(se,it-3,2)):it<=10?(de(se,k,se.bl_tree),he(se,it-3,3)):(de(se,I,se.bl_tree),he(se,it-11,7));We=Ce,Ft=(it=0)===Nt?(St=138,3):Ce===Nt?(St=6,3):(St=7,4)}}l(ie);var Ne=!1;function fe(se,ee,xe,Fe){he(se,(u<<1)+(Fe?1:0),3),function(Ce,We,Nt,it){Se(Ce),ne(Ce,Nt),ne(Ce,~Nt),i.arraySet(Ce.pending_buf,Ce.window,We,Nt,Ce.pending),Ce.pending+=Nt}(se,ee,xe)}a._tr_init=function(se){Ne||(function(){var ee,xe,Fe,Ce,We,Nt=new Array(x+1);for(Ce=Fe=0;Ce<d-1;Ce++)for(ue[Ce]=Fe,ee=0;ee<1<<j[Ce];ee++)q[Fe++]=Ce;for(q[Fe-1]=Ce,Ce=We=0;Ce<16;Ce++)for(ie[Ce]=We,ee=0;ee<1<<N[Ce];ee++)K[We++]=Ce;for(We>>=7;Ce<g;Ce++)for(ie[Ce]=We<<7,ee=0;ee<1<<N[Ce]-7;ee++)K[256+We++]=Ce;for(xe=0;xe<=x;xe++)Nt[xe]=0;for(ee=0;ee<=143;)H[2*ee+1]=8,ee++,Nt[8]++;for(;ee<=255;)H[2*ee+1]=9,ee++,Nt[9]++;for(;ee<=279;)H[2*ee+1]=7,ee++,Nt[7]++;for(;ee<=287;)H[2*ee+1]=8,ee++,Nt[8]++;for(ke(H,m+1,Nt),ee=0;ee<g;ee++)M[2*ee+1]=5,M[2*ee]=Ie(ee,5);ae=new V(H,j,h+1,m,x),te=new V(M,N,0,g,x),Y=new V(new Array(0),P,0,b,_)}(),Ne=!0),se.l_desc=new J(se.dyn_ltree,ae),se.d_desc=new J(se.dyn_dtree,te),se.bl_desc=new J(se.bl_tree,Y),se.bi_buf=0,se.bi_valid=0,Te(se)},a._tr_stored_block=fe,a._tr_flush_block=function(se,ee,xe,Fe){var Ce,We,Nt=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(it){var St,Ft=4093624447;for(St=0;St<=31;St++,Ft>>>=1)if(1&Ft&&it.dyn_ltree[2*St]!==0)return s;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return o;for(St=32;St<h;St++)if(it.dyn_ltree[2*St]!==0)return o;return s}(se)),je(se,se.l_desc),je(se,se.d_desc),Nt=function(it){var St;for(z(it,it.dyn_ltree,it.l_desc.max_code),z(it,it.dyn_dtree,it.d_desc.max_code),je(it,it.bl_desc),St=b-1;3<=St&&it.bl_tree[2*L[St]+1]===0;St--);return it.opt_len+=3*(St+1)+5+5+4,St}(se),Ce=se.opt_len+3+7>>>3,(We=se.static_len+3+7>>>3)<=Ce&&(Ce=We)):Ce=We=xe+5,xe+4<=Ce&&ee!==-1?fe(se,ee,xe,Fe):se.strategy===4||We===Ce?(he(se,2+(Fe?1:0),3),Le(se,H,M)):(he(se,4+(Fe?1:0),3),function(it,St,Ft,Mt){var Kt;for(he(it,St-257,5),he(it,Ft-1,5),he(it,Mt-4,4),Kt=0;Kt<Mt;Kt++)he(it,it.bl_tree[2*L[Kt]+1],3);Ee(it,it.dyn_ltree,St-1),Ee(it,it.dyn_dtree,Ft-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,Nt+1),Le(se,se.dyn_ltree,se.dyn_dtree)),Te(se),Fe&&Se(se)},a._tr_tally=function(se,ee,xe){return se.pending_buf[se.d_buf+2*se.last_lit]=ee>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&ee,se.pending_buf[se.l_buf+se.last_lit]=255&xe,se.last_lit++,ee===0?se.dyn_ltree[2*xe]++:(se.matches++,ee--,se.dyn_ltree[2*(q[xe]+h+1)]++,se.dyn_dtree[2*Q(ee)]++),se.last_lit===se.lit_bufsize-1},a._tr_align=function(se){he(se,2,3),de(se,E,H),function(ee){ee.bi_valid===16?(ne(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(s,o){if(!s.setImmediate){var l,u,d,h,m=1,g={},b=!1,v=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,l={}.toString.call(s.process)==="[object process]"?function(C){da.nextTick(function(){_(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,k=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(C){s.postMessage(h+C,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){_(C.data)},function(C){d.port2.postMessage(C)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,function(C){var k=v.createElement("script");k.onreadystatechange=function(){_(C),k.onreadystatechange=null,u.removeChild(k),k=null},u.appendChild(k)}):function(C){setTimeout(_,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),I=0;I<k.length;I++)k[I]=arguments[I+1];var j={callback:C,args:k};return g[m]=j,l(m),m++},x.clearImmediate=w}function w(C){delete g[C]}function _(C){if(b)setTimeout(_,0,C);else{var k=g[C];if(k){b=!0;try{(function(I){var j=I.callback,N=I.args;switch(N.length){case 0:j();break;case 1:j(N[0]);break;case 2:j(N[0],N[1]);break;case 3:j(N[0],N[1],N[2]);break;default:j.apply(o,N)}})(k)}finally{w(C),b=!1}}}}function E(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(h)===0&&_(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(BE)),BE.exports}var woe=voe();const T9=bi(woe),I0=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},ar=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},bl=(...e)=>ar(e.map(t=>t.trim()).filter(Boolean).join("/")),Iy=e=>{const t=ar(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},_a=e=>{const t=ar(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},j0=(e,t)=>ar(e==="/"?`/${t}`:`${e}/${t}`);var $E,g6;function xoe(){if(g6)return $E;g6=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof da>"u"||typeof da.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof r!="function"&&(a=r,r=null,o=new this.Promise(function(E,C){i=E,s=C})),a=a||{};var l=!1,u=null,d=null,h=null,m=this,g=function(E,C,k){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),l||(o?C?s(C):i(k):typeof r=="function"&&r(C,k),l=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},b=function(E){if(l)return g(E);u&&(clearTimeout(u),u=null),m.domainReentrant&&E&&(m.domains[t]=da.domain);var C=a.maxExecutionTime||m.maxExecutionTime;if(C&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(I,j){k||(k=!0,g(E,I,j))})}catch(I){k||(k=!0,g(E,I))}}else m._promiseTry(function(){return n()}).then(function(I){g(E,void 0,I)},function(I){g(E,I)})};m.domainReentrant&&da.domain&&(b=da.domain.bind(b));var v=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],b(!0);else if(m.domainReentrant&&da.domain&&da.domain===m.domains[t])b(!1);else if(m.queues[t].length>=v)g(!1,new Error("Too many pending tasks in queue "+t));else{var x=function(){b(!0)};a.skipQueue?m.queues[t].unshift(x):m.queues[t].push(x);var w=a.timeout||m.timeout;w&&(u=setTimeout(function(){u=null,g(!1,new Error("async-lock timed out in queue "+t))},w))}var _=a.maxOccupationTime||m.maxOccupationTime;if(_&&(d=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},_)),o)return o},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,s=function(l,u){return function(d){i.acquire(l,u,d,a)}},o=t.reduceRight(function(l,u){return s(u,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,u){o.length===1?o(function(d,h){d?u(d):l(h)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},$E=e,$E}var zE,y6;function _oe(){return y6||(y6=1,zE=xoe()),zE}var Soe=_oe();const D0=bi(Soe);var uw={exports:{}},b6;function Eoe(){return b6||(b6=1,typeof Object.create=="function"?uw.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:uw.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),uw.exports}var UE,v6;function Coe(){if(v6)return UE;v6=1;var e=aN().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,s=n.length,o=this._len,l=0;l<s;){for(var u=o%i,d=Math.min(s-l,i-u),h=0;h<d;h++)a[u+h]=n[l+h];o+=d,l+=d,o%i===0&&this._update(a)}return this._len+=s,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,s=(a-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},UE=t,UE}var VE,w6;function Toe(){if(w6)return VE;w6=1;var e=Eoe(),t=Coe(),n=aN().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(d){return d<<1|d>>>31}function o(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function u(d,h,m,g){return d===0?h&m|~h&g:d===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(d){for(var h=this._w,m=this._a|0,g=this._b|0,b=this._c|0,v=this._d|0,x=this._e|0,w=0;w<16;++w)h[w]=d.readInt32BE(w*4);for(;w<80;++w)h[w]=s(h[w-3]^h[w-8]^h[w-14]^h[w-16]);for(var _=0;_<80;++_){var E=~~(_/20),C=o(m)+u(E,g,b,v)+x+h[_]+r[E]|0;x=v,v=b,b=l(g),g=m,m=C}this._a=m+this._a|0,this._b=g+this._b|0,this._c=b+this._c|0,this._d=v+this._d|0,this._e=x+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},VE=i,VE}var koe=Toe();const k9=bi(koe);var HE,x6;function Aoe(){if(x6)return HE;x6=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var s="",o=0,l=-1,u=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||u===1))if(l!==h-1&&u===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=h,u=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=h,u=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+a.slice(l+1,h):s=a.slice(l+1,h),o=h-l-1;l=h,u=0}else d===46&&u!==-1?++u:u=-1}return s}function n(a,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+a+o:o}var r={resolve:function(){for(var i="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var u;l>=0?u=arguments[l]:(o===void 0&&(o=da.cwd()),u=o),e(u),u.length!==0&&(i=u+"/"+i,s=u.charCodeAt(0)===47)}return i=t(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var s=i.charCodeAt(0)===47,o=i.charCodeAt(i.length-1)===47;return i=t(i,!s),i.length===0&&!s&&(i="."),i.length>0&&o&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":r.normalize(i)},relative:function(i,s){if(e(i),e(s),i===s||(i=r.resolve(i),s=r.resolve(s),i===s))return"";for(var o=1;o<i.length&&i.charCodeAt(o)===47;++o);for(var l=i.length,u=l-o,d=1;d<s.length&&s.charCodeAt(d)===47;++d);for(var h=s.length,m=h-d,g=u<m?u:m,b=-1,v=0;v<=g;++v){if(v===g){if(m>g){if(s.charCodeAt(d+v)===47)return s.slice(d+v+1);if(v===0)return s.slice(d+v)}else u>g&&(i.charCodeAt(o+v)===47?b=v:v===0&&(b=0));break}var x=i.charCodeAt(o+v),w=s.charCodeAt(d+v);if(x!==w)break;x===47&&(b=v)}var _="";for(v=o+b+1;v<=l;++v)(v===l||i.charCodeAt(v)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+s.slice(d+b):(d+=b,s.charCodeAt(d)===47&&++d,s.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var s=i.charCodeAt(0),o=s===47,l=-1,u=!0,d=i.length-1;d>=1;--d)if(s=i.charCodeAt(d),s===47){if(!u){l=d;break}}else u=!1;return l===-1?o?"/":".":o&&l===1?"//":i.slice(0,l)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(i);var o=0,l=-1,u=!0,d;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var h=s.length-1,m=-1;for(d=i.length-1;d>=0;--d){var g=i.charCodeAt(d);if(g===47){if(!u){o=d+1;break}}else m===-1&&(u=!1,m=d+1),h>=0&&(g===s.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=m))}return o===l?l=m:l===-1&&(l=i.length),i.slice(o,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!u){o=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":i.slice(o,l)}},extname:function(i){e(i);for(var s=-1,o=0,l=-1,u=!0,d=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!u){o=h+1;break}continue}l===-1&&(u=!1,l=h+1),m===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===o+1?"":i.slice(s,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var o=i.charCodeAt(0),l=o===47,u;l?(s.root="/",u=1):u=0;for(var d=-1,h=0,m=-1,g=!0,b=i.length-1,v=0;b>=u;--b){if(o=i.charCodeAt(b),o===47){if(!g){h=b+1;break}continue}m===-1&&(g=!1,m=b+1),o===46?d===-1?d=b:v!==1&&(v=1):d!==-1&&(v=-1)}return d===-1||m===-1||v===0||v===1&&d===m-1&&d===h+1?m!==-1&&(h===0&&l?s.base=s.name=i.slice(1,m):s.base=s.name=i.slice(h,m)):(h===0&&l?(s.name=i.slice(1,d),s.base=i.slice(1,m)):(s.name=i.slice(h,d),s.base=i.slice(h,m)),s.ext=i.slice(d,m)),h>0?s.dir=i.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,HE=r,HE}var Pt=Aoe(),qE={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var _6;function Noe(){return _6||(_6=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,P=new Array(256),L=0;L!=256;++L)N=L,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,P[L]=N;return typeof Int32Array<"u"?new Int32Array(P):P}var r=n();function a(N){var P=0,L=0,H=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(H=0;H!=256;++H)M[H]=N[H];for(H=0;H!=256;++H)for(L=N[H],P=256+H;P<4096;P+=256)L=M[P]=L>>>8^N[L&255];var K=[];for(H=1;H!=16;++H)K[H-1]=typeof Int32Array<"u"?M.subarray(H*256,H*256+256):M.slice(H*256,H*256+256);return K}var i=a(r),s=i[0],o=i[1],l=i[2],u=i[3],d=i[4],h=i[5],m=i[6],g=i[7],b=i[8],v=i[9],x=i[10],w=i[11],_=i[12],E=i[13],C=i[14];function k(N,P){for(var L=P^-1,H=0,M=N.length;H<M;)L=L>>>8^r[(L^N.charCodeAt(H++))&255];return~L}function I(N,P){for(var L=P^-1,H=N.length-15,M=0;M<H;)L=C[N[M++]^L&255]^E[N[M++]^L>>8&255]^_[N[M++]^L>>16&255]^w[N[M++]^L>>>24]^x[N[M++]]^v[N[M++]]^b[N[M++]]^g[N[M++]]^m[N[M++]]^h[N[M++]]^d[N[M++]]^u[N[M++]]^l[N[M++]]^o[N[M++]]^s[N[M++]]^r[N[M++]];for(H+=15;M<H;)L=L>>>8^r[(L^N[M++])&255];return~L}function j(N,P){for(var L=P^-1,H=0,M=N.length,K=0,q=0;H<M;)K=N.charCodeAt(H++),K<128?L=L>>>8^r[(L^K)&255]:K<2048?(L=L>>>8^r[(L^(192|K>>6&31))&255],L=L>>>8^r[(L^(128|K&63))&255]):K>=55296&&K<57344?(K=(K&1023)+64,q=N.charCodeAt(H++)&1023,L=L>>>8^r[(L^(240|K>>8&7))&255],L=L>>>8^r[(L^(128|K>>2&63))&255],L=L>>>8^r[(L^(128|q>>6&15|(K&3)<<4))&255],L=L>>>8^r[(L^(128|q&63))&255]):(L=L>>>8^r[(L^(224|K>>12&15))&255],L=L>>>8^r[(L^(128|K>>6&63))&255],L=L>>>8^r[(L^(128|K&63))&255]);return~L}t.table=r,t.bstr=k,t.buf=I,t.str=j})}(qE)),qE}var Roe=Noe();const Ioe=bi(Roe);var GE={},S6;function sd(){return S6||(S6=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,s){return Object.prototype.hasOwnProperty.call(i,s)}e.assign=function(i){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var o=s.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(i[l]=o[l])}}return i},e.shrinkBuf=function(i,s){return i.length===s?i:i.subarray?i.subarray(0,s):(i.length=s,i)};var r={arraySet:function(i,s,o,l,u){if(s.subarray&&i.subarray){i.set(s.subarray(o,o+l),u);return}for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){var s,o,l,u,d,h;for(l=0,s=0,o=i.length;s<o;s++)l+=i[s].length;for(h=new Uint8Array(l),u=0,s=0,o=i.length;s<o;s++)d=i[s],h.set(d,u),u+=d.length;return h}},a={arraySet:function(i,s,o,l,u){for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(GE)),GE}var Dh={},io={},$d={},E6;function joe(){if(E6)return $d;E6=1;var e=sd(),t=4,n=0,r=1,a=2;function i(D){for(var W=D.length;--W>=0;)D[W]=0}var s=0,o=1,l=2,u=3,d=258,h=29,m=256,g=m+1+h,b=30,v=19,x=2*g+1,w=15,_=16,E=7,C=256,k=16,I=17,j=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=512,K=new Array((g+2)*2);i(K);var q=new Array(b*2);i(q);var ue=new Array(M);i(ue);var ae=new Array(d-u+1);i(ae);var te=new Array(h);i(te);var Y=new Array(b);i(Y);function ie(D,W,pe,De,ve){this.static_tree=D,this.extra_bits=W,this.extra_base=pe,this.elems=De,this.max_length=ve,this.has_stree=D&&D.length}var V,J,Q;function ne(D,W){this.dyn_tree=D,this.max_code=0,this.stat_desc=W}function he(D){return D<256?ue[D]:ue[256+(D>>>7)]}function de(D,W){D.pending_buf[D.pending++]=W&255,D.pending_buf[D.pending++]=W>>>8&255}function Ie(D,W,pe){D.bi_valid>_-pe?(D.bi_buf|=W<<D.bi_valid&65535,de(D,D.bi_buf),D.bi_buf=W>>_-D.bi_valid,D.bi_valid+=pe-_):(D.bi_buf|=W<<D.bi_valid&65535,D.bi_valid+=pe)}function ke(D,W,pe){Ie(D,pe[W*2],pe[W*2+1])}function Te(D,W){var pe=0;do pe|=D&1,D>>>=1,pe<<=1;while(--W>0);return pe>>>1}function Se(D){D.bi_valid===16?(de(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function Pe(D,W){var pe=W.dyn_tree,De=W.max_code,ve=W.stat_desc.static_tree,Ae=W.stat_desc.has_stree,le=W.stat_desc.extra_bits,ft=W.stat_desc.extra_base,vt=W.stat_desc.max_length,F,$e,nt,ye,Me,Ke,Dt=0;for(ye=0;ye<=w;ye++)D.bl_count[ye]=0;for(pe[D.heap[D.heap_max]*2+1]=0,F=D.heap_max+1;F<x;F++)$e=D.heap[F],ye=pe[pe[$e*2+1]*2+1]+1,ye>vt&&(ye=vt,Dt++),pe[$e*2+1]=ye,!($e>De)&&(D.bl_count[ye]++,Me=0,$e>=ft&&(Me=le[$e-ft]),Ke=pe[$e*2],D.opt_len+=Ke*(ye+Me),Ae&&(D.static_len+=Ke*(ve[$e*2+1]+Me)));if(Dt!==0){do{for(ye=vt-1;D.bl_count[ye]===0;)ye--;D.bl_count[ye]--,D.bl_count[ye+1]+=2,D.bl_count[vt]--,Dt-=2}while(Dt>0);for(ye=vt;ye!==0;ye--)for($e=D.bl_count[ye];$e!==0;)nt=D.heap[--F],!(nt>De)&&(pe[nt*2+1]!==ye&&(D.opt_len+=(ye-pe[nt*2+1])*pe[nt*2],pe[nt*2+1]=ye),$e--)}}function Qe(D,W,pe){var De=new Array(w+1),ve=0,Ae,le;for(Ae=1;Ae<=w;Ae++)De[Ae]=ve=ve+pe[Ae-1]<<1;for(le=0;le<=W;le++){var ft=D[le*2+1];ft!==0&&(D[le*2]=Te(De[ft]++,ft))}}function Le(){var D,W,pe,De,ve,Ae=new Array(w+1);for(pe=0,De=0;De<h-1;De++)for(te[De]=pe,D=0;D<1<<N[De];D++)ae[pe++]=De;for(ae[pe-1]=De,ve=0,De=0;De<16;De++)for(Y[De]=ve,D=0;D<1<<P[De];D++)ue[ve++]=De;for(ve>>=7;De<b;De++)for(Y[De]=ve<<7,D=0;D<1<<P[De]-7;D++)ue[256+ve++]=De;for(W=0;W<=w;W++)Ae[W]=0;for(D=0;D<=143;)K[D*2+1]=8,D++,Ae[8]++;for(;D<=255;)K[D*2+1]=9,D++,Ae[9]++;for(;D<=279;)K[D*2+1]=7,D++,Ae[7]++;for(;D<=287;)K[D*2+1]=8,D++,Ae[8]++;for(Qe(K,g+1,Ae),D=0;D<b;D++)q[D*2+1]=5,q[D*2]=Te(D,5);V=new ie(K,N,m+1,g,w),J=new ie(q,P,0,b,w),Q=new ie(new Array(0),L,0,v,E)}function je(D){var W;for(W=0;W<g;W++)D.dyn_ltree[W*2]=0;for(W=0;W<b;W++)D.dyn_dtree[W*2]=0;for(W=0;W<v;W++)D.bl_tree[W*2]=0;D.dyn_ltree[C*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function z(D){D.bi_valid>8?de(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function Ee(D,W,pe,De){z(D),de(D,pe),de(D,~pe),e.arraySet(D.pending_buf,D.window,W,pe,D.pending),D.pending+=pe}function Ne(D,W,pe,De){var ve=W*2,Ae=pe*2;return D[ve]<D[Ae]||D[ve]===D[Ae]&&De[W]<=De[pe]}function fe(D,W,pe){for(var De=D.heap[pe],ve=pe<<1;ve<=D.heap_len&&(ve<D.heap_len&&Ne(W,D.heap[ve+1],D.heap[ve],D.depth)&&ve++,!Ne(W,De,D.heap[ve],D.depth));)D.heap[pe]=D.heap[ve],pe=ve,ve<<=1;D.heap[pe]=De}function se(D,W,pe){var De,ve,Ae=0,le,ft;if(D.last_lit!==0)do De=D.pending_buf[D.d_buf+Ae*2]<<8|D.pending_buf[D.d_buf+Ae*2+1],ve=D.pending_buf[D.l_buf+Ae],Ae++,De===0?ke(D,ve,W):(le=ae[ve],ke(D,le+m+1,W),ft=N[le],ft!==0&&(ve-=te[le],Ie(D,ve,ft)),De--,le=he(De),ke(D,le,pe),ft=P[le],ft!==0&&(De-=Y[le],Ie(D,De,ft)));while(Ae<D.last_lit);ke(D,C,W)}function ee(D,W){var pe=W.dyn_tree,De=W.stat_desc.static_tree,ve=W.stat_desc.has_stree,Ae=W.stat_desc.elems,le,ft,vt=-1,F;for(D.heap_len=0,D.heap_max=x,le=0;le<Ae;le++)pe[le*2]!==0?(D.heap[++D.heap_len]=vt=le,D.depth[le]=0):pe[le*2+1]=0;for(;D.heap_len<2;)F=D.heap[++D.heap_len]=vt<2?++vt:0,pe[F*2]=1,D.depth[F]=0,D.opt_len--,ve&&(D.static_len-=De[F*2+1]);for(W.max_code=vt,le=D.heap_len>>1;le>=1;le--)fe(D,pe,le);F=Ae;do le=D.heap[1],D.heap[1]=D.heap[D.heap_len--],fe(D,pe,1),ft=D.heap[1],D.heap[--D.heap_max]=le,D.heap[--D.heap_max]=ft,pe[F*2]=pe[le*2]+pe[ft*2],D.depth[F]=(D.depth[le]>=D.depth[ft]?D.depth[le]:D.depth[ft])+1,pe[le*2+1]=pe[ft*2+1]=F,D.heap[1]=F++,fe(D,pe,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],Pe(D,W),Qe(pe,vt,D.bl_count)}function xe(D,W,pe){var De,ve=-1,Ae,le=W[0*2+1],ft=0,vt=7,F=4;for(le===0&&(vt=138,F=3),W[(pe+1)*2+1]=65535,De=0;De<=pe;De++)Ae=le,le=W[(De+1)*2+1],!(++ft<vt&&Ae===le)&&(ft<F?D.bl_tree[Ae*2]+=ft:Ae!==0?(Ae!==ve&&D.bl_tree[Ae*2]++,D.bl_tree[k*2]++):ft<=10?D.bl_tree[I*2]++:D.bl_tree[j*2]++,ft=0,ve=Ae,le===0?(vt=138,F=3):Ae===le?(vt=6,F=3):(vt=7,F=4))}function Fe(D,W,pe){var De,ve=-1,Ae,le=W[0*2+1],ft=0,vt=7,F=4;for(le===0&&(vt=138,F=3),De=0;De<=pe;De++)if(Ae=le,le=W[(De+1)*2+1],!(++ft<vt&&Ae===le)){if(ft<F)do ke(D,Ae,D.bl_tree);while(--ft!==0);else Ae!==0?(Ae!==ve&&(ke(D,Ae,D.bl_tree),ft--),ke(D,k,D.bl_tree),Ie(D,ft-3,2)):ft<=10?(ke(D,I,D.bl_tree),Ie(D,ft-3,3)):(ke(D,j,D.bl_tree),Ie(D,ft-11,7));ft=0,ve=Ae,le===0?(vt=138,F=3):Ae===le?(vt=6,F=3):(vt=7,F=4)}}function Ce(D){var W;for(xe(D,D.dyn_ltree,D.l_desc.max_code),xe(D,D.dyn_dtree,D.d_desc.max_code),ee(D,D.bl_desc),W=v-1;W>=3&&D.bl_tree[H[W]*2+1]===0;W--);return D.opt_len+=3*(W+1)+5+5+4,W}function We(D,W,pe,De){var ve;for(Ie(D,W-257,5),Ie(D,pe-1,5),Ie(D,De-4,4),ve=0;ve<De;ve++)Ie(D,D.bl_tree[H[ve]*2+1],3);Fe(D,D.dyn_ltree,W-1),Fe(D,D.dyn_dtree,pe-1)}function Nt(D){var W=4093624447,pe;for(pe=0;pe<=31;pe++,W>>>=1)if(W&1&&D.dyn_ltree[pe*2]!==0)return n;if(D.dyn_ltree[9*2]!==0||D.dyn_ltree[10*2]!==0||D.dyn_ltree[13*2]!==0)return r;for(pe=32;pe<m;pe++)if(D.dyn_ltree[pe*2]!==0)return r;return n}var it=!1;function St(D){it||(Le(),it=!0),D.l_desc=new ne(D.dyn_ltree,V),D.d_desc=new ne(D.dyn_dtree,J),D.bl_desc=new ne(D.bl_tree,Q),D.bi_buf=0,D.bi_valid=0,je(D)}function Ft(D,W,pe,De){Ie(D,(s<<1)+(De?1:0),3),Ee(D,W,pe)}function Mt(D){Ie(D,o<<1,3),ke(D,C,K),Se(D)}function Kt(D,W,pe,De){var ve,Ae,le=0;D.level>0?(D.strm.data_type===a&&(D.strm.data_type=Nt(D)),ee(D,D.l_desc),ee(D,D.d_desc),le=Ce(D),ve=D.opt_len+3+7>>>3,Ae=D.static_len+3+7>>>3,Ae<=ve&&(ve=Ae)):ve=Ae=pe+5,pe+4<=ve&&W!==-1?Ft(D,W,pe,De):D.strategy===t||Ae===ve?(Ie(D,(o<<1)+(De?1:0),3),se(D,K,q)):(Ie(D,(l<<1)+(De?1:0),3),We(D,D.l_desc.max_code+1,D.d_desc.max_code+1,le+1),se(D,D.dyn_ltree,D.dyn_dtree)),je(D),De&&z(D)}function be(D,W,pe){return D.pending_buf[D.d_buf+D.last_lit*2]=W>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=W&255,D.pending_buf[D.l_buf+D.last_lit]=pe&255,D.last_lit++,W===0?D.dyn_ltree[pe*2]++:(D.matches++,W--,D.dyn_ltree[(ae[pe]+m+1)*2]++,D.dyn_dtree[he(W)*2]++),D.last_lit===D.lit_bufsize-1}return $d._tr_init=St,$d._tr_stored_block=Ft,$d._tr_flush_block=Kt,$d._tr_tally=be,$d._tr_align=Mt,$d}var WE,C6;function A9(){if(C6)return WE;C6=1;function e(t,n,r,a){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+n[a++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}return WE=e,WE}var KE,T6;function N9(){if(T6)return KE;T6=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,s){var o=t,l=s+i;r^=-1;for(var u=s;u<l;u++)r=r>>>8^o[(r^a[u])&255];return r^-1}return KE=n,KE}var ZE,k6;function mN(){return k6||(k6=1,ZE={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),ZE}var A6;function Doe(){if(A6)return io;A6=1;var e=sd(),t=joe(),n=A9(),r=N9(),a=mN(),i=0,s=1,o=3,l=4,u=5,d=0,h=1,m=-2,g=-3,b=-5,v=-1,x=1,w=2,_=3,E=4,C=0,k=2,I=8,j=9,N=15,P=8,L=29,H=256,M=H+1+L,K=30,q=19,ue=2*M+1,ae=15,te=3,Y=258,ie=Y+te+1,V=32,J=42,Q=69,ne=73,he=91,de=103,Ie=113,ke=666,Te=1,Se=2,Pe=3,Qe=4,Le=3;function je(F,$e){return F.msg=a[$e],$e}function z(F){return(F<<1)-(F>4?9:0)}function Ee(F){for(var $e=F.length;--$e>=0;)F[$e]=0}function Ne(F){var $e=F.state,nt=$e.pending;nt>F.avail_out&&(nt=F.avail_out),nt!==0&&(e.arraySet(F.output,$e.pending_buf,$e.pending_out,nt,F.next_out),F.next_out+=nt,$e.pending_out+=nt,F.total_out+=nt,F.avail_out-=nt,$e.pending-=nt,$e.pending===0&&($e.pending_out=0))}function fe(F,$e){t._tr_flush_block(F,F.block_start>=0?F.block_start:-1,F.strstart-F.block_start,$e),F.block_start=F.strstart,Ne(F.strm)}function se(F,$e){F.pending_buf[F.pending++]=$e}function ee(F,$e){F.pending_buf[F.pending++]=$e>>>8&255,F.pending_buf[F.pending++]=$e&255}function xe(F,$e,nt,ye){var Me=F.avail_in;return Me>ye&&(Me=ye),Me===0?0:(F.avail_in-=Me,e.arraySet($e,F.input,F.next_in,Me,nt),F.state.wrap===1?F.adler=n(F.adler,$e,Me,nt):F.state.wrap===2&&(F.adler=r(F.adler,$e,Me,nt)),F.next_in+=Me,F.total_in+=Me,Me)}function Fe(F,$e){var nt=F.max_chain_length,ye=F.strstart,Me,Ke,Dt=F.prev_length,ge=F.nice_match,G=F.strstart>F.w_size-ie?F.strstart-(F.w_size-ie):0,U=F.window,Z=F.w_mask,me=F.prev,Re=F.strstart+Y,Ve=U[ye+Dt-1],pt=U[ye+Dt];F.prev_length>=F.good_match&&(nt>>=2),ge>F.lookahead&&(ge=F.lookahead);do if(Me=$e,!(U[Me+Dt]!==pt||U[Me+Dt-1]!==Ve||U[Me]!==U[ye]||U[++Me]!==U[ye+1])){ye+=2,Me++;do;while(U[++ye]===U[++Me]&&U[++ye]===U[++Me]&&U[++ye]===U[++Me]&&U[++ye]===U[++Me]&&U[++ye]===U[++Me]&&U[++ye]===U[++Me]&&U[++ye]===U[++Me]&&U[++ye]===U[++Me]&&ye<Re);if(Ke=Y-(Re-ye),ye=Re-Y,Ke>Dt){if(F.match_start=$e,Dt=Ke,Ke>=ge)break;Ve=U[ye+Dt-1],pt=U[ye+Dt]}}while(($e=me[$e&Z])>G&&--nt!==0);return Dt<=F.lookahead?Dt:F.lookahead}function Ce(F){var $e=F.w_size,nt,ye,Me,Ke,Dt;do{if(Ke=F.window_size-F.lookahead-F.strstart,F.strstart>=$e+($e-ie)){e.arraySet(F.window,F.window,$e,$e,0),F.match_start-=$e,F.strstart-=$e,F.block_start-=$e,ye=F.hash_size,nt=ye;do Me=F.head[--nt],F.head[nt]=Me>=$e?Me-$e:0;while(--ye);ye=$e,nt=ye;do Me=F.prev[--nt],F.prev[nt]=Me>=$e?Me-$e:0;while(--ye);Ke+=$e}if(F.strm.avail_in===0)break;if(ye=xe(F.strm,F.window,F.strstart+F.lookahead,Ke),F.lookahead+=ye,F.lookahead+F.insert>=te)for(Dt=F.strstart-F.insert,F.ins_h=F.window[Dt],F.ins_h=(F.ins_h<<F.hash_shift^F.window[Dt+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[Dt+te-1])&F.hash_mask,F.prev[Dt&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=Dt,Dt++,F.insert--,!(F.lookahead+F.insert<te)););}while(F.lookahead<ie&&F.strm.avail_in!==0)}function We(F,$e){var nt=65535;for(nt>F.pending_buf_size-5&&(nt=F.pending_buf_size-5);;){if(F.lookahead<=1){if(Ce(F),F.lookahead===0&&$e===i)return Te;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var ye=F.block_start+nt;if((F.strstart===0||F.strstart>=ye)&&(F.lookahead=F.strstart-ye,F.strstart=ye,fe(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-ie&&(fe(F,!1),F.strm.avail_out===0))return Te}return F.insert=0,$e===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):(F.strstart>F.block_start&&(fe(F,!1),F.strm.avail_out===0),Te)}function Nt(F,$e){for(var nt,ye;;){if(F.lookahead<ie){if(Ce(F),F.lookahead<ie&&$e===i)return Te;if(F.lookahead===0)break}if(nt=0,F.lookahead>=te&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+te-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),nt!==0&&F.strstart-nt<=F.w_size-ie&&(F.match_length=Fe(F,nt)),F.match_length>=te)if(ye=t._tr_tally(F,F.strstart-F.match_start,F.match_length-te),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=te){F.match_length--;do F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+te-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart;while(--F.match_length!==0);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else ye=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(ye&&(fe(F,!1),F.strm.avail_out===0))return Te}return F.insert=F.strstart<te-1?F.strstart:te-1,$e===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?Te:Se}function it(F,$e){for(var nt,ye,Me;;){if(F.lookahead<ie){if(Ce(F),F.lookahead<ie&&$e===i)return Te;if(F.lookahead===0)break}if(nt=0,F.lookahead>=te&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+te-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=te-1,nt!==0&&F.prev_length<F.max_lazy_match&&F.strstart-nt<=F.w_size-ie&&(F.match_length=Fe(F,nt),F.match_length<=5&&(F.strategy===x||F.match_length===te&&F.strstart-F.match_start>4096)&&(F.match_length=te-1)),F.prev_length>=te&&F.match_length<=F.prev_length){Me=F.strstart+F.lookahead-te,ye=t._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-te),F.lookahead-=F.prev_length-1,F.prev_length-=2;do++F.strstart<=Me&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+te-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart);while(--F.prev_length!==0);if(F.match_available=0,F.match_length=te-1,F.strstart++,ye&&(fe(F,!1),F.strm.avail_out===0))return Te}else if(F.match_available){if(ye=t._tr_tally(F,0,F.window[F.strstart-1]),ye&&fe(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return Te}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(ye=t._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<te-1?F.strstart:te-1,$e===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?Te:Se}function St(F,$e){for(var nt,ye,Me,Ke,Dt=F.window;;){if(F.lookahead<=Y){if(Ce(F),F.lookahead<=Y&&$e===i)return Te;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=te&&F.strstart>0&&(Me=F.strstart-1,ye=Dt[Me],ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me])){Ke=F.strstart+Y;do;while(ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&Me<Ke);F.match_length=Y-(Ke-Me),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=te?(nt=t._tr_tally(F,1,F.match_length-te),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(nt=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),nt&&(fe(F,!1),F.strm.avail_out===0))return Te}return F.insert=0,$e===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?Te:Se}function Ft(F,$e){for(var nt;;){if(F.lookahead===0&&(Ce(F),F.lookahead===0)){if($e===i)return Te;break}if(F.match_length=0,nt=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,nt&&(fe(F,!1),F.strm.avail_out===0))return Te}return F.insert=0,$e===l?(fe(F,!0),F.strm.avail_out===0?Pe:Qe):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?Te:Se}function Mt(F,$e,nt,ye,Me){this.good_length=F,this.max_lazy=$e,this.nice_length=nt,this.max_chain=ye,this.func=Me}var Kt;Kt=[new Mt(0,0,0,0,We),new Mt(4,4,8,4,Nt),new Mt(4,5,16,8,Nt),new Mt(4,6,32,32,Nt),new Mt(4,4,16,16,it),new Mt(8,16,32,32,it),new Mt(8,16,128,128,it),new Mt(8,32,128,256,it),new Mt(32,128,258,1024,it),new Mt(32,258,258,4096,it)];function be(F){F.window_size=2*F.w_size,Ee(F.head),F.max_lazy_match=Kt[F.level].max_lazy,F.good_match=Kt[F.level].good_length,F.nice_match=Kt[F.level].nice_length,F.max_chain_length=Kt[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=te-1,F.match_available=0,F.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(ue*2),this.dyn_dtree=new e.Buf16((2*K+1)*2),this.bl_tree=new e.Buf16((2*q+1)*2),Ee(this.dyn_ltree),Ee(this.dyn_dtree),Ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*M+1),Ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*M+1),Ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(F){var $e;return!F||!F.state?je(F,m):(F.total_in=F.total_out=0,F.data_type=k,$e=F.state,$e.pending=0,$e.pending_out=0,$e.wrap<0&&($e.wrap=-$e.wrap),$e.status=$e.wrap?J:Ie,F.adler=$e.wrap===2?0:1,$e.last_flush=i,t._tr_init($e),d)}function pe(F){var $e=W(F);return $e===d&&be(F.state),$e}function De(F,$e){return!F||!F.state||F.state.wrap!==2?m:(F.state.gzhead=$e,d)}function ve(F,$e,nt,ye,Me,Ke){if(!F)return m;var Dt=1;if($e===v&&($e=6),ye<0?(Dt=0,ye=-ye):ye>15&&(Dt=2,ye-=16),Me<1||Me>j||nt!==I||ye<8||ye>15||$e<0||$e>9||Ke<0||Ke>E)return je(F,m);ye===8&&(ye=9);var ge=new D;return F.state=ge,ge.strm=F,ge.wrap=Dt,ge.gzhead=null,ge.w_bits=ye,ge.w_size=1<<ge.w_bits,ge.w_mask=ge.w_size-1,ge.hash_bits=Me+7,ge.hash_size=1<<ge.hash_bits,ge.hash_mask=ge.hash_size-1,ge.hash_shift=~~((ge.hash_bits+te-1)/te),ge.window=new e.Buf8(ge.w_size*2),ge.head=new e.Buf16(ge.hash_size),ge.prev=new e.Buf16(ge.w_size),ge.lit_bufsize=1<<Me+6,ge.pending_buf_size=ge.lit_bufsize*4,ge.pending_buf=new e.Buf8(ge.pending_buf_size),ge.d_buf=1*ge.lit_bufsize,ge.l_buf=3*ge.lit_bufsize,ge.level=$e,ge.strategy=Ke,ge.method=nt,pe(F)}function Ae(F,$e){return ve(F,$e,I,N,P,C)}function le(F,$e){var nt,ye,Me,Ke;if(!F||!F.state||$e>u||$e<0)return F?je(F,m):m;if(ye=F.state,!F.output||!F.input&&F.avail_in!==0||ye.status===ke&&$e!==l)return je(F,F.avail_out===0?b:m);if(ye.strm=F,nt=ye.last_flush,ye.last_flush=$e,ye.status===J)if(ye.wrap===2)F.adler=0,se(ye,31),se(ye,139),se(ye,8),ye.gzhead?(se(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),se(ye,ye.gzhead.time&255),se(ye,ye.gzhead.time>>8&255),se(ye,ye.gzhead.time>>16&255),se(ye,ye.gzhead.time>>24&255),se(ye,ye.level===9?2:ye.strategy>=w||ye.level<2?4:0),se(ye,ye.gzhead.os&255),ye.gzhead.extra&&ye.gzhead.extra.length&&(se(ye,ye.gzhead.extra.length&255),se(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&(F.adler=r(F.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=Q):(se(ye,0),se(ye,0),se(ye,0),se(ye,0),se(ye,0),se(ye,ye.level===9?2:ye.strategy>=w||ye.level<2?4:0),se(ye,Le),ye.status=Ie);else{var Dt=I+(ye.w_bits-8<<4)<<8,ge=-1;ye.strategy>=w||ye.level<2?ge=0:ye.level<6?ge=1:ye.level===6?ge=2:ge=3,Dt|=ge<<6,ye.strstart!==0&&(Dt|=V),Dt+=31-Dt%31,ye.status=Ie,ee(ye,Dt),ye.strstart!==0&&(ee(ye,F.adler>>>16),ee(ye,F.adler&65535)),F.adler=1}if(ye.status===Q)if(ye.gzhead.extra){for(Me=ye.pending;ye.gzindex<(ye.gzhead.extra.length&65535)&&!(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ne(F),Me=ye.pending,ye.pending===ye.pending_buf_size));)se(ye,ye.gzhead.extra[ye.gzindex]&255),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=ne)}else ye.status=ne;if(ye.status===ne)if(ye.gzhead.name){Me=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ne(F),Me=ye.pending,ye.pending===ye.pending_buf_size)){Ke=1;break}ye.gzindex<ye.gzhead.name.length?Ke=ye.gzhead.name.charCodeAt(ye.gzindex++)&255:Ke=0,se(ye,Ke)}while(Ke!==0);ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ke===0&&(ye.gzindex=0,ye.status=he)}else ye.status=he;if(ye.status===he)if(ye.gzhead.comment){Me=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ne(F),Me=ye.pending,ye.pending===ye.pending_buf_size)){Ke=1;break}ye.gzindex<ye.gzhead.comment.length?Ke=ye.gzhead.comment.charCodeAt(ye.gzindex++)&255:Ke=0,se(ye,Ke)}while(Ke!==0);ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ke===0&&(ye.status=de)}else ye.status=de;if(ye.status===de&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&Ne(F),ye.pending+2<=ye.pending_buf_size&&(se(ye,F.adler&255),se(ye,F.adler>>8&255),F.adler=0,ye.status=Ie)):ye.status=Ie),ye.pending!==0){if(Ne(F),F.avail_out===0)return ye.last_flush=-1,d}else if(F.avail_in===0&&z($e)<=z(nt)&&$e!==l)return je(F,b);if(ye.status===ke&&F.avail_in!==0)return je(F,b);if(F.avail_in!==0||ye.lookahead!==0||$e!==i&&ye.status!==ke){var G=ye.strategy===w?Ft(ye,$e):ye.strategy===_?St(ye,$e):Kt[ye.level].func(ye,$e);if((G===Pe||G===Qe)&&(ye.status=ke),G===Te||G===Pe)return F.avail_out===0&&(ye.last_flush=-1),d;if(G===Se&&($e===s?t._tr_align(ye):$e!==u&&(t._tr_stored_block(ye,0,0,!1),$e===o&&(Ee(ye.head),ye.lookahead===0&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),Ne(F),F.avail_out===0))return ye.last_flush=-1,d}return $e!==l?d:ye.wrap<=0?h:(ye.wrap===2?(se(ye,F.adler&255),se(ye,F.adler>>8&255),se(ye,F.adler>>16&255),se(ye,F.adler>>24&255),se(ye,F.total_in&255),se(ye,F.total_in>>8&255),se(ye,F.total_in>>16&255),se(ye,F.total_in>>24&255)):(ee(ye,F.adler>>>16),ee(ye,F.adler&65535)),Ne(F),ye.wrap>0&&(ye.wrap=-ye.wrap),ye.pending!==0?d:h)}function ft(F){var $e;return!F||!F.state?m:($e=F.state.status,$e!==J&&$e!==Q&&$e!==ne&&$e!==he&&$e!==de&&$e!==Ie&&$e!==ke?je(F,m):(F.state=null,$e===Ie?je(F,g):d))}function vt(F,$e){var nt=$e.length,ye,Me,Ke,Dt,ge,G,U,Z;if(!F||!F.state||(ye=F.state,Dt=ye.wrap,Dt===2||Dt===1&&ye.status!==J||ye.lookahead))return m;for(Dt===1&&(F.adler=n(F.adler,$e,nt,0)),ye.wrap=0,nt>=ye.w_size&&(Dt===0&&(Ee(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),Z=new e.Buf8(ye.w_size),e.arraySet(Z,$e,nt-ye.w_size,ye.w_size,0),$e=Z,nt=ye.w_size),ge=F.avail_in,G=F.next_in,U=F.input,F.avail_in=nt,F.next_in=0,F.input=$e,Ce(ye);ye.lookahead>=te;){Me=ye.strstart,Ke=ye.lookahead-(te-1);do ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[Me+te-1])&ye.hash_mask,ye.prev[Me&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=Me,Me++;while(--Ke);ye.strstart=Me,ye.lookahead=te-1,Ce(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=te-1,ye.match_available=0,F.next_in=G,F.input=U,F.avail_in=ge,ye.wrap=Dt,d}return io.deflateInit=Ae,io.deflateInit2=ve,io.deflateReset=pe,io.deflateResetKeep=W,io.deflateSetHeader=De,io.deflate=le,io.deflateEnd=ft,io.deflateSetDictionary=vt,io.deflateInfo="pako deflate (from Nodeca project)",io}var zd={},N6;function R9(){if(N6)return zd;N6=1;var e=sd(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,zd.string2buf=function(s){var o,l,u,d,h,m=s.length,g=0;for(d=0;d<m;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),g+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(g),h=0,d=0;h<g;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),l<128?o[h++]=l:l<2048?(o[h++]=192|l>>>6,o[h++]=128|l&63):l<65536?(o[h++]=224|l>>>12,o[h++]=128|l>>>6&63,o[h++]=128|l&63):(o[h++]=240|l>>>18,o[h++]=128|l>>>12&63,o[h++]=128|l>>>6&63,o[h++]=128|l&63);return o};function i(s,o){if(o<65534&&(s.subarray&&n||!s.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(s,o));for(var l="",u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l}return zd.buf2binstring=function(s){return i(s,s.length)},zd.binstring2buf=function(s){for(var o=new e.Buf8(s.length),l=0,u=o.length;l<u;l++)o[l]=s.charCodeAt(l);return o},zd.buf2string=function(s,o){var l,u,d,h,m=o||s.length,g=new Array(m*2);for(u=0,l=0;l<m;){if(d=s[l++],d<128){g[u++]=d;continue}if(h=r[d],h>4){g[u++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<m;)d=d<<6|s[l++]&63,h--;if(h>1){g[u++]=65533;continue}d<65536?g[u++]=d:(d-=65536,g[u++]=55296|d>>10&1023,g[u++]=56320|d&1023)}return i(g,u)},zd.utf8border=function(s,o){var l;for(o=o||s.length,o>s.length&&(o=s.length),l=o-1;l>=0&&(s[l]&192)===128;)l--;return l<0||l===0?o:l+r[s[l]]>o?l:o},zd}var YE,R6;function I9(){if(R6)return YE;R6=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return YE=e,YE}var I6;function Moe(){if(I6)return Dh;I6=1;var e=Doe(),t=sd(),n=R9(),r=mN(),a=I9(),i=Object.prototype.toString,s=0,o=4,l=0,u=1,d=2,h=-1,m=0,g=8;function b(_){if(!(this instanceof b))return new b(_);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},_||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==l)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==l)throw new Error(r[C]);this._dict_set=!0}}b.prototype.push=function(_,E){var C=this.strm,k=this.options.chunkSize,I,j;if(this.ended)return!1;j=E===~~E?E:E===!0?o:s,typeof _=="string"?C.input=n.string2buf(_):i.call(_)==="[object ArrayBuffer]"?C.input=new Uint8Array(_):C.input=_,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),I=e.deflate(C,j),I!==u&&I!==l)return this.onEnd(I),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(j===o||j===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&I!==u);return j===o?(I=e.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===l):(j===d&&(this.onEnd(l),C.avail_out=0),!0)},b.prototype.onData=function(_){this.chunks.push(_)},b.prototype.onEnd=function(_){_===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function v(_,E){var C=new b(E);if(C.push(_,!0),C.err)throw C.msg||r[C.err];return C.result}function x(_,E){return E=E||{},E.raw=!0,v(_,E)}function w(_,E){return E=E||{},E.gzip=!0,v(_,E)}return Dh.Deflate=b,Dh.deflate=v,Dh.deflateRaw=x,Dh.gzip=w,Dh}var Mh={},Ms={},XE,j6;function Ooe(){if(j6)return XE;j6=1;var e=30,t=12;return XE=function(r,a){var i,s,o,l,u,d,h,m,g,b,v,x,w,_,E,C,k,I,j,N,P,L,H,M,K;i=r.state,s=r.next_in,M=r.input,o=s+(r.avail_in-5),l=r.next_out,K=r.output,u=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,b=i.wnext,v=i.window,x=i.hold,w=i.bits,_=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{w<15&&(x+=M[s++]<<w,w+=8,x+=M[s++]<<w,w+=8),I=_[x&C];t:for(;;){if(j=I>>>24,x>>>=j,w-=j,j=I>>>16&255,j===0)K[l++]=I&65535;else if(j&16){N=I&65535,j&=15,j&&(w<j&&(x+=M[s++]<<w,w+=8),N+=x&(1<<j)-1,x>>>=j,w-=j),w<15&&(x+=M[s++]<<w,w+=8,x+=M[s++]<<w,w+=8),I=E[x&k];n:for(;;){if(j=I>>>24,x>>>=j,w-=j,j=I>>>16&255,j&16){if(P=I&65535,j&=15,w<j&&(x+=M[s++]<<w,w+=8,w<j&&(x+=M[s++]<<w,w+=8)),P+=x&(1<<j)-1,P>h){r.msg="invalid distance too far back",i.mode=e;break e}if(x>>>=j,w-=j,j=l-u,P>j){if(j=P-j,j>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(L=0,H=v,b===0){if(L+=m-j,j<N){N-=j;do K[l++]=v[L++];while(--j);L=l-P,H=K}}else if(b<j){if(L+=m+b-j,j-=b,j<N){N-=j;do K[l++]=v[L++];while(--j);if(L=0,b<N){j=b,N-=j;do K[l++]=v[L++];while(--j);L=l-P,H=K}}}else if(L+=b-j,j<N){N-=j;do K[l++]=v[L++];while(--j);L=l-P,H=K}for(;N>2;)K[l++]=H[L++],K[l++]=H[L++],K[l++]=H[L++],N-=3;N&&(K[l++]=H[L++],N>1&&(K[l++]=H[L++]))}else{L=l-P;do K[l++]=K[L++],K[l++]=K[L++],K[l++]=K[L++],N-=3;while(N>2);N&&(K[l++]=K[L++],N>1&&(K[l++]=K[L++]))}}else if((j&64)===0){I=E[(I&65535)+(x&(1<<j)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((j&64)===0){I=_[(I&65535)+(x&(1<<j)-1)];continue t}else if(j&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(s<o&&l<d);N=w>>3,s-=N,w-=N<<3,x&=(1<<w)-1,r.next_in=s,r.next_out=l,r.avail_in=s<o?5+(o-s):5-(s-o),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=x,i.bits=w},XE}var JE,D6;function Poe(){if(D6)return JE;D6=1;var e=sd(),t=15,n=852,r=592,a=0,i=1,s=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return JE=function(m,g,b,v,x,w,_,E){var C=E.bits,k=0,I=0,j=0,N=0,P=0,L=0,H=0,M=0,K=0,q=0,ue,ae,te,Y,ie,V=null,J=0,Q,ne=new e.Buf16(t+1),he=new e.Buf16(t+1),de=null,Ie=0,ke,Te,Se;for(k=0;k<=t;k++)ne[k]=0;for(I=0;I<v;I++)ne[g[b+I]]++;for(P=C,N=t;N>=1&&ne[N]===0;N--);if(P>N&&(P=N),N===0)return x[w++]=1<<24|64<<16|0,x[w++]=1<<24|64<<16|0,E.bits=1,0;for(j=1;j<N&&ne[j]===0;j++);for(P<j&&(P=j),M=1,k=1;k<=t;k++)if(M<<=1,M-=ne[k],M<0)return-1;if(M>0&&(m===a||N!==1))return-1;for(he[1]=0,k=1;k<t;k++)he[k+1]=he[k]+ne[k];for(I=0;I<v;I++)g[b+I]!==0&&(_[he[g[b+I]]++]=I);if(m===a?(V=de=_,Q=19):m===i?(V=o,J-=257,de=l,Ie-=257,Q=256):(V=u,de=d,Q=-1),q=0,I=0,k=j,ie=w,L=P,H=0,te=-1,K=1<<P,Y=K-1,m===i&&K>n||m===s&&K>r)return 1;for(;;){ke=k-H,_[I]<Q?(Te=0,Se=_[I]):_[I]>Q?(Te=de[Ie+_[I]],Se=V[J+_[I]]):(Te=96,Se=0),ue=1<<k-H,ae=1<<L,j=ae;do ae-=ue,x[ie+(q>>H)+ae]=ke<<24|Te<<16|Se|0;while(ae!==0);for(ue=1<<k-1;q&ue;)ue>>=1;if(ue!==0?(q&=ue-1,q+=ue):q=0,I++,--ne[k]===0){if(k===N)break;k=g[b+_[I]]}if(k>P&&(q&Y)!==te){for(H===0&&(H=P),ie+=j,L=k-H,M=1<<L;L+H<N&&(M-=ne[L+H],!(M<=0));)L++,M<<=1;if(K+=1<<L,m===i&&K>n||m===s&&K>r)return 1;te=q&Y,x[te]=P<<24|L<<16|ie-w|0}}return q!==0&&(x[ie+q]=k-H<<24|64<<16|0),E.bits=P,0},JE}var M6;function Foe(){if(M6)return Ms;M6=1;var e=sd(),t=A9(),n=N9(),r=Ooe(),a=Poe(),i=0,s=1,o=2,l=4,u=5,d=6,h=0,m=1,g=2,b=-2,v=-3,x=-4,w=-5,_=8,E=1,C=2,k=3,I=4,j=5,N=6,P=7,L=8,H=9,M=10,K=11,q=12,ue=13,ae=14,te=15,Y=16,ie=17,V=18,J=19,Q=20,ne=21,he=22,de=23,Ie=24,ke=25,Te=26,Se=27,Pe=28,Qe=29,Le=30,je=31,z=32,Ee=852,Ne=592,fe=15,se=fe;function ee(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Fe(ve){var Ae;return!ve||!ve.state?b:(Ae=ve.state,ve.total_in=ve.total_out=Ae.total=0,ve.msg="",Ae.wrap&&(ve.adler=Ae.wrap&1),Ae.mode=E,Ae.last=0,Ae.havedict=0,Ae.dmax=32768,Ae.head=null,Ae.hold=0,Ae.bits=0,Ae.lencode=Ae.lendyn=new e.Buf32(Ee),Ae.distcode=Ae.distdyn=new e.Buf32(Ne),Ae.sane=1,Ae.back=-1,h)}function Ce(ve){var Ae;return!ve||!ve.state?b:(Ae=ve.state,Ae.wsize=0,Ae.whave=0,Ae.wnext=0,Fe(ve))}function We(ve,Ae){var le,ft;return!ve||!ve.state||(ft=ve.state,Ae<0?(le=0,Ae=-Ae):(le=(Ae>>4)+1,Ae<48&&(Ae&=15)),Ae&&(Ae<8||Ae>15))?b:(ft.window!==null&&ft.wbits!==Ae&&(ft.window=null),ft.wrap=le,ft.wbits=Ae,Ce(ve))}function Nt(ve,Ae){var le,ft;return ve?(ft=new xe,ve.state=ft,ft.window=null,le=We(ve,Ae),le!==h&&(ve.state=null),le):b}function it(ve){return Nt(ve,se)}var St=!0,Ft,Mt;function Kt(ve){if(St){var Ae;for(Ft=new e.Buf32(512),Mt=new e.Buf32(32),Ae=0;Ae<144;)ve.lens[Ae++]=8;for(;Ae<256;)ve.lens[Ae++]=9;for(;Ae<280;)ve.lens[Ae++]=7;for(;Ae<288;)ve.lens[Ae++]=8;for(a(s,ve.lens,0,288,Ft,0,ve.work,{bits:9}),Ae=0;Ae<32;)ve.lens[Ae++]=5;a(o,ve.lens,0,32,Mt,0,ve.work,{bits:5}),St=!1}ve.lencode=Ft,ve.lenbits=9,ve.distcode=Mt,ve.distbits=5}function be(ve,Ae,le,ft){var vt,F=ve.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new e.Buf8(F.wsize)),ft>=F.wsize?(e.arraySet(F.window,Ae,le-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(vt=F.wsize-F.wnext,vt>ft&&(vt=ft),e.arraySet(F.window,Ae,le-ft,vt,F.wnext),ft-=vt,ft?(e.arraySet(F.window,Ae,le-ft,ft,0),F.wnext=ft,F.whave=F.wsize):(F.wnext+=vt,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=vt))),0}function D(ve,Ae){var le,ft,vt,F,$e,nt,ye,Me,Ke,Dt,ge,G,U,Z,me=0,Re,Ve,pt,Wt,ut,Rt,Lt,en,Nn=new e.Buf8(4),Xn,Sr,Er=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return b;le=ve.state,le.mode===q&&(le.mode=ue),$e=ve.next_out,vt=ve.output,ye=ve.avail_out,F=ve.next_in,ft=ve.input,nt=ve.avail_in,Me=le.hold,Ke=le.bits,Dt=nt,ge=ye,en=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=ue;break}for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(le.wrap&2&&Me===35615){le.check=0,Nn[0]=Me&255,Nn[1]=Me>>>8&255,le.check=n(le.check,Nn,2,0),Me=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((Me&255)<<8)+(Me>>8))%31){ve.msg="incorrect header check",le.mode=Le;break}if((Me&15)!==_){ve.msg="unknown compression method",le.mode=Le;break}if(Me>>>=4,Ke-=4,Lt=(Me&15)+8,le.wbits===0)le.wbits=Lt;else if(Lt>le.wbits){ve.msg="invalid window size",le.mode=Le;break}le.dmax=1<<Lt,ve.adler=le.check=1,le.mode=Me&512?M:q,Me=0,Ke=0;break;case C:for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(le.flags=Me,(le.flags&255)!==_){ve.msg="unknown compression method",le.mode=Le;break}if(le.flags&57344){ve.msg="unknown header flags set",le.mode=Le;break}le.head&&(le.head.text=Me>>8&1),le.flags&512&&(Nn[0]=Me&255,Nn[1]=Me>>>8&255,le.check=n(le.check,Nn,2,0)),Me=0,Ke=0,le.mode=k;case k:for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.head&&(le.head.time=Me),le.flags&512&&(Nn[0]=Me&255,Nn[1]=Me>>>8&255,Nn[2]=Me>>>16&255,Nn[3]=Me>>>24&255,le.check=n(le.check,Nn,4,0)),Me=0,Ke=0,le.mode=I;case I:for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.head&&(le.head.xflags=Me&255,le.head.os=Me>>8),le.flags&512&&(Nn[0]=Me&255,Nn[1]=Me>>>8&255,le.check=n(le.check,Nn,2,0)),Me=0,Ke=0,le.mode=j;case j:if(le.flags&1024){for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.length=Me,le.head&&(le.head.extra_len=Me),le.flags&512&&(Nn[0]=Me&255,Nn[1]=Me>>>8&255,le.check=n(le.check,Nn,2,0)),Me=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=N;case N:if(le.flags&1024&&(G=le.length,G>nt&&(G=nt),G&&(le.head&&(Lt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ft,F,G,Lt)),le.flags&512&&(le.check=n(le.check,ft,G,F)),nt-=G,F+=G,le.length-=G),le.length))break e;le.length=0,le.mode=P;case P:if(le.flags&2048){if(nt===0)break e;G=0;do Lt=ft[F+G++],le.head&&Lt&&le.length<65536&&(le.head.name+=String.fromCharCode(Lt));while(Lt&&G<nt);if(le.flags&512&&(le.check=n(le.check,ft,G,F)),nt-=G,F+=G,Lt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=L;case L:if(le.flags&4096){if(nt===0)break e;G=0;do Lt=ft[F+G++],le.head&&Lt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Lt));while(Lt&&G<nt);if(le.flags&512&&(le.check=n(le.check,ft,G,F)),nt-=G,F+=G,Lt)break e}else le.head&&(le.head.comment=null);le.mode=H;case H:if(le.flags&512){for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me!==(le.check&65535)){ve.msg="header crc mismatch",le.mode=Le;break}Me=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),ve.adler=le.check=0,le.mode=q;break;case M:for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}ve.adler=le.check=ee(Me),Me=0,Ke=0,le.mode=K;case K:if(le.havedict===0)return ve.next_out=$e,ve.avail_out=ye,ve.next_in=F,ve.avail_in=nt,le.hold=Me,le.bits=Ke,g;ve.adler=le.check=1,le.mode=q;case q:if(Ae===u||Ae===d)break e;case ue:if(le.last){Me>>>=Ke&7,Ke-=Ke&7,le.mode=Se;break}for(;Ke<3;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}switch(le.last=Me&1,Me>>>=1,Ke-=1,Me&3){case 0:le.mode=ae;break;case 1:if(Kt(le),le.mode=Q,Ae===d){Me>>>=2,Ke-=2;break e}break;case 2:le.mode=ie;break;case 3:ve.msg="invalid block type",le.mode=Le}Me>>>=2,Ke-=2;break;case ae:for(Me>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if((Me&65535)!==(Me>>>16^65535)){ve.msg="invalid stored block lengths",le.mode=Le;break}if(le.length=Me&65535,Me=0,Ke=0,le.mode=te,Ae===d)break e;case te:le.mode=Y;case Y:if(G=le.length,G){if(G>nt&&(G=nt),G>ye&&(G=ye),G===0)break e;e.arraySet(vt,ft,F,G,$e),nt-=G,F+=G,ye-=G,$e+=G,le.length-=G;break}le.mode=q;break;case ie:for(;Ke<14;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(le.nlen=(Me&31)+257,Me>>>=5,Ke-=5,le.ndist=(Me&31)+1,Me>>>=5,Ke-=5,le.ncode=(Me&15)+4,Me>>>=4,Ke-=4,le.nlen>286||le.ndist>30){ve.msg="too many length or distance symbols",le.mode=Le;break}le.have=0,le.mode=V;case V:for(;le.have<le.ncode;){for(;Ke<3;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.lens[Er[le.have++]]=Me&7,Me>>>=3,Ke-=3}for(;le.have<19;)le.lens[Er[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,Xn={bits:le.lenbits},en=a(i,le.lens,0,19,le.lencode,0,le.work,Xn),le.lenbits=Xn.bits,en){ve.msg="invalid code lengths set",le.mode=Le;break}le.have=0,le.mode=J;case J:for(;le.have<le.nlen+le.ndist;){for(;me=le.lencode[Me&(1<<le.lenbits)-1],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(pt<16)Me>>>=Re,Ke-=Re,le.lens[le.have++]=pt;else{if(pt===16){for(Sr=Re+2;Ke<Sr;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me>>>=Re,Ke-=Re,le.have===0){ve.msg="invalid bit length repeat",le.mode=Le;break}Lt=le.lens[le.have-1],G=3+(Me&3),Me>>>=2,Ke-=2}else if(pt===17){for(Sr=Re+3;Ke<Sr;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Re,Ke-=Re,Lt=0,G=3+(Me&7),Me>>>=3,Ke-=3}else{for(Sr=Re+7;Ke<Sr;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Re,Ke-=Re,Lt=0,G=11+(Me&127),Me>>>=7,Ke-=7}if(le.have+G>le.nlen+le.ndist){ve.msg="invalid bit length repeat",le.mode=Le;break}for(;G--;)le.lens[le.have++]=Lt}}if(le.mode===Le)break;if(le.lens[256]===0){ve.msg="invalid code -- missing end-of-block",le.mode=Le;break}if(le.lenbits=9,Xn={bits:le.lenbits},en=a(s,le.lens,0,le.nlen,le.lencode,0,le.work,Xn),le.lenbits=Xn.bits,en){ve.msg="invalid literal/lengths set",le.mode=Le;break}if(le.distbits=6,le.distcode=le.distdyn,Xn={bits:le.distbits},en=a(o,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,Xn),le.distbits=Xn.bits,en){ve.msg="invalid distances set",le.mode=Le;break}if(le.mode=Q,Ae===d)break e;case Q:le.mode=ne;case ne:if(nt>=6&&ye>=258){ve.next_out=$e,ve.avail_out=ye,ve.next_in=F,ve.avail_in=nt,le.hold=Me,le.bits=Ke,r(ve,ge),$e=ve.next_out,vt=ve.output,ye=ve.avail_out,F=ve.next_in,ft=ve.input,nt=ve.avail_in,Me=le.hold,Ke=le.bits,le.mode===q&&(le.back=-1);break}for(le.back=0;me=le.lencode[Me&(1<<le.lenbits)-1],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(Ve&&(Ve&240)===0){for(Wt=Re,ut=Ve,Rt=pt;me=le.lencode[Rt+((Me&(1<<Wt+ut)-1)>>Wt)],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Wt+Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Wt,Ke-=Wt,le.back+=Wt}if(Me>>>=Re,Ke-=Re,le.back+=Re,le.length=pt,Ve===0){le.mode=Te;break}if(Ve&32){le.back=-1,le.mode=q;break}if(Ve&64){ve.msg="invalid literal/length code",le.mode=Le;break}le.extra=Ve&15,le.mode=he;case he:if(le.extra){for(Sr=le.extra;Ke<Sr;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.length+=Me&(1<<le.extra)-1,Me>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=de;case de:for(;me=le.distcode[Me&(1<<le.distbits)-1],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if((Ve&240)===0){for(Wt=Re,ut=Ve,Rt=pt;me=le.distcode[Rt+((Me&(1<<Wt+ut)-1)>>Wt)],Re=me>>>24,Ve=me>>>16&255,pt=me&65535,!(Wt+Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Wt,Ke-=Wt,le.back+=Wt}if(Me>>>=Re,Ke-=Re,le.back+=Re,Ve&64){ve.msg="invalid distance code",le.mode=Le;break}le.offset=pt,le.extra=Ve&15,le.mode=Ie;case Ie:if(le.extra){for(Sr=le.extra;Ke<Sr;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}le.offset+=Me&(1<<le.extra)-1,Me>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){ve.msg="invalid distance too far back",le.mode=Le;break}le.mode=ke;case ke:if(ye===0)break e;if(G=ge-ye,le.offset>G){if(G=le.offset-G,G>le.whave&&le.sane){ve.msg="invalid distance too far back",le.mode=Le;break}G>le.wnext?(G-=le.wnext,U=le.wsize-G):U=le.wnext-G,G>le.length&&(G=le.length),Z=le.window}else Z=vt,U=$e-le.offset,G=le.length;G>ye&&(G=ye),ye-=G,le.length-=G;do vt[$e++]=Z[U++];while(--G);le.length===0&&(le.mode=ne);break;case Te:if(ye===0)break e;vt[$e++]=le.length,ye--,le.mode=ne;break;case Se:if(le.wrap){for(;Ke<32;){if(nt===0)break e;nt--,Me|=ft[F++]<<Ke,Ke+=8}if(ge-=ye,ve.total_out+=ge,le.total+=ge,ge&&(ve.adler=le.check=le.flags?n(le.check,vt,ge,$e-ge):t(le.check,vt,ge,$e-ge)),ge=ye,(le.flags?Me:ee(Me))!==le.check){ve.msg="incorrect data check",le.mode=Le;break}Me=0,Ke=0}le.mode=Pe;case Pe:if(le.wrap&&le.flags){for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me!==(le.total&4294967295)){ve.msg="incorrect length check",le.mode=Le;break}Me=0,Ke=0}le.mode=Qe;case Qe:en=m;break e;case Le:en=v;break e;case je:return x;case z:default:return b}return ve.next_out=$e,ve.avail_out=ye,ve.next_in=F,ve.avail_in=nt,le.hold=Me,le.bits=Ke,(le.wsize||ge!==ve.avail_out&&le.mode<Le&&(le.mode<Se||Ae!==l))&&be(ve,ve.output,ve.next_out,ge-ve.avail_out),Dt-=ve.avail_in,ge-=ve.avail_out,ve.total_in+=Dt,ve.total_out+=ge,le.total+=ge,le.wrap&&ge&&(ve.adler=le.check=le.flags?n(le.check,vt,ge,ve.next_out-ge):t(le.check,vt,ge,ve.next_out-ge)),ve.data_type=le.bits+(le.last?64:0)+(le.mode===q?128:0)+(le.mode===Q||le.mode===te?256:0),(Dt===0&&ge===0||Ae===l)&&en===h&&(en=w),en}function W(ve){if(!ve||!ve.state)return b;var Ae=ve.state;return Ae.window&&(Ae.window=null),ve.state=null,h}function pe(ve,Ae){var le;return!ve||!ve.state||(le=ve.state,(le.wrap&2)===0)?b:(le.head=Ae,Ae.done=!1,h)}function De(ve,Ae){var le=Ae.length,ft,vt,F;return!ve||!ve.state||(ft=ve.state,ft.wrap!==0&&ft.mode!==K)?b:ft.mode===K&&(vt=1,vt=t(vt,Ae,le,0),vt!==ft.check)?v:(F=be(ve,Ae,le,le),F?(ft.mode=je,x):(ft.havedict=1,h))}return Ms.inflateReset=Ce,Ms.inflateReset2=We,Ms.inflateResetKeep=Fe,Ms.inflateInit=it,Ms.inflateInit2=Nt,Ms.inflate=D,Ms.inflateEnd=W,Ms.inflateGetHeader=pe,Ms.inflateSetDictionary=De,Ms.inflateInfo="pako inflate (from Nodeca project)",Ms}var QE,O6;function j9(){return O6||(O6=1,QE={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),QE}var eC,P6;function Loe(){if(P6)return eC;P6=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return eC=e,eC}var F6;function Boe(){if(F6)return Mh;F6=1;var e=Foe(),t=sd(),n=R9(),r=j9(),a=mN(),i=I9(),s=Loe(),o=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new s,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):o.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(a[g])}l.prototype.push=function(h,m){var g=this.strm,b=this.options.chunkSize,v=this.options.dictionary,x,w,_,E,C,k=!1;if(this.ended)return!1;w=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(b),g.next_out=0,g.avail_out=b),x=e.inflate(g,r.Z_NO_FLUSH),x===r.Z_NEED_DICT&&v&&(x=e.inflateSetDictionary(this.strm,v)),x===r.Z_BUF_ERROR&&k===!0&&(x=r.Z_OK,k=!1),x!==r.Z_STREAM_END&&x!==r.Z_OK)return this.onEnd(x),this.ended=!0,!1;g.next_out&&(g.avail_out===0||x===r.Z_STREAM_END||g.avail_in===0&&(w===r.Z_FINISH||w===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(_=n.utf8border(g.output,g.next_out),E=g.next_out-_,C=n.buf2string(g.output,_),g.next_out=E,g.avail_out=b-E,E&&t.arraySet(g.output,g.output,_,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&x!==r.Z_STREAM_END);return x===r.Z_STREAM_END&&(w=r.Z_FINISH),w===r.Z_FINISH?(x=e.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===r.Z_OK):(w===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function u(h,m){var g=new l(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function d(h,m){return m=m||{},m.raw=!0,u(h,m)}return Mh.Inflate=l,Mh.inflate=u,Mh.inflateRaw=d,Mh.ungzip=u,Mh}var tC,L6;function $oe(){if(L6)return tC;L6=1;var e=sd().assign,t=Moe(),n=Boe(),r=j9(),a={};return e(a,t,n,r),tC=a,tC}var zoe=$oe();const gN=bi(zoe);var nC,B6;function Uoe(){if(B6)return nC;B6=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,s)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):n.errorFirst?r.push((o,l)=>{o?s(o):i(l)}):r.push(i),t.apply(this,r)})};return nC=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=s=>{const o=l=>typeof l=="string"?s===l:l.test(s);return n.include?n.include.some(o):!n.exclude.some(o)};let i;r==="function"?i=function(...s){return n.excludeMain?t(...s):e(t,n).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&a(s)?e(o,n):o}return i},nC}var Voe=Uoe();const rC=bi(Voe);var aC,$6;function Hoe(){if($6)return aC;$6=1;var e={};function t(te){return Array.isArray(te)?te:[te]}const n="",r=" ",a="\\",i=/^\s+$/,s=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,u=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,b=(te,Y,ie)=>Object.defineProperty(te,Y,{value:ie}),v=/([0-z])-([0-z])/g,x=()=>!1,w=te=>te.replace(v,(Y,ie,V)=>ie.charCodeAt(0)<=V.charCodeAt(0)?Y:n),_=te=>{const{length:Y}=te;return te.slice(0,Y-Y%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(te,Y,ie)=>Y+(ie.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(te,Y)=>{const{length:ie}=Y;return Y.slice(0,ie-ie%2)+r}],[/[\\$.|*+(){^]/g,te=>`\\${te}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(te,Y,ie)=>Y+6<ie.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(te,Y,ie)=>{const V=ie.replace(/\\\*/g,"[^\\/]*");return Y+V}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(te,Y,ie,V,J)=>Y===a?`\\[${ie}${_(V)}${J}`:J==="]"&&V.length%2===0?`[${w(ie)}${V}]`:"[]"],[/(?:[^*])$/,te=>/\/$/.test(te)?`${te}$`:`${te}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(te,Y)=>`${Y?`${Y}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(te,Y)=>{let ie=C[te];return ie||(ie=E.reduce((V,[J,Q])=>V.replace(J,Q.bind(te)),te),C[te]=ie),Y?new RegExp(ie,"i"):new RegExp(ie)},I=te=>typeof te=="string",j=te=>te&&I(te)&&!i.test(te)&&!s.test(te)&&te.indexOf("#")!==0,N=te=>te.split(u);class P{constructor(Y,ie,V,J){this.origin=Y,this.pattern=ie,this.negative=V,this.regex=J}}const L=(te,Y)=>{const ie=te;let V=!1;te.indexOf("!")===0&&(V=!0,te=te.substr(1)),te=te.replace(o,"!").replace(l,"#");const J=k(te,Y);return new P(ie,te,V,J)},H=(te,Y)=>{throw new Y(te)},M=(te,Y,ie)=>I(te)?te?M.isNotRelative(te)?ie(`path should be a \`path.relative()\`d string, but got "${Y}"`,RangeError):!0:ie("path must not be empty",TypeError):ie(`path must be a string, but got \`${Y}\``,TypeError),K=te=>d.test(te);M.isNotRelative=K,M.convert=te=>te;class q{constructor({ignorecase:Y=!0,ignoreCase:ie=Y,allowRelativePaths:V=!1}={}){b(this,g,!0),this._rules=[],this._ignoreCase=ie,this._allowRelativePaths=V,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(Y){if(Y&&Y[g]){this._rules=this._rules.concat(Y._rules),this._added=!0;return}if(j(Y)){const ie=L(Y,this._ignoreCase);this._added=!0,this._rules.push(ie)}}add(Y){return this._added=!1,t(I(Y)?N(Y):Y).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(Y){return this.add(Y)}_testOne(Y,ie){let V=!1,J=!1;return this._rules.forEach(Q=>{const{negative:ne}=Q;if(J===ne&&V!==J||ne&&!V&&!J&&!ie)return;Q.regex.test(Y)&&(V=!ne,J=ne)}),{ignored:V,unignored:J}}_test(Y,ie,V,J){const Q=Y&&M.convert(Y);return M(Q,Y,this._allowRelativePaths?x:H),this._t(Q,ie,V,J)}_t(Y,ie,V,J){if(Y in ie)return ie[Y];if(J||(J=Y.split(h)),J.pop(),!J.length)return ie[Y]=this._testOne(Y,V);const Q=this._t(J.join(h)+h,ie,V,J);return ie[Y]=Q.ignored?Q:this._testOne(Y,V)}ignores(Y){return this._test(Y,this._ignoreCache,!1).ignored}createFilter(){return Y=>!this.ignores(Y)}filter(Y){return t(Y).filter(this.createFilter())}test(Y){return this._test(Y,this._testCache,!0)}}const ue=te=>new q(te),ae=te=>M(te&&M.convert(te),te,x);if(ue.isPathValid=ae,ue.default=ue,aC=ue,typeof da<"u"&&(e&&e.IGNORE_TEST_WIN32||da.platform==="win32")){const te=ie=>/^\\\\\?\\/.test(ie)||/["<>|\u0000-\u001F]+/u.test(ie)?ie:ie.replace(/\\/g,"/");M.convert=te;const Y=/^[a-z]:\//i;M.isNotRelative=ie=>Y.test(ie)||K(ie)}return aC}var qoe=Hoe();const Goe=bi(qoe);var iC,z6;function Woe(){if(z6)return iC;z6=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return iC=n,iC}var Koe=Woe();const sl=bi(Koe);var sC,U6;function Zoe(){return U6||(U6=1,sC=function(e,t){var n=e,r=t,a=n.length,i=r.length,s=!1,o=null,l=a+1,u=[],d=[],h=[],m="",g=-1,b=0,v=1,x,w,_=function(){a>=i&&(x=n,w=a,n=r,r=x,a=i,i=w,s=!0,l=a+1)},E=function(j,N,P){return{x:j,y:N,k:P}},C=function(j,N){return{elem:j,t:N}},k=function(j,N,P){var L,H,M;for(N>P?L=u[j-1+l]:L=u[j+1+l],M=Math.max(N,P),H=M-j;H<a&&M<i&&n[H]===r[M];)++H,++M;return u[j+l]=d.length,d[d.length]=new E(H,M,L),M},I=function(j){var N,P,L;for(N=P=0,L=j.length-1;L>=0;--L)for(;N<j[L].x||P<j[L].y;)j[L].y-j[L].x>P-N?(s?h[h.length]=new C(r[P],g):h[h.length]=new C(r[P],v),++P):j[L].y-j[L].x<P-N?(s?h[h.length]=new C(n[N],v):h[h.length]=new C(n[N],g),++N):(h[h.length]=new C(n[N],b),m+=n[N],++N,++P)};return _(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return m},getses:function(){return h},compose:function(){var j,N,P,L,H,M,K,q;for(j=i-a,N=a+i+3,P={},K=0;K<N;++K)P[K]=-1,u[K]=-1;L=-1;do{for(++L,q=-L;q<=j-1;++q)P[q+l]=k(q,P[q-1+l]+1,P[q+1+l]);for(q=j+L;q>=j+1;--q)P[q+l]=k(q,P[q-1+l]+1,P[q+1+l]);P[j+l]=k(j,P[j-1+l]+1,P[j+1+l])}while(P[j+l]!==i);for(o=j+2*L,H=u[j+l],M=[];H!==-1;)M[M.length]=new E(d[H].x,d[H].y,null),H=d[H].k;I(M)}}}),sC}var oC,V6;function Yoe(){if(V6)return oC;V6=1;var e=Zoe();function t(i,s){var o=new e(i,s);o.compose();for(var l=o.getses(),u,d,h=i.length-1,m=s.length-1,g=l.length-1;g>=0;--g)l[g].t===o.SES_COMMON?(d?(d.chain={file1index:h,file2index:m,chain:null},d=d.chain):(u={file1index:h,file2index:m,chain:null},d=u),h--,m--):l[g].t===o.SES_DELETE?h--:l[g].t===o.SES_ADD&&m--;var b={file1index:-1,file2index:-1,chain:null};return d?(d.chain=b,u):b}function n(i,s){for(var o=[],l=i.length,u=s.length,d=t(i,s);d!==null;d=d.chain){var h=l-d.file1index-1,m=u-d.file2index-1;l=d.file1index,u=d.file2index,(h||m)&&o.push({file1:[l+1,h],file2:[u+1,m]})}return o.reverse(),o}function r(i,s,o){var l,u=n(s,i),d=n(s,o),h=[];function m(Y,ie){h.push([Y.file1[0],ie,Y.file1[1],Y.file2[0],Y.file2[1]])}for(l=0;l<u.length;l++)m(u[l],0);for(l=0;l<d.length;l++)m(d[l],2);h.sort(function(Y,ie){return Y[0]-ie[0]});var g=[],b=0;function v(Y){Y>b&&(g.push([1,b,Y-b]),b=Y)}for(var x=0;x<h.length;x++){for(var w=x,_=h[x],E=_[0],C=E+_[2];x<h.length-1;){var k=h[x+1],I=k[0];if(I>C)break;C=Math.max(C,I+k[2]),x++}if(v(E),w==x)_[4]>0&&g.push([_[1],_[3],_[4]]);else{var j={0:[i.length,-1,s.length,-1],2:[o.length,-1,s.length,-1]};for(l=w;l<=x;l++){_=h[l];var N=_[1],P=j[N],L=_[0],H=L+_[2],M=_[3],K=M+_[4];P[0]=Math.min(M,P[0]),P[1]=Math.max(K,P[1]),P[2]=Math.min(L,P[2]),P[3]=Math.max(H,P[3])}var q=j[0][0]+(E-j[0][2]),ue=j[0][1]+(C-j[0][3]),ae=j[2][0]+(E-j[2][2]),te=j[2][1]+(C-j[2][3]);g.push([-1,q,ue-q,E,C-E,ae,te-ae])}b=C}return v(s.length),g}function a(i,s,o){var l=[],u=[i,s,o],d=r(i,s,o),h=[];function m(){h.length&&l.push({ok:h}),h=[]}function g(_){for(var E=0;E<_.length;E++)h.push(_[E])}function b(_){if(_[2]!=_[6])return!0;for(var E=_[1],C=_[5],k=0;k<_[2];k++)if(i[k+E]!=o[k+C])return!0;return!1}for(var v=0;v<d.length;v++){var x=d[v],w=x[0];w==-1?b(x)?(m(),l.push({conflict:{a:i.slice(x[1],x[1]+x[2]),aIndex:x[1],o:s.slice(x[3],x[3]+x[4]),oIndex:x[3],b:o.slice(x[5],x[5]+x[6]),bIndex:x[5]}})):g(u[0].slice(x[1],x[1]+x[2])):g(u[w].slice(x[1],x[1]+x[2]))}return m(),l}return oC=a,oC}var Xoe=Yoe();const Joe=bi(Xoe);class or extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new or(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class jy extends or{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=jy.code,this.data={filepaths:t}}}jy.code="UnmergedPathsError";class On extends or{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=On.code,this.data={message:t}}}On.code="InternalError";class Zp extends or{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Zp.code,this.data={filepath:t}}}Zp.code="UnsafeFilepathError";class rl{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function t_(e,t){return-(e<t)||+(e>t)}function D9(e,t){return t_(e.path,t.path)}function M9(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const Yo=2**32;function H6(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function yp(e){const[t,n]=H6(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=H6(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Yo,ctimeNanoseconds:n%Yo,mtimeSeconds:r%Yo,mtimeNanoseconds:a%Yo,dev:e.dev%Yo,ino:e.ino%Yo,mode:M9(e.mode%Yo),uid:e.uid%Yo,gid:e.gid%Yo,size:e.size>-1?e.size%Yo:0}}function Qoe(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let lC=null;async function _c(e){return lC===null&&(lC=await tle()),lC?O9(e):ele(e)}function ele(e){return new k9().update(e).digest("hex")}async function O9(e){const t=await crypto.subtle.digest("SHA-1",e);return Qoe(t)}async function tle(){try{if(await O9(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function nle(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function rle(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Qt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Kd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Qt.isBuffer(t))return Kd.fromBuffer(t);if(t===null)return new Kd(null);throw new On("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new On("Index file is empty (.git/index)");const n=new Kd,r=new rl(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new On(`Invalid dircache magic file number: ${a}`);const i=await _c(t.slice(0,-20)),s=t.slice(-20).toString("hex");if(s!==i)throw new On(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${i}`);const o=r.readUInt32BE();if(o!==2)throw new On(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let u=0;for(;!r.eof()&&u<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=nle(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new On(`Got a path length of: ${m}`);if(d.path=r.toString("utf8",m),d.path.includes("..\\")||d.path.includes("../"))throw new Zp(d.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const b=r.readUInt8();if(b!==0)throw new On(`Expected 1-8 null characters but got '${b}' after ${d.path}`);if(r.eof())throw new On("Unexpected end of file")}d.stages=[],n._addEntry(d),u++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(D9)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=yp(n);const i=Qt.from(t),s={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Qt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Qt.alloc(r),i=new rl(a),s=yp(t);return i.writeUInt32BE(s.ctimeSeconds),i.writeUInt32BE(s.ctimeNanoseconds),i.writeUInt32BE(s.mtimeSeconds),i.writeUInt32BE(s.mtimeNanoseconds),i.writeUInt32BE(s.dev),i.writeUInt32BE(s.ino),i.writeUInt32BE(s.mode),i.writeUInt32BE(s.uid),i.writeUInt32BE(s.gid),i.writeUInt32BE(s.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(rle(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Qt.alloc(12),n=new rl(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(Kd._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(Kd._entryToBuffer(l));r=await Promise.all(r);const a=Qt.concat(r),i=Qt.concat([t,a]),s=await _c(i);return Qt.concat([i,Qt.from(s,"hex")])}}function jx(e,t,n=!0,r=!0){const a=yp(e),i=yp(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let cC=null;const uC=Symbol("IndexCache");function ale(){return{map:new Map,stats:new Map}}async function ile(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Kd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function sle(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:jx(r,a)}class qa{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[uC]||(r[uC]=ale());const s=`${n}/index`;cC===null&&(cC=new D0({maxPending:1/0}));let o,l=[];return await cC.acquire(s,async()=>{const u=r[uC];await sle(t,s,u)&&await ile(t,s,u);const d=u.map.get(s);if(l=d.unmergedPaths,l.length&&!a)throw new jy(l);if(o=await i(d),d._dirty){const h=await d.toObject();await t.write(s,h),u.stats.set(s,await t.lstat(s)),d._dirty=!1}}),o}}function Dx(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function bp(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function P9(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Dx(a),metadata:{},children:[]};t.set(a,i),i.parent=n(bp(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const s={type:"blob",fullpath:a,basename:Dx(a),metadata:i,parent:n(bp(a)),children:[]};s.parent&&s.parent.children.push(s),t.set(a,s)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function ole(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new On(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class lle{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=qa.acquire({fs:t,gitdir:n,cache:r},async function(i){return P9(i.entries)});const a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(s=>s.fullpath);return i.sort(t_),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:yp(r.metadata);t._type=r.type==="tree"?"tree":ole(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const n_=Symbol("GitWalkSymbol");function Yp(){const e=Object.create(null);return Object.defineProperty(e,n_,{value:function({fs:t,gitdir:n,cache:r}){return new lle({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class Rr extends or{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Rr.code,this.data={what:t}}}Rr.code="NotFoundError";class Fi extends or{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Fi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}Fi.code="ObjectTypeError";class Vu extends or{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Vu.code,this.data={value:t}}}Vu.code="InvalidOidError";class Dy extends or{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=Dy.code,this.data={remote:t}}}Dy.code="NoRefspecError";class Mx{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Mx(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Ox{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,s]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=a==="*";if(l!==(s==="*"))throw new On("Invalid refspec");return new Ox({remotePath:r,localPath:i,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class yN{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Ox.from(r));return new yN(n)}add(t){const n=Ox.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function cle(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const ule=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Tg=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},q6={core:{filemode:Tg,bare:Tg,logallrefupdates:Tg,symlinks:Tg,ignorecase:Tg,bigFileThreshold:ule}},dle=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,fle=/^[A-Za-z0-9-.]+$/,hle=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,ple=/^[A-Za-z][A-Za-z-]*$/,mle=/^(.*?)( *[#;].*)$/,gle=e=>{const t=dle.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},yle=e=>{const t=hle.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=ble(r),i=vle(a);return[n,i]}return null},ble=e=>{const t=mle.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return G6(n)&&G6(r)?`${n}${r}`:n},G6=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,vle=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",s=n==="\\"&&a[r+1]==='"';return i||s?t:t+n},""),W6=e=>e!=null?e.toLowerCase():null,QT=(e,t,n)=>[W6(e),t,W6(n)].filter(r=>r!=null).join("."),K6=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:QT(n,a,r),sectionPath:QT(n,a,null),isSection:!!n}},wle=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class bN{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,s=null;const o=a.trim(),l=gle(o),u=l!=null;if(u)[n,r]=l;else{const h=yle(o);h!=null&&([i,s]=h)}const d=QT(n,r,i);return{line:a,isSection:u,section:n,subsection:r,name:i,value:s,path:d}}):[]}static from(t){return new bN(t)}async get(t,n=!1){const r=K6(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:s,value:o})=>{const l=q6[i]&&q6[i][s];return l?l(o):o});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:s,path:o,sectionPath:l,isSection:u}=K6(t),d=wle(this.parsedConfig,h=>h.path===o);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],m=Object.assign({},h,{name:s,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,m):this.parsedConfig[d]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===l),m={section:a,subsection:i,name:s,value:n,modified:!0,path:o};if(fle.test(a)&&ple.test(s))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:u,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:s=!1})=>s?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class Sa{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return bN.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const dw=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],xle=["config","description","index","shallow","commondir"];let dC;async function bu(e,t){return dC===void 0&&(dC=new D0),dC.acquire(e,t)}class Ut{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:u=!1}){for(const x of a.values())if(!x.match(/[0-9a-f]{40}/))throw new Vu(x);const d=await Sa.get({fs:t,gitdir:n});if(!o){if(o=await d.getall(`remote.${r}.fetch`),o.length===0)throw new Dy(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=yN.from(o),m=new Map;if(u){const x=await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ut.deleteRefs({fs:t,gitdir:n,refs:x.map(w=>`refs/tags/${w}`)})}if(s){for(const x of a.keys())if(x.startsWith("refs/tags")&&!x.endsWith("^{}")&&!await Ut.exists({fs:t,gitdir:n,ref:x})){const w=a.get(x);m.set(x,w)}}const g=h.translate([...a.keys()]);for(const[x,w]of g){const _=a.get(x);m.set(w,_)}const b=h.translate([...i.keys()]);for(const[x,w]of b){const _=i.get(x),E=h.translateOne(_);E&&m.set(w,`ref: ${E}`)}const v=[];if(l){for(const x of h.localNamespaces()){const w=(await Ut.listRefs({fs:t,gitdir:n,filepath:x})).map(_=>`${x}/${_}`);for(const _ of w)m.has(_)||v.push(_)}v.length>0&&await Ut.deleteRefs({fs:t,gitdir:n,refs:v})}for(const[x,w]of m)await bu(x,async()=>t.write(Pt.join(n,x),`${w.trim()}
`,"utf8"));return{pruned:v}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Vu(a);await bu(r,async()=>t.write(Pt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await bu(r,async()=>t.write(Pt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ut.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Pt.join(n,o))));let a=await bu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Mx.from(a),s=i.refs.size;for(const o of r)i.refs.has(o)&&i.delete(o);i.refs.size<s&&(a=i.toString(),await bu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ut.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ut.packedRefs({fs:t,gitdir:n}),s=dw(r).filter(o=>!xle.includes(o));for(const o of s){const l=await bu(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||i.get(o));if(l)return Ut.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new Rr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ut.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ut.packedRefs({fs:t,gitdir:n}),i=dw(r);for(const s of i)if(await bu(s,async()=>t.exists(`${n}/${s}`))||a.has(s))return s;throw new Rr(r)}static async expandAgainstMap({ref:t,map:n}){const r=dw(t);for(const a of r)if(await n.has(a))return a;throw new Rr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ut.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=dw(t);for(const s of i){const o=a.get(s);if(o)return Ut.resolveAgainstMap({ref:o.trim(),fullref:s,depth:r,map:a})}throw new Rr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await bu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Mx.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ut.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(s=>s.replace(`${n}/${r}/`,""))}catch{i=[]}for(let s of(await a).keys())s.startsWith(r)&&(s=s.replace(r+"/",""),i.includes(s)||i.push(s));return i.sort(cle),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ut.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ut.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function _le(e,t){return t_(Z6(e),Z6(t))}function Z6(e){return e.mode==="040000"?e.path+"/":e.path}function F9(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new On(`Unexpected GitTree entry mode: ${e}`)}function Sle(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new On(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new On(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const s=F9(i),o=e.slice(r+1,a).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new Zp(o);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:o,oid:l,type:s})}return t}function Ele(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new On(`Could not understand file mode: ${e}`)}function Cle(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Ele(e.mode),e.type||(e.type=F9(e.mode)),e}class Qi{constructor(t){if(Qt.isBuffer(t))this._entries=Sle(t);else if(Array.isArray(t))this._entries=t.map(Cle);else throw new On("invalid type passed to GitTree constructor");this._entries.sort(D9)}static from(t){return new Qi(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(_le),Qt.concat(t.map(n=>{const r=Qt.from(n.mode.replace(/^0/,"")),a=Qt.from(" "),i=Qt.from(n.path,"utf8"),s=Qt.from([0]),o=Qt.from(n.oid,"hex");return Qt.concat([r,a,i,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Xp{static wrap({type:t,object:n}){return Qt.concat([Qt.from(`${t} ${n.byteLength.toString()}\0`),Qt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),s=t.length-(r+1);if(parseInt(i)!==s)throw new On(`Length mismatch: expected ${i} bytes but got ${s} instead.`);return{type:a,object:Qt.from(t.slice(r+1))}}}async function L9({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Tle(e,t){const n=new rl(e),r=Y6(n);if(r!==t.byteLength)throw new On(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=Y6(n);let i;const s=J6(n,t);if(s.byteLength===a)i=s;else{i=Qt.alloc(a);const o=new rl(i);for(o.copy(s);!n.eof();)o.copy(J6(n,t));const l=o.tell();if(a!==l)throw new On(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function Y6(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function X6(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function J6(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const s=X6(e,n&a,4);let o=X6(e,(n&i)>>4,3);return o===0&&(o=65536),t.slice(s,s+o)}else return e.slice(n)}function kle(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function B9(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:kle(e)}class $9{constructor(t){if(typeof Qt>"u")throw new Error("Missing Buffer dependency");this.stream=B9(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Qt.alloc(0):(n&&(n=Qt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>Ale(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Qt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function Ale(e){return e.reduce((t,n)=>t+n.length,0)}async function Nle(e,t){const n=new $9(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new On(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new On(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const s=n.tell(),{type:o,length:l,ofs:u,reference:d}=await Rle(n),h=new gN.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new On(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new On("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:o,num:i,offset:s,end:g,reference:d,ofs:u})}}}}async function Rle(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let s=4;do t=await e.byte(),r|=(t&127)<<s,s+=7;while(t&128)}let a,i;if(n===6){let s=0;a=0;const o=[];do t=await e.byte(),a|=(t&127)<<s,s+=7,o.push(t);while(t&128);i=Qt.from(o)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function z9(e){return gN.inflate(e)}function Ile(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function jle(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class vp{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new rl(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new On(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new On("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const s=r.readUInt32BE(),o=[];for(let d=0;d<s;d++){const h=r.slice(20).toString("hex");o[d]=h}r.seek(r.tell()+4*s);const l=new Map;for(let d=0;d<s;d++)l.set(o[d],r.readUInt32BE());const u=r.slice(20).toString("hex");return new vp({hashes:o,crcs:{},offsets:l,packfileSha:u,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},s=t.slice(-20).toString("hex"),o=[],l={},u=new Map;let d=null,h=null;await Nle([t],async({data:x,type:w,reference:_,offset:E,num:C})=>{d===null&&(d=C);const k=Math.floor((d-C)*100/d);k!==h&&r&&await r({phase:"Receiving objects",loaded:d-C,total:d}),h=k,w=a[w],["commit","tree","blob","tag"].includes(w)?i[E]={type:w,offset:E}:w==="ofs-delta"?i[E]={type:w,offset:E}:w==="ref-delta"&&(i[E]={type:w,offset:E})});const m=Object.keys(i).map(Number);for(const[x,w]of m.entries()){const _=x+1===m.length?t.byteLength-20:m[x+1],E=i[w],C=Ioe.buf(t.slice(w,_))>>>0;E.end=_,E.crc=C}const g=new vp({pack:Promise.resolve(t),packfileSha:s,crcs:l,hashes:o,offsets:u,getExternalRefDelta:n});h=null;let b=0;const v=[0,0,0,0,0,0,0,0,0,0,0,0];for(let x in i){x=Number(x);const w=Math.floor(b*100/d);w!==h&&r&&await r({phase:"Resolving deltas",loaded:b,total:d}),b++,h=w;const _=i[x];if(!_.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:x});v[g.readDepth]+=1;const k=await _c(Xp.wrap({type:E,object:C}));_.oid=k,o.push(k),u.set(k,x),l[k]=_.crc}catch{continue}}return o.sort(),g}async toBuffer(){const t=[],n=(u,d)=>{t.push(Qt.from(u,d))};n("ff744f63","hex"),n("00000002","hex");const r=new rl(Qt.alloc(256*4));for(let u=0;u<256;u++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=u&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const u of this.hashes)n(u,"hex");const a=new rl(Qt.alloc(this.hashes.length*4));for(const u of this.hashes)a.writeUInt32BE(this.crcs[u]);t.push(a.buffer);const i=new rl(Qt.alloc(this.hashes.length*4));for(const u of this.hashes)i.writeUInt32BE(this.offsets.get(u));t.push(i.buffer),n(this.packfileSha,"hex");const s=Qt.concat(t),o=await _c(s),l=Qt.alloc(20);return l.write(o,"hex"),Qt.concat([s,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new On(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new On("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new rl(r),i=a.readUInt8(),s=i&112;let o=n[s];if(o===void 0)throw new On("Unrecognized type: 0b"+s.toString(2));const l=i&15;let u=l;i&128&&(u=jle(a,l));let h=null,m=null;if(o==="ofs_delta"){const b=Ile(a),v=t-b;({object:h,type:o}=await this.readSlice({start:v}))}if(o==="ref_delta"){const b=a.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:b}))}const g=r.slice(a.tell());if(m=Qt.from(await z9(g)),m.byteLength!==u)throw new On(`Packfile told us object would have length ${u} but it had length ${m.byteLength}`);return h&&(m=Qt.from(Tle(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:m}),{type:o,format:"content",object:m}}}const fw=Symbol("PackfileCache");async function Dle({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return vp.fromIdx({idx:i,getExternalRefDelta:n})}function vN({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[fw]||(t[fw]=new Map);let s=t[fw].get(n);return s||(s=Dle({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[fw].set(n,s)),s}async function Mle({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await vN({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(u.error)throw new On(u.error);if(u.offsets.has(r)){if(!u.pack){const h=l.replace(/idx$/,"pack");u.pack=e.read(h)}const d=await u.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${o.replace(/idx$/,"pack")}`,d}}return null}async function Wr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>Wr({fs:e,cache:t,gitdir:n,oid:d});let s;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Qt.from("tree 0\0")}),s||(s=await L9({fs:e,gitdir:n,oid:r})),!s){if(s=await Mle({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!s)throw new Rr(r);return s}if(a==="deflated"||(s.format==="deflated"&&(s.object=Qt.from(await z9(s.object)),s.format="wrapped"),a==="wrapped"))return s;const o=await _c(s.object);if(o!==r)throw new On(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:u}=Xp.unwrap(s.object);if(s.type=u,s.object=l,s.format="content",a==="content")return s;throw new On(`invalid requested format "${a}"`)}class Ro extends or{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Ro.code,this.data={noun:t,where:n,canForce:r}}}Ro.code="AlreadyExistsError";class My extends or{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=My.code,this.data={nouns:t,short:n,matches:r}}}My.code="AmbiguousError";class Oy extends or{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=Oy.code,this.data={filepaths:t}}}Oy.code="CheckoutConflictError";class Py extends or{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=Py.code,this.data={ref:t,oid:n}}}Py.code="CommitNotFetchedError";class Fy extends or{constructor(){super("Empty response from git server."),this.code=this.name=Fy.code,this.data={}}}Fy.code="EmptyServerResponseError";class Ly extends or{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=Ly.code,this.data={}}}Ly.code="FastForwardError";class By extends or{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=By.code,this.data={prettyDetails:t,result:n}}}By.code="GitPushError";class wp extends or{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=wp.code,this.data={statusCode:t,statusMessage:n,response:r}}}wp.code="HttpError";class Hu extends or{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Hu.code,this.data={reason:t}}}Hu.code="InvalidFilepathError";class To extends or{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=To.code,this.data={ref:t,suggestion:n}}}To.code="InvalidRefNameError";class $y extends or{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=$y.code,this.data={depth:t}}}$y.code="MaxDepthError";class Jp extends or{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Jp.code,this.data={}}}Jp.code="MergeNotSupportedError";class Qp extends or{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Qp.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Qp.code="MergeConflictError";class yi extends or{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=yi.code,this.data={role:t}}}yi.code="MissingNameError";class Xi extends or{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Xi.code,this.data={parameter:t}}}Xi.code="MissingParameterError";class zy extends or{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=zy.code,this.data={errors:t},this.errors=t}}zy.code="MultipleGitError";class Lf extends or{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=Lf.code,this.data={expected:t,actual:n}}}Lf.code="ParseError";class xp extends or{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=xp.code,this.data={reason:t}}}xp.code="PushRejectedError";class ku extends or{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=ku.code,this.data={capability:t,parameter:n}}}ku.code="RemoteCapabilityError";class Uy extends or{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Uy.code,this.data={preview:t,response:n}}}Uy.code="SmartHttpError";class Vy extends or{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Vy.code,this.data={url:t,transport:n,suggestion:r}}}Vy.code="UnknownTransportError";class Hy extends or{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=Hy.code,this.data={url:t}}}Hy.code="UrlParseError";class em extends or{constructor(){super("The operation was canceled."),this.code=this.name=em.code,this.data={}}}em.code="UserCanceledError";class qy extends or{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=qy.code,this.data={filepath:t}}}qy.code="IndexResetError";class Gy extends or{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Gy.code,this.data={ref:t}}}Gy.code="NoCommitError";var Ole=Object.freeze({__proto__:null,AlreadyExistsError:Ro,AmbiguousError:My,CheckoutConflictError:Oy,CommitNotFetchedError:Py,EmptyServerResponseError:Fy,FastForwardError:Ly,GitPushError:By,HttpError:wp,InternalError:On,InvalidFilepathError:Hu,InvalidOidError:Vu,InvalidRefNameError:To,MaxDepthError:$y,MergeNotSupportedError:Jp,MergeConflictError:Qp,MissingNameError:yi,MissingParameterError:Xi,MultipleGitError:zy,NoRefspecError:Dy,NotFoundError:Rr,ObjectTypeError:Fi,ParseError:Lf,PushRejectedError:xp,RemoteCapabilityError:ku,SmartHttpError:Uy,UnknownTransportError:Vy,UnsafeFilepathError:Zp,UrlParseError:Hy,UserCanceledError:em,UnmergedPathsError:jy,IndexResetError:qy,NoCommitError:Gy});function ek({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=Ple(r),`${e} <${t}> ${n} ${r}`}function Ple(e){const t=Fle(Lle(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function Fle(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function Lle(e){return e===0?e:-e}function tc(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Px(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:Ble(a)}}function Ble(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),$le(r)}function $le(e){return e===0?e:-e}class Ni{constructor(t){if(typeof t=="string")this._tag=t;else if(Qt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=Ni.render(t);else throw new On("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new Ni(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${ek(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.tagger&&(r.tagger=Px(r.tagger)),r.committer&&(r.committer=Px(r.committer)),r}withoutSignature(){const t=tc(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return tc(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Qt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=tc(i);const s=a+i;return Ni.from(s)}}function fC(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function zle(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Gr{constructor(t){if(typeof t=="string")this._commit=t;else if(Qt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Gr.render(t);else throw new On("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Gr.justHeaders(t),a=Gr.justMessage(t),i=tc(r+`
gpgsig`+fC(n)+`
`+a);return new Gr(i)}static from(t){return new Gr(t)}toObject(){return Qt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Gr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return tc(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Gr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.author&&(r.author=Px(r.author)),r.committer&&(r.committer=Px(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new On("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${ek(r)}
`;const a=t.committer||t.author;return n+=`committer ${ek(a)}
`,t.gpgsig&&(n+="gpgsig"+fC(t.gpgsig)),n}static render(t){return Gr.renderHeaders(t)+`
`+tc(t.message)}render(){return this._commit}withoutSignature(){const t=tc(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return tc(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return zle(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Gr.justMessage(t._commit);let{signature:s}=await n({payload:a,secretKey:r});s=tc(s);const l=Gr.justHeaders(t._commit)+`
gpgsig`+fC(s)+`
`+i;return Gr.from(l)}}async function _p({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Qi.from([]),oid:r};const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ni.from(i).parse().object,_p({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Gr.from(i).parse().tree,_p({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new Fi(r,a,"tree");return{tree:Qi.from(i),oid:r}}class Ule{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const s=new Map;let o;try{o=await Ut.resolve({fs:t,gitdir:n,ref:r})}catch(u){u instanceof Rr&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await _p({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,s=await this.mapPromise,o=s.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:u,object:d}=await Wr({fs:r,cache:a,gitdir:i,oid:l});if(u!==o.type)throw new Fi(l,u,o.type);const h=Qi.from(d);for(const m of h)s.set(Pt.join(n,m.path),m);return h.entries().map(m=>Pt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=M9(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,o=n.get(t._fullpath).oid,{type:l,object:u}=await Wr({fs:r,cache:a,gitdir:i,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(u)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function Vs({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,n_,{value:function({fs:n,gitdir:r,cache:a}){return new Ule({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class Vle{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Pt.join(a,n));return i===null?null:i.map(s=>Pt.join(n,s))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=yp(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const s=await(await this._getGitConfig(n,a)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:s});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let s;await qa.acquire({fs:r,gitdir:a,cache:i},async function(o){const l=o.entriesMap.get(t._fullpath),u=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof da<"u"?da.platform!=="win32":!0;if(!l||jx(u,l,h,m)){const g=await t.content();g===void 0?s=void 0:(s=await _c(Xp.wrap({type:"blob",object:g})),l&&s===l.oid&&(!h||u.mode===l.mode)&&jx(u,l,h,m)&&o.insert({filepath:t._fullpath,stats:u,oid:s}))}else s=l.oid}),t._oid=s}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await Sa.get({fs:t,gitdir:n}),this.config)}}function Wy(){const e=Object.create(null);return Object.defineProperty(e,n_,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new Vle({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function Hle(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const U9=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class qle{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*Gle(e){const t=new qle;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let s=0;s<a;s++)r[s]!==void 0&&r[s]===n?(i[s]=r[s],r[s]=e[s].next().value):i[s]=null,r[s]!==void 0&&t.consider(r[s]);if(yield i,t.value===null)return}}async function qu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,u)=>u,reduce:s=async(l,u)=>{const d=U9(u);return l!==void 0&&d.unshift(l),d},iterate:o=(l,u)=>Promise.all([...u].map(l))}){const l=a.map(g=>g[n_]({fs:e,dir:n,gitdir:r,cache:t})),u=new Array(l.length).fill("."),d=Hle(0,l.length),h=async g=>{d.map(x=>{const w=g[x];g[x]=w&&new l[x].ConstructEntry(w)});const v=(await Promise.all(d.map(x=>{const w=g[x];return w?l[x].readdir(w):[]}))).map(x=>(x===null?[]:x)[Symbol.iterator]());return{entries:g,children:Gle(v)}},m=async g=>{const{entries:b,children:v}=await h(g),x=b.find(_=>_&&_._fullpath)._fullpath,w=await i(x,b);if(w!==null){let _=await o(m,v);return _=_.filter(E=>E!==void 0),s(w,_)}};return m(u)}async function tk(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Pt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?tk(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function Wle(e){return Kle(e)&&Q6(e.then)&&Q6(e.catch)}function Kle(e){return e&&typeof e=="object"}function Q6(e){return typeof e=="function"}function eM(e){return Wle((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const tM=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function nM(e,t){if(eM(t))for(const n of tM)e[`_${n}`]=t[n].bind(t);else for(const n of tM)e[`_${n}`]=rC(t[n].bind(t));eM(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=tk.bind(null,e):t.rm?e._rm=rC(t.rm.bind(t)):t.rmdir.length>2?e._rm=rC(t.rmdir.bind(t)):e._rm=tk.bind(null,e)}class cn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?nM(this,t.promises):nM(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Qt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(bp(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=bp(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(t_),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Qt.isBuffer(r)?r:Qt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function et(e,t){if(t===void 0)throw new Xi(e)}async function Fx(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function Zle({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{et("fs",e),et("dir",t),et("gitdir",n);const i=new cn(e),s=[Vs({ref:r}),Wy(),Yp()];let o=[];await qa.acquire({fs:i,gitdir:n,cache:a},async function(u){o=u.unmergedPaths});const l=await qu({fs:i,cache:a,dir:t,gitdir:n,trees:s,map:async function(u,[d,h,m]){const g=!await Fx(h,m),b=o.includes(u),v=!await Fx(m,d);if(g||b)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(v)return!1;throw new qy(u)}});await qa.acquire({fs:i,gitdir:n,cache:a},async function(u){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class tm{static async isIgnored({fs:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a}){if(Dx(a)===".git")return!0;if(a===".")return!1;let i="";const s=Pt.join(r,"info","exclude");await t.exists(s)&&(i=await t.read(s,"utf8"));const o=[{gitignore:Pt.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),m=l.slice(d).join("/");o.push({gitignore:Pt.join(n,h,".gitignore"),filepath:m})}let u=!1;for(const d of o){let h;try{h=await t.read(d.gitignore,"utf8")}catch(b){if(b.code==="NOENT")continue}const m=Goe().add(i);m.add(h);const g=bp(d.filepath);if(g!=="."&&m.ignores(g))return!0;u?u=!m.test(d.filepath).unignored:u=m.test(d.filepath).ignored}return u}}async function Yle({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,s=`${t}/${i}`;await e.exists(s)||await e.write(s,n)}let hC=null;async function V9(e){return hC===null&&(hC=Jle()),hC?Xle(e):gN.deflate(e)}async function Xle(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function Jle(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function ns({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:s=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Xp.wrap({type:n,object:r})),i=await _c(r),r=Qt.from(await V9(r))),s||await Yle({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function H9(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function Qle({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:s=!0}){try{et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r);const o=new cn(e);await qa.acquire({fs:o,gitdir:n,cache:a},async l=>{const d=await(await Sa.get({fs:o,gitdir:n})).get("core.autocrlf");return nk({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:i,parallel:s,autocrlf:d})})}catch(o){throw o.caller="git.add",o}}async function nk({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:s,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async m=>{if(!i&&await tm.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(Pt.join(e,m));if(!g)throw new Rr(m);if(g.isDirectory()){const b=await n.readdir(Pt.join(e,m));if(s){const v=b.map(x=>nk({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,x)],index:a,force:i,parallel:s,autocrlf:o}));await Promise.all(v)}else for(const v of b)await nk({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,v)],index:a,force:i,parallel:s,autocrlf:o})}else{const b=g.isSymbolicLink()?await n.readlink(Pt.join(e,m)).then(H9):await n.read(Pt.join(e,m),{autocrlf:o});if(b===null)throw new Rr(m);const v=await ns({fs:n,gitdir:t,type:"blob",object:b});a.insert({filepath:m,stats:g,oid:v})}}),u=await Promise.allSettled(l),d=u.filter(m=>m.status==="rejected").map(m=>m.reason);if(d.length>1)throw new zy(d);if(d.length===1)throw d[0];return u.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function M0({fs:e,gitdir:t,path:n}){return(await Sa.get({fs:e,gitdir:t})).get(n)}function q9(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Gu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await M0({fs:e,gitdir:t,path:"user.name"}),email:await M0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},s=q9({},i,r?r.author:void 0,n);if(s.name!==void 0)return s}async function Sp({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),s={name:await M0({fs:e,gitdir:t,path:"user.name"}),email:await M0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=q9({},s,a?a.committer:void 0,n,r);if(o.name!==void 0)return o}async function G9({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ni.from(i).parse().object,G9({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new Fi(r,a,"commit");return{commit:Gr.from(i),oid:r}}async function Ep({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await G9({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function r_({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:g}){let b=!1;h||(h=await Ut.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let v,x;try{v=await Ut.resolve({fs:e,gitdir:r,ref:h}),x=await Ep({fs:e,gitdir:r,oid:v,cache:{}})}catch{b=!0}if(l&&b)throw new Gy(h);const w=l?await Gu({fs:e,gitdir:r,author:i,commit:x.commit}):await Gu({fs:e,gitdir:r,author:i});if(!w)throw new yi("author");const _=l?await Sp({fs:e,gitdir:r,author:w,committer:s,commit:x.commit}):await Sp({fs:e,gitdir:r,author:w,committer:s});if(!_)throw new yi("committer");return qa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=P9(E.entries).get(".");if(g||(g=await W9({fs:e,gitdir:r,inode:k,dryRun:u})),m?m=await Promise.all(m.map(N=>Ut.resolve({fs:e,gitdir:r,ref:N}))):l?m=x.commit.parent:m=v?[v]:[],!a)if(l)a=x.commit.message;else throw new Xi("message");let I=Gr.from({tree:g,parent:m,author:w,committer:_,message:a});o&&(I=await Gr.sign(I,n,o));const j=await ns({fs:e,gitdir:r,type:"commit",object:I.toObject(),dryRun:u});return!d&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:h,value:j}),j})}async function W9({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await W9({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=Qi.from(i);return await ns({fs:e,gitdir:t,type:"tree",object:s.toObject(),dryRun:r})}async function Ky({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Hu("leading-slash");if(a.endsWith("/"))throw new Hu("trailing-slash");const i=r,s=await _p({fs:e,cache:t,gitdir:n,oid:r}),o=s.tree;if(a==="")r=s.oid;else{const l=a.split("/");r=await K9({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:i,filepath:a})}return r}async function K9({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s}){const o=a.shift();for(const l of r)if(l.path===o){if(a.length===0)return l.oid;{const{type:u,object:d}=await Wr({fs:e,cache:t,gitdir:n,oid:l.oid});if(u!=="tree")throw new Fi(i,u,"tree",s);return r=Qi.from(d),K9({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s})}}throw new Rr(`file or directory found at "${i}:${s}"`)}async function nm({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await Ky({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:s}=await _p({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,tree:i.entries()}}async function Zy({fs:e,gitdir:t,tree:n}){const r=Qi.from(n).toObject();return await ns({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function ece({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:s,force:o,author:l,committer:u,signingKey:d}){let h;try{h=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(w){if(!(w instanceof Rr))throw w}let g=(await nm({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)g=g.filter(w=>w.path!==i);else for(const w of g)if(w.path===i)throw new Ro("note",i);typeof s=="string"&&(s=Qt.from(s,"utf8"));const b=await ns({fs:e,gitdir:r,type:"blob",object:s,format:"content"});g.push({mode:"100644",path:i,oid:b,type:"blob"});const v=await Zy({fs:e,gitdir:r,tree:g});return await r_({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:v,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:u,signingKey:d})}async function tce({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:s,force:o,author:l,committer:u,signingKey:d,cache:h={}}){try{et("fs",e),et("gitdir",r),et("oid",i),et("note",s),d&&et("onSign",t);const m=new cn(e),g=await Gu({fs:m,gitdir:r,author:l});if(!g)throw new yi("author");const b=await Sp({fs:m,gitdir:r,author:g,committer:u});if(!b)throw new yi("committer");return await ece({fs:new cn(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:s,force:o,author:g,committer:b,signingKey:d})}catch(m){throw m.caller="git.addNote",m}}async function Z9({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==sl.clean(n))throw new To(n,sl.clean(n));const i=await Sa.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new Ro("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await Sa.save({fs:e,gitdir:t,config:i})}async function nce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return et("fs",e),et("gitdir",n),et("remote",r),et("url",a),await Z9({fs:new cn(e),gitdir:n,remote:r,url:a,force:i})}catch(s){throw s.caller="git.addRemote",s}}async function rce({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await Ut.exists({fs:e,gitdir:r,ref:a}))throw new Ro("tag",a);const h=await Ut.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:m}=await Wr({fs:e,cache:t,gitdir:r,oid:h});let g=Ni.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:s,gpgsig:o});u&&(g=await Ni.sign(g,n,u));const b=await ns({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Ut.writeRef({fs:e,gitdir:r,ref:a,value:b})}async function ace({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1,cache:h={}}){try{et("fs",e),et("gitdir",r),et("ref",a),u&&et("onSign",t);const m=new cn(e),g=await Gu({fs:m,gitdir:r,author:i});if(!g)throw new yi("tagger");return await rce({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:s,gpgsig:o,object:l,signingKey:u,force:d})}catch(m){throw m.caller="git.annotatedTag",m}}async function ice({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==sl.clean(n))throw new To(n,sl.clean(n));const s=`refs/heads/${n}`;if(!i&&await Ut.exists({fs:e,gitdir:t,ref:s}))throw new Ro("branch",n,!1);let o;try{o=await Ut.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Ut.writeRef({fs:e,gitdir:t,ref:s,value:o}),a&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function sce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:s=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),await ice({fs:new cn(e),gitdir:n,ref:r,object:a,checkout:i,force:s})}catch(o){throw o.caller="git.branch",o}}const Y9=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function wN({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:s,ref:o,filepaths:l,noCheckout:u,noUpdateHead:d,dryRun:h,force:m,track:g=!0}){let b;if(r)try{b=await Ut.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{b="0000000000000000000000000000000000000000"}let v;try{v=await Ut.resolve({fs:e,gitdir:i,ref:o})}catch(x){if(o==="HEAD")throw x;const w=`${s}/${o}`;if(v=await Ut.resolve({fs:e,gitdir:i,ref:w}),g){const _=await Sa.get({fs:e,gitdir:i});await _.set(`branch.${o}.remote`,s),await _.set(`branch.${o}.merge`,`refs/heads/${o}`),await Sa.save({fs:e,gitdir:i,config:_})}await Ut.writeRef({fs:e,gitdir:i,ref:`refs/heads/${o}`,value:v})}if(!u){let x;try{x=await oce({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:o,force:m,filepaths:l})}catch(k){throw k instanceof Rr&&k.data.what===v?new Py(o,v):k}const w=x.filter(([k])=>k==="conflict").map(([k,I])=>I);if(w.length>0)throw new Oy(w);const _=x.filter(([k])=>k==="error").map(([k,I])=>I);if(_.length>0)throw new On(_.join(", "));if(h){r&&await r({previousHead:b,newHead:v,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const C=x.length;await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(x.filter(([I])=>I==="delete"||I==="delete-index").map(async function([I,j]){const N=`${a}/${j}`;I==="delete"&&await e.rm(N),k.delete({filepath:j}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[I,j]of x)if(I==="rmdir"||I==="rmdir-index"){const N=`${a}/${j}`;try{I==="rmdir-index"&&k.delete({filepath:j}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(P){if(P.code==="ENOTEMPTY")console.log(`Did not delete ${j} because directory is not empty`);else throw P}}}),await Promise.all(x.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,I]){const j=`${a}/${I}`;await e.mkdir(j),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(x.filter(([I])=>I==="create"||I==="create-index"||I==="update"||I==="mkdir-index").map(async function([I,j,N,P,L]){const H=`${a}/${j}`;try{if(I!=="create-index"&&I!=="mkdir-index"){const{object:K}=await Wr({fs:e,cache:t,gitdir:i,oid:N});if(L&&await e.rm(H),P===33188)await e.write(H,K);else if(P===33261)await e.write(H,K,{mode:511});else if(P===40960)await e.writelink(H,K);else throw new On(`Invalid mode 0o${P.toString(8)} detected in blob ${N}`)}const M=await e.lstat(H);P===33261&&(M.mode=493),I==="mkdir-index"&&(M.mode=57344),k.insert({filepath:j,stats:M,oid:N}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(M){console.log(M)}}))}),r&&await r({previousHead:b,newHead:v,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const x=await Ut.expand({fs:e,gitdir:i,ref:o});x.startsWith("refs/heads")?await Ut.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:x}):await Ut.writeRef({fs:e,gitdir:i,ref:"HEAD",value:v})}}async function oce({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:s,filepaths:o}){let l=0;return qu({fs:e,cache:t,dir:r,gitdir:a,trees:[Vs({ref:i}),Wy(),Yp()],map:async function(u,[d,h,m]){if(u===".")return;if(o&&!o.some(b=>Y9(u,b)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!m,!!d,!!h].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(u)?["delete",u]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",u];case"blob":return["create",u,await d.oid(),await d.mode()];case"commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",u];case"blob-blob":return await d.oid()!==await h.oid()?s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]:await d.mode()!==await h.mode()?s?["update",u,await d.oid(),await d.mode(),!0]:["conflict",u]:["create-index",u,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",u];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",u];case"101":switch(await m.type()){case"tree":return["rmdir",u];case"blob":return await m.oid()!==await h.oid()?s?["delete",u]:["conflict",u]:["delete",u];case"commit":return["rmdir-index",u];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await d.oid()&&await m.mode()===await d.mode()&&!s)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await d.oid())return s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]}else if(s)return["update",u,await d.oid(),await d.mode(),await d.mode()!==await m.mode()];return await d.mode()!==await m.mode()?["update",u,await d.oid(),await d.mode(),!0]:await d.oid()!==await m.oid()?["update",u,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",u,await d.oid()];case"blob-tree":return["update-blob-to-tree",u];case"commit-commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await d.type()}`]}}},reduce:async function(u,d){return d=U9(d),u?u&&u[0]==="rmdir"?(d.push(u),d):(d.unshift(u),d):d}})}async function X9({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Pt.join(r,".git"),remote:i="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:u=s===void 0,dryRun:d=!1,force:h=!1,track:m=!0,cache:g={}}){try{et("fs",e),et("dir",r),et("gitdir",a);const b=s||"HEAD";return await wN({fs:new cn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:b,filepaths:o,noCheckout:l,noUpdateHead:u,dryRun:d,force:h,track:m})}catch(b){throw b.caller="git.checkout",b}}const lce=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Jd(e){const t=lce.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function od({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ut.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ut.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:Jd(a)}function cce(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function J9({username:e="",password:t=""}){return`Basic ${Qt.from(`${e}:${t}`).toString("base64")}`}async function Yy(e,t){const n=B9(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Lx(e){let t=0;const n=[];await Yy(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function rM(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function rk(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class ua{static flush(){return Qt.from("0000","utf8")}static delim(){return Qt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Qt.from(t));const n=t.length+4,r=rk(4,n);return Qt.concat([Qt.from(r,"utf8"),t])}static streamReader(t){const n=new $9(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function aM(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function iM(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=ua.streamReader(e);let s=await i();for(;s===null;)s=await i();if(s===!0)throw new Fy;if(s.includes("version 2"))return aM(i);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Lf(`# service=${t}\\n`,s.toString("utf8"));let o=await i();for(;o===null;)o=await i();if(o===!0)return{capabilities:n,refs:r,symrefs:a};if(o=o.toString("utf8"),o.includes("version 2"))return aM(i);const[l,u]=pC(o,"\0","\\x00");if(u.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=pC(l," "," ");for(r.set(h,d);;){const m=await i();if(m===!0)break;if(m!==null){const[g,b]=pC(m.toString("utf8")," "," ");r.set(b,g)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function pC(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new Lf(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const sM=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,oM=(e,t)=>{(t.username||t.password)&&(e.Authorization=J9(t)),t.headers&&Object.assign(e,t.headers)},mC=async e=>{try{const t=Qt.from(await Lx(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Bx{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:o,url:l,headers:u,protocolVersion:d}){let{url:h,auth:m}=rM(l);const g=s?sM(s,h):h;(m.username||m.password)&&(u.Authorization=J9(m)),d===2&&(u["Git-Protocol"]="version=2");let b,v,x=!1;do if(b=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${o}`,headers:u}),v=!1,b.statusCode===401||b.statusCode===203){const w=x?i:r;if(w){if(m=await w(h,{...m,headers:{...u}}),m&&m.cancel)throw new em;m&&(oM(u,m),x=!0,v=!0)}}else b.statusCode===200&&x&&a&&await a(h,m);while(v);if(b.statusCode!==200){const{response:w}=await mC(b);throw new wp(b.statusCode,b.statusMessage,w)}if(b.headers["content-type"]===`application/x-${o}-advertisement`){const w=await iM(b.body,{service:o});return w.auth=m,w}else{const{preview:w,response:_,data:E}=await mC(b);try{const C=await iM([E],{service:o});return C.auth=m,C}catch{throw new Uy(w,_)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:s,body:o,headers:l}){const u=rM(i);u&&(i=u.url),r&&(i=sM(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,oM(l,s);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:o,headers:l});if(d.statusCode!==200){const{response:h}=mC(d);throw new wp(d.statusCode,d.statusMessage,h)}return d}}function uce({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class a_{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Bx),n.set("https",Bx);const r=uce({url:t});if(!r)throw new Hy(t);if(n.has(r.transport))return n.get(r.transport);throw new Vy(t,r.transport,r.transport==="ssh"?cce(t):void 0)}}let Ud=null;class O0{static async read({fs:t,gitdir:n}){Ud===null&&(Ud=new D0);const r=Pt.join(n,"shallow"),a=new Set;return await Ud.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(s=>a.add(s))}),a}static async write({fs:t,gitdir:n,oids:r}){Ud===null&&(Ud=new D0);const a=Pt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Ud.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Ud.acquire(a,async function(){await t.rm(a)})}}async function dce({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function fce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Pt.join(n,"objects/pack"));i=i.filter(s=>s.endsWith(".idx"));for(const s of i){const o=`${n}/objects/pack/${s}`,l=await vN({fs:e,cache:t,filename:o,getExternalRefDelta:a});if(l.error)throw new On(l.error);if(l.offsets.has(r))return!0}return!1}async function lM({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=o=>Wr({fs:e,cache:t,gitdir:n,oid:o});let s=await dce({fs:e,gitdir:n,oid:r});return s||(s=await fce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),s}function hce(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function Q9(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const i_={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Pw{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function pce(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function eB(e){const t=new Pw;let n="";return(async()=>(await Yy(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=pce(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class tB{static demux(t){const n=ua.streamReader(t),r=new Pw,a=new Pw,i=new Pw,s=async function(){const o=await n();if(o===null)return s();if(o===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(o[0]){case 1:{a.write(o.slice(1));break}case 2:{i.write(o.slice(1));break}case 3:{const l=o.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}s()};return s(),{packetlines:r,packfile:a,progress:i}}}async function mce(e){const{packetlines:t,packfile:n,progress:r}=tB.demux(e),a=[],i=[],s=[];let o=!1,l=!1;return new Promise((u,d)=>{Yy(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&d(new Vu(g)),a.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&d(new Vu(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,b]=m.split(" ");s.push({oid:g,status:b}),b||(l=!0)}else m.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))})})}function gce({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:s=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const u of t)o.push(ua.encode(`want ${u}${l}
`)),l="";for(const u of r)o.push(ua.encode(`shallow ${u}
`));a!==null&&o.push(ua.encode(`deepen ${a}
`)),i!==null&&o.push(ua.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const u of s)o.push(ua.encode(`deepen-not ${u}
`));o.push(ua.flush());for(const u of n)o.push(ua.encode(`have ${u}
`));return o.push(ua.encode(`done
`)),o}async function xN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:u,remoteRef:d,remote:h,url:m,corsProxy:g,depth:b=null,since:v=null,exclude:x=[],relative:w=!1,tags:_=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:I=!1}){const j=u||await od({fs:e,gitdir:l,test:!0}),N=await Sa.get({fs:e,gitdir:l}),P=h||j&&await N.get(`branch.${j}.remote`)||"origin",L=m||await N.get(`remote.${P}.url`);if(typeof L>"u")throw new Xi("remote OR url");const H=d||j&&await N.get(`branch.${j}.merge`)||u||"HEAD";g===void 0&&(g=await N.get("http.corsProxy"));const M=a_.getRemoteHelperFor({url:L}),K=await M.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:g,service:"git-upload-pack",url:L,headers:C,protocolVersion:1}),q=K.auth,ue=K.refs;if(ue.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(b!==null&&!K.capabilities.has("shallow"))throw new ku("shallow","depth");if(v!==null&&!K.capabilities.has("deepen-since"))throw new ku("deepen-since","since");if(x.length>0&&!K.capabilities.has("deepen-not"))throw new ku("deepen-not","exclude");if(w===!0&&!K.capabilities.has("deepen-relative"))throw new ku("deepen-relative","relative");const{oid:ae,fullref:te}=Ut.resolveAgainstMap({ref:H,map:ue});for(const Le of ue.keys())Le===te||Le==="HEAD"||Le.startsWith("refs/heads/")||_&&Le.startsWith("refs/tags/")||ue.delete(Le);const Y=Q9([...K.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${i_.agent}`]);w&&Y.push("deepen-relative");const ie=E?[ae]:ue.values(),V=E?[j]:await Ut.listRefs({fs:e,gitdir:l,filepath:"refs"});let J=[];for(let Le of V)try{Le=await Ut.expand({fs:e,gitdir:l,ref:Le});const je=await Ut.resolve({fs:e,gitdir:l,ref:Le});await lM({fs:e,cache:t,gitdir:l,oid:je})&&J.push(je)}catch{}J=[...new Set(J)];const Q=await O0.read({fs:e,gitdir:l}),ne=K.capabilities.has("shallow")?[...Q]:[],he=gce({capabilities:Y,wants:ie,haves:J,shallows:ne,depth:b,since:v,exclude:x}),de=Qt.from(await Lx(he)),Ie=await M.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:L,auth:q,body:[de],headers:C}),ke=await mce(Ie.body);Ie.headers&&(ke.headers=Ie.headers);for(const Le of ke.shallows)if(!Q.has(Le))try{const{object:je}=await Wr({fs:e,cache:t,gitdir:l,oid:Le}),z=new Gr(je),Ee=await Promise.all(z.headers().parent.map(fe=>lM({fs:e,cache:t,gitdir:l,oid:fe})));Ee.length===0||Ee.every(fe=>fe)||Q.add(Le)}catch{Q.add(Le)}for(const Le of ke.unshallows)Q.delete(Le);if(await O0.write({fs:e,gitdir:l,oids:Q}),E){const Le=new Map([[te,ae]]),je=new Map;let z=10,Ee=te;for(;z--;){const se=K.symrefs.get(Ee);if(se===void 0)break;je.set(Ee,se),Ee=se}const Ne=ue.get(Ee);Ne&&Le.set(Ee,Ne);const{pruned:fe}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:P,refs:Le,symrefs:je,tags:_,prune:k});k&&(ke.pruned=fe)}else{const{pruned:Le}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:P,refs:ue,symrefs:K.symrefs,tags:_,prune:k,pruneTags:I});k&&(ke.pruned=Le)}if(ke.HEAD=K.symrefs.get("HEAD"),ke.HEAD===void 0){const{oid:Le}=Ut.resolveAgainstMap({ref:"HEAD",map:ue});for(const[je,z]of ue.entries())if(je!=="HEAD"&&z===Le){ke.HEAD=je;break}}const Te=te.startsWith("refs/tags")?"tag":"branch";if(ke.FETCH_HEAD={oid:ae,description:`${Te} '${Jd(te)}' of ${L}`},r||a){const Le=eB(ke.progress);Yy(Le,async je=>{if(a&&await a(je),r){const z=je.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);z&&await r({phase:z[1].trim(),loaded:parseInt(z[2],10),total:parseInt(z[3],10)})}})}const Se=Qt.from(await Lx(ke.packfile));if(Ie.body.error)throw Ie.body.error;const Pe=Se.slice(-20).toString("hex"),Qe={defaultBranch:ke.HEAD,fetchHead:ke.FETCH_HEAD.oid,fetchHeadDescription:ke.FETCH_HEAD.description};if(ke.headers&&(Qe.headers=ke.headers),k&&(Qe.pruned=ke.pruned),Pe!==""&&!hce(Se)){Qe.packfile=`objects/pack/pack-${Pe}.pack`;const Le=Pt.join(l,Qe.packfile);await e.write(Le,Se);const je=Ee=>Wr({fs:e,cache:t,gitdir:l,oid:Ee}),z=await vp.fromPack({pack:Se,getExternalRefDelta:je,onProgress:r});await e.write(Le.replace(/\.pack$/,".idx"),await z.toBuffer())}return Qe}async function nB({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(s=>r+"/"+s);for(const s of i)await e.mkdir(s);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function yce({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:u,gitdir:d,url:h,corsProxy:m,ref:g,remote:b,depth:v,since:x,exclude:w,relative:_,singleBranch:E,noCheckout:C,noTags:k,headers:I}){try{if(await nB({fs:e,gitdir:d}),await Z9({fs:e,gitdir:d,remote:b,url:h,force:!1}),m){const P=await Sa.get({fs:e,gitdir:d});await P.set("http.corsProxy",m),await Sa.save({fs:e,gitdir:d,config:P})}const{defaultBranch:j,fetchHead:N}=await xN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:d,ref:g,remote:b,corsProxy:m,depth:v,since:x,exclude:w,relative:_,singleBranch:E,headers:I,tags:!k});if(N===null)return;g=g||j,g=g.replace("refs/heads/",""),await wN({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:u,gitdir:d,ref:g,remote:b,noCheckout:C})}catch(j){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),j}}async function bce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u=Pt.join(l,".git"),url:d,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:b=void 0,since:v=void 0,exclude:x=[],relative:w=!1,singleBranch:_=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:I={}}){try{return et("fs",e),et("http",t),et("gitdir",u),E||et("dir",l),et("url",d),await yce({fs:new cn(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u,url:d,corsProxy:h,ref:m,remote:g,depth:b,since:v,exclude:x,relative:w,singleBranch:_,noCheckout:E,noTags:C,headers:k})}catch(j){throw j.caller="git.clone",j}}async function vce({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:g,cache:b={}}){try{et("fs",e),l||et("message",a),o&&et("onSign",t);const v=new cn(e);return await r_({fs:v,cache:b,onSign:t,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l,dryRun:u,noUpdateBranch:d,ref:h,parent:m,tree:g})}catch(v){throw v.caller="git.commit",v}}async function wce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return et("fs",e),et("gitdir",n),await od({fs:new cn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function xce({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ut.exists({fs:e,gitdir:t,ref:n}))throw new Rr(n);const a=await Ut.expand({fs:e,gitdir:t,ref:n}),i=await od({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await Ut.resolve({fs:e,gitdir:t,ref:a});await Ut.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Ut.deleteRef({fs:e,gitdir:t,ref:a});const s=Jd(n),o=await Sa.get({fs:e,gitdir:t});await o.deleteSection("branch",s),await Sa.save({fs:e,gitdir:t,config:o})}async function _ce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await xce({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Sce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{et("fs",e),et("ref",r),await Ut.deleteRef({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Ece({fs:e,gitdir:t,remote:n}){const r=await Sa.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await Sa.save({fs:e,gitdir:t,config:r})}async function Cce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("remote",r),await Ece({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Tce({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ut.deleteRef({fs:e,gitdir:t,ref:n})}async function kce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await Tce({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Ace({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Nce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await vN({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(u.error)throw new On(u.error);for(const d of u.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function Rce({fs:e,cache:t,gitdir:n,oid:r}){const a=o=>Wr({fs:e,cache:t,gitdir:n,oid:o}),i=await Ace({fs:e,gitdir:n,oid:r}),s=await Nce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const o of s)i.indexOf(o)===-1&&i.push(o);if(i.length===1)return i[0];throw i.length>1?new My("oids",r,i):new Rr(`an object matching "${r}"`)}async function Ice({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Rce({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function jce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ut.expand({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function _N({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let s=r.map((o,l)=>({index:l,oid:o}));for(;s.length;){const o=new Set;for(const{oid:u,index:d}of s)a[u]||(a[u]=new Set),a[u].add(d),a[u].size===i&&o.add(u);if(o.size>0)return[...o];const l=new Map;for(const{oid:u,index:d}of s)try{const{object:h}=await Wr({fs:e,cache:t,gitdir:n,oid:u}),m=Gr.from(h),{parent:g}=m.parseHeaders();for(const b of g)(!a[b]||!a[b].has(d))&&l.set(b+":"+d,{oid:b,index:d})}catch{}s=Array.from(l.values())}return[]}const gC=/^.*(\r?\n|$)/gm;function Dce({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],s=t[2],o=i.match(gC),l=a.match(gC),u=s.match(gC),d=Joe(o,l,u),h=7;let m="",g=!0;for(const b of d)b.ok&&(m+=b.ok.join("")),b.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=b.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=b.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function Mce({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),index:a,ourOid:i,baseOid:s,theirOid:o,ourName:l="ours",baseName:u="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const b=Vs({ref:i}),v=Vs({ref:s}),x=Vs({ref:o}),w=[],_=[],E=[],C=[],k=await qu({fs:e,cache:t,dir:n,gitdir:r,trees:[b,v,x],map:async function(I,[j,N,P]){const L=Dx(I),H=await Fx(j,N),M=await Fx(P,N);switch(`${H}-${M}`){case"false-false":return{mode:await N.mode(),path:L,oid:await N.oid(),type:await N.type()};case"false-true":return P?{mode:await P.mode(),path:L,oid:await P.oid(),type:await P.type()}:void 0;case"true-false":return j?{mode:await j.mode(),path:L,oid:await j.oid(),type:await j.type()}:void 0;case"true-true":{if(j&&N&&P&&await j.type()==="blob"&&await N.type()==="blob"&&await P.type()==="blob")return Oce({fs:e,gitdir:r,path:L,ours:j,base:N,theirs:P,ourName:l,baseName:u,theirName:d,mergeDriver:g}).then(async K=>{if(K.cleanMerge)m||a.insert({filepath:I,oid:K.mergeResult.oid,stage:0});else if(w.push(I),_.push(I),!m){const q=await N.oid(),ue=await j.oid(),ae=await P.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:q,stage:1}),a.insert({filepath:I,oid:ue,stage:2}),a.insert({filepath:I,oid:ae,stage:3})}return K.mergeResult});if(N&&!j&&P&&await N.type()==="blob"&&await P.type()==="blob"){if(w.push(I),E.push(I),!m){const K=await N.oid(),q=await P.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:K,stage:1}),a.insert({filepath:I,oid:q,stage:3})}return{mode:await P.mode(),oid:await P.oid(),type:"blob",path:L}}if(N&&j&&!P&&await N.type()==="blob"&&await j.type()==="blob"){if(w.push(I),C.push(I),!m){const K=await N.oid(),q=await j.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:K,stage:1}),a.insert({filepath:I,oid:q,stage:2})}return{mode:await j.mode(),oid:await j.oid(),type:"blob",path:L}}if(N&&!j&&!P&&await N.type()==="blob")return;throw new Jp}}},reduce:w.length!==0&&(!n||m)?void 0:async(I,j)=>{const N=j.filter(Boolean);if(I&&!(I&&I.type==="tree"&&N.length===0)){if(N.length>0){const L=new Qi(N).toObject(),H=await ns({fs:e,gitdir:r,type:"tree",object:L,dryRun:h});I.oid=H}return I}}});return w.length!==0?(n&&!m&&await qu({fs:e,cache:t,dir:n,gitdir:r,trees:[Vs({ref:k.oid})],map:async function(I,[j]){const N=`${n}/${I}`;if(await j.type()==="blob"){const P=await j.mode(),L=new TextDecoder().decode(await j.content());await e.write(N,L,{mode:P})}return!0}}),new Qp(w,_,E,C)):k.oid}async function Oce({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:s,theirName:o,baseName:l,dryRun:u,mergeDriver:d=Dce}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Qt.from(await r.content()).toString("utf8"),b=Qt.from(await a.content()).toString("utf8"),v=Qt.from(await i.content()).toString("utf8"),{mergedText:x,cleanMerge:w}=await d({branches:[l,s,o],contents:[b,g,v],path:n}),_=await ns({fs:e,gitdir:t,type:"blob",object:Qt.from(x,"utf8"),dryRun:u});return{cleanMerge:w,mergeResult:{mode:m,path:n,oid:_,type:h}}}async function rB({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:g,signingKey:b,onSign:v,mergeDriver:x}){a===void 0&&(a=await od({fs:e,gitdir:r,fullname:!0})),a=await Ut.expand({fs:e,gitdir:r,ref:a}),i=await Ut.expand({fs:e,gitdir:r,ref:i});const w=await Ut.resolve({fs:e,gitdir:r,ref:a}),_=await Ut.resolve({fs:e,gitdir:r,ref:i}),E=await _N({fs:e,cache:t,gitdir:r,oids:[w,_]});if(E.length!==1)throw new Jp;const C=E[0];if(C===_)return{oid:w,alreadyMerged:!0};if(s&&C===w)return!l&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:a,value:_}),{oid:_,fastForward:!0};{if(o)throw new Ly;const k=await qa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async j=>Mce({fs:e,cache:t,dir:n,gitdir:r,index:j,ourOid:w,theirOid:_,baseOid:C,ourName:Jd(a),baseName:"base",theirName:Jd(i),dryRun:l,abortOnConflict:d,mergeDriver:x}));if(k instanceof Qp)throw k;return h||(h=`Merge branch '${Jd(i)}' into ${Jd(a)}`),{oid:await r_({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[w,_],author:m,committer:g,signingKey:b,onSign:v,dryRun:l,noUpdateBranch:u}),tree:k,mergeCommit:!0}}}async function aB({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:u,ref:d,url:h,remote:m,remoteRef:g,prune:b,pruneTags:v,fastForward:x,fastForwardOnly:w,corsProxy:_,singleBranch:E,headers:C,author:k,committer:I,signingKey:j}){try{if(!d){const L=await od({fs:e,gitdir:u});if(!L)throw new Xi("ref");d=L}const{fetchHead:N,fetchHeadDescription:P}=await xN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:u,corsProxy:_,ref:d,url:h,remote:m,remoteRef:g,singleBranch:E,headers:C,prune:b,pruneTags:v});await rB({fs:e,cache:t,gitdir:u,ours:d,theirs:N,fastForward:x,fastForwardOnly:w,message:`Merge ${P}`,author:k,committer:I,signingKey:j,dryRun:!1,noUpdateBranch:!1}),await wN({fs:e,cache:t,onProgress:r,dir:l,gitdir:u,ref:d,remote:m,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function Pce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,corsProxy:g,singleBranch:b,headers:v={},cache:x={}}){try{et("fs",e),et("http",t),et("gitdir",l);const w={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await aB({fs:new cn(e),cache:x,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:b,headers:v,author:w,committer:w})}catch(w){throw w.caller="git.fastForward",w}}async function Fce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,remote:d,remoteRef:h,url:m,corsProxy:g,depth:b=null,since:v=null,exclude:x=[],relative:w=!1,tags:_=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:I=!1,cache:j={}}){try{return et("fs",e),et("http",t),et("gitdir",l),await xN({fs:new cn(e),cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,gitdir:l,ref:u,remote:d,remoteRef:h,url:m,corsProxy:g,depth:b,since:v,exclude:x,relative:w,tags:_,singleBranch:E,headers:C,prune:k,pruneTags:I})}catch(N){throw N.caller="git.fetch",N}}async function Lce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await _N({fs:new cn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function iB({fs:e,filepath:t}){if(await e.exists(Pt.join(t,".git")))return t;{const n=bp(t);if(n===t)throw new Rr(`git root for ${t}`);return iB({fs:e,filepath:n})}}async function Bce({fs:e,filepath:t}){try{return et("fs",e),et("filepath",t),await iB({fs:new cn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function $ce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await M0({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function zce({fs:e,gitdir:t,path:n}){return(await Sa.get({fs:e,gitdir:t})).getall(n)}async function Uce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await zce({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function Vce({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1}){try{et("http",e),et("url",i);const u=await a_.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:1}),d={capabilities:[...u.capabilities]};for(const[h,m]of u.refs){const g=h.split("/"),b=g.pop();let v=d;for(const x of g)v[x]=v[x]||{},v=v[x];v[b]=m}for(const[h,m]of u.symrefs){const g=h.split("/"),b=g.pop();let v=d;for(const x of g)v[x]=v[x]||{},v=v[x];v[b]=m}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function sB(e,t,n,r){const a=[];for(const[i,s]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),u=a[a.length-1],d=u.ref===l?u:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=s}continue}const o={ref:i,oid:s};n&&e.symrefs.has(i)&&(o.target=e.symrefs.get(i)),a.push(o)}return a}async function Hce({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{et("http",e),et("url",i);const d=await a_.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const m of d.capabilities){const[g,b]=m.split("=");b?h[g]=b:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:sB(d,void 0,!0,!0)}}catch(u){throw u.caller="git.getRemoteInfo2",u}}async function qce({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Xp.wrap({type:e,object:t})),r=await _c(t)),{oid:r,object:t}}async function Gce({object:e}){try{et("object",e),typeof e=="string"?e=Qt.from(e,"utf8"):e=Qt.from(e);const t="blob",{oid:n,object:r}=await qce({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function Wce({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Pt.join(r,i);const s=await e.read(i),o=u=>Wr({fs:e,cache:t,gitdir:a,oid:u}),l=await vp.fromPack({pack:s,getExternalRefDelta:o,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function Kce({fs:e,onProgress:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a,cache:i={}}){try{return et("fs",e),et("dir",n),et("gitdir",n),et("filepath",a),await Wce({fs:new cn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(s){throw s.caller="git.indexPack",s}}async function Zce({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){try{return et("fs",e),et("gitdir",r),t||et("dir",n),await nB({fs:new cn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function oB({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const s=await O0.read({fs:e,gitdir:n});if(!r)throw new Xi("oid");if(!a)throw new Xi("ancestor");if(r===a)return!1;const o=[r],l=new Set;let u=0;for(;o.length;){if(u++===i)throw new $y(i);const d=o.shift(),{type:h,object:m}=await Wr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Fi(d,h,"commit");const g=Gr.from(m).parse();for(const b of g.parent)if(b===a)return!0;if(!s.has(d))for(const b of g.parent)l.has(b)||(o.push(b),l.add(b))}return!1}async function Yce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:s={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),et("ancestor",a),await oB({fs:new cn(e),cache:s,gitdir:n,oid:r,ancestor:a,depth:i})}catch(o){throw o.caller="git.isDescendent",o}}async function Xce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r),tm.isIgnored({fs:new cn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function Jce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("gitdir",n),Ut.listBranches({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function Qce({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ut.resolve({gitdir:t,fs:e,ref:n}),i=[];return await lB({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return qa.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function lB({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:s}=await nm({fs:e,cache:t,gitdir:n,oid:r});for(const o of s)o.type==="tree"?await lB({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:a,prefix:Pt.join(i,o.path)}):a.push(Pt.join(i,o.path))}async function eue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),await Qce({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function tue({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ut.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof Rr)return[]}return(await nm({fs:e,cache:t,gitdir:n,oid:a})).tree.map(o=>({target:o.path,note:o.oid}))}async function nue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),await tue({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function rue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("gitdir",n),Ut.listRefs({fs:new cn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function aue({fs:e,gitdir:t}){const n=await Sa.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const s=await n.get(`remote.${i}.url`);return{remote:i,url:s}}))}async function iue({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),await aue({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function sue(e){const t=ua.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...s]=r.split(" "),o={ref:i,oid:a};for(const l of s){const[u,d]=l.split(":");u==="symref-target"?o.target=d:u==="peeled"&&(o.peeled=d)}n.push(o)}return n}async function oue({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(ua.encode(`command=ls-refs
`)),r.push(ua.encode(`agent=${i_.agent}
`)),(n||t||e)&&r.push(ua.delim()),n&&r.push(ua.encode("peel")),t&&r.push(ua.encode("symrefs")),e&&r.push(ua.encode(`ref-prefix ${e}`)),r.push(ua.flush()),r}async function lue({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:u,symrefs:d,peelTags:h}){try{et("http",e),et("url",i);const m=await Bx.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(m.protocolVersion===1)return sB(m,u,d,h);const g=await oue({prefix:u,symrefs:d,peelTags:h}),b=await Bx.connect({http:e,auth:m.auth,headers:s,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,body:g});return sue(b.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function cue({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),Ut.listTags({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function uue(e,t){return e.committer.timestamp-t.committer.timestamp}const due="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function cM({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===due)return;const i=r;let s;const o=await _p({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return a===o.oid?s=o.path:(s=await cB({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function cB({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:s=[],parentPath:o=""}){const l=r.entries().map(function(u){let d;return u.oid===a?(d=Pt.join(o,u.path),s.push(d)):u.type==="tree"&&(d=Wr({fs:e,cache:t,gitdir:n,oid:u.oid}).then(function({object:h}){return cB({fs:e,cache:t,gitdir:n,tree:Qi.from(h),fileId:a,oid:i,filepaths:s,parentPath:Pt.join(o,u.path)})})),d});return await Promise.all(l),s}async function fue({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l}){const u=typeof s>"u"?void 0:Math.floor(s.valueOf()/1e3),d=[],h=await O0.read({fs:e,gitdir:n}),m=await Ut.resolve({fs:e,gitdir:n,ref:a}),g=[await Ep({fs:e,cache:t,gitdir:n,oid:m})];let b,v,x;function w(_){x&&r&&d.push(_)}for(;g.length>0;){const _=g.pop();if(u!==void 0&&_.commit.committer.timestamp<=u)break;if(r){let E;try{E=await Ky({fs:e,cache:t,gitdir:n,oid:_.commit.tree,filepath:r}),v&&b!==E&&d.push(v),b=E,v=_,x=!0}catch(C){if(C instanceof Rr){let k=l&&b;if(k&&(k=await cM({fs:e,cache:t,gitdir:n,oid:_.commit.tree,fileId:b}),k))if(Array.isArray(k)){if(v){const I=await cM({fs:e,cache:t,gitdir:n,oid:v.commit.tree,fileId:b});if(Array.isArray(I))if(k=k.filter(j=>I.indexOf(j)===-1),k.length===1)k=k[0],r=k,v&&d.push(v);else{k=!1,v&&d.push(v);break}}}else r=k,v&&d.push(v);if(!k){if(x&&b&&(d.push(v),!o))break;if(!o&&!l)throw C}v=_,x=!1}else throw C}}else d.push(_);if(i!==void 0&&d.length===i){w(_);break}if(!h.has(_.oid))for(const E of _.commit.parent){const C=await Ep({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(C.oid)||g.push(C)}g.length===0&&w(_),g.sort((E,C)=>uue(E.commit,C.commit))}return d}async function hue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:s,force:o,follow:l,cache:u={}}){try{return et("fs",e),et("gitdir",n),et("ref",a),await fue({fs:new cn(e),cache:u,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l})}catch(d){throw d.caller="git.log",d}}async function pue({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:g,signingKey:b,cache:v={},mergeDriver:x}){try{et("fs",e),b&&et("onSign",t);const w=new cn(e),_=await Gu({fs:w,gitdir:r,author:m});if(!_&&(!o||!s))throw new yi("author");const E=await Sp({fs:w,gitdir:r,author:_,committer:g});if(!E&&(!o||!s))throw new yi("committer");return await rB({fs:w,cache:v,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:u,abortOnConflict:d,message:h,author:_,committer:E,signingKey:b,onSign:t,mergeDriver:x})}catch(w){throw w.caller="git.merge",w}}const mue={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function uB({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new k9,s=[];function o(d,h){const m=Qt.from(d,h);s.push(m),i.update(m)}async function l({stype:d,object:h}){const m=mue[d];let g=h.length,b=g>15?128:0;const v=g&15;g=g>>>4;let x=(b|m|v).toString(16);for(o(x,"hex");b;)b=g>127?128:0,x=b|g&127,o(rk(2,x),"hex"),g=g>>>7;o(Qt.from(await V9(h)))}o("PACK"),o("00000002","hex"),o(rk(8,a.length),"hex");for(const d of a){const{type:h,object:m}=await Wr({fs:e,cache:t,gitdir:r,oid:d});await l({object:m,stype:h})}const u=i.digest();return s.push(u),s}async function gue({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await uB({fs:e,cache:t,gitdir:n,oids:r}),s=Qt.from(await Lx(i)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return a?(await e.write(Pt.join(n,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function yue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await gue({fs:new cn(e),cache:i,gitdir:n,oids:r,write:a})}catch(s){throw s.caller="git.packObjects",s}}async function bue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,prune:g=!1,pruneTags:b=!1,fastForward:v=!0,fastForwardOnly:x=!1,corsProxy:w,singleBranch:_,headers:E={},author:C,committer:k,signingKey:I,cache:j={}}){try{et("fs",e),et("gitdir",l);const N=new cn(e),P=await Gu({fs:N,gitdir:l,author:C});if(!P)throw new yi("author");const L=await Sp({fs:N,gitdir:l,author:P,committer:k});if(!L)throw new yi("committer");return await aB({fs:N,cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForward:v,fastForwardOnly:x,corsProxy:w,singleBranch:_,headers:E,author:P,committer:L,signingKey:I,prune:g,pruneTags:b})}catch(N){throw N.caller="git.pull",N}}async function vue({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),start:a,finish:i}){const s=await O0.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const h of a)o.add(await Ut.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Ut.resolve({fs:e,gitdir:r,ref:h});l.add(m)}catch{}const u=new Set;async function d(h){u.add(h);const{type:m,object:g}=await Wr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const v=Ni.from(g).headers().object;return d(v)}if(m!=="commit")throw new Fi(h,m,"commit");if(!s.has(h)){const v=Gr.from(g).headers().parent;for(h of v)!l.has(h)&&!u.has(h)&&await d(h)}}for(const h of o)await d(h);return u}async function yC({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new Set;async function s(o){if(i.has(o))return;i.add(o);const{type:l,object:u}=await Wr({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const h=Ni.from(u).headers().object;await s(h)}else if(l==="commit"){const h=Gr.from(u).headers().tree;await s(h)}else if(l==="tree"){const d=Qi.from(u);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await s(h.oid)}}for(const o of a)await s(o);return i}async function wue(e){const t={};let n="";const r=ua.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new Lf('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const s of i){if(s.trim()==="")continue;const o=s.slice(0,2),l=s.slice(3);let u=l.indexOf(" ");u===-1&&(u=l.length);const d=l.slice(0,u),h=l.slice(u+1);t.refs[d]={ok:o==="ok",error:h}}return t}async function xue({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(ua.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(ua.flush()),n}async function _ue({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:u,ref:d,remoteRef:h,remote:m,url:g,force:b=!1,delete:v=!1,corsProxy:x,headers:w={}}){const _=d||await od({fs:e,gitdir:u});if(typeof _>"u")throw new Xi("ref");const E=await Sa.get({fs:e,gitdir:u});m=m||await E.get(`branch.${_}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${_}.remote`)||"origin";const C=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof C>"u")throw new Xi("remote OR url");const k=h||await E.get(`branch.${_}.merge`);if(typeof C>"u")throw new Xi("remoteRef");x===void 0&&(x=await E.get("http.corsProxy"));const I=await Ut.expand({fs:e,gitdir:u,ref:_}),j=v?"0000000000000000000000000000000000000000":await Ut.resolve({fs:e,gitdir:u,ref:I}),N=a_.getRemoteHelperFor({url:C}),P=await N.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:x,service:"git-receive-pack",url:C,headers:w,protocolVersion:1}),L=P.auth;let H;if(!k)H=I;else try{H=await Ut.expandAgainstMap({ref:k,map:P.refs})}catch(Q){if(Q instanceof Rr)H=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw Q}const M=P.refs.get(H)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:m,url:C,localRef:{ref:v?"(delete)":I,oid:j},remoteRef:{ref:H,oid:M}}))throw new em;const K=!P.capabilities.has("no-thin");let q=new Set;if(!v){const Q=[...P.refs.values()];let ne=new Set;if(M!=="0000000000000000000000000000000000000000"){const he=await _N({fs:e,cache:t,gitdir:u,oids:[j,M]});for(const de of he)Q.push(de);K&&(ne=await yC({fs:e,cache:t,gitdir:u,oids:he}))}if(!Q.includes(j)){const he=await vue({fs:e,cache:t,gitdir:u,start:[j],finish:Q});q=await yC({fs:e,cache:t,gitdir:u,oids:he})}if(K){try{const he=await Ut.resolve({fs:e,gitdir:u,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:de}=await Ut.resolveAgainstMap({ref:he.replace(`refs/remotes/${m}/`,""),fullref:he,map:P.refs}),Ie=[de];for(const ke of await yC({fs:e,cache:t,gitdir:u,oids:Ie}))ne.add(ke)}catch{}for(const he of ne)q.delete(he)}if(j===M&&(b=!0),!b){if(I.startsWith("refs/tags")&&M!=="0000000000000000000000000000000000000000")throw new xp("tag-exists");if(j!=="0000000000000000000000000000000000000000"&&M!=="0000000000000000000000000000000000000000"&&!await oB({fs:e,cache:t,gitdir:u,oid:j,ancestor:M,depth:-1}))throw new xp("not-fast-forward")}}const ue=Q9([...P.capabilities],["report-status","side-band-64k",`agent=${i_.agent}`]),ae=await xue({capabilities:ue,triplets:[{oldoid:M,oid:j,fullRef:H}]}),te=v?[]:await uB({fs:e,cache:t,gitdir:u,oids:[...q]}),Y=await N.connect({http:n,onProgress:r,corsProxy:x,service:"git-receive-pack",url:C,auth:L,headers:w,body:[...ae,...te]}),{packfile:ie,progress:V}=await tB.demux(Y.body);if(a){const Q=eB(V);Yy(Q,async ne=>{await a(ne)})}const J=await wue(ie);if(Y.headers&&(J.headers=Y.headers),m&&J.ok&&J.refs[H].ok&&!I.startsWith("refs/tags")){const Q=`refs/remotes/${m}/${H.replace("refs/heads","")}`;v?await Ut.deleteRef({fs:e,gitdir:u,ref:Q}):await Ut.writeRef({fs:e,gitdir:u,ref:Q,value:j})}if(J.ok&&Object.values(J.refs).every(Q=>Q.ok))return J;{const Q=Object.entries(J.refs).filter(([ne,he])=>!he.ok).map(([ne,he])=>`
  - ${ne}: ${he.error}`).join("");throw new By(Q,J)}}async function Sue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,dir:l,gitdir:u=Pt.join(l,".git"),ref:d,remoteRef:h,remote:m="origin",url:g,force:b=!1,delete:v=!1,corsProxy:x,headers:w={},cache:_={}}){try{return et("fs",e),et("http",t),et("gitdir",u),await _ue({fs:new cn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,gitdir:u,ref:d,remoteRef:h,remote:m,url:g,force:b,delete:v,corsProxy:x,headers:w})}catch(E){throw E.caller="git.push",E}}async function dB({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ni.from(i).parse().object,dB({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new Fi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function fB({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await Ky({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await dB({fs:e,cache:t,gitdir:n,oid:r})}async function Eue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await fB({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readBlob",s}}async function hB({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Ep({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Cue({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ut.resolve({gitdir:n,fs:e,ref:r}),{blob:s}=await fB({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return s}async function Tue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oid",a),await Cue({fs:new cn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(s){throw s.caller="git.readNote",s}}async function kue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:s=void 0,cache:o={}}){try{et("fs",e),et("gitdir",n),et("oid",r);const l=new cn(e);i!==void 0&&(r=await Ky({fs:l,cache:o,gitdir:n,oid:r,filepath:i}));const d=await Wr({fs:l,cache:o,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Gr.from(d.object).parse();break;case"tree":d.object=Qi.from(d.object).entries();break;case"blob":s?d.object=d.object.toString(s):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=Ni.from(d.object).parse();break;default:throw new Fi(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function Aue({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new Fi(r,a,"tag");const s=Ni.from(i);return{oid:r,tag:s.parse(),payload:s.payload()}}async function Nue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Aue({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function Rue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await nm({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readTree",s}}async function Iue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r),await qa.acquire({fs:new cn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function jue({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l}){let u;try{u=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(b){if(!(b instanceof Rr))throw b}let h=(await nm({fs:e,gitdir:r,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(b=>b.path!==i);const m=await Zy({fs:e,gitdir:r,tree:h});return await r_({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:u&&[u],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function Due({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l,cache:u={}}){try{et("fs",e),et("gitdir",r),et("oid",i);const d=new cn(e),h=await Gu({fs:d,gitdir:r,author:s});if(!h)throw new yi("author");const m=await Sp({fs:d,gitdir:r,author:h,committer:o});if(!m)throw new yi("committer");return await jue({fs:d,cache:u,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function Mue({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==sl.clean(r))throw new To(r,sl.clean(r));if(n!==sl.clean(n))throw new To(n,sl.clean(n));const i=`refs/heads/${n}`,s=`refs/heads/${r}`;if(await Ut.exists({fs:e,gitdir:t,ref:s}))throw new Ro("branch",r,!1);const l=await Ut.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ut.writeRef({fs:e,gitdir:t,ref:s,value:l}),await Ut.deleteRef({fs:e,gitdir:t,ref:i});const d=await od({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function Oue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oldref",a),await Mue({fs:new cn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(s){throw s.caller="git.renameBranch",s}}async function pB({gitdir:e,type:t,object:n}){return _c(Xp.wrap({type:t,object:n}))}async function Pue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const s=new cn(e);let o,l;try{o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(o)try{o=await Ky({fs:s,cache:i,gitdir:n,oid:o,filepath:r})}catch{o=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await s.read(Pt.join(t,r));d&&(l=await pB({gitdir:n,type:"blob",object:d}),o===l&&(u=await s.lstat(Pt.join(t,r)))),await qa.acquire({fs:s,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),o&&h.insert({filepath:r,stats:u,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function Fue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,depth:a}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ut.resolve({fs:new cn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function Lue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r,value:a,append:i=!1}){try{et("fs",e),et("gitdir",n),et("path",r);const s=new cn(e),o=await Sa.get({fs:s,gitdir:n});i?await o.append(r,a):await o.set(r,a),await Sa.save({fs:s,gitdir:n,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function mB({fs:e,gitdir:t,commit:n}){const r=Gr.from(n).toObject();return await ns({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class $x{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=$x.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${s} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,s)=>n?`stash@{${s}}: ${i.split("	")[1]}`:i)}}const Bue={stage:Yp,workdir:Wy};let bC;async function Cp(e,t){return bC===void 0&&(bC=new D0),bC.acquire(e,t)}async function $ue(e,t,n,r,a=null){const i=Pt.join(n,r),s=await e.lstat(i);if(!s)throw new Rr(i);if(s.isDirectory())throw new On(`${i}: file expected, but found directory`);const o=a?await L9({fs:e,gitdir:t,oid:a}):void 0;let l=o?a:void 0;return o||await Cp({fs:e,gitdir:t,currentFilepath:i},async()=>{const u=s.isSymbolicLink()?await e.readlink(i).then(H9):await e.read(i);if(u===null)throw new Rr(i);l=await ns({fs:e,gitdir:t,type:"blob",object:u})}),l}async function zue({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const s=await Promise.all(i.children.map(a));i.oid=await Zy({fs:e,gitdir:n,tree:s}),i.mode=16384}}else i.type==="blob"&&(i.oid=await $ue(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function uM({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?Bue[g]():g),s=[],d=await qu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[b,v])=>{if(!(g==="."||await tm.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&v)return(!b||await b.oid()!==await v.oid()&&await v.oid()!==void 0)&&s.push([b,v]),{mode:await v.mode(),path:g,oid:await v.oid(),type:await v.type()}},reduce:async(g,b)=>(b=b.filter(Boolean),g?(g.children=b,g):b.length>0?b:void 0),iterate:async(g,b)=>{const v=[];for(const x of b){const[w,_]=x;a?_&&(await e.exists(`${t}/${_.toString()}`)?v.push(x):s.push([null,_])):w&&(_?v.push(x):s.push([w,null]))}return v.length?Promise.all(v.map(g)):[]}});if(s.length===0||d.length===0)return null;const m=(await zue({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return Zy({fs:e,gitdir:n,tree:m})}async function Uue({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const s=[],o=[],l=await qu({fs:e,cache:{},dir:t,gitdir:n,trees:[Vs({ref:a}),Vs({ref:r})],map:async(u,[d,h])=>{if(u==="."||await tm.isIgnored({fs:e,dir:t,gitdir:n,filepath:u}))return;const m=h?await h.type():await d.type();if(m!=="tree"&&m!=="blob")return;if(!h&&d){const b=m==="tree"?"rmdir":"rm";return m==="tree"&&s.push(u),m==="blob"&&i&&o.push({filepath:u,oid:await d.oid()}),{method:b,filepath:u}}const g=await h.oid();if(!d||await d.oid()!==g)return m==="tree"?{method:"mkdir",filepath:u}:(i&&o.push({filepath:u,oid:g,stats:await e.lstat(Pt.join(t,u))}),{method:"write",filepath:u,oid:g})}});await Cp({fs:e,gitdir:n,dirRemoved:s,ops:l},async()=>{for(const u of l){const d=Pt.join(t,u.filepath);switch(u.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!s.some(h=>d.startsWith(h))){const{object:h}=await Wr({fs:e,cache:{},gitdir:n,oid:u.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await qa.acquire({fs:e,gitdir:n,cache:{}},async u=>{o.forEach(({filepath:d,stats:h,oid:m})=>{u.insert({filepath:d,stats:h,oid:m})})})}class cc{constructor({fs:t,dir:n,gitdir:r=Pt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Pt.join(this.gitdir,cc.refStash)}get refLogsStashPath(){return Pt.join(this.gitdir,cc.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Gu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new yi("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return mB({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new To(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Ep({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ut.writeRef({fs:this.fs,gitdir:this.gitdir,ref:cc.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=$x.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Cp({filepath:i,entry:a},async()=>{const s=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,s+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return $x.getStashReflogEntry(r,t)}}async function Vue({fs:e,dir:t,gitdir:n,message:r=""}){const a=new cc({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await od({fs:e,gitdir:n,fullname:!1}),s=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await hB({fs:e,dir:t,gitdir:n,oid:s})).commit.message,u=[s];let d=null,h=Vs({ref:"HEAD"});const m=await uM({fs:e,dir:t,gitdir:n,treePair:[Vs({ref:"HEAD"}),"stage"]});if(m){const x=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:u});u.push(x),d=m,h=Yp()}const g=await uM({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const x=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[u[u.length-1]]});u.push(x),d=g}if(!d||!m&&!g)throw new Rr("changes, nothing to stash");const b=(r.trim()||`WIP on ${i}`)+`: ${s.substring(0,7)} ${l}`,v=await a.writeStashCommit({message:b,tree:d,parent:u});return await a.writeStashRef(v),await a.writeStashReflogEntry({stashCommit:v,message:b}),await X9({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),v}async function gB({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new cc({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:s=null}=i.commit?i.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){const u=(await Ep({fs:e,cache:{},gitdir:n,oid:s[o+1]})).commit.message.startsWith("stash-Index");await Uue({fs:e,dir:t,gitdir:n,stashCommit:s[o+1],parentCommit:s[o],wasStaged:u})}}async function yB({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new cc({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const s=a.refStashPath;await Cp(s,async()=>{await e.exists(s)&&await e.rm(s)});const o=await a.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=a.refLogsStashPath;await Cp({reflogEntries:o,stashReflogPath:l,stashMgr:a},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const u=o[o.length-1].split(" ")[1];await a.writeStashRef(u)}else await e.rm(l)})}async function Hue({fs:e,dir:t,gitdir:n}){return new cc({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function que({fs:e,dir:t,gitdir:n}){const r=new cc({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await Cp(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function Gue({fs:e,dir:t,gitdir:n,refIdx:r=0}){await gB({fs:e,dir:t,gitdir:n,refIdx:r}),await yB({fs:e,dir:t,gitdir:n,refIdx:r})}async function Wue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){et("fs",e),et("dir",t),et("gitdir",n),et("op",r);const s={push:Vue,apply:gB,drop:yB,list:Hue,clear:que,pop:Gue},o=["apply","drop","pop"];try{const l=new cn(e);["refs","logs","logs/refs"].map(h=>Pt.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=s[r];if(d){if(o.includes(r)&&i<0)throw new To(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function Kue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const i=new cn(e);if(await tm.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await Zue({fs:i,cache:a,gitdir:n}),l=await bB({fs:i,cache:a,gitdir:n,tree:o,path:r}),u=await qa.acquire({fs:i,gitdir:n,cache:a},async function(v){for(const x of v)if(x.path===r)return x;return null}),d=await i.lstat(Pt.join(t,r)),h=l!==null,m=u!==null,g=d!==null,b=async()=>{if(m&&!jx(u,d))return u.oid;{const v=await i.read(Pt.join(t,r)),x=await pB({gitdir:n,type:"blob",object:v});return m&&u.oid===x&&d.size!==-1&&qa.acquire({fs:i,gitdir:n,cache:a},async function(w){w.insert({filepath:r,stats:d,oid:x})}),x}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await b()===u.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return l===u.oid,"*deleted";if(h&&g&&!m)return await b()===l?"*undeleted":"*undeletemodified";if(h&&g&&m){const v=await b();return v===l?v===u.oid?"unmodified":"*unmodified":v===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function bB({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const s of r)if(s.path===i){if(a.length===0)return s.oid;const{type:o,object:l}=await Wr({fs:e,cache:t,gitdir:n,oid:s.oid});if(o==="tree"){const u=Qi.from(l);return bB({fs:e,cache:t,gitdir:n,tree:u,path:a})}if(o==="blob")throw new Fi(s.oid,o,"blob",a.join("/"))}return null}async function Zue({fs:e,cache:t,gitdir:n}){let r;try{r=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof Rr)return[]}const{tree:a}=await nm({fs:e,cache:t,gitdir:n,oid:r});return a}async function Yue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:s={},ignored:o=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const l=new cn(e);return await qu({fs:l,cache:s,dir:t,gitdir:n,trees:[Vs({ref:r}),Wy(),Yp()],map:async function(u,[d,h,m]){if(!d&&!m&&h&&!o&&await tm.isIgnored({fs:l,dir:t,filepath:u})||!a.some(I=>Y9(u,I)))return null;if(i&&!i(u))return;const[g,b,v]=await Promise.all([d&&d.type(),h&&h.type(),m&&m.type()]),x=[g,b,v].includes("blob");if((g==="tree"||g==="special")&&!x)return;if(g==="commit")return null;if((b==="tree"||b==="special")&&!x)return;if(v==="commit")return null;if((v==="tree"||v==="special")&&!x)return;const w=g==="blob"?await d.oid():void 0,_=v==="blob"?await m.oid():void 0;let E;g!=="blob"&&b==="blob"&&v!=="blob"?E="42":b==="blob"&&(E=await h.oid());const C=[void 0,w,E,_],k=C.map(I=>C.indexOf(I));return k.shift(),[u,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Xue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,force:i=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const s=new cn(e);if(r===void 0)throw new Xi("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"});if(!i&&await Ut.exists({fs:s,gitdir:n,ref:r}))throw new Ro("tag",r);await Ut.writeRef({fs:s,gitdir:n,ref:r,value:o})}catch(s){throw s.caller="git.tag",s}}async function Jue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:s,add:o,remove:l,force:u}){try{et("fs",e),et("gitdir",n),et("filepath",a);const d=new cn(e);if(l)return await qa.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!u){const g=await d.lstat(Pt.join(t,a));if(g){if(g.isDirectory())throw new Hu("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Pt.join(t,a)),!h)throw new Rr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Hu("directory")}return await qa.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!o&&!m.has({filepath:a}))throw new Rr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{g=h;const b=g.isSymbolicLink()?await d.readlink(Pt.join(t,a)):await d.read(Pt.join(t,a));i=await ns({fs:d,gitdir:n,type:"blob",format:"content",object:b})}return m.insert({filepath:a,oid:i,stats:g}),i})}catch(d){throw d.caller="git.updateIndex",d}}function Que(){try{return i_.version}catch(e){throw e.caller="git.version",e}}async function ede({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),trees:r,map:a,reduce:i,iterate:s,cache:o={}}){try{return et("fs",e),et("gitdir",n),et("trees",r),await qu({fs:new cn(e),cache:o,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function tde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),blob:r}){try{return et("fs",e),et("gitdir",n),et("blob",r),await ns({fs:new cn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function nde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r}){try{return et("fs",e),et("gitdir",n),et("commit",r),await mB({fs:new cn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function rde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),type:r,object:a,format:i="parsed",oid:s,encoding:o=void 0}){try{const l=new cn(e);if(i==="parsed"){switch(r){case"commit":a=Gr.from(a).toObject();break;case"tree":a=Qi.from(a).toObject();break;case"blob":a=Qt.from(a,o);break;case"tag":a=Ni.from(a).toObject();break;default:throw new Fi(s||"",r,"blob|commit|tag|tree")}i="content"}return s=await ns({fs:l,gitdir:n,type:r,object:a,oid:s,format:i}),s}catch(l){throw l.caller="git.writeObject",l}}async function ade({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:s=!1}){try{et("fs",e),et("gitdir",n),et("ref",r),et("value",a);const o=new cn(e);if(r!==sl.clean(r))throw new To(r,sl.clean(r));if(!i&&await Ut.exists({fs:o,gitdir:n,ref:r}))throw new Ro("ref",r);s?await Ut.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:a}):(a=await Ut.resolve({fs:o,gitdir:n,ref:a}),await Ut.writeRef({fs:o,gitdir:n,ref:r,value:a}))}catch(o){throw o.caller="git.writeRef",o}}async function ide({fs:e,gitdir:t,tag:n}){const r=Ni.from(n).toObject();return await ns({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function sde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tag:r}){try{return et("fs",e),et("gitdir",n),et("tag",r),await ide({fs:new cn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function ode({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tree:r}){try{return et("fs",e),et("gitdir",n),et("tree",r),await Zy({fs:new cn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Na={Errors:Ole,STAGE:Yp,TREE:Vs,WORKDIR:Wy,add:Qle,abortMerge:Zle,addNote:tce,addRemote:nce,annotatedTag:ace,branch:sce,checkout:X9,clone:bce,commit:vce,getConfig:$ce,getConfigAll:Uce,setConfig:Lue,currentBranch:wce,deleteBranch:_ce,deleteRef:Sce,deleteRemote:Cce,deleteTag:kce,expandOid:Ice,expandRef:jce,fastForward:Pce,fetch:Fce,findMergeBase:Lce,findRoot:Bce,getRemoteInfo:Vce,getRemoteInfo2:Hce,hashBlob:Gce,indexPack:Kce,init:Zce,isDescendent:Yce,isIgnored:Xce,listBranches:Jce,listFiles:eue,listNotes:nue,listRefs:rue,listRemotes:iue,listServerRefs:lue,listTags:cue,log:hue,merge:pue,packObjects:yue,pull:bue,push:Sue,readBlob:Eue,readCommit:hB,readNote:Tue,readObject:kue,readTag:Nue,readTree:Rue,remove:Iue,removeNote:Due,renameBranch:Oue,resetIndex:Pue,updateIndex:Jue,resolveRef:Fue,status:Kue,statusMatrix:Yue,tag:Xue,version:Que,walk:ede,writeBlob:tde,writeCommit:nde,writeObject:rde,writeRef:ade,writeTag:sde,writeTree:ode,stash:Wue};function lde(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function cde(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:lde(e)}async function ude(e,t){const n=cde(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function dde(e){let t=0;const n=[];await ude(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function fde(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function hde({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await dde(a));const i=await fetch(t,{method:n,headers:r,body:a}),s=i.body&&i.body.getReader?fde(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[o,l]of i.headers.entries())r[o]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:s,headers:r}}var P0={request:hde};const F0="https://cors.isomorphic-git.org",Tp=new Map,vB=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=pr.getState();if(!n||!r)return Ge.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await Na.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await Na.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await Na.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await Na.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),Ge.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},L0=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=Tp.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return Ge.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(Tp.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(Ge.error("Authentication cancelled: Password/token not provided."),null)},B0=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),Tp.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),Tp.delete(n)),null},$0=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!Tp.has(n)&&t.username&&t.password&&(Tp.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},ap=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},pde=async(e,t)=>{const n=Za,r=ar(e),a=bl(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},wB=async(e,t,n,r,a)=>{var o;const i=(a==null?void 0:a.fsInstance)??Za,s=ar(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${s}`);try{let l=!1;try{await i.promises.stat(bl(s,".git")),l=!0}catch(m){if(m.code!=="ENOENT")throw m}if(l)throw console.warn(`[VFS Git Op] Clone target ${s} already contains a .git directory.`),new Error(`Repository already cloned at ${s}.`);const u=Iy(s);if(u!=="/")try{await i.promises.mkdir(u,{recursive:!0})}catch(m){if(m.code!=="EEXIST")throw m}let d=n;if(!d)try{if(d=(o=(await Na.getRemoteInfo({http:P0,url:t,corsProxy:F0,onAuth:g=>L0(g,r),onAuthFailure:B0,onAuthSuccess:$0})).HEAD)==null?void 0:o.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(m){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",m),new Error(`Failed to determine default branch: ${ap(m)}`)}await Na.clone({fs:i,http:P0,dir:s,corsProxy:F0,url:t,ref:d,singleBranch:!0,depth:10,onAuth:m=>L0(m,r),onAuthFailure:B0,onAuthSuccess:$0,onProgress:m=>{m.phase==="counting objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):m.phase==="receiving objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):console.log(`Clone progress: ${m.phase}`)}}),await i.promises.stat(bl(s,".git"));const h=await Na.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await Na.checkout({fs:i,dir:s,ref:d})),Ge.success(`Repository cloned successfully into ${s} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const u=ap(l);if(l instanceof Error&&l.message.includes("already cloned")||Ge.error(`Git clone failed: ${u}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${s}`),await i.promises.rm(s,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},xB=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Za,r=ar(e);try{await Na.init({fs:n,dir:r}),Ge.success(`Initialized empty Git repository in "${_a(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),Ge.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},SN=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Za,a=ar(e);try{if(!await vB(a,r))throw new Error("Git user configuration is missing or invalid.");if(await Na.add({fs:r,dir:a,filepath:"."}),!(await Na.statusMatrix({fs:r,dir:a})).some(([,,u])=>u!==0)){Ge.info("No changes detected to commit.");return}const l=await Na.commit({fs:r,dir:a,message:t,author:{name:pr.getState().gitUserName,email:pr.getState().gitUserEmail}});Ge.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),Ge.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},s_=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??Za,i=ar(e);try{if(!await vB(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const o=await Na.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Na.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Na.fetch({fs:a,http:P0,dir:i,corsProxy:F0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>L0(u,n),onAuthFailure:B0,onAuthSuccess:$0}),await Na.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(u){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,u),new Error(`Failed to switch to or create local branch "${t}": ${ap(u)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${ap(l)}`)}}await Na.pull({fs:a,http:P0,dir:i,ref:t,singleBranch:!0,author:{name:pr.getState().gitUserName,email:pr.getState().gitUserEmail},corsProxy:F0,onAuth:l=>L0(l,n),onAuthFailure:B0,onAuthSuccess:$0}),Ge.success(`Pulled changes successfully for "${_a(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(s){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,s),s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")?Ge.info(`Branch "${t}" is already up-to-date.`):Ge.error(`Git pull failed: ${ap(s)}`),!(s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")))throw s}},EN=async(e,t,n,r)=>{var s,o;const a=(r==null?void 0:r.fsInstance)??Za,i=ar(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await Na.push({fs:a,http:P0,dir:i,corsProxy:F0,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:u=>L0(u,n),onAuthFailure:B0,onAuthSuccess:$0});if(l!=null&&l.ok)Ge.success(`Pushed changes successfully for "${_a(i)}"`);else if((s=l==null?void 0:l.error)!=null&&s.includes("up-to-date"))Ge.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(Ge.error(`Push rejected for "${_a(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||Ge.error(`Git push failed: ${ap(l)}`),l}},_B=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Za,r=ar(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await Na.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([s,o,l,u])=>{let d="";return u===2&&(d+="INDEX_Modified "),u===3&&(d+="INDEX_Added "),o===0&&l===2?d+="WT_New":o===1&&l===2?d+="WT_Modified":o===1&&l===0?d+="WT_Deleted":o===1&&l===1&&u===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${o} w:${l} s:${u}`),`${s}: ${d.trim()}`}).filter(s=>!s.endsWith("Unmodified")).join(`
`);Ge.info(`Git Status for "${_a(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),Ge.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},bf=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Za,r=ar(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),Ge.error(`Error creating directory "${_a(r)}": ${a instanceof Error?a.message:String(a)}`),a}},mde=async e=>{try{const t={backend:boe,name:`litechat_vfs_${e}`};return await uoe(t),Za}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),Ge.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},CN=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Za,r=ar(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await bf(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const u=bl(r,l);try{const d=await n.promises.stat(u);return{name:l,path:u,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${u}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),Ge.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},Bf=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Za,r=ar(e);try{const a=await n.promises.readFile(r);return Tt.emit(Et.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),Ge.error(`Error reading file "${_a(r)}": ${a instanceof Error?a.message:String(a)}`),a}},o_=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Za,a=ar(e),i=Iy(a);try{i!=="/"&&await bf(i,{fsInstance:r}),await r.promises.writeFile(a,t),Tt.emit(Et.VFS_FILE_WRITTEN,{path:a})}catch(s){throw s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,s),Ge.error(`Error writing file "${_a(a)}": ${s instanceof Error?s.message:String(s)}`)),s}},TN=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??Za,a=ar(e);if(a==="/")throw Ge.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),Tt.emit(Et.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),Tt.emit(Et.VFS_FILE_DELETED,{path:a})),Ge.success(`"${_a(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),Ge.error(`Error deleting "${_a(a)}": ${i instanceof Error?i.message:String(i)}`),i}},SB=async(e,t)=>{await bf(e,t)},gde=async(e,t,n)=>{try{const r=await Bf(e,n),a=new Blob([r]),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i;const o=ar(e);s.download=t||_a(o),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||Ge.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},EB=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Za,a=ar(t);let i=0,s=0;const o=Array.from(e);try{await bf(a,{fsInstance:r});for(const l of o){const u=bl(a,l.name);try{const d=await l.arrayBuffer();await o_(u,new Uint8Array(d),{fsInstance:r}),i++}catch(d){s++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){s=o.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{s>0&&i>0?Ge.warning(`Upload complete with issues. ${i} succeeded, ${s} failed.`):s===0&&i>0&&Ge.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":_a(a)}.`)}},yde=async(e,t,n)=>{const r=Za;if(!e.name.toLowerCase().endsWith(".zip")){Ge.error("Please select a valid ZIP file.");return}const a=ar(t);let i;try{await bf(a,{fsInstance:r}),i=await T9.loadAsync(e);const s=Object.values(i.files),o=await Promise.allSettled(s.map(async h=>{const m=bl(a,h.name);if(h.dir)await bf(m,{fsInstance:r});else{const g=await h.async("uint8array");await o_(m,g,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,u=0,d=0;o.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?u++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?Ge.warning(`Finished extracting "${e.name}". ${l+u} items succeeded, ${d} failed.`):Ge.success(`Successfully extracted ${l} files and ${u} folders from "${e.name}" to ${a==="/"?"root":_a(a)}.`)}catch(s){s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,s),Ge.error(`ZIP extraction failed: ${s instanceof Error?s.message:String(s)}`))}},dM=async(e,t="/",n)=>{const r=Za,a=new T9,i=ar(t),s=_a(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){Ge.error(`Cannot export: "${s}" is not a directory.`);return}}catch(m){m instanceof Error&&m.code==="ENOENT"?Ge.error(`Cannot export: Path "${s}" not found.`):Ge.error(`Cannot export: Error accessing path "${s}". ${m instanceof Error?m.message:String(m)}`);return}const o=async(m,g)=>{const b=await CN(m,{fsInstance:r});for(const v of b)if(v.isDirectory){if(v.name===".git")continue;const x=g.folder(v.name);if(x)await o(v.path,x);else throw new Error(`Failed to create subfolder ${v.name} in zip.`)}else{const x=await Bf(v.path,{fsInstance:r});g.file(v.name,x)}};await o(i,a);const l=await a.generateAsync({type:"blob"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u;const h=`vfs_${s}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),Ge.success(`"${s}" exported as ${d.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||Ge.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},CB=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Za,a=ar(e),i=ar(t);if(a==="/"||i==="/")throw Ge.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const s=Iy(i);s!=="/"&&await bf(s,{fsInstance:r}),await r.promises.rename(a,i),Ge.success(`Renamed "${_a(a)}" to "${_a(i)}"`)}catch(s){throw s instanceof Error&&s.code==="ENOENT"?s.message.includes("Error creating directory")||Ge.error(`Rename failed: Original item "${_a(a)}" not found.`):s instanceof Error&&s.code==="EEXIST"?Ge.error(`Rename failed: An item named "${_a(i)}" already exists.`):s instanceof Error&&s.message.includes("Error creating directory")||Ge.error(`Rename failed: ${s instanceof Error?s.message:String(s)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,s),s}},bde=1024*5,vde=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},fM=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},kN=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(!1),[u,d]=T.useState(!1),[h,m]=T.useState(!0),g=e.type||"application/octet-stream",b=mA(e.name,g),v=g.startsWith("image/"),x=g.startsWith("audio/"),w=g.startsWith("video/"),_=e.source==="vfs";T.useEffect(()=>{let P=null;return s(null),e.source==="direct"&&!b&&e.contentBase64?(P=vde(e.contentBase64,g),P||s("Failed to decode file content for preview."),a(P)):a(null),e.source==="direct"&&b&&e.contentText&&e.contentText.length>bde?s(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&b&&e.contentText===void 0&&s("Text content missing from metadata."),()=>{P&&(URL.revokeObjectURL(P),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,g,b]);const E=async()=>{if(e.source==="vfs"){Ge.info("File is already in VFS.");return}const P=fM(e);if(!P){Ge.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await EB([P],"/"),Ge.success(`"${e.name}" added to VFS root.`)}catch(L){console.error("Failed to add file to VFS:",L),Ge.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{d(!0);try{let P;if(e.source==="vfs"&&e.path){const M=await Bf(e.path);P=new Blob([M],{type:g})}else{const M=fM(e);if(!M)throw new Error("Could not reconstruct file data.");P=M}const L=URL.createObjectURL(P),H=document.createElement("a");H.href=L,H.download=e.name,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(L)}catch(P){console.error("Failed to download file:",P),Ge.error(`Download failed: ${P instanceof Error?P.message:String(P)}`)}finally{d(!1)}},k=()=>m(P=>!P),I=()=>_?p.jsx(oA,{className:"h-5 w-5 text-cyan-500"}):b?p.jsx(yZ,{className:"h-5 w-5 text-blue-500"}):v?p.jsx(lA,{className:"h-5 w-5 text-purple-500"}):x?p.jsx(KZ,{className:"h-5 w-5 text-green-500"}):w?p.jsx(MY,{className:"h-5 w-5 text-orange-500"}):p.jsx(mZ,{className:"h-5 w-5 text-muted-foreground"}),j=()=>_?p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?p.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[p.jsx(cf,{className:"h-4 w-4"}),p.jsx("span",{children:i})]}):b&&e.contentText!==void 0?p.jsx(Vp,{lang:g==="text/markdown"?"markdown":"text",code:e.contentText}):v&&r?p.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):x&&r?p.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):w&&r?p.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),N=T.useMemo(()=>{let P="File";return _?P="VFS File":b?P="Text":v?P="Image":x?P="Audio":w&&(P="Video"),`${P} (${I0(e.size)})`},[_,b,v,x,w,e.size]);return p.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[I(),p.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",I0(e.size),")"]}),_&&e.path&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),p.jsx(Yn,{children:p.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:u,"aria-label":"Download file",children:u?p.jsx(Pn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(af,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Download File"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":h?"Unfold preview":"Fold preview",children:p.jsx(p1,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&p.jsxs(p.Fragment,{children:[e.source==="direct"&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:o,"aria-label":"Add to VFS",children:o?p.jsx(Pn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(R8,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Add to VFS"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:p.jsx(Ii,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Remove from Prompt"})]})})]})]})]}),h?p.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:N}):p.jsx("div",{className:xt("p-2 max-h-80 overflow-y-auto"),children:j()})]})},wde=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:a})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(!1),u=Ir(dn(E=>E.promptControls)),d=Mn(dn(E=>E.status==="streaming")),{attachedFilesMetadata:h,clearAttachedFiles:m,removeAttachedFile:g}=gc(dn(E=>({attachedFilesMetadata:E.attachedFilesMetadata,clearAttachedFiles:E.clearAttachedFiles,removeAttachedFile:E.removeAttachedFile}))),b=T.useMemo(()=>Object.values(u).filter(E=>E.show?E.show():!0),[u]),v=T.useMemo(()=>b.filter(E=>E.renderer),[b]),x=T.useMemo(()=>b.filter(E=>E.triggerRenderer),[b]),w=T.useCallback(async()=>{var I,j;const C=(((I=a==null?void 0:a.current)==null?void 0:I.getValue())??"").trim(),k=gc.getState().attachedFilesMetadata;if(!(!C&&k.length===0)&&!(d||i)){s(!0);try{let N={},P={};for(const K of b){if(K.getParameters){const q=await K.getParameters();q&&(N={...N,...q})}if(K.getMetadata){const q=await K.getMetadata();q&&(P={...P,...q})}}k.length>0&&(P.attachedFiles=[...k]);let L={id:ji(),content:C,parameters:N,metadata:P};Tt.emit(Et.PROMPT_SUBMITTED,{turnData:L});const H=await LT(Xw.PROMPT_TURN_FINALIZE,{turnData:L});if(H===!1){console.log("Prompt submission cancelled by middleware."),s(!1);return}const M=H&&typeof H=="object"?H.turnData:L;await t(M),m(),b.forEach(K=>{K.clearOnSubmit&&K.clearOnSubmit()}),(j=a.current)==null||j.clearValue(),l(!1)}catch(N){console.error("Error during prompt submission:",N),Ge.error(`Failed to send message: ${N instanceof Error?N.message:String(N)}`)}finally{s(!1)}}},[a,d,i,b,t,m]),_=T.useCallback(E=>{l(E.trim().length>0)},[]);return p.jsxs("div",{className:xt("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[v.length>0&&p.jsx(b4,{controls:v,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),h.length>0&&p.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 border rounded-md p-2 bg-muted/20 mb-2",children:h.map(E=>p.jsx(kN,{fileMeta:E,onRemove:g,isReadOnly:!1},E.id))}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx(e,{ref:a,onSubmit:w,disabled:d||i,placeholder:r,onValueChange:_,className:"flex-grow"}),p.jsx(It,{type:"button",size:"icon",onClick:w,disabled:d||i||!o&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(fY,{className:"h-4 w-4"})})]}),p.jsx(b4,{controls:x,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})},TB=6048e5,xde=864e5,hw=43200,hM=1440,pM=Symbol.for("constructDateFrom");function Sc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&pM in e?e[pM](t):e instanceof Date?new e.constructor(t):new Date(t)}function Wa(e,t){return Sc(t||e,e)}let _de={};function Xy(){return _de}function z0(e,t){var o,l,u,d;const n=Xy(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Wa(e,t==null?void 0:t.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function zx(e,t){return z0(e,{...t,weekStartsOn:1})}function kB(e,t){const n=Wa(e,t==null?void 0:t.in),r=n.getFullYear(),a=Sc(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=zx(a),s=Sc(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=zx(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Ux(e){const t=Wa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function l_(e,...t){const n=Sc.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function mM(e,t){const n=Wa(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Sde(e,t,n){const[r,a]=l_(n==null?void 0:n.in,e,t),i=mM(r),s=mM(a),o=+i-Ux(i),l=+s-Ux(s);return Math.round((o-l)/xde)}function Ede(e,t){const n=kB(e,t),r=Sc(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),zx(r)}function Fw(e,t){const n=+Wa(e)-+Wa(t);return n<0?-1:n>0?1:n}function Cde(e){return Sc(e,Date.now())}function Tde(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function kde(e){return!(!Tde(e)&&typeof e!="number"||isNaN(+Wa(e)))}function Ade(e,t,n){const[r,a]=l_(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function Nde(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function Rde(e,t){return+Wa(e)-+Wa(t)}function Ide(e,t){const n=Wa(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function jde(e,t){const n=Wa(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Dde(e,t){const n=Wa(e,t==null?void 0:t.in);return+Ide(n,t)==+jde(n,t)}function Mde(e,t,n){const[r,a,i]=l_(n==null?void 0:n.in,e,e,t),s=Fw(a,i),o=Math.abs(Ade(a,i));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*o);let l=Fw(a,i)===-s;Dde(r)&&o===1&&Fw(r,i)===1&&(l=!1);const u=s*(o-+l);return u===0?0:u}function Ode(e,t,n){const r=Rde(e,t)/1e3;return Nde(n==null?void 0:n.roundingMethod)(r)}function Pde(e,t){const n=Wa(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Fde={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lde=(e,t,n)=>{let r;const a=Fde[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function vC(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Bde={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$de={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zde={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ude={date:vC({formats:Bde,defaultWidth:"full"}),time:vC({formats:$de,defaultWidth:"full"}),dateTime:vC({formats:zde,defaultWidth:"full"})},Vde={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hde=(e,t,n,r)=>Vde[e];function kg(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const qde={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Gde={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wde={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Kde={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Zde={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yde={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xde=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Jde={ordinalNumber:Xde,era:kg({values:qde,defaultWidth:"wide"}),quarter:kg({values:Gde,defaultWidth:"wide",argumentCallback:e=>e-1}),month:kg({values:Wde,defaultWidth:"wide"}),day:kg({values:Kde,defaultWidth:"wide"}),dayPeriod:kg({values:Zde,defaultWidth:"wide",formattingValues:Yde,defaultFormattingWidth:"wide"})};function Ag(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?efe(o,h=>h.test(s)):Qde(o,h=>h.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function Qde(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function efe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function tfe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const nfe=/^(\d+)(th|st|nd|rd)?/i,rfe=/\d+/i,afe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ife={any:[/^b/i,/^(a|c)/i]},sfe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ofe={any:[/1/i,/2/i,/3/i,/4/i]},lfe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cfe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ufe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dfe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ffe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hfe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pfe={ordinalNumber:tfe({matchPattern:nfe,parsePattern:rfe,valueCallback:e=>parseInt(e,10)}),era:Ag({matchPatterns:afe,defaultMatchWidth:"wide",parsePatterns:ife,defaultParseWidth:"any"}),quarter:Ag({matchPatterns:sfe,defaultMatchWidth:"wide",parsePatterns:ofe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ag({matchPatterns:lfe,defaultMatchWidth:"wide",parsePatterns:cfe,defaultParseWidth:"any"}),day:Ag({matchPatterns:ufe,defaultMatchWidth:"wide",parsePatterns:dfe,defaultParseWidth:"any"}),dayPeriod:Ag({matchPatterns:ffe,defaultMatchWidth:"any",parsePatterns:hfe,defaultParseWidth:"any"})},AB={code:"en-US",formatDistance:Lde,formatLong:Ude,formatRelative:Hde,localize:Jde,match:pfe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mfe(e,t){const n=Wa(e,t==null?void 0:t.in);return Sde(n,Pde(n))+1}function gfe(e,t){const n=Wa(e,t==null?void 0:t.in),r=+zx(n)-+Ede(n);return Math.round(r/TB)+1}function NB(e,t){var d,h,m,g;const n=Wa(e,t==null?void 0:t.in),r=n.getFullYear(),a=Xy(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,s=Sc((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const o=z0(s,t),l=Sc((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=z0(l,t);return+n>=+o?r+1:+n>=+u?r:r-1}function yfe(e,t){var o,l,u,d;const n=Xy(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=NB(e,t),i=Sc((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),z0(i,t)}function bfe(e,t){const n=Wa(e,t==null?void 0:t.in),r=+z0(n,t)-+yfe(n,t);return Math.round(r/TB)+1}function xr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const vu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return xr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):xr(n+1,2)},d(e,t){return xr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return xr(e.getHours()%12||12,t.length)},H(e,t){return xr(e.getHours(),t.length)},m(e,t){return xr(e.getMinutes(),t.length)},s(e,t){return xr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return xr(a,t.length)}},Oh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gM={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return vu.y(e,t)},Y:function(e,t,n,r){const a=NB(e,r),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return xr(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):xr(i,t.length)},R:function(e,t){const n=kB(e);return xr(n,t.length)},u:function(e,t){const n=e.getFullYear();return xr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return xr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return xr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return vu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return xr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=bfe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):xr(a,t.length)},I:function(e,t,n){const r=gfe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):xr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):vu.d(e,t)},D:function(e,t,n){const r=mfe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):xr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return xr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return xr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return xr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Oh.noon:r===0?a=Oh.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Oh.evening:r>=12?a=Oh.afternoon:r>=4?a=Oh.morning:a=Oh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return vu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):vu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):xr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):xr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):vu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):vu.s(e,t)},S:function(e,t){return vu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return bM(r);case"XXXX":case"XX":return Hd(r);case"XXXXX":case"XXX":default:return Hd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return bM(r);case"xxxx":case"xx":return Hd(r);case"xxxxx":case"xxx":default:return Hd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+yM(r,":");case"OOOO":default:return"GMT"+Hd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+yM(r,":");case"zzzz":default:return"GMT"+Hd(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return xr(r,t.length)},T:function(e,t,n){return xr(+e,t.length)}};function yM(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+xr(i,2)}function bM(e,t){return e%60===0?(e>0?"-":"+")+xr(Math.abs(e)/60,2):Hd(e,t)}function Hd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=xr(Math.trunc(r/60),2),i=xr(r%60,2);return n+a+t+i}const vM=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},RB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},vfe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return vM(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",vM(r,t)).replace("{{time}}",RB(a,t))},wfe={p:RB,P:vfe},xfe=/^D+$/,_fe=/^Y+$/,Sfe=["D","DD","YY","YYYY"];function Efe(e){return xfe.test(e)}function Cfe(e){return _fe.test(e)}function Tfe(e,t,n){const r=kfe(e,t,n);if(console.warn(r),Sfe.includes(e))throw new RangeError(r)}function kfe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Afe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nfe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rfe=/^'([^]*?)'?$/,Ife=/''/g,jfe=/[a-zA-Z]/;function ak(e,t,n){var d,h,m,g;const r=Xy(),a=r.locale??AB,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,o=Wa(e,n==null?void 0:n.in);if(!kde(o))throw new RangeError("Invalid time value");let l=t.match(Nfe).map(b=>{const v=b[0];if(v==="p"||v==="P"){const x=wfe[v];return x(b,a.formatLong)}return b}).join("").match(Afe).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const v=b[0];if(v==="'")return{isToken:!1,value:Dfe(b)};if(gM[v])return{isToken:!0,value:b};if(v.match(jfe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(b=>{if(!b.isToken)return b.value;const v=b.value;(Cfe(v)||Efe(v))&&Tfe(v,t,String(e));const x=gM[v[0]];return x(o,v,a.localize,u)}).join("")}function Dfe(e){const t=e.match(Rfe);return t?t[1].replace(Ife,"'"):e}function Mfe(e,t,n){const r=Xy(),a=(n==null?void 0:n.locale)??r.locale??AB,i=2520,s=Fw(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,u]=l_(n==null?void 0:n.in,...s>0?[t,e]:[e,t]),d=Ode(u,l),h=(Ux(u)-Ux(l))/1e3,m=Math.round((d-h)/60);let g;if(m<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):m===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",m,o);if(m<45)return a.formatDistance("xMinutes",m,o);if(m<90)return a.formatDistance("aboutXHours",1,o);if(m<hM){const b=Math.round(m/60);return a.formatDistance("aboutXHours",b,o)}else{if(m<i)return a.formatDistance("xDays",1,o);if(m<hw){const b=Math.round(m/hM);return a.formatDistance("xDays",b,o)}else if(m<hw*2)return g=Math.round(m/hw),a.formatDistance("aboutXMonths",g,o)}if(g=Mde(u,l),g<12){const b=Math.round(m/hw);return a.formatDistance("xMonths",b,o)}else{const b=g%12,v=Math.trunc(g/12);return b<3?a.formatDistance("aboutXYears",v,o):b<9?a.formatDistance("overXYears",v,o):a.formatDistance("almostXYears",v+1,o)}}function IB(e,t){return Mfe(e,Cde(e),t)}const Dn=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:s="ghost",size:o="icon",className:l,"aria-label":u,...d})=>{const h=typeof t=="function";return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:s,size:o,onClick:a,disabled:i,className:xt("h-6 w-6",l),"aria-label":u,...d,children:h?p.jsx(t,{className:xt("h-3.5 w-3.5",n)}):t})}),p.jsx(Yn,{side:r,children:p.jsx("p",{children:e})})]})})},wM={};function Ofe(e){let t=wM[e];if(t)return t;t=wM[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function kp(e,t){typeof t!="string"&&(t=kp.defaultChars);const n=Ofe(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,s=r.length;i<s;i+=3){const o=parseInt(r.slice(i+1,i+3),16);if(o<128){a+=n[o];continue}if((o&224)===192&&i+3<s){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const u=o<<6&1984|l&63;u<128?a+="��":a+=String.fromCharCode(u),i+=3;continue}}if((o&240)===224&&i+6<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(u&192)===128){const d=o<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?a+="���":a+=String.fromCharCode(d),i+=6;continue}}if((o&248)===240&&i+9<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let h=o<<18&1835008|l<<12&258048|u<<6&4032|d&63;h<65536||h>1114111?a+="����":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+="�"}return a})}kp.defaultChars=";/?:@&=+$,#";kp.componentChars="";const xM={};function Pfe(e){let t=xM[e];if(t)return t;t=xM[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Jy(e,t,n){typeof t!="string"&&(n=t,t=Jy.defaultChars),typeof n>"u"&&(n=!0);const r=Pfe(t);let a="";for(let i=0,s=e.length;i<s;i++){const o=e.charCodeAt(i);if(n&&o===37&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(o<128){a+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<s){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}Jy.defaultChars=";/?:@&=+$,-_.!~*'()#";Jy.componentChars="-_.!~*'()";function AN(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Vx(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Ffe=/^([a-z0-9.+-]+:)/i,Lfe=/:[0-9]*$/,Bfe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,$fe=["<",">",'"',"`"," ","\r",`
`,"	"],zfe=["{","}","|","\\","^","`"].concat($fe),Ufe=["'"].concat(zfe),_M=["%","/","?",";","#"].concat(Ufe),SM=["/","?","#"],Vfe=255,EM=/^[+a-z0-9A-Z_-]{0,63}$/,Hfe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,CM={javascript:!0,"javascript:":!0},TM={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function NN(e,t){if(e&&e instanceof Vx)return e;const n=new Vx;return n.parse(e,t),n}Vx.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const u=Bfe.exec(i);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=Ffe.exec(i);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,i=i.substr(s.length)),(t||s||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(s&&CM[s])&&(i=i.substr(2),this.slashes=!0)),!CM[s]&&(a||s&&!TM[s])){let u=-1;for(let b=0;b<SM.length;b++)r=i.indexOf(SM[b]),r!==-1&&(u===-1||r<u)&&(u=r);let d,h;u===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",u),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),u=-1;for(let b=0;b<_M.length;b++)r=i.indexOf(_M[b]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=i.length),i[u-1]===":"&&u--;const m=i.slice(0,u);i=i.slice(u),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const b=this.hostname.split(/\./);for(let v=0,x=b.length;v<x;v++){const w=b[v];if(w&&!w.match(EM)){let _="";for(let E=0,C=w.length;E<C;E++)w.charCodeAt(E)>127?_+="x":_+=w[E];if(!_.match(EM)){const E=b.slice(0,v),C=b.slice(v+1),k=w.match(Hfe);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>Vfe&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),TM[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Vx.prototype.parseHost=function(e){let t=Lfe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const qfe=Object.freeze(Object.defineProperty({__proto__:null,decode:kp,encode:Jy,format:AN,parse:NN},Symbol.toStringTag,{value:"Module"})),jB=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,DB=/[\0-\x1F\x7F-\x9F]/,Gfe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,RN=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,MB=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,OB=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Wfe=Object.freeze(Object.defineProperty({__proto__:null,Any:jB,Cc:DB,Cf:Gfe,P:RN,S:MB,Z:OB},Symbol.toStringTag,{value:"Module"})),Kfe=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),Zfe=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var wC;const Yfe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Xfe=(wC=String.fromCodePoint)!==null&&wC!==void 0?wC:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Jfe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Yfe.get(e))!==null&&t!==void 0?t:e}var Va;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Va||(Va={}));const Qfe=32;var Au;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Au||(Au={}));function ik(e){return e>=Va.ZERO&&e<=Va.NINE}function ehe(e){return e>=Va.UPPER_A&&e<=Va.UPPER_F||e>=Va.LOWER_A&&e<=Va.LOWER_F}function the(e){return e>=Va.UPPER_A&&e<=Va.UPPER_Z||e>=Va.LOWER_A&&e<=Va.LOWER_Z||ik(e)}function nhe(e){return e===Va.EQUALS||the(e)}var Ba;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ba||(Ba={}));var Eu;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Eu||(Eu={}));class rhe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ba.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Eu.Strict}startEntity(t){this.decodeMode=t,this.state=Ba.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ba.EntityStart:return t.charCodeAt(n)===Va.NUM?(this.state=Ba.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ba.NamedEntity,this.stateNamedEntity(t,n));case Ba.NumericStart:return this.stateNumericStart(t,n);case Ba.NumericDecimal:return this.stateNumericDecimal(t,n);case Ba.NumericHex:return this.stateNumericHex(t,n);case Ba.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Qfe)===Va.LOWER_X?(this.state=Ba.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ba.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(ik(a)||ehe(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(ik(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Va.SEMI)this.consumed+=1;else if(this.decodeMode===Eu.Strict)return 0;return this.emitCodePoint(Jfe(this.result),this.consumed),this.errors&&(t!==Va.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Au.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=ahe(r,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===Eu.Attribute&&(i===0||nhe(s))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Au.VALUE_LENGTH)>>14,i!==0){if(s===Va.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Eu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Au.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Au.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Ba.NamedEntity:return this.result!==0&&(this.decodeMode!==Eu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ba.NumericDecimal:return this.emitNumericEntity(0,2);case Ba.NumericHex:return this.emitNumericEntity(0,3);case Ba.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ba.EntityStart:return 0}}}function PB(e){let t="";const n=new rhe(e,r=>t+=Xfe(r));return function(a,i){let s=0,o=0;for(;(o=a.indexOf("&",o))>=0;){t+=a.slice(s,o),n.startEntity(i);const u=n.write(a,o+1);if(u<0){s=o+n.end();break}s=o+u,o=u===0?s+1:s}const l=t+a.slice(s);return t="",l}}function ahe(e,t,n,r){const a=(t&Au.BRANCH_LENGTH)>>7,i=t&Au.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let s=n,o=s+a-1;for(;s<=o;){const l=s+o>>>1,u=e[l];if(u<r)s=l+1;else if(u>r)o=l-1;else return e[l+a]}return-1}const ihe=PB(Kfe);PB(Zfe);function FB(e,t=Eu.Legacy){return ihe(e,t)}function she(e){return Object.prototype.toString.call(e)}function IN(e){return she(e)==="[object String]"}const ohe=Object.prototype.hasOwnProperty;function lhe(e,t){return ohe.call(e,t)}function c_(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function LB(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function jN(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Hx(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const BB=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,che=/&([a-z#][a-z0-9]{1,31});/gi,uhe=new RegExp(BB.source+"|"+che.source,"gi"),dhe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function fhe(e,t){if(t.charCodeAt(0)===35&&dhe.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return jN(r)?Hx(r):e}const n=FB(e);return n!==e?n:e}function hhe(e){return e.indexOf("\\")<0?e:e.replace(BB,"$1")}function Ap(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(uhe,function(t,n,r){return n||fhe(t,r)})}const phe=/[&<>"]/,mhe=/[&<>"]/g,ghe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function yhe(e){return ghe[e]}function Wu(e){return phe.test(e)?e.replace(mhe,yhe):e}const bhe=/[.?*+^$[\]\\(){}|-]/g;function vhe(e){return e.replace(bhe,"\\$&")}function Br(e){switch(e){case 9:case 32:return!0}return!1}function U0(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function V0(e){return RN.test(e)||MB.test(e)}function H0(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function u_(e){return e=e.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(e=e.replace(/ẞ/g,"ß")),e.toLowerCase().toUpperCase()}const whe={mdurl:qfe,ucmicro:Wfe},xhe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:LB,assign:c_,escapeHtml:Wu,escapeRE:vhe,fromCodePoint:Hx,has:lhe,isMdAsciiPunct:H0,isPunctChar:V0,isSpace:Br,isString:IN,isValidEntityCode:jN,isWhiteSpace:U0,lib:whe,normalizeReference:u_,unescapeAll:Ap,unescapeMd:hhe},Symbol.toStringTag,{value:"Module"}));function _he(e,t,n){let r,a,i,s;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(s=e.pos,e.md.inline.skipToken(e),i===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return a&&(u=e.pos),e.pos=l,u}function She(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Ap(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let s=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(s++,s>32))return i;if(r===41){if(s===0)break;s--}a++}return t===a||s!==0||(i.str=Ap(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Ehe(e,t,n,r){let a,i=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(i>=n)return s;let o=e.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return s;t++,i++,o===40&&(o=41),s.marker=o}for(;i<n;){if(a=e.charCodeAt(i),a===s.marker)return s.pos=i+1,s.str+=Ap(e.slice(t,i)),s.ok=!0,s;if(a===40&&s.marker===41)return s;a===92&&i+1<n&&i++,i++}return s.can_continue=!0,s.str+=Ap(e.slice(t,i)),s}const Che=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:She,parseLinkLabel:_he,parseLinkTitle:Ehe},Symbol.toStringTag,{value:"Module"})),_l={};_l.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Wu(i.content)+"</code>"};_l.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Wu(e[t].content)+`</code></pre>
`};_l.fence=function(e,t,n,r,a){const i=e[t],s=i.info?Ap(i.info).trim():"";let o="",l="";if(s){const d=s.split(/(\s+)/g);o=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(i.content,o,l)||Wu(i.content):u=Wu(i.content),u.indexOf("<pre")===0)return u+`
`;if(s){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+o]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+o);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${u}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${u}</code></pre>
`};_l.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};_l.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};_l.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};_l.text=function(e,t){return Wu(e[t].content)};_l.html_block=function(e,t){return e[t].content};_l.html_inline=function(e,t){return e[t].content};function rm(){this.rules=c_({},_l)}rm.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Wu(t.attrs[n][0])+'="'+Wu(t.attrs[n][1])+'"';return a};rm.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let s=!1;if(a.block&&(s=!0,a.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1)}return i+=s?`>
`:">",i};rm.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};rm.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};rm.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;o==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function es(){this.__rules__=[],this.__cache__=null}es.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};es.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};es.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};es.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};es.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};es.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};es.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};es.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};es.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};es.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Io(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Io.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};Io.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Io.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};Io.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Io.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function $B(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}$B.prototype.Token=Io;const The=/\r\n?|\n/g,khe=/\0/g;function Ahe(e){let t;t=e.src.replace(The,`
`),t=t.replace(khe,"�"),e.src=t}function Nhe(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Rhe(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function Ihe(e){return/^<a[>\s]/i.test(e)}function jhe(e){return/^<\/a\s*>/i.test(e)}function Dhe(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let s=a.length-1;s>=0;s--){const o=a[s];if(o.type==="link_close"){for(s--;a[s].level!==o.level&&a[s].type!=="link_open";)s--;continue}if(o.type==="html_inline"&&(Ihe(o.content)&&i>0&&i--,jhe(o.content)&&i++),!(i>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let u=e.md.linkify.match(l);const d=[];let h=o.level,m=0;u.length>0&&u[0].index===0&&s>0&&a[s-1].type==="text_special"&&(u=u.slice(1));for(let g=0;g<u.length;g++){const b=u[g].url,v=e.md.normalizeLink(b);if(!e.md.validateLink(v))continue;let x=u[g].text;u[g].schema?u[g].schema==="mailto:"&&!/^mailto:/i.test(x)?x=e.md.normalizeLinkText("mailto:"+x).replace(/^mailto:/,""):x=e.md.normalizeLinkText(x):x=e.md.normalizeLinkText("http://"+x).replace(/^http:\/\//,"");const w=u[g].index;if(w>m){const k=new e.Token("text","",0);k.content=l.slice(m,w),k.level=h,d.push(k)}const _=new e.Token("link_open","a",1);_.attrs=[["href",v]],_.level=h++,_.markup="linkify",_.info="auto",d.push(_);const E=new e.Token("text","",0);E.content=x,E.level=h,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",d.push(C),m=u[g].lastIndex}if(m<l.length){const g=new e.Token("text","",0);g.content=l.slice(m),g.level=h,d.push(g)}t[n].children=a=LB(a,s,d)}}}}const zB=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Mhe=/\((c|tm|r)\)/i,Ohe=/\((c|tm|r)\)/ig,Phe={c:"©",r:"®",tm:"™"};function Fhe(e,t){return Phe[t.toLowerCase()]}function Lhe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(Ohe,Fhe)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Bhe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&zB.test(r.content)&&(r.content=r.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function $he(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Mhe.test(e.tokens[t].content)&&Lhe(e.tokens[t].children),zB.test(e.tokens[t].content)&&Bhe(e.tokens[t].children))}const zhe=/['"]/,kM=/['"]/g,AM="’";function pw(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Uhe(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],s=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,i.type!=="text")continue;let o=i.content,l=0,u=o.length;e:for(;l<u;){kM.lastIndex=l;const d=kM.exec(o);if(!d)break;let h=!0,m=!0;l=d.index+1;const g=d[0]==="'";let b=32;if(d.index-1>=0)b=o.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){b=e[n].content.charCodeAt(e[n].content.length-1);break}let v=32;if(l<u)v=o.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){v=e[n].content.charCodeAt(0);break}const x=H0(b)||V0(String.fromCharCode(b)),w=H0(v)||V0(String.fromCharCode(v)),_=U0(b),E=U0(v);if(E?h=!1:w&&(_||x||(h=!1)),_?m=!1:x&&(E||w||(m=!1)),v===34&&d[0]==='"'&&b>=48&&b<=57&&(m=h=!1),h&&m&&(h=x,m=w),!h&&!m){g&&(i.content=pw(i.content,d.index,AM));continue}if(m)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<s)break;if(C.single===g&&r[n].level===s){C=r[n];let k,I;g?(k=t.md.options.quotes[2],I=t.md.options.quotes[3]):(k=t.md.options.quotes[0],I=t.md.options.quotes[1]),i.content=pw(i.content,d.index,I),e[C.token].content=pw(e[C.token].content,C.pos,k),l+=I.length-1,C.token===a&&(l+=k.length-1),o=i.content,u=o.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:g,level:s}):m&&g&&(i.content=pw(i.content,d.index,AM))}}}function Vhe(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!zhe.test(e.tokens[t].content)||Uhe(e.tokens[t].children,e)}function Hhe(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const s=r[i].children,o=s.length;for(t=0;t<o;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<o;t++)s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const xC=[["normalize",Ahe],["block",Nhe],["inline",Rhe],["linkify",Dhe],["replacements",$he],["smartquotes",Vhe],["text_join",Hhe]];function DN(){this.ruler=new es;for(let e=0;e<xC.length;e++)this.ruler.push(xC[e][0],xC[e][1])}DN.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};DN.prototype.State=$B;function Sl(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,s=0,o=0,l=0,u=a.length,d=!1;s<u;s++){const h=a.charCodeAt(s);if(!d)if(Br(h)){o++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||s===u-1)&&(h!==10&&s++,this.bMarks.push(i),this.eMarks.push(s),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),d=!1,o=0,l=0,i=s+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Sl.prototype.push=function(e,t,n){const r=new Io(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Sl.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Sl.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Sl.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Br(r))break}return t};Sl.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Br(this.src.charCodeAt(--t)))return t+1;return t};Sl.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Sl.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Sl.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let s=0,o=t;o<n;o++,s++){let l=0;const u=this.bMarks[o];let d=u,h;for(o+1<n||a?h=this.eMarks[o]+1:h=this.eMarks[o];d<h&&l<r;){const m=this.src.charCodeAt(d);if(Br(m))m===9?l+=4-(l+this.bsCount[o])%4:l++;else if(d-u<this.tShift[o])l++;else break;d++}l>r?i[s]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[s]=this.src.slice(d,h)}return i.join("")};Sl.prototype.Token=Io;const qhe=65536;function _C(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function NM(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,s=0,o="";for(;r<n;)a===124&&(i?(o+=e.substring(s,r-1),s=r):(t.push(o+e.substring(s,r)),o="",s=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(o+e.substring(s)),t}function Ghe(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58||i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!Br(o)||s===45&&Br(o))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Br(C))return!1;i++}let l=_C(e,t+1),u=l.split("|");const d=[];for(let C=0;C<u.length;C++){const k=u[C].trim();if(!k){if(C===0||C===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=_C(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=NM(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==d.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),b=e.push("table_open","table",1),v=[t,0];b.map=v;const x=e.push("thead_open","thead",1);x.map=[t,t+1];const w=e.push("tr_open","tr",1);w.map=[t,t+1];for(let C=0;C<u.length;C++){const k=e.push("th_open","th",1);d[C]&&(k.attrs=[["style","text-align:"+d[C]]]);const I=e.push("inline","",0);I.content=u[C].trim(),I.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let _,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let I=0,j=g.length;I<j;I++)if(g[I](e,a,n,!0)){C=!0;break}if(C||(l=_C(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(u=NM(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>qhe))break;if(a===t+2){const I=e.push("tbody_open","tbody",1);I.map=_=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let I=0;I<h;I++){const j=e.push("td_open","td",1);d[I]&&(j.attrs=[["style","text-align:"+d[I]]]);const N=e.push("inline","",0);N.content=u[I]?u[I].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return _&&(e.push("tbody_close","tbody",-1),_[1]=a),e.push("table_close","table",-1),v[1]=a,e.parentType=m,e.line=a,!0}function Whe(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function Khe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const s=e.src.charCodeAt(a);if(s!==126&&s!==96)return!1;let o=a;a=e.skipChars(a,s);let l=a-o;if(l<3)return!1;const u=e.src.slice(o,a),d=e.src.slice(a,i);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=o=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===s&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,s),!(a-o<l)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}l=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=d,g.content=e.getLines(t+1,h,l,!0),g.markup=u,g.map=[t,e.line],!0}function Zhe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const o=[],l=[],u=[],d=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,b;for(b=t;b<n;b++){const E=e.sCount[b]<e.blkIndent;if(a=e.bMarks[b]+e.tShift[b],i=e.eMarks[b],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[b]+1,I,j;e.src.charCodeAt(a)===32?(a++,k++,j=!1,I=!0):e.src.charCodeAt(a)===9?(I=!0,(e.bsCount[b]+k)%4===3?(a++,k++,j=!1):j=!0):I=!1;let N=k;for(o.push(e.bMarks[b]),e.bMarks[b]=a;a<i;){const P=e.src.charCodeAt(a);if(Br(P))P===9?N+=4-(N+e.bsCount[b]+(j?1:0))%4:N++;else break;a++}g=a>=i,l.push(e.bsCount[b]),e.bsCount[b]=e.sCount[b]+1+(I?1:0),u.push(e.sCount[b]),e.sCount[b]=N-k,d.push(e.tShift[b]),e.tShift[b]=a-e.bMarks[b];continue}if(g)break;let C=!1;for(let k=0,I=h.length;k<I;k++)if(h[k](e,b,n,!0)){C=!0;break}if(C){e.lineMax=b,e.blkIndent!==0&&(o.push(e.bMarks[b]),l.push(e.bsCount[b]),d.push(e.tShift[b]),u.push(e.sCount[b]),e.sCount[b]-=e.blkIndent);break}o.push(e.bMarks[b]),l.push(e.bsCount[b]),d.push(e.tShift[b]),u.push(e.sCount[b]),e.sCount[b]=-1}const v=e.blkIndent;e.blkIndent=0;const x=e.push("blockquote_open","blockquote",1);x.markup=">";const w=[t,0];x.map=w,e.md.block.tokenize(e,t,b);const _=e.push("blockquote_close","blockquote",-1);_.markup=">",e.lineMax=s,e.parentType=m,w[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=d[E],e.sCount[E+t]=u[E],e.bsCount[E+t]=l[E];return e.blkIndent=v,!0}function Yhe(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(i++);if(s!==42&&s!==45&&s!==95)return!1;let o=1;for(;i<a;){const u=e.src.charCodeAt(i++);if(u!==s&&!Br(u))return!1;u===s&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(s)),!0}function RM(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Br(i))return-1}return r}function IM(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Br(i))?-1:a}function Xhe(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function Jhe(e,t,n,r){let a,i,s,o,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,m,g;if((g=IM(e,l))>=0){if(h=!0,s=e.bMarks[l]+e.tShift[l],m=Number(e.src.slice(s,g-1)),d&&m!==1)return!1}else if((g=RM(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(g)>=e.eMarks[l])return!1;if(r)return!0;const b=e.src.charCodeAt(g-1),v=e.tokens.length;h?(o=e.push("ordered_list_open","ol",1),m!==1&&(o.attrs=[["start",m]])):o=e.push("bullet_list_open","ul",1);const x=[l,0];o.map=x,o.markup=String.fromCharCode(b);let w=!1;const _=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=g,a=e.eMarks[l];const C=e.sCount[l]+g-(e.bMarks[l]+e.tShift[l]);let k=C;for(;i<a;){const ue=e.src.charCodeAt(i);if(ue===9)k+=4-(k+e.bsCount[l])%4;else if(ue===32)k++;else break;i++}const I=i;let j;I>=a?j=1:j=k-C,j>4&&(j=1);const N=C+j;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(b);const P=[l,0];o.map=P,h&&(o.info=e.src.slice(s,g-1));const L=e.tight,H=e.tShift[l],M=e.sCount[l],K=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[l]=I-e.bMarks[l],e.sCount[l]=k,I>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||w)&&(u=!1),w=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=K,e.tShift[l]=H,e.sCount[l]=M,e.tight=L,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(b),l=e.line,P[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let q=!1;for(let ue=0,ae=_.length;ue<ae;ue++)if(_[ue](e,l,n,!0)){q=!0;break}if(q)break;if(h){if(g=IM(e,l),g<0)break;s=e.bMarks[l]+e.tShift[l]}else if(g=RM(e,l),g<0)break;if(b!==e.src.charCodeAt(g-1))break}return h?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(b),x[1]=l,e.line=l,e.parentType=E,u&&Xhe(e,v),!0}function Qhe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function o(_){const E=e.lineMax;if(_>=E||e.isEmpty(_))return null;let C=!1;if(e.sCount[_]-e.blkIndent>3&&(C=!0),e.sCount[_]<0&&(C=!0),!C){const j=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let P=!1;for(let L=0,H=j.length;L<H;L++)if(j[L](e,_,E,!0)){P=!0;break}if(e.parentType=N,P)return null}const k=e.bMarks[_]+e.tShift[_],I=e.eMarks[_];return e.src.slice(k,I+1)}let l=e.src.slice(a,i+1);i=l.length;let u=-1;for(a=1;a<i;a++){const _=l.charCodeAt(a);if(_===91)return!1;if(_===93){u=a;break}else if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(_===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(a=u+2;a<i;a++){const _=l.charCodeAt(a);if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Br(_))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const m=a,g=s,b=a;for(;a<i;a++){const _=l.charCodeAt(a);if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Br(_))break}let v=e.md.helpers.parseLinkTitle(l,a,i);for(;v.can_continue;){const _=o(s);if(_===null)break;l+=_,a=i,i=l.length,s++,v=e.md.helpers.parseLinkTitle(l,a,i,v)}let x;for(a<i&&b!==a&&v.ok?(x=v.str,a=v.pos):(x="",a=m,s=g);a<i;){const _=l.charCodeAt(a);if(!Br(_))break;a++}if(a<i&&l.charCodeAt(a)!==10&&x)for(x="",a=m,s=g;a<i;){const _=l.charCodeAt(a);if(!Br(_))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const w=u_(l.slice(1,u));return w?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[w]>"u"&&(e.env.references[w]={title:x,href:h}),e.line=s),!0):!1}const epe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],tpe="[a-zA-Z_:][a-zA-Z0-9:._-]*",npe="[^\"'=<>`\\x00-\\x20]+",rpe="'[^']*'",ape='"[^"]*"',ipe="(?:"+npe+"|"+rpe+"|"+ape+")",spe="(?:\\s+"+tpe+"(?:\\s*=\\s*"+ipe+")?)",UB="<[A-Za-z][A-Za-z0-9\\-]*"+spe+"*\\s*\\/?>",VB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",ope="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",lpe="<[?][\\s\\S]*?[?]>",cpe="<![A-Za-z][^>]*>",upe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",dpe=new RegExp("^(?:"+UB+"|"+VB+"|"+ope+"|"+lpe+"|"+cpe+"|"+upe+")"),fpe=new RegExp("^(?:"+UB+"|"+VB+")"),Ph=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+epe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(fpe.source+"\\s*$"),/^$/,!1]];function hpe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let s=e.src.slice(a,i),o=0;for(;o<Ph.length&&!Ph[o][0].test(s);o++);if(o===Ph.length)return!1;if(r)return Ph[o][2];let l=t+1;if(!Ph[o][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],s=e.src.slice(a,i),Ph[o][1].test(s)){s.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function ppe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(a);if(s!==35||a>=i)return!1;let o=1;for(s=e.src.charCodeAt(++a);s===35&&a<i&&o<=6;)o++,s=e.src.charCodeAt(++a);if(o>6||a<i&&!Br(s))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&Br(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const u=e.push("heading_open","h"+String(o),1);u.markup="########".slice(0,o),u.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function mpe(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,s,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let g=e.bMarks[o]+e.tShift[o];const b=e.eMarks[o];if(g<b&&(s=e.src.charCodeAt(g),(s===45||s===61)&&(g=e.skipChars(g,s),g=e.skipSpaces(g),g>=b))){i=s===61?1:2;break}}if(e.sCount[o]<0)continue;let m=!1;for(let g=0,b=r.length;g<b;g++)if(r[g](e,o,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const u=e.push("heading_open","h"+String(i),1);u.markup=String.fromCharCode(s),u.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(s),e.parentType=a,!0}function gpe(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let u=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){u=!0;break}if(u)break}const s=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const mw=[["table",Ghe,["paragraph","reference"]],["code",Whe],["fence",Khe,["paragraph","reference","blockquote","list"]],["blockquote",Zhe,["paragraph","reference","blockquote","list"]],["hr",Yhe,["paragraph","reference","blockquote","list"]],["list",Jhe,["paragraph","reference","blockquote"]],["reference",Qhe],["html_block",hpe,["paragraph","reference","blockquote"]],["heading",ppe,["paragraph","reference","blockquote"]],["lheading",mpe],["paragraph",gpe]];function d_(){this.ruler=new es;for(let e=0;e<mw.length;e++)this.ruler.push(mw[e][0],mw[e][1],{alt:(mw[e][2]||[]).slice()})}d_.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let s=t,o=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let u=!1;for(let d=0;d<a;d++)if(u=r[d](e,s,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),s=e.line,s<n&&e.isEmpty(s)&&(o=!0,s++,e.line=s)}};d_.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};d_.prototype.State=Sl;function Qy(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Qy.prototype.pushPending=function(){const e=new Io("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Qy.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Io(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};Qy.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const s=i-e,o=i<n?this.src.charCodeAt(i):32,l=H0(a)||V0(String.fromCharCode(a)),u=H0(o)||V0(String.fromCharCode(o)),d=U0(a),h=U0(o),m=!h&&(!u||d||l),g=!d&&(!l||h||u);return{can_open:m&&(t||!g||l),can_close:g&&(t||!m||u),length:s}};Qy.prototype.Token=Io;function ype(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function bpe(e,t){let n=e.pos;for(;n<e.posMax&&!ype(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const vpe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function wpe(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(vpe);if(!a)return!1;const i=a[1],s=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!s)return!1;let o=s.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(o);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=o.length-i.length,!0}function xpe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Br(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const MN=[];for(let e=0;e<256;e++)MN.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){MN[e.charCodeAt(0)]=1});function _pe(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Br(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=e.src[n+1],n++)}const s="\\"+i;if(!t){const o=e.push("text_special","",0);a<256&&MN[a]!==0?o.content=i:o.content=s,o.markup=s,o.info="escape"}return e.pos=n+1,!0}function Spe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(a,n),o=s.length;if(e.backticksScanned&&(e.backticks[o]||0)<=a)return t||(e.pending+=s),e.pos+=o,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===o){if(!t){const h=e.push("code_inline","code",0);h.markup=s,h.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=u}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=o,!0}function Epe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const s=String.fromCharCode(r);if(i<2)return!1;let o;i%2&&(o=e.push("text","",0),o.content=s,i--);for(let l=0;l<i;l+=2)o=e.push("text","",0),o.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function jM(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const s=t[i];if(s.marker!==126||s.end===-1)continue;const o=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const i=r.pop();let s=i+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,i!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[i],e.tokens[i]=n)}}function Cpe(e){const t=e.tokens_meta,n=e.tokens_meta.length;jM(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&jM(e,t[r].delimiters)}const HB={tokenize:Epe,postProcess:Cpe};function Tpe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function DM(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],s=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,o=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?o+o:o,l.content="";const u=e.tokens[i.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?o+o:o,u.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function kpe(e){const t=e.tokens_meta,n=e.tokens_meta.length;DM(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&DM(e,t[r].delimiters)}const qB={tokenize:Tpe,postProcess:kpe};function Ape(e,t){let n,r,a,i,s="",o="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let b=g+1;if(b<h&&e.src.charCodeAt(b)===40){for(u=!1,b++;b<h&&(n=e.src.charCodeAt(b),!(!Br(n)&&n!==10));b++);if(b>=h)return!1;if(l=b,a=e.md.helpers.parseLinkDestination(e.src,b,e.posMax),a.ok){for(s=e.md.normalizeLink(a.str),e.md.validateLink(s)?b=a.pos:s="",l=b;b<h&&(n=e.src.charCodeAt(b),!(!Br(n)&&n!==10));b++);if(a=e.md.helpers.parseLinkTitle(e.src,b,e.posMax),b<h&&l!==b&&a.ok)for(o=a.str,b=a.pos;b<h&&(n=e.src.charCodeAt(b),!(!Br(n)&&n!==10));b++);}(b>=h||e.src.charCodeAt(b)!==41)&&(u=!0),b++}if(u){if(typeof e.env.references>"u")return!1;if(b<h&&e.src.charCodeAt(b)===91?(l=b+1,b=e.md.helpers.parseLinkLabel(e,b),b>=0?r=e.src.slice(l,b++):b=g+1):b=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[u_(r)],!i)return e.pos=d,!1;s=i.href,o=i.title}if(!t){e.pos=m,e.posMax=g;const v=e.push("link_open","a",1),x=[["href",s]];v.attrs=x,o&&x.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=b,e.posMax=h,!0}function Npe(e,t){let n,r,a,i,s,o,l,u,d="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,b=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(b<0)return!1;if(i=b+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);if(i>=m)return!1;for(u=i,o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),o.ok&&(d=e.md.normalizeLink(o.str),e.md.validateLink(d)?i=o.pos:d=""),u=i;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);if(o=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&u!==i&&o.ok)for(l=o.str,i=o.pos;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);else l="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(u=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(u,i++):i=b+1):i=b+1,a||(a=e.src.slice(g,b)),s=e.env.references[u_(a)],!s)return e.pos=h,!1;d=s.href,l=s.title}if(!t){r=e.src.slice(g,b);const v=[];e.md.inline.parse(r,e.md,e.env,v);const x=e.push("image","img",0),w=[["src",d],["alt",""]];x.attrs=w,x.children=v,x.content=r,l&&w.push(["title",l])}return e.pos=i,e.posMax=m,!0}const Rpe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Ipe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function jpe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const i=e.src.slice(r+1,n);if(Ipe.test(i)){const s=e.md.normalizeLink(i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}if(Rpe.test(i)){const s=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}return!1}function Dpe(e){return/^<a[>\s]/i.test(e)}function Mpe(e){return/^<\/a\s*>/i.test(e)}function Ope(e){const t=e|32;return t>=97&&t<=122}function Ppe(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!Ope(a))return!1;const i=e.src.slice(r).match(dpe);if(!i)return!1;if(!t){const s=e.push("html_inline","",0);s.content=i[0],Dpe(s.content)&&e.linkLevel++,Mpe(s.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const Fpe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Lpe=/^&([a-z][a-z0-9]{1,31});/i;function Bpe(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(Fpe);if(i){if(!t){const s=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=e.push("text_special","",0);o.content=jN(s)?Hx(s):Hx(65533),o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(Lpe);if(i){const s=FB(i[0]);if(s!==i[0]){if(!t){const o=e.push("text_special","",0);o.content=s,o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function MM(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let s=0;s<n;s++){const o=e[s];if(i.push(0),(e[r].marker!==o.marker||a!==o.token-1)&&(r=s),a=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let u=r-i[r]-1,d=u;for(;u>l;u-=i[u]+1){const h=e[u];if(h.marker===o.marker&&h.open&&h.end<0){let m=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(m=!0),!m){const g=u>0&&!e[u-1].open?i[u-1]+1:0;i[s]=s-u+g,i[u]=g,o.open=!1,h.end=s,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=d)}}function $pe(e){const t=e.tokens_meta,n=e.tokens_meta.length;MM(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&MM(t[r].delimiters)}function zpe(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const SC=[["text",bpe],["linkify",wpe],["newline",xpe],["escape",_pe],["backticks",Spe],["strikethrough",HB.tokenize],["emphasis",qB.tokenize],["link",Ape],["image",Npe],["autolink",jpe],["html_inline",Ppe],["entity",Bpe]],EC=[["balance_pairs",$pe],["strikethrough",HB.postProcess],["emphasis",qB.postProcess],["fragments_join",zpe]];function eb(){this.ruler=new es;for(let e=0;e<SC.length;e++)this.ruler.push(SC[e][0],SC[e][1]);this.ruler2=new es;for(let e=0;e<EC.length;e++)this.ruler2.push(EC[e][0],EC[e][1])}eb.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let s=!1;if(e.level<a){for(let o=0;o<r;o++)if(e.level++,s=n[o](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,i[t]=e.pos};eb.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let s=!1;if(e.level<a){for(let o=0;o<n;o++)if(s=t[o](e,!1),s){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};eb.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),s=i.length;for(let o=0;o<s;o++)i[o](a)};eb.prototype.State=Qy;function Upe(e){const t={};e=e||{},t.src_Any=jB.source,t.src_Cc=DB.source,t.src_Z=OB.source,t.src_P=RN.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><｜]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function sk(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function f_(e){return Object.prototype.toString.call(e)}function Vpe(e){return f_(e)==="[object String]"}function Hpe(e){return f_(e)==="[object Object]"}function qpe(e){return f_(e)==="[object RegExp]"}function OM(e){return f_(e)==="[object Function]"}function Gpe(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const GB={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Wpe(e){return Object.keys(e||{}).reduce(function(t,n){return t||GB.hasOwnProperty(n)},!1)}const Kpe={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},Zpe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Ype="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function Xpe(e){e.__index__=-1,e.__text_cache__=""}function Jpe(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function PM(){return function(e,t){t.normalize(e)}}function qx(e){const t=e.re=Upe(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Zpe),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[o]=u,Hpe(l)){qpe(l.validate)?u.validate=Jpe(l.validate):OM(l.validate)?u.validate=l.validate:i(o,l),OM(l.normalize)?u.normalize=l.normalize:l.normalize?i(o,l):u.normalize=PM();return}if(Vpe(l)){a.push(o);return}i(o,l)}),a.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:PM()};const s=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(Gpe).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Xpe(e)}function Qpe(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function ok(e,t){const n=new Qpe(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function xs(e,t){if(!(this instanceof xs))return new xs(e,t);t||Wpe(e)&&(t=e,e={}),this.__opts__=sk({},GB,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=sk({},Kpe,e),this.__compiled__={},this.__tlds__=Ype,this.__tlds_replaced__=!1,this.re={},qx(this)}xs.prototype.add=function(t,n){return this.__schemas__[t]=n,qx(this),this};xs.prototype.set=function(t){return this.__opts__=sk(this.__opts__,t),this};xs.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,s,o,l,u,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(s=a.index+a[1].length,o=a.index+a[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o))),this.__index__>=0};xs.prototype.pretest=function(t){return this.re.pretest.test(t)};xs.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};xs.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(ok(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(ok(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};xs.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,ok(this,0)):null};xs.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),qx(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,qx(this),this)};xs.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};xs.prototype.onCompile=function(){};const ip=2147483647,ol=36,ON=1,q0=26,eme=38,tme=700,WB=72,KB=128,ZB="-",nme=/^xn--/,rme=/[^\0-\x7F]/,ame=/[\x2E\u3002\uFF0E\uFF61]/g,ime={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},CC=ol-ON,ll=Math.floor,TC=String.fromCharCode;function _u(e){throw new RangeError(ime[e])}function sme(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function YB(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(ame,".");const a=e.split("."),i=sme(a,t).join(".");return r+i}function XB(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const ome=e=>String.fromCodePoint(...e),lme=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:ol},FM=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},JB=function(e,t,n){let r=0;for(e=n?ll(e/tme):e>>1,e+=ll(e/t);e>CC*q0>>1;r+=ol)e=ll(e/CC);return ll(r+(CC+1)*e/(e+eme))},QB=function(e){const t=[],n=e.length;let r=0,a=KB,i=WB,s=e.lastIndexOf(ZB);s<0&&(s=0);for(let o=0;o<s;++o)e.charCodeAt(o)>=128&&_u("not-basic"),t.push(e.charCodeAt(o));for(let o=s>0?s+1:0;o<n;){const l=r;for(let d=1,h=ol;;h+=ol){o>=n&&_u("invalid-input");const m=lme(e.charCodeAt(o++));m>=ol&&_u("invalid-input"),m>ll((ip-r)/d)&&_u("overflow"),r+=m*d;const g=h<=i?ON:h>=i+q0?q0:h-i;if(m<g)break;const b=ol-g;d>ll(ip/b)&&_u("overflow"),d*=b}const u=t.length+1;i=JB(r-l,u,l==0),ll(r/u)>ip-a&&_u("overflow"),a+=ll(r/u),r%=u,t.splice(r++,0,a)}return String.fromCodePoint(...t)},e$=function(e){const t=[];e=XB(e);const n=e.length;let r=KB,a=0,i=WB;for(const l of e)l<128&&t.push(TC(l));const s=t.length;let o=s;for(s&&t.push(ZB);o<n;){let l=ip;for(const d of e)d>=r&&d<l&&(l=d);const u=o+1;l-r>ll((ip-a)/u)&&_u("overflow"),a+=(l-r)*u,r=l;for(const d of e)if(d<r&&++a>ip&&_u("overflow"),d===r){let h=a;for(let m=ol;;m+=ol){const g=m<=i?ON:m>=i+q0?q0:m-i;if(h<g)break;const b=h-g,v=ol-g;t.push(TC(FM(g+b%v,0))),h=ll(b/v)}t.push(TC(FM(h,0))),i=JB(a,u,o===s),a=0,++o}++a,++r}return t.join("")},cme=function(e){return YB(e,function(t){return nme.test(t)?QB(t.slice(4).toLowerCase()):t})},ume=function(e){return YB(e,function(t){return rme.test(t)?"xn--"+e$(t):t})},t$={version:"2.3.1",ucs2:{decode:XB,encode:ome},decode:QB,encode:e$,toASCII:ume,toUnicode:cme},dme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},fme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},hme={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},pme={default:dme,zero:fme,commonmark:hme},mme=/^(vbscript|javascript|file|data):/,gme=/^data:image\/(gif|png|jpeg|webp);/;function yme(e){const t=e.trim().toLowerCase();return mme.test(t)?gme.test(t):!0}const n$=["http:","https:","mailto:"];function bme(e){const t=NN(e,!0);if(t.hostname&&(!t.protocol||n$.indexOf(t.protocol)>=0))try{t.hostname=t$.toASCII(t.hostname)}catch{}return Jy(AN(t))}function vme(e){const t=NN(e,!0);if(t.hostname&&(!t.protocol||n$.indexOf(t.protocol)>=0))try{t.hostname=t$.toUnicode(t.hostname)}catch{}return kp(AN(t),kp.defaultChars+"%")}function Ws(e,t){if(!(this instanceof Ws))return new Ws(e,t);t||IN(e)||(t=e||{},e="default"),this.inline=new eb,this.block=new d_,this.core=new DN,this.renderer=new rm,this.linkify=new xs,this.validateLink=yme,this.normalizeLink=bme,this.normalizeLinkText=vme,this.utils=xhe,this.helpers=c_({},Che),this.options={},this.configure(e),t&&this.set(t)}Ws.prototype.set=function(e){return c_(this.options,e),this};Ws.prototype.configure=function(e){const t=this;if(IN(e)){const n=e;if(e=pme[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Ws.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Ws.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Ws.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Ws.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Ws.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Ws.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Ws.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const kC=new Ws({html:!1,linkify:!0,breaks:!0});function PN(e){return T.useMemo(()=>{var n;if(!e)return[];try{const r=kC.parse(e,{}),a=[];let i="",s=0;for(;s<r.length;){const o=r[s];if(o.type==="fence"){i&&(a.push(i),i="");const l=((n=o.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:o.content}),s++}else{const l=[];for(;s<r.length&&r[s].type!=="fence";)l.push(r[s]),s++;l.length>0&&(i+=kC.renderer.render(l,kC.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const wme=({markdownContent:e})=>{const t=PN(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return p.jsx(Vp,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},FN=gt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var v,x;const a=pr(w=>w.foldUserMessagesOnCompletion),[i,s]=T.useState(r&&a),[o,l]=T.useState(!1);T.useEffect(()=>{r&&a&&s(!0)},[r,a]);const u=t?IB(new Date(t),{addSuffix:!0}):"Sending...",d=((v=e.metadata)==null?void 0:v.attachedFiles)&&e.metadata.attachedFiles.length>0,h=e.content&&e.content.trim().length>0,m=T.useCallback(()=>s(w=>!w),[]),g=T.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),Ge.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(w){Ge.error("Failed to copy prompt."),console.error("Clipboard copy failed:",w)}},[e.content]),b=T.useMemo(()=>{var _;let w="";return h&&(w+=`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`),h&&d&&(w+=" + "),d&&(w+=`${(_=e.metadata.attachedFiles)==null?void 0:_.length} file(s)`),w||"[Empty Prompt]"},[h,d,e.content,e.metadata]);return p.jsxs("div",{className:xt("user-prompt relative group/user overflow-wrap-anywhere",n),children:[p.jsxs("div",{className:xt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[p.jsx(IY,{className:"h-4 w-4 text-primary flex-shrink-0"}),p.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[h&&p.jsx(Dn,{tooltipText:"Copy Prompt",onClick:g,"aria-label":"Copy user prompt",icon:o?p.jsx(Ri,{className:"text-green-500"}):p.jsx(aA,{}),className:"h-5 w-5"}),(h||d)&&p.jsx(Dn,{tooltipText:i?"Unfold":"Fold",onClick:m,"aria-label":i?"Unfold prompt":"Fold prompt",icon:i?p.jsx(wl,{}):p.jsx(Ju,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:u})})]}),!i&&p.jsxs(p.Fragment,{children:[d&&p.jsx("div",{className:"mb-2 space-y-1",children:(x=e.metadata.attachedFiles)==null?void 0:x.map(w=>p.jsx(kN,{fileMeta:w,isReadOnly:!0},w.id))}),p.jsx(wme,{markdownContent:e.content})]}),i&&p.jsx("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:m,children:b})]})});FN.displayName="UserPromptDisplay";const LM=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,xme=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i,promptTokens:s,completionTokens:o,timeToFirstToken:l,generationTime:u})=>{const[d,h]=T.useState(!1),m=T.useCallback(async()=>{if(!n||typeof n!="string"){Ge.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),h(!0),Ge.success("Assistant response copied!"),setTimeout(()=>h(!1),1500)}catch(b){Ge.error("Failed to copy response."),console.error("Clipboard copy failed:",b)}},[n]),g=s!==void 0&&o!==void 0?s+o:void 0;return p.jsxs("div",{className:xt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(OK,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[g!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(eZ,{className:"h-3 w-3"}),p.jsx("span",{children:g.toLocaleString()})]}),p.jsxs(Yn,{side:"bottom",children:["Tokens: ",s??"?"," (Prompt) +"," ",o??"?"," (Completion) = ",g]})]})}),l!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(LY,{className:"h-3 w-3"}),p.jsx("span",{children:LM(l)})]}),p.jsx(Yn,{side:"bottom",children:"Time to First Token"})]})}),u!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(KK,{className:"h-3 w-3"}),p.jsx("span",{children:LM(u)})]}),p.jsx(Yn,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),p.jsxs("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:[p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[n&&typeof n=="string"&&p.jsx(Dn,{tooltipText:"Copy Response",onClick:m,"aria-label":"Copy assistant response",icon:d?p.jsx(Ri,{className:"text-green-500"}):p.jsx(aA,{}),className:"h-5 w-5"}),i&&p.jsx(Dn,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?p.jsx(wl,{}):p.jsx(Ju,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]})]})},_me=({interactionId:e,currentRating:t})=>{const n=Mn(i=>i.rateInteraction),r=i=>{n(e,i===t?null:i)},a=Array.from({length:11},(i,s)=>s-5);return p.jsx("div",{className:"flex items-center gap-1",children:a.map(i=>{let s="";i===-5?s="Terrible":i===-4?s="Very Bad":i===-3?s="Bad":i===-2?s="Poor":i===-1?s="Below Average":i===0?s="Neutral":i===1?s="Above Average":i===2?s="Good":i===3?s="Very Good":i===4?s="Excellent":i===5&&(s="Perfect");let o="text-muted-foreground",l="hover:text-foreground",u="";i<0?(l="hover:text-red-500",t===i&&(o="text-red-500",u="fill-red-500")):i===0?(l="hover:text-gray-500",t===i&&(o="text-gray-500",u="fill-gray-500")):(l="hover:text-green-500",t===i&&(o="text-green-500",u="fill-green-500"));const d=t===i?"bg-muted":"";return p.jsx(Dn,{tooltipText:s,onClick:()=>r(i),"aria-label":`Rate response as ${s}`,icon:p.jsx(_Y,{className:xt(u,t===i?"fill-current":"fill-none")}),variant:"ghost",className:xt("h-4 w-4 md:h-5 md:w-5 p-0",o,l,d)},i)})})},Sme=({interaction:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},i=()=>{t&&t(e.id)},s=()=>{r&&r(e.id)};return p.jsxs("div",{className:xt("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[p.jsx(_me,{interactionId:e.id,currentRating:e.rating}),r&&p.jsx(Dn,{tooltipText:"Edit",onClick:s,"aria-label":"Edit User Prompt",icon:p.jsx(Vg,{}),className:"h-5 w-5 md:h-6 md:w-6"}),t&&p.jsx(Dn,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:p.jsx(m1,{}),className:"h-5 w-5 md:h-6 md:w-6"}),n&&p.jsx(Dn,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:p.jsx(Zi,{}),className:"h-5 w-5 md:h-6 md:w-6 text-destructive hover:text-destructive/80"})]})},Eme=({toolCall:e})=>{const[t,n]=T.useState(!0),r=()=>n(i=>!i),a=T.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return p.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Dn,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?p.jsx(wl,{}):p.jsx(Ju,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(Vp,{lang:"json",code:a})]})},Cme=({toolResult:e})=>{const[t,n]=T.useState(!0),r=()=>n(s=>!s),a=T.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return p.jsxs("div",{className:xt("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:xt("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Dn,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?p.jsx(wl,{}):p.jsx(Ju,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(Vp,{lang:i?"text":"json",code:a})]})},Tme=({markdownContent:e})=>{const t=PN(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return p.jsx(Vp,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},kme=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:s,toggleFold:o})=>{const[l,u]=T.useState(!0),d=T.useCallback(()=>u(v=>!v),[]),h=!!r,m=e&&(typeof e!="string"||e.trim().length>0),g=t&&t.length>0,b=n&&n.length>0;return s?p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:o,children:[h?"[Reasoning] ":"",g?`[${t==null?void 0:t.length} Tool Call(s)] `:"",m&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:g||b||h?"":"[No text response]"]}):p.jsxs(p.Fragment,{children:[a&&i&&p.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:i})]}),h&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(Mp,{className:"h-3.5 w-3.5"})," Reasoning"]}),p.jsx(Dn,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:d,"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?p.jsx(wl,{}):p.jsx(Ju,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!l&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:r})]}),t==null?void 0:t.map((v,x)=>{try{const w=JSON.parse(v);return p.jsx(Eme,{toolCall:w},`call-${x}`)}catch(w){return console.error("Failed to parse tool call string:",w),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${x}`)}}),n==null?void 0:n.map((v,x)=>{try{const w=JSON.parse(v);return p.jsx(Cme,{toolResult:w},`res-${x}`)}catch(w){return console.error("Failed to parse tool result string:",w),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${x}`)}}),p.jsx(Tme,{markdownContent:e}),!m&&!g&&!b&&!h&&p.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},r$=gt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var C,k,I,j,N,P,L,H,M,K,q,ue;const[i,s]=T.useState(!1),{dbProviderConfigs:o,getAllAvailableModelDefsForProvider:l}=Un(dn(ae=>({dbProviderConfigs:ae.dbProviderConfigs,getAllAvailableModelDefsForProvider:ae.getAllAvailableModelDefsForProvider}))),u=T.useCallback(()=>s(ae=>!ae),[]),d=e.endedAt?IB(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=T.useMemo(()=>{var ne;const ae=(ne=e.metadata)==null?void 0:ne.modelId;if(!ae)return"Unknown Model";const{providerId:te,modelId:Y}=Ac(ae);if(!te||!Y)return ae;const ie=o.find(he=>he.id===te),V=(ie==null?void 0:ie.name)??te,Q=l(te).find(he=>he.id===Y);return`${(Q==null?void 0:Q.name)??Y} (${V})`},[(C=e.metadata)==null?void 0:C.modelId,o,l]),m=e.status==="COMPLETED",g=m||e.status==="ERROR",b=e.status==="ERROR",v=e.response&&(typeof e.response!="string"||e.response.trim().length>0),x=((k=e.metadata)==null?void 0:k.toolCalls)&&e.metadata.toolCalls.length>0,w=((I=e.metadata)==null?void 0:I.toolResults)&&e.metadata.toolResults.length>0,_=!!((j=e.metadata)!=null&&j.reasoning),E=v||x||w||_;return p.jsxs("div",{className:xt("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",b?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&p.jsx(FN,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:m}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[p.jsx(xme,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:u,canFold:E,promptTokens:(N=e.metadata)==null?void 0:N.promptTokens,completionTokens:(P=e.metadata)==null?void 0:P.completionTokens,timeToFirstToken:(L=e.metadata)==null?void 0:L.timeToFirstToken,generationTime:(H=e.metadata)==null?void 0:H.generationTime}),p.jsx(kme,{response:e.response,toolCalls:(M=e.metadata)==null?void 0:M.toolCalls,toolResults:(K=e.metadata)==null?void 0:K.toolResults,reasoning:(q=e.metadata)==null?void 0:q.reasoning,isError:b,errorMessage:(ue=e.metadata)==null?void 0:ue.error,isFolded:i,toggleFold:u})]}),g&&p.jsx(Sme,{interaction:e,onEdit:r,onRegenerate:t,onDelete:n})]})});r$.displayName="InteractionCard";const BM=(e,t,n,r)=>{if(typeof e=="string")return e.trim()?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const a=e,i=a.lang?`language-${a.lang}`:"language-plaintext";return n?p.jsx(Vp,{lang:a.lang,code:a.code,isStreaming:r},`code-${t}`):p.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[p.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:p.jsx("div",{className:"text-sm font-medium",children:a.lang?a.lang.toUpperCase():"CODE"})}),p.jsx("code",{className:xt(i,"block p-4 font-mono text-sm leading-relaxed"),children:a.code})]},`pre-${t}`)}return null},Ame=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=pr(dn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,enableStreamingCodeBlockParsing:m.enableStreamingCodeBlockParsing}))),i=PN(r?e:null),[s,o]=T.useState([]),[l,u]=T.useState(null),d=T.useRef(0);T.useEffect(()=>{if(!r){o([]),u(e??null),d.current=0;return}const m=d.current,g=i.slice(m,i.length-1);if(g.length>0){const v=g.map((x,w)=>BM(x,m+w,a,!1)).filter(x=>x!==null);o(x=>[...x,...v]),d.current+=g.length}const b=i.length>0?i[i.length-1]:null;JSON.stringify(b)!==JSON.stringify(l)&&u(b),e||(o([]),u(null),d.current=0)},[i,r,a,l,e]);const h=T.useMemo(()=>!l||!r?null:BM(l,d.current,a,!0),[l,a,r]);return!(e!=null&&e.trim())&&s.length===0?p.jsx("div",{className:xt("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."}):r?p.jsxs("div",{className:xt(n),children:[s,h]}):p.jsx("pre",{className:xt("whitespace-pre-wrap text-sm",n),children:e})},Nme=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>p.jsx(Dn,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:p.jsx(wY,{}),variant:r,size:n,className:t}),lk=gt.memo(({interactionId:e,onStop:t,className:n})=>{var E;const{interaction:r,interactionStatus:a}=Mn(dn(C=>{const k=C.interactions.find(I=>I.id===e);return{interaction:k,interactionStatus:k==null?void 0:k.status}})),i=pr(C=>C.streamingRenderFPS),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(!0),m=T.useRef(null),g=T.useRef(0);T.useEffect(()=>{const C=1e3/i;let k=!0;const I=j=>{if(!k)return;if(Mn.getState().streamingInteractionIds.includes(e)){if(j-g.current>=C){const P=Mn.getState().activeStreamBuffers[e]??"",L=Mn.getState().activeReasoningBuffers[e]??"";o(P),u(L),g.current=j}m.current=requestAnimationFrame(I)}else{const P=Mn.getState().activeStreamBuffers[e]??"",L=Mn.getState().activeReasoningBuffers[e]??"";o(P),u(L),m.current=null}};return m.current=requestAnimationFrame(I),()=>{k=!1,m.current&&(cancelAnimationFrame(m.current),m.current=null)}},[e,i]),T.useEffect(()=>{if(a&&a!=="STREAMING"){const C=Mn.getState().activeStreamBuffers[e]??"",k=Mn.getState().activeReasoningBuffers[e]??"";o(C),u(k),m.current&&(cancelAnimationFrame(m.current),m.current=null)}},[a,e]);const{dbProviderConfigs:b,getAllAvailableModelDefsForProvider:v}=Un(dn(C=>({dbProviderConfigs:C.dbProviderConfigs,getAllAvailableModelDefsForProvider:C.getAllAvailableModelDefsForProvider}))),x=T.useMemo(()=>{var H;const C=(H=r==null?void 0:r.metadata)==null?void 0:H.modelId;if(!C)return"Loading Model...";const{providerId:k,modelId:I}=Ac(C);if(!k||!I)return C;const j=b.find(M=>M.id===k),N=(j==null?void 0:j.name)??k,L=v(k).find(M=>M.id===I);return`${(L==null?void 0:L.name)??I} (${N})`},[(E=r==null?void 0:r.metadata)==null?void 0:E.modelId,b,v]),w=T.useCallback(()=>h(C=>!C),[]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),p.jsxs("div",{className:xt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[p.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const _=()=>{t&&t(e)};return p.jsxs("div",{className:xt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&p.jsx(FN,{turnData:r.prompt,timestamp:r.startedAt,isAssistantComplete:!1}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",x,")"]}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),l&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(Mp,{className:"h-3.5 w-3.5"})," Reasoning (Streaming)"]}),p.jsx(Dn,{tooltipText:d?"Show Reasoning":"Hide Reasoning",onClick:w,"aria-label":d?"Show reasoning":"Hide reasoning",icon:d?p.jsx(wl,{}):p.jsx(Ju,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!d&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:l})]}),p.jsx(Ame,{markdownContent:s,isStreaming:!0})]}),t&&p.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200",children:p.jsx(Nme,{onStop:_,"aria-label":"Stop Generation"})})]})});lk.displayName="StreamingInteractionCard";var Rme=T.createContext(void 0);function am(e){const t=T.useContext(Rme);return e||t||"ltr"}function G0(e,[t,n]){return Math.min(n,Math.max(t,e))}function Ime(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var LN="ScrollArea",[a$,A3e]=vi(LN),[jme,Qs]=a$(LN),i$=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,l]=T.useState(null),[u,d]=T.useState(null),[h,m]=T.useState(null),[g,b]=T.useState(null),[v,x]=T.useState(null),[w,_]=T.useState(0),[E,C]=T.useState(0),[k,I]=T.useState(!1),[j,N]=T.useState(!1),P=kn(t,H=>l(H)),L=am(a);return p.jsx(jme,{scope:n,type:r,dir:L,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:b,scrollbarXEnabled:k,onScrollbarXEnabledChange:I,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:j,onScrollbarYEnabledChange:N,onCornerWidthChange:_,onCornerHeightChange:C,children:p.jsx(an.div,{dir:L,...s,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});i$.displayName=LN;var s$="ScrollAreaViewport",o$=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,s=Qs(s$,n),o=T.useRef(null),l=kn(t,o,s.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),p.jsx(an.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});o$.displayName=s$;var El="ScrollAreaScrollbar",l$=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Qs(El,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o=e.orientation==="horizontal";return T.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),a.type==="hover"?p.jsx(Dme,{...r,ref:t,forceMount:n}):a.type==="scroll"?p.jsx(Mme,{...r,ref:t,forceMount:n}):a.type==="auto"?p.jsx(c$,{...r,ref:t,forceMount:n}):a.type==="always"?p.jsx(BN,{...r,ref:t}):null});l$.displayName=El;var Dme=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Qs(El,e.__scopeScrollArea),[i,s]=T.useState(!1);return T.useEffect(()=>{const o=a.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),p.jsx(Ka,{present:n||i,children:p.jsx(c$,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Mme=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Qs(El,e.__scopeScrollArea),i=e.orientation==="horizontal",s=p_(()=>l("SCROLL_END"),100),[o,l]=Ime("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,a.scrollHideDelay,l]),T.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const g=u[d];h!==g&&(l("SCROLL"),s()),h=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,l,s]),p.jsx(Ka,{present:n||o!=="hidden",children:p.jsx(BN,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:qt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:qt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),c$=T.forwardRef((e,t)=>{const n=Qs(El,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,s]=T.useState(!1),o=e.orientation==="horizontal",l=p_(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?u:d)}},10);return Np(n.viewport,l),Np(n.content,l),p.jsx(Ka,{present:r||i,children:p.jsx(BN,{"data-state":i?"visible":"hidden",...a,ref:t})})}),BN=T.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Qs(El,e.__scopeScrollArea),i=T.useRef(null),s=T.useRef(0),[o,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=p$(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:m=>s.current=m};function h(m,g){return $me(m,s.current,o,g)}return n==="horizontal"?p.jsx(Ome,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=$M(m,o,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?p.jsx(Pme,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=$M(m,o);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),Ome=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Qs(El,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),u=kn(t,l,i.onScrollbarXChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(d$,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":h_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),g$(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Wx(s.paddingLeft),paddingEnd:Wx(s.paddingRight)}})}})}),Pme=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Qs(El,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),u=kn(t,l,i.onScrollbarYChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(d$,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":h_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),g$(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Wx(s.paddingTop),paddingEnd:Wx(s.paddingBottom)}})}})}),[Fme,u$]=a$(El),d$=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,g=Qs(El,n),[b,v]=T.useState(null),x=kn(t,P=>v(P)),w=T.useRef(null),_=T.useRef(""),E=g.viewport,C=r.content-r.viewport,k=Ua(d),I=Ua(l),j=p_(h,10);function N(P){if(w.current){const L=P.clientX-w.current.left,H=P.clientY-w.current.top;u({x:L,y:H})}}return T.useEffect(()=>{const P=L=>{const H=L.target;(b==null?void 0:b.contains(H))&&k(L,C)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[E,b,C,k]),T.useEffect(I,[r,I]),Np(b,j),Np(g.content,j),p.jsx(Fme,{scope:n,scrollbar:b,hasThumb:a,onThumbChange:Ua(i),onThumbPointerUp:Ua(s),onThumbPositionChange:I,onThumbPointerDown:Ua(o),children:p.jsx(an.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:qt(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),w.current=b.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),N(P))}),onPointerMove:qt(e.onPointerMove,N),onPointerUp:qt(e.onPointerUp,P=>{const L=P.target;L.hasPointerCapture(P.pointerId)&&L.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})})})}),Gx="ScrollAreaThumb",f$=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=u$(Gx,e.__scopeScrollArea);return p.jsx(Ka,{present:n||a.hasThumb,children:p.jsx(Lme,{ref:t,...r})})}),Lme=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Qs(Gx,n),s=u$(Gx,n),{onThumbPositionChange:o}=s,l=kn(t,h=>s.onThumbChange(h)),u=T.useRef(void 0),d=p_(()=>{u.current&&(u.current(),u.current=void 0)},100);return T.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!u.current){const g=zme(h,o);u.current=g,o()}};return o(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,o]),p.jsx(an.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:qt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),b=h.clientX-g.left,v=h.clientY-g.top;s.onThumbPointerDown({x:b,y:v})}),onPointerUp:qt(e.onPointerUp,s.onThumbPointerUp)})});f$.displayName=Gx;var $N="ScrollAreaCorner",h$=T.forwardRef((e,t)=>{const n=Qs($N,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(Bme,{...e,ref:t}):null});h$.displayName=$N;var Bme=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Qs($N,n),[i,s]=T.useState(0),[o,l]=T.useState(0),u=!!(i&&o);return Np(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),Np(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),s(d)}),u?p.jsx(an.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Wx(e){return e?parseInt(e,10):0}function p$(e,t){const n=e/t;return isNaN(n)?0:n}function h_(e){const t=p$(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function $me(e,t,n,r="ltr"){const a=h_(n),i=a/2,s=t||i,o=a-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return m$([l,u],h)(e)}function $M(e,t,n="ltr"){const r=h_(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-r,l=n==="ltr"?[0,s]:[s*-1,0],u=G0(e,l);return m$([0,s],[0,o])(u)}function m$(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function g$(e,t){return e>0&&e<t}var zme=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,o=n.top!==i.top;(s||o)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function p_(e,t){const n=Ua(e),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Np(e,t){const n=Ua(t);ri(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Ume=i$,Vme=o$,Hme=h$;function Ku({className:e,children:t,...n}){return p.jsxs(Ume,{"data-slot":"scroll-area",className:xt("relative",e),...n,children:[p.jsx(Vme,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),p.jsx(qme,{}),p.jsx(Hme,{})]})}function qme({className:e,orientation:t="vertical",...n}){return p.jsx(l$,{"data-slot":"scroll-area-scrollbar",orientation:t,className:xt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:p.jsx(f$,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function lr({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:xt("bg-accent animate-pulse rounded-md",e),...t})}const Gme=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})},Ji=Ks(Zs(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:t=>{e(n=>{n.isVfsModalOpen=t??!n.isVfsModalOpen})}})));function y$({className:e,...t}){return p.jsx("div",{"data-slot":"card",className:xt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function b$({className:e,...t}){return p.jsx("div",{"data-slot":"card-header",className:xt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function v$({className:e,...t}){return p.jsx("div",{"data-slot":"card-title",className:xt("leading-none font-semibold",e),...t})}function Wme({className:e,...t}){return p.jsx("div",{"data-slot":"card-description",className:xt("text-muted-foreground text-sm",e),...t})}function w$({className:e,...t}){return p.jsx("div",{"data-slot":"card-content",className:xt("px-6",e),...t})}const Kme=({title:e,description:t,icon:n,onClick:r})=>p.jsxs(y$,{className:"hover:border-primary/50 hover:bg-muted/30 transition-all cursor-pointer group",onClick:r,children:[p.jsxs(b$,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsxs(v$,{className:"text-sm font-medium flex items-center gap-2",children:[n," ",e]}),p.jsx(IK,{className:"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform"})]}),p.jsx(w$,{children:p.jsx("p",{className:"text-xs text-muted-foreground",children:t})})]}),zM=()=>{const{toggleChatControlPanel:e,setInitialSettingsTabs:t,toggleVfsModal:n}=Ji(dn(s=>({toggleChatControlPanel:s.toggleChatControlPanel,setInitialSettingsTabs:s.setInitialSettingsTabs,toggleVfsModal:s.toggleVfsModal}))),r=(s,o)=>{t(s,o),e("settingsModal",!0)},a=()=>{n(!0)},i=[{title:"Configure Theme",description:"Customize colors, fonts, and code block appearance.",icon:p.jsx(YZ,{className:"h-4 w-4 text-purple-500"}),onClick:()=>r("theme")},{title:"Manage Rules & Tags",description:"Define reusable prompt snippets and organize them.",icon:p.jsx(Gw,{className:"h-4 w-4 text-blue-500"}),onClick:()=>r("rules-tags")},{title:"Add Files",description:"Upload or manage files in the virtual filesystem.",icon:p.jsx(oA,{className:"h-4 w-4 text-cyan-500"}),onClick:a},{title:"Add Provider",description:"Connect to AI services like OpenAI, Ollama, etc.",icon:p.jsx(qw,{className:"h-4 w-4 text-green-500"}),onClick:()=>r("providers","providers-config")},{title:"Add API Key",description:"Store API keys securely in your browser.",icon:p.jsx(t0,{className:"h-4 w-4 text-amber-500"}),onClick:()=>r("providers","api-keys")}];return p.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[p.jsx(Gme,{className:"h-16 w-16 text-muted-foreground mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),p.jsx("p",{className:"text-muted-foreground max-w-md mb-8",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat. You can also explore these setup options:"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-w-3xl w-full",children:i.map(s=>p.jsx(Kme,{title:s.title,description:s.description,icon:s.icon,onClick:s.onClick},s.title))})]})},zN=T.createContext({});function UN(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const VN=typeof window<"u",x$=VN?T.useLayoutEffect:T.useEffect,m_=T.createContext(null),HN=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Zme extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Yme({children:e,isPresent:t,anchorX:n}){const r=T.useId(),a=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=T.useContext(HN);return T.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:d,right:h}=i.current;if(t||!a.current||!o||!l)return;const m=n==="left"?`left: ${d}`:`right: ${h}`;a.current.dataset.motionPopId=r;const g=document.createElement("style");return s&&(g.nonce=s),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${m}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.contains(g)&&document.head.removeChild(g)}},[t]),p.jsx(Zme,{isPresent:t,childRef:a,sizeRef:i,children:T.cloneElement(e,{ref:a})})}const Xme=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:s,anchorX:o})=>{const l=UN(Jme),u=T.useId();let d=!0,h=T.useMemo(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:a,onExitComplete:m=>{l.set(m,!0);for(const g of l.values())if(!g)return;r&&r()},register:m=>(l.set(m,!1),()=>l.delete(m))}),[n,l,r]);return i&&d&&(h={...h}),T.useMemo(()=>{l.forEach((m,g)=>l.set(g,!1))},[n]),T.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),s==="popLayout"&&(e=p.jsx(Yme,{isPresent:n,anchorX:o,children:e})),p.jsx(m_.Provider,{value:h,children:e})};function Jme(){return new Map}function _$(e=!0){const t=T.useContext(m_);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=T.useId();T.useEffect(()=>{if(e)return a(i)},[e]);const s=T.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const gw=e=>e.key||"";function UM(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const Qme=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:s=!1,anchorX:o="left"})=>{const[l,u]=_$(s),d=T.useMemo(()=>UM(e),[e]),h=s&&!l?[]:d.map(gw),m=T.useRef(!0),g=T.useRef(d),b=UN(()=>new Map),[v,x]=T.useState(d),[w,_]=T.useState(d);x$(()=>{m.current=!1,g.current=d;for(let k=0;k<w.length;k++){const I=gw(w[k]);h.includes(I)?b.delete(I):b.get(I)!==!0&&b.set(I,!1)}},[w,h.length,h.join("-")]);const E=[];if(d!==v){let k=[...d];for(let I=0;I<w.length;I++){const j=w[I],N=gw(j);h.includes(N)||(k.splice(I,0,j),E.push(j))}return i==="wait"&&E.length&&(k=E),_(UM(k)),x(d),null}const{forceRender:C}=T.useContext(zN);return p.jsx(p.Fragment,{children:w.map(k=>{const I=gw(k),j=s&&!l?!1:d===w||h.includes(I),N=()=>{if(b.has(I))b.set(I,!0);else return;let P=!0;b.forEach(L=>{L||(P=!1)}),P&&(C==null||C(),_(g.current),s&&(u==null||u()),r&&r())};return p.jsx(Xme,{isPresent:j,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,onExitComplete:j?void 0:N,anchorX:o,children:k},I)})})},yw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],VM={value:null};function ege(e,t){let n=new Set,r=new Set,a=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(h){s.has(h)&&(d.schedule(h),e()),l++,h(o)}const d={schedule:(h,m=!1,g=!1)=>{const v=g&&a?n:r;return m&&s.add(h),v.has(h)||v.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(o=h,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(u),t&&VM.value&&VM.value.frameloop[t].push(l),l=0,n.clear(),a=!1,i&&(i=!1,d.process(h))}};return d}const Ec={},tge=40;function S$(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=yw.reduce((E,C)=>(E[C]=ege(i,t?C:void 0),E),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:h,preRender:m,render:g,postRender:b}=s,v=()=>{const E=Ec.useManualTiming?a.timestamp:performance.now();n=!1,Ec.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(E-a.timestamp,tge),1)),a.timestamp=E,a.isProcessing=!0,o.process(a),l.process(a),u.process(a),d.process(a),h.process(a),m.process(a),g.process(a),b.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(v))},x=()=>{n=!0,r=!0,a.isProcessing||e(v)};return{schedule:yw.reduce((E,C)=>{const k=s[C];return E[C]=(I,j=!1,N=!1)=>(n||x(),k.schedule(I,j,N)),E},{}),cancel:E=>{for(let C=0;C<yw.length;C++)s[yw[C]].cancel(E)},state:a,steps:s}}const qs=e=>e,{schedule:ea,cancel:Zu,state:ti,steps:AC}=S$(typeof requestAnimationFrame<"u"?requestAnimationFrame:qs,!0),E$=T.createContext({strict:!1}),HM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rp={};for(const e in HM)Rp[e]={isEnabled:t=>HM[e].some(n=>!!t[n])};function nge(e){for(const t in e)Rp[t]={...Rp[t],...e[t]}}const rge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Kx(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||rge.has(e)}let C$=e=>!Kx(e);function age(e){e&&(C$=t=>t.startsWith("on")?!Kx(t):e(t))}try{age(require("@emotion/is-prop-valid").default)}catch{}function ige(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(C$(a)||n===!0&&Kx(a)||!t&&!Kx(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}function sge(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const g_=T.createContext({});function y_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function W0(e){return typeof e=="string"||Array.isArray(e)}const qN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],GN=["initial",...qN];function b_(e){return y_(e.animate)||GN.some(t=>W0(e[t]))}function T$(e){return!!(b_(e)||e.variants)}function oge(e,t){if(b_(e)){const{initial:n,animate:r}=e;return{initial:n===!1||W0(n)?n:void 0,animate:W0(r)?r:void 0}}return e.inherit!==!1?t:{}}function lge(e){const{initial:t,animate:n}=oge(e,T.useContext(g_));return T.useMemo(()=>({initial:t,animate:n}),[qM(t),qM(n)])}function qM(e){return Array.isArray(e)?e.join(" "):e}const cge=Symbol.for("motionComponentSymbol");function Wh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function uge(e,t,n){return T.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Wh(n)&&(n.current=r))},[t])}const WN=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dge="framerAppearId",k$="data-"+WN(dge),A$=T.createContext({}),{schedule:KN}=S$(queueMicrotask,!1);function fge(e,t,n,r,a){var v,x;const{visualElement:i}=T.useContext(g_),s=T.useContext(E$),o=T.useContext(m_),l=T.useContext(HN).reducedMotion,u=T.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,h=T.useContext(A$);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&hge(u.current,n,a,h);const m=T.useRef(!1);T.useInsertionEffect(()=>{d&&m.current&&d.update(n,o)});const g=n[k$],b=T.useRef(!!g&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,g))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,g)));return x$(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),KN.render(d.render),b.current&&d.animationState&&d.animationState.animateChanges())}),T.useEffect(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),b.current=!1))}),d}function hge(e,t,n,r){const{layoutId:a,layout:i,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:N$(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!s||o&&Wh(o),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function N$(e){if(e)return e.options.allowProjection!==!1?e.projection:N$(e.parent)}let ZN=()=>{};function pge({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:a}){e&&nge(e);function i(o,l){let u;const d={...T.useContext(HN),...o,layoutId:mge(o)},{isStatic:h}=d,m=lge(o),g=r(o,h);if(!h&&VN){gge();const b=yge(d);u=b.MeasureLayout,m.visualElement=fge(a,g,d,t,b.ProjectionNode)}return p.jsxs(g_.Provider,{value:m,children:[u&&m.visualElement?p.jsx(u,{visualElement:m.visualElement,...d}):null,n(a,o,uge(g,m.visualElement,l),g,h,m.visualElement)]})}i.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const s=T.forwardRef(i);return s[cge]=a,s}function mge({layoutId:e}){const t=T.useContext(zN).id;return t&&e!==void 0?t+"-"+e:e}function gge(e,t){T.useContext(E$).strict}function yge(e){const{drag:t,layout:n}=Rp;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const R$=e=>t=>typeof t=="string"&&t.startsWith(e),YN=R$("--"),bge=R$("var(--"),XN=e=>bge(e)?vge.test(e.split("/*")[0].trim()):!1,vge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,K0={};function wge(e){for(const t in e)K0[t]=e[t],YN(t)&&(K0[t].isCSSVariable=!0)}const im=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sm=new Set(im);function I$(e,{layout:t,layoutId:n}){return sm.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!K0[e]||e==="opacity")}const pi=e=>!!(e&&e.getVelocity),j$=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Cc=(e,t,n)=>n>t?t:n<e?e:n,om={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Z0={...om,transform:e=>Cc(0,1,e)},bw={...om,default:1},GM={...om,transform:Math.round},tb=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wu=tb("deg"),dl=tb("%"),En=tb("px"),xge=tb("vh"),_ge=tb("vw"),WM={...dl,parse:e=>dl.parse(e)/100,transform:e=>dl.transform(e*100)},Sge={rotate:wu,rotateX:wu,rotateY:wu,rotateZ:wu,scale:bw,scaleX:bw,scaleY:bw,scaleZ:bw,skew:wu,skewX:wu,skewY:wu,distance:En,translateX:En,translateY:En,translateZ:En,x:En,y:En,z:En,perspective:En,transformPerspective:En,opacity:Z0,originX:WM,originY:WM,originZ:En},JN={borderWidth:En,borderTopWidth:En,borderRightWidth:En,borderBottomWidth:En,borderLeftWidth:En,borderRadius:En,radius:En,borderTopLeftRadius:En,borderTopRightRadius:En,borderBottomRightRadius:En,borderBottomLeftRadius:En,width:En,maxWidth:En,height:En,maxHeight:En,top:En,right:En,bottom:En,left:En,padding:En,paddingTop:En,paddingRight:En,paddingBottom:En,paddingLeft:En,margin:En,marginTop:En,marginRight:En,marginBottom:En,marginLeft:En,backgroundPositionX:En,backgroundPositionY:En,...Sge,zIndex:GM,fillOpacity:Z0,strokeOpacity:Z0,numOctaves:GM},Ege={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Cge=im.length;function Tge(e,t,n){let r="",a=!0;for(let i=0;i<Cge;i++){const s=im[i],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=j$(o,JN[s]);if(!l){a=!1;const d=Ege[s]||s;r+=`${d}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function QN(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if(sm.has(l)){s=!0;continue}else if(YN(l)){a[l]=u;continue}else{const d=j$(u,JN[l]);l.startsWith("origin")?(o=!0,i[l]=d):r[l]=d}}if(t.transform||(s||n?r.transform=Tge(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${u} ${d}`}}const eR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function D$(e,t,n){for(const r in t)!pi(t[r])&&!I$(r,n)&&(e[r]=t[r])}function kge({transformTemplate:e},t){return T.useMemo(()=>{const n=eR();return QN(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Age(e,t){const n=e.style||{},r={};return D$(r,n,e),Object.assign(r,kge(e,t)),r}function Nge(e,t){const n={},r=Age(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Rge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tR(e){return typeof e!="string"||e.includes("-")?!1:!!(Rge.indexOf(e)>-1||/[A-Z]/u.test(e))}const Ige={offset:"stroke-dashoffset",array:"stroke-dasharray"},jge={offset:"strokeDashoffset",array:"strokeDasharray"};function Dge(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?Ige:jge;e[i.offset]=En.transform(-r);const s=En.transform(t),o=En.transform(n);e[i.array]=`${s} ${o}`}function M$(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:s=0,...o},l,u,d){if(QN(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&Dge(h,a,i,s,!1)}const O$=()=>({...eR(),attrs:{}}),P$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Mge(e,t,n,r){const a=T.useMemo(()=>{const i=O$();return M$(i,t,P$(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};D$(i,e.style,e),a.style={...i,...a.style}}return a}function Oge(e=!1){return(n,r,a,{latestValues:i},s)=>{const l=(tR(n)?Mge:Nge)(r,i,s,n),u=ige(r,typeof n=="string",e),d=n!==T.Fragment?{...u,...l,ref:a}:{},{children:h}=r,m=T.useMemo(()=>pi(h)?h.get():h,[h]);return T.createElement(n,{...d,children:m})}}function KM(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function nR(e,t,n,r){if(typeof t=="function"){const[a,i]=KM(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=KM(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function Lw(e){return pi(e)?e.get():e}function Pge({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:Fge(n,r,a,e),renderState:t()}}const F$=e=>(t,n)=>{const r=T.useContext(g_),a=T.useContext(m_),i=()=>Pge(e,t,r,a);return n?i():UN(i)};function Fge(e,t,n,r){const a={},i=r(e,{});for(const m in i)a[m]=Lw(i[m]);let{initial:s,animate:o}=e;const l=b_(e),u=T$(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?o:s;if(h&&typeof h!="boolean"&&!y_(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const b=nR(e,m[g]);if(b){const{transitionEnd:v,transition:x,...w}=b;for(const _ in w){let E=w[_];if(Array.isArray(E)){const C=d?E.length-1:0;E=E[C]}E!==null&&(a[_]=E)}for(const _ in v)a[_]=v[_]}}}return a}function rR(e,t,n){var i;const{style:r}=e,a={};for(const s in r)(pi(r[s])||t.style&&pi(t.style[s])||I$(s,e)||((i=n==null?void 0:n.getValue(s))==null?void 0:i.liveStyle)!==void 0)&&(a[s]=r[s]);return a}const Lge={useVisualState:F$({scrapeMotionValuesFromProps:rR,createRenderState:eR})};function L$(e,t,n){const r=rR(e,t,n);for(const a in e)if(pi(e[a])||pi(t[a])){const i=im.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const Bge={useVisualState:F$({scrapeMotionValuesFromProps:L$,createRenderState:O$})};function $ge(e,t){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const s={...tR(r)?Bge:Lge,preloadedFeatures:e,useRender:Oge(a),createVisualElement:t,Component:r};return pge(s)}}function Y0(e,t,n){const r=e.getProps();return nR(r,t,n!==void 0?n:r.custom,e)}const ck=e=>Array.isArray(e);let Bw;function zge(){Bw=void 0}const Ki={now:()=>(Bw===void 0&&Ki.set(ti.isProcessing||Ec.useManualTiming?ti.timestamp:performance.now()),Bw),set:e=>{Bw=e,queueMicrotask(zge)}};function aR(e,t){e.indexOf(t)===-1&&e.push(t)}function iR(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class sR{constructor(){this.subscriptions=[]}add(t){return aR(this.subscriptions,t),()=>iR(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const s=this.subscriptions[i];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function B$(e,t){return t?e*(1e3/t):0}const ZM=30,Uge=e=>!isNaN(parseFloat(e));class Vge{constructor(t,n={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{var s,o;const i=Ki.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current)),a&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ki.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Uge(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new sR);const r=this.events[t].add(n);return t==="change"?()=>{r(),ea.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ki.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ZM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ZM);return B$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t;(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function X0(e,t){return new Vge(e,t)}function Hge(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,X0(n))}function qge(e){return ck(e)?e[e.length-1]||0:e}function Gge(e,t){const n=Y0(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const s in i){const o=qge(i[s]);Hge(e,s,o)}}function Wge(e){return!!(pi(e)&&e.add)}function uk(e,t){const n=e.getValue("willChange");if(Wge(n))return n.add(t);if(!n&&Ec.WillChange){const r=new Ec.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function $$(e){return e.props[k$]}const Kge=e=>e!==null;function Zge(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(Kge),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return a[i]}const Yge={type:"spring",stiffness:500,damping:25,restSpeed:10},Xge=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Jge={type:"keyframes",duration:.8},Qge={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},e0e=(e,{keyframes:t})=>t.length>2?Jge:sm.has(e)?e.startsWith("scale")?Xge(t[1]):Yge:Qge;function t0e({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function oR(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const fl=e=>e*1e3,hl=e=>e/1e3,qg=e=>Math.round(e*1e5)/1e5,lR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function n0e(e){return e==null}const r0e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cR=(e,t)=>n=>!!(typeof n=="string"&&r0e.test(n)&&n.startsWith(e)||t&&!n0e(n)&&Object.prototype.hasOwnProperty.call(n,t)),z$=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,s,o]=r.match(lR);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},a0e=e=>Cc(0,255,e),NC={...om,transform:e=>Math.round(a0e(e))},Qd={test:cR("rgb","red"),parse:z$("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+NC.transform(e)+", "+NC.transform(t)+", "+NC.transform(n)+", "+qg(Z0.transform(r))+")"};function i0e(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const dk={test:cR("#"),parse:i0e,transform:Qd.transform},Kh={test:cR("hsl","hue"),parse:z$("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+dl.transform(qg(t))+", "+dl.transform(qg(n))+", "+qg(Z0.transform(r))+")"},ui={test:e=>Qd.test(e)||dk.test(e)||Kh.test(e),parse:e=>Qd.test(e)?Qd.parse(e):Kh.test(e)?Kh.parse(e):dk.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Qd.transform(e):Kh.transform(e)},s0e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function o0e(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(lR))==null?void 0:t.length)||0)+(((n=e.match(s0e))==null?void 0:n.length)||0)>0}const U$="number",V$="color",l0e="var",c0e="var(",YM="${}",u0e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function J0(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const o=t.replace(u0e,l=>(ui.test(l)?(r.color.push(i),a.push(V$),n.push(ui.parse(l))):l.startsWith(c0e)?(r.var.push(i),a.push(l0e),n.push(l)):(r.number.push(i),a.push(U$),n.push(parseFloat(l))),++i,YM)).split(YM);return{values:n,split:o,indexes:r,types:a}}function H$(e){return J0(e).values}function q$(e){const{split:t,types:n}=J0(e),r=t.length;return a=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],a[s]!==void 0){const o=n[s];o===U$?i+=qg(a[s]):o===V$?i+=ui.transform(a[s]):i+=a[s]}return i}}const d0e=e=>typeof e=="number"?0:e;function f0e(e){const t=H$(e);return q$(e)(t.map(d0e))}const Yu={test:o0e,parse:H$,createTransformer:q$,getAnimatableNone:f0e};function RC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function h0e({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,s=0;if(!t)a=i=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;a=RC(l,o,e+1/3),i=RC(l,o,e),s=RC(l,o,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:r}}function Zx(e,t){return n=>n>0?t:e}const Xr=(e,t,n)=>e+(t-e)*n,IC=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},p0e=[dk,Qd,Kh],m0e=e=>p0e.find(t=>t.test(e));function XM(e){const t=m0e(e);if(!t)return!1;let n=t.parse(e);return t===Kh&&(n=h0e(n)),n}const JM=(e,t)=>{const n=XM(e),r=XM(t);if(!n||!r)return Zx(e,t);const a={...n};return i=>(a.red=IC(n.red,r.red,i),a.green=IC(n.green,r.green,i),a.blue=IC(n.blue,r.blue,i),a.alpha=Xr(n.alpha,r.alpha,i),Qd.transform(a))},fk=new Set(["none","hidden"]);function g0e(e,t){return fk.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}const y0e=(e,t)=>n=>t(e(n)),nb=(...e)=>e.reduce(y0e);function b0e(e,t){return n=>Xr(e,t,n)}function uR(e){return typeof e=="number"?b0e:typeof e=="string"?XN(e)?Zx:ui.test(e)?JM:x0e:Array.isArray(e)?G$:typeof e=="object"?ui.test(e)?JM:v0e:Zx}function G$(e,t){const n=[...e],r=n.length,a=e.map((i,s)=>uR(i)(i,t[s]));return i=>{for(let s=0;s<r;s++)n[s]=a[s](i);return n}}function v0e(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=uR(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function w0e(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],s=e.indexes[i][r[i]],o=e.values[s]??0;n[a]=o,r[i]++}return n}const x0e=(e,t)=>{const n=Yu.createTransformer(t),r=J0(e),a=J0(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?fk.has(e)&&!a.values.length||fk.has(t)&&!r.values.length?g0e(e,t):nb(G$(w0e(r,a),a.values),n):Zx(e,t)};function W$(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Xr(e,t,n):uR(e)(e,t)}const _0e=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ea.update(t,!0),stop:()=>Zu(t),now:()=>ti.isProcessing?ti.timestamp:Ki.now()}},K$=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=e(i/(a-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Yx=2e4;function dR(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Yx;)t+=n,r=e.next(t);return t>=Yx?1/0:t}function S0e(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(dR(r),Yx);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:hl(a)}}const E0e=5;function Z$(e,t,n){const r=Math.max(t-E0e,0);return B$(n-e(r),t-r)}const ra={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},QM=.001;function C0e({duration:e=ra.duration,bounce:t=ra.bounce,velocity:n=ra.velocity,mass:r=ra.mass}){let a,i,s=1-t;s=Cc(ra.minDamping,ra.maxDamping,s),e=Cc(ra.minDuration,ra.maxDuration,hl(e)),s<1?(a=u=>{const d=u*s,h=d*e,m=d-n,g=hk(u,s),b=Math.exp(-h);return QM-m/g*b},i=u=>{const h=u*s*e,m=h*n+n,g=Math.pow(s,2)*Math.pow(u,2)*e,b=Math.exp(-h),v=hk(Math.pow(u,2),s);return(-a(u)+QM>0?-1:1)*((m-g)*b)/v}):(a=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-.001+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const o=5/e,l=k0e(a,i,o);if(e=fl(e),isNaN(l))return{stiffness:ra.stiffness,damping:ra.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const T0e=12;function k0e(e,t,n){let r=n;for(let a=1;a<T0e;a++)r=r-e(r)/t(r);return r}function hk(e,t){return e*Math.sqrt(1-t*t)}const A0e=["duration","bounce"],N0e=["stiffness","damping","mass"];function eO(e,t){return t.some(n=>e[n]!==void 0)}function R0e(e){let t={velocity:ra.velocity,stiffness:ra.stiffness,damping:ra.damping,mass:ra.mass,isResolvedFromDuration:!1,...e};if(!eO(e,N0e)&&eO(e,A0e))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*Cc(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:ra.mass,stiffness:a,damping:i}}else{const n=C0e(e);t={...t,...n,mass:ra.mass},t.isResolvedFromDuration=!0}return t}function Xx(e=ra.visualDuration,t=ra.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:g}=R0e({...n,velocity:-hl(n.velocity||0)}),b=m||0,v=u/(2*Math.sqrt(l*d)),x=s-i,w=hl(Math.sqrt(l/d)),_=Math.abs(x)<5;r||(r=_?ra.restSpeed.granular:ra.restSpeed.default),a||(a=_?ra.restDelta.granular:ra.restDelta.default);let E;if(v<1){const k=hk(w,v);E=I=>{const j=Math.exp(-v*w*I);return s-j*((b+v*w*x)/k*Math.sin(k*I)+x*Math.cos(k*I))}}else if(v===1)E=k=>s-Math.exp(-w*k)*(x+(b+w*x)*k);else{const k=w*Math.sqrt(v*v-1);E=I=>{const j=Math.exp(-v*w*I),N=Math.min(k*I,300);return s-j*((b+v*w*x)*Math.sinh(N)+k*x*Math.cosh(N))/k}}const C={calculatedDuration:g&&h||null,next:k=>{const I=E(k);if(g)o.done=k>=h;else{let j=k===0?b:0;v<1&&(j=k===0?fl(b):Z$(E,k,I));const N=Math.abs(j)<=r,P=Math.abs(s-I)<=a;o.done=N&&P}return o.value=o.done?s:I,o},toString:()=>{const k=Math.min(dR(C),Yx),I=K$(j=>C.next(k*j).value,k,30);return k+"ms "+I},toTransition:()=>{}};return C}Xx.applyToOptions=e=>{const t=S0e(e,100,Xx);return e.ease=t.ease,e.duration=fl(t.duration),e.type="keyframes",e};function pk({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},g=N=>o!==void 0&&N<o||l!==void 0&&N>l,b=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let v=n*t;const x=h+v,w=s===void 0?x:s(x);w!==x&&(v=w-h);const _=N=>-v*Math.exp(-N/r),E=N=>w+_(N),C=N=>{const P=_(N),L=E(N);m.done=Math.abs(P)<=u,m.value=m.done?w:L};let k,I;const j=N=>{g(m.value)&&(k=N,I=Xx({keyframes:[m.value,b(m.value)],velocity:Z$(E,N,m.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:N=>{let P=!1;return!I&&k===void 0&&(P=!0,C(N),j(N)),k!==void 0&&N>=k?I.next(N-k):(!P&&C(N),m)}}}const Q0=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};function I0e(e,t,n){const r=[],a=n||Ec.mix||W$,i=e.length-1;for(let s=0;s<i;s++){let o=a(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||qs:t;o=nb(l,o)}r.push(o)}return r}function j0e(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(ZN(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=I0e(t,r,a),l=o.length,u=d=>{if(s&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=Q0(e[h],e[h+1],d);return o[h](m)};return n?d=>u(Cc(e[0],e[i-1],d)):u}function D0e(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Q0(0,t,r);e.push(Xr(n,1,a))}}function M0e(e){const t=[0];return D0e(t,e.length-1),t}function O0e(e,t){return e.map(n=>n*t)}const Y$=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,P0e=1e-7,F0e=12;function L0e(e,t,n,r,a){let i,s,o=0;do s=t+(n-t)/2,i=Y$(s,r,a)-e,i>0?n=s:t=s;while(Math.abs(i)>P0e&&++o<F0e);return s}function rb(e,t,n,r){if(e===t&&n===r)return qs;const a=i=>L0e(i,0,1,e,n);return i=>i===0||i===1?i:Y$(a(i),t,r)}const B0e=rb(.42,0,1,1),$0e=rb(0,0,.58,1),X$=rb(.42,0,.58,1),z0e=e=>Array.isArray(e)&&typeof e[0]!="number",J$=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Q$=e=>t=>1-e(1-t),e7=rb(.33,1.53,.69,.99),fR=Q$(e7),t7=J$(fR),n7=e=>(e*=2)<1?.5*fR(e):.5*(2-Math.pow(2,-10*(e-1))),hR=e=>1-Math.sin(Math.acos(e)),r7=Q$(hR),a7=J$(hR),i7=e=>Array.isArray(e)&&typeof e[0]=="number",U0e={linear:qs,easeIn:B0e,easeInOut:X$,easeOut:$0e,circIn:hR,circInOut:a7,circOut:r7,backIn:fR,backInOut:t7,backOut:e7,anticipate:n7},V0e=e=>typeof e=="string",tO=e=>{if(i7(e)){ZN(e.length===4);const[t,n,r,a]=e;return rb(t,n,r,a)}else if(V0e(e))return U0e[e];return e};function H0e(e,t){return e.map(()=>t||X$).splice(0,e.length-1)}function Gg({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=z0e(r)?r.map(tO):tO(r),i={done:!1,value:t[0]},s=O0e(n&&n.length===t.length?n:M0e(t),e),o=j0e(s,t,{ease:Array.isArray(a)?a:H0e(t,a)});return{calculatedDuration:e,next:l=>(i.value=o(l),i.done=l>=e,i)}}const q0e=e=>e!==null;function pR(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(q0e),o=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const G0e={decay:pk,inertia:pk,tween:Gg,keyframes:Gg,spring:Xx};function s7(e){typeof e.type=="string"&&(e.type=G0e[e.type])}class mR{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const W0e=e=>e/100;class o7 extends mR{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;if(n&&n.updatedAt!==Ki.now()&&this.tick(Ki.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:r}=this.options;r&&r()},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;s7(t);const{type:n=Gg,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:s=0}=t;let{keyframes:o}=t;const l=n||Gg;l!==Gg&&typeof o[0]!="number"&&(this.mixKeyframes=nb(W0e,W$(o[0],o[1])),o=[0,100]);const u=l({...t,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=dR(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:g,type:b,onUpdate:v,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const w=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?w<0:w>a;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let E=this.currentTime,C=r;if(h){const N=Math.min(this.currentTime,a)/o;let P=Math.floor(N),L=N%1;!L&&N>=1&&(L=1),L===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(m==="reverse"?(L=1-L,g&&(L-=g/o)):m==="mirror"&&(C=s)),E=Cc(0,1,L)*o}const k=_?{done:!1,value:d[0]}:C.next(E);i&&(k.value=i(k.value));let{done:I}=k;!_&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return j&&b!==pk&&(k.value=pR(d,this.options,x,this.speed)),v&&v(k.value),j&&this.finish(),k}then(t,n){return this.finished.then(t,n)}get duration(){return hl(this.calculatedDuration)}get time(){return hl(this.currentTime)}set time(t){t=fl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ki.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hl(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=_0e,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ki.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),t.observe(this)}}function K0e(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const ef=e=>e*180/Math.PI,mk=e=>{const t=ef(Math.atan2(e[1],e[0]));return gk(t)},Z0e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:mk,rotateZ:mk,skewX:e=>ef(Math.atan(e[1])),skewY:e=>ef(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},gk=e=>(e=e%360,e<0&&(e+=360),e),nO=mk,rO=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),aO=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Y0e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:rO,scaleY:aO,scale:e=>(rO(e)+aO(e))/2,rotateX:e=>gk(ef(Math.atan2(e[6],e[5]))),rotateY:e=>gk(ef(Math.atan2(-e[2],e[0]))),rotateZ:nO,rotate:nO,skewX:e=>ef(Math.atan(e[4])),skewY:e=>ef(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function iO(e){return e.includes("scale")?1:0}function yk(e,t){if(!e||e==="none")return iO(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=Y0e,a=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Z0e,a=o}if(!a)return iO(t);const i=r[t],s=a[1].split(",").map(J0e);return typeof i=="function"?i(s):s[i]}const X0e=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return yk(n,t)};function J0e(e){return parseFloat(e.trim())}const sO=e=>e===om||e===En,Q0e=new Set(["x","y","z"]),eye=im.filter(e=>!Q0e.has(e));function tye(e){const t=[];return eye.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const of={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>yk(t,"x"),y:(e,{transform:t})=>yk(t,"y")};of.translateX=of.x;of.translateY=of.y;const lf=new Set;let bk=!1,vk=!1,wk=!1;function l7(){if(vk){const e=Array.from(lf).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=tye(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,s])=>{var o;(o=r.getValue(i))==null||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vk=!1,bk=!1,lf.forEach(e=>e.complete(wk)),lf.clear()}function c7(){lf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(vk=!0)})}function nye(){wk=!0,c7(),l7(),wk=!1}class gR{constructor(t,n,r,a,i,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(lf.add(this),bk||(bk=!0,ea.read(c7),ea.resolveKeyframes(l7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),s=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const o=r.readValue(n,s);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=s),a&&i===void 0&&a.set(t[0])}K0e(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),lf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,lf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const rye=e=>e.startsWith("--");function aye(e,t,n){rye(t)?e.style.setProperty(t,n):e.style[t]=n}function yR(e){let t;return()=>(t===void 0&&(t=e()),t)}const iye=yR(()=>window.ScrollTimeline!==void 0),sye={};function oye(e,t){const n=yR(e);return()=>sye[t]??n()}const u7=oye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Pg=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,oO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pg([0,.65,.55,1]),circOut:Pg([.55,0,1,.45]),backIn:Pg([.31,.01,.66,-.59]),backOut:Pg([.33,1.53,.69,.99])};function d7(e,t){if(e)return typeof e=="function"?u7()?K$(e,t):"ease-out":i7(e)?Pg(e):Array.isArray(e)?e.map(n=>d7(n,t)||oO.easeOut):oO[e]}function lye(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:s="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[t]:n};l&&(d.offset=l);const h=d7(o,a);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function f7(e){return typeof e=="function"&&"applyToOptions"in e}function cye({type:e,...t}){return f7(e)&&u7()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class uye extends mR{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=t,ZN(typeof t.type!="string");const u=cye(t);this.animation=lye(n,r,a,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=pR(a,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):aye(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return hl(Number(t))}get time(){return hl(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=fl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&iye()?(this.animation.timeline=t,qs):n(this)}}const h7={anticipate:n7,backInOut:t7,circInOut:a7};function dye(e){return e in h7}function fye(e){typeof e.ease=="string"&&dye(e.ease)&&(e.ease=h7[e.ease])}const lO=10;class hye extends uye{constructor(t){fye(t),s7(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new o7({...s,autoplay:!1}),l=fl(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-lO).value,o.sample(l).value,lO),o.stop()}}const cO=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Yu.test(e)||e==="0")&&!e.startsWith("url("));function pye(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function mye(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],s=cO(a,t),o=cO(i,t);return!s||!o?!1:pye(e)||(n==="spring"||f7(n))&&r}const gye=new Set(["opacity","clipPath","filter","transform"]),yye=yR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function bye(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return yye()&&n&&gye.has(n)&&(n!=="transform"||!l)&&!o&&!r&&a!=="mirror"&&i!==0&&s!=="inertia"}const vye=40;class wye extends mR{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:s="loop",keyframes:o,name:l,motionValue:u,element:d,...h}){var b;super(),this.stop=()=>{var v,x;this._animation?(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)):(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Ki.now();const m={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:s,name:l,motionValue:u,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||gR;this.keyframeResolver=new g(o,(v,x,w)=>this.onKeyframesResolved(v,x,m,!w),l,u,d),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:s,velocity:o,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Ki.now(),mye(t,i,s,o)||((Ec.instantAnimations||!l)&&(d==null||d(pR(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>vye?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},g=!u&&bye(m)?new hye({...m,element:m.motionValue.owner.current}):new o7(m);g.finished.then(()=>this.notifyFinished()).catch(qs),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||nye(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const bR=(e,t,n,r={},a,i)=>s=>{const o=oR(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-fl(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:a};t0e(o)||Object.assign(d,e0e(e,d)),d.duration&&(d.duration=fl(d.duration)),d.repeatDelay&&(d.repeatDelay=fl(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(Ec.instantAnimations||Ec.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&t.get()!==void 0){const m=Zge(d.keyframes,o);if(m!==void 0){ea.update(()=>{d.onUpdate(m),d.onComplete()});return}}return new wye(d)},p7=new Set(["width","height","top","left","right","bottom",...im]);function xye({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function m7(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...o}=t;r&&(i=r);const l=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const d in o){const h=e.getValue(d,e.latestValues[d]??null),m=o[d];if(m===void 0||u&&xye(u,d))continue;const g={delay:n,...oR(i||{},d)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===b&&!g.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const w=$$(e);if(w){const _=window.MotionHandoffAnimation(w,d,ea);_!==null&&(g.startTime=_,v=!0)}}uk(e,d),h.start(bR(d,h,m,e.shouldReduceMotion&&p7.has(d)?{type:!1}:g,e,v));const x=h.animation;x&&l.push(x)}return s&&Promise.all(l).then(()=>{ea.update(()=>{s&&Gge(e,s)})}),l}function xk(e,t,n={}){var l;const r=Y0(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(m7(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=a;return _ye(e,t,d+u,h,m,n)}:()=>Promise.resolve(),{when:o}=a;if(o){const[u,d]=o==="beforeChildren"?[i,s]:[s,i];return u().then(()=>d())}else return Promise.all([i(),s(n.delay)])}function _ye(e,t,n=0,r=0,a=1,i){const s=[],o=(e.variantChildren.size-1)*r,l=a===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(Sye).forEach((u,d)=>{u.notify("AnimationStart",t),s.push(xk(u,t,{...i,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function Sye(e,t){return e.sortNodePosition(t)}function Eye(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>xk(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=xk(e,t,n);else{const a=typeof t=="function"?Y0(e,t,n.custom):t;r=Promise.all(m7(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function g7(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Cye=GN.length;function y7(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?y7(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Cye;n++){const r=GN[n],a=e.props[r];(W0(a)||a===!1)&&(t[r]=a)}return t}const Tye=[...qN].reverse(),kye=qN.length;function Aye(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Eye(e,n,r)))}function Nye(e){let t=Aye(e),n=uO(),r=!0;const a=l=>(u,d)=>{var m;const h=Y0(e,d,l==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:g,transitionEnd:b,...v}=h;u={...u,...v,...b}}return u};function i(l){t=l(e)}function s(l){const{props:u}=e,d=y7(e.parent)||{},h=[],m=new Set;let g={},b=1/0;for(let x=0;x<kye;x++){const w=Tye[x],_=n[w],E=u[w]!==void 0?u[w]:d[w],C=W0(E),k=w===l?_.isActive:null;k===!1&&(b=x);let I=E===d[w]&&E!==u[w]&&C;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),_.protectedKeys={...g},!_.isActive&&k===null||!E&&!_.prevProp||y_(E)||typeof E=="boolean")continue;const j=Rye(_.prevProp,E);let N=j||w===l&&_.isActive&&!I&&C||x>b&&C,P=!1;const L=Array.isArray(E)?E:[E];let H=L.reduce(a(w),{});k===!1&&(H={});const{prevResolvedValues:M={}}=_,K={...M,...H},q=te=>{N=!0,m.has(te)&&(P=!0,m.delete(te)),_.needsAnimating[te]=!0;const Y=e.getValue(te);Y&&(Y.liveStyle=!1)};for(const te in K){const Y=H[te],ie=M[te];if(g.hasOwnProperty(te))continue;let V=!1;ck(Y)&&ck(ie)?V=!g7(Y,ie):V=Y!==ie,V?Y!=null?q(te):m.add(te):Y!==void 0&&m.has(te)?q(te):_.protectedKeys[te]=!0}_.prevProp=E,_.prevResolvedValues=H,_.isActive&&(g={...g,...H}),r&&e.blockInitialAnimation&&(N=!1),N&&(!(I&&j)||P)&&h.push(...L.map(te=>({animation:te,options:{type:w}})))}if(m.size){const x={};if(typeof u.initial!="boolean"){const w=Y0(e,Array.isArray(u.initial)?u.initial[0]:u.initial);w&&w.transition&&(x.transition=w.transition)}m.forEach(w=>{const _=e.getBaseTarget(w),E=e.getValue(w);E&&(E.liveStyle=!0),x[w]=_??null}),h.push({animation:x})}let v=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(h):Promise.resolve()}function o(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=uO(),r=!0}}}function Rye(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!g7(t,e):!1}function Vd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uO(){return{animate:Vd(!0),whileInView:Vd(),whileHover:Vd(),whileTap:Vd(),whileDrag:Vd(),whileFocus:Vd(),exit:Vd()}}class ld{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Iye extends ld{constructor(t){super(t),t.animationState||(t.animationState=Nye(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();y_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let jye=0;class Dye extends ld{constructor(){super(...arguments),this.id=jye++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Mye={animation:{Feature:Iye},exit:{Feature:Dye}};function ey(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const vR=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ab(e){return{point:{x:e.pageX,y:e.pageY}}}const Oye=e=>t=>vR(t)&&e(t,ab(t));function Wg(e,t,n,r){return ey(e,t,Oye(n),r)}function b7({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Pye({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Fye(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const v7=1e-4,Lye=1-v7,Bye=1+v7,w7=.01,$ye=0-w7,zye=0+w7;function Ai(e){return e.max-e.min}function Uye(e,t,n){return Math.abs(e-t)<=n}function dO(e,t,n,r=.5){e.origin=r,e.originPoint=Xr(t.min,t.max,e.origin),e.scale=Ai(n)/Ai(t),e.translate=Xr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Lye&&e.scale<=Bye||isNaN(e.scale))&&(e.scale=1),(e.translate>=$ye&&e.translate<=zye||isNaN(e.translate))&&(e.translate=0)}function Kg(e,t,n,r){dO(e.x,t.x,n.x,r?r.originX:void 0),dO(e.y,t.y,n.y,r?r.originY:void 0)}function fO(e,t,n){e.min=n.min+t.min,e.max=e.min+Ai(t)}function Vye(e,t,n){fO(e.x,t.x,n.x),fO(e.y,t.y,n.y)}function hO(e,t,n){e.min=t.min-n.min,e.max=e.min+Ai(t)}function Zg(e,t,n){hO(e.x,t.x,n.x),hO(e.y,t.y,n.y)}const pO=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zh=()=>({x:pO(),y:pO()}),mO=()=>({min:0,max:0}),ca=()=>({x:mO(),y:mO()});function Ps(e){return[e("x"),e("y")]}function jC(e){return e===void 0||e===1}function _k({scale:e,scaleX:t,scaleY:n}){return!jC(e)||!jC(t)||!jC(n)}function qd(e){return _k(e)||x7(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function x7(e){return gO(e.x)||gO(e.y)}function gO(e){return e&&e!=="0%"}function Jx(e,t,n){const r=e-n,a=t*r;return n+a}function yO(e,t,n,r,a){return a!==void 0&&(e=Jx(e,a,r)),Jx(e,n,r)+t}function Sk(e,t=0,n=1,r,a){e.min=yO(e.min,t,n,r,a),e.max=yO(e.max,t,n,r,a)}function _7(e,{x:t,y:n}){Sk(e.x,t.translate,t.scale,t.originPoint),Sk(e.y,n.translate,n.scale,n.originPoint)}const bO=.999999999999,vO=1.0000000000001;function Hye(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,s;for(let o=0;o<a;o++){i=n[o],s=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Xh(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,_7(e,s)),r&&qd(i.latestValues)&&Xh(e,i.latestValues))}t.x<vO&&t.x>bO&&(t.x=1),t.y<vO&&t.y>bO&&(t.y=1)}function Yh(e,t){e.min=e.min+t,e.max=e.max+t}function wO(e,t,n,r,a=.5){const i=Xr(e.min,e.max,a);Sk(e,t,n,i,r)}function Xh(e,t){wO(e.x,t.x,t.scaleX,t.scale,t.originX),wO(e.y,t.y,t.scaleY,t.scale,t.originY)}function S7(e,t){return b7(Fye(e.getBoundingClientRect(),t))}function qye(e,t,n){const r=S7(e,n),{scroll:a}=t;return a&&(Yh(r.x,a.offset.x),Yh(r.y,a.offset.y)),r}const E7=({current:e})=>e?e.ownerDocument.defaultView:null,xO=(e,t)=>Math.abs(e-t);function Gye(e,t){const n=xO(e.x,t.x),r=xO(e.y,t.y);return Math.sqrt(n**2+r**2)}class C7{constructor(t,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=MC(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=Gye(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:b}=h,{timestamp:v}=ti;this.history.push({...b,timestamp:v});const{onStart:x,onMove:w}=this.handlers;m||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=DC(m,this.transformPagePoint),ea.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:b,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=MC(h.type==="pointercancel"?this.lastMoveEventInfo:DC(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,x),b&&b(h,x)},!vR(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const s=ab(t),o=DC(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=ti;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,MC(o,this.history)),this.removeListeners=nb(Wg(this.contextWindow,"pointermove",this.handlePointerMove),Wg(this.contextWindow,"pointerup",this.handlePointerUp),Wg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zu(this.updatePoint)}}function DC(e,t){return t?{point:t(e.point)}:e}function _O(e,t){return{x:e.x-t.x,y:e.y-t.y}}function MC({point:e},t){return{point:e,delta:_O(e,T7(t)),offset:_O(e,Wye(t)),velocity:Kye(t,.1)}}function Wye(e){return e[0]}function T7(e){return e[e.length-1]}function Kye(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=T7(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>fl(t)));)n--;if(!r)return{x:0,y:0};const i=hl(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const s={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Zye(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Xr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Xr(n,e,r.max):Math.min(e,n)),e}function SO(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Yye(e,{top:t,left:n,bottom:r,right:a}){return{x:SO(e.x,n,a),y:SO(e.y,t,r)}}function EO(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Xye(e,t){return{x:EO(e.x,t.x),y:EO(e.y,t.y)}}function Jye(e,t){let n=.5;const r=Ai(e),a=Ai(t);return a>r?n=Q0(t.min,t.max-r,e.min):r>a&&(n=Q0(e.min,e.max-a,t.min)),Cc(0,1,n)}function Qye(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ek=.35;function ebe(e=Ek){return e===!1?e=0:e===!0&&(e=Ek),{x:CO(e,"left","right"),y:CO(e,"top","bottom")}}function CO(e,t,n){return{min:TO(e,t),max:TO(e,n)}}function TO(e,t){return typeof e=="number"?e:e[t]||0}const lo={x:!1,y:!1};function k7(){return lo.x||lo.y}function tbe(e){return e==="x"||e==="y"?lo[e]?null:(lo[e]=!0,()=>{lo[e]=!1}):lo.x||lo.y?null:(lo.x=lo.y=!0,()=>{lo.x=lo.y=!1})}const nbe=new WeakMap;class rbe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ca(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ab(d).point)},i=(d,h)=>{const{drag:m,dragPropagation:g,onDragStart:b}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tbe(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ps(x=>{let w=this.getAxisMotionValue(x).get()||0;if(dl.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[x];E&&(w=Ai(E)*(parseFloat(w)/100))}}this.originPoint[x]=w}),b&&ea.postRender(()=>b(d,h)),uk(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:b,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:x}=h;if(g&&this.currentDirection===null){this.currentDirection=abe(x),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),v&&v(d,h)},o=(d,h)=>this.stop(d,h),l=()=>Ps(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new C7(t,{onSessionStart:a,onStart:i,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:E7(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ea.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!vw(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=Zye(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&Wh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Yye(r.layoutBox,t):this.constraints=!1,this.elastic=ebe(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ps(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Qye(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Wh(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=qye(r,a.root,this.visualElement.getTransformPagePoint());let s=Xye(a.layout.layoutBox,i);if(n){const o=n(Pye(s));this.hasMutatedConstraints=!!o,o&&(s=b7(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Ps(d=>{if(!vw(d,n,this.currentDirection))return;let h=l&&l[d]||{};s&&(h={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,b={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,b)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return uk(this.visualElement,t),r.start(bR(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ps(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ps(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ps(n=>{const{drag:r}=this.getProps();if(!vw(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:s,max:o}=a.layout.layoutBox[n];i.set(t[n]-Xr(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wh(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ps(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();a[s]=Jye({min:l,max:l},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ps(s=>{if(!vw(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Xr(l,u,a[s]))})}addListeners(){if(!this.visualElement.current)return;nbe.set(this.visualElement,this);const t=this.visualElement.current,n=Wg(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Wh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ea.read(r);const s=ey(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ps(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{s(),n(),i(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:s=Ek,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function vw(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function abe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class ibe extends ld{constructor(t){super(t),this.removeGroupControls=qs,this.removeListeners=qs,this.controls=new rbe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qs}unmount(){this.removeGroupControls(),this.removeListeners()}}const kO=e=>(t,n)=>{e&&ea.postRender(()=>e(t,n))};class sbe extends ld{constructor(){super(...arguments),this.removePointerDownListener=qs}onPointerDown(t){this.session=new C7(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:E7(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:kO(t),onStart:kO(n),onMove:r,onEnd:(i,s)=>{delete this.session,a&&ea.postRender(()=>a(i,s))}}}mount(){this.removePointerDownListener=Wg(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $w={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function AO(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ng={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(En.test(e))e=parseFloat(e);else return e;const n=AO(e,t.target.x),r=AO(e,t.target.y);return`${n}% ${r}%`}},obe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=Yu.parse(e);if(a.length>5)return r;const i=Yu.createTransformer(e),s=typeof a[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;a[0+s]/=o,a[1+s]/=l;const u=Xr(o,l,.5);return typeof a[2+s]=="number"&&(a[2+s]/=u),typeof a[3+s]=="number"&&(a[3+s]/=u),i(a)}};class lbe extends T.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;wge(cbe),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),$w.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||ea.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),KN.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function A7(e){const[t,n]=_$(),r=T.useContext(zN);return p.jsx(lbe,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(A$),isPresent:t,safeToRemove:n})}const cbe={borderRadius:{...Ng,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ng,borderTopRightRadius:Ng,borderBottomLeftRadius:Ng,borderBottomRightRadius:Ng,boxShadow:obe};function ube(e,t,n){const r=pi(e)?e:X0(e);return r.start(bR("",r,t,n)),r.animation}function dbe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const fbe=(e,t)=>e.depth-t.depth;class hbe{constructor(){this.children=[],this.isDirty=!1}add(t){aR(this.children,t),this.isDirty=!0}remove(t){iR(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(fbe),this.isDirty=!1,this.children.forEach(t)}}function pbe(e,t){const n=Ki.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(Zu(r),e(i-t))};return ea.setup(r,!0),()=>Zu(r)}const N7=["TopLeft","TopRight","BottomLeft","BottomRight"],mbe=N7.length,NO=e=>typeof e=="string"?parseFloat(e):e,RO=e=>typeof e=="number"||En.test(e);function gbe(e,t,n,r,a,i){a?(e.opacity=Xr(0,n.opacity??1,ybe(r)),e.opacityExit=Xr(t.opacity??1,0,bbe(r))):i&&(e.opacity=Xr(t.opacity??1,n.opacity??1,r));for(let s=0;s<mbe;s++){const o=`border${N7[s]}Radius`;let l=IO(t,o),u=IO(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||RO(l)===RO(u)?(e[o]=Math.max(Xr(NO(l),NO(u),r),0),(dl.test(u)||dl.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Xr(t.rotate||0,n.rotate||0,r))}function IO(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const ybe=R7(0,.5,r7),bbe=R7(.5,.95,qs);function R7(e,t,n){return r=>r<e?0:r>t?1:n(Q0(e,t,r))}function jO(e,t){e.min=t.min,e.max=t.max}function Os(e,t){jO(e.x,t.x),jO(e.y,t.y)}function DO(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function MO(e,t,n,r,a){return e-=t,e=Jx(e,1/n,r),a!==void 0&&(e=Jx(e,1/a,r)),e}function vbe(e,t=0,n=1,r=.5,a,i=e,s=e){if(dl.test(t)&&(t=parseFloat(t),t=Xr(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Xr(i.min,i.max,r);e===i&&(o-=t),e.min=MO(e.min,t,n,o,a),e.max=MO(e.max,t,n,o,a)}function OO(e,t,[n,r,a],i,s){vbe(e,t[n],t[r],t[a],t.scale,i,s)}const wbe=["x","scaleX","originX"],xbe=["y","scaleY","originY"];function PO(e,t,n,r){OO(e.x,t,wbe,n?n.x:void 0,r?r.x:void 0),OO(e.y,t,xbe,n?n.y:void 0,r?r.y:void 0)}function FO(e){return e.translate===0&&e.scale===1}function I7(e){return FO(e.x)&&FO(e.y)}function LO(e,t){return e.min===t.min&&e.max===t.max}function _be(e,t){return LO(e.x,t.x)&&LO(e.y,t.y)}function BO(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function j7(e,t){return BO(e.x,t.x)&&BO(e.y,t.y)}function $O(e){return Ai(e.x)/Ai(e.y)}function zO(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Sbe{constructor(){this.members=[]}add(t){aR(this.members,t),t.scheduleRender()}remove(t){if(iR(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ebe(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((a||i||s)&&(r=`translate3d(${a}px, ${i}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:g,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const OC=["","X","Y","Z"],Cbe={visibility:"hidden"},UO=1e3;let Tbe=0;function PC(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function D7(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=$$(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ea,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&D7(r)}function M7({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(s={},o=t==null?void 0:t()){this.id=Tbe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Nbe),this.nodes.forEach(Mbe),this.nodes.forEach(Obe),this.nodes.forEach(Rbe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new hbe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new sR),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=dbe(s),this.instance=s;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=pbe(h,250),$w.hasAnimatedSinceResize&&($w.hasAnimatedSinceResize=!1,this.nodes.forEach(HO))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||$be,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=u.getProps(),w=!this.targetLayout||!j7(this.targetLayout,g),_=!h&&m;if(this.options.layoutRoot||this.resumeFrom||_||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const E={...oR(b,"layout"),onPlay:v,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||HO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Pbe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&D7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VO);return}this.isUpdating||this.nodes.forEach(jbe),this.isUpdating=!1,this.nodes.forEach(Dbe),this.nodes.forEach(kbe),this.nodes.forEach(Abe),this.clearAllSnapshots();const o=Ki.now();ti.delta=Cc(0,1e3/60,o-ti.timestamp),ti.timestamp=o,ti.isProcessing=!0,AC.update.process(ti),AC.preRender.process(ti),AC.render.process(ti),ti.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,KN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ibe),this.sharedNodes.forEach(Fbe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ea.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ea.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ai(this.snapshot.measuredBox.x)&&!Ai(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ca(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!a)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!I7(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||qd(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),zbe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return ca();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Ube))){const{scroll:d}=this.root;d&&(Yh(o.x,d.offset.x),Yh(o.y,d.offset.y))}return o}removeElementScroll(s){var l;const o=ca();if(Os(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&Os(o,s),Yh(o.x,h.offset.x),Yh(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const l=ca();Os(l,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Xh(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qd(d.latestValues)&&Xh(l,d.latestValues)}return qd(this.latestValues)&&Xh(l,this.latestValues),l}removeTransform(s){const o=ca();Os(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!qd(u.latestValues))continue;_k(u.latestValues)&&u.updateSnapshot();const d=ca(),h=u.measurePageBox();Os(d,h),PO(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return qd(this.latestValues)&&PO(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ti.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=ti.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ca(),this.relativeTargetOrigin=ca(),Zg(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Os(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ca(),this.targetWithTransforms=ca()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Vye(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Os(this.target,this.layout.layoutBox),_7(this.target,this.targetDelta)):Os(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ca(),this.relativeTargetOrigin=ca(),Zg(this.relativeTargetOrigin,this.target,g.target),Os(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_k(this.parent.latestValues)||x7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ti.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Os(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;Hye(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=ca());const{target:g}=s;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DO(this.prevProjectionDelta.x,this.projectionDelta.x),DO(this.prevProjectionDelta.y,this.projectionDelta.y)),Kg(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!zO(this.projectionDelta.x,this.prevProjectionDelta.x)||!zO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zh(),this.projectionDelta=Zh(),this.projectionDeltaWithTransform=Zh()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=Zh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=ca(),g=l?l.source:void 0,b=this.layout?this.layout.source:void 0,v=g!==b,x=this.getStack(),w=!x||x.members.length<=1,_=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(Bbe));this.animationProgress=0;let E;this.mixTargetDelta=C=>{const k=C/1e3;qO(h.x,s.x,k),qO(h.y,s.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zg(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lbe(this.relativeTarget,this.relativeTargetOrigin,m,k),E&&_be(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ca()),Os(E,this.relativeTarget)),v&&(this.animationValues=d,gbe(d,u,this.latestValues,k,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ea.update(()=>{$w.hasAnimatedSinceResize=!0,this.currentAnimation=ube(0,UO,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(UO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&O7(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ca();const h=Ai(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+h;const m=Ai(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+m}Os(o,l),Xh(o,d),Kg(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Sbe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&PC("z",s,u,this.animationValues);for(let d=0;d<OC.length;d++)PC(`rotate${OC[d]}`,s,u,this.animationValues),PC(`skew${OC[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Cbe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=Lw(s==null?void 0:s.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Lw(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!qd(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=Ebe(this.projectionDeltaWithTransform,this.treeScale,d),l&&(o.transform=l(d,o.transform));const{x:h,y:m}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in K0){if(d[g]===void 0)continue;const{correct:b,applyTo:v,isCSSVariable:x}=K0[g],w=o.transform==="none"?d[g]:b(d[g],u);if(v){const _=v.length;for(let E=0;E<_;E++)o[v[E]]=w}else x?this.options.visualElement.renderState.vars[g]=w:o[g]=w}return this.options.layoutId&&(o.pointerEvents=u===this?Lw(s==null?void 0:s.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(VO),this.root.sharedNodes.clear()}}}function kbe(e){e.updateLayout()}function Abe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?Ps(h=>{const m=s?t.measuredBox[h]:t.layoutBox[h],g=Ai(m);m.min=r[h].min,m.max=m.min+g}):O7(i,t.layoutBox,r)&&Ps(h=>{const m=s?t.measuredBox[h]:t.layoutBox[h],g=Ai(r[h]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=Zh();Kg(o,r,t.layoutBox);const l=Zh();s?Kg(l,e.applyTransform(a,!0),t.measuredBox):Kg(l,r,t.layoutBox);const u=!I7(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const b=ca();Zg(b,t.layoutBox,m.layoutBox);const v=ca();Zg(v,r,g.layoutBox),j7(b,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=b,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Nbe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Rbe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ibe(e){e.clearSnapshot()}function VO(e){e.clearMeasurements()}function jbe(e){e.isLayoutDirty=!1}function Dbe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function HO(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Mbe(e){e.resolveTargetDelta()}function Obe(e){e.calcProjection()}function Pbe(e){e.resetSkewAndRotation()}function Fbe(e){e.removeLeadSnapshot()}function qO(e,t,n){e.translate=Xr(t.translate,0,n),e.scale=Xr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function GO(e,t,n,r){e.min=Xr(t.min,n.min,r),e.max=Xr(t.max,n.max,r)}function Lbe(e,t,n,r){GO(e.x,t.x,n.x,r),GO(e.y,t.y,n.y,r)}function Bbe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const $be={duration:.45,ease:[.4,0,.1,1]},WO=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),KO=WO("applewebkit/")&&!WO("chrome/")?Math.round:qs;function ZO(e){e.min=KO(e.min),e.max=KO(e.max)}function zbe(e){ZO(e.x),ZO(e.y)}function O7(e,t,n){return e==="position"||e==="preserve-aspect"&&!Uye($O(t),$O(n),.2)}function Ube(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Vbe=M7({attachResizeListener:(e,t)=>ey(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),FC={current:void 0},P7=M7({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!FC.current){const e=new Vbe({});e.mount(window),e.setOptions({layoutScroll:!0}),FC.current=e}return FC.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Hbe={pan:{Feature:sbe},drag:{Feature:ibe,ProjectionNode:P7,MeasureLayout:A7}};function qbe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const a=(n==null?void 0:n[e])??r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function F7(e,t){const n=qbe(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function YO(e){return!(e.pointerType==="touch"||k7())}function Gbe(e,t,n={}){const[r,a,i]=F7(e,n),s=o=>{if(!YO(o))return;const{target:l}=o,u=t(l,o);if(typeof u!="function"||!l)return;const d=h=>{YO(h)&&(u(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,a)};return r.forEach(o=>{o.addEventListener("pointerenter",s,a)}),i}function XO(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&ea.postRender(()=>i(t,ab(t)))}class Wbe extends ld{mount(){const{current:t}=this.node;t&&(this.unmount=Gbe(t,(n,r)=>(XO(this.node,r,"Start"),a=>XO(this.node,a,"End"))))}unmount(){}}class Kbe extends ld{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nb(ey(this.node.current,"focus",()=>this.onFocus()),ey(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const L7=(e,t)=>t?e===t?!0:L7(e,t.parentElement):!1,Zbe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ybe(e){return Zbe.has(e.tagName)||e.tabIndex!==-1}const Fg=new WeakSet;function JO(e){return t=>{t.key==="Enter"&&e(t)}}function LC(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Xbe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=JO(()=>{if(Fg.has(n))return;LC(n,"down");const a=JO(()=>{LC(n,"up")}),i=()=>LC(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function QO(e){return vR(e)&&!k7()}function Jbe(e,t,n={}){const[r,a,i]=F7(e,n),s=o=>{const l=o.currentTarget;if(!QO(o)||Fg.has(l))return;Fg.add(l);const u=t(l,o),d=(g,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),!(!QO(g)||!Fg.has(l))&&(Fg.delete(l),typeof u=="function"&&u(g,{success:b}))},h=g=>{d(g,l===window||l===document||n.useGlobalTarget||L7(l,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,a),o instanceof HTMLElement&&(o.addEventListener("focus",u=>Xbe(u,a)),!Ybe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function eP(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&ea.postRender(()=>i(t,ab(t)))}class Qbe extends ld{mount(){const{current:t}=this.node;t&&(this.unmount=Jbe(t,(n,r)=>(eP(this.node,r,"Start"),(a,{success:i})=>eP(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ck=new WeakMap,BC=new WeakMap,eve=e=>{const t=Ck.get(e.target);t&&t(e)},tve=e=>{e.forEach(eve)};function nve({root:e,...t}){const n=e||document;BC.has(n)||BC.set(n,{});const r=BC.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(tve,{root:e,...t})),r[a]}function rve(e,t,n){const r=nve(t);return Ck.set(e,n),r.observe(e),()=>{Ck.delete(e),r.unobserve(e)}}const ave={some:0,all:1};class ive extends ld{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:ave[a]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(l)};return rve(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(sve(t,n))&&this.startObserver()}unmount(){}}function sve({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const ove={inView:{Feature:ive},tap:{Feature:Qbe},focus:{Feature:Kbe},hover:{Feature:Wbe}},lve={layout:{ProjectionNode:P7,MeasureLayout:A7}},Tk={current:null},B7={current:!1};function cve(){if(B7.current=!0,!!VN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Tk.current=e.matches;e.addListener(t),t()}else Tk.current=!1}const uve=new WeakMap;function dve(e,t,n){for(const r in t){const a=t[r],i=n[r];if(pi(a))e.addValue(r,a);else if(pi(i))e.addValue(r,X0(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(a):s.hasAnimated||s.set(a)}else{const s=e.getStaticValue(r);e.addValue(r,X0(s!==void 0?s:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const $7=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),z7=e=>/^0[^.\s]+$/u.test(e),fve={test:e=>e==="auto",parse:e=>e},U7=e=>t=>t.test(e),V7=[om,En,dl,wu,_ge,xge,fve],tP=e=>V7.find(U7(e)),hve=[...V7,ui,Yu],pve=e=>hve.find(U7(e)),mve=new Set(["brightness","contrast","saturate","opacity"]);function gve(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(lR)||[];if(!r)return e;const a=n.replace(r,"");let i=mve.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const yve=/\b([a-z-]*)\(.*?\)/gu,kk={...Yu,getAnimatableNone:e=>{const t=e.match(yve);return t?t.map(gve).join(" "):e}},bve={...JN,color:ui,backgroundColor:ui,outlineColor:ui,fill:ui,stroke:ui,borderColor:ui,borderTopColor:ui,borderRightColor:ui,borderBottomColor:ui,borderLeftColor:ui,filter:kk,WebkitFilter:kk},H7=e=>bve[e];function q7(e,t){let n=H7(e);return n!==kk&&(n=Yu),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const nP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vve{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ki.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ea.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=b_(n),this.isVariantNode=T$(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&pi(g)&&g.set(l[m],!1)}}mount(t){this.current=t,uve.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),B7.current||cve(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tk.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Zu(this.notifyUpdate),Zu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=sm.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ea.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Rp){const n=Rp[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ca()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<nP.length;r++){const a=nP[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,s=t[i];s&&(this.propEventSubscriptions[a]=this.on(a,s))}this.prevMotionValues=dve(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=X0(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&($7(r)||z7(r))?r=parseFloat(r):!pve(r)&&Yu.test(n)&&(r=q7(t,n)),this.setBaseTarget(t,pi(r)?r.get():r)),pi(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=nR(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!pi(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new sR),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}const wve=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xve(e){const t=wve.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function G7(e,t,n=1){const[r,a]=xve(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const s=i.trim();return $7(s)?parseFloat(s):s}return XN(a)?G7(a,t,n+1):a}function _ve(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||z7(e):!0}const Sve=new Set(["auto","none","0"]);function Eve(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!Sve.has(i)&&J0(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=q7(n,a)}class Cve extends gR{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),XN(u))){const d=G7(u,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!p7.has(r)||t.length!==2)return;const[a,i]=t,s=tP(a),o=tP(i);if(s!==o)if(sO(s)&&sO(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else of[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||_ve(t[a]))&&r.push(a);r.length&&Eve(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=of[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=of[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}class W7 extends vve{constructor(){super(...arguments),this.KeyframeResolver=Cve}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function K7(e,{style:t,vars:n},r,a){Object.assign(e.style,t,a&&a.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}function Tve(e){return window.getComputedStyle(e)}class kve extends W7{constructor(){super(...arguments),this.type="html",this.renderInstance=K7}readValueFromInstance(t,n){if(sm.has(n))return X0e(t,n);{const r=Tve(t),a=(YN(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return S7(t,n)}build(t,n,r){QN(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return rR(t,n,r)}}const Z7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ave(e,t,n,r){K7(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(Z7.has(a)?a:WN(a),t.attrs[a])}class Nve extends W7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ca}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(sm.has(n)){const r=H7(n);return r&&r.default||0}return n=Z7.has(n)?n:WN(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return L$(t,n,r)}build(t,n,r){M$(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){Ave(t,n,r,a)}mount(t){this.isSVGTag=P$(t.tagName),super.mount(t)}}const Rve=(e,t)=>tR(e)?new Nve(t):new kve(t,{allowProjection:e!==T.Fragment}),Ive=$ge({...Mye,...ove,...Hbe,...lve},Rve),fo=sge(Ive),jve=".litechat/conversations",Y7="/synced_repos";async function Dve(e,t,n){n(t.id,"syncing");const r=ar(`${Y7}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let s=!1;try{await e.promises.stat(bl(r,".git")),s=!0}catch(o){if(o.code==="ENOENT")s=!1;else throw o}s?(Ge.info(`Pulling latest changes for "${t.name}"...`),await s_(r,i,a,{fsInstance:e}),Ge.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(Ge.info(`Cloning repository "${t.name}"...`),await wB(r,t.remoteUrl,i,a,{fsInstance:e}),Ge.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(s){console.error(`Failed to initialize/sync repository ${t.name}:`,s),n(t.id,"error")}}async function Mve(e,t,n,r,a,i,s){var h,m;r(t.id,"syncing");const o=ar(`${Y7}/${n.id}`),l=bl(o,jve,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(bl(o,".git"))}catch(w){if(w.code==="ENOENT"){Ge.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw w}Ge.info(`Pulling latest changes for "${n.name}"...`),await s_(o,d,u,{fsInstance:e});let g=null,b=null;try{const w=await Bf(l,{fsInstance:e}),_=new TextDecoder().decode(w);g=JSON.parse(_),b=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(b??NaN)&&(b=null)}catch(w){w.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${w.message}`),Ge.warning(`Could not read remote version of conversation: ${w.message}`))}const v=t.updatedAt.getTime(),x=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!g||v>(b??0)||v>x&&v>=(b??0)){Ge.info("Local changes detected. Pushing to remote...");const w=await _t.loadInteractionsForConversation(t.id),{lastSyncedAt:_,...E}=t,C=JSON.stringify({conversation:E,interactions:w},null,2);await o_(l,C,{fsInstance:e}),await SN(o,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await EN(o,d,u,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),Ge.success("Conversation synced successfully (pushed).")}else if(b&&b>v){Ge.info("Remote changes detected. Updating local conversation...");const w={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await _t.saveConversation(w),await _t.deleteInteractionsForConversation(t.id);const _=g.interactions.map(E=>_t.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(_),i()===t.id&&s()==="conversation"&&await Mn.getState().loadInteractions(t.id),r(t.id,"idle"),Ge.success("Conversation synced successfully (pulled).")}else Ge.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const ko=Ks(Zs((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&Ge.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const s=i.parentId??r.rootId??"";a[s]||(a[s]=r.childrenMap[s]?[...r.childrenMap[s]]:[]),a[s].includes(i.id)||a[s].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const s=i.parentId??r.rootId??"";if(r.childrenMap[s]&&(r.childrenMap[s]=r.childrenMap[s].filter(o=>o!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Tt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Tt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Tt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:s,_addNodes:o,_setFsInstance:l,_setConfiguredVfsKey:u}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),s(null));try{const d=await mde(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const g=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${g}`),e({initializingKey:null,loading:!1}),new Error(g)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),u(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let m=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(g){if(g.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw g}if(!m||m.path!=="/"){const g=Date.now();m={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:g,lastModified:g},o([m]),console.log("[VfsStore] Root node added/updated in state.")}return e(g=>{g.rootId=m.id,g.currentParentId=m.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${m.id}`),await t().fetchNodes(m.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(s(h),a||(l(null),u(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d,initializingKey:h}=t();if(!s||u!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!s}, Match: ${u===d}, Init: ${h}`);return}r(!0);try{const m=n?o[n]:o[l||""],g=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${u})`);const b=await CN(g,{fsInstance:s});console.log(`[VfsStore] Fetched ${b.length} entries for ${g}`);const v=n??l??"",x=new Set(b.map(k=>k.path)),E=(t().childrenMap[v]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!x.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=b.map(k=>{const I=Object.values(t().nodes).find(N=>N.path===k.path),j=Date.now();return{id:(I==null?void 0:I.id)||ji(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(I==null?void 0:I.createdAt)??j,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(k=>{const I=C.map(j=>j.id);(!k.childrenMap[v]||JSON.stringify(k.childrenMap[v].sort())!==JSON.stringify(I.sort()))&&(k.childrenMap[v]=I,console.log(`[VfsStore] Updated childrenMap for parent: ${v}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=ar(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:s}=t();if(!s||t().vfsKey!==t().configuredVfsKey)return;const o=ar(n),l=r(o);l&&l.type==="folder"?(e(u=>{u.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,_addNodes:u,configuredVfsKey:d,vfsKey:h}=t();if(!s||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const m=n?o[n]:o[l||""],g=m?m.path:"/",b=j0(g,r.trim());try{throw await s.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await SB(b,{fsInstance:s});const v=Date.now(),w={id:ji(),parentId:n,name:r.trim(),path:b,type:"folder",createdAt:v,lastModified:v};u([w])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d}=t();if(!s||u!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/";await EB(Array.from(r),m,{fsInstance:s}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:s,configuredVfsKey:o,vfsKey:l}=t();if(!s||o!==l){a("Filesystem not ready.");return}r(!0);try{const u=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of u)await TN(d.path,d.type==="folder",{fsInstance:s});i(n)}catch(u){console.error("Failed to delete nodes:",u),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:s,nodes:o,fs:l,rootId:u,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=o[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){a(!0);try{const g=m.parentId?o[m.parentId]:o[u||""],b=g?g.path:"/",v=j0(b,r.trim());try{throw await l.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(w){if(w.code!=="ENOENT")throw w}await CB(m.path,v,{fsInstance:l});const x={name:r.trim(),path:v,lastModified:Date.now()};s(n,x)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:s,vfsKey:o}=t();if(!a||s!==o)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const u=await Bf(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([u],{type:d});return{name:l.name,blob:h}}catch(u){return console.error("Failed to download file:",u),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),fi=Ks(Zs((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{const r=ji(),a=new Date,i=n.parentId??null,s=i?t().getProjectById(i):null,o=s?s.path:"/",l=j0(o,n.name),u={id:r,createdAt:a,updatedAt:a,name:n.name,parentId:i,path:l,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(d=>{d.projects.push(u),d.projects.sort((h,m)=>m.updatedAt.getTime()-h.updatedAt.getTime())});try{const d=t().getProjectById(r);if(d)await _t.saveProject(d),await ko.getState().initializeVFS(r);else throw new Error("Failed to retrieve newly added project state");return r}catch(d){throw console.error("ProjectStore: Error adding project",d),e(h=>({error:"Failed to save new project",projects:h.projects.filter(m=>m.id!==r)})),d}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}let i=a.path;if(r.name&&r.name!==a.name){const o=Iy(a.path);i=j0(o,r.name)}const s={...a,...r,path:i,updatedAt:new Date};e(o=>{const l=o.projects.findIndex(u=>u.id===n);l!==-1&&(o.projects[l]=s,o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()))});try{await _t.saveProject(s)}catch(o){throw console.error("ProjectStore: Error updating project",o),e(l=>{const u=l.projects.findIndex(d=>d.id===n);u!==-1&&(l.projects[u]=a,l.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())),l.error="Failed to save project update"}),o}},deleteProject:async n=>{const r=t().getProjectById(n);if(!r)return;const a=t().projects.filter(s=>s.parentId===n).map(s=>s.id),i=[n,...a];e(s=>({projects:s.projects.filter(o=>!i.includes(o.id))})),mn.getState()._unlinkConversationsFromProjects(i);try{await _t.deleteProject(n),Ge.success(`Project "${r.name}" deleted.`)}catch(s){throw console.error("ProjectStore: Error deleting project",s),e(o=>{const l=t().projects.filter(u=>i.includes(u.id)).concat(r);o.projects.push(...l),o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),o.error="Failed to delete project"}),s}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getProjectHierarchy:n=>{const r=[];let a=n;for(;a;){const i=t().getProjectById(a);if(i)r.unshift({id:i.id,name:i.name}),a=i.parentId;else break}return r},getEffectiveProjectSettings:n=>{const r=pr.getState(),a=Un.getState().selectedModelId;let i=n,s={systemPrompt:null,modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null};for(;i;){const o=t().getProjectById(i);if(o)s.systemPrompt===null&&o.systemPrompt!==null&&o.systemPrompt!==void 0&&(s.systemPrompt=o.systemPrompt),s.modelId===null&&o.modelId!==null&&o.modelId!==void 0&&(s.modelId=o.modelId),s.temperature===null&&o.temperature!==null&&o.temperature!==void 0&&(s.temperature=o.temperature),s.maxTokens===null&&o.maxTokens!==null&&o.maxTokens!==void 0&&(s.maxTokens=o.maxTokens),s.topP===null&&o.topP!==null&&o.topP!==void 0&&(s.topP=o.topP),s.topK===null&&o.topK!==null&&o.topK!==void 0&&(s.topK=o.topK),s.presencePenalty===null&&o.presencePenalty!==null&&o.presencePenalty!==void 0&&(s.presencePenalty=o.presencePenalty),s.frequencyPenalty===null&&o.frequencyPenalty!==null&&o.frequencyPenalty!==void 0&&(s.frequencyPenalty=o.frequencyPenalty),i=o.parentId;else break}return s.systemPrompt===null&&(s.systemPrompt=r.globalSystemPrompt),s.modelId===null&&(s.modelId=a),s.temperature===null&&(s.temperature=r.temperature),s.maxTokens===null&&(s.maxTokens=r.maxTokens),s.topP===null&&(s.topP=r.topP),s.topK===null&&(s.topK=r.topK),s.presencePenalty===null&&(s.presencePenalty=r.presencePenalty),s.frequencyPenalty===null&&(s.frequencyPenalty=r.frequencyPenalty),s}}))),ww=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Ove=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${ak(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${ak(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,s,o,l,u,d,h;((a=r.prompt)!=null&&a.content||(o=(s=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${I0(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(u=r.metadata)!=null&&u.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class Jh{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const s=i.conversation,o=i.interactions;if(!s.id||!s.title||!s.createdAt||!s.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:s.title||"Imported Chat",metadata:s.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(d=>_t.saveInteraction({...d,conversationId:l,id:ji()}));await Promise.all(u),await r(l,"conversation"),Ge.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),Ge.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=mn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await _t.loadInteractionsForConversation(t);let i,s;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const u=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([u],{type:"application/json"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=Ove(r,a);i=new Blob([l],{type:"text/markdown"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");ww(i,s),Ge.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),Ge.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=fi.getState(),{conversations:a}=mn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const s=async m=>{const g=n.find(w=>w.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const b=n.filter(w=>w.parentId===m),v=a.filter(w=>w.projectId===m),x=[];for(const w of b)x.push(await s(w.id));for(const w of v){const _=await _t.loadInteractionsForConversation(w.id);x.push({conversation:w,interactions:_})}return{project:g,children:x}},o=await s(t),l=JSON.stringify(o,null,2),u=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;ww(u,h),Ge.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),Ge.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=mn.getState().conversations,n=[];for(const s of t){const o=await _t.loadInteractionsForConversation(s.id);n.push({conversation:s,interactions:o})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;ww(a,i),Ge.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),Ge.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await _t.getAllDataForExport(t),r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;ww(a,i),Ge.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),Ge.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.version)throw new Error("Invalid import file format. Missing version or basic structure.");await _t.importAllData(a,n),Ge.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),Ge.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const rP="sync_repos",Pve="/synced_repos",mn=Ks(Zs((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await ko.getState().initializeVFS(rP,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${rP}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),Ge.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await fi.getState().loadProjects();const[n,r]=await Promise.all([_t.loadConversations(),_t.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const s=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,o=i.updatedAt instanceof Date?i.updatedAt.getTime():null;s?o&&o>s?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(s=>{s.conversations.some(o=>o.id===i.id)||(s.conversations.unshift(i),s.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const s=t().getConversationById(r);if(s)await _t.saveConversation(s),Tt.emit(Et.CONVERSATION_ADDED,{conversation:s});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(s){throw console.error("ConversationStore: Error adding conversation",s),e(o=>({error:"Failed to save new conversation",conversations:o.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([l])=>l!==r))})),s}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=s.conversations[o].metadata??{},u=r.metadata??{},d={...l,...u};Object.assign(s.conversations[o],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(b=>b in r),m=s.conversations[o].lastSyncedAt instanceof Date?s.conversations[o].lastSyncedAt.getTime():null,g=s.conversations[o].updatedAt.getTime();"syncRepoId"in r?s.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&s.conversations[o].syncRepoId&&s.conversationSyncStatus[n]==="idle"&&(!m||g>m)&&(s.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const s=JSON.parse(JSON.stringify(i));await _t.saveConversation(s),Tt.emit(Et.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(s){throw console.error("ConversationStore: Error updating conversation",s),e(o=>{const l=o.conversations.findIndex(u=>u.id===n);if(l!==-1){o.conversations[l]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&d<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),s}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){s.conversations[o]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,u=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&l&&u<=l?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(s=>s.id===n);if(i){e(s=>({conversations:s.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([o])=>o!==n))}));try{await _t.deleteConversation(n),await _t.deleteInteractionsForConversation(n),Tt.emit(Et.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await Mn.getState().setCurrentConversationId(null),Tt.emit(Et.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(s){throw console.error("ConversationStore: Error deleting conversation",s),e(o=>{if(i){o.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&l&&u<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),s}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await Mn.getState().setCurrentConversationId(r==="conversation"?n:null),Tt.emit(Et.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?Tt.emit(Et.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?Tt.emit(Et.PROJECT_SELECTED,{projectId:n}):(Tt.emit(Et.CONVERSATION_SELECTED,{conversationId:null}),Tt.emit(Et.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await Jh.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await Jh.exportConversation(n,r)},exportProject:async n=>{await Jh.exportProject(n)},exportAllConversations:async()=>{await Jh.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await _t.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(s=>{s.syncRepos.push(i)});try{const s=t().syncRepos.find(o=>o.id===r);if(s){const o=JSON.parse(JSON.stringify(s));await _t.saveSyncRepo(o),Tt.emit(Et.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return Ge.success(`Sync repository "${i.name}" added.`),r}catch(s){throw console.error("ConversationStore: Error adding sync repo",s),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),s}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(s=>s.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(s.syncRepos[o],{...r,branch:r.branch||s.syncRepos[o].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(s=>s.id===n);if(i)try{const s=JSON.parse(JSON.stringify(i));await _t.saveSyncRepo(s),Tt.emit(Et.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),Ge.success(`Sync repository "${i.name}" updated.`)}catch(s){throw console.error("ConversationStore: Error updating sync repo",s),e(o=>{const l=o.syncRepos.findIndex(u=>u.id===n);l!==-1&&(o.syncRepos[l]=a),o.error="Failed to save sync repository update"}),s}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&(s.syncRepos[o]=a),s.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(s=>s.id===n);if(!r)return;const a=ar(`${Pve}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(s=>({syncRepos:s.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(s.repoInitializationStatus).filter(([o])=>o!==n))}));try{await _t.deleteSyncRepo(n),Tt.emit(Et.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),Ge.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await TN(a,!0,{fsInstance:i}),Ge.info(`Removed local sync folder for "${r.name}".`)}catch(s){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,s),s.code!=="ENOENT"&&Ge.warning(`Failed to remove local sync folder: ${s.message}`)}}catch(s){throw console.error("ConversationStore: Error deleting sync repo",s),e(o=>{r&&o.syncRepos.push(r),o.error="Failed to delete sync repository"}),s}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),Ge.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),Tt.emit(Et.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),Tt.emit(Et.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){Ge.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await Dve(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){Ge.error("Conversation not found for syncing.");return}if(!r.syncRepoId){Ge.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(o=>o.id===r.syncRepoId);if(!a){Ge.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await Mve(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const s=t().getConversationById(n);s&&e(o=>{const l=o.conversations.findIndex(u=>u.id===n);l!==-1&&(o.conversations[l]=s)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const s=t().getConversationById(r);if(!s){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=s.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!s.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}})));function Rn({className:e,type:t,...n}){return p.jsx("input",{type:t,"data-slot":"input",className:xt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function v_(e){const t=e+"CollectionProvider",[n,r]=vi(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=v=>{const{scope:x,children:w}=v,_=gt.useRef(null),E=gt.useRef(new Map).current;return p.jsx(a,{scope:x,itemMap:E,collectionRef:_,children:w})};s.displayName=t;const o=e+"CollectionSlot",l=Iu(o),u=gt.forwardRef((v,x)=>{const{scope:w,children:_}=v,E=i(o,w),C=kn(x,E.collectionRef);return p.jsx(l,{ref:C,children:_})});u.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Iu(d),g=gt.forwardRef((v,x)=>{const{scope:w,children:_,...E}=v,C=gt.useRef(null),k=kn(x,C),I=i(d,w);return gt.useEffect(()=>(I.itemMap.set(C,{ref:C,...E}),()=>void I.itemMap.delete(C))),p.jsx(m,{[h]:"",ref:k,children:_})});g.displayName=d;function b(v){const x=i(e+"CollectionConsumer",v);return gt.useCallback(()=>{const _=x.collectionRef.current;if(!_)return[];const E=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((I,j)=>E.indexOf(I.ref.current)-E.indexOf(j.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:s,Slot:u,ItemSlot:g},b,r]}var $C=0;function w_(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??aP()),document.body.insertAdjacentElement("beforeend",e[1]??aP()),$C++,()=>{$C===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),$C--}},[])}function aP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zC="focusScope.autoFocusOnMount",UC="focusScope.autoFocusOnUnmount",iP={bubbles:!1,cancelable:!0},Fve="FocusScope",ib=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,l]=T.useState(null),u=Ua(a),d=Ua(i),h=T.useRef(null),m=kn(t,v=>l(v)),g=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let v=function(E){if(g.paused||!o)return;const C=E.target;o.contains(C)?h.current=C:xu(h.current,{select:!0})},x=function(E){if(g.paused||!o)return;const C=E.relatedTarget;C!==null&&(o.contains(C)||xu(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&xu(o)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const _=new MutationObserver(w);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),_.disconnect()}}},[r,o,g.paused]),T.useEffect(()=>{if(o){oP.add(g);const v=document.activeElement;if(!o.contains(v)){const w=new CustomEvent(zC,iP);o.addEventListener(zC,u),o.dispatchEvent(w),w.defaultPrevented||(Lve(Vve(X7(o)),{select:!0}),document.activeElement===v&&xu(o))}return()=>{o.removeEventListener(zC,u),setTimeout(()=>{const w=new CustomEvent(UC,iP);o.addEventListener(UC,d),o.dispatchEvent(w),w.defaultPrevented||xu(v??document.body,{select:!0}),o.removeEventListener(UC,d),oP.remove(g)},0)}}},[o,u,d,g]);const b=T.useCallback(v=>{if(!n&&!r||g.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,w=document.activeElement;if(x&&w){const _=v.currentTarget,[E,C]=Bve(_);E&&C?!v.shiftKey&&w===C?(v.preventDefault(),n&&xu(E,{select:!0})):v.shiftKey&&w===E&&(v.preventDefault(),n&&xu(C,{select:!0})):w===_&&v.preventDefault()}},[n,r,g.paused]);return p.jsx(an.div,{tabIndex:-1,...s,ref:m,onKeyDown:b})});ib.displayName=Fve;function Lve(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(xu(r,{select:t}),document.activeElement!==n)return}function Bve(e){const t=X7(e),n=sP(t,e),r=sP(t.reverse(),e);return[n,r]}function X7(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function sP(e,t){for(const n of e)if(!$ve(n,{upTo:t}))return n}function $ve(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zve(e){return e instanceof HTMLInputElement&&"select"in e}function xu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&zve(e)&&t&&e.select()}}var oP=Uve();function Uve(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=lP(e,t),e.unshift(t)},remove(t){var n;e=lP(e,t),(n=e[0])==null||n.resume()}}}function lP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Vve(e){return e.filter(t=>t.tagName!=="A")}function x_(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Hve=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Fh=new WeakMap,xw=new WeakMap,_w={},VC=0,J7=function(e){return e&&(e.host||J7(e.parentNode))},qve=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=J7(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Gve=function(e,t,n,r){var a=qve(t,Array.isArray(e)?e:[e]);_w[n]||(_w[n]=new WeakMap);var i=_w[n],s=[],o=new Set,l=new Set(a),u=function(h){!h||o.has(h)||(o.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(o.has(m))d(m);else try{var g=m.getAttribute(r),b=g!==null&&g!=="false",v=(Fh.get(m)||0)+1,x=(i.get(m)||0)+1;Fh.set(m,v),i.set(m,x),s.push(m),v===1&&b&&xw.set(m,!0),x===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(t),o.clear(),VC++,function(){s.forEach(function(h){var m=Fh.get(h)-1,g=i.get(h)-1;Fh.set(h,m),i.set(h,g),m||(xw.has(h)||h.removeAttribute(r),xw.delete(h)),g||h.removeAttribute(n)}),VC--,VC||(Fh=new WeakMap,Fh=new WeakMap,xw=new WeakMap,_w={})}},__=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Hve(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Gve(r,a,n,"aria-hidden")):function(){return null}},al=function(){return al=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},al.apply(this,arguments)};function Q7(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Wve(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var zw="right-scroll-bar-position",Uw="width-before-scroll-bar",Kve="with-scroll-bars-hidden",Zve="--removed-body-scroll-bar-size";function HC(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Yve(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Xve=typeof window<"u"?T.useLayoutEffect:T.useEffect,cP=new WeakMap;function Jve(e,t){var n=Yve(null,function(r){return e.forEach(function(a){return HC(a,r)})});return Xve(function(){var r=cP.get(n);if(r){var a=new Set(r),i=new Set(e),s=n.current;a.forEach(function(o){i.has(o)||HC(o,null)}),i.forEach(function(o){a.has(o)||HC(o,s)})}cP.set(n,e)},[e]),n}function Qve(e){return e}function ewe(e,t){t===void 0&&(t=Qve);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(i),s=n}var l=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return a}function twe(e){e===void 0&&(e={});var t=ewe(null);return t.options=al({async:!0,ssr:!1},e),t}var ez=function(e){var t=e.sideCar,n=Q7(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,al({},n))};ez.isSideCarExport=!0;function nwe(e,t){return e.useMedium(t),ez}var tz=twe(),qC=function(){},S_=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:qC,onWheelCapture:qC,onTouchMoveCapture:qC}),a=r[0],i=r[1],s=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,b=e.inert,v=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,_=e.gapMode,E=Q7(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,k=Jve([n,t]),I=al(al({},E),a);return T.createElement(T.Fragment,null,d&&T.createElement(C,{sideCar:tz,removeScrollBar:u,shards:h,noIsolation:g,inert:b,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:_}),s?T.cloneElement(T.Children.only(o),al(al({},I),{ref:k})):T.createElement(w,al({},I,{className:l,ref:k}),o))});S_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};S_.classNames={fullWidth:Uw,zeroRight:zw};var rwe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function awe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=rwe();return t&&e.setAttribute("nonce",t),e}function iwe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function swe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var owe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=awe())&&(iwe(t,n),swe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},lwe=function(){var e=owe();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},nz=function(){var e=lwe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},cwe={left:0,top:0,right:0,gap:0},GC=function(e){return parseInt(e||"",10)||0},uwe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[GC(n),GC(r),GC(a)]},dwe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return cwe;var t=uwe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},fwe=nz(),sp="data-scroll-locked",hwe=function(e,t,n,r){var a=e.left,i=e.top,s=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Kve,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(sp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zw,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Uw,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(zw," .").concat(zw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Uw," .").concat(Uw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(sp,`] {
    `).concat(Zve,": ").concat(o,`px;
  }
`)},uP=function(){var e=parseInt(document.body.getAttribute(sp)||"0",10);return isFinite(e)?e:0},pwe=function(){T.useEffect(function(){return document.body.setAttribute(sp,(uP()+1).toString()),function(){var e=uP()-1;e<=0?document.body.removeAttribute(sp):document.body.setAttribute(sp,e.toString())}},[])},mwe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;pwe();var i=T.useMemo(function(){return dwe(a)},[a]);return T.createElement(fwe,{styles:hwe(i,!t,a,n?"":"!important")})},Ak=!1;if(typeof window<"u")try{var Sw=Object.defineProperty({},"passive",{get:function(){return Ak=!0,!0}});window.addEventListener("test",Sw,Sw),window.removeEventListener("test",Sw,Sw)}catch{Ak=!1}var Lh=Ak?{passive:!1}:!1,gwe=function(e){return e.tagName==="TEXTAREA"},rz=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!gwe(e)&&n[t]==="visible")},ywe=function(e){return rz(e,"overflowY")},bwe=function(e){return rz(e,"overflowX")},dP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=az(e,r);if(a){var i=iz(e,r),s=i[1],o=i[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vwe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},wwe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},az=function(e,t){return e==="v"?ywe(t):bwe(t)},iz=function(e,t){return e==="v"?vwe(t):wwe(t)},xwe=function(e,t){return e==="h"&&t==="rtl"?-1:1},_we=function(e,t,n,r,a){var i=xwe(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,l=t.contains(o),u=!1,d=s>0,h=0,m=0;do{var g=iz(e,o),b=g[0],v=g[1],x=g[2],w=v-x-i*b;(b||w)&&az(e,o)&&(h+=w,m+=b),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(u=!0),u},Ew=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fP=function(e){return[e.deltaX,e.deltaY]},hP=function(e){return e&&"current"in e?e.current:e},Swe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ewe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Cwe=0,Bh=[];function Twe(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),a=T.useState(Cwe++)[0],i=T.useState(nz)[0],s=T.useRef(e);T.useEffect(function(){s.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Wve([e.lockRef.current],(e.shards||[]).map(hP),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=T.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!s.current.allowPinchZoom;var w=Ew(v),_=n.current,E="deltaX"in v?v.deltaX:_[0]-w[0],C="deltaY"in v?v.deltaY:_[1]-w[1],k,I=v.target,j=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in v&&j==="h"&&I.type==="range")return!1;var N=dP(j,I);if(!N)return!0;if(N?k=j:(k=j==="v"?"h":"v",N=dP(j,I)),!N)return!1;if(!r.current&&"changedTouches"in v&&(E||C)&&(r.current=k),!k)return!0;var P=r.current||k;return _we(P,x,v,P==="h"?E:C)},[]),l=T.useCallback(function(v){var x=v;if(!(!Bh.length||Bh[Bh.length-1]!==i)){var w="deltaY"in x?fP(x):Ew(x),_=t.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&Swe(k.delta,w)})[0];if(_&&_.should){x.cancelable&&x.preventDefault();return}if(!_){var E=(s.current.shards||[]).map(hP).filter(Boolean).filter(function(k){return k.contains(x.target)}),C=E.length>0?o(x,E[0]):!s.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),u=T.useCallback(function(v,x,w,_){var E={name:v,delta:x,target:w,should:_,shadowParent:kwe(w)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),d=T.useCallback(function(v){n.current=Ew(v),r.current=void 0},[]),h=T.useCallback(function(v){u(v.type,fP(v),v.target,o(v,e.lockRef.current))},[]),m=T.useCallback(function(v){u(v.type,Ew(v),v.target,o(v,e.lockRef.current))},[]);T.useEffect(function(){return Bh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Lh),document.addEventListener("touchmove",l,Lh),document.addEventListener("touchstart",d,Lh),function(){Bh=Bh.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,Lh),document.removeEventListener("touchmove",l,Lh),document.removeEventListener("touchstart",d,Lh)}},[]);var g=e.removeScrollBar,b=e.inert;return T.createElement(T.Fragment,null,b?T.createElement(i,{styles:Ewe(a)}):null,g?T.createElement(mwe,{gapMode:e.gapMode}):null)}function kwe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Awe=nwe(tz,Twe);var sb=T.forwardRef(function(e,t){return T.createElement(S_,al({},e,{ref:t,sideCar:Awe}))});sb.classNames=S_.classNames;var Nwe=[" ","Enter","ArrowUp","ArrowDown"],Rwe=[" ","Enter"],vf="Select",[E_,C_,Iwe]=v_(vf),[lm,R3e]=vi(vf,[Iwe,Qu]),T_=Qu(),[jwe,cd]=lm(vf),[Dwe,Mwe]=lm(vf),sz=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:m,required:g,form:b}=e,v=T_(t),[x,w]=T.useState(null),[_,E]=T.useState(null),[C,k]=T.useState(!1),I=am(u),[j,N]=Eo({prop:r,defaultProp:a??!1,onChange:i,caller:vf}),[P,L]=Eo({prop:s,defaultProp:o,onChange:l,caller:vf}),H=T.useRef(null),M=x?b||!!x.closest("form"):!0,[K,q]=T.useState(new Set),ue=Array.from(K).map(ae=>ae.props.value).join(";");return p.jsx(j1,{...v,children:p.jsxs(jwe,{required:g,scope:t,trigger:x,onTriggerChange:w,valueNode:_,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:Ha(),value:P,onValueChange:L,open:j,onOpenChange:N,dir:I,triggerPointerDownPosRef:H,disabled:m,children:[p.jsx(E_.Provider,{scope:t,children:p.jsx(Dwe,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(ae=>{q(te=>new Set(te).add(ae))},[]),onNativeOptionRemove:T.useCallback(ae=>{q(te=>{const Y=new Set(te);return Y.delete(ae),Y})},[]),children:n})}),M?p.jsxs(Az,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:P,onChange:ae=>L(ae.target.value),disabled:m,form:b,children:[P===void 0?p.jsx("option",{value:""}):null,Array.from(K)]},ue):null]})})};sz.displayName=vf;var oz="SelectTrigger",lz=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=T_(n),s=cd(oz,n),o=s.disabled||r,l=kn(t,s.onTriggerChange),u=C_(n),d=T.useRef("touch"),[h,m,g]=Rz(v=>{const x=u().filter(E=>!E.disabled),w=x.find(E=>E.value===s.value),_=Iz(x,v,w);_!==void 0&&s.onValueChange(_.value)}),b=v=>{o||(s.onOpenChange(!0),g()),v&&(s.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return p.jsx(_y,{asChild:!0,...i,children:p.jsx(an.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Nz(s.value)?"":void 0,...a,ref:l,onClick:qt(a.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&b(v)}),onPointerDown:qt(a.onPointerDown,v=>{d.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(b(v),v.preventDefault())}),onKeyDown:qt(a.onKeyDown,v=>{const x=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&Nwe.includes(v.key)&&(b(),v.preventDefault())})})})});lz.displayName=oz;var cz="SelectValue",uz=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...o}=e,l=cd(cz,n),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=kn(t,l.onValueNodeChange);return ri(()=>{u(d)},[u,d]),p.jsx(an.span,{...o,ref:h,style:{pointerEvents:"none"},children:Nz(l.value)?p.jsx(p.Fragment,{children:s}):i})});uz.displayName=cz;var Owe="SelectIcon",dz=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return p.jsx(an.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});dz.displayName=Owe;var Pwe="SelectPortal",fz=e=>p.jsx(Up,{asChild:!0,...e});fz.displayName=Pwe;var wf="SelectContent",hz=T.forwardRef((e,t)=>{const n=cd(wf,e.__scopeSelect),[r,a]=T.useState();if(ri(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?il.createPortal(p.jsx(pz,{scope:e.__scopeSelect,children:p.jsx(E_.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),i):null}return p.jsx(mz,{...e,ref:t})});hz.displayName=wf;var co=10,[pz,ud]=lm(wf),Fwe="SelectContentImpl",Lwe=Iu("SelectContent.RemoveScroll"),mz=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:b,hideWhenDetached:v,avoidCollisions:x,...w}=e,_=cd(wf,n),[E,C]=T.useState(null),[k,I]=T.useState(null),j=kn(t,ke=>C(ke)),[N,P]=T.useState(null),[L,H]=T.useState(null),M=C_(n),[K,q]=T.useState(!1),ue=T.useRef(!1);T.useEffect(()=>{if(E)return __(E)},[E]),w_();const ae=T.useCallback(ke=>{const[Te,...Se]=M().map(Le=>Le.ref.current),[Pe]=Se.slice(-1),Qe=document.activeElement;for(const Le of ke)if(Le===Qe||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Te&&k&&(k.scrollTop=0),Le===Pe&&k&&(k.scrollTop=k.scrollHeight),Le==null||Le.focus(),document.activeElement!==Qe))return},[M,k]),te=T.useCallback(()=>ae([N,E]),[ae,N,E]);T.useEffect(()=>{K&&te()},[K,te]);const{onOpenChange:Y,triggerPointerDownPosRef:ie}=_;T.useEffect(()=>{if(E){let ke={x:0,y:0};const Te=Pe=>{var Qe,Le;ke={x:Math.abs(Math.round(Pe.pageX)-(((Qe=ie.current)==null?void 0:Qe.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((Le=ie.current)==null?void 0:Le.y)??0))}},Se=Pe=>{ke.x<=10&&ke.y<=10?Pe.preventDefault():E.contains(Pe.target)||Y(!1),document.removeEventListener("pointermove",Te),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",Se,{capture:!0})}}},[E,Y,ie]),T.useEffect(()=>{const ke=()=>Y(!1);return window.addEventListener("blur",ke),window.addEventListener("resize",ke),()=>{window.removeEventListener("blur",ke),window.removeEventListener("resize",ke)}},[Y]);const[V,J]=Rz(ke=>{const Te=M().filter(Qe=>!Qe.disabled),Se=Te.find(Qe=>Qe.ref.current===document.activeElement),Pe=Iz(Te,ke,Se);Pe&&setTimeout(()=>Pe.ref.current.focus())}),Q=T.useCallback((ke,Te,Se)=>{const Pe=!ue.current&&!Se;(_.value!==void 0&&_.value===Te||Pe)&&(P(ke),Pe&&(ue.current=!0))},[_.value]),ne=T.useCallback(()=>E==null?void 0:E.focus(),[E]),he=T.useCallback((ke,Te,Se)=>{const Pe=!ue.current&&!Se;(_.value!==void 0&&_.value===Te||Pe)&&H(ke)},[_.value]),de=r==="popper"?Nk:gz,Ie=de===Nk?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:b,hideWhenDetached:v,avoidCollisions:x}:{};return p.jsx(pz,{scope:n,content:E,viewport:k,onViewportChange:I,itemRefCallback:Q,selectedItem:N,onItemLeave:ne,itemTextRefCallback:he,focusSelectedItem:te,selectedItemText:L,position:r,isPositioned:K,searchRef:V,children:p.jsx(sb,{as:Lwe,allowPinchZoom:!0,children:p.jsx(ib,{asChild:!0,trapped:_.open,onMountAutoFocus:ke=>{ke.preventDefault()},onUnmountAutoFocus:qt(a,ke=>{var Te;(Te=_.trigger)==null||Te.focus({preventScroll:!0}),ke.preventDefault()}),children:p.jsx(Bp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:ke=>ke.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:p.jsx(de,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ke=>ke.preventDefault(),...w,...Ie,onPlaced:()=>q(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:qt(w.onKeyDown,ke=>{const Te=ke.ctrlKey||ke.altKey||ke.metaKey;if(ke.key==="Tab"&&ke.preventDefault(),!Te&&ke.key.length===1&&J(ke.key),["ArrowUp","ArrowDown","Home","End"].includes(ke.key)){let Pe=M().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(ke.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ke.key)){const Qe=ke.target,Le=Pe.indexOf(Qe);Pe=Pe.slice(Le+1)}setTimeout(()=>ae(Pe)),ke.preventDefault()}})})})})})})});mz.displayName=Fwe;var Bwe="SelectItemAlignedPosition",gz=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=cd(wf,n),s=ud(wf,n),[o,l]=T.useState(null),[u,d]=T.useState(null),h=kn(t,j=>d(j)),m=C_(n),g=T.useRef(!1),b=T.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:w,focusSelectedItem:_}=s,E=T.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&v&&x&&w){const j=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),L=w.getBoundingClientRect();if(i.dir!=="rtl"){const Qe=L.left-N.left,Le=P.left-Qe,je=j.left-Le,z=j.width+je,Ee=Math.max(z,N.width),Ne=window.innerWidth-co,fe=G0(Le,[co,Math.max(co,Ne-Ee)]);o.style.minWidth=z+"px",o.style.left=fe+"px"}else{const Qe=N.right-L.right,Le=window.innerWidth-P.right-Qe,je=window.innerWidth-j.right-Le,z=j.width+je,Ee=Math.max(z,N.width),Ne=window.innerWidth-co,fe=G0(Le,[co,Math.max(co,Ne-Ee)]);o.style.minWidth=z+"px",o.style.right=fe+"px"}const H=m(),M=window.innerHeight-co*2,K=v.scrollHeight,q=window.getComputedStyle(u),ue=parseInt(q.borderTopWidth,10),ae=parseInt(q.paddingTop,10),te=parseInt(q.borderBottomWidth,10),Y=parseInt(q.paddingBottom,10),ie=ue+ae+K+Y+te,V=Math.min(x.offsetHeight*5,ie),J=window.getComputedStyle(v),Q=parseInt(J.paddingTop,10),ne=parseInt(J.paddingBottom,10),he=j.top+j.height/2-co,de=M-he,Ie=x.offsetHeight/2,ke=x.offsetTop+Ie,Te=ue+ae+ke,Se=ie-Te;if(Te<=he){const Qe=H.length>0&&x===H[H.length-1].ref.current;o.style.bottom="0px";const Le=u.clientHeight-v.offsetTop-v.offsetHeight,je=Math.max(de,Ie+(Qe?ne:0)+Le+te),z=Te+je;o.style.height=z+"px"}else{const Qe=H.length>0&&x===H[0].ref.current;o.style.top="0px";const je=Math.max(he,ue+v.offsetTop+(Qe?Q:0)+Ie)+Se;o.style.height=je+"px",v.scrollTop=Te-he+v.offsetTop}o.style.margin=`${co}px 0`,o.style.minHeight=V+"px",o.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,o,u,v,x,w,i.dir,r]);ri(()=>E(),[E]);const[C,k]=T.useState();ri(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const I=T.useCallback(j=>{j&&b.current===!0&&(E(),_==null||_(),b.current=!1)},[E,_]);return p.jsx(zwe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:I,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:p.jsx(an.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});gz.displayName=Bwe;var $we="SelectPopperPosition",Nk=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=co,...i}=e,s=T_(n);return p.jsx(D1,{...s,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Nk.displayName=$we;var[zwe,wR]=lm(wf,{}),Rk="SelectViewport",yz=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=ud(Rk,n),s=wR(Rk,n),o=kn(t,i.onViewportChange),l=T.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(E_.Slot,{scope:n,children:p.jsx(an.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:qt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=s;if(m!=null&&m.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const b=window.innerHeight-co*2,v=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),w=Math.max(v,x);if(w<b){const _=w+g,E=Math.min(b,_),C=_-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});yz.displayName=Rk;var bz="SelectGroup",[Uwe,Vwe]=lm(bz),Hwe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ha();return p.jsx(Uwe,{scope:n,id:a,children:p.jsx(an.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Hwe.displayName=bz;var vz="SelectLabel",qwe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Vwe(vz,n);return p.jsx(an.div,{id:a.id,...r,ref:t})});qwe.displayName=vz;var Qx="SelectItem",[Gwe,wz]=lm(Qx),xz=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,o=cd(Qx,n),l=ud(Qx,n),u=o.value===r,[d,h]=T.useState(i??""),[m,g]=T.useState(!1),b=kn(t,_=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,_,r,a)}),v=Ha(),x=T.useRef("touch"),w=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(Gwe,{scope:n,value:r,disabled:a,textId:v,isSelected:u,onItemTextChange:T.useCallback(_=>{h(E=>E||((_==null?void 0:_.textContent)??"").trim())},[]),children:p.jsx(E_.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:p.jsx(an.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:b,onFocus:qt(s.onFocus,()=>g(!0)),onBlur:qt(s.onBlur,()=>g(!1)),onClick:qt(s.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:qt(s.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:qt(s.onPointerDown,_=>{x.current=_.pointerType}),onPointerMove:qt(s.onPointerMove,_=>{var E;x.current=_.pointerType,a?(E=l.onItemLeave)==null||E.call(l):x.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qt(s.onPointerLeave,_=>{var E;_.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:qt(s.onKeyDown,_=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&_.key===" "||(Rwe.includes(_.key)&&w(),_.key===" "&&_.preventDefault())})})})})});xz.displayName=Qx;var Lg="SelectItemText",_z=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=cd(Lg,n),o=ud(Lg,n),l=wz(Lg,n),u=Mwe(Lg,n),[d,h]=T.useState(null),m=kn(t,w=>h(w),l.onItemTextChange,w=>{var _;return(_=o.itemTextRefCallback)==null?void 0:_.call(o,w,l.value,l.disabled)}),g=d==null?void 0:d.textContent,b=T.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return ri(()=>(v(b),()=>x(b)),[v,x,b]),p.jsxs(p.Fragment,{children:[p.jsx(an.span,{id:l.textId,...i,ref:m}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?il.createPortal(i.children,s.valueNode):null]})});_z.displayName=Lg;var Sz="SelectItemIndicator",Ez=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return wz(Sz,n).isSelected?p.jsx(an.span,{"aria-hidden":!0,...r,ref:t}):null});Ez.displayName=Sz;var Ik="SelectScrollUpButton",Cz=T.forwardRef((e,t)=>{const n=ud(Ik,e.__scopeSelect),r=wR(Ik,e.__scopeSelect),[a,i]=T.useState(!1),s=kn(t,r.onScrollButtonChange);return ri(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(kz,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});Cz.displayName=Ik;var jk="SelectScrollDownButton",Tz=T.forwardRef((e,t)=>{const n=ud(jk,e.__scopeSelect),r=wR(jk,e.__scopeSelect),[a,i]=T.useState(!1),s=kn(t,r.onScrollButtonChange);return ri(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(kz,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});Tz.displayName=jk;var kz=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=ud("SelectScrollButton",n),s=T.useRef(null),o=C_(n),l=T.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),ri(()=>{var d;const u=o().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),p.jsx(an.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:qt(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:qt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:qt(a.onPointerLeave,()=>{l()})})}),Wwe="SelectSeparator",Kwe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(an.div,{"aria-hidden":!0,...r,ref:t})});Kwe.displayName=Wwe;var Dk="SelectArrow",Zwe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=T_(n),i=cd(Dk,n),s=ud(Dk,n);return i.open&&s.position==="popper"?p.jsx(M1,{...a,...r,ref:t}):null});Zwe.displayName=Dk;var Ywe="SelectBubbleInput",Az=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=T.useRef(null),i=kn(r,a),s=x_(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(an.select,{...n,style:{...sL,...n.style},ref:i,defaultValue:t})});Az.displayName=Ywe;function Nz(e){return e===""||e===void 0}function Rz(e){const t=Ua(e),n=T.useRef(""),r=T.useRef(0),a=T.useCallback(s=>{const o=n.current+s;t(o),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),i=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function Iz(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=Xwe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function Xwe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Jwe=sz,Qwe=lz,exe=uz,txe=dz,nxe=fz,rxe=hz,axe=yz,ixe=xz,sxe=_z,oxe=Ez,lxe=Cz,cxe=Tz;function uc({...e}){return p.jsx(Jwe,{"data-slot":"select",...e})}function dc({...e}){return p.jsx(exe,{"data-slot":"select-value",...e})}function fc({className:e,size:t="default",children:n,...r}){return p.jsxs(Qwe,{"data-slot":"select-trigger","data-size":t,className:xt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,p.jsx(txe,{asChild:!0,children:p.jsx(wl,{className:"size-4 opacity-50"})})]})}function hc({className:e,children:t,position:n="popper",...r}){return p.jsx(nxe,{children:p.jsxs(rxe,{"data-slot":"select-content",className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(uxe,{}),p.jsx(axe,{className:xt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),p.jsx(dxe,{})]})})}function xa({className:e,children:t,...n}){return p.jsxs(ixe,{"data-slot":"select-item",className:xt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[p.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(oxe,{children:p.jsx(Ri,{className:"size-4"})})}),p.jsx(sxe,{children:t})]})}function uxe({className:e,...t}){return p.jsx(lxe,{"data-slot":"select-scroll-up-button",className:xt("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Ju,{className:"size-4"})})}function dxe({className:e,...t}){return p.jsx(cxe,{"data-slot":"select-scroll-down-button",className:xt("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(wl,{className:"size-4"})})}var fxe="Label",jz=T.forwardRef((e,t)=>p.jsx(an.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));jz.displayName=fxe;var hxe=jz;function Zt({className:e,...t}){return p.jsx(hxe,{"data-slot":"label",className:xt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const Dz=({initialProviderType:e=null,initialName:t="",initialValue:n="",initialApiKeyId:r=null,onSave:a,onCancel:i,isSaving:s,className:o})=>{const[l,u]=T.useState(t),[d,h]=T.useState(n),[m,g]=T.useState(e),b=T.useRef(null);T.useEffect(()=>{u(t),h(n),g(e)},[t,n,e,r]);const v=T.useCallback(w=>{var k,I;const _=w;g(_);const E=(k=ic.find(j=>j.value===_))==null?void 0:k.label,C=(I=ic.find(j=>j.value===m))==null?void 0:I.label;E&&(!l.trim()||l===`${C}`)&&u(`${E}`),requestAnimationFrame(()=>{var j;(j=b.current)==null||j.focus()})},[l,m]),x=T.useCallback(async()=>{if(!l.trim()||!d.trim()||!m){Ge.error("Key Name, Provider Type, and API Key Value are required.");return}await a(l.trim(),m,d.trim())},[l,d,m,a]);return p.jsxs("div",{className:xt("space-y-4",o),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"api-key-provider",children:"Provider Type"}),p.jsxs(uc,{value:m??"",onValueChange:v,disabled:s,children:[p.jsx(fc,{id:"api-key-provider",children:p.jsx(dc,{placeholder:"Select Provider Type"})}),p.jsx(hc,{children:ic.map(w=>p.jsx(xa,{value:w.value,children:w.label},w.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"api-key-name",children:"Key Name"}),p.jsx(Rn,{id:"api-key-name",value:l,onChange:w=>u(w.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:s})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"api-key-value",children:"API Key Value"}),p.jsx(Rn,{ref:b,id:"api-key-value",type:"password",value:d,onChange:w=>h(w.target.value),placeholder:"Enter your API key",required:!0,disabled:s,autoComplete:"new-password"})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:i,disabled:s,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:x,disabled:s||!l.trim()||!d.trim()||!m,type:"button",children:[s&&p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ef,{className:"h-4 w-4 mr-1"})," ",s?"Saving...":"Save API Key"]})]})]})};var k_="Switch",[pxe,I3e]=vi(k_),[mxe,gxe]=pxe(k_),Mz=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,g]=T.useState(null),b=kn(t,E=>g(E)),v=T.useRef(!1),x=m?d||!!m.closest("form"):!0,[w,_]=Eo({prop:a,defaultProp:i??!1,onChange:u,caller:k_});return p.jsxs(mxe,{scope:n,checked:w,disabled:o,children:[p.jsx(an.button,{type:"button",role:"switch","aria-checked":w,"aria-required":s,"data-state":Lz(w),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:b,onClick:qt(e.onClick,E=>{_(C=>!C),x&&(v.current=E.isPropagationStopped(),v.current||E.stopPropagation())})}),x&&p.jsx(Fz,{control:m,bubbles:!v.current,name:r,value:l,checked:w,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Mz.displayName=k_;var Oz="SwitchThumb",Pz=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=gxe(Oz,n);return p.jsx(an.span,{"data-state":Lz(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});Pz.displayName=Oz;var yxe="SwitchBubbleInput",Fz=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const s=T.useRef(null),o=kn(s,i),l=x_(n),u=I1(t);return T.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&g){const b=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(b)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Fz.displayName=yxe;function Lz(e){return e?"checked":"unchecked"}var bxe=Mz,vxe=Pz;function Hs({className:e,...t}){return p.jsx(bxe,{"data-slot":"switch",className:xt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(vxe,{"data-slot":"switch-thumb",className:xt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const wxe=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var u;const s=d=>{r(d==="none"?null:d)},o=(u=a.find(d=>d.id===n))==null?void 0:u.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return p.jsxs(uc,{value:n??"none",onValueChange:s,disabled:i||a.length===0,children:[p.jsx(fc,{className:xt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:p.jsx(dc,{asChild:!0,children:p.jsxs("div",{className:"flex items-center overflow-hidden",children:[p.jsx(t0,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),p.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&p.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?p.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),p.jsxs(hc,{className:"bg-popover border-border text-popover-foreground",children:[p.jsx(xa,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>p.jsx(xa,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},Bz=({formData:e,onChange:t,apiKeys:n,disabled:r=!1,className:a})=>{const i=v0(e.type??null),s=DF(e.type??null),o=Xd(e.type??null),l=T.useCallback(d=>{var b,v,x;const h=d;t("type",h),t("apiKeyId",null),t("baseURL",null),t("autoFetchModels",Xd(h));const m=(b=ic.find(w=>w.value===h))==null?void 0:b.label,g=(v=ic.find(w=>w.value===e.type))==null?void 0:v.label;m&&(!((x=e.name)!=null&&x.trim())||e.name===g)&&t("name",m)},[t,e.name,e.type]),u=(n||[]).filter(d=>!e.type||d.providerId===e.type);return p.jsxs("div",{className:xt("space-y-3",a),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"provider-type",children:"Provider Type"}),p.jsxs(uc,{value:e.type??"",onValueChange:l,disabled:r,children:[p.jsx(fc,{id:"provider-type",children:p.jsx(dc,{placeholder:"Select Type"})}),p.jsx(hc,{children:ic.map(d=>p.jsx(xa,{value:d.value,children:d.label},d.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"provider-name",children:"Provider Name"}),p.jsx(Rn,{id:"provider-name",value:e.name||"",onChange:d=>t("name",d.target.value),placeholder:"e.g., My Ollama",disabled:r,"aria-label":"Provider Name"})]}),i&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Zt,{children:"API Key"}),p.jsx(wxe,{label:"API Key",selectedKeyId:e.apiKeyId??null,onKeySelected:d=>t("apiKeyId",d),apiKeys:u,disabled:r||!e.type})]}),s&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Zt,{htmlFor:"provider-baseurl",children:"Base URL"}),p.jsx(Rn,{id:"provider-baseurl",value:e.baseURL||"",onChange:d=>t("baseURL",d.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:r,"aria-label":"Base URL"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Hs,{id:"provider-enabled",checked:e.isEnabled??!0,onCheckedChange:d=>t("isEnabled",d),disabled:r,"aria-labelledby":"provider-enabled-label"}),p.jsx(Zt,{id:"provider-enabled-label",htmlFor:"provider-enabled",children:"Enabled"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Hs,{id:"provider-autofetch",checked:e.autoFetchModels??!1,onCheckedChange:d=>t("autoFetchModels",d),disabled:!o||r,"aria-labelledby":"provider-autofetch-label"}),p.jsxs(Zt,{id:"provider-autofetch-label",htmlFor:"provider-autofetch",className:xt("text-sm",o?"":"text-muted-foreground"),children:["Auto-fetch models ",o?"":"(Not Supported)"]})]})]})]})},$z=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:a="",initialApiKeyId:i=null})=>{var m;const[s,o]=T.useState(!1),[l,u]=T.useState({name:a,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,autoFetchModels:Xd(r)});T.useEffect(()=>{u(g=>({...g,name:a||g.name||"",type:r||g.type||null,apiKeyId:i||g.apiKeyId||null,autoFetchModels:r?Xd(r):g.autoFetchModels}))},[a,r,i]);const d=T.useCallback((g,b)=>{u(v=>{var _,E;const x={...v,[g]:b},w=v.name||"";if(g==="type"){const C=b,k=(_=ic.find(j=>j.value===v.type))==null?void 0:_.label;x.apiKeyId=null,x.baseURL=null,x.autoFetchModels=C?Xd(C):!1;const I=(E=ic.find(j=>j.value===C))==null?void 0:E.label;if(I&&(!w.trim()||w===k)&&(x.name=I),C&&v0(C)){const j=(e||[]).filter(N=>N.providerId===C);j.length>0&&(x.apiKeyId=j[0].id)}}return x})},[e]),h=T.useCallback(async()=>{var g,b;if(!((g=l.name)!=null&&g.trim())||!l.type){Ge.error("Provider Name and Type are required.");return}o(!0);try{const v=l.type,x=l.autoFetchModels??Xd(v),w={name:l.name.trim(),type:v,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((b=l.baseURL)==null?void 0:b.trim())||null,enabledModels:null,autoFetchModels:x,fetchedModels:null,modelsLastFetchedAt:null};await t(w),n()}catch(v){console.error("Failed to add provider (from form component):",v)}finally{o(!1)}},[l,t,n]);return p.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),p.jsx(Bz,{formData:l,onChange:d,apiKeys:e,disabled:s}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:n,disabled:s,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:h,disabled:s||!((m=l.name)!=null&&m.trim())||!l.type,type:"button",children:[s&&p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ef,{className:"h-4 w-4 mr-1"})," ",s?"Adding...":"Add Provider"]})]})]})};var A_="Popover",[zz,j3e]=vi(A_,[Qu]),ob=Qu(),[xxe,dd]=zz(A_),Uz=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=ob(t),l=T.useRef(null),[u,d]=T.useState(!1),[h,m]=Eo({prop:r,defaultProp:a??!1,onChange:i,caller:A_});return p.jsx(j1,{...o,children:p.jsx(xxe,{scope:t,contentId:Ha(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:T.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:T.useCallback(()=>d(!0),[]),onCustomAnchorRemove:T.useCallback(()=>d(!1),[]),modal:s,children:n})})};Uz.displayName=A_;var Vz="PopoverAnchor",_xe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=dd(Vz,n),i=ob(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return T.useEffect(()=>(s(),()=>o()),[s,o]),p.jsx(_y,{...i,...r,ref:t})});_xe.displayName=Vz;var Hz="PopoverTrigger",qz=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=dd(Hz,n),i=ob(n),s=kn(t,a.triggerRef),o=p.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Yz(a.open),...r,ref:s,onClick:qt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:p.jsx(_y,{asChild:!0,...i,children:o})});qz.displayName=Hz;var xR="PopoverPortal",[Sxe,Exe]=zz(xR,{forceMount:void 0}),Gz=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=dd(xR,t);return p.jsx(Sxe,{scope:t,forceMount:n,children:p.jsx(Ka,{present:n||i.open,children:p.jsx(Up,{asChild:!0,container:a,children:r})})})};Gz.displayName=xR;var Ip="PopoverContent",Wz=T.forwardRef((e,t)=>{const n=Exe(Ip,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=dd(Ip,e.__scopePopover);return p.jsx(Ka,{present:r||i.open,children:i.modal?p.jsx(Txe,{...a,ref:t}):p.jsx(kxe,{...a,ref:t})})});Wz.displayName=Ip;var Cxe=Iu("PopoverContent.RemoveScroll"),Txe=T.forwardRef((e,t)=>{const n=dd(Ip,e.__scopePopover),r=T.useRef(null),a=kn(t,r),i=T.useRef(!1);return T.useEffect(()=>{const s=r.current;if(s)return __(s)},[]),p.jsx(sb,{as:Cxe,allowPinchZoom:!0,children:p.jsx(Kz,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:qt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),kxe=T.forwardRef((e,t)=>{const n=dd(Ip,e.__scopePopover),r=T.useRef(!1),a=T.useRef(!1);return p.jsx(Kz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Kz=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=e,m=dd(Ip,n),g=ob(n);return w_(),p.jsx(ib,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(Bp,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:p.jsx(D1,{"data-state":Yz(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Zz="PopoverClose",Axe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=dd(Zz,n);return p.jsx(an.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});Axe.displayName=Zz;var Nxe="PopoverArrow",Rxe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=ob(n);return p.jsx(M1,{...a,...r,ref:t})});Rxe.displayName=Nxe;function Yz(e){return e?"open":"closed"}var Ixe=Uz,jxe=qz,Dxe=Gz,Mxe=Wz;function jc({...e}){return p.jsx(Ixe,{"data-slot":"popover",...e})}function Dc({...e}){return p.jsx(jxe,{"data-slot":"popover-trigger",...e})}function Mc({className:e,align:t="center",sideOffset:n=4,...r}){return p.jsx(Dxe,{children:p.jsx(Mxe,{"data-slot":"popover-content",align:t,sideOffset:n,className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const pP=e=>{if(!e)return null;const t=parseFloat(e);return isNaN(t)?null:t/1e6},_R=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:s="h-48",onModelClick:o})=>{const[l,u]=T.useState(""),[d,h]=T.useState(!1),[m,g]=T.useState("all"),[b,v]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[x,w]=T.useState(""),[_,E]=T.useState(""),[C,k]=T.useState(""),[I,j]=T.useState(""),N=T.useMemo(()=>{let H=t;if(m==="enabled"?H=H.filter(J=>n.has(J.id)):m==="disabled"&&(H=H.filter(J=>!n.has(J.id))),l.trim()){const J=l.toLowerCase();H=H.filter(Q=>Q.name.toLowerCase().includes(J)||Q.id.toLowerCase().includes(J))}const M=Object.entries(b).filter(([,J])=>J).map(([J])=>J);M.length>0&&(H=H.filter(J=>{var he;const Q=new Set(J.supported_parameters??[]),ne=new Set(((he=J.architecture)==null?void 0:he.input_modalities)??[]);return M.every(de=>{switch(de){case"reasoning":return Q.has("reasoning");case"webSearch":return Q.has("web_search")||Q.has("web_search_options");case"tools":return Q.has("tools");case"multimodal":return Array.from(ne).some(Ie=>Ie!=="text");default:return!0}})}));const K=parseFloat(x),q=parseFloat(_),ue=parseFloat(C),ae=parseFloat(I),te=!isNaN(K),Y=!isNaN(q),ie=!isNaN(ue),V=!isNaN(ae);return(te||Y||ie||V)&&(H=H.filter(J=>{var Qe,Le;const Q=pP((Qe=J.pricing)==null?void 0:Qe.prompt),ne=pP((Le=J.pricing)==null?void 0:Le.completion),he=te?K/1e6:-1/0,de=Y?q/1e6:1/0,Ie=ie?ue/1e6:-1/0,ke=V?ae/1e6:1/0,Te=Q!==null&&Q>=he&&Q<=de,Se=ne!==null&&ne>=Ie&&ne<=ke;let Pe=!0;return(te||Y)&&Pe&&(Pe=Te),(ie||V)&&Pe&&(Pe=Se),Pe})),H},[t,l,m,n,b,x,_,C,I]),P=H=>{v(M=>({...M,[H]:!M[H]}))},L=(m!=="all"?1:0)+Object.values(b).filter(Boolean).length+(x||_||C||I?1:0);return a?p.jsxs("div",{className:`space-y-2 ${s}`,children:[p.jsx(lr,{className:"h-8 w-full"}),p.jsx(lr,{className:"h-8 w-full"}),p.jsx(lr,{className:"h-8 w-full"})]}):t.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(wo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{value:l,onChange:H=>u(H.target.value),placeholder:"Filter models by name...",className:"pl-8 h-9 w-full text-xs",type:"text",disabled:i})]}),p.jsxs(jc,{open:d,onOpenChange:h,children:[p.jsx(Dc,{asChild:!0,children:p.jsxs(It,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:i,children:[p.jsx(AZ,{className:"h-4 w-4 mr-1"}),"Filters",L>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:L})]})}),p.jsxs(Mc,{className:"w-72 p-4 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Zt,{className:"text-xs font-semibold",children:"Status"}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(It,{variant:m==="all"?"secondary":"outline",size:"sm",onClick:()=>g("all"),children:"All"}),p.jsxs(It,{variant:m==="enabled"?"secondary":"outline",size:"sm",onClick:()=>g("enabled"),children:[p.jsx(Ri,{className:"h-3 w-3 mr-1"})," Enabled"]}),p.jsxs(It,{variant:m==="disabled"?"secondary":"outline",size:"sm",onClick:()=>g("disabled"),children:[p.jsx(DK,{className:"h-3 w-3 mr-1"})," Disabled"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Zt,{className:"text-xs font-semibold",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.jsx(Dn,{tooltipText:"Reasoning","aria-label":"Reasoning",icon:p.jsx(Mp,{}),onClick:()=>P("reasoning"),variant:b.reasoning?"secondary":"outline",className:xt(b.reasoning&&"text-primary")}),p.jsx(Dn,{tooltipText:"Web Search","aria-label":"Web Search",icon:p.jsx(wo,{}),onClick:()=>P("webSearch"),variant:b.webSearch?"secondary":"outline",className:xt(b.webSearch&&"text-primary")}),p.jsx(Dn,{tooltipText:"Tools","aria-label":"Tools",icon:p.jsx(fA,{}),onClick:()=>P("tools"),variant:b.tools?"secondary":"outline",className:xt(b.tools&&"text-primary")}),p.jsx(Dn,{tooltipText:"Multimodal","aria-label":"Multimodal",icon:p.jsx(lA,{}),onClick:()=>P("multimodal"),variant:b.multimodal?"secondary":"outline",className:xt(b.multimodal&&"text-primary")})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Zt,{className:"text-xs font-semibold flex items-center gap-1",children:[p.jsx(aZ,{className:"h-3 w-3"})," Price Range ($ / 1M Tokens)"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(Rn,{type:"number",min:"0",step:"0.01",placeholder:"Min Input",value:x,onChange:H=>w(H.target.value),className:"h-8 text-xs","aria-label":"Minimum input price per million tokens"}),p.jsx(Rn,{type:"number",min:"0",step:"0.01",placeholder:"Max Input",value:_,onChange:H=>E(H.target.value),className:"h-8 text-xs","aria-label":"Maximum input price per million tokens"}),p.jsx(Rn,{type:"number",min:"0",step:"0.01",placeholder:"Min Output",value:C,onChange:H=>k(H.target.value),className:"h-8 text-xs","aria-label":"Minimum output price per million tokens"}),p.jsx(Rn,{type:"number",min:"0",step:"0.01",placeholder:"Max Output",value:I,onChange:H=>j(H.target.value),className:"h-8 text-xs","aria-label":"Maximum output price per million tokens"})]})]})]})]})]}),p.jsx(Ku,{className:`${s} w-full rounded-md border border-border p-3 bg-background/50`,children:p.jsxs("div",{className:"space-y-2",children:[N.map(H=>p.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[p.jsx(Hs,{id:`enable-model-${e}-${H.id}`,checked:n.has(H.id),onCheckedChange:M=>r(H.id,M),disabled:i,"aria-label":`Enable model ${H.name||H.id}`,className:"flex-shrink-0",onClick:M=>M.stopPropagation()}),p.jsx(Zt,{htmlFor:`enable-model-${e}-${H.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate pl-2",title:H.name||H.id,onClick:o?()=>o(H.id):void 0,children:H.name||H.id})]},H.id)),N.length===0&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No models match the current filters."})]})})]})},Gd=gt.forwardRef(({className:e,href:t,children:n,...r},a)=>p.jsx("a",{ref:a,href:t,target:"_blank",rel:"noopener noreferrer",className:xt("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));Gd.displayName="Lnk";const Oxe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})},Pxe=tA("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Yg({className:e,variant:t,asChild:n=!1,...r}){const a=n?p8:"span";return p.jsx(a,{"data-slot":"badge",className:xt(Pxe({variant:t}),e),...r})}const Fxe=()=>{const[e,t]=T.useState(!1);T.useEffect(()=>{t(!0)},[]);const n={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},a=[{word:"LiteChat",color:"bg-gradient-to-tr from-lime-500 via-amber-400 to-red-600 bg-clip-text text-transparent"},{word:"library",color:"text-emerald-500"},{word:"browser",color:"text-violet-500"},{word:"local",color:"text-amber-500"},{word:"remote",color:"text-sky-500"},{word:"providers",color:"text-purple-500"},{word:" AI ",color:"bg-gradient-to-b from-amber-300 to-rose-700 bg-clip-text text-transparent"},{word:"Open Source",color:"bg-gradient-to-r from-lime-500 to-yellow-500 bg-clip-text text-transparent"}],i=o=>{let l=[o];return a.forEach(({word:u,color:d})=>{l=l.reduce((h,m)=>typeof m!="string"?(h.push(m),h):(m.split(new RegExp(`(${u})`,"gi")).forEach((b,v)=>{b.toLowerCase()===u.toLowerCase()?h.push(p.jsx("span",{className:`${d} font-medium`,children:b},`${b}-${v}`)):h.push(b)}),h),[])}),l=l.reduce((u,d,h)=>{if(typeof d!="string")return u.push(d),u;const m=/(\([^)]*\))/g;return d.split(m).forEach((b,v)=>{m.test(b)?u.push(p.jsx("span",{className:"text-sm text-muted",children:b},`paren-${h}-${v}`)):u.push(b)}),u},[]),l},s=["Oh, hey?! Hi there!! How are you doing!?","Nice of you to pop by to checkout LiteChat!","What'd you mean you don't know what LiteChat is? Oh Boy hey, you in for a treat!","To start with, it's an(other) AI chat app (yes...shocker, right ?) and it's Open Source ! ","But, it is also an extensible library, so you can go on and create your own, AI chat app! With your own functionnalities !","(are AI chat apps the new JS frameworks?)","And cause I might be a wee bit on the reluctant side when it comes to parting with my coins, it doesn't require no servers! It all stays in your browser.","(that means I couldn't snoop on what you do here, even if I wanted to!)","While able to run LLM both local (did I tell you I ain't liking throwing coins out?) and from remote providers","(but sometimes you have to :(..)","To cap things off, there is no fancy/crazy tech involved, I just glued bricks together with AI","(kids call it vibing apparently ^^)","Enough of this interminable babble! Go setup your future chat to prompt your brains out!"];return p.jsxs(fo.div,{className:"text-center max-w-4xl mx-auto space-y-3 my-6",initial:"hidden",animate:e?"show":"hidden",variants:n,children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsxs(Yg,{variant:"outline",className:"px-3 py-1 bg-black/5 dark:bg-white/10 backdrop-blur-sm border-none",children:[p.jsx(F8,{className:"w-4 h-4 mr-2 text-yellow-500"}),p.jsx("span",{className:"text-sm",children:"Welcome to your future AI chat"})]})}),s.map((o,l)=>p.jsx(fo.p,{className:`text-sm md:text-base ${l===0?"font-medium":""} leading-relaxed`,variants:r,children:i(o)},l)),p.jsxs(fo.div,{variants:r,className:"pt-2",children:[p.jsx(Yg,{className:"bg-gradient-to-r from-violet-600 to-primary border-none",children:"No server required!"}),p.jsx(Yg,{className:"ml-2 bg-gradient-to-r from-amber-500 to-emerald-500 border-none",children:"100% in-browser"})]})]})};var SR="Progress",ER=100,[Lxe,D3e]=vi(SR),[Bxe,$xe]=Lxe(SR),Xz=T.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=zxe,...s}=e;(a||a===0)&&!mP(a)&&console.error(Uxe(`${a}`,"Progress"));const o=mP(a)?a:ER;r!==null&&!gP(r,o)&&console.error(Vxe(`${r}`,"Progress"));const l=gP(r,o)?r:null,u=e1(l)?i(l,o):void 0;return p.jsx(Bxe,{scope:n,value:l,max:o,children:p.jsx(an.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":e1(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":eU(l,o),"data-value":l??void 0,"data-max":o,...s,ref:t})})});Xz.displayName=SR;var Jz="ProgressIndicator",Qz=T.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=$xe(Jz,n);return p.jsx(an.div,{"data-state":eU(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});Qz.displayName=Jz;function zxe(e,t){return`${Math.round(e/t*100)}%`}function eU(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function e1(e){return typeof e=="number"}function mP(e){return e1(e)&&!isNaN(e)&&e>0}function gP(e,t){return e1(e)&&!isNaN(e)&&e<=t&&e>=0}function Uxe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ER}\`.`}function Vxe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ER} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var tU=Xz,Hxe=Qz;const Mk=T.forwardRef(({className:e,value:t,...n},r)=>p.jsx(tU,{ref:r,className:xt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:p.jsx(Hxe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Mk.displayName=tU.displayName;const qxe=({stepNumber:e,title:t,description:n,isComplete:r,isActive:a,openOnComplete:i=!1,contentClassName:s="",icon:o,children:l})=>{const[u,d]=T.useState(!1);return T.useEffect(()=>{d(a||r&&i)},[a,r,i]),p.jsxs(y$,{className:`border border-border/40 bg-card/50 backdrop-blur-sm shadow-lg ${r?"border-l-4 border-l-green-500/70":a?"border-l-4 border-l-primary/70":""}`,children:[p.jsx(b$,{className:"pb-2",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${r?"bg-green-500/20 text-green-500":a?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:r?p.jsx(rA,{className:"h-5 w-5"}):p.jsx("div",{className:"flex items-center justify-center",children:o})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>d(!u),children:[p.jsxs(v$,{className:"text-base",children:[p.jsxs("span",{className:"opacity-60 mr-2",children:[e,"."]}),t]}),p.jsx("button",{className:`p-1 rounded-full transition-all ${u?"rotate-90":""} hover:bg-muted/60`,children:p.jsx(N8,{className:"h-4 w-4"})})]}),!u&&p.jsx(Wme,{className:"text-xs mt-1",children:typeof n=="string"?n.substring(0,60)+(n.length>60?"...":""):"Click to expand"})]})]})}),p.jsx(Qme,{children:u&&p.jsx(fo.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:p.jsxs(w$,{className:"pt-2",children:[typeof n=="string"?p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}):p.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:n}),p.jsx("div",{className:s,children:l})]})})})]})},Gxe=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:a,getAllAvailableModelDefsForProvider:i,isLoading:s,enableApiKeyManagement:o}=Un(dn(de=>({apiKeys:de.dbApiKeys,addApiKey:de.addApiKey,providers:de.dbProviderConfigs,addProviderConfig:de.addProviderConfig,updateProviderConfig:de.updateProviderConfig,getAllAvailableModelDefsForProvider:de.getAllAvailableModelDefsForProvider,isLoading:de.isLoading,enableApiKeyManagement:de.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:u}=Ji(dn(de=>({toggleChatControlPanel:de.toggleChatControlPanel,setInitialSettingsTabs:de.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=mn(dn(de=>({addConversation:de.addConversation,selectItem:de.selectItem}))),[m,g]=T.useState(!1),[b,v]=T.useState(!1),[x,w]=T.useState(!1),[_,E]=T.useState(!1),[C,k]=T.useState(!1),I=T.useMemo(()=>!o||e.length>0,[o,e]),j=T.useMemo(()=>n.length>0,[n]),N=T.useMemo(()=>n.some(de=>de.isEnabled&&de.enabledModels&&de.enabledModels.length>0),[n]),P=T.useMemo(()=>{const de=[...n].sort((Ie,ke)=>ke.createdAt.getTime()-Ie.createdAt.getTime());return de.length>0?de[0]:null},[n]),L=T.useMemo(()=>P?i(P.id):[],[P,i]),H=T.useMemo(()=>new Set((P==null?void 0:P.enabledModels)??[]),[P]),{initialProviderTypeForForm:M,initialProviderNameForForm:K,initialApiKeyIdForForm:q}=T.useMemo(()=>{var de;if(j)return{type:void 0,name:void 0,keyId:void 0};if(e.length>0){const ke=[...e].sort((Te,Se)=>Se.createdAt.getTime()-Te.createdAt.getTime()).find(Te=>v0(Te.providerId));if(ke){const Te=ke.providerId,Se=((de=ic.find(Pe=>Pe.value===Te))==null?void 0:de.label)||Te;return{initialProviderTypeForForm:Te,initialProviderNameForForm:Se,initialApiKeyIdForForm:ke.id}}}return{initialProviderTypeForForm:void 0,initialProviderNameForForm:void 0,initialApiKeyIdForForm:void 0}},[e,j]),ue=T.useCallback(async(de,Ie,ke)=>{g(!0);try{await t(de,Ie,ke),Ge.success("API key added successfully!")}finally{g(!1)}},[t]),ae=T.useCallback(async de=>{v(!0);try{const Ie={...de,apiKeyId:de.apiKeyId??(v0(de.type)?q:null)},ke=await r(Ie);return Ge.success("Provider added successfully!"),ke}finally{v(!1)}},[r,q]),te=T.useCallback(async(de,Ie)=>{if(!P)return;E(!0);const ke=new Set(P.enabledModels??[]);Ie?ke.add(de):ke.delete(de);const Te=Array.from(ke);try{await a(P.id,{enabledModels:Te}),Ge.success(Ie?"Model enabled successfully!":"Model disabled successfully!")}catch(Se){Ge.error("Failed to update model status."),console.error("Failed to save model toggle:",Se)}finally{E(!1)}},[P,a]),Y=T.useCallback(async()=>{w(!0),k(!0);try{await new Promise(Ie=>setTimeout(Ie,800));const de=await d({title:"New Chat"});await h(de,"conversation"),Ge.success("Welcome to your first chat!")}catch(de){Ge.error("Failed to start your first chat."),console.error("Failed to start first chat:",de),w(!1),k(!1)}},[d,h]),ie=(de,Ie)=>{u(de,Ie),l("settingsModal",!0)},V=[I,j,N].filter(Boolean).length,J=o?3:2,Q=V/J*100,ne=[...o?[{id:"api-key",title:"Add API Key",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["To use providers like"," ",p.jsx(Gd,{href:"https://platform.openai.com/api-keys",className:"text-blue-500 hover:text-blue-700 transition-colors",children:"OpenAI"}),","," ",p.jsx(Gd,{href:"https://aistudio.google.com/app/apikey",className:"text-green-600 hover:text-green-700 transition-colors",children:"Google"}),","," ",p.jsx(Gd,{href:"https://console.anthropic.com/settings/keys",className:"text-purple-500 hover:text-purple-700 transition-colors",children:"Anthropic (Claude)"}),", or"," ",p.jsx(Gd,{href:"https://openrouter.ai/keys",className:"text-orange-500 hover:text-orange-700 transition-colors",children:"OpenRouter"})," ","or any OpenAI API compatible provider, add an API key. Keys are stored securely in your browser."]}),p.jsxs("p",{children:['If you want truly local AI, "no internet required", you can setup'," ",p.jsx(Gd,{href:"https://www.ollama.com/",className:"text-teal-500 hover:text-teal-700 transition-colors",children:"Ollama"})," ","or,"," ",p.jsx(Gd,{href:"https://lmstudio.ai/",className:"text-indigo-500 hover:text-indigo-700 transition-colors",children:"LMStudio"})," ","(or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys so see you in step 2."]})]}),isComplete:I,content:p.jsx(Dz,{onSave:ue,onCancel:()=>{},isSaving:m,className:"border-none shadow-none p-0",initialProviderType:M}),icon:p.jsx(t0,{className:"h-4 w-4"})}]:[],{id:"add-provider",title:"Add AI Provider",description:p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{children:"Connect to an AI provider you configured the key for..."}),p.jsx("p",{children:"This might look redundant, but it allows you to have multiple keys for the same provider (personal, professional, etc.)"})]}),isComplete:j,content:p.jsx($z,{apiKeys:e,onAddProvider:ae,onCancel:()=>{},initialType:M,initialName:K,initialApiKeyId:q}),icon:p.jsx(qw,{className:"h-4 w-4"})},{id:"enable-models",title:"Enable Models",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["Enable models for the provider you just added (",p.jsx("span",{className:"font-medium text-primary",children:(P==null?void 0:P.name)||"..."}),")."]}),p.jsx("p",{children:"Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."}),p.jsx("p",{children:"And just like before, you can choose to activate a model for a certain combination of key/provider!"})]}),isComplete:N,content:P?p.jsx("div",{className:"bg-card/40 rounded-lg p-3 border border-border/30 shadow-inner",children:p.jsx(_R,{providerId:P.id,allAvailableModels:L,enabledModelIds:H,onToggleModel:te,isLoading:s||_,listHeightClass:"h-48"})}):p.jsxs("p",{className:"text-sm text-muted-foreground italic flex items-center",children:[p.jsx(cf,{className:"h-4 w-4 mr-2 text-amber-500"}),"Add a provider in Step ",o?"2":"1"," first."]}),icon:p.jsx(Mp,{className:"h-4 w-4"})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:p.jsxs("div",{children:[C&&p.jsx(fo.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:p.jsx(Mk,{value:x?void 0:100,className:"h-2"})}),p.jsxs(It,{onClick:Y,disabled:x||!N,className:"w-full bg-gradient-to-r from-indigo-500 to-primary hover:opacity-90 transition-all",children:[p.jsx(qZ,{className:"mr-2 h-4 w-4"}),x?"Launching...":"Start First Chat"]})]}),contentClassName:"p-4",icon:p.jsx(oY,{className:"h-4 w-4"})}],he=ne.findIndex(de=>!de.isComplete);return s?p.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-4xl mx-auto w-full",children:p.jsxs(fo.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full",children:[p.jsx(lr,{className:"h-12 w-1/2 mx-auto mb-6"}),p.jsx(lr,{className:"h-8 w-3/4 mx-auto mb-2"}),p.jsx(lr,{className:"h-4 w-1/2 mx-auto mb-8"}),p.jsx(lr,{className:"h-20 w-full mb-6"}),p.jsx(lr,{className:"h-20 w-full mb-6"}),p.jsx(lr,{className:"h-20 w-full"})]})}):p.jsx(fo.div,{className:"flex h-full flex-col items-center justify-center p-4 bg-gradient-to-b from-background to-background/80",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:p.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(fo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:p.jsxs("div",{className:"relative mx-auto w-16 h-16 mb-4",children:[p.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl"}),p.jsx("div",{className:"relative bg-gradient-to-br from-primary to-indigo-600 p-3 rounded-full",children:p.jsx(Oxe,{className:"h-10 w-10 text-white"})})]})}),p.jsx("h2",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-primary to-indigo-500 bg-clip-text text-transparent",children:"Welcome to LiteChat"}),p.jsx("div",{className:"relative",children:p.jsx(Fxe,{})}),p.jsx(Gn,{children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs("div",{className:"mt-6 bg-card/40 backdrop-blur-sm border border-border/30 rounded-xl p-3 w-3/4 mx-auto",children:[p.jsx(Mk,{value:Q,className:"h-1.5"}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Setup Progress: ",Math.round(Q),"%"]})]})}),p.jsx(Yn,{children:p.jsxs("p",{children:["Steps completed: ",V," of ",J]})})]})})]}),p.jsx(fo.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:ne.map((de,Ie)=>{const ke=Ie===he;return p.jsx(fo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Ie*.1},children:p.jsx(qxe,{stepNumber:Ie+1,title:de.title,description:de.description,isComplete:de.id!=="start-chat"&&de.isComplete,isActive:ke,openOnComplete:de.id==="enable-models",contentClassName:de.id==="add-provider"||de.id==="api-key"?"p-0 border-none shadow-none bg-transparent":de.contentClassName,icon:de.icon,children:de.content})},de.id)})}),!s&&!j&&he===-1&&p.jsxs(fo.div,{className:"text-center mt-6 p-4 bg-red-500/10 rounded-lg border border-red-500/30",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[p.jsx(cf,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),p.jsx("p",{className:"text-sm mb-3",children:"Configuration issue detected. Please review provider settings."}),p.jsx(It,{variant:"outline",size:"sm",onClick:()=>ie("providers"),className:"border-red-500/50 hover:bg-red-500/20 transition-colors",children:"Open Provider Settings"})]})]})})},Wxe=["conversation.title_generation"],Kxe=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:s})=>{const o=T.useRef(null),l=T.useRef(null),[u,d]=T.useState(!1),h=Mn(j=>j.streamingInteractionIds),m=pr(j=>j.chatMaxWidth),{isLoading:g}=Un(dn(j=>({providers:j.dbProviderConfigs,apiKeys:j.dbApiKeys,isLoading:j.isLoading,enableApiKeyManagement:j.enableApiKeyManagement}))),{conversationCount:b,isConversationLoading:v}=mn(dn(j=>({conversationCount:j.conversations.length,isConversationLoading:j.isLoading}))),{projectCount:x,isProjectLoading:w}=fi(dn(j=>({projectCount:j.projects.length,isProjectLoading:j.isLoading}))),_=T.useMemo(()=>g||v||w?!1:b===0&&x===0,[b,x,g,v,w]),E=T.useMemo(()=>{const j=[],N=new Set;return[...t].sort((L,H)=>L.index-H.index).forEach(L=>{if(!N.has(L.id)&&!Wxe.includes(L.type)){const H=[L];N.add(L.id),j.push(H)}}),j},[t]),C=(j="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:j})};T.useEffect(()=>{if(l.current){const{scrollHeight:j,clientHeight:N,scrollTop:P}=l.current,L=j-N<=P+150,H=n==="streaming"&&h.length>0;(L||H)&&requestAnimationFrame(()=>{C(H?"smooth":"auto")})}},[E.length,n,h]),T.useEffect(()=>{const j=l.current;if(!j)return;const N=()=>{const{scrollHeight:P,clientHeight:L,scrollTop:H}=j,M=H<P-L-L*.5;d(M)};return j.addEventListener("scroll",N,{passive:!0}),N(),()=>{j.removeEventListener("scroll",N)}},[]),T.useEffect(()=>{o.current&&(l.current=o.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const k=()=>g||v||w?p.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[p.jsx(lr,{className:"h-24 w-full"}),p.jsx(lr,{className:"h-32 w-full"}),p.jsx(lr,{className:"h-20 w-full"})]}):_?p.jsx(Gxe,{}):e?E.length===0&&n!=="streaming"?p.jsx(zM,{}):p.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[E.map(j=>{const N=j[0];return h.includes(N.id)?p.jsx(lk,{interactionId:N.id,onStop:s},`${N.id}-streaming`):p.jsx(r$,{interaction:N,onEdit:i,onRegenerate:a,onDelete:void 0},N.id)}),n==="streaming"&&h.filter(j=>!t.some(N=>N.id===j)).map(j=>p.jsx(lk,{interactionId:j,onStop:s},`${j}-streaming-new`))]}):p.jsx(zM,{}),I=m||"max-w-7xl";return p.jsxs("div",{className:xt("flex-grow relative",r),children:[p.jsx(Ku,{className:"h-full w-full",ref:o,children:p.jsx("div",{className:xt("chat-canvas-container mx-auto",I),children:k()})}),u&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>C(),"aria-label":"Scroll to bottom",children:p.jsx(NK,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"left",children:"Scroll to Bottom"})]})})]})},$h=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:p.jsx("div",{className:xt(r),children:a.map(i=>{const s=n==="icon"?i.iconRenderer:i.renderer;return p.jsx(gt.Fragment,{children:s?s():null},i.id)})})},Zxe=Symbol("Let zodToJsonSchema decide on which parser to use"),yP={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Yxe=e=>typeof e=="string"?{...yP,name:e}:{...yP,...e},Xxe=e=>{const t=Yxe(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function nU(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function _r(e,t,n,r,a){e[t]=n,nU(e,t,r,a)}function Jxe(){return{}}function Qxe(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Ht.ZodAny&&(n.items=hr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&_r(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&_r(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(_r(n,"minItems",e.exactLength.value,e.exactLength.message,t),_r(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function e1e(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?_r(n,"minimum",r.value,r.message,t):_r(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),_r(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?_r(n,"maximum",r.value,r.message,t):_r(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),_r(n,"maximum",r.value,r.message,t));break;case"multipleOf":_r(n,"multipleOf",r.value,r.message,t);break}return n}function t1e(){return{type:"boolean"}}function rU(e,t){return hr(e.type._def,t)}const n1e=(e,t)=>hr(e.innerType._def,t);function aU(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>aU(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return r1e(e,t)}}const r1e=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":_r(n,"minimum",r.value,r.message,t);break;case"max":_r(n,"maximum",r.value,r.message,t);break}return n};function a1e(e,t){return{...hr(e.innerType._def,t),default:e.defaultValue()}}function i1e(e,t){return t.effectStrategy==="input"?hr(e.schema._def,t):{}}function s1e(e){return{type:"string",enum:Array.from(e.values)}}const o1e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function l1e(e,t){const n=[hr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),hr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(o1e(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;s=l}else r=void 0;a.push(s)}}),a.length?{allOf:a,...r}:void 0}function c1e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let WC;const so={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(WC===void 0&&(WC=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),WC),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function iU(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":_r(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":_r(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":oo(n,"email",r.message,t);break;case"format:idn-email":oo(n,"idn-email",r.message,t);break;case"pattern:zod":ki(n,so.email,r.message,t);break}break;case"url":oo(n,"uri",r.message,t);break;case"uuid":oo(n,"uuid",r.message,t);break;case"regex":ki(n,r.regex,r.message,t);break;case"cuid":ki(n,so.cuid,r.message,t);break;case"cuid2":ki(n,so.cuid2,r.message,t);break;case"startsWith":ki(n,RegExp(`^${KC(r.value,t)}`),r.message,t);break;case"endsWith":ki(n,RegExp(`${KC(r.value,t)}$`),r.message,t);break;case"datetime":oo(n,"date-time",r.message,t);break;case"date":oo(n,"date",r.message,t);break;case"time":oo(n,"time",r.message,t);break;case"duration":oo(n,"duration",r.message,t);break;case"length":_r(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),_r(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{ki(n,RegExp(KC(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&oo(n,"ipv4",r.message,t),r.version!=="v4"&&oo(n,"ipv6",r.message,t);break}case"base64url":ki(n,so.base64url,r.message,t);break;case"jwt":ki(n,so.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&ki(n,so.ipv4Cidr,r.message,t),r.version!=="v4"&&ki(n,so.ipv6Cidr,r.message,t);break}case"emoji":ki(n,so.emoji(),r.message,t);break;case"ulid":{ki(n,so.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{oo(n,"binary",r.message,t);break}case"contentEncoding:base64":{_r(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{ki(n,so.base64,r.message,t);break}}break}case"nanoid":ki(n,so.nanoid,r.message,t)}return n}function KC(e,t){return t.patternStrategy==="escape"?d1e(e):e}const u1e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function d1e(e){let t="";for(let n=0;n<e.length;n++)u1e.has(e[n])||(t+="\\"),t+=e[n];return t}function oo(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):_r(e,"format",t,n,r)}function ki(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:bP(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):_r(e,"pattern",bP(t,r),n,r)}function bP(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,s=!1,o=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(s){if(r[u].match(/[a-z]/)){o?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),o=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],o=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=s?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:s&&r[u]==="]"?s=!1:!s&&r[u]==="["&&(s=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function sU(e,t){var r,a,i,s,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Ht.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,d)=>({...u,[d]:hr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:hr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Ht.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=iU(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===Ht.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===Ht.ZodBranded&&e.keyType._def.type._def.typeName===Ht.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=rU(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function f1e(e,t){if(t.mapStrategy==="record")return sU(e,t);const n=hr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=hr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function h1e(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function p1e(){return{not:{}}}function m1e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const t1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function g1e(e,t){if(t.target==="openApi3")return vP(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in t1&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const s=t1[i._def.typeName];return s&&!a.includes(s)?[...a,s]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...a,s];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,s,o)=>o.indexOf(i)===s);return{type:a.length>1?a:a[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return vP(e,t)}const vP=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>hr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function y1e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:t1[e.innerType._def.typeName],nullable:!0}:{type:[t1[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=hr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=hr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function b1e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",nU(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?_r(n,"minimum",r.value,r.message,t):_r(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),_r(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?_r(n,"maximum",r.value,r.message,t):_r(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),_r(n,"maximum",r.value,r.message,t));break;case"multipleOf":_r(n,"multipleOf",r.value,r.message,t);break}return n}function v1e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let u=x1e(l);u&&n&&(l instanceof yo&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=hr(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,u||a.push(o))}a.length&&(r.required=a);const s=w1e(e,t);return s!==void 0&&(r.additionalProperties=s),r}function w1e(e,t){if(e.catchall._def.typeName!=="ZodNever")return hr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function x1e(e){try{return e.isOptional()}catch{return!0}}const _1e=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return hr(e.innerType._def,t);const n=hr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},S1e=(e,t)=>{if(t.pipeStrategy==="input")return hr(e.in._def,t);if(t.pipeStrategy==="output")return hr(e.out._def,t);const n=hr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=hr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function E1e(e,t){return hr(e.type._def,t)}function C1e(e,t){const r={type:"array",uniqueItems:!0,items:hr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&_r(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&_r(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function T1e(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>hr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:hr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>hr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function k1e(){return{not:{}}}function A1e(){return{}}const N1e=(e,t)=>hr(e.innerType._def,t),R1e=(e,t,n)=>{switch(t){case Ht.ZodString:return iU(e,n);case Ht.ZodNumber:return b1e(e,n);case Ht.ZodObject:return v1e(e,n);case Ht.ZodBigInt:return e1e(e,n);case Ht.ZodBoolean:return t1e();case Ht.ZodDate:return aU(e,n);case Ht.ZodUndefined:return k1e();case Ht.ZodNull:return m1e(n);case Ht.ZodArray:return Qxe(e,n);case Ht.ZodUnion:case Ht.ZodDiscriminatedUnion:return g1e(e,n);case Ht.ZodIntersection:return l1e(e,n);case Ht.ZodTuple:return T1e(e,n);case Ht.ZodRecord:return sU(e,n);case Ht.ZodLiteral:return c1e(e,n);case Ht.ZodEnum:return s1e(e);case Ht.ZodNativeEnum:return h1e(e);case Ht.ZodNullable:return y1e(e,n);case Ht.ZodOptional:return _1e(e,n);case Ht.ZodMap:return f1e(e,n);case Ht.ZodSet:return C1e(e,n);case Ht.ZodLazy:return()=>e.getter()._def;case Ht.ZodPromise:return E1e(e,n);case Ht.ZodNaN:case Ht.ZodNever:return p1e();case Ht.ZodEffects:return i1e(e,n);case Ht.ZodAny:return Jxe();case Ht.ZodUnknown:return A1e();case Ht.ZodDefault:return a1e(e,n);case Ht.ZodBranded:return rU(e,n);case Ht.ZodReadonly:return N1e(e,n);case Ht.ZodCatch:return n1e(e,n);case Ht.ZodPipeline:return S1e(e,n);case Ht.ZodFunction:case Ht.ZodVoid:case Ht.ZodSymbol:return;default:return(r=>{})()}};function hr(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==Zxe)return l}if(r&&!n){const l=I1e(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=R1e(e,e.typeName,t),s=typeof i=="function"?hr(i(),t):i;if(s&&D1e(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return a.jsonSchema=s,l}return a.jsonSchema=s,s}const I1e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:j1e(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},j1e=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},D1e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),M1e=(e,t)=>{const n=Xxe(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,d])=>({...l,[u]:hr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=hr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const o=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var ty={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},ny={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ry={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ay={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},iy={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},O1e=[ty,ny,ry,ay,iy];ty.code+"",ny.code+"",ry.code+"",ay.code+"",iy.code+"";ty.name+"",ty.code,ny.name+"",ny.code,ry.name+"",ry.code,ay.name+"",ay.code,iy.name+"",iy.code;O1e.map(e=>e.code);function P1e(e){const t=["ROOT"];let n=-1,r=null;function a(l,u,d){switch(l){case'"':{n=u,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function s(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":a(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?o+="true".slice(d.length):"false".startsWith(d)?o+="false".slice(d.length):"null".startsWith(d)&&(o+="null".slice(d.length))}}return o}function F1e(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=ff({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=ff({text:P1e(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var L1e={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},B1e={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},$1e={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},z1e={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},U1e={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},V1e={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},H1e={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},q1e={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},G1e={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},W1e={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},K1e={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},Z1e={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},Y1e={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},X1e={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},J1e={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},Q1e={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},N_=[L1e,B1e,$1e,z1e,U1e,V1e,H1e,q1e,G1e,W1e,K1e,Z1e,Y1e,X1e,J1e,Q1e];Object.fromEntries(N_.map(e=>[e.code,e]));Object.fromEntries(N_.map(e=>[e.name,e.code]));N_.map(e=>e.code);function ci(e,t){const n=N_.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function e_e(e,t){var n;const r=(n=void 0)!=null?n:!1;return t_e(M1e(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var Ok=Symbol.for("vercel.ai.schema");function t_e(e,{validate:t}={}){return{[Ok]:!0,_type:void 0,[ex]:!0,jsonSchema:e,validate:t}}function n_e(e){return typeof e=="object"&&e!==null&&Ok in e&&e[Ok]===!0&&"jsonSchema"in e&&"validate"in e}function R_(e){return n_e(e)?e:e_e(e)}const wP=globalThis||void 0||self;var r_e=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof wP=="object"?wP:{},tf="1.9.0",xP=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a_e(e){var t=new Set([e]),n=new Set,r=e.match(xP);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(o){return n.add(o),!1}function s(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(xP);if(!u)return i(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?s(l):i(l):a.minor<=d.minor?s(l):i(l)}}var i_e=a_e(tf),s_e=tf.split(".")[0],sy=Symbol.for("opentelemetry.js.api."+s_e),oy=r_e;function CR(e,t,n,r){var a;r===void 0&&(r=!1);var i=oy[sy]=(a=oy[sy])!==null&&a!==void 0?a:{version:tf};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==tf){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+tf);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+tf+"."),!0}function ly(e){var t,n,r=(t=oy[sy])===null||t===void 0?void 0:t.version;if(!(!r||!i_e(r)))return(n=oy[sy])===null||n===void 0?void 0:n[e]}function TR(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+tf+".");var n=oy[sy];n&&delete n[e]}var o_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},l_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},c_e=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rg("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rg("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rg("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rg("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rg("verbose",this._namespace,t)},e}();function Rg(e,t,n){var r=ly("diag");if(r)return n.unshift(t),r[e].apply(r,l_e([],o_e(n),!1))}var ms;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ms||(ms={}));function u_e(e,t){e<ms.NONE?e=ms.NONE:e>ms.ALL&&(e=ms.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",ms.ERROR),warn:n("warn",ms.WARN),info:n("info",ms.INFO),debug:n("debug",ms.DEBUG),verbose:n("verbose",ms.VERBOSE)}}var d_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},f_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},h_e="diag",n1=function(){function e(){function t(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=ly("diag");if(o)return o[a].apply(o,f_e([],d_e(i),!1))}}var n=this,r=function(a,i){var s,o,l;if(i===void 0&&(i={logLevel:ms.INFO}),a===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var d=ly("diag"),h=u_e((o=i.logLevel)!==null&&o!==void 0?o:ms.INFO,a);if(d&&!i.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return CR("diag",h,n,!0)};n.setLogger=r,n.disable=function(){TR(h_e,n)},n.createComponentLogger=function(a){return new c_e(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function p_e(e){return Symbol.for(e)}var m_e=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),g_e=new m_e,y_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},b_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},v_e=function(){function e(){}return e.prototype.active=function(){return g_e},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,b_e([r],y_e(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),w_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},x_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},ZC="context",__e=new v_e,oU=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return CR(ZC,t,n1.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,x_e([t,n,r],w_e(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return ly(ZC)||__e},e.prototype.disable=function(){this._getContextManager().disable(),TR(ZC,n1.instance())},e}(),Pk;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Pk||(Pk={}));var lU="0000000000000000",cU="00000000000000000000000000000000",S_e={traceId:cU,spanId:lU,traceFlags:Pk.NONE},Xg=function(){function e(t){t===void 0&&(t=S_e),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),kR=p_e("OpenTelemetry Context Key SPAN");function AR(e){return e.getValue(kR)||void 0}function E_e(){return AR(oU.getInstance().active())}function NR(e,t){return e.setValue(kR,t)}function C_e(e){return e.deleteValue(kR)}function T_e(e,t){return NR(e,new Xg(t))}function uU(e){var t;return(t=AR(e))===null||t===void 0?void 0:t.spanContext()}var k_e=/^([0-9a-f]{32})$/i,A_e=/^[0-9a-f]{16}$/i;function N_e(e){return k_e.test(e)&&e!==cU}function R_e(e){return A_e.test(e)&&e!==lU}function dU(e){return N_e(e.traceId)&&R_e(e.spanId)}function I_e(e){return new Xg(e)}var YC=oU.getInstance(),fU=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=YC.active());var a=!!(n!=null&&n.root);if(a)return new Xg;var i=r&&uU(r);return j_e(i)&&dU(i)?new Xg(i):new Xg},e.prototype.startActiveSpan=function(t,n,r,a){var i,s,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(i=n,o=r):(i=n,s=r,o=a);var l=s??YC.active(),u=this.startSpan(t,i,l),d=NR(l,u);return YC.with(d,o,void 0,u)}},e}();function j_e(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var D_e=new fU,M_e=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):D_e},e}(),O_e=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new fU},e}(),P_e=new O_e,_P=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new M_e(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:P_e},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),r1;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(r1||(r1={}));var XC="trace",F_e=function(){function e(){this._proxyTracerProvider=new _P,this.wrapSpanContext=I_e,this.isSpanContextValid=dU,this.deleteSpan=C_e,this.getSpan=AR,this.getActiveSpan=E_e,this.getSpanContext=uU,this.setSpan=NR,this.setSpanContext=T_e}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=CR(XC,this._proxyTracerProvider,n1.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return ly(XC)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){TR(XC,n1.instance()),this._proxyTracerProvider=new _P},e}(),L_e=F_e.getInstance(),B_e=Object.defineProperty,RR=(e,t)=>{for(var n in t)B_e(e,n,{get:t[n],enumerable:!0})};function a1(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function SP(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function EP({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await i.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var hU="AI_InvalidArgumentError",pU=`vercel.ai.error.${hU}`,$_e=Symbol.for(pU),mU,uo=class extends An{constructor({parameter:e,value:t,message:n}){super({name:hU,message:`Invalid argument for parameter ${e}: ${n}`}),this[mU]=!0,this.parameter=e,this.value=t}static isInstance(e){return An.hasMarker(e,pU)}};mU=$_e;var gU="AI_RetryError",yU=`vercel.ai.error.${gU}`,z_e=Symbol.for(yU),bU,CP=class extends An{constructor({message:e,reason:t,errors:n}){super({name:gU,message:e}),this[bU]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return An.hasMarker(e,yU)}};bU=z_e;var U_e=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>vU(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function vU(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(jw(i)||t===0)throw i;const s=cJ(i),o=[...a,i],l=o.length;if(l>t)throw new CP({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:o});if(i instanceof Error&&Us.isInstance(i)&&i.isRetryable===!0&&l<=t)return await sJ(n),vU(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?i:new CP({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:o})}}function V_e({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new uo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new uo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:U_e({maxRetries:t})}}function Fk({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function H_e({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,o])=>(i[`ai.settings.${s}`]=o,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[s,o])=>(i[`ai.telemetry.metadata.${s}`]=o,i),{}),...Object.entries(r??{}).reduce((i,[s,o])=>(o!==void 0&&(i[`ai.request.headers.${s}`]=o),i),{})}}var q_e={startSpan(){return Cw},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Cw);if(typeof n=="function")return n(Cw);if(typeof r=="function")return r(Cw)}},Cw={spanContext(){return G_e},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},G_e={traceId:"",spanId:"",traceFlags:0};function W_e({isEnabled:e=!1,tracer:t}={}){return e?t||L_e.getTracer("ai"):q_e}function Lk({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return a&&i.end(),s}catch(s){try{s instanceof Error?(i.recordException({name:s.name,message:s.message,stack:s.stack}),i.setStatus({code:r1.ERROR,message:s.message})):i.setStatus({code:r1.ERROR})}finally{i.end()}throw s}})}function Qh({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var K_e=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Du(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=S1(this.base64Data)),this.uint8ArrayData}},Z_e=class extends K_e{constructor(e){super(e),this.type="file"}},Y_e=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],X_e=e=>{const t=typeof e=="string"?S1(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function J_e(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?X_e(e):e}function Q_e({data:e,signatures:t}){const n=J_e(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((a,i)=>n[i]===a))return r.mimeType}var wU="AI_NoObjectGeneratedError",xU=`vercel.ai.error.${wU}`,eSe=Symbol.for(xU),_U,TP=class extends An{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a,finishReason:i}){super({name:wU,message:e,cause:t}),this[_U]=!0,this.text=n,this.response=r,this.usage=a,this.finishReason=i}static isInstance(e){return An.hasMarker(e,xU)}};_U=eSe;var SU="AI_DownloadError",EU=`vercel.ai.error.${SU}`,tSe=Symbol.for(EU),CU,JC=class extends An{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:SU,message:a,cause:r}),this[CU]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return An.hasMarker(e,EU)}};CU=tSe;async function nSe({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new JC({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mimeType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw JC.isInstance(r)?r:new JC({url:n,cause:r})}}var TU="AI_InvalidDataContentError",kU=`vercel.ai.error.${TU}`,rSe=Symbol.for(kU),AU,kP=class extends An{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:TU,message:n,cause:t}),this[AU]=!0,this.content=e}static isInstance(e){return An.hasMarker(e,kU)}};AU=rSe;var NU=$.union([$.string(),$.instanceof(Uint8Array),$.instanceof(ArrayBuffer),$.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function RU(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Du(new Uint8Array(e)):Du(e)}function i1(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return S1(e)}catch(t){throw new kP({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new kP({content:e})}function aSe(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var IU="AI_InvalidMessageRoleError",jU=`vercel.ai.error.${IU}`,iSe=Symbol.for(jU),DU,sSe=class extends An{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:IU,message:t}),this[DU]=!0,this.role=e}static isInstance(e){return An.hasMarker(e,jU)}};DU=iSe;function oSe(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function lSe({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=nSe}){const a=await uSe(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>cSe(i,a))]}function cSe(e,t){var n,r,a,i,s,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(u=>dSe(u,t)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{var d;const h=(d=u.providerOptions)!=null?d:u.experimental_providerMetadata;switch(u.type){case"file":return{type:"file",data:u.data instanceof URL?u.data:RU(u.data),filename:u.filename,mimeType:u.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:u.text,signature:u.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:u.data,providerMetadata:h};case"text":return{type:"text",text:u.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,args:u.args,providerMetadata:h}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const u=l;throw new sSe({role:u})}}}async function uSe(e,t,n,r){const a=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(a.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:o})=>[s.toString(),o]))}function dSe(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,o,l,u;const d=e.type;switch(d){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:m}=oSe(l.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${d}`);s=h,u=i1(m)}else{const h=t[l.toString()];h?(u=h.data,s??(s=h.mimeType)):u=l}else u=i1(l);switch(d){case"image":return u instanceof Uint8Array&&(s=(r=Q_e({data:u,signatures:Y_e}))!=null?r:s),{type:"image",image:u,mimeType:s,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?RU(u):u,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function fSe({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new uo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new uo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new uo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new uo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new uo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new uo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new uo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new uo({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:o}}function AP(e){var t,n,r;const a=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let o,l,u;try{[o,l]=i.url.split(","),u=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:i1(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:aSe(i1(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return a}var MU="AI_MessageConversionError",OU=`vercel.ai.error.${MU}`,hSe=Symbol.for(OU),PU,QC=class extends An{constructor({originalMessage:e,message:t}){super({name:MU,message:t}),this[PU]=!0,this.originalMessage=e}static isInstance(e){return An.hasMarker(e,OU)}};PU=hSe;function pSe(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const o=e[s],l=s===e.length-1,{role:u,content:d,experimental_attachments:h}=o;switch(u){case"system":{i.push({role:"system",content:d});break}case"user":{if(o.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...AP(h)]:d});else{const m=o.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,...AP(h)]:m})}break}case"assistant":{if(o.parts!=null){let b=function(){const _=[];for(const C of w)switch(C.type){case"file":case"text":{_.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":_.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":_.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":_.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:_});const E=w.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new QC({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:I,result:j}=C,N=a[I];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:I,result:N.experimental_toToolResultContent(j),experimental_content:N.experimental_toToolResultContent(j)}:{type:"tool-result",toolCallId:k,toolName:I,result:j}})}),w=[],x=!1,v++},v=0,x=!1,w=[];for(const _ of o.parts)switch(_.type){case"text":{x&&b(),w.push(_);break}case"file":case"reasoning":{w.push(_);break}case"tool-invocation":{((r=_.toolInvocation.step)!=null?r:0)!==v&&b(),w.push(_),x=!0;break}}b();break}const m=o.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:d});break}const g=m.reduce((b,v)=>{var x;return Math.max(b,(x=v.step)!=null?x:0)},0);for(let b=0;b<=g;b++){const v=m.filter(x=>{var w;return((w=x.step)!=null?w:0)===b});v.length!==0&&(i.push({role:"assistant",content:[...l&&d&&b===0?[{type:"text",text:d}]:[],...v.map(({toolCallId:x,toolName:w,args:_})=>({type:"tool-call",toolCallId:x,toolName:w,args:_}))]}),i.push({role:"tool",content:v.map(x=>{if(!("result"in x))throw new QC({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(x)});const{toolCallId:w,toolName:_,result:E}=x,C=a[_];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:w,toolName:_,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:w,toolName:_,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const m=u;throw new QC({originalMessage:o,message:`Unsupported role: ${m}`})}}}return i}function mSe(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(gSe);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function gSe(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var Bk=$.lazy(()=>$.union([$.null(),$.string(),$.number(),$.boolean(),$.record($.string(),Bk),$.array(Bk)])),ia=$.record($.string(),$.record($.string(),Bk)),ySe=$.array($.union([$.object({type:$.literal("text"),text:$.string()}),$.object({type:$.literal("image"),data:$.string(),mimeType:$.string().optional()})])),FU=$.object({type:$.literal("text"),text:$.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),bSe=$.object({type:$.literal("image"),image:$.union([NU,$.instanceof(URL)]),mimeType:$.string().optional(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),LU=$.object({type:$.literal("file"),data:$.union([NU,$.instanceof(URL)]),filename:$.string().optional(),mimeType:$.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),vSe=$.object({type:$.literal("reasoning"),text:$.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),wSe=$.object({type:$.literal("redacted-reasoning"),data:$.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),xSe=$.object({type:$.literal("tool-call"),toolCallId:$.string(),toolName:$.string(),args:$.unknown(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),_Se=$.object({type:$.literal("tool-result"),toolCallId:$.string(),toolName:$.string(),result:$.unknown(),content:ySe.optional(),isError:$.boolean().optional(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),SSe=$.object({role:$.literal("system"),content:$.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),ESe=$.object({role:$.literal("user"),content:$.union([$.string(),$.array($.union([FU,bSe,LU]))]),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),CSe=$.object({role:$.literal("assistant"),content:$.union([$.string(),$.array($.union([FU,LU,vSe,wSe,xSe]))]),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),TSe=$.object({role:$.literal("tool"),content:$.array(_Se),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),kSe=$.union([SSe,ESe,CSe,TSe]);function ASe({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Jl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Jl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Jl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Jl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=mSe(e.messages);if(n==="other")throw new Jl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?pSe(e.messages,{tools:t}):e.messages;if(r.length===0)throw new Jl({prompt:e,message:"messages must not be empty"});const a=Fp({value:r,schema:$.array(kSe)});if(!a.success)throw new Jl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function NSe({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function RSe(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var ISe="JSON schema:",jSe="You MUST answer with a JSON object that matches the JSON schema above.",DSe="You MUST answer with JSON.";function MSe({prompt:e,schema:t,schemaPrefix:n=t!=null?ISe:void 0,schemaSuffix:r=t!=null?jSe:DSe}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function eT(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Cf({prefix:"aiobj",size:24});var Vi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function NP(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function OSe(){let e=[],t=null,n=!1,r=NP();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=NP(),await r.promise,a();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function PSe(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Cf({prefix:"aiobj",size:24});var BU="AI_NoOutputSpecifiedError",$U=`vercel.ai.error.${BU}`,FSe=Symbol.for($U),zU,LSe=class extends An{constructor({message:e="No output specified."}={}){super({name:BU,message:e}),this[zU]=!0}static isInstance(e){return An.hasMarker(e,$U)}};zU=FSe;var UU="AI_ToolExecutionError",VU=`vercel.ai.error.${UU}`,BSe=Symbol.for(VU),HU,$Se=class extends An{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${vy(r)}`}){super({name:UU,message:a,cause:r}),this[HU]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return An.hasMarker(e,VU)}};HU=BSe;function zSe(e){return e!=null&&Object.keys(e).length>0}function USe({tools:e,toolChoice:t,activeTools:n}){return zSe(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const s=i.type;switch(s){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:R_(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const o=s;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var VSe=/^([\s\S]*?)(\s+)(\S*)$/;function HSe(e){const t=e.match(VSe);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var qU="AI_InvalidToolArgumentsError",GU=`vercel.ai.error.${qU}`,qSe=Symbol.for(GU),WU,KU=class extends An{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${vy(n)}`}){super({name:qU,message:r,cause:n}),this[WU]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return An.hasMarker(e,GU)}};WU=qSe;var ZU="AI_NoSuchToolError",YU=`vercel.ai.error.${ZU}`,GSe=Symbol.for(YU),XU,$k=class extends An{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:ZU,message:n}),this[XU]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return An.hasMarker(e,YU)}};XU=GSe;var JU="AI_ToolCallRepairError",QU=`vercel.ai.error.${JU}`,WSe=Symbol.for(QU),eV,KSe=class extends An{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${vy(e)}`}){super({name:JU,message:n,cause:e}),this[eV]=!0,this.originalError=t}static isInstance(e){return An.hasMarker(e,QU)}};eV=WSe;async function ZSe({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new $k({toolName:e.toolName});try{return await RP({toolCall:e,tools:t})}catch(i){if(n==null||!($k.isInstance(i)||KU.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>R_(t[o].parameters).jsonSchema,system:r,messages:a,error:i})}catch(o){throw new KSe({cause:o,originalError:i})}if(s==null)throw i;return await RP({toolCall:s,tools:t})}}async function RP({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new $k({toolName:e.toolName,availableTools:Object.keys(t)});const a=R_(r.parameters),i=e.args.trim()===""?Fp({value:{},schema:a}):ff({text:e.args,schema:a});if(i.success===!1)throw new KU({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function YSe(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function IP({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:s,generateMessageId:o}){const l=[],u=[];return n.length>0&&u.push(...n.map(d=>d.type==="text"?{...d,type:"reasoning"}:{...d,type:"redacted-reasoning"})),t.length>0&&u.push(...t.map(d=>({type:"file",data:d.base64,mimeType:d.mimeType}))),e.length>0&&u.push({type:"text",text:e}),a.length>0&&u.push(...a),u.length>0&&l.push({role:"assistant",content:u,id:s}),i.length>0&&l.push({role:"tool",id:o(),content:i.map(d=>{const h=r[d.toolName];return(h==null?void 0:h.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:d.toolCallId,toolName:d.toolName,result:h.experimental_toToolResultContent(d.result),experimental_content:h.experimental_toToolResultContent(d.result)}:{type:"tool-result",toolCallId:d.toolCallId,toolName:d.toolName,result:d.result}})}),l}Cf({prefix:"aitxt",size:24});Cf({prefix:"msg",size:24});var XSe={};RR(XSe,{object:()=>t2e,text:()=>e2e});var tV="AI_InvalidStreamPartError",nV=`vercel.ai.error.${tV}`,JSe=Symbol.for(nV),rV,QSe=class extends An{constructor({chunk:e,message:t}){super({name:tV,message:t}),this[rV]=!0,this.chunk=e}static isInstance(e){return An.hasMarker(e,nV)}};rV=JSe;var e2e=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),t2e=({schema:e})=>{const t=R_(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:MSe({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=F1e(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=ff({text:n});if(!a.success)throw new TP({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const i=Fp({value:a.value,schema:t});if(!i.success)throw new TP({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return i.value}}};function n2e(e){return e===void 0?[]:Array.isArray(e)?e:[e]}async function r2e({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t==null||t(r)}finally{n.releaseLock()}}function IR(e,t){const n=e.getReader(),r=t.getReader();let a,i,s=!1,o=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function u(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(s){await u(d);return}if(o){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||d.enqueue(h.value),m===n?(a=void 0,h.done&&(await u(d),s=!0)):(i=void 0,h.done&&(o=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function a2e({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:s,abortSignal:o,repairToolCall:l}){let u=null;const d=new ReadableStream({start(w){u=w}}),h={},m=new Set;let g=!1,b;function v(){g&&m.size===0&&(b!=null&&u.enqueue(b),u.close())}const x=new TransformStream({async transform(w,_){const E=w.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{_.enqueue(w);break}case"file":{_.enqueue(new Z_e({data:w.data,mimeType:w.mimeType}));break}case"tool-call-delta":{n&&(h[w.toolCallId]||(_.enqueue({type:"tool-call-streaming-start",toolCallId:w.toolCallId,toolName:w.toolName}),h[w.toolCallId]=!0),_.enqueue({type:"tool-call-delta",toolCallId:w.toolCallId,toolName:w.toolName,argsTextDelta:w.argsTextDelta}));break}case"tool-call":{try{const C=await ZSe({toolCall:w,tools:e,repairToolCall:l,system:i,messages:s});_.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const I=qi();m.add(I),Lk({name:"ai.toolCall",attributes:Qh({telemetry:a,attributes:{...Fk({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async j=>k.execute(C.args,{toolCallId:C.toolCallId,messages:s,abortSignal:o}).then(N=>{u.enqueue({...C,type:"tool-result",result:N}),m.delete(I),v();try{j.setAttributes(Qh({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{u.enqueue({type:"error",error:new $Se({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:N})}),m.delete(I),v()})})}}catch(C){u.enqueue({type:"error",error:C})}break}case"finish":{b={type:"finish",finishReason:w.finishReason,logprobs:w.logprobs,usage:NSe(w.usage),experimental_providerMetadata:w.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,v()}});return new ReadableStream({async start(w){return Promise.all([t.pipeThrough(x).pipeTo(new WritableStream({write(_){w.enqueue(_)},close(){}})),d.pipeTo(new WritableStream({write(_){w.enqueue(_)},close(){w.close()}}))])}})}var i2e=Cf({prefix:"aitxt",size:24}),s2e=Cf({prefix:"msg",size:24});function o2e({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:s,abortSignal:o,headers:l,maxSteps:u=1,experimental_generateMessageId:d=s2e,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:b,providerOptions:v=b,experimental_toolCallStreaming:x=!1,toolCallStreaming:w=x,experimental_activeTools:_,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:I,onFinish:j,onStepFinish:N,_internal:{now:P=PSe,generateId:L=i2e,currentDate:H=()=>new Date}={},...M}){return new c2e({model:e,telemetry:g,headers:l,settings:M,maxRetries:s,abortSignal:o,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:w,transforms:n2e(C),activeTools:_,repairToolCall:E,maxSteps:u,output:h,continueSteps:m,providerOptions:v,onChunk:k,onError:I,onFinish:j,onStepFinish:N,now:P,currentDate:H,generateId:L,generateMessageId:d})}function l2e(e){if(!e)return new TransformStream({transform(i,s){s.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:s=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:s}),n=""}return new TransformStream({transform(i,s){if(i.type==="step-finish"&&a({controller:s}),i.type!=="text-delta"){s.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(a({controller:s,partialOutput:o.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var c2e=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:s,prompt:o,messages:l,tools:u,toolChoice:d,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:b,maxSteps:v,output:x,continueSteps:w,providerOptions:_,now:E,currentDate:C,generateId:k,generateMessageId:I,onChunk:j,onError:N,onFinish:P,onStepFinish:L}){this.warningsPromise=new Vi,this.usagePromise=new Vi,this.finishReasonPromise=new Vi,this.providerMetadataPromise=new Vi,this.textPromise=new Vi,this.reasoningPromise=new Vi,this.reasoningDetailsPromise=new Vi,this.sourcesPromise=new Vi,this.filesPromise=new Vi,this.toolCallsPromise=new Vi,this.toolResultsPromise=new Vi,this.requestPromise=new Vi,this.responsePromise=new Vi,this.stepsPromise=new Vi;var H;if(v<1)throw new uo({parameter:"maxSteps",value:v,message:"maxSteps must be at least 1"});this.output=x;let M="",K="",q="",ue=[],ae=[],te,Y=[];const ie=[],V={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let J=[],Q=[],ne,he,de="initial";const Ie=[];let ke;const Te=new TransformStream({async transform(fe,se){se.enqueue(fe);const{part:ee}=fe;if((ee.type==="text-delta"||ee.type==="reasoning"||ee.type==="source"||ee.type==="tool-call"||ee.type==="tool-result"||ee.type==="tool-call-streaming-start"||ee.type==="tool-call-delta")&&await(j==null?void 0:j({chunk:ee})),ee.type==="error"&&await(N==null?void 0:N({error:ee.error})),ee.type==="text-delta"&&(M+=ee.textDelta,K+=ee.textDelta,q+=ee.textDelta),ee.type==="reasoning"&&(te==null?(te={type:"text",text:ee.textDelta},ue.push(te)):te.text+=ee.textDelta),ee.type==="reasoning-signature"){if(te==null)throw new An({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});te.signature=ee.signature,te=void 0}if(ee.type==="redacted-reasoning"&&ue.push({type:"redacted",data:ee.data}),ee.type==="file"&&ae.push(ee),ee.type==="source"&&(ie.push(ee.source),Y.push(ee.source)),ee.type==="tool-call"&&J.push(ee),ee.type==="tool-result"&&Q.push(ee),ee.type==="step-finish"){const xe=IP({text:K,files:ae,reasoning:ue,tools:u??{},toolCalls:J,toolResults:Q,messageId:ee.messageId,generateMessageId:I}),Fe=Ie.length;let Ce="done";Fe+1<v&&(w&&ee.finishReason==="length"&&J.length===0?Ce="continue":J.length>0&&Q.length===J.length&&(Ce="tool-result"));const We={stepType:de,text:M,reasoning:YSe(ue),reasoningDetails:ue,files:ae,sources:Y,toolCalls:J,toolResults:Q,finishReason:ee.finishReason,usage:ee.usage,warnings:ee.warnings,logprobs:ee.logprobs,request:ee.request,response:{...ee.response,messages:[...V.messages,...xe]},providerMetadata:ee.experimental_providerMetadata,experimental_providerMetadata:ee.experimental_providerMetadata,isContinued:ee.isContinued};await(L==null?void 0:L(We)),Ie.push(We),J=[],Q=[],M="",Y=[],ue=[],ae=[],te=void 0,Ce!=="done"&&(de=Ce),Ce!=="continue"&&(V.messages.push(...xe),K="")}ee.type==="finish"&&(V.id=ee.response.id,V.timestamp=ee.response.timestamp,V.modelId=ee.response.modelId,V.headers=ee.response.headers,he=ee.usage,ne=ee.finishReason)},async flush(fe){var se;try{if(Ie.length===0)return;const ee=Ie[Ie.length-1];Ne.warningsPromise.resolve(ee.warnings),Ne.requestPromise.resolve(ee.request),Ne.responsePromise.resolve(ee.response),Ne.toolCallsPromise.resolve(ee.toolCalls),Ne.toolResultsPromise.resolve(ee.toolResults),Ne.providerMetadataPromise.resolve(ee.experimental_providerMetadata),Ne.reasoningPromise.resolve(ee.reasoning),Ne.reasoningDetailsPromise.resolve(ee.reasoningDetails);const xe=ne??"unknown",Fe=he??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ne.finishReasonPromise.resolve(xe),Ne.usagePromise.resolve(Fe),Ne.textPromise.resolve(q),Ne.sourcesPromise.resolve(ie),Ne.filesPromise.resolve(ee.files),Ne.stepsPromise.resolve(Ie),await(P==null?void 0:P({finishReason:xe,logprobs:void 0,usage:Fe,text:q,reasoning:ee.reasoning,reasoningDetails:ee.reasoningDetails,files:ee.files,sources:ee.sources,toolCalls:ee.toolCalls,toolResults:ee.toolResults,request:(se=ee.request)!=null?se:{},response:ee.response,warnings:ee.warnings,providerMetadata:ee.providerMetadata,experimental_providerMetadata:ee.experimental_providerMetadata,steps:Ie})),ke.setAttributes(Qh({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>{var Ce;return(Ce=ee.toolCalls)!=null&&Ce.length?JSON.stringify(ee.toolCalls):void 0}},"ai.usage.promptTokens":Fe.promptTokens,"ai.usage.completionTokens":Fe.completionTokens}}))}catch(ee){fe.error(ee)}finally{ke.end()}}}),Se=OSe();this.addStream=Se.addStream,this.closeStream=Se.close;let Pe=Se.stream;for(const fe of m)Pe=Pe.pipeThrough(fe({tools:u,stopStream(){Se.terminate()}}));this.baseStream=Pe.pipeThrough(l2e(x)).pipeThrough(Te);const{maxRetries:Qe,retry:Le}=V_e({maxRetries:a}),je=W_e(t),z=H_e({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Qe}}),Ee=ASe({prompt:{system:(H=x==null?void 0:x.injectIntoSystemPrompt({system:s,model:e}))!=null?H:s,prompt:o,messages:l},tools:u}),Ne=this;Lk({name:"ai.streamText",attributes:Qh({telemetry:t,attributes:{...Fk({operationId:"ai.streamText",telemetry:t}),...z,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:o,messages:l})},"ai.settings.maxSteps":v}}),tracer:je,endWhenDone:!1,fn:async fe=>{ke=fe;async function se({currentStep:ee,responseMessages:xe,usage:Fe,stepType:Ce,previousStepText:We,hasLeadingWhitespace:Nt,messageId:it}){var St;const Ft=xe.length===0?Ee.type:"messages",Mt=[...Ee.messages,...xe],Kt=await lSe({prompt:{type:Ft,system:Ee.system,messages:Mt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(St=e.supportsUrl)==null?void 0:St.bind(e)}),be={type:"regular",...USe({tools:u,toolChoice:d,activeTools:g})},{result:{stream:D,warnings:W,rawResponse:pe,request:De},doStreamSpan:ve,startTimestampMs:Ae}=await Le(()=>Lk({name:"ai.streamText.doStream",attributes:Qh({telemetry:t,attributes:{...Fk({operationId:"ai.streamText.doStream",telemetry:t}),...z,"ai.prompt.format":{input:()=>Ft},"ai.prompt.messages":{input:()=>JSON.stringify(Kt)},"ai.prompt.tools":{input:()=>{var Rt;return(Rt=be.tools)==null?void 0:Rt.map(Lt=>JSON.stringify(Lt))}},"ai.prompt.toolChoice":{input:()=>be.toolChoice!=null?JSON.stringify(be.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:je,endWhenDone:!1,fn:async Rt=>({startTimestampMs:E(),doStreamSpan:Rt,result:await e.doStream({mode:be,...fSe(r),inputFormat:Ft,responseFormat:x==null?void 0:x.responseFormat({model:e}),prompt:Kt,providerMetadata:_,abortSignal:i,headers:n})})})),le=a2e({tools:u,generatorStream:D,toolCallStreaming:h,tracer:je,telemetry:t,system:s,messages:Mt,repairToolCall:b,abortSignal:i}),ft=De??{},vt=[],F=[],$e=[],nt=[];let ye,Me="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Dt,ge=!0,G="",U=Ce==="continue"?We:"",Z,me={id:k(),timestamp:C(),modelId:e.modelId},Re="",Ve=!1,pt=!0,Wt=!1;async function ut({controller:Rt,chunk:Lt}){Rt.enqueue(Lt),G+=Lt.textDelta,U+=Lt.textDelta,Ve=!0,Wt=Lt.textDelta.trimEnd()!==Lt.textDelta}Ne.addStream(le.pipeThrough(new TransformStream({async transform(Rt,Lt){var en,Nn,Xn;if(ge){const Er=E()-Ae;ge=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Er}),ve.setAttributes({"ai.response.msToFirstChunk":Er}),Lt.enqueue({type:"step-start",messageId:it,request:ft,warnings:W??[]})}if(Rt.type==="text-delta"&&Rt.textDelta.length===0)return;const Sr=Rt.type;switch(Sr){case"text-delta":{if(w){const Er=pt&&Nt?Rt.textDelta.trimStart():Rt.textDelta;if(Er.length===0)break;pt=!1,Re+=Er;const $n=HSe(Re);$n!=null&&(Re=$n.suffix,await ut({controller:Lt,chunk:{type:"text-delta",textDelta:$n.prefix+$n.whitespace}}))}else await ut({controller:Lt,chunk:Rt});break}case"reasoning":{Lt.enqueue(Rt),ye==null?(ye={type:"text",text:Rt.textDelta},$e.push(ye)):ye.text+=Rt.textDelta;break}case"reasoning-signature":{if(Lt.enqueue(Rt),ye==null)throw new QSe({chunk:Rt,message:"reasoning-signature without reasoning"});ye.signature=Rt.signature,ye=void 0;break}case"redacted-reasoning":{Lt.enqueue(Rt),$e.push({type:"redacted",data:Rt.data});break}case"tool-call":{Lt.enqueue(Rt),vt.push(Rt);break}case"tool-result":{Lt.enqueue(Rt),F.push(Rt);break}case"response-metadata":{me={id:(en=Rt.id)!=null?en:me.id,timestamp:(Nn=Rt.timestamp)!=null?Nn:me.timestamp,modelId:(Xn=Rt.modelId)!=null?Xn:me.modelId};break}case"finish":{Ke=Rt.usage,Me=Rt.finishReason,Dt=Rt.experimental_providerMetadata,Z=Rt.logprobs;const Er=E()-Ae;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":Er,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/Er});break}case"file":{nt.push(Rt),Lt.enqueue(Rt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Lt.enqueue(Rt);break}case"error":{Lt.enqueue(Rt),Me="error";break}default:{const Er=Sr;throw new Error(`Unknown chunk type: ${Er}`)}}},async flush(Rt){const Lt=vt.length>0?JSON.stringify(vt):void 0;let en="done";ee+1<v&&(w&&Me==="length"&&vt.length===0?en="continue":vt.length>0&&F.length===vt.length&&(en="tool-result")),w&&Re.length>0&&(en!=="continue"||Ce==="continue"&&!Ve)&&(await ut({controller:Rt,chunk:{type:"text-delta",textDelta:Re}}),Re="");try{ve.setAttributes(Qh({telemetry:t,attributes:{"ai.response.finishReason":Me,"ai.response.text":{output:()=>G},"ai.response.toolCalls":{output:()=>Lt},"ai.response.id":me.id,"ai.response.model":me.modelId,"ai.response.timestamp":me.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[Me],"gen_ai.response.id":me.id,"gen_ai.response.model":me.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{ve.end()}Rt.enqueue({type:"step-finish",finishReason:Me,usage:Ke,providerMetadata:Dt,experimental_providerMetadata:Dt,logprobs:Z,request:ft,response:{...me,headers:pe==null?void 0:pe.headers},warnings:W,isContinued:en==="continue",messageId:it});const Nn=RSe(Fe,Ke);if(en==="done")Rt.enqueue({type:"finish",finishReason:Me,usage:Nn,providerMetadata:Dt,experimental_providerMetadata:Dt,logprobs:Z,response:{...me,headers:pe==null?void 0:pe.headers}}),Ne.closeStream();else{if(Ce==="continue"){const Xn=xe[xe.length-1];typeof Xn.content=="string"?Xn.content+=G:Xn.content.push({text:G,type:"text"})}else xe.push(...IP({text:G,files:nt,reasoning:$e,tools:u??{},toolCalls:vt,toolResults:F,messageId:it,generateMessageId:I}));await se({currentStep:ee+1,responseMessages:xe,usage:Nn,stepType:en,previousStepText:U,hasLeadingWhitespace:Wt,messageId:en==="continue"?it:I()})}}})))}await se({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:I()})}}).catch(fe=>{Ne.addStream(new ReadableStream({start(se){se.enqueue({type:"error",error:fe}),se.close()}})),Ne.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return eT(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return eT(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await r2e({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(n){(t=e==null?void 0:e.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new LSe;return eT(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,s)=>{const o=i.type;switch(o){case"text-delta":{s.enqueue(ci("text",i.textDelta));break}case"reasoning":{n&&s.enqueue(ci("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&s.enqueue(ci("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&s.enqueue(ci("reasoning_signature",{signature:i.signature}));break}case"file":{s.enqueue(ci("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&s.enqueue(ci("source",i.source));break}case"tool-call-streaming-start":{s.enqueue(ci("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{s.enqueue(ci("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{s.enqueue(ci("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{s.enqueue(ci("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{s.enqueue(ci("error",e(i.error)));break}case"step-start":{s.enqueue(ci("start_step",{messageId:i.messageId}));break}case"step-finish":{s.enqueue(ci("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&s.enqueue(ci("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u}={}){EP({response:e,status:t,statusText:n,headers:SP(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){EP({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:SP(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?IR(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:a1(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:a1(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},u2e=$.object({name:$.string(),version:$.string()}).passthrough(),jR=$.object({_meta:$.optional($.object({}).passthrough())}).passthrough(),cy=jR,d2e=$.object({method:$.string(),params:$.optional(jR)}),f2e=$.object({experimental:$.optional($.object({}).passthrough()),logging:$.optional($.object({}).passthrough()),prompts:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough()),resources:$.optional($.object({subscribe:$.optional($.boolean()),listChanged:$.optional($.boolean())}).passthrough()),tools:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough())}).passthrough();cy.extend({protocolVersion:$.string(),capabilities:f2e,serverInfo:u2e,instructions:$.optional($.string())});var h2e=cy.extend({nextCursor:$.optional($.string())}),p2e=$.object({name:$.string(),description:$.optional($.string()),inputSchema:$.object({type:$.literal("object"),properties:$.optional($.object({}).passthrough())}).passthrough()}).passthrough();h2e.extend({tools:$.array(p2e)});var m2e=$.object({type:$.literal("text"),text:$.string()}).passthrough(),g2e=$.object({type:$.literal("image"),data:$.string().base64(),mimeType:$.string()}).passthrough(),aV=$.object({uri:$.string(),mimeType:$.optional($.string())}).passthrough(),y2e=aV.extend({text:$.string()}),b2e=aV.extend({blob:$.string().base64()}),v2e=$.object({type:$.literal("resource"),resource:$.union([y2e,b2e])}).passthrough();cy.extend({content:$.array($.union([m2e,g2e,v2e])),isError:$.boolean().default(!1).optional()}).or(cy.extend({toolResult:$.unknown()}));var I_="2.0",w2e=$.object({jsonrpc:$.literal(I_),id:$.union([$.string(),$.number().int()])}).merge(d2e).strict(),x2e=$.object({jsonrpc:$.literal(I_),id:$.union([$.string(),$.number().int()]),result:cy}).strict(),_2e=$.object({jsonrpc:$.literal(I_),id:$.union([$.string(),$.number().int()]),error:$.object({code:$.number().int(),message:$.string(),data:$.optional($.unknown())})}).strict(),S2e=$.object({jsonrpc:$.literal(I_)}).merge($.object({method:$.string(),params:$.optional(jR)})).strict();$.union([w2e,S2e,x2e,_2e]);var E2e={};RR(E2e,{mergeIntoDataStream:()=>k2e,toDataStream:()=>C2e,toDataStreamResponse:()=>T2e});function iV(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function DR(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&jP((a=n.data)==null?void 0:a.chunk,r);return}jP(n,r)}})).pipeThrough(iV(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(ci("text",n))}}))}function C2e(e,t){return DR(e,t).pipeThrough(new TextEncoderStream)}function T2e(e,t){var n;const r=DR(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,s=a?IR(a.stream,r):r;return new Response(s,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:a1(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function k2e(e,t){t.dataStream.merge(DR(e,t.callbacks))}function jP(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var A2e={};RR(A2e,{mergeIntoDataStream:()=>I2e,toDataStream:()=>N2e,toDataStreamResponse:()=>R2e});function MR(e,t){const n=j2e();return iJ(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(iV(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(ci("text",r))}}))}function N2e(e,t){return MR(e,t).pipeThrough(new TextEncoderStream)}function R2e(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,s=MR(e,i).pipeThrough(new TextEncoderStream),o=a?IR(a.stream,s):s;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:a1(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function I2e(e,t){t.dataStream.merge(MR(e,t.callbacks))}function j2e(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class D2e{static async executeInteraction(t,n,r){let a,i=!1,s=null,o,l,u;try{a=await o2e(n);for await(const d of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(d.type){case"text-delta":r.onChunk(d.textDelta);break;case"reasoning":r.onReasoningChunk(d.textDelta);break;case"tool-call":r.onToolCall(d);break;case"tool-result":r.onToolResult(d);break;case"finish":i=!0,s=d.finishReason,o=d.usage,l=d.providerMetadata;break;case"error":r.onError(new Error(`AI Stream Error Part: ${d.error instanceof Error?d.error.message:d.error}`));return;default:console.warn(`[AIService] Received unexpected stream part type: ${d.type}`,d);break}}a!=null&&a.reasoning?(u=await a.reasoning,console.log(`[AIService] Extracted final reasoning for ${t}`)):console.log(`[AIService] No final reasoning found in stream result for ${t}.`),!n.abortSignal.aborted&&i?r.onFinish({finishReason:s,usage:o,providerMetadata:l,reasoning:u}):!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(d){console.error(`[AIService] Error during streamText call for ${t}:`,d),d instanceof Error&&d.name==="AbortError"||r.onError(d instanceof Error?d:new Error(String(d)))}finally{console.log(`[AIService] Stream processing finished for ${t}.`)}}}const Vw={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,async startInteraction(e,t,n,r="message.user_assistant"){var P,L,H,M,K,q,ue,ae,te;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const a=await LT(Xw.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(a===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const i=a&&typeof a=="object"?a.prompt:e,s=ji(),o=new AbortController;this._activeControllers.set(s,o),this._streamingToolData.set(s,{calls:[],results:[]}),this._firstChunkTimestamps.delete(s),this._interactionStartTimes.delete(s);const l=Mn.getState(),d=l.interactions.filter(Y=>Y.conversationId===t),h=r==="conversation.title_generation"?-1:d.reduce((Y,ie)=>Math.max(Y,ie.index),-1)+1,m=r==="conversation.title_generation"?null:d.length>0?d[d.length-1].id:null,g=performance.now();this._interactionStartTimes.set(s,g);const b={id:s,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...i.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:h,parentId:m};r!=="conversation.title_generation"?(l._addInteractionToState(b),l._addStreamingId(s)):(l._addInteractionToState(b),l._addStreamingId(s),console.log(`[InteractionService] Added title generation interaction ${s} to state.`)),_t.saveInteraction({...b}).catch(Y=>{console.error(`[InteractionService] Failed initial persistence for ${s}`,Y)}),Tt.emit(Et.INTERACTION_STARTED,{interactionId:s,conversationId:t,type:b.type});const v=(P=i.metadata)==null?void 0:P.modelId;if(!v)return this._finalizeInteraction(s,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:x,modelId:w}=Ac(v);if(!x||!w)return this._finalizeInteraction(s,"ERROR",new Error(`Invalid combined model ID format: ${v}`),r),null;const _=Un.getState().dbProviderConfigs.find(Y=>Y.id===x);if(!_)return this._finalizeInteraction(s,"ERROR",new Error(`Provider configuration not found for ID: ${x}`),r),null;const E=Un.getState().getApiKeyForProvider(x),C=OF(_,w,E);if(!C)return this._finalizeInteraction(s,"ERROR",new Error(`Failed to instantiate model instance for ${v} from provider ${_.name}`),r),null;console.log(`[InteractionService] Using model instance for ${v}`);const k=r!=="conversation.title_generation"?(((L=i.metadata)==null?void 0:L.enabledTools)??[]).reduce((Y,ie)=>{const J=Ir.getState().getRegisteredTools()[ie];if(J!=null&&J.implementation){const Q={...J.definition};Q.execute=async ne=>{const he=Mn.getState().currentConversationId,de=he?mn.getState().getConversationById(he):null,Ie=(de==null?void 0:de.projectId)??"orphan";let ke;try{ke=await ko.getState().initializeVFS(Ie,{force:!0})}catch(Te){return{_isError:!0,error:`Filesystem error: ${Te.message}`}}try{const Te=one(),Se=J.definition.parameters.parse(ne),Pe=J.implementation,Qe={...Te,fsInstance:ke};return await Pe(Se,Qe)}catch(Te){const Se=Te instanceof Error?Te.message:String(Te);return Te instanceof $.ZodError?{_isError:!0,error:`Invalid arguments: ${Te.errors.map(Pe=>`${Pe.path.join(".")} (${Pe.message})`).join(", ")}`}:{_isError:!0,error:Se}}},Y[ie]=Q}return Y},{}):void 0,I=((H=i.parameters)==null?void 0:H.maxSteps)??pr.getState().toolMaxSteps,j={model:C,messages:i.messages,abortSignal:o.signal,system:i.system,temperature:(M=i.parameters)==null?void 0:M.temperature,maxTokens:(K=i.parameters)==null?void 0:K.max_tokens,topP:(q=i.parameters)==null?void 0:q.top_p,topK:(ue=i.parameters)==null?void 0:ue.top_k,presencePenalty:(ae=i.parameters)==null?void 0:ae.presence_penalty,frequencyPenalty:(te=i.parameters)==null?void 0:te.frequency_penalty,maxSteps:I,...k&&Object.keys(k).length>0&&{tools:k},toolChoice:i.toolChoice??(k&&Object.keys(k).length>0?"auto":"none")},N={onChunk:Y=>this._handleChunk(s,Y),onReasoningChunk:Y=>this._handleReasoningChunk(s,Y),onToolCall:Y=>this._handleToolCall(s,Y),onToolResult:Y=>this._handleToolResult(s,Y),onFinish:Y=>this._handleFinish(s,Y,r),onError:Y=>this._handleError(s,Y,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${s}`),D2e.executeInteraction(s,j,N).catch(Y=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${s}:`,Y),this._handleError(s,Y instanceof Error?Y:new Error("Failed to start AI execution"),r)}),s},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),Ge.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=Mn.getState(),r=n.interactions.find(a=>a.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await LT(Xw.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;Mn.getState().appendInteractionResponseChunk(e,a),Tt.emit(Et.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleReasoningChunk(e,t){Mn.getState().appendReasoningChunk(e,t)},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),Mn.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),Mn.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",a){var k;const i=Mn.getState(),s=i.interactions.find(I=>I.id===e);if(!s||s.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=i.activeStreamBuffers[e]??"",l=i.activeReasoningBuffers[e]??"",u=this._streamingToolData.get(e)||{calls:[],results:[]},d=(s==null?void 0:s.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}, Reasoning Length: ${l.length}`);const h=performance.now(),m=this._interactionStartTimes.get(e),g=this._firstChunkTimestamps.get(e),b=m?Math.round(h-m):void 0,v=m&&g?Math.round(g-m):void 0,x=(a==null?void 0:a.reasoning)??l,w={status:t,endedAt:new Date,response:o||null,metadata:{...d,...(a==null?void 0:a.usage)&&{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens,totalTokens:a.usage.totalTokens},...(a==null?void 0:a.providerMetadata)&&{providerMetadata:a.providerMetadata},toolCalls:u.calls,toolResults:u.results,reasoning:x||void 0,timeToFirstToken:v,generationTime:b,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&w.response&&typeof w.response=="string"){const I=w.response.trim().replace(/^"|"$/g,"");I&&s&&(console.log(`[InteractionService] Updating conversation ${s.conversationId} title to: "${I}"`),mn.getState().updateConversation(s.conversationId,{title:I}).catch(j=>console.error("Failed to update conversation title:",j)))}i._updateInteractionInState(e,w),i._removeStreamingId(e);const _=Mn.getState().interactions.find(I=>I.id===e);_?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((k=_.response)==null?void 0:k.length)??0}`),_t.saveInteraction({..._}).catch(I=>{console.error(`[InteractionService] Failed final persistence for ${e}`,I)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let E=[],C=[];try{E=u.calls.map(I=>JSON.parse(I)),C=u.results.map(I=>JSON.parse(I))}catch(I){console.error("[InteractionService] Failed to parse tool strings for event emitter:",I)}Tt.emit(Et.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:E,toolResults:C}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Xo=(e,t)=>{Tt.emit(Et.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},Oi=Ks(Zs((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Xo("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Xo("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Xo("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Xo("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Xo("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Xo("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Xo("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Xo("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Xo("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Xo("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),Tt.emit(Et.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),Tt.emit(Et.PROMPT_PARAMS_CHANGED,{params:r}))}}))),Tc=Ks(Zs((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([_t.loadRules(),_t.loadTags(),_t.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:a,isLoading:!1})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),Ge.error("Failed to load rules and tags.")}},addRule:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.rules.push(i),s.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{return await _t.saveRule(i),Ge.success(`Rule "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding rule",s),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),Ge.error("Failed to save new rule."),s}},updateRule:async(n,r)=>{const a=t().rules.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.rules.findIndex(l=>l.id===n);o!==-1&&(s.rules[o]=i,s.rules.sort((l,u)=>l.name.localeCompare(u.name)))});try{await _t.saveRule(i),Ge.success(`Rule "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating rule",s),e(o=>{const l=o.rules.findIndex(u=>u.id===n);l!==-1&&(o.rules[l]=a,o.rules.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save rule update"}),Ge.error("Failed to save rule update."),s}},deleteRule:async n=>{const r=t().rules.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.ruleId===n);e(i=>({rules:i.rules.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.ruleId!==n)}));try{await _t.deleteRule(n),Ge.success(`Rule "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting rule",i),e(s=>{s.rules.push(r),s.rules.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete rule"}),Ge.error("Failed to delete rule."),i}},addTag:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.tags.push(i),s.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{return await _t.saveTag(i),Ge.success(`Tag "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding tag",s),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),Ge.error("Failed to save new tag."),s}},updateTag:async(n,r)=>{const a=t().tags.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.tags.findIndex(l=>l.id===n);o!==-1&&(s.tags[o]=i,s.tags.sort((l,u)=>l.name.localeCompare(u.name)))});try{await _t.saveTag(i),Ge.success(`Tag "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating tag",s),e(o=>{const l=o.tags.findIndex(u=>u.id===n);l!==-1&&(o.tags[l]=a,o.tags.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save tag update"}),Ge.error("Failed to save tag update."),s}},deleteTag:async n=>{const r=t().tags.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.tagId===n);e(i=>({tags:i.tags.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.tagId!==n)}));try{await _t.deleteTag(n),Ge.success(`Tag "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting tag",i),e(s=>{s.tags.push(r),s.tags.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete tag"}),Ge.error("Failed to delete tag."),i}},linkTagToRule:async(n,r)=>{const a=`${n}-${r}`;if(t().tagRuleLinks.find(o=>o.id===a))return;const s={id:a,tagId:n,ruleId:r};e(o=>{o.tagRuleLinks.push(s)});try{await _t.saveTagRuleLink(s)}catch(o){throw console.error("RulesStore: Error linking tag to rule",o),e(l=>({error:"Failed to link tag and rule",tagRuleLinks:l.tagRuleLinks.filter(u=>u.id!==a)})),Ge.error("Failed to link tag and rule."),o}},unlinkTagFromRule:async(n,r)=>{const a=`${n}-${r}`,i=t().tagRuleLinks.find(s=>s.id===a);if(i){e(s=>({tagRuleLinks:s.tagRuleLinks.filter(o=>o.id!==a)}));try{await _t.deleteTagRuleLink(a)}catch(s){throw console.error("RulesStore: Error unlinking tag from rule",s),e(o=>{o.tagRuleLinks.push(i),o.error="Failed to unlink tag and rule"}),Ge.error("Failed to unlink tag and rule."),s}}},getRulesForTag:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.tagId===n).map(i=>i.ruleId));return r.rules.filter(i=>a.has(i.id))},getTagsForRule:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.ruleId===n).map(i=>i.tagId));return r.tags.filter(i=>a.has(i.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(a=>r.has(a.id))}}))),DP={async submitPrompt(e){var q,ue,ae,te,Y,ie;console.log("[ConversationService] submitPrompt called",e);const t=Mn.getState(),n=fi.getState(),r=Oi.getState(),a=mn.getState(),i=Tc.getState(),s=pr.getState(),o=t.currentConversationId;if(!o){Ge.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const l=a.getConversationById(o),u=(l==null?void 0:l.projectId)??null,h=t.interactions.filter(V=>V.conversationId===o).length===0&&s.autoTitleEnabled&&((q=e.metadata)==null?void 0:q.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,g=t.interactions.filter(V=>V.status==="COMPLETED"&&V.type==="message.user_assistant"),b=rD(g);let v=e.content;const x=[],w=((ue=e.metadata)==null?void 0:ue.activeTagIds)??[],_=((ae=e.metadata)==null?void 0:ae.activeRuleIds)??[],E=new Set(_);w.forEach(V=>{i.getRulesForTag(V).forEach(J=>E.add(J.id))});const C=i.getRulesByIds(Array.from(E))||[],k=C.filter(V=>V.type==="system").map(V=>V.content),I=C.filter(V=>V.type==="before").map(V=>V.content),j=C.filter(V=>V.type==="after").map(V=>V.content);I.length>0&&(v=`${I.join(`
`)}

${v}`),j.length>0&&(v=`${v}

    ${j.join(`
`)}`),v&&x.push({type:"text",text:v});const N=((te=e.metadata)==null?void 0:te.attachedFiles)??[];if(N.length>0){const V=await this._processFilesForPrompt(N,o);x.unshift(...V)}x.length>0?b.push({role:"user",content:x}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");const P=(Y=e.metadata)==null?void 0:Y.turnSystemPrompt,L=n.getEffectiveProjectSettings(u);let H=P??L.systemPrompt??void 0;k.length>0&&(H=`${H?`${H}

        `:""}${k.join(`
`)}`);const M={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(M).forEach(V=>{(M[V]===null||M[V]===void 0)&&delete M[V]});const K={system:H,messages:b,parameters:M,metadata:{...(({turnSystemPrompt:V,activeTagIds:J,activeRuleIds:Q,autoTitleEnabledForTurn:ne,...he})=>he)(e.metadata??{}),modelId:r.modelId??void 0,attachedFiles:(ie=e.metadata.attachedFiles)==null?void 0:ie.map(({contentBase64:V,contentText:J,...Q})=>Q)}};try{const V=Vw.startInteraction(K,o,e);h&&(console.log("[ConversationService] Triggering asynchronous title generation."),this.generateConversationTitle(o,e,C).catch(J=>{console.error("[ConversationService] Background title generation failed:",J)})),await V}catch(V){throw console.error("[ConversationService] Error starting interaction:",V),Ge.error(`Failed to start interaction: ${V instanceof Error?V.message:String(V)}`),V}},async generateConversationTitle(e,t,n){var o,l;const r=pr.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let a=t.content;if(a.length>r.autoTitlePromptMaxLength&&(a=a.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const u=t.metadata.attachedFiles.map(d=>d.name).join(", ");a+=`

[Attached files: ${u}]`}if(r.autoTitleIncludeRules&&n.length>0){const u=n.map(d=>d.name).join(", ");a+=`

[Active rules: ${u}]`}const i={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:a}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},s={id:ji(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:i.parameters,metadata:{...i.metadata,originalTurnId:t.id}};try{await Vw.startInteraction(i,e,s,"conversation.title_generation")}catch(u){console.error("[ConversationService] Error starting title generation interaction:",u)}},async regenerateInteraction(e){var K,q,ue,ae;console.log("[ConversationService] regenerateInteraction called",e);const t=Mn.getState(),n=fi.getState(),r=Oi.getState(),a=mn.getState(),i=Tc.getState(),s=t.interactions.find(te=>te.id===e);if(!s||!s.prompt){Ge.error("Cannot regenerate: Original interaction data missing.");return}const o=s.prompt,l=s.conversationId,u=a.getConversationById(l),d=(u==null?void 0:u.projectId)??null,h=s.index,m=t.interactions.filter(te=>te.conversationId===l&&te.index<h&&te.status==="COMPLETED"&&te.type==="message.user_assistant").sort((te,Y)=>te.index-Y.index),g=rD(m);let b=o.content;const v=[],x=((K=o.metadata)==null?void 0:K.activeTagIds)??[],w=((q=o.metadata)==null?void 0:q.activeRuleIds)??[],_=new Set(w);x.forEach(te=>{i.getRulesForTag(te).forEach(Y=>_.add(Y.id))});const E=i.getRulesByIds(Array.from(_))||[],C=E.filter(te=>te.type==="before").map(te=>te.content),k=E.filter(te=>te.type==="after").map(te=>te.content);C.length>0&&(b=`${C.join(`
`)}

${b}`),k.length>0&&(b=`${b}

    ${k.join(`
`)}`),b&&v.push({type:"text",text:b});const I=((ue=o.metadata)==null?void 0:ue.attachedFiles)??[];if(I.length>0){const te=await this._processFilesForPrompt(I,l);v.unshift(...te)}v.length>0?g.push({role:"user",content:v}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");const j=(ae=o.metadata)==null?void 0:ae.turnSystemPrompt,N=n.getEffectiveProjectSettings(d);let P=j??N.systemPrompt??void 0;const L=E.filter(te=>te.type==="system").map(te=>te.content);L.length>0&&(P=`${P?`${P}

        `:""}${L.join(`
`)}`);const H={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(H).forEach(te=>{(H[te]===null||H[te]===void 0)&&delete H[te]});const M={system:P,messages:g,parameters:H,metadata:{...(({turnSystemPrompt:te,activeTagIds:Y,activeRuleIds:ie,autoTitleEnabledForTurn:V,...J})=>J)(o.metadata??{}),modelId:r.modelId??void 0,regeneratedFromId:e,attachedFiles:I.map(({contentBase64:te,contentText:Y,...ie})=>ie)}};try{await Vw.startInteraction(M,l,o,"message.assistant_regen")}catch(te){throw console.error("[ConversationService] Error starting regeneration interaction:",te),Ge.error(`Failed to start regeneration: ${te instanceof Error?te.message:String(te)}`),te}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=mn.getState().getConversationById(t),s=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(s)}catch{Ge.error(`Filesystem unavailable for key ${s}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let s=null;try{if(i.source==="direct")s=nD(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const o=await Bf(i.path,{fsInstance:a});s=nD({...i,contentBytes:o})}else if(i.source==="vfs"&&!a)continue;s&&n.push(s)}catch(o){console.error(`[ConversationService] Error processing file ${i.name}:`,o),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await ko.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}},uy=Ks(Zs((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),Ge.error(r)}},addDbMod:async n=>{const r=ji(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((s,o)=>s.loadOrder-o.loadOrder)});try{return await _t.saveMod(a),Ge.success(`Mod "${a.name}" added.`),r}catch(i){const s="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=s}),Ge.error(s),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(o=>{i=o.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...o.dbMods[i]},o.dbMods[i]={...o.dbMods[i],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const s=i!==-1?t().dbMods[i]:void 0;if(s)try{await _t.saveMod(s),Ge.success(`Mod "${s.name}" updated.`)}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(u=>{const d=u.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(u.dbMods[d]=a,u.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),u.error=l}),Ge.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(s=>s.id!==n)}));try{await _t.deleteMod(n),Ge.success(`Mod "${a}" deleted.`)}catch(i){const s="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder),o.error=s}),Ge.error(s),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function MP(e){const t=e.id,n=e.name,r=Ir.getState(),a=uy.getState();return{modId:t,modName:n,registerPromptControl:s=>r.registerPromptControl(s),registerChatControl:s=>{const o={...s,status:s.status??(()=>"ready")};return r.registerChatControl(o)},registerTool:(s,o,l)=>(console.log(`[${n}] Registering tool: ${s}`),r.registerTool(t,s,o,l)),on:(s,o)=>(Tt.on(s,o),()=>Tt.off(s,o)),addMiddleware:(s,o)=>r.registerMiddleware(s,t,o),registerSettingsTab:s=>(a._addSettingsTab(s),()=>a._removeSettingsTab(s.id)),getContextSnapshot:()=>{const s=Mn.getState(),o=mn.getState(),l=pr.getState(),u=Un.getState(),{providerId:d}=Ac(u.selectedModelId),h=o.selectedItemType==="conversation"?o.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(s.currentConversationId===h?s.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:s.status==="streaming",selectedProviderId:d,selectedModelId:u.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(s,o)=>{Ge[s](`[${n}] ${o}`)},log:(s,...o)=>{console[s](`[Mod: ${n}]`,...o)}}}async function M2e(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,s=null;try{if(i=MP(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const u=await fetch(r.sourceUrl);if(!u.ok)throw new Error(`Failed to fetch mod script: ${u.status} ${u.statusText}`);a=await u.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(u){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,u),u}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){s=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),Ge.error(`Error loading mod "${r.name}": ${s instanceof Error?s.message:s}`)}i||(i=MP(r));const o={id:r.id,name:r.name,api:i,error:s??void 0};return Tt.emit(o.error?Et.MOD_ERROR:Et.MOD_LOADED,{id:r.id,name:r.name,error:o.error}),o}));return Tt.emit(Et.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var O2e=(e,t,n,r,a,i,s,o)=>{let l=document.documentElement,u=["light","dark"];function d(g){(Array.isArray(e)?e:[e]).forEach(b=>{let v=b==="class",x=v&&i?a.map(w=>i[w]||w):a;v?(l.classList.remove(...x),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(b,g)}),h(g)}function h(g){o&&u.includes(g)&&(l.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(t)||n,b=s&&g==="system"?m():g;d(b)}catch{}},P2e=T.createContext(void 0),F2e={setTheme:e=>{},themes:[]},L2e=()=>{var e;return(e=T.useContext(P2e))!=null?e:F2e};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:s,themes:o,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,t,i,e,o,s,r,a]).slice(1,-1);return T.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${O2e.toString()})(${d})`}})});const B2e=({...e})=>{const{theme:t="system"}=L2e();return p.jsx(jX,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function fd({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:xt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const sV=T.memo(T.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...s},o)=>{const l=T.useRef(null),[u,d]=T.useState(e);T.useImperativeHandle(o,()=>({getValue:()=>u,focus:()=>{var g;return(g=l.current)==null?void 0:g.focus()},clearValue:()=>{d(""),i&&i(""),requestAnimationFrame(()=>{const g=l.current;g&&(g.style.height="auto",g.style.height=`${g.scrollHeight}px`,g.style.overflowY="hidden")})}}));const h=g=>{var b;if(g.key==="Enter"&&!g.shiftKey&&!n){g.preventDefault();const v=gc.getState().attachedFilesMetadata.length>0;(u.trim().length>0||v)&&(t(),(b=o==null?void 0:o.current)==null||b.clearValue())}},m=g=>{const b=g.target.value;d(b),i&&i(b),Tt.emit(Et.PROMPT_INPUT_CHANGE,{value:b})};return T.useEffect(()=>{const g=l.current;if(g){g.style.height="auto";const b=g.scrollHeight,v=250;g.style.height=`${Math.min(b,v)}px`,g.style.overflowY=b>v?"auto":"hidden"}},[u]),T.useEffect(()=>{e!==u&&(d(e),i&&i(e))},[e]),p.jsx(fd,{ref:l,value:u,onChange:m,onKeyDown:h,disabled:n,placeholder:r,rows:1,className:xt("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...s})}));sV.displayName="InputArea";const $2e=({controls:e=[]})=>{const[t,n]=T.useState(!0),[r,a]=T.useState(!1),i=T.useRef(null),s=mn(ne=>ne.selectedItemId),o=mn(ne=>ne.selectedItemType),l=mn(ne=>ne.loadSidebarItems),u=mn(ne=>ne.getConversationById),{getEffectiveProjectSettings:d}=fi(dn(ne=>({projects:ne.projects,getProjectById:ne.getProjectById,getEffectiveProjectSettings:ne.getEffectiveProjectSettings}))),{interactions:h,status:m}=Mn(dn(ne=>({interactions:ne.interactions,status:ne.status}))),{globalError:g,isSidebarCollapsed:b,isChatControlPanelOpen:v,isProjectSettingsModalOpen:x,isVfsModalOpen:w}=Ji(dn(ne=>({globalError:ne.globalError,isSidebarCollapsed:ne.isSidebarCollapsed,isChatControlPanelOpen:ne.isChatControlPanelOpen,isProjectSettingsModalOpen:ne.isProjectSettingsModalOpen,isVfsModalOpen:ne.isVfsModalOpen}))),_=Ir(dn(ne=>Object.values(ne.chatControls))),{loadDbMods:E,setLoadedMods:C}=uy(dn(ne=>({loadDbMods:ne.loadDbMods,setLoadedMods:ne.setLoadedMods}))),{loadInitialData:k}=Un(dn(ne=>({loadInitialData:ne.loadInitialData}))),{loadSettings:I}=pr(dn(ne=>({loadSettings:ne.loadSettings}))),{setVfsKey:j}=ko(dn(ne=>({setVfsKey:ne.setVfsKey}))),{initializePromptState:N}=Oi(dn(ne=>({initializePromptState:ne.initializePromptState}))),{loadRulesAndTags:P}=Tc(dn(ne=>({loadRulesAndTags:ne.loadRulesAndTags}))),L=T.useCallback(()=>{a(ne=>!ne)},[]);T.useEffect(()=>{r&&a(!1)},[s,o]);const H=T.useCallback(()=>{requestAnimationFrame(()=>{var ne;(ne=i.current)==null||ne.focus()})},[]);T.useEffect(()=>{let ne=!0;return(async()=>{var de;console.log("LiteChat: Starting initialization..."),n(!0);try{if(console.log("LiteChat: Loading core data..."),await I(),!ne||(console.log("LiteChat: Settings loaded."),await k(),!ne)||(console.log("LiteChat: Provider data loaded."),await P(),!ne)||(console.log("LiteChat: Rules and Tags loaded."),await l(),!ne)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),e.forEach(Pe=>{try{Pe()}catch(Qe){console.error("LiteChat: Error running registration function:",Qe)}}),console.log("LiteChat: Core controls and tools registered."),!ne)||(console.log("LiteChat: Loading mods..."),await E(),!ne))return;console.log("LiteChat: DB Mods loaded.");const Ie=uy.getState().dbMods;console.log(`LiteChat: Processing ${Ie.length} mods...`);const ke=await M2e(Ie);if(!ne)return;C(ke),console.log(`LiteChat: ${ke.length} mods processed.`);const Te=o==="project"?s:o==="conversation"?((de=u(s))==null?void 0:de.projectId)??null:null,Se=d(Te);N(Se),console.log("LiteChat: Initial prompt state initialized.",Se)}catch(Ie){console.error("LiteChat: Initialization failed:",Ie),Ge.error(`Initialization failed: ${Ie instanceof Error?Ie.message:String(Ie)}`),Ji.getState().setGlobalError("Initialization failed.")}finally{ne&&(console.log("LiteChat: Initialization complete."),n(!1))}})(),()=>{ne=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[e]);const M=T.useRef({itemId:null,itemType:null});T.useEffect(()=>{var he;if(t)return;const ne={itemId:s,itemType:o};if(ne.itemId!==M.current.itemId||ne.itemType!==M.current.itemType){const de=o==="project"?s:o==="conversation"?((he=u(s))==null?void 0:he.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${s}, Type: ${o}). Calculating effective settings for Project ID: ${de}`);const Ie=d(de);N(Ie),console.log("[LiteChat Effect] Prompt state updated based on context change.",Ie),M.current=ne,ne.itemType==="conversation"&&H()}},[s,o,u,d,N,t,H]),T.useEffect(()=>{let ne=null;if(w||o==="project"){if(o==="project")ne=s;else if(o==="conversation"){const he=mn.getState().getConversationById(s);ne=(he==null?void 0:he.projectId)??"orphan"}else ne="orphan";console.log(`[LiteChat Effect] VFS Context Required. Setting target key: ${ne}`)}else ne=null,console.log("[LiteChat Effect] VFS Context Not Required. Setting target key: null");ko.getState().vfsKey!==ne&&j(ne)},[w,s,o,j]);const K=T.useCallback(async ne=>{var ke;const he=mn.getState();let de=he.selectedItemType==="conversation"?he.selectedItemId:null;const Ie=he.selectedItemType==="project"?he.selectedItemId:he.selectedItemType==="conversation"?((ke=he.getConversationById(he.selectedItemId))==null?void 0:ke.projectId)??null:null;if(!de){console.log("LiteChat: No conversation selected, creating new one...");try{const Te=await he.addConversation({title:"New Chat",projectId:Ie});await he.selectItem(Te,"conversation"),de=mn.getState().selectedItemId,de!==Te&&console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),console.log(`LiteChat: New conversation created (${de}), selected.`)}catch(Te){console.error("LiteChat: Failed to create new conversation",Te),Ge.error("Failed to start new chat.");return}}console.log("LiteChat: Submitting turn data to ConversationService...");try{const Te=Oi.getState(),Se={...ne,metadata:{...ne.metadata,modelId:Te.modelId}};await DP.submitPrompt(Se),console.log("LiteChat: ConversationService processing initiated."),H()}catch(Te){console.error("LiteChat: Error submitting prompt:",Te),H()}},[H]),q=T.useCallback(async ne=>{console.log(`LiteChat: Regenerating interaction ${ne}`);try{await DP.regenerateInteraction(ne),console.log(`LiteChat: ConversationService regeneration initiated for ${ne}.`),H()}catch(he){console.error("LiteChat: Error regenerating interaction:",he),H()}},[H]),ue=T.useCallback(ne=>{console.log(`LiteChat: Stopping interaction ${ne}`),Vw.abortInteraction(ne),H()},[H]),ae=T.useMemo(()=>_.filter(ne=>(ne.panel??"main")==="sidebar"&&(ne.show?ne.show():!0)).map(ne=>ne),[_]),te=T.useMemo(()=>_.filter(ne=>ne.panel==="sidebar-footer"&&(ne.show?ne.show():!0)).map(ne=>ne),[_]),Y=T.useMemo(()=>_.filter(ne=>ne.panel==="header"&&(ne.show?ne.show():!0)).map(ne=>ne),[_]),ie=T.useMemo(()=>{var ne;return(ne=_.find(he=>he.id==="core-settings-trigger"))==null?void 0:ne.settingsRenderer},[_]),V=T.useMemo(()=>{var ne;return(ne=_.find(he=>he.id==="core-project-settings-trigger"))==null?void 0:ne.settingsRenderer},[_]),J=T.useMemo(()=>{var ne;return(ne=_.find(he=>he.id==="core-vfs-modal-panel"))==null?void 0:ne.renderer},[_]),Q=o==="conversation"?s:null;return t?p.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx(Pn,{className:"h-12 w-12 animate-spin text-primary"}),p.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[p.jsxs("div",{className:xt("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",b?"w-16":"w-64"),children:[p.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[p.jsx("div",{className:xt(b?"hidden":"block"),children:p.jsx($h,{controls:ae,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:xt(b?"block":"hidden"),children:p.jsx($h,{controls:ae,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),p.jsx("div",{className:xt("flex-shrink-0 border-t border-border p-2",b?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:p.jsx($h,{controls:te,panelId:"sidebar-footer",renderMode:b?"icon":"full",className:xt("flex",b?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&p.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex",children:[p.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm animate-fadeIn",onClick:L}),p.jsxs("div",{className:"relative w-4/5 max-w-xs bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[p.jsx("h2",{className:"font-semibold",children:"LiteChat Menu"}),p.jsx("button",{onClick:L,className:"p-1 rounded-md hover:bg-muted","aria-label":"Close menu",children:p.jsx(Ii,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:p.jsx($h,{controls:ae,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border p-4",children:p.jsx($h,{controls:te,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"})})]})]}),p.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[p.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-muted",onClick:L,"aria-label":"Open menu",children:p.jsx(VZ,{className:"h-5 w-5"})}),p.jsx($h,{controls:Y,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),p.jsx(Kxe,{conversationId:Q,interactions:h,onRegenerateInteraction:q,onStopInteraction:ue,status:m,className:"flex-grow overflow-y-hidden"}),g&&p.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",g]}),p.jsx(wde,{InputAreaRenderer:sV,onSubmit:K,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:i})]})]}),v.settingsModal&&ie&&ie(),x&&V&&V(),w&&J&&J(),p.jsx(B2e,{richColors:!0,position:"bottom-right",closeButton:!0})]})},z2e="prism-theme-link",U2e="prism-default-light-theme-link",V2e="prism-default-dark-theme-link",H2e="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",q2e="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css",tT=e=>{let t=document.getElementById(e);return t||(t=document.createElement("link"),t.id=e,t.rel="stylesheet",document.head.appendChild(t)),t},G2e=()=>{const{prismThemeUrl:e,theme:t}=pr(dn(a=>({prismThemeUrl:a.prismThemeUrl,theme:a.theme}))),n=T.useMemo(()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=T.useMemo(()=>{const a=t==="system"?n:t;return a==="dark"||a==="TijuDark"?"dark":"light"},[t,n]);return T.useEffect(()=>{if(typeof window>"u")return;const a=tT(U2e),i=tT(V2e),s=tT(z2e);return a.disabled=!0,i.disabled=!0,s.disabled=!0,a.href=H2e,i.href=q2e,e?(s.href=e,s.disabled=!1):(console.log(r),r==="dark"?i.disabled=!1:a.disabled=!1),()=>{}},[e,r]),null},nT=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),rT=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],W2e=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=pr(dn(a=>({theme:a.theme,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,customThemeColors:a.customThemeColors})));return T.useEffect(()=>{const a=document.body,i=document.documentElement;a.classList.remove("light","dark","TijuLight","TijuDark","custom"),rT.forEach(s=>{i.style.removeProperty(`--${nT(s)}`)}),i.style.removeProperty("--custom-font-family"),i.style.removeProperty("--custom-font-size"),e==="light"?a.classList.add("light"):e==="dark"?a.classList.add("dark"):e==="TijuLight"?a.classList.add("TijuLight"):e==="TijuDark"?a.classList.add("TijuDark"):e==="custom"?(a.classList.add("custom"),t?i.style.setProperty("--custom-font-family",t):i.style.removeProperty("--custom-font-family"),n?i.style.setProperty("--custom-font-size",`${n}px`):i.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([s,o])=>{if(o&&rT.includes(s)){const l=`--${nT(s)}`;i.style.setProperty(l,o)}else if(rT.includes(s)){const l=`--${nT(s)}`;i.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?a.classList.add("dark"):a.classList.add("light")},[e,t,n,r]),null},K2e=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1750 c-26 15 -48 65 -41 94
             15 61 181 167 304 196
             30 7 100 12 155 12
             81 -1 115 -6 178 -27
             135 -45 247 -133 249 -194
             2 -60 -48 -103 -104 -88
             -13 3 -50 25 -83 50
             -85 64 -172 90 -280 84
             -92 -6 -165 -35 -259 -103
             -49 -35 -86 -43 -119 -24z`})})]})},OP="0.1.0-dev",Z2e="https://github.com/DimitriGilbert/LiteChat",PP=({textToCopy:e,label:t,className:n})=>{const[r,a]=T.useState(!1),i=async()=>{try{await navigator.clipboard.writeText(e),a(!0),Ge.success(`${t} copied to clipboard!`),setTimeout(()=>a(!1),2e3)}catch(s){Ge.error(`Failed to copy ${t.toLowerCase()}.`),console.error(`Clipboard copy failed for ${t}:`,s)}};return p.jsxs(It,{variant:"outline",onClick:i,className:n,children:[r?p.jsx(Ri,{className:"mr-2 h-4 w-4 text-green-500"}):p.jsx(nZ,{className:"mr-2 h-4 w-4"}),r?"Copied!":`Copy ${t}`]})};class Y2e extends T.Component{constructor(){super(...arguments);Ta(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueUrl(){var a;const n=`${Z2e}/issues`,r=encodeURIComponent(`Crash Report: ${((a=this.state.error)==null?void 0:a.message.substring(0,50))??"Unknown Error"}`);return`${n}/new?title=${r}`}generateErrorReport(n=!1){const{error:r,errorInfo:a}=this.state,i=`
`,s=n?"```":"";let o=`## LiteChat Error Report${i}${i}`;return o+=`**Version:** ${OP}${i}`,o+=`**Timestamp:** ${new Date().toISOString()}${i}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${i}${i}`,r?o+=`**Error Message:**${i}${s}${i}${r.message}${i}${s}${i}${i}`:o+=`**Error Message:** Unknown Error${i}${i}`,a!=null&&a.componentStack&&(o+=`**Component Stack:**${i}${s}text${i}${a.componentStack.trim()}${i}${s}${i}${i}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${i}${s}text${i}${r.stack.trim()}${i}${s}${i}${i}`),o+=`**Steps to Reproduce (Please Describe):**${i}1. ...${i}2. ...${i}${i}`,o+=`**Expected Behavior:**${i}...${i}${i}`,o+=`**Actual Behavior:**${i}...${i}`,o}generateAIPrompt(){var i,s;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${OP}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((i=r==null?void 0:r.componentStack)==null?void 0:i.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((s=n==null?void 0:n.stack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:p.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[p.jsx(K2e,{className:"h-24 w-24 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),p.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue. Copy the details and paste them into the GitHub issue."}),p.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[p.jsx(It,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),p.jsx(PP,{textToCopy:this.generateErrorReport(),label:"Details"}),p.jsx(PP,{textToCopy:this.generateAIPrompt(),label:"AI Debug Prompt"}),p.jsx(It,{variant:"outline",asChild:!0,children:p.jsxs("a",{href:this.getGitHubIssueUrl(),target:"_blank",rel:"noopener noreferrer",children:[p.jsx(I8,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})})]})]})}):this.props.children}}const oV=(e,t)=>{if(!t)return null;let n=ju,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Pn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=cf,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=dA,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=rA,r="text-green-500",a=`Synced with ${t}`;break;default:n=ju,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(n,{className:xt("h-3 w-3 ml-1 flex-shrink-0",r)})}),p.jsx(Yn,{side:"right",children:a})]})})},s1=T.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:b,editingItemType:v,originalName:x,localEditingName:w,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:j})=>{const N=e.id===n,P=e.itemType==="project",L=e.id===b&&e.itemType===v,H=P&&d.has(e.id),{projects:M,conversations:K}=P?m(e.id,g):{projects:[],conversations:[]},q=M.length>0||K.length>0,ue=!P&&e.syncRepoId?r[e.id]:void 0,ae=!P&&e.syncRepoId?a.get(e.syncRepoId):void 0,te=!P&&ae?oV(ue,ae):null,Y=Ji(ke=>ke.openProjectSettingsModal),ie=()=>{L||(P&&q&&h(e.id),i(e.id,e.itemType))},V=ke=>{ke.stopPropagation(),P?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,ke):s(e.id,ke)},J=ke=>{ke.stopPropagation(),E(e)},Q=ke=>{ke.stopPropagation(),P&&Y(e.id)},ne=ke=>{ke.key==="Enter"?(ke.preventDefault(),C()):ke.key==="Escape"&&k()},he=P?e.name:e.title,de=I?Pn:Ri,Ie=I?"h-3 w-3 animate-spin":"h-3 w-3";return p.jsxs(p.Fragment,{children:[p.jsxs("li",{className:xt("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!L&&"hover:bg-muted/50 hover:text-primary/80",N&&!L?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",L&&"bg-muted ring-1 ring-primary",!L&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ie,title:L?"":he,children:[p.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[P&&q&&p.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:ke=>{ke.stopPropagation(),h(e.id)},children:H?p.jsx(wl,{className:"h-3 w-3 text-muted-foreground"}):p.jsx(N8,{className:"h-3 w-3 text-muted-foreground"})}),P&&!q&&p.jsx("span",{className:"w-3 flex-shrink-0"}),P?p.jsx(uf,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):p.jsx(bT,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),L?p.jsx(Rn,{ref:j,value:w,onChange:ke=>_(ke.target.value),onKeyDown:ne,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:ke=>ke.stopPropagation(),disabled:I}):p.jsx("span",{className:"truncate flex-shrink min-w-0",children:he}),te]}),p.jsx("div",{className:xt("flex items-center flex-shrink-0 ml-1","opacity-0 group-hover:opacity-100 transition-opacity duration-150",L?"opacity-100":""),onClick:ke=>ke.stopPropagation(),children:L?p.jsxs(p.Fragment,{children:[p.jsx(Dn,{tooltipText:"Save (Enter)",onClick:ke=>{ke.stopPropagation(),C()},disabled:I||!w.trim(),"aria-label":"Save changes",icon:p.jsx(de,{}),iconClassName:Ie,className:"h-5 w-5 text-green-500 hover:text-green-600"}),p.jsx(Dn,{tooltipText:"Cancel (Esc)",onClick:ke=>{ke.stopPropagation(),k()},disabled:I,"aria-label":"Cancel edit",icon:p.jsx(Ii,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[P&&p.jsx(Dn,{tooltipText:"Project Settings",onClick:Q,"aria-label":`Settings for ${he}`,icon:p.jsx(JK,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),p.jsx(Dn,{tooltipText:"Edit",onClick:J,"aria-label":`Edit ${he}`,icon:p.jsx(by,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),P?p.jsx(Dn,{tooltipText:"Export Project (JSON)",onClick:ke=>u(e.id,ke),"aria-label":`Export project ${he}`,icon:p.jsx(hZ,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):p.jsxs("div",{className:"relative group/export",children:[p.jsx(Dn,{tooltipText:"Export Conversation","aria-label":`Export ${he}`,icon:p.jsx(af,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),p.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:ke=>ke.stopPropagation(),children:[p.jsx(It,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ke=>l(e.id,"json",ke),children:"JSON"}),p.jsx(It,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ke=>l(e.id,"md",ke),children:"MD"})]})]}),p.jsx(Dn,{tooltipText:"Delete",onClick:V,"aria-label":`Delete ${he}`,icon:p.jsx(Zi,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),P&&H&&p.jsxs(p.Fragment,{children:[M.sort((ke,Te)=>Te.updatedAt.getTime()-ke.updatedAt.getTime()).map(ke=>p.jsx(s1,{item:{...ke,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:b,editingItemType:v,originalName:x,localEditingName:w,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:j},ke.id)),K.sort((ke,Te)=>Te.updatedAt.getTime()-ke.updatedAt.getTime()).map(ke=>p.jsx(s1,{item:{...ke,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:b,editingItemType:v,originalName:x,localEditingName:w,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:j},ke.id))]})]})});s1.displayName="ConversationItemRenderer";function X2e({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(""),[u,d]=T.useState(""),[h,m]=T.useState(!1),g=T.useRef(null),b=T.useCallback(w=>{a(w.id),s(w.itemType);const _=w.itemType==="project"?w.name:w.title;l(_),d(_),m(!1)},[]),v=T.useCallback(w=>{const _=r,E=w??(i==="project"&&o==="New Project");a(null),s(null),l(""),d(""),m(!1),E&&_&&(console.log(`Cancelling edit for new project ${_}, deleting...`),n(_).catch(C=>{console.error("Failed to delete new project on cancel:",C),Ge.error("Failed to clean up cancelled new project.")}))},[r,i,o,n]),x=T.useCallback(async()=>{var E;if(!r||!i||h)return;const w=u.trim(),_=i==="project"&&o==="New Project";if(!w){Ge.error("Name cannot be empty."),(E=g.current)==null||E.focus();return}if(w===o&&!_){v();return}m(!0);try{i==="project"?await e(r,{name:w}):await t(r,{title:w}),Ge.success("Item renamed successfully."),a(null),s(null),l(""),d("")}catch(C){console.error("Failed to save item name:",C),Ge.error(`Failed to rename item: ${C instanceof Error?C.message:String(C)}`)}finally{m(!1)}},[r,i,u,o,h,e,t,v]);return T.useEffect(()=>{r&&g.current&&(g.current.focus(),g.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:o,localEditingName:u,setLocalEditingName:d,isSavingEdit:h,editInputRef:g,handleStartEditing:b,handleSaveEdit:x,handleCancelEdit:v}}const zk=(e,t,n,r,a,i,s,o,l)=>{if(!n)return!0;const u=`${t}-${e}`;if(l[u]!==void 0)return l[u];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const m=o.get(e)||[],g=s.get(e)||[];for(const b of g)if(b.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const b of m)if(zk(b.id,"project",n,r,a,i,s,o,l)){d=!0;break}}}}return l[u]=d,d},J2e=()=>{const e=mn(z=>z.selectedItemId),t=mn(z=>z.selectedItemType),n=mn(z=>z.isLoading),r=fi(z=>z.isLoading),{conversations:a,syncRepos:i,conversationSyncStatus:s}=mn(dn(z=>({conversations:z.conversations,syncRepos:z.syncRepos,conversationSyncStatus:z.conversationSyncStatus}))),o=fi(z=>z.projects),l=mn(z=>z.selectItem),u=mn(z=>z.addConversation),d=mn(z=>z.updateConversation),h=mn(z=>z.deleteConversation),m=mn(z=>z.exportConversation),g=mn(z=>z.exportProject),b=mn(z=>z.getConversationById),v=fi(z=>z.addProject),x=fi(z=>z.updateProject),w=fi(z=>z.deleteProject),_=fi(z=>z.getProjectById),[E,C]=gt.useState(new Set),[k,I]=T.useState(""),j=n||r,N=X2e({updateProject:x,updateConversation:d,deleteProject:w,getProjectById:_,getConversationById:b}),{editingItemId:P,editingItemType:L,originalName:H,localEditingName:M,setLocalEditingName:K,isSavingEdit:q,editInputRef:ue,handleStartEditing:ae,handleSaveEdit:te,handleCancelEdit:Y}=N,ie=T.useCallback(z=>{C(Ee=>{const Ne=new Set(Ee);return Ne.has(z)?Ne.delete(z):Ne.add(z),Ne})},[]),V=T.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const z=b(e);return(z==null?void 0:z.projectId)??null}return null},[e,t,b]),J=T.useCallback(async()=>{if(!P)try{const z=V(),Ee=await u({title:"New Chat",projectId:z});l(Ee,"conversation")}catch(z){console.error("Failed to create new chat:",z),Ge.error("Failed to create new chat.")}},[P,V,u,l]),Q=T.useCallback(async()=>{if(!P)try{const z=V(),Ee=await v({name:"New Project",parentId:z});l(Ee,"project"),z&&C(Ne=>new Set(Ne).add(z)),setTimeout(()=>{const Ne=_(Ee);Ne?ae({...Ne,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch(z){console.error("Failed to create new project:",z)}},[P,V,v,l,_,ae]),ne=T.useCallback((z,Ee)=>{z!==P&&(P&&z!==P&&(M.trim()&&M.trim()!==H?te():Y()),(z!==e||Ee!==t)&&l(z,Ee))},[P,M,H,e,t,te,Y,l]),he=T.useCallback((z,Ee)=>{Ee.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&h(z).catch(Ne=>{console.error("Failed to delete conversation:",Ne),Ge.error("Failed to delete conversation.")})},[h]),de=T.useCallback((z,Ee)=>{Ee.stopPropagation(),w(z).catch(Ne=>{console.error("Failed to delete project:",Ne),Ge.error("Failed to delete project.")})},[w]),Ie=T.useCallback(async(z,Ee,Ne)=>{Ne.stopPropagation();try{await m(z,Ee)}catch(fe){console.error(`Failed to export conversation as ${Ee}:`,fe)}},[m]),ke=T.useCallback(async(z,Ee)=>{Ee.stopPropagation();try{await g(z)}catch(Ne){console.error("Failed to export project:",Ne)}},[g]),Te=T.useMemo(()=>new Map((i||[]).map(z=>[z.id,z.name])),[i]),{projectsById:Se,conversationsByProjectId:Pe,projectsByParentId:Qe}=T.useMemo(()=>{const z=new Map(o.map(fe=>[fe.id,fe])),Ee=new Map;a.forEach(fe=>{const se=fe.projectId??null;Ee.has(se)||Ee.set(se,[]),Ee.get(se).push(fe)});const Ne=new Map;return o.forEach(fe=>{const se=fe.parentId??null;Ne.has(se)||Ne.set(se,[]),Ne.get(se).push(fe)}),{projectsById:z,conversationsByProjectId:Ee,projectsByParentId:Ne}},[o,a]),Le=T.useCallback((z,Ee)=>{const Ne=Ee.toLowerCase(),fe={},se=(Qe.get(z)||[]).filter(xe=>zk(xe.id,"project",Ne,o,a,Se,Pe,Qe,fe)),ee=(Pe.get(z)||[]).filter(xe=>xe.title.toLowerCase().includes(Ne));return se.sort((xe,Fe)=>Fe.updatedAt.getTime()-xe.updatedAt.getTime()),ee.sort((xe,Fe)=>Fe.updatedAt.getTime()-xe.updatedAt.getTime()),{projects:se,conversations:ee}},[o,a,Se,Pe,Qe]),je=T.useMemo(()=>{const z=k.toLowerCase(),Ee={},Ne=(Qe.get(null)||[]).filter(ee=>zk(ee.id,"project",z,o,a,Se,Pe,Qe,Ee)),fe=(Pe.get(null)||[]).filter(ee=>ee.title.toLowerCase().includes(z)),se=[...Ne.map(ee=>({...ee,itemType:"project"})),...fe.map(ee=>({...ee,itemType:"conversation"}))];return se.sort((ee,xe)=>xe.updatedAt.getTime()-ee.updatedAt.getTime()),se},[o,a,k,Se,Pe,Qe]);return p.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[p.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{size:"sm",variant:"ghost",onClick:Q,"aria-label":"New Project",disabled:j||!!P,className:"h-7 w-7 p-0",children:p.jsx(iA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"bottom",children:"New Project"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{size:"sm",variant:"ghost",onClick:J,"aria-label":"New Chat",disabled:j||!!P,className:"h-7 w-7 p-0",children:p.jsx(Sf,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"bottom",children:"New Chat"})]})})]})]}),p.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[p.jsx(wo,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter...",value:k,onChange:z=>I(z.target.value),className:"h-8 text-xs pl-8",disabled:j})]}),p.jsx("div",{className:"flex-grow",children:j?p.jsxs("div",{className:"space-y-1 p-1",children:[p.jsx(lr,{className:"h-8 w-full"}),p.jsx(lr,{className:"h-8 w-full"}),p.jsx(lr,{className:"h-8 w-full"})]}):je.length===0?p.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):p.jsx("ul",{className:"space-y-0.5 p-1",children:je.map(z=>p.jsx(s1,{item:z,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:Te,onSelectItem:ne,onDeleteConversation:he,onDeleteProject:de,onExportConversation:Ie,onExportProject:ke,expandedProjects:E,toggleProjectExpansion:ie,getChildren:Le,filterText:k,editingItemId:P,editingItemType:L,originalName:H,localEditingName:M,setLocalEditingName:K,handleStartEditing:ae,handleSaveEdit:te,handleCancelEdit:Y,isSavingEdit:q,editInputRef:ue},z.id))})})]})},Q2e=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=mn(dn(l=>({addConversation:l.addConversation,selectItem:l.selectItem,selectedItemId:l.selectedItemId,selectedItemType:l.selectedItemType,getConversationById:l.getConversationById}))),{addProject:a}=fi(dn(l=>({addProject:l.addProject,getProjectById:l.getProjectById}))),i=()=>{if(r==="project")return n;if(r==="conversation"&&n){const l=mn.getState().getConversationById(n);return(l==null?void 0:l.projectId)??null}return null},s=async()=>{try{const l=i(),u=await e({title:"New Chat",projectId:l});t(u,"conversation")}catch(l){console.error("Failed to create new chat:",l)}},o=async()=>{try{const l=i(),u=await a({name:"New Project",parentId:l});t(u,"project")}catch(l){console.error("Failed to create new project:",l)}};return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8","aria-label":"New Project",children:p.jsx(iA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"right",children:"New Project"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:p.jsx(Sf,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"right",children:"New Chat"})]})})]})};function eEe(){const e=Ir.getState().registerChatControl,t=mn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>gt.createElement(J2e),iconRenderer:()=>gt.createElement(Q2e),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var j_="Dialog",[lV,M3e]=vi(j_),[tEe,jo]=lV(j_),cV=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=T.useRef(null),l=T.useRef(null),[u,d]=Eo({prop:r,defaultProp:a??!1,onChange:i,caller:j_});return p.jsx(tEe,{scope:t,triggerRef:o,contentRef:l,contentId:Ha(),titleId:Ha(),descriptionId:Ha(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:s,children:n})};cV.displayName=j_;var uV="DialogTrigger",nEe=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=jo(uV,n),i=kn(t,a.triggerRef);return p.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":FR(a.open),...r,ref:i,onClick:qt(e.onClick,a.onOpenToggle)})});nEe.displayName=uV;var OR="DialogPortal",[rEe,dV]=lV(OR,{forceMount:void 0}),fV=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=jo(OR,t);return p.jsx(rEe,{scope:t,forceMount:n,children:T.Children.map(r,s=>p.jsx(Ka,{present:n||i.open,children:p.jsx(Up,{asChild:!0,container:a,children:s})}))})};fV.displayName=OR;var o1="DialogOverlay",hV=T.forwardRef((e,t)=>{const n=dV(o1,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=jo(o1,e.__scopeDialog);return i.modal?p.jsx(Ka,{present:r||i.open,children:p.jsx(iEe,{...a,ref:t})}):null});hV.displayName=o1;var aEe=Iu("DialogOverlay.RemoveScroll"),iEe=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=jo(o1,n);return p.jsx(sb,{as:aEe,allowPinchZoom:!0,shards:[a.contentRef],children:p.jsx(an.div,{"data-state":FR(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),xf="DialogContent",pV=T.forwardRef((e,t)=>{const n=dV(xf,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=jo(xf,e.__scopeDialog);return p.jsx(Ka,{present:r||i.open,children:i.modal?p.jsx(sEe,{...a,ref:t}):p.jsx(oEe,{...a,ref:t})})});pV.displayName=xf;var sEe=T.forwardRef((e,t)=>{const n=jo(xf,e.__scopeDialog),r=T.useRef(null),a=kn(t,n.contentRef,r);return T.useEffect(()=>{const i=r.current;if(i)return __(i)},[]),p.jsx(mV,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&i.preventDefault()}),onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault())})}),oEe=T.forwardRef((e,t)=>{const n=jo(xf,e.__scopeDialog),r=T.useRef(!1),a=T.useRef(!1);return p.jsx(mV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),mV=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=jo(xf,n),l=T.useRef(null),u=kn(t,l);return w_(),p.jsxs(p.Fragment,{children:[p.jsx(ib,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(Bp,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":FR(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(lEe,{titleId:o.titleId}),p.jsx(uEe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),PR="DialogTitle",gV=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=jo(PR,n);return p.jsx(an.h2,{id:a.titleId,...r,ref:t})});gV.displayName=PR;var yV="DialogDescription",bV=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=jo(yV,n);return p.jsx(an.p,{id:a.descriptionId,...r,ref:t})});bV.displayName=yV;var vV="DialogClose",wV=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=jo(vV,n);return p.jsx(an.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});wV.displayName=vV;function FR(e){return e?"open":"closed"}var xV="DialogTitleWarning",[O3e,_V]=dne(xV,{contentName:xf,titleName:PR,docsSlug:"dialog"}),lEe=({titleId:e})=>{const t=_V(xV),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},cEe="DialogDescriptionWarning",uEe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_V(cEe).contentName}}.`;return T.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},SV=cV,EV=fV,CV=hV,TV=pV,dEe=gV,fEe=bV,kV=wV;function D_({...e}){return p.jsx(SV,{"data-slot":"dialog",...e})}function hEe({...e}){return p.jsx(EV,{"data-slot":"dialog-portal",...e})}function pEe({...e}){return p.jsx(kV,{"data-slot":"dialog-close",...e})}function mEe({className:e,...t}){return p.jsx(CV,{"data-slot":"dialog-overlay",className:xt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function M_({className:e,children:t,...n}){return p.jsxs(hEe,{"data-slot":"dialog-portal",children:[p.jsx(mEe,{}),p.jsxs(TV,{"data-slot":"dialog-content",className:xt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,p.jsxs(kV,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(Ii,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function O_({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-header",className:xt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function P_({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-footer",className:xt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function F_({className:e,...t}){return p.jsx(dEe,{"data-slot":"dialog-title",className:xt("text-lg leading-none font-semibold",e),...t})}function L_({className:e,...t}){return p.jsx(fEe,{"data-slot":"dialog-description",className:xt("text-muted-foreground text-sm",e),...t})}var AV=["PageUp","PageDown"],NV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],RV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},cm="Slider",[Uk,gEe,yEe]=v_(cm),[IV,P3e]=vi(cm,[yEe]),[bEe,B_]=IV(cm),jV=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:b,...v}=e,x=T.useRef(new Set),w=T.useRef(0),E=s==="horizontal"?vEe:wEe,[C=[],k]=Eo({prop:d,defaultProp:u,onChange:H=>{var K;(K=[...x.current][w.current])==null||K.focus(),h(H)}}),I=T.useRef(C);function j(H){const M=CEe(C,H);L(H,M)}function N(H){L(H,w.current)}function P(){const H=I.current[w.current];C[w.current]!==H&&m(C)}function L(H,M,{commit:K}={commit:!1}){const q=NEe(i),ue=REe(Math.round((H-r)/i)*i+r,q),ae=G0(ue,[r,a]);k((te=[])=>{const Y=SEe(te,ae,M);if(AEe(Y,l*i)){w.current=Y.indexOf(ae);const ie=String(Y)!==String(te);return ie&&K&&m(Y),ie?Y:te}else return te})}return p.jsx(bEe,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:a,valueIndexToChangeRef:w,thumbs:x.current,values:C,orientation:s,form:b,children:p.jsx(Uk.Provider,{scope:e.__scopeSlider,children:p.jsx(Uk.Slot,{scope:e.__scopeSlider,children:p.jsx(E,{"aria-disabled":o,"data-disabled":o?"":void 0,...v,ref:t,onPointerDown:qt(v.onPointerDown,()=>{o||(I.current=C)}),min:r,max:a,inverted:g,onSlideStart:o?void 0:j,onSlideMove:o?void 0:N,onSlideEnd:o?void 0:P,onHomeKeyDown:()=>!o&&L(r,0,{commit:!0}),onEndKeyDown:()=>!o&&L(a,C.length-1,{commit:!0}),onStepKeyDown:({event:H,direction:M})=>{if(!o){const ue=AV.includes(H.key)||H.shiftKey&&NV.includes(H.key)?10:1,ae=w.current,te=C[ae],Y=i*ue*M;L(te+Y,ae,{commit:!0})}}})})})})});jV.displayName=cm;var[DV,MV]=IV(cm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),vEe=T.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=e,[h,m]=T.useState(null),g=kn(t,E=>m(E)),b=T.useRef(void 0),v=am(a),x=v==="ltr",w=x&&!i||!x&&i;function _(E){const C=b.current||h.getBoundingClientRect(),k=[0,C.width],j=LR(k,w?[n,r]:[r,n]);return b.current=C,j(E-C.left)}return p.jsx(DV,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:p.jsx(OV,{dir:v,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=_(E.clientX);s==null||s(C)},onSlideMove:E=>{const C=_(E.clientX);o==null||o(C)},onSlideEnd:()=>{b.current=void 0,l==null||l()},onStepKeyDown:E=>{const k=RV[w?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:k?-1:1})}})})}),wEe=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...u}=e,d=T.useRef(null),h=kn(t,d),m=T.useRef(void 0),g=!a;function b(v){const x=m.current||d.current.getBoundingClientRect(),w=[0,x.height],E=LR(w,g?[r,n]:[n,r]);return m.current=x,E(v-x.top)}return p.jsx(DV,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:p.jsx(OV,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const x=b(v.clientY);i==null||i(x)},onSlideMove:v=>{const x=b(v.clientY);s==null||s(x)},onSlideEnd:()=>{m.current=void 0,o==null||o()},onStepKeyDown:v=>{const w=RV[g?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:w?-1:1})}})})}),OV=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...u}=e,d=B_(cm,n);return p.jsx(an.span,{...u,ref:t,onKeyDown:qt(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):AV.concat(NV).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:qt(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:qt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:qt(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),PV="SliderTrack",FV=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=B_(PV,n);return p.jsx(an.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});FV.displayName=PV;var Vk="SliderRange",LV=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=B_(Vk,n),i=MV(Vk,n),s=T.useRef(null),o=kn(t,s),l=a.values.length,u=a.values.map(m=>zV(m,a.min,a.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return p.jsx(an.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});LV.displayName=Vk;var Hk="SliderThumb",BV=T.forwardRef((e,t)=>{const n=gEe(e.__scopeSlider),[r,a]=T.useState(null),i=kn(t,o=>a(o)),s=T.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(xEe,{...e,ref:i,index:s})}),xEe=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,s=B_(Hk,n),o=MV(Hk,n),[l,u]=T.useState(null),d=kn(t,_=>u(_)),h=l?s.form||!!l.closest("form"):!0,m=I1(l),g=s.values[r],b=g===void 0?0:zV(g,s.min,s.max),v=EEe(r,s.values.length),x=m==null?void 0:m[o.size],w=x?TEe(x,b,o.direction):0;return T.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${b}% + ${w}px)`},children:[p.jsx(Uk.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(an.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":s.min,"aria-valuenow":g,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:e.style,onFocus:qt(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&p.jsx($V,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:g},r)]})});BV.displayName=Hk;var _Ee="RadioBubbleInput",$V=T.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=T.useRef(null),i=kn(a,r),s=x_(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(an.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});$V.displayName=_Ee;function SEe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function zV(e,t,n){const i=100/(n-t)*(e-t);return G0(i,[0,100])}function EEe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function CEe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function TEe(e,t,n){const r=e/2,i=LR([0,50],[0,r]);return(r-i(t)*n)*n}function kEe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function AEe(e,t){if(t>0){const n=kEe(e);return Math.min(...n)>=t}return!0}function LR(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function NEe(e){return(String(e).split(".")[1]||"").length}function REe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var IEe=jV,jEe=FV,DEe=LV,MEe=BV;function cl({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const s=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return p.jsxs(IEe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:xt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[p.jsx(jEe,{"data-slot":"slider-track",className:xt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(DEe,{"data-slot":"slider-range",className:xt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>p.jsx(MEe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var OEe="Separator",FP="horizontal",PEe=["horizontal","vertical"],UV=T.forwardRef((e,t)=>{const{decorative:n,orientation:r=FP,...a}=e,i=FEe(r)?r:FP,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(an.div,{"data-orientation":i,...o,...a,ref:t})});UV.displayName=OEe;function FEe(e){return PEe.includes(e)}var LEe=UV;function mo({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return p.jsx(LEe,{"data-slot":"separator-root",decorative:n,orientation:t,className:xt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const BEe=()=>{const{enableStreamingMarkdown:e,setEnableStreamingMarkdown:t,enableStreamingCodeBlockParsing:n,setEnableStreamingCodeBlockParsing:r,foldStreamingCodeBlocks:a,setFoldStreamingCodeBlocks:i,foldUserMessagesOnCompletion:s,setFoldUserMessagesOnCompletion:o,streamingRenderFPS:l,setStreamingRenderFPS:u,resetGeneralSettings:d}=pr(dn(w=>({theme:w.theme,setTheme:w.setTheme,enableStreamingMarkdown:w.enableStreamingMarkdown,setEnableStreamingMarkdown:w.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:w.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:w.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:w.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:w.setFoldStreamingCodeBlocks,foldUserMessagesOnCompletion:w.foldUserMessagesOnCompletion,setFoldUserMessagesOnCompletion:w.setFoldUserMessagesOnCompletion,streamingRenderFPS:w.streamingRenderFPS,setStreamingRenderFPS:w.setStreamingRenderFPS,prismThemeUrl:w.prismThemeUrl,setPrismThemeUrl:w.setPrismThemeUrl,resetGeneralSettings:w.resetGeneralSettings}))),[h,m]=T.useState(l),g=T.useCallback(w=>{m(w[0])},[]),b=T.useCallback(w=>{u(w[0])},[u]),v=T.useCallback(w=>{const _=w.target.value,E=_===""?15:parseInt(_.replace(/[^0-9]/g,""),10);if(!isNaN(E)){const C=Math.max(3,Math.min(60,E));u(C),m(C)}},[u]);T.useEffect(()=>{m(l)},[l]);const x=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&d()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),p.jsx(Hs,{id:"streaming-markdown-switch",checked:e??!0,onCheckedChange:t})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),p.jsx(Hs,{id:"streaming-codeblock-switch",checked:n??!1,onCheckedChange:r})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),p.jsx(Hs,{id:"fold-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"fold-user-message-switch",className:"font-medium",children:"Fold User Messages After Response"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse the user's prompt message once the assistant finishes responding."})]}),p.jsx(Hs,{id:"fold-user-message-switch",checked:s??!1,onCheckedChange:o})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsxs("div",{children:[p.jsxs(Zt,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",h," FPS)"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(cl,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[h],onValueChange:g,onValueCommit:b,className:"flex-grow"}),p.jsx(Rn,{type:"number",min:3,max:60,step:1,value:h,onChange:v,className:"w-20 h-8 text-xs"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),p.jsx(mo,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(It,{variant:"outline",size:"sm",onClick:x,children:[p.jsx(uA,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},$Ee=gt.memo(BEe),VV=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:m=.7,defaultTopP:g=null,defaultMaxTokens:b=null,defaultTopK:v=null,defaultPresencePenalty:x=0,defaultFrequencyPenalty:w=0,className:_})=>{const{selectedModelId:E,dbProviderConfigs:C,dbApiKeys:k}=Un(dn(V=>({selectedModelId:V.selectedModelId,dbProviderConfigs:V.dbProviderConfigs,dbApiKeys:V.dbApiKeys}))),I=T.useMemo(()=>{if(!E)return;const{providerId:V,modelId:J}=Ac(E);if(!V||!J)return;const Q=C.find(he=>he.id===V);if(!Q)return;const ne=k.find(he=>he.id===Q.apiKeyId);return xA(Q,J,ne==null?void 0:ne.value)},[E,C,k]),j=T.useMemo(()=>{var V;return new Set(((V=I==null?void 0:I.metadata)==null?void 0:V.supported_parameters)??[])},[I]),[N,P]=T.useState(e??m),[L,H]=T.useState(n??g??1),[M,K]=T.useState(l??x??0),[q,ue]=T.useState(d??w??0);T.useEffect(()=>{P(e??m)},[e,m]),T.useEffect(()=>{H(n??g??1)},[n,g]),T.useEffect(()=>{K(l??x??0)},[l,x]),T.useEffect(()=>{ue(d??w??0)},[d,w]);const ae=T.useCallback((V,J)=>{const Q=J.target.value,ne=Q===""?null:parseInt(Q,10);(Q===""||!isNaN(ne)&&ne!==null)&&V(ne)},[]),te=T.useCallback((V,J)=>{V(J[0])},[]),Y=T.useCallback(V=>{V(null)},[]),ie=m!==void 0||g!==void 0||b!==void 0||v!==void 0||x!==void 0||w!==void 0;return p.jsxs("div",{className:xt("space-y-4 p-4",_),children:[j.has("temperature")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",N.toFixed(2),")"]}),p.jsx(cl,{id:"param-temperature",min:0,max:1,step:.01,value:[N],onValueChange:V=>P(V[0]),onValueCommit:V=>te(t,V)}),ie&&p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Y(t),disabled:e===null,children:["Use Default (",(m==null?void 0:m.toFixed(2))??"N/A",")"]})]}),j.has("top_p")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(L??0).toFixed(2),")"]}),p.jsx(cl,{id:"param-top-p",min:0,max:1,step:.01,value:[L??1],onValueChange:V=>H(V[0]),onValueCommit:V=>te(r,V)}),ie&&p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Y(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[j.has("max_tokens")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(Rn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${b??"None"}`,value:a??"",onChange:V=>ae(i,V),min:"1",className:"h-8 text-xs"}),ie&&p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Y(i),disabled:a===null,children:"Use Default"})]}),j.has("top_k")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),p.jsx(Rn,{id:"param-top-k",type:"number",placeholder:`Default: ${v??"None"}`,value:s??"",onChange:V=>ae(o,V),min:"1",className:"h-8 text-xs"}),ie&&p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Y(o),disabled:s===null,children:"Use Default"})]})]}),j.has("presence_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(M??0).toFixed(2),")"]}),p.jsx(cl,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[M??0],onValueChange:V=>K(V[0]),onValueCommit:V=>te(u,V)}),ie&&p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Y(u),disabled:l===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]}),j.has("frequency_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(q??0).toFixed(2),")"]}),p.jsx(cl,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[q??0],onValueChange:V=>ue(V[0]),onValueCommit:V=>te(h,V)}),ie&&p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Y(h),disabled:d===null,children:["Use Default (",(w==null?void 0:w.toFixed(2))??"N/A",")"]})]})]})};var LP=1,zEe=.9,UEe=.8,VEe=.17,aT=.1,iT=.999,HEe=.9999,qEe=.99,GEe=/[\\\/_+.#"@\[\(\{&]/,WEe=/[\\\/_+.#"@\[\(\{&]/g,KEe=/[\s-]/,HV=/[\s-]/g;function qk(e,t,n,r,a,i,s){if(i===t.length)return a===e.length?LP:qEe;var o=`${a},${i}`;if(s[o]!==void 0)return s[o];for(var l=r.charAt(i),u=n.indexOf(l,a),d=0,h,m,g,b;u>=0;)h=qk(e,t,n,r,u+1,i+1,s),h>d&&(u===a?h*=LP:GEe.test(e.charAt(u-1))?(h*=UEe,g=e.slice(a,u-1).match(WEe),g&&a>0&&(h*=Math.pow(iT,g.length))):KEe.test(e.charAt(u-1))?(h*=zEe,b=e.slice(a,u-1).match(HV),b&&a>0&&(h*=Math.pow(iT,b.length))):(h*=VEe,a>0&&(h*=Math.pow(iT,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=HEe)),(h<aT&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(m=qk(e,t,n,r,u+1,i+2,s),m*aT>h&&(h=m*aT)),h>d&&(d=h),u=n.indexOf(l,u+1);return s[o]=d,d}function BP(e){return e.toLowerCase().replace(HV," ")}function ZEe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,qk(e,t,BP(e),BP(t),0,0,{})}var Ig='[cmdk-group=""]',sT='[cmdk-group-items=""]',YEe='[cmdk-group-heading=""]',qV='[cmdk-item=""]',$P=`${qV}:not([aria-disabled="true"])`,Gk="cmdk-item-select",Uh="data-value",XEe=(e,t,n)=>ZEe(e,t,n),GV=T.createContext(void 0),lb=()=>T.useContext(GV),WV=T.createContext(void 0),BR=()=>T.useContext(WV),KV=T.createContext(void 0),ZV=T.forwardRef((e,t)=>{let n=Vh(()=>{var Q,ne;return{search:"",value:(ne=(Q=e.value)!=null?Q:e.defaultValue)!=null?ne:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Vh(()=>new Set),a=Vh(()=>new Map),i=Vh(()=>new Map),s=Vh(()=>new Set),o=YV(e),{label:l,children:u,value:d,onValueChange:h,filter:m,shouldFilter:g,loop:b,disablePointerSelection:v=!1,vimBindings:x=!0,...w}=e,_=Ha(),E=Ha(),C=Ha(),k=T.useRef(null),I=lCe();_f(()=>{if(d!==void 0){let Q=d.trim();n.current.value=Q,j.emit()}},[d]),_f(()=>{I(6,K)},[]);let j=T.useMemo(()=>({subscribe:Q=>(s.current.add(Q),()=>s.current.delete(Q)),snapshot:()=>n.current,setState:(Q,ne,he)=>{var de,Ie,ke,Te;if(!Object.is(n.current[Q],ne)){if(n.current[Q]=ne,Q==="search")M(),L(),I(1,H);else if(Q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Se=document.getElementById(C);Se?Se.focus():(de=document.getElementById(_))==null||de.focus()}if(I(7,()=>{var Se;n.current.selectedItemId=(Se=q())==null?void 0:Se.id,j.emit()}),he||I(5,K),((Ie=o.current)==null?void 0:Ie.value)!==void 0){let Se=ne??"";(Te=(ke=o.current).onValueChange)==null||Te.call(ke,Se);return}}j.emit()}},emit:()=>{s.current.forEach(Q=>Q())}}),[]),N=T.useMemo(()=>({value:(Q,ne,he)=>{var de;ne!==((de=i.current.get(Q))==null?void 0:de.value)&&(i.current.set(Q,{value:ne,keywords:he}),n.current.filtered.items.set(Q,P(ne,he)),I(2,()=>{L(),j.emit()}))},item:(Q,ne)=>(r.current.add(Q),ne&&(a.current.has(ne)?a.current.get(ne).add(Q):a.current.set(ne,new Set([Q]))),I(3,()=>{M(),L(),n.current.value||H(),j.emit()}),()=>{i.current.delete(Q),r.current.delete(Q),n.current.filtered.items.delete(Q);let he=q();I(4,()=>{M(),(he==null?void 0:he.getAttribute("id"))===Q&&H(),j.emit()})}),group:Q=>(a.current.has(Q)||a.current.set(Q,new Set),()=>{i.current.delete(Q),a.current.delete(Q)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:_,inputId:C,labelId:E,listInnerRef:k}),[]);function P(Q,ne){var he,de;let Ie=(de=(he=o.current)==null?void 0:he.filter)!=null?de:XEe;return Q?Ie(Q,n.current.search,ne):0}function L(){if(!n.current.search||o.current.shouldFilter===!1)return;let Q=n.current.filtered.items,ne=[];n.current.filtered.groups.forEach(de=>{let Ie=a.current.get(de),ke=0;Ie.forEach(Te=>{let Se=Q.get(Te);ke=Math.max(Se,ke)}),ne.push([de,ke])});let he=k.current;ue().sort((de,Ie)=>{var ke,Te;let Se=de.getAttribute("id"),Pe=Ie.getAttribute("id");return((ke=Q.get(Pe))!=null?ke:0)-((Te=Q.get(Se))!=null?Te:0)}).forEach(de=>{let Ie=de.closest(sT);Ie?Ie.appendChild(de.parentElement===Ie?de:de.closest(`${sT} > *`)):he.appendChild(de.parentElement===he?de:de.closest(`${sT} > *`))}),ne.sort((de,Ie)=>Ie[1]-de[1]).forEach(de=>{var Ie;let ke=(Ie=k.current)==null?void 0:Ie.querySelector(`${Ig}[${Uh}="${encodeURIComponent(de[0])}"]`);ke==null||ke.parentElement.appendChild(ke)})}function H(){let Q=ue().find(he=>he.getAttribute("aria-disabled")!=="true"),ne=Q==null?void 0:Q.getAttribute(Uh);j.setState("value",ne||void 0)}function M(){var Q,ne,he,de;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Ie=0;for(let ke of r.current){let Te=(ne=(Q=i.current.get(ke))==null?void 0:Q.value)!=null?ne:"",Se=(de=(he=i.current.get(ke))==null?void 0:he.keywords)!=null?de:[],Pe=P(Te,Se);n.current.filtered.items.set(ke,Pe),Pe>0&&Ie++}for(let[ke,Te]of a.current)for(let Se of Te)if(n.current.filtered.items.get(Se)>0){n.current.filtered.groups.add(ke);break}n.current.filtered.count=Ie}function K(){var Q,ne,he;let de=q();de&&(((Q=de.parentElement)==null?void 0:Q.firstChild)===de&&((he=(ne=de.closest(Ig))==null?void 0:ne.querySelector(YEe))==null||he.scrollIntoView({block:"nearest"})),de.scrollIntoView({block:"nearest"}))}function q(){var Q;return(Q=k.current)==null?void 0:Q.querySelector(`${qV}[aria-selected="true"]`)}function ue(){var Q;return Array.from(((Q=k.current)==null?void 0:Q.querySelectorAll($P))||[])}function ae(Q){let ne=ue()[Q];ne&&j.setState("value",ne.getAttribute(Uh))}function te(Q){var ne;let he=q(),de=ue(),Ie=de.findIndex(Te=>Te===he),ke=de[Ie+Q];(ne=o.current)!=null&&ne.loop&&(ke=Ie+Q<0?de[de.length-1]:Ie+Q===de.length?de[0]:de[Ie+Q]),ke&&j.setState("value",ke.getAttribute(Uh))}function Y(Q){let ne=q(),he=ne==null?void 0:ne.closest(Ig),de;for(;he&&!de;)he=Q>0?sCe(he,Ig):oCe(he,Ig),de=he==null?void 0:he.querySelector($P);de?j.setState("value",de.getAttribute(Uh)):te(Q)}let ie=()=>ae(ue().length-1),V=Q=>{Q.preventDefault(),Q.metaKey?ie():Q.altKey?Y(1):te(1)},J=Q=>{Q.preventDefault(),Q.metaKey?ae(0):Q.altKey?Y(-1):te(-1)};return T.createElement(an.div,{ref:t,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:Q=>{var ne;(ne=w.onKeyDown)==null||ne.call(w,Q);let he=Q.nativeEvent.isComposing||Q.keyCode===229;if(!(Q.defaultPrevented||he))switch(Q.key){case"n":case"j":{x&&Q.ctrlKey&&V(Q);break}case"ArrowDown":{V(Q);break}case"p":case"k":{x&&Q.ctrlKey&&J(Q);break}case"ArrowUp":{J(Q);break}case"Home":{Q.preventDefault(),ae(0);break}case"End":{Q.preventDefault(),ie();break}case"Enter":{Q.preventDefault();let de=q();if(de){let Ie=new Event(Gk);de.dispatchEvent(Ie)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:uCe},l),$_(e,Q=>T.createElement(WV.Provider,{value:j},T.createElement(GV.Provider,{value:N},Q))))}),JEe=T.forwardRef((e,t)=>{var n,r;let a=Ha(),i=T.useRef(null),s=T.useContext(KV),o=lb(),l=YV(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;_f(()=>{if(!u)return o.item(a,s==null?void 0:s.id)},[u]);let d=XV(a,i,[e.value,e.children,i],e.keywords),h=BR(),m=Xu(I=>I.value&&I.value===d.current),g=Xu(I=>u||o.filter()===!1?!0:I.search?I.filtered.items.get(a)>0:!0);T.useEffect(()=>{let I=i.current;if(!(!I||e.disabled))return I.addEventListener(Gk,b),()=>I.removeEventListener(Gk,b)},[g,e.onSelect,e.disabled]);function b(){var I,j;v(),(j=(I=l.current).onSelect)==null||j.call(I,d.current)}function v(){h.setState("value",d.current,!0)}if(!g)return null;let{disabled:x,value:w,onSelect:_,forceMount:E,keywords:C,...k}=e;return T.createElement(an.div,{ref:pc(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!m,"data-disabled":!!x,"data-selected":!!m,onPointerMove:x||o.getDisablePointerSelection()?void 0:v,onClick:x?void 0:b},e.children)}),QEe=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,s=Ha(),o=T.useRef(null),l=T.useRef(null),u=Ha(),d=lb(),h=Xu(g=>a||d.filter()===!1?!0:g.search?g.filtered.groups.has(s):!0);_f(()=>d.group(s),[]),XV(s,o,[e.value,e.heading,l]);let m=T.useMemo(()=>({id:s,forceMount:a}),[a]);return T.createElement(an.div,{ref:pc(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),$_(e,g=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},T.createElement(KV.Provider,{value:m},g))))}),eCe=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=T.useRef(null),i=Xu(s=>!s.search);return!n&&!i?null:T.createElement(an.div,{ref:pc(a,t),...r,"cmdk-separator":"",role:"separator"})}),tCe=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=BR(),s=Xu(u=>u.search),o=Xu(u=>u.selectedItemId),l=lb();return T.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),T.createElement(an.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:a?e.value:s,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),nCe=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=T.useRef(null),s=T.useRef(null),o=Xu(u=>u.selectedItemId),l=lb();return T.useEffect(()=>{if(s.current&&i.current){let u=s.current,d=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=u.offsetHeight;d.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(h),m.unobserve(u)}}},[]),T.createElement(an.div,{ref:pc(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},$_(e,u=>T.createElement("div",{ref:pc(s,l.listInnerRef),"cmdk-list-sizer":""},u)))}),rCe=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:s,...o}=e;return T.createElement(SV,{open:n,onOpenChange:r},T.createElement(EV,{container:s},T.createElement(CV,{"cmdk-overlay":"",className:a}),T.createElement(TV,{"aria-label":e.label,"cmdk-dialog":"",className:i},T.createElement(ZV,{ref:t,...o}))))}),aCe=T.forwardRef((e,t)=>Xu(n=>n.filtered.count===0)?T.createElement(an.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),iCe=T.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return T.createElement(an.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},$_(e,s=>T.createElement("div",{"aria-hidden":!0},s)))}),um=Object.assign(ZV,{List:nCe,Item:JEe,Input:tCe,Group:QEe,Separator:eCe,Dialog:rCe,Empty:aCe,Loading:iCe});function sCe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function oCe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function YV(e){let t=T.useRef(e);return _f(()=>{t.current=e}),t}var _f=typeof window>"u"?T.useEffect:T.useLayoutEffect;function Vh(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function Xu(e){let t=BR(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function XV(e,t,n,r=[]){let a=T.useRef(),i=lb();return _f(()=>{var s;let o=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),l=r.map(u=>u.trim());i.value(e,o,l),(s=t.current)==null||s.setAttribute(Uh,o),a.current=o}),a}var lCe=()=>{let[e,t]=T.useState(),n=Vh(()=>new Map);return _f(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function cCe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function $_({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(cCe(t),{ref:t.ref},n(t.props.children)):n(t)}var uCe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function JV({className:e,...t}){return p.jsx(um,{"data-slot":"command",className:xt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function QV({className:e,...t}){return p.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[p.jsx(wo,{className:"size-4 shrink-0 opacity-50"}),p.jsx(um.Input,{"data-slot":"command-input",className:xt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function eH({className:e,...t}){return p.jsx(um.List,{"data-slot":"command-list",className:xt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function tH({...e}){return p.jsx(um.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function nH({className:e,...t}){return p.jsx(um.Group,{"data-slot":"command-group",className:xt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function rH({className:e,...t}){return p.jsx(um.Item,{"data-slot":"command-item",className:xt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const z_=gt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=T.useState(!1),[s,o]=T.useState(""),[l,u]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),{dbProviderConfigs:d,globalModelSortOrder:h,isLoading:m}=Un(dn(E=>({dbProviderConfigs:E.dbProviderConfigs,globalModelSortOrder:E.globalModelSortOrder,isLoading:E.isLoading}))),g=T.useMemo(()=>{const E=new Map,C=new Set;d.forEach(j=>{if(!j.isEnabled||!j.enabledModels)return;const N=Un.getState().getAllAvailableModelDefsForProvider(j.id)??[],P=new Map(N.map(L=>[L.id,L]));j.enabledModels.forEach(L=>{const H=Cu(j.id,L),M=P.get(L);M&&(C.add(H),E.set(H,{name:M.name||L,providerName:j.name,metadata:M}))})});const k=[],I=new Set;return h.forEach(j=>{if(C.has(j)){const N=E.get(j);N&&!I.has(j)&&(k.push({id:j,...N}),I.add(j))}}),C.forEach(j=>{if(!I.has(j)){const N=E.get(j);N&&k.push({id:j,...N})}}),k},[d,h]),b=T.useMemo(()=>{let E=g;if(s.trim()){const k=s.toLowerCase();E=g.filter(I=>I.name.toLowerCase().includes(k)||I.providerName.toLowerCase().includes(k)||I.id.toLowerCase().includes(k))}const C=Object.entries(l).filter(([,k])=>k).map(([k])=>k);return C.length===0?E:E.filter(k=>{var N,P,L;const I=new Set(((N=k.metadata)==null?void 0:N.supported_parameters)??[]),j=new Set(((L=(P=k.metadata)==null?void 0:P.architecture)==null?void 0:L.input_modalities)??[]);return C.every(H=>{switch(H){case"reasoning":return I.has("reasoning");case"webSearch":return I.has("web_search")||I.has("web_search_options");case"tools":return I.has("tools");case"multimodal":return Array.from(j).some(M=>M!=="text");default:return!0}})})},[g,s,l]),v=T.useMemo(()=>g.find(E=>E.id===e),[g,e]),x=T.useCallback(E=>{t(E===e?null:E),i(!1),o("")},[t,e]),w=E=>{u(C=>({...C,[E]:!C[E]}))};if(m)return p.jsx(lr,{className:xt("h-9 w-[250px]",r)});const _=Object.values(l).filter(Boolean).length;return p.jsxs(jc,{open:a,onOpenChange:i,children:[p.jsx(Dc,{asChild:!0,children:p.jsxs(It,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||g.length===0,className:xt("w-auto justify-between h-9 text-sm font-normal",r),children:[p.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:v?`${v.name} (${v.providerName})`:"Select Model..."}),p.jsx(p1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(Mc,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:p.jsxs(JV,{shouldFilter:!1,children:[p.jsxs("div",{className:"flex items-center border-b px-3",children:[p.jsx(wo,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(QV,{placeholder:"Search model...",value:s,onValueChange:o,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[p.jsx(Dn,{tooltipText:"Filter: Reasoning",icon:p.jsx(Mp,{}),onClick:()=>w("reasoning"),variant:l.reasoning?"secondary":"ghost",className:xt("h-7 w-7",l.reasoning&&"text-primary"),"aria-label":"Filter by reasoning capability"}),p.jsx(Dn,{tooltipText:"Filter: Web Search",icon:p.jsx(wo,{}),onClick:()=>w("webSearch"),variant:l.webSearch?"secondary":"ghost",className:xt("h-7 w-7",l.webSearch&&"text-primary"),"aria-label":"Filter by web search capability"}),p.jsx(Dn,{tooltipText:"Filter: Tools",icon:p.jsx(fA,{}),onClick:()=>w("tools"),variant:l.tools?"secondary":"ghost",className:xt("h-7 w-7",l.tools&&"text-primary"),"aria-label":"Filter by tool usage capability"}),p.jsx(Dn,{tooltipText:"Filter: Multimodal",icon:p.jsx(lA,{}),onClick:()=>w("multimodal"),variant:l.multimodal?"secondary":"ghost",className:xt("h-7 w-7",l.multimodal&&"text-primary"),"aria-label":"Filter by multimodal capability"})]})]}),p.jsxs(eH,{children:[p.jsx(tH,{children:_>0?"No models match all active filters.":"No model found."}),p.jsx(nH,{children:b.map(E=>p.jsxs(rH,{value:E.id,onSelect:x,children:[p.jsx(Ri,{className:xt("mr-2 h-4 w-4",e===E.id?"opacity-100":"opacity-0")}),p.jsxs("span",{className:"truncate",children:[E.name," (",E.providerName,")"]})]},E.id))})]})]})})]})});z_.displayName="GlobalModelSelector";const dCe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:s,setTopP:o,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:m,setPresencePenalty:g,frequencyPenalty:b,setFrequencyPenalty:v,autoTitleEnabled:x,setAutoTitleEnabled:w,autoTitleModelId:_,setAutoTitleModelId:E,autoTitlePromptMaxLength:C,setAutoTitlePromptMaxLength:k,autoTitleIncludeFiles:I,setAutoTitleIncludeFiles:j,autoTitleIncludeRules:N,setAutoTitleIncludeRules:P,resetAssistantSettings:L}=pr(dn(Y=>({globalSystemPrompt:Y.globalSystemPrompt,setGlobalSystemPrompt:Y.setGlobalSystemPrompt,toolMaxSteps:Y.toolMaxSteps,setToolMaxSteps:Y.setToolMaxSteps,temperature:Y.temperature,setTemperature:Y.setTemperature,topP:Y.topP,setTopP:Y.setTopP,maxTokens:Y.maxTokens,setMaxTokens:Y.setMaxTokens,topK:Y.topK,setTopK:Y.setTopK,presencePenalty:Y.presencePenalty,setPresencePenalty:Y.setPresencePenalty,frequencyPenalty:Y.frequencyPenalty,setFrequencyPenalty:Y.setFrequencyPenalty,autoTitleEnabled:Y.autoTitleEnabled,setAutoTitleEnabled:Y.setAutoTitleEnabled,autoTitleModelId:Y.autoTitleModelId,setAutoTitleModelId:Y.setAutoTitleModelId,autoTitlePromptMaxLength:Y.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:Y.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:Y.autoTitleIncludeFiles,setAutoTitleIncludeFiles:Y.setAutoTitleIncludeFiles,autoTitleIncludeRules:Y.autoTitleIncludeRules,setAutoTitleIncludeRules:Y.setAutoTitleIncludeRules,resetAssistantSettings:Y.resetAssistantSettings}))),H=Y=>{const ie=Y.target.value,V=ie===""?5:parseInt(ie,10);isNaN(V)||r(V)},M=Y=>{const ie=Y.target.value,V=ie===""?768:parseInt(ie,10);isNaN(V)||k(V)},K=Y=>{Y!==null&&i(Y)},q=Y=>{Y!==null&&o(Y)},ue=Y=>{Y!==null&&g(Y)},ae=Y=>{Y!==null&&v(Y)},te=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&L()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),p.jsx(Zt,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),p.jsx(fd,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:Y=>t(Y.target.value),rows:4})]}),p.jsx(mo,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),p.jsx(VV,{temperature:a,setTemperature:K,topP:s,setTopP:q,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:m,setPresencePenalty:ue,frequencyPenalty:b,setFrequencyPenalty:ae,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]}),p.jsx(mo,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),p.jsx(Zt,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),p.jsx(Rn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:H,className:"w-24"})]}),p.jsx(mo,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Automatic Title Generation"}),p.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[p.jsx(Hs,{id:"auto-title-enabled",checked:x,onCheckedChange:w,"aria-labelledby":"auto-title-enabled-label"}),p.jsx(Zt,{id:"auto-title-enabled-label",htmlFor:"auto-title-enabled",children:"Enable Auto-Title for New Chats"})]}),x&&p.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted ml-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"auto-title-model",children:"Model for Title Generation"}),p.jsx(z_,{value:_,onChange:E,className:"w-full"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a fast and capable model for generating concise titles."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"auto-title-max-length",children:"Max Prompt Length for Title Generation (Chars)"}),p.jsx(Rn,{id:"auto-title-max-length",type:"number",min:"100",max:"4000",step:"10",value:C,onChange:M,className:"w-24"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Limits the initial prompt length sent for title generation (100-4000)."})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Hs,{id:"auto-title-include-files",checked:I,onCheckedChange:j,"aria-labelledby":"auto-title-include-files-label"}),p.jsx(Zt,{id:"auto-title-include-files-label",htmlFor:"auto-title-include-files",children:"Include file names/types in title prompt"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Hs,{id:"auto-title-include-rules",checked:N,onCheckedChange:P,"aria-labelledby":"auto-title-include-rules-label"}),p.jsx(Zt,{id:"auto-title-include-rules-label",htmlFor:"auto-title-include-rules",children:"Include active rules in title prompt"})]})]})]}),p.jsx(mo,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(It,{variant:"outline",size:"sm",onClick:te,children:[p.jsx(uA,{className:"mr-2 h-4 w-4"}),"Reset Assistant Settings"]})})]})},fCe=gt.memo(dCe);var U_="Checkbox",[hCe,F3e]=vi(U_),[pCe,mCe]=hCe(U_),aH=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,g]=T.useState(null),b=kn(t,C=>g(C)),v=T.useRef(!1),x=m?d||!!m.closest("form"):!0,[w,_]=Eo({prop:a,defaultProp:i??!1,onChange:u,caller:U_}),E=T.useRef(w);return T.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const k=()=>_(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[m,_]),p.jsxs(pCe,{scope:n,state:w,disabled:o,children:[p.jsx(an.button,{type:"button",role:"checkbox","aria-checked":Ru(w)?"mixed":w,"aria-required":s,"data-state":lH(w),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:b,onKeyDown:qt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:qt(e.onClick,C=>{_(k=>Ru(k)?!0:!k),x&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})}),x&&p.jsx(oH,{control:m,bubbles:!v.current,name:r,value:l,checked:w,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Ru(i)?!1:i})]})});aH.displayName=U_;var iH="CheckboxIndicator",sH=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=mCe(iH,n);return p.jsx(Ka,{present:r||Ru(i.state)||i.state===!0,children:p.jsx(an.span,{"data-state":lH(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});sH.displayName=iH;var gCe="CheckboxBubbleInput",oH=T.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},s)=>{const o=T.useRef(null),l=kn(o,s),u=x_(n),d=I1(t);T.useEffect(()=>{const m=o.current;if(!m)return;const g=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(g,"checked").set;if(u!==n&&v){const x=new Event("click",{bubbles:r});m.indeterminate=Ru(n),v.call(m,Ru(n)?!1:n),m.dispatchEvent(x)}},[u,n,r]);const h=T.useRef(Ru(n)?!1:n);return p.jsx(an.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});oH.displayName=gCe;function Ru(e){return e==="indeterminate"}function lH(e){return Ru(e)?"indeterminate":e?"checked":"unchecked"}var yCe=aH,bCe=sH;function dy({className:e,...t}){return p.jsx(yCe,{"data-slot":"checkbox",className:xt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(bCe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(Ri,{className:"size-3.5"})})})}const vCe=()=>{const{importConversation:e,exportAllConversations:t}=mn(dn(M=>({importConversation:M.importConversation,exportAllConversations:M.exportAllConversations}))),n=T.useRef(null),r=T.useRef(null),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,u]=T.useState(!1),[d,h]=T.useState(!1),[m,g]=T.useState(!1),[b,v]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),[x,w]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),_=()=>{var M;(M=n.current)==null||M.click()},E=()=>{var M;(M=r.current)==null||M.click()},C=T.useCallback(async M=>{var q;const K=(q=M.target.files)==null?void 0:q[0];if(K){i(!0);try{await e(K)}catch(ue){console.error("Import failed (from component):",ue)}finally{n.current&&(n.current.value=""),i(!1)}}},[e]),k=T.useCallback(async M=>{var q;const K=(q=M.target.files)==null?void 0:q[0];if(K){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}g(!0);try{await Jh.importFullConfiguration(K,b)}catch(ue){console.error("Full import failed (from component):",ue)}finally{r.current&&(r.current.value=""),g(!1)}}},[b]),I=T.useCallback(async()=>{o(!0);try{await t()}catch(M){console.error("Export all failed (from component):",M)}finally{o(!1)}},[t]),j=T.useCallback(async()=>{h(!0);try{await Jh.exportFullConfiguration(x)}catch(M){console.error("Full export failed (from component):",M)}finally{h(!1)}},[x]),N=T.useCallback(async()=>{if(window.confirm(`🚨 ARE YOU ABSOLUTELY SURE? 🚨

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await _t.clearAllData(),Ge.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(M){const K="Failed to clear all data";console.error(K,M),Ge.error(`${K}: ${M instanceof Error?M.message:String(M)}`),u(!1)}}},[]),P=(M,K)=>{v(q=>({...q,[M]:K}))},L=(M,K)=>{w(q=>({...q,[M]:K}))},H=(M,K,q,ue)=>{const ae=M==="import"?b:x,te=M==="import"?P:L,Y=M==="import"?m:d;return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(dy,{id:`${M}-${K}`,checked:ae[K],onCheckedChange:ie=>te(K,!!ie),disabled:Y}),p.jsxs(Zt,{htmlFor:`${M}-${K}`,className:"text-sm font-normal flex items-center gap-1.5",children:[p.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})," ",q]})]},`${M}-${K}`)};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Zt,{className:"font-semibold",children:"Import Conversation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),p.jsx("input",{type:"file",ref:n,onChange:C,accept:".json",className:"hidden",id:"import-file-input",disabled:a}),p.jsxs(It,{onClick:_,variant:"outline",size:"sm",disabled:a,children:[a?p.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(NY,{className:"mr-2 h-4 w-4"}),a?"Importing...":"Select File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Zt,{className:"font-semibold",children:"Export All Conversations"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),p.jsxs(It,{onClick:I,variant:"outline",size:"sm",disabled:s,children:[s?p.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(af,{className:"mr-2 h-4 w-4"}),s?"Exporting...":"Export All Chats"]})]})]})]}),p.jsx(mo,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Zt,{className:"font-semibold",children:"Import Full Configuration"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Import a full configuration backup (.json). Select which data types to import below."," ",p.jsx("strong",{className:"text-destructive",children:"This will overwrite existing data for selected types."})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[H("import","importSettings","Settings",vT),H("import","importApiKeys","API Keys",t0),H("import","importProviderConfigs","Providers",qw),H("import","importProjects","Projects",m4),H("import","importConversations","Conversations",bT),H("import","importRulesAndTags","Rules & Tags",Gw),H("import","importMods","Mods",g4),H("import","importSyncRepos","Sync Repos",ju)]}),p.jsx("input",{type:"file",ref:r,onChange:k,accept:".json",className:"hidden",id:"full-import-file-input",disabled:m}),p.jsxs(It,{onClick:E,variant:"outline",size:"sm",disabled:m,className:"mt-2",children:[m?p.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(vZ,{className:"mr-2 h-4 w-4"}),m?"Importing...":"Select Full Backup File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Zt,{className:"font-semibold",children:"Export Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[H("export","importSettings","Settings",vT),H("export","importApiKeys","API Keys",t0),H("export","importProviderConfigs","Providers",qw),H("export","importProjects","Projects",m4),H("export","importConversations","Conversations",bT),H("export","importRulesAndTags","Rules & Tags",Gw),H("export","importMods","Mods",g4),H("export","importSyncRepos","Sync Repos",ju)]}),p.jsxs(It,{onClick:j,variant:"outline",size:"sm",disabled:d,className:"mt-2",children:[d?p.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(dZ,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export Full Backup"]})]})]})]}),p.jsx(mo,{}),p.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[p.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),p.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),p.jsxs(It,{onClick:N,variant:"destructive",disabled:l,children:[l?p.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Zi,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},wCe=gt.memo(vCe),xCe=tA("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function cH({className:e,variant:t,...n}){return p.jsx("div",{"data-slot":"alert",role:"alert",className:xt(xCe({variant:t}),e),...n})}function uH({className:e,...t}){return p.jsx("div",{"data-slot":"alert-title",className:xt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function dH({className:e,...t}){return p.jsx("div",{"data-slot":"alert-description",className:xt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function dm({className:e,...t}){return p.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:p.jsx("table",{"data-slot":"table",className:xt("w-full caption-bottom text-sm",e),...t})})}function fm({className:e,...t}){return p.jsx("thead",{"data-slot":"table-header",className:xt("[&_tr]:border-b",e),...t})}function hm({className:e,...t}){return p.jsx("tbody",{"data-slot":"table-body",className:xt("[&_tr:last-child]:border-0",e),...t})}function Jr({className:e,...t}){return p.jsx("tr",{"data-slot":"table-row",className:xt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Nr({className:e,...t}){return p.jsx("th",{"data-slot":"table-head",className:xt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Fn({className:e,...t}){return p.jsx("td",{"data-slot":"table-cell",className:xt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const _Ce=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=uy(dn(I=>({loadedMods:I.loadedMods,addDbMod:I.addDbMod,updateDbMod:I.updateDbMod,deleteDbMod:I.deleteDbMod,dbMods:I.dbMods,isLoading:I.isLoading}))),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(""),[m,g]=T.useState(!1),[b,v]=T.useState({}),[x,w]=T.useState({}),_=T.useCallback(async()=>{if(!s.trim()){Ge.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){Ge.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){Ge.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const I={name:s.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(I),o(""),u(""),h(""),Ge.info("Mod added. Reload required for changes to take effect.")}catch(I){console.error("Failed to add mod (from component):",I)}finally{g(!1)}},[s,l,d,t,a==null?void 0:a.length]),E=T.useCallback(async I=>{v(j=>({...j,[I.id]:!0}));try{await n(I.id,{enabled:!I.enabled}),Ge.info(`Mod "${I.name}" ${I.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(j){console.error("Failed to update mod (from component):",j)}finally{v(j=>({...j,[I.id]:!1}))}},[n]),C=T.useCallback(async I=>{if(window.confirm(`Are you sure you want to delete the mod "${I.name}"? This cannot be undone.`)){w(j=>({...j,[I.id]:!0}));try{await r(I.id),Ge.info("Mod deleted. Reload required for changes to take effect.")}catch(j){console.error("Failed to delete mod (from component):",j)}finally{w(j=>({...j,[I.id]:!1}))}}},[r]),k=T.useCallback(I=>{const j=e.find(P=>P.id===I);if(j)if(j.error){const P=j.error instanceof Error?j.error.message:String(j.error);return{status:"Error",error:j.error,tooltip:P}}else return{status:"Loaded"};const N=(a||[]).find(P=>P.id===I);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs(cH,{variant:"destructive",className:"border-destructive/50",children:[p.jsx(dA,{className:"h-4 w-4"}),p.jsx(uH,{children:"Security Warning"}),p.jsx(dH,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),p.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Zt,{htmlFor:"mod-name",children:"Mod Name"}),p.jsx(Rn,{id:"mod-name",value:s,onChange:I=>o(I.target.value),placeholder:"My Awesome Mod",disabled:m})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Zt,{htmlFor:"mod-url",children:"Source URL (Optional)"}),p.jsx(Rn,{id:"mod-url",type:"url",value:l,onChange:I=>u(I.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!d.trim()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Zt,{htmlFor:"mod-script",children:"Script Content (Optional)"}),p.jsx(fd,{id:"mod-script",value:d,onChange:I=>h(I.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!l.trim()})]}),p.jsxs(It,{onClick:_,disabled:m,children:[m&&p.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),p.jsx("div",{className:"rounded-md border",children:p.jsx(Gn,{delayDuration:100,children:p.jsxs(dm,{children:[p.jsx(fm,{children:p.jsxs(Jr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{children:"Source"}),p.jsx(Nr,{children:"Status"}),p.jsx(Nr,{className:"text-center",children:"Enabled"}),p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(hm,{children:i?p.jsxs(p.Fragment,{children:[p.jsx(Jr,{children:p.jsx(Fn,{colSpan:5,children:p.jsx(lr,{className:"h-10 w-full"})})}),p.jsx(Jr,{children:p.jsx(Fn,{colSpan:5,children:p.jsx(lr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?p.jsx(Jr,{children:p.jsx(Fn,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(I=>{const{status:j,error:N,tooltip:P}=k(I.id),L=I.sourceUrl?new URL(I.sourceUrl).hostname:"Direct Script",H=b[I.id],M=x[I.id],K=H||M,q=j==="Error";return p.jsxs(Jr,{children:[p.jsx(Fn,{className:"font-medium",children:I.name}),p.jsx(Fn,{className:"text-muted-foreground",children:L}),p.jsxs(Fn,{children:[p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx("span",{className:q?"text-destructive font-semibold cursor-help":"",children:j})}),P&&p.jsx(Yn,{className:"max-w-xs break-words",children:p.jsx("p",{children:P})})]}),q&&N&&p.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),p.jsxs(Fn,{className:"text-center",children:[p.jsx(Hs,{checked:I.enabled??!1,onCheckedChange:()=>E(I),disabled:K,"aria-label":`Enable ${I.name}`}),H&&p.jsx(Pn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),p.jsx(Fn,{className:"text-right",children:p.jsx(It,{variant:"ghost",size:"icon",onClick:()=>C(I),disabled:K,"aria-label":`Delete ${I.name}`,className:"text-destructive hover:text-destructive/80",children:M?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{className:"h-4 w-4"})})})]},I.id)})})]})})})]})]})},SCe=gt.memo(_Ce),ECe=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:s,isDeleting:o,onSelectModelForDetails:l})=>{var H,M;const[u,d]=T.useState(!0),h=v0(e.type),m=DF(e.type),g=Xd(e.type),b=s==="fetching"||o,v=o||s==="fetching",x=o||s==="fetching",_=Un(K=>K.getAllAvailableModelDefsForProvider)(e.id),E=T.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),C=e.apiKeyId?t.some(K=>K.id===e.apiKeyId):!1,k=h&&!C,I=T.useCallback(async(K,q)=>{const ue=new Set(e.enabledModels??[]);q?ue.add(K):ue.delete(K);const ae=Array.from(ue);try{await i(e.id,{enabledModels:ae})}catch(te){Ge.error("Failed to update model status."),console.error("Failed to save model toggle:",te)}},[e.enabledModels,e.id,i]),j=()=>d(K=>!K),N=((H=e.enabledModels)==null?void 0:H.length)??0,P=_.length,L=K=>{const q=Cu(e.id,K);l(q)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{children:p.jsx("span",{className:xt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",s==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),p.jsx(Yn,{side:"top",children:s==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),p.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),p.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),k&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{children:p.jsx(cf,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),p.jsx(Yn,{side:"top",children:p.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),p.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[p.jsx(Dn,{tooltipText:"Edit",onClick:n,disabled:v,"aria-label":"Edit provider",icon:p.jsx(by,{}),className:"h-8 w-8"}),p.jsx(Dn,{tooltipText:"Delete",onClick:r,disabled:x,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{})})]})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&p.jsxs("div",{children:["API Key:"," ",e.apiKeyId?C?p.jsx("span",{className:"text-green-400",children:((M=t.find(K=>K.id===e.apiKeyId))==null?void 0:M.name)||"Linked (Unnamed Key)"}):p.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):p.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),m&&p.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),p.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?p.jsx("span",{className:"text-green-400",children:"Enabled"}):p.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),g&&p.jsx("div",{className:"pt-1",children:p.jsxs(It,{variant:"outline",size:"sm",onClick:a,disabled:b,className:"text-xs h-7 px-2",children:[s==="fetching"&&p.jsx(Pn,{className:"h-3 w-3 mr-1 animate-spin"}),s==="success"&&p.jsx(Ri,{className:"h-3 w-3 mr-1 text-green-500"}),s==="error"&&p.jsx(cf,{className:"h-3 w-3 mr-1 text-destructive"}),s==="idle"&&p.jsx(m1,{className:"h-3 w-3 mr-1"}),s==="fetching"?"Fetching...":s==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),p.jsxs("div",{className:"space-y-1 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",N," / ",P," enabled)"]}),p.jsx(Dn,{tooltipText:u?"Show Models":"Hide Models",onClick:j,"aria-label":u?"Show model list":"Hide model list",icon:u?p.jsx(wl,{}):p.jsx(Ju,{}),className:"h-6 w-6"})]}),!u&&p.jsx(_R,{providerId:e.id,allAvailableModels:_,enabledModelIds:E,onToggleModel:I,isLoading:s==="fetching",disabled:o,listHeightClass:"h-64",onModelClick:L})]})]})},CCe=gt.memo(ECe),TCe=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:s,onChange:o})=>{const l=T.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),u=T.useCallback((h,m)=>{const g=new Set(t.enabledModels??[]);m?g.add(h):g.delete(h);const b=Array.from(g);o("enabledModels",b)},[t.enabledModels,o]),d=T.useCallback((h,m)=>{o(h,m)},[o]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),p.jsx(Bz,{formData:t,onChange:d,apiKeys:n,disabled:a})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),p.jsx(_R,{providerId:e,allAvailableModels:r,enabledModelIds:l,onToggleModel:u,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),p.jsx(mo,{className:"my-4"}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:s,disabled:a,type:"button",children:[a&&p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ef,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},kCe=gt.memo(TCe),ACe=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:s})=>{const[o,l]=T.useState(!1),[u,d]=T.useState(!1),[h,m]=T.useState(!1),[g,b]=T.useState({}),v=Un(P=>P.getAllAvailableModelDefsForProvider),[x,w]=T.useState([]),_=T.useMemo(()=>[...x].sort((P,L)=>(P.name||P.id).localeCompare(L.name||L.id)),[x]);T.useEffect(()=>{if(o){const P=v(e.id);w(P.map(L=>({id:L.id,name:L.name}))),b({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else w([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,v]);const E=()=>l(!0),C=()=>{l(!1),b({}),d(!1)},k=T.useCallback(async()=>{d(!0);try{const P=g.enabledModels&&g.enabledModels.length>0?g.enabledModels:null,L={name:g.name,type:g.type,isEnabled:g.isEnabled,apiKeyId:g.apiKeyId,baseURL:g.baseURL,autoFetchModels:g.autoFetchModels,enabledModels:P};Object.keys(L).forEach(H=>{L[H]===void 0&&delete L[H]}),await n(e.id,L),l(!1),b({}),Ge.success(`Provider "${L.name||e.name}" updated.`)}catch(P){console.error("Failed to save provider update:",P),Ge.error("Failed to save provider configuration.")}finally{d(!1)}},[g,n,e.id,e.name]),I=T.useCallback((P,L)=>{b(H=>({...H,[P]:L}))},[]),j=T.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){m(!0);try{await r(e.id)}catch(P){console.error("Failed to delete provider:",P),m(!1)}}},[r,e.id,e.name]),N=T.useCallback(async()=>{if(await a(e.id),o){const P=v(e.id);w(P.map(L=>({id:L.id,name:L.name})))}},[a,e.id,o,v]);return p.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?p.jsx(kCe,{providerId:e.id,editData:g,apiKeys:t,allAvailableModels:_,isSaving:u,onCancel:C,onSave:k,onChange:I}):p.jsx(CCe,{provider:e,apiKeys:t,onEdit:E,onDelete:j,onFetchModels:N,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:s})})},NCe=gt.memo(ACe);var oT="rovingFocusGroup.onEntryFocus",RCe={bubbles:!1,cancelable:!0},cb="RovingFocusGroup",[Wk,fH,ICe]=v_(cb),[jCe,V_]=vi(cb,[ICe]),[DCe,MCe]=jCe(cb),hH=T.forwardRef((e,t)=>p.jsx(Wk.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Wk.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(OCe,{...e,ref:t})})}));hH.displayName=cb;var OCe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=T.useRef(null),g=kn(t,m),b=am(i),[v,x]=Eo({prop:s,defaultProp:o??null,onChange:l,caller:cb}),[w,_]=T.useState(!1),E=Ua(u),C=fH(n),k=T.useRef(!1),[I,j]=T.useState(0);return T.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(oT,E),()=>N.removeEventListener(oT,E)},[E]),p.jsx(DCe,{scope:n,orientation:r,dir:b,loop:a,currentTabStopId:v,onItemFocus:T.useCallback(N=>x(N),[x]),onItemShiftTab:T.useCallback(()=>_(!0),[]),onFocusableItemAdd:T.useCallback(()=>j(N=>N+1),[]),onFocusableItemRemove:T.useCallback(()=>j(N=>N-1),[]),children:p.jsx(an.div,{tabIndex:w||I===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:qt(e.onMouseDown,()=>{k.current=!0}),onFocus:qt(e.onFocus,N=>{const P=!k.current;if(N.target===N.currentTarget&&P&&!w){const L=new CustomEvent(oT,RCe);if(N.currentTarget.dispatchEvent(L),!L.defaultPrevented){const H=C().filter(ae=>ae.focusable),M=H.find(ae=>ae.active),K=H.find(ae=>ae.id===v),ue=[M,K,...H].filter(Boolean).map(ae=>ae.ref.current);gH(ue,d)}}k.current=!1}),onBlur:qt(e.onBlur,()=>_(!1))})})}),pH="RovingFocusGroupItem",mH=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s,...o}=e,l=Ha(),u=i||l,d=MCe(pH,n),h=d.currentTabStopId===u,m=fH(n),{onFocusableItemAdd:g,onFocusableItemRemove:b,currentTabStopId:v}=d;return T.useEffect(()=>{if(r)return g(),()=>b()},[r,g,b]),p.jsx(Wk.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:p.jsx(an.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:qt(e.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:qt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:qt(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const w=LCe(x,d.orientation,d.dir);if(w!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let E=m().filter(C=>C.focusable).map(C=>C.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const C=E.indexOf(x.currentTarget);E=d.loop?BCe(E,C+1):E.slice(C+1)}setTimeout(()=>gH(E))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:v!=null}):s})})});mH.displayName=pH;var PCe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function FCe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function LCe(e,t,n){const r=FCe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return PCe[r]}function gH(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function BCe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var yH=hH,bH=mH,H_="Tabs",[$Ce,L3e]=vi(H_,[V_]),vH=V_(),[zCe,$R]=$Ce(H_),wH=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...u}=e,d=am(o),[h,m]=Eo({prop:r,onChange:a,defaultProp:i??"",caller:H_});return p.jsx(zCe,{scope:n,baseId:Ha(),value:h,onValueChange:m,orientation:s,dir:d,activationMode:l,children:p.jsx(an.div,{dir:d,"data-orientation":s,...u,ref:t})})});wH.displayName=H_;var xH="TabsList",_H=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=$R(xH,n),s=vH(n);return p.jsx(yH,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(an.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});_H.displayName=xH;var SH="TabsTrigger",EH=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,s=$R(SH,n),o=vH(n),l=kH(s.baseId,r),u=AH(s.baseId,r),d=r===s.value;return p.jsx(bH,{asChild:!0,...o,focusable:!a,active:d,children:p.jsx(an.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:qt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:qt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:qt(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!a&&h&&s.onValueChange(r)})})})});EH.displayName=SH;var CH="TabsContent",TH=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...s}=e,o=$R(CH,n),l=kH(o.baseId,r),u=AH(o.baseId,r),d=r===o.value,h=T.useRef(d);return T.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),p.jsx(Ka,{present:a||d,children:({present:m})=>p.jsx(an.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});TH.displayName=CH;function kH(e,t){return`${e}-trigger-${t}`}function AH(e,t){return`${e}-content-${t}`}var UCe=wH,VCe=_H,HCe=EH,qCe=TH;function GCe({className:e,...t}){return p.jsx(UCe,{"data-slot":"tabs",className:xt("flex flex-col gap-2",e),...t})}function WCe({className:e,...t}){return p.jsx(VCe,{"data-slot":"tabs-list",className:xt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function KCe({className:e,...t}){return p.jsx(HCe,{"data-slot":"tabs-trigger",className:xt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ZCe({className:e,...t}){return p.jsx(qCe,{"data-slot":"tabs-content",className:xt("flex-1 outline-none",e),...t})}const hd=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:s,scrollable:o})=>{var g;const[l,u]=T.useState(n??t??((g=e[0])==null?void 0:g.value));T.useEffect(()=>{n!==void 0&&n!==l&&u(n)},[n,l]);const d=b=>{u(b),r&&r(b)},h=xt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),m=({children:b})=>{const v=xt("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",s);return o?p.jsx(Ku,{className:v,children:b}):p.jsx("div",{className:v,children:b})};return p.jsxs(GCe,{value:l,onValueChange:d,defaultValue:t,className:xt("flex flex-col h-full",a),children:[p.jsx(WCe,{className:xt("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(b=>p.jsx(KCe,{value:b.value,disabled:b.disabled,className:h,children:b.label},b.value))}),p.jsx(m,{children:e.map(b=>p.jsx(ZCe,{value:b.value,className:"data-[state=inactive]:hidden h-full",children:b.content},b.value))})]})};function YCe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const q_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pm(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function zR(e){return"nodeType"in e}function rs(e){var t,n;return e?pm(e)?e:zR(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function UR(e){const{Document:t}=rs(e);return e instanceof t}function ub(e){return pm(e)?!1:e instanceof rs(e).HTMLElement}function NH(e){return e instanceof rs(e).SVGElement}function mm(e){return e?pm(e)?e.document:zR(e)?UR(e)?e:ub(e)||NH(e)?e.ownerDocument:document:document:document}const vl=q_?T.useLayoutEffect:T.useEffect;function VR(e){const t=T.useRef(e);return vl(()=>{t.current=e}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function XCe(){const e=T.useRef(null),t=T.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=T.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function fy(e,t){t===void 0&&(t=[e]);const n=T.useRef(e);return vl(()=>{n.current!==e&&(n.current=e)},t),n}function db(e,t){const n=T.useRef();return T.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function l1(e){const t=VR(e),n=T.useRef(null),r=T.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function Kk(e){const t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}let lT={};function fb(e,t){return T.useMemo(()=>{if(t)return t;const n=lT[e]==null?0:lT[e]+1;return lT[e]=n,e+"-"+n},[e,t])}function RH(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>{const o=Object.entries(s);for(const[l,u]of o){const d=i[l];d!=null&&(i[l]=d+e*u)}return i},{...t})}}const op=RH(1),hy=RH(-1);function JCe(e){return"clientX"in e&&"clientY"in e}function HR(e){if(!e)return!1;const{KeyboardEvent:t}=rs(e.target);return t&&e instanceof t}function QCe(e){if(!e)return!1;const{TouchEvent:t}=rs(e.target);return t&&e instanceof t}function Zk(e){if(QCe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return JCe(e)?{x:e.clientX,y:e.clientY}:null}const py=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[py.Translate.toString(e),py.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),zP="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function eTe(e){return e.matches(zP)?e:e.querySelector(zP)}const tTe={display:"none"};function nTe(e){let{id:t,value:n}=e;return gt.createElement("div",{id:t,style:tTe},n)}function rTe(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function aTe(){const[e,t]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const IH=T.createContext(null);function iTe(e){const t=T.useContext(IH);T.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function sTe(){const[e]=T.useState(()=>new Set),t=T.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[T.useCallback(r=>{let{type:a,event:i}=r;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const oTe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},lTe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function cTe(e){let{announcements:t=lTe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=oTe}=e;const{announce:i,announcement:s}=aTe(),o=fb("DndLiveRegion"),[l,u]=T.useState(!1);if(T.useEffect(()=>{u(!0)},[]),iTe(T.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:g}=h;t.onDragMove&&i(t.onDragMove({active:m,over:g}))},onDragOver(h){let{active:m,over:g}=h;i(t.onDragOver({active:m,over:g}))},onDragEnd(h){let{active:m,over:g}=h;i(t.onDragEnd({active:m,over:g}))},onDragCancel(h){let{active:m,over:g}=h;i(t.onDragCancel({active:m,over:g}))}}),[i,t])),!l)return null;const d=gt.createElement(gt.Fragment,null,gt.createElement(nTe,{id:r,value:a.draggable}),gt.createElement(rTe,{id:o,announcement:s}));return n?il.createPortal(d,n):d}var Aa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Aa||(Aa={}));function c1(){}function UP(e,t){return T.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function uTe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Ao=Object.freeze({x:0,y:0});function jH(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function DH(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function dTe(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function VP(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function MH(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function HP(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const fTe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=HP(t,t.left,t.top),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=jH(HP(l),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(DH)},hTe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=VP(t),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=VP(l),d=a.reduce((m,g,b)=>m+jH(u[b],g),0),h=Number((d/4).toFixed(4));i.push({id:o,data:{droppableContainer:s,value:h}})}}return i.sort(DH)};function pTe(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const l=t.width*t.height,u=e.width*e.height,d=s*o,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const mTe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:s}=i,o=n.get(s);if(o){const l=pTe(o,t);l>0&&a.push({id:s,data:{droppableContainer:i,value:l}})}}return a.sort(dTe)};function gTe(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function OH(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ao}function yTe(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...n})}}const bTe=yTe(1);function vTe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function wTe(e,t,n){const r=vTe(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,l=e.left-s-(1-a)*parseFloat(n),u=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const xTe={ignoreTransform:!1};function gm(e,t){t===void 0&&(t=xTe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=rs(e).getComputedStyle(e);u&&(n=wTe(n,u,d))}const{top:r,left:a,width:i,height:s,bottom:o,right:l}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:l}}function qP(e){return gm(e,{ignoreTransform:!0})}function _Te(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function STe(e,t){return t===void 0&&(t=rs(e).getComputedStyle(e)),t.position==="fixed"}function ETe(e,t){t===void 0&&(t=rs(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function G_(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(UR(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!ub(a)||NH(a)||n.includes(a))return n;const i=rs(e).getComputedStyle(a);return a!==e&&ETe(a,i)&&n.push(a),STe(a,i)?n:r(a.parentNode)}return e?r(e):n}function PH(e){const[t]=G_(e,1);return t??null}function cT(e){return!q_||!e?null:pm(e)?e:zR(e)?UR(e)||e===mm(e).scrollingElement?window:ub(e)?e:null:null}function FH(e){return pm(e)?e.scrollX:e.scrollLeft}function LH(e){return pm(e)?e.scrollY:e.scrollTop}function Yk(e){return{x:FH(e),y:LH(e)}}var za;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(za||(za={}));function BH(e){return!q_||!e?!1:e===document.scrollingElement}function $H(e){const t={x:0,y:0},n=BH(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:r,minScroll:t}}const CTe={x:.2,y:.2};function TTe(e,t,n,r,a){let{top:i,left:s,right:o,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=CTe);const{isTop:u,isBottom:d,isLeft:h,isRight:m}=$H(e),g={x:0,y:0},b={x:0,y:0},v={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+v.height?(g.y=za.Backward,b.y=r*Math.abs((t.top+v.height-i)/v.height)):!d&&l>=t.bottom-v.height&&(g.y=za.Forward,b.y=r*Math.abs((t.bottom-v.height-l)/v.height)),!m&&o>=t.right-v.width?(g.x=za.Forward,b.x=r*Math.abs((t.right-v.width-o)/v.width)):!h&&s<=t.left+v.width&&(g.x=za.Backward,b.x=r*Math.abs((t.left+v.width-s)/v.width)),{direction:g,speed:b}}function kTe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function zH(e){return e.reduce((t,n)=>op(t,Yk(n)),Ao)}function ATe(e){return e.reduce((t,n)=>t+FH(n),0)}function NTe(e){return e.reduce((t,n)=>t+LH(n),0)}function RTe(e,t){if(t===void 0&&(t=gm),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);PH(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ITe=[["x",["left","right"],ATe],["y",["top","bottom"],NTe]];class qR{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=G_(n),a=zH(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of ITe)for(const l of s)Object.defineProperty(this,l,{get:()=>{const u=o(r),d=a[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jg{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function jTe(e){const{EventTarget:t}=rs(e);return e instanceof t?e:mm(e)}function uT(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Bs;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Bs||(Bs={}));function GP(e){e.preventDefault()}function DTe(e){e.stopPropagation()}var tr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(tr||(tr={}));const UH={start:[tr.Space,tr.Enter],cancel:[tr.Esc],end:[tr.Space,tr.Enter,tr.Tab]},MTe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case tr.Right:return{...n,x:n.x+25};case tr.Left:return{...n,x:n.x-25};case tr.Down:return{...n,y:n.y+25};case tr.Up:return{...n,y:n.y-25}}};class GR{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Jg(mm(n)),this.windowListeners=new Jg(rs(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bs.Resize,this.handleCancel),this.windowListeners.add(Bs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&RTe(r),n(Ao)}handleKeyDown(t){if(HR(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=UH,coordinateGetter:s=MTe,scrollBehavior:o="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Ao;this.referenceCoordinates||(this.referenceCoordinates=d);const h=s(t,{active:n,context:r.current,currentCoordinates:d});if(h){const m=hy(h,d),g={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const x=t.code,{isTop:w,isRight:_,isLeft:E,isBottom:C,maxScroll:k,minScroll:I}=$H(v),j=kTe(v),N={x:Math.min(x===tr.Right?j.right-j.width/2:j.right,Math.max(x===tr.Right?j.left:j.left+j.width/2,h.x)),y:Math.min(x===tr.Down?j.bottom-j.height/2:j.bottom,Math.max(x===tr.Down?j.top:j.top+j.height/2,h.y))},P=x===tr.Right&&!_||x===tr.Left&&!E,L=x===tr.Down&&!C||x===tr.Up&&!w;if(P&&N.x!==h.x){const H=v.scrollLeft+m.x,M=x===tr.Right&&H<=k.x||x===tr.Left&&H>=I.x;if(M&&!m.y){v.scrollTo({left:H,behavior:o});return}M?g.x=v.scrollLeft-H:g.x=x===tr.Right?v.scrollLeft-k.x:v.scrollLeft-I.x,g.x&&v.scrollBy({left:-g.x,behavior:o});break}else if(L&&N.y!==h.y){const H=v.scrollTop+m.y,M=x===tr.Down&&H<=k.y||x===tr.Up&&H>=I.y;if(M&&!m.x){v.scrollTo({top:H,behavior:o});return}M?g.y=v.scrollTop-H:g.y=x===tr.Down?v.scrollTop-k.y:v.scrollTop-I.y,g.y&&v.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(t,op(hy(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}GR.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=UH,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function WP(e){return!!(e&&"distance"in e)}function KP(e){return!!(e&&"delay"in e)}class WR{constructor(t,n,r){var a;r===void 0&&(r=jTe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=mm(s),this.documentListeners=new Jg(this.document),this.listeners=new Jg(r),this.windowListeners=new Jg(rs(s)),this.initialCoordinates=(a=Zk(i))!=null?a:Ao,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Bs.Resize,this.handleCancel),this.windowListeners.add(Bs.DragStart,GP),this.windowListeners.add(Bs.VisibilityChange,this.handleCancel),this.windowListeners.add(Bs.ContextMenu,GP),this.documentListeners.add(Bs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(KP(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(WP(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Bs.Click,DTe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bs.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const l=(n=Zk(t))!=null?n:Ao,u=hy(a,l);if(!r&&o){if(WP(o)){if(o.tolerance!=null&&uT(u,o.tolerance))return this.handleCancel();if(uT(u,o.distance))return this.handleStart()}if(KP(o)&&uT(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===tr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const OTe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class KR extends WR{constructor(t){const{event:n}=t,r=mm(n.target);super(t,OTe,r)}}KR.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const PTe={move:{name:"mousemove"},end:{name:"mouseup"}};var Xk;(function(e){e[e.RightClick=2]="RightClick"})(Xk||(Xk={}));class FTe extends WR{constructor(t){super(t,PTe,mm(t.event.target))}}FTe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Xk.RightClick?!1:(r==null||r({event:n}),!0)}}];const dT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class LTe extends WR{constructor(t){super(t,dT)}static setup(){return window.addEventListener(dT.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(dT.move.name,t)};function t(){}}}LTe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var Qg;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Qg||(Qg={}));var u1;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(u1||(u1={}));function BTe(e){let{acceleration:t,activator:n=Qg.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:o=u1.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:m}=e;const g=zTe({delta:h,disabled:!i}),[b,v]=XCe(),x=T.useRef({x:0,y:0}),w=T.useRef({x:0,y:0}),_=T.useMemo(()=>{switch(n){case Qg.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Qg.DraggableRect:return a}},[n,a,l]),E=T.useRef(null),C=T.useCallback(()=>{const I=E.current;if(!I)return;const j=x.current.x*w.current.x,N=x.current.y*w.current.y;I.scrollBy(j,N)},[]),k=T.useMemo(()=>o===u1.TreeOrder?[...u].reverse():u,[o,u]);T.useEffect(()=>{if(!i||!u.length||!_){v();return}for(const I of k){if((r==null?void 0:r(I))===!1)continue;const j=u.indexOf(I),N=d[j];if(!N)continue;const{direction:P,speed:L}=TTe(I,N,_,t,m);for(const H of["x","y"])g[H][P[H]]||(L[H]=0,P[H]=0);if(L.x>0||L.y>0){v(),E.current=I,b(C,s),x.current=L,w.current=P;return}}x.current={x:0,y:0},w.current={x:0,y:0},v()},[t,C,r,v,i,s,JSON.stringify(_),JSON.stringify(g),b,u,k,d,JSON.stringify(m)])}const $Te={x:{[za.Backward]:!1,[za.Forward]:!1},y:{[za.Backward]:!1,[za.Forward]:!1}};function zTe(e){let{delta:t,disabled:n}=e;const r=Kk(t);return db(a=>{if(n||!r||!a)return $Te;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[za.Backward]:a.x[za.Backward]||i.x===-1,[za.Forward]:a.x[za.Forward]||i.x===1},y:{[za.Backward]:a.y[za.Backward]||i.y===-1,[za.Forward]:a.y[za.Forward]||i.y===1}}},[n,t,r])}function UTe(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return db(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function VTe(e,t){return T.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var my;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(my||(my={}));var Jk;(function(e){e.Optimized="optimized"})(Jk||(Jk={}));const ZP=new Map;function HTe(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=T.useState(null),{frequency:o,measure:l,strategy:u}=a,d=T.useRef(e),h=x(),m=fy(h),g=T.useCallback(function(w){w===void 0&&(w=[]),!m.current&&s(_=>_===null?w:_.concat(w.filter(E=>!_.includes(E))))},[m]),b=T.useRef(null),v=db(w=>{if(h&&!n)return ZP;if(!w||w===ZP||d.current!==e||i!=null){const _=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){_.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new qR(l(C),C):null;E.rect.current=k,k&&_.set(E.id,k)}return _}return w},[e,i,n,h,l]);return T.useEffect(()=>{d.current=e},[e]),T.useEffect(()=>{h||g()},[n,h]),T.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),T.useEffect(()=>{h||typeof o!="number"||b.current!==null||(b.current=setTimeout(()=>{g(),b.current=null},o))},[o,h,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:i!=null};function x(){switch(u){case my.Always:return!1;case my.BeforeDragging:return n;default:return!n}}}function VH(e,t){return db(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function qTe(e,t){return VH(e,t)}function GTe(e){let{callback:t,disabled:n}=e;const r=VR(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function W_(e){let{callback:t,disabled:n}=e;const r=VR(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function WTe(e){return new qR(gm(e),e)}function YP(e,t,n){t===void 0&&(t=WTe);const[r,a]=T.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const s=GTe({callback(l){if(e)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=W_({callback:i});return vl(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),r}function KTe(e){const t=VH(e);return OH(e,t)}const XP=[];function ZTe(e){const t=T.useRef(e),n=db(r=>e?r&&r!==XP&&e&&t.current&&e.parentNode===t.current.parentNode?r:G_(e):XP,[e]);return T.useEffect(()=>{t.current=e},[e]),n}function YTe(e){const[t,n]=T.useState(null),r=T.useRef(e),a=T.useCallback(i=>{const s=cT(i.target);s&&n(o=>o?(o.set(s,Yk(s)),new Map(o)):null)},[]);return T.useEffect(()=>{const i=r.current;if(e!==i){s(i);const o=e.map(l=>{const u=cT(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Yk(u)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(l=>{const u=cT(l);u==null||u.removeEventListener("scroll",a)})}},[a,e]),T.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>op(i,s),Ao):zH(e):Ao,[e,t])}function JP(e,t){t===void 0&&(t=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},t),T.useEffect(()=>{const r=e!==Ao;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?hy(e,n.current):Ao}function XTe(e){T.useEffect(()=>{if(!q_)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function JTe(e,t){return T.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=s=>{i(s,t)},n},{}),[e,t])}function HH(e){return T.useMemo(()=>e?_Te(e):null,[e])}const QP=[];function QTe(e,t){t===void 0&&(t=gm);const[n]=e,r=HH(n?rs(n):null),[a,i]=T.useState(QP);function s(){i(()=>e.length?e.map(l=>BH(l)?r:new qR(t(l),l)):QP)}const o=W_({callback:s});return vl(()=>{o==null||o.disconnect(),s(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),a}function eke(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ub(t)?t:e}function tke(e){let{measure:t}=e;const[n,r]=T.useState(null),a=T.useCallback(u=>{for(const{target:d}of u)if(ub(d)){r(h=>{const m=t(d);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=W_({callback:a}),s=T.useCallback(u=>{const d=eke(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[o,l]=l1(s);return T.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const nke=[{sensor:KR,options:{}},{sensor:GR,options:{}}],rke={current:{}},Hw={draggable:{measure:qP},droppable:{measure:qP,strategy:my.WhileDragging,frequency:Jk.Optimized},dragOverlay:{measure:gm}};class e0 extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const ake={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new e0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:c1},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Hw,measureDroppableContainers:c1,windowRect:null,measuringScheduled:!1},ike={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:c1,draggableNodes:new Map,over:null,measureDroppableContainers:c1},K_=T.createContext(ike),qH=T.createContext(ake);function ske(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new e0}}}function oke(e,t){switch(t.type){case Aa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Aa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Aa.DragEnd:case Aa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Aa.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new e0(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case Aa.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new e0(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case Aa.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new e0(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function lke(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=T.useContext(K_),i=Kk(r),s=Kk(n==null?void 0:n.id);return T.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!HR(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=eTe(d);if(h){h.focus();break}}})}},[r,t,a,s,i]),null}function cke(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function uke(e){return T.useMemo(()=>({draggable:{...Hw.draggable,...e==null?void 0:e.draggable},droppable:{...Hw.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Hw.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function dke(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=T.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;vl(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=OH(d,r);if(s||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=PH(u);m&&m.scrollBy({top:h.y,left:h.x})}},[t,s,o,r,n])}const GH=T.createContext({...Ao,scaleX:1,scaleY:1});var Su;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Su||(Su={}));const fke=T.memo(function(t){var n,r,a,i;let{id:s,accessibility:o,autoScroll:l=!0,children:u,sensors:d=nke,collisionDetection:h=mTe,measuring:m,modifiers:g,...b}=t;const v=T.useReducer(oke,void 0,ske),[x,w]=v,[_,E]=sTe(),[C,k]=T.useState(Su.Uninitialized),I=C===Su.Initialized,{draggable:{active:j,nodes:N,translate:P},droppable:{containers:L}}=x,H=j!=null?N.get(j):null,M=T.useRef({initial:null,translated:null}),K=T.useMemo(()=>{var nt;return j!=null?{id:j,data:(nt=H==null?void 0:H.data)!=null?nt:rke,rect:M}:null},[j,H]),q=T.useRef(null),[ue,ae]=T.useState(null),[te,Y]=T.useState(null),ie=fy(b,Object.values(b)),V=fb("DndDescribedBy",s),J=T.useMemo(()=>L.getEnabled(),[L]),Q=uke(m),{droppableRects:ne,measureDroppableContainers:he,measuringScheduled:de}=HTe(J,{dragging:I,dependencies:[P.x,P.y],config:Q.droppable}),Ie=UTe(N,j),ke=T.useMemo(()=>te?Zk(te):null,[te]),Te=$e(),Se=qTe(Ie,Q.draggable.measure);dke({activeNode:j!=null?N.get(j):null,config:Te.layoutShiftCompensation,initialRect:Se,measure:Q.draggable.measure});const Pe=YP(Ie,Q.draggable.measure,Se),Qe=YP(Ie?Ie.parentElement:null),Le=T.useRef({activatorEvent:null,active:null,activeNode:Ie,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),je=L.getNodeFor((n=Le.current.over)==null?void 0:n.id),z=tke({measure:Q.dragOverlay.measure}),Ee=(r=z.nodeRef.current)!=null?r:Ie,Ne=I?(a=z.rect)!=null?a:Pe:null,fe=!!(z.nodeRef.current&&z.rect),se=KTe(fe?null:Pe),ee=HH(Ee?rs(Ee):null),xe=ZTe(I?je??Ie:null),Fe=QTe(xe),Ce=cke(g,{transform:{x:P.x-se.x,y:P.y-se.y,scaleX:1,scaleY:1},activatorEvent:te,active:K,activeNodeRect:Pe,containerNodeRect:Qe,draggingNodeRect:Ne,over:Le.current.over,overlayNodeRect:z.rect,scrollableAncestors:xe,scrollableAncestorRects:Fe,windowRect:ee}),We=ke?op(ke,P):null,Nt=YTe(xe),it=JP(Nt),St=JP(Nt,[Pe]),Ft=op(Ce,it),Mt=Ne?bTe(Ne,Ce):null,Kt=K&&Mt?h({active:K,collisionRect:Mt,droppableRects:ne,droppableContainers:J,pointerCoordinates:We}):null,be=MH(Kt,"id"),[D,W]=T.useState(null),pe=fe?Ce:op(Ce,St),De=gTe(pe,(i=D==null?void 0:D.rect)!=null?i:null,Pe),ve=T.useRef(null),Ae=T.useCallback((nt,ye)=>{let{sensor:Me,options:Ke}=ye;if(q.current==null)return;const Dt=N.get(q.current);if(!Dt)return;const ge=nt.nativeEvent,G=new Me({active:q.current,activeNode:Dt,event:ge,options:Ke,context:Le,onAbort(Z){if(!N.get(Z))return;const{onDragAbort:Re}=ie.current,Ve={id:Z};Re==null||Re(Ve),_({type:"onDragAbort",event:Ve})},onPending(Z,me,Re,Ve){if(!N.get(Z))return;const{onDragPending:Wt}=ie.current,ut={id:Z,constraint:me,initialCoordinates:Re,offset:Ve};Wt==null||Wt(ut),_({type:"onDragPending",event:ut})},onStart(Z){const me=q.current;if(me==null)return;const Re=N.get(me);if(!Re)return;const{onDragStart:Ve}=ie.current,pt={activatorEvent:ge,active:{id:me,data:Re.data,rect:M}};il.unstable_batchedUpdates(()=>{Ve==null||Ve(pt),k(Su.Initializing),w({type:Aa.DragStart,initialCoordinates:Z,active:me}),_({type:"onDragStart",event:pt}),ae(ve.current),Y(ge)})},onMove(Z){w({type:Aa.DragMove,coordinates:Z})},onEnd:U(Aa.DragEnd),onCancel:U(Aa.DragCancel)});ve.current=G;function U(Z){return async function(){const{active:Re,collisions:Ve,over:pt,scrollAdjustedTranslate:Wt}=Le.current;let ut=null;if(Re&&Wt){const{cancelDrop:Rt}=ie.current;ut={activatorEvent:ge,active:Re,collisions:Ve,delta:Wt,over:pt},Z===Aa.DragEnd&&typeof Rt=="function"&&await Promise.resolve(Rt(ut))&&(Z=Aa.DragCancel)}q.current=null,il.unstable_batchedUpdates(()=>{w({type:Z}),k(Su.Uninitialized),W(null),ae(null),Y(null),ve.current=null;const Rt=Z===Aa.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Lt=ie.current[Rt];Lt==null||Lt(ut),_({type:Rt,event:ut})}})}}},[N]),le=T.useCallback((nt,ye)=>(Me,Ke)=>{const Dt=Me.nativeEvent,ge=N.get(Ke);if(q.current!==null||!ge||Dt.dndKit||Dt.defaultPrevented)return;const G={active:ge};nt(Me,ye.options,G)===!0&&(Dt.dndKit={capturedBy:ye.sensor},q.current=Ke,Ae(Me,ye))},[N,Ae]),ft=VTe(d,le);XTe(d),vl(()=>{Pe&&C===Su.Initializing&&k(Su.Initialized)},[Pe,C]),T.useEffect(()=>{const{onDragMove:nt}=ie.current,{active:ye,activatorEvent:Me,collisions:Ke,over:Dt}=Le.current;if(!ye||!Me)return;const ge={active:ye,activatorEvent:Me,collisions:Ke,delta:{x:Ft.x,y:Ft.y},over:Dt};il.unstable_batchedUpdates(()=>{nt==null||nt(ge),_({type:"onDragMove",event:ge})})},[Ft.x,Ft.y]),T.useEffect(()=>{const{active:nt,activatorEvent:ye,collisions:Me,droppableContainers:Ke,scrollAdjustedTranslate:Dt}=Le.current;if(!nt||q.current==null||!ye||!Dt)return;const{onDragOver:ge}=ie.current,G=Ke.get(be),U=G&&G.rect.current?{id:G.id,rect:G.rect.current,data:G.data,disabled:G.disabled}:null,Z={active:nt,activatorEvent:ye,collisions:Me,delta:{x:Dt.x,y:Dt.y},over:U};il.unstable_batchedUpdates(()=>{W(U),ge==null||ge(Z),_({type:"onDragOver",event:Z})})},[be]),vl(()=>{Le.current={activatorEvent:te,active:K,activeNode:Ie,collisionRect:Mt,collisions:Kt,droppableRects:ne,draggableNodes:N,draggingNode:Ee,draggingNodeRect:Ne,droppableContainers:L,over:D,scrollableAncestors:xe,scrollAdjustedTranslate:Ft},M.current={initial:Ne,translated:Mt}},[K,Ie,Kt,Mt,N,Ee,Ne,ne,L,D,xe,Ft]),BTe({...Te,delta:P,draggingRect:Mt,pointerCoordinates:We,scrollableAncestors:xe,scrollableAncestorRects:Fe});const vt=T.useMemo(()=>({active:K,activeNode:Ie,activeNodeRect:Pe,activatorEvent:te,collisions:Kt,containerNodeRect:Qe,dragOverlay:z,draggableNodes:N,droppableContainers:L,droppableRects:ne,over:D,measureDroppableContainers:he,scrollableAncestors:xe,scrollableAncestorRects:Fe,measuringConfiguration:Q,measuringScheduled:de,windowRect:ee}),[K,Ie,Pe,te,Kt,Qe,z,N,L,ne,D,he,xe,Fe,Q,de,ee]),F=T.useMemo(()=>({activatorEvent:te,activators:ft,active:K,activeNodeRect:Pe,ariaDescribedById:{draggable:V},dispatch:w,draggableNodes:N,over:D,measureDroppableContainers:he}),[te,ft,K,Pe,w,V,N,D,he]);return gt.createElement(IH.Provider,{value:E},gt.createElement(K_.Provider,{value:F},gt.createElement(qH.Provider,{value:vt},gt.createElement(GH.Provider,{value:De},u)),gt.createElement(lke,{disabled:(o==null?void 0:o.restoreFocus)===!1})),gt.createElement(cTe,{...o,hiddenTextDescribedById:V}));function $e(){const nt=(ue==null?void 0:ue.autoScrollEnabled)===!1,ye=typeof l=="object"?l.enabled===!1:l===!1,Me=I&&!nt&&!ye;return typeof l=="object"?{...l,enabled:Me}:{enabled:Me}}}),hke=T.createContext(null),e8="button",pke="Draggable";function mke(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=fb(pke),{activators:s,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:m}=T.useContext(K_),{role:g=e8,roleDescription:b="draggable",tabIndex:v=0}=a??{},x=(l==null?void 0:l.id)===t,w=T.useContext(x?GH:hke),[_,E]=l1(),[C,k]=l1(),I=JTe(s,t),j=fy(n);vl(()=>(h.set(t,{id:t,key:i,node:_,activatorNode:C,data:j}),()=>{const P=h.get(t);P&&P.key===i&&h.delete(t)}),[h,t]);const N=T.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":x&&g===e8?!0:void 0,"aria-roledescription":b,"aria-describedby":d.draggable}),[r,g,v,x,b,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:N,isDragging:x,listeners:r?void 0:I,node:_,over:m,setNodeRef:E,setActivatorNodeRef:k,transform:w}}function gke(){return T.useContext(qH)}const yke="Droppable",bke={timeout:25};function vke(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=fb(yke),{active:s,dispatch:o,over:l,measureDroppableContainers:u}=T.useContext(K_),d=T.useRef({disabled:n}),h=T.useRef(!1),m=T.useRef(null),g=T.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:x}={...bke,...a},w=fy(v??r),_=T.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),g.current=null},x)},[x]),E=W_({callback:_,disabled:b||!s}),C=T.useCallback((N,P)=>{E&&(P&&(E.unobserve(P),h.current=!1),N&&E.observe(N))},[E]),[k,I]=l1(C),j=fy(t);return T.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),T.useEffect(()=>(o({type:Aa.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:m,data:j}}),()=>o({type:Aa.UnregisterDroppable,key:i,id:r})),[r]),T.useEffect(()=>{n!==d.current.disabled&&(o({type:Aa.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:s,rect:m,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:I}}function ZR(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function wke(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function Tw(e){return e!==null&&e>=0}function xke(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function _ke(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const WH=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=ZR(t,r,n),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},kw={scaleX:1,scaleY:1},Ske=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=(t=i[n])!=null?t:r;if(!o)return null;if(a===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(o.top+o.height):u.top-o.top,...kw}:null}const l=Eke(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-l,...kw}:a<n&&a>=s?{x:0,y:o.height+l,...kw}:{x:0,y:0,...kw}};function Eke(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const KH="Sortable",ZH=gt.createContext({activeIndex:-1,containerId:KH,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:WH,disabled:{draggable:!1,droppable:!1}});function Cke(e){let{children:t,id:n,items:r,strategy:a=WH,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:d}=gke(),h=fb(KH,n),m=o.rect!==null,g=T.useMemo(()=>r.map(I=>typeof I=="object"&&"id"in I?I.id:I),[r]),b=s!=null,v=s?g.indexOf(s.id):-1,x=u?g.indexOf(u.id):-1,w=T.useRef(g),_=!xke(g,w.current),E=x!==-1&&v===-1||_,C=_ke(i);vl(()=>{_&&b&&d(g)},[_,g,b,d]),T.useEffect(()=>{w.current=g},[g]);const k=T.useMemo(()=>({activeIndex:v,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:x,useDragOverlay:m,sortedRects:wke(g,l),strategy:a}),[v,h,C.draggable,C.droppable,E,g,x,l,m,a]);return gt.createElement(ZH.Provider,{value:k},t)}const Tke=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return ZR(n,r,a).indexOf(t)},kke=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:l,transition:u}=e;return!u||!r||o!==i&&a===s?!1:n?!0:s!==a&&t===l},Ake={duration:200,easing:"ease"},YH="transform",Nke=py.Transition.toString({property:YH,duration:0,easing:"linear"}),Rke={roleDescription:"sortable"};function Ike(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=T.useState(null),o=T.useRef(n);return vl(()=>{if(!t&&n!==o.current&&r.current){const l=a.current;if(l){const u=gm(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&s(d)}}n!==o.current&&(o.current=n)},[t,n,r,a]),T.useEffect(()=>{i&&s(null)},[i]),i}function jke(e){let{animateLayoutChanges:t=kke,attributes:n,disabled:r,data:a,getNewIndex:i=Tke,id:s,strategy:o,resizeObserverConfig:l,transition:u=Ake}=e;const{items:d,containerId:h,activeIndex:m,disabled:g,disableTransforms:b,sortedRects:v,overIndex:x,useDragOverlay:w,strategy:_}=T.useContext(ZH),E=Dke(r,g),C=d.indexOf(s),k=T.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...a}),[h,a,C,d]),I=T.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:j,node:N,isOver:P,setNodeRef:L}=vke({id:s,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...l}}),{active:H,activatorEvent:M,activeNodeRect:K,attributes:q,setNodeRef:ue,listeners:ae,isDragging:te,over:Y,setActivatorNodeRef:ie,transform:V}=mke({id:s,data:k,attributes:{...Rke,...n},disabled:E.draggable}),J=YCe(L,ue),Q=!!H,ne=Q&&!b&&Tw(m)&&Tw(x),he=!w&&te,de=he&&ne?V:null,ke=ne?de??(o??_)({rects:v,activeNodeRect:K,activeIndex:m,overIndex:x,index:C}):null,Te=Tw(m)&&Tw(x)?i({id:s,items:d,activeIndex:m,overIndex:x}):C,Se=H==null?void 0:H.id,Pe=T.useRef({activeId:Se,items:d,newIndex:Te,containerId:h}),Qe=d!==Pe.current.items,Le=t({active:H,containerId:h,isDragging:te,isSorting:Q,id:s,index:C,items:d,newIndex:Pe.current.newIndex,previousItems:Pe.current.items,previousContainerId:Pe.current.containerId,transition:u,wasDragging:Pe.current.activeId!=null}),je=Ike({disabled:!Le,index:C,node:N,rect:j});return T.useEffect(()=>{Q&&Pe.current.newIndex!==Te&&(Pe.current.newIndex=Te),h!==Pe.current.containerId&&(Pe.current.containerId=h),d!==Pe.current.items&&(Pe.current.items=d)},[Q,Te,h,d]),T.useEffect(()=>{if(Se===Pe.current.activeId)return;if(Se!=null&&Pe.current.activeId==null){Pe.current.activeId=Se;return}const Ee=setTimeout(()=>{Pe.current.activeId=Se},50);return()=>clearTimeout(Ee)},[Se]),{active:H,activeIndex:m,attributes:q,data:k,rect:j,index:C,newIndex:Te,items:d,isOver:P,isSorting:Q,isDragging:te,listeners:ae,node:N,overIndex:x,over:Y,setNodeRef:J,setActivatorNodeRef:ie,setDroppableNodeRef:L,setDraggableNodeRef:ue,transform:je??ke,transition:z()};function z(){if(je||Qe&&Pe.current.newIndex===C)return Nke;if(!(he&&!HR(M)||!u)&&(Q||Le))return py.Transition.toString({...u,property:YH})}}function Dke(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function d1(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Mke=[tr.Down,tr.Right,tr.Up,tr.Left],Oke=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(Mke.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=a.get(h.id);if(m)switch(e.code){case tr.Down:r.top<m.top&&l.push(h);break;case tr.Up:r.top>m.top&&l.push(h);break;case tr.Left:r.left>m.left&&l.push(h);break;case tr.Right:r.left<m.left&&l.push(h);break}});const u=hTe({collisionRect:r,droppableRects:a,droppableContainers:l});let d=MH(u,"id");if(d===(s==null?void 0:s.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),m=i.get(d),g=m?a.get(m.id):null,b=m==null?void 0:m.node.current;if(b&&g&&h&&m){const x=G_(b).some((I,j)=>o[j]!==I),w=XH(h,m),_=Pke(h,m),E=x||!w?{x:0,y:0}:{x:_?r.width-g.width:0,y:_?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:hy(C,E)}}}};function XH(e,t){return!d1(e)||!d1(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Pke(e,t){return!d1(e)||!d1(t)||!XH(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Fke=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:l}=jke({id:e,disabled:n}),u={transform:py.Transform.toString(s),transition:o,zIndex:l?10:void 0,opacity:n?.5:1};return p.jsxs("div",{ref:i,style:u,...r,...a,className:xt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[p.jsx(MZ,{className:xt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),p.jsx(Zt,{className:xt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},Lke=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAllAvailableModelDefsForProvider:a}=Un(dn(m=>({setGlobalModelSortOrder:m.setGlobalModelSortOrder,dbProviderConfigs:m.dbProviderConfigs,globalModelSortOrder:m.globalModelSortOrder,isLoading:m.isLoading,getAllAvailableModelDefsForProvider:m.getAllAvailableModelDefsForProvider}))),[i,s]=T.useState(""),o=T.useMemo(()=>{const m=new Map,g=new Set;t.forEach(w=>{if(!w.isEnabled||!w.enabledModels)return;const _=a(w.id),E=new Map(_.map(C=>[C.id,C]));w.enabledModels.forEach(C=>{const k=Cu(w.id,C),I=E.get(C);I&&(g.add(k),m.set(k,{id:k,name:I.name||C,providerId:w.id,providerName:w.name,metadata:I}))})});const b=[],v=new Set;n.forEach(w=>{if(g.has(w)){const _=m.get(w);_&&!v.has(w)&&(b.push(_),v.add(w))}});const x=Array.from(g).filter(w=>!v.has(w)).map(w=>m.get(w)).filter(w=>!!w).sort((w,_)=>w.name.localeCompare(_.name));return[...b,...x]},[t,n,a]),l=T.useMemo(()=>{if(!i.trim())return o;const m=i.toLowerCase();return o.filter(g=>g.name.toLowerCase().includes(m)||g.providerName.toLowerCase().includes(m)||g.id.toLowerCase().includes(m))},[o,i]),u=T.useMemo(()=>l.map(m=>m.id),[l]),d=T.useCallback(m=>{const{active:g,over:b}=m;if(b&&g.id!==b.id){const v=o.map(C=>C.id),x=g.id,w=b.id,_=v.indexOf(x),E=v.indexOf(w);if(_!==-1&&E!==-1){const C=ZR(v,_,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[o,e]),h=uTe(UP(KR),UP(GR,{coordinateGetter:Oke}));return r?p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx(lr,{className:"h-8 w-1/3"}),p.jsx(lr,{className:"h-6 w-1/2"}),p.jsx(lr,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),p.jsx(mo,{}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(Zt,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),p.jsxs("div",{className:"relative",children:[p.jsx(wo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:m=>s(m.target.value),className:"pl-8 w-full",disabled:r})]}),p.jsx(Ku,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?p.jsx(fke,{sensors:h,collisionDetection:fTe,onDragEnd:d,children:p.jsx(Cke,{items:u,strategy:Ske,children:l.map(m=>p.jsx(Fke,{id:m.id,name:`${m.name} (${m.providerName})`},m.id))})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},Bke=({modelId:e})=>{var s,o,l,u,d,h,m,g,b,v,x,w,_;const{getProviderById:t,getAllAvailableModelDefsForProvider:n}=Un(E=>({getProviderById:C=>E.dbProviderConfigs.find(k=>k.id===C),getAllAvailableModelDefsForProvider:E.getAllAvailableModelDefsForProvider})),r=T.useMemo(()=>{if(!e)return null;const{providerId:E,modelId:C}=Ac(e);if(!E||!C)return null;const k=t(E);if(!k)return null;const j=n(E).find(N=>N.id===C);return j?{...j,providerName:k.name}:null},[e,t,n]);if(!r)return p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select a model from a provider's list to view its details."});const a=E=>{if(!E)return"N/A";const C=parseFloat(E);return isNaN(C)||C===0?"Free":`$${C.toFixed(4)} / 1M tokens`},i=E=>E?`${E.toLocaleString()} tokens`:"Unknown";return p.jsx(Ku,{className:"h-full p-1",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-xl font-semibold",children:[r.name," ",p.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.providerName,")"]})]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:r.id}),r.description&&p.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:p.jsx("p",{children:r.description})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Context & Limits"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Context Length:"})," ",i(((s=r.top_provider)==null?void 0:s.context_length)??r.context_length)]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Max Completion Tokens:"})," ",(o=r.top_provider)!=null&&o.max_completion_tokens?r.top_provider.max_completion_tokens.toLocaleString():"Default"]}),r.per_request_limits&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Request Limits:"})," ",p.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.per_request_limits,null,2)})]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Pricing (per 1M tokens)"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Prompt:"})," ",a((l=r.pricing)==null?void 0:l.prompt)]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Completion:"})," ",a((u=r.pricing)==null?void 0:u.completion)]}),((d=r.pricing)==null?void 0:d.request)&&parseFloat(r.pricing.request)>0&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Request:"})," $",parseFloat(r.pricing.request).toFixed(6)]}),((h=r.pricing)==null?void 0:h.image)&&parseFloat(r.pricing.image)>0&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Image:"})," $",parseFloat(r.pricing.image).toFixed(6)]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Architecture"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Modality:"})," ",((m=r.architecture)==null?void 0:m.modality)??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Input Modalities:"})," ",((b=(g=r.architecture)==null?void 0:g.input_modalities)==null?void 0:b.join(", "))??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Output Modalities:"})," ",((x=(v=r.architecture)==null?void 0:v.output_modalities)==null?void 0:x.join(", "))??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Tokenizer:"})," ",((w=r.architecture)==null?void 0:w.tokenizer)??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Instruct Type:"})," ",((_=r.architecture)==null?void 0:_.instruct_type)??"N/A"]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Supported Parameters"}),p.jsx("div",{className:"flex flex-wrap gap-1",children:r.supported_parameters&&r.supported_parameters.length>0?r.supported_parameters.map(E=>p.jsx(Yg,{variant:"secondary",children:E},E)):p.jsx("span",{className:"text-muted-foreground italic",children:"None specified"})})]})]})]})})},$ke=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=Un(dn(m=>({apiKeys:m.dbApiKeys,addApiKey:m.addApiKey,deleteApiKey:m.deleteApiKey,isLoading:m.isLoading}))),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,u]=T.useState({}),d=T.useCallback(async(m,g,b)=>{o(!0);try{await t(m,g,b),i(!1)}catch(v){console.error("Failed to add API key (from component):",v)}finally{o(!1)}},[t]),h=T.useCallback(async(m,g)=>{if(window.confirm(`Are you sure you want to delete the API key "${g}"? This will unlink it from any providers using it.`)){u(b=>({...b,[m]:!0}));try{await n(m)}catch(b){console.error("Failed to delete API key (from component):",b)}finally{u(b=>({...b,[m]:!1}))}}},[n]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!a&&p.jsxs(It,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[p.jsx(Sf,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),a&&p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),p.jsx(Dz,{onSave:d,onCancel:()=>i(!1),isSaving:s})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!a?p.jsxs("div",{className:"space-y-2",children:[p.jsx(lr,{className:"h-10 w-full"}),p.jsx(lr,{className:"h-10 w-full"})]}):(e||[]).length===0&&!a?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(dm,{children:[p.jsx(fm,{children:p.jsxs(Jr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{children:"Provider Type"}),p.jsx(Nr,{children:"Created"}),p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(hm,{children:(e||[]).map(m=>{const g=l[m.id];return p.jsxs(Jr,{className:g?"opacity-50":"",children:[p.jsx(Fn,{className:"font-medium",children:m.name||"Unnamed Key"}),p.jsx(Fn,{children:m.providerId||"Unknown"}),p.jsx(Fn,{className:"text-xs text-muted-foreground",children:ak(new Date(m.createdAt),"PPp")}),p.jsx(Fn,{className:"text-right",children:p.jsx(Dn,{tooltipText:"Delete Key",onClick:()=>h(m.id,m.name||"Unnamed Key"),disabled:g,"aria-label":`Delete key ${m.name||"Unnamed Key"}`,icon:g?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},m.id)})})]})})]})]})},zke=gt.memo($ke),Uke=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:s,apiKeys:o,isLoading:l}=Un(dn(v=>({addDbProviderConfig:v.addProviderConfig,updateDbProviderConfig:v.updateProviderConfig,deleteDbProviderConfig:v.deleteProviderConfig,fetchModels:v.fetchModels,providerFetchStatus:v.providerFetchStatus,dbProviderConfigs:v.dbProviderConfigs,apiKeys:v.dbApiKeys,isLoading:v.isLoading}))),[u,d]=T.useState(!1),h=()=>d(!0),m=T.useCallback(()=>d(!1),[]),g=T.useCallback(async v=>{await a(v)},[a]),b=T.useMemo(()=>s||[],[s]);return p.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),p.jsx("div",{className:"flex-shrink-0",children:u?p.jsx($z,{apiKeys:o||[],onAddProvider:t,onCancel:m}):p.jsxs(It,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[p.jsx(Sf,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),p.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:p.jsxs("div",{className:"space-y-2",children:[l&&!u?p.jsx(p.Fragment,{children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsx(lr,{className:"h-24 w-full"}),p.jsx(lr,{className:"h-24 w-full"}),p.jsx(lr,{className:"h-24 w-full"})]})}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:b.map(v=>p.jsx(NCe,{provider:v,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:g,fetchStatus:i[v.id]||"idle",onSelectModelForDetails:e},v.id))}),!l&&b.length===0&&!u&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},Vke=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=Un(dn(s=>({selectedModelForDetails:s._selectedModelForDetails,setSelectedModelForDetails:s.setSelectedModelForDetails}))),[n,r]=T.useState("providers-config"),a=T.useCallback(s=>{t(s),s&&r("providers-details")},[t]),i=T.useMemo(()=>[{value:"providers-config",label:"Configuration",content:p.jsx(Uke,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:p.jsx(Lke,{})},{value:"api-keys",label:"API Keys",content:p.jsx(zke,{})},{value:"providers-details",label:"Model Details",content:p.jsx(Bke,{modelId:e})}],[e,a]);return p.jsx(hd,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},Hke=gt.memo(Vke),Bg=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:s})=>p.jsxs("div",{className:xt("space-y-3",r),children:[p.jsxs("div",{children:[p.jsx("h3",{className:xt("text-lg font-medium",a),children:e}),t&&p.jsx("p",{className:xt("text-sm text-muted-foreground",i),children:t})]}),p.jsx("div",{className:xt(s),children:n})]}),qke=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=pr(dn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return p.jsx("div",{className:"space-y-6 p-1",children:p.jsx(Bg,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"git-user-name",children:"Git User Name"}),p.jsx(Rn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"git-user-email",children:"Git User Email"}),p.jsx(Rn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},Gke=gt.memo(qke),Wke=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:s}=mn(dn(N=>({syncRepos:N.syncRepos,addSyncRepo:N.addSyncRepo,updateSyncRepo:N.updateSyncRepo,deleteSyncRepo:N.deleteSyncRepo,initializeOrSyncRepo:N.initializeOrSyncRepo,repoInitializationStatus:N.repoInitializationStatus,isLoading:N.isLoading}))),[o,l]=T.useState(!1),[u,d]=T.useState(null),[h,m]=T.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,b]=T.useState(!1),[v,x]=T.useState({}),w=T.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),b(!1)},[]),_=T.useCallback((N,P)=>{m(L=>({...L,[N]:P}))},[]),E=T.useCallback(async()=>{var N,P,L,H;if(!((N=h.name)!=null&&N.trim())||!((P=h.remoteUrl)!=null&&P.trim())){Ge.error("Repository Name and Remote URL are required.");return}b(!0);try{const M={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((L=h.branch)==null?void 0:L.trim())||"main",username:((H=h.username)==null?void 0:H.trim())||null,password:h.password||null};u?await n(u,M):await t(M),w()}catch(M){console.error("Failed to save sync repo:",M)}finally{b(!1)}},[h,u,t,n,w]),C=N=>{d(N.id),m({name:N.name,remoteUrl:N.remoteUrl,branch:N.branch||"main",username:N.username??"",password:N.password??""}),l(!1)},k=T.useCallback(async(N,P)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${P}"? This will unlink it from any conversations and remove the local copy.`)){x(L=>({...L,[N]:!0}));try{await r(N),u===N&&w()}catch(L){console.error("Failed to delete sync repo:",L)}finally{x(L=>({...L,[N]:!1}))}}},[r,u,w]),I=T.useCallback(async N=>{await a(N)},[a]),j=()=>{var N,P;return p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:u?"Edit Sync Repository":"Add New Sync Repository"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Zt,{htmlFor:"repo-name",children:"Name"}),p.jsx(Rn,{id:"repo-name",value:h.name||"",onChange:L=>_("name",L.target.value),placeholder:"e.g., My Backup",required:!0,className:"mt-1",disabled:g})]}),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsx(Zt,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),p.jsx(Rn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:L=>_("remoteUrl",L.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Zt,{htmlFor:"repo-branch",children:"Branch"}),p.jsx(Rn,{id:"repo-branch",value:h.branch||"",onChange:L=>_("branch",L.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Zt,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),p.jsxs(cH,{variant:"destructive",className:"mt-2 mb-3",children:[p.jsx(dA,{className:"h-4 w-4"}),p.jsx(uH,{children:"Security Warning"}),p.jsx(dH,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"repo-username",children:"Username"}),p.jsx(Rn,{id:"repo-username",value:h.username||"",onChange:L=>_("username",L.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"repo-password",children:"Password / Token"}),p.jsx(Rn,{id:"repo-password",type:"password",value:h.password||"",onChange:L=>_("password",L.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:w,disabled:g,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((N=h.name)!=null&&N.trim())||!((P=h.remoteUrl)!=null&&P.trim()),type:"button",children:[g&&p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ef,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!o&&!u&&p.jsxs(It,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:s,children:[p.jsx(Sf,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||u)&&j(),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),s&&!o&&!u?p.jsxs("div",{className:"space-y-2",children:[p.jsx(lr,{className:"h-10 w-full"}),p.jsx(lr,{className:"h-10 w-full"}),p.jsx(lr,{className:"h-10 w-full"})]}):e.length===0&&!o&&!u?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):p.jsxs("div",{className:"border rounded-md overflow-x-auto",children:[" ",p.jsxs(dm,{children:[p.jsx(fm,{children:p.jsxs(Jr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{className:"hidden md:table-cell",children:"Remote URL"})," ",p.jsx(Nr,{className:"hidden lg:table-cell",children:"Branch"})," ",p.jsx(Nr,{className:"hidden lg:table-cell",children:"Auth"})," ",p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(hm,{children:e.map(N=>{const P=v[N.id],L=u===N.id,H=!!N.username||!!N.password,M=i[N.id]||"idle",q=P||g||!!u||M==="syncing";let ue=null,ae="Initialize/Sync Repository";return M==="syncing"?(ue=p.jsx(Pn,{className:"h-4 w-4 animate-spin mr-1"}),ae="Initializing/Syncing..."):M==="idle"?(ue=p.jsx(rA,{className:"h-4 w-4 text-green-500 mr-1"}),ae="Sync Successful / Ready"):M==="error"?(ue=p.jsx(cf,{className:"h-4 w-4 text-destructive mr-1"}),ae="Sync Failed"):ue=p.jsx(m1,{className:"h-4 w-4 mr-1"}),p.jsxs(Jr,{className:xt(L?"bg-muted/50":"",q&&!L?"opacity-70":""),children:[p.jsx(Fn,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:N.name}),p.jsx(Fn,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:N.remoteUrl}),p.jsx(Fn,{className:"hidden lg:table-cell",children:N.branch||"main"}),p.jsx(Fn,{className:"text-xs hidden lg:table-cell",children:H?"Configured":"None"}),p.jsxs(Fn,{className:"text-right space-x-1",children:[p.jsx(Dn,{tooltipText:ae,onClick:()=>I(N.id),"aria-label":`Initialize or Sync repo ${N.name}`,disabled:q,icon:ue,variant:"outline",className:"h-8 w-8"}),p.jsx(Dn,{tooltipText:"Edit",onClick:()=>C(N),"aria-label":`Edit repo ${N.name}`,disabled:q,icon:p.jsx(by,{}),className:"h-8 w-8"}),p.jsx(Dn,{tooltipText:"Delete",onClick:()=>k(N.id,N.name),"aria-label":`Delete repo ${N.name}`,disabled:q,icon:P?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},N.id)})})]})]})]})]})},Kke=gt.memo(Wke),Zke=()=>{const e=T.useMemo(()=>[{value:"config",label:"User Config",content:p.jsx(Gke,{})},{value:"sync",label:"Sync Repositories",content:p.jsx(Kke,{})}],[]);return p.jsx(hd,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},Yke=gt.memo(Zke),Xke=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.content)||""),[l,u]=T.useState((e==null?void 0:e.type)||"before");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.content)||""),u((e==null?void 0:e.type)||"before")},[e]);const d=T.useCallback(async()=>{if(!a.trim()||!s.trim()){Ge.error("Rule Name and Content are required.");return}await n({name:a.trim(),content:s.trim(),type:l})},[a,s,l,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Zt,{htmlFor:"rule-name",children:"Rule Name"}),p.jsx(Rn,{id:"rule-name",value:a,onChange:h=>i(h.target.value),placeholder:"e.g., Always respond in JSON",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"rule-type",children:"Rule Type"}),p.jsxs(uc,{value:l,onValueChange:h=>u(h),disabled:t,children:[p.jsx(fc,{id:"rule-type",children:p.jsx(dc,{placeholder:"Select Type"})}),p.jsxs(hc,{children:[p.jsx(xa,{value:"system",children:"System Prompt"}),p.jsx(xa,{value:"before",children:"Before User Prompt"}),p.jsx(xa,{value:"after",children:"After User Prompt"})]})]})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"rule-content",children:"Rule Content"}),p.jsx(fd,{id:"rule-content",value:s,onChange:h=>o(h.target.value),placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:d,disabled:t||!a.trim()||!s.trim(),type:"button",children:[t&&p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ef,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Rule"]})]})]})},Jke=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:a})=>{const i=s=>{window.confirm(`Are you sure you want to delete the rule "${s.name}"? This will also remove it from any tags.`)&&a(s.id,s.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(dm,{children:[p.jsx(fm,{children:p.jsxs(Jr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{children:"Type"}),p.jsx(Nr,{children:"Content Preview"}),p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(hm,{children:t?p.jsxs(p.Fragment,{children:[p.jsx(Jr,{children:p.jsx(Fn,{colSpan:4,children:p.jsx(lr,{className:"h-10 w-full"})})}),p.jsx(Jr,{children:p.jsx(Fn,{colSpan:4,children:p.jsx(lr,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Jr,{children:p.jsx(Fn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(s=>{const o=n[s.id];return p.jsxs(Jr,{children:[p.jsx(Fn,{className:"font-medium",children:s.name}),p.jsx(Fn,{className:"capitalize",children:s.type}),p.jsx(Fn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.content}),p.jsxs(Fn,{className:"text-right space-x-1",children:[p.jsx(Dn,{tooltipText:"Edit Rule",onClick:()=>r(s),disabled:o,icon:p.jsx(by,{}),className:"h-8 w-8","aria-label":`Edit rule ${s.name}`}),p.jsx(Dn,{tooltipText:"Delete Rule",onClick:()=>i(s),disabled:o,icon:o?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${s.name}`})]})]},s.id)})})]})})},Qke=()=>{const{rules:e,addRule:t,updateRule:n,deleteRule:r,isLoading:a}=Tc(dn(_=>({rules:_.rules,addRule:_.addRule,updateRule:_.updateRule,deleteRule:_.deleteRule,isLoading:_.isLoading}))),[i,s]=T.useState(!1),[o,l]=T.useState(null),[u,d]=T.useState(!1),[h,m]=T.useState({}),g=()=>{l(null),s(!0)},b=_=>{l(_),s(!0)},v=T.useCallback(()=>{s(!1),l(null),d(!1)},[]),x=T.useCallback(async _=>{d(!0);try{o?await n(o.id,_):await t(_),v()}catch{}finally{d(!1)}},[t,n,o,v]),w=T.useCallback(async _=>{m(E=>({...E,[_]:!0}));try{await r(_),(o==null?void 0:o.id)===_&&v()}catch{}finally{m(E=>({...E,[_]:!1}))}},[r,o,v]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&p.jsxs(It,{onClick:g,variant:"outline",className:"w-full",disabled:a,children:[p.jsx(Sf,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&p.jsx(Xke,{initialData:o??void 0,isSaving:u,onSave:x,onCancel:v}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),p.jsx(Jke,{rules:e,isLoading:a,isDeleting:h,onEdit:b,onDelete:w})]})]})},eAe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.description)||"");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.description)||"")},[e]);const l=T.useCallback(async()=>{if(!a.trim()){Ge.error("Tag Name is required.");return}await n({name:a.trim(),description:(s==null?void 0:s.trim())||null})},[a,s,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"tag-name",children:"Tag Name"}),p.jsx(Rn,{id:"tag-name",value:a,onChange:u=>i(u.target.value),placeholder:"e.g., Code Generation, Summarization",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"tag-description",children:"Description (Optional)"}),p.jsx(fd,{id:"tag-description",value:s||"",onChange:u=>o(u.target.value),placeholder:"Describe when to use this tag...",rows:2,disabled:t})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:l,disabled:t||!a.trim(),type:"button",children:[t&&p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ef,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Tag"]})]})]})},tAe=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:a,onDelete:i})=>{const s=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&i(o.id,o.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(dm,{children:[p.jsx(fm,{children:p.jsxs(Jr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{children:"Description"}),p.jsx(Nr,{children:"Linked Rules"}),p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(hm,{children:n?p.jsxs(p.Fragment,{children:[p.jsx(Jr,{children:p.jsx(Fn,{colSpan:4,children:p.jsx(lr,{className:"h-10 w-full"})})}),p.jsx(Jr,{children:p.jsx(Fn,{colSpan:4,children:p.jsx(lr,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Jr,{children:p.jsx(Fn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],u=t.get(o.id)||[];return p.jsxs(Jr,{children:[p.jsx(Fn,{className:"font-medium",children:o.name}),p.jsx(Fn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),p.jsx(Fn,{className:"text-xs",children:u.length>0?u.map(d=>d.name).join(", "):"None"}),p.jsxs(Fn,{className:"text-right space-x-1",children:[p.jsx(Dn,{tooltipText:"Edit Tag & Rules",onClick:()=>a(o),disabled:l,icon:p.jsx(by,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),p.jsx(Dn,{tooltipText:"Delete Tag",onClick:()=>s(o),disabled:l,icon:l?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},nAe=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:a=!1})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(""),u=T.useMemo(()=>[...t].sort((b,v)=>b.name.localeCompare(v.name)),[t]),d=T.useMemo(()=>{const b=o.toLowerCase();return b?u.filter(v=>v.name.toLowerCase().includes(b)||v.content.toLowerCase().includes(b)||v.type.toLowerCase().includes(b)):u},[u,o]),h=T.useCallback(b=>{const v=n.has(b);r(e.id,b,!v),l("")},[n,r,e.id]),m=T.useCallback((b,v)=>{v.stopPropagation(),r(e.id,b,!1)},[r,e.id]),g=T.useMemo(()=>u.filter(b=>n.has(b.id)),[u,n]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs(Zt,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),p.jsxs(jc,{open:i,onOpenChange:s,children:[p.jsx(Dc,{asChild:!0,children:p.jsxs(It,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between h-9",disabled:a||t.length===0,children:[p.jsx("span",{className:"truncate",children:g.length>0?`${g.length} rule(s) selected`:"Select rules..."}),p.jsx(p1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(Mc,{className:"w-[--radix-popover-trigger-width] p-0",children:p.jsxs(JV,{shouldFilter:!1,children:[p.jsx(QV,{placeholder:"Search rules...",value:o,onValueChange:l}),p.jsxs(eH,{children:[p.jsx(tH,{children:t.length===0?"No rules defined.":"No rules found."}),p.jsx(nH,{children:d.map(b=>{const v=n.has(b.id);return p.jsxs(rH,{value:b.id,onSelect:()=>h(b.id),className:"cursor-pointer",children:[p.jsx(Ri,{className:xt("mr-2 h-4 w-4",v?"opacity-100":"opacity-0")}),p.jsx("span",{className:"truncate",children:b.name}),p.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",b.type,")"]})]},b.id)})})]})]})})]}),g.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:g.map(b=>p.jsxs(Yg,{variant:"secondary",className:"flex items-center gap-1",children:[p.jsx("span",{className:"truncate",children:b.name}),p.jsx(It,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:v=>m(b.id,v),disabled:a,"aria-label":`Unlink rule ${b.name}`,children:p.jsx(Ii,{className:"h-3 w-3"})})]},b.id))})]})},rAe=()=>{const{tags:e,rules:t,tagRuleLinks:n,addTag:r,updateTag:a,deleteTag:i,linkTagToRule:s,unlinkTagFromRule:o,getRulesForTag:l,isLoading:u}=Tc(dn(L=>({tags:L.tags,rules:L.rules,tagRuleLinks:L.tagRuleLinks,addTag:L.addTag,updateTag:L.updateTag,deleteTag:L.deleteTag,linkTagToRule:L.linkTagToRule,unlinkTagFromRule:L.unlinkTagFromRule,getRulesForTag:L.getRulesForTag,isLoading:L.isLoading}))),[d,h]=T.useState(!1),[m,g]=T.useState(null),[b,v]=T.useState(!1),[x,w]=T.useState({}),_=()=>{g(null),h(!0)},E=L=>{g(L),h(!0)},C=T.useCallback(()=>{h(!1),g(null),v(!1)},[]),k=T.useCallback(async L=>{v(!0);try{m?await a(m.id,L):await r(L),m||C()}catch{}finally{v(!1)}},[r,a,m,C]),I=T.useCallback(async L=>{w(H=>({...H,[L]:!0}));try{await i(L),(m==null?void 0:m.id)===L&&C()}catch{}finally{w(H=>({...H,[L]:!1}))}},[i,m,C]),j=T.useCallback(async(L,H,M)=>{try{M?await s(L,H):await o(L,H)}catch{}},[s,o]),N=T.useMemo(()=>{const L=new Map;return e.forEach(H=>{L.set(H.id,l(H.id))}),L},[e,l]),P=T.useMemo(()=>m?new Set(n.filter(L=>L.tagId===m.id).map(L=>L.ruleId)):new Set,[m,n]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!d&&p.jsxs(It,{onClick:_,variant:"outline",className:"w-full",disabled:u,children:[p.jsx(Sf,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),d&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(eAe,{initialData:m??void 0,isSaving:b,onSave:k,onCancel:C}),m&&p.jsx(nAe,{tag:m,allRules:t,linkedRuleIds:P,onLinkChange:j,disabled:b})]}),p.jsx(mo,{}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),p.jsx(tAe,{tags:e,rulesByTagId:N,isLoading:u,isDeleting:x,onEdit:E,onDelete:I})]})]})},aAe=()=>{const e=T.useMemo(()=>[{value:"rules",label:"Rules",content:p.jsx(Qke,{})},{value:"tags",label:"Tags",content:p.jsx(rAe,{})}],[]);return p.jsx(hd,{tabs:e,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},iAe=({label:e,colorKey:t,value:n,onChange:r})=>{const[a,i]=T.useState(n??"");T.useEffect(()=>{i(n??"")},[n]);const s=()=>{r(t,a.trim()||null)},o=l=>{i(l.target.value)};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Zt,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),p.jsx(Rn,{id:`color-${t}`,type:"text",value:a,onChange:o,onBlur:s,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),p.jsx(Rn,{type:"color",value:a!=null&&a.startsWith("#")?a:"#000000",onChange:l=>{i(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},Aw=[{name:"Default Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css"},{name:"A11y Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css"},{name:"Atom Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-atom-dark.min.css"},{name:"Atelier Sulphurpool Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-base16-ateliersulphurpool.light.min.css"},{name:"CB",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-cb.min.css"},{name:"Coldark Cold",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-cold.min.css"},{name:"Coldark Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css"},{name:"Coy (No Shadow)",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coy-without-shadows.min.css"},{name:"Darcula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-darcula.min.css"},{name:"Dracula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-dracula.min.css"},{name:"Duotone Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-dark.min.css"},{name:"Duotone Earth",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-earth.min.css"},{name:"Duotone Forest",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-forest.min.css"},{name:"Duotone Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-light.min.css"},{name:"Duotone Sea",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-sea.min.css"},{name:"Duotone Space",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-space.min.css"},{name:"GH Colors",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css"},{name:"Gruvbox Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-dark.min.css"},{name:"Gruvbox Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css"},{name:"Holi",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-holi-theme.min.css"},{name:"Hopscotch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-hopscotch.min.css"},{name:"Lucario",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-lucario.min.css"},{name:"Material Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-dark.min.css"},{name:"Material Oceanic",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-oceanic.min.css"},{name:"Night Owl",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-night-owl.min.css"},{name:"Nord",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-nord.min.css"},{name:"One Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css"},{name:"One Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-light.min.css"},{name:"Pojoaque",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-pojoaque.min.css"},{name:"Shades of Purple",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-shades-of-purple.min.css"},{name:"Solarized Dark Atom",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-solarized-dark-atom.min.css"},{name:"Synthwave '84",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css"},{name:"VS",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vs.min.css"},{name:"VSC Dark Plus",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css"},{name:"Xonokai",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-xonokai.min.css"},{name:"Z-Touch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-z-touch.min.css"}],sAe=()=>{const{theme:e,setTheme:t,prismThemeUrl:n,setPrismThemeUrl:r,customFontFamily:a,setCustomFontFamily:i,customFontSize:s,setCustomFontSize:o,chatMaxWidth:l,setChatMaxWidth:u,customThemeColors:d,setCustomThemeColor:h,resetThemeSettings:m}=pr(dn(N=>({theme:N.theme,setTheme:N.setTheme,prismThemeUrl:N.prismThemeUrl,setPrismThemeUrl:N.setPrismThemeUrl,customFontFamily:N.customFontFamily,setCustomFontFamily:N.setCustomFontFamily,customFontSize:N.customFontSize,setCustomFontSize:N.setCustomFontSize,chatMaxWidth:N.chatMaxWidth,setChatMaxWidth:N.setChatMaxWidth,customThemeColors:N.customThemeColors,setCustomThemeColor:N.setCustomThemeColor,resetThemeSettings:N.resetThemeSettings}))),[g,b]=T.useState(s??16),[v,x]=T.useState(Aw.some(N=>N.url===n)?"":n??"");T.useEffect(()=>{b(s??16)},[s]),T.useEffect(()=>{Aw.some(N=>N.url===n)?x(""):x(n??"")},[n]);const w=T.useCallback(N=>{o(N[0])},[o]),_=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&m()},E=N=>{r(N==="default"?null:N),N==="default"||!Aw.some(L=>L.url===N)?x(N==="default"?"":N):x("")},C=N=>{const P=N.target.value.trim();x(P),r(P||null)},k=[{value:"max-w-3xl",label:"Very Small (3xl)"},{value:"max-w-4xl",label:"Small (4xl)"},{value:"max-w-5xl",label:"Medium (5xl)"},{value:"max-w-6xl",label:"Large (6xl)"},{value:"max-w-7xl",label:"Very Large (7xl)"},{value:"max-w-full",label:"Full Width"}],I=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}],j=n===null?"default":n;return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsx(Bg,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Zt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsxs(uc,{value:e??"system",onValueChange:N=>t(N),children:[p.jsx(fc,{id:"theme-select",className:"w-[180px]",children:p.jsx(dc,{placeholder:"Select theme"})}),p.jsxs(hc,{children:[p.jsx(xa,{value:"light",children:"Default Light"}),p.jsx(xa,{value:"dark",children:"Default Dark"}),p.jsx(xa,{value:"system",children:"System"}),p.jsx(xa,{value:"TijuLight",children:"Tiju Light"}),p.jsx(xa,{value:"TijuDark",children:"Tiju Dark"}),p.jsx(xa,{value:"custom",children:"User Custom"})]})]})]})}),p.jsxs(Bg,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-4",children:[p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"custom-font-family",children:"Custom Font Family"}),p.jsx(Rn,{id:"custom-font-family",value:a??"",onChange:N=>i(N.target.value||null),placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"custom-font-size",children:["Base Font Size (",g,"px)"]}),p.jsx(cl,{id:"custom-font-size",min:12,max:20,step:1,value:[g],onValueChange:N=>b(N[0]),onValueCommit:w}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"chat-max-width",children:"Chat Content Max Width"}),p.jsxs(uc,{value:l??"max-w-7xl",onValueChange:N=>u(N||null),children:[p.jsx(fc,{id:"chat-max-width",className:"w-full mt-1",children:p.jsx(dc,{placeholder:"Select max width"})}),p.jsx(hc,{children:k.map(N=>p.jsx(xa,{value:N.value,children:N.label},N.value))})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),p.jsxs(Bg,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-3",children:[p.jsx(Zt,{htmlFor:"prism-theme-select",children:"Select Theme or Enter URL"}),p.jsxs(uc,{value:j,onValueChange:E,children:[p.jsx(fc,{id:"prism-theme-select",className:"w-full",children:p.jsx(dc,{placeholder:"Select code theme..."})}),p.jsxs(hc,{children:[p.jsx(xa,{value:"default",children:"Default (Matches Theme)"}),Aw.map(N=>p.jsx(xa,{value:N.url,children:N.name},N.url))]})]}),p.jsx(Rn,{id:"prism-theme-url-custom",type:"url",placeholder:"Or paste custom theme URL here...",value:v,onChange:C,className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a preset theme or paste a URL to a PrismJS CSS file. Leave blank or select 'Default' to use themes matching light/dark mode."})]}),p.jsx(Bg,{title:"Custom Theme Colors",description:"Define custom colors. Applies only when 'User Custom' theme is selected. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:I.map(({key:N,label:P})=>p.jsx(iAe,{label:P,colorKey:N,value:d==null?void 0:d[N],onChange:h},N))})}),p.jsx(mo,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(It,{variant:"outline",size:"sm",onClick:_,children:[p.jsx(uA,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]})})]})},oAe=gt.memo(sAe),JH=T.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=pr(dn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=uy(dn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=Ji(dn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[s,o]=T.useState(a||"general");T.useEffect(()=>{e&&o(a||"general")},[e,a]);const l=h=>{h||(t(),i())},u=h=>{o(h)},d=T.useMemo(()=>{const h=[{value:"general",label:"General",content:p.jsx($Ee,{})},{value:"theme",label:"Theme",content:p.jsx(oAe,{})},{value:"providers",label:"Providers & Models",content:p.jsx(Hke,{})},...n?[{value:"assistant",label:"Assistant",content:p.jsx(fCe,{})}]:[],{value:"rules-tags",label:"Rules & Tags",content:p.jsx(aAe,{})},{value:"git",label:"Git",content:p.jsx(Yke,{})},{value:"data",label:"Data",content:p.jsx(wCe,{})},{value:"mods",label:"Mods",content:p.jsx(SCe,{})}],m=r.map(g=>({value:g.id,label:g.title,content:gt.isValidElement(g.component)?g.component:typeof g.component=="function"?p.jsx(g.component,{}):null}));return[...h,...m]},[n,r]);return p.jsx(D_,{open:e,onOpenChange:l,children:p.jsxs(M_,{className:xt("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[p.jsxs(O_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsx(F_,{children:"Settings"}),p.jsx(L_,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),p.jsx(hd,{tabs:d,initialValue:s,onValueChange:u,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsx(P_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:p.jsx(It,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});JH.displayName="SettingsModalComponent";const lAe=JH;function cAe(){const e=Ir.getState().registerChatControl,t=Ji.getState().toggleChatControlPanel,n=Ji.getState().setInitialSettingsTabs,r=()=>{const i=(s,o)=>{n(null,null),t("settingsModal",!0)};return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:p.jsx(vT,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Settings"})]})})},a=()=>{const i=Ji.getState().isChatControlPanelOpen.settingsModal??!1,s=()=>t("settingsModal",!1);return p.jsx(lAe,{isOpen:i,onClose:s})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(r),iconRenderer:()=>gt.createElement(r),settingsRenderer:()=>gt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function uAe(){const e=Ir.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=Ji.getState();return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?p.jsx(eY,{className:"h-4 w-4"}):p.jsx(JZ,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(t),iconRenderer:()=>gt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}const dAe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=Oi(dn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),s=pr.getState(),[o,l]=T.useState(()=>Oi.getState());T.useEffect(()=>{const d=h=>{l(m=>({...m,...h.params}))};return Tt.on(Et.PROMPT_PARAMS_CHANGED,d),()=>{Tt.off(Et.PROMPT_PARAMS_CHANGED,d)}},[]);const u={temperature:o.temperature??null,setTemperature:e,topP:o.topP??null,setTopP:t,maxTokens:o.maxTokens??null,setMaxTokens:n,topK:o.topK??null,setTopK:r,presencePenalty:o.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:o.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:s.temperature,defaultTopP:s.topP,defaultMaxTokens:s.maxTokens,defaultTopK:s.topK,defaultPresencePenalty:s.presencePenalty,defaultFrequencyPenalty:s.frequencyPenalty};return p.jsx(VV,{...u})},fAe=()=>{const[e,t]=T.useState(()=>Mn.getState().status==="streaming"),[n,r]=T.useState(!0);return T.useEffect(()=>{const a=o=>{t(o.status==="streaming")},i=o=>{var g;if(!o.modelId){r(!1);return}const{getSelectedModel:l}=Un.getState(),u=l(),d=((g=u==null?void 0:u.metadata)==null?void 0:g.supported_parameters)??[],h=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],m=pr.getState().enableAdvancedSettings;r(m&&d.some(b=>h.includes(b)))},s=o=>{o.key==="enableAdvancedSettings"&&i({modelId:Un.getState().selectedModelId})};return i({modelId:Un.getState().selectedModelId}),Tt.on(Et.INTERACTION_STATUS_CHANGED,a),Tt.on(Et.MODEL_SELECTION_CHANGED,i),Tt.on(Et.SETTINGS_CHANGED,s),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,a),Tt.off(Et.MODEL_SELECTION_CHANGED,i),Tt.off(Et.SETTINGS_CHANGED,s)}},[]),n?p.jsxs(jc,{children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Dc,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:e,"aria-label":"Adjust Advanced Parameters",children:p.jsx(gY,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:"Advanced Parameters"})]})}),p.jsx(Mc,{className:"w-auto p-0",align:"start",children:p.jsx(dAe,{})})]}):null};function hAe(){const e=Ir.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>gt.createElement(fAe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:s}=Oi.getState(),o=(u,d,h)=>{h!==null&&(u[d]=h)},l={};return o(l,"temperature",t),o(l,"top_p",n),o(l,"max_tokens",r),o(l,"top_k",a),o(l,"presence_penalty",i),o(l,"frequency_penalty",s),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const QH=20,pAe=QH*1024*1024,mAe=()=>{const e=T.useRef(null),t=gc.getState().addAttachedFile,[n,r]=T.useState(()=>Mn.getState().status==="streaming"),[a,i]=T.useState(!0);T.useEffect(()=>{const u=h=>{r(h.status==="streaming")},d=h=>{var v,x;if(!h.modelId){i(!1);return}const{getSelectedModel:m}=Un.getState(),g=m(),b=(x=(v=g==null?void 0:g.metadata)==null?void 0:v.architecture)==null?void 0:x.input_modalities;i(!b||b.some(w=>w!=="text"))};return d({modelId:Un.getState().selectedModelId}),Tt.on(Et.INTERACTION_STATUS_CHANGED,u),Tt.on(Et.MODEL_SELECTION_CHANGED,d),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,u),Tt.off(Et.MODEL_SELECTION_CHANGED,d)}},[]);const s=T.useCallback(async u=>{const d=u.target.files;if(!d)return;const h=a;for(const m of Array.from(d)){if(m.size>pAe){Ge.error(`File "${m.name}" exceeds the ${QH}MB limit.`);continue}const g=mA(m.name,m.type),b=m.type.startsWith("image/");if(!g&&!h){Ge.warning(`File "${m.name}" (${m.type}) cannot be uploaded. The current model only supports text input.`);continue}try{let v={};if(g)v.contentText=await m.text();else if(b){const x=new FileReader,w=new Promise((E,C)=>{x.onload=()=>E(x.result),x.onerror=k=>C(k)});x.readAsDataURL(m);const _=await w;_&&_.includes(",")?v.contentBase64=_.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${m.name}`)}else h&&console.log(`File type ${m.type} (Name: ${m.name}) not directly processed for content storage, but model supports non-text.`);t({source:"direct",name:m.name,type:m.type||"application/octet-stream",size:m.size,...v})}catch(v){console.error(`Error processing file ${m.name}:`,v),Ge.error(`Failed to process file "${m.name}": ${v instanceof Error?v.message:String(v)}`)}}u.target&&(u.target.value="")},[t,a]),o=()=>{var u;(u=e.current)==null||u.click()},l=a?"Attach Files (Text, Images, etc.)":"Attach Text Files";return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:e,onChange:s,multiple:!0,className:"hidden",disabled:n}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{type:"button",variant:"ghost",size:"icon",onClick:o,disabled:n,className:"h-8 w-8","aria-label":l,children:p.jsx(cA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:l})]})})]})},gAe=()=>{const e=gc.getState().removeAttachedFile,[t,n]=T.useState(()=>gc.getState().attachedFilesMetadata),[r,a]=T.useState(()=>Mn.getState().status==="streaming");return T.useEffect(()=>{const i=o=>{n(o.files)},s=o=>{a(o.status==="streaming")};return Tt.on(Et.ATTACHED_FILES_CHANGED,i),Tt.on(Et.INTERACTION_STATUS_CHANGED,s),()=>{Tt.off(Et.ATTACHED_FILES_CHANGED,i),Tt.off(Et.INTERACTION_STATUS_CHANGED,s)}},[]),t.length===0?null:p.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:t.map(i=>p.jsx(kN,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function yAe(){const e=Ir.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>gt.createElement(mAe),renderer:()=>gt.createElement(gAe)}),console.log("[Function] Registered Core File Attachment Control")}const bAe=()=>{const{toggleVfsModal:e,isVfsModalOpen:t}=Ji(dn(l=>({toggleVfsModal:l.toggleVfsModal,isVfsModalOpen:l.isVfsModalOpen}))),{enableVfs:n,selectedFileIds:r,nodes:a,clearSelection:i}=ko(dn(l=>({enableVfs:l.enableVfs,selectedFileIds:l.selectedFileIds,nodes:l.nodes,clearSelection:l.clearSelection}))),s=gc.getState().addAttachedFile,o=()=>{if(r.size===0){Ge.info("No files selected in VFS to attach.");return}let l=0;r.forEach(u=>{const d=a[u];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0&&(Ge.success(`Attached ${l} file(s) from VFS to the next prompt.`),i(),e(!1))};return n?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:xt("h-8 w-8",t&&"bg-muted text-primary"),onClick:()=>e(),"aria-label":"Toggle Virtual File System",children:p.jsx(oA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Virtual Filesystem"})]})}),r.size>0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs(It,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:o,"aria-label":`Attach ${r.size} selected VFS file(s)`,children:[p.jsx(cA,{className:"h-4 w-4 mr-1"}),"Attach (",r.size,")"]})}),p.jsx(Yn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},eq=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i,isMobile:s=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return s?p.jsxs("div",{className:"flex items-center gap-2 p-1",children:[p.jsx(uf,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),p.jsx(Rn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:i}),p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ri,{className:"h-4 w-4"})}),p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(Ii,{className:"h-4 w-4"})})]})]}):p.jsxs(Jr,{className:"bg-muted/30",children:[p.jsx(Fn,{className:"px-2 py-1"}),p.jsx(Fn,{className:"px-2 py-1",children:p.jsx(uf,{className:"h-5 w-5 text-yellow-400"})}),p.jsx(Fn,{className:"py-1 px-2",colSpan:3,children:p.jsx(Rn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),p.jsx(Fn,{className:"text-right pr-4 py-1",children:p.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ri,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Create (Enter)"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(Ii,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var Qk=["Enter"," "],vAe=["ArrowDown","PageUp","Home"],tq=["ArrowUp","PageDown","End"],wAe=[...vAe,...tq],xAe={ltr:[...Qk,"ArrowRight"],rtl:[...Qk,"ArrowLeft"]},_Ae={ltr:["ArrowLeft"],rtl:["ArrowRight"]},hb="Menu",[gy,SAe,EAe]=v_(hb),[$f,Z_]=vi(hb,[EAe,Qu,V_]),Y_=Qu(),nq=V_(),[CAe,zf]=$f(hb),[TAe,pb]=$f(hb),rq=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:s=!0}=e,o=Y_(t),[l,u]=T.useState(null),d=T.useRef(!1),h=Ua(i),m=am(a);return T.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),p.jsx(j1,{...o,children:p.jsx(CAe,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:u,children:p.jsx(TAe,{scope:t,onClose:T.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:s,children:r})})})};rq.displayName=hb;var kAe="MenuAnchor",YR=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Y_(n);return p.jsx(_y,{...a,...r,ref:t})});YR.displayName=kAe;var XR="MenuPortal",[AAe,aq]=$f(XR,{forceMount:void 0}),iq=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=zf(XR,t);return p.jsx(AAe,{scope:t,forceMount:n,children:p.jsx(Ka,{present:n||i.open,children:p.jsx(Up,{asChild:!0,container:a,children:r})})})};iq.displayName=XR;var Gs="MenuContent",[NAe,JR]=$f(Gs),sq=T.forwardRef((e,t)=>{const n=aq(Gs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=zf(Gs,e.__scopeMenu),s=pb(Gs,e.__scopeMenu);return p.jsx(gy.Provider,{scope:e.__scopeMenu,children:p.jsx(Ka,{present:r||i.open,children:p.jsx(gy.Slot,{scope:e.__scopeMenu,children:s.modal?p.jsx(RAe,{...a,ref:t}):p.jsx(IAe,{...a,ref:t})})})})}),RAe=T.forwardRef((e,t)=>{const n=zf(Gs,e.__scopeMenu),r=T.useRef(null),a=kn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return __(i)},[]),p.jsx(QR,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),IAe=T.forwardRef((e,t)=>{const n=zf(Gs,e.__scopeMenu);return p.jsx(QR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),jAe=Iu("MenuContent.ScrollLock"),QR=T.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:b,...v}=e,x=zf(Gs,n),w=pb(Gs,n),_=Y_(n),E=nq(n),C=SAe(n),[k,I]=T.useState(null),j=T.useRef(null),N=kn(t,j,x.onContentChange),P=T.useRef(0),L=T.useRef(""),H=T.useRef(0),M=T.useRef(null),K=T.useRef("right"),q=T.useRef(0),ue=b?sb:T.Fragment,ae=b?{as:jAe,allowPinchZoom:!0}:void 0,te=ie=>{var ke,Te;const V=L.current+ie,J=C().filter(Se=>!Se.disabled),Q=document.activeElement,ne=(ke=J.find(Se=>Se.ref.current===Q))==null?void 0:ke.textValue,he=J.map(Se=>Se.textValue),de=HAe(he,V,ne),Ie=(Te=J.find(Se=>Se.textValue===de))==null?void 0:Te.ref.current;(function Se(Pe){L.current=Pe,window.clearTimeout(P.current),Pe!==""&&(P.current=window.setTimeout(()=>Se(""),1e3))})(V),Ie&&setTimeout(()=>Ie.focus())};T.useEffect(()=>()=>window.clearTimeout(P.current),[]),w_();const Y=T.useCallback(ie=>{var J,Q;return K.current===((J=M.current)==null?void 0:J.side)&&GAe(ie,(Q=M.current)==null?void 0:Q.area)},[]);return p.jsx(NAe,{scope:n,searchRef:L,onItemEnter:T.useCallback(ie=>{Y(ie)&&ie.preventDefault()},[Y]),onItemLeave:T.useCallback(ie=>{var V;Y(ie)||((V=j.current)==null||V.focus(),I(null))},[Y]),onTriggerLeave:T.useCallback(ie=>{Y(ie)&&ie.preventDefault()},[Y]),pointerGraceTimerRef:H,onPointerGraceIntentChange:T.useCallback(ie=>{M.current=ie},[]),children:p.jsx(ue,{...ae,children:p.jsx(ib,{asChild:!0,trapped:a,onMountAutoFocus:qt(i,ie=>{var V;ie.preventDefault(),(V=j.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:p.jsx(Bp,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:p.jsx(yH,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:I,onEntryFocus:qt(l,ie=>{w.isUsingKeyboardRef.current||ie.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(D1,{role:"menu","aria-orientation":"vertical","data-state":_q(x.open),"data-radix-menu-content":"",dir:w.dir,..._,...v,ref:N,style:{outline:"none",...v.style},onKeyDown:qt(v.onKeyDown,ie=>{const J=ie.target.closest("[data-radix-menu-content]")===ie.currentTarget,Q=ie.ctrlKey||ie.altKey||ie.metaKey,ne=ie.key.length===1;J&&(ie.key==="Tab"&&ie.preventDefault(),!Q&&ne&&te(ie.key));const he=j.current;if(ie.target!==he||!wAe.includes(ie.key))return;ie.preventDefault();const Ie=C().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);tq.includes(ie.key)&&Ie.reverse(),UAe(Ie)}),onBlur:qt(e.onBlur,ie=>{ie.currentTarget.contains(ie.target)||(window.clearTimeout(P.current),L.current="")}),onPointerMove:qt(e.onPointerMove,yy(ie=>{const V=ie.target,J=q.current!==ie.clientX;if(ie.currentTarget.contains(V)&&J){const Q=ie.clientX>q.current?"right":"left";K.current=Q,q.current=ie.clientX}}))})})})})})})});sq.displayName=Gs;var DAe="MenuGroup",e3=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{role:"group",...r,ref:t})});e3.displayName=DAe;var MAe="MenuLabel",oq=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{...r,ref:t})});oq.displayName=MAe;var f1="MenuItem",t8="menu.itemSelect",X_=T.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=T.useRef(null),s=pb(f1,e.__scopeMenu),o=JR(f1,e.__scopeMenu),l=kn(t,i),u=T.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(t8,{bubbles:!0,cancelable:!0});h.addEventListener(t8,g=>r==null?void 0:r(g),{once:!0}),FF(h,m),m.defaultPrevented?u.current=!1:s.onClose()}};return p.jsx(lq,{...a,ref:l,disabled:n,onClick:qt(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:qt(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:qt(e.onKeyDown,h=>{const m=o.searchRef.current!=="";n||m&&h.key===" "||Qk.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});X_.displayName=f1;var lq=T.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,s=JR(f1,n),o=nq(n),l=T.useRef(null),u=kn(t,l),[d,h]=T.useState(!1),[m,g]=T.useState("");return T.useEffect(()=>{const b=l.current;b&&g((b.textContent??"").trim())},[i.children]),p.jsx(gy.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:p.jsx(bH,{asChild:!0,...o,focusable:!r,children:p.jsx(an.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:qt(e.onPointerMove,yy(b=>{r?s.onItemLeave(b):(s.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:qt(e.onPointerLeave,yy(b=>s.onItemLeave(b))),onFocus:qt(e.onFocus,()=>h(!0)),onBlur:qt(e.onBlur,()=>h(!1))})})})}),OAe="MenuCheckboxItem",cq=T.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return p.jsx(pq,{scope:e.__scopeMenu,checked:n,children:p.jsx(X_,{role:"menuitemcheckbox","aria-checked":h1(n)?"mixed":n,...a,ref:t,"data-state":n3(n),onSelect:qt(a.onSelect,()=>r==null?void 0:r(h1(n)?!0:!n),{checkForDefaultPrevented:!1})})})});cq.displayName=OAe;var uq="MenuRadioGroup",[PAe,FAe]=$f(uq,{value:void 0,onValueChange:()=>{}}),dq=T.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ua(r);return p.jsx(PAe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:p.jsx(e3,{...a,ref:t})})});dq.displayName=uq;var fq="MenuRadioItem",hq=T.forwardRef((e,t)=>{const{value:n,...r}=e,a=FAe(fq,e.__scopeMenu),i=n===a.value;return p.jsx(pq,{scope:e.__scopeMenu,checked:i,children:p.jsx(X_,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":n3(i),onSelect:qt(r.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,n)},{checkForDefaultPrevented:!1})})})});hq.displayName=fq;var t3="MenuItemIndicator",[pq,LAe]=$f(t3,{checked:!1}),mq=T.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=LAe(t3,n);return p.jsx(Ka,{present:r||h1(i.checked)||i.checked===!0,children:p.jsx(an.span,{...a,ref:t,"data-state":n3(i.checked)})})});mq.displayName=t3;var BAe="MenuSeparator",gq=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});gq.displayName=BAe;var $Ae="MenuArrow",yq=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Y_(n);return p.jsx(M1,{...a,...r,ref:t})});yq.displayName=$Ae;var zAe="MenuSub",[B3e,bq]=$f(zAe),$g="MenuSubTrigger",vq=T.forwardRef((e,t)=>{const n=zf($g,e.__scopeMenu),r=pb($g,e.__scopeMenu),a=bq($g,e.__scopeMenu),i=JR($g,e.__scopeMenu),s=T.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=T.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return T.useEffect(()=>d,[d]),T.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),p.jsx(YR,{asChild:!0,...u,children:p.jsx(lq,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":_q(n.open),...e,ref:pc(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:qt(e.onPointerMove,yy(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:qt(e.onPointerLeave,yy(h=>{var g,b;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(b=n.content)==null?void 0:b.dataset.side,x=v==="right",w=x?-5:5,_=m[x?"left":"right"],E=m[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:_,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:_,y:m.bottom}],side:v}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:qt(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||xAe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});vq.displayName=$g;var wq="MenuSubContent",xq=T.forwardRef((e,t)=>{const n=aq(Gs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=zf(Gs,e.__scopeMenu),s=pb(Gs,e.__scopeMenu),o=bq(wq,e.__scopeMenu),l=T.useRef(null),u=kn(t,l);return p.jsx(gy.Provider,{scope:e.__scopeMenu,children:p.jsx(Ka,{present:r||i.open,children:p.jsx(gy.Slot,{scope:e.__scopeMenu,children:p.jsx(QR,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;s.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:qt(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:qt(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:qt(e.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=_Ae[s.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(g=o.trigger)==null||g.focus(),d.preventDefault())})})})})})});xq.displayName=wq;function _q(e){return e?"open":"closed"}function h1(e){return e==="indeterminate"}function n3(e){return h1(e)?"indeterminate":e?"checked":"unchecked"}function UAe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function VAe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function HAe(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=VAe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function qAe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function GAe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return qAe(n,t)}function yy(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Sq=rq,Eq=YR,Cq=iq,Tq=sq,kq=e3,Aq=oq,Nq=X_,Rq=cq,Iq=dq,jq=hq,Dq=mq,Mq=gq,Oq=yq,Pq=vq,Fq=xq,r3="ContextMenu",[WAe,$3e]=vi(r3,[Z_]),Li=Z_(),[KAe,Lq]=WAe(r3),Bq=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[s,o]=T.useState(!1),l=Li(t),u=Ua(r),d=T.useCallback(h=>{o(h),u(h)},[u]);return p.jsx(KAe,{scope:t,open:s,onOpenChange:d,modal:i,children:p.jsx(Sq,{...l,dir:a,open:s,onOpenChange:d,modal:i,children:n})})};Bq.displayName=r3;var $q="ContextMenuTrigger",zq=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=Lq($q,n),s=Li(n),o=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),u=T.useRef(0),d=T.useCallback(()=>window.clearTimeout(u.current),[]),h=m=>{o.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return T.useEffect(()=>d,[d]),T.useEffect(()=>void(r&&d()),[r,d]),p.jsxs(p.Fragment,{children:[p.jsx(Eq,{...s,virtualRef:l}),p.jsx(an.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:qt(e.onContextMenu,m=>{d(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:qt(e.onPointerDown,Nw(m=>{d(),u.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:qt(e.onPointerMove,Nw(d)),onPointerCancel:r?e.onPointerCancel:qt(e.onPointerCancel,Nw(d)),onPointerUp:r?e.onPointerUp:qt(e.onPointerUp,Nw(d))})]})});zq.displayName=$q;var ZAe="ContextMenuPortal",Uq=e=>{const{__scopeContextMenu:t,...n}=e,r=Li(t);return p.jsx(Cq,{...r,...n})};Uq.displayName=ZAe;var Vq="ContextMenuContent",Hq=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Lq(Vq,n),i=Li(n),s=T.useRef(!1);return p.jsx(Tq,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&s.current&&o.preventDefault(),s.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!a.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Hq.displayName=Vq;var YAe="ContextMenuGroup",XAe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(kq,{...a,...r,ref:t})});XAe.displayName=YAe;var JAe="ContextMenuLabel",QAe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Aq,{...a,...r,ref:t})});QAe.displayName=JAe;var eNe="ContextMenuItem",qq=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Nq,{...a,...r,ref:t})});qq.displayName=eNe;var tNe="ContextMenuCheckboxItem",nNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Rq,{...a,...r,ref:t})});nNe.displayName=tNe;var rNe="ContextMenuRadioGroup",aNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Iq,{...a,...r,ref:t})});aNe.displayName=rNe;var iNe="ContextMenuRadioItem",sNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(jq,{...a,...r,ref:t})});sNe.displayName=iNe;var oNe="ContextMenuItemIndicator",lNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Dq,{...a,...r,ref:t})});lNe.displayName=oNe;var cNe="ContextMenuSeparator",Gq=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Mq,{...a,...r,ref:t})});Gq.displayName=cNe;var uNe="ContextMenuArrow",dNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Oq,{...a,...r,ref:t})});dNe.displayName=uNe;var fNe="ContextMenuSubTrigger",hNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Pq,{...a,...r,ref:t})});hNe.displayName=fNe;var pNe="ContextMenuSubContent",mNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Fq,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mNe.displayName=pNe;function Nw(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var gNe=Bq,yNe=zq,bNe=Uq,vNe=Hq,wNe=qq,xNe=Gq;function n8({...e}){return p.jsx(gNe,{"data-slot":"context-menu",...e})}function r8({...e}){return p.jsx(yNe,{"data-slot":"context-menu-trigger",...e})}function a8({className:e,...t}){return p.jsx(bNe,{children:p.jsx(vNe,{"data-slot":"context-menu-content",className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function ps({className:e,inset:t,variant:n="default",...r}){return p.jsx(wNe,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:xt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function i8({className:e,...t}){return p.jsx(xNe,{"data-slot":"context-menu-separator",className:xt("bg-border -mx-1 my-1 h-px",e),...t})}const _Ne=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:m,handleDelete:g,setNewName:b,renameInputRef:v,handleGitInit:x,handleGitPull:w,handleGitCommit:_,handleGitPush:E,handleGitStatus:C})=>{const k=e.type==="folder",I=H=>{H.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(k?o(e):l(!n,e.id))},j=H=>{H.key==="Enter"?h():H.key==="Escape"&&d()},N=k?r?D8:uf:j8,P=k?r?"text-green-400":"text-yellow-400":"text-blue-400",L=p.jsxs(Jr,{className:xt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!k&&"cursor-pointer"),onClick:I,onDoubleClick:()=>!i&&!t&&o(e),children:[p.jsx(Fn,{className:"px-2 py-1",children:p.jsx(dy,{checked:n,onCheckedChange:H=>l(!!H,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||k})}),p.jsx(Fn,{className:"px-2 py-1",children:p.jsx(N,{className:xt("h-5 w-5",P)})}),p.jsx(Fn,{className:"py-1 px-2",children:t?p.jsx(Rn,{ref:v,value:a,onChange:H=>b(H.target.value),onBlur:h,onKeyDown:j,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:H=>H.stopPropagation(),disabled:i}):p.jsx("span",{className:xt("truncate",k&&"cursor-pointer hover:underline"),title:e.name,onClick:H=>{k&&(H.stopPropagation(),o(e))},children:e.name})}),p.jsx(Fn,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?I0(e.size):""}),p.jsx(Fn,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),p.jsx(Fn,{className:"text-right pr-4 py-1",children:p.jsx("div",{className:xt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?p.jsxs(p.Fragment,{children:[p.jsx(Dn,{tooltipText:"Save (Enter)",onClick:H=>{H.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ri,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),p.jsx(Dn,{tooltipText:"Cancel (Esc)",onClick:H=>{H.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:p.jsx(Ii,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Dn,{tooltipText:"Rename",onClick:H=>{H.stopPropagation(),u(e)},"aria-label":"Rename",disabled:i||s,icon:p.jsx(Vg,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Dn,{tooltipText:k?"Download folder (.zip)":"Download file",onClick:H=>{H.stopPropagation(),m(e)},"aria-label":k?"Download folder as ZIP":"Download file",disabled:i,icon:p.jsx(af,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Dn,{tooltipText:"Delete",onClick:H=>{H.stopPropagation(),g(e)},"aria-label":`Delete ${k?"folder":"file"}`,disabled:i,icon:p.jsx(Zi,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return k?p.jsxs(n8,{children:[p.jsx(r8,{disabled:t||i,asChild:!0,children:L}),p.jsxs(a8,{children:[p.jsx(ps,{onSelect:()=>o(e),disabled:t||i,children:"Open Folder"}),p.jsx(i8,{}),r?p.jsxs(p.Fragment,{children:[p.jsxs(ps,{onSelect:()=>w(e.path),disabled:i,children:[p.jsx(O8,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),p.jsxs(ps,{onSelect:()=>_(e.path),disabled:i,children:[p.jsx(M8,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),p.jsxs(ps,{onSelect:()=>E(e.path),disabled:i,children:[p.jsx(sA,{className:"mr-2 h-4 w-4"}),"Git Push"]}),p.jsxs(ps,{onSelect:()=>C(e.path),disabled:i,children:[p.jsx(P8,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):p.jsxs(ps,{onSelect:()=>x(e.path),disabled:i,children:[p.jsx(ju,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),p.jsx(i8,{}),p.jsxs(ps,{onSelect:()=>u(e),disabled:i,children:[p.jsx(Vg,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(ps,{onSelect:()=>m(e),disabled:i,children:[p.jsx(af,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),p.jsxs(ps,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[p.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):p.jsxs(n8,{children:[p.jsx(r8,{disabled:t||i,asChild:!0,children:L}),p.jsxs(a8,{children:[p.jsxs(ps,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),p.jsxs(ps,{onSelect:()=>u(e),disabled:i,children:[p.jsx(Vg,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(ps,{onSelect:()=>m(e),disabled:i,children:[p.jsx(af,{className:"mr-2 h-4 w-4"}),"Download File"]}),p.jsxs(ps,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[p.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},SNe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:b,handleDelete:v,setNewName:x,setNewFolderName:w,renameInputRef:_,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:I,handleGitCommit:j,handleGitPush:N,handleGitStatus:P})=>{const L=T.useMemo(()=>e,[e]);return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):p.jsx("div",{className:"relative h-full",children:p.jsxs(dm,{className:"w-full text-sm",children:[p.jsx(fm,{className:"sticky top-0 bg-card z-10",children:p.jsxs(Jr,{className:"hover:bg-card",children:[p.jsx(Nr,{className:"w-[40px] px-2"}),p.jsx(Nr,{className:"w-[40px] px-2"}),p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{className:"w-[100px] text-right",children:"Size"}),p.jsx(Nr,{className:"w-[150px] text-right",children:"Modified"}),p.jsx(Nr,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),p.jsxs(hm,{children:[r&&p.jsx(eq,{newFolderName:a,setNewFolderName:w,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s}),L.map(H=>{const M=t===H.path,K=i.has(H.id),q=C[H.path]??!1;return p.jsx(_Ne,{entry:H,isEditingThis:M,isChecked:K,isGitRepo:q,newName:M?n:"",isOperationLoading:s,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:b,handleDelete:v,setNewName:x,renameInputRef:_,handleGitInit:k,handleGitPull:I,handleGitCommit:j,handleGitPush:N,handleGitStatus:P},H.id)}),e.length===0&&!r&&!s&&p.jsx(Jr,{children:p.jsx(Fn,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},ENe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:s,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:u,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:b,fileInputRef:v,folderInputRef:x,archiveInputRef:w,handleFileChange:_,handleArchiveChange:E})=>p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:v,onChange:_,className:"hidden",multiple:!0,disabled:t}),p.jsx("input",{type:"file",ref:x,onChange:_,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),p.jsx("input",{type:"file",ref:w,onChange:E,className:"hidden",accept:".zip",disabled:t}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:p.jsx(FZ,{className:"h-4 w-4"})}),p.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:p.jsx(CZ,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),p.jsx("div",{className:"flex-grow"}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",p.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(m1,{className:"h-4 w-4"})}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(iA,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(R8,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(uf,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(cZ,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),b()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(ju,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(kK,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),Wq=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:s,isSubmitting:o,submitDisabled:l=!1,className:u,contentClassName:d})=>{const h=async m=>{m==null||m.preventDefault(),!(o||l)&&await s()};return p.jsx(D_,{open:e,onOpenChange:t,children:p.jsxs(M_,{className:xt(u),children:[p.jsxs(O_,{children:[p.jsx(F_,{children:n}),r&&p.jsx(L_,{children:r})]}),p.jsx("div",{className:xt("py-4",d),children:a}),p.jsxs(P_,{children:[p.jsx(pEe,{asChild:!0,children:p.jsx(It,{variant:"outline",disabled:o,children:"Cancel"})}),p.jsxs(It,{onClick:h,disabled:o||l,children:[o&&p.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":i]})]})]})})},CNe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:s,onSubmitClone:o,currentPath:l})=>p.jsx(Wq,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:p.jsxs(p.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",p.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:s,submitDisabled:!n.trim(),children:p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Zt,{htmlFor:"clone-url",className:"text-right",children:"URL"}),p.jsx(Rn,{id:"clone-url",value:n,onChange:u=>r(u.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:s})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Zt,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),p.jsx(Rn,{id:"clone-branch",value:a,onChange:u=>i(u.target.value),className:"col-span-3",placeholder:"main (default)",disabled:s})]})]})}),TNe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:s})=>p.jsx(Wq,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:p.jsxs(p.Fragment,{children:["Enter a commit message for the changes in ",p.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:s,isSubmitting:i,submitDisabled:!r.trim(),children:p.jsx("div",{className:"grid gap-4",children:p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Zt,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),p.jsx(Rn,{id:"commit-msg",value:r,onChange:o=>a(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})});var J_="DropdownMenu",[kNe,z3e]=vi(J_,[Z_]),Bi=Z_(),[ANe,Kq]=kNe(J_),Zq=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=Bi(t),u=T.useRef(null),[d,h]=Eo({prop:a,defaultProp:i??!1,onChange:s,caller:J_});return p.jsx(ANe,{scope:t,triggerId:Ha(),triggerRef:u,contentId:Ha(),open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(m=>!m),[h]),modal:o,children:p.jsx(Sq,{...l,open:d,onOpenChange:h,dir:r,modal:o,children:n})})};Zq.displayName=J_;var Yq="DropdownMenuTrigger",Xq=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=Kq(Yq,n),s=Bi(n);return p.jsx(Eq,{asChild:!0,...s,children:p.jsx(an.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:pc(t,i.triggerRef),onPointerDown:qt(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:qt(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});Xq.displayName=Yq;var NNe="DropdownMenuPortal",Jq=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Bi(t);return p.jsx(Cq,{...r,...n})};Jq.displayName=NNe;var Qq="DropdownMenuContent",eG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Kq(Qq,n),i=Bi(n),s=T.useRef(!1);return p.jsx(Tq,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:qt(e.onCloseAutoFocus,o=>{var l;s.current||(l=a.triggerRef.current)==null||l.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:qt(e.onInteractOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!a.modal||d)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eG.displayName=Qq;var RNe="DropdownMenuGroup",INe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(kq,{...a,...r,ref:t})});INe.displayName=RNe;var jNe="DropdownMenuLabel",DNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Aq,{...a,...r,ref:t})});DNe.displayName=jNe;var MNe="DropdownMenuItem",tG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Nq,{...a,...r,ref:t})});tG.displayName=MNe;var ONe="DropdownMenuCheckboxItem",PNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Rq,{...a,...r,ref:t})});PNe.displayName=ONe;var FNe="DropdownMenuRadioGroup",LNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Iq,{...a,...r,ref:t})});LNe.displayName=FNe;var BNe="DropdownMenuRadioItem",$Ne=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(jq,{...a,...r,ref:t})});$Ne.displayName=BNe;var zNe="DropdownMenuItemIndicator",UNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Dq,{...a,...r,ref:t})});UNe.displayName=zNe;var VNe="DropdownMenuSeparator",nG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Mq,{...a,...r,ref:t})});nG.displayName=VNe;var HNe="DropdownMenuArrow",qNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Oq,{...a,...r,ref:t})});qNe.displayName=HNe;var GNe="DropdownMenuSubTrigger",WNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Pq,{...a,...r,ref:t})});WNe.displayName=GNe;var KNe="DropdownMenuSubContent",ZNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Fq,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZNe.displayName=KNe;var YNe=Zq,XNe=Xq,JNe=Jq,QNe=eG,eRe=tG,tRe=nG;function nRe({...e}){return p.jsx(YNe,{"data-slot":"dropdown-menu",...e})}function rRe({...e}){return p.jsx(XNe,{"data-slot":"dropdown-menu-trigger",...e})}function aRe({className:e,sideOffset:t=4,...n}){return p.jsx(JNe,{children:p.jsx(QNe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Jo({className:e,inset:t,variant:n="default",...r}){return p.jsx(eRe,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:xt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function s8({className:e,...t}){return p.jsx(tRe,{"data-slot":"dropdown-menu-separator",className:xt("bg-border -mx-1 my-1 h-px",e),...t})}const iRe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:b,handleDelete:v,setNewName:x,setNewFolderName:w,renameInputRef:_,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:I,handleGitCommit:j,handleGitPush:N,handleGitStatus:P})=>{const L=H=>{H.key==="Enter"?h():H.key==="Escape"&&d()};return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):p.jsxs("div",{className:"p-2 space-y-1",children:[r&&p.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:p.jsx(eq,{newFolderName:a,setNewFolderName:w,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s,isMobile:!0})}),e.map(H=>{const M=t===H.path,K=i.has(H.id),q=C[H.path]??!1,ue=H.type==="folder",ae=ue?q?D8:uf:j8,te=ue?q?"text-green-400":"text-yellow-400":"text-blue-400";return p.jsxs("div",{className:xt("flex items-center justify-between p-2 border rounded-md",M&&"bg-muted ring-1 ring-primary",s&&"opacity-70 cursor-not-allowed",!M&&"hover:bg-muted/50",!M&&"cursor-pointer"),onClick:()=>{M||s||(ue?o(H):l(!K,H.id))},children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!ue&&p.jsx(dy,{checked:K,onCheckedChange:Y=>l(!!Y,H.id),"aria-label":`Select ${H.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:s,onClick:Y=>Y.stopPropagation()}),ue&&p.jsx("div",{className:"w-6 flex-shrink-0"}),p.jsx(ae,{className:xt("h-5 w-5 flex-shrink-0",te)}),p.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[M?p.jsx(Rn,{ref:_,value:n,onChange:Y=>x(Y.target.value),onBlur:h,onKeyDown:L,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:Y=>Y.stopPropagation(),disabled:s}):p.jsx("span",{className:"text-sm font-medium truncate",title:H.name,children:H.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:H.type==="file"&&H.size!==void 0?I0(H.size):H.type==="folder"?q?"Git Repository":"Folder":""})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:M?p.jsxs(p.Fragment,{children:[p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:Y=>{Y.stopPropagation(),h()},disabled:s||!n.trim(),"aria-label":"Save name",children:s?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ri,{className:"h-4 w-4"})}),p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:Y=>{Y.stopPropagation(),d()},disabled:s,"aria-label":"Cancel edit",children:p.jsx(Ii,{className:"h-4 w-4"})})]}):p.jsxs(nRe,{children:[p.jsx(rRe,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:Y=>Y.stopPropagation(),disabled:s,"aria-label":"More actions",children:p.jsx(oZ,{className:"h-4 w-4"})})}),p.jsxs(aRe,{align:"end",onClick:Y=>Y.stopPropagation(),children:[ue&&p.jsx(Jo,{onSelect:()=>o(H),children:"Open Folder"}),!ue&&p.jsxs(Jo,{onSelect:()=>l(!K,H.id),children:[K?"Deselect":"Select"," File"]}),p.jsxs(Jo,{onSelect:()=>u(H),children:[p.jsx(Vg,{className:"mr-2 h-4 w-4"})," Rename"]}),p.jsxs(Jo,{onSelect:()=>b(H),children:[p.jsx(af,{className:"mr-2 h-4 w-4"})," Download"," ",ue?"as ZIP":""]}),ue&&p.jsx(s8,{}),ue&&q&&p.jsxs(p.Fragment,{children:[p.jsxs(Jo,{onSelect:()=>I(H.path),children:[p.jsx(O8,{className:"mr-2 h-4 w-4"})," Git Pull"]}),p.jsxs(Jo,{onSelect:()=>j(H.path),children:[p.jsx(M8,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),p.jsxs(Jo,{onSelect:()=>N(H.path),children:[p.jsx(sA,{className:"mr-2 h-4 w-4"})," Git Push"]}),p.jsxs(Jo,{onSelect:()=>P(H.path),children:[p.jsx(P8,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),ue&&!q&&p.jsxs(Jo,{onSelect:()=>k(H.path),children:[p.jsx(ju,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),p.jsx(s8,{}),p.jsxs(Jo,{className:"text-red-600 focus:text-red-600",onSelect:()=>v(H),children:[p.jsx(Zi,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},H.id)}),e.length===0&&!r&&!s&&p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},a3=T.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:s,createDirectory:o,uploadFiles:l,deleteNodes:u,renameNode:d,setCurrentPath:h,rootId:m,selectFile:g,deselectFile:b,selectedFileIds:v,vfsKey:x,configuredVfsKey:w,initializingKey:_,_setError:E,_setOperationLoading:C,findNodeByPath:k,initializeVFS:I}=ko(dn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[j,N]=T.useState(""),[P,L]=T.useState(null),[H,M]=T.useState(!1),[K,q]=T.useState(""),[ue,ae]=T.useState({}),[te,Y]=T.useState(!1),[ie,V]=T.useState(""),[J,Q]=T.useState(""),[ne,he]=T.useState(!1),[de,Ie]=T.useState(!1),[ke,Te]=T.useState(null),[Se,Pe]=T.useState(""),[Qe,Le]=T.useState(!1),[je,z]=T.useState({}),Ee=T.useRef(null),Ne=T.useRef(null),fe=T.useRef(null),se=T.useRef(null),ee=T.useRef(null),xe=n?e[n]:null,Fe=xe?xe.path:"/",We=(t[n||m||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,Rt)=>ut.type==="folder"&&Rt.type==="file"?-1:ut.type==="file"&&Rt.type==="folder"?1:ut.name.localeCompare(Rt.name)),Nt=T.useMemo(()=>We.filter(ut=>ut.type==="folder").map(ut=>ut.path),[We]),it=r||_!==null||x!==w,St=a||ne||Qe||Object.values(je).some(Boolean);T.useEffect(()=>{n!==null&&!t[n]&&!it&&w===x?s(n):n===null&&m&&!t[m]&&!it&&w===x&&s(m)},[n,t,m,it,s,w,x]),T.useEffect(()=>{var ut,Rt;P&&((ut=se.current)==null||ut.focus(),(Rt=se.current)==null||Rt.select())},[P]),T.useEffect(()=>{var ut;H&&((ut=ee.current)==null||ut.focus())},[H]),T.useEffect(()=>{(async()=>{if(it||Nt.length===0)return;const Rt={};let Lt=!1;for(const en of Nt)try{const Nn=await pde(en);ue[en]!==Nn&&(Rt[en]=Nn,Lt=!0)}catch(Nn){console.error(`Error checking git status for ${en}:`,Nn),ue[en]!==!1&&(Rt[en]=!1,Lt=!0)}Lt&&ae(en=>({...en,...Rt}))})()},[Nt,it,ue]);const Ft=T.useCallback(async(ut,Rt)=>{if(!(St||it)){Rt!==!1&&C(!0),E(null);try{await ut()}catch(Lt){console.error("[FileManager Operation Error]:",Lt)}finally{Rt!==!1&&C(!1)}}},[St,it,E,C]),Mt=T.useCallback(ut=>{St||it||P||ut.type==="folder"&&Ft(()=>h(ut.path),!1)},[St,it,P,h,Ft]),Kt=T.useCallback(()=>{if(St||it||Fe==="/")return;const ut=Iy(Fe);Ft(()=>h(ut),!1)},[St,it,Fe,h,Ft]),be=T.useCallback(()=>{St||it||Fe==="/"||Ft(()=>h("/"),!1)},[St,it,Fe,h,Ft]),D=T.useCallback(()=>{it||Ft(()=>s(n),!1)},[Ft,s,n,it]),W=T.useCallback((ut,Rt)=>{const Lt=e[Rt];Lt&&Lt.type==="file"?ut?g(Rt):b(Rt):Lt&&Lt.type==="folder"&&Ge.info("Folders cannot be attached to the prompt.")},[g,b,e]),pe=T.useCallback(ut=>{St||it||H||(L(ut.path),N(ut.name),M(!1))},[St,it,H]),De=T.useCallback(()=>{L(null),N("")},[]),ve=T.useCallback(async()=>{if(!P||!j.trim()){De();return}const ut=k(P);ut&&ut.name!==j.trim()&&await Ft(()=>d(ut.id,j.trim())),De()},[P,j,d,De,k,Ft]),Ae=T.useCallback(()=>{St||it||P||(M(!0),q(""),L(null))},[St,it,P]),le=T.useCallback(()=>{M(!1),q("")},[]),ft=T.useCallback(async()=>{if(!K.trim()){le();return}await Ft(()=>o(n,K.trim())),le()},[K,o,n,le,Ft]),vt=()=>{var ut;return(ut=Ee.current)==null?void 0:ut.click()},F=()=>{var ut;return(ut=Ne.current)==null?void 0:ut.click()},$e=()=>{var ut;return(ut=fe.current)==null?void 0:ut.click()},nt=T.useCallback(async ut=>{const Rt=ut.target.files;Rt&&Rt.length>0&&(await Ft(()=>l(n,Rt)),ut.target&&(ut.target.value=""))},[l,n,Ft]),ye=T.useCallback(async ut=>{var Lt;const Rt=(Lt=ut.target.files)==null?void 0:Lt[0];Rt&&(await Ft(async()=>{await yde(Rt,Fe),await s(n)}),ut.target&&(ut.target.value=""))},[Fe,s,n,Ft]),Me=T.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ft(()=>u([ut.id]))},[u,Ft]),Ke=T.useCallback(async ut=>{await Ft(async()=>{ut.type==="file"?await gde(ut.path):await dM(`${ut.name}.zip`,ut.path)})},[Ft]),Dt=T.useCallback(async()=>{We.length!==0&&await Ft(async()=>{const ut=_a(Fe)||"root";await dM(`${ut}_export.zip`,Fe)})},[Fe,We.length,Ft]),ge=T.useCallback(async(ut,Rt)=>{if(!(je[ut]||it||a)){z(Lt=>({...Lt,[ut]:!0})),E(null);try{await Rt()}catch(Lt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Lt)}finally{z(Lt=>({...Lt,[ut]:!1}))}}},[E,je,it,a]),G=T.useCallback(ut=>{ge(ut,async()=>{await xB(ut),ae(Rt=>({...Rt,[ut]:!0}))})},[ge]),U=T.useCallback(ut=>{Ge.info("Pulling default branch (auth not implemented yet)..."),ge(ut,()=>s_(ut,"main"))},[ge]),Z=T.useCallback(ut=>{Te(ut),Pe(""),Ie(!0)},[]),me=T.useCallback(ut=>{Ge.info("Pushing default branch (auth not implemented yet)..."),ge(ut,()=>EN(ut,"main"))},[ge]),Re=T.useCallback(ut=>{ge(ut,()=>_B(ut))},[ge]),Ve=T.useCallback(()=>{V(""),Q(""),Y(!0)},[]),pt=T.useCallback(async()=>{if(!ie.trim()){Ge.error("Repository URL cannot be empty.");return}he(!0),E(null);try{const ut=_a(ie.trim().replace(/\.git$/,""))||"cloned_repo",Rt=j0(Fe,ut);await wB(Rt,ie.trim(),J.trim()||void 0),Y(!1),await D()}catch{}finally{he(!1)}},[ie,J,Fe,E,D]),Wt=T.useCallback(async()=>{if(!ke||!Se.trim()){Ge.error("Commit message cannot be empty.");return}Le(!0),E(null);try{await SN(ke,Se.trim()),Ie(!1)}catch{}finally{Le(!1)}},[ke,Se,E]);return it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[p.jsx(Pn,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:_?`Initializing filesystem: ${_}`:"Loading filesystem..."}),i&&p.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[p.jsxs("p",{children:["Error loading filesystem: ",i]}),p.jsx(It,{variant:"outline",size:"sm",onClick:()=>I(x||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):p.jsxs("div",{className:xt("flex h-full flex-col bg-card text-card-foreground"),children:[p.jsx(ENe,{currentPath:Fe,isAnyLoading:St||it,isOperationLoading:a,entries:We,editingPath:P,creatingFolder:H,handleNavigateHome:be,handleNavigateUp:Kt,handleRefresh:D,startCreatingFolder:Ae,handleUploadClick:vt,handleFolderUploadClick:F,handleArchiveUploadClick:$e,handleDownloadAll:Dt,handleCloneClick:Ve,fileInputRef:Ee,folderInputRef:Ne,archiveInputRef:fe,handleFileChange:nt,handleArchiveChange:ye}),p.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:p.jsx(SNe,{entries:We,editingPath:P,newName:j,creatingFolder:H,newFolderName:K,selectedFileIds:v,isOperationLoading:St,handleNavigate:Mt,handleCheckboxChange:W,startEditing:pe,cancelEditing:De,handleRename:ve,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Me,setNewName:N,setNewFolderName:q,renameInputRef:se,newFolderInputRef:ee,gitRepoStatus:ue,handleGitInit:G,handleGitPull:U,handleGitCommit:Z,handleGitPush:me,handleGitStatus:Re})}),p.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:p.jsx(iRe,{entries:We,editingPath:P,newName:j,creatingFolder:H,newFolderName:K,selectedFileIds:v,isOperationLoading:St,handleNavigate:Mt,handleCheckboxChange:W,startEditing:pe,cancelEditing:De,handleRename:ve,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Me,setNewName:N,setNewFolderName:q,renameInputRef:se,newFolderInputRef:ee,gitRepoStatus:ue,handleGitInit:G,handleGitPull:U,handleGitCommit:Z,handleGitPush:me,handleGitStatus:Re})}),p.jsx(CNe,{isOpen:te,onOpenChange:Y,cloneRepoUrl:ie,setCloneRepoUrl:V,cloneBranch:J,setCloneBranch:Q,isCloning:ne,onSubmitClone:pt,currentPath:Fe}),p.jsx(TNe,{isOpen:de,onOpenChange:Ie,commitPath:ke,commitMessage:Se,setCommitMessage:Pe,isCommitting:Qe,onSubmitCommit:Wt})]})});a3.displayName="FileManager";const sRe=({vfsKey:e,selectedItemType:t})=>e==="orphan"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(y4,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Shared VFS:"})," All chats ",p.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(y4,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(uf,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,oRe=()=>{const{isVfsModalOpen:e,toggleVfsModal:t}=Ji(dn(d=>({isVfsModalOpen:d.isVfsModalOpen,toggleVfsModal:d.toggleVfsModal}))),{vfsKey:n,selectedFileIds:r,clearSelection:a,nodes:i}=ko(dn(d=>({vfsKey:d.vfsKey,selectedFileIds:d.selectedFileIds,clearSelection:d.clearSelection,nodes:d.nodes}))),s=mn(d=>d.selectedItemType),o=gc.getState().addAttachedFile,l=()=>{if(r.size===0){Ge.info("No files selected in VFS to attach.");return}let d=0;r.forEach(h=>{const m=i[h];m&&m.type==="file"&&(o({source:"vfs",name:m.name,type:m.mimeType||"application/octet-stream",size:m.size,path:m.path}),d++)}),d>0?(Ge.success(`Attached ${d} file(s) from VFS to the next prompt.`),a(),t(!1)):Ge.warning("No valid files were selected to attach.")},u=()=>{a(),t(!1)};return p.jsx(D_,{open:e,onOpenChange:u,children:p.jsxs(M_,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[p.jsxs(O_,{className:"p-4 pb-2 border-b flex-shrink-0",children:[p.jsx(F_,{children:"Virtual Filesystem"}),p.jsx(L_,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),p.jsx(sRe,{vfsKey:n,selectedItemType:s})]}),p.jsx("div",{className:"flex-grow overflow-hidden",children:p.jsx(a3,{})}),p.jsxs(P_,{className:"p-4 pt-2 border-t flex-shrink-0",children:[p.jsx(It,{variant:"outline",onClick:u,children:"Close"}),p.jsxs(It,{onClick:l,disabled:r.size===0,children:[p.jsx(cA,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r.size,")"]})]})]})})};function lRe(){const e=Ir.getState().registerPromptControl,t=Ir.getState().registerChatControl;e({id:"core-vfs-prompt-trigger",show:()=>ko.getState().enableVfs,triggerRenderer:()=>gt.createElement(bAe)}),t({id:"core-vfs-modal-panel",panel:void 0,show:()=>Ji.getState().isVfsModalOpen,renderer:()=>gt.createElement(oRe),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control (Prompt Trigger & Modal)")}const cRe=()=>{const{linkConversationToRepo:e,syncConversation:t}=mn(dn(L=>({linkConversationToRepo:L.linkConversationToRepo,syncConversation:L.syncConversation}))),[n,r]=T.useState(()=>mn.getState().selectedItemId),[a,i]=T.useState(()=>mn.getState().selectedItemType),[s,o]=T.useState(()=>mn.getState().syncRepos),[l,u]=T.useState(()=>mn.getState().conversationSyncStatus),[d,h]=T.useState(()=>Mn.getState().status==="streaming"),[m,g]=T.useState(null),[b,v]=T.useState("idle"),[x,w]=T.useState(!1),[_,E]=T.useState(!1);T.useEffect(()=>{const L=ae=>{r(ae.selectedItemId),i(ae.selectedItemType)},H=()=>{o(mn.getState().syncRepos)},M=ae=>{u(te=>({...te,[ae.conversationId]:ae.status}))},K=ae=>{h(ae.status==="streaming")},q=ae=>{ae.conversationId===n&&ae.updates.syncRepoId!==void 0&&g(ae.updates.syncRepoId)},ue=mn.getState();return r(ue.selectedItemId),i(ue.selectedItemType),o(ue.syncRepos),u(ue.conversationSyncStatus),Tt.on(Et.CONTEXT_CHANGED,L),Tt.on(Et.SYNC_REPO_CHANGED,H),Tt.on(Et.CONVERSATION_SYNC_STATUS_CHANGED,M),Tt.on(Et.INTERACTION_STATUS_CHANGED,K),Tt.on(Et.CONVERSATION_UPDATED,q),()=>{Tt.off(Et.CONTEXT_CHANGED,L),Tt.off(Et.SYNC_REPO_CHANGED,H),Tt.off(Et.CONVERSATION_SYNC_STATUS_CHANGED,M),Tt.off(Et.INTERACTION_STATUS_CHANGED,K),Tt.off(Et.CONVERSATION_UPDATED,q)}},[n]),T.useEffect(()=>{if(a==="conversation"&&n){const L=mn.getState().getConversationById(n);g((L==null?void 0:L.syncRepoId)??null),v(l[n]??"idle")}else g(null),v("idle")},[n,a,l]);const C=gt.useMemo(()=>new Map(s.map(L=>[L.id,L.name])),[s]),k=m?C.get(m):void 0,I=T.useCallback(async L=>{if(!n||a!=="conversation")return;w(!0),await e(n,L==="none"?null:L),w(!1)},[n,a,e]),j=T.useCallback(async()=>{!n||!m||(E(!0),await t(n),E(!1))},[n,m,t]),N=oV(b,k),P=!m||_||x||d||b==="syncing";return a!=="conversation"||s.length===0?null:p.jsxs(jc,{children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Dc,{asChild:!0,children:p.jsx(It,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||x||_,"aria-label":"Configure Git Sync",children:b==="syncing"||_||x?p.jsx(Pn,{className:"h-4 w-4 animate-spin"}):p.jsx(ju,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:m?`Sync Status: ${b}`:"Link to Sync Repo"})]})}),p.jsxs(Mc,{className:"w-64 p-4 space-y-3",align:"start",children:[p.jsx(Zt,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),p.jsxs(uc,{value:m??"none",onValueChange:I,disabled:x||_||d,children:[p.jsx(fc,{id:"sync-repo-select",className:"w-full h-9",children:p.jsx(dc,{placeholder:"Select repository..."})}),p.jsxs(hc,{children:[p.jsx(xa,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map(L=>p.jsx(xa,{value:L.id,children:L.name},L.id))]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",N||"Not Linked"]}),p.jsxs(It,{size:"sm",variant:"outline",onClick:j,disabled:P,className:"h-8",children:[_||b==="syncing"?p.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(sA,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function uRe(){const e=Ir.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>gt.createElement(cRe)}),console.log("[Function] Registered Core Git Sync Control")}const dRe=$.object({path:$.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),fRe=$.object({path:$.string().describe("The path of the file to read within the VFS."),encoding:$.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),hRe=$.object({path:$.string().describe("The path where the file should be written."),content:$.string().describe("The content to write to the file."),encoding:$.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),pRe=$.object({path:$.string().describe("The path of the file or directory to delete."),recursive:$.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),mRe=$.object({path:$.string().describe("The path of the directory to create (including parents).")}),gRe=$.object({oldPath:$.string().describe("The current path of the item to rename."),newName:$.string().describe("The new name for the item.")});function yRe(){const e=Ir.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:dRe},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=ar(o||"/");try{const h=await CN(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(m=>({name:m.name,type:m.isDirectory?"folder":"file",size:m.size,lastModified:m.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:fRe},async({path:o,encoding:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=ar(o);try{const m=await Bf(h,{fsInstance:d});let g;return l==="base64"?g=btoa(String.fromCharCode(...m)):g=new TextDecoder().decode(m),{success:!0,path:h,content:g,encoding:l}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:hRe},async({path:o,content:l,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=ar(o);try{let g;if(u==="base64"){const b=atob(l),v=b.length,x=new Uint8Array(v);for(let w=0;w<v;w++)x[w]=b.charCodeAt(w);g=x}else g=l;return await o_(m,g,{fsInstance:h}),{success:!0,path:m}}catch(g){return{success:!1,path:m,error:g.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:pRe},async({path:o,recursive:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=ar(o);try{return await TN(h,l,{fsInstance:d}),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:mRe},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=ar(o);try{return await SB(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:gRe},async({oldPath:o,newName:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=ar(o),m=ar(h.substring(0,h.lastIndexOf("/"))||"/"),g=bl(m,l);try{return await CB(h,g,{fsInstance:d}),{success:!0,oldPath:h,newPath:g}}catch(b){return{success:!1,oldPath:h,newName:l,error:b.message}}}),console.log("[Function] Core VFS Tools Registered.")}const bRe=$.object({path:$.string().describe("The directory path within the VFS to initialize as a Git repository.")}),vRe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to commit."),message:$.string().describe("The commit message.")}),wRe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:$.string().optional().describe("The branch name to pull.")}),xRe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to push."),branch:$.string().optional().describe("The branch name to push.")}),_Re=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to check status.")});function SRe(){const e=Ir.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:bRe},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await xB(s,{fsInstance:l}),{success:!0,message:`Repository initialized at ${s}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:vRe},async({path:s,message:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=pr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await SN(s,o,{fsInstance:u}),{success:!0,message:`Changes committed in ${s}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:wRe},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await s_(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:xRe},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await EN(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:_Re},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await _B(s,{fsInstance:l}),{success:!0,message:`Status checked for ${s}`}}catch(u){return{success:!1,error:u.message}}}),console.log("[Function] Core Git Tools Registered.")}const ERe=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:s})=>{const o=Ir(_=>_.tools),l=pr(_=>_.toolMaxSteps),[u,d]=T.useState(""),h=T.useMemo(()=>Object.entries(o).map(([_,{definition:E,modId:C}])=>({name:_,description:E.description??"No description provided.",modId:C})).sort((_,E)=>_.name.localeCompare(E.name)),[o]),m=T.useMemo(()=>{const _=u.trim().toLowerCase();return _?h.filter(E=>E.name.toLowerCase().includes(_)||E.description.toLowerCase().includes(_)||E.modId.toLowerCase().includes(_)):h},[h,u]),g=T.useCallback((_,E)=>{n(C=>{const k=new Set(C);return E?k.add(_):k.delete(_),k})},[n]),b=T.useCallback(_=>{n(()=>_?new Set(h.map(E=>E.name)):new Set)},[h,n]),v=_=>{const E=_.target.value;if(E===""){a(null);return}const C=parseInt(E,10);if(isNaN(C))a(null);else{const k=Math.max(1,Math.min(20,C));a(k)}},x=r===null?"":String(r),w=s!=="conversation"||!i;return p.jsxs("div",{className:xt("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[p.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),p.jsxs("div",{className:"relative",children:[p.jsx(wo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter tools...",value:u,onChange:_=>d(_.target.value),className:"pl-8 h-9",disabled:w})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs(Zt,{className:"text-xs text-muted-foreground",children:[m.length," tools shown (",t.size," enabled)"]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx(It,{variant:"outline",size:"sm",onClick:()=>b(!0),disabled:w||h.length===0,children:"Enable All"}),p.jsx(It,{variant:"outline",size:"sm",onClick:()=>b(!1),disabled:w||h.length===0||t.size===0,children:"Disable All"})]})]}),p.jsx(Ku,{className:"h-56 border rounded-md p-2 bg-background/50",children:w?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(_=>p.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[p.jsx(Hs,{id:`tool-switch-${_.name}`,checked:t.has(_.name),onCheckedChange:E=>g(_.name,E),className:"flex-shrink-0",disabled:w}),p.jsxs(Zt,{htmlFor:`tool-switch-${_.name}`,className:xt("text-sm font-normal flex-grow pl-2 space-y-0.5",w?"cursor-not-allowed":"cursor-pointer"),title:`${_.name} (from ${_.modId})`,children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:_.description})]})]},_.name))})}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Zt,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),p.jsx(Rn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:v,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:w}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let Nu=new Set,rc=null,zg=()=>{};const CRe=()=>{const[e,t]=T.useState({enabledTools:Nu,maxStepsOverride:rc}),[n,r]=T.useState(e.maxStepsOverride),[a,i]=T.useState(!1),[s,o]=T.useState(()=>Mn.getState().status==="streaming"),[l,u]=T.useState(!0),[d,h]=T.useState(()=>mn.getState().selectedItemType),[m,g]=T.useState(()=>mn.getState().selectedItemId),b=Object.keys(Ir.getState().tools).length;T.useEffect(()=>(zg=E=>{const C=E({enabledTools:Nu,maxStepsOverride:rc});Nu=C.enabledTools,rc=C.maxStepsOverride,t(C)},t({enabledTools:Nu,maxStepsOverride:rc}),()=>{zg=()=>{}}),[]),T.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),T.useEffect(()=>{const E=I=>{o(I.status==="streaming")},C=I=>{var L,H;if(!I.modelId){u(!1);return}const{getSelectedModel:j}=Un.getState(),N=j(),P=Object.keys(Ir.getState().tools).length>0;u(P&&(((H=(L=N==null?void 0:N.metadata)==null?void 0:L.supported_parameters)==null?void 0:H.includes("tools"))??!1))},k=I=>{h(I.selectedItemType),g(I.selectedItemId)};return C({modelId:Un.getState().selectedModelId}),k({selectedItemId:mn.getState().selectedItemId,selectedItemType:mn.getState().selectedItemType}),Tt.on(Et.INTERACTION_STATUS_CHANGED,E),Tt.on(Et.MODEL_SELECTION_CHANGED,C),Tt.on(Et.CONTEXT_CHANGED,k),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,E),Tt.off(Et.MODEL_SELECTION_CHANGED,C),Tt.off(Et.CONTEXT_CHANGED,k)}},[]);const v=E=>{i(E),!E&&n!==e.maxStepsOverride&&zg(C=>({...C,maxStepsOverride:n}))},x=T.useCallback(E=>{zg(C=>({...C,enabledTools:E(C.enabledTools)}))},[]),w=e.enabledTools.size>0||e.maxStepsOverride!==null,_=s||b===0||d!=="conversation";return l?p.jsxs(jc,{open:a,onOpenChange:v,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Dc,{asChild:!0,children:p.jsx(It,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:_,"aria-label":"Configure Tools",children:p.jsx(fA,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:_?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),p.jsx(Mc,{className:"w-auto p-0",align:"start",children:p.jsx(ERe,{enabledTools:e.enabledTools,setEnabledTools:x,localMaxSteps:n,setLocalMaxSteps:r,conversationId:m,conversationType:d})})]}):null};function TRe(){const e=Ir.getState().registerPromptControl;Nu=new Set,rc=null,e({id:"core-tool-selector",triggerRenderer:()=>gt.createElement(CRe),getMetadata:()=>{if(Nu.size>0||rc!==null)return{enabledTools:Array.from(Nu),...rc!==null&&{maxSteps:rc}}},clearOnSubmit:()=>{Nu=new Set,rc=null,zg(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}const kRe=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:s})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),p.jsx(fd,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:o=>t(o.target.value||null),rows:6,disabled:s,className:"mt-1"}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:s||e===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{children:[p.jsx(Zt,{children:"Default Model (Overrides Parent/Global)"}),p.jsx(z_,{value:n??i,onChange:r,disabled:s}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:s||n===null,children:"Use Inherited/Default"})]})]}),ARe=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:m,setLocalTemp:g,localTopP:b,setLocalTopP:v,localPresence:x,setLocalPresence:w,localFrequency:_,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:k,effectiveTopP:I,effectiveTopK:j,effectivePresencePenalty:N,effectiveFrequencyPenalty:P,isSaving:L})=>{const H=T.useCallback((K,q)=>{const ue=q.target.value,ae=ue===""?null:parseInt(ue,10);(ue===""||!isNaN(ae)&&ae!==null)&&K(ae)},[]),M=T.useCallback((K,q)=>{K(q[0])},[]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),p.jsx(cl,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:K=>g(K[0]),onValueCommit:K=>M(t,K),disabled:L}),p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:L||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",b.toFixed(2),")"]}),p.jsx(cl,{id:"project-top-p",min:0,max:1,step:.01,value:[b],onValueChange:K=>v(K[0]),onValueCommit:K=>M(i,K),disabled:L}),p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:L||a===null,children:["Use Inherited/Default (",(I==null?void 0:I.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(Rn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:K=>H(r,K),min:"1",className:"h-8 text-xs",disabled:L}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:L||n===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Zt,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),p.jsx(Rn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${j??"Default"}`,value:s??"",onChange:K=>H(o,K),min:"1",className:"h-8 text-xs",disabled:L}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>o(null),disabled:L||s===null,children:"Use Inherited/Default"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",x.toFixed(2),")"]}),p.jsx(cl,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[x],onValueChange:K=>w(K[0]),onValueCommit:K=>M(u,K),disabled:L}),p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>u(null),disabled:L||l===null,children:["Use Inherited/Default (",(N==null?void 0:N.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Zt,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",_.toFixed(2),")"]}),p.jsx(cl,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:K=>E(K[0]),onValueCommit:K=>M(h,K),disabled:L}),p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:L||d===null,children:["Use Inherited/Default (",(P==null?void 0:P.toFixed(2))??"N/A",")"]})]})]})},NRe=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var s;const i=((s=r.find(o=>o.id===n))==null?void 0:s.name)??"None";return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(Zt,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),p.jsxs(uc,{value:e??"none",onValueChange:o=>t(o==="none"?null:o),disabled:a||r.length===0,children:[p.jsx(fc,{id:"project-sync-repo",children:p.jsx(dc,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),p.jsxs(hc,{children:[p.jsx(xa,{value:"none",children:p.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(o=>p.jsx(xa,{value:o.id,children:o.name},o.id))]})]}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},RRe=({projectId:e})=>{const t=T.useMemo(()=>[{value:"manage",label:"Manage Files",content:p.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?p.jsx(a3,{}):p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Zt,{children:"Project Filesystem Info"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),p.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",p.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),p.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[p.jsx(Zt,{className:"text-destructive",children:"Danger Zone"}),p.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return p.jsx(hd,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:xt("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},IRe=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=fi(dn(Pe=>({getProjectById:Pe.getProjectById,updateProject:Pe.updateProject}))),i=fi(Pe=>Pe.getEffectiveProjectSettings),s=mn(Pe=>Pe.syncRepos),o=pr(dn(Pe=>({globalSystemPrompt:Pe.globalSystemPrompt,temperature:Pe.temperature,maxTokens:Pe.maxTokens,topP:Pe.topP,topK:Pe.topK,presencePenalty:Pe.presencePenalty,frequencyPenalty:Pe.frequencyPenalty}))),l=Un(Pe=>Pe.selectedModelId),u=ko(Pe=>Pe.setVfsKey),[d,h]=T.useState(null),[m,g]=T.useState(null),[b,v]=T.useState(null),[x,w]=T.useState(null),[_,E]=T.useState(null),[C,k]=T.useState(null),[I,j]=T.useState(null),[N,P]=T.useState(null),[L,H]=T.useState(null),[M,K]=T.useState(.7),[q,ue]=T.useState(1),[ae,te]=T.useState(0),[Y,ie]=T.useState(0),[V,J]=T.useState(!1),[Q,ne]=T.useState("prompt"),{project:he,effectiveSettings:de}=T.useMemo(()=>{const Pe=n?r(n):null,Qe=n?i(n):null;return{project:Pe,effectiveSettings:Qe}},[n,r,i]),Ie=T.useCallback(Pe=>{var Le;if(!Pe)return null;const Qe=r(Pe);return Qe?((Le=Qe.metadata)==null?void 0:Le.syncRepoId)!==void 0?Qe.metadata.syncRepoId:Ie(Qe.parentId):null},[r]),ke=n?Ie(n):null;T.useEffect(()=>{var Pe;e&&n&&he&&de?(u(n),h(he.systemPrompt??null),g(he.modelId??null),v(he.temperature??null),w(he.maxTokens??null),E(he.topP??null),k(he.topK??null),j(he.presencePenalty??null),P(he.frequencyPenalty??null),H(((Pe=he.metadata)==null?void 0:Pe.syncRepoId)??null),K(de.temperature??o.temperature),ue(de.topP??o.topP??1),te(de.presencePenalty??o.presencePenalty??0),ie(de.frequencyPenalty??o.frequencyPenalty??0),ne("prompt")):e||(u(null),h(null),g(null),v(null),w(null),E(null),k(null),j(null),P(null),H(null))},[e,n,he,de,o,u]),T.useEffect(()=>K(b??(de==null?void 0:de.temperature)??o.temperature),[b,de,o.temperature]),T.useEffect(()=>ue(_??(de==null?void 0:de.topP)??o.topP??1),[_,de,o.topP]),T.useEffect(()=>te(I??(de==null?void 0:de.presencePenalty)??o.presencePenalty??0),[I,de,o.presencePenalty]),T.useEffect(()=>ie(N??(de==null?void 0:de.frequencyPenalty)??o.frequencyPenalty??0),[N,de,o.frequencyPenalty]);const Te=async()=>{if(!(!n||!he)){J(!0);try{const Pe=he.parentId?i(he.parentId):{systemPrompt:o.globalSystemPrompt,modelId:l,temperature:o.temperature,maxTokens:o.maxTokens,topP:o.topP,topK:o.topK,presencePenalty:o.presencePenalty,frequencyPenalty:o.frequencyPenalty},Qe=he.parentId?Ie(he.parentId):null,Le={},je={...he.metadata??{}};d!==Pe.systemPrompt?Le.systemPrompt=d:Le.systemPrompt=void 0,m!==Pe.modelId?Le.modelId=m:Le.modelId=void 0,b!==Pe.temperature?Le.temperature=b:Le.temperature=void 0,x!==Pe.maxTokens?Le.maxTokens=x:Le.maxTokens=void 0,_!==Pe.topP?Le.topP=_:Le.topP=void 0,C!==Pe.topK?Le.topK=C:Le.topK=void 0,I!==Pe.presencePenalty?Le.presencePenalty=I:Le.presencePenalty=void 0,N!==Pe.frequencyPenalty?Le.frequencyPenalty=N:Le.frequencyPenalty=void 0,L!==Qe?je.syncRepoId=L:delete je.syncRepoId,Le.metadata=je,await a(n,Le),Ge.success(`Project "${he.name}" settings updated.`),t()}catch(Pe){Ge.error("Failed to save project settings."),console.error("Failed to save project settings:",Pe)}finally{J(!1)}}},Se=T.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:p.jsx(kRe,{systemPrompt:d,setSystemPrompt:h,modelId:m,setModelId:g,effectiveSystemPrompt:(de==null?void 0:de.systemPrompt)??o.globalSystemPrompt,effectiveModelId:(de==null?void 0:de.modelId)??l,isSaving:V})},{value:"params",label:"Parameters",content:p.jsx(ARe,{temperature:b,setTemperature:v,maxTokens:x,setMaxTokens:w,topP:_,setTopP:E,topK:C,setTopK:k,presencePenalty:I,setPresencePenalty:j,frequencyPenalty:N,setFrequencyPenalty:P,localTemp:M,setLocalTemp:K,localTopP:q,setLocalTopP:ue,localPresence:ae,setLocalPresence:te,localFrequency:Y,setLocalFrequency:ie,effectiveTemperature:(de==null?void 0:de.temperature)??o.temperature,effectiveMaxTokens:(de==null?void 0:de.maxTokens)??o.maxTokens,effectiveTopP:(de==null?void 0:de.topP)??o.topP,effectiveTopK:(de==null?void 0:de.topK)??o.topK,effectivePresencePenalty:(de==null?void 0:de.presencePenalty)??o.presencePenalty,effectiveFrequencyPenalty:(de==null?void 0:de.frequencyPenalty)??o.frequencyPenalty,isSaving:V})},{value:"sync",label:"Sync",content:p.jsx(NRe,{syncRepoId:L,setSyncRepoId:H,effectiveSyncRepoId:ke,syncRepos:s,isSaving:V})},{value:"vfs",label:"Filesystem",content:p.jsx(RRe,{projectId:n,projectName:(he==null?void 0:he.name)??null,isSaving:V})}],[d,m,b,x,_,C,I,N,L,de,o,l,V,M,q,ae,Y,ke,s,n,he==null?void 0:he.name]);return p.jsx(D_,{open:e,onOpenChange:t,children:p.jsxs(M_,{className:xt("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[p.jsxs(O_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsxs(F_,{children:["Project Settings: ",he==null?void 0:he.name]}),p.jsx(L_,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),p.jsx(hd,{tabs:Se,initialValue:Q,onValueChange:ne,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsxs(P_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[p.jsx(It,{variant:"outline",onClick:t,disabled:V,children:"Cancel"}),p.jsxs(It,{onClick:Te,disabled:V,children:[V&&p.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function jRe(){const e=Ir.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=Ji.getState();return p.jsx(IRe,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>gt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const DRe=()=>{const{selectedModelId:e,selectModel:t}=Un(dn(l=>({selectedModelId:l.selectedModelId,selectModel:l.selectModel}))),n=Oi(l=>l.setModelId),[r,a]=T.useState(()=>Mn.getState().status==="streaming"),[i,s]=T.useState(e);T.useEffect(()=>{const l=h=>{a(h.status==="streaming")},u=h=>{s(h.modelId),n(h.modelId)},d=Un.getState().selectedModelId;return s(d),n(d),Tt.on(Et.INTERACTION_STATUS_CHANGED,l),Tt.on(Et.MODEL_SELECTION_CHANGED,u),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,l),Tt.off(Et.MODEL_SELECTION_CHANGED,u)}},[n]);const o=l=>{t(l),n(l)};return p.jsx(z_,{value:i,onChange:o,disabled:r})};function MRe(){const e=Ir.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>Un.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(DRe),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const ORe=({initialPromptValue:e,onPromptChange:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(!1),[s,o]=T.useState(null),[l,u]=T.useState(()=>Mn.getState().status==="streaming");T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const b=C=>{u(C.status==="streaming")},v=(C,k)=>{var L;const{getConversationById:I}=mn.getState(),{getEffectiveProjectSettings:j}=fi.getState(),N=pr.getState().globalSystemPrompt,P=k==="project"?C:k==="conversation"?((L=I(C))==null?void 0:L.projectId)??null:null;o(j(P).systemPrompt??N)},x=C=>{v(C.selectedItemId,C.selectedItemType)},w=C=>{var j;const k=mn.getState();(k.selectedItemType==="project"?k.selectedItemId:k.selectedItemType==="conversation"?((j=k.getConversationById(k.selectedItemId))==null?void 0:j.projectId)??null:null)===C.projectId&&v(k.selectedItemId,k.selectedItemType)},_=C=>{if(C.key==="globalSystemPrompt"){const k=mn.getState();v(k.selectedItemId,k.selectedItemType)}},E=mn.getState();return v(E.selectedItemId,E.selectedItemType),Tt.on(Et.INTERACTION_STATUS_CHANGED,b),Tt.on(Et.CONTEXT_CHANGED,x),Tt.on(Et.PROJECT_UPDATED,w),Tt.on(Et.SETTINGS_CHANGED,_),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,b),Tt.off(Et.CONTEXT_CHANGED,x),Tt.off(Et.PROJECT_UPDATED,w),Tt.off(Et.SETTINGS_CHANGED,_)}},[]);const d=T.useCallback(()=>{t(n.trim()),i(!1)},[n,t]),h=T.useCallback(()=>{r(""),t(""),i(!1)},[t]),m=b=>{b&&r(e),i(b)},g=e.trim().length>0;return p.jsxs(jc,{open:a,onOpenChange:m,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Dc,{asChild:!0,children:p.jsx(It,{variant:g?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:l,"aria-label":"Set System Prompt for Next Turn",children:p.jsx(CY,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:g?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),p.jsxs(Mc,{className:"w-80 p-4 space-y-3",align:"start",children:[p.jsx(Zt,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),p.jsx(fd,{id:"turn-system-prompt",placeholder:`Inherited: ${(s==null?void 0:s.substring(0,50))||"Default"}${s&&s.length>50?"...":""}`,value:n,onChange:b=>r(b.target.value),rows:5,className:"text-sm"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx(It,{variant:"outline",size:"sm",onClick:h,disabled:!n.trim(),children:"Clear Override"}),p.jsx(It,{size:"sm",onClick:d,children:"Set for Next Turn"})]})]})]})};let jg="";function PRe(){const e=Ir.getState().registerPromptControl;jg="";const t=n=>{jg=n};e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>gt.createElement(ORe,{initialPromptValue:jg,onPromptChange:t}),getMetadata:()=>{const n=jg.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{jg=""}}),console.log("[Function] Registered Core System Prompt Control")}const FRe=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=Oi(dn(w=>({structuredOutputJson:w.structuredOutputJson,setStructuredOutputJson:w.setStructuredOutputJson}))),[n,r]=T.useState(!1),[a,i]=T.useState(e??""),[s,o]=T.useState(""),[l,u]=T.useState([]),d=T.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),Ge.success("Structured output applied for next turn.")}catch{Ge.error("Invalid JSON format.")}},[a,t]),h=T.useCallback(()=>{i(""),t(null),r(!1),Ge.info("Structured output cleared.")},[t]),m=T.useCallback(()=>{if(!s.trim()){Ge.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const w={id:Date.now().toString(),name:s.trim(),json:a};u(_=>[..._,w]),o(""),Ge.success(`"${w.name}" saved to library.`)}catch{Ge.error("Cannot save invalid JSON to library.")}},[a,s]),g=T.useCallback(w=>{i(w.json),t(w.json),r(!1),Ge.success(`Loaded "${w.name}" from library.`)},[t]),b=T.useCallback(w=>{u(_=>_.filter(E=>E.id!==w)),Ge.info("Item removed from library.")},[]);T.useEffect(()=>{n&&i(e??"")},[n,e]);const v=[{value:"entry",label:"Entry",content:p.jsxs("div",{className:"space-y-3 p-1",children:[p.jsx(Zt,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),p.jsx(fd,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:w=>i(w.target.value),rows:8,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-between items-end gap-2",children:[p.jsxs("div",{className:"flex-grow space-y-1",children:[p.jsx(Zt,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),p.jsx(Rn,{id:"structured-output-name",value:s,onChange:w=>o(w.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),p.jsxs(It,{size:"sm",variant:"outline",onClick:m,disabled:!s.trim()||!a.trim(),className:"h-8",children:[p.jsx(Ef,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsx(It,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),p.jsx(It,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:p.jsx("div",{className:"space-y-2 p-1",children:l.length===0?p.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(w=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[p.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:w.name}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(It,{size:"sm",variant:"outline",onClick:()=>g(w),className:"h-7 px-2 text-xs",children:"Use"}),p.jsx(It,{size:"icon",variant:"ghost",onClick:()=>b(w.id),className:"h-7 w-7 text-destructive",children:p.jsx(Zi,{className:"h-3.5 w-3.5"})})]})]},w.id))})}],x=!!e;return p.jsxs(jc,{open:n,onOpenChange:r,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Dc,{asChild:!0,children:p.jsx(It,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:p.jsx(I8,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:x?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),p.jsx(Mc,{className:"w-[450px] p-0",align:"start",children:p.jsx(hd,{tabs:v,defaultValue:"entry"})})]})},LRe=()=>{const[e,t]=T.useState(!0);return T.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=Un.getState(),i=a(),s=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,o=Array.isArray(s)&&s.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${o}`),t(o)};return n({modelId:Un.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${Et.MODEL_SELECTION_CHANGED}`),Tt.on(Et.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),Tt.off(Et.MODEL_SELECTION_CHANGED,n)}},[]),e?p.jsx(FRe,{}):null};function BRe(){const e=Ir.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>gt.createElement(LRe),getParameters:()=>{const{structuredOutputJson:t}=Oi.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{Oi.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const rG=4,fT=e=>{let t=0;return e.forEach(n=>{var r,a,i,s;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(s=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||s.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/rG)},$Re=()=>{const[e,t]=T.useState(""),[n,r]=T.useState(0),[a,i]=T.useState([]),[s,o]=T.useState(null),[l,u]=T.useState(0);T.useEffect(()=>{const v=gc.getState(),x=Un.getState(),w=Mn.getState();if(i(v.attachedFilesMetadata),o(x.selectedModelId),w.currentConversationId){const j=w.interactions.filter(N=>N.status==="COMPLETED");r(fT(j))}else r(0);const _=j=>{t(j.value)},E=j=>{i(j.files)},C=j=>{console.log(j),o(j.modelId)},k=()=>{const j=Mn.getState();if(j.currentConversationId){const N=j.interactions.filter(P=>P.status==="COMPLETED");r(fT(N))}},I=()=>{const j=Mn.getState();if(j.currentConversationId){const N=j.interactions.filter(P=>P.status==="COMPLETED");r(fT(N))}else r(0)};return Tt.on(Et.PROMPT_INPUT_CHANGE,_),Tt.on(Et.ATTACHED_FILES_CHANGED,E),Tt.on(Et.MODEL_SELECTION_CHANGED,C),Tt.on(Et.INTERACTION_COMPLETED,k),Tt.on(Et.CONTEXT_CHANGED,I),()=>{Tt.off(Et.PROMPT_INPUT_CHANGE,_),Tt.off(Et.ATTACHED_FILES_CHANGED,E),Tt.off(Et.MODEL_SELECTION_CHANGED,C),Tt.off(Et.INTERACTION_COMPLETED,k),Tt.off(Et.CONTEXT_CHANGED,I)}},[]),T.useEffect(()=>{var N;if(!s){u(0);return}const{dbProviderConfigs:v,dbApiKeys:x}=Un.getState(),{providerId:w,modelId:_}=Ac(s);if(!w||!_){u(0);return}const E=v.find(P=>P.id===w);if(!E){u(0);return}const C=x.find(P=>P.id===E.apiKeyId),k=xA(E,_,C==null?void 0:C.value),I=k==null?void 0:k.metadata,j=((N=I==null?void 0:I.top_provider)==null?void 0:N.context_length)??(I==null?void 0:I.context_length)??0;u(j)},[s]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:m}=T.useMemo(()=>{const v=new TextEncoder().encode(e).length,x=a.reduce((C,k)=>C+k.size,0),w=Math.ceil((v+x)/rG),_=n+w,E=l?Math.min(100,Math.round(_/l*100)):0;return{estimatedInputTokens:w,totalEstimatedTokens:_,contextPercentage:E}},[e,a,n,l]),g=T.useMemo(()=>m>85?"text-red-600 dark:text-red-500":m>70?"text-orange-500 dark:text-orange-400":m>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[m]);if(!s||l===0)return null;const b=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${m}%) [History: ${n}, Input: ${d}]`;return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:p.jsx(qK,{className:xt("h-3 w-3 fill-current",g)})})}),p.jsx(Yn,{side:"top",children:b})]})})};function zRe(){const e=Ir.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>gt.createElement($Re),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const URe=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>Mn.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var v,x;if(!m.modelId){o(!1);return}const{getSelectedModel:g}=Un.getState(),b=g();o(((x=(v=b==null?void 0:b.metadata)==null?void 0:v.supported_parameters)==null?void 0:x.includes("reasoning"))??!1)};return h({modelId:Un.getState().selectedModelId}),Tt.on(Et.INTERACTION_STATUS_CHANGED,d),Tt.on(Et.MODEL_SELECTION_CHANGED,h),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,d),Tt.off(Et.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:p.jsx(Mp,{className:xt("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:l?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function VRe(){const e=Ir.getState().registerPromptControl,t=Oi.getState(),n=r=>{t.setReasoningEnabled(r)};e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>gt.createElement(URe,{initialEnabled:t.reasoningEnabled,onToggle:n}),getMetadata:()=>{const{reasoningEnabled:r}=Oi.getState();return r===!0?{reasoningEnabled:!0}:void 0},clearOnSubmit:()=>{t.setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const HRe=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>Mn.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var x;if(!m.modelId){o(!1);return}const{getSelectedModel:g}=Un.getState(),b=g(),v=((x=b==null?void 0:b.metadata)==null?void 0:x.supported_parameters)??[];o(v.includes("web_search")||v.includes("web_search_options"))};return h({modelId:Un.getState().selectedModelId}),Tt.on(Et.INTERACTION_STATUS_CHANGED,d),Tt.on(Et.MODEL_SELECTION_CHANGED,h),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,d),Tt.off(Et.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:p.jsx(wo,{className:xt("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:l?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function qRe(){const e=Ir.getState().registerPromptControl,t=Oi.getState(),n=r=>{t.setWebSearchEnabled(r)};e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>gt.createElement(HRe,{initialEnabled:t.webSearchEnabled,onToggle:n}),getParameters:()=>{const{webSearchEnabled:r}=Oi.getState();return r===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{t.setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const GRe=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r})=>{const{rules:a,tags:i,getRulesForTag:s}=Tc(dn(_=>({rules:_.rules,tags:_.tags,getRulesForTag:_.getRulesForTag}))),[o,l]=T.useState(""),[u,d]=T.useState(""),h=T.useMemo(()=>{const _=o.toLowerCase();return _?i.filter(E=>{var C;return E.name.toLowerCase().includes(_)||((C=E.description)==null?void 0:C.toLowerCase().includes(_))}):i},[i,o]),m=T.useMemo(()=>{const _=u.toLowerCase();return _?a.filter(E=>E.name.toLowerCase().includes(_)||E.content.toLowerCase().includes(_)||E.type.toLowerCase().includes(_)):a},[a,u]),g=T.useCallback((_,E)=>{n(_,E)},[n]),b=T.useCallback((_,E)=>{r(_,E)},[r]),v=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(wo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter tags...",value:o,onChange:_=>l(_.target.value),className:"pl-8 h-9"})]}),p.jsx(Ku,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No tags defined.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(_=>{const E=s(_.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(dy,{id:`tag-activate-${_.id}`,checked:e.has(_.id),onCheckedChange:C=>g(_.id,!!C),className:"mt-0.5"}),p.jsxs(Zt,{htmlFor:`tag-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),_.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:_.description}),E.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",E.map(C=>C.name).join(", ")]})]})]})},_.id)})})})]}),x=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(wo,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter rules...",value:u,onChange:_=>d(_.target.value),className:"pl-8 h-9"})]}),p.jsx(Ku,{className:"h-64 border rounded-md p-2 bg-background/50",children:m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:a.length===0?"No rules defined.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(_=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(dy,{id:`rule-activate-${_.id}`,checked:t.has(_.id),onCheckedChange:E=>b(_.id,!!E),className:"mt-0.5"}),p.jsxs(Zt,{htmlFor:`rule-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",_.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",_.content]})]})]})},_.id))})})]}),w=[{value:"tags",label:"Activate Tags",content:v()},{value:"rules",label:"Activate Rules",content:x()}];return p.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:p.jsx(hd,{tabs:w,defaultValue:"tags"})})};let nf=new Set,rf=new Set,Ug=()=>{};const WRe=()=>{const[e,t]=T.useState({activeTagIds:nf,activeRuleIds:rf}),[n,r]=T.useState(!1),[a,i]=T.useState(()=>Mn.getState().status==="streaming"),s=Tc(h=>h.rules.length>0||h.tags.length>0);T.useEffect(()=>(Ug=h=>{const m=h({activeTagIds:nf,activeRuleIds:rf});nf=m.activeTagIds,rf=m.activeRuleIds,t(m)},t({activeTagIds:nf,activeRuleIds:rf}),()=>{Ug=()=>{}}),[]),T.useEffect(()=>{const h=m=>{i(m.status==="streaming")};return Tt.on(Et.INTERACTION_STATUS_CHANGED,h),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,h)}},[]);const o=T.useCallback((h,m)=>{Ug(g=>{const b=new Set(g.activeTagIds);return m?b.add(h):b.delete(h),{...g,activeTagIds:b}})},[]),l=T.useCallback((h,m)=>{Ug(g=>{const b=new Set(g.activeRuleIds);return m?b.add(h):b.delete(h),{...g,activeRuleIds:b}})},[]),u=e.activeTagIds.size>0||e.activeRuleIds.size>0,d=a||!s;return s?p.jsxs(jc,{open:n,onOpenChange:r,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Dc,{asChild:!0,children:p.jsx(It,{variant:u?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d,"aria-label":"Configure Rules & Tags for Next Turn",children:p.jsx(Gw,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:u?`Rules/Tags Active (${e.activeTagIds.size} tags, ${e.activeRuleIds.size} rules)`:"Activate Rules/Tags (Next Turn)"})]})}),p.jsx(Mc,{className:"w-auto p-0",align:"start",children:p.jsx(GRe,{activeTagIds:e.activeTagIds,activeRuleIds:e.activeRuleIds,onToggleTag:o,onToggleRule:l})})]}):null};function KRe(){const e=Ir.getState().registerPromptControl;nf=new Set,rf=new Set,e({id:"core-rules-tags",status:()=>Tc.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(WRe),getMetadata:()=>{const t=Array.from(nf),n=Array.from(rf);if(t.length>0||n.length>0)return{activeTagIds:t,activeRuleIds:n}},clearOnSubmit:()=>{nf=new Set,rf=new Set,Ug(()=>({activeTagIds:new Set,activeRuleIds:new Set}))},show:()=>{const t=Tc.getState();return t.rules.length>0||t.tags.length>0}}),console.log("[Function] Registered Core Rules & Tags Control")}const ZRe=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>Mn.getState().status==="streaming"),[s,o]=T.useState(!1),l=pr(d=>d.autoTitleEnabled);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=()=>{const m=Mn.getState(),g=m.currentConversationId!==null&&m.interactions.filter(b=>b.conversationId===m.currentConversationId).length===0;o(g),!g&&n&&u()};return h(),Tt.on(Et.INTERACTION_STATUS_CHANGED,d),Tt.on(Et.CONTEXT_CHANGED,h),Tt.on(Et.INTERACTION_COMPLETED,h),()=>{Tt.off(Et.INTERACTION_STATUS_CHANGED,d),Tt.off(Et.CONTEXT_CHANGED,h),Tt.off(Et.INTERACTION_COMPLETED,h)}},[n]);const u=()=>{const d=!n;r(d),t(d)};return!l||!s?null:p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:p.jsx(F8,{className:xt("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})})};let Dg=!1;function YRe(){const e=Ir.getState().registerPromptControl;Dg=!1;const t=n=>{Dg=n};e({id:"core-auto-title",status:()=>"ready",triggerRenderer:()=>gt.createElement(ZRe,{initialEnabled:Dg,onToggle:t}),getMetadata:()=>Dg?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{Dg=!1}}),console.log("[Function] Registered Core Auto-Title Control")}const XRe=[eEe,uAe,cAe,jRe,MRe,YRe,zRe,VRe,qRe,yAe,lRe,KRe,PRe,TRe,hAe,BRe,uRe,yRe,SRe];function JRe(){return p.jsxs(Y2e,{children:[p.jsx(W2e,{}),p.jsx(G2e,{}),p.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:p.jsx("main",{className:"flex-grow overflow-hidden",children:p.jsx($2e,{controls:XRe})})})]})}JY();OW.createRoot(document.getElementById("root")).render(p.jsx(gt.StrictMode,{children:p.jsx(JRe,{})}));
